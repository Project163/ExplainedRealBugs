<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:17:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-31974] JobManager crashes after KubernetesClientException exception with FatalExitExceptionHandler</title>
                <link>https://issues.apache.org/jira/browse/FLINK-31974</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When resource quota limit is reached JobManager will throw&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.KubernetesClientException: Failure executing: POST at: &lt;a href=&quot;https://10.96.0.1/api/v1/namespaces/my-namespace/pods&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://10.96.0.1/api/v1/namespaces/my-namespace/pods&lt;/a&gt;. Message: Forbidden!Configured service account doesn&apos;t have access. Service account may have been revoked. pods &quot;my-namespace-flink-cluster-taskmanager-1-2&quot; is forbidden: exceeded quota: my-namespace-resource-quota, requested: limits.cpu=3, used: limits.cpu=12100m, limited: limits.cpu=13.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In &lt;b&gt;1.16.1 , this is handled gracefully&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2023-04-28 22:07:24,631 WARN &#160;org.apache.flink.runtime.resourcemanager.active.ActiveResourceManager [] - Failed requesting worker with resource spec WorkerResourceSpec \{cpuCores=1.0, taskHeapSize=25.600mb (26843542 bytes), taskOffHeapSize=0 bytes, networkMemSize=64.000mb (67108864 bytes), managedMemSize=230.400mb (241591914 bytes), numSlots=4}, current pending count: 0
java.util.concurrent.CompletionException: io.fabric8.kubernetes.client.KubernetesClientException: Failure executing: POST at: https:&lt;span class=&quot;code-comment&quot;&gt;//10.96.0.1/api/v1/namespaces/my-namespace/pods. Message: Forbidden!Configured service account doesn&apos;t have access. Service account may have been revoked. pods &lt;span class=&quot;code-quote&quot;&gt;&quot;my-namespace-flink-cluster-taskmanager-1-138&quot;&lt;/span&gt; is forbidden: exceeded quota: my-namespace-resource-quota, requested: limits.cpu=3, used: limits.cpu=12100m, limited: limits.cpu=13.
&lt;/span&gt;&#160; &#160; &#160; &#160; at java.util.concurrent.CompletableFuture.encodeThrowable(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.CompletableFuture.completeThrowable(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.CompletableFuture$AsyncRun.run(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source) ~[?:?]
Caused by: io.fabric8.kubernetes.client.KubernetesClientException: Failure executing: POST at: https:&lt;span class=&quot;code-comment&quot;&gt;//10.96.0.1/api/v1/namespaces/my-namespace/pods. Message: Forbidden!Configured service account doesn&apos;t have access. Service account may have been revoked. pods &lt;span class=&quot;code-quote&quot;&gt;&quot;my-namespace-flink-cluster-taskmanager-1-138&quot;&lt;/span&gt; is forbidden: exceeded quota: my-namespace-resource-quota, requested: limits.cpu=3, used: limits.cpu=12100m, limited: limits.cpu=13.
&lt;/span&gt;&#160; &#160; &#160; &#160; at io.fabric8.kubernetes.client.dsl.base.OperationSupport.requestFailure(OperationSupport.java:684) ~[flink-dist-1.16.1.jar:1.16.1]
&#160; &#160; &#160; &#160; at io.fabric8.kubernetes.client.dsl.base.OperationSupport.requestFailure(OperationSupport.java:664) ~[flink-dist-1.16.1.jar:1.16.1]
&#160; &#160; &#160; &#160; at io.fabric8.kubernetes.client.dsl.base.OperationSupport.assertResponseCode(OperationSupport.java:613) ~[flink-dist-1.16.1.jar:1.16.1]
&#160; &#160; &#160; &#160; at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:558) ~[flink-dist-1.16.1.jar:1.16.1]
&#160; &#160; &#160; &#160; at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:521) ~[flink-dist-1.16.1.jar:1.16.1]
&#160; &#160; &#160; &#160; at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleCreate(OperationSupport.java:308) ~[flink-dist-1.16.1.jar:1.16.1]
&#160; &#160; &#160; &#160; at io.fabric8.kubernetes.client.dsl.base.BaseOperation.handleCreate(BaseOperation.java:644) ~[flink-dist-1.16.1.jar:1.16.1]
&#160; &#160; &#160; &#160; at io.fabric8.kubernetes.client.dsl.base.BaseOperation.handleCreate(BaseOperation.java:83) ~[flink-dist-1.16.1.jar:1.16.1]
&#160; &#160; &#160; &#160; at io.fabric8.kubernetes.client.dsl.base.CreateOnlyResourceOperation.create(CreateOnlyResourceOperation.java:61) ~[flink-dist-1.16.1.jar:1.16.1]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.kubeclient.Fabric8FlinkKubeClient.lambda$createTaskManagerPod$1(Fabric8FlinkKubeClient.java:163) ~[flink-dist-1.16.1.jar:1.16.1]
&#160; &#160; &#160; &#160; ... 4 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But , &lt;b&gt;in Flink 1.17.0 , Job Manager crashes&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2023-04-28 20:50:50,534 ERROR org.apache.flink.util.FatalExitExceptionHandler &#160; &#160; &#160; &#160; &#160; &#160; &#160;[] - FATAL: &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-15&apos;&lt;/span&gt; produced an uncaught exception. Stopping the process...
java.util.concurrent.CompletionException: org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.KubernetesClientException: Failure executing: POST at: https:&lt;span class=&quot;code-comment&quot;&gt;//10.96.0.1/api/v1/namespaces/my-namespace/pods. Message: Forbidden!Configured service account doesn&apos;t have access. Service account may have been revoked. pods &lt;span class=&quot;code-quote&quot;&gt;&quot;my-namespace-flink-cluster-taskmanager-1-2&quot;&lt;/span&gt; is forbidden: exceeded quota: my-namespace-resource-quota, requested: limits.cpu=3, used: limits.cpu=12100m, limited: limits.cpu=13.
&lt;/span&gt;&#160; &#160; &#160; &#160; at java.util.concurrent.CompletableFuture.encodeThrowable(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.CompletableFuture.completeThrowable(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.CompletableFuture$AsyncRun.run(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source) ~[?:?]
Caused by: org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.KubernetesClientException: Failure executing: POST at: https:&lt;span class=&quot;code-comment&quot;&gt;//10.96.0.1/api/v1/namespaces/my-namespace/pods. Message: Forbidden!Configured service account doesn&apos;t have access. Service account may have been revoked. pods &lt;span class=&quot;code-quote&quot;&gt;&quot;my-namespace-flink-cluster-taskmanager-1-2&quot;&lt;/span&gt; is forbidden: exceeded quota: my-namespace-resource-quota, requested: limits.cpu=3, used: limits.cpu=12100m, limited: limits.cpu=13.
&lt;/span&gt;&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.requestFailure(OperationSupport.java:684) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.requestFailure(OperationSupport.java:664) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.assertResponseCode(OperationSupport.java:613) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:558) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:521) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleCreate(OperationSupport.java:308) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.BaseOperation.handleCreate(BaseOperation.java:644) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.BaseOperation.handleCreate(BaseOperation.java:83) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.CreateOnlyResourceOperation.create(CreateOnlyResourceOperation.java:61) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.kubeclient.Fabric8FlinkKubeClient.lambda$createTaskManagerPod$1(Fabric8FlinkKubeClient.java:163) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; ... 4 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13534509">FLINK-31974</key>
            <summary>JobManager crashes after KubernetesClientException exception with FatalExitExceptionHandler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gyfora">Gyula Fora</assignee>
                                    <reporter username="sergiosp">Sergio Sainz</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 28 Apr 2023 22:18:19 +0000</created>
                <updated>Thu, 1 Jun 2023 18:12:28 +0000</updated>
                            <resolved>Thu, 1 Jun 2023 18:12:28 +0000</resolved>
                                    <version>1.17.0</version>
                    <version>1.18.0</version>
                                    <fixVersion>1.18.0</fixVersion>
                    <fixVersion>1.17.2</fixVersion>
                                    <component>Deployment / Kubernetes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="17718958" author="mapohl" created="Wed, 3 May 2023 15:04:49 +0000"  >&lt;p&gt;Thanks for reporting. This should be caused by the changes that were introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-30908&quot; title=&quot;Fatal error in ResourceManager caused YARNSessionFIFOSecuredITCase.testDetachedMode to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-30908&quot;&gt;&lt;del&gt;FLINK-30908&lt;/del&gt;&lt;/a&gt;. Could you share the logs that are printed before the fatal error is reported? There should be additional logs related to the error.&lt;/p&gt;</comment>
                            <comment id="17718964" author="mapohl" created="Wed, 3 May 2023 15:17:56 +0000"  >&lt;p&gt;I&apos;m still wondering what the desired behavior in that case is. The k8s cluster doesn&apos;t provide the resources so that the Flink cluster would be able to handle the parallelism of the submitted job. In my opinion, it feels like the fatal error is correct. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xtsong&quot; class=&quot;user-hover&quot; rel=&quot;xtsong&quot;&gt;xtsong&lt;/a&gt; what&apos;s your take on that one?&lt;/p&gt;</comment>
                            <comment id="17719116" author="xintongsong" created="Thu, 4 May 2023 02:03:32 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergiosp&quot; class=&quot;user-hover&quot; rel=&quot;sergiosp&quot;&gt;sergiosp&lt;/a&gt; for reporting, and thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; for looking into this.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The k8s cluster doesn&apos;t provide the resources so that the Flink cluster would be able to handle the parallelism of the submitted job.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is not always true. For streaming workloads in reactive mode, it is expected that not all requested resources can be obtained, and as long as the minimum resource requirements are fulfilled the job can be executed. Also for batch workloads, ideally a job can be executed with a single slot, because tasks don&apos;t have to be executed at the same time.&lt;/p&gt;

&lt;p&gt;Moreover, there&apos;s a timeout at the JobMaster side that will fail the job if resources cannot be fulfilled within a certain time, with the execution mode and minimum resource requirements taken into consideration.&lt;/p&gt;

&lt;p&gt;In most cases, the phenomenon for not obtaining a resource is that Flink can create the meta of desired pod at K8s API Server and will keep waiting for the K8s cluster to schedule and bring up the pod. However, in this case it throws an exception, which was not covered by the current implementation.&lt;/p&gt;

&lt;p&gt;I think we may identify the specific error and not treat it as fatal error. Instead, we can pass this information to JobMaster via &lt;tt&gt;JobMasterGateway#notifyNotEnoughResourcesAvailable&lt;/tt&gt; and rely on JobMaster to decide whether should fail the job.&lt;/p&gt;

&lt;p&gt;WDYT?&lt;/p&gt;</comment>
                            <comment id="17719144" author="weijie guo" created="Thu, 4 May 2023 04:30:16 +0000"  >&lt;p&gt;Thanks Xintong for the analysis and proposal, It makes sense to me for relying JobMaster to decide whether to fail the job or not. IMO, The exception mentioned in the ticket should not arbitrarily cause JM to crash, especially for batch workload. If this is reasonable, I&apos;m willing to fix it.&lt;/p&gt;</comment>
                            <comment id="17719176" author="mapohl" created="Thu, 4 May 2023 07:06:56 +0000"  >&lt;p&gt;Sounds good to me, too.&lt;/p&gt;

&lt;p&gt;Just for me to understand: With &quot;we can pass this information to JobMaster&quot; you mean letting the SlotManager implementations deal with the timeout you mentioned that occurs when we fail to create a new worker. That way, we only need to identify the &lt;tt&gt;KubernetesClientException&lt;/tt&gt; in &lt;tt&gt;ResourceManagerDriver#requestResource&lt;/tt&gt; and print a warning to make the user aware. I&apos;m asking because I struggled to find a code path between the JobMaster and the ResourceManager that would enable us to inform the JobMaster about this specific error which is how I understood &quot;passing the information&quot; in the first place.&lt;/p&gt;</comment>
                            <comment id="17719187" author="xintongsong" created="Thu, 4 May 2023 07:30:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt;,&lt;br/&gt;
There&apos;re two paths for JobMaster to handle the situation that resources are not obtained.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;With the timeout&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;JobMasterGateway#notifyNotEnoughResourcesAvailable&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The second path is for the job to fail earlier rather than waiting for the timeout, if SlotManager knows that the resource cannot be obtained and it makes no sense to wait, e.g., in a standalone cluster. I think the question is, after we identify the specific error that suggest a quota exceeding, how do we pass this information all the way from &lt;tt&gt;KubernetesResourceManagerDriver&lt;/tt&gt; to &lt;tt&gt;ResourceManager&lt;/tt&gt; and to &lt;tt&gt;SlotManager&lt;/tt&gt;. I think it shouldn&apos;t be complex to complete the missing part of the path.&lt;/p&gt;</comment>
                            <comment id="17719196" author="gyfora" created="Thu, 4 May 2023 08:02:55 +0000"  >&lt;p&gt;Somewhat of a side comment:&lt;br/&gt;
I think in native kubernetes integration case we should basically never give these fatal exceptions. Even if there is a missing serviceaccount/permission/timeout we should keep retrying because more often than not these are actually temporary (even if they need some time to be resolved by the operating platform team).&lt;/p&gt;

&lt;p&gt;A job fatal error requires a complete redeployment which is not what most users want. For standalone this may be different but there we will get different errors.&lt;/p&gt;</comment>
                            <comment id="17719209" author="xintongsong" created="Thu, 4 May 2023 08:35:50 +0000"  >&lt;p&gt;Not sure about never giving fatal exceptions. I personally would lean towards a whitelist approach, where Flink only handles a certain set of errors that are known to be non-fatal, and by default fail for whatever errors that it doesn&apos;t recognize and doesn&apos;t know how to handle. My concern for keeping retrying by default is that, when there&apos;s a large Kubernetes cluster with lot&apos;s of applications, this approach would exacerbate the burden on the Kubernetes API server and sometimes make the temporary outage even harder to recovery. I&apos;ve seen that for many times in production.&lt;/p&gt;</comment>
                            <comment id="17719213" author="gyfora" created="Thu, 4 May 2023 08:47:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xtsong&quot; class=&quot;user-hover&quot; rel=&quot;xtsong&quot;&gt;xtsong&lt;/a&gt; what errors would you consider actually fatal in Kubernetes world?&lt;/p&gt;

&lt;p&gt;From my perspective I would like to treat almost every kubernetes error non fatal. At least this should be configurable because as you say some may prefer shuttind down the flink jobs (fatal) and some (we for instance) would like to retry everything based on the restart strategy.&lt;/p&gt;</comment>
                            <comment id="17719228" author="xintongsong" created="Thu, 4 May 2023 09:22:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gyfora&quot; class=&quot;user-hover&quot; rel=&quot;gyfora&quot;&gt;gyfora&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;IMO, errors that Flink cannot recover from by itself should be considered fatal. E.g., for a permission issue, if not provided the details that it&apos;s due to reaching the quota limit, I don&apos;t see how Flink can fix that by itself. I would be fine with Flink trying to improve how it handles various errors based on understanding of what the errors mean. However, I&apos;d be hesitate about to simply retry for arbitrary errors.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;because more often than not these are actually temporary&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;TBH, my observations are to the contrary. Might because of differences between our production environments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;At least this should be configurable&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Normally, I&apos;d avoid introducing new configuration unless absolutely necessary. In this case, if you believe it worths the complexity not to trigger a re-deployment upon arbitrary errors, I&apos;d be fine with making it configurable.&lt;/p&gt;

&lt;p&gt;I&apos;m still trying to understand why re-deployment upon API server outage is a big deal. Is it because the outage happens a lot in your production environment?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;retry everything based on the restart strategy&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I believe restart strategy only controls behaviors upon job failures. An error thrown from the interactions between the resource manager and the kubernetes cluster would not invoke the restart strategy. Unless you mean waiting for the resource allocation timeout.&lt;/p&gt;</comment>
                            <comment id="17719247" author="gyfora" created="Thu, 4 May 2023 10:06:58 +0000"  >&lt;p&gt;Flink treats only very few errors fatal. IO errors, connector (source/sink ) errors etc all cause job restarts and in many cases &quot;Flink cannot recover from by itself&quot;. You actually expect the error to be temporary and hopefully not get it after the restart. So I think it would be generally inconsistent with the current error handling behaviour if resource manager errors would simply let the job die fatally and not retry in the same way.&lt;/p&gt;

&lt;p&gt;So I am mostly looking at this from the user perspective. Flink jobs/clusters should be resilient and keep retrying in case of errors and should not give up especially for streaming workloads. This is how it works now and this what most users expect I think.&lt;/p&gt;</comment>
                            <comment id="17719249" author="gyfora" created="Thu, 4 May 2023 10:08:01 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbalassi&quot; class=&quot;user-hover&quot; rel=&quot;mbalassi&quot;&gt;mbalassi&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mxm&quot; class=&quot;user-hover&quot; rel=&quot;mxm&quot;&gt;mxm&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thw&quot; class=&quot;user-hover&quot; rel=&quot;thw&quot;&gt;thw&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17719275" author="mbalassi" created="Thu, 4 May 2023 11:17:11 +0000"  >&lt;p&gt;In the specific case I much prefer the behaviour exhibited by 1.16.1. Resource quota not being available changes dynamically, if the JobManager kept retrying (ideally with a backoff) it is not unreasonable to expect that eventually it could succeed in most real-world scenarios. Adding some guardrails around this (if a minimum parallelism is not satisfied fail instead, if a max timeout is reached fail etc) to avoid ending up with many small jobs competing for insufficient resources and wasting capacity would be acceptable to me, but outright failing on the first try is more a bug than a feature imho. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17719331" author="xintongsong" created="Thu, 4 May 2023 13:43:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gyfora&quot; class=&quot;user-hover&quot; rel=&quot;gyfora&quot;&gt;gyfora&lt;/a&gt;,&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Flink treats only very few errors fatal. IO errors, connector (source/sink ) errors etc all cause job restarts and in many cases &quot;Flink cannot recover from by itself&quot;. You actually expect the error to be temporary and hopefully not get it after the restart. So I think it would be generally inconsistent with the current error handling behaviour if resource manager errors would simply let the job die fatally and not retry in the same way.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think the difference here is that, for IO errors and connector errors, it affects the job but not the Flink cluster / deployment. Thinking of a session cluster, we should not fail the cluster for an error from a single job. But for resource manager interacting with Kubernetes API server, this is a cluster behavior and conceptually we don&apos;t distinguish resources for individual jobs until the slots are allocated. Moreover, it&apos;s possible that multiple jobs share the same resource (pod). One could argue that in application mode the cluster / deployment is equivalent to the job. However, the cluster mode (session / application) is transparent to the resource manager.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Flink jobs/clusters should be resilient and keep retrying in case of errors and should not give up especially for streaming workloads.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is different from the feedback that I get from our production. But I can understand if that&apos;s what some of the users want. So I guess maybe it worth a configuration option as you suggested.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbalassi&quot; class=&quot;user-hover&quot; rel=&quot;mbalassi&quot;&gt;mbalassi&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;+1 to what you said about the specific case. I think there&apos;s a consensus on reaching quota limit should not be treated as fatal errors.&lt;/p&gt;</comment>
                            <comment id="17719355" author="thw" created="Thu, 4 May 2023 14:24:16 +0000"  >&lt;p&gt;There are many cases where errors are transient. This specific case is actually quite obvious, the resource availability on a large cluster is changing constantly. A pod may not be scheduled now but few seconds later. Other k8s related issues can also be transient, for example a failed request due to rate limiting will likely succeed soon after and we would actually make things worse by not following a backoff/retry strategy and simply letting the job fail. I&apos;m also leaning more towards retry by default strategy and identify the cases that should be fatal error.&lt;/p&gt;</comment>
                            <comment id="17719525" author="sergiosp" created="Thu, 4 May 2023 20:48:04 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; - let me setup a new cluster later on to get the full logs. Meanwhile, please find the thread dump from the Flink 1.17.0 crash:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2023-04-28 20:50:50,305 INFO &#160;org.apache.flink.runtime.resourcemanager.slotmanager.DeclarativeSlotManager [] - Received resource requirements from job 0a97c80a173b7ebb619c5b030b607520: [ResourceRequirement{resourceProfile=ResourceProfile{UNKNOWN}, numberOfRequiredSlots=1}]
...
2023-04-28 20:50:50,534 ERROR org.apache.flink.util.FatalExitExceptionHandler &#160; &#160; &#160; &#160; &#160; &#160; &#160;[] - FATAL: &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-15&apos;&lt;/span&gt; produced an uncaught exception. Stopping the process...
java.util.concurrent.CompletionException: org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.KubernetesClientException: Failure executing: POST at: https:&lt;span class=&quot;code-comment&quot;&gt;//10.96.0.1/api/v1/namespaces/env-my-namespace/pods. Message: Forbidden!Configured service account doesn&apos;t have access. Service account may have been revoked. pods &lt;span class=&quot;code-quote&quot;&gt;&quot;my-namespace-flink-cluster-taskmanager-1-2&quot;&lt;/span&gt; is forbidden: exceeded quota: my-namespace-resource-quota, requested: limits.cpu=3, used: limits.cpu=12100m, limited: limits.cpu=13.
&lt;/span&gt;&#160; &#160; &#160; &#160; at java.util.concurrent.CompletableFuture.encodeThrowable(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.CompletableFuture.completeThrowable(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.CompletableFuture$AsyncRun.run(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source) ~[?:?]
Caused by: org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.KubernetesClientException: Failure executing: POST at: https:&lt;span class=&quot;code-comment&quot;&gt;//10.96.0.1/api/v1/namespaces/env-my-namespace/pods. Message: Forbidden!Configured service account doesn&apos;t have access. Service account may have been revoked. pods &lt;span class=&quot;code-quote&quot;&gt;&quot;my-namespace-flink-cluster-taskmanager-1-2&quot;&lt;/span&gt; is forbidden: exceeded quota: my-namespace-resource-quota, requested: limits.cpu=3, used: limits.cpu=12100m, limited: limits.cpu=13.
&lt;/span&gt;&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.requestFailure(OperationSupport.java:684) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.requestFailure(OperationSupport.java:664) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.assertResponseCode(OperationSupport.java:613) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:558) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:521) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleCreate(OperationSupport.java:308) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.BaseOperation.handleCreate(BaseOperation.java:644) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.BaseOperation.handleCreate(BaseOperation.java:83) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.shaded.io.fabric8.kubernetes.client.dsl.base.CreateOnlyResourceOperation.create(CreateOnlyResourceOperation.java:61) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.kubeclient.Fabric8FlinkKubeClient.lambda$createTaskManagerPod$1(Fabric8FlinkKubeClient.java:163) ~[flink-dist-1.17.0.jar:1.17.0]
&#160; &#160; &#160; &#160; ... 4 more
2023-04-28 20:50:50,602 ERROR org.apache.flink.util.FatalExitExceptionHandler &#160; &#160; &#160; &#160; &#160; &#160; &#160;[] - &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; dump:&#160;
&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; prio=5 Id=1 WAITING on java.util.concurrent.CompletableFuture$Signaller@2897b146
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.CompletableFuture$Signaller@2897b146
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.CompletableFuture$Signaller.block(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinPool.managedBlock(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.CompletableFuture.waitingGet(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.CompletableFuture.get(Unknown Source)
&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.runtime.entrypoint.ClusterEntrypoint.runClusterEntrypoint(ClusterEntrypoint.java:741)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.kubernetes.entrypoint.KubernetesSessionClusterEntrypoint.main(KubernetesSessionClusterEntrypoint.java:61)&lt;span class=&quot;code-quote&quot;&gt;&quot;Reference Handler&quot;&lt;/span&gt; daemon prio=10 Id=2 RUNNABLE
&lt;/span&gt;&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.ref.Reference.waitForReferencePendingList(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.ref.Reference.processPendingReferences(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;Finalizer&quot;&lt;/span&gt; daemon prio=8 Id=3 WAITING on java.lang.ref.ReferenceQueue$Lock@2b21a3e4
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.lang.ref.ReferenceQueue$Lock@2b21a3e4
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.ref.ReferenceQueue.remove(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.ref.ReferenceQueue.remove(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;Signal Dispatcher&quot;&lt;/span&gt; daemon prio=9 Id=4 RUNNABLE&lt;span class=&quot;code-quote&quot;&gt;&quot;Common-Cleaner&quot;&lt;/span&gt; daemon prio=8 Id=9 TIMED_WAITING on java.lang.ref.ReferenceQueue$Lock@16aab001
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.lang.ref.ReferenceQueue$Lock@16aab001
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.ref.ReferenceQueue.remove(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.ref.CleanerImpl.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.InnocuousThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;Log4j2-TF-3-Scheduled-1&quot;&lt;/span&gt; daemon prio=5 Id=12 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@2ee9ffbd
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@2ee9ffbd
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;Log4j2-TF-6-Scheduled-2&quot;&lt;/span&gt; daemon prio=5 Id=18 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3b6166a7
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3b6166a7
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-scheduler-1&quot;&lt;/span&gt; prio=5 Id=19 TIMED_WAITING
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)
&#160; &#160; &#160; &#160; at akka.actor.LightArrayRevolverScheduler.waitNanos(LightArrayRevolverScheduler.scala:90)
&#160; &#160; &#160; &#160; at akka.actor.LightArrayRevolverScheduler$$anon$3.nextTick(LightArrayRevolverScheduler.scala:300)
&#160; &#160; &#160; &#160; at akka.actor.LightArrayRevolverScheduler$$anon$3.run(LightArrayRevolverScheduler.scala:270)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.actor.internal-dispatcher-2&quot;&lt;/span&gt; prio=5 Id=20 WAITING on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@1d79ccac
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@1d79ccac
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-4&quot;&lt;/span&gt; prio=5 Id=22 WAITING on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@5e904dba
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@5e904dba
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.remote.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-remote-dispatcher-5&quot;&lt;/span&gt; prio=5 Id=23 WAITING on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@3fe545c2
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@3fe545c2
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.remote.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-remote-dispatcher-6&quot;&lt;/span&gt; prio=5 Id=24 TIMED_WAITING on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@3fe545c2
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@3fe545c2
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkUntil(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O worker #1&quot;&lt;/span&gt; prio=5 Id=25 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPoll.wait(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPollSelectorImpl.doSelect(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.Util$2@f0148c7
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.EPollSelectorImpl@5c4ee927
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.select(Unknown Source)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:434)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
&#160; &#160; &#160; &#160; ...&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 1
&#160; &#160; &#160; &#160; - java.util.concurrent.ThreadPoolExecutor$Worker@708d421&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O boss #2&quot;&lt;/span&gt; prio=5 Id=27 RUNNABLE
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPoll.wait(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPollSelectorImpl.doSelect(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.Util$2@6f9289
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.EPollSelectorImpl@15b10c13
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.select(Unknown Source)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:434)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:42)
&#160; &#160; &#160; &#160; ...&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 1
&#160; &#160; &#160; &#160; - java.util.concurrent.ThreadPoolExecutor$Worker@409550d1&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O worker #3&quot;&lt;/span&gt; prio=5 Id=28 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPoll.wait(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPollSelectorImpl.doSelect(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.Util$2@10733912
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.EPollSelectorImpl@3bdffdea
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.select(Unknown Source)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:434)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
&#160; &#160; &#160; &#160; ...&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 1
&#160; &#160; &#160; &#160; - java.util.concurrent.ThreadPoolExecutor$Worker@dbc95df&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O server boss #4&quot;&lt;/span&gt; prio=5 Id=29 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPoll.wait(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPollSelectorImpl.doSelect(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.Util$2@4758dbc2
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.EPollSelectorImpl@5a1496ae
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.select(Unknown Source)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.NioServerBoss.select(NioServerBoss.java:163)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.NioServerBoss.run(NioServerBoss.java:42)
&#160; &#160; &#160; &#160; at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
&#160; &#160; &#160; &#160; ...&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 1
&#160; &#160; &#160; &#160; - java.util.concurrent.ThreadPoolExecutor$Worker@85887aa&lt;span class=&quot;code-quote&quot;&gt;&quot;Timer-0&quot;&lt;/span&gt; daemon prio=5 Id=32 TIMED_WAITING on java.util.TaskQueue@53a69f57
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.TaskQueue@53a69f57
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.TimerThread.mainLoop(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.TimerThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;BLOB Server listener at 6124&quot;&lt;/span&gt; daemon prio=5 Id=31 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.PlainSocketImpl.socketAccept(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.AbstractPlainSocketImpl.accept(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.ServerSocket.implAccept(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.ServerSocket.accept(Unknown Source)
&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.util.NetUtils.acceptWithoutTimeout(NetUtils.java:143)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.runtime.blob.BlobServer.run(BlobServer.java:316)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-metrics-scheduler-1&quot;&lt;/span&gt; prio=5 Id=34 TIMED_WAITING
&lt;/span&gt;&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)
&#160; &#160; &#160; &#160; at akka.actor.LightArrayRevolverScheduler.waitNanos(LightArrayRevolverScheduler.scala:90)
&#160; &#160; &#160; &#160; at akka.actor.LightArrayRevolverScheduler$$anon$3.nextTick(LightArrayRevolverScheduler.scala:300)
&#160; &#160; &#160; &#160; at akka.actor.LightArrayRevolverScheduler$$anon$3.run(LightArrayRevolverScheduler.scala:270)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-metrics-akka.actor.internal-dispatcher-3&quot;&lt;/span&gt; prio=5 Id=36 WAITING on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@17521864
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@17521864
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-metrics-akka.remote.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-remote-dispatcher-5&quot;&lt;/span&gt; prio=5 Id=38 TIMED_WAITING on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@16555787
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@16555787
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkUntil(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-metrics-akka.remote.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-remote-dispatcher-6&quot;&lt;/span&gt; prio=5 Id=39 WAITING on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@16555787
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@16555787
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O worker #5&quot;&lt;/span&gt; prio=5 Id=40 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPoll.wait(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPollSelectorImpl.doSelect(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.Util$2@688a0205
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.EPollSelectorImpl@f316464
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.select(Unknown Source)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:434)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
&#160; &#160; &#160; &#160; ...&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 1
&#160; &#160; &#160; &#160; - java.util.concurrent.ThreadPoolExecutor$Worker@7d652799&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O boss #6&quot;&lt;/span&gt; prio=5 Id=42 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPoll.wait(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPollSelectorImpl.doSelect(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.Util$2@827ccde
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.EPollSelectorImpl@34f25b32
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.select(Unknown Source)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:434)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:42)
&#160; &#160; &#160; &#160; ...&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 1
&#160; &#160; &#160; &#160; - java.util.concurrent.ThreadPoolExecutor$Worker@73a2c645&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O worker #7&quot;&lt;/span&gt; prio=5 Id=43 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPoll.wait(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPollSelectorImpl.doSelect(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.Util$2@cd0fd83
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.EPollSelectorImpl@846aa39
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.select(Unknown Source)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:434)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
&#160; &#160; &#160; &#160; ...&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 1
&#160; &#160; &#160; &#160; - java.util.concurrent.ThreadPoolExecutor$Worker@779d4ce9&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O server boss #8&quot;&lt;/span&gt; prio=5 Id=44 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPoll.wait(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPollSelectorImpl.doSelect(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.Util$2@3eb1c6d3
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.EPollSelectorImpl@18bc21fc
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.select(Unknown Source)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.NioServerBoss.select(NioServerBoss.java:163)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
&#160; &#160; &#160; &#160; at org.jboss.netty.channel.socket.nio.NioServerBoss.run(NioServerBoss.java:42)
&#160; &#160; &#160; &#160; at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
&#160; &#160; &#160; &#160; ...&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 1
&#160; &#160; &#160; &#160; - java.util.concurrent.ThreadPoolExecutor$Worker@329fcc7e&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;-server-netty-boss-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=48 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPoll.wait(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPollSelectorImpl.doSelect(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
&#160; &#160; &#160; &#160; - &#160;locked org.apache.flink.shaded.netty4.io.netty.channel.nio.SelectedSelectionKeySet@130bfb8d
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.EPollSelectorImpl@2ea19cb7
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.select(Unknown Source)
&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.netty4.io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SelectedSelectionKeySetSelector.java:68)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.netty4.io.netty.channel.nio.NioEventLoop.select(NioEventLoop.java:879)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.netty4.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:526)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.netty4.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
&lt;/span&gt;&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;Flink-DispatcherRestEndpoint-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=49 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@1e9640ee
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@1e9640ee
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;cluster-io-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=50 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@67dc2101
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@67dc2101
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-2-thread-1&quot;&lt;/span&gt; prio=5 Id=51 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@2bc769e4
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@2bc769e4
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;cluster-io-thread-2&quot;&lt;/span&gt; daemon prio=5 Id=52 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@67dc2101
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@67dc2101
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-13&quot;&lt;/span&gt; prio=5 Id=55 WAITING on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@5e904dba
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@5e904dba
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-14&quot;&lt;/span&gt; prio=5 Id=56 WAITING on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@5e904dba
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool@5e904dba
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;resourcemanager_1-main-scheduler-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=73 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@9a11c0f
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@9a11c0f
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-kubeclient-io-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-resourcemanager-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=74 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@251cace5
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@251cace5
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-15&quot;&lt;/span&gt; prio=5 Id=75 RUNNABLE
&#160; &#160; &#160; &#160; at java.management@11.0.19/sun.management.ThreadImpl.dumpThreads0(Native Method)
&#160; &#160; &#160; &#160; at java.management@11.0.19/sun.management.ThreadImpl.dumpAllThreads(Unknown Source)
&#160; &#160; &#160; &#160; at java.management@11.0.19/sun.management.ThreadImpl.dumpAllThreads(Unknown Source)
&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.util.concurrent.ThreadUtils.errorLogThreadDump(ThreadUtils.java:33)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.util.FatalExitExceptionHandler.uncaughtException(FatalExitExceptionHandler.java:47)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.util.concurrent.FutureUtils.lambda$handleUncaughtException$20(FutureUtils.java:1216)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.util.concurrent.FutureUtils$$Lambda$623/0x00000001006a9840.accept(Unknown Source)
&lt;/span&gt;&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.CompletableFuture.uniWhenComplete(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;OkHttp https:&lt;span class=&quot;code-comment&quot;&gt;//10.96.0.1/...&quot;&lt;/span&gt; prio=5 Id=76 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&lt;/span&gt;&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.SocketInputStream.socketRead0(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.SocketInputStream.socketRead(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.SocketInputStream.read(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.SocketInputStream.read(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.security.ssl.SSLSocketInputRecord.read(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.security.ssl.SSLSocketInputRecord.readHeader(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.security.ssl.SSLSocketImpl.readApplicationRecord(Unknown Source)
&#160; &#160; &#160; &#160; ...&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 2
&#160; &#160; &#160; &#160; - java.util.concurrent.locks.ReentrantLock$NonfairSync@234e456e
&#160; &#160; &#160; &#160; - java.util.concurrent.ThreadPoolExecutor$Worker@330607e6&lt;span class=&quot;code-quote&quot;&gt;&quot;OkHttp ConnectionPool&quot;&lt;/span&gt; daemon prio=5 Id=77 TIMED_WAITING on org.apache.flink.kubernetes.shaded.okhttp3.internal.connection.RealConnectionPool@335680aa
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on org.apache.flink.kubernetes.shaded.okhttp3.internal.connection.RealConnectionPool@335680aa
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Unknown Source)
&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.kubernetes.shaded.okhttp3.internal.connection.RealConnectionPool.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$0(RealConnectionPool.java:62)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.kubernetes.shaded.okhttp3.internal.connection.RealConnectionPool$$Lambda$709/0x000000010071d040.run(Unknown Source)
&lt;/span&gt;&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 1
&#160; &#160; &#160; &#160; - java.util.concurrent.ThreadPoolExecutor$Worker@457b7a36&lt;span class=&quot;code-quote&quot;&gt;&quot;Okio Watchdog&quot;&lt;/span&gt; daemon prio=5 Id=78 TIMED_WAITING on java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;@711498ff
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;@711498ff
&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.kubernetes.shaded.okio.AsyncTimeout.awaitTimeout(AsyncTimeout.java:348)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.kubernetes.shaded.okio.AsyncTimeout$Watchdog.run(AsyncTimeout.java:313)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-kubeclient-io-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-resourcemanager-thread-2&quot;&lt;/span&gt; daemon prio=5 Id=80 RUNNABLE
&lt;/span&gt;&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.reflect.Method.invoke(Unknown Source)
&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.jackson2.com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:689)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.jackson2.com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.jackson2.com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.jackson2.com.fasterxml.jackson.databind.ser.impl.IndexedListSerializer.serializeContents(IndexedListSerializer.java:119)
&lt;/span&gt;&#160; &#160; &#160; &#160; ...&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 1
&#160; &#160; &#160; &#160; - java.util.concurrent.ThreadPoolExecutor$Worker@5fdf1d80&lt;span class=&quot;code-quote&quot;&gt;&quot;cluster-io-thread-3&quot;&lt;/span&gt; daemon prio=5 Id=84 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@67dc2101
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@67dc2101
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;Flink-DispatcherRestEndpoint-thread-2&quot;&lt;/span&gt; daemon prio=5 Id=85 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@1e9640ee
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@1e9640ee
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;-server-netty-worker-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=86 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPoll.wait(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPollSelectorImpl.doSelect(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
&#160; &#160; &#160; &#160; - &#160;locked org.apache.flink.shaded.netty4.io.netty.channel.nio.SelectedSelectionKeySet@3296b3ab
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.EPollSelectorImpl@72ad4a98
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.select(Unknown Source)
&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.netty4.io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SelectedSelectionKeySetSelector.java:68)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.netty4.io.netty.channel.nio.NioEventLoop.select(NioEventLoop.java:879)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.netty4.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:526)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.flink.shaded.netty4.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
&lt;/span&gt;&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;Flink-DispatcherRestEndpoint-thread-3&quot;&lt;/span&gt; daemon prio=5 Id=88 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@1e9640ee
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@1e9640ee
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;Flink-DispatcherRestEndpoint-thread-4&quot;&lt;/span&gt; daemon prio=5 Id=89 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@1e9640ee
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@1e9640ee
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;OkHttp WebSocket https:&lt;span class=&quot;code-comment&quot;&gt;//10.96.0.1/...&quot;&lt;/span&gt; prio=5 Id=98 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@23991496
&lt;/span&gt;&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@23991496
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;jobmanager-io-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=99 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@24cd939f
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@24cd939f
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.actor.supervisor-dispatcher-16&quot;&lt;/span&gt; prio=5 Id=100 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@23417746
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@23417746
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.poll(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-metrics-13&quot;&lt;/span&gt; prio=1 Id=102 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3ba0103c
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3ba0103c
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.poll(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;cluster-io-thread-4&quot;&lt;/span&gt; daemon prio=5 Id=108 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@67dc2101
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@67dc2101
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;jobmanager-&lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=109 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@50769e7a
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@50769e7a
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-kubeclient-io-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-resourcemanager-thread-3&quot;&lt;/span&gt; daemon prio=5 Id=112 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@251cace5
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@251cace5
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;OkHttp 10.96.0.1 Writer&quot;&lt;/span&gt; prio=5 Id=113 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@186fae80
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@186fae80
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;OkHttp 10.96.0.1&quot;&lt;/span&gt; daemon prio=5 Id=114 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.SocketInputStream.socketRead0(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.SocketInputStream.socketRead(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.SocketInputStream.read(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.net.SocketInputStream.read(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.security.ssl.SSLSocketInputRecord.read(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.security.ssl.SSLSocketInputRecord.readHeader(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.security.ssl.SSLSocketImpl.readApplicationRecord(Unknown Source)
&#160; &#160; &#160; &#160; ...&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of locked synchronizers = 1
&#160; &#160; &#160; &#160; - java.util.concurrent.locks.ReentrantLock$NonfairSync@303c118c&lt;span class=&quot;code-quote&quot;&gt;&quot;OkHttp Http2Connection&quot;&lt;/span&gt; daemon prio=5 Id=115 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@ba6d647
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.SynchronousQueue$TransferStack@ba6d647
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.SynchronousQueue$TransferStack.transfer(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.SynchronousQueue.poll(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;FlinkCompletableFutureDelayScheduler-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=117 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6fc71c07
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6fc71c07
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-kubeclient-io-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-resourcemanager-thread-4&quot;&lt;/span&gt; daemon prio=5 Id=118 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@251cace5
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@251cace5
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;AkkaRpcService-Supervisor-Termination-Future-Executor-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=119 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@ab9b4d1
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@ab9b4d1
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)&lt;span class=&quot;code-quote&quot;&gt;&quot;jobmanager_3-main-scheduler-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=121 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@5a59647b
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@5a59647b
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;SourceCoordinator-Source: *anonymous_kafka$15*[66]&quot;&lt;/span&gt; prio=5 Id=122 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@67708599
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@67708599
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;Checkpoint Timer&quot;&lt;/span&gt; daemon prio=5 Id=123 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@30809a54
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@30809a54
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;kafka-admin-client-thread | KafkaSource--5297459524620964018-enumerator-admin-client&quot;&lt;/span&gt; daemon prio=5 Id=125 RUNNABLE (in &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPoll.wait(Native Method)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.EPollSelectorImpl.doSelect(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.Util$2@77d8bfa9
&#160; &#160; &#160; &#160; - &#160;locked sun.nio.ch.EPollSelectorImpl@66b37795
&#160; &#160; &#160; &#160; at java.base@11.0.19/sun.nio.ch.SelectorImpl.select(Unknown Source)
&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.kafka.common.network.Selector.select(Selector.java:873)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.kafka.common.network.Selector.poll(Selector.java:465)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:560)
&lt;/span&gt;&#160; &#160; &#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.kafka.clients.admin.KafkaAdminClient$AdminClientRunnable.processRequests(KafkaAdminClient.java:1408)
&lt;/span&gt;&#160; &#160; &#160; &#160; ...&lt;span class=&quot;code-quote&quot;&gt;&quot;SourceCoordinator-Source: *anonymous_kafka$15*[66]-worker-thread-1&quot;&lt;/span&gt; daemon prio=5 Id=127 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@58c6a97
&#160; &#160; &#160; &#160; at java.base@11.0.19/jdk.internal.misc.Unsafe.park(Native Method)
&#160; &#160; &#160; &#160; - &#160;waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@58c6a97
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.LockSupport.park(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
&#160; &#160; &#160; &#160; at java.base@11.0.19/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
&#160; &#160; &#160; &#160; ...
2023-04-28 20:50:50,607 INFO &#160;org.apache.flink.runtime.entrypoint.ClusterEntrypoint &#160; &#160; &#160; &#160;[] - Shutting KubernetesSessionClusterEntrypoint down with application status UNKNOWN. Diagnostics Cluster entrypoint has been closed externally..
2023-04-28 20:50:50,609 INFO &#160;org.apache.flink.runtime.blob.BlobServer &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [] - Stopped BLOB server at 0.0.0.0:6124
[pod@my-namespace-flink-cluster-59cd575d6b-bll6b log]$ &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17719580" author="xintongsong" created="Fri, 5 May 2023 01:25:34 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wangyang0918&quot; class=&quot;user-hover&quot; rel=&quot;wangyang0918&quot;&gt;wangyang0918&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17719727" author="mapohl" created="Fri, 5 May 2023 08:00:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergiosp&quot; class=&quot;user-hover&quot; rel=&quot;sergiosp&quot;&gt;sergiosp&lt;/a&gt; I guess it&apos;s not necessary to provide the logs anymore. The problem is understood and the discussion went on, already.&lt;/p&gt;

&lt;p&gt;On the discussion about how to handle errors in this part of the code: tbh, initially I leaned towards &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xtsong&quot; class=&quot;user-hover&quot; rel=&quot;xtsong&quot;&gt;xtsong&lt;/a&gt;&apos;s proposal where he suggested to make the error handling as strict as possible through a whitelist and avoid adding yet another configuration parameter with the idea in mind that Flink&apos;s deployment environment should be in a healthy state without any mis-configuration. But as the discussion moved on, I started to acknowledge that it&apos;s too strict in quite a few scenarios. I also get &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gyfora&quot; class=&quot;user-hover&quot; rel=&quot;gyfora&quot;&gt;gyfora&lt;/a&gt;&apos;s point that we&apos;re not that restrictive in other places of the code base, either.&lt;/p&gt;

&lt;p&gt;One concern I have with the error whitelisting, though, is that the error classification could become &quot;complex&quot;. The error &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergiosp&quot; class=&quot;user-hover&quot; rel=&quot;sergiosp&quot;&gt;sergiosp&lt;/a&gt; shared was about hitting quota limits. The error type we&apos;re seeing is a Forbidden error (unfortunately, without the error code being logged but I would assume 403 analogously to the HTTP error code). I could imagine this error type also being returned in other cases (e.g. wrong service account being used). The former error is something we want to retry in certain scenarios but the latter one (based on my understanding) would be one that could be considered a general infrastructure issue and, as a consequence, could be treated as a fatal error. It looks like it would require error message parsing to identify the type of error. How confident are we about the stability of those error messages? It looks like they are derived from the k8s HTTP responses and, therefore, might be stable among different Kubernetes versions. But generally, relying on error messages for deriving Flink&apos;s behavior feels not right. Is this a valid concern? In this sense, I started to favor what was proposed by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gyfora&quot; class=&quot;user-hover&quot; rel=&quot;gyfora&quot;&gt;gyfora&lt;/a&gt;&#160;in the discussion.&lt;/p&gt;

&lt;p&gt;I might be wrong here because I&apos;m not that familiar with the k8s API. I wanted to share this, anyway.&lt;/p&gt;</comment>
                            <comment id="17719744" author="xintongsong" created="Fri, 5 May 2023 08:44:35 +0000"  >&lt;p&gt;Thanks all for the explanation and patience. It seems there&apos;s a commonly tendency towards the retry-by-default approach. &lt;/p&gt;

&lt;p&gt;I also consulted a few colleagues from our Kubernetes team about this. They also share the opinion that there might be more error types that can be resolved by retrying than a whitelist could possibly handle. The only concern they mentioned is that keeping retrying may make the Kubernetes API Server harder to recover from outages in some specific cases, which I believe can be addressed with backoff and guardrails as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbalassi&quot; class=&quot;user-hover&quot; rel=&quot;mbalassi&quot;&gt;mbalassi&lt;/a&gt; mentioned.&lt;/p&gt;

&lt;p&gt;I&apos;d respect the opinion of the majority, withdraw my proposal, and +1 for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gyfora&quot; class=&quot;user-hover&quot; rel=&quot;gyfora&quot;&gt;gyfora&lt;/a&gt;&apos;s proposal.&lt;/p&gt;</comment>
                            <comment id="17727355" author="gyfora" created="Tue, 30 May 2023 06:55:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Weijie+Guo&quot; class=&quot;user-hover&quot; rel=&quot;Weijie Guo&quot;&gt;Weijie Guo&lt;/a&gt; are you working on this ticket?&lt;/p&gt;</comment>
                            <comment id="17727382" author="weijie guo" created="Tue, 30 May 2023 08:00:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gyfora&quot; class=&quot;user-hover&quot; rel=&quot;gyfora&quot;&gt;gyfora&lt;/a&gt; Sorry, I am quite busy recently, feel free to re-assign this ticket if you want to pick up it. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17727499" author="gyfora" created="Tue, 30 May 2023 12:07:17 +0000"  >&lt;p&gt;No worries, I will assign it to myself and will work on this shortly.&lt;/p&gt;</comment>
                            <comment id="17728363" author="weijie guo" created="Thu, 1 Jun 2023 13:21:59 +0000"  >&lt;p&gt;master(1.18) via 3b9f7cf8ffcd357f252f62dee62d26dbc6a76e91.&lt;br/&gt;
release-1.17 via 07f43a5c68301ce119352d40cbec46b2c52a79a2.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13523165">FLINK-30908</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1hlwg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>