<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:44:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15852] Job is submitted to the wrong session cluster</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15852</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Steps to reproduce the problem:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Deploy a YARN session cluster by command &lt;tt&gt;./bin/yarn-session.sh -d&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Deploy a Kubernetes session cluster by command &lt;tt&gt;./bin/kubernetes-session.sh -Dkubernetes.cluster-id=test ...&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Try to submit a Job to the Kubernetes session cluster by command &lt;tt&gt;./bin/flink run -d -e kubernetes-session -Dkubernetes.cluster-id=test examples/streaming/WordCount.jar&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;It&apos;s expected that the Job will be submitted to the Kubernetes session cluster whose cluster-id is &lt;b&gt;test&lt;/b&gt;, however, the job was submitted to the YARN session cluster.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13282896">FLINK-15852</key>
            <summary>Job is submitted to the wrong session cluster</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkl0u">Kostas Kloudas</assignee>
                                    <reporter username="felixzheng">Canbin Zheng</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 3 Feb 2020 04:07:30 +0000</created>
                <updated>Fri, 20 Mar 2020 01:18:21 +0000</updated>
                            <resolved>Thu, 19 Mar 2020 16:05:40 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.1</fixVersion>
                    <fixVersion>1.11.0</fixVersion>
                                    <component>Command Line Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17028692" author="tison" created="Mon, 3 Feb 2020 06:34:05 +0000"  >&lt;p&gt;I think the problem is about how we load so-called active custom command-line&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkl0u&quot; class=&quot;user-hover&quot; rel=&quot;kkl0u&quot;&gt;kkl0u&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yangwang166&quot; class=&quot;user-hover&quot; rel=&quot;yangwang166&quot;&gt;yangwang166&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17028694" author="tison" created="Mon, 3 Feb 2020 06:35:12 +0000"  >&lt;p&gt;the stack layout is &lt;/p&gt;

&lt;p&gt;0. YARNCLI&lt;br/&gt;
1. ExecutorCLI&lt;br/&gt;
2. DefaultCLI&lt;/p&gt;

&lt;p&gt;so the command is handled by YARNCLI if it is found due to hadoop(yarn) in classpath.&lt;/p&gt;</comment>
                            <comment id="17028782" author="kkl0u" created="Mon, 3 Feb 2020 08:48:07 +0000"  >&lt;p&gt;Yes this seems to be problematic and it may have also to do with the &quot;magic&quot; yarn-properties file. &lt;/p&gt;</comment>
                            <comment id="17029422" author="felixzheng" created="Tue, 4 Feb 2020 01:38:03 +0000"  >&lt;p&gt;Yep it may have to do with the yarn-properperties file, anyone interested in this ticket could take over it.&lt;/p&gt;</comment>
                            <comment id="17061127" author="kkl0u" created="Tue, 17 Mar 2020 19:05:45 +0000"  >&lt;p&gt;I will fix this by simply changing the custom command line prioritisation and checking first the &lt;tt&gt;ExecutorCLI&lt;/tt&gt; and then the &lt;tt&gt;FlinkYarnSessionCLI&lt;/tt&gt;. This actually makes sense, as the &lt;tt&gt;ExecutorCLI&lt;/tt&gt; requires explicit action by the user (&lt;tt&gt;-e&lt;/tt&gt;) so it cannot be activated &quot;by accident&quot;. I will submit a PR soon.&lt;/p&gt;</comment>
                            <comment id="17062714" author="kkl0u" created="Thu, 19 Mar 2020 16:05:40 +0000"  >&lt;p&gt;Merged on master with 6ee5dbabfa4e0efa7ac8f1f8e03a75c303ffc622&lt;br/&gt;
and on release-1.10 with aa4d6270e4e764daa392d70369b46df5b7ba4054&lt;/p&gt;</comment>
                            <comment id="17063021" author="felixzheng" created="Fri, 20 Mar 2020 01:18:21 +0000"  >&lt;p&gt;Thanks for the fixup &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkl0u&quot; class=&quot;user-hover&quot; rel=&quot;kkl0u&quot;&gt;kkl0u&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0b3b4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>