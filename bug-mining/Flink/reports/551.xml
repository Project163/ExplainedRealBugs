<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:20:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2601] IOManagerAsync may produce NPE during shutdown</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2601</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;While analyzing a failed YARN test, I detected that it failed because it found the following exception in the logs:&lt;/p&gt;

&lt;p&gt;taskmanager-stderr:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;I/O manager shutdown hook&quot;&lt;/span&gt; java.lang.NullPointerException
	at org.apache.flink.runtime.io.disk.iomanager.IOManagerAsync.shutdown(IOManagerAsync.java:144)
	at org.apache.flink.runtime.io.disk.iomanager.IOManager$1.run(IOManager.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;taskmanager.log&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;18:45:00,812 INFO  org.apache.flink.runtime.taskmanager.TaskManager              - Starting TaskManager actor
18:45:00,819 INFO  org.apache.flink.runtime.io.network.netty.NettyConfig         - NettyConfig [server address: testing-worker-linux-docker-56ee9bbf-3203-linux-2.prod.travis-ci.org/172.17.9.129, server port: 38689, memory segment size (bytes): 32768, transport type: NIO, number of server threads: 0 (use Netty&lt;span class=&quot;code-quote&quot;&gt;&apos;s &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;), number of client threads: 0 (use Netty&apos;&lt;/span&gt;s &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;), server connect backlog: 0 (use Netty&lt;span class=&quot;code-quote&quot;&gt;&apos;s &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;), client connect timeout (sec): 120, send/receive buffer size (bytes): 0 (use Netty&apos;&lt;/span&gt;s &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;)]
18:45:00,822 INFO  org.apache.flink.runtime.taskmanager.TaskManager              - Messages between TaskManager and JobManager have a max timeout of 100000 milliseconds
18:45:00,825 INFO  org.apache.flink.runtime.taskmanager.TaskManager              - Temporary file directory &lt;span class=&quot;code-quote&quot;&gt;&apos;/home/travis/build/rmetzger/flink/flink-yarn-tests/target/flink-yarn-tests-fifo/flink-yarn-tests-fifo-localDir-nm-1_0/usercache/travis/appcache/application_1441046584836_0007&apos;&lt;/span&gt;: total 15 GB, usable 7 GB (46.67% usable)
18:45:00,929 INFO  org.apache.flink.runtime.io.network.buffer.NetworkBufferPool  - Allocated 64 MB &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; network buffer pool (number of memory segments: 2048, bytes per segment: 32768).
18:45:01,186 INFO  org.apache.flink.runtime.taskmanager.TaskManager              - Using 0.7 of the currently free heap space &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Flink managed memory (236 MB).
18:45:01,755 INFO  org.apache.flink.runtime.io.disk.iomanager.IOManager          - I/O manager uses directory /home/travis/build/rmetzger/flink/flink-yarn-tests/target/flink-yarn-tests-fifo/flink-yarn-tests-fifo-localDir-nm-1_0/usercache/travis/appcache/application_1441046584836_0007/flink-io-1befed3c-89c5-4b5e-9043-1b92c4c047d4 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; spill files.
18:45:01,831 ERROR org.apache.flink.yarn.appMaster.YarnTaskManagerRunner         - RECEIVED SIGNAL 15: SIGTERM
18:45:01,833 ERROR org.apache.flink.runtime.io.disk.iomanager.IOManagerAsync     - Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; shutting down IO Manager reader thread.
java.lang.NullPointerException
	at org.apache.flink.runtime.io.disk.iomanager.IOManagerAsync.shutdown(IOManagerAsync.java:133)
	at org.apache.flink.runtime.io.disk.iomanager.IOManager$1.run(IOManager.java:103)
18:45:01,841 INFO  org.apache.flink.runtime.io.disk.iomanager.IOManager          - I/O manager removed spill file directory /home/travis/build/rmetzger/flink/flink-yarn-tests/target/flink-yarn-tests-fifo/flink-yarn-tests-fifo-localDir-nm-1_0/usercache/travis/appcache/application_1441046584836_0007/flink-io-1befed3c-89c5-4b5e-9043-1b92c4c047d4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looks like the TM is shutting down while still starting up. Hardening this should be easy.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/78052378/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/78052378/log.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12860946">FLINK-2601</key>
            <summary>IOManagerAsync may produce NPE during shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 1 Sep 2015 09:18:04 +0000</created>
                <updated>Wed, 2 Sep 2015 14:14:42 +0000</updated>
                            <resolved>Wed, 2 Sep 2015 13:57:01 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14725087" author="uce" created="Tue, 1 Sep 2015 09:49:17 +0000"  >&lt;p&gt;Nice that you&apos;ve spotted this. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Should be easy to fix. Let&apos;s make sure to check other components as well (like blog manager, network environment, etc)&lt;/p&gt;</comment>
                            <comment id="14727378" author="stephanewen" created="Wed, 2 Sep 2015 13:57:01 +0000"  >&lt;p&gt;Fixed via dd9979f8ffc7de178968298d8c21df7315633e9b&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jn2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>