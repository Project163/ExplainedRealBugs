<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:35:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9975] Netty dependency of Hadoop &gt;= 2.7 is not relocated</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9975</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Previously, in &lt;tt&gt;flink-shaded-hadoop&lt;/tt&gt;, we also relocate Netty (&lt;tt&gt;org.jboss.netty&lt;/tt&gt;) to not conflict with user code. Since Hadoop 2.7 the Netty version they depend on has been upgraded and we missed relocating &lt;tt&gt;io.netty&lt;/tt&gt; accordingly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13174885">FLINK-9975</key>
            <summary>Netty dependency of Hadoop &gt;= 2.7 is not relocated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nkruber">Nico Kruber</assignee>
                                    <reporter username="nkruber">Nico Kruber</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 26 Jul 2018 15:09:06 +0000</created>
                <updated>Tue, 23 Oct 2018 08:44:14 +0000</updated>
                            <resolved>Tue, 23 Oct 2018 08:44:14 +0000</resolved>
                                    <version>1.4.2</version>
                    <version>1.5.0</version>
                    <version>1.5.1</version>
                    <version>1.6.0</version>
                                    <fixVersion>1.7.0</fixVersion>
                                    <component>Build System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16563375" author="githubbot" created="Tue, 31 Jul 2018 09:29:32 +0000"  >&lt;p&gt;NicoK opened a new pull request #6461: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9975&quot; title=&quot;Netty dependency of Hadoop &amp;gt;= 2.7 is not relocated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9975&quot;&gt;&lt;del&gt;FLINK-9975&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;hadoop&amp;#93;&lt;/span&gt; also shade Hadoop&apos;s io.netty dependency&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6461&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6461&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This is to prevent user code from clashing on Netty which we relocated in the hadoop jars using its old namespace: `org.jboss.netty`. Hadoop &amp;gt;= 2.7, however, upgraded Netty and relies on the new package: `io.netty`.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;relocate `io.netty` to `org.apache.flink.hadoop.shaded.io.netty`&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This change is already covered by existing tests, such as the yarn, hdfs, and end-to-end tests.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I also verified the jars in the `lib/` folder contain the same dependencies (for hadoop 2.8.3) except the relocated `io.netty`.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): *&lt;b&gt;no (modifies relocation, though!)&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The serializers: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? *&lt;b&gt;not applicable&lt;/b&gt;*&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16563811" author="githubbot" created="Tue, 31 Jul 2018 15:12:11 +0000"  >&lt;p&gt;yanghua commented on issue #6461: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9975&quot; title=&quot;Netty dependency of Hadoop &amp;gt;= 2.7 is not relocated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9975&quot;&gt;&lt;del&gt;FLINK-9975&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;hadoop&amp;#93;&lt;/span&gt; also shade Hadoop&apos;s io.netty dependency&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6461#issuecomment-409256918&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6461#issuecomment-409256918&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   +1&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16659351" author="githubbot" created="Mon, 22 Oct 2018 18:41:56 +0000"  >&lt;p&gt;NicoK commented on issue #6461: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9975&quot; title=&quot;Netty dependency of Hadoop &amp;gt;= 2.7 is not relocated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9975&quot;&gt;&lt;del&gt;FLINK-9975&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;hadoop&amp;#93;&lt;/span&gt; also shade Hadoop&apos;s io.netty dependency&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6461#issuecomment-431823104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6461#issuecomment-431823104&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   rebased to `master`, did the same checks for jars in `lib/` - now waiting for just another Travis run to be safe here, before merging&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16660278" author="githubbot" created="Tue, 23 Oct 2018 08:41:13 +0000"  >&lt;p&gt;NicoK closed pull request #6461: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9975&quot; title=&quot;Netty dependency of Hadoop &amp;gt;= 2.7 is not relocated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9975&quot;&gt;&lt;del&gt;FLINK-9975&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;hadoop&amp;#93;&lt;/span&gt; also shade Hadoop&apos;s io.netty dependency&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6461&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6461&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-shaded-hadoop/pom.xml b/flink-shaded-hadoop/pom.xml&lt;br/&gt;
index 797e06510d0..34b8fb94097 100644&lt;br/&gt;
&amp;#8212; a/flink-shaded-hadoop/pom.xml&lt;br/&gt;
+++ b/flink-shaded-hadoop/pom.xml&lt;br/&gt;
@@ -121,6 +121,7 @@ under the License.&lt;br/&gt;
 									&amp;lt;include&amp;gt;com.google.code.findbugs:*&amp;lt;/include&amp;gt;&lt;br/&gt;
 									&amp;lt;include&amp;gt;asm:asm&amp;lt;/include&amp;gt;&lt;br/&gt;
 									&amp;lt;include&amp;gt;io.netty:netty:*&amp;lt;/include&amp;gt;&lt;br/&gt;
+									&amp;lt;include&amp;gt;io.netty:netty-all:*&amp;lt;/include&amp;gt;&lt;br/&gt;
 									&amp;lt;include&amp;gt;org.apache.curator:*&amp;lt;/include&amp;gt;&lt;br/&gt;
 									&amp;lt;include&amp;gt;org.apache.hadoop:*&amp;lt;/include&amp;gt;&lt;br/&gt;
 									&amp;lt;include&amp;gt;org.htrace:htrace-core&amp;lt;/include&amp;gt;&lt;br/&gt;
@@ -152,6 +153,10 @@ under the License.&lt;br/&gt;
 									&amp;lt;pattern&amp;gt;org.jboss.netty&amp;lt;/pattern&amp;gt;&lt;br/&gt;
 									&amp;lt;shadedPattern&amp;gt;org.apache.flink.hadoop.shaded.org.jboss.netty&amp;lt;/shadedPattern&amp;gt;&lt;br/&gt;
 								&amp;lt;/relocation&amp;gt;&lt;br/&gt;
+								&amp;lt;relocation&amp;gt;&lt;br/&gt;
+									&amp;lt;pattern&amp;gt;io.netty&amp;lt;/pattern&amp;gt;&lt;br/&gt;
+									&amp;lt;shadedPattern&amp;gt;org.apache.flink.hadoop.shaded.io.netty&amp;lt;/shadedPattern&amp;gt;&lt;br/&gt;
+								&amp;lt;/relocation&amp;gt;&lt;br/&gt;
 								&amp;lt;relocation&amp;gt;&lt;br/&gt;
 									&amp;lt;pattern&amp;gt;org.apache.curator&amp;lt;/pattern&amp;gt;&lt;br/&gt;
 									&amp;lt;shadedPattern&amp;gt;org.apache.flink.hadoop.shaded.org.apache.curator&amp;lt;/shadedPattern&amp;gt;&lt;br/&gt;
diff --git a/flink-yarn-tests/pom.xml b/flink-yarn-tests/pom.xml&lt;br/&gt;
index f9abea92056..c09b0dd64ca 100644&lt;br/&gt;
&amp;#8212; a/flink-yarn-tests/pom.xml&lt;br/&gt;
+++ b/flink-yarn-tests/pom.xml&lt;br/&gt;
@@ -227,6 +227,10 @@ under the License.&lt;br/&gt;
 									&amp;lt;pattern&amp;gt;org.jboss.netty&amp;lt;/pattern&amp;gt;&lt;br/&gt;
 									&amp;lt;shadedPattern&amp;gt;org.apache.flink.hadoop.shaded.org.jboss.netty&amp;lt;/shadedPattern&amp;gt;&lt;br/&gt;
 								&amp;lt;/relocation&amp;gt;&lt;br/&gt;
+								&amp;lt;relocation&amp;gt;&lt;br/&gt;
+									&amp;lt;pattern&amp;gt;io.netty&amp;lt;/pattern&amp;gt;&lt;br/&gt;
+									&amp;lt;shadedPattern&amp;gt;org.apache.flink.hadoop.shaded.io.netty&amp;lt;/shadedPattern&amp;gt;&lt;br/&gt;
+								&amp;lt;/relocation&amp;gt;&lt;br/&gt;
 							&amp;lt;/relocations&amp;gt;&lt;br/&gt;
 						&amp;lt;/configuration&amp;gt;&lt;br/&gt;
 					&amp;lt;/execution&amp;gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16660281" author="nicok" created="Tue, 23 Oct 2018 08:44:14 +0000"  >&lt;p&gt;Fixed via:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;master: aa3ae941fbab0aa73556f3a50f77cf798a2b37cf&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13191203">FLINK-10538</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wcxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>We now also relocate Hadoop&amp;#39;s Netty dependency from {{io.netty}} to {{org.apache.flink.hadoop.shaded.io.netty}}. You can now bundle your own version of Netty into your job but may no longer assume that {{io.netty}} is present in the flink-shaded-hadoop2-uber-*.jar file.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>