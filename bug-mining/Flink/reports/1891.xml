<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:29:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-7352] ExecutionGraphRestartTest timeouts</title>
                <link>https://issues.apache.org/jira/browse/FLINK-7352</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Recently, I received timeouts from some tests in &lt;tt&gt;ExecutionGraphRestartTest&lt;/tt&gt; like this&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Tests in error: 
  ExecutionGraphRestartTest.testConcurrentLocalFailAndRestart:638 &#187; Timeout
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This particular instance is from 1.3.2 RC2 and stuck in &lt;tt&gt;ExecutionGraphTestUtils#waitUntilDeployedAndSwitchToRunning()&lt;/tt&gt; but I also had instances stuck in &lt;tt&gt;ExecutionGraphTestUtils#waitUntilJobStatus&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13091873">FLINK-7352</key>
            <summary>ExecutionGraphRestartTest timeouts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="nkruber">Nico Kruber</reporter>
                        <labels>
                            <label>test-stability</label>
                    </labels>
                <created>Wed, 2 Aug 2017 12:45:56 +0000</created>
                <updated>Wed, 2 Oct 2019 17:45:42 +0000</updated>
                            <resolved>Thu, 10 Aug 2017 09:21:51 +0000</resolved>
                                    <version>1.3.2</version>
                    <version>1.4.0</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16110830" author="nicok" created="Wed, 2 Aug 2017 12:50:48 +0000"  >&lt;p&gt; another run with the following snipped and the failure is reproducible:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Logger LOG = LoggerFactory.getLogger(ExecutionGraphRestartTest.class);

	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testConcurrentLocalFailAndRestart1000() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 1000; ++i) {
			LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;starting test run &quot;&lt;/span&gt; + i);
			testConcurrentLocalFailAndRestart();
		}
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;14:48:28,242 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Job recovers via failover strategy: full graph restart
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraphTestUtils  - Running initialization on master &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job test job (102d4baecd0231e60647da78ee3d7bb6).
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraphTestUtils  - Successfully ran initialization on master in 0 ms.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Job test job (102d4baecd0231e60647da78ee3d7bb6) switched from state CREATED to RUNNING.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (1/10) (555363d1489a0855bdd515635023df98) switched from CREATED to SCHEDULED.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (2/10) (29f7de673c17d484836a64bf2a0f38fb) switched from CREATED to SCHEDULED.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (3/10) (1958f95034522b1804ce9941244c4729) switched from CREATED to SCHEDULED.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (4/10) (d8c7216766e957b04a445b2f81e5bac2) switched from CREATED to SCHEDULED.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (5/10) (956d9cc0b60979387c25b2354f78f392) switched from CREATED to SCHEDULED.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (6/10) (d25fbc105698617b4fbb2f643e427c4a) switched from CREATED to SCHEDULED.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (7/10) (05fd3e4718a959fb2ecd337cc0ca0d72) switched from CREATED to SCHEDULED.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (8/10) (aac6ca828da7e204710cd56db5574b9e) switched from CREATED to SCHEDULED.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (9/10) (25e5a4296527b9fe14462d1be737b4df) switched from CREATED to SCHEDULED.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (10/10) (2437fd4ac959d003972606625371717c) switched from CREATED to SCHEDULED.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (1/10) (555363d1489a0855bdd515635023df98) switched from SCHEDULED to DEPLOYING.
14:48:28,243 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (1/10) (attempt #0) to localhost
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (2/10) (29f7de673c17d484836a64bf2a0f38fb) switched from SCHEDULED to DEPLOYING.
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (2/10) (attempt #0) to localhost
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (3/10) (1958f95034522b1804ce9941244c4729) switched from SCHEDULED to DEPLOYING.
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (3/10) (attempt #0) to localhost
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (4/10) (d8c7216766e957b04a445b2f81e5bac2) switched from SCHEDULED to DEPLOYING.
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (4/10) (attempt #0) to localhost
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (5/10) (956d9cc0b60979387c25b2354f78f392) switched from SCHEDULED to DEPLOYING.
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (5/10) (attempt #0) to localhost
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (6/10) (d25fbc105698617b4fbb2f643e427c4a) switched from SCHEDULED to DEPLOYING.
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (6/10) (attempt #0) to localhost
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (7/10) (05fd3e4718a959fb2ecd337cc0ca0d72) switched from SCHEDULED to DEPLOYING.
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (7/10) (attempt #0) to localhost
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (8/10) (aac6ca828da7e204710cd56db5574b9e) switched from SCHEDULED to DEPLOYING.
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (8/10) (attempt #0) to localhost
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (9/10) (25e5a4296527b9fe14462d1be737b4df) switched from SCHEDULED to DEPLOYING.
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (9/10) (attempt #0) to localhost
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (10/10) (2437fd4ac959d003972606625371717c) switched from SCHEDULED to DEPLOYING.
14:48:28,244 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (10/10) (attempt #0) to localhost
14:48:28,247 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (1/10) (555363d1489a0855bdd515635023df98) switched from DEPLOYING to RUNNING.
14:48:28,247 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (2/10) (29f7de673c17d484836a64bf2a0f38fb) switched from DEPLOYING to RUNNING.
14:48:28,247 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (3/10) (1958f95034522b1804ce9941244c4729) switched from DEPLOYING to RUNNING.
14:48:28,247 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (4/10) (d8c7216766e957b04a445b2f81e5bac2) switched from DEPLOYING to RUNNING.
14:48:28,247 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (5/10) (956d9cc0b60979387c25b2354f78f392) switched from DEPLOYING to RUNNING.
14:48:28,247 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (6/10) (d25fbc105698617b4fbb2f643e427c4a) switched from DEPLOYING to RUNNING.
14:48:28,247 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (7/10) (05fd3e4718a959fb2ecd337cc0ca0d72) switched from DEPLOYING to RUNNING.
14:48:28,247 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (8/10) (aac6ca828da7e204710cd56db5574b9e) switched from DEPLOYING to RUNNING.
14:48:28,247 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (9/10) (25e5a4296527b9fe14462d1be737b4df) switched from DEPLOYING to RUNNING.
14:48:28,247 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (10/10) (2437fd4ac959d003972606625371717c) switched from DEPLOYING to RUNNING.
14:48:28,248 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (1/10) (555363d1489a0855bdd515635023df98) switched from RUNNING to FAILED.
java.lang.Exception: intended test failure 1
	at org.apache.flink.runtime.executiongraph.ExecutionGraphRestartTest$1.run(ExecutionGraphRestartTest.java:623)
14:48:28,248 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (10/10) (2437fd4ac959d003972606625371717c) switched from RUNNING to FAILED.
java.lang.Exception: intended test failure 2
	at org.apache.flink.runtime.executiongraph.ExecutionGraphRestartTest$2.run(ExecutionGraphRestartTest.java:635)
14:48:28,248 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Job test job (102d4baecd0231e60647da78ee3d7bb6) switched from state RUNNING to FAILING.
java.lang.Exception: intended test failure 1
	at org.apache.flink.runtime.executiongraph.ExecutionGraphRestartTest$1.run(ExecutionGraphRestartTest.java:623)
14:48:28,248 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (2/10) (29f7de673c17d484836a64bf2a0f38fb) switched from RUNNING to CANCELING.
14:48:28,248 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (3/10) (1958f95034522b1804ce9941244c4729) switched from RUNNING to CANCELING.
14:48:28,248 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (4/10) (d8c7216766e957b04a445b2f81e5bac2) switched from RUNNING to CANCELING.
14:48:28,248 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (5/10) (956d9cc0b60979387c25b2354f78f392) switched from RUNNING to CANCELING.
14:48:28,248 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (6/10) (d25fbc105698617b4fbb2f643e427c4a) switched from RUNNING to CANCELING.
14:48:28,248 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (7/10) (05fd3e4718a959fb2ecd337cc0ca0d72) switched from RUNNING to CANCELING.
14:48:28,248 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (8/10) (aac6ca828da7e204710cd56db5574b9e) switched from RUNNING to CANCELING.
14:48:28,248 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (9/10) (25e5a4296527b9fe14462d1be737b4df) switched from RUNNING to CANCELING.
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (2/10) (29f7de673c17d484836a64bf2a0f38fb) switched from CANCELING to CANCELED.
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (3/10) (1958f95034522b1804ce9941244c4729) switched from CANCELING to CANCELED.
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (4/10) (d8c7216766e957b04a445b2f81e5bac2) switched from CANCELING to CANCELED.
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (5/10) (956d9cc0b60979387c25b2354f78f392) switched from CANCELING to CANCELED.
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (6/10) (d25fbc105698617b4fbb2f643e427c4a) switched from CANCELING to CANCELED.
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (7/10) (05fd3e4718a959fb2ecd337cc0ca0d72) switched from CANCELING to CANCELED.
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (8/10) (aac6ca828da7e204710cd56db5574b9e) switched from CANCELING to CANCELED.
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (9/10) (25e5a4296527b9fe14462d1be737b4df) switched from CANCELING to CANCELED.
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Try to restart or fail the job test job (102d4baecd0231e60647da78ee3d7bb6) &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; no longer possible.
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Job test job (102d4baecd0231e60647da78ee3d7bb6) switched from state FAILING to RESTARTING.
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Restarting the job test job (102d4baecd0231e60647da78ee3d7bb6).
14:48:28,250 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Job test job (102d4baecd0231e60647da78ee3d7bb6) switched from state RESTARTING to CREATED.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Job test job (102d4baecd0231e60647da78ee3d7bb6) switched from state CREATED to RUNNING.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (1/10) (ffe58b4f5c0ae1b17e7940589f05fbe2) switched from CREATED to SCHEDULED.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (2/10) (6a9641d1de09e740ae6c5cd8f7a2d3d8) switched from CREATED to SCHEDULED.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (3/10) (259f57c902219bd6f4b6043f8acdb0f6) switched from CREATED to SCHEDULED.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (4/10) (9018fae883b1b719bdff81716e7ce857) switched from CREATED to SCHEDULED.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (5/10) (7511554834a9ac06148a7a1ec7e3f98d) switched from CREATED to SCHEDULED.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (6/10) (e037c944507001005043674aed4776d5) switched from CREATED to SCHEDULED.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (7/10) (0fa587a3465e952cb564920a5d2abc8b) switched from CREATED to SCHEDULED.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (8/10) (7c16e3fc402d66fb06c5988b935d2bdf) switched from CREATED to SCHEDULED.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (9/10) (a83b0b539c2ab007782fbf58da93dcc9) switched from CREATED to SCHEDULED.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (10/10) (19f6010b31b86a23a3cf92dc4297fb3a) switched from CREATED to SCHEDULED.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (1/10) (ffe58b4f5c0ae1b17e7940589f05fbe2) switched from SCHEDULED to DEPLOYING.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (1/10) (attempt #1) to localhost
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (2/10) (6a9641d1de09e740ae6c5cd8f7a2d3d8) switched from SCHEDULED to DEPLOYING.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (2/10) (attempt #1) to localhost
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (3/10) (259f57c902219bd6f4b6043f8acdb0f6) switched from SCHEDULED to DEPLOYING.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (3/10) (attempt #1) to localhost
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (4/10) (9018fae883b1b719bdff81716e7ce857) switched from SCHEDULED to DEPLOYING.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (4/10) (attempt #1) to localhost
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (5/10) (7511554834a9ac06148a7a1ec7e3f98d) switched from SCHEDULED to DEPLOYING.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (5/10) (attempt #1) to localhost
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (6/10) (e037c944507001005043674aed4776d5) switched from SCHEDULED to DEPLOYING.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (6/10) (attempt #1) to localhost
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (7/10) (0fa587a3465e952cb564920a5d2abc8b) switched from SCHEDULED to DEPLOYING.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (7/10) (attempt #1) to localhost
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (8/10) (7c16e3fc402d66fb06c5988b935d2bdf) switched from SCHEDULED to DEPLOYING.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (8/10) (attempt #1) to localhost
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (9/10) (a83b0b539c2ab007782fbf58da93dcc9) switched from SCHEDULED to DEPLOYING.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (9/10) (attempt #1) to localhost
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (10/10) (19f6010b31b86a23a3cf92dc4297fb3a) switched from SCHEDULED to DEPLOYING.
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Deploying vertex (10/10) (attempt #1) to localhost
14:48:28,251 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - vertex (10/10) (19f6010b31b86a23a3cf92dc4297fb3a) switched from DEPLOYING to CANCELED.
14:48:29,254 ERROR org.apache.flink.runtime.executiongraph.ExecutionGraphRestartTest  - 
--------------------------------------------------------------------------------
Test testConcurrentLocalFailAndRestart1000(org.apache.flink.runtime.executiongraph.ExecutionGraphRestartTest) failed with:
java.util.concurrent.TimeoutException
	at org.apache.flink.runtime.executiongraph.ExecutionGraphTestUtils.waitUntilExecutionState(ExecutionGraphTestUtils.java:138)
	at org.apache.flink.runtime.executiongraph.ExecutionGraphTestUtils.waitUntilDeployedAndSwitchToRunning(ExecutionGraphTestUtils.java:201)
	at org.apache.flink.runtime.executiongraph.ExecutionGraphRestartTest.testConcurrentLocalFailAndRestart(ExecutionGraphRestartTest.java:649)
	at org.apache.flink.runtime.executiongraph.ExecutionGraphRestartTest.testConcurrentLocalFailAndRestart1000(ExecutionGraphRestartTest.java:597)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16110836" author="githubbot" created="Wed, 2 Aug 2017 12:54:06 +0000"  >&lt;p&gt;Github user NicoK commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4451&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4451&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Please see &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7352&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-7352&lt;/a&gt; and it seems you are right - increased timeouts do not solve this issue.&lt;/p&gt;</comment>
                            <comment id="16118372" author="till.rohrmann" created="Tue, 8 Aug 2017 14:19:26 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/262140336&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/262140336&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16119492" author="till.rohrmann" created="Wed, 9 Aug 2017 06:48:02 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt; is right and the problem is &lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/ExecutionGraphTestUtils.java#L203&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/master/flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/ExecutionGraphTestUtils.java#L203&lt;/a&gt;. You can simulate it by removing the sleep and introducing a small sleep in &lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/Execution.java#L401&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/master/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/Execution.java#L401&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I think the solution would be to wait on the &lt;tt&gt;SimpleAckingTaskManagerGateway&lt;/tt&gt; until it has received all task submissions before switching the &lt;tt&gt;Executions&lt;/tt&gt; to running.&lt;/p&gt;</comment>
                            <comment id="16119545" author="githubbot" created="Wed, 9 Aug 2017 08:02:59 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4501&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4501&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7352&quot; title=&quot;ExecutionGraphRestartTest timeouts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7352&quot;&gt;&lt;del&gt;FLINK-7352&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Stabilize ExecutionGraphRestartTest&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Introduce an explicit waiting for the deployment of tasks. This replaces the loose&lt;br/&gt;
    ordering induced by Thread.sleep and fixes the race conditions caused by it.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Introduce `WaitForTasks` consumer which is given to the `SimpleAckingTaskManagerGateway`&lt;/li&gt;
	&lt;li&gt;Using a single `SimpleAckingTaskManagerGateway` to receive all task submission calls&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This change is a trivial rework / code cleanup without any test coverage.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;




&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixExecutionGraphRestartTest&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4501.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4501.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4501&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 40cd0c860dd600ce2baa69b0f0ba8cf7a787ff63&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-08-09T07:57:56Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7352&quot; title=&quot;ExecutionGraphRestartTest timeouts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7352&quot;&gt;&lt;del&gt;FLINK-7352&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Stabilize ExecutionGraphRestartTest&lt;/p&gt;

&lt;p&gt;    Introduce an explicit waiting for the deployment of tasks. This replaces the loose&lt;br/&gt;
    ordering induced by Thread.sleep and fixes the race conditions caused by it.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16121296" author="githubbot" created="Thu, 10 Aug 2017 09:01:45 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4501&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4501&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Travis passes. Merging this PR.&lt;/p&gt;</comment>
                            <comment id="16121317" author="till.rohrmann" created="Thu, 10 Aug 2017 09:21:51 +0000"  >&lt;p&gt;Fixed via f59de67d9bd440b40352fdea5ede7c709f991a9e&lt;/p&gt;</comment>
                            <comment id="16121318" author="githubbot" created="Thu, 10 Aug 2017 09:21:59 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4501&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4501&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13115375">FLINK-7960</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 14 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ibkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>