<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:25:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4564] [metrics] Delimiter should be configured per reporter</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4564</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently, the delimiter used or the scope string is based on a configuration setting shared by all reporters. However, different reporters may have different requirements in regards to the delimiter, as such we should allow reporters to use a different delimiter.&lt;/p&gt;

&lt;p&gt;We can keep the current setting as a global setting that is used if no specific setting was set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13002301">FLINK-4564</key>
            <summary>[metrics] Delimiter should be configured per reporter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="anmu">Anton Mushin</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Sep 2016 09:22:26 +0000</created>
                <updated>Fri, 14 Oct 2016 13:50:37 +0000</updated>
                            <resolved>Fri, 14 Oct 2016 13:50:23 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Runtime / Metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15506231" author="githubbot" created="Tue, 20 Sep 2016 10:02:29 +0000"  >&lt;p&gt;Github user ex00 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2516&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2516&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Sorry. I made a mistake. In comment for commit I writed error of issue number. This PR for issue &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4564&quot; title=&quot;[metrics] Delimiter should be configured per reporter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4564&quot;&gt;&lt;del&gt;FLINK-4564&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15506248" author="githubbot" created="Tue, 20 Sep 2016 10:10:06 +0000"  >&lt;p&gt;Github user ex00 closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2516&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2516&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15506441" author="githubbot" created="Tue, 20 Sep 2016 13:01:15 +0000"  >&lt;p&gt;Github user ex00 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks zentol!&lt;/p&gt;

&lt;p&gt;    &amp;gt; Something i thought of was to create a &quot;front&quot; metric group for every reporter that is aware of this index. &lt;/p&gt;

&lt;p&gt;    Do you mean new MetricGroup implementation with name like FrontTaskManagerMetricGroup for example? Or what do you mean by &quot;front&quot; metric group?&lt;/p&gt;

&lt;p&gt;    &amp;gt; As a general remark, we strongly encourage people to first discuss their implementation in the JIRA instead of going ahead with a PR.&lt;/p&gt;

&lt;p&gt;    I am novice in community. In future I will know. Thanks.&lt;/p&gt;</comment>
                            <comment id="15506516" author="githubbot" created="Tue, 20 Sep 2016 13:25:03 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Currently, when a metric is registered the reporter also receives the group it was registered on as an argument. Since this group is shared by all reporters we can&apos;t do any tricks in them to be reporter specific.&lt;/p&gt;

&lt;p&gt;    Instead, we could create a single reporter specific AbstractMetricGroup that is aware of the reporter index, which contains a AbstractMetricGroup reference. All calls to methods are forwarded to the reference, with the index being supplied when necessary. This reference is set when a metric is registered. Does that make sense?&lt;/p&gt;</comment>
                            <comment id="15512350" author="githubbot" created="Thu, 22 Sep 2016 06:32:53 +0000"  >&lt;p&gt;Github user ex00 closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15512351" author="githubbot" created="Thu, 22 Sep 2016 06:32:53 +0000"  >&lt;p&gt;Github user ex00 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Not all clear.&lt;br/&gt;
    How should look like `MetricGroup#getMetricIdentifier()`call in this case? &lt;br/&gt;
    If we use single reporter for other reporters and know their indexes, we must know name or index where we `MetricGroup#getMetricIdentifier()` call. and then in MetricRegistry need add method for getting indexes of reporters via names. &lt;br/&gt;
    or all this assumption is not correct?&lt;/p&gt;
</comment>
                            <comment id="15512352" author="githubbot" created="Thu, 22 Sep 2016 06:33:02 +0000"  >&lt;p&gt;GitHub user ex00 reopened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4564&quot; title=&quot;[metrics] Delimiter should be configured per reporter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4564&quot;&gt;&lt;del&gt;FLINK-4564&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;metrics&amp;#93;&lt;/span&gt; Delimiter should be configured per reporter&lt;/p&gt;

&lt;p&gt;    Hi&lt;br/&gt;
    It is my fix &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4564&quot; title=&quot;[metrics] Delimiter should be configured per reporter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4564&quot;&gt;&lt;del&gt;FLINK-4564&lt;/del&gt;&lt;/a&gt;. I want fix this issue, please send me your comments about this implementation.&lt;br/&gt;
    I could assign to me &lt;span class=&quot;error&quot;&gt;&amp;#91;issue&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4564&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-4564&lt;/a&gt;) in jira?&lt;br/&gt;
    Thanks.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ex00/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ex00/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4564&quot; title=&quot;[metrics] Delimiter should be configured per reporter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4564&quot;&gt;&lt;del&gt;FLINK-4564&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2517&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4dd3bb08eb48430293e4711136fa839fe92aa85d&lt;br/&gt;
Author: Anton Mushin &amp;lt;anton_mushin@epam.com&amp;gt;&lt;br/&gt;
Date:   2016-09-20T10:09:40Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4564&quot; title=&quot;[metrics] Delimiter should be configured per reporter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4564&quot;&gt;&lt;del&gt;FLINK-4564&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;metrics&amp;#93;&lt;/span&gt; Delimiter should be configured per reporter&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15512621" author="githubbot" created="Thu, 22 Sep 2016 08:34:10 +0000"  >&lt;p&gt;Github user ex00 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Could you explain me how must look API for getting metric identifier?&lt;br/&gt;
    Now I think  about this:&lt;br/&gt;
    ```java&lt;br/&gt;
    @Test&lt;br/&gt;
    public void testConfigurableDelimiterForReporter() &lt;/p&gt;
{
    		Configuration config = new Configuration();
    		config.setString(ConfigConstants.METRICS_REPORTERS_LIST, &quot;test1&quot;);
    		config.setString(ConfigConstants.METRICS_SCOPE_DELIMITER, &quot;.&quot;);
    		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;_&quot;);
    		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter.class.getName());
    		config.setString(ConfigConstants.METRICS_SCOPE_NAMING_TM, &quot;A.B.C.D.E&quot;);
    
    		MetricRegistry registry = new MetricRegistry(config);
    
    		TaskManagerMetricGroup tmGroup = new TaskManagerMetricGroup(registry, &quot;host&quot;, &quot;id&quot;);
    		assertEquals(&quot;A.B.C.D.E.name&quot;, tmGroup.getMetricIdentifier(&quot;name&quot;)); //get default delimiter for all
    		assertEquals(&quot;A_B_C_D_E_name&quot;, tmGroup.getMetricIdentifier(&quot;name&quot;,null,1)); //get delimiter for first reporter in list
    		registry.shutdown();
    	}
&lt;p&gt;    ```&lt;/p&gt;
</comment>
                            <comment id="15516075" author="githubbot" created="Fri, 23 Sep 2016 10:34:38 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    alright, I&apos;ll sketch some code:&lt;br/&gt;
    MetricRegistry:&lt;br/&gt;
    ```&lt;br/&gt;
    List&amp;lt;MetricReporter&amp;gt; reporters = ...&lt;br/&gt;
    List&amp;lt;FrontMetricGroup&amp;gt; groups = ...&lt;br/&gt;
    List&amp;lt;Character&amp;gt; delimiter = ...&lt;/p&gt;

&lt;p&gt;    char getDelimiter(int reporterIndex) {&lt;br/&gt;
    return delimiter.get(reporterIndex);&lt;/p&gt;

&lt;p&gt;    void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
    ...&lt;br/&gt;
    for (int x= 0; x&amp;lt;reporters.size();x++) &lt;/p&gt;
{
       FrontMetricGroup front = groups.get(x);
       front.setReference(group);
       reporter.notifyOfAddedMetric(metric, metricName, front);
    }
&lt;p&gt;    ...&lt;br/&gt;
    }&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    AbstractMetricGroup:&lt;br/&gt;
    ```&lt;br/&gt;
    String getMetricIdentifier(String name, CharacterFilter filter, int reporterIndex) &lt;/p&gt;
{
        &amp;lt;copy&amp;amp;paste gMI(name, filter), replace registry.getDelimiter() with registry.getDelimiter(reporterIndex)&amp;gt;
    }
&lt;p&gt;    ```&lt;/p&gt;

&lt;p&gt;    FrontMetricGroup:&lt;br/&gt;
    ```&lt;br/&gt;
    AbstractMetricGroup reference;&lt;br/&gt;
    int index;&lt;/p&gt;

&lt;p&gt;    FrontMetricGroup(int index) &lt;/p&gt;
{
        this.index = index;
    }

&lt;p&gt;    setReference(AbstractMetricGroup reference) &lt;/p&gt;
{
        this.reference = reference;
    }

&lt;p&gt;    @Override&lt;br/&gt;
    String getMetricIndentifier(String name, CharacterFilter filter) &lt;/p&gt;
{
        return reference.getMetricIdentifier(name, filter, this.index);
    }

&lt;p&gt;    &amp;lt;all other MetricGroup methods, forwarding the call to reference&amp;gt;&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    Does this answer your question?&lt;/p&gt;</comment>
                            <comment id="15516305" author="githubbot" created="Fri, 23 Sep 2016 12:26:24 +0000"  >&lt;p&gt;Github user ex00 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    zentol, thanks for you comment.&lt;br/&gt;
    I am pushed new version implementation, please check it. Is correct idea?&lt;/p&gt;</comment>
                            <comment id="15516418" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80239515&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80239515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -99,10 +99,17 @@ public MetricRegistry(Configuration config) {&lt;br/&gt;
     				DelegatingConfiguration reporterConfig = new DelegatingConfiguration(config, ConfigConstants.METRICS_REPORTER_PREFIX + namedReporter + &quot;.&quot;);&lt;br/&gt;
     				final String className = reporterConfig.getString(ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, null);&lt;br/&gt;
     				if (className == null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;LOG.error(&quot;No reporter class set for reporter &quot; + namedReporter + &quot;. Metrics might not be exposed/reported.&quot;);&lt;br/&gt;
    +					LOG.error(&quot;No reporter class set for reporter {}. Metrics might not be exposed/reported.&quot;,namedReporter);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing space after comma.&lt;/p&gt;</comment>
                            <comment id="15516419" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80238884&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80238884&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -168,21 +168,40 @@ public String getMetricIdentifier(String metricName) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param filter character filter which is applied to the scope components if not null.&lt;/li&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public String getMetricIdentifier(String metricName, CharacterFilter filter) {&lt;/li&gt;
	&lt;li&gt;if (scopeString == null) {&lt;/li&gt;
	&lt;li&gt;if (filter != null) 
{
    -				scopeString = ScopeFormat.concat(filter, registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt; else &lt;/p&gt;
{
    -				scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt;    +	public String getMetricIdentifier(String metricName,CharacterFilter filter) {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    these changes should be reverted.&lt;/p&gt;</comment>
                            <comment id="15516421" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80239675&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80239675&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -99,10 +99,17 @@ public MetricRegistry(Configuration config) {&lt;br/&gt;
     				DelegatingConfiguration reporterConfig = new DelegatingConfiguration(config, ConfigConstants.METRICS_REPORTER_PREFIX + namedReporter + &quot;.&quot;);&lt;br/&gt;
     				final String className = reporterConfig.getString(ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, null);&lt;br/&gt;
     				if (className == null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;LOG.error(&quot;No reporter class set for reporter &quot; + namedReporter + &quot;. Metrics might not be exposed/reported.&quot;);&lt;br/&gt;
    +					LOG.error(&quot;No reporter class set for reporter {}. Metrics might not be exposed/reported.&quot;,namedReporter);&lt;br/&gt;
     					continue;&lt;br/&gt;
     				}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +				String delimiterForReporter = reporterConfig.getString(ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER,defaultDelimiter);&lt;br/&gt;
    +				if(delimiterForReporter.length()!=1){&lt;br/&gt;
    +					LOG.warn(&quot;Failed to parse delimiter for reporter {}, using global delimiter.&quot;,namedReporter);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    let&apos;s include the global delimiter in the message as well.&lt;/p&gt;</comment>
                            <comment id="15516420" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80239606&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80239606&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -99,10 +99,17 @@ public MetricRegistry(Configuration config) {&lt;br/&gt;
     				DelegatingConfiguration reporterConfig = new DelegatingConfiguration(config, ConfigConstants.METRICS_REPORTER_PREFIX + namedReporter + &quot;.&quot;);&lt;br/&gt;
     				final String className = reporterConfig.getString(ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, null);&lt;br/&gt;
     				if (className == null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;LOG.error(&quot;No reporter class set for reporter &quot; + namedReporter + &quot;. Metrics might not be exposed/reported.&quot;);&lt;br/&gt;
    +					LOG.error(&quot;No reporter class set for reporter {}. Metrics might not be exposed/reported.&quot;,namedReporter);&lt;br/&gt;
     					continue;&lt;br/&gt;
     				}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +				String delimiterForReporter = reporterConfig.getString(ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER,defaultDelimiter);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    missing spaces after commas, if and around operands.&lt;/p&gt;</comment>
                            <comment id="15516422" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80239440&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80239440&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -72,14 +74,12 @@ public MetricRegistry(Configuration config) {&lt;br/&gt;
     		}&lt;br/&gt;
     		this.scopeFormats = scopeFormats;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;char delim;&lt;/li&gt;
	&lt;li&gt;try 
{
    -			delim = config.getString(ConfigConstants.METRICS_SCOPE_DELIMITER, &quot;.&quot;).charAt(0);
    -		}
&lt;p&gt; catch (Exception e) {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;LOG.warn(&quot;Failed to parse delimiter, using default delimiter.&quot;, e);&lt;/li&gt;
	&lt;li&gt;delim = &apos;.&apos;;&lt;br/&gt;
    +		String defaultDelimiter = config.getString(ConfigConstants.METRICS_SCOPE_DELIMITER, &quot;.&quot;);&lt;br/&gt;
    +		if(defaultDelimiter.length()!=1){
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    these changes are unnecessary, renaming ```delimiter``` to ```globalDelimiter``` should be sufficient.&lt;/p&gt;</comment>
                            <comment id="15516423" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80240197&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80240197&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -99,10 +99,17 @@ public MetricRegistry(Configuration config) {&lt;br/&gt;
     				DelegatingConfiguration reporterConfig = new DelegatingConfiguration(config, ConfigConstants.METRICS_REPORTER_PREFIX + namedReporter + &quot;.&quot;);&lt;br/&gt;
     				final String className = reporterConfig.getString(ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, null);&lt;br/&gt;
     				if (className == null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;LOG.error(&quot;No reporter class set for reporter &quot; + namedReporter + &quot;. Metrics might not be exposed/reported.&quot;);&lt;br/&gt;
    +					LOG.error(&quot;No reporter class set for reporter {}. Metrics might not be exposed/reported.&quot;,namedReporter);&lt;br/&gt;
     					continue;&lt;br/&gt;
     				}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +				String delimiterForReporter = reporterConfig.getString(ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER,defaultDelimiter);&lt;br/&gt;
    +				if(delimiterForReporter.length()!=1){&lt;br/&gt;
    +					LOG.warn(&quot;Failed to parse delimiter for reporter {}, using global delimiter.&quot;,namedReporter);&lt;br/&gt;
    +					delimiterForReporter=&quot;.&quot;;&lt;br/&gt;
    +				}&lt;br/&gt;
    +				this.delimiters.add(delimiterForReporter.charAt(0));&lt;br/&gt;
    +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Please add the configured delimiter to the info log message when a reporter was instantiated. (near the end of the constructor)&lt;/p&gt;</comment>
                            <comment id="15516424" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80240342&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80240342&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -163,7 +170,16 @@ public void startQueryService(ActorSystem actorSystem) {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	public char getDelimiter() &lt;/p&gt;
{
    -		return this.delimiter;
    +		return this.globalDelimiter;
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	public char getDelimiter(int reporterIndex) {&lt;br/&gt;
    +		try &lt;/p&gt;
{
    +			return delimiters.get(reporterIndex);
    +		}
&lt;p&gt;catch (IndexOutOfBoundsException e){&lt;br/&gt;
    +			LOG.warn(&quot;Delimiter for index {} not found return global delimiter&quot;,reporterIndex);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    missing space after comma. Message should be &quot;Delimiter for index {} not found, returning global delimiter.&quot;&lt;/p&gt;</comment>
                            <comment id="15516425" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80238976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80238976&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-metrics/flink-metrics-core/src/main/java/org/apache/flink/metrics/MetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -189,4 +189,15 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
     	 */&lt;br/&gt;
     	String getMetricIdentifier(String metricName, CharacterFilter filter);&lt;br/&gt;
    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Returns the fully qualified metric name for reporter with certain number position in group, for example&lt;br/&gt;
    +	 * 
{@code &quot;host-7.taskmanager-2.window_word_count.my-mapper.metricName&quot;}
&lt;p&gt;    +	 *&lt;br/&gt;
    +	 * @param metricName metric name&lt;br/&gt;
    +	 * @param filter character filter which is applied to the scope components if not null.&lt;br/&gt;
    +	 * @param indexReporter position number of reporter in group reporters&lt;br/&gt;
    +	 * @return fully qualified metric name&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	String getMetricIdentifier(String metricName, CharacterFilter filter,int indexReporter);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing space after second comma.&lt;/p&gt;</comment>
                            <comment id="15516426" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80239024&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80239024&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-metrics/flink-metrics-core/src/main/java/org/apache/flink/metrics/groups/UnregisteredMetricsGroup.java &amp;#8212;&lt;br/&gt;
    @@ -114,4 +114,9 @@ public String getMetricIdentifier(String metricName) {&lt;br/&gt;
     	public String getMetricIdentifier(String metricName, CharacterFilter filter) &lt;/p&gt;
{
     		return metricName;
     	}
&lt;p&gt;    +&lt;br/&gt;
    +	@Override&lt;br/&gt;
    +	public String getMetricIdentifier(String metricName, CharacterFilter filter,int indexReporter ) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    missing space after second comma.&lt;/p&gt;</comment>
                            <comment id="15516427" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80240221&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80240221&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -163,7 +170,16 @@ public void startQueryService(ActorSystem actorSystem) {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	public char getDelimiter() &lt;/p&gt;
{
    -		return this.delimiter;
    +		return this.globalDelimiter;
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	public char getDelimiter(int reporterIndex) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    missing javadocs&lt;/p&gt;</comment>
                            <comment id="15516429" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80240603&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80240603&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -219,9 +235,19 @@ public ScopeFormats getScopeFormats() {&lt;br/&gt;
     	public void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
     		try {&lt;br/&gt;
     			if (reporters != null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for (MetricReporter reporter : reporters) {&lt;/li&gt;
	&lt;li&gt;if (reporter != null) {&lt;/li&gt;
	&lt;li&gt;reporter.notifyOfAddedMetric(metric, metricName, group);&lt;br/&gt;
    +				for (int i= 0; i&amp;lt;reporters.size();i++) {&lt;br/&gt;
    +					MetricReporter reporter = reporters.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
    +					if (reporter != null){&lt;br/&gt;
    +&lt;br/&gt;
    +						FrontMetricGroup front;&lt;br/&gt;
    +						try 
{
    +							front= groups.get(i);
    +						}
&lt;p&gt; catch (IndexOutOfBoundsException e){&lt;br/&gt;
    +							front=new FrontMetricGroup(groups.size());&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    it would be better to create these groups when the reporter is instantiated.&lt;/p&gt;</comment>
                            <comment id="15516428" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80241027&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80241027&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -168,21 +168,40 @@ public String getMetricIdentifier(String metricName) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param filter character filter which is applied to the scope components if not null.&lt;/li&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public String getMetricIdentifier(String metricName, CharacterFilter filter) {&lt;/li&gt;
	&lt;li&gt;if (scopeString == null) {&lt;/li&gt;
	&lt;li&gt;if (filter != null) 
{
    -				scopeString = ScopeFormat.concat(filter, registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt; else &lt;/p&gt;
{
    -				scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt;    +	public String getMetricIdentifier(String metricName,CharacterFilter filter) {&lt;br/&gt;
    +		if (filter != null)&lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(filter, registry.getDelimiter(), scopeComponents);
    +		}
&lt;p&gt; else &lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
     		}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (filter != null) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {    +		if (filter != null){
     			return scopeString + registry.getDelimiter() + filter.filterCharacters(metricName);
     		} else {
     			return scopeString + registry.getDelimiter() + metricName;
     		}     	}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Returns the fully qualified metric name for reporter with certain number position in group, for example&lt;br/&gt;
    +	 * &lt;/p&gt;
{@code &quot;host-7.taskmanager-2.window_word_count.my-mapper.metricName&quot;}
&lt;p&gt;    +	 *&lt;br/&gt;
    +	 * @param metricName metric name&lt;br/&gt;
    +	 * @param filter character filter which is applied to the scope components if not null.&lt;br/&gt;
    +	 * @param indexReporter position number of reporter in group reporters&lt;br/&gt;
    +	 * @return fully qualified metric name&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	public String getMetricIdentifier(String metricName, CharacterFilter filter, int indexReporter) {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    argument should be called ```reporterIndex```&lt;/p&gt;</comment>
                            <comment id="15516430" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80240685&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80240685&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -219,9 +235,19 @@ public ScopeFormats getScopeFormats() {&lt;br/&gt;
     	public void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
     		try {&lt;br/&gt;
     			if (reporters != null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for (MetricReporter reporter : reporters) {&lt;/li&gt;
	&lt;li&gt;if (reporter != null) {&lt;/li&gt;
	&lt;li&gt;reporter.notifyOfAddedMetric(metric, metricName, group);&lt;br/&gt;
    +				for (int i= 0; i&amp;lt;reporters.size();i++) {&lt;br/&gt;
    +					MetricReporter reporter = reporters.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
    +					if (reporter != null){&lt;br/&gt;
    +&lt;br/&gt;
    +						FrontMetricGroup front;&lt;br/&gt;
    +						try {&lt;br/&gt;
    +							front= groups.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing space before ```=```&lt;/p&gt;</comment>
                            <comment id="15516431" author="githubbot" created="Fri, 23 Sep 2016 13:21:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80240626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80240626&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -219,9 +235,19 @@ public ScopeFormats getScopeFormats() {&lt;br/&gt;
     	public void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
     		try {&lt;br/&gt;
     			if (reporters != null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for (MetricReporter reporter : reporters) {&lt;/li&gt;
	&lt;li&gt;if (reporter != null) {&lt;/li&gt;
	&lt;li&gt;reporter.notifyOfAddedMetric(metric, metricName, group);&lt;br/&gt;
    +				for (int i= 0; i&amp;lt;reporters.size();i++) {&lt;br/&gt;
    +					MetricReporter reporter = reporters.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
    +					if (reporter != null){
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing space before curly brace.&lt;/p&gt;</comment>
                            <comment id="15516432" author="githubbot" created="Fri, 23 Sep 2016 13:21:28 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80241061&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80241061&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -168,21 +168,40 @@ public String getMetricIdentifier(String metricName) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param filter character filter which is applied to the scope components if not null.&lt;/li&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public String getMetricIdentifier(String metricName, CharacterFilter filter) {&lt;/li&gt;
	&lt;li&gt;if (scopeString == null) {&lt;/li&gt;
	&lt;li&gt;if (filter != null) 
{
    -				scopeString = ScopeFormat.concat(filter, registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt; else &lt;/p&gt;
{
    -				scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt;    +	public String getMetricIdentifier(String metricName,CharacterFilter filter) {&lt;br/&gt;
    +		if (filter != null)&lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(filter, registry.getDelimiter(), scopeComponents);
    +		}
&lt;p&gt; else &lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
     		}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (filter != null) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {    +		if (filter != null){
     			return scopeString + registry.getDelimiter() + filter.filterCharacters(metricName);
     		} else {
     			return scopeString + registry.getDelimiter() + metricName;
     		}     	}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Returns the fully qualified metric name for reporter with certain number position in group, for example&lt;br/&gt;
    +	 * &lt;/p&gt;
{@code &quot;host-7.taskmanager-2.window_word_count.my-mapper.metricName&quot;}
&lt;p&gt;    +	 *&lt;br/&gt;
    +	 * @param metricName metric name&lt;br/&gt;
    +	 * @param filter character filter which is applied to the scope components if not null.&lt;br/&gt;
    +	 * @param indexReporter position number of reporter in group reporters&lt;br/&gt;
    +	 * @return fully qualified metric name&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	public String getMetricIdentifier(String metricName, CharacterFilter filter, int indexReporter) {&lt;br/&gt;
    +		if (filter != null){&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing space before ```{```&lt;/p&gt;</comment>
                            <comment id="15516433" author="githubbot" created="Fri, 23 Sep 2016 13:21:29 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80241072&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80241072&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -168,21 +168,40 @@ public String getMetricIdentifier(String metricName) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param filter character filter which is applied to the scope components if not null.&lt;/li&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public String getMetricIdentifier(String metricName, CharacterFilter filter) {&lt;/li&gt;
	&lt;li&gt;if (scopeString == null) {&lt;/li&gt;
	&lt;li&gt;if (filter != null) 
{
    -				scopeString = ScopeFormat.concat(filter, registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt; else &lt;/p&gt;
{
    -				scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt;    +	public String getMetricIdentifier(String metricName,CharacterFilter filter) {&lt;br/&gt;
    +		if (filter != null)&lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(filter, registry.getDelimiter(), scopeComponents);
    +		}
&lt;p&gt; else &lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
     		}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (filter != null) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {    +		if (filter != null){
     			return scopeString + registry.getDelimiter() + filter.filterCharacters(metricName);
     		} else {
     			return scopeString + registry.getDelimiter() + metricName;
     		}     	}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Returns the fully qualified metric name for reporter with certain number position in group, for example&lt;br/&gt;
    +	 * &lt;/p&gt;
{@code &quot;host-7.taskmanager-2.window_word_count.my-mapper.metricName&quot;}
&lt;p&gt;    +	 *&lt;br/&gt;
    +	 * @param metricName metric name&lt;br/&gt;
    +	 * @param filter character filter which is applied to the scope components if not null.&lt;br/&gt;
    +	 * @param indexReporter position number of reporter in group reporters&lt;br/&gt;
    +	 * @return fully qualified metric name&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	public String getMetricIdentifier(String metricName, CharacterFilter filter, int indexReporter) {&lt;br/&gt;
    +		if (filter != null)&lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(filter, registry.getDelimiter(indexReporter), scopeComponents);
    +		}
&lt;p&gt; else &lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(registry.getDelimiter(indexReporter), scopeComponents);
    +		}
&lt;p&gt;    +		if (filter != null){&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing space before ```{```&lt;/p&gt;</comment>
                            <comment id="15516434" author="githubbot" created="Fri, 23 Sep 2016 13:21:29 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80241834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80241834&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-metrics/flink-metrics-core/src/main/java/org/apache/flink/metrics/MetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -189,4 +189,15 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
     	 */&lt;br/&gt;
     	String getMetricIdentifier(String metricName, CharacterFilter filter);&lt;br/&gt;
    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Returns the fully qualified metric name for reporter with certain number position in group, for example&lt;br/&gt;
    +	 * 
{@code &quot;host-7.taskmanager-2.window_word_count.my-mapper.metricName&quot;}
&lt;p&gt;    +	 *&lt;br/&gt;
    +	 * @param metricName metric name&lt;br/&gt;
    +	 * @param filter character filter which is applied to the scope components if not null.&lt;br/&gt;
    +	 * @param indexReporter position number of reporter in group reporters&lt;br/&gt;
    +	 * @return fully qualified metric name&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	String getMetricIdentifier(String metricName, CharacterFilter filter,int indexReporter);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This method should be part of `AbstractMetricGroup`. The signature of the `MetricRegistry#register()` may be changed if necessary.&lt;/p&gt;</comment>
                            <comment id="15516435" author="githubbot" created="Fri, 23 Sep 2016 13:21:29 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80240523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80240523&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -219,9 +235,19 @@ public ScopeFormats getScopeFormats() {&lt;br/&gt;
     	public void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
     		try {&lt;br/&gt;
     			if (reporters != null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for (MetricReporter reporter : reporters) {&lt;/li&gt;
	&lt;li&gt;if (reporter != null) {&lt;/li&gt;
	&lt;li&gt;reporter.notifyOfAddedMetric(metric, metricName, group);&lt;br/&gt;
    +				for (int i= 0; i&amp;lt;reporters.size();i++) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing spaces around ```&amp;lt;``` and before ```i++```.&lt;/p&gt;</comment>
                            <comment id="15516436" author="githubbot" created="Fri, 23 Sep 2016 13:21:29 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80242008&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80242008&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -99,10 +99,17 @@ public MetricRegistry(Configuration config) {&lt;br/&gt;
     				DelegatingConfiguration reporterConfig = new DelegatingConfiguration(config, ConfigConstants.METRICS_REPORTER_PREFIX + namedReporter + &quot;.&quot;);&lt;br/&gt;
     				final String className = reporterConfig.getString(ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, null);&lt;br/&gt;
     				if (className == null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;LOG.error(&quot;No reporter class set for reporter &quot; + namedReporter + &quot;. Metrics might not be exposed/reported.&quot;);&lt;br/&gt;
    +					LOG.error(&quot;No reporter class set for reporter {}. Metrics might not be exposed/reported.&quot;,namedReporter);&lt;br/&gt;
     					continue;&lt;br/&gt;
     				}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +				String delimiterForReporter = reporterConfig.getString(ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER,defaultDelimiter);&lt;br/&gt;
    +				if(delimiterForReporter.length()!=1){&lt;br/&gt;
    +					LOG.warn(&quot;Failed to parse delimiter for reporter {}, using global delimiter.&quot;,namedReporter);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    and possibly the what was parsed.&lt;/p&gt;</comment>
                            <comment id="15516437" author="githubbot" created="Fri, 23 Sep 2016 13:21:30 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80241187&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80241187&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -168,21 +168,40 @@ public String getMetricIdentifier(String metricName) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param filter character filter which is applied to the scope components if not null.&lt;/li&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public String getMetricIdentifier(String metricName, CharacterFilter filter) {&lt;/li&gt;
	&lt;li&gt;if (scopeString == null) {&lt;/li&gt;
	&lt;li&gt;if (filter != null) 
{
    -				scopeString = ScopeFormat.concat(filter, registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt; else &lt;/p&gt;
{
    -				scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt;    +	public String getMetricIdentifier(String metricName,CharacterFilter filter) {&lt;br/&gt;
    +		if (filter != null)&lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(filter, registry.getDelimiter(), scopeComponents);
    +		}
&lt;p&gt; else &lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
     		}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (filter != null) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {    +		if (filter != null){
     			return scopeString + registry.getDelimiter() + filter.filterCharacters(metricName);
     		} else {
     			return scopeString + registry.getDelimiter() + metricName;
     		}     	}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Returns the fully qualified metric name for reporter with certain number position in group, for example&lt;br/&gt;
    +	 * &lt;/p&gt;
{@code &quot;host-7.taskmanager-2.window_word_count.my-mapper.metricName&quot;}
&lt;p&gt;    +	 *&lt;br/&gt;
    +	 * @param metricName metric name&lt;br/&gt;
    +	 * @param filter character filter which is applied to the scope components if not null.&lt;br/&gt;
    +	 * @param indexReporter position number of reporter in group reporters&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &quot;index of the reporter whose delimiter should be used&quot;&lt;/p&gt;</comment>
                            <comment id="15516438" author="githubbot" created="Fri, 23 Sep 2016 13:21:30 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80241086&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80241086&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -168,21 +168,40 @@ public String getMetricIdentifier(String metricName) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param filter character filter which is applied to the scope components if not null.&lt;/li&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public String getMetricIdentifier(String metricName, CharacterFilter filter) {&lt;/li&gt;
	&lt;li&gt;if (scopeString == null) {&lt;/li&gt;
	&lt;li&gt;if (filter != null) 
{
    -				scopeString = ScopeFormat.concat(filter, registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt; else &lt;/p&gt;
{
    -				scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
    -			}
&lt;p&gt;    +	public String getMetricIdentifier(String metricName,CharacterFilter filter) {&lt;br/&gt;
    +		if (filter != null)&lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(filter, registry.getDelimiter(), scopeComponents);
    +		}
&lt;p&gt; else &lt;/p&gt;
{
    +			scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
     		}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (filter != null) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {    +		if (filter != null){
     			return scopeString + registry.getDelimiter() + filter.filterCharacters(metricName);
     		} else {
     			return scopeString + registry.getDelimiter() + metricName;
     		}     	}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Returns the fully qualified metric name for reporter with certain number position in group, for example&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    the javadoc should say &quot;Returns the fully qualified metric name using the configured delimiter for the reporter with the given index.&lt;/p&gt;</comment>
                            <comment id="15522860" author="githubbot" created="Mon, 26 Sep 2016 12:07:59 +0000"  >&lt;p&gt;Github user ex00 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    zentol, thanks for you review.&lt;br/&gt;
    I am pushed edited implementation.&lt;/p&gt;</comment>
                            <comment id="15523155" author="githubbot" created="Mon, 26 Sep 2016 14:06:06 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80477622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80477622&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/test/java/org/apache/flink/runtime/metrics/MetricRegistryTest.java &amp;#8212;&lt;br/&gt;
    @@ -280,4 +282,65 @@ public void testConfigurableDelimiter() &lt;/p&gt;
{
     
     		registry.shutdown();
     	}
&lt;p&gt;    +&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testConfigurableDelimiterForReporters() {&lt;br/&gt;
    +		Configuration config = new Configuration();&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTERS_LIST, &quot;test1,test2,test3&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;_&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter.class.getName());&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test2.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;-&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test2.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter.class.getName());&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test3.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;AA&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test3.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter.class.getName());&lt;br/&gt;
    +&lt;br/&gt;
    +		MetricRegistry registry = new MetricRegistry(config);&lt;br/&gt;
    +&lt;br/&gt;
    +		assertEquals(&apos;.&apos;, registry.getDelimiter());&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    introducing a static final char field for the global delimiter would improve readability.&lt;/p&gt;</comment>
                            <comment id="15523156" author="githubbot" created="Mon, 26 Sep 2016 14:06:06 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80480187&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80480187&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/FrontMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,129 @@&lt;br/&gt;
    +/*&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + * distributed with this work for additional information&lt;br/&gt;
    + * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    + * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    + * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    + * with the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +&lt;br/&gt;
    +package org.apache.flink.runtime.metrics.groups;&lt;br/&gt;
    +&lt;br/&gt;
    +import org.apache.flink.metrics.CharacterFilter;&lt;br/&gt;
    +import org.apache.flink.metrics.Counter;&lt;br/&gt;
    +import org.apache.flink.metrics.Gauge;&lt;br/&gt;
    +import org.apache.flink.metrics.Histogram;&lt;br/&gt;
    +import org.apache.flink.metrics.Meter;&lt;br/&gt;
    +import org.apache.flink.metrics.MetricGroup;&lt;br/&gt;
    +&lt;br/&gt;
    +import java.util.Map;&lt;br/&gt;
    +&lt;br/&gt;
    +import static org.apache.flink.util.Preconditions.checkNotNull;&lt;br/&gt;
    +&lt;br/&gt;
    +/**&lt;br/&gt;
    + * When need know position number for reporter in  metric group&lt;br/&gt;
    + *&lt;br/&gt;
    + * @param &amp;lt;A&amp;gt; reference to &lt;/p&gt;
{@link AbstractMetricGroup AbstractMetricGroup}
&lt;p&gt;    + */&lt;br/&gt;
    +public class FrontMetricGroup&amp;lt;A extends AbstractMetricGroup&amp;lt;?&amp;gt;&amp;gt; implements MetricGroup {&lt;br/&gt;
    +&lt;br/&gt;
    +	protected A reference;&lt;br/&gt;
    +	protected int index;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    should be called reporterIndex.&lt;/p&gt;</comment>
                            <comment id="15523157" author="githubbot" created="Mon, 26 Sep 2016 14:06:06 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80474584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80474584&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -219,9 +249,16 @@ public ScopeFormats getScopeFormats() {&lt;br/&gt;
     	public void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
     		try {&lt;br/&gt;
     			if (reporters != null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for (MetricReporter reporter : reporters) {&lt;br/&gt;
    +				for (int i = 0; i &amp;lt; reporters.size(); i++) {&lt;br/&gt;
    +					MetricReporter reporter = reporters.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
     					if (reporter != null) {&lt;/li&gt;
	&lt;li&gt;reporter.notifyOfAddedMetric(metric, metricName, group);&lt;br/&gt;
    +						if (group instanceof AbstractMetricGroup) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    this will always be true.&lt;/p&gt;</comment>
                            <comment id="15523158" author="githubbot" created="Mon, 26 Sep 2016 14:06:06 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80481547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80481547&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/FrontMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,129 @@&lt;br/&gt;
    +/*&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + * distributed with this work for additional information&lt;br/&gt;
    + * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    + * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    + * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    + * with the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +&lt;br/&gt;
    +package org.apache.flink.runtime.metrics.groups;&lt;br/&gt;
    +&lt;br/&gt;
    +import org.apache.flink.metrics.CharacterFilter;&lt;br/&gt;
    +import org.apache.flink.metrics.Counter;&lt;br/&gt;
    +import org.apache.flink.metrics.Gauge;&lt;br/&gt;
    +import org.apache.flink.metrics.Histogram;&lt;br/&gt;
    +import org.apache.flink.metrics.Meter;&lt;br/&gt;
    +import org.apache.flink.metrics.MetricGroup;&lt;br/&gt;
    +&lt;br/&gt;
    +import java.util.Map;&lt;br/&gt;
    +&lt;br/&gt;
    +import static org.apache.flink.util.Preconditions.checkNotNull;&lt;br/&gt;
    +&lt;br/&gt;
    +/**&lt;br/&gt;
    + * When need know position number for reporter in  metric group&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    &quot;Metric group which forwards all registration calls to a varaible parent metric group that injects a variable reporter index into calls to &lt;/p&gt;
{@link org.apache.flink.metrics.MetricGroup#getMetricIdentifier(String)}
&lt;p&gt; or &lt;/p&gt;
{@link org.apache.flink.metrics.MetricGroup#getMetricIdentifier(String, CharacterFilter)}
&lt;p&gt;. This allows us to use reporter-specific delimiters, without requiring any action by the reporter.&quot;&lt;/p&gt;</comment>
                            <comment id="15523159" author="githubbot" created="Mon, 26 Sep 2016 14:06:06 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80477644&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80477644&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/test/java/org/apache/flink/runtime/metrics/MetricRegistryTest.java &amp;#8212;&lt;br/&gt;
    @@ -280,4 +282,65 @@ public void testConfigurableDelimiter() &lt;/p&gt;
{
     
     		registry.shutdown();
     	}
&lt;p&gt;    +&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testConfigurableDelimiterForReporters() &lt;/p&gt;
{
    +		Configuration config = new Configuration();
    +		config.setString(ConfigConstants.METRICS_REPORTERS_LIST, &quot;test1,test2,test3&quot;);
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;_&quot;);
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter.class.getName());
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test2.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;-&quot;);
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test2.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter.class.getName());
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test3.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;AA&quot;);
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test3.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter.class.getName());
    +
    +		MetricRegistry registry = new MetricRegistry(config);
    +
    +		assertEquals(&apos;.&apos;, registry.getDelimiter());
    +		assertEquals(&apos;_&apos;, registry.getDelimiter(0));
    +		assertEquals(&apos;-&apos;, registry.getDelimiter(1));
    +		assertEquals(&apos;.&apos;, registry.getDelimiter(2));
    +		assertEquals(&apos;.&apos;, registry.getDelimiter(3));
    +		assertEquals(&apos;.&apos;, registry.getDelimiter(-1));
    +
    +		registry.shutdown();
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testConfigurableDelimiterForReportersInGroup() {&lt;br/&gt;
    +		Configuration config = new Configuration();&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTERS_LIST, &quot;test1,test2,test3,test4&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;_&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter8.class.getName());&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test2.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;-&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test2.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter8.class.getName());&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test3.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;AA&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test3.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter8.class.getName());&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test4.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter8.class.getName());&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_SCOPE_NAMING_TM, &quot;A.B&quot;);&lt;br/&gt;
    +&lt;br/&gt;
    +		MetricRegistry registry = new MetricRegistry(config);&lt;br/&gt;
    +		List&amp;lt;MetricReporter&amp;gt; reporters = registry.getReporters();&lt;br/&gt;
    +		((TestReporter8)reporters.get(0)).expectedDelimiter = &apos;_&apos;; //test1  reporter&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    for clarity purposes we should explicitly set the expectedDelimiter here.&lt;/p&gt;</comment>
                            <comment id="15523160" author="githubbot" created="Mon, 26 Sep 2016 14:06:06 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80479173&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80479173&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -219,9 +249,16 @@ public ScopeFormats getScopeFormats() {&lt;br/&gt;
     	public void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
     		try {&lt;br/&gt;
     			if (reporters != null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for (MetricReporter reporter : reporters) {&lt;br/&gt;
    +				for (int i = 0; i &amp;lt; reporters.size(); i++) {&lt;br/&gt;
    +					MetricReporter reporter = reporters.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
     					if (reporter != null) {&lt;/li&gt;
	&lt;li&gt;reporter.notifyOfAddedMetric(metric, metricName, group);&lt;br/&gt;
    +						if (group instanceof AbstractMetricGroup) {&lt;br/&gt;
    +							FrontMetricGroup front = groups.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    just realized that we can simplify this. We don&apos;t need multiple FrontMetricGroups, but only 1 on which we also set the index before notify().&lt;/p&gt;</comment>
                            <comment id="15523162" author="githubbot" created="Mon, 26 Sep 2016 14:06:06 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80474552&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80474552&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -219,9 +249,16 @@ public ScopeFormats getScopeFormats() {&lt;br/&gt;
     	public void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    if you change the signature to (Metric, String, AbstractMetricGroup) you would no longer need the cast on L257.&lt;/p&gt;</comment>
                            <comment id="15523161" author="githubbot" created="Mon, 26 Sep 2016 14:06:06 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80475991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80475991&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/test/java/org/apache/flink/runtime/metrics/MetricRegistryTest.java &amp;#8212;&lt;br/&gt;
    @@ -280,4 +282,65 @@ public void testConfigurableDelimiter() &lt;/p&gt;
{
     
     		registry.shutdown();
     	}
&lt;p&gt;    +&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testConfigurableDelimiterForReporters() &lt;/p&gt;
{
    +		Configuration config = new Configuration();
    +		config.setString(ConfigConstants.METRICS_REPORTERS_LIST, &quot;test1,test2,test3&quot;);
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;_&quot;);
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter.class.getName());
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test2.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;-&quot;);
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test2.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter.class.getName());
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test3.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;AA&quot;);
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test3.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter.class.getName());
    +
    +		MetricRegistry registry = new MetricRegistry(config);
    +
    +		assertEquals(&apos;.&apos;, registry.getDelimiter());
    +		assertEquals(&apos;_&apos;, registry.getDelimiter(0));
    +		assertEquals(&apos;-&apos;, registry.getDelimiter(1));
    +		assertEquals(&apos;.&apos;, registry.getDelimiter(2));
    +		assertEquals(&apos;.&apos;, registry.getDelimiter(3));
    +		assertEquals(&apos;.&apos;, registry.getDelimiter(-1));
    +
    +		registry.shutdown();
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testConfigurableDelimiterForReportersInGroup() {&lt;br/&gt;
    +		Configuration config = new Configuration();&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTERS_LIST, &quot;test1,test2,test3,test4&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;_&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter8.class.getName());&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test2.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;-&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test2.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter8.class.getName());&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test3.&quot; + ConfigConstants.METRICS_REPORTER_SCOPE_DELIMITER, &quot;AA&quot;);&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test3.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter8.class.getName());&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test4.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, TestReporter8.class.getName());&lt;br/&gt;
    +		config.setString(ConfigConstants.METRICS_SCOPE_NAMING_TM, &quot;A.B&quot;);&lt;br/&gt;
    +&lt;br/&gt;
    +		MetricRegistry registry = new MetricRegistry(config);&lt;br/&gt;
    +		List&amp;lt;MetricReporter&amp;gt; reporters = registry.getReporters();&lt;br/&gt;
    +		((TestReporter8)reporters.get(0)).expectedDelimiter = &apos;_&apos;; //test1  reporter&lt;br/&gt;
    +		((TestReporter8)reporters.get(1)).expectedDelimiter = &apos;-&apos;; //test2 reporter&lt;br/&gt;
    +		((TestReporter8)reporters.get(2)).expectedDelimiter = &apos;.&apos;; //test3 reporter, because &apos;AA&apos; - not correct delimiter&lt;br/&gt;
    +		//for test4 reporter use global delimiter&lt;br/&gt;
    +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    are you sure that this test accurately detects errors? if the assert within notify() fails an exception is thrown, which however is never propagated but only logged.&lt;/p&gt;

&lt;p&gt;    It would however be correct if you execute countCall++ after assertEquals(), as you only reach it for a correct delimiter. Then of course it should be renamed to something like &quot;numCorrectDelimiters&quot; or something.&lt;/p&gt;</comment>
                            <comment id="15523163" author="githubbot" created="Mon, 26 Sep 2016 14:06:06 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80473933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80473933&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: docs/monitoring/metrics.md &amp;#8212;&lt;br/&gt;
    @@ -280,6 +280,7 @@ Metrics can be exposed to an external system by configuring one or several repor&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;`metrics.reporter.&amp;lt;name&amp;gt;.&amp;lt;config&amp;gt;`: Generic setting `&amp;lt;config&amp;gt;` for the reporter named `&amp;lt;name&amp;gt;`.&lt;/li&gt;
	&lt;li&gt;`metrics.reporter.&amp;lt;name&amp;gt;.class`: The reporter class to use for the reporter named `&amp;lt;name&amp;gt;`.&lt;/li&gt;
	&lt;li&gt;`metrics.reporter.&amp;lt;name&amp;gt;.interval`: The reporter interval to use for the reporter named `&amp;lt;name&amp;gt;`.&lt;br/&gt;
    +- `metrics.reporter.&amp;lt;name&amp;gt;.scope.delimiter`: The delimiter for to use for the identifier (default value use `metrics.scope.delimiter`) for the reporter named `&amp;lt;name&amp;gt;`.
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    for to use -&amp;gt; to use&lt;/p&gt;</comment>
                            <comment id="15523352" author="githubbot" created="Mon, 26 Sep 2016 15:18:55 +0000"  >&lt;p&gt;Github user ex00 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80499420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80499420&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -219,9 +249,16 @@ public ScopeFormats getScopeFormats() {&lt;br/&gt;
     	public void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    In this case I get error in the compile for extending class of MetricRegistry. &lt;/p&gt;

&lt;p&gt;    For example org.apache.flink.runtime.metrics.groups.TaskMetricGroupTest.CountingMetricRegistry#register(Metric , String , MetricGroup) and  org.apache.flink.runtime.metrics.groups.MetricGroupTest.ExceptionOnRegisterRegistry#register(Metric , String , MetricGroup)&lt;br/&gt;
    Cause by:  method does not override or implement a method from a supertype&lt;/p&gt;

&lt;p&gt;    It is simple tests classes, I can change methods signature in their. But will not be any problems in future because of this change in MetricRegistry?&lt;/p&gt;</comment>
                            <comment id="15525242" author="githubbot" created="Tue, 27 Sep 2016 06:34:07 +0000"  >&lt;p&gt;Github user ex00 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    zentol, thanks!&lt;br/&gt;
    I am pushed edited implementation again.&lt;/p&gt;</comment>
                            <comment id="15529216" author="githubbot" created="Wed, 28 Sep 2016 10:33:46 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80886088&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80886088&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -216,17 +244,20 @@ public ScopeFormats getScopeFormats() {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param metricName  the name of the metric&lt;/li&gt;
	&lt;li&gt;@param group       the group that contains the metric&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
    +	public void register(Metric metric, String metricName, AbstractMetricGroup group) {&lt;br/&gt;
     		try {&lt;br/&gt;
     			if (reporters != null) {&lt;/li&gt;
	&lt;li&gt;for (MetricReporter reporter : reporters) {&lt;br/&gt;
    +				for (int i = 0; i &amp;lt; reporters.size(); i++) {&lt;br/&gt;
    +					MetricReporter reporter = reporters.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
     					if (reporter != null) {&lt;/li&gt;
	&lt;li&gt;reporter.notifyOfAddedMetric(metric, metricName, group);&lt;br/&gt;
    +						FrontMetricGroup front = new FrontMetricGroup&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    we will now create a new object every time we add a new metric. Instead, keep a single `FrontMetricGroup` instance in the registry, and add a `setIndex()` method to it that you call here along with `setReference()`.&lt;/p&gt;

&lt;p&gt;    but, i just realized that without this you would end up with concurrency issues since multiple register calls can be active at the same time...I&apos;ll have to think about this for a bit.&lt;/p&gt;</comment>
                            <comment id="15529215" author="githubbot" created="Wed, 28 Sep 2016 10:33:46 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80886970&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80886970&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -216,17 +244,20 @@ public ScopeFormats getScopeFormats() {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param metricName  the name of the metric&lt;/li&gt;
	&lt;li&gt;@param group       the group that contains the metric&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
    +	public void register(Metric metric, String metricName, AbstractMetricGroup group) {&lt;br/&gt;
     		try {&lt;br/&gt;
     			if (reporters != null) {&lt;/li&gt;
	&lt;li&gt;for (MetricReporter reporter : reporters) {&lt;br/&gt;
    +				for (int i = 0; i &amp;lt; reporters.size(); i++) {&lt;br/&gt;
    +					MetricReporter reporter = reporters.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
     					if (reporter != null) {&lt;/li&gt;
	&lt;li&gt;reporter.notifyOfAddedMetric(metric, metricName, group);&lt;br/&gt;
    +						FrontMetricGroup front = new FrontMetricGroup&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
    +						front.setReference(group);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The references must also be set within `unregister()`.&lt;/p&gt;</comment>
                            <comment id="15529783" author="githubbot" created="Wed, 28 Sep 2016 14:21:10 +0000"  >&lt;p&gt;Github user ex00 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517#discussion_r80927679&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517#discussion_r80927679&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistry.java &amp;#8212;&lt;br/&gt;
    @@ -216,17 +244,20 @@ public ScopeFormats getScopeFormats() {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param metricName  the name of the metric&lt;/li&gt;
	&lt;li&gt;@param group       the group that contains the metric&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void register(Metric metric, String metricName, MetricGroup group) {&lt;br/&gt;
    +	public void register(Metric metric, String metricName, AbstractMetricGroup group) {&lt;br/&gt;
     		try {&lt;br/&gt;
     			if (reporters != null) {&lt;/li&gt;
	&lt;li&gt;for (MetricReporter reporter : reporters) {&lt;br/&gt;
    +				for (int i = 0; i &amp;lt; reporters.size(); i++) {&lt;br/&gt;
    +					MetricReporter reporter = reporters.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
     					if (reporter != null) {&lt;/li&gt;
	&lt;li&gt;reporter.notifyOfAddedMetric(metric, metricName, group);&lt;br/&gt;
    +						FrontMetricGroup front = new FrontMetricGroup&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
    +						front.setReference(group);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    If we need use `FrontMetricGroup` also for `unregister()`, do I need return list of `FrontMetricGroup` ? and we will avoid for `register()` &lt;br/&gt;
    &amp;gt;we will now create a new object every time we add a new metric.&lt;/p&gt;

&lt;p&gt;    in this case&lt;/p&gt;</comment>
                            <comment id="15548298" author="githubbot" created="Wed, 5 Oct 2016 10:16:43 +0000"  >&lt;p&gt;Github user ex00 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hello, zentol.&lt;br/&gt;
    &amp;gt;but, i just realized that without this you would end up with concurrency issues since multiple register calls can be active at the same time...I&apos;ll have to think about this for a bit.&lt;/p&gt;

&lt;p&gt;    I&apos;m propose return the implement where I was creating new FrontMetricGroup&apos;s and put it in list in the MetricRegistry constructor. What do you think about it?&lt;/p&gt;
</comment>
                            <comment id="15548348" author="githubbot" created="Wed, 5 Oct 2016 10:40:57 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    that wouldn&apos;t solve the concurrency issues. If you have 2 concurrent notifies going on you would pass the same FrontMetricGroup to the reporter, hence for both calls the reporter would work on the same referenced MetricGroup, even though they may be supposed to be different ones.&lt;/p&gt;

&lt;p&gt;    I would propose keeping the current approach of creating a new FrontMetricGroup every time. This means you can simplify that class a lot, since you can now extend `ProxyMetricGroup`, and pass the index through the constructor as well. I don&apos;t see a solution where we can get away without creating a new object or putting the entire notification inside a synchronized block (which would be a no-go).&lt;/p&gt;</comment>
                            <comment id="15548873" author="githubbot" created="Wed, 5 Oct 2016 14:24:49 +0000"  >&lt;p&gt;Github user ex00 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks.&lt;br/&gt;
    I pushed new changes.&lt;/p&gt;</comment>
                            <comment id="15575389" author="zentol" created="Fri, 14 Oct 2016 13:50:23 +0000"  >&lt;p&gt;Implemented in 85b53444a852027714904a050a68489740b7f2f8&lt;/p&gt;</comment>
                            <comment id="15575390" author="githubbot" created="Fri, 14 Oct 2016 13:50:37 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2517&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i336db:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>