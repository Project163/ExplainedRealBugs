<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:25:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4977] Enum serialization does not work in all cases</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4977</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Enums produce serialization failures whether they are by themselves or part of a POJO in the stream. I&apos;ve tried running in IntelliJ IDEA and also via &lt;tt&gt;flink run&lt;/tt&gt;. Here is a small program to reproduce:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.flink.testenum;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestEnumStream {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; MyEnum {
        NONE, SOMETHING, EVERYTHING
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; StreamExecutionEnvironment environment = StreamExecutionEnvironment.getExecutionEnvironment();
        environment.setParallelism(1);

        environment.fromElements(MyEnum.NONE, MyEnum.SOMETHING, MyEnum.EVERYTHING)
                .addSink(x -&amp;gt; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(x));

        environment.execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;TestEnumStream&quot;&lt;/span&gt;);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.RuntimeException: Cannot access the constants of the enum org.apache.flink.testenum.TestEnumStream$MyEnum
	at org.apache.flink.api.common.typeutils.base.EnumSerializer.createValues(EnumSerializer.java:132)
	at org.apache.flink.api.common.typeutils.base.EnumSerializer.&amp;lt;init&amp;gt;(EnumSerializer.java:43)
	at org.apache.flink.api.java.typeutils.EnumTypeInfo.createSerializer(EnumTypeInfo.java:101)
	at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.fromCollection(StreamExecutionEnvironment.java:773)
	at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.fromElements(StreamExecutionEnvironment.java:674)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I took a look at that line in EnumSerializer.java and swapped out the reflection on the &quot;values&quot; method for the simpler `enumClass.getEnumConstants()`, and that seems to work after I install my custom flink-core jar. I believe this is because &lt;a href=&quot;http://docs.oracle.com/javase/tutorial/reflect/special/enumMembers.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/tutorial/reflect/special/enumMembers.html&lt;/a&gt; specifically states you cannot reflect on the &quot;values&quot; method since it is implicitly generated at compile time.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java SE 1.8.0_91&lt;br/&gt;
Ubuntu 14.04.4 LTS (trusty)&lt;/p&gt;</environment>
        <key id="13016672">FLINK-4977</key>
            <summary>Enum serialization does not work in all cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="swinard">Sean Winard</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Oct 2016 17:49:58 +0000</created>
                <updated>Fri, 4 Nov 2016 14:11:40 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 13:59:00 +0000</resolved>
                                    <version>1.1.3</version>
                                    <fixVersion>1.1.4</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15622869" author="swinard" created="Mon, 31 Oct 2016 17:59:52 +0000"  >&lt;p&gt;Cleaned up the test program&lt;/p&gt;</comment>
                            <comment id="15625810" author="swinard" created="Tue, 1 Nov 2016 16:04:00 +0000"  >&lt;p&gt;It looks like changing the access modifier of the enum can make this work. In the case of my small example program, you can make the enum &lt;tt&gt;public&lt;/tt&gt; and it will work. In my real program, I have a separate top-level enum class which is package-private, which is then in a POJO which is streamed. If I change the enum to &lt;tt&gt;public&lt;/tt&gt;, then it will work fine. Note that the access modifier of regular classes does not seem to affect their ability to be serialized properly, in my testing. And again note that the proposed change for the EnumSerializer seems to work for enums with any access modifier. &lt;/p&gt;</comment>
                            <comment id="15626443" author="stephanewen" created="Tue, 1 Nov 2016 19:33:21 +0000"  >&lt;p&gt;Nice, thanks for diagnosing this.&lt;/p&gt;

&lt;p&gt;Would be great if you could open a pull request for this!&lt;/p&gt;</comment>
                            <comment id="15626568" author="swinard" created="Tue, 1 Nov 2016 20:22:28 +0000"  >&lt;p&gt;Would love to! Unfortunately, I&apos;m not approved yet by my employer to contribute and it will probably take a few more days at least. I have no problem if anyone wants to put in the fix in the meantime.&lt;/p&gt;</comment>
                            <comment id="15636406" author="stephanewen" created="Fri, 4 Nov 2016 13:59:03 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;1.2.0 via 852c5298ea997175ec4e968350ac32db413c50f8&lt;/li&gt;
	&lt;li&gt;1.1.4 via 5133bf9ea4c9633ad3aa840f81f6dedaa0026994&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35mu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>