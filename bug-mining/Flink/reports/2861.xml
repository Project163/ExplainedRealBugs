<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:38:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9920] BucketingSinkFaultToleranceITCase fails on travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9920</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/zentol/flink/jobs/407021898&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/zentol/flink/jobs/407021898&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 13.082 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.streaming.connectors.fs.bucketing.BucketingSinkFaultToleranceITCase
runCheckpointedProgram(org.apache.flink.streaming.connectors.fs.bucketing.BucketingSinkFaultToleranceITCase)  Time elapsed: 5.696 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: Read line does not match expected pattern.
	at org.junit.Assert.fail(Assert.java:88)
	at org.apache.flink.streaming.connectors.fs.bucketing.BucketingSinkFaultToleranceITCase.postSubmit(BucketingSinkFaultToleranceITCase.java:182)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13173771">FLINK-9920</key>
            <summary>BucketingSinkFaultToleranceITCase fails on travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Mon, 23 Jul 2018 10:53:57 +0000</created>
                <updated>Mon, 4 Feb 2019 13:24:50 +0000</updated>
                            <resolved>Mon, 4 Feb 2019 13:24:50 +0000</resolved>
                                    <version>1.6.0</version>
                    <version>1.7.0</version>
                                    <fixVersion>1.8.0</fixVersion>
                                    <component>Connectors / FileSystem</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16553349" author="till.rohrmann" created="Mon, 23 Jul 2018 20:15:05 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/407197277/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/407197277/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16553390" author="till.rohrmann" created="Mon, 23 Jul 2018 20:45:34 +0000"  >&lt;p&gt;In the logs one sees the following exception &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR org.apache.flink.streaming.connectors.fs.bucketing.BucketingSink  - Could not create file &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; checking &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; truncate works.
java.io.IOException: Failed to shutdown streamer
	at org.apache.hadoop.hdfs.DFSOutputStream.closeThreads(DFSOutputStream.java:788)
	at org.apache.hadoop.hdfs.DFSOutputStream.closeImpl(DFSOutputStream.java:848)
	at org.apache.hadoop.hdfs.DFSOutputStream.close(DFSOutputStream.java:805)
	at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:72)
	at org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:106)
	at org.apache.flink.streaming.connectors.fs.bucketing.BucketingSink.reflectTruncate(BucketingSink.java:637)
	at org.apache.flink.streaming.connectors.fs.bucketing.BucketingSink.initializeState(BucketingSink.java:383)
	at org.apache.flink.streaming.util.functions.StreamingFunctionUtils.tryRestoreFunction(StreamingFunctionUtils.java:178)
	at org.apache.flink.streaming.util.functions.StreamingFunctionUtils.restoreFunctionState(StreamingFunctionUtils.java:160)
	at org.apache.flink.streaming.api.operators.AbstractUdfStreamOperator.initializeState(AbstractUdfStreamOperator.java:96)
	at org.apache.flink.streaming.api.operators.AbstractStreamOperator.initializeState(AbstractStreamOperator.java:254)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.initializeState(StreamTask.java:738)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:289)
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:702)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not entirely sure whether this is normal or not.&lt;/p&gt;</comment>
                            <comment id="16567972" author="till.rohrmann" created="Fri, 3 Aug 2018 08:48:36 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/411619294/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/411619294/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16577970" author="till.rohrmann" created="Mon, 13 Aug 2018 08:52:28 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/414457035/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/414457035/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16587304" author="till.rohrmann" created="Tue, 21 Aug 2018 11:23:05 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/418629657/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/418629657/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16621667" author="till.rohrmann" created="Thu, 20 Sep 2018 08:37:46 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/430903946/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/430903946/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16635434" author="till.rohrmann" created="Tue, 2 Oct 2018 12:55:09 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/435520353/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/435520353/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16640900" author="till.rohrmann" created="Sat, 6 Oct 2018 23:00:13 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/438072434/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/438072434/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16643223" author="gjy" created="Tue, 9 Oct 2018 12:02:33 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/439037096/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/439037096/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16673482" author="phoenixjiangnan" created="Fri, 2 Nov 2018 17:54:59 +0000"  >&lt;p&gt;Still saw it. &lt;a href=&quot;https://api.travis-ci.org/v3/job/449685897/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/449685897/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16711492" author="dawidwys" created="Thu, 6 Dec 2018 14:10:01 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/464266452/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/464266452/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16722935" author="sleepy" created="Mon, 17 Dec 2018 12:19:26 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/466986082/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/466986082/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16745034" author="till.rohrmann" created="Thu, 17 Jan 2019 13:20:26 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/480428635/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/480428635/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16745035" author="till.rohrmann" created="Thu, 17 Jan 2019 13:20:43 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/480128907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/480128907&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16746345" author="aljoscha" created="Fri, 18 Jan 2019 14:31:38 +0000"  >&lt;p&gt;This is quite the pain to reproduce, I&apos;m running this locally in a loop (via bash) and I&apos;m running 6 instances of the test in parallel. After 800 accumulated runs, still no failure. Just fyi.&lt;/p&gt;</comment>
                            <comment id="16748419" author="yunta" created="Tue, 22 Jan 2019 06:30:32 +0000"  >&lt;p&gt;Another instance:&#160; &lt;a href=&quot;https://api.travis-ci.org/v3/job/481937341/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/481937341/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; when you try to verify this case locally. Did you use hadoop-2.8.3 just like travis used, and the local OS is linux not mac-os?&lt;/p&gt;</comment>
                            <comment id="16750226" author="till.rohrmann" created="Wed, 23 Jan 2019 17:01:55 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/483415515/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/483415515/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16753898" author="aljoscha" created="Mon, 28 Jan 2019 10:56:01 +0000"  >&lt;p&gt;I enhanced the message in the assert statement. I&apos;m hoping this will give us more information. Please keep posting logs when you encounter this.&lt;/p&gt;</comment>
                            <comment id="16757236" author="till.rohrmann" created="Thu, 31 Jan 2019 13:28:12 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/486860552/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/486860552/log.txt&lt;/a&gt; with the following message:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
BucketingSinkFaultToleranceITCase&amp;gt;StreamFaultToleranceTestBase.runCheckpointedProgram:78-&amp;gt;postSubmit:182 Read line does not match expected pattern. Line: ï¿½hello
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16757409" author="yunta" created="Thu, 31 Jan 2019 16:01:51 +0000"  >&lt;p&gt;With more detailed messages, I believe this bug happened due to the test file verifying whether &lt;tt&gt;truncate&lt;/tt&gt; work did not be deleted.&lt;/p&gt;</comment>
                            <comment id="16758249" author="aljoscha" created="Fri, 1 Feb 2019 12:15:40 +0000"  >&lt;p&gt;Excellent, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt;! I&apos;ll post a quick PR.&lt;/p&gt;</comment>
                            <comment id="16759843" author="aljoscha" created="Mon, 4 Feb 2019 13:24:50 +0000"  >&lt;p&gt;Fixed on master in&lt;br/&gt;
24c2e17c8d52ae2f0f897a5806a3a44fdf62b0a5&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13209845">FLINK-11345</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3w627:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>