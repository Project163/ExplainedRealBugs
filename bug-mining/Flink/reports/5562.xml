<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:58:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-23196] JobMasterITCase fail on azure due to BindException</title>
                <link>https://issues.apache.org/jira/browse/FLINK-23196</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19753&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&amp;amp;l=4251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19753&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&amp;amp;l=4251&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Jul 01 00:00:27 [ERROR] Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 4.272 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.runtime.jobmaster.JobMasterITCase
Jul 01 00:00:27 [ERROR] testRejectionOfEmptyJobGraphs(org.apache.flink.runtime.jobmaster.JobMasterITCase)  Time elapsed: 3.009 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
Jul 01 00:00:27 org.apache.flink.util.FlinkException: Could not create the DispatcherResourceManagerComponent.
Jul 01 00:00:27 	at org.apache.flink.runtime.entrypoint.component.DefaultDispatcherResourceManagerComponentFactory.create(DefaultDispatcherResourceManagerComponentFactory.java:275)
Jul 01 00:00:27 	at org.apache.flink.runtime.minicluster.MiniCluster.createDispatcherResourceManagerComponents(MiniCluster.java:470)
Jul 01 00:00:27 	at org.apache.flink.runtime.minicluster.MiniCluster.setupDispatcherResourceManagerComponents(MiniCluster.java:429)
Jul 01 00:00:27 	at org.apache.flink.runtime.minicluster.MiniCluster.start(MiniCluster.java:373)
Jul 01 00:00:27 	at org.apache.flink.runtime.jobmaster.JobMasterITCase.testRejectionOfEmptyJobGraphs(JobMasterITCase.java:56)
Jul 01 00:00:27 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
Jul 01 00:00:27 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
Jul 01 00:00:27 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
Jul 01 00:00:27 	at java.lang.reflect.Method.invoke(Method.java:498)
Jul 01 00:00:27 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
Jul 01 00:00:27 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
Jul 01 00:00:27 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
Jul 01 00:00:27 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
Jul 01 00:00:27 	at org.apache.flink.util.TestNameProvider$1.evaluate(TestNameProvider.java:45)
Jul 01 00:00:27 	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:61)
Jul 01 00:00:27 	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
Jul 01 00:00:27 	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
Jul 01 00:00:27 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
Jul 01 00:00:27 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
Jul 01 00:00:27 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
Jul 01 00:00:27 	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
Jul 01 00:00:27 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
Jul 01 00:00:27 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
Jul 01 00:00:27 	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
Jul 01 00:00:27 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
Jul 01 00:00:27 	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
Jul 01 00:00:27 	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
Jul 01 00:00:27 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
Jul 01 00:00:27 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
Jul 01 00:00:27 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
Jul 01 00:00:27 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
Jul 01 00:00:27 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
Jul 01 00:00:27 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
Jul 01 00:00:27 	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
Jul 01 00:00:27 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Jul 01 00:00:27 Caused by: java.net.BindException: Could not start &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; endpoint on any port in port range 8081
Jul 01 00:00:27 	at org.apache.flink.runtime.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.RestServerEndpoint.start(RestServerEndpoint.java:234)
Jul 01 00:00:27 	at org.apache.flink.runtime.entrypoint.component.DefaultDispatcherResourceManagerComponentFactory.create(DefaultDispatcherResourceManagerComponentFactory.java:172)
Jul 01 00:00:27 	... 34 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13386930">FLINK-23196</key>
            <summary>JobMasterITCase fail on azure due to BindException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="xtsong">Xintong Song</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 1 Jul 2021 02:30:30 +0000</created>
                <updated>Thu, 23 Sep 2021 17:55:02 +0000</updated>
                            <resolved>Mon, 5 Jul 2021 03:26:26 +0000</resolved>
                                    <version>1.14.0</version>
                    <version>1.13.1</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.13.2</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17372318" author="xintongsong" created="Thu, 1 Jul 2021 02:31:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19753&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=9800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19753&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=9800&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17372437" author="thesharing" created="Thu, 1 Jul 2021 06:55:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/thesharing/Flink/_build/results?buildId=105&amp;amp;view=logs&amp;amp;j=0a15d512-44ac-5ba5-97ab-13a5d066c22c&amp;amp;t=634cd701-c189-5dff-24cb-606ed884db87&amp;amp;l=3780&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/thesharing/Flink/_build/results?buildId=105&amp;amp;view=logs&amp;amp;j=0a15d512-44ac-5ba5-97ab-13a5d066c22c&amp;amp;t=634cd701-c189-5dff-24cb-606ed884db87&amp;amp;l=3780&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17372498" author="zhangyy91" created="Thu, 1 Jul 2021 07:57:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt;&#160;I met the same problem recently. The reason may be concurrent MiniCluster with the default port in different concurrent tests and the port conflict causes the error.&lt;/p&gt;

&lt;p&gt;I explicitly set the rest and rpc port to 0 in JobMasterITCase and passed the tests as is in MiniClusterResource where both rest and RPC port are set to 0 to avoid clashes with concurrent MiniClusters.&lt;/p&gt;

&lt;p&gt;There are already some tests where the port is set to 0 when using MiniCluster directly.&lt;/p&gt;

&lt;p&gt;But there are other cases that use MiniCluster without setting the port to 0 and may cause this issue when running concurrently. Maybe we can find all these cases and correct them.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;See:&lt;/p&gt;

&lt;p&gt;MiniClusterResource&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/blob/a40abc7f834888a5f42efeefa662ad6ad5d7c222/flink-runtime/src/test/java/org/apache/flink/runtime/testutils/MiniClusterResource.java#L185&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/a40abc7f834888a5f42efeefa662ad6ad5d7c222/flink-runtime/src/test/java/org/apache/flink/runtime/testutils/MiniClusterResource.java#L185&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;My Fix:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/zhangyy91/flink/blob/170d40507599618f471e46b3b2843fb83234100f/flink-tests/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterITCase.java#L53&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zhangyy91/flink/blob/170d40507599618f471e46b3b2843fb83234100f/flink-tests/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterITCase.java#L53&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17373138" author="xintongsong" created="Fri, 2 Jul 2021 01:38:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19796&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&amp;amp;l=4251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19796&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&amp;amp;l=4251&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17373139" author="xintongsong" created="Fri, 2 Jul 2021 01:39:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19796&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=9800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19796&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=9800&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17373176" author="xintongsong" created="Fri, 2 Jul 2021 03:18:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19798&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&amp;amp;l=4063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19798&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&amp;amp;l=4063&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17373177" author="xintongsong" created="Fri, 2 Jul 2021 03:19:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19798&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&amp;amp;l=9340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19798&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&amp;amp;l=9340&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17373178" author="xintongsong" created="Fri, 2 Jul 2021 03:19:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19798&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=9340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19798&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=9340&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17373249" author="zentol" created="Fri, 2 Jul 2021 06:20:08 +0000"  >&lt;p&gt;master: d47a15930851ccfc53dfb3a173182e6235f25889&lt;/p&gt;</comment>
                            <comment id="17374465" author="xintongsong" created="Mon, 5 Jul 2021 02:58:56 +0000"  >&lt;p&gt;Reopen to port to 1.13.&lt;/p&gt;

&lt;p&gt;Instances on 1.13:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19857&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&amp;amp;l=4063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19857&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&amp;amp;l=4063&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19857&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&amp;amp;l=9340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19857&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&amp;amp;l=9340&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19857&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=9340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19857&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=9340&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17374477" author="xintongsong" created="Mon, 5 Jul 2021 03:26:26 +0000"  >&lt;p&gt;1.13: 51c02e434629722ed622c72b9132f973ce51d3a8&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0shfc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>