<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:22:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-35117] AsyncScalarFunction has a dependency issue.</title>
                <link>https://issues.apache.org/jira/browse/FLINK-35117</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Hi,&lt;br/&gt;
&#160;&lt;br/&gt;
I found a ClassNotFound exception when using Flink 1.19&apos;s AsyncScalarFunction.&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;b&gt;Stack trace:&lt;/b&gt;&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Caused by: java.lang.ClassNotFoundException: org.apache.commons.text.StringSubstitutor&lt;/p&gt;

&lt;p&gt;at java.net.URLClassLoader.findClass(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at java.lang.ClassLoader.loadClass(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.core.classloading.ComponentClassLoader.loadClassFromComponentOnly(ComponentClassLoader.java:150) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;flink-dist-1.19.0.jar:1.19.0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.core.classloading.ComponentClassLoader.loadClass(ComponentClassLoader.java:113) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;flink-dist-1.19.0.jar:1.19.0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at java.lang.ClassLoader.loadClass(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.codegen.AsyncCodeGenerator.generateProcessCode(AsyncCodeGenerator.java:173) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.codegen.AsyncCodeGenerator.generateFunction(AsyncCodeGenerator.java:77) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.plan.nodes.exec.common.CommonExecAsyncCalc.getAsyncFunctionOperator(CommonExecAsyncCalc.java:146) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.plan.nodes.exec.common.CommonExecAsyncCalc.createAsyncOneInputTransformation(CommonExecAsyncCalc.java:126) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.plan.nodes.exec.common.CommonExecAsyncCalc.translateToPlanInternal(CommonExecAsyncCalc.java:89) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.plan.nodes.exec.ExecNodeBase.translateToPlan(ExecNodeBase.java:168) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.plan.nodes.exec.ExecEdge.translateToPlan(ExecEdge.java:259) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.plan.nodes.exec.common.CommonExecCalc.translateToPlanInternal(CommonExecCalc.java:94) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.plan.nodes.exec.ExecNodeBase.translateToPlan(ExecNodeBase.java:168) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.plan.nodes.exec.ExecEdge.translateToPlan(ExecEdge.java:259) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.plan.nodes.exec.stream.StreamExecSink.translateToPlanInternal(StreamExecSink.java:177) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.plan.nodes.exec.ExecNodeBase.translateToPlan(ExecNodeBase.java:168) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.flink.table.planner.delegation.StreamPlanner.$anonfun$translateToPlan$1(StreamPlanner.scala:85) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;br/&gt;
&lt;b&gt;Root cause:&lt;/b&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
`PlannerModule` uses a URLClassloader to load class and has an exceptional list to load owner owned classes:&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PlannerModule {

    /**
     * The name of the table planner dependency jar, bundled with flink-table-planner-loader module
     * artifact.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; FLINK_TABLE_PLANNER_FAT_JAR = &lt;span class=&quot;code-quote&quot;&gt;&quot;flink-table-planner.jar&quot;&lt;/span&gt;;

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; HINT_USAGE =
            &lt;span class=&quot;code-quote&quot;&gt;&quot;mvn clean &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; -pl flink-table/flink-table-planner,flink-table/flink-table-planner-loader -DskipTests&quot;&lt;/span&gt;;

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] OWNER_CLASSPATH =
            Stream.concat(
                            Arrays.stream(CoreOptions.PARENT_FIRST_LOGGING_PATTERNS),
                            Stream.of(
                                    &lt;span class=&quot;code-comment&quot;&gt;// These packages are shipped either by
&lt;/span&gt;                                    &lt;span class=&quot;code-comment&quot;&gt;// flink-table-runtime or flink-dist itself
&lt;/span&gt;                                    &lt;span class=&quot;code-quote&quot;&gt;&quot;org.codehaus.janino&quot;&lt;/span&gt;,
                                    &lt;span class=&quot;code-quote&quot;&gt;&quot;org.codehaus.commons&quot;&lt;/span&gt;,
                                    &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.commons.lang3&quot;&lt;/span&gt;,
                                    &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.commons.math3&quot;&lt;/span&gt;,
                                    &lt;span class=&quot;code-comment&quot;&gt;// with hive dialect, hadoop jar should be in classpath,
&lt;/span&gt;                                    &lt;span class=&quot;code-comment&quot;&gt;// also, we should make it loaded by owner classloader,
&lt;/span&gt;                                    &lt;span class=&quot;code-comment&quot;&gt;// otherwise, it&apos;ll &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;not found exception
&lt;/span&gt;                                    &lt;span class=&quot;code-comment&quot;&gt;// when initialize HiveParser which requires hadoop
&lt;/span&gt;                                    &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop&quot;&lt;/span&gt;))
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .toArray(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]::&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;);&#160; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But the group of `org.apache.commons.text` is not on the list.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Fix:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Add `org.apache.commons.text` to the list&lt;/p&gt;</description>
                <environment>&lt;p&gt;image: 1.19.0-scala_2.12-java11&lt;/p&gt;</environment>
        <key id="13575948">FLINK-35117</key>
            <summary>AsyncScalarFunction has a dependency issue.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="martijnvisser">Martijn Visser</assignee>
                                    <reporter username="heywxl">roland</reporter>
                        <labels>
                            <label>easyfix</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 16 Apr 2024 02:14:26 +0000</created>
                <updated>Sat, 5 Apr 2025 08:57:40 +0000</updated>
                            <resolved>Sat, 5 Apr 2025 08:57:40 +0000</resolved>
                                    <version>1.19.0</version>
                                    <fixVersion>1.20.2</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                    <fixVersion>2.0.1</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17856813" author="JIRAUSER305924" created="Fri, 21 Jun 2024 16:15:20 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Yanfei+Lei&quot; class=&quot;user-hover&quot; rel=&quot;Yanfei Lei&quot;&gt;Yanfei Lei&lt;/a&gt; , &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=heywxl&quot; class=&quot;user-hover&quot; rel=&quot;heywxl&quot;&gt;heywxl&lt;/a&gt; , I can take up this issue.&lt;/p&gt;</comment>
                            <comment id="17936128" author="xuyangzhong" created="Mon, 17 Mar 2025 09:46:06 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saurabh9588&quot; class=&quot;user-hover&quot; rel=&quot;saurabh9588&quot;&gt;saurabh9588&lt;/a&gt; are you still interested in this bug?&#160;&lt;/p&gt;</comment>
                            <comment id="17941214" author="martijnvisser" created="Sat, 5 Apr 2025 08:57:40 +0000"  >&lt;p&gt;Fixed in apache/flink&lt;/p&gt;

&lt;p&gt;master: bec57c16c719e2bb0045757a183e114691eca0e7&lt;br/&gt;
release-2.0: 702a985e993fcd926dea28e42dc17d29ce09ab63&lt;br/&gt;
release-1.19: 35e37312c1a66bd18f4798f8f96aa0ac79197b25&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            31 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1onl4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>