<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:21:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-34227] Job doesn&apos;t disconnect from ResourceManager</title>
                <link>https://issues.apache.org/jira/browse/FLINK-34227</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/XComp/flink/actions/runs/7634987973/job/20800205972#step:10:14557&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/XComp/flink/actions/runs/7634987973/job/20800205972#step:10:14557&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[...]
&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; #1 prio=5 os_prio=0 tid=0x00007fcccc4b7000 nid=0x24ec0 waiting on condition [0x00007fccce1eb000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00000000bdd52618&amp;gt; (a java.util.concurrent.CompletableFuture$Signaller)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at java.util.concurrent.CompletableFuture$Signaller.block(CompletableFuture.java:1707)
	at java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3323)
	at java.util.concurrent.CompletableFuture.waitingGet(CompletableFuture.java:1742)
	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1908)
	at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.execute(StreamExecutionEnvironment.java:2131)
	at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.execute(StreamExecutionEnvironment.java:2099)
	at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.execute(StreamExecutionEnvironment.java:2077)
	at org.apache.flink.streaming.api.scala.StreamExecutionEnvironment.execute(StreamExecutionEnvironment.scala:876)
	at org.apache.flink.table.planner.runtime.stream.sql.WindowDistinctAggregateITCase.testHopWindow_Cube(WindowDistinctAggregateITCase.scala:550)
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13565966">FLINK-34227</key>
            <summary>Job doesn&apos;t disconnect from ResourceManager</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mapohl">Matthias Pohl</assignee>
                                    <reporter username="mapohl">Matthias Pohl</reporter>
                        <labels>
                            <label>github-actions</label>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Wed, 24 Jan 2024 12:08:57 +0000</created>
                <updated>Fri, 7 Feb 2025 11:42:36 +0000</updated>
                            <resolved>Fri, 7 Feb 2025 10:46:21 +0000</resolved>
                                    <version>1.19.0</version>
                    <version>1.18.1</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.19.3</fixVersion>
                    <fixVersion>1.20.2</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17810357" author="mapohl" created="Wed, 24 Jan 2024 12:28:49 +0000"  >&lt;p&gt;There are several test failures in &lt;tt&gt;WindowDistinctAggregateITCase&lt;/tt&gt; (not only for &lt;tt&gt;testHopWindow_Cube&lt;/tt&gt;) where the test fails due to a &lt;tt&gt;NoResourceAvailableException&lt;/tt&gt;. It&apos;s also weird that the &lt;tt&gt;WindowDistinctAggregateITCase.testHopWindow_Cube&lt;/tt&gt; times out even though all four test runs for this test method started and finished (1 successfully and 3 failed) according to the logs.&lt;/p&gt;</comment>
                            <comment id="17810366" author="mapohl" created="Wed, 24 Jan 2024 12:47:16 +0000"  >&lt;p&gt;:facepalm: The test run was cancelled because we reached the timeout of 4h&lt;/p&gt;</comment>
                            <comment id="17810373" author="mapohl" created="Wed, 24 Jan 2024 12:57:18 +0000"  >&lt;p&gt;Ok, &lt;tt&gt;WindowDistinctAggregateITCase&lt;/tt&gt; seems to throttle the overall stage execution with 21 succeeding but 35 failing:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
&#10140;  logs-test-nightly-adaptive-scheduler-64-table-test-1706074714 grep &lt;span class=&quot;code-quote-red&quot;&gt;&quot;Test test.*WindowDistinctAggregateITCase&quot;&lt;/span&gt; mvn-2.log | grep -v &lt;span class=&quot;code-quote-red&quot;&gt;&quot;is running&quot;&lt;/span&gt; | grep -c success
21
&#10140;  logs-test-nightly-adaptive-scheduler-64-table-test-1706074714 grep &lt;span class=&quot;code-quote-red&quot;&gt;&quot;Test test.*WindowDistinctAggregateITCase&quot;&lt;/span&gt; mvn-2.log | grep -v &lt;span class=&quot;code-quote-red&quot;&gt;&quot;is running&quot;&lt;/span&gt; | grep -c fail   
35
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There are no other test failures in that stage:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
&#10140;  logs-test-nightly-adaptive-scheduler-64-table-test-1706074714 grep -c &lt;span class=&quot;code-quote-red&quot;&gt;&quot;failed with&quot;&lt;/span&gt; mvn-2.log
35
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;All of them seem to have been caused by {{ResourceNotAvailableException}}s:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
&#10140;  logs-test-nightly-adaptive-scheduler-64-table-test-1706074714 grep -c &lt;span class=&quot;code-quote-red&quot;&gt;&quot;Failed to go from CreatingExecutionGraph to Executing because the ExecutionGraph creation failed.&quot;&lt;/span&gt; mvn-2.log 
35
&#10140;  logs-test-nightly-adaptive-scheduler-64-table-test-1706074714 grep -c &lt;span class=&quot;code-quote-red&quot;&gt;&quot;NoResourceAvailableException&quot;&lt;/span&gt; mvn-2.log
140 &lt;span class=&quot;code-comment&quot;&gt;# 140 / 35 = 4&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;A &lt;a href=&quot;https://github.com/XComp/flink/actions/runs/7632434711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;successful run with AdaptiveScheduler enabled&lt;/a&gt; runs 64 dedicated tests of &lt;tt&gt;WindowDistinctAggregateITCase&lt;/tt&gt; (runtime: 2min)&lt;/p&gt;</comment>
                            <comment id="17810398" author="mapohl" created="Wed, 24 Jan 2024 14:00:10 +0000"  >&lt;p&gt;The difference seems to be that we&apos;re running multiple jobs with a parallelism of 4 on the same cluster with 4 task slots, e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Missing resources:
         Job 7e7d69daebb438b8d03b7392c9c55115
                ResourceRequirement{resourceProfile=ResourceProfile{UNKNOWN}, numberOfRequiredSlots=4}
         Job 0ed4bdf3f9a589b16f846fc11a28f127
                ResourceRequirement{resourceProfile=ResourceProfile{UNKNOWN}, numberOfRequiredSlots=4}
Current resources:
        TaskManager 7d5dbc6f-47ad-4043-ba88-b8cadefe0ca5
                Available: ResourceProfile{taskHeapMemory=1024.000gb (1099511627776 bytes), taskOffHeapMemory=1024.000gb (1099511627776 bytes), managedMemory=80.000mb (83886080 bytes), networkMemory=64.000mb (67108864 bytes)}
                Total:     ResourceProfile{taskHeapMemory=1024.000gb (1099511627776 bytes), taskOffHeapMemory=1024.000gb (1099511627776 bytes), managedMemory=80.000mb (83886080 bytes), networkMemory=64.000mb (67108864 bytes)}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The job &lt;tt&gt;7e7d69daebb438b8d03b7392c9c55115&lt;/tt&gt; doesn&apos;t seem to be cleaned up properly on the ResourceManager&apos;s side.&lt;/p&gt;</comment>
                            <comment id="17810453" author="mapohl" created="Wed, 24 Jan 2024 15:22:32 +0000"  >&lt;p&gt;I attached the logs of the &lt;tt&gt;WindowDistinctAggregateITCase&lt;/tt&gt; test runs (&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13066228/FLINK-34227.log&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FLINK-34227.log&lt;/a&gt;) and an extract only focusing on the test run that created job 7e7d69daebb438b8d03b7392c9c55115 and the subsequent test run up to the point where the missing resources for two jobs are logged for the first time (&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13066227/FLINK-34227.7e7d69daebb438b8d03b7392c9c55115.log&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FLINK-34227.7e7d69daebb438b8d03b7392c9c55115.log&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;There&apos;s something odd going on when shutting down the JobMaster/deregistering the JobMaster from the ResourceManager:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[...]
06:01:26,703 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-10] INFO  org.apache.flink.runtime.jobmaster.JobMaster                 [] - Disconnect TaskExecutor 7d5dbc6f-47ad-4043-ba88-b8cadefe0ca5 because: TaskExecutor pekko:&lt;span class=&quot;code-comment&quot;&gt;//flink/user/rpc/taskmanager_0 has no more allocated slots &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job
&lt;/span&gt; 7e7d69daebb438b8d03b7392c9c55115.
06:01:26,703 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-10] INFO  org.apache.flink.runtime.jobmaster.JobMaster                 [] - Close ResourceManager connection bb1ce04485fc5291a97cd5d488709ff9: Stopping JobMaster &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job &lt;span class=&quot;code-quote&quot;&gt;&apos;Flink Streaming Job&apos;&lt;/span&gt; (7e7d69daebb438b8d03b7392c9c55115).
06:01:26,703 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-10] INFO  org.apache.flink.runtime.jobmaster.JobMaster                 [] - Connecting to ResourceManager pekko:&lt;span class=&quot;code-comment&quot;&gt;//flink/user/rpc/resourcemanager_2(891f46bbb398d49ad91e1dde0bee410c)
&lt;/span&gt;[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The disconnect is not finalized but a connection is re-established.&lt;/p&gt;</comment>
                            <comment id="17810745" author="mapohl" created="Thu, 25 Jan 2024 08:06:58 +0000"  >&lt;p&gt;&lt;b&gt;Call Hierarchy&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
=&amp;gt; &lt;span class=&quot;code-quote-red&quot;&gt;&quot;INFO: Connecting to ResourceManager [...]&quot;&lt;/span&gt; printed
JobMaster.connectToResourceManager() (org.apache.flink.runtime.jobmaster)
    JobMaster.tryConnectToResourceManager()  (org.apache.flink.runtime.jobmaster)
        JobMaster.reconnectToResourceManager(Exception)  (org.apache.flink.runtime.jobmaster)
            JobMaster.disconnectResourceManager(ResourceManagerId, Exception)  (org.apache.flink.runtime.jobmaster)
                =&amp;gt; &lt;span class=&quot;code-quote-red&quot;&gt;&quot;INFO: Disconnect job manager [...]&quot;&lt;/span&gt; NOT printed 
                ResourceManager.closeJobManagerConnection(JobID, ResourceRequirementHandling, Exception)  (org.apache.flink.runtime.resourcemanager)
                    ResourceManager.removeJob(JobID, Exception)  (org.apache.flink.runtime.resourcemanager)
                        &lt;span class=&quot;code-comment&quot;&gt;# [...]
&lt;/span&gt;                        ResourceManager.disconnectJobManager(JobID, JobStatus, Exception)  (org.apache.flink.runtime.resourcemanager)
                            =&amp;gt; &lt;span class=&quot;code-quote-red&quot;&gt;&quot;INFO: Close ResourceManager connection&quot;&lt;/span&gt; printed
                            JobMaster.dissolveResourceManagerConnection(EstablishedResourceManagerConnection, Exception)  (org.apache.flink.runtime.jobmaster)
                                JobMaster.closeResourceManagerConnection(Exception)  (org.apache.flink.runtime.jobmaster)
                                    JobMaster.reconnectToResourceManager(Exception)  (org.apache.flink.runtime.jobmaster)
                                    JobMaster.disconnectTaskManagerResourceManagerConnections(Exception)  (org.apache.flink.runtime.jobmaster)
                                        JobMaster.stopJobExecution(Exception)  (org.apache.flink.runtime.jobmaster)
                                            JobMaster.onStop()  (org.apache.flink.runtime.jobmaster)
                                                RpcEndpoint.internalCallOnStop()  (org.apache.flink.runtime.rpc)
                                                    terminate(PekkoRpcActor&amp;lt;?&amp;gt;, ClassLoader) &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; StartedState &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; PekkoRpcActor  (org.apache.flink.runtime.rpc.pekko)
                                                        PekkoRpcActor.handleControlMessage(ControlMessages)  (org.apache.flink.runtime.rpc.pekko)
                                                            PekkoRpcActor.createReceive()  (org.apache.flink.runtime.rpc.pekko)
                    &lt;span class=&quot;code-comment&quot;&gt;# [...]
&lt;/span&gt;            =&amp;gt; &lt;span class=&quot;code-quote-red&quot;&gt;&quot;heartbeat handling&quot;&lt;/span&gt;
            handleResourceManagerConnectionLoss(ResourceID, Exception) &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; ResourceManagerHeartbeatListener &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; JobMaster  (org.apache.flink.runtime.jobmaster)
                notifyHeartbeatTimeout(ResourceID) &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; ResourceManagerHeartbeatListener &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; JobMaster  (org.apache.flink.runtime.jobmaster)
                    DefaultHeartbeatMonitor.run()  (org.apache.flink.runtime.heartbeat)
                notifyTargetUnreachable(ResourceID) &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; ResourceManagerHeartbeatListener &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; JobMaster  (org.apache.flink.runtime.jobmaster)
                    DefaultHeartbeatMonitor.reportHeartbeatRpcFailure()  (org.apache.flink.runtime.heartbeat)
            =&amp;gt; &lt;span class=&quot;code-quote-red&quot;&gt;&quot;new RM leader elected&quot;&lt;/span&gt;
            JobMaster.notifyOfNewResourceManagerLeader(String, ResourceManagerId)  (org.apache.flink.runtime.jobmaster)
                notifyLeaderAddress(String, UUID) &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; ResourceManagerLeaderListener &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; JobMaster  (org.apache.flink.runtime.jobmaster)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Findings&lt;/b&gt;&lt;br/&gt;
Reasons that could prevent the disconnect log message (and as a consequence traversing the call tree further)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;ResourceManager#jobManagerRegistrations&lt;/tt&gt; does not include job anymore (&lt;a href=&quot;https://github.com/apache/flink/blob/ab9445aca56e7d139e8fd9bcc23e5f7e06288e66/flink-runtime/src/main/java/org/apache/flink/runtime/resourcemanager/ResourceManager.java#L1082&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ResourceManager:1082&lt;/a&gt;)
	&lt;ul&gt;
		&lt;li&gt;ResourceManager#jobManagerRegistrations is updated in three different locations:
		&lt;ul&gt;
			&lt;li&gt;When registering a JobMaster with the ResourceManager (&lt;a href=&quot;#registerJobMasterInternal&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ResourceManager#registerJobMasterInternal&lt;/a&gt;)
			&lt;ul&gt;
				&lt;li&gt;This would be revealed through a log message &lt;a href=&quot;https://github.com/apache/flink/blob/ab9445aca56e7d139e8fd9bcc23e5f7e06288e66/flink-runtime/src/main/java/org/apache/flink/runtime/resourcemanager/ResourceManager.java#L388&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;INFO: Registering job manager&lt;/a&gt;&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;When clearing the internal state due to a &lt;a href=&quot;#stopResourceManagerServices&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ResourceManager#stopResourceManagerServices&lt;/a&gt;
			&lt;ul&gt;
				&lt;li&gt;This only happens if the ResourceManager gets restarted or stopped&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;As part of the JobManagerConnection closing (&lt;a href=&quot;#closeJobManagerConnection&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ResourceManager#closeJobManagerConnection&lt;/a&gt;)
			&lt;ul&gt;
				&lt;li&gt;This is the case we&apos;re in and which should have removed the job actually but didn&apos;t&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Reasons for why the connect could happen again:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/blob/7b9b4e53a59ab8f4f2a99a6e162a794d264f7daf/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java#L1523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;handleResourceManagerConnectionLoss&lt;/a&gt; triggers a reconnect and is triggered by the following two callers
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/blob/7b9b4e53a59ab8f4f2a99a6e162a794d264f7daf/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java#L1514&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JobMaster#ResourceManagerHeartbeatListener#handleResourceConnectionLoss&lt;/a&gt; which would produce a log message &quot;INFO: The heartbeat of ResourceManager ...&quot;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/blob/7b9b4e53a59ab8f4f2a99a6e162a794d264f7daf/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java#L1535&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JobMaster#ResourceManagerHeartbeatListener#notifyTargetUnreachable&lt;/a&gt; which would produce a log message &quot;INFO: ResourceManager with id ? is not longer reachable.&quot;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/blob/7b9b4e53a59ab8f4f2a99a6e162a794d264f7daf/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java#L1145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JobMaster#notifyOfNewResourceManagerLeader&lt;/a&gt;
	&lt;ul&gt;
		&lt;li&gt;Leader change for the ResourceManager cannot be the reason:
		&lt;ul&gt;
			&lt;li&gt;no logs available related to leader election&lt;/li&gt;
			&lt;li&gt;the ResourceManager session ID &lt;tt&gt;891f46bbb398d49ad91e1dde0bee410c&lt;/tt&gt; stays the same between both test runs&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17822518" author="mapohl" created="Fri, 1 Mar 2024 11:36:57 +0000"  >&lt;p&gt;We&apos;ve seen this behavior also for the JoinITCase in &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8105495458/job/22154140154#step:10:11906&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8105495458/job/22154140154#step:10:11906&lt;/a&gt; (see further details in the now closed &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-34560&quot; title=&quot;JoinITCase seems to fail on a broader scale (MiniCluster issue?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-34560&quot;&gt;&lt;del&gt;FLINK-34560&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="17823063" author="mapohl" created="Mon, 4 Mar 2024 07:54:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/8134966351/job/22228823914&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8134966351/job/22228823914&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17825197" author="mapohl" created="Mon, 11 Mar 2024 08:14:24 +0000"  >&lt;p&gt;Same issue was observed for &lt;tt&gt;GroupWindowTableAggregateITCase&lt;/tt&gt;:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/actions/runs/8181761395/job/22372319416#step:10:12561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8181761395/job/22372319416#step:10:12561&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17825319" author="mapohl" created="Mon, 11 Mar 2024 13:53:31 +0000"  >&lt;p&gt;Transferred over from &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-34570&quot; title=&quot;JoinITCase.testLeftJoinWithEqualPk times out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-34570&quot;&gt;&lt;del&gt;FLINK-34570&lt;/del&gt;&lt;/a&gt; (JoinITCase):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/8127069912/job/22211928085#step:10:14479&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8127069912/job/22211928085#step:10:14479&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/8165884599/job/22324024789#step:10:14479&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8165884599/job/22324024789#step:10:14479&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17825323" author="mapohl" created="Mon, 11 Mar 2024 14:02:05 +0000"  >&lt;p&gt;Interestingly, the behavior is only observed on Github Actions with the AdaptiveScheduler and on the 1.18 release branch, so far.&lt;/p&gt;</comment>
                            <comment id="17825337" author="mapohl" created="Mon, 11 Mar 2024 14:34:55 +0000"  >&lt;p&gt;This one is a 1.19 workflow run:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/actions/runs/8197679758/job/22420248800#step:10:14967&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8197679758/job/22420248800#step:10:14967&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17825344" author="mapohl" created="Mon, 11 Mar 2024 14:54:12 +0000"  >&lt;p&gt;AggregateITCase:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/actions/runs/8211401561/job/22460442229#step:10:17161&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8211401561/job/22460442229#step:10:17161&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17825345" author="mapohl" created="Mon, 11 Mar 2024 14:56:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/8218856667/job/22476299334#step:10:15130&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8218856667/job/22476299334#step:10:15130&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; #1 prio=5 os_prio=0 tid=0x00007f177c2b7000 nid=0x21f26 waiting on condition [0x00007f177dfd6000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00000000a804e648&amp;gt; (a java.util.concurrent.CompletableFuture$Signaller)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at java.util.concurrent.CompletableFuture$Signaller.block(CompletableFuture.java:1707)
	at java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3323)
	at java.util.concurrent.CompletableFuture.waitingGet(CompletableFuture.java:1742)
	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1908)
	at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.execute(StreamExecutionEnvironment.java:2131)
	at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.execute(StreamExecutionEnvironment.java:2099)
	at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.execute(StreamExecutionEnvironment.java:2077)
	at org.apache.flink.streaming.api.scala.StreamExecutionEnvironment.execute(StreamExecutionEnvironment.scala:876)
	at org.apache.flink.table.planner.runtime.stream.sql.WindowJoinITCase.testRightJoin(WindowJoinITCase.scala:983)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17825551" author="mapohl" created="Tue, 12 Mar 2024 07:39:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/8242516176/job/22541877232#step:10:12172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8242516176/job/22541877232#step:10:12172&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17825639" author="mapohl" created="Tue, 12 Mar 2024 11:23:16 +0000"  >&lt;p&gt;My suspicion is that there&apos;s a bug in the &lt;tt&gt;AdaptiveScheduler&lt;/tt&gt; returning the wrong JobStatus in &lt;a href=&quot;https://github.com/apache/flink/blob/d6a4eb966fbc47277e07b79e7c64939a62eb1d54/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java#L1274&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JobMaster:1274&lt;/a&gt; resulting in the data being retained on the ResourceManager&apos;s side (see &lt;a href=&quot;https://github.com/apache/flink/blob/d6a4eb966fbc47277e07b79e7c64939a62eb1d54/flink-runtime/src/main/java/org/apache/flink/runtime/resourcemanager/ResourceManager.java#L566&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;line 566&lt;/a&gt;). That would explain why we&apos;re only seeing the issue in the AdaptiveScheduler CI profile.&lt;/p&gt;</comment>
                            <comment id="17825654" author="mapohl" created="Tue, 12 Mar 2024 12:08:12 +0000"  >&lt;p&gt;The &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-34227?focusedCommentId=17810745&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17810745&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;findings of my initial analysis&lt;/a&gt; are not correct. The missing log message does exist. It&apos;s just that the &quot;&lt;tt&gt;Close ResourceManager connection &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/tt&gt;&quot; log message appears twice (once triggered from the JobMaster&apos;s IO thread and once from the Dispatcher&apos;s main thread). The latter one seems to retrigger the reconnection.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[...]
02:51:28,193 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-10] INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Remove job e7cb13faaae707768a1a4db28427af80 from job leader monitoring.
02:51:28,193 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-10] INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Close JobManager connection &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job e7cb13faaae707768a1a4db28427af80.
02:51:28,193 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-8] INFO  org.apache.flink.runtime.resourcemanager.slotmanager.DefaultSlotStatusSyncer [] - Freeing slot 98a0c702ce550d2fd7dd3710ec7b76e0.
02:51:28,194 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-8] INFO  org.apache.flink.runtime.jobmaster.JobMaster                 [] - Disconnect TaskExecutor d71ee9b8-f278-48ee-bb1c-f05fd568947f because: TaskExecutor pekko:&lt;span class=&quot;code-comment&quot;&gt;//flink/user/rpc/taskmanager_0 has no more allocated slots &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job e7cb13faaae707768a1a4db28427af80.
&lt;/span&gt;02:51:28,194 [jobmanager-io-thread-3] INFO  org.apache.flink.runtime.jobmaster.JobMaster                 [] - Close ResourceManager connection 3c08958c5ef3906fae847097373b047a: Stopping JobMaster &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job &lt;span class=&quot;code-quote&quot;&gt;&apos;Flink Streaming Job&apos;&lt;/span&gt; (e7cb13faaae707768a1a4db28427af80).
02:51:28,194 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.resourcemanager.StandaloneResourceManager [] - Disconnect job manager a38b8b4ba6c4894c7cfca5f1c0fe4f68@pekko:&lt;span class=&quot;code-comment&quot;&gt;//flink/user/rpc/jobmanager_70 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job e7cb13faaae707768a1a4db28427af80 from the resource manager.
&lt;/span&gt;02:51:28,194 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.jobmaster.JobMaster                 [] - Close ResourceManager connection 3c08958c5ef3906fae847097373b047a: Stopping JobMaster &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job &lt;span class=&quot;code-quote&quot;&gt;&apos;Flink Streaming Job&apos;&lt;/span&gt; (e7cb13faaae707768a1a4db28427af80).
02:51:28,194 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.jobmaster.JobMaster                 [] - Connecting to ResourceManager pekko:&lt;span class=&quot;code-comment&quot;&gt;//flink/user/rpc/resourcemanager_2(86dfd2ebd79836698df3e4a5de474282)
&lt;/span&gt;02:51:28,194 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.jobmaster.JobMaster                 [] - Resolved ResourceManager address, beginning registration
02:51:28,194 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.resourcemanager.StandaloneResourceManager [] - Registering job manager a38b8b4ba6c4894c7cfca5f1c0fe4f68@pekko:&lt;span class=&quot;code-comment&quot;&gt;//flink/user/rpc/jobmanager_70 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job e7cb13faaae707768a1a4db28427af80.
&lt;/span&gt;02:51:28,195 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.resourcemanager.StandaloneResourceManager [] - Registered job manager a38b8b4ba6c4894c7cfca5f1c0fe4f68@pekko:&lt;span class=&quot;code-comment&quot;&gt;//flink/user/rpc/jobmanager_70 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job e7cb13faaae707768a1a4db28427af80.
&lt;/span&gt;02:51:28,195 [flink-pekko.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.jobmaster.JobMaster                 [] - JobManager successfully registered at ResourceManager, leader id: 86dfd2ebd79836698df3e4a5de474282.
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17825698" author="mapohl" created="Tue, 12 Mar 2024 14:33:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; supported the investigation. His findings are based around the question why the close call was actually triggered from within an IO thread:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The &lt;tt&gt;JobMaster#onStop&lt;/tt&gt; call triggers &lt;a href=&quot;https://github.com/apache/flink/blob/d6a4eb966fbc47277e07b79e7c64939a62eb1d54/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java#L1048&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JobMaster#stopJobExecution&lt;/a&gt; which calls &lt;tt&gt;JobMaster#stopScheduling&lt;/tt&gt; from within the JobMaster&apos;s main thread which calls &lt;tt&gt;AdaptiveScheduler#closeAsync&lt;/tt&gt; in &lt;a href=&quot;https://github.com/apache/flink/blob/d6a4eb966fbc47277e07b79e7c64939a62eb1d54/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java#L1088&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JobMaster:1088&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;AdaptiveScheduler#closeAsync&lt;/tt&gt; composes the resultFuture of the &lt;tt&gt;CheckpointsCleaner&lt;/tt&gt; in &lt;a href=&quot;https://github.com/apache/flink/blob/d4e0084649c019c536ee1e44bab15c8eca01bf13/flink-runtime/src/main/java/org/apache/flink/runtime/scheduler/adaptive/AdaptiveScheduler.java#L581&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AdaptiveScheduler:581&lt;/a&gt;. The future is completed from within the &lt;tt&gt;ioExecutor&lt;/tt&gt; that is used in the &lt;tt&gt;CheckpointsCleaner&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;The future is forwarded to &lt;tt&gt;JobMaster#stopJobExecution&lt;/tt&gt; where the disconnect is triggered after the cleanup future is completed causing the disconnect to be executed in an IO thread rather than the JobMaster&apos;s main thread.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;update: But that doesn&apos;t explain, yet, why this is only happening in the AdaptiveScheduler profile, so far. We have the same issue in &lt;a href=&quot;https://github.com/apache/flink/blob/d4e0084649c019c536ee1e44bab15c8eca01bf13/flink-runtime/src/main/java/org/apache/flink/runtime/scheduler/SchedulerBase.java#L674&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SchedulerBase#closeAsync&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17826033" author="mapohl" created="Wed, 13 Mar 2024 12:27:17 +0000"  >&lt;p&gt;So, we should fix the &lt;tt&gt;runAfterwards&lt;/tt&gt; issue Chesnay raised. But I continued investigating it because I found it strange that it only appears in the &lt;tt&gt;AdaptiveScheduler&lt;/tt&gt; test profile even though we&apos;re using the same logic in &lt;a href=&quot;https://github.com/apache/flink/blob/d4e0084649c019c536ee1e44bab15c8eca01bf13/flink-runtime/src/main/java/org/apache/flink/runtime/scheduler/SchedulerBase.java#L674&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SchedulerBase#close&lt;/a&gt; as mentioned in the previous comment.&lt;/p&gt;

&lt;p&gt;The problem seems to be that the &lt;tt&gt;JobMaster&lt;/tt&gt; disconnecting from the &lt;tt&gt;ResourceManager&lt;/tt&gt; happens twice. The second disconnect triggers a reconnect and re-registration of the &lt;tt&gt;JobMaster&lt;/tt&gt; in the &lt;tt&gt;ResourceManager&lt;/tt&gt;. This can theoretically happen because the first disconnect will trigger a &lt;tt&gt;JobMaster#disconnectResourceManager&lt;/tt&gt; in &lt;a href=&quot;https://github.com/apache/flink/blob/d6a4eb966fbc47277e07b79e7c64939a62eb1d54/flink-runtime/src/main/java/org/apache/flink/runtime/resourcemanager/ResourceManager.java#L1150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ResourceManager#closeJobManagerConnection in line 1150&lt;/a&gt;. If this RPC call makes it to the &lt;tt&gt;JobMaster&lt;/tt&gt; before its &lt;tt&gt;RPCEndpoint&lt;/tt&gt; is shutdown (which can happen due to the concurrency introduced by the &lt;tt&gt;runAfterwards&lt;/tt&gt; issue), it will get processed once more leading to the reconnect because the &lt;tt&gt;JobMaster#resourceManagerAddress&lt;/tt&gt; is still set (which is the condition for &lt;tt&gt;JobMaster#isConnectingToResourceManager&lt;/tt&gt; which is called in &lt;a href=&quot;https://github.com/apache/flink/blob/7d0111dfab640f2f590dd710d76de927c86cf83e/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java#L847&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JobMaster#disconnectResourceManager&lt;/a&gt;). With the &lt;tt&gt;resourceManagerAddress&lt;/tt&gt; being set and pointing to the correct &lt;tt&gt;ResourceManager&lt;/tt&gt;, reconnection would be triggered.&lt;/p&gt;

&lt;p&gt;But this still doesn&apos;t answer the question why it only happens with the &lt;tt&gt;AdaptiveScheduler&lt;/tt&gt; test profile?&lt;/p&gt;</comment>
                            <comment id="17826775" author="mapohl" created="Wed, 13 Mar 2024 15:42:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/8258416104/job/22590931762#step:10:17193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8258416104/job/22590931762#step:10:17193&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17829479" author="mapohl" created="Thu, 21 Mar 2024 10:39:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/8290287446/job/22688312326#step:10:14956&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8290287446/job/22688312326#step:10:14956&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17829499" author="mapohl" created="Thu, 21 Mar 2024 11:11:16 +0000"  >&lt;p&gt;SetOperatorsITCase: &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8352823891/job/22863768994#step:10:12399&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8352823891/job/22863768994#step:10:12399&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17830581" author="mapohl" created="Mon, 25 Mar 2024 16:33:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/8414062328/job/23037443503#step:10:12562&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8414062328/job/23037443503#step:10:12562&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17833247" author="ryanskraba" created="Tue, 2 Apr 2024 16:00:44 +0000"  >&lt;p&gt;1.18, adaptive scheduler: &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8502821617/job/23287705033#step:10:11601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8502821617/job/23287705033#step:10:11601&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;This time on SemiAntiJoinStreamITCase.testGenericAntiJoin&#160; (but with the same symptoms)&lt;/p&gt;</comment>
                            <comment id="17834953" author="ryanskraba" created="Mon, 8 Apr 2024 14:52:16 +0000"  >&lt;p&gt;1.18 adaptive scheduler &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8577964007/job/23511401057#step:10:11866&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8577964007/job/23511401057#step:10:11866&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17836579" author="ryanskraba" created="Fri, 12 Apr 2024 12:12:42 +0000"  >&lt;p&gt;1.18 AdaptiveScheduler: Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8655936112/job/23735927701#step:10:12070&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8655936112/job/23735927701#step:10:12070&lt;/a&gt; &lt;br/&gt;
This time on WindowDeduplicateITCase&lt;/p&gt;</comment>
                            <comment id="17838548" author="ryanskraba" created="Thu, 18 Apr 2024 09:05:47 +0000"  >&lt;p&gt;1.19 AdaptiveScheduler / Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8731358221/job/23956907827#step:10:12482&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8731358221/job/23956907827#step:10:12482&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17839002" author="ryanskraba" created="Fri, 19 Apr 2024 13:34:45 +0000"  >&lt;p&gt;1.18 AdaptiveScheduler / Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8747381390/job/24006045095#step:10:12211&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8747381390/job/24006045095#step:10:12211&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17839630" author="ryanskraba" created="Mon, 22 Apr 2024 11:55:03 +0000"  >&lt;p&gt;1.18 AdaptiveScheduler / Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8769422951/job/24065034854#step:10:14503&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8769422951/job/24065034854#step:10:14503&lt;/a&gt;&lt;br/&gt;
1.20 AdaptiveScheduler / Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8777471561/job/24082689462#step:10:13087&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8777471561/job/24082689462#step:10:13087&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17843260" author="ryanskraba" created="Fri, 3 May 2024 15:54:25 +0000"  >&lt;ul&gt;
	&lt;li&gt;1.18 AdaptiveScheduler / Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8904361381/job/24453748069#step:10:14980&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8904361381/job/24453748069#step:10:14980&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;1.18 AdaptiveScheduler / Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8809948818/job/24181785187#step:10:17166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8809948818/job/24181785187#step:10:17166&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17843671" author="ryanskraba" created="Mon, 6 May 2024 08:09:53 +0000"  >&lt;ul&gt;
	&lt;li&gt;1.18 AdaptiveScheduler / Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/8947210915/job/24579026057#step:10:14494&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/8947210915/job/24579026057#step:10:14494&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17845942" author="ryanskraba" created="Mon, 13 May 2024 14:00:59 +0000"  >&lt;ul&gt;
	&lt;li&gt;1.19 AdaptiveScheduler / Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/9056197345/job/24878932830#step:10:14273&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/9056197345/job/24878932830#step:10:14273&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;1.18 AdaptiveScheduler / Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/9056197329/job/24879136968#step:10:11976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/9056197329/job/24879136968#step:10:11976&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17849761" author="ryanskraba" created="Mon, 27 May 2024 15:15:39 +0000"  >&lt;ul&gt;
	&lt;li&gt;1.18 AdaptiveScheduler / Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/9248172203/job/25438330034#step:10:15163&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/9248172203/job/25438330034#step:10:15163&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;1.18 AdaptiveScheduler / Test (module: table) &lt;a href=&quot;https://github.com/apache/flink/actions/runs/9239908314/job/25419753266#step:10:12055&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/9239908314/job/25419753266#step:10:12055&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17862844" author="mapohl" created="Wed, 3 Jul 2024 16:30:01 +0000"  >&lt;p&gt;&lt;tt&gt;WindowDeduplicateITCase&lt;/tt&gt;: &lt;a href=&quot;https://github.com/XComp/flink/actions/runs/9777836193/job/26993910667#step:10:12129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/XComp/flink/actions/runs/9777836193/job/26993910667#step:10:12129&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17924495" author="mapohl" created="Thu, 6 Feb 2025 11:11:56 +0000"  >&lt;ul&gt;
	&lt;li&gt;master (2.1)
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/commit/aae92a02372b4c316bfd71b8712f58fe1f7f47f9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;aae92a02372b4c316bfd71b8712f58fe1f7f47f9&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/commit/414516ad2d343f60ef43659955b3db35cc49cca7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;414516ad2d343f60ef43659955b3db35cc49cca7&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;2.0
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/commit/6335f75486bbbdc5745460a8873eb8a93a988325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;6335f75486bbbdc5745460a8873eb8a93a988325&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/commit/4499b36b4799e7a2235f9da86a3536a840ae52a2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4499b36b4799e7a2235f9da86a3536a840ae52a2&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;1.20
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/commit/9689af6a88ae6f4d34d67177a201badbdb4c2528&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;9689af6a88ae6f4d34d67177a201badbdb4c2528&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/commit/46521cda7737841fd175a6ac720a08008bbbc222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;46521cda7737841fd175a6ac720a08008bbbc222&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;1.19
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/commit/216d3923380ea91383337678cda82be233aa9bb6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;216d3923380ea91383337678cda82be233aa9bb6&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/commit/eef910f70988a12bb85022674763bbc35448ddf7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;eef910f70988a12bb85022674763bbc35448ddf7&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17924846" author="mapohl" created="Fri, 7 Feb 2025 10:48:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=afedulov&quot; class=&quot;user-hover&quot; rel=&quot;afedulov&quot;&gt;afedulov&lt;/a&gt; just as an fyi that this was merged to &lt;tt&gt;release-1.20&lt;/tt&gt; and &lt;tt&gt;release-1.19&lt;/tt&gt; so you might need to update the fixVersion depending on whether you&apos;re gonna include it in the current releases.&lt;/p&gt;</comment>
                            <comment id="17924856" author="afedulov" created="Fri, 7 Feb 2025 11:42:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; thanks for the heads up! We already made a release cut and the vote is in progress, so it won&apos;t make it into the immediate releases. I updated the fix versions respectively.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13562448">FLINK-33900</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13570455">FLINK-34560</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13570630">FLINK-34570</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                            <outwardlinks description="Testing discovered">
                                        <issuelink>
            <issuekey id="13607465">FLINK-37259</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13066227" name="FLINK-34227.7e7d69daebb438b8d03b7392c9c55115.log" size="364473" author="mapohl" created="Wed, 24 Jan 2024 14:53:00 +0000"/>
                            <attachment id="13066228" name="FLINK-34227.log" size="6119040" author="mapohl" created="Wed, 24 Jan 2024 14:53:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1myw0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>