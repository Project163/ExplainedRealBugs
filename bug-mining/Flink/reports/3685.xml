<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15602] Blink planner does not respect the precision when casting timestamp to varchar</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15602</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;According to SQL 2011 Part 2 Section 6.13 General Rules 11) d)&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If SD is a datetime data type or an interval data type then let Y be the shortest character string that&lt;br/&gt;
conforms to the definition of &amp;lt;literal&amp;gt; in Subclause 5.3, &#8220;&amp;lt;literal&amp;gt;&#8221;, and such that the interpreted value&lt;br/&gt;
of Y is SV and the interpreted precision of Y is the precision of SD.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That means:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(TO_TIMESTAMP(&lt;span class=&quot;code-quote&quot;&gt;&apos;2014-07-02 06:14:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;YYYY-MM-DD HH24:mm:SS&apos;&lt;/span&gt;) as TIMESTAMP(0)) as VARCHAR(256)) from ...;
&lt;span class=&quot;code-comment&quot;&gt;// should produce
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// 2014-07-02 06:14:00
&lt;/span&gt;
select &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(TO_TIMESTAMP(&lt;span class=&quot;code-quote&quot;&gt;&apos;2014-07-02 06:14:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;YYYY-MM-DD HH24:mm:SS&apos;&lt;/span&gt;) as TIMESTAMP(3)) as VARCHAR(256)) from ...;
&lt;span class=&quot;code-comment&quot;&gt;// should produce
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// 2014-07-02 06:14:00.000
&lt;/span&gt;
select &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(TO_TIMESTAMP(&lt;span class=&quot;code-quote&quot;&gt;&apos;2014-07-02 06:14:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;YYYY-MM-DD HH24:mm:SS&apos;&lt;/span&gt;) as TIMESTAMP(9)) as VARCHAR(256)) from ...;
&lt;span class=&quot;code-comment&quot;&gt;// should produce
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// 2014-07-02 06:14:00.000000000&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;One possible solution would be to propagate the precision in &lt;tt&gt;org.apache.flink.table.planner.codegen.calls.ScalarOperatorGens#localTimeToStringCode&lt;/tt&gt;. If I am not mistaken this problem was introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-14599&quot; title=&quot;Support precision of TimestampType in blink planner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-14599&quot;&gt;&lt;del&gt;FLINK-14599&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13279584">FLINK-15602</key>
            <summary>Blink planner does not respect the precision when casting timestamp to varchar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="docete">Zhenghua Gao</assignee>
                                    <reporter username="dwysakowicz">Dawid Wysakowicz</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 15 Jan 2020 13:01:38 +0000</created>
                <updated>Thu, 23 Jan 2020 15:32:05 +0000</updated>
                            <resolved>Thu, 23 Jan 2020 15:32:05 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17015940" author="dawidwys" created="Wed, 15 Jan 2020 13:07:04 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=docete&quot; class=&quot;user-hover&quot; rel=&quot;docete&quot;&gt;docete&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17016512" author="docete" created="Thu, 16 Jan 2020 03:32:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; altherI&#160;investigated the behavior of popular DBMS and found: PostgreSQL DO NOT pad &apos;0&apos; and Oracle/MS SQL pad &apos;0&apos; (MYSQL would pad &apos;0&apos; for TIMESTAMP type and not pad &apos;0&apos; for DATETIME type). And, hive/spark would not pad &apos;0&apos; too.&lt;/p&gt;

&lt;p&gt;What&apos;s your opinion about the padding behavior?&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17016723" author="dawidwys" created="Thu, 16 Jan 2020 09:05:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=docete&quot; class=&quot;user-hover&quot; rel=&quot;docete&quot;&gt;docete&lt;/a&gt; Thank you for checking it.&lt;/p&gt;

&lt;p&gt;I checked additionally INTERVAL and DECIMAL types and &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;SQL Server pads both types,&lt;/li&gt;
	&lt;li&gt;Oracle pads INTERVAL, does not pad DECIMAL,&lt;/li&gt;
	&lt;li&gt;PostgreSQL pads DECIMAL and does not pad INTERVAL.&lt;br/&gt;
Personally I am in favor of padding. &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; gave also a nice argument that padded values look nicer when there are multiple values being printed:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// Padded version
&lt;/span&gt;2014-07-02 06:14:00.010000000
2014-07-02 06:14:00.001000000
2014-07-02 06:14:00.001000001

&lt;span class=&quot;code-comment&quot;&gt;// Not padded
&lt;/span&gt;
2014-07-02 06:14:00.01
2014-07-02 06:14:00.001
2014-07-02 06:14:00.001000001
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;MySQL and Hive/Spark are not known to follow the SQL too closely so I would not take them as good examples.&lt;/p&gt;

&lt;p&gt;If we decide not to pad the results we should fix the &lt;tt&gt;sql client kafka tests&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17016745" author="docete" created="Thu, 16 Jan 2020 09:23:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Let&apos;s padding the TIMESTAMP type in both planner. I will file a PR soon.&#160;&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17016747" author="lzljs3620320" created="Thu, 16 Jan 2020 09:27:17 +0000"  >&lt;p&gt;+1 to pad. JDK LocalDateTime also pad to second, millsecond, microsecond and nanos.&lt;/p&gt;</comment>
                            <comment id="17016759" author="twalthr" created="Thu, 16 Jan 2020 09:43:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=docete&quot; class=&quot;user-hover&quot; rel=&quot;docete&quot;&gt;docete&lt;/a&gt; I would leave the old planner untouched to not break existing setups. For the Blink planner, we should definitely fix this inconsistency and pad timestamps, decimal, and intervals.&lt;/p&gt;</comment>
                            <comment id="17016834" author="jark" created="Thu, 16 Jan 2020 11:50:08 +0000"  >&lt;p&gt;+1 for padding.&lt;/p&gt;</comment>
                            <comment id="17017666" author="docete" created="Fri, 17 Jan 2020 02:42:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt;&#160;AFAIK we have padded DECIMAL type and intervals in Blink planner.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17022194" author="jark" created="Thu, 23 Jan 2020 15:32:05 +0000"  >&lt;p&gt;Fixed in 1.11.0: 84e76b0149187be3e3237a004c3f08a515168315&lt;br/&gt;
1.10.0: 1290808c9b1ad32ccbc173280542575831f6d2b2&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13263965">FLINK-14505</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13266082">FLINK-14599</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07v7w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>