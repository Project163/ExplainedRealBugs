<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:32:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8787] Deploying FLIP-6 YARN session with HA fails</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8787</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Starting a YARN session with HA in FLIP-6 mode fails with an exception.&lt;/p&gt;

&lt;p&gt;Commit: 5e3fa4403f518dd6d3fe9970fe8ca55871add7c9&lt;/p&gt;

&lt;p&gt;Command to start YARN session:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;export HADOOP_CLASSPATH=`hadoop classpath`
HADOOP_CONF_DIR=/etc/hadoop/conf bin/yarn-session.sh -d -n 1 -s 1 -jm 2048 -tm 2048
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Stacktrace:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.reflect.UndeclaredThrowableException
 at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1854)
 at org.apache.flink.runtime.security.HadoopSecurityContext.runSecured(HadoopSecurityContext.java:41)
 at org.apache.flink.yarn.cli.FlinkYarnSessionCli.main(FlinkYarnSessionCli.java:790)
Caused by: org.apache.flink.util.FlinkException: Could not write the Yarn connection information.
 at org.apache.flink.yarn.cli.FlinkYarnSessionCli.run(FlinkYarnSessionCli.java:612)
 at org.apache.flink.yarn.cli.FlinkYarnSessionCli.lambda$main$2(FlinkYarnSessionCli.java:790)
 at java.security.AccessController.doPrivileged(Native Method)
 at javax.security.auth.Subject.doAs(Subject.java:422)
 at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1836)
 ... 2 more
Caused by: org.apache.flink.runtime.leaderretrieval.LeaderRetrievalException: Could not retrieve the leader address and leader session ID.
 at org.apache.flink.runtime.util.LeaderRetrievalUtils.retrieveLeaderConnectionInfo(LeaderRetrievalUtils.java:116)
 at org.apache.flink.client.program.rest.RestClusterClient.getClusterConnectionInfo(RestClusterClient.java:405)
 at org.apache.flink.yarn.cli.FlinkYarnSessionCli.run(FlinkYarnSessionCli.java:589)
 ... 6 more
Caused by: java.util.concurrent.TimeoutException: Futures timed out after [60000 milliseconds]
 at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:223)
 at scala.concurrent.impl.Promise$DefaultPromise.result(Promise.scala:227)
 at scala.concurrent.Await$$anonfun$result$1.apply(package.scala:190)
 at scala.concurrent.BlockContext$DefaultBlockContext$.blockOn(BlockContext.scala:53)
 at scala.concurrent.Await$.result(package.scala:190)
 at scala.concurrent.Await.result(package.scala)
 at org.apache.flink.runtime.util.LeaderRetrievalUtils.retrieveLeaderConnectionInfo(LeaderRetrievalUtils.java:114)
 ... 8 more

------------------------------------------------------------
 The program finished with the following exception:

java.lang.reflect.UndeclaredThrowableException
 at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1854)
 at org.apache.flink.runtime.security.HadoopSecurityContext.runSecured(HadoopSecurityContext.java:41)
 at org.apache.flink.yarn.cli.FlinkYarnSessionCli.main(FlinkYarnSessionCli.java:790)
Caused by: org.apache.flink.util.FlinkException: Could not write the Yarn connection information.
 at org.apache.flink.yarn.cli.FlinkYarnSessionCli.run(FlinkYarnSessionCli.java:612)
 at org.apache.flink.yarn.cli.FlinkYarnSessionCli.lambda$main$2(FlinkYarnSessionCli.java:790)
 at java.security.AccessController.doPrivileged(Native Method)
 at javax.security.auth.Subject.doAs(Subject.java:422)
 at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1836)
 ... 2 more
Caused by: org.apache.flink.runtime.leaderretrieval.LeaderRetrievalException: Could not retrieve the leader address and leader session ID.
 at org.apache.flink.runtime.util.LeaderRetrievalUtils.retrieveLeaderConnectionInfo(LeaderRetrievalUtils.java:116)
 at org.apache.flink.client.program.rest.RestClusterClient.getClusterConnectionInfo(RestClusterClient.java:405)
 at org.apache.flink.yarn.cli.FlinkYarnSessionCli.run(FlinkYarnSessionCli.java:589)
 ... 6 more
Caused by: java.util.concurrent.TimeoutException: Futures timed out after [60000 milliseconds]
 at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:223)
 at scala.concurrent.impl.Promise$DefaultPromise.result(Promise.scala:227)
 at scala.concurrent.Await$$anonfun$result$1.apply(package.scala:190)
 at scala.concurrent.BlockContext$DefaultBlockContext$.blockOn(BlockContext.scala:53)
 at scala.concurrent.Await$.result(package.scala:190)
 at scala.concurrent.Await.result(package.scala)
 at org.apache.flink.runtime.util.LeaderRetrievalUtils.retrieveLeaderConnectionInfo(LeaderRetrievalUtils.java:114)
 ... 8 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;emr-5.12.0&lt;br/&gt;
Hadoop distribution:&#160;Amazon 2.8.3&lt;br/&gt;
Applications:&#160;ZooKeeper 3.4.10&lt;/p&gt;</environment>
        <key id="13140946">FLINK-8787</key>
            <summary>Deploying FLIP-6 YARN session with HA fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gjy">Gary Yao</assignee>
                                    <reporter username="gjy">Gary Yao</reporter>
                        <labels>
                            <label>flip-6</label>
                    </labels>
                <created>Mon, 26 Feb 2018 15:28:26 +0000</created>
                <updated>Thu, 15 Mar 2018 16:49:51 +0000</updated>
                            <resolved>Wed, 28 Feb 2018 12:30:42 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>Command Line Client</component>
                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16377267" author="githubbot" created="Mon, 26 Feb 2018 17:55:49 +0000"  >&lt;p&gt;GitHub user GJL opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8787&quot; title=&quot;Deploying FLIP-6 YARN session with HA fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8787&quot;&gt;&lt;del&gt;FLINK-8787&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;flip6&amp;#93;&lt;/span&gt; WIP&lt;/p&gt;

&lt;p&gt;    WIP&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    &lt;b&gt;(For example: This pull request makes task deployment go through the blob server, rather than through RPC. That way we avoid re-transferring them on each deployment (during recovery).)&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    cc: @tillrohrmann &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    &lt;b&gt;(for example&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/b&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;The TaskInfo is stored in the blob store on job creation time as a persistent artifact&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Deployments RPC transmits only the blob storage reference&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;TaskManagers retrieve the TaskInfo from the blob cache&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    &lt;b&gt;(Please pick either of the following options)&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    This change is a trivial rework / code cleanup without any test coverage.&lt;/p&gt;

&lt;p&gt;    &lt;b&gt;(or)&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    This change is already covered by existing tests, such as &lt;b&gt;(please describe tests)&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;    &lt;b&gt;(or)&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    This change added tests and can be verified as follows:&lt;/p&gt;

&lt;p&gt;    &lt;b&gt;(example&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/b&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Added integration tests for end-to-end deployment with large payloads (100MB)&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Extended integration test for recovery after master (JobManager) failure&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Added test that validates that TaskInfo is transferred only once across recoveries&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Manually verified the change by running a 4 node cluser with 2 JobManagers and 4 TaskManagers, a stateful streaming program, and killing one JobManager and two TaskManagers during the execution, verifying that recovery happens correctly.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / no)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / no / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/GJL/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/GJL/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8787&quot; title=&quot;Deploying FLIP-6 YARN session with HA fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8787&quot;&gt;&lt;del&gt;FLINK-8787&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5584&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0cde09add17106f09e1f44b2a73400ea14a9eb21&lt;br/&gt;
Author: gyao &amp;lt;gary@...&amp;gt;&lt;br/&gt;
Date:   2018-02-26T17:52:18Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; Add requireNonNull validation to Configuration copy constructor&lt;/p&gt;

&lt;p&gt;commit 8f826c673bafd8228bb25da20e7dd40384fae971&lt;br/&gt;
Author: gyao &amp;lt;gary@...&amp;gt;&lt;br/&gt;
Date:   2018-02-26T17:54:34Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8787&quot; title=&quot;Deploying FLIP-6 YARN session with HA fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8787&quot;&gt;&lt;del&gt;FLINK-8787&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;flip6&amp;#93;&lt;/span&gt; Ensure that zk namespace configuration reaches RestClusterClient&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16377273" author="githubbot" created="Mon, 26 Feb 2018 17:57:08 +0000"  >&lt;p&gt;Github user GJL commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584#discussion_r170679952&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584#discussion_r170679952&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/AbstractYarnClusterDescriptor.java &amp;#8212;&lt;br/&gt;
    @@ -186,7 +187,7 @@ public YarnClient getYarnClient() {&lt;br/&gt;
     	protected abstract String getYarnJobClusterEntrypoint();&lt;/p&gt;

&lt;p&gt;     	public Configuration getFlinkConfiguration() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return flinkConfiguration;&lt;br/&gt;
    +		return new UnmodifiableConfiguration(flinkConfiguration);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    not needed, `flinkConfiguration` is unmodifiable already&lt;/p&gt;</comment>
                            <comment id="16378174" author="githubbot" created="Tue, 27 Feb 2018 07:39:21 +0000"  >&lt;p&gt;Github user GJL commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    test failures due to &lt;br/&gt;
    ```&lt;br/&gt;
    // logback + log4j, with/out krb5, different JVM opts&lt;br/&gt;
    // IMPORTANT: Be aware that we are using side effects here to modify the created YarnClusterDescriptor,&lt;br/&gt;
    // because we have a reference to the ClusterDescriptor&apos;s configuration which we modify continuously&lt;br/&gt;
    ```&lt;/p&gt;</comment>
                            <comment id="16378224" author="githubbot" created="Tue, 27 Feb 2018 08:25:26 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Why are the tests failing due to this @GJL?&lt;/p&gt;</comment>
                            <comment id="16378232" author="githubbot" created="Tue, 27 Feb 2018 08:29:52 +0000"  >&lt;p&gt;Github user GJL commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tillrohrmann Because I am creating a defensive copy of the configuration. Changing the config outside of the AbstractYarnClusterDescriptor won&apos;t have side effects. I will rewrite the test.&lt;/p&gt;</comment>
                            <comment id="16378347" author="githubbot" created="Tue, 27 Feb 2018 10:20:51 +0000"  >&lt;p&gt;Github user GJL commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes, can do.&lt;/p&gt;</comment>
                            <comment id="16378385" author="githubbot" created="Tue, 27 Feb 2018 10:49:08 +0000"  >&lt;p&gt;Github user GJL commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584#discussion_r170882807&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584#discussion_r170882807&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/AbstractYarnClusterDescriptor.java &amp;#8212;&lt;br/&gt;
    @@ -186,7 +187,7 @@ public YarnClient getYarnClient() {&lt;br/&gt;
     	protected abstract String getYarnJobClusterEntrypoint();&lt;/p&gt;

&lt;p&gt;     	public Configuration getFlinkConfiguration() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return flinkConfiguration;&lt;br/&gt;
    +		return new UnmodifiableConfiguration(flinkConfiguration);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    fixed&lt;/p&gt;</comment>
                            <comment id="16378478" author="githubbot" created="Tue, 27 Feb 2018 12:08:42 +0000"  >&lt;p&gt;Github user GJL closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16378481" author="githubbot" created="Tue, 27 Feb 2018 12:11:54 +0000"  >&lt;p&gt;GitHub user GJL reopened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8787&quot; title=&quot;Deploying FLIP-6 YARN session with HA fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8787&quot;&gt;&lt;del&gt;FLINK-8787&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;flip6&amp;#93;&lt;/span&gt; Deploying FLIP-6 YARN session with HA fails&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    &lt;b&gt;Deploying FLIP-6 YARN session with HA fails because the ZooKeeper namespace is not set correctly. The namespace is `/flink/default` but it should include the YARN application id.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    cc: @tillrohrmann &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Use defensive copies of `Configuration` objects in `AbstractYarnClusterDescriptor`. Never modify existing configuration.&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Ensure that zk namespace configuration reaches RestClusterClient&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This change added tests and can be verified as follows:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Manually deployed Flink on YARN with HA enabled.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (*&lt;b&gt;yes&lt;/b&gt;* / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (*&lt;b&gt;not applicable&lt;/b&gt;* / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/GJL/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/GJL/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8787&quot; title=&quot;Deploying FLIP-6 YARN session with HA fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8787&quot;&gt;&lt;del&gt;FLINK-8787&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5584&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0cde09add17106f09e1f44b2a73400ea14a9eb21&lt;br/&gt;
Author: gyao &amp;lt;gary@...&amp;gt;&lt;br/&gt;
Date:   2018-02-26T17:52:18Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; Add requireNonNull validation to Configuration copy constructor&lt;/p&gt;

&lt;p&gt;commit 17e9ba4142fa003528ee5f6ecc8d06f70bcb35c3&lt;br/&gt;
Author: gyao &amp;lt;gary@...&amp;gt;&lt;br/&gt;
Date:   2018-02-26T17:54:34Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8787&quot; title=&quot;Deploying FLIP-6 YARN session with HA fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8787&quot;&gt;&lt;del&gt;FLINK-8787&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;flip6&amp;#93;&lt;/span&gt; Ensure that zk namespace configuration reaches RestClusterClient&lt;/p&gt;

&lt;p&gt;commit 17d346908d6def6e36b99f9c536ebd731665e991&lt;br/&gt;
Author: gyao &amp;lt;gary@...&amp;gt;&lt;br/&gt;
Date:   2018-02-27T10:45:03Z&lt;/p&gt;

&lt;p&gt;    fixup! &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8787&quot; title=&quot;Deploying FLIP-6 YARN session with HA fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8787&quot;&gt;&lt;del&gt;FLINK-8787&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;flip6&amp;#93;&lt;/span&gt; Ensure that zk namespace configuration reaches RestClusterClient&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16378580" author="githubbot" created="Tue, 27 Feb 2018 13:33:08 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584#discussion_r170921732&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584#discussion_r170921732&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/AbstractYarnClusterDescriptor.java &amp;#8212;&lt;br/&gt;
    @@ -479,36 +479,60 @@ public void terminateCluster(ApplicationId applicationId) throws FlinkException&lt;br/&gt;
     			ClusterEntrypoint.ExecutionMode.DETACHED&lt;br/&gt;
     			: ClusterEntrypoint.ExecutionMode.NORMAL;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;flinkConfiguration.setString(ClusterEntrypoint.EXECUTION_MODE, executionMode.toString());&lt;br/&gt;
    +		effectiveConfiguration.setString(ClusterEntrypoint.EXECUTION_MODE, executionMode.toString());&lt;br/&gt;
    +&lt;br/&gt;
    +		final ApplicationId appId = yarnApplication.getApplicationSubmissionContext().getApplicationId();&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ApplicationReport report = startAppMaster(&lt;/li&gt;
	&lt;li&gt;new Configuration(flinkConfiguration),&lt;br/&gt;
    +		// --------- Add Zookeeper namespace to effectiveConfiguration ---------&lt;br/&gt;
    +		String zkNamespace = getZookeeperNamespace();&lt;br/&gt;
    +		// no user specified cli argument for namespace?&lt;br/&gt;
    +		if (zkNamespace == null || zkNamespace.isEmpty()) 
{
    +			// namespace defined in config? else use applicationId as default.
    +			zkNamespace = flinkConfiguration.getString(HighAvailabilityOptions.HA_CLUSTER_ID, appId.toString());
    +			setZookeeperNamespace(zkNamespace);
    +		}
&lt;p&gt;    +		effectiveConfiguration.setString(HighAvailabilityOptions.HA_CLUSTER_ID, zkNamespace);&lt;br/&gt;
    +&lt;br/&gt;
    +		effectiveConfiguration.setInteger(&lt;br/&gt;
    +			ConfigConstants.TASK_MANAGER_NUM_TASK_SLOTS,&lt;br/&gt;
    +			clusterSpecification.getSlotsPerTaskManager());&lt;br/&gt;
    +&lt;br/&gt;
    +		// write out configuration file so that it can be uploaded&lt;br/&gt;
    +		File tmpConfigurationFile = File.createTempFile(appId + &quot;-flink-conf.yaml&quot;, null);&lt;br/&gt;
    +		tmpConfigurationFile.deleteOnExit();&lt;br/&gt;
    +		BootstrapTools.writeConfiguration(effectiveConfiguration, tmpConfigurationFile);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Why do we pull the writing of the configuration out of `startAppMaster`? This belongs somewhat to the `startAppMaster` method, because then it could also be cleaned up there after starting the application master.&lt;/p&gt;</comment>
                            <comment id="16378581" author="githubbot" created="Tue, 27 Feb 2018 13:34:32 +0000"  >&lt;p&gt;Github user GJL closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16378583" author="githubbot" created="Tue, 27 Feb 2018 13:35:04 +0000"  >&lt;p&gt;Github user GJL commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    There are more problems.&lt;/p&gt;</comment>
                            <comment id="16378586" author="githubbot" created="Tue, 27 Feb 2018 13:35:25 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584#discussion_r170922371&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584#discussion_r170922371&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/AbstractYarnClusterDescriptor.java &amp;#8212;&lt;br/&gt;
    @@ -479,36 +479,60 @@ public void terminateCluster(ApplicationId applicationId) throws FlinkException&lt;br/&gt;
     			ClusterEntrypoint.ExecutionMode.DETACHED&lt;br/&gt;
     			: ClusterEntrypoint.ExecutionMode.NORMAL;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;flinkConfiguration.setString(ClusterEntrypoint.EXECUTION_MODE, executionMode.toString());&lt;br/&gt;
    +		effectiveConfiguration.setString(ClusterEntrypoint.EXECUTION_MODE, executionMode.toString());&lt;br/&gt;
    +&lt;br/&gt;
    +		final ApplicationId appId = yarnApplication.getApplicationSubmissionContext().getApplicationId();&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ApplicationReport report = startAppMaster(&lt;/li&gt;
	&lt;li&gt;new Configuration(flinkConfiguration),&lt;br/&gt;
    +		// --------- Add Zookeeper namespace to effectiveConfiguration ---------&lt;br/&gt;
    +		String zkNamespace = getZookeeperNamespace();&lt;br/&gt;
    +		// no user specified cli argument for namespace?&lt;br/&gt;
    +		if (zkNamespace == null || zkNamespace.isEmpty()) {&lt;br/&gt;
    +			// namespace defined in config? else use applicationId as default.&lt;br/&gt;
    +			zkNamespace = flinkConfiguration.getString(HighAvailabilityOptions.HA_CLUSTER_ID, appId.toString());&lt;br/&gt;
    +			setZookeeperNamespace(zkNamespace);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think we could remove the whole `setZookeeperNamespace` and `getZookeeperNamespace` methods + field and simply rely on the fact that the input `Configuration` has the correct field set if there was a respective option set.&lt;/p&gt;</comment>
                            <comment id="16378591" author="githubbot" created="Tue, 27 Feb 2018 13:36:30 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5584#discussion_r170922634&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5584#discussion_r170922634&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/AbstractYarnClusterDescriptor.java &amp;#8212;&lt;br/&gt;
    @@ -479,36 +479,60 @@ public void terminateCluster(ApplicationId applicationId) throws FlinkException&lt;br/&gt;
     			ClusterEntrypoint.ExecutionMode.DETACHED&lt;br/&gt;
     			: ClusterEntrypoint.ExecutionMode.NORMAL;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;flinkConfiguration.setString(ClusterEntrypoint.EXECUTION_MODE, executionMode.toString());&lt;br/&gt;
    +		effectiveConfiguration.setString(ClusterEntrypoint.EXECUTION_MODE, executionMode.toString());&lt;br/&gt;
    +&lt;br/&gt;
    +		final ApplicationId appId = yarnApplication.getApplicationSubmissionContext().getApplicationId();&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ApplicationReport report = startAppMaster(&lt;/li&gt;
	&lt;li&gt;new Configuration(flinkConfiguration),&lt;br/&gt;
    +		// --------- Add Zookeeper namespace to effectiveConfiguration ---------&lt;br/&gt;
    +		String zkNamespace = getZookeeperNamespace();&lt;br/&gt;
    +		// no user specified cli argument for namespace?&lt;br/&gt;
    +		if (zkNamespace == null || zkNamespace.isEmpty()) 
{
    +			// namespace defined in config? else use applicationId as default.
    +			zkNamespace = flinkConfiguration.getString(HighAvailabilityOptions.HA_CLUSTER_ID, appId.toString());
    +			setZookeeperNamespace(zkNamespace);
    +		}
&lt;p&gt;    +		effectiveConfiguration.setString(HighAvailabilityOptions.HA_CLUSTER_ID, zkNamespace);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This would then mean that we only write the `appId` as the `HA_CLUSTER_ID` if there is no value set.&lt;/p&gt;</comment>
                            <comment id="16378868" author="githubbot" created="Tue, 27 Feb 2018 16:16:43 +0000"  >&lt;p&gt;GitHub user GJL opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5591&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8787&quot; title=&quot;Deploying FLIP-6 YARN session with HA fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8787&quot;&gt;&lt;del&gt;FLINK-8787&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;flip6&amp;#93;&lt;/span&gt; Deploying FLIP-6 YARN session with HA fails&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    *Do not copy `flinkConfiguration` in `AbstractYarnClusterDescriptor`. There is code that relies on side effects on the configuration object. This is a quick and dirty solution. In future, the descriptor should be made immutable: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8799&quot; title=&quot;Make AbstractYarnClusterDescriptor immutable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8799&quot;&gt;&lt;del&gt;FLINK-8799&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8799)*&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-8799)*&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    cc: @tillrohrmann &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Do not copy `flinkConfiguration` in `AbstractYarnClusterDescriptor`&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This change added tests and can be verified as follows:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Manually deployed Flink cluster on YARN with HA enabled.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (*&lt;b&gt;yes&lt;/b&gt;* / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (*&lt;b&gt;not applicable&lt;/b&gt;* / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/GJL/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/GJL/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8787&quot; title=&quot;Deploying FLIP-6 YARN session with HA fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8787&quot;&gt;&lt;del&gt;FLINK-8787&lt;/del&gt;&lt;/a&gt;-2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5591.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5591.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5591&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 012f656705466cea4ba2e037f7e52f46c0a1bf9f&lt;br/&gt;
Author: gyao &amp;lt;gary@...&amp;gt;&lt;br/&gt;
Date:   2018-02-27T15:58:53Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8787&quot; title=&quot;Deploying FLIP-6 YARN session with HA fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8787&quot;&gt;&lt;del&gt;FLINK-8787&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;flip6&amp;#93;&lt;/span&gt; Do not copy flinkConfiguration in AbstractYarnClusterDescriptor&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16380209" author="githubbot" created="Wed, 28 Feb 2018 12:29:04 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5591&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16380218" author="till.rohrmann" created="Wed, 28 Feb 2018 12:30:42 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;1.6.0:&#160;71baa2784edab8b851dabe15855a023c73b4fc1c&lt;/p&gt;

&lt;p&gt;1.5.0:&#160;2f6cb37c775106bb684ef9c608585e7a72056460&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qlkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>