<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2225] Erroneous scheduling of co-located tasks</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2225</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;While running the &lt;tt&gt;ConnectedComponents&lt;/tt&gt; example on a testing cluster, I encountered spurious failures of the job execution. The error was that the scheduler could sometimes not schedule co-located tasks because it did not find any suitable slots for deployment. &lt;/p&gt;

&lt;p&gt;This error might be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1952&quot; title=&quot;Cannot run ConnectedComponents example: Could not allocate a slot on instance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1952&quot;&gt;&lt;del&gt;FLINK-1952&lt;/del&gt;&lt;/a&gt; where a similar error was observed. The error might have been reintroduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2183&quot; title=&quot;TaskManagerFailsWithSlotSharingITCase fails.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2183&quot;&gt;&lt;del&gt;FLINK-2183&lt;/del&gt;&lt;/a&gt; which fixed another scheduling error.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12837856">FLINK-2225</key>
            <summary>Erroneous scheduling of co-located tasks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jun 2015 14:53:56 +0000</created>
                <updated>Fri, 19 Jun 2015 17:15:25 +0000</updated>
                            <resolved>Fri, 19 Jun 2015 17:15:25 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14586142" author="till.rohrmann" created="Mon, 15 Jun 2015 14:54:37 +0000"  >&lt;p&gt;Client log&lt;/p&gt;</comment>
                            <comment id="14586145" author="till.rohrmann" created="Mon, 15 Jun 2015 14:58:20 +0000"  >&lt;p&gt;JobManager log&lt;/p&gt;</comment>
                            <comment id="14586146" author="till.rohrmann" created="Mon, 15 Jun 2015 14:59:21 +0000"  >&lt;p&gt;TaskManager log node2&lt;/p&gt;</comment>
                            <comment id="14587736" author="till.rohrmann" created="Tue, 16 Jun 2015 09:26:06 +0000"  >&lt;p&gt;It does not seem to be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2183&quot; title=&quot;TaskManagerFailsWithSlotSharingITCase fails.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2183&quot;&gt;&lt;del&gt;FLINK-2183&lt;/del&gt;&lt;/a&gt; since I could reproduce the problem with the release candidate 1 as well.&lt;/p&gt;</comment>
                            <comment id="14587955" author="till.rohrmann" created="Tue, 16 Jun 2015 12:32:07 +0000"  >&lt;p&gt;I think I found the problem. Depending on when the iteration head of the &lt;tt&gt;IterationDescriptor&lt;/tt&gt; is set, static code paths of an iteration are assigned to a co location constraint. If static code paths are assigned to a co location constraint, it can happen that the multiple &lt;tt&gt;IterationHead&lt;/tt&gt; tasks are scheduled on the same TM (number of tasks exceeds available slots). This can happen if the static code tasks are executed subsequently on the same TM. The scheduling of these tasks then fixes the slot for the co-location constraint, ultimately leading to the scheduling of multiple (possibly exceeding the number of slots) &lt;tt&gt;IterationHead&lt;/tt&gt; tasks on the same TM. That is where Flink throws a &lt;tt&gt;NoResourceAvailableException&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14587966" author="githubbot" created="Tue, 16 Jun 2015 12:41:22 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/843&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/843&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2225&quot; title=&quot;Erroneous scheduling of co-located tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2225&quot;&gt;&lt;del&gt;FLINK-2225&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;scheduler&amp;#93;&lt;/span&gt; Excludes static code paths from co-location constraint to avoid scheduling problems&lt;/p&gt;

&lt;p&gt;    Including static code paths in the co-location constraints can lead to a slot assignment for the co-location constraints which is not satisfiable. &lt;/p&gt;

&lt;p&gt;    This can be caused by a subsequent execution of the static code tasks on the same TM. Then all the following co-located tasks have to be deployed in the same slots. When you have an iteration whose tasks have to be run all simultaneously, then this will lead to an unsatisfiable scheduling case.&lt;/p&gt;

&lt;p&gt;    The solution is to exclude static code paths from the co-location groups.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixCC&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/843.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/843.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #843&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9e897c681171116518a7a66a08e9a10350339d8a&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-06-16T10:27:02Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2225&quot; title=&quot;Erroneous scheduling of co-located tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2225&quot;&gt;&lt;del&gt;FLINK-2225&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;scheduler&amp;#93;&lt;/span&gt; Excludes static code paths from co-location constraint to avoid scheduling problems&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14587968" author="githubbot" created="Tue, 16 Jun 2015 12:41:55 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/843#issuecomment-112410790&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/843#issuecomment-112410790&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @StephanEwen do I overlook something by excluding static code paths from the co-location groups?&lt;/p&gt;</comment>
                            <comment id="14588350" author="githubbot" created="Tue, 16 Jun 2015 16:46:01 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/843#issuecomment-112494219&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/843#issuecomment-112494219&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Great catch!&lt;/p&gt;

&lt;p&gt;    +1 to merge&lt;/p&gt;</comment>
                            <comment id="14588366" author="githubbot" created="Tue, 16 Jun 2015 16:56:13 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/843#issuecomment-112496491&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/843#issuecomment-112496491&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Will merge it then.&lt;/p&gt;</comment>
                            <comment id="14588825" author="githubbot" created="Tue, 16 Jun 2015 21:37:52 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/843&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/843&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14593654" author="till.rohrmann" created="Fri, 19 Jun 2015 17:15:25 +0000"  >&lt;p&gt;Fixed via 5374ba97cd863af3062c9b6fa9f96c4b4ebe9a0a&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12739623" name="flink-hduser-flink-client-node1.log" size="32276" author="trohrmann" created="Mon, 15 Jun 2015 14:54:37 +0000"/>
                            <attachment id="12739624" name="flink-hduser-jobmanager-node1.log" size="235835" author="trohrmann" created="Mon, 15 Jun 2015 14:58:20 +0000"/>
                            <attachment id="12739625" name="flink-hduser-taskmanager-node2.log" size="171362" author="trohrmann" created="Mon, 15 Jun 2015 14:59:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g1uv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>