<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6656] Migrate CEP PriorityQueue to MapState</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6656</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description></description>
                <environment></environment>
        <key id="13073813">FLINK-6656</key>
            <summary>Migrate CEP PriorityQueue to MapState</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkl0u">Kostas Kloudas</assignee>
                                    <reporter username="kkl0u">Kostas Kloudas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 May 2017 10:36:52 +0000</created>
                <updated>Tue, 23 May 2017 09:07:52 +0000</updated>
                            <resolved>Tue, 23 May 2017 09:07:52 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>Library / CEP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16019503" author="githubbot" created="Mon, 22 May 2017 12:02:56 +0000"  >&lt;p&gt;GitHub user kl0u opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3961&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3961&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6656&quot; title=&quot;Migrate CEP PriorityQueue to MapState&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6656&quot;&gt;&lt;del&gt;FLINK-6656&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;cep&amp;#93;&lt;/span&gt; Change element PriorityQueue to MapState.&lt;/p&gt;

&lt;p&gt;    This is to leverage the fact that RocksDB already returns the&lt;br/&gt;
    keys sorted. So now elements, instead of being stores in a PQ&lt;br/&gt;
    and all of them being deserialized and serialized at each incoming&lt;br/&gt;
    element, the are stored in a MapState with the key being the&lt;br/&gt;
    timestamp and the value, a List of elements that refer to the&lt;br/&gt;
    same timestamp.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kl0u/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kl0u/flink&lt;/a&gt; cep-map-state-pr&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3961.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3961.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3961&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="16019548" author="githubbot" created="Mon, 22 May 2017 12:57:28 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3961&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3961&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This looks good! Why is the element processing reordered in places in the tests, though?&lt;/p&gt;</comment>
                            <comment id="16019583" author="githubbot" created="Mon, 22 May 2017 13:36:01 +0000"  >&lt;p&gt;Github user kl0u commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3961&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3961&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The re-ordering is just to verify that at watermark time, we actually order&lt;br/&gt;
    by event-time.&lt;/p&gt;

&lt;p&gt;    On May 22, 2017 2:57 PM, &quot;Aljoscha Krettek&quot; &amp;lt;notifications@github.com&amp;gt;&lt;br/&gt;
    wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; This looks good! Why is the element processing reordered in places in the&lt;br/&gt;
    &amp;gt; tests, though?&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; You are receiving this because you authored the thread.&lt;br/&gt;
    &amp;gt; Reply to this email directly, view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/flink/pull/3961#issuecomment-303092277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3961#issuecomment-303092277&lt;/a&gt;&amp;gt;, or mute&lt;br/&gt;
    &amp;gt; the thread&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/notifications/unsubscribe-auth/ACS1qPxn5NjNu9Z9HWNxNf5klLZau-fdks5r8YY8gaJpZM4NiQwf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/notifications/unsubscribe-auth/ACS1qPxn5NjNu9Z9HWNxNf5klLZau-fdks5r8YY8gaJpZM4NiQwf&lt;/a&gt;&amp;gt;&lt;br/&gt;
    &amp;gt; .&lt;br/&gt;
    &amp;gt;&lt;/p&gt;
</comment>
                            <comment id="16019721" author="githubbot" created="Mon, 22 May 2017 15:47:06 +0000"  >&lt;p&gt;Github user dawidwys commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3961&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3961&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Just a question from my side to understand this change better. Does it really leverage the fact of keys being returned in order? To evaluate `getSortedTimestamps` you need to iterate whole keySet anyway.&lt;/p&gt;

&lt;p&gt;    I see though it benefits from laziness of value deserialization and partitioning of the incoming events (by timestamp). &lt;/p&gt;

&lt;p&gt;    Is my understanding correct?&lt;/p&gt;</comment>
                            <comment id="16019737" author="githubbot" created="Mon, 22 May 2017 16:01:36 +0000"  >&lt;p&gt;Github user kl0u commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3961&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3961&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @dawidwys ! Your understanding is correct in the sense that it does not leverage to the fullest the fact of keys being returned in order. The reason is that this is valid only in RocksDB state backend. &lt;/p&gt;

&lt;p&gt;    But when it comes to insertion to the PriorityQueue, this can come in handy as inserting will be fast. In addition, as you said, we only deserialize the values we need, when we need them, instead of everything all the time.&lt;/p&gt;</comment>
                            <comment id="16019898" author="githubbot" created="Mon, 22 May 2017 17:49:23 +0000"  >&lt;p&gt;Github user dawidwys commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3961&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3961&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for clarification!&lt;/p&gt;

&lt;p&gt;    Z pozdrowieniami! / Cheers!&lt;/p&gt;

&lt;p&gt;    Dawid Wysakowicz&lt;/p&gt;

&lt;p&gt;    &lt;b&gt;Data/Software Engineer&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    Skype: dawid_wys | Twitter: @OneMoreCoder&lt;/p&gt;

&lt;p&gt;    &amp;lt;&lt;a href=&quot;http://getindata.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://getindata.com/&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    2017-05-22 18:01 GMT+02:00 Kostas Kloudas &amp;lt;notifications@github.com&amp;gt;:&lt;/p&gt;

&lt;p&gt;    &amp;gt; Hi @dawidwys &amp;lt;&lt;a href=&quot;https://github.com/dawidwys&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dawidwys&lt;/a&gt;&amp;gt; ! Your understanding is&lt;br/&gt;
    &amp;gt; correct in the sense that it does not leverage to the fullest the fact of&lt;br/&gt;
    &amp;gt; keys being returned in order. The reason is that this is valid only in&lt;br/&gt;
    &amp;gt; RocksDB state backend.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; But when it comes to insertion to the PriorityQueue, this can come in&lt;br/&gt;
    &amp;gt; handy as inserting will be fast. In addition, as you said, we only&lt;br/&gt;
    &amp;gt; deserialize the values we need, when we need them, instead of everything&lt;br/&gt;
    &amp;gt; all the time.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; You are receiving this because you were mentioned.&lt;br/&gt;
    &amp;gt; Reply to this email directly, view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/flink/pull/3961#issuecomment-303143858&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3961#issuecomment-303143858&lt;/a&gt;&amp;gt;, or mute&lt;br/&gt;
    &amp;gt; the thread&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/notifications/unsubscribe-auth/AF8_0_gLnOlm1xuG-VHVJTnEJx9KxVpSks5r8bFogaJpZM4NiQwf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/notifications/unsubscribe-auth/AF8_0_gLnOlm1xuG-VHVJTnEJx9KxVpSks5r8bFogaJpZM4NiQwf&lt;/a&gt;&amp;gt;&lt;br/&gt;
    &amp;gt; .&lt;br/&gt;
    &amp;gt;&lt;/p&gt;
</comment>
                            <comment id="16020792" author="githubbot" created="Tue, 23 May 2017 08:22:21 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3961&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3961&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @kl0u asked me to merge this PR to the release-1.3 branch. It seems the change is good to merge.&lt;/p&gt;</comment>
                            <comment id="16020795" author="rmetzger" created="Tue, 23 May 2017 08:24:37 +0000"  >&lt;p&gt;Merged to 1.3 in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/2bd082f8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/2bd082f8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16020917" author="githubbot" created="Tue, 23 May 2017 09:07:01 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3961&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3961&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16020918" author="kkl0u" created="Tue, 23 May 2017 09:07:52 +0000"  >&lt;p&gt;Merged with 546e2ad73165b00d93c3c460372b9d49a4b5d8b7&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fadr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>