<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:29:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-7367] Parameterize more configs for FlinkKinesisProducer (RecordMaxBufferedTime, MaxConnections, RequestTimeout, etc)</title>
                <link>https://issues.apache.org/jira/browse/FLINK-7367</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Right now, FlinkKinesisProducer only expose two configs for the underlying KinesisProducer:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;AGGREGATION_MAX_COUNT&lt;/li&gt;
	&lt;li&gt;COLLECTION_MAX_COUNT&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Well, according to &lt;a href=&quot;http://docs.aws.amazon.com/streams/latest/dev/kinesis-kpl-config.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AWS doc&lt;/a&gt; and &lt;a href=&quot;https://github.com/awslabs/amazon-kinesis-producer/blob/master/java/amazon-kinesis-producer-sample/default_config.properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;their sample on github&lt;/a&gt;, developers can set more to make the max use of KinesisProducer, and make it fault-tolerant (e.g. by increasing timeout).&lt;/p&gt;

&lt;p&gt;I select a few more configs that we need when using Flink with Kinesis:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;MAX_CONNECTIONS&lt;/li&gt;
	&lt;li&gt;RATE_LIMIT&lt;/li&gt;
	&lt;li&gt;RECORD_MAX_BUFFERED_TIME&lt;/li&gt;
	&lt;li&gt;RECORD_TIME_TO_LIVE&lt;/li&gt;
	&lt;li&gt;REQUEST_TIMEOUT&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Flink is using KPL&apos;s default values. They make Flink writing too fast to Kinesis, which fail Flink job too frequently. We need to parameterize FlinkKinesisProducer to pass in the above params, in order to slowing down Flink&apos;s write rate to Kinesis.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13092337">FLINK-7367</key>
            <summary>Parameterize more configs for FlinkKinesisProducer (RecordMaxBufferedTime, MaxConnections, RequestTimeout, etc)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="phoenixjiangnan">Bowen Li</assignee>
                                    <reporter username="phoenixjiangnan">Bowen Li</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Aug 2017 00:05:30 +0000</created>
                <updated>Thu, 7 Sep 2017 06:24:48 +0000</updated>
                            <resolved>Thu, 7 Sep 2017 06:24:48 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Connectors / Kinesis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16113914" author="githubbot" created="Fri, 4 Aug 2017 04:06:08 +0000"  >&lt;p&gt;GitHub user bowenli86 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7367&quot; title=&quot;Parameterize more configs for FlinkKinesisProducer (RecordMaxBufferedTime, MaxConnections, RequestTimeout, etc)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7367&quot;&gt;&lt;del&gt;FLINK-7367&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;kinesis connector&amp;#93;&lt;/span&gt; Parameterize more configs for FlinkKinesisProducer (RecordMaxBufferedTime, MaxConnections, RequestTimeout, etc)&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Right now, FlinkKinesisProducer only expose two configs for the underlying KinesisProducer:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;AGGREGATION_MAX_COUNT&lt;/li&gt;
	&lt;li&gt;COLLECTION_MAX_COUNT&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Well, according to AWS doc and their sample on github, developers can set more to make the max use of KinesisProducer, and make it fault-tolerant (e.g. by increasing timeout). I select a few more configs that we need when using Flink with Kinesis:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;MAX_CONNECTIONS&lt;/li&gt;
	&lt;li&gt;RATE_LIMIT&lt;/li&gt;
	&lt;li&gt;RECORD_MAX_BUFFERED_TIME&lt;/li&gt;
	&lt;li&gt;RECORD_TIME_TO_LIVE&lt;/li&gt;
	&lt;li&gt;REQUEST_TIMEOUT&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    We need to parameterize FlinkKinesisProducer to pass in the above params, in order to cater to our need&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Added more config values into `ProducerConfigConstants`&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Made FlinkKinesisProducer pick up more configs&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Added an example in doc&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This change is a trivial rework / code cleanup without any test coverage.&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
&lt;/ul&gt;




&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/bowenli86/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bowenli86/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7363&quot; title=&quot;add hashes and signatures to the download page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7363&quot;&gt;&lt;del&gt;FLINK-7363&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4473&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ac0b4d22fde763dde62b26ed9a022d537bb29e58&lt;br/&gt;
Author: Bowen Li &amp;lt;bowenli86@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-08-04T03:59:02Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7367&quot; title=&quot;Parameterize more configs for FlinkKinesisProducer (RecordMaxBufferedTime, MaxConnections, RequestTimeout, etc)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7367&quot;&gt;&lt;del&gt;FLINK-7367&lt;/del&gt;&lt;/a&gt; Parameterize FlinkKinesisProducer on RecordMaxBufferedTime, MaxConnections, RequestTimeout, and more&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16113916" author="githubbot" created="Fri, 4 Aug 2017 04:07:13 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai Hi Gordon, shall we add more explanation of these keys in Flink docs, or do you think the java doc is sufficient?&lt;/p&gt;</comment>
                            <comment id="16116108" author="githubbot" created="Mon, 7 Aug 2017 06:11:39 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r131577895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r131577895&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/FlinkKinesisProducer.java &amp;#8212;&lt;br/&gt;
    @@ -169,14 +169,27 @@ public void open(Configuration parameters) throws Exception {&lt;/p&gt;

&lt;p&gt;     		producerConfig.setRegion(configProps.getProperty(ProducerConfigConstants.AWS_REGION));&lt;br/&gt;
     		producerConfig.setCredentialsProvider(AWSUtil.getCredentialsProvider(configProps));&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (configProps.containsKey(ProducerConfigConstants.COLLECTION_MAX_COUNT)) 
{
    -			producerConfig.setCollectionMaxCount(PropertiesUtil.getLong(configProps,
    -					ProducerConfigConstants.COLLECTION_MAX_COUNT, producerConfig.getCollectionMaxCount(), LOG));
    -		}&lt;/li&gt;
	&lt;li&gt;if (configProps.containsKey(ProducerConfigConstants.AGGREGATION_MAX_COUNT)) 
{
    -			producerConfig.setAggregationMaxCount(PropertiesUtil.getLong(configProps,
    -					ProducerConfigConstants.AGGREGATION_MAX_COUNT, producerConfig.getAggregationMaxCount(), LOG));
    -		}
&lt;p&gt;    +&lt;br/&gt;
    +		producerConfig.setAggregationMaxCount(PropertiesUtil.getLong(configProps,&lt;br/&gt;
    +				ProducerConfigConstants.AGGREGATION_MAX_COUNT, producerConfig.getAggregationMaxCount(), LOG));&lt;br/&gt;
    +&lt;br/&gt;
    +		producerConfig.setCollectionMaxCount(PropertiesUtil.getLong(configProps,&lt;br/&gt;
    +				ProducerConfigConstants.COLLECTION_MAX_COUNT, producerConfig.getCollectionMaxCount(), LOG));&lt;br/&gt;
    +&lt;br/&gt;
    +		producerConfig.setMaxConnections(PropertiesUtil.getLong(configProps,&lt;br/&gt;
    +				ProducerConfigConstants.MAX_CONNECTIONS, producerConfig.getMaxConnections(), LOG));&lt;br/&gt;
    +&lt;br/&gt;
    +		producerConfig.setRateLimit(PropertiesUtil.getLong(configProps,&lt;br/&gt;
    +			ProducerConfigConstants.RATE_LIMIT, producerConfig.getRateLimit(), LOG));&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Starting from this line, the indentation is not consistent.&lt;/p&gt;</comment>
                            <comment id="16116109" author="githubbot" created="Mon, 7 Aug 2017 06:11:39 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r131578056&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r131578056&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,30 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/** Maximum number of items to pack into an PutRecords request. **/&lt;br/&gt;
    +	/** Maximum number of KPL user records to store in a single Kinesis Streams record (an aggregated record). */&lt;br/&gt;
    +	public static final String AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    +	/** Maximum number of Kinesis Streams records to pack into an PutRecords request. */&lt;br/&gt;
     	public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/** Maximum number of items to pack into an aggregated record. **/&lt;/li&gt;
	&lt;li&gt;public static final String AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +	/** Maximum number of connections to open to the backend. HTTP requests are&lt;br/&gt;
    +	 * sent in parallel over multiple connections */
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Style consistency: missing period at the end.&lt;/p&gt;</comment>
                            <comment id="16116112" author="githubbot" created="Mon, 7 Aug 2017 06:13:01 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    One other thing:&lt;br/&gt;
    Also need to add validation for these new configurations.&lt;br/&gt;
    That should be placed in `KinesisConfigUtil.validateProducerConfigs`&lt;/p&gt;</comment>
                            <comment id="16117350" author="githubbot" created="Mon, 7 Aug 2017 21:34:30 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @tzulitai ,&lt;br/&gt;
        Let&apos;s reach a consensus before I do any more works.&lt;/p&gt;

&lt;p&gt;         1) I didn&apos;t add all KPL&apos;s configs in this PR. I only added some configs that I think might be useful to Flink users. The full list of KPL configs is &lt;span class=&quot;error&quot;&gt;&amp;#91;here&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/awslabs/amazon-kinesis-producer/blob/master/java/amazon-kinesis-producer-sample/default_config.properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/awslabs/amazon-kinesis-producer/blob/master/java/amazon-kinesis-producer-sample/default_config.properties&lt;/a&gt;). I don&apos;t think exposing all KPL configs is a good idea. What do you think?&lt;br/&gt;
          2) I absolutely agree that there&apos;d better be a consistent way to keep configs up-tp-date. But there probably isn&apos;t as long as Flink wraps around KPL, because right now we have to always set KPL configs in `FlinkKinesisProducer#open()` with `setXxxx()`&lt;br/&gt;
          3) If Flink uses &lt;a href=&quot;#fromProperties(Properties props)`&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;`KinesisProducerConfiguration#fromProperties(Properties props)`&lt;/a&gt;(&lt;a href=&quot;https://github.com/awslabs/amazon-kinesis-producer/blob/master/java/amazon-kinesis-producer/src/main/java/com/amazonaws/services/kinesis/producer/KinesisProducerConfiguration.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/awslabs/amazon-kinesis-producer/blob/master/java/amazon-kinesis-producer/src/main/java/com/amazonaws/services/kinesis/producer/KinesisProducerConfiguration.java&lt;/a&gt;) to init `KinesisProducerConfiguration`, users can always pass in the configs as k-v string pairs. But, it requires changing all config values in `ProducerConfigConstants`, e.g. from `aws.producer.aggregationMaxCount` to `AggregationMaxCount`, because KPL library itself doesn&apos;t provide a util class with key names as string. How much would the impact be to rename those config keys? &lt;/p&gt;

&lt;p&gt;    Bowen&lt;/p&gt;</comment>
                            <comment id="16117836" author="githubbot" created="Tue, 8 Aug 2017 04:30:19 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @bowenli86 the third option actually strikes me as an overall good solution, I didn&apos;t know that was possible.&lt;/p&gt;

&lt;p&gt;    I think it would make sense to deprecate the previous configuration keys in favor of the `fromProperties` solution. Ideally, it would be better if we can simply let the user freely configure the internal Kinesis client depending on whatever keys are available from AWS.&lt;/p&gt;

&lt;p&gt;    It also shouldn&apos;t be too much of a hassle to adapt the deprecated keys such that if the user still used them, we simply replace them with the new renamed keys, and in open() always use `KinesisProducerConfiguration#fromProperties(Properties props)`.&lt;/p&gt;

&lt;p&gt;    What do you think?&lt;/p&gt;</comment>
                            <comment id="16117838" author="githubbot" created="Tue, 8 Aug 2017 04:31:33 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Also cc&apos;ing @aljoscha to this PR, since we also had a bit of offline discussion on this configuration gap issue.&lt;/p&gt;</comment>
                            <comment id="16117887" author="githubbot" created="Tue, 8 Aug 2017 05:40:04 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m in favor of the 3rd option. In that way, we don&apos;t need to 1) duplicate all KPL keys and documentation to flink-kinesis-connector and 2) always keep an eye on KPL configs when upgrading its version.&lt;/p&gt;

&lt;p&gt;    Since you point out that migrate existing keys is not hard and harmful, I&apos;m leaning even more towards it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Do we all agree on the approach? @tzulitai @aljoscha &lt;/p&gt;
</comment>
                            <comment id="16118032" author="githubbot" created="Tue, 8 Aug 2017 08:22:48 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think option 3) is the way to go. For backwards compatibility we have to manually convert those keys that we already support (via `ProducerConfigConstants`) but luckily they&apos;re not that many.&lt;/p&gt;</comment>
                            <comment id="16118084" author="githubbot" created="Tue, 8 Aug 2017 09:07:12 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to option 3. Looks like we all agree on that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; @bowenli86 please feel free to continue with that.&lt;/p&gt;</comment>
                            <comment id="16119163" author="githubbot" created="Tue, 8 Aug 2017 23:07:28 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Trying to understand the keys. Are keys like &quot;aws.producer.collectionMaxCount&quot; specified in flink-conf.yaml?&lt;/p&gt;
</comment>
                            <comment id="16119575" author="githubbot" created="Wed, 9 Aug 2017 08:33:27 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @bowenli86 no, they&apos;re provided via a `Properties` when creating a `FlinkKinesisProducer`&lt;/p&gt;</comment>
                            <comment id="16120319" author="githubbot" created="Wed, 9 Aug 2017 17:33:33 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai @aljoscha  Let me know if this PR looks good. Thanks!&lt;/p&gt;</comment>
                            <comment id="16121131" author="githubbot" created="Thu, 10 Aug 2017 06:24:06 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132372133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132372133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/FlinkKinesisProducer.java &amp;#8212;&lt;br/&gt;
    @@ -165,17 +167,10 @@ public void setCustomPartitioner(KinesisPartitioner&amp;lt;OUT&amp;gt; partitioner) {&lt;br/&gt;
     	public void open(Configuration parameters) throws Exception {&lt;br/&gt;
     		super.open(parameters);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;KinesisProducerConfiguration producerConfig = new KinesisProducerConfiguration();&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;producerConfig.setRegion(configProps.getProperty(ProducerConfigConstants.AWS_REGION));&lt;br/&gt;
     		producerConfig.setCredentialsProvider(AWSUtil.getCredentialsProvider(configProps));&lt;/li&gt;
	&lt;li&gt;if (configProps.containsKey(ProducerConfigConstants.COLLECTION_MAX_COUNT)) 
{
    -			producerConfig.setCollectionMaxCount(PropertiesUtil.getLong(configProps,
    -					ProducerConfigConstants.COLLECTION_MAX_COUNT, producerConfig.getCollectionMaxCount(), LOG));
    -		}&lt;/li&gt;
	&lt;li&gt;if (configProps.containsKey(ProducerConfigConstants.AGGREGATION_MAX_COUNT)) {&lt;/li&gt;
	&lt;li&gt;producerConfig.setAggregationMaxCount(PropertiesUtil.getLong(configProps,&lt;/li&gt;
	&lt;li&gt;ProducerConfigConstants.AGGREGATION_MAX_COUNT, producerConfig.getAggregationMaxCount(), LOG));&lt;br/&gt;
    +		// Override KPL default value if it&apos;s not specified by user&lt;br/&gt;
    +		if (!configProps.containsKey(ProducerConfigConstants.RATE_LIMIT)) {&lt;br/&gt;
    +			producerConfig.setRateLimit(ProducerConfigConstants.DEFAULT_RATE_LIMIT);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Why do we need to explicitly override the default `RATE_LIMIT`?&lt;/p&gt;</comment>
                            <comment id="16121134" author="githubbot" created="Thu, 10 Aug 2017 06:25:08 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132372254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132372254&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Add `@deprecated` annotation&lt;/p&gt;</comment>
                            <comment id="16121135" author="githubbot" created="Thu, 10 Aug 2017 06:25:18 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132372291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132372291&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    + 	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Add `@deprecated` annotation&lt;/p&gt;</comment>
                            <comment id="16121136" author="githubbot" created="Thu, 10 Aug 2017 06:26:26 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132372454&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132372454&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    + 	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
     	/** Maximum number of items to pack into an PutRecords request. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +	public static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	/** Maximum number of items to pack into an aggregated record. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +	public static final String AGGREGATION_MAX_COUNT = &quot;AggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    +	/** Limits the maximum allowed put rate for a shard, as a percentage of the backend limits.&lt;br/&gt;
    +	 * The default value is set as 100% in Flink. KPL&apos;s default value is 150% but it throws RateLimitExceededException&lt;br/&gt;
    +	 * too frequently and breaks Flink sink.
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    We might need to document this, if we&apos;re not following the KPL defaults.&lt;/p&gt;</comment>
                            <comment id="16121137" author="githubbot" created="Thu, 10 Aug 2017 06:27:14 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132372556&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132372556&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    + 	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
     	/** Maximum number of items to pack into an PutRecords request. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +	public static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	/** Maximum number of items to pack into an aggregated record. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +	public static final String AGGREGATION_MAX_COUNT = &quot;AggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    +	/** Limits the maximum allowed put rate for a shard, as a percentage of the backend limits.&lt;br/&gt;
    +	 * The default value is set as 100% in Flink. KPL&apos;s default value is 150% but it throws RateLimitExceededException&lt;br/&gt;
    +	 * too frequently and breaks Flink sink.&lt;br/&gt;
    +	 **/&lt;br/&gt;
    +	public static final String RATE_LIMIT = &quot;RateLimit&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    +
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    nit: unneccesary 2 empty lines&lt;/p&gt;</comment>
                            <comment id="16121139" author="githubbot" created="Thu, 10 Aug 2017 06:30:36 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132373023&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132373023&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    + 	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
     	/** Maximum number of items to pack into an PutRecords request. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +	public static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Do we really want to expose these config keys now?&lt;br/&gt;
    AFAIK, if the user wants to tweak these, with this change they should just simply refer to the KPL docs to see what keys are available. Explicitly exposing partially some keys in Flink but not others is a bit weird, IMO.&lt;/p&gt;</comment>
                            <comment id="16121142" author="githubbot" created="Thu, 10 Aug 2017 06:31:47 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132373167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132373167&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    + 	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
     	/** Maximum number of items to pack into an PutRecords request. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +	public static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think what we should do is just deprecate `COLLECTION_MAX_COUNT` and `AGGREGATION_MAX_COUNT`, and in the Javadoc direct the user to directly refer to the KPL config keys.&lt;/p&gt;</comment>
                            <comment id="16121143" author="githubbot" created="Thu, 10 Aug 2017 06:33:53 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132373446&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132373446&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/FlinkKinesisProducer.java &amp;#8212;&lt;br/&gt;
    @@ -165,17 +167,10 @@ public void setCustomPartitioner(KinesisPartitioner&amp;lt;OUT&amp;gt; partitioner) {&lt;br/&gt;
     	public void open(Configuration parameters) throws Exception {&lt;br/&gt;
     		super.open(parameters);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;KinesisProducerConfiguration producerConfig = new KinesisProducerConfiguration();&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;producerConfig.setRegion(configProps.getProperty(ProducerConfigConstants.AWS_REGION));&lt;br/&gt;
     		producerConfig.setCredentialsProvider(AWSUtil.getCredentialsProvider(configProps));&lt;/li&gt;
	&lt;li&gt;if (configProps.containsKey(ProducerConfigConstants.COLLECTION_MAX_COUNT)) 
{
    -			producerConfig.setCollectionMaxCount(PropertiesUtil.getLong(configProps,
    -					ProducerConfigConstants.COLLECTION_MAX_COUNT, producerConfig.getCollectionMaxCount(), LOG));
    -		}&lt;/li&gt;
	&lt;li&gt;if (configProps.containsKey(ProducerConfigConstants.AGGREGATION_MAX_COUNT)) {&lt;/li&gt;
	&lt;li&gt;producerConfig.setAggregationMaxCount(PropertiesUtil.getLong(configProps,&lt;/li&gt;
	&lt;li&gt;ProducerConfigConstants.AGGREGATION_MAX_COUNT, producerConfig.getAggregationMaxCount(), LOG));&lt;br/&gt;
    +		// Override KPL default value if it&apos;s not specified by user&lt;br/&gt;
    +		if (!configProps.containsKey(ProducerConfigConstants.RATE_LIMIT)) {&lt;br/&gt;
    +			producerConfig.setRateLimit(ProducerConfigConstants.DEFAULT_RATE_LIMIT);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Ah I see why now, just read your Javadocs &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
    Should we move this override to `KinesisConfigUtil.validateProducerConfiguration`, where the producer config is built?&lt;/p&gt;</comment>
                            <comment id="16121144" author="githubbot" created="Thu, 10 Aug 2017 06:35:03 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks! Overall I think the changes are good.&lt;br/&gt;
    I&apos;ve left some minor cosmetic-related comments, and some more involved comments on how we perform the deprecation.&lt;/p&gt;</comment>
                            <comment id="16121147" author="githubbot" created="Thu, 10 Aug 2017 06:35:31 +0000"  >&lt;p&gt;Github user bowenli86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132373651&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132373651&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    + 	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
     	/** Maximum number of items to pack into an PutRecords request. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +	public static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Are you ok with using plain string &quot;CollectionMaxCount&quot; and &quot;AllocationMaxCount&quot; in code directly?&lt;/p&gt;

&lt;p&gt;    I actually use those strings directly in code at the beginning. Then change to these static final definition because I worried it might not conform to checkstyle as &quot;magic strings&quot;, similar to &quot;magic number&quot;. &lt;/p&gt;</comment>
                            <comment id="16121148" author="githubbot" created="Thu, 10 Aug 2017 06:37:25 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132373930&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132373930&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    + 	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
     	/** Maximum number of items to pack into an PutRecords request. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +	public static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Hmmm, maybe have package private static Strings for &quot;CollectionMaxCount&quot; and &quot;AllocationMaxCount&quot;, with comments on what they are used for?&lt;/p&gt;</comment>
                            <comment id="16121151" author="githubbot" created="Thu, 10 Aug 2017 06:39:46 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132374210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132374210&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    + 	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
     	/** Maximum number of items to pack into an PutRecords request. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +	public static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Ideally, we should deprecate `ProducerConfigConstants` and remove the class in the long run, since we rely solely on `Properties` parsing now and have no &quot;Flink-specific&quot; key.&lt;/p&gt;</comment>
                            <comment id="16121157" author="githubbot" created="Thu, 10 Aug 2017 06:46:16 +0000"  >&lt;p&gt;Github user bowenli86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132375079&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132375079&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    + 	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
     	/** Maximum number of items to pack into an PutRecords request. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +	public static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    `ProducerConfigConstants` and `FlinkKinesisProducer` don&apos;t live in the same package. Let me use plain strings and see how it looks like.&lt;/p&gt;

&lt;p&gt;    Besides, why don&apos;t we push a step forward now? How about I move RATE_LIMIT to `FlinkKinesisProducer`, and deprecate `ProducerConfigConstants`?&lt;/p&gt;</comment>
                            <comment id="16121160" author="githubbot" created="Thu, 10 Aug 2017 06:48:29 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132375356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132375356&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    + 	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
     	/** Maximum number of items to pack into an PutRecords request. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +	public static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Sounds like a good idea.&lt;br/&gt;
    It seems like that `RATE_LIMIT`, `CollectionMaxCount`, `AllocationMaxCount` can be moved to `KinesisConfigUtils` as private static final Strings, though, as that should be the only place where they are used.&lt;/p&gt;</comment>
                            <comment id="16121161" author="githubbot" created="Thu, 10 Aug 2017 06:53:58 +0000"  >&lt;p&gt;Github user bowenli86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132376112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132376112&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/FlinkKinesisProducer.java &amp;#8212;&lt;br/&gt;
    @@ -165,17 +167,10 @@ public void setCustomPartitioner(KinesisPartitioner&amp;lt;OUT&amp;gt; partitioner) {&lt;br/&gt;
     	public void open(Configuration parameters) throws Exception {&lt;br/&gt;
     		super.open(parameters);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;KinesisProducerConfiguration producerConfig = new KinesisProducerConfiguration();&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;producerConfig.setRegion(configProps.getProperty(ProducerConfigConstants.AWS_REGION));&lt;br/&gt;
     		producerConfig.setCredentialsProvider(AWSUtil.getCredentialsProvider(configProps));&lt;/li&gt;
	&lt;li&gt;if (configProps.containsKey(ProducerConfigConstants.COLLECTION_MAX_COUNT)) 
{
    -			producerConfig.setCollectionMaxCount(PropertiesUtil.getLong(configProps,
    -					ProducerConfigConstants.COLLECTION_MAX_COUNT, producerConfig.getCollectionMaxCount(), LOG));
    -		}&lt;/li&gt;
	&lt;li&gt;if (configProps.containsKey(ProducerConfigConstants.AGGREGATION_MAX_COUNT)) {&lt;/li&gt;
	&lt;li&gt;producerConfig.setAggregationMaxCount(PropertiesUtil.getLong(configProps,&lt;/li&gt;
	&lt;li&gt;ProducerConfigConstants.AGGREGATION_MAX_COUNT, producerConfig.getAggregationMaxCount(), LOG));&lt;br/&gt;
    +		// Override KPL default value if it&apos;s not specified by user&lt;br/&gt;
    +		if (!configProps.containsKey(ProducerConfigConstants.RATE_LIMIT)) {&lt;br/&gt;
    +			producerConfig.setRateLimit(ProducerConfigConstants.DEFAULT_RATE_LIMIT);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Yeah, either way. This is not really a validation, but a replacement.&lt;/p&gt;</comment>
                            <comment id="16121171" author="githubbot" created="Thu, 10 Aug 2017 07:00:40 +0000"  >&lt;p&gt;Github user bowenli86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132376988&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132376988&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -24,10 +24,28 @@&lt;br/&gt;
      */&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;

&lt;p&gt;    +	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    + 	/** Deprecated key. **/&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
     	/** Maximum number of items to pack into an PutRecords request. **/&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    +	public static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    `CollectionMaxCount` and `AllocationMaxCount` will be `protected` since there&apos;s a unit test using them.&lt;/p&gt;</comment>
                            <comment id="16123030" author="githubbot" created="Fri, 11 Aug 2017 08:28:18 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132636379&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132636379&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -22,12 +22,14 @@&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Optional producer specific configuration keys for 
{@link FlinkKinesisProducer}
&lt;p&gt;.&lt;br/&gt;
      */&lt;br/&gt;
    +@Deprecated&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/** Maximum number of items to pack into an PutRecords request. **/&lt;/li&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;/** Maximum number of items to pack into an aggregated record. **/&lt;/li&gt;
	&lt;li&gt;public static final String AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +	/** Deprecated key. **/&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    + 	/** Deprecated key. **/&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	public static final String DEPRECATED_AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This cannot be renamed, as it completely breaks user code that uses `ProducerConfigConstants. AGGREGATION_MAX_COUNT`.&lt;/p&gt;</comment>
                            <comment id="16123031" author="githubbot" created="Fri, 11 Aug 2017 08:28:18 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132636335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132636335&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -22,12 +22,14 @@&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Optional producer specific configuration keys for 
{@link FlinkKinesisProducer}
&lt;p&gt;.&lt;br/&gt;
      */&lt;br/&gt;
    +@Deprecated&lt;br/&gt;
     public class ProducerConfigConstants extends AWSConfigConstants {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/** Maximum number of items to pack into an PutRecords request. **/&lt;/li&gt;
	&lt;li&gt;public static final String COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;/** Maximum number of items to pack into an aggregated record. **/&lt;/li&gt;
	&lt;li&gt;public static final String AGGREGATION_MAX_COUNT = &quot;aws.producer.aggregationMaxCount&quot;;&lt;br/&gt;
    +	/** Deprecated key. **/&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	public static final String DEPRECATED_COLLECTION_MAX_COUNT = &quot;aws.producer.collectionMaxCount&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This cannot be renamed, as it completely breaks user code that uses `ProducerConfigConstants. COLLECTION_MAX_COUNT`.&lt;/p&gt;</comment>
                            <comment id="16123032" author="githubbot" created="Fri, 11 Aug 2017 08:28:18 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132636498&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132636498&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/util/KinesisConfigUtil.java &amp;#8212;&lt;br/&gt;
    @@ -38,6 +39,23 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Utilities for Flink Kinesis connector configuration.&lt;br/&gt;
      */&lt;br/&gt;
     public class KinesisConfigUtil {&lt;br/&gt;
    +	/** Maximum number of items to pack into an PutRecords request. **/
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    nit: Add empty line before comment block.&lt;/p&gt;</comment>
                            <comment id="16123033" author="githubbot" created="Fri, 11 Aug 2017 08:28:18 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132636582&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132636582&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/util/KinesisConfigUtil.java &amp;#8212;&lt;br/&gt;
    @@ -38,6 +39,23 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Utilities for Flink Kinesis connector configuration.&lt;br/&gt;
      */&lt;br/&gt;
     public class KinesisConfigUtil {&lt;br/&gt;
    +	/** Maximum number of items to pack into an PutRecords request. **/&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	protected static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This doesn&apos;t require deprecation, as it isn&apos;t exposed to the user.&lt;/p&gt;</comment>
                            <comment id="16123034" author="githubbot" created="Fri, 11 Aug 2017 08:28:18 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132636613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132636613&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/util/KinesisConfigUtil.java &amp;#8212;&lt;br/&gt;
    @@ -38,6 +39,23 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Utilities for Flink Kinesis connector configuration.&lt;br/&gt;
      */&lt;br/&gt;
     public class KinesisConfigUtil {&lt;br/&gt;
    +	/** Maximum number of items to pack into an PutRecords request. **/&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	protected static final String COLLECTION_MAX_COUNT = &quot;CollectionMaxCount&quot;;&lt;br/&gt;
    +&lt;br/&gt;
    +	/** Maximum number of items to pack into an aggregated record. **/&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	protected static final String AGGREGATION_MAX_COUNT = &quot;AggregationMaxCount&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Same here; deprecation not required.&lt;/p&gt;</comment>
                            <comment id="16124821" author="githubbot" created="Sun, 13 Aug 2017 05:47:09 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai Let me know what you think about this PR now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16125252" author="githubbot" created="Mon, 14 Aug 2017 05:09:20 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    hmmm... I was deploying our Flink job with this change. The Flink job failed to start, and log reports:&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    The implementation of the RichSinkFunction is not serializable. The object probably contains or references non serializable fields.&lt;br/&gt;
    	org.apache.flink.api.java.ClosureCleaner.clean(ClosureCleaner.java:100)&lt;br/&gt;
    	org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.clean(StreamExecutionEnvironment.java:1548)&lt;br/&gt;
    	org.apache.flink.streaming.api.datastream.DataStream.clean(DataStream.java:183)&lt;br/&gt;
    	org.apache.flink.streaming.api.datastream.DataStream.addSink(DataStream.java:1131)&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    of which the implementation of the RichSinkFunction is FlinkKinesisProducer. The only field I add to FlinkKinesisProducer is KinesisProducerConfiguration. So I made KinesisProducerConfiguration `transient`, and ran the Flink job, the job still fails. &lt;/p&gt;

&lt;p&gt;    Thus I doubted if FlinkKinesisProducer is already not serializable currently. To verify that, I created a test for the current FlinkKinesisProducer in master which doesn&apos;t have my PR change. Unit test is:&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    @Test&lt;br/&gt;
    	public void testProducerSerializable() {&lt;br/&gt;
    		Properties testConfig = new Properties();&lt;br/&gt;
    		testConfig.setProperty(AWSConfigConstants.AWS_ACCESS_KEY_ID, &quot;accessKey&quot;);&lt;br/&gt;
    		testConfig.setProperty(AWSConfigConstants.AWS_SECRET_ACCESS_KEY, &quot;secretKey&quot;);&lt;br/&gt;
    		testConfig.setProperty(AWSConfigConstants.AWS_REGION, &quot;us-east-1&quot;);&lt;br/&gt;
    		testConfig.setProperty(AWSConfigConstants.AWS_CREDENTIALS_PROVIDER, &quot;BASIC&quot;);&lt;br/&gt;
    		KinesisConfigUtil.validateAwsConfiguration(testConfig);&lt;/p&gt;

&lt;p&gt;    		FlinkKinesisProducer producer = new FlinkKinesisProducer(new KinesisSerializationSchema() {&lt;br/&gt;
    			@Override&lt;br/&gt;
    			public ByteBuffer serialize(Object element) &lt;/p&gt;
{
    				return null;
    			}&lt;br/&gt;
    &lt;br/&gt;
    			@Override&lt;br/&gt;
    			public String getTargetStream(Object element) {    				return null;    			}
&lt;p&gt;    		}, testConfig);&lt;/p&gt;

&lt;p&gt;    		ClosureCleaner.ensureSerializable(producer);&lt;br/&gt;
    	}&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    And it fails. Thus, I think something in FlinkKinesisProducer might not serializable, and already breaks FlinkKinesisProducer. &lt;/p&gt;

&lt;p&gt;    @tzulitai @aljoscha  Any insights on this?&lt;/p&gt;</comment>
                            <comment id="16125262" author="githubbot" created="Mon, 14 Aug 2017 05:34:55 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @bowenli86 I think the test you posted above is failing because the provided `KinesisSerializationSchema` is not serializable. It is an anonymous class, which would contain a reference to the enclosing (which I guess is the test class, hence not serializable.)&lt;/p&gt;

&lt;p&gt;    To make it work you either need to make the test class serializable, or define a static `KinesisSerializationSchema` subclass instead of using an anonymous class.&lt;/p&gt;</comment>
                            <comment id="16125264" author="githubbot" created="Mon, 14 Aug 2017 05:37:00 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @bowenli86 on the other hand, in the constructors of `FlinkKinesisProducer`, we probably should add eager safe checks on the serializability of the provided `KinesisSerializationSchema` and have good error messages in case it isn&apos;t serializable. I&apos;ll open a separate JIRA / PR for that.&lt;/p&gt;</comment>
                            <comment id="16125270" author="githubbot" created="Mon, 14 Aug 2017 05:55:36 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai Thanks Gordan for the quick response! You are right, I set the schema in unit test to be static and it passes.&lt;/p&gt;

&lt;p&gt;    For my Flink job. When I build it against Flink 1.3.0, it can run well on EMR. When I build it against Flink 1.3.2, it fails to run. Has anything related to serialization changed since Flink 1.3.0?&lt;/p&gt;</comment>
                            <comment id="16125272" author="githubbot" created="Mon, 14 Aug 2017 05:57:35 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @bowenli86 what is it failing on? AFAIK, the only serialization changes in 1.3.2 compared to 1.3.0 are serialization of some specific `TypeSerializer`s.&lt;/p&gt;</comment>
                            <comment id="16125280" author="githubbot" created="Mon, 14 Aug 2017 06:07:30 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai it&apos;s failing on &lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    The implementation of the RichSinkFunction is not serializable. The object probably contains or references non serializable fields.&lt;br/&gt;
    	org.apache.flink.api.java.ClosureCleaner.clean(ClosureCleaner.java:100)&lt;br/&gt;
    	org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.clean(StreamExecutionEnvironment.java:1548)&lt;br/&gt;
    	org.apache.flink.streaming.api.datastream.DataStream.clean(DataStream.java:183)&lt;br/&gt;
    	org.apache.flink.streaming.api.datastream.DataStream.addSink(DataStream.java:1131)&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    FYI, I merged this PR into my 1.3.2 source code.&lt;/p&gt;</comment>
                            <comment id="16125283" author="githubbot" created="Mon, 14 Aug 2017 06:12:41 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132879203&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132879203&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/FlinkKinesisProducer.java &amp;#8212;&lt;br/&gt;
    @@ -115,13 +116,13 @@ public String getTargetStream(OUT element) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;This is a constructor supporting 
{@see KinesisSerializationSchema}
&lt;p&gt;.&lt;br/&gt;
     	 *&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@param schema Kinesis serialization schema for the data type&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @param configProps The properties used to configure AWS credentials and AWS region&lt;br/&gt;
    +	 * @param configProps The properties used to configure KinesisProducer, including AWS credentials and AWS region&lt;br/&gt;
     	 */&lt;br/&gt;
     	public FlinkKinesisProducer(KinesisSerializationSchema&amp;lt;OUT&amp;gt; schema, Properties configProps) {&lt;/li&gt;
	&lt;li&gt;this.configProps = checkNotNull(configProps, &quot;configProps can not be null&quot;);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;// check the configuration properties for any conflicting settings&lt;/li&gt;
	&lt;li&gt;KinesisConfigUtil.validateProducerConfiguration(this.configProps);&lt;br/&gt;
    +		checkNotNull(configProps, &quot;configProps can not be null&quot;);&lt;br/&gt;
    +		this.configProps = KinesisConfigUtil.replaceDeprecatedProducerKeys(configProps);&lt;br/&gt;
    +		// check the configuration properties for any invalid settings&lt;br/&gt;
    +		this.producerConfig = KinesisConfigUtil.validateProducerConfiguration(configProps);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    For non-serializable fields that needs to be `transient`, we should only initialize them in `open`.&lt;/p&gt;</comment>
                            <comment id="16125284" author="githubbot" created="Mon, 14 Aug 2017 06:12:41 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132879261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132879261&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/FlinkKinesisProducer.java &amp;#8212;&lt;br/&gt;
    @@ -57,6 +55,9 @@&lt;br/&gt;
     	/** Properties to parametrize settings such as AWS service region, access key etc. */&lt;br/&gt;
     	private final Properties configProps;&lt;/p&gt;

&lt;p&gt;    +	/** Configuration for KinesisProducer. */&lt;br/&gt;
    +	private final KinesisProducerConfiguration producerConfig;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    On second thought: do we actually really need to have a field for this?&lt;br/&gt;
    Or can we just instantiate in in the method (it doesn&apos;t seem to be used across different methods)?&lt;/p&gt;</comment>
                            <comment id="16125285" author="githubbot" created="Mon, 14 Aug 2017 06:12:41 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132879159&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132879159&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/FlinkKinesisProducer.java &amp;#8212;&lt;br/&gt;
    @@ -57,6 +55,9 @@&lt;br/&gt;
     	/** Properties to parametrize settings such as AWS service region, access key etc. */&lt;br/&gt;
     	private final Properties configProps;&lt;/p&gt;

&lt;p&gt;    +	/** Configuration for KinesisProducer. */&lt;br/&gt;
    +	private final KinesisProducerConfiguration producerConfig;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    `KinesisProducerConfiguration` isn&apos;t serializable. We need to make it `transient`.&lt;/p&gt;</comment>
                            <comment id="16125286" author="githubbot" created="Mon, 14 Aug 2017 06:13:46 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @bowenli86 I made some comments on the serializability of the `KinesisProducerConfiguration`. That isn&apos;t serializable. Perhaps that is what is causing the failure for you. I&apos;m not really sure why it isn&apos;t failing for 1.3.0, though ..&lt;/p&gt;</comment>
                            <comment id="16125289" author="githubbot" created="Mon, 14 Aug 2017 06:16:40 +0000"  >&lt;p&gt;Github user bowenli86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r132879596&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r132879596&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/FlinkKinesisProducer.java &amp;#8212;&lt;br/&gt;
    @@ -57,6 +55,9 @@&lt;br/&gt;
     	/** Properties to parametrize settings such as AWS service region, access key etc. */&lt;br/&gt;
     	private final Properties configProps;&lt;/p&gt;

&lt;p&gt;    +	/** Configuration for KinesisProducer. */&lt;br/&gt;
    +	private final KinesisProducerConfiguration producerConfig;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    agree. I&apos;m moving it to `open()`&lt;/p&gt;</comment>
                            <comment id="16126812" author="githubbot" created="Tue, 15 Aug 2017 05:21:06 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM! I&apos;ll rebase this on #4537, and will merge as soon as Travis gives green.&lt;/p&gt;</comment>
                            <comment id="16126820" author="githubbot" created="Tue, 15 Aug 2017 05:32:55 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r133119309&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r133119309&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -20,14 +20,24 @@&lt;br/&gt;
     import org.apache.flink.streaming.connectors.kinesis.FlinkKinesisProducer;&lt;/p&gt;

&lt;p&gt;     /**&lt;br/&gt;
    + * @deprecated&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    @bowenli86 one thing to mention:&lt;br/&gt;
    We should always try to have good Javadoc for why something is deprecated. Sorry but I overlooked this on my reviewing. I&apos;ll address this myself this time while merging.&lt;/p&gt;</comment>
                            <comment id="16126841" author="githubbot" created="Tue, 15 Aug 2017 06:03:28 +0000"  >&lt;p&gt;Github user bowenli86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473#discussion_r133121728&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473#discussion_r133121728&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/src/main/java/org/apache/flink/streaming/connectors/kinesis/config/ProducerConfigConstants.java &amp;#8212;&lt;br/&gt;
    @@ -20,14 +20,24 @@&lt;br/&gt;
     import org.apache.flink.streaming.connectors.kinesis.FlinkKinesisProducer;&lt;/p&gt;

&lt;p&gt;     /**&lt;br/&gt;
    + * @deprecated&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    @tzulitai  Thanks for the reminder!&lt;/p&gt;</comment>
                            <comment id="16129016" author="githubbot" created="Wed, 16 Aug 2017 16:14:49 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai done!&lt;/p&gt;</comment>
                            <comment id="16136167" author="githubbot" created="Tue, 22 Aug 2017 02:20:35 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai any more feedbacks? We have a ticket on my company for this task, and I&apos;d like to mark it as finished if possible &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16144796" author="githubbot" created="Tue, 29 Aug 2017 06:06:17 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    can anyone from data artisan take a look at this PR please?&lt;/p&gt;</comment>
                            <comment id="16156424" author="githubbot" created="Thu, 7 Sep 2017 04:13:13 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai or other Flink committers, can you please merge this so I can submit more PRs depend on this? Thanks!&lt;/p&gt;</comment>
                            <comment id="16156439" author="githubbot" created="Thu, 7 Sep 2017 04:31:08 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @bowenli86, sorry about this. I had the commit ready to merge but was waiting for another test PR to be merged first. Merging this now!&lt;/p&gt;</comment>
                            <comment id="16156468" author="githubbot" created="Thu, 7 Sep 2017 04:55:59 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai Thank you, Gordon!&lt;/p&gt;</comment>
                            <comment id="16156470" author="githubbot" created="Thu, 7 Sep 2017 04:58:16 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    No problem! And really sorry for the wait.&lt;br/&gt;
    I&apos;m waiting for a Travis run before merging: &lt;a href=&quot;https://travis-ci.org/tzulitai/flink/builds/272758087?utm_source=github_status&amp;amp;utm_medium=notification&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/tzulitai/flink/builds/272758087?utm_source=github_status&amp;amp;utm_medium=notification&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16156541" author="githubbot" created="Thu, 7 Sep 2017 06:20:55 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4473&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16156546" author="tzulitai" created="Thu, 7 Sep 2017 06:24:12 +0000"  >&lt;p&gt;Merged to &lt;tt&gt;master&lt;/tt&gt; via 59eab45458b3b1637ccbc5dafd326cc84ffb9655.&lt;br/&gt;
Thanks a lot for your work &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phoenixjiangnan&quot; class=&quot;user-hover&quot; rel=&quot;phoenixjiangnan&quot;&gt;phoenixjiangnan&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16156548" author="tzulitai" created="Thu, 7 Sep 2017 06:24:48 +0000"  >&lt;p&gt;Since this includes deprecation, I will not merge it for &lt;tt&gt;1.3.2&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ieev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>