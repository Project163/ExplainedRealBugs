<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:46:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-18052] Elasticsearch7DynamicSinkITCase.testWritingDocumentsNoPrimaryKey fails with NPE</title>
                <link>https://issues.apache.org/jira/browse/FLINK-18052</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;CI: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2481&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=34f486e1-e1e4-5dd2-9c06-bfdd9b9c74a8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2481&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=34f486e1-e1e4-5dd2-9c06-bfdd9b9c74a8&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-05-30T22:32:52.3703325Z [INFO] Running org.apache.flink.streaming.connectors.elasticsearch.table.Elasticsearch7DynamicSinkITCase
2020-05-30T22:33:08.3791670Z [ERROR] Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 16.006 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.streaming.connectors.elasticsearch.table.Elasticsearch7DynamicSinkITCase
2020-05-30T22:33:08.3793500Z [ERROR] testWritingDocumentsNoPrimaryKey(org.apache.flink.streaming.connectors.elasticsearch.table.Elasticsearch7DynamicSinkITCase)  Time elapsed: 7.671 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
2020-05-30T22:33:08.3794313Z java.lang.ArrayIndexOutOfBoundsException: 0
2020-05-30T22:33:08.3794992Z 	at org.elasticsearch.search.SearchHits.getAt(SearchHits.java:157)
2020-05-30T22:33:08.3795921Z 	at org.apache.flink.streaming.connectors.elasticsearch.table.Elasticsearch7DynamicSinkITCase.testWritingDocumentsNoPrimaryKey(Elasticsearch7DynamicSinkITCase.java:226)
2020-05-30T22:33:08.3796778Z 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2020-05-30T22:33:08.3797675Z 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2020-05-30T22:33:08.3798442Z 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2020-05-30T22:33:08.3799083Z 	at java.lang.reflect.Method.invoke(Method.java:498)
2020-05-30T22:33:08.3799740Z 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
2020-05-30T22:33:08.3800506Z 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
2020-05-30T22:33:08.3801236Z 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
2020-05-30T22:33:08.3801938Z 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
2020-05-30T22:33:08.3802620Z 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13308777">FLINK-18052</key>
            <summary>Elasticsearch7DynamicSinkITCase.testWritingDocumentsNoPrimaryKey fails with NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Mon, 1 Jun 2020 18:48:20 +0000</created>
                <updated>Wed, 3 Jun 2020 07:21:36 +0000</updated>
                            <resolved>Wed, 3 Jun 2020 07:21:36 +0000</resolved>
                                    <version>1.11.0</version>
                                    <fixVersion>1.11.0</fixVersion>
                                    <component>Connectors / ElasticSearch</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17123387" author="jark" created="Tue, 2 Jun 2020 06:29:24 +0000"  >&lt;p&gt;Maybe we need to increase the timeout &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;? Currently the indexing timeout is 1s. &lt;/p&gt;</comment>
                            <comment id="17123396" author="dawidwys" created="Tue, 2 Jun 2020 06:48:24 +0000"  >&lt;p&gt;I think that&apos;s the only improvement I can think of.  Just as an explanation for the future. One can query the Elastichsearch with Search API only for the results that were indexed internally. That&apos;s why we need to poll the ES cluster. It&apos;s different in the GET API as it returns also documents that were not yet indexed. However for the GET API we need to know the id of the document. This failling test checks the case when there is no id and thus it does not use the GET API.&lt;/p&gt;

&lt;p&gt;I will open a PR to increase the timeout. If the test keep failling I&apos;d suggest dropping it and depending only on the unit tests.&lt;/p&gt;</comment>
                            <comment id="17123500" author="jark" created="Tue, 2 Jun 2020 08:24:58 +0000"  >&lt;p&gt;I would suggest to throw a timeout exception when timeout instead of to query es and get NPE. &lt;/p&gt;</comment>
                            <comment id="17124689" author="dawidwys" created="Wed, 3 Jun 2020 07:21:36 +0000"  >&lt;p&gt;Fixed:&lt;br/&gt;
master: 773ad7d0aa6b507c6d003bb554ee45566741cede&lt;br/&gt;
1.11: 00e348f699bb79f94a64c266c58163141af5274b&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fe80:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>