<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:58:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-22884] Select view columns fail when store metadata with hive</title>
                <link>https://issues.apache.org/jira/browse/FLINK-22884</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I am use hive for filnk metadata, so select view table will mismatch to hive table after create view, I founded is a bug in HiveCatalog.classs, all view table is default mark to hive table unexpected.&lt;/p&gt;

&lt;p&gt;after store in hive metadata, view table without &quot;is_generic&quot; or &quot;connector&quot; properties.&lt;/p&gt;

&lt;p&gt;bug is here:&lt;/p&gt;


&lt;p&gt; @VisibleForTesting&lt;br/&gt;
    public Table getHiveTable(ObjectPath tablePath) throws TableNotExistException {&lt;br/&gt;
        try {&lt;br/&gt;
            Table table = this.client.getTable(tablePath.getDatabaseName(), tablePath.getObjectName());&lt;br/&gt;
            boolean isHiveTable;&lt;br/&gt;
            if (table.getParameters().containsKey(&quot;is_generic&quot;)) &lt;/p&gt;
{
                isHiveTable = !Boolean.parseBoolean((String)table.getParameters().remove(&quot;is_generic&quot;));
            }
&lt;p&gt; else &lt;/p&gt;
{
                isHiveTable = !table.getParameters().containsKey(&quot;flink.&quot; + FactoryUtil.CONNECTOR.key()) &amp;amp;&amp;amp; !table.getParameters().containsKey(&quot;flink.connector.type&quot;);
            }

&lt;p&gt;            if (isHiveTable) &lt;/p&gt;
{
                table.getParameters().put(FactoryUtil.CONNECTOR.key(), &quot;hive&quot;);
            }

&lt;p&gt;            return table;&lt;br/&gt;
        } catch (NoSuchObjectException var4) &lt;/p&gt;
{
            throw new TableNotExistException(this.getName(), tablePath);
        }
&lt;p&gt; catch (TException var5) &lt;/p&gt;
{
            throw new CatalogException(String.format(&quot;Failed to get table %s from Hive metastore&quot;, tablePath.getFullName()), var5);
        }
&lt;p&gt;    }&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382267">FLINK-22884</key>
            <summary>Select view columns fail when store metadata with hive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lirui">Rui Li</assignee>
                                    <reporter username="ELLEX_SHEN">ELLEX_SHEN</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>stale-assigned</label>
                    </labels>
                <created>Sat, 5 Jun 2021 06:56:26 +0000</created>
                <updated>Wed, 14 Jul 2021 08:16:48 +0000</updated>
                            <resolved>Tue, 6 Jul 2021 04:01:53 +0000</resolved>
                                    <version>1.13.1</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.13.2</fixVersion>
                                    <component>Connectors / Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17358296" author="jark" created="Mon, 7 Jun 2021 02:11:58 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17358316" author="lirui" created="Mon, 7 Jun 2021 02:53:23 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ELLEX_SHEN&quot; class=&quot;user-hover&quot; rel=&quot;ELLEX_SHEN&quot;&gt;ELLEX_SHEN&lt;/a&gt; for reporting the issue. Let me know if you want to fix it.&lt;/p&gt;</comment>
                            <comment id="17358326" author="lirui" created="Mon, 7 Jun 2021 03:04:47 +0000"  >&lt;p&gt;I think we don&apos;t have to differentiate whether a view is generic or not, as a view can reference both generic and non-generic tables.&lt;/p&gt;</comment>
                            <comment id="17358492" author="ellex_shen" created="Mon, 7 Jun 2021 10:15:21 +0000"  >&lt;p&gt;Thanks for your reply.&lt;/p&gt;

&lt;p&gt;For example, create a new Kafka table and a new Kafka view. Once the view is selected, an error will be reported: &quot;sqlvalidatorexception: column xxx not found in any table&quot;, thinking that the view is mistakenly identified as a hive internal view. Therefore, I submitted the problem.&lt;/p&gt;

&lt;p&gt;So I can&apos;t use hive as flink metadata storage. How can I solve this problem?&lt;/p&gt;</comment>
                            <comment id="17358493" author="ellex_shen" created="Mon, 7 Jun 2021 10:17:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt; From the source code point of view, the current version after v1.13.0 has similar problems, but the version of v1.12.3 is normal, thank you.&lt;/p&gt;
</comment>
                            <comment id="17359756" author="ellex_shen" created="Wed, 9 Jun 2021 04:46:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; can you for help?&lt;/p&gt;</comment>
                            <comment id="17360524" author="lirui" created="Thu, 10 Jun 2021 03:50:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ELLEX_SHEN&quot; class=&quot;user-hover&quot; rel=&quot;ELLEX_SHEN&quot;&gt;ELLEX_SHEN&lt;/a&gt; Thanks for providing an example to reproduce the issue. I&apos;ll have a try and propose a fix.&lt;/p&gt;</comment>
                            <comment id="17360847" author="ellex_shen" created="Thu, 10 Jun 2021 12:30:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt; Thanks a lot.&lt;/p&gt;</comment>
                            <comment id="17373818" author="flink-jira-bot" created="Fri, 2 Jul 2021 22:39:41 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issue is assigned but has not received an update in 14 days, so it has been labeled &quot;stale-assigned&quot;.&lt;br/&gt;
If you are still working on the issue, please remove the label and add a comment updating the community on your progress.  If this issue is waiting on feedback, please consider this a reminder to the committer/reviewer. Flink is a very active project, and so we appreciate your patience.&lt;br/&gt;
If you are no longer working on the issue, please unassign yourself so someone else may work on it. If the &quot;warning_label&quot; label is not removed in 7 days, the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17375194" author="lirui" created="Tue, 6 Jul 2021 04:01:53 +0000"  >&lt;p&gt;Fixed in master: 0b686824c33ad976cefb588c5a272a09de4b23ca&lt;br/&gt;
Fixed in release-1.13: 28b09e575bd174685a15d93345d0f87a37d6f002&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0roog:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>