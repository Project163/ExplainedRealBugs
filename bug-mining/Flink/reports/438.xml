<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2232] StormWordCountLocalITCase fails</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2232</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/66936476&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/66936476&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;StormWordCountLocalITCase&amp;gt;StreamingProgramTestBase.testJobWithoutObjectReuse:109-&amp;gt;postSubmit:40-&amp;gt;TestBaseUtils.compareResultsByLinesInMemory:256-&amp;gt;TestBaseUtils.compareResultsByLinesInMemory:270 Different number of lines in expected and obtained result. expected:&amp;lt;801&amp;gt; but was:&amp;lt;0&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can we disable the test until this is fixed?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838085">FLINK-2232</key>
            <summary>StormWordCountLocalITCase fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mjsax">Matthias J. Sax</assignee>
                                    <reporter username="uce">Ufuk Celebi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jun 2015 08:12:16 +0000</created>
                <updated>Thu, 28 Feb 2019 10:46:09 +0000</updated>
                            <resolved>Thu, 25 Jun 2015 17:11:01 +0000</resolved>
                                    <version>0.10.0</version>
                                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14587677" author="mbalassi" created="Tue, 16 Jun 2015 08:34:01 +0000"  >&lt;p&gt;The root cause seems to be a connection lost to the jobmanager. &lt;/p&gt;

&lt;p&gt;org.apache.flink.runtime.client.JobExecutionException: Communication with JobManager failed: Lost connection to JobManager akka://flink/user/jobmanager&lt;br/&gt;
	at org.apache.flink.runtime.client.JobClient.submitJobAndWait(JobClient.java:168)&lt;br/&gt;
	at org.apache.flink.runtime.minicluster.FlinkMiniCluster.submitJobAndWait(FlinkMiniCluster.scala:205)&lt;br/&gt;
	at org.apache.flink.runtime.minicluster.FlinkMiniCluster.submitJobAndWait(FlinkMiniCluster.scala:195)&lt;br/&gt;
	at org.apache.flink.streaming.util.TestStreamEnvironment$1.run(TestStreamEnvironment.java:116)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; could look into it whether this is caused by the not so graceful cancellation that is currently in storm-compat?&lt;/p&gt;</comment>
                            <comment id="14587778" author="mjsax" created="Tue, 16 Jun 2015 09:58:39 +0000"  >&lt;p&gt;Hi, I guess, it is a &quot;timing problem&quot;. The driver program sleep for (I think 5 seconds) and shuts down the program afterwards. Locally, the actual work is done in less than a second, so I increased the waiting time to make sure to program completes the work. Maybe on travis, 5 seconds are not large enough (if travis workload is high) to get the work done, and thus the program is shut down before any result is written to the file... Increasing the sleeping time should work (however, there might still be some instability left &amp;#8211; like always if your test relies on timing). An increased sleeping time, increases testing time, too... But I guess, it&apos;s the only &quot;valid&quot; fix. I know that it is ugly if a test might fails due to timing problems. However, this is how Storm works unfortunately and the layer only adapts to this behavior.&lt;/p&gt;

&lt;p&gt;One more thing to add: you will see this exception in all runs (including the green once) &amp;#8211; it occurs after the &quot;cancel&quot; signal. Currently, the wrapper catches the exception and prints it to stdout. This behavior will be changed, when the new &quot;terminate&quot; signal is merged. See &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2111&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-2111&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14588822" author="githubbot" created="Tue, 16 Jun 2015 21:37:06 +0000"  >&lt;p&gt;GitHub user mjsax opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/845&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/845&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2232&quot; title=&quot;StormWordCountLocalITCase fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2232&quot;&gt;&lt;del&gt;FLINK-2232&lt;/del&gt;&lt;/a&gt; StormWordCountLocalITCase fails&lt;/p&gt;

&lt;p&gt;    increased sleeping time for IT-Cases to make tests more stable&lt;br/&gt;
    additional bug fix: isRunning was not volatile in AbstractStormSpoutWrapper&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mjsax/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mjsax/flink&lt;/a&gt; flink-storm-compatibility&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/845.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/845.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #845&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 11e5fa5520debc2c123d158c47da8ca5278fabe3&lt;br/&gt;
Author: mjsax &amp;lt;mjsax@informatik.hu-berlin.de&amp;gt;&lt;br/&gt;
Date:   2015-06-16T14:51:24Z&lt;/p&gt;

&lt;p&gt;    increased sleeping time for IT-Cases to make tests more stable (fixes &lt;span class=&quot;error&quot;&gt;&amp;#91;flink-2232&amp;#93;&lt;/span&gt;)&lt;br/&gt;
    additional bug fix: isRunning was not volatile in AbstractStormSpoutWrapper&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14588983" author="githubbot" created="Tue, 16 Jun 2015 23:10:14 +0000"  >&lt;p&gt;Github user mjsax commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/845#issuecomment-112599473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/845#issuecomment-112599473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    IHMO, ready to be merged.&lt;/p&gt;</comment>
                            <comment id="14591577" author="githubbot" created="Thu, 18 Jun 2015 09:55:58 +0000"  >&lt;p&gt;Github user mbalassi commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/845#issuecomment-113096386&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/845#issuecomment-113096386&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the temporal fix, I think the real solution is the one proposed in #750. Will merge this for now.&lt;/p&gt;</comment>
                            <comment id="14591582" author="githubbot" created="Thu, 18 Jun 2015 10:00:34 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/845&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/845&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14591586" author="mbalassi" created="Thu, 18 Jun 2015 10:02:47 +0000"  >&lt;p&gt;Merged a commit from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mjsax&quot; class=&quot;user-hover&quot; rel=&quot;mjsax&quot;&gt;mjsax&lt;/a&gt; increasing the timeout. The complete fix is dependant on &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, let us keep the issue open until that is merged.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/flink/pull/750&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/750&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g38v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>