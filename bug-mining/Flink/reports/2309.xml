<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:32:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8984] Disabling credit based flow control deadlocks Flink on checkpoint</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8984</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;This is configuration issue. There are two options:&#160;&lt;/p&gt;

&lt;p&gt;taskmanager.network.credit-based-flow-control.enabled&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;taskmanager.exactly-once.blocking.data.enabled&lt;/p&gt;

&lt;p&gt;If we disable first one, but remain default value for the second one deadlocks will occur. I think we can safely drop the second config&#160;value altogether and always use blocking&#160;BarrierBuffer for credit based flow control and spilling&#160;BarrierBuffer for non credit based flow control.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjwang&quot; class=&quot;user-hover&quot; rel=&quot;zjwang&quot;&gt;zjwang&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13145677">FLINK-8984</key>
            <summary>Disabling credit based flow control deadlocks Flink on checkpoint</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pnowojski">Piotr Nowojski</assignee>
                                    <reporter username="pnowojski">Piotr Nowojski</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Mar 2018 12:27:34 +0000</created>
                <updated>Wed, 21 Mar 2018 22:41:05 +0000</updated>
                            <resolved>Wed, 21 Mar 2018 22:41:05 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>Runtime / Configuration</component>
                    <component>Runtime / Network</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16401817" author="githubbot" created="Fri, 16 Mar 2018 12:32:33 +0000"  >&lt;p&gt;GitHub user pnowojski opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5708&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5708&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8984&quot; title=&quot;Disabling credit based flow control deadlocks Flink on checkpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8984&quot;&gt;&lt;del&gt;FLINK-8984&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;network&amp;#93;&lt;/span&gt; Drop taskmanager.exactly-once.blocking.data.enabled config option&lt;/p&gt;

&lt;p&gt;    Previously there were twe options:&lt;/p&gt;

&lt;p&gt;    taskmanager.network.credit-based-flow-control.enabled&lt;/p&gt;

&lt;p&gt;    and&lt;/p&gt;

&lt;p&gt;    taskmanager.exactly-once.blocking.data.enabled&lt;/p&gt;

&lt;p&gt;    If we disabled first one, but keept default value for the second one deadlocks will occur.&lt;/p&gt;

&lt;p&gt;    By dropping taskmanager.exactly-once.blocking.data.enabled we can always use:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;blocking BarrierBuffer for credit based flow control&lt;/li&gt;
	&lt;li&gt;spilling BarrierBuffer for non credit based flow control.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (*&lt;b&gt;not applicable&lt;/b&gt;* / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/pnowojski/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/pnowojski/flink&lt;/a&gt; f8984&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5708.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5708.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5708&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ed992c58502779d22e3e9b5c1a120329fc20c1a6&lt;br/&gt;
Author: Piotr Nowojski &amp;lt;piotr.nowojski@...&amp;gt;&lt;br/&gt;
Date:   2018-03-16T12:28:08Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8984&quot; title=&quot;Disabling credit based flow control deadlocks Flink on checkpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8984&quot;&gt;&lt;del&gt;FLINK-8984&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;network&amp;#93;&lt;/span&gt; Drop taskmanager.exactly-once.blocking.data.enabled config option&lt;/p&gt;

&lt;p&gt;    Previously there were twe options:&lt;/p&gt;

&lt;p&gt;    taskmanager.network.credit-based-flow-control.enabled&lt;/p&gt;

&lt;p&gt;    and&lt;/p&gt;

&lt;p&gt;    taskmanager.exactly-once.blocking.data.enabled&lt;/p&gt;

&lt;p&gt;    If we disabled first one, but keept default value for the second one deadlocks will occur.&lt;/p&gt;

&lt;p&gt;    By dropping taskmanager.exactly-once.blocking.data.enabled we can always use:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;blocking BarrierBuffer for credit based flow control&lt;/li&gt;
	&lt;li&gt;spilling BarrierBuffer for non credit based flow control.&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="16401912" author="githubbot" created="Fri, 16 Mar 2018 13:36:38 +0000"  >&lt;p&gt;Github user zhijiangW commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5708&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5708&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks piotr, I agree with it. &lt;/p&gt;</comment>
                            <comment id="16404856" author="githubbot" created="Mon, 19 Mar 2018 14:01:26 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5708&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5708&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    What would happen if `taskmanager.network.credit-based-flow-control.enabled` is enabled, but `taskmanager.exactly-once.blocking.data.enabled` is disabled?&lt;/p&gt;

&lt;p&gt;    Is this an invalid setting?&lt;/p&gt;</comment>
                            <comment id="16404966" author="githubbot" created="Mon, 19 Mar 2018 15:21:40 +0000"  >&lt;p&gt;Github user pnowojski commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5708&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5708&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes, it&apos;s a valid setting, but has worse performance and whole credit based flow control looses it&apos;s sense. `taskmanager.exactly-once.blocking.data.enabled` setting was thought as a fallback option if there is a bug in new code path, but this is achieved by using `taskmanager.network.credit-based-flow-control.enabled` in two places (and both of those places are about using `credit-based-flow-control`).&lt;/p&gt;

&lt;p&gt;    In other words, we do not think there is a much value in allowing `taskmanager.network.credit-based-flow-control.enabled` enabled, but `taskmanager.exactly-once.blocking.data.enabled` &lt;br/&gt;
    disabled, and it would make the configuration more complex/confusing for the users.&lt;/p&gt;</comment>
                            <comment id="16407856" author="githubbot" created="Wed, 21 Mar 2018 12:55:04 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5708&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5708&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merging.&lt;/p&gt;</comment>
                            <comment id="16408011" author="githubbot" created="Wed, 21 Mar 2018 14:37:39 +0000"  >&lt;p&gt;Github user pnowojski commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5708&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5708&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks!&lt;/p&gt;</comment>
                            <comment id="16408707" author="githubbot" created="Wed, 21 Mar 2018 22:40:16 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5708&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5708&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16408710" author="zentol" created="Wed, 21 Mar 2018 22:41:05 +0000"  >&lt;p&gt;master: 91707e35d39a1b9c11448f21eafc27f0fd949370&lt;br/&gt;
1.5: 23005ee1f653a3fcddac0f710d56f3e0d6157a48&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rean:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>