<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:38:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-11087] Broadcast state migration Incompatibility from 1.5.3 to 1.7.0</title>
                <link>https://issues.apache.org/jira/browse/FLINK-11087</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When upgrading from Flink 1.5.3 to Flink 1.7.0, the migration of broadcast state throws the following error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.flink.util.StateMigrationException: The new key serializer for broadcast state must not be incompatible.
at org.apache.flink.runtime.state.DefaultOperatorStateBackend.getBroadcastState(DefaultOperatorStateBackend.java:238)
at org.apache.flink.streaming.api.operators.co.CoBroadcastWithNonKeyedOperator.open(CoBroadcastWithNonKeyedOperator.java:87)
at org.apache.flink.streaming.runtime.tasks.StreamTask.openAllOperators(StreamTask.java:424)
at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:290)
at org.apache.flink.runtime.taskmanager.Task.run(Task.java:704)
at java.lang.Thread.run(Thread.java:745)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The broadcast is using a MapState with StringSerializer as key serializer and a custom JsonSerializer as value serializer.&#160;&lt;/p&gt;

&lt;p&gt;There was no changes in the TypeSerializers used, only upgrade of version.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;With some debugging I see that at the moment of the validation of the compatibility of states in the&#160;DefaultOperatorStateBackend class, the &quot;&lt;b&gt;registeredBroadcastStates&lt;/b&gt;&quot; containing the data about the &apos;old&apos; state, contains wrong association of the key and value serializer. This is,&#160;JsonSerializer appears as key serializer and&#160;StringSerializer appears as value serializer. (when it should be the contrary)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;After more digging, I see that the &quot;OperatorBackendStateMetaInfoReaderV2V3&quot; class is the responsible of this swap here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/blob/release-1.7/flink-runtime/src/main/java/org/apache/flink/runtime/state/metainfo/LegacyStateMetaInfoReaders.java#L165&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/release-1.7/flink-runtime/src/main/java/org/apache/flink/runtime/state/metainfo/LegacyStateMetaInfoReaders.java#L165&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Migration from Flink 1.5.3 to Flink 1.7.0&lt;/p&gt;</environment>
        <key id="13202800">FLINK-11087</key>
            <summary>Broadcast state migration Incompatibility from 1.5.3 to 1.7.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tzulitai">Tzu-Li (Gordon) Tai</assignee>
                                    <reporter username="edRojas">Edward Rojas</reporter>
                        <labels>
                            <label>Migration</label>
                            <label>State</label>
                            <label>broadcast</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 6 Dec 2018 13:23:05 +0000</created>
                <updated>Tue, 11 Dec 2018 13:48:42 +0000</updated>
                            <resolved>Tue, 11 Dec 2018 13:48:35 +0000</resolved>
                                    <version>1.6.2</version>
                    <version>1.7.0</version>
                                    <fixVersion>1.6.3</fixVersion>
                    <fixVersion>1.7.1</fixVersion>
                    <fixVersion>1.8.0</fixVersion>
                                    <component>Runtime / State Backends</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16711437" author="zentol" created="Thu, 6 Dec 2018 13:25:04 +0000"  >&lt;p&gt;Have you tried migration from 1.5 to 1.6 to 1.7?&lt;/p&gt;</comment>
                            <comment id="16711469" author="edrojas" created="Thu, 6 Dec 2018 13:50:38 +0000"  >&lt;p&gt;I just tried out, 1.5.3 to 1.6.2.&lt;/p&gt;

&lt;p&gt;I get a different error, but with the debugging, I see that the reason is the same, the key serializer and the value serializer are swapped in the OperatorBackendStateMetaInfoReaderV2V3 class.&#160;&lt;/p&gt;

&lt;p&gt;The error is the following:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.flink.util.StateMigrationException: State migration is currently not supported.
at org.apache.flink.util.StateMigrationException.notSupported(StateMigrationException.java:42)
at org.apache.flink.runtime.state.DefaultOperatorStateBackend.getBroadcastState(DefaultOperatorStateBackend.java:263)
at org.apache.flink.streaming.api.operators.co.CoBroadcastWithNonKeyedOperator.open(CoBroadcastWithNonKeyedOperator.java:87)
at org.apache.flink.streaming.runtime.tasks.StreamTask.openAllOperators(StreamTask.java:424)
at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:290)
at org.apache.flink.runtime.taskmanager.Task.run(Task.java:711)
at java.lang.Thread.run(Thread.java:745)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16711495" author="tzulitai" created="Thu, 6 Dec 2018 14:16:29 +0000"  >&lt;p&gt;I checked the key / value serializer association in the &lt;tt&gt;DefaultOperatorStateBackend&lt;/tt&gt;; it seems to be correct.&lt;/p&gt;

&lt;p&gt;The problem, as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edRojas&quot; class=&quot;user-hover&quot; rel=&quot;edRojas&quot;&gt;edRojas&lt;/a&gt; has indicated, is when restoring from 1.5 (regardless of whether the restore happens in 1.6 or 1.7), the serializer keys ( &lt;tt&gt;KEY_SERIALIZER&lt;/tt&gt;&#160;and &lt;tt&gt;VALUE_SERIALIZER&lt;/tt&gt; ) in the state meta info had swapped positions.&lt;br/&gt;
Because of this line,&#160;&lt;a href=&quot;https://github.com/apache/flink/blob/release-1.7/flink-runtime/src/main/java/org/apache/flink/runtime/state/metainfo/LegacyStateMetaInfoReaders.java#L165&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/release-1.7/flink-runtime/src/main/java/org/apache/flink/runtime/state/metainfo/LegacyStateMetaInfoReaders.java#L165&lt;/a&gt;,&lt;br/&gt;
for broadcast state meta info the first read serializer (which is the key serializer) is assigned the &lt;tt&gt;VALUE_SERIALIZER&lt;/tt&gt; key, while the second read serializer (which is the value serializer) is assigned the &lt;tt&gt;KEY_SERIALIZER&lt;/tt&gt; key.&lt;/p&gt;

&lt;p&gt;This looks like a bug that affects both Flink 1.6.x and Flink 1.7.0.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanrichter83%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;stefanrichter83@gmail.com&quot;&gt;stefanrichter83@gmail.com&lt;/a&gt; could you confirm this?&lt;/p&gt;</comment>
                            <comment id="16711511" author="tzulitai" created="Thu, 6 Dec 2018 14:35:27 +0000"  >&lt;p&gt;I&apos;m currently modifying the &lt;tt&gt;StatefulJobWBroadcastStateMigrationITCase&lt;/tt&gt; to verify this.&lt;br/&gt;
 Currently that ITCase had no way to capture this potential bug, because the key / value types of broadcast state tested there are all identical ..&lt;/p&gt;

&lt;p&gt;If it turns out to be true, then we&apos;ll need to lift this as a blocker bug.&lt;/p&gt;</comment>
                            <comment id="16711635" author="tzulitai" created="Thu, 6 Dec 2018 16:05:43 +0000"  >&lt;p&gt;Confirmed, this is indeed a bug, and the cause is what we&apos;ve discussed above.&lt;br/&gt;
This bug prevents Flink 1.6.x, 1.7.0 from restoring broadcast state from a 1.5.x savepoint.&lt;/p&gt;

&lt;p&gt;Setting this as a blocker for 1.6.4 and 1.7.1, providing a fix for this.&lt;br/&gt;
 Thanks for the investigation &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edRojas&quot; class=&quot;user-hover&quot; rel=&quot;edRojas&quot;&gt;edRojas&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16711637" author="zentol" created="Thu, 6 Dec 2018 16:07:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt; Can you amend the migration matrix in the &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-master/ops/upgrading.html#compatibility-table&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;documentation&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16711638" author="tzulitai" created="Thu, 6 Dec 2018 16:09:16 +0000"  >&lt;p&gt;Yes, will do.&lt;/p&gt;</comment>
                            <comment id="16711678" author="githubbot" created="Thu, 6 Dec 2018 16:45:04 +0000"  >&lt;p&gt;tzulitai opened a new pull request #7256: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11087&quot; title=&quot;Broadcast state migration Incompatibility from 1.5.3 to 1.7.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11087&quot;&gt;&lt;del&gt;FLINK-11087&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;state&amp;#93;&lt;/span&gt; Incorrect K/V serializer association when reading broadcast from 1.5.x snapshots&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7256&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This is a bug that prevents Flink versions 1.6.x (up to latest 1.6.2) and 1.7.0 to successfully restore broadcast state that was taken in 1.5.x.&lt;/p&gt;

&lt;p&gt;   The problem is that when restoring a broadcast state&apos;s meta information from a 1.5.x savepoint, the&lt;br/&gt;
   `LegacyStateMetaInfoReaders.OperatorBackendStateMetaInfoReaderV2V3` incorrectly associates the first restored serializer as the value serializer, and the second restored serializer as the key serializer.&lt;br/&gt;
   The actual order of this should be the other way around.&lt;/p&gt;

&lt;p&gt;   This PR also updates the `StatefulJobWBroadcastStateMigrationITCase` to have different K/V types for the broadcast states under test, as well as re-generate the test savepoints in `release-1.5` and `release-1.6`.&lt;br/&gt;
   That migration ITCase failed to catch this bug, because with K/V types being identical (and therefore identical serializers), the incorrect association didn&apos;t affect the result of the test.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fix K/V serializer association in `LegacyStateMetaInfoReaders.OperatorBackendStateMetaInfoReaderV2V3`.&lt;/li&gt;
	&lt;li&gt;Update `StatefulJobWBroadcastStateMigrationITCase` to have different K/V types for the broadcast states under test&lt;/li&gt;
	&lt;li&gt;Regenerate test savepoints for `StatefulJobWBroadcastStateMigrationITCase` under branches `release-1.6` and `release-1.5`.&lt;/li&gt;
	&lt;li&gt;Amend compatibility table in docs (&lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-master/ops/upgrading.html#compatibility-table&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.apache.org/projects/flink/flink-docs-master/ops/upgrading.html#compatibility-table&lt;/a&gt;) to notify the issue.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   The updated `StatefulJobWBroadcastStateMigrationITCase` should pass.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (*&lt;b&gt;yes&lt;/b&gt;* / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / no / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16716704" author="githubbot" created="Tue, 11 Dec 2018 09:49:41 +0000"  >&lt;p&gt;asfgit closed pull request #7256: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11087&quot; title=&quot;Broadcast state migration Incompatibility from 1.5.3 to 1.7.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11087&quot;&gt;&lt;del&gt;FLINK-11087&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;state&amp;#93;&lt;/span&gt; Incorrect K/V serializer association when reading broadcast state from 1.5.x snapshots&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7256&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/docs/ops/upgrading.md b/docs/ops/upgrading.md&lt;br/&gt;
index 0451940723e..22cea4c53f0 100644&lt;br/&gt;
&amp;#8212; a/docs/ops/upgrading.md&lt;br/&gt;
+++ b/docs/ops/upgrading.md&lt;br/&gt;
@@ -274,7 +274,10 @@ Savepoints are compatible across Flink versions as indicated by the table below:&lt;br/&gt;
           &amp;lt;td class=&quot;text-center&quot;&amp;gt;O&amp;lt;/td&amp;gt;&lt;br/&gt;
           &amp;lt;td class=&quot;text-center&quot;&amp;gt;O&amp;lt;/td&amp;gt;&lt;br/&gt;
           &amp;lt;td class=&quot;text-center&quot;&amp;gt;O&amp;lt;/td&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;td class=&quot;text-left&quot;&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+          &amp;lt;td class=&quot;text-left&quot;&amp;gt;There is a known issue with resuming broadcast state created with 1.5.x in versions&lt;br/&gt;
+          1.6.x up to 1.6.2, and 1.7.0: &amp;lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11087&quot;&amp;gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11087&quot; title=&quot;Broadcast state migration Incompatibility from 1.5.3 to 1.7.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11087&quot;&gt;&lt;del&gt;FLINK-11087&lt;/del&gt;&lt;/a&gt;&amp;lt;/a&amp;gt;. Users&lt;br/&gt;
+          upgrading to 1.6.x or 1.7.x series need to directly migrate to minor versions higher than 1.6.2 and 1.7.0,&lt;br/&gt;
+          respectively.&amp;lt;/td&amp;gt;&lt;br/&gt;
     &amp;lt;/tr&amp;gt;&lt;br/&gt;
     &amp;lt;tr&amp;gt;&lt;br/&gt;
           &amp;lt;td class=&quot;text-center&quot;&amp;gt;&amp;lt;strong&amp;gt;1.6.x&amp;lt;/strong&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/state/metainfo/LegacyStateMetaInfoReaders.java b/flink-runtime/src/main/java/org/apache/flink/runtime/state/metainfo/LegacyStateMetaInfoReaders.java&lt;br/&gt;
index 77c267adff1..836edef0aac 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-runtime/src/main/java/org/apache/flink/runtime/state/metainfo/LegacyStateMetaInfoReaders.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/state/metainfo/LegacyStateMetaInfoReaders.java&lt;br/&gt;
@@ -132,11 +132,6 @@ public StateMetaInfoSnapshot readStateMetaInfoSnapshot(&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		static final OperatorBackendStateMetaInfoReaderV2V3 INSTANCE = new OperatorBackendStateMetaInfoReaderV2V3();&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static final String[] ORDERED_KEY_STRINGS =&lt;/li&gt;
	&lt;li&gt;new String[]
{
-				StateMetaInfoSnapshot.CommonSerializerKeys.KEY_SERIALIZER.toString(),
-				StateMetaInfoSnapshot.CommonSerializerKeys.VALUE_SERIALIZER.toString()}
&lt;p&gt;;&lt;br/&gt;
-&lt;br/&gt;
 		@Nonnull&lt;br/&gt;
 		@Override&lt;br/&gt;
 		public StateMetaInfoSnapshot readStateMetaInfoSnapshot(&lt;br/&gt;
@@ -156,17 +151,25 @@ public StateMetaInfoSnapshot readStateMetaInfoSnapshot(&lt;br/&gt;
 			final int listSize = stateSerializerAndConfigList.size();&lt;br/&gt;
 			StateMetaInfoSnapshot.BackendStateType stateType = listSize == 1 ?&lt;br/&gt;
 				StateMetaInfoSnapshot.BackendStateType.OPERATOR : StateMetaInfoSnapshot.BackendStateType.BROADCAST;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;Map&amp;lt;String, TypeSerializerSnapshot&amp;lt;?&amp;gt;&amp;gt; serializerConfigsMap = new HashMap&amp;lt;&amp;gt;(listSize);&lt;/li&gt;
	&lt;li&gt;for (int i = 0; i &amp;lt; listSize; ++i) {&lt;/li&gt;
	&lt;li&gt;Tuple2&amp;lt;TypeSerializer&amp;lt;?&amp;gt;, TypeSerializerSnapshot&amp;lt;?&amp;gt;&amp;gt; serializerAndConf =&lt;/li&gt;
	&lt;li&gt;stateSerializerAndConfigList.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;// this particular mapping happens to support both, V2 and V3&lt;/li&gt;
	&lt;li&gt;String serializerKey = ORDERED_KEY_STRINGS&lt;span class=&quot;error&quot;&gt;&amp;#91;ORDERED_KEY_STRINGS.length - 1 - i&amp;#93;&lt;/span&gt;;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;serializerConfigsMap.put(&lt;/li&gt;
	&lt;li&gt;serializerKey,&lt;/li&gt;
	&lt;li&gt;serializerAndConf.f1);&lt;br/&gt;
+			Map&amp;lt;String, TypeSerializerSnapshot&amp;lt;?&amp;gt;&amp;gt; serializerConfigsMap = new HashMap&amp;lt;&amp;gt;(listSize);&lt;br/&gt;
+			switch (stateType) 
{
+				case OPERATOR:
+					serializerConfigsMap.put(
+						StateMetaInfoSnapshot.CommonSerializerKeys.VALUE_SERIALIZER.toString(),
+						stateSerializerAndConfigList.get(0).f1);
+					break;
+				case BROADCAST:
+					serializerConfigsMap.put(
+						StateMetaInfoSnapshot.CommonSerializerKeys.KEY_SERIALIZER.toString(),
+						stateSerializerAndConfigList.get(0).f1);
+
+					serializerConfigsMap.put(
+						StateMetaInfoSnapshot.CommonSerializerKeys.VALUE_SERIALIZER.toString(),
+						stateSerializerAndConfigList.get(1).f1);
+					break;
+				default:
+					throw new IllegalStateException(&quot;Unknown operator state type &quot; + stateType);
 			}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 			return new StateMetaInfoSnapshot(&lt;br/&gt;
diff --git a/flink-tests/src/test/java/org/apache/flink/test/checkpointing/utils/StatefulJobWBroadcastStateMigrationITCase.java b/flink-tests/src/test/java/org/apache/flink/test/checkpointing/utils/StatefulJobWBroadcastStateMigrationITCase.java&lt;br/&gt;
index f7923620850..3f49d84d595 100644&lt;br/&gt;
&amp;#8212; a/flink-tests/src/test/java/org/apache/flink/test/checkpointing/utils/StatefulJobWBroadcastStateMigrationITCase.java&lt;br/&gt;
+++ b/flink-tests/src/test/java/org/apache/flink/test/checkpointing/utils/StatefulJobWBroadcastStateMigrationITCase.java&lt;br/&gt;
@@ -113,17 +113,17 @@ public void testSavepoint() throws Exception {&lt;br/&gt;
 		expectedFirstState.put(2L, 2L);&lt;br/&gt;
 		expectedFirstState.put(3L, 3L);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final Map&amp;lt;String, String&amp;gt; expectedSecondState = new HashMap&amp;lt;&amp;gt;();&lt;/li&gt;
	&lt;li&gt;expectedSecondState.put(&quot;0&quot;, &quot;0&quot;);&lt;/li&gt;
	&lt;li&gt;expectedSecondState.put(&quot;1&quot;, &quot;1&quot;);&lt;/li&gt;
	&lt;li&gt;expectedSecondState.put(&quot;2&quot;, &quot;2&quot;);&lt;/li&gt;
	&lt;li&gt;expectedSecondState.put(&quot;3&quot;, &quot;3&quot;);&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;final Map&amp;lt;String, String&amp;gt; expectedThirdState = new HashMap&amp;lt;&amp;gt;();&lt;/li&gt;
	&lt;li&gt;expectedThirdState.put(&quot;0&quot;, &quot;0&quot;);&lt;/li&gt;
	&lt;li&gt;expectedThirdState.put(&quot;1&quot;, &quot;1&quot;);&lt;/li&gt;
	&lt;li&gt;expectedThirdState.put(&quot;2&quot;, &quot;2&quot;);&lt;/li&gt;
	&lt;li&gt;expectedThirdState.put(&quot;3&quot;, &quot;3&quot;);&lt;br/&gt;
+		final Map&amp;lt;String, Long&amp;gt; expectedSecondState = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+		expectedSecondState.put(&quot;0&quot;, 0L);&lt;br/&gt;
+		expectedSecondState.put(&quot;1&quot;, 1L);&lt;br/&gt;
+		expectedSecondState.put(&quot;2&quot;, 2L);&lt;br/&gt;
+		expectedSecondState.put(&quot;3&quot;, 3L);&lt;br/&gt;
+&lt;br/&gt;
+		final Map&amp;lt;Long, String&amp;gt; expectedThirdState = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+		expectedThirdState.put(0L, &quot;0&quot;);&lt;br/&gt;
+		expectedThirdState.put(1L, &quot;1&quot;);&lt;br/&gt;
+		expectedThirdState.put(2L, &quot;2&quot;);&lt;br/&gt;
+		expectedThirdState.put(3L, &quot;3&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		if (executionMode == StatefulJobSavepointMigrationITCase.ExecutionMode.PERFORM_SAVEPOINT) {&lt;br/&gt;
 			nonParallelSource = new MigrationTestUtils.CheckpointingNonParallelSourceWithListState(NUM_SOURCE_ELEMENTS);&lt;br/&gt;
@@ -171,12 +171,12 @@ public Long getKey(Tuple2&amp;lt;Long, Long&amp;gt; value) throws Exception {&lt;br/&gt;
 				&quot;broadcast-state-1&quot;, BasicTypeInfo.LONG_TYPE_INFO, BasicTypeInfo.LONG_TYPE_INFO&lt;br/&gt;
 		);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final MapStateDescriptor&amp;lt;String, String&amp;gt; secondBroadcastStateDesc = new MapStateDescriptor&amp;lt;&amp;gt;(&lt;/li&gt;
	&lt;li&gt;&quot;broadcast-state-2&quot;, BasicTypeInfo.STRING_TYPE_INFO, BasicTypeInfo.STRING_TYPE_INFO&lt;br/&gt;
+		final MapStateDescriptor&amp;lt;String, Long&amp;gt; secondBroadcastStateDesc = new MapStateDescriptor&amp;lt;&amp;gt;(&lt;br/&gt;
+				&quot;broadcast-state-2&quot;, BasicTypeInfo.STRING_TYPE_INFO, BasicTypeInfo.LONG_TYPE_INFO&lt;br/&gt;
 		);&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final MapStateDescriptor&amp;lt;String, String&amp;gt; thirdBroadcastStateDesc = new MapStateDescriptor&amp;lt;&amp;gt;(&lt;/li&gt;
	&lt;li&gt;&quot;broadcast-state-3&quot;, BasicTypeInfo.STRING_TYPE_INFO, BasicTypeInfo.STRING_TYPE_INFO&lt;br/&gt;
+		final MapStateDescriptor&amp;lt;Long, String&amp;gt; thirdBroadcastStateDesc = new MapStateDescriptor&amp;lt;&amp;gt;(&lt;br/&gt;
+				&quot;broadcast-state-3&quot;, BasicTypeInfo.LONG_TYPE_INFO, BasicTypeInfo.STRING_TYPE_INFO&lt;br/&gt;
 		);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		BroadcastStream&amp;lt;Tuple2&amp;lt;Long, Long&amp;gt;&amp;gt; npBroadcastStream = env&lt;br/&gt;
@@ -234,7 +234,7 @@ private String getBroadcastSavepointPath(MigrationVersion savepointVersion, Stri&lt;/p&gt;

&lt;p&gt; 		private MapStateDescriptor&amp;lt;Long, Long&amp;gt; firstStateDesc;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private MapStateDescriptor&amp;lt;String, String&amp;gt; secondStateDesc;&lt;br/&gt;
+		private MapStateDescriptor&amp;lt;String, Long&amp;gt; secondStateDesc;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		@Override&lt;br/&gt;
 		public void open(Configuration parameters) throws Exception {&lt;br/&gt;
@@ -245,7 +245,7 @@ public void open(Configuration parameters) throws Exception &lt;/p&gt;
{
 			);
 
 			secondStateDesc = new MapStateDescriptor&amp;lt;&amp;gt;(
-					&quot;broadcast-state-2&quot;, BasicTypeInfo.STRING_TYPE_INFO, BasicTypeInfo.STRING_TYPE_INFO
+					&quot;broadcast-state-2&quot;, BasicTypeInfo.STRING_TYPE_INFO, BasicTypeInfo.LONG_TYPE_INFO
 			);
 		}&lt;br/&gt;
 &lt;br/&gt;
@@ -257,7 +257,7 @@ public void processElement(Tuple2&amp;lt;Long, Long&amp;gt; value, ReadOnlyContext ctx, Collec&lt;br/&gt;
 		@Override&lt;br/&gt;
 		public void processBroadcastElement(Tuple2&amp;lt;Long, Long&amp;gt; value, Context ctx, Collector&amp;lt;Tuple2&amp;lt;Long, Long&amp;gt;&amp;gt; out) throws Exception {
 			ctx.getBroadcastState(firstStateDesc).put(value.f0, value.f1);
-			ctx.getBroadcastState(secondStateDesc).put(Long.toString(value.f0), Long.toString(value.f1));
+			ctx.getBroadcastState(secondStateDesc).put(Long.toString(value.f0), value.f1);
 		}&lt;br/&gt;
 	}&lt;br/&gt;
 &lt;br/&gt;
@@ -269,14 +269,14 @@ public void processBroadcastElement(Tuple2&amp;lt;Long, Long&amp;gt; value, Context ctx, Colle&lt;br/&gt;
 &lt;br/&gt;
 		private static final long serialVersionUID = 1333992081671604521L;&lt;br/&gt;
 &lt;br/&gt;
-		private MapStateDescriptor&amp;lt;String, String&amp;gt; stateDesc;&lt;br/&gt;
+		private MapStateDescriptor&amp;lt;Long, String&amp;gt; stateDesc;&lt;br/&gt;
 &lt;br/&gt;
 		@Override&lt;br/&gt;
 		public void open(Configuration parameters) throws Exception {
 			super.open(parameters);
 
 			stateDesc = new MapStateDescriptor&amp;lt;&amp;gt;(
-					&quot;broadcast-state-3&quot;, BasicTypeInfo.STRING_TYPE_INFO, BasicTypeInfo.STRING_TYPE_INFO
+					&quot;broadcast-state-3&quot;, BasicTypeInfo.LONG_TYPE_INFO, BasicTypeInfo.STRING_TYPE_INFO
 			);
 		}&lt;br/&gt;
 &lt;br/&gt;
@@ -287,7 +287,7 @@ public void processElement(Tuple2&amp;lt;Long, Long&amp;gt; value, ReadOnlyContext ctx, Collec&lt;br/&gt;
 &lt;br/&gt;
 		@Override&lt;br/&gt;
 		public void processBroadcastElement(Tuple2&amp;lt;Long, Long&amp;gt; value, Context ctx, Collector&amp;lt;Tuple2&amp;lt;Long, Long&amp;gt;&amp;gt; out) throws Exception {
-			ctx.getBroadcastState(stateDesc).put(Long.toString(value.f0), Long.toString(value.f1));
+			ctx.getBroadcastState(stateDesc).put(value.f0, Long.toString(value.f1));
 		}&lt;br/&gt;
 	}&lt;br/&gt;
 &lt;br/&gt;
@@ -301,13 +301,13 @@ public void processBroadcastElement(Tuple2&amp;lt;Long, Long&amp;gt; value, Context ctx, Colle&lt;br/&gt;
 &lt;br/&gt;
 		private final Map&amp;lt;Long, Long&amp;gt; expectedFirstState;&lt;br/&gt;
 &lt;br/&gt;
-		private final Map&amp;lt;String, String&amp;gt; expectedSecondState;&lt;br/&gt;
+		private final Map&amp;lt;String, Long&amp;gt; expectedSecondState;&lt;br/&gt;
 &lt;br/&gt;
 		private MapStateDescriptor&amp;lt;Long, Long&amp;gt; firstStateDesc;&lt;br/&gt;
 &lt;br/&gt;
-		private MapStateDescriptor&amp;lt;String, String&amp;gt; secondStateDesc;&lt;br/&gt;
+		private MapStateDescriptor&amp;lt;String, Long&amp;gt; secondStateDesc;&lt;br/&gt;
 &lt;br/&gt;
-		CheckingKeyedBroadcastFunction(Map&amp;lt;Long, Long&amp;gt; firstState, Map&amp;lt;String, String&amp;gt; secondState) {&lt;br/&gt;
+		CheckingKeyedBroadcastFunction(Map&amp;lt;Long, Long&amp;gt; firstState, Map&amp;lt;String, Long&amp;gt; secondState) {
 			this.expectedFirstState = firstState;
 			this.expectedSecondState = secondState;
 		}&lt;br/&gt;
@@ -321,7 +321,7 @@ public void open(Configuration parameters) throws Exception { 			);  			secondStateDesc = new MapStateDescriptor&amp;lt;&amp;gt;(-					&quot;broadcast-state-2&quot;, BasicTypeInfo.STRING_TYPE_INFO, BasicTypeInfo.STRING_TYPE_INFO+					&quot;broadcast-state-2&quot;, BasicTypeInfo.STRING_TYPE_INFO, BasicTypeInfo.LONG_TYPE_INFO 			); 		}

&lt;p&gt;@@ -334,8 +334,8 @@ public void processElement(Tuple2&amp;lt;Long, Long&amp;gt; value, ReadOnlyContext ctx, Collec&lt;br/&gt;
 			}&lt;br/&gt;
 			Assert.assertEquals(expectedFirstState, actualFirstState);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final Map&amp;lt;String, String&amp;gt; actualSecondState = new HashMap&amp;lt;&amp;gt;();&lt;/li&gt;
	&lt;li&gt;for (Map.Entry&amp;lt;String, String&amp;gt; entry: ctx.getBroadcastState(secondStateDesc).immutableEntries()) {&lt;br/&gt;
+			final Map&amp;lt;String, Long&amp;gt; actualSecondState = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+			for (Map.Entry&amp;lt;String, Long&amp;gt; entry: ctx.getBroadcastState(secondStateDesc).immutableEntries()) 
{
 				actualSecondState.put(entry.getKey(), entry.getValue());
 			}
&lt;p&gt; 			Assert.assertEquals(expectedSecondState, actualSecondState);&lt;br/&gt;
@@ -357,11 +357,11 @@ public void processBroadcastElement(Tuple2&amp;lt;Long, Long&amp;gt; value, Context ctx, Colle&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		private static final long serialVersionUID = 1333992081671604521L;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private final Map&amp;lt;String, String&amp;gt; expectedState;&lt;br/&gt;
+		private final Map&amp;lt;Long, String&amp;gt; expectedState;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private MapStateDescriptor&amp;lt;String, String&amp;gt; stateDesc;&lt;br/&gt;
+		private MapStateDescriptor&amp;lt;Long, String&amp;gt; stateDesc;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;CheckingKeyedSingleBroadcastFunction(Map&amp;lt;String, String&amp;gt; state) {&lt;br/&gt;
+		CheckingKeyedSingleBroadcastFunction(Map&amp;lt;Long, String&amp;gt; state) 
{
 			this.expectedState = state;
 		}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -370,14 +370,14 @@ public void open(Configuration parameters) throws Exception &lt;/p&gt;
{
 			super.open(parameters);
 
 			stateDesc = new MapStateDescriptor&amp;lt;&amp;gt;(
-					&quot;broadcast-state-3&quot;, BasicTypeInfo.STRING_TYPE_INFO, BasicTypeInfo.STRING_TYPE_INFO
+					&quot;broadcast-state-3&quot;, BasicTypeInfo.LONG_TYPE_INFO, BasicTypeInfo.STRING_TYPE_INFO
 			);
 		}

&lt;p&gt; 		@Override&lt;br/&gt;
 		public void processElement(Tuple2&amp;lt;Long, Long&amp;gt; value, ReadOnlyContext ctx, Collector&amp;lt;Tuple2&amp;lt;Long, Long&amp;gt;&amp;gt; out) throws Exception {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final Map&amp;lt;String, String&amp;gt; actualState = new HashMap&amp;lt;&amp;gt;();&lt;/li&gt;
	&lt;li&gt;for (Map.Entry&amp;lt;String, String&amp;gt; entry: ctx.getBroadcastState(stateDesc).immutableEntries()) {&lt;br/&gt;
+			final Map&amp;lt;Long, String&amp;gt; actualState = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+			for (Map.Entry&amp;lt;Long, String&amp;gt; entry: ctx.getBroadcastState(stateDesc).immutableEntries()) 
{
 				actualState.put(entry.getKey(), entry.getValue());
 			}
&lt;p&gt; 			Assert.assertEquals(expectedState, actualState);&lt;br/&gt;
diff --git a/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.5-rocksdb-savepoint/_metadata b/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.5-rocksdb-savepoint/_metadata&lt;br/&gt;
index aed61836bd9..2e02f1bf87d 100644&lt;br/&gt;
Binary files a/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.5-rocksdb-savepoint/_metadata and b/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.5-rocksdb-savepoint/_metadata differ&lt;br/&gt;
diff --git a/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.5-savepoint/_metadata b/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.5-savepoint/_metadata&lt;br/&gt;
index 13e8d321036..4ca91d33ccb 100644&lt;br/&gt;
Binary files a/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.5-savepoint/_metadata and b/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.5-savepoint/_metadata differ&lt;br/&gt;
diff --git a/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.6-rocksdb-savepoint/_metadata b/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.6-rocksdb-savepoint/_metadata&lt;br/&gt;
index 9e2b08654b2..8b2a63ab41b 100644&lt;br/&gt;
Binary files a/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.6-rocksdb-savepoint/_metadata and b/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.6-rocksdb-savepoint/_metadata differ&lt;br/&gt;
diff --git a/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.6-savepoint/_metadata b/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.6-savepoint/_metadata&lt;br/&gt;
index cceb5bf7f89..cde6d5c44bf 100644&lt;br/&gt;
Binary files a/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.6-savepoint/_metadata and b/flink-tests/src/test/resources/new-stateful-broadcast-udf-migration-itcase-flink1.6-savepoint/_metadata differ&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16717187" author="tzulitai" created="Tue, 11 Dec 2018 13:48:35 +0000"  >&lt;p&gt;Merged.&lt;/p&gt;

&lt;p&gt;1.8.0 (master):&#160;a30164bf06f5d955771025e0341bccf6750f4062&#160;&lt;br/&gt;
1.7.1:&#160;83598067e33c7a74330e05222143a8d3dd427017&#160;&lt;br/&gt;
1.6.3:&#160;3e70c63087bb5f6f8375650ff48ea22ec0680007&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s018pk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>