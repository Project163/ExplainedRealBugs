<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:07:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-21142] Flink guava Dependence problem</title>
                <link>https://issues.apache.org/jira/browse/FLINK-21142</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;We set up a new Hadoop cluster, and we use the flink1.12.0 compiled by the previous release-1.12.0 branch.If I add hive jar to flink/lib/, it will&#160;report errors.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Operating environment&#65306;&lt;/b&gt;&lt;br/&gt;
 &#160; &#160; flink1.12.0&#160;&lt;br/&gt;
 &#160; &#160; Hadoop 3.3.0&lt;br/&gt;
 &#160; &#160; hive 3.1.2&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Flink run official demo shell&#65306; /tmp/yjb/buildjar/flink1.12.0/bin/flink run -m yarn-cluster /usr/local/flink1.12.0/examples/streaming/WordCount.jar&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;If I put one of the jar&#160;&lt;b&gt;flink-sql-connector-hive-3.1.2_2.11-1.12.0.jar&lt;/b&gt; or&#160;&lt;b&gt;hive-exec-3.1.2.jar&lt;/b&gt; in the Lib directory and execute the above shell, an error will be reported&#160; java.lang.NoSuchMethodError : com.google.common . base.Preconditions.checkArgument (ZLjava/lang/String;Ljava/lang/Object;)V. &lt;b&gt;We can see that it&apos;s the dependency conflict of guava.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;My cluster guava&#8216;s version:&lt;/b&gt;&lt;br/&gt;
 /usr/local/hadoop-3.3.0/share/hadoop/yarn/csi/lib/guava-20.0.jar&lt;br/&gt;
 /usr/local/hadoop-3.3.0/share/hadoop/common/lib/guava-27.0-jre.jar&lt;br/&gt;
 /usr/local/apache-hive-3.1.2-bin/lib/guava-20.0.jar&lt;br/&gt;
 /usr/local/apache-hive-3.1.2-bin/lib/jersey-guava-2.25.1.jar&lt;br/&gt;
 /usr/local/spark-3.0.1-bin-hadoop3.2/jars/guava-14.0.1.jar&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Can you give me some advice&#65311;&lt;/b&gt;&lt;br/&gt;
 Thank you&#65281;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13354577">FLINK-21142</key>
            <summary>Flink guava Dependence problem</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twalthr">Timo Walther</assignee>
                                    <reporter username="YUJIANBO">YUJIANBO</reporter>
                        <labels>
                            <label>auto-unassigned</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 26 Jan 2021 05:14:46 +0000</created>
                <updated>Thu, 30 Sep 2021 14:56:45 +0000</updated>
                            <resolved>Thu, 30 Sep 2021 14:56:45 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.15.0</fixVersion>
                                    <component>Connectors / Hadoop Compatibility</component>
                    <component>Connectors / Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17271881" author="yujianbo" created="Tue, 26 Jan 2021 05:19:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt; Hello&#65281;Can you give me some advice?&lt;/p&gt;</comment>
                            <comment id="17271899" author="lirui" created="Tue, 26 Jan 2021 06:28:38 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=YUJIANBO&quot; class=&quot;user-hover&quot; rel=&quot;YUJIANBO&quot;&gt;YUJIANBO&lt;/a&gt;, the same issue has been reported in the &lt;a href=&quot;http://apache-flink.147419.n8.nabble.com/Caused-by-java-lang-NoSuchMethodError-com-google-common-base-Preconditions-checkArgument-ZLjava-langV-td10474.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;mailing list&lt;/a&gt;, and you can check out my reply there.&lt;br/&gt;
The root cause is your hadoop version is incompatible with your hive version. Hive-3.1.2 depends on hadoop-3.1.0, so choosing a hadoop version &amp;lt;=3.1.0 would be safer.&lt;/p&gt;</comment>
                            <comment id="17271912" author="yujianbo" created="Tue, 26 Jan 2021 06:55:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt;That&apos;s also my question. I didn&apos;t notice your letter. Thank you very much. &lt;br/&gt;
I have quesiton, I will try first method to rebuild hive-exe, but my cluster guava&apos; version next. Should I replace all guava dependencies with 27.0-jre&apos;s version&#65311;&lt;/p&gt;

&lt;p&gt;/usr/local/hadoop-3.3.0/share/hadoop/yarn/csi/lib/guava-20.0.jar&lt;br/&gt;
/usr/local/hadoop-3.3.0/share/hadoop/common/lib/guava-27.0-jre.jar&lt;br/&gt;
/usr/local/apache-hive-3.1.2-bin/lib/guava-20.0.jar&lt;br/&gt;
/usr/local/apache-hive-3.1.2-bin/lib/jersey-guava-2.25.1.jar&lt;br/&gt;
/usr/local/spark-3.0.1-bin-hadoop3.2/jars/guava-14.0.1.jar&lt;/p&gt;
</comment>
                            <comment id="17271953" author="lirui" created="Tue, 26 Jan 2021 08:12:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=YUJIANBO&quot; class=&quot;user-hover&quot; rel=&quot;YUJIANBO&quot;&gt;YUJIANBO&lt;/a&gt; That depends on how the guava jars are used in your job. The principle is to avoid different versions of the same guava class in the class path. So you don&apos;t need to replace if it&apos;s not added to class path.&lt;/p&gt;</comment>
                            <comment id="17352456" author="twalthr" created="Thu, 27 May 2021 13:05:51 +0000"  >&lt;p&gt;I have created a PR for improving this issue. Please let me know what you think there.&lt;/p&gt;</comment>
                            <comment id="17361255" author="flink-jira-bot" created="Thu, 10 Jun 2021 22:39:18 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issue is assigned but has not received an update in 14, so it has been labeled &quot;stale-assigned&quot;.&lt;br/&gt;
If you are still working on the issue, please remove the label and add a comment updating the community on your progress.  If this issue is waiting on feedback, please consider this a reminder to the committer/reviewer. Flink is a very active project, and so we appreciate your patience.&lt;br/&gt;
If you are no longer working on the issue, please unassign yourself so someone else may work on it. If the &quot;warning_label&quot; label is not removed in 7 days, the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17365767" author="flink-jira-bot" created="Fri, 18 Jun 2021 22:39:20 +0000"  >&lt;p&gt;This issue was marked &quot;stale-assigned&quot; 7 ago and has not received an update. I have automatically removed the current assignee from the issue so others in the community may pick it up. If you are still working on this ticket, please ask a committer to reassign you and provide an update about your current status.&lt;/p&gt;</comment>
                            <comment id="17422830" author="twalthr" created="Thu, 30 Sep 2021 14:55:12 +0000"  >&lt;p&gt;Fixed in master: 79e4c4cd98d4d4d2033462b931b83e5dacc806b4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mzgw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>