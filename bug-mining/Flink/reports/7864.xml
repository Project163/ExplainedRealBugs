<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:22:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-33926] Can&apos;t start a job with a jar in the system classpath in native k8s mode</title>
                <link>https://issues.apache.org/jira/browse/FLINK-33926</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;It appears that the combination of the running operator-controlled jobs in native k8s + application mode + using a job jar in the classpath is invalid. Avoiding dynamic classloading (as specified in the &lt;a href=&quot;https://nightlies.apache.org/flink/flink-docs-release-1.16/docs/ops/debugging/debugging_classloading/#avoiding-dynamic-classloading-for-user-code&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;docs&lt;/a&gt;) is beneficial for some jobs. This affects at least Flink 1.16.1 and Kubernetes Operator 1.6.0.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-29288&quot; title=&quot;Can&amp;#39;t start a job with a jar in the system classpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-29288&quot;&gt;&lt;del&gt;FLINK-29288&lt;/del&gt;&lt;/a&gt; seems to have addressed this for standalone mode. If I am misunderstanding how to correctly build jars for this native k8s scenario, apologies for the noise and any pointers would be appreciated!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Perhaps related, the &lt;a href=&quot;https://nightlies.apache.org/flink/flink-kubernetes-operator-docs-main/docs/custom-resource/reference/#jobspec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;spec documentation&lt;/a&gt; declares it optional, but isn&apos;t clear about under what conditions that applies.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Putting the jar in the system classpath and pointing&#160;&lt;b&gt;jarURI&lt;/b&gt; to that jar leads to linkage errors.&lt;/li&gt;
	&lt;li&gt;Not including&#160;&lt;b&gt;jarURI&lt;/b&gt; leads to NullPointerExceptions in the operator:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.flink.kubernetes.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.exception.ReconciliationException&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;message&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.NullPointerException&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;stackTrace&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.flink.kubernetes.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.exception.ReconciliationException: java.lang.NullPointerException\n\tat org.apache.flink.kubernetes.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.controller.FlinkDeploymentController.reconcile(FlinkDeploymentController.java:148)\n\tat org.apache.flink.kubernetes.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.controller.FlinkDeploymentController.reconcile(FlinkDeploymentController.java:56)\n\tat io.javaoperatorsdk.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.processing.Controller$1.execute(Controller.java:138)\n\tat io.javaoperatorsdk.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.processing.Controller$1.execute(Controller.java:96)\n\tat org.apache.flink.kubernetes.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.metrics.OperatorJosdkMetrics.timeControllerExecution(OperatorJosdkMetrics.java:80)\n\tat io.javaoperatorsdk.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.processing.Controller.reconcile(Controller.java:95)\n\tat io.javaoperatorsdk.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.processing.event.ReconciliationDispatcher.reconcileExecution(ReconciliationDispatcher.java:139)\n\tat io.javaoperatorsdk.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.processing.event.ReconciliationDispatcher.handleReconcile(ReconciliationDispatcher.java:119)\n\tat io.javaoperatorsdk.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.processing.event.ReconciliationDispatcher.handleDispatch(ReconciliationDispatcher.java:89)\n\tat io.javaoperatorsdk.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.processing.event.ReconciliationDispatcher.handleExecution(ReconciliationDispatcher.java:62)\n\tat io.javaoperatorsdk.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.processing.event.EventProcessor$ReconcilerExecutor.run(EventProcessor.java:414)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n\tat java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)\nCaused by: java.lang.NullPointerException\n\tat org.apache.flink.kubernetes.utils.KubernetesUtils.checkJarFileForApplicationMode(KubernetesUtils.java:407)\n\tat org.apache.flink.kubernetes.KubernetesClusterDescriptor.deployApplicationCluster(KubernetesClusterDescriptor.java:207)\n\tat org.apache.flink.client.deployment.application.cli.ApplicationClusterDeployer.run(ApplicationClusterDeployer.java:67)\n\tat org.apache.flink.kubernetes.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.service.NativeFlinkService.deployApplicationCluster(Native&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;additionalMetadata&quot;&lt;/span&gt;:{},&lt;span class=&quot;code-quote&quot;&gt;&quot;throwableList&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.NullPointerException&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;additionalMetadata&quot;&lt;/span&gt;:{}}]}  &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13562639">FLINK-33926</key>
            <summary>Can&apos;t start a job with a jar in the system classpath in native k8s mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tinaselenge">Gantigmaa Selenge</assignee>
                                    <reporter username="trystan">Trystan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 21 Dec 2023 17:32:05 +0000</created>
                <updated>Thu, 3 Jul 2025 05:19:24 +0000</updated>
                            <resolved>Thu, 3 Jul 2025 05:19:24 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>1.19.3</version>
                    <version>1.20.2</version>
                    <version>2.1.0</version>
                                    <fixVersion>2.1.0</fixVersion>
                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>Deployment / Kubernetes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17880640" author="JIRAUSER298404" created="Tue, 10 Sep 2024 12:55:52 +0000"  >&lt;p&gt;Hello. I would like to work on this ticket, can someone please assign me to it? There is another Jira opened for this issue as well: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-36137&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-36137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I also would like to clarify my understanding on how we fix this. I think we need to update the validation of the &lt;b&gt;jarURI&lt;/b&gt;&#160;in native mode (&lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-kubernetes/src/main/java/org/apache/flink/kubernetes/KubernetesClusterDescriptor.java#L221)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;KubernetesClusterDescriptor.java)&lt;/a&gt; and also how the jar file is fetched for application entrypoint in (&lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-kubernetes/src/main/java/org/apache/flink/kubernetes/entrypoint/KubernetesApplicationClusterEntrypoint.java#L129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;KubernetesApplicationClusterEntrypoint.java)&lt;/a&gt;, so that similar to the standalone mode, the pipeline.jars is passed with a null value to allow using the jar from the classpath instead. Please let me know if this sounds right.&#160;&lt;/p&gt;</comment>
                            <comment id="17895275" author="JIRAUSER298404" created="Mon, 4 Nov 2024 12:32:05 +0000"  >&lt;p&gt;I raised a PR to fix this issue, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trystan&quot; class=&quot;user-hover&quot; rel=&quot;trystan&quot;&gt;trystan&lt;/a&gt; can you please take a look if you have time? Thank you.&#160;&lt;/p&gt;</comment>
                            <comment id="17916171" author="trystan" created="Wed, 22 Jan 2025 19:31:56 +0000"  >&lt;p&gt;I think it makes sense to me. Not sure how something like this is handled with Flink 2.0 on the horizon, though.&lt;/p&gt;

&lt;p&gt;This issue still crops up and bites us from time to time, so I think this would be a positive change.&lt;/p&gt;</comment>
                            <comment id="17987019" author="JIRAUSER306586" created="Mon, 30 Jun 2025 19:51:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tinaselenge&quot; class=&quot;user-hover&quot; rel=&quot;tinaselenge&quot;&gt;tinaselenge&lt;/a&gt; , can you open a backport PR against the &lt;tt&gt;release-2.1&lt;/tt&gt; branch? IMO it would worth to push this out the door in that release and do not wait for another 6 month for Flink 2.2 and the operator to support that version.&lt;/p&gt;</comment>
                            <comment id="17987967" author="JIRAUSER306586" created="Wed, 2 Jul 2025 18:35:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/commit/60404090fdd75fe2cc73991759a65f35eab8dd3c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;6040409&lt;/tt&gt;&lt;/a&gt; in master&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/commit/06dab65f5b73f17b8f2bc0be4360694be7e9fadc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;06dab65&lt;/tt&gt;&lt;/a&gt; in release-2.1&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/commit/0a278ed2ddcf03921382db889d9e7b7b279dcc8c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;0a278ed&lt;/tt&gt;&lt;/a&gt; in release-2.0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1medc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>