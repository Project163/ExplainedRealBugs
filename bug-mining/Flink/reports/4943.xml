<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:51:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-19880] Fix ignore-parse-errors not work for the legacy JSON format</title>
                <link>https://issues.apache.org/jira/browse/FLINK-19880</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;when I call&lt;br/&gt;
 new Json(). ignoreParseErrors (true)&lt;br/&gt;
 When used to ignore exceptions, the following exceptions always occur:&lt;br/&gt;
 org.apache.flink. formats.json.JsonRowFormatFactory&lt;br/&gt;
 Unsupported property keys&#65306;&lt;br/&gt;
 format.ignore-parse-errors&lt;br/&gt;
 Modify this line of code to solve my problem .&lt;/p&gt;

&lt;p&gt;&#160;Add a line of code after 52 lines in this class(org.apache.flink.formats.json.JsonRowFormatFactory):&lt;br/&gt;
properties.add(JsonValidator.FORMAT_IGNORE_PARSE_ERRORS);&lt;/p&gt;


&lt;p&gt; First time to participate in flink submission code, do not understand what rules, directly submitted, sorry&lt;/p&gt;</description>
                <environment></environment>
        <key id="13337841">FLINK-19880</key>
            <summary>Fix ignore-parse-errors not work for the legacy JSON format</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cxiiiiiii">Xiao Cai</assignee>
                                    <reporter username="MingZhangOk">MingZhangOk</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>starter</label>
                    </labels>
                <created>Thu, 29 Oct 2020 09:45:30 +0000</created>
                <updated>Fri, 18 Dec 2020 15:11:00 +0000</updated>
                            <resolved>Fri, 18 Dec 2020 15:11:00 +0000</resolved>
                                    <version>1.11.2</version>
                                    <fixVersion>1.12.1</fixVersion>
                    <fixVersion>1.13.0</fixVersion>
                                    <component>Formats (JSON, Avro, Parquet, ORC, SequenceFile)</component>
                    <component>Table SQL / Ecosystem</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="60">1m</timeoriginalestimate>
                            <timeestimate seconds="60">1m</timeestimate>
                                        <comments>
                            <comment id="17222825" author="jark" created="Thu, 29 Oct 2020 10:42:33 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=MingZhangOk&quot; class=&quot;user-hover&quot; rel=&quot;MingZhangOk&quot;&gt;MingZhangOk&lt;/a&gt;, I think this might be a bug in Json format. However, the &lt;tt&gt;Json()&lt;/tt&gt; descriptor API is not recommended to use at this point. It is legacy feature and may has some bugs in it. This will be refactored by FLIP-129 in the next release.&lt;/p&gt;

&lt;p&gt;It is recommend to use DDL to register tables which is more stable and powerful. &lt;/p&gt;</comment>
                            <comment id="17250816" author="jark" created="Thu, 17 Dec 2020 05:51:45 +0000"  >&lt;p&gt;The problem lies in the &lt;tt&gt;JsonRowFormatFactory#supportedFormatProperties&lt;/tt&gt; forgets to include &lt;tt&gt;JsonValidator.FORMAT_IGNORE_PARSE_ERRORS&lt;/tt&gt;.&lt;br/&gt;
So the fix should be very simple and we can add a test to verify this in &lt;tt&gt;JsonRowFormatFactoryTest&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17250826" author="cxiiiiiii" created="Thu, 17 Dec 2020 06:35:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;,I found that there are two places to fix, one is to add support for FORMAT_IGNORE_PARSE_ERRORS as you said, but also need to handle the return value when parsing fails in JsonRowDeserializationSchema#deserialize, which currently returns null, so that the processing in source will be more in line with expectations, so,&#160;I intend to return Row.of(new Row(1)) instead of null.&lt;/p&gt;

&lt;p&gt;Please assign this issue to me.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Best, xiao cai&lt;/p&gt;</comment>
                            <comment id="17251055" author="jark" created="Thu, 17 Dec 2020 12:36:38 +0000"  >&lt;p&gt;What value do you suggest to return?  IIUC, returning null matches the expected behavior documented in the docs: &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-master/dev/table/connectors/formats/json.html#json-ignore-parse-errors&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.apache.org/projects/flink/flink-docs-master/dev/table/connectors/formats/json.html#json-ignore-parse-errors&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17251082" author="cxiiiiiii" created="Thu, 17 Dec 2020 13:21:43 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;I looked carefully at the KafkaDeserializationSchema#deserialize will make a null determination on the deserialized message and only handles the non-null values. So I think it is ok to return null.&lt;/p&gt;</comment>
                            <comment id="17251095" author="jark" created="Thu, 17 Dec 2020 13:36:49 +0000"  >&lt;p&gt;Yes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cxiiiiiii&quot; class=&quot;user-hover&quot; rel=&quot;cxiiiiiii&quot;&gt;cxiiiiiii&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17251807" author="jark" created="Fri, 18 Dec 2020 15:11:00 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;master: fc660274a5c7b4cdea00335cac87bdf5d421db92&lt;/li&gt;
	&lt;li&gt;release-1.12: 3bfb2ab611acff9f0db28f95878032c80f3ae815&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0k43s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>