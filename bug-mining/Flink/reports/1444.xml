<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:26:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5496] ClassCastException when using Mesos HA mode</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5496</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When using the Mesos&apos; HA mode, one cannot start the Mesos appmaster, because the following class cast exception occurs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.ClassCastException: org.apache.flink.shaded.org.apache.curator.framework.imps.CuratorFrameworkImpl cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to org.apache.flink.mesos.shaded.org.apache.curator.framework.CuratorFramework
	at org.apache.flink.mesos.util.ZooKeeperUtils.startCuratorFramework(ZooKeeperUtils.java:38)
	at org.apache.flink.mesos.runtime.clusterframework.MesosApplicationMasterRunner.createWorkerStore(MesosApplicationMasterRunner.java:510)
	at org.apache.flink.mesos.runtime.clusterframework.MesosApplicationMasterRunner.runPrivileged(MesosApplicationMasterRunner.java:320)
	at org.apache.flink.mesos.runtime.clusterframework.MesosApplicationMasterRunner$1.call(MesosApplicationMasterRunner.java:178)
	at org.apache.flink.mesos.runtime.clusterframework.MesosApplicationMasterRunner$1.call(MesosApplicationMasterRunner.java:175)
	at org.apache.flink.runtime.security.NoOpSecurityContext.runSecured(NoOpSecurityContext.java:29)
	at org.apache.flink.mesos.runtime.clusterframework.MesosApplicationMasterRunner.run(MesosApplicationMasterRunner.java:175)
	at org.apache.flink.mesos.runtime.clusterframework.MesosApplicationMasterRunner.main(MesosApplicationMasterRunner.java:135)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems as if the &lt;tt&gt;flink-mesos&lt;/tt&gt; module relocates the curator dependency in another namespace than &lt;tt&gt;flink-runtime&lt;/tt&gt;. Not sure why this is done. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13035046">FLINK-5496</key>
            <summary>ClassCastException when using Mesos HA mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Jan 2017 19:23:25 +0000</created>
                <updated>Mon, 23 Jan 2017 12:29:44 +0000</updated>
                            <resolved>Mon, 23 Jan 2017 12:29:44 +0000</resolved>
                                    <version>1.2.0</version>
                    <version>1.3.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>Deployment / Mesos</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15823960" author="till.rohrmann" created="Mon, 16 Jan 2017 13:23:57 +0000"  >&lt;p&gt;The root cause seems to be that multiple modules: &lt;tt&gt;flink-runtime&lt;/tt&gt;, &lt;tt&gt;flink-mesos&lt;/tt&gt; and &lt;tt&gt;flink-kafka-0.8&lt;/tt&gt; relocate the curator dependency with different relocation patterns. I propose to introduce a common relocation pattern for the curator dependency in the parent pom.xml file.&lt;/p&gt;</comment>
                            <comment id="15824076" author="till.rohrmann" created="Mon, 16 Jan 2017 14:37:53 +0000"  >&lt;p&gt;Actually, this does not work well, because we expose curator in our internal APIs, e.g. &lt;tt&gt;ZooKeeperStateHandleStore&lt;/tt&gt; requires a &lt;tt&gt;CuratorFramework&lt;/tt&gt; argument. Thus, relocating this code causes trouble when using the &lt;tt&gt;ZooKeeperStateHandleStore&lt;/tt&gt; outside of the &lt;tt&gt;flink-runtime&lt;/tt&gt; module. Ideally, we would not have to shade curator internally.&lt;/p&gt;</comment>
                            <comment id="15828266" author="githubbot" created="Wed, 18 Jan 2017 15:25:58 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3156&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3156&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5496&quot; title=&quot;ClassCastException when using Mesos HA mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5496&quot;&gt;&lt;del&gt;FLINK-5496&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;mesos&amp;#93;&lt;/span&gt; Relocate Mesos Protobuf dependency to avoid version conflicts&lt;/p&gt;

&lt;p&gt;    This PR is based on #3155.&lt;/p&gt;

&lt;p&gt;    Only relocate Mesos Protobuf dependency in flink-mesos. This avoids problems with Mesos&lt;br/&gt;
    because Flink pulls in Protobuf 2.5.0 via Flakka.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; mesosFixRelocation&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3156.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3156.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3156&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e68688f31ead68851a0f768a7270d8bc1b5f9ac8&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-01-16T13:01:10Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5496&quot; title=&quot;ClassCastException when using Mesos HA mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5496&quot;&gt;&lt;del&gt;FLINK-5496&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;mesos&amp;#93;&lt;/span&gt; Relocate Mesos Protobuf dependency to avoid version conflicts&lt;/p&gt;

&lt;p&gt;    Only relocate Mesos Protobuf dependency in flink-mesos. This avoids problems with Mesos&lt;br/&gt;
    because Flink pulls in Protobuf 2.5.0 via Flakka.&lt;/p&gt;

&lt;p&gt;commit dd2f56568745ade036de4d0ee333e7e7fdb47400&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-01-16T13:14:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5495&quot; title=&quot;ZooKeeperMesosWorkerStore cannot be instantiated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5495&quot;&gt;&lt;del&gt;FLINK-5495&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;mesos&amp;#93;&lt;/span&gt; Provide executor to ZooKeeperMesosWorkerStore&lt;/p&gt;

&lt;p&gt;    The ZooKeeperMesosWorkerStore instantiates a ZooKeeperStateHandleStore which requires an&lt;br/&gt;
    Executor instance. This executor is now given to the ZooKeeperMesosWorkerStore.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15829960" author="githubbot" created="Thu, 19 Jan 2017 13:49:06 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3156&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3156&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge (I assume you&apos;ve tested this)&lt;/p&gt;</comment>
                            <comment id="15829964" author="githubbot" created="Thu, 19 Jan 2017 13:51:25 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3156&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3156&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes I did.&lt;/p&gt;</comment>
                            <comment id="15834109" author="githubbot" created="Mon, 23 Jan 2017 09:18:00 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3156&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3156&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for your review @rmetzger. Merging this PR.&lt;/p&gt;</comment>
                            <comment id="15834272" author="githubbot" created="Mon, 23 Jan 2017 11:06:52 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3156&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3156&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15834384" author="till.rohrmann" created="Mon, 23 Jan 2017 12:29:44 +0000"  >&lt;p&gt;1.3.0: Fixed via 04f4ecccc15f619bad00b8bd6fd727686a6b30dc&lt;br/&gt;
1.2.0: Fixed via b02521262322098a7feb2a8bdb7442c21edeefd6&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 43 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38qef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>