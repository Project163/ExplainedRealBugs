<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:56:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-22368] UnalignedCheckpointITCase hangs on azure</title>
                <link>https://issues.apache.org/jira/browse/FLINK-22368</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16818&amp;amp;view=logs&amp;amp;j=b0a398c0-685b-599c-eb57-c8c2a771138e&amp;amp;t=d13f554f-d4b9-50f8-30ee-d49c6fb0b3cc&amp;amp;l=10144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16818&amp;amp;view=logs&amp;amp;j=b0a398c0-685b-599c-eb57-c8c2a771138e&amp;amp;t=d13f554f-d4b9-50f8-30ee-d49c6fb0b3cc&amp;amp;l=10144&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13373768">FLINK-22368</key>
            <summary>UnalignedCheckpointITCase hangs on azure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roman">Roman Khachatryan</assignee>
                                    <reporter username="dwysakowicz">Dawid Wysakowicz</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 20 Apr 2021 06:57:05 +0000</created>
                <updated>Tue, 22 Jun 2021 13:55:43 +0000</updated>
                            <resolved>Mon, 3 May 2021 12:56:32 +0000</resolved>
                                    <version>1.13.0</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.13.1</fixVersion>
                    <fixVersion>1.12.4</fixVersion>
                                    <component>Runtime / Task</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17325641" author="arvid" created="Tue, 20 Apr 2021 09:27:28 +0000"  >&lt;p&gt;The test doesn&apos;t finish as checkpointing gets stuck in the last execution attempt (5):&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;23:02:26,104 [flink-akka.actor.default-dispatcher-4] INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph       [] - Job Flink Streaming Job (5d70bcb288d90589845e39c2953b27c3) switched from state RESTARTING to RUNNING.
23:02:26,118 [flink-akka.actor.default-dispatcher-4] INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph       [] - Source: source (2/20) (2d3357d530b11041d123bde87da7584b) switched from INITIALIZING to RUNNING.
... (in total all 100 tasks are RUNNING)
23:02:26,347 [flink-akka.actor.default-dispatcher-2] INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph       [] - failing-map (10/20) (23870b8b94e5ea774ca3da72a7ca7251) switched from INITIALIZING to RUNNING.
...
23:02:27,165 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint for job 5d70bcb288d90589845e39c2953b27c3 since some tasks of job 5d70bcb288d90589845e39c2953b27c3 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
23:02:28,165 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint for job 5d70bcb288d90589845e39c2953b27c3 since some tasks of job 5d70bcb288d90589845e39c2953b27c3 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
... (in total 10k failed to trigger...)
01:55:56,165 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint for job 5d70bcb288d90589845e39c2953b27c3 since some tasks of job 5d70bcb288d90589845e39c2953b27c3 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17325647" author="arvid" created="Tue, 20 Apr 2021 09:32:32 +0000"  >&lt;p&gt;Okay, it makes sense that it doesn&apos;t checkpoint as&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;23:02:26,166 [Source: source (3/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (3/20)#5 (f45d32db48b407a34edc6dc048c5e0c2) switched from RUNNING to FINISHED.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m investigating further.&lt;/p&gt;</comment>
                            <comment id="17325658" author="arvid" created="Tue, 20 Apr 2021 09:41:22 +0000"  >&lt;p&gt;All source tasks are finished, but the job is not finishing for some reason&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;23:02:26,166 [Source: source (3/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (3/20)#5 (f45d32db48b407a34edc6dc048c5e0c2) switched from RUNNING to FINISHED.
23:02:26,167 [Source: source (8/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (8/20)#5 (53d62fcb80e6b2e5ee7657033a555d6f) switched from RUNNING to FINISHED.
23:02:26,166 [Source: source (7/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (7/20)#5 (1147339526bf7fadcd47ef579c4c4130) switched from RUNNING to FINISHED.
23:02:26,168 [Source: source (2/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (2/20)#5 (2d3357d530b11041d123bde87da7584b) switched from RUNNING to FINISHED.
23:02:26,170 [Source: source (9/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (9/20)#5 (426fbb3a5b561a61affed4c40b0a8f8a) switched from RUNNING to FINISHED.
23:02:26,171 [Source: source (1/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (1/20)#5 (a5585ddf277047a6d2b67d8d3cf2cd0e) switched from RUNNING to FINISHED.
23:02:26,213 [Source: source (5/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (5/20)#5 (9ad44b9747f266816750e98063306fc4) switched from RUNNING to FINISHED.
23:02:26,216 [Source: source (20/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (20/20)#5 (d92ff5256f0c3e1e2a43c7413f6ce71f) switched from RUNNING to FINISHED.
23:02:26,215 [Source: source (13/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (13/20)#5 (327096e9fc8562fdc0ea12e031f98749) switched from RUNNING to FINISHED.
23:02:26,215 [Source: source (10/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (10/20)#5 (456858f8cd5fca51c09519f29b21641e) switched from RUNNING to FINISHED.
23:02:26,223 [Source: source (18/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (18/20)#5 (8a75c4257e592a008bca8f0a29c5e856) switched from RUNNING to FINISHED.
23:02:26,223 [Source: source (16/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (16/20)#5 (c17c62b90c66f7bd11debe913916fd89) switched from RUNNING to FINISHED.
23:02:26,225 [Source: source (11/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (11/20)#5 (dd463d97b55ee56bcb6e2853760e3daf) switched from RUNNING to FINISHED.
23:02:26,239 [Source: source (19/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (19/20)#5 (202827bf688aa5c206bd3b900ad3beb2) switched from RUNNING to FINISHED.
23:02:26,240 [Source: source (4/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (4/20)#5 (475c75d73150c1d20eaaa185f96c81e1) switched from RUNNING to FINISHED.
23:02:26,245 [Source: source (17/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (17/20)#5 (afb774c210e06bd3e62d42e749c22417) switched from RUNNING to FINISHED.
23:02:26,245 [Source: source (6/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (6/20)#5 (776d580fcfd5ddf38643822311884d70) switched from RUNNING to FINISHED.
23:02:26,246 [Source: source (14/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (14/20)#5 (7eccee9beab3b7e6b5977d5f726e9c9e) switched from RUNNING to FINISHED.
23:02:26,245 [Source: source (15/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (15/20)#5 (45df84d24e611dfd7d972795548a7f33) switched from RUNNING to FINISHED.
23:02:26,252 [Source: source (12/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: source (12/20)#5 (65cad528fa7a6e0fe6822c4677d8797a) switched from RUNNING to FINISHED.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;failing-map (8/20)#5&lt;/tt&gt; and none of the sinks (naturally) are not finishing.&lt;/p&gt;

&lt;p&gt;I found&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;23:02:26,422 [failing-map (8/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - failing-map (8/20)#5 (77221af17305e76caafacbf7bc696af7) switched from RUNNING to CANCELED.
23:02:26,425 [failing-map (8/20)#5] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Freeing task resources for failing-map (8/20)#5 (77221af17305e76caafacbf7bc696af7).
23:02:26,425 [flink-akka.actor.default-dispatcher-4] INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Un-registering task and sending final execution state CANCELED to JobManager for task failing-map (8/20)#5 77221af17305e76caafacbf7bc696af7.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But I haven&apos;t found any reason why it&apos;s in CANCELED. There is no trace of any FAILING/FAILED in the 5. attempt.&lt;/p&gt;</comment>
                            <comment id="17325873" author="dawidwys" created="Tue, 20 Apr 2021 14:53:10 +0000"  >&lt;p&gt;Is this the same issue? It fails in the UCRescaleITCase: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16865&amp;amp;view=logs&amp;amp;j=34f41360-6c0d-54d3-11a1-0292a2def1d9&amp;amp;t=2d56e022-1ace-542f-bf1a-b37dd63243f2&amp;amp;l=25088&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16865&amp;amp;view=logs&amp;amp;j=34f41360-6c0d-54d3-11a1-0292a2def1d9&amp;amp;t=2d56e022-1ace-542f-bf1a-b37dd63243f2&amp;amp;l=25088&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17326327" author="dawidwys" created="Wed, 21 Apr 2021 07:43:49 +0000"  >&lt;p&gt;Again rescaling IT case hanged: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16915&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=5360d54c-8d94-5d85-304e-a89267eb785a&amp;amp;l=18487&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16915&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=5360d54c-8d94-5d85-304e-a89267eb785a&amp;amp;l=18487&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17326601" author="dawidwys" created="Wed, 21 Apr 2021 14:48:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16949&amp;amp;view=logs&amp;amp;j=34f41360-6c0d-54d3-11a1-0292a2def1d9&amp;amp;t=2d56e022-1ace-542f-bf1a-b37dd63243f2&amp;amp;l=17374&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16949&amp;amp;view=logs&amp;amp;j=34f41360-6c0d-54d3-11a1-0292a2def1d9&amp;amp;t=2d56e022-1ace-542f-bf1a-b37dd63243f2&amp;amp;l=17374&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17332562" author="roman_khachatryan" created="Mon, 26 Apr 2021 16:20:28 +0000"  >&lt;p&gt;I also see that the job is being stuck because one of the tasks transitions from RUNNING to CANCELLED (instead of FINISHED). &lt;br/&gt;
 This happens because RemoteInputChannel is polled after it was released. In such a case&#160;RemoteInputChannel &lt;a href=&quot;https://github.com/apache/flink/blob/e905db9e20950fc605350fad007b1c3e4f09de91/flink-runtime/src/main/java/org/apache/flink/runtime/io/network/partition/consumer/RemoteInputChannel.java#L217&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;throws&lt;/a&gt; CancelTaskException which triggers task cancellation. Cancellation&#160;prevents EndOfPartition event from being propagated and therefore downstream tasks keep running.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ve published a PR to prevent enqueing &quot;released&quot; channel (on receive); and to validate that the channel hasn&apos;t receive EoP (on poll).&lt;/p&gt;</comment>
                            <comment id="17338356" author="roman_khachatryan" created="Mon, 3 May 2021 12:56:32 +0000"  >&lt;p&gt;Merged into 1.12 as afc0a9002c425a95c032a94750a5e9ae45fae8d3.&lt;br/&gt;
Merged into 1.13 as b41c5fab3e3eebb04b891ec2ac0688bedc2d94eb.&lt;br/&gt;
Merged into master as 6e3ccd5a9613a2de06c8ec410ba41e6e0c6959be.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13374764">FLINK-22439</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13368397">FLINK-22019</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13305171">FLINK-17726</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0q8co:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>