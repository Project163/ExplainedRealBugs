<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:33:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9384] KafkaAvroTableSource failed to work due to type mismatch</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9384</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;An&#160;exception was thrown when using KafkaAvroTableSource as follows:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.flink.table.api.TableException: TableSource of type org.apache.flink.streaming.connectors.kafka.Kafka011AvroTableSource returned a DataStream of type GenericType&amp;lt;org.apache.flink.types.Row&amp;gt; that does not match with the type Row(id: Integer, name: String, age: Integer, event: GenericType&amp;lt;java.util.Map&amp;gt;) declared by the TableSource.getReturnType() method. Please validate the implementation of the TableSource.&lt;br/&gt;
 at org.apache.flink.table.plan.nodes.datastream.StreamTableSourceScan.translateToPlan(StreamTableSourceScan.scala:100)&lt;br/&gt;
 at org.apache.flink.table.api.StreamTableEnvironment.translateToCRow(StreamTableEnvironment.scala:885)&lt;br/&gt;
 at org.apache.flink.table.api.StreamTableEnvironment.translate(StreamTableEnvironment.scala:812)&lt;br/&gt;
 at org.apache.flink.table.api.StreamTableEnvironment.writeToSink(StreamTableEnvironment.scala:279)&lt;br/&gt;
 at org.apache.flink.table.api.Table.writeToSink(table.scala:862)&lt;br/&gt;
 at org.apache.flink.table.api.Table.writeToSink(table.scala:830)&lt;br/&gt;
 at org.apache.flink.quickstart.StreamingJobAvro.main(StreamingJobAvro.java:85)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It&#160;is caused by a&#160;discrepancy between the type returned by the TableSource and the type returned by the DataStream. I&apos;ve already fixed it, would someone please review the patch and see if it could be merged.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13159747">FLINK-9384</key>
            <summary>KafkaAvroTableSource failed to work due to type mismatch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="junz">Jun Zhang</reporter>
                        <labels>
                            <label>easyfix</label>
                            <label>patch</label>
                    </labels>
                <created>Wed, 16 May 2018 13:59:25 +0000</created>
                <updated>Fri, 25 May 2018 07:07:34 +0000</updated>
                            <resolved>Fri, 25 May 2018 07:07:11 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>Connectors / Kafka</component>
                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16477682" author="githubbot" created="Wed, 16 May 2018 16:28:28 +0000"  >&lt;p&gt;GitHub user tragicjun opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9384&quot; title=&quot;KafkaAvroTableSource failed to work due to type mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9384&quot;&gt;&lt;del&gt;FLINK-9384&lt;/del&gt;&lt;/a&gt;KafkaAvroTableSource failed to work due to type mismatch&lt;/p&gt;

&lt;p&gt;    &lt;b&gt;Thank you very much for contributing to Apache Flink - we are happy that you want to help us improve Flink. To help the community review your contribution in the best possible way, please go through the checklist below, which will get the contribution into a shape in which it can be best reviewed.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    &lt;b&gt;Please understand that we do not do this to make contributions to Flink a hassle. In order to uphold a high standard of quality for code contributions, while at the same time managing a large number of contributions, we need contributors to prepare the contributions well, and give reviewers enough contextual information for the review. Please also understand that contributions that do not follow this guide will take longer to review and thus typically be picked up with lower priority by the community.&lt;/b&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Contribution Checklist&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make sure that the pull request corresponds to a &lt;span class=&quot;error&quot;&gt;&amp;#91;JIRA issue&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/projects/FLINK/issues&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/FLINK/issues&lt;/a&gt;). Exceptions are made for typos in JavaDoc or documentation files, which need no JIRA issue.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Name the pull request in the form &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;FLINK-XXXX&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;component&amp;#93;&lt;/span&gt; Title of the pull request&quot;, where &lt;b&gt;FLINK-XXXX&lt;/b&gt; should be replaced by the actual issue number. Skip &lt;b&gt;component&lt;/b&gt; if you are unsure about which is the best component.&lt;br/&gt;
      Typo fixes that have no associated JIRA issue should be named following this pattern: `&lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;docs&amp;#93;&lt;/span&gt; Fix typo in event time introduction` or `&lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;javadocs&amp;#93;&lt;/span&gt; Expand JavaDoc for PuncuatedWatermarkGenerator`.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fill out the template below to describe the changes contributed by the pull request. That will give reviewers the context they need to do the review.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make sure that the change passes the automated tests, i.e., `mvn clean verify` passes. You can set up Travis CI to do that following &lt;span class=&quot;error&quot;&gt;&amp;#91;this guide&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://flink.apache.org/contribute-code.html#best-practices&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://flink.apache.org/contribute-code.html#best-practices&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Each pull request should address only one issue, not mix up code from multiple issues.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Each commit in the pull request has a meaningful commit message (including the JIRA id)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Once all items of the checklist are addressed, remove the above text and this checklist, leaving only the filled out template below.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;    *&lt;b&gt;(The sections below can be removed for hotfixes of typos)&lt;/b&gt;*&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    &lt;b&gt;(For example: This pull request makes task deployment go through the blob server, rather than through RPC. That way we avoid re-transferring them on each deployment (during recovery).)&lt;/b&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    &lt;b&gt;(for example&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/b&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;The TaskInfo is stored in the blob store on job creation time as a persistent artifact&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Deployments RPC transmits only the blob storage reference&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;TaskManagers retrieve the TaskInfo from the blob cache&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    &lt;b&gt;(Please pick either of the following options)&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    This change is a trivial rework / code cleanup without any test coverage.&lt;/p&gt;

&lt;p&gt;    &lt;b&gt;(or)&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    This change is already covered by existing tests, such as &lt;b&gt;(please describe tests)&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;    &lt;b&gt;(or)&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    This change added tests and can be verified as follows:&lt;/p&gt;

&lt;p&gt;    &lt;b&gt;(example&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/b&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Added integration tests for end-to-end deployment with large payloads (100MB)&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Extended integration test for recovery after master (JobManager) failure&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Added test that validates that TaskInfo is transferred only once across recoveries&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Manually verified the change by running a 4 node cluser with 2 JobManagers and 4 TaskManagers, a stateful streaming program, and killing one JobManager and two TaskManagers during the execution, verifying that recovery happens correctly.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / no)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / no / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tragicjun/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tragicjun/flink&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #6026&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 802e7e211b7bea6fd17b88a058591272f0fb215f&lt;br/&gt;
Author: jerryjzhang &amp;lt;zhangjun2915@...&amp;gt;&lt;br/&gt;
Date:   2018-05-16T16:27:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9384&quot; title=&quot;KafkaAvroTableSource failed to work due to type mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9384&quot;&gt;&lt;del&gt;FLINK-9384&lt;/del&gt;&lt;/a&gt;KafkaAvroTableSource failed to work due to type mismatch&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16478189" author="githubbot" created="Wed, 16 May 2018 22:06:25 +0000"  >&lt;p&gt;Github user suez1224 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026#discussion_r188786194&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026#discussion_r188786194&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaAvroTableSource.java &amp;#8212;&lt;br/&gt;
    @@ -81,7 +85,12 @@ public String explainSource() {&lt;/p&gt;

&lt;p&gt;     	@Override&lt;br/&gt;
     	protected AvroRowDeserializationSchema getDeserializationSchema() &lt;/p&gt;
{
    -		return new AvroRowDeserializationSchema(avroRecordClass);
    +		return new AvroRowDeserializationSchema(avroRecordClass, tableSchemaToReturnType(schema));
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/** Converts the table schema into into the return type. */&lt;br/&gt;
    +	private static RowTypeInfo tableSchemaToReturnType(TableSchema tableSchema) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Do you need this extra function, I think just inlining it should be fine.&lt;/p&gt;</comment>
                            <comment id="16478190" author="githubbot" created="Wed, 16 May 2018 22:06:25 +0000"  >&lt;p&gt;Github user suez1224 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026#discussion_r188786307&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026#discussion_r188786307&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java &amp;#8212;&lt;br/&gt;
    @@ -110,6 +116,8 @@ private void writeObject(ObjectOutputStream oos) throws IOException &lt;/p&gt;
{
     		oos.writeObject(recordClazz);
     	}

&lt;p&gt;    +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    extra blank line here.&lt;/p&gt;</comment>
                            <comment id="16478438" author="githubbot" created="Thu, 17 May 2018 03:19:42 +0000"  >&lt;p&gt;Github user tragicjun commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @suez1224 for reviewing. I&apos;ve committed a new patch as per your suggestions. As for the unit test, the issue was exposed in my integration tests which requires a kafka setup, any advice on how it could be done in unit tests? &lt;/p&gt;</comment>
                            <comment id="16481498" author="githubbot" created="Sat, 19 May 2018 07:18:56 +0000"  >&lt;p&gt;Github user tragicjun commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @suez1224, I&apos;ve added some checks in the unit tests(KafkaAvroTableSourceTestBase), which would fail before the fix. Meanwhile, I found an issue in the previous version (specifically,  the produced type info should be inferred from AvroRecordClass not TableSchema), which has been fixed. Would you please take a review?  &lt;/p&gt;</comment>
                            <comment id="16481664" author="githubbot" created="Sat, 19 May 2018 15:25:11 +0000"  >&lt;p&gt;Github user tragicjun commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026#discussion_r189437087&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026#discussion_r189437087&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaAvroTableSource.java &amp;#8212;&lt;br/&gt;
    @@ -81,7 +85,12 @@ public String explainSource() {&lt;/p&gt;

&lt;p&gt;     	@Override&lt;br/&gt;
     	protected AvroRowDeserializationSchema getDeserializationSchema() &lt;/p&gt;
{
    -		return new AvroRowDeserializationSchema(avroRecordClass);
    +		return new AvroRowDeserializationSchema(avroRecordClass, tableSchemaToReturnType(schema));
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/** Converts the table schema into into the return type. */&lt;br/&gt;
    +	private static RowTypeInfo tableSchemaToReturnType(TableSchema tableSchema) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Extra function has been removed.&lt;/p&gt;</comment>
                            <comment id="16481665" author="githubbot" created="Sat, 19 May 2018 15:25:22 +0000"  >&lt;p&gt;Github user tragicjun commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026#discussion_r189437091&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026#discussion_r189437091&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java &amp;#8212;&lt;br/&gt;
    @@ -110,6 +116,8 @@ private void writeObject(ObjectOutputStream oos) throws IOException &lt;/p&gt;
{
     		oos.writeObject(recordClazz);
     	}

&lt;p&gt;    +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    nice catch.&lt;/p&gt;</comment>
                            <comment id="16486928" author="githubbot" created="Wed, 23 May 2018 08:58:37 +0000"  >&lt;p&gt;Github user twalthr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026#discussion_r190169511&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026#discussion_r190169511&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java &amp;#8212;&lt;br/&gt;
    @@ -76,19 +77,35 @@&lt;br/&gt;
     	 */&lt;br/&gt;
     	private SpecificRecord record;&lt;/p&gt;

&lt;p&gt;    +	/** Type information describing the result type.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private final TypeInformation&amp;lt;Row&amp;gt; typeInfo;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Declare this transient?&lt;/p&gt;</comment>
                            <comment id="16486929" author="githubbot" created="Wed, 23 May 2018 08:58:37 +0000"  >&lt;p&gt;Github user twalthr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026#discussion_r190170050&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026#discussion_r190170050&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java &amp;#8212;&lt;br/&gt;
    @@ -76,19 +77,35 @@&lt;br/&gt;
     	 */&lt;br/&gt;
     	private SpecificRecord record;&lt;/p&gt;

&lt;p&gt;    +	/** Type information describing the result type.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private final TypeInformation&amp;lt;Row&amp;gt; typeInfo;&lt;br/&gt;
    +&lt;br/&gt;
     	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Creates a Avro deserialization schema for the given record.&lt;br/&gt;
     	 *&lt;/li&gt;
	&lt;li&gt;@param recordClazz Avro record class used to deserialize Avro&apos;s record to Flink&apos;s row&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public AvroRowDeserializationSchema(Class&amp;lt;? extends SpecificRecord&amp;gt; recordClazz) {&lt;br/&gt;
    +	public AvroRowDeserializationSchema(Class&amp;lt;? extends SpecificRecord&amp;gt; recordClazz)
{
    +		this(recordClazz, null);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Creates a Avro deserialization schema for the given record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param recordClazz Avro record class used to deserialize Avro&apos;s record to Flink&apos;s row&lt;br/&gt;
    +	 * @param typeInfo Type information describing the result type.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	public AvroRowDeserializationSchema(Class&amp;lt;? extends SpecificRecord&amp;gt; recordClazz, TypeInformation&amp;lt;Row&amp;gt; typeInfo) {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This constructor is not required. We should always use the result of the `AvroRecordClassConverter`.&lt;/p&gt;</comment>
                            <comment id="16486930" author="githubbot" created="Wed, 23 May 2018 08:58:37 +0000"  >&lt;p&gt;Github user twalthr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026#discussion_r190169591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026#discussion_r190169591&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java &amp;#8212;&lt;br/&gt;
    @@ -76,19 +77,35 @@&lt;br/&gt;
     	 */&lt;br/&gt;
     	private SpecificRecord record;&lt;/p&gt;

&lt;p&gt;    +	/** Type information describing the result type.&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Put the text one line down.&lt;/p&gt;</comment>
                            <comment id="16487469" author="githubbot" created="Wed, 23 May 2018 15:28:12 +0000"  >&lt;p&gt;Github user tragicjun commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @twalthr Thanks for the comment. I&apos;ve commited a new version as per your suggestion. Particularly, I agree that TypeInfomation should always be derived from the &apos;avroRecrodClass&apos;, but the constructor of AvroRowDeserializationSchema only takes argument as type &apos;Class&amp;lt;? extends SpecificRecord&amp;gt;&apos;. In this version I&apos;ve changed the argument as &apos;Class&amp;lt;? extends SpecificRecordBase&amp;gt;&apos; and fixed relevant test cases accordingly. This version of fix has passed relevant unit tests and my local integration tests. &lt;/p&gt;</comment>
                            <comment id="16488683" author="githubbot" created="Thu, 24 May 2018 09:04:12 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thank you @tragicjun. LGTM. Merging...&lt;/p&gt;</comment>
                            <comment id="16488711" author="githubbot" created="Thu, 24 May 2018 09:25:29 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tragicjun this PR is hard to merge with 6 commits and a merge branch in the middle. Can you squash your commits into one commit that is rebased on the current master and do a force push?&lt;/p&gt;</comment>
                            <comment id="16488817" author="githubbot" created="Thu, 24 May 2018 11:26:29 +0000"  >&lt;p&gt;Github user tragicjun commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @twalthr sure, just a second, I never did this before, let me try&lt;/p&gt;</comment>
                            <comment id="16488977" author="githubbot" created="Thu, 24 May 2018 13:27:43 +0000"  >&lt;p&gt;Github user tragicjun commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @twalthr the latest commit could be merged which contains all the changes.&lt;/p&gt;</comment>
                            <comment id="16490329" author="twalthr" created="Fri, 25 May 2018 07:07:11 +0000"  >&lt;p&gt;Fixed in 1.6.0: bc8d1b1f61deff51f131ab243f25f676f465e240&lt;/p&gt;</comment>
                            <comment id="16490330" author="githubbot" created="Fri, 25 May 2018 07:07:34 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6026&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12923699" name="flink-9384.patch" size="4827" author="junz" created="Wed, 16 May 2018 14:00:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tsaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>