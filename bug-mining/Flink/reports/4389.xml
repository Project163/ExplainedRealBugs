<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:48:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-18369] TableEnvironmentITCase.testStatementSetWithSameSinkTableNames failed on azure</title>
                <link>https://issues.apache.org/jira/browse/FLINK-18369</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3778&amp;amp;view=logs&amp;amp;j=b2f046ab-ae17-5406-acdc-240be7e870e4&amp;amp;t=93e5ae06-d194-513d-ba8d-150ef6da1d7c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3778&amp;amp;view=logs&amp;amp;j=b2f046ab-ae17-5406-acdc-240be7e870e4&amp;amp;t=93e5ae06-d194-513d-ba8d-150ef6da1d7c&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.io.IOException: Output path &apos;/tmp/junit6162277837132243514/junit3149129531927352947.tmp&apos; could not be initialized. Canceling task...
	at org.apache.flink.api.common.io.FileOutputFormat.open(FileOutputFormat.java:229)
	at org.apache.flink.api.java.io.TextOutputFormat.open(TextOutputFormat.java:88)
	at org.apache.flink.runtime.operators.DataSinkTask.invoke(DataSinkTask.java:205)
	at org.apache.flink.runtime.taskmanager.Task.doRun(Task.java:721)
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:546)
	at java.lang.Thread.run(Thread.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Errors: 
[ERROR]   TableEnvironmentITCase.testStatementSetWithSameSinkTableNames:557 &#187; Execution ...
[INFO] 
[ERROR] Tests run: 810, Failures: 0, Errors: 1, Skipped: 13
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13312251">FLINK-18369</key>
            <summary>TableEnvironmentITCase.testStatementSetWithSameSinkTableNames failed on azure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dwysakowicz">Dawid Wysakowicz</assignee>
                                    <reporter username="pnowojski">Piotr Nowojski</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 18 Jun 2020 14:35:45 +0000</created>
                <updated>Fri, 10 Jul 2020 07:06:56 +0000</updated>
                            <resolved>Fri, 10 Jul 2020 07:06:56 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.12.0</fixVersion>
                                    <component>Table SQL / Legacy Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17140206" author="jark" created="Fri, 19 Jun 2020 04:32:53 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfreyhe&quot; class=&quot;user-hover&quot; rel=&quot;godfreyhe&quot;&gt;godfreyhe&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17140220" author="godfreyhe" created="Fri, 19 Jun 2020 05:14:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt; is there any failure info ?&lt;/p&gt;</comment>
                            <comment id="17140262" author="pnowojski" created="Fri, 19 Jun 2020 06:48:21 +0000"  >&lt;p&gt;Sorry, I don&apos;t have anything more &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfreyhe&quot; class=&quot;user-hover&quot; rel=&quot;godfreyhe&quot;&gt;godfreyhe&lt;/a&gt;. I&apos;ve attached the url to all information that I had from a build failure.&lt;/p&gt;</comment>
                            <comment id="17140273" author="pnowojski" created="Fri, 19 Jun 2020 06:55:46 +0000"  >&lt;p&gt;Another instance &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3793&amp;amp;view=logs&amp;amp;j=56781494-ebb0-5eae-f732-b9c397ec6ede&amp;amp;t=6568c985-5fcc-5b89-1ebd-0385b8088b14&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3793&amp;amp;view=logs&amp;amp;j=56781494-ebb0-5eae-f732-b9c397ec6ede&amp;amp;t=6568c985-5fcc-5b89-1ebd-0385b8088b14&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17140355" author="dawidwys" created="Fri, 19 Jun 2020 09:20:34 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfreyhe&quot; class=&quot;user-hover&quot; rel=&quot;godfreyhe&quot;&gt;godfreyhe&lt;/a&gt;&lt;br/&gt;
I did a small investigation on it. I think the problem is the usage of &lt;tt&gt;writeAsText&lt;/tt&gt; /&lt;tt&gt;TextOutputFormat&lt;/tt&gt; writing twice to the same path from a single &lt;tt&gt;Job&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;After we switched in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-17383&lt;/a&gt; from a Collection to Cluster execution mode, the job is executed truly parallelized (before every operation was effectively sequential).&lt;/p&gt;

&lt;p&gt;I am not 100% sure what is the purpose of this test, but I see that we do not care about the actual results. Maybe it would be ok to use a different sink, if the purpose is to check the sinks will get suffixed with an id?&lt;/p&gt;</comment>
                            <comment id="17140425" author="dawidwys" created="Fri, 19 Jun 2020 10:38:13 +0000"  >&lt;p&gt;I can confirm that you cannot have a plan with two &lt;tt&gt;DataSet#writeAsTest(...)&lt;/tt&gt; that write to the same path:&lt;/p&gt;

&lt;p&gt;A code like below has exact same problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();
DataSource&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; ds1 = env.fromElements(1, 2, 3);
DataSource&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; ds2 = env.fromElements(1, 2, 3);

&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; resultPath = tempFolder.newFile().toURI().toString();

ds1.writeAsText(resultPath, FileSystem.WriteMode.OVERWRITE);
ds2.writeAsText(resultPath, FileSystem.WriteMode.OVERWRITE);
env.execute();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17140433" author="dawidwys" created="Fri, 19 Jun 2020 10:51:53 +0000"  >&lt;p&gt;I disabled this test temporarily on master via: 497a18e509258d181a1cd92be9900b061ec3ccdd&lt;/p&gt;</comment>
                            <comment id="17154280" author="godfreyhe" created="Thu, 9 Jul 2020 07:26:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; you are right. For &lt;tt&gt;INSERT&lt;/tt&gt; operation, the field names of &lt;tt&gt;TableResult&lt;/tt&gt;&apos;s schema is sink table names, This requires the names are unique. This test just verifies the case of the same sink names and does not check the execution result.&lt;/p&gt;</comment>
                            <comment id="17155217" author="dawidwys" created="Fri, 10 Jul 2020 07:06:56 +0000"  >&lt;p&gt;Fixed in e5bf5dc8e9c42a9d1e63c4025a71f8bdb29a50dd&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13301012">FLINK-17383</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fzm0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>