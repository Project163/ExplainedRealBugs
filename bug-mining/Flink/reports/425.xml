<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1635] Remove Apache Thrift dependency from Flink</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1635</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I&apos;ve added Thrift and Protobuf to Flink to support it out of the box with Kryo.&lt;/p&gt;

&lt;p&gt;However, after trying to access a HCatalog/Hive table yesterday using Flink I found that there is a dependency conflict between Flink and Hive (on thrift).&lt;/p&gt;

&lt;p&gt;Maybe it makes more sense to properly document our serialization framework and provide a &quot;copy&amp;amp;paste&quot; solution on how to get thrift/protobuf et al to work with Flink.&lt;/p&gt;

&lt;p&gt;Please chime in if you are against removing the &quot;out of the box support&quot; for protobuf and kryo.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12778993">FLINK-1635</key>
            <summary>Remove Apache Thrift dependency from Flink</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Mar 2015 09:35:58 +0000</created>
                <updated>Thu, 28 Feb 2019 14:29:22 +0000</updated>
                            <resolved>Mon, 8 Jun 2015 09:21:53 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14344841" author="stephanewen" created="Tue, 3 Mar 2015 09:49:36 +0000"  >&lt;p&gt;I agree, let&apos;s remove this. The way that it currently does out-of-the-box ties it to a specific version, which is bad for both protobuf and thrift.&lt;/p&gt;</comment>
                            <comment id="14366023" author="stephanewen" created="Tue, 17 Mar 2015 20:34:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; This is removed an fixed, if I understand correctly?&lt;/p&gt;</comment>
                            <comment id="14366029" author="rmetzger" created="Tue, 17 Mar 2015 20:37:24 +0000"  >&lt;p&gt;No, I didn&apos;t have time to address this issue yet.&lt;/p&gt;</comment>
                            <comment id="14574634" author="githubbot" created="Fri, 5 Jun 2015 15:03:47 +0000"  >&lt;p&gt;GitHub user mxm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/794&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/794&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1635&quot; title=&quot;Remove Apache Thrift dependency from Flink&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1635&quot;&gt;&lt;del&gt;FLINK-1635&lt;/del&gt;&lt;/a&gt; remove Apache Thrift and Google Protobuf dependencies&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mxm/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mxm/flink&lt;/a&gt; flink-1635&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/794.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/794.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #794&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6305a808015db6e42ce471fbe65b2e280e1aecff&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-06-05T13:36:28Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1635&quot; title=&quot;Remove Apache Thrift dependency from Flink&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1635&quot;&gt;&lt;del&gt;FLINK-1635&lt;/del&gt;&lt;/a&gt; remove Apache Thrift and Google Protobuf dependencies&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14574679" author="githubbot" created="Fri, 5 Jun 2015 15:28:51 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/794#issuecomment-109328706&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/794#issuecomment-109328706&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It would be great if you could add some documentation that explains how users can register the serializers at the ExecutionConfig.&lt;/p&gt;

&lt;p&gt;    I&apos;ve actually added support for these two frameworks because users needed this. It would be nice if your docs would explain how to use Flink with Thrift/Protobuf types (thats also needed for stuff like Parquet)&lt;/p&gt;</comment>
                            <comment id="14574748" author="githubbot" created="Fri, 5 Jun 2015 16:07:27 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/794#issuecomment-109343127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/794#issuecomment-109343127&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Agree with Robert.&lt;/p&gt;

&lt;p&gt;    Still, this should go into the release, it gets several dependency issues out of the way.&lt;/p&gt;</comment>
                            <comment id="14574762" author="githubbot" created="Fri, 5 Jun 2015 16:16:53 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/794#issuecomment-109348573&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/794#issuecomment-109348573&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Sure, adding documentation always makes sense &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I updated the pull request to include documentation on how to register custom serializers with Kryo.&lt;/p&gt;</comment>
                            <comment id="14574774" author="githubbot" created="Fri, 5 Jun 2015 16:22:38 +0000"  >&lt;p&gt;Github user rmetzger commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/794#discussion_r31827450&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/794#discussion_r31827450&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: docs/apis/best_practices.md &amp;#8212;&lt;br/&gt;
    @@ -155,3 +155,41 @@ public static final class Tokenizer extends RichFlatMapFunction&amp;lt;String, Tuple2&amp;lt;S&lt;br/&gt;
     		// .. do more ..&lt;/p&gt;
     {% endhighlight %}&lt;br/&gt;
     &lt;br/&gt;
    +&lt;br/&gt;
    +## Register a custom serializer for your Flink program&lt;br/&gt;
    +&lt;br/&gt;
    +If you use a custom type in your Flink program which cannot be serialized by the&lt;br/&gt;
    +Flink type serializer, Flink falls back to using the generic Kryo&lt;br/&gt;
    +serializer. You may register your own serializer or a serialization system like&lt;br/&gt;
    +Google Protobuf or Apache Thrift with Kryo. To do that, simply register the type&lt;br/&gt;
    +class and the serializer in the `ExecutionConfig` of your Flink program.&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +{% highlight java %}&lt;br/&gt;
    +final ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();&lt;br/&gt;
    +&lt;br/&gt;
    +// register the class of the serializer as serializer for a type&lt;br/&gt;
    +env.getConfig().registerTypeWithKryoSerializer(MyCustomType.class, MyCustomSerializer.class);&lt;br/&gt;
    +&lt;br/&gt;
    +// register an instance as serializer for a type&lt;br/&gt;
    +MySerializer mySerializer = new MySerializer();&lt;br/&gt;
    +env.getConfig().registerTypeWithKryoSerializer(MyCustomType.class, mySerializer);&lt;br/&gt;
    +{% endhighlight %}
&lt;p&gt;    +&lt;br/&gt;
    +Note that your custom serializer has to extend Kryo&apos;s Serializer class. In the&lt;br/&gt;
    +case of Google Protobuf or Apache Thrift, this has already been done for&lt;br/&gt;
    +you:&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;/p&gt;
{% highlight java %}
&lt;p&gt;    +&lt;br/&gt;
    +final ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();&lt;br/&gt;
    +&lt;br/&gt;
    +// register the Google Protobuf serializer with Kryo&lt;br/&gt;
    +env.getConfig().registerTypeWithKryoSerializer(MyCustomType.class, ProtobufSerializer.class);&lt;br/&gt;
    +&lt;br/&gt;
    +// register the serializer included with Apache Thrift as the standard serializer&lt;br/&gt;
    +// TBaseSerializer states it should be initalized as a default Kryo serializer&lt;br/&gt;
    +env.getConfig().addDefaultKryoSerializer(MyCustomType.class, TBaseSerializer.class);&lt;br/&gt;
    +env.getConfig().registerTypeWithKryoSerializer(MyCustomType.class, TMessage.class);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    this seems incorrect&lt;/p&gt;</comment>
                            <comment id="14574789" author="githubbot" created="Fri, 5 Jun 2015 16:32:35 +0000"  >&lt;p&gt;Github user mxm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/794#discussion_r31828328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/794#discussion_r31828328&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: docs/apis/best_practices.md &amp;#8212;&lt;br/&gt;
    @@ -155,3 +155,41 @@ public static final class Tokenizer extends RichFlatMapFunction&amp;lt;String, Tuple2&amp;lt;S&lt;br/&gt;
     		// .. do more ..&lt;/p&gt;
     {% endhighlight %}&lt;br/&gt;
     &lt;br/&gt;
    +&lt;br/&gt;
    +## Register a custom serializer for your Flink program&lt;br/&gt;
    +&lt;br/&gt;
    +If you use a custom type in your Flink program which cannot be serialized by the&lt;br/&gt;
    +Flink type serializer, Flink falls back to using the generic Kryo&lt;br/&gt;
    +serializer. You may register your own serializer or a serialization system like&lt;br/&gt;
    +Google Protobuf or Apache Thrift with Kryo. To do that, simply register the type&lt;br/&gt;
    +class and the serializer in the `ExecutionConfig` of your Flink program.&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +{% highlight java %}&lt;br/&gt;
    +final ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();&lt;br/&gt;
    +&lt;br/&gt;
    +// register the class of the serializer as serializer for a type&lt;br/&gt;
    +env.getConfig().registerTypeWithKryoSerializer(MyCustomType.class, MyCustomSerializer.class);&lt;br/&gt;
    +&lt;br/&gt;
    +// register an instance as serializer for a type&lt;br/&gt;
    +MySerializer mySerializer = new MySerializer();&lt;br/&gt;
    +env.getConfig().registerTypeWithKryoSerializer(MyCustomType.class, mySerializer);&lt;br/&gt;
    +{% endhighlight %}
&lt;p&gt;    +&lt;br/&gt;
    +Note that your custom serializer has to extend Kryo&apos;s Serializer class. In the&lt;br/&gt;
    +case of Google Protobuf or Apache Thrift, this has already been done for&lt;br/&gt;
    +you:&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;/p&gt;
{% highlight java %}
&lt;p&gt;    +&lt;br/&gt;
    +final ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();&lt;br/&gt;
    +&lt;br/&gt;
    +// register the Google Protobuf serializer with Kryo&lt;br/&gt;
    +env.getConfig().registerTypeWithKryoSerializer(MyCustomType.class, ProtobufSerializer.class);&lt;br/&gt;
    +&lt;br/&gt;
    +// register the serializer included with Apache Thrift as the standard serializer&lt;br/&gt;
    +// TBaseSerializer states it should be initalized as a default Kryo serializer&lt;br/&gt;
    +env.getConfig().addDefaultKryoSerializer(MyCustomType.class, TBaseSerializer.class);&lt;br/&gt;
    +env.getConfig().registerTypeWithKryoSerializer(MyCustomType.class, TMessage.class);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    yes, sorry. copy/paste error. fixed.&lt;/p&gt;</comment>
                            <comment id="14574792" author="githubbot" created="Fri, 5 Jun 2015 16:33:50 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/794#issuecomment-109355690&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/794#issuecomment-109355690&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I also added the necessary Maven configuration for the examples.&lt;/p&gt;</comment>
                            <comment id="14574793" author="githubbot" created="Fri, 5 Jun 2015 16:34:02 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/794#issuecomment-109355770&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/794#issuecomment-109355770&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge like this.&lt;/p&gt;</comment>
                            <comment id="14576806" author="githubbot" created="Mon, 8 Jun 2015 09:21:18 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/794&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/794&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 24 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26a3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>