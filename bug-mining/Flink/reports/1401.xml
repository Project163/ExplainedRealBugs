<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:26:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5320] Fix result TypeInformation in WindowedStream.fold(ACC, FoldFunction, WindowFunction)</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5320</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The WindowedStream.fold(ACC, FoldFunction, WindowFunction) does not correctly infer the resultType.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13027500">FLINK-5320</key>
            <summary>Fix result TypeInformation in WindowedStream.fold(ACC, FoldFunction, WindowFunction)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ymarzougui">Yassine Marzougui</assignee>
                                    <reporter username="ymarzougui">Yassine Marzougui</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Dec 2016 16:43:07 +0000</created>
                <updated>Thu, 28 Feb 2019 11:15:57 +0000</updated>
                            <resolved>Wed, 11 Jan 2017 17:10:46 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15744706" author="aljoscha" created="Tue, 13 Dec 2016 09:46:05 +0000"  >&lt;p&gt;It should be &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;		TypeInformation&amp;lt;R&amp;gt; resultType = TypeExtractor.getUnaryOperatorReturnType(
			function, WindowFunction.class, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, foldAccumulatorType, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;right? Weirdly enough it&apos;s done correctly in &lt;tt&gt;AllWindowedStream&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ymarzougui&quot; class=&quot;user-hover&quot; rel=&quot;ymarzougui&quot;&gt;ymarzougui&lt;/a&gt; will you open a PR for a fix or should I do it? We should also have a test for this.&lt;/p&gt;</comment>
                            <comment id="15744767" author="githubbot" created="Tue, 13 Dec 2016 10:15:01 +0000"  >&lt;p&gt;GitHub user ymarzougui opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2995&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5320&quot; title=&quot;Fix result TypeInformation in WindowedStream.fold(ACC, FoldFunction, WindowFunction)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5320&quot;&gt;&lt;del&gt;FLINK-5320&lt;/del&gt;&lt;/a&gt; Fix result TypeInformation in WindowedStream.fold&lt;/p&gt;

&lt;p&gt;    The resultType of the WindowFunction in WindowedStream.fold(ACC, FoldFunction, WindowFunction) can not be inferred correctly because it has the wrong argument, which can lead to an &quot;InvalidTypesException: Input mismatch&quot; exception. This PR corrects its.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ymarzougui/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ymarzougui/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5320&quot; title=&quot;Fix result TypeInformation in WindowedStream.fold(ACC, FoldFunction, WindowFunction)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5320&quot;&gt;&lt;del&gt;FLINK-5320&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2995.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2995.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2995&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2472d718b603d7989fa87d5c8a441381e00bd60f&lt;br/&gt;
Author: Yassine Marzougui &amp;lt;y.marzougui@mindlytix.com&amp;gt;&lt;br/&gt;
Date:   2016-12-13T10:05:50Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5320&quot; title=&quot;Fix result TypeInformation in WindowedStream.fold(ACC, FoldFunction, WindowFunction)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5320&quot;&gt;&lt;del&gt;FLINK-5320&lt;/del&gt;&lt;/a&gt; Fix result TypeInformation in WindowedStream.fold&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15744775" author="ymarzougui" created="Tue, 13 Dec 2016 10:18:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; I just opened a pull request for it. Looks like I missed it only in WindowedStream. However I did not change the tests, I will change them.&lt;/p&gt;</comment>
                            <comment id="15745108" author="githubbot" created="Tue, 13 Dec 2016 13:01:45 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2995&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks a lot, this looks like the correct fix.&lt;br/&gt;
    Usually, we add a small unit test to such fixes to guard the bugfix.&lt;/p&gt;

&lt;p&gt;    Also, the same problem probably exists in the `AllWindowStream`. Would be nice to fix that as well as part of this issue.&lt;/p&gt;

&lt;p&gt;    Would you be up for following up?&lt;/p&gt;</comment>
                            <comment id="15745136" author="githubbot" created="Tue, 13 Dec 2016 13:14:39 +0000"  >&lt;p&gt;Github user ymarzougui commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2995&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes, I will see how to add a unit test and try to add a commit to this PR by the end of the day or tomorrow. Fortunately the fold in `AllWindowStream` is correct, the problem in `WindowStream` is due to a mistake by me when I contributed &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3869&quot; title=&quot;WindowedStream.apply with FoldFunction is too restrictive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3869&quot;&gt;&lt;del&gt;FLINK-3869&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15749732" author="githubbot" created="Wed, 14 Dec 2016 22:39:25 +0000"  >&lt;p&gt;Github user ymarzougui commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2995&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @StephanEwen @aljoscha, I added a test for `WindowedStream.fold()` similar to the one in &lt;span class=&quot;error&quot;&gt;&amp;#91;EventTimeAllWindowCheckpointingITCase&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-tests/src/test/java/org/apache/flink/test/checkpointing/EventTimeAllWindowCheckpointingITCase.java#L285&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/master/flink-tests/src/test/java/org/apache/flink/test/checkpointing/EventTimeAllWindowCheckpointingITCase.java#L285&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15751130" author="githubbot" created="Thu, 15 Dec 2016 11:32:21 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2995&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I have some work in the window translation tests that should make testing this more easy: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5237&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-5237&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @StephanEwen what do you think about merging this in the meantime with this ITCase? I&apos;m somewhat hesitant because these heavy IT cases increase build time.&lt;/p&gt;</comment>
                            <comment id="15818039" author="githubbot" created="Wed, 11 Jan 2017 11:17:56 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2995&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @ymarzougui I finally merged it and added some new unit tests on top instead of the heavy IT case, I hope that&apos;s alright.&lt;/p&gt;

&lt;p&gt;    Thanks for finding this in the first place and fixing it! &#128077; &lt;/p&gt;

&lt;p&gt;    Could you please close this PR?&lt;/p&gt;</comment>
                            <comment id="15818041" author="aljoscha" created="Wed, 11 Jan 2017 11:18:28 +0000"  >&lt;p&gt;Fixed for 1.3 in:&lt;br/&gt;
274cc41a6a43e95243d6e7b3110e16ff6f0ad633&lt;/p&gt;

&lt;p&gt;Waiting for tests to pass on the release-1.2 branch then I&apos;m pushing there as well.&lt;/p&gt;</comment>
                            <comment id="15818148" author="githubbot" created="Wed, 11 Jan 2017 12:15:01 +0000"  >&lt;p&gt;Github user ymarzougui commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2995&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @aljoscha for merging and adding the appropriate tests. Closing the PR.&lt;/p&gt;</comment>
                            <comment id="15818149" author="githubbot" created="Wed, 11 Jan 2017 12:15:01 +0000"  >&lt;p&gt;Github user ymarzougui closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2995&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15818857" author="aljoscha" created="Wed, 11 Jan 2017 17:10:46 +0000"  >&lt;p&gt;Fixed in ebc138841f8f890d47a590496459a0f6f7609d4b for Flink 1.2&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37hnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>