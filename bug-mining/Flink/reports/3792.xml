<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:44:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-16269] Generic type can not be matched when convert table to stream.</title>
                <link>https://issues.apache.org/jira/browse/FLINK-16269</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The query result schema printed by table.printSchema():&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; |-- deviceId: BIGINT
 |-- channel: STRING
 |-- schemaId: BIGINT
 |-- productId: BIGINT
 |-- schema: LEGACY(&apos;RAW&apos;, &apos;ANY&amp;lt;com.yunmo.iot.schema.Schema&amp;gt;&apos;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then excuting table.toRetractStream&lt;span class=&quot;error&quot;&gt;&amp;#91;DeviceSchema&amp;#93;&lt;/span&gt;.print(), exception throwed:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; org.apache.flink.table.api.ValidationException: Field types of query result and registered TableSink do not match.
 Query schema: [deviceId: BIGINT, channel: STRING, schemaId: BIGINT, productId: BIGINT, schema: RAW(&apos;com.yunmo.iot.schema.Schema&apos;, ?)]
 Sink schema: [deviceId: BIGINT, channel: STRING, schemaId: BIGINT, productId: BIGINT, schema: LEGACY(&apos;RAW&apos;, &apos;ANY&amp;lt;com.yunmo.iot.schema.Schema&amp;gt;&apos;)]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The com.yunmo.iot.schema.Schema is a generic type.&lt;/p&gt;

&lt;p&gt;The schema field of Query schema change from LEGACY(&apos;RAW&apos; to RAW, but the Sink schema still a LEGACY(&apos;RAW&apos;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13287407">FLINK-16269</key>
            <summary>Generic type can not be matched when convert table to stream.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jark">Jark Wu</assignee>
                                    <reporter username="xiemeilong">xiemeilong</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 25 Feb 2020 03:55:45 +0000</created>
                <updated>Thu, 14 May 2020 05:56:42 +0000</updated>
                            <resolved>Thu, 5 Mar 2020 11:42:32 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.1</fixVersion>
                    <fixVersion>1.11.0</fixVersion>
                                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17052043" author="jark" created="Thu, 5 Mar 2020 11:42:32 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;mater(1.11.0): 377024ba85058e3ba5fa092aaf5c92be33d7ae09&lt;/li&gt;
	&lt;li&gt;1.10.1: 9685642da56554eb5d0292f3ffe193c48329d423&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17105934" author="xiemeilong" created="Wed, 13 May 2020 03:22:04 +0000"  >&lt;p&gt;After&#160;upgrade&#160;to 1.10.1,&#160; a new&#160;type&#160;mismatch occurred.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.flink.table.api.ValidationException: Field types of query result and registered TableSink  &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not match.
Query schema: [......., evaluator: ROW&amp;lt;`className` STRING, `code` STRING&amp;gt;, ........]
Sink schema: [........, evaluator: LEGACY(&lt;span class=&quot;code-quote&quot;&gt;&apos;STRUCTURED_TYPE&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;POJO&amp;lt;com.yunmo.iot.dsl.GeneratedRuleEvaluator&amp;gt;&apos;&lt;/span&gt;),.......]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The&#160;evaluator&#160;&#160;in&#160;query is&#160;returned&#160;by&#160;a&#160;registed&#160;function,&#160;the&#160;evaluator&#160;in&#160;sink&#160;is&#160;a&#160;field&#160;of&#160;case&#160;class.&#160; they&#160;are&#160;the&#160;same&#160;GeneratedRuleEvaluator class.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17106831" author="xiemeilong" created="Thu, 14 May 2020 03:10:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;Is it the same issue or related?&lt;/p&gt;</comment>
                            <comment id="17106855" author="jark" created="Thu, 14 May 2020 03:51:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiemeilong&quot; class=&quot;user-hover&quot; rel=&quot;xiemeilong&quot;&gt;xiemeilong&lt;/a&gt; Could you create another issue for this and provide the code which can reproduce the exception?&lt;/p&gt;</comment>
                            <comment id="17106933" author="xiemeilong" created="Thu, 14 May 2020 05:56:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160; &#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FLINK-17683 &lt;/a&gt;&lt;br/&gt;
 &#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bumo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>