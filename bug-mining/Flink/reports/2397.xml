<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:33:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8237] BucketingSink throws NPE when Writer.duplicate returns null</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8237</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Users need to look into Flink code to find the cause. We could catch that null before even running the job.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException
        at org.apache.flink.streaming.connectors.fs.bucketing.BucketingSink.openNewPartFile(BucketingSink.java:546)
        at org.apache.flink.streaming.connectors.fs.bucketing.BucketingSink.invoke(BucketingSink.java:441)
        at org.apache.flink.streaming.api.operators.StreamSink.processElement(StreamSink.java:41)
        at org.apache.flink.streaming.runtime.tasks.OperatorChain$CopyingChainingOutput.pushToOperator(OperatorChain.java:528)
        at org.apache.flink.streaming.runtime.tasks.OperatorChain$CopyingChainingOutput.collect(OperatorChain.java:503)
        at org.apache.flink.streaming.runtime.tasks.OperatorChain$CopyingChainingOutput.collect(OperatorChain.java:483)
        at org.apache.flink.streaming.api.operators.AbstractStreamOperator$CountingOutput.collect(AbstractStreamOperator.java:891)
        at org.apache.flink.streaming.api.operators.AbstractStreamOperator$CountingOutput.collect(AbstractStreamOperator.java:869)
        at org.apache.flink.streaming.api.operators.StreamFilter.processElement(StreamFilter.java:40)
        at org.apache.flink.streaming.runtime.io.StreamInputProcessor.processInput(StreamInputProcessor.java:206)
        at org.apache.flink.streaming.runtime.tasks.OneInputStreamTask.run(OneInputStreamTask.java:69)
        at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:263)
        at org.apache.flink.runtime.taskmanager.Task.run(Task.java:702)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13124130">FLINK-8237</key>
            <summary>BucketingSink throws NPE when Writer.duplicate returns null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pshvetso">Pavel Shvetsov</assignee>
                                    <reporter username="gaborhermann">G&#225;bor Hermann</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Dec 2017 13:27:39 +0000</created>
                <updated>Mon, 7 May 2018 20:28:00 +0000</updated>
                            <resolved>Mon, 7 May 2018 20:28:00 +0000</resolved>
                                                    <fixVersion>1.4.3</fixVersion>
                    <fixVersion>1.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16337415" author="zentol" created="Wed, 24 Jan 2018 11:14:05 +0000"  >&lt;p&gt;This also affects the RollingSink, but the only thing we can do is provide a better error message. Given that users can provide their own Writer which may or may not return null I don&apos;t see how we could catch this before the job is run.&lt;/p&gt;</comment>
                            <comment id="16451805" author="pshvetso" created="Wed, 25 Apr 2018 07:41:15 +0000"  >&lt;p&gt;G&#225;bor, can I start fixing this issue?&lt;/p&gt;</comment>
                            <comment id="16451868" author="gaborhermann" created="Wed, 25 Apr 2018 08:32:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pshvetso&quot; class=&quot;user-hover&quot; rel=&quot;pshvetso&quot;&gt;pshvetso&lt;/a&gt; go ahead, I didn&apos;t have time to fix it (i.e. add a better error message).&lt;/p&gt;</comment>
                            <comment id="16451887" author="pshvetso" created="Wed, 25 Apr 2018 08:47:23 +0000"  >&lt;p&gt;So my task is to add a proper error message when Writer.duplicate returns null?&lt;/p&gt;</comment>
                            <comment id="16453944" author="pshvetso" created="Thu, 26 Apr 2018 12:21:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaborhermann&quot; class=&quot;user-hover&quot; rel=&quot;gaborhermann&quot;&gt;gaborhermann&lt;/a&gt;&#160;tell me please how to reproduce the issue?&lt;/p&gt;</comment>
                            <comment id="16456087" author="githubbot" created="Fri, 27 Apr 2018 08:04:21 +0000"  >&lt;p&gt;GitHub user pavel-shvetsov-git opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5927&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5927&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8237&quot; title=&quot;BucketingSink throws NPE when Writer.duplicate returns null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8237&quot;&gt;&lt;del&gt;FLINK-8237&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;BucketingSink&amp;#93;&lt;/span&gt; Better error message added&lt;/p&gt;

&lt;p&gt;    Added better error message as mentioned in issue description and comments.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/pavel-shvetsov-git/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/pavel-shvetsov-git/flink&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5927.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5927.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5927&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="16463035" author="githubbot" created="Thu, 3 May 2018 20:52:44 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5927#discussion_r185932952&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5927#discussion_r185932952&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-filesystem/src/main/java/org/apache/flink/streaming/connectors/fs/bucketing/BucketingSink.java &amp;#8212;&lt;br/&gt;
    @@ -550,6 +550,9 @@ private void openNewPartFile(Path bucketPath, BucketState&amp;lt;T&amp;gt; bucketState) throws&lt;br/&gt;
     		Path inProgressPath = getInProgressPathFor(partPath);&lt;br/&gt;
     		if (bucketState.writer == null) {&lt;br/&gt;
     			bucketState.writer = writerTemplate.duplicate();&lt;br/&gt;
    +			if (bucketState.writer == null) {&lt;br/&gt;
    +				throw new RuntimeException(&quot;Could not duplicate writer.&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I would add the class name of the `writerTemplate` object and that the class needs to implement the `Writer.duplicate()` method.&lt;/p&gt;</comment>
                            <comment id="16463037" author="githubbot" created="Thu, 3 May 2018 20:54:12 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5927&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5927&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the PR @pavel-shvetsov-git!&lt;br/&gt;
    I&apos;ve left a suggestion to improve the error message.&lt;br/&gt;
    Afterwards the PR should be good to merge.&lt;/p&gt;</comment>
                            <comment id="16465628" author="githubbot" created="Mon, 7 May 2018 08:32:27 +0000"  >&lt;p&gt;Github user pavel-shvetsov-git commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5927&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5927&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Message has been improved as suggested.&lt;/p&gt;</comment>
                            <comment id="16466051" author="githubbot" created="Mon, 7 May 2018 15:44:52 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5927&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5927&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the update @pavel-shvetsov-git.&lt;br/&gt;
    +1 to merge&lt;/p&gt;</comment>
                            <comment id="16466065" author="githubbot" created="Mon, 7 May 2018 15:53:39 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5927&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5927&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merging&lt;/p&gt;</comment>
                            <comment id="16466346" author="githubbot" created="Mon, 7 May 2018 19:24:18 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5927&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5927&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16466439" author="fhueske" created="Mon, 7 May 2018 20:28:00 +0000"  >&lt;p&gt;Fixed for 1.4.3 with c7d9ad49e9b3b82b934738903c37de2bd77d8ea7&lt;br/&gt;
Fixed for 1.5.0 with 7d6c81d4b8b7340c53717e38725dbe1e3199dfd2&lt;br/&gt;
Fixed for 1.6.0 with 7a31ffd3a5455d7da0a459b62081ca27466833bb&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nriv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>