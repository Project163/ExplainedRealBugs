<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15053] Configurations with values contains space may cause TM failures on Yarn</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15053</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently on Yarn setups, we are passing task executor specific configurations through dynamic properties in the starting command (see &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13184&quot; title=&quot;Starting a TaskExecutor blocks the YarnResourceManager&amp;#39;s main thread&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-13184&quot;&gt;&lt;del&gt;FLINK-13184&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;If the value of configuration contains space, the dynamic properties may not be correctly parsed, which could cause task executor failures. On occurrence can be found in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15047&quot; title=&quot;YarnDistributedCacheITCase is unstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15047&quot;&gt;&lt;del&gt;FLINK-15047&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It would be good to allow spaces when passing dynamic properties. E.g., surrounding the values with double quotation marks, or escaping special characters.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13272244">FLINK-15053</key>
            <summary>Configurations with values contains space may cause TM failures on Yarn</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wangyang0918">Yang Wang</assignee>
                                    <reporter username="xtsong">Xintong Song</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 4 Dec 2019 14:10:05 +0000</created>
                <updated>Tue, 7 Jan 2020 08:19:12 +0000</updated>
                            <resolved>Tue, 7 Jan 2020 08:19:12 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Deployment / YARN</component>
                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16988395" author="fly_in_gis" created="Thu, 5 Dec 2019 02:32:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt;&#160;Thanks for creating this ticket. I think it just because we have introduced many updated configs from 1.10. These configs may contains some characters need to be escaped.&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13184&quot; title=&quot;Starting a TaskExecutor blocks the YarnResourceManager&amp;#39;s main thread&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-13184&quot;&gt;&lt;del&gt;FLINK-13184&lt;/del&gt;&lt;/a&gt;&#160;uses dynamic properties instead of always uploading a taskmanage-conf.yam file to dfs.&lt;/p&gt;

&lt;p&gt;For the solution, i think we always use single quotes for the values. If the value contains&#160;single quote, it needs to be&#160;escaped. For example,&#160;`&lt;tt&gt;-D&#160;taskmanager.memory.managed.size=&apos;1234 bytes&apos; -D key1=&apos;value\&apos;xxxx\&apos;yyyy&apos;`.&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16988397" author="xintongsong" created="Thu, 5 Dec 2019 02:37:29 +0000"  >&lt;p&gt;Does single quotation marks also works for other special characters?&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; also pointed out in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15047&quot; title=&quot;YarnDistributedCacheITCase is unstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15047&quot;&gt;&lt;del&gt;FLINK-15047&lt;/del&gt;&lt;/a&gt; that there are other characters that should be escaped.&lt;br/&gt;
 &lt;a href=&quot;https://stackoverflow.com/questions/15783701/which-characters-need-to-be-escaped-when-using-bash&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/15783701/which-characters-need-to-be-escaped-when-using-bash&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16988404" author="fly_in_gis" created="Thu, 5 Dec 2019 02:51:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt;&#160;I think&#160;single quotation marks works for all the&#160;other special characters except itself. And i have a simple test for sh &amp;amp; bash, it works as expected.&#160;&lt;a href=&quot;https://www.gnu.org/software/bash/manual/html_node/Single-Quotes.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.gnu.org/software/bash/manual/html_node/Single-Quotes.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=GJL&quot; class=&quot;user-hover&quot; rel=&quot;GJL&quot;&gt;GJL&lt;/a&gt;&#160;do you have other concerns?&lt;/p&gt;</comment>
                            <comment id="16989526" author="gjy" created="Fri, 6 Dec 2019 08:42:53 +0000"  >&lt;p&gt;Right, within single quotes, only single quotes have to be escaped. I do not see a reason why this shouldn&apos;t work.&lt;/p&gt;</comment>
                            <comment id="16991494" author="fly_in_gis" created="Mon, 9 Dec 2019 11:06:15 +0000"  >&lt;p&gt;All the value of dynamic properties will be put into a pair of single quotes. If the value contains single quote, will be replaced with &amp;lt;SINGLE_QUOTE&amp;gt;. When loading the dynamic properties, it will be&#160;restored to single quote. I do not suggest to use \&apos; to escape, since it will not work for start command of bash.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// start command
&lt;/span&gt;bash -c &lt;span class=&quot;code-quote&quot;&gt;&quot;$JAVA_HOME/bin/java -Xmx424m ... ... org.apache.flink.yarn.entrypoint.YarnJobClusterEntrypoint -Dkey1=&lt;span class=&quot;code-quote&quot;&gt;&apos;\&apos;&lt;/span&gt;value&lt;span class=&quot;code-quote&quot;&gt;&apos; -Dkey2=&apos;&lt;/span&gt;20 s&lt;span class=&quot;code-quote&quot;&gt;&apos; -Dkey3=&apos;&lt;/span&gt;value3&apos;&quot;&lt;/span&gt;

bash -c &lt;span class=&quot;code-quote&quot;&gt;&quot;$JAVA_HOME/bin/java -Xmx424m ... ... org.apache.flink.yarn.entrypoint.YarnJobClusterEntrypoint -Dkey1=&lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;SINGLE_QUOTE&amp;gt;value&apos;&lt;/span&gt; -Dkey2=&lt;span class=&quot;code-quote&quot;&gt;&apos;20 s&apos;&lt;/span&gt; -Dkey3=&lt;span class=&quot;code-quote&quot;&gt;&apos;value3&apos;&lt;/span&gt;&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; What do you think?&lt;/p&gt;</comment>
                            <comment id="16992385" author="till.rohrmann" created="Tue, 10 Dec 2019 10:08:28 +0000"  >&lt;p&gt;What exactly does not work &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt;? Would it work to close the single quote before escaping &lt;tt&gt;&apos;&lt;/tt&gt; (instead of &lt;tt&gt;&apos;\&apos;value&apos;&lt;/tt&gt; one would &lt;tt&gt;\&apos;&apos;value&apos;&lt;/tt&gt; as described in the SO answer?&lt;/p&gt;</comment>
                            <comment id="16992389" author="till.rohrmann" created="Tue, 10 Dec 2019 10:11:12 +0000"  >&lt;p&gt;Btw: Shouldn&apos;t this issue be a blocker issue because whenever a user configures Flink to have a config entry with spaces, Yarn won&apos;t work?&lt;/p&gt;</comment>
                            <comment id="16992391" author="till.rohrmann" created="Tue, 10 Dec 2019 10:12:51 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt;, I&apos;ve escalated this issue to be a blocker. Downgrade if you disagree.&lt;/p&gt;</comment>
                            <comment id="16992467" author="fly_in_gis" created="Tue, 10 Dec 2019 11:40:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;, thanks for your comment. I will try to give a fix for this issue. Could you assign this ticket to me?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This problem only comes up when the JM updated configuration contains space. If the user puts config options in flink-conf.yaml or via `-yD`, it works fine. Because we calculate the differences between client uploaded flink configuration and JM updated configuration, then dynamic properties are used to pass them to TaskManager.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Closing the quoting before escaping single quote should work. If the config option value is my&apos;value, the passing dynamic property will be -Dkey1=&apos;my&apos;\&apos;&apos;value&apos;.&lt;/p&gt;</comment>
                            <comment id="16992590" author="till.rohrmann" created="Tue, 10 Dec 2019 14:19:24 +0000"  >&lt;p&gt;Thanks for the clarification. I think it would be good to fix this problem. I&apos;ve assigned the ticket to you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt;. Please set it in progress.&lt;/p&gt;</comment>
                            <comment id="16993513" author="fly_in_gis" created="Wed, 11 Dec 2019 13:03:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have attached a PR for this ticket. Please take a look at your convenience.&lt;/p&gt;</comment>
                            <comment id="17009467" author="till.rohrmann" created="Tue, 7 Jan 2020 08:19:12 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;master: 2ff1de776dc6675aa6d5a211296c54df9f27c6af&lt;br/&gt;
1.10.0: 76b23e8907789e50abfa8c34301508bd412d23ff&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13272120">FLINK-15047</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13244006">FLINK-13184</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09aao:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>