<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:15:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-29827] [Connector][AsyncSinkWriter] Checkpointed states block writer from sending records</title>
                <link>https://issues.apache.org/jira/browse/FLINK-29827</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Hi every one,&lt;/p&gt;

&lt;p&gt;Recently we discovered an issue which blocks Sink operators from sending records to client&apos;s endpoint.&lt;/p&gt;

&lt;p&gt;To &lt;b&gt;reproduce&lt;/b&gt; the issue, we started our Flink app from an existing savepoint, in which some Sink operators hold some buffered records. For instance, app employs KinesisStreamSink with a parallelism of 4. 2 of them has no buffered records, the other 2 start with existing states of some records, which are leftover from the previous run. &lt;/p&gt;

&lt;p&gt;&lt;b&gt;Behavior&lt;/b&gt;: during runtime, we sent records (let&apos;s say 200) to this sink in rebalance mode. But only 100 of them (50%) were dispatched from the sink operators.&lt;/p&gt;

&lt;p&gt;After &lt;b&gt;investigation&lt;/b&gt;, we found that the implementation AsyncSinkWriter invokes submitRequestEntries() to send the records to their destination. This invocation is performed when a callback is performed, a flush(true) or forced-flush is called, or when the buffered is full (either in size or in quantity).&lt;/p&gt;

&lt;p&gt;The case falls in the first scenario: the &lt;em&gt;callback is not registered&lt;/em&gt; &lt;em&gt;when the writer starts with some existing buffered records&lt;/em&gt;, initialized from savepoint. Hence in our case, those operators were holding records till their buffers become full, while other operators still perform the usual sending.&lt;/p&gt;

&lt;p&gt;Impacted &lt;b&gt;scope&lt;/b&gt;: flink-1.15.2 or later version, for any Sink that implements AsyncSinkWriter.&lt;/p&gt;

&lt;p&gt;We currently treat this as an abnormal behavior of Flink, but please let me know if this behavior is intended by design.&lt;/p&gt;

&lt;p&gt;Thanks in advance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13493947">FLINK-29827</key>
            <summary>[Connector][AsyncSinkWriter] Checkpointed states block writer from sending records</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chalixar">Ahmed Hamdy</assignee>
                                    <reporter username="mc8max">Hoang Tri Tam</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 1 Nov 2022 07:45:15 +0000</created>
                <updated>Thu, 10 Nov 2022 08:37:23 +0000</updated>
                            <resolved>Thu, 10 Nov 2022 08:37:20 +0000</resolved>
                                    <version>1.16.0</version>
                    <version>1.15.2</version>
                                    <fixVersion>1.17.0</fixVersion>
                    <fixVersion>1.15.3</fixVersion>
                    <fixVersion>1.16.1</fixVersion>
                                    <component>Connectors / Common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17627112" author="dannycranmer" created="Tue, 1 Nov 2022 11:21:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mc8max&quot; class=&quot;user-hover&quot; rel=&quot;mc8max&quot;&gt;mc8max&lt;/a&gt; Thanks for reporting this issue. I agree it sounds like a bug, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chalixar&quot; class=&quot;user-hover&quot; rel=&quot;chalixar&quot;&gt;chalixar&lt;/a&gt; is going to take a look.&lt;/p&gt;</comment>
                            <comment id="17629686" author="dannycranmer" created="Mon, 7 Nov 2022 08:49:43 +0000"  >&lt;p&gt;Merged commit &lt;a href=&quot;https://github.com/apache/flink/commit/d76053a0e670f45b478841f92ef27f9b641643f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;d76053a&lt;/tt&gt;&lt;/a&gt; into master&#160;&lt;br/&gt;
Merged commit &lt;a href=&quot;https://github.com/apache/flink/commit/f5f806044db373971b3cd611180d1e0227ceaedd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;f5f8060&lt;/tt&gt;&lt;/a&gt; into release-1.16&lt;br/&gt;
Merged commit &lt;a href=&quot;https://github.com/apache/flink/commit/7b50b3a8d13be8931de07897e326cb96022ebdbe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;7b50b3a&lt;/tt&gt;&lt;/a&gt; into release-1.15&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1aoc0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>