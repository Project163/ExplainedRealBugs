<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:20:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2564] Failing Test: RandomSamplerTest</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2564</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 17, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 15.943 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.api.java.sampling.	
testPoissonSamplerFraction(org.apache.flink.api.java.sampling.RandomSamplerTest) Time elapsed: 0.017 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: expected fraction: 0.010000, result fraction: 0.011300
at org.junit.Assert.fail(Assert.java:88)
at org.junit.Assert.assertTrue(Assert.java:41)
at org.apache.flink.api.java.sampling.RandomSamplerTest.verifySamplerFraction(RandomSamplerTest.java:249)
at org.apache.flink.api.java.sampling.RandomSamplerTest.testPoissonSamplerFraction(RandomSamplerTest.java:116)

Results :
Failed tests:
Successfully installed excon-0.33.0
RandomSamplerTest.testPoissonSamplerFraction:116-&amp;gt;verifySamplerFraction:249 expected fraction: 0.010000, result fraction: 0.011300
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Full log: &lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/76720572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/76720572&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12858122">FLINK-2564</key>
            <summary>Failing Test: RandomSamplerTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chengxiang li">Chengxiang Li</assignee>
                                    <reporter username="mjsax">Matthias J. Sax</reporter>
                        <labels>
                            <label>test-stability</label>
                    </labels>
                <created>Sun, 23 Aug 2015 10:35:44 +0000</created>
                <updated>Sat, 29 Aug 2015 15:51:08 +0000</updated>
                            <resolved>Tue, 25 Aug 2015 08:59:34 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14709020" author="chengxiang li" created="Mon, 24 Aug 2015 09:40:50 +0000"  >&lt;p&gt;As discussed in &lt;a href=&quot;https://github.com/apache/flink/pull/949#issuecomment-133990256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, it&apos;s a balance between accurate verification and failure-positive result. As this failure and KS test failure happens more often than expected, we should expand the verification boundary which would reduce the fail-positive case to an acceptable level.&lt;/p&gt;</comment>
                            <comment id="14709037" author="githubbot" created="Mon, 24 Aug 2015 09:52:34 +0000"  >&lt;p&gt;GitHub user ChengXiangLi opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2564&quot; title=&quot;Failing Test: RandomSamplerTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2564&quot;&gt;&lt;del&gt;FLINK-2564&lt;/del&gt;&lt;/a&gt; Failing Test: RandomSamplerTest&lt;/p&gt;

&lt;p&gt;    As discussed in &lt;span class=&quot;error&quot;&gt;&amp;#91;here&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/flink/pull/949#issuecomment-133990256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/949#issuecomment-133990256&lt;/a&gt;), it&apos;s a balance between accurate verification and failure-positive result. As this failure and KS test failure happens more often than expected, we should expand the verification boundary which would reduce the fail-positive case to an acceptable level.&lt;br/&gt;
    With this PR, the KS test and fraction verification never fail after tens of thousands executions in my local environment. @tillrohrmann , @chiwanpark .&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ChengXiangLi/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ChengXiangLi/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2564&quot; title=&quot;Failing Test: RandomSamplerTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2564&quot;&gt;&lt;del&gt;FLINK-2564&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1047&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ab5c81d708c31591df160b323244df7fe4445dc6&lt;br/&gt;
Author: chengxiang li &amp;lt;chengxiang.li@intel.com&amp;gt;&lt;br/&gt;
Date:   2015-08-24T09:49:44Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2564&quot; title=&quot;Failing Test: RandomSamplerTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2564&quot;&gt;&lt;del&gt;FLINK-2564&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;test&amp;#93;&lt;/span&gt; expand the verification boundary for random sampler test.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14709067" author="githubbot" created="Mon, 24 Aug 2015 10:17:27 +0000"  >&lt;p&gt;Github user chiwanpark commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047#issuecomment-134130912&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047#issuecomment-134130912&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ve tested with increased count of sources and count of samples. It seems okay but I&apos;m not sure which approach is more proper.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://travis-ci.org/chiwanpark/flink/builds/76923033&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/chiwanpark/flink/builds/76923033&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14709077" author="githubbot" created="Mon, 24 Aug 2015 10:30:24 +0000"  >&lt;p&gt;Github user ChengXiangLi commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047#issuecomment-134138815&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047#issuecomment-134138815&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @chiwanpark , it may need thousands of times&apos; execution to verify, as the failure possibility is quite low. Besides, how many times do you increased count of sources and count of samples, the tests of reservoir samplers are executed on seconds level, so be careful about the unit test cost as well. &lt;/p&gt;</comment>
                            <comment id="14709082" author="githubbot" created="Mon, 24 Aug 2015 10:44:14 +0000"  >&lt;p&gt;Github user chiwanpark commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047#issuecomment-134145495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047#issuecomment-134145495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Here is my changes: chiwanpark@0699411&lt;/p&gt;

&lt;p&gt;    The changes are tested in my local environment about 200 hundred times and also tested in Travis-CI 10 times.&lt;/p&gt;
</comment>
                            <comment id="14709087" author="githubbot" created="Mon, 24 Aug 2015 10:45:51 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047#issuecomment-134145892&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047#issuecomment-134145892&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think both ways (increasing the number of times we sample as well as softening the accuracy thresholds) will improve the test stability. However, as @ChengXiangLi pointed out, increasing the number of samplings and the sample size, will also increase the unit test costs (even though it should be in the range of fractions of a second). Maybe we can also combine both approaches.&lt;/p&gt;

&lt;p&gt;    Other than that, LGTM. &lt;/p&gt;</comment>
                            <comment id="14710431" author="githubbot" created="Tue, 25 Aug 2015 01:43:46 +0000"  >&lt;p&gt;Github user ChengXiangLi commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047#issuecomment-134442744&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047#issuecomment-134442744&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merge part of chiwanpark&apos;s change, add the execute time for fraction sample from 5 to 20. As changing input size from 10000 to 50000 would increase the unit test costs from 15s to 74s in my local environment, it seems too much for a unit test, so i didn&apos;t merge this part.&lt;/p&gt;</comment>
                            <comment id="14710445" author="githubbot" created="Tue, 25 Aug 2015 02:13:10 +0000"  >&lt;p&gt;Github user chiwanpark commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047#issuecomment-134449682&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047#issuecomment-134449682&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good to merge.&lt;/p&gt;</comment>
                            <comment id="14710484" author="githubbot" created="Tue, 25 Aug 2015 02:57:47 +0000"  >&lt;p&gt;Github user chiwanpark commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047#issuecomment-134459358&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047#issuecomment-134459358&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merging....&lt;/p&gt;</comment>
                            <comment id="14710842" author="githubbot" created="Tue, 25 Aug 2015 08:12:41 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047#issuecomment-134517776&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047#issuecomment-134517776&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Are you still merging @chiwanpark? Doesn&apos;t seem that the commit made it to the master.&lt;/p&gt;</comment>
                            <comment id="14710922" author="githubbot" created="Tue, 25 Aug 2015 08:55:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14710924" author="githubbot" created="Tue, 25 Aug 2015 08:57:21 +0000"  >&lt;p&gt;Github user chiwanpark commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1047#issuecomment-134531036&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1047#issuecomment-134531036&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tillrohrmann Sorry for late. I forgot push the commit to apache master. The commit is pushed.&lt;/p&gt;</comment>
                            <comment id="14710931" author="chiwanpark" created="Tue, 25 Aug 2015 08:59:34 +0000"  >&lt;p&gt;Fixed at 5156a1b3f82c2362481812dfee480823ac492975&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j993:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>