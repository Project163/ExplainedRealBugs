<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6581] Dynamic property parsing broken for YARN</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6581</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The dynamic property parsing in YARN is broken. For example, the following dynamic property won&apos;t be parsed properly: &lt;tt&gt;-yDenv.java.opts=&quot;-DappName=foobar -Did=1&quot;&lt;/tt&gt;. The result will be equivalent to &lt;tt&gt;-yDenv.java.opts=&quot;-DappName&quot;&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The problem is that &lt;tt&gt;FlinkYarnSessionCli#getDynamicProperties&lt;/tt&gt; assumes that all dynamic properties have the form &lt;tt&gt;-D&amp;lt;KEY&amp;gt;=&amp;lt;VALUE&amp;gt;&lt;/tt&gt; where &lt;tt&gt;&amp;lt;VALUE&amp;gt;&lt;/tt&gt; does not contain any &lt;tt&gt;=&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I propose to change the parsing of the dynamic properties string such that it splits the key-value pair not via &lt;tt&gt;dynamicProperties.split(&quot;=&quot;)&lt;/tt&gt; but that we split  the dynamic properties string at the first occurrence of the &lt;tt&gt;=&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13071931">FLINK-6581</key>
            <summary>Dynamic property parsing broken for YARN</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 May 2017 09:20:00 +0000</created>
                <updated>Tue, 16 May 2017 22:42:15 +0000</updated>
                            <resolved>Tue, 16 May 2017 22:42:15 +0000</resolved>
                                    <version>1.3.0</version>
                    <version>1.4.0</version>
                                    <fixVersion>1.2.2</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16010269" author="githubbot" created="Mon, 15 May 2017 10:06:27 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6581&quot; title=&quot;Dynamic property parsing broken for YARN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6581&quot;&gt;&lt;del&gt;FLINK-6581&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;cli&amp;#93;&lt;/span&gt; Correct dynamic property parsing for YARN cli&lt;/p&gt;

&lt;p&gt;    The YARN cli will now split the dynamic propertie at the first occurrence of&lt;br/&gt;
    the = sign instead of splitting it at every = sign. That way we support dynamic&lt;br/&gt;
    properties of the form -yDenv.java.opts=&quot;-DappName=foobar&quot;.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixYarnDynPropertyParsing&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3903&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5988d06fd5bc8e6a20e924bb009aaf3f9b5f884b&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-05-15T10:04:07Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6581&quot; title=&quot;Dynamic property parsing broken for YARN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6581&quot;&gt;&lt;del&gt;FLINK-6581&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;cli&amp;#93;&lt;/span&gt; Correct dynamic property parsing for YARN cli&lt;/p&gt;

&lt;p&gt;    The YARN cli will now split the dynamic propertie at the first occurrence of&lt;br/&gt;
    the = sign instead of splitting it at every = sign. That way we support dynamic&lt;br/&gt;
    properties of the form -yDenv.java.opts=&quot;-DappName=foobar&quot;.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16010475" author="githubbot" created="Mon, 15 May 2017 13:11:10 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903#discussion_r116485611&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903#discussion_r116485611&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/cli/FlinkYarnSessionCli.java &amp;#8212;&lt;br/&gt;
    @@ -702,9 +702,15 @@ private void logAndSysout(String message) &lt;/p&gt;
{
     					continue;
     				}

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String[] kv = propLine.split(&quot;=&quot;);&lt;/li&gt;
	&lt;li&gt;if (kv.length &amp;gt;= 2 &amp;amp;&amp;amp; kv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; != null &amp;amp;&amp;amp; kv&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; != null &amp;amp;&amp;amp; kv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.length() &amp;gt; 0) {&lt;/li&gt;
	&lt;li&gt;properties.put(kv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, kv&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;);&lt;br/&gt;
    +				int firstEquals = propLine.indexOf(&quot;=&quot;);&lt;br/&gt;
    +&lt;br/&gt;
    +				if (firstEquals &amp;gt;= 0) {&lt;br/&gt;
    +					String key = propLine.substring(0, firstEquals).trim();&lt;br/&gt;
    +					String value = propLine.substring(firstEquals + 1, propLine.length()).trim();&lt;br/&gt;
    +&lt;br/&gt;
    +					if (!key.isEmpty() &amp;amp;&amp;amp; !value.isEmpty()) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    We didn&apos;t reject empty values before. Not sure if there&apos;s a valid use-case for that though, maybe overriding/clearing some variable?&lt;/p&gt;</comment>
                            <comment id="16010537" author="githubbot" created="Mon, 15 May 2017 13:47:38 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903#discussion_r116494377&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903#discussion_r116494377&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/cli/FlinkYarnSessionCli.java &amp;#8212;&lt;br/&gt;
    @@ -702,9 +702,15 @@ private void logAndSysout(String message) &lt;/p&gt;
{
     					continue;
     				}

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String[] kv = propLine.split(&quot;=&quot;);&lt;/li&gt;
	&lt;li&gt;if (kv.length &amp;gt;= 2 &amp;amp;&amp;amp; kv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; != null &amp;amp;&amp;amp; kv&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; != null &amp;amp;&amp;amp; kv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.length() &amp;gt; 0) {&lt;/li&gt;
	&lt;li&gt;properties.put(kv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, kv&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;);&lt;br/&gt;
    +				int firstEquals = propLine.indexOf(&quot;=&quot;);&lt;br/&gt;
    +&lt;br/&gt;
    +				if (firstEquals &amp;gt;= 0) {&lt;br/&gt;
    +					String key = propLine.substring(0, firstEquals).trim();&lt;br/&gt;
    +					String value = propLine.substring(firstEquals + 1, propLine.length()).trim();&lt;br/&gt;
    +&lt;br/&gt;
    +					if (!key.isEmpty() &amp;amp;&amp;amp; !value.isEmpty()) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    True, in order to keep in sync with the old behaviour, I&apos;ll remove the check whether a value is empty.&lt;/p&gt;</comment>
                            <comment id="16010539" author="githubbot" created="Mon, 15 May 2017 13:48:09 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @zentol. I&apos;ll address your comment and then merge the PR once Travis gives green light.&lt;/p&gt;</comment>
                            <comment id="16012061" author="githubbot" created="Tue, 16 May 2017 09:32:50 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1&lt;/p&gt;</comment>
                            <comment id="16012151" author="githubbot" created="Tue, 16 May 2017 11:05:02 +0000"  >&lt;p&gt;Github user johnboy14 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for turning this around quickly @tillrohrmann We are experiencing this issue with AWS EMR.  Is it possible to patch the current 1.2.0 version available via EMR?&lt;/p&gt;</comment>
                            <comment id="16012357" author="githubbot" created="Tue, 16 May 2017 13:24:00 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @johnboy14 I can merge this PR also into the `1.2` branch. This means that it will be included in the next bug fix release `1.2.2`. How quickly it will be included in EMR depends a little bit on the AWS/Apache BigTop. We can try to ping them. But if customers complain, then it&apos;s much more efficient.&lt;/p&gt;</comment>
                            <comment id="16012373" author="githubbot" created="Tue, 16 May 2017 13:31:21 +0000"  >&lt;p&gt;Github user johnboy14 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    When&apos;s the next bug fix release scheduled for @tillrohrmann ?&lt;/p&gt;</comment>
                            <comment id="16012410" author="githubbot" created="Tue, 16 May 2017 13:40:03 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This is not decided yet. Usually we do it depending on the urgency of the fixes and the time since the last bug fix release. Currently, we&apos;re working on the `1.3` release which requires most of our time. Thus, I would assume not before mid of next month but this is a community decision.&lt;/p&gt;</comment>
                            <comment id="16012445" author="githubbot" created="Tue, 16 May 2017 14:07:12 +0000"  >&lt;p&gt;Github user johnboy14 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    At this time I am looking a workaround in the meantime. Is there anyway to override the log4j.properties file for each application deployed to EMR?&lt;/p&gt;</comment>
                            <comment id="16013217" author="githubbot" created="Tue, 16 May 2017 22:39:01 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3903&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16013222" author="till.rohrmann" created="Tue, 16 May 2017 22:42:15 +0000"  >&lt;p&gt;1.4.0: dceb5cc1759bc091a2f3a6e360771c404b87f7f4&lt;br/&gt;
1.3.0: 4104409cc7a595c17d474333fe0516a3a98a130e&lt;br/&gt;
1.2.2: 1ca57368a8ef241930290930f9264f062cfb2d35&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3eyt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>