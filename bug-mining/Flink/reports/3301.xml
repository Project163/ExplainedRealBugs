<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:41:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-14347] YARNSessionFIFOITCase.checkForProhibitedLogContents found a log with prohibited string</title>
                <link>https://issues.apache.org/jira/browse/FLINK-14347</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;YARNSessionFIFOITCase.checkForProhibitedLogContents fails with the following exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
14:55:27.643 [ERROR]   YARNSessionFIFOITCase.checkForProhibitedLogContents:77-&amp;gt;YarnTestBase.ensureNoProhibitedStringInLogFiles:461 Found a file /home/travis/build/apache/flink/flink-yarn-tests/target/flink-yarn-tests-fifo/flink-yarn-tests-fifo-logDir-nm-1_0/application_1570546069180_0001/container_1570546069180_0001_01_000001/jobmanager.log with a prohibited string (one of [Exception, Started SelectChannelConnector@0.0.0.0:8081]). Excerpts:23760[&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Travis log link:&#160;&lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/595082243&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/595082243&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13261227">FLINK-14347</key>
            <summary>YARNSessionFIFOITCase.checkForProhibitedLogContents found a log with prohibited string</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tison">Zili Chen</assignee>
                                    <reporter username="TsReaper">Caizhi Weng</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 9 Oct 2019 03:10:29 +0000</created>
                <updated>Sun, 20 Sep 2020 13:40:13 +0000</updated>
                            <resolved>Fri, 11 Oct 2019 16:36:34 +0000</resolved>
                                    <version>1.8.3</version>
                    <version>1.9.1</version>
                    <version>1.10.0</version>
                                    <fixVersion>1.8.3</fixVersion>
                    <fixVersion>1.9.2</fixVersion>
                    <fixVersion>1.10.0</fixVersion>
                                    <component>Deployment / YARN</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16947627" author="zentol" created="Wed, 9 Oct 2019 12:53:01 +0000"  >&lt;p&gt;Please add the full excerpt to the JIRA description.&lt;/p&gt;</comment>
                            <comment id="16948728" author="till.rohrmann" created="Thu, 10 Oct 2019 16:05:14 +0000"  >&lt;p&gt;I think this problem has been introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-14010&quot; title=&quot;Dispatcher &amp;amp; JobManagers don&amp;#39;t give up leadership when AM is shut down&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-14010&quot;&gt;&lt;del&gt;FLINK-14010&lt;/del&gt;&lt;/a&gt;. I suspect that the &lt;tt&gt;YarnResourceManager&lt;/tt&gt; receives an &lt;tt&gt;onShutdownRequest&lt;/tt&gt; during the clean up of the test. Since we are now calling the &lt;tt&gt;FatalExceptionHandler&lt;/tt&gt;, the process terminates and logs an exception which then fails the test.&lt;/p&gt;</comment>
                            <comment id="16948773" author="tison" created="Thu, 10 Oct 2019 16:55:55 +0000"  >&lt;p&gt;Thanks for reporting this issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=TsReaper&quot; class=&quot;user-hover&quot; rel=&quot;TsReaper&quot;&gt;TsReaper&lt;/a&gt; and your analysis &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I notice that the instability depends on whether or not &lt;tt&gt;jobmanager.log&lt;/tt&gt; has been dumped on the verification. Given that the &quot;forbidden&quot; string is actually expected&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; I propose we add the next line into whitelist. Locally verify when &lt;tt&gt;jobmanager.log&lt;/tt&gt; dumped we find the &quot;forbidden&quot; string and filter out with the exclusion of expected Exception.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Received shutdown request from YARN ResourceManager&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; Specifically, we call &lt;tt&gt;YarnClient.killApplication&lt;/tt&gt; in &lt;tt&gt;YARNSessionFIFOITCase#runDetachedModeTest&lt;/tt&gt; which always causes a shutdown request.&lt;/p&gt;</comment>
                            <comment id="16948810" author="till.rohrmann" created="Thu, 10 Oct 2019 17:26:44 +0000"  >&lt;p&gt;I&apos;d be ok with this approach. Can you work on this issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tison&quot; class=&quot;user-hover&quot; rel=&quot;tison&quot;&gt;tison&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16949063" author="fly_in_gis" created="Fri, 11 Oct 2019 02:29:47 +0000"  >&lt;p&gt;When there is `ApplicationAttemptNotFoundException` in AMRMClient, `onShutdownRequest` of the callback will be called. Usually it just because we kill the application through yarn client, so it is a expected exception. Also when there is some problem with Yarn in recover application meta info from zookeeper(lost some applications), `ApplicationAttemptNotFoundException` will also send to AMRMClient.&lt;/p&gt;

&lt;p&gt;It is reasonable that we throw a fatal error in `onShutdownRequest`. Updating the check rules is ok for me.&lt;/p&gt;</comment>
                            <comment id="16949064" author="tison" created="Fri, 11 Oct 2019 02:32:08 +0000"  >&lt;p&gt;Thanks for your information &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16949065" author="tison" created="Fri, 11 Oct 2019 02:39:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt; PR submitted.&lt;/p&gt;</comment>
                            <comment id="16949601" author="till.rohrmann" created="Fri, 11 Oct 2019 16:36:34 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;1.10.0: fbfa8beb6847ed14641399afbbfd9a378d91e6f5&lt;br/&gt;
1.9.2: 01c97d56deffdfdd27f2f3e7fcdf734fd166257d&lt;br/&gt;
1.8.3: 903ac2135a0932dacce40f158a9c1a7afd50f564&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13260827">FLINK-14333</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13255566">FLINK-14010</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13328411">FLINK-19295</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07esg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>