<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:25:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4741] WebRuntimeMonitor does not shut down all of it&apos;s threads (EventLoopGroups) on exit.</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4741</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;WebRuntimeMonitor does not shutdown correctly, causing the overall application to hang on shutdown. It shuts down bootstrap.group (EventLoopGroup) but not the bootstrap.childGroup (EventLoopGroup).&lt;br/&gt;
If WebRuntimeMonitor is not used (local.start-webserver=false), this problem does not occur.&lt;/p&gt;

&lt;p&gt;Class: WebRuntimeMonitor&lt;br/&gt;
method: stop()&lt;br/&gt;
Line: ~387&lt;/p&gt;

&lt;p&gt;Called:&lt;br/&gt;
    bootstrap.group().shutdownGracefully()&lt;br/&gt;
Not called:&lt;br/&gt;
    bootstrap.childGroup().shutdownGracefully()&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13009710">FLINK-4741</key>
            <summary>WebRuntimeMonitor does not shut down all of it&apos;s threads (EventLoopGroups) on exit.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roman_maier">Roman Maier</assignee>
                                    <reporter username="lazlolazarous">Joseph Sims</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Oct 2016 22:05:54 +0000</created>
                <updated>Sun, 27 Nov 2016 11:52:49 +0000</updated>
                            <resolved>Sun, 27 Nov 2016 11:52:26 +0000</resolved>
                                    <version>1.1.2</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Runtime / Web Frontend</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15693546" author="githubbot" created="Thu, 24 Nov 2016 15:32:22 +0000"  >&lt;p&gt;GitHub user MayerRoman opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2862&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2862&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4741&quot; title=&quot;WebRuntimeMonitor does not shut down all of it&amp;#39;s threads (EventLoopGroups) on exit.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4741&quot;&gt;&lt;del&gt;FLINK-4741&lt;/del&gt;&lt;/a&gt; Fix for the proper shutdown the ServerBootstrap in the process of stopping the WebRuntumeMonitor&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4741&quot; title=&quot;WebRuntimeMonitor does not shut down all of it&amp;#39;s threads (EventLoopGroups) on exit.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4741&quot;&gt;&lt;del&gt;FLINK-4741&lt;/del&gt;&lt;/a&gt; WebRuntimeMonitor does not shut down all of it&apos;s threads (EventLoopGroups) on exit.&lt;/p&gt;

&lt;p&gt;    bootstrap.childGroup().shutdownGracefully() method has been added to the correct shutdown WebRuntimeMonitor.&lt;/p&gt;

&lt;p&gt;    More detailed explanation:&lt;/p&gt;

&lt;p&gt;    bootrstrap - it is io.netty.bootstrap.ServerBootstrap - a helper class that sets up a netty-server.&lt;/p&gt;

&lt;p&gt;    In its work netty-server uses two EventLoopGroups: &lt;br/&gt;
    The first one, often called &apos;boss&apos;, accepts an incoming connection. &lt;br/&gt;
    The second one, often called &apos;worker&apos;, handles the traffic of the accepted connection once the boss accepts the connection and registers the accepted connection to the worker.&lt;/p&gt;

&lt;p&gt;    At the end of netty-server work should be shut down all the threads in each of the two EventLoopGroups.&lt;/p&gt;

&lt;p&gt;    First EventLoopGroups stops when called bootstrap.group().shutdownGracefully().&lt;br/&gt;
    To stop the second EventLoopGroups this request adds call of bootstrap.chiledGroup().shutdownGracefully() method.&lt;/p&gt;


&lt;p&gt;    This proposal corresponds to netty user guide:&lt;br/&gt;
    &lt;a href=&quot;http://netty.io/wiki/user-guide-for-4.x.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://netty.io/wiki/user-guide-for-4.x.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/MayerRoman/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/MayerRoman/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4741&quot; title=&quot;WebRuntimeMonitor does not shut down all of it&amp;#39;s threads (EventLoopGroups) on exit.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4741&quot;&gt;&lt;del&gt;FLINK-4741&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2862.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2862.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2862&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0d43c9a92e806e2c663d61b8db5098622474bf0e&lt;br/&gt;
Author: Roman Maier &amp;lt;roman_maier@epam.com&amp;gt;&lt;br/&gt;
Date:   2016-11-24T12:49:00Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4741&quot; title=&quot;WebRuntimeMonitor does not shut down all of it&amp;#39;s threads (EventLoopGroups) on exit.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4741&quot;&gt;&lt;del&gt;FLINK-4741&lt;/del&gt;&lt;/a&gt; Fix for the proper shutdown the ServerBootstrap in the process of stopping the WebRuntumeMonitor&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15695718" author="githubbot" created="Fri, 25 Nov 2016 12:12:29 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2862&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2862&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks reasonable, merging it.&lt;/p&gt;</comment>
                            <comment id="15699564" author="zentol" created="Sun, 27 Nov 2016 11:52:26 +0000"  >&lt;p&gt;Fixed in 333da3ac8f8b05c3e3194ba0b376300b403bc2c8&lt;/p&gt;</comment>
                            <comment id="15699568" author="githubbot" created="Sun, 27 Nov 2016 11:52:49 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2862&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2862&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34g0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>