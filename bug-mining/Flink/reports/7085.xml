<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:17:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-32023] execution.buffer-timeout cannot be set to -1 ms</title>
                <link>https://issues.apache.org/jira/browse/FLINK-32023</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The desc for execution.buffer-timeout is as following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ConfigOption&amp;lt;Duration&amp;gt; BUFFER_TIMEOUT =
        ConfigOptions.key(&lt;span class=&quot;code-quote&quot;&gt;&quot;execution.buffer-timeout&quot;&lt;/span&gt;)
                .durationType()
                .defaultValue(Duration.ofMillis(100))
                .withDescription(
                        Description.builder()
                                .text(
                                        &lt;span class=&quot;code-quote&quot;&gt;&quot;The maximum time frequency (milliseconds) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the flushing of the output buffers. By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &quot;&lt;/span&gt;
                                                + &lt;span class=&quot;code-quote&quot;&gt;&quot;the output buffers flush frequently to provide low latency and to aid smooth developer &quot;&lt;/span&gt;
                                                + &lt;span class=&quot;code-quote&quot;&gt;&quot;experience. Setting the parameter can result in three logical modes:&quot;&lt;/span&gt;)
                                .list(
                                        text(
                                                &lt;span class=&quot;code-quote&quot;&gt;&quot;A positive value triggers flushing periodically by that interval&quot;&lt;/span&gt;),
                                        text(
                                                FLUSH_AFTER_EVERY_RECORD
                                                        + &lt;span class=&quot;code-quote&quot;&gt;&quot; triggers flushing after every record thus minimizing latency&quot;&lt;/span&gt;),
                                        text(
                                                DISABLED_NETWORK_BUFFER_TIMEOUT
                                                        + &lt;span class=&quot;code-quote&quot;&gt;&quot; ms triggers flushing only when the output buffer is full thus maximizing &quot;&lt;/span&gt;
                                                        + &lt;span class=&quot;code-quote&quot;&gt;&quot;throughput&quot;&lt;/span&gt;))
                                .build()); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When we set execution.buffer-timeout to -1 ms, the following error is reported:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.IllegalArgumentException: Could not parse value &lt;span class=&quot;code-quote&quot;&gt;&apos;-1 ms&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; key &lt;span class=&quot;code-quote&quot;&gt;&apos;execution.buffer-timeout&apos;&lt;/span&gt;.
&#160; &#160; at org.apache.flink.configuration.Configuration.getOptional(Configuration.java:856)
&#160; &#160; at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.configure(StreamExecutionEnvironment.java:822)
&#160; &#160; at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.&amp;lt;init&amp;gt;(StreamExecutionEnvironment.java:224)
&#160; &#160; at org.apache.flink.streaming.api.environment.StreamContextEnvironment.&amp;lt;init&amp;gt;(StreamContextEnvironment.java:51)
&#160; &#160; at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.createStreamExecutionEnvironment(StreamExecutionEnvironment.java:1996)
&#160; &#160; at java.util.Optional.orElseGet(Optional.java:267)
&#160; &#160; at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.getExecutionEnvironment(StreamExecutionEnvironment.java:1986)
&#160; &#160; at com.kuaishou.flink.examples.api.WordCount.main(WordCount.java:27)
&#160; &#160; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&#160; &#160; at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
&#160; &#160; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&#160; &#160; at java.lang.reflect.Method.invoke(Method.java:498)
&#160; &#160; at org.apache.flink.client.program.PackagedProgram.callMainMethod(PackagedProgram.java:327)
&#160; &#160; ... 11 more
Caused by: java.lang.NumberFormatException: text does not start with a number
&#160; &#160; at org.apache.flink.util.TimeUtils.parseDuration(TimeUtils.java:78)
&#160; &#160; at org.apache.flink.configuration.Configuration.convertToDuration(Configuration.java:1058)
&#160; &#160; at org.apache.flink.configuration.Configuration.convertValue(Configuration.java:996)
&#160; &#160; at org.apache.flink.configuration.Configuration.lambda$getOptional$2(Configuration.java:853)
&#160; &#160; at java.util.Optional.map(Optional.java:215)
&#160; &#160; at org.apache.flink.configuration.Configuration.getOptional(Configuration.java:853)
&#160; &#160; ... 23 more &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The reason is that the value for Duration can not be negative. We should change the behavior or support to&#160;trigger flushing only when the output buffer is full.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13535251">FLINK-32023</key>
            <summary>execution.buffer-timeout cannot be set to -1 ms</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Jiangang">Liu</assignee>
                                    <reporter username="Jiangang">Liu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sat, 6 May 2023 07:13:12 +0000</created>
                <updated>Tue, 6 Jun 2023 02:20:25 +0000</updated>
                            <resolved>Tue, 6 Jun 2023 02:20:25 +0000</resolved>
                                    <version>1.17.0</version>
                    <version>1.16.1</version>
                    <version>1.18.0</version>
                                    <fixVersion>1.18.0</fixVersion>
                    <fixVersion>1.16.3</fixVersion>
                    <fixVersion>1.17.2</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17720374" author="wanglijie95" created="Mon, 8 May 2023 02:39:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jiangang&quot; class=&quot;user-hover&quot; rel=&quot;Jiangang&quot;&gt;Jiangang&lt;/a&gt; Thanks for reporting this. Would you like to prepare a fix ?  I think we should make the &lt;tt&gt;TimeUtils#parseDuration&lt;/tt&gt; support parsing negative duration.&lt;/p&gt;</comment>
                            <comment id="17720375" author="fanrui" created="Mon, 8 May 2023 02:46:07 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jiangang&quot; class=&quot;user-hover&quot; rel=&quot;Jiangang&quot;&gt;Jiangang&lt;/a&gt; , thanks for your report. It&apos;s really a bug. Would you like to fix it?&lt;/p&gt;

&lt;p&gt;From the perspective of Duration, that the value for Duration can not be negative is reasonable. So I prefer choose a special time as the flag of the disable buffer timeout mechanism. WDYT?&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; , maybe you are also interested in this bug. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17720377" author="fanrui" created="Mon, 8 May 2023 02:56:49 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wanglijie&quot; class=&quot;user-hover&quot; rel=&quot;wanglijie&quot;&gt;wanglijie&lt;/a&gt; &apos;s feedback.&lt;/p&gt;

&lt;p&gt;Sorry, after my double check, I see the `java.time.Duration` supports negative value, and it isn&apos;t supported in flink side. So it&apos;s reasonable making the &lt;tt&gt;TimeUtils#parseDuration&lt;/tt&gt; support parsing negative duration.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17720395" author="jiangang" created="Mon, 8 May 2023 06:20:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wanglijie&quot; class=&quot;user-hover&quot; rel=&quot;wanglijie&quot;&gt;wanglijie&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fanrui&quot; class=&quot;user-hover&quot; rel=&quot;fanrui&quot;&gt;fanrui&lt;/a&gt; Thanks for the reply. I would to fix it.&lt;/p&gt;</comment>
                            <comment id="17720396" author="fanrui" created="Mon, 8 May 2023 06:22:44 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jiangang&quot; class=&quot;user-hover&quot; rel=&quot;Jiangang&quot;&gt;Jiangang&lt;/a&gt; , I have assigned this JIRA to you.&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17727021" author="fanrui" created="Mon, 29 May 2023 06:08:11 +0000"  >&lt;p&gt;&amp;lt;master:1.18&amp;gt; 522ff833ad7e3b3c80f4c1ba326cb05fdc4d6a3c&lt;/p&gt;

&lt;p&gt;&amp;lt;1.17&amp;gt; 67acbe9c8814dd56262053d443ae2712e03d1cb0&lt;/p&gt;

&lt;p&gt;&amp;lt;1.16&amp;gt; 71482596056feaca04389496373fde006ca26803&lt;/p&gt;</comment>
                            <comment id="17727881" author="fanrui" created="Wed, 31 May 2023 10:16:06 +0000"  >&lt;p&gt;This Jira isn&apos;t closed due to waiting for backport it to 1.16 and 1.17.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13538729">FLINK-32250</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13268305">FLINK-14787</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1hqgo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>