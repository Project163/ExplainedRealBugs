<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:38:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-11011] Elasticsearch 6 sink end-to-end test unstable</title>
                <link>https://issues.apache.org/jira/browse/FLINK-11011</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The log contains errors:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

2018-11-26 12:55:02,363 ERROR org.apache.flink.runtime.jobmaster.JobMaster - Received DeclineCheckpoint message &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 1a7516a04fb0cc85bdb3aa21548bd9bb with no CheckpointCoordinator

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;See also:&#160;&lt;a href=&quot;https://api.travis-ci.org/v3/job/459693461/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/459693461/log.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13200798">FLINK-11011</key>
            <summary>Elasticsearch 6 sink end-to-end test unstable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="azagrebin">Andrey Zagrebin</assignee>
                                    <reporter username="twalthr">Timo Walther</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 27 Nov 2018 08:44:59 +0000</created>
                <updated>Mon, 25 Feb 2019 13:20:03 +0000</updated>
                            <resolved>Thu, 6 Dec 2018 11:09:14 +0000</resolved>
                                    <version>1.7.1</version>
                    <version>1.8.0</version>
                                    <fixVersion>1.5.6</fixVersion>
                    <fixVersion>1.6.3</fixVersion>
                    <fixVersion>1.7.1</fixVersion>
                    <fixVersion>1.8.0</fixVersion>
                                    <component>Test Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16704499" author="azagrebin" created="Fri, 30 Nov 2018 09:52:55 +0000"  >&lt;p&gt;I would suspect that the job is being stopped and checkpoint coordinator has been already shutdown but some task manager still sends decline/ack messages.&lt;/p&gt;

&lt;p&gt;The solution could be checking whether the job is still running to output the error:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JobMaster.declineCheckpoint() { ....
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (executionGraph.getState() == JobStatus.RUNNING) {
&#160;log.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Received DeclineCheckpoint message &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job {} with no CheckpointCoordinator&quot;&lt;/span&gt;,
 jobGraph.getJobID());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The same applies for `JobMaster.acknowledgeCheckpoint`&lt;/p&gt;</comment>
                            <comment id="16704619" author="twalthr" created="Fri, 30 Nov 2018 11:49:48 +0000"  >&lt;p&gt;This was also what I suspected. Feel free to assign this issue to you, because I don&apos;t feel confident enough in here.&lt;/p&gt;</comment>
                            <comment id="16706934" author="githubbot" created="Mon, 3 Dec 2018 10:13:13 +0000"  >&lt;p&gt;azagrebin opened a new pull request #7216: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11011&quot; title=&quot;Elasticsearch 6 sink end-to-end test unstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11011&quot;&gt;&lt;del&gt;FLINK-11011&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;E2E&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;JM&amp;#93;&lt;/span&gt; Log error messages about null CheckpointCoordinator only if job is running&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7216&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   When Job master gets checkpoint acknowledge or decline message and CheckpointCoordinator is null, it is an error unless job is not running any more. If job is being stopped, it can happen that CheckpointCoordinator has been already closed and null&apos;ed but Job master keeps getting pending checkpoint messages from task executors which do not matter any more.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Check `JobStatus.RUNNING` in `JobMaster.acknowledgeCheckpoint` and `JobMaster. declineCheckpoint` before outputting `CheckpointCoordinator == null` error&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Looped originally failed e2e test CI build:&lt;br/&gt;
   &lt;a href=&quot;https://travis-ci.org/azagrebin/flink/builds/461783136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/azagrebin/flink/builds/461783136&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16707214" author="githubbot" created="Mon, 3 Dec 2018 13:46:33 +0000"  >&lt;p&gt;azagrebin opened a new pull request #7222: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11011&quot; title=&quot;Elasticsearch 6 sink end-to-end test unstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11011&quot;&gt;&lt;del&gt;FLINK-11011&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;E2E&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;JM&amp;#93;&lt;/span&gt; Log error messages about null CheckpointCoordi&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7222&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   release 1.5 back porting of #7216&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16707217" author="githubbot" created="Mon, 3 Dec 2018 13:47:55 +0000"  >&lt;p&gt;azagrebin opened a new pull request #7223: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11011&quot; title=&quot;Elasticsearch 6 sink end-to-end test unstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11011&quot;&gt;&lt;del&gt;FLINK-11011&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;E2E&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;JM&amp;#93;&lt;/span&gt; Log error messages about null CheckpointCoordinator only if job is running&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7223&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7223&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   release 1.5 back porting of #7216&lt;br/&gt;
   cc @tillrohrmann&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16707218" author="githubbot" created="Mon, 3 Dec 2018 13:49:23 +0000"  >&lt;p&gt;azagrebin opened a new pull request #7224: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11011&quot; title=&quot;Elasticsearch 6 sink end-to-end test unstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11011&quot;&gt;&lt;del&gt;FLINK-11011&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;E2E&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;JM&amp;#93;&lt;/span&gt; Log error messages about null CheckpointCoordinator only if job is running&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7224&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   release 1.7 back porting of #7216&lt;br/&gt;
   cc @tillrohrmann&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16711285" author="githubbot" created="Thu, 6 Dec 2018 11:07:41 +0000"  >&lt;p&gt;tillrohrmann closed pull request #7222: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11011&quot; title=&quot;Elasticsearch 6 sink end-to-end test unstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11011&quot;&gt;&lt;del&gt;FLINK-11011&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;E2E&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;JM&amp;#93;&lt;/span&gt; Log error messages about null CheckpointCoordinator only if job is running&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7222&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
index 269f23e6781..0b0b82baa95 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
@@ -680,8 +680,12 @@ public void acknowledgeCheckpoint(&lt;br/&gt;
 				}&lt;br/&gt;
 			});&lt;br/&gt;
 		} else {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;log.error(&quot;Received AcknowledgeCheckpoint message for job {} with no CheckpointCoordinator&quot;,&lt;/li&gt;
	&lt;li&gt;jobGraph.getJobID());&lt;br/&gt;
+			String errorMessage = &quot;Received AcknowledgeCheckpoint message for job {} with no CheckpointCoordinator&quot;;&lt;br/&gt;
+			if (executionGraph.getState() == JobStatus.RUNNING) 
{
+				log.error(errorMessage, jobGraph.getJobID());
+			} else {
+				log.debug(errorMessage, jobGraph.getJobID());
+			}&lt;br/&gt;
 		}&lt;br/&gt;
 	}&lt;br/&gt;
 &lt;br/&gt;
@@ -699,8 +703,12 @@ public void declineCheckpoint(DeclineCheckpoint decline) {&lt;br/&gt;
 				}&lt;br/&gt;
 			});&lt;br/&gt;
 		} else {&lt;br/&gt;
-			log.error(&quot;Received DeclineCheckpoint message for job {} with no CheckpointCoordinator&quot;,&lt;br/&gt;
-					jobGraph.getJobID());&lt;br/&gt;
+			String errorMessage = &quot;Received DeclineCheckpoint message for job {} with no CheckpointCoordinator&quot;;&lt;br/&gt;
+			if (executionGraph.getState() == JobStatus.RUNNING) {+				log.error(errorMessage, jobGraph.getJobID());+			}
&lt;p&gt; else &lt;/p&gt;
{
+				log.debug(errorMessage, jobGraph.getJobID());
+			}
&lt;p&gt; 		}&lt;br/&gt;
 	}&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;






&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16711287" author="githubbot" created="Thu, 6 Dec 2018 11:08:23 +0000"  >&lt;p&gt;tillrohrmann closed pull request #7223: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11011&quot; title=&quot;Elasticsearch 6 sink end-to-end test unstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11011&quot;&gt;&lt;del&gt;FLINK-11011&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;E2E&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;JM&amp;#93;&lt;/span&gt; Log error messages about null CheckpointCoordinator only if job is running&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7223&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7223&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
index c8a8e882913..a89079dea25 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
@@ -681,8 +681,12 @@ public void acknowledgeCheckpoint(&lt;br/&gt;
 				}&lt;br/&gt;
 			});&lt;br/&gt;
 		} else {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;log.error(&quot;Received AcknowledgeCheckpoint message for job {} with no CheckpointCoordinator&quot;,&lt;/li&gt;
	&lt;li&gt;jobGraph.getJobID());&lt;br/&gt;
+			String errorMessage = &quot;Received AcknowledgeCheckpoint message for job {} with no CheckpointCoordinator&quot;;&lt;br/&gt;
+			if (executionGraph.getState() == JobStatus.RUNNING) 
{
+				log.error(errorMessage, jobGraph.getJobID());
+			} else {
+				log.debug(errorMessage, jobGraph.getJobID());
+			}&lt;br/&gt;
 		}&lt;br/&gt;
 	}&lt;br/&gt;
 &lt;br/&gt;
@@ -700,8 +704,12 @@ public void declineCheckpoint(DeclineCheckpoint decline) {&lt;br/&gt;
 				}&lt;br/&gt;
 			});&lt;br/&gt;
 		} else {&lt;br/&gt;
-			log.error(&quot;Received DeclineCheckpoint message for job {} with no CheckpointCoordinator&quot;,&lt;br/&gt;
-					jobGraph.getJobID());&lt;br/&gt;
+			String errorMessage = &quot;Received DeclineCheckpoint message for job {} with no CheckpointCoordinator&quot;;&lt;br/&gt;
+			if (executionGraph.getState() == JobStatus.RUNNING) {+				log.error(errorMessage, jobGraph.getJobID());+			}
&lt;p&gt; else &lt;/p&gt;
{
+				log.debug(errorMessage, jobGraph.getJobID());
+			}
&lt;p&gt; 		}&lt;br/&gt;
 	}&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;






&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16711288" author="githubbot" created="Thu, 6 Dec 2018 11:08:43 +0000"  >&lt;p&gt;tillrohrmann closed pull request #7224: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11011&quot; title=&quot;Elasticsearch 6 sink end-to-end test unstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11011&quot;&gt;&lt;del&gt;FLINK-11011&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;E2E&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;JM&amp;#93;&lt;/span&gt; Log error messages about null CheckpointCoordinator only if job is running&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7224&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
index 40a675aca31..0b245e74ff4 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
@@ -683,8 +683,12 @@ public void acknowledgeCheckpoint(&lt;br/&gt;
 				}&lt;br/&gt;
 			});&lt;br/&gt;
 		} else {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;log.error(&quot;Received AcknowledgeCheckpoint message for job {} with no CheckpointCoordinator&quot;,&lt;/li&gt;
	&lt;li&gt;jobGraph.getJobID());&lt;br/&gt;
+			String errorMessage = &quot;Received AcknowledgeCheckpoint message for job {} with no CheckpointCoordinator&quot;;&lt;br/&gt;
+			if (executionGraph.getState() == JobStatus.RUNNING) 
{
+				log.error(errorMessage, jobGraph.getJobID());
+			} else {
+				log.debug(errorMessage, jobGraph.getJobID());
+			}&lt;br/&gt;
 		}&lt;br/&gt;
 	}&lt;br/&gt;
 &lt;br/&gt;
@@ -702,8 +706,12 @@ public void declineCheckpoint(DeclineCheckpoint decline) {&lt;br/&gt;
 				}&lt;br/&gt;
 			});&lt;br/&gt;
 		} else {&lt;br/&gt;
-			log.error(&quot;Received DeclineCheckpoint message for job {} with no CheckpointCoordinator&quot;,&lt;br/&gt;
-					jobGraph.getJobID());&lt;br/&gt;
+			String errorMessage = &quot;Received DeclineCheckpoint message for job {} with no CheckpointCoordinator&quot;;&lt;br/&gt;
+			if (executionGraph.getState() == JobStatus.RUNNING) {+				log.error(errorMessage, jobGraph.getJobID());+			}
&lt;p&gt; else &lt;/p&gt;
{
+				log.debug(errorMessage, jobGraph.getJobID());
+			}
&lt;p&gt; 		}&lt;br/&gt;
 	}&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;






&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16711289" author="githubbot" created="Thu, 6 Dec 2018 11:09:10 +0000"  >&lt;p&gt;tillrohrmann closed pull request #7216: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11011&quot; title=&quot;Elasticsearch 6 sink end-to-end test unstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11011&quot;&gt;&lt;del&gt;FLINK-11011&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;E2E&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;JM&amp;#93;&lt;/span&gt; Log error messages about null CheckpointCoordinator only if job is running&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7216&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
index 40a675aca31..0b245e74ff4 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java&lt;br/&gt;
@@ -683,8 +683,12 @@ public void acknowledgeCheckpoint(&lt;br/&gt;
 				}&lt;br/&gt;
 			});&lt;br/&gt;
 		} else {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;log.error(&quot;Received AcknowledgeCheckpoint message for job {} with no CheckpointCoordinator&quot;,&lt;/li&gt;
	&lt;li&gt;jobGraph.getJobID());&lt;br/&gt;
+			String errorMessage = &quot;Received AcknowledgeCheckpoint message for job {} with no CheckpointCoordinator&quot;;&lt;br/&gt;
+			if (executionGraph.getState() == JobStatus.RUNNING) 
{
+				log.error(errorMessage, jobGraph.getJobID());
+			} else {
+				log.debug(errorMessage, jobGraph.getJobID());
+			}&lt;br/&gt;
 		}&lt;br/&gt;
 	}&lt;br/&gt;
 &lt;br/&gt;
@@ -702,8 +706,12 @@ public void declineCheckpoint(DeclineCheckpoint decline) {&lt;br/&gt;
 				}&lt;br/&gt;
 			});&lt;br/&gt;
 		} else {&lt;br/&gt;
-			log.error(&quot;Received DeclineCheckpoint message for job {} with no CheckpointCoordinator&quot;,&lt;br/&gt;
-					jobGraph.getJobID());&lt;br/&gt;
+			String errorMessage = &quot;Received DeclineCheckpoint message for job {} with no CheckpointCoordinator&quot;;&lt;br/&gt;
+			if (executionGraph.getState() == JobStatus.RUNNING) {+				log.error(errorMessage, jobGraph.getJobID());+			}
&lt;p&gt; else &lt;/p&gt;
{
+				log.debug(errorMessage, jobGraph.getJobID());
+			}
&lt;p&gt; 		}&lt;br/&gt;
 	}&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;






&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16711290" author="till.rohrmann" created="Thu, 6 Dec 2018 11:09:14 +0000"  >&lt;p&gt;Fixed via&lt;br/&gt;
1.8.0: &lt;a href=&quot;https://github.com/apache/flink/commit/64f6d0b06f974649c21f10cd4bf97a6a9d742aa6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/64f6d0b06f974649c21f10cd4bf97a6a9d742aa6&lt;/a&gt;&lt;br/&gt;
1.7.1: &lt;a href=&quot;https://github.com/apache/flink/commit/1c1de7415002fc889510e8c84f807efbce149e5a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/1c1de7415002fc889510e8c84f807efbce149e5a&lt;/a&gt;&lt;br/&gt;
1.6.3: &lt;a href=&quot;https://github.com/apache/flink/commit/d9c1bf7a2cda85a0540f6f6c69607d0fd8c2598d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/d9c1bf7a2cda85a0540f6f6c69607d0fd8c2598d&lt;/a&gt;&lt;br/&gt;
1.5.6: &lt;a href=&quot;https://github.com/apache/flink/commit/47b2351159b09396d8bf288f25bc3ebfab99f50f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/47b2351159b09396d8bf288f25bc3ebfab99f50f&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13201387">FLINK-11032</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13201388">FLINK-11033</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00wgo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>