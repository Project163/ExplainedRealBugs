<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:56:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-21859] Outdated slot offer responses may release slot prematurely</title>
                <link>https://issues.apache.org/jira/browse/FLINK-21859</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Here is the error stack:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2021-03-18 19:05:31org.apache.flink.runtime.JobException: Recovery is suppressed by NoRestartBackoffTimeStrategy   
   at org.apache.flink.runtime.executiongraph.failover.flip1.ExecutionFailureHandler.handleFailure(ExecutionFailureHandler.java:130 undefined)   
   at org.apache.flink.runtime.executiongraph.failover.flip1.ExecutionFailureHandler.getFailureHandlingResult(ExecutionFailureHandler.java:81 undefined)   
   at org.apache.flink.runtime.scheduler.DefaultScheduler.handleTaskFailure(DefaultScheduler.java:221 undefined)   
   at org.apache.flink.runtime.scheduler.DefaultScheduler.maybeHandleTaskFailure(DefaultScheduler.java:212 undefined)   
   at org.apache.flink.runtime.scheduler.DefaultScheduler.updateTaskExecutionStateInternal(DefaultScheduler.java:203 undefined)   
   at org.apache.flink.runtime.scheduler.SchedulerBase.updateTaskExecutionState(SchedulerBase.java:701 undefined)   
   at org.apache.flink.runtime.scheduler.UpdateSchedulerNgOnInternalFailuresListener.notifyTaskFailure(UpdateSchedulerNgOnInternalFailuresListener.java:51 undefined)   
   at org.apache.flink.runtime.executiongraph.DefaultExecutionGraph.notifySchedulerNgAboutInternalTaskFailure(DefaultExecutionGraph.java:1449 undefined)   
   at org.apache.flink.runtime.executiongraph.Execution.processFail(Execution.java:1105 undefined)   
   at org.apache.flink.runtime.executiongraph.Execution.processFail(Execution.java:1045 undefined)   
   at org.apache.flink.runtime.executiongraph.Execution.fail(Execution.java:754 undefined)   
   at org.apache.flink.runtime.jobmaster.slotpool.SingleLogicalSlot.signalPayloadRelease(SingleLogicalSlot.java:195 undefined)   
   at org.apache.flink.runtime.jobmaster.slotpool.SingleLogicalSlot.release(SingleLogicalSlot.java:182 undefined)   
   at org.apache.flink.runtime.scheduler.SharedSlot.lambda$release$4(SharedSlot.java:271 undefined)   
   at java.util.concurrent.CompletableFuture.uniAccept(CompletableFuture.java:656 undefined)   
   at java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:669 undefined)   
   at java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:1997 undefined)   
   at org.apache.flink.runtime.scheduler.SharedSlot.release(SharedSlot.java:271 undefined)   
   at org.apache.flink.runtime.jobmaster.slotpool.AllocatedSlot.releasePayload(AllocatedSlot.java:152 undefined)   
   at org.apache.flink.runtime.jobmaster.slotpool.DefaultDeclarativeSlotPool.releasePayload(DefaultDeclarativeSlotPool.java:385 undefined)   
   at org.apache.flink.runtime.jobmaster.slotpool.DefaultDeclarativeSlotPool.lambda$releaseSlot$1(DefaultDeclarativeSlotPool.java:376 undefined)   
   at java.util.Optional.ifPresent(Optional.java:159 undefined)   
   at org.apache.flink.runtime.jobmaster.slotpool.DefaultDeclarativeSlotPool.releaseSlot(DefaultDeclarativeSlotPool.java:374 undefined)   
   at org.apache.flink.runtime.jobmaster.slotpool.DeclarativeSlotPoolService.failAllocation(DeclarativeSlotPoolService.java:198 undefined)   
   at org.apache.flink.runtime.jobmaster.JobMaster.internalFailAllocation(JobMaster.java:650 undefined)   
   at org.apache.flink.runtime.jobmaster.JobMaster.failSlot(JobMaster.java:636 undefined)   
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   
   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62 undefined)   
   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43 undefined)   
   at java.lang.reflect.Method.invoke(Method.java:498 undefined)   
   at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcInvocation(AkkaRpcActor.java:301 undefined)   
   at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcMessage(AkkaRpcActor.java:212 undefined)   
   at org.apache.flink.runtime.rpc.akka.FencedAkkaRpcActor.handleRpcMessage(FencedAkkaRpcActor.java:77 undefined)   
   at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleMessage(AkkaRpcActor.java:158 undefined)   
   at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:26 undefined)   
   at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:21 undefined)   
   at scala.PartialFunction$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;applyOrElse(PartialFunction.scala:123 undefined)   
   at akka.japi.pf.UnitCaseStatement.applyOrElse(CaseStatements.scala:21 undefined)   
   at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:170 undefined)   
   at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171 undefined)   
   at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171 undefined)   
   at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundReceive(Actor.scala:517 undefined)   
   at akka.actor.AbstractActor.aroundReceive(AbstractActor.scala:225 undefined)   
   at akka.actor.ActorCell.receiveMessage(ActorCell.scala:592 undefined)   
   at akka.actor.ActorCell.invoke(ActorCell.scala:561 undefined)   
   at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:258 undefined)   
   at akka.dispatch.Mailbox.run(Mailbox.scala:225 undefined)   
   at akka.dispatch.Mailbox.exec(Mailbox.scala:235 undefined)   
   at akka.dispatch.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260 undefined)   
   at akka.dispatch.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339 undefined)   
   at akka.dispatch.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979 undefined)   
   at akka.dispatch.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107 undefined)
Caused by: org.apache.flink.util.FlinkException: Could not mark slot 61a637e3977c58a0e6b73533c419297d active.   
   at org.apache.flink.runtime.taskexecutor.TaskExecutor.lambda$handleAcceptedSlotOffers$18(TaskExecutor.java:1469 undefined)   
   at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:760 undefined)   
   at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:736 undefined)   
   at java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:442 undefined)   
   at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRunAsync(AkkaRpcActor.java:440 undefined)   
   at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcMessage(AkkaRpcActor.java:208 undefined)    ... 19 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13366059">FLINK-21859</key>
            <summary>Outdated slot offer responses may release slot prematurely</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="kevin.cyj">Yingjie Cao</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 18 Mar 2021 11:25:50 +0000</created>
                <updated>Fri, 28 May 2021 09:07:06 +0000</updated>
                            <resolved>Wed, 14 Apr 2021 21:54:01 +0000</resolved>
                                    <version>1.13.0</version>
                                    <fixVersion>1.13.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17311329" author="till.rohrmann" created="Tue, 30 Mar 2021 09:35:56 +0000"  >&lt;p&gt;Thanks for reporting this issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt;. Do you have the logs available of the run where the problem occurred?&lt;/p&gt;</comment>
                            <comment id="17311332" author="till.rohrmann" created="Tue, 30 Mar 2021 09:39:23 +0000"  >&lt;p&gt;The problem can occur if the &lt;tt&gt;JobMaster&lt;/tt&gt; does not activate the slots fast enough or if the slots have been freed in the meantime. The &lt;tt&gt;JobMaster&lt;/tt&gt; needs to accept the slots within &lt;tt&gt;taskmanager.slot.timeout&lt;/tt&gt; which defaults to &lt;tt&gt;10 s&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17311429" author="kevin.cyj" created="Tue, 30 Mar 2021 11:14:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt; I did not keep the log, I encountered the issue when running tpcds test on a cluster for several times. The problem is not hard to reproduce, I will share the log when the issue reproduces. (These days, I am running tpcds test for sort-merge shuffle.)&lt;/p&gt;</comment>
                            <comment id="17312155" author="kevin.cyj" created="Wed, 31 Mar 2021 07:43:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&#160;I have uploaded the log, hope it can help.&lt;/p&gt;</comment>
                            <comment id="17312166" author="kevin.cyj" created="Wed, 31 Mar 2021 07:59:38 +0000"  >&lt;p&gt;tm log updated, the previous one is not right.&lt;/p&gt;</comment>
                            <comment id="17318123" author="till.rohrmann" created="Fri, 9 Apr 2021 16:52:11 +0000"  >&lt;p&gt;From the logs it looks as if the &lt;tt&gt;TaskManager&lt;/tt&gt; offers the slots to the leading &lt;tt&gt;JobManager&lt;/tt&gt;. Some of the slots are rejected and thereby immediately released on the &lt;tt&gt;TaskManager&lt;/tt&gt;. However, on the &lt;tt&gt;JobManager&lt;/tt&gt; side this slot is then still used which is weird. This looks like a bug in Flink.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt; can you reproduce the problem? If yes, could you maybe run it with DEBUG logs enabled? This should tell us more about what&apos;s going wrong.&lt;/p&gt;</comment>
                            <comment id="17318138" author="till.rohrmann" created="Fri, 9 Apr 2021 17:15:26 +0000"  >&lt;p&gt;What I cannot really explain is why we immediately after offering the slots free 2 of the 3 offered slots:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2021-03-31 15:13:15,852 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Successful registration at job manager akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@k28a13215.eu95sqa.tbsite.net:56822/user/rpc/jobmanager_4 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 3c97aeb7d225871ce2a453788c686486.
&lt;/span&gt;2021-03-31 15:13:15,852 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Establish JobManager connection &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 3c97aeb7d225871ce2a453788c686486.
2021-03-31 15:13:15,853 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Offer reserved slots to the leader of job 3c97aeb7d225871ce2a453788c686486.
2021-03-31 15:13:15,907 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Receive slot request a758efc7798f2424d9b96c1d77cc2c82 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 3c97aeb7d225871ce2a453788c686486 from resource manager with leader id 00000000000000000000000000000000.
2021-03-31 15:13:15,908 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Allocated slot &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a758efc7798f2424d9b96c1d77cc2c82.
2021-03-31 15:13:15,908 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Offer reserved slots to the leader of job 3c97aeb7d225871ce2a453788c686486.
2021-03-31 15:13:15,923 INFO  org.apache.flink.runtime.taskexecutor.slot.TaskSlotTableImpl [] - Free slot TaskSlot(index:4, state:ALLOCATED, resource profile: ResourceProfile{cpuCores=0.1000000000000000, taskHeapMemory=1.183gb (1270035251 bytes), taskOffHeapMemory=0 bytes, managedMemory=1.172gb (1258291200 bytes), networkMemory=409.600mb (429496729 bytes)}, allocationId: bee6ef66e651bd6a29cafd61cb74dd10, jobId: 3c97aeb7d225871ce2a453788c686486).
2021-03-31 15:13:15,923 INFO  org.apache.flink.runtime.taskexecutor.slot.TaskSlotTableImpl [] - Free slot TaskSlot(index:9, state:ALLOCATED, resource profile: ResourceProfile{cpuCores=0.1000000000000000, taskHeapMemory=1.183gb (1270035251 bytes), taskOffHeapMemory=0 bytes, managedMemory=1.172gb (1258291200 bytes), networkMemory=409.600mb (429496729 bytes)}, allocationId: 9b0e7ead445183e9d7f0536872da8602, jobId: 3c97aeb7d225871ce2a453788c686486).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17319083" author="kevin.cyj" created="Mon, 12 Apr 2021 06:59:52 +0000"  >&lt;p&gt;OK, I will try to reproduce the issue with&#160;DEBUG logs enabled.&lt;/p&gt;</comment>
                            <comment id="17320169" author="kevin.cyj" created="Tue, 13 Apr 2021 13:12:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&#160;I have updated the log with&#160;DEBUG enabled.&lt;/p&gt;</comment>
                            <comment id="17320176" author="zentol" created="Tue, 13 Apr 2021 13:22:36 +0000"  >&lt;p&gt;Could be the same issue as &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-22180&quot; title=&quot;RM reclaims slots while batch job is in progress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-22180&quot;&gt;&lt;del&gt;FLINK-22180&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17320252" author="till.rohrmann" created="Tue, 13 Apr 2021 15:21:06 +0000"  >&lt;p&gt;Thanks for posting the new logs &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt;. From what I can tell, it looks as if the &lt;tt&gt;JobMaster&lt;/tt&gt; rejects the offered slot:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2021-04-13 19:38:01,455 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Receive slot request 6bea78f0eeb44c254e8de2ca115206b2 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job e0c187ce5b5c6e251b33eb800ee0614f from resource manager with leader id 00000000000000000000000000000000.
2021-04-13 19:38:01,455 DEBUG org.apache.flink.runtime.memory.MemoryManager                [] - Initialized MemoryManager with total memory size 1258291200 and page size 32768.
2021-04-13 19:38:01,455 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Allocated slot &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 6bea78f0eeb44c254e8de2ca115206b2.
2021-04-13 19:38:01,455 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Offer reserved slots to the leader of job e0c187ce5b5c6e251b33eb800ee0614f.
2021-04-13 19:38:01,542 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Receive slot request f991e63eea4150a74e83eb515984a89c &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job e0c187ce5b5c6e251b33eb800ee0614f from resource manager with leader id 00000000000000000000000000000000.
2021-04-13 19:38:01,542 DEBUG org.apache.flink.runtime.memory.MemoryManager                [] - Initialized MemoryManager with total memory size 1258291200 and page size 32768.
2021-04-13 19:38:01,542 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Allocated slot &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; f991e63eea4150a74e83eb515984a89c.
2021-04-13 19:38:01,542 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Offer reserved slots to the leader of job e0c187ce5b5c6e251b33eb800ee0614f.
2021-04-13 19:38:01,579 DEBUG org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Free slot with allocation id 6bea78f0eeb44c254e8de2ca115206b2 because: The slot was rejected by the JobManager.
2021-04-13 19:38:01,579 DEBUG org.apache.flink.runtime.taskexecutor.slot.TaskSlotTableImpl [] - Free slot TaskSlot(index:4, state:ALLOCATED, resource profile: ResourceProfile{cpuCores=0.1000000000000000, taskHeapMemory=1.133gb (1216348160 bytes), taskOffHeapMemory=0 bytes, managedMemory=1.172gb (1258291200 bytes), networkMemory=409.600mb (429496729 bytes)}, allocationId: 6bea78f0eeb44c254e8de2ca115206b2, jobId: e0c187ce5b5c6e251b33eb800ee0614f).
java.lang.Exception: The slot was rejected by the JobManager.
	at org.apache.flink.runtime.taskexecutor.TaskExecutor.lambda$handleAcceptedSlotOffers$18(TaskExecutor.java:1564) ~[flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:760) ~[?:1.8.0_102]
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:736) ~[?:1.8.0_102]
	at java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:442) ~[?:1.8.0_102]
	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRunAsync(AkkaRpcActor.java:440) ~[flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcMessage(AkkaRpcActor.java:208) ~[flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleMessage(AkkaRpcActor.java:158) ~[flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:26) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:21) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at scala.PartialFunction$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;applyOrElse(PartialFunction.scala:123) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.japi.pf.UnitCaseStatement.applyOrElse(CaseStatements.scala:21) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:170) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundReceive(Actor.scala:517) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.actor.AbstractActor.aroundReceive(AbstractActor.scala:225) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:592) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.actor.ActorCell.invoke(ActorCell.scala:561) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:258) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.dispatch.Mailbox.run(Mailbox.scala:225) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.dispatch.Mailbox.exec(Mailbox.scala:235) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.dispatch.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.dispatch.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.dispatch.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
	at akka.dispatch.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107) [flink-dist_2.11-1.14-vvr-5.0-SNAPSHOT.jar:1.14-vvr-5.0-SNAPSHOT]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is that the JobManager log does not contain the log statements for this time (19:38:01). It only starts at 19:38:03 and, thus, it is not very clear what is happening on the &lt;tt&gt;JobMaster&lt;/tt&gt; side. But it looks as if the &lt;tt&gt;JobMaster&lt;/tt&gt; rejects the slot and still uses it. This sounds like a bug to me.&lt;/p&gt;

&lt;p&gt;Not sure whether it is possible to also share the JobManager logs from 19:38:00 - 19:38:03 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt;. This would be super helpful.&lt;/p&gt;</comment>
                            <comment id="17320259" author="till.rohrmann" created="Tue, 13 Apr 2021 15:40:04 +0000"  >&lt;p&gt;I think I know what the problem is: The problem is that we offer slot &lt;tt&gt;6bea78f0eeb44c254e8de2ca115206b2&lt;/tt&gt; twice. The first time we offer the slot it gets rejected. However before we process the answer we offer this slot a second time. If now the second slot offering is accepted, then we accept a slot which has already been freed.&lt;/p&gt;

&lt;p&gt;What this means is that we must not free/release slots which are still offered. One way to solve this problem is that we only allow a single slot offering for a job to take place. Alternatively, we must filter out responses which are outdated because a new slot offering has already been sent.&lt;/p&gt;</comment>
                            <comment id="17321337" author="zentol" created="Wed, 14 Apr 2021 21:54:01 +0000"  >&lt;p&gt;master: c9fd6955630d320fce42cc36abe98a5eb65fd1b8&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13370648">FLINK-22180</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13364676">FLINK-21751</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13023767" name="jm.log.zip" size="673765" author="kevin.cyj" created="Tue, 13 Apr 2021 13:09:08 +0000"/>
                            <attachment id="13023219" name="jm.log.zip" size="672844" author="kevin.cyj" created="Wed, 31 Mar 2021 07:42:36 +0000"/>
                            <attachment id="13023220" name="tm.log.zip" size="166689" author="kevin.cyj" created="Wed, 31 Mar 2021 07:58:01 +0000"/>
                            <attachment id="13023768" name="tm1.log.zip" size="133200" author="kevin.cyj" created="Tue, 13 Apr 2021 13:09:24 +0000"/>
                            <attachment id="13023769" name="tm2.log.zip" size="78083" author="kevin.cyj" created="Tue, 13 Apr 2021 13:09:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0oxig:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>