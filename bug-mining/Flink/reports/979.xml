<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:23:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3926] Incorrect implementation of getFieldIndex in TupleTypeInfo </title>
                <link>https://issues.apache.org/jira/browse/FLINK-3926</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The origin code assumes filed name as &lt;b&gt;f2&lt;/b&gt; which is not always true.&lt;/p&gt;

&lt;p&gt;Finding a field &lt;b&gt;x&lt;/b&gt; would result in NumberFormatException&lt;/p&gt;</description>
                <environment></environment>
        <key id="12970802">FLINK-3926</key>
            <summary>Incorrect implementation of getFieldIndex in TupleTypeInfo </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yijieshen">Yijie Shen</assignee>
                                    <reporter username="yijieshen">Yijie Shen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 May 2016 15:34:07 +0000</created>
                <updated>Thu, 28 Feb 2019 13:20:54 +0000</updated>
                            <resolved>Wed, 18 May 2016 22:23:33 +0000</resolved>
                                    <version>1.0.2</version>
                                    <fixVersion>1.0.4</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15289196" author="fhueske" created="Wed, 18 May 2016 15:58:29 +0000"  >&lt;p&gt;I think the convention is that tuple field names start with &quot;f&quot; followed by the index, so &lt;tt&gt;fieldName.substring(1)&lt;/tt&gt; should be OK (although we could also check that the name starts with &quot;f&quot;).&lt;br/&gt;
How did you come across this issue? Do you have code that fail because of this method?&lt;/p&gt;</comment>
                            <comment id="15289215" author="yijieshen" created="Wed, 18 May 2016 16:09:57 +0000"  >&lt;p&gt;Yes, I know the convention of `f` followed by index, but it&apos;s a public API so it&apos;s arguments will be of any style &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I find this while I was doing table exception clean up, we have this code for field look up:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; t: TupleTypeInfo[A] =&amp;gt;
        exprs.zipWithIndex.map {
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; (UnresolvedFieldReference(name), idx) =&amp;gt; (idx, name)
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; (Alias(UnresolvedFieldReference(origName), name), _) =&amp;gt;
            val idx = t.getFieldIndex(origName)
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (idx &amp;lt; 0) {
              &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TableException(s&lt;span class=&quot;code-quote&quot;&gt;&quot;$origName is not a field of type $t&quot;&lt;/span&gt;)
            }
            (idx, name)
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; _ =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TableException(
            &lt;span class=&quot;code-quote&quot;&gt;&quot;Field reference expression or alias on field expression expected.&quot;&lt;/span&gt;)
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15289217" author="fhueske" created="Wed, 18 May 2016 16:12:26 +0000"  >&lt;p&gt;How would you expect the method to behave?&lt;/p&gt;</comment>
                            <comment id="15289230" author="yijieshen" created="Wed, 18 May 2016 16:18:12 +0000"  >&lt;p&gt;We have the test case:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testAsWithNonFieldReference2() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();
		BatchTableEnvironment tableEnv = TableEnvironment.getTableEnvironment(env, config());

		&lt;span class=&quot;code-comment&quot;&gt;// Must fail. as() does only allow field name expressions
&lt;/span&gt;		tableEnv.fromDataSet(CollectionDataSets.get3TupleDataSet(env), &lt;span class=&quot;code-quote&quot;&gt;&quot;a as foo, b,  c&quot;&lt;/span&gt;);
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;a is not a field in tupleDataSet, but we need to look it up from TupleTypeInfo.&lt;/p&gt;</comment>
                            <comment id="15289260" author="yijieshen" created="Wed, 18 May 2016 16:33:51 +0000"  >&lt;p&gt;I&apos;ve opened &lt;a href=&quot;https://github.com/apache/flink/pull/2004&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2004&lt;/a&gt; to fix this.&lt;/p&gt;</comment>
                            <comment id="15289280" author="fhueske" created="Wed, 18 May 2016 16:42:31 +0000"  >&lt;p&gt;Ah, now I see what you mean. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Good fix, thanks!&lt;/p&gt;</comment>
                            <comment id="15289282" author="githubbot" created="Wed, 18 May 2016 16:42:47 +0000"  >&lt;p&gt;Github user fhueske commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2004#issuecomment-220086765&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2004#issuecomment-220086765&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge. Thanks!&lt;/p&gt;</comment>
                            <comment id="15289644" author="githubbot" created="Wed, 18 May 2016 19:30:13 +0000"  >&lt;p&gt;Github user fhueske commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2004#issuecomment-220133027&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2004#issuecomment-220133027&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merging&lt;/p&gt;</comment>
                            <comment id="15289967" author="githubbot" created="Wed, 18 May 2016 22:16:38 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2004&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2004&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15289978" author="fhueske" created="Wed, 18 May 2016 22:23:33 +0000"  >&lt;p&gt;Fixed in 1.0.4 with db5ff636bc9b59b80cf661f880537882bcf546c4&lt;br/&gt;
Fixed in 1.1.0 with f916ef41a52a7befdf08da6c2cef7f82ada379c3&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2y5if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>