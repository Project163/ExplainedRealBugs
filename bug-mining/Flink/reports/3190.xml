<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:40:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-13581] BatchFineGrainedRecoveryITCase failed on Travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-13581</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://travis-ci.com/flink-ci/flink/jobs/221567908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.com/flink-ci/flink/jobs/221567908&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13248840">FLINK-13581</key>
            <summary>BatchFineGrainedRecoveryITCase failed on Travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="azagrebin">Andrey Zagrebin</assignee>
                                    <reporter username="azagrebin">Andrey Zagrebin</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Mon, 5 Aug 2019 09:08:10 +0000</created>
                <updated>Thu, 8 Aug 2019 12:13:56 +0000</updated>
                            <resolved>Thu, 8 Aug 2019 12:12:39 +0000</resolved>
                                    <version>1.9.0</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16900645" author="till.rohrmann" created="Tue, 6 Aug 2019 05:47:06 +0000"  >&lt;p&gt;Any insights on why this test is failing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=azagrebin&quot; class=&quot;user-hover&quot; rel=&quot;azagrebin&quot;&gt;azagrebin&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16900684" author="azagrebin" created="Tue, 6 Aug 2019 06:35:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;According to logs, I think the reason is the following. Task managers&#160;of the&#160;mini cluster are started with a random data port.&#160;All TMs have the same local host.&lt;/p&gt;

&lt;p&gt;In this particular run the first TM and the second one were started accidentally with the same port. When the failure of the first TM was generated and&#160;the second TM was started, the partition request from the redeployed consuming mapper came to the second TM because of the accidental port match. This led to a partition-not-found response as the partition resided on the first TM and subsequently led to an async re-triggering of the partition request. In this case task proceeds with the user code. Therefore, this was counted as one&#160;extra mapper restart in the open method.&lt;/p&gt;

&lt;p&gt;Usually, the random data ports always differ for each&#160;subsequently started TM after failing the previous one. This always leads to&#160;a connection failure of the first partition request and fails the whole Task without entering the user code. The user code is not entered because the partition request was recently moved to gate setup before invoking the user code. Eventually&#160;mapper&#160;restart is not counted in&#160;normal case.&lt;/p&gt;</comment>
                            <comment id="16900784" author="till.rohrmann" created="Tue, 6 Aug 2019 08:48:04 +0000"  >&lt;p&gt;So if we counted the restart attempts not inside the user code but via the exposed REST handler, this problem would not occur?&lt;/p&gt;</comment>
                            <comment id="16900960" author="azagrebin" created="Tue, 6 Aug 2019 12:14:09 +0000"  >&lt;p&gt;Yes, this problem would be solved.&lt;/p&gt;

&lt;p&gt;The execution attempts are incremented a lot w/o running user code. The final counters will of course differ comparing to the whole job restart w/o fine grained recovery. My concern here was always that we do not check what the user observes. On the other hand, test should be more stable and will not depend on internal&#160;details of when the the user code is touched.&lt;/p&gt;

&lt;p&gt;The other solutions around stabilising the port difference among all TMs are probably more involved&#160;with relying on the mini cluster internals and might be fragile.&lt;/p&gt;</comment>
                            <comment id="16901212" author="kkl0u" created="Tue, 6 Aug 2019 16:08:20 +0000"  >&lt;p&gt;I assume this is another instance of the same issue &lt;a href=&quot;https://api.travis-ci.org/v3/job/568356591/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/568356591/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16902747" author="till.rohrmann" created="Thu, 8 Aug 2019 07:14:37 +0000"  >&lt;p&gt;Unblocking this issue since it is a test instability and not a bug of the feature.&lt;/p&gt;</comment>
                            <comment id="16902909" author="till.rohrmann" created="Thu, 8 Aug 2019 12:12:39 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;1.10.0: c24b9a371658c2829f0ff1cedb9876592dc15b8d&lt;br/&gt;
1.9.0: 331878aef276ad388c8a9ed55a4eb8c4cc7e9adc&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 14 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05bs8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>