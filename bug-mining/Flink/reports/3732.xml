<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-16113] ExpressionReducer shouldn&apos;t escape the reduced string value</title>
                <link>https://issues.apache.org/jira/browse/FLINK-16113</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;ExpressionReducer shouldn&apos;t escape the reduced string value, the escaping should only happen in code generation, otherwise the output result is inccorect. &lt;/p&gt;

&lt;p&gt;The problem is this line I guess: &lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-table/flink-table-planner-blink/src/main/scala/org/apache/flink/table/planner/codegen/ExpressionReducer.scala#L142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/master/flink-table/flink-table-planner-blink/src/main/scala/org/apache/flink/table/planner/codegen/ExpressionReducer.scala#L142&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here is a simple example to reproduce the problem:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  val smallTupleData3: Seq[(Int, &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)] = {
    val data = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; mutable.MutableList[(Int, &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)]
    data.+=((1, 1L, &lt;span class=&quot;code-quote&quot;&gt;&quot;&#20320;&#22909;&quot;&lt;/span&gt;))
    data.+=((2, 2L, &lt;span class=&quot;code-quote&quot;&gt;&quot;&#20320;&#22909;&quot;&lt;/span&gt;))
    data.+=((3, 2L, &lt;span class=&quot;code-quote&quot;&gt;&quot;&#20320;&#22909;&#19990;&#30028;&quot;&lt;/span&gt;))
    data
  }

  @Test
  def test(): Unit = {
    val t = env.fromCollection(smallTupleData3)
      .toTable(tEnv, &lt;span class=&quot;code-quote&quot;&gt;&apos;a, &apos;&lt;/span&gt;b, &apos;c)
    tEnv.createTemporaryView(&lt;span class=&quot;code-quote&quot;&gt;&quot;MyTable&quot;&lt;/span&gt;, t)
    val sqlQuery = s&lt;span class=&quot;code-quote&quot;&gt;&quot;select * from MyTable where c = &lt;span class=&quot;code-quote&quot;&gt;&apos;&#20320;&#22909;&apos;&lt;/span&gt;&quot;&lt;/span&gt;

    val result = tEnv.sqlQuery(sqlQuery).toAppendStream[Row]
    val sink = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TestingAppendSink
    result.addSink(sink)
    env.execute()
    println(sink.getAppendResults.mkString(&lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;))
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The output:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1,1,\u4F60\u597D
2,2,\u4F60\u597D
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is also mentioned in user mailing list: &lt;a href=&quot;http://apache-flink.147419.n8.nabble.com/ParquetTableSource-blink-table-planner-tp1696p1720.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-flink.147419.n8.nabble.com/ParquetTableSource-blink-table-planner-tp1696p1720.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13285715">FLINK-16113</key>
            <summary>ExpressionReducer shouldn&apos;t escape the reduced string value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jark">Jark Wu</assignee>
                                    <reporter username="jark">Jark Wu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 17 Feb 2020 08:50:44 +0000</created>
                <updated>Sun, 19 Apr 2020 11:38:05 +0000</updated>
                            <resolved>Mon, 17 Feb 2020 14:49:38 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.9.4</fixVersion>
                    <fixVersion>1.10.1</fixVersion>
                    <fixVersion>1.11.0</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17038416" author="jark" created="Mon, 17 Feb 2020 14:49:38 +0000"  >&lt;p&gt;Fixed in &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;master(1.11.0): 22899a153c774bd7d491b569e26c1a2e9fd8cd85&lt;/li&gt;
	&lt;li&gt;1.10.1: ab5df9b8e7390ed1254876bc0ce71169c01f4ea4&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17083065" author="libenchao" created="Tue, 14 Apr 2020 10:12:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;this bug also affects 1.9 branch, do we need to also fix that?&lt;/p&gt;</comment>
                            <comment id="17083756" author="jark" created="Wed, 15 Apr 2020 03:12:47 +0000"  >&lt;p&gt;Sure. Would you like to open a pull request for 1.9 branch? There may conflicts when cherry-pick this to 1.9. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=libenchao&quot; class=&quot;user-hover&quot; rel=&quot;libenchao&quot;&gt;libenchao&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17083759" author="libenchao" created="Wed, 15 Apr 2020 03:17:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;sure, I&apos;d like to do it.&lt;/p&gt;</comment>
                            <comment id="17086935" author="jark" created="Sun, 19 Apr 2020 11:38:05 +0000"  >&lt;p&gt;Fixed in 1.9.4: 0fdb8079394055cffabf5060130751250e35b620&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13298494">FLINK-17153</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bkf4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>