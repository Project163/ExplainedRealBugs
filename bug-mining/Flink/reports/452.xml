<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2293] Division by Zero Exception</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2293</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I am basically running an algorithm that simulates a Gather Sum Apply Iteration that performs Traingle Count (Why simulate it? Because you just need a superstep -&amp;gt; useless overhead if you use the runGatherSumApply function in Graph).&lt;br/&gt;
What happens, at a high level:&lt;br/&gt;
1). Select neighbors with ID greater than the one corresponding to the current vertex;&lt;br/&gt;
2). Propagate the received values to neighbors with higher ID;&lt;br/&gt;
3). compute the number of triangles by checking whether&lt;/p&gt;

&lt;p&gt;trgVertex.getValue().get(srcVertex.getId());&lt;/p&gt;

&lt;p&gt;As you can see, I &lt;b&gt;do not&lt;/b&gt; perform any division at all;&lt;br/&gt;
code is here: &lt;a href=&quot;https://github.com/andralungu/gelly-partitioning/blob/master/src/main/java/example/GSATriangleCount.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andralungu/gelly-partitioning/blob/master/src/main/java/example/GSATriangleCount.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Now for small graphs, 50MB max, the computation finishes nicely with the correct result. For a 10GB graph, however, I got this:&lt;/p&gt;

&lt;p&gt;java.lang.ArithmeticException: / by zero&lt;br/&gt;
    at org.apache.flink.runtime.operators.hash.MutableHashTable.insertIntoTable(MutableHashTable.java:836)&lt;br/&gt;
    at org.apache.flink.runtime.operators.hash.MutableHashTable.buildTableFromSpilledPartition(MutableHashTable.java:819)&lt;br/&gt;
    at org.apache.flink.runtime.operators.hash.MutableHashTable.prepareNextPartition(MutableHashTable.java:508)&lt;br/&gt;
    at org.apache.flink.runtime.operators.hash.MutableHashTable.nextRecord(MutableHashTable.java:544)&lt;br/&gt;
    at org.apache.flink.runtime.operators.hash.NonReusingBuildFirstHashMatchIterator.callWithNextKey(NonReusingBuildFirstHashMatchIterator.java:104)&lt;br/&gt;
    at org.apache.flink.runtime.operators.MatchDriver.run(MatchDriver.java:173)&lt;br/&gt;
    at org.apache.flink.runtime.operators.RegularPactTask.run(RegularPactTask.java:496)&lt;br/&gt;
    at org.apache.flink.runtime.operators.RegularPactTask.invoke(RegularPactTask.java:362)&lt;br/&gt;
    at org.apache.flink.runtime.taskmanager.Task.run(Task.java:559)&lt;br/&gt;
    at java.lang.Thread.run(Thread.java:722)&lt;/p&gt;

&lt;p&gt;see the full log here: &lt;a href=&quot;https://gist.github.com/andralungu/984774f6348269df7951&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/andralungu/984774f6348269df7951&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12841608">FLINK-2293</key>
            <summary>Division by Zero Exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="andralungu">Andra Lungu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jun 2015 08:26:58 +0000</created>
                <updated>Wed, 2 Oct 2019 17:45:40 +0000</updated>
                            <resolved>Fri, 10 Jul 2015 08:34:19 +0000</resolved>
                                    <version>0.9</version>
                    <version>0.10.0</version>
                                    <fixVersion>0.9.1</fixVersion>
                    <fixVersion>0.10.0</fixVersion>
                                    <component>Runtime / Task</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14607950" author="fhueske" created="Tue, 30 Jun 2015 08:35:46 +0000"  >&lt;p&gt;Is it possible to share the 10GB input data (download link)? &lt;br/&gt;
Can you also share a few details about your execution setup (local machine, cluster, #machines, #slots, amount of memory, ...) that can help to reproduce the problem? Thanks!&lt;/p&gt;</comment>
                            <comment id="14607965" author="andralungu" created="Tue, 30 Jun 2015 08:50:41 +0000"  >&lt;p&gt;Also reproducible with &lt;a href=&quot;https://github.com/andralungu/gelly-partitioning/blob/master/src/main/java/example/NodeSplittingGSAJaccard.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andralungu/gelly-partitioning/blob/master/src/main/java/example/NodeSplittingGSAJaccard.java&lt;/a&gt;; The error is identical. &lt;/p&gt;

&lt;p&gt;The input DataSet is SNAP&apos;s orkut graph: &lt;a href=&quot;http://snap.stanford.edu/data/com-Orkut.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://snap.stanford.edu/data/com-Orkut.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am running on 30 wally nodes; well one is down so 29 (-p224). &lt;br/&gt;
Then, the flink.conf file should be useful: &lt;br/&gt;
&lt;a href=&quot;https://gist.github.com/andralungu/3338bbd01ce61e0ce43d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/andralungu/3338bbd01ce61e0ce43d&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Let me know if I can give help you with anything else. Even if it&apos;s a memory issue &lt;span class=&quot;error&quot;&gt;&amp;#91;as is often the case&amp;#93;&lt;/span&gt; ; the error is at least misleading... &lt;/p&gt;</comment>
                            <comment id="14608419" author="stephanewen" created="Tue, 30 Jun 2015 14:57:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhueske&quot; class=&quot;user-hover&quot; rel=&quot;fhueske&quot;&gt;fhueske&lt;/a&gt; and me have located this and figured out a fix. I&apos;ll try to push a fix later today.&lt;/p&gt;

&lt;p&gt;The issue occurs only in low-memory settings. You may want to break up the job anyways, to reduce memory fragmentation.&lt;/p&gt;</comment>
                            <comment id="14611943" author="andralungu" created="Thu, 2 Jul 2015 13:17:58 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I am trying to prepare my set of experiments for next week. Could you please tell me what the status of this fix is? I could also try workarounds if you&apos;d like to suggest some &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. The earliest experiment, as I said, will be scheduled for Sunday morning. &lt;/p&gt;

&lt;p&gt;Thanks! &lt;/p&gt;</comment>
                            <comment id="14614444" author="andralungu" created="Sun, 5 Jul 2015 23:44:50 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhueske&quot; class=&quot;user-hover&quot; rel=&quot;fhueske&quot;&gt;fhueske&lt;/a&gt;, &lt;/p&gt;

&lt;p&gt;For this one I built &lt;a href=&quot;https://github.com/fhueske/flink/tree/FLINK-2293&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fhueske/flink/tree/FLINK-2293&lt;/a&gt; without tests and packaged my jar once again. After deploying it to the cluster I got the same error. Am I doing it wrong? Should I also migrate the build (i.e. create a flink-0.10-patch)? &lt;/p&gt;

&lt;p&gt;Thanks! &lt;/p&gt;</comment>
                            <comment id="14614835" author="fhueske" created="Mon, 6 Jul 2015 10:25:13 +0000"  >&lt;p&gt;The fix changes the logic of the bucket number computation and sets it to at least 10.&lt;br/&gt;
Are you 100% sure you ran on the new build? &lt;br/&gt;
Can you check the log files for the Git commit hash (is one of the first log entries)?&lt;/p&gt;</comment>
                            <comment id="14616817" author="stephanewen" created="Tue, 7 Jul 2015 15:01:07 +0000"  >&lt;p&gt;I have a patch coming up...&lt;/p&gt;</comment>
                            <comment id="14618265" author="stephanewen" created="Wed, 8 Jul 2015 09:09:12 +0000"  >&lt;p&gt;Fixed in 0.10 in 627f3cbcfdca8368eea6aa825cd9a45a9a0a841f&lt;/p&gt;</comment>
                            <comment id="14618269" author="stephanewen" created="Wed, 8 Jul 2015 09:13:57 +0000"  >&lt;p&gt;Fixed in 0.10 in 627f3cbcfdca8368eea6aa825cd9a45a9a0a841f&lt;br/&gt;
Fixed in 0.9  in 7c2a704f24646e77726a2cc944a65c2096d2f11a&lt;/p&gt;</comment>
                            <comment id="14618344" author="andralungu" created="Wed, 8 Jul 2015 10:16:49 +0000"  >&lt;p&gt;Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt;, I&apos;ll test the fix this evening! &lt;br/&gt;
I am super excited about it! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14619363" author="andralungu" created="Wed, 8 Jul 2015 20:57:22 +0000"  >&lt;p&gt;Unfortunately it still fails... And now I am sure I pulled the changes for the latest master... &lt;/p&gt;

&lt;p&gt;This is the tail of the Job Manager log:&lt;br/&gt;
Vertices(GSAJaccard.java:67)) -&amp;gt; Map (Map at cleanupEdges(SplitVertex.java:252)) (155/224) (a781650bddb6ef3640ceade61e385a35) switched from CANCELING to CANCELED&lt;br/&gt;
22:48:20,706 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - CHAIN Join(Join at getTriplets(Graph.java:335)) -&amp;gt; Map (Map at computeJaccardForSplitVertices(GSAJaccard.java:67)) -&amp;gt; Map (Map at cleanupEdges(SplitVertex.java:252)) (154/224) (473136130456da82aa3fc3c28dc9cd4e) switched from CANCELING to CANCELED&lt;br/&gt;
22:48:20,712 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - CHAIN Join(Join at getTriplets(Graph.java:335)) -&amp;gt; Map (Map at computeJaccardForSplitVertices(GSAJaccard.java:67)) -&amp;gt; Map (Map at cleanupEdges(SplitVertex.java:252)) (224/224) (4269d4b6a626781e45d1232a3846be44) switched from CANCELING to CANCELED&lt;br/&gt;
22:48:20,732 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - CHAIN Join(Join at getTriplets(Graph.java:335)) -&amp;gt; Map (Map at computeJaccardForSplitVertices(GSAJaccard.java:67)) -&amp;gt; Map (Map at cleanupEdges(SplitVertex.java:252)) (67/224) (7a18869b576feca07305c178cc3ecd1f) switched from CANCELING to CANCELED&lt;br/&gt;
22:48:20,732 INFO  org.apache.flink.runtime.jobmanager.JobManager                - Status of job 3a7b88c3b6065fdd7f1be155905caa5f (Node Splitting GSA Jaccard Similarity Measure) changed to FAILED.&lt;br/&gt;
java.lang.ArithmeticException: / by zero&lt;br/&gt;
	at org.apache.flink.runtime.operators.hash.MutableHashTable.insertIntoTable(MutableHashTable.java:836)&lt;br/&gt;
	at org.apache.flink.runtime.operators.hash.MutableHashTable.buildTableFromSpilledPartition(MutableHashTable.java:819)&lt;br/&gt;
	at org.apache.flink.runtime.operators.hash.MutableHashTable.prepareNextPartition(MutableHashTable.java:508)&lt;br/&gt;
	at org.apache.flink.runtime.operators.hash.MutableHashTable.nextRecord(MutableHashTable.java:544)&lt;br/&gt;
	at org.apache.flink.runtime.operators.hash.NonReusingBuildFirstHashMatchIterator.callWithNextKey(NonReusingBuildFirstHashMatchIterator.java:104)&lt;br/&gt;
	at org.apache.flink.runtime.operators.MatchDriver.run(MatchDriver.java:173)&lt;br/&gt;
	at org.apache.flink.runtime.operators.RegularPactTask.run(RegularPactTask.java:496)&lt;br/&gt;
	at org.apache.flink.runtime.operators.RegularPactTask.invoke(RegularPactTask.java:362)&lt;br/&gt;
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:559)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:722)&lt;/p&gt;</comment>
                            <comment id="14620116" author="stephanewen" created="Thu, 9 Jul 2015 08:30:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andralungu&quot; class=&quot;user-hover&quot; rel=&quot;andralungu&quot;&gt;andralungu&lt;/a&gt; The line numbers in your stack trace (where the exception occurs, and the frame below as well) correspond to empty lines or comment lines in the source code of the latest master.&lt;/p&gt;

&lt;p&gt;See here: &lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-runtime/src/main/java/org/apache/flink/runtime/operators/hash/MutableHashTable.java#L836&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/master/flink-runtime/src/main/java/org/apache/flink/runtime/operators/hash/MutableHashTable.java#L836&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Are you sure you are using the code after I added the patch?&lt;/p&gt;</comment>
                            <comment id="14620117" author="stephanewen" created="Thu, 9 Jul 2015 08:30:37 +0000"  >&lt;p&gt;You can look at the beginning of the log, it writes the code revision out. Can you post which one it is?&lt;/p&gt;</comment>
                            <comment id="14620123" author="andralungu" created="Thu, 9 Jul 2015 08:35:25 +0000"  >&lt;p&gt;I should not have tried anything yesterday... I was too tired to make things work. The flink version on the cluster was updated, however I forgot to update the jar. I am doing this as we speak and will keep you posted once the job finishes. Sorry! &lt;/p&gt;</comment>
                            <comment id="14621986" author="andralungu" created="Fri, 10 Jul 2015 08:33:24 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thank you for your patience. Indeed I had the wrong update for Flink and then I had to fix some minor glitches in my code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
But everything is perfect now! I tested it on all the jobs that previously failed with this exception.  &lt;/p&gt;</comment>
                            <comment id="14621987" author="andralungu" created="Fri, 10 Jul 2015 08:34:19 +0000"  >&lt;p&gt;Sorry for reopening it when it was already fixed. Never hurts to make sure that it also works in the environment where it previously failed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Thanks again!&lt;/p&gt;</comment>
                            <comment id="14621997" author="stephanewen" created="Fri, 10 Jul 2015 08:47:11 +0000"  >&lt;p&gt;No worries, just glad the bug is fixed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2go7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>