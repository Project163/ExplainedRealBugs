<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15858] Unable to use HiveCatalog and kafka together</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15858</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;HiveCatalog only support timestamp(9), but kafka only support timestamp(3). This make user unable to use HiveCatalog and kafka together&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

Caused by: org.apache.flink.table.catalog.exceptions.CatalogException: HiveCatalog currently only supports timestamp of precision 9
	at org.apache.flink.table.catalog.hive.util.HiveTypeUtil$TypeInfoLogicalTypeVisitor.visit(HiveTypeUtil.java:272)
	at org.apache.flink.table.catalog.hive.util.HiveTypeUtil$TypeInfoLogicalTypeVisitor.visit(HiveTypeUtil.java:173)
	at org.apache.flink.table.types.logical.TimestampType.accept(TimestampType.java:151)
	at org.apache.flink.table.catalog.hive.util.HiveTypeUtil.toHiveTypeInfo(HiveTypeUtil.java:84)
	at org.apache.flink.table.catalog.hive.util.HiveTableUtil.createHiveColumns(HiveTableUtil.java:106) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13282916">FLINK-15858</key>
            <summary>Unable to use HiveCatalog and kafka together</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lirui">Rui Li</assignee>
                                    <reporter username="zjffdu">Jeff Zhang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 3 Feb 2020 07:15:58 +0000</created>
                <updated>Thu, 6 Feb 2020 05:02:52 +0000</updated>
                            <resolved>Wed, 5 Feb 2020 10:04:03 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Table SQL / Ecosystem</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17028713" author="zjffdu" created="Mon, 3 Feb 2020 07:16:26 +0000"  >&lt;p&gt;\cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17028734" author="lirui" created="Mon, 3 Feb 2020 07:46:20 +0000"  >&lt;p&gt;This seems to be more of a limitation than a bug to me. HMS doesn&apos;t support storing precision info for &lt;tt&gt;TIMESTAMP&lt;/tt&gt; columns. That&apos;s why we disallow creating &lt;tt&gt;TIMESTAMP(!=9)&lt;/tt&gt; with HiveCatalog &amp;#8211; the precision will be discarded anyway.&lt;/p&gt;

&lt;p&gt;Maybe for generic tables, we can store the schema as table properties, so as to support Flink-specific types.&lt;/p&gt;</comment>
                            <comment id="17029431" author="lzljs3620320" created="Tue, 4 Feb 2020 01:57:09 +0000"  >&lt;p&gt;+1 to fix this.&lt;/p&gt;

&lt;p&gt;I think this should be supported. When we design HiveCatalog, an important feature is to support generic tables, and Kafka is the most important generic table.&lt;/p&gt;</comment>
                            <comment id="17029432" author="lzljs3620320" created="Tue, 4 Feb 2020 01:58:28 +0000"  >&lt;p&gt;If I remember correctly, 1.9 is supported. 1.10 broken.&lt;/p&gt;</comment>
                            <comment id="17029495" author="zjffdu" created="Tue, 4 Feb 2020 02:40:37 +0000"  >&lt;p&gt;In that case, it is a regression issue, definitely need to fix in 1.10&lt;/p&gt;</comment>
                            <comment id="17029766" author="lzljs3620320" created="Tue, 4 Feb 2020 11:14:08 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjffdu&quot; class=&quot;user-hover&quot; rel=&quot;zjffdu&quot;&gt;zjffdu&lt;/a&gt;, it seems that we need take more time to finish it. I set it critical to not block RC release.&lt;/p&gt;</comment>
                            <comment id="17030295" author="zjffdu" created="Wed, 5 Feb 2020 01:58:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&#160;But IIRC, this issue means users unable to use kafka with hivecatalog together. Doesn&apos;t that mean a blocker issue ?&lt;/p&gt;</comment>
                            <comment id="17030299" author="zjffdu" created="Wed, 5 Feb 2020 02:10:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liyu&quot; class=&quot;user-hover&quot; rel=&quot;liyu&quot;&gt;liyu&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt;&#160;This ticket means&#160;users unable to use kafka with hivecatalog together when involving timestamp field. I believe this should be a blocker issue for 1.10&#160;&lt;/p&gt;</comment>
                            <comment id="17030330" author="lzljs3620320" created="Wed, 5 Feb 2020 03:12:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjffdu&quot; class=&quot;user-hover&quot; rel=&quot;zjffdu&quot;&gt;zjffdu&lt;/a&gt;&#160;Sorry, I underestimated its importance. Code looked good to me, we can add more it cases. I pulled &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bli&quot; class=&quot;user-hover&quot; rel=&quot;bli&quot;&gt;bli&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ykt836&quot; class=&quot;user-hover&quot; rel=&quot;ykt836&quot;&gt;ykt836&lt;/a&gt;&#160;to review&amp;amp;merge.&lt;/p&gt;</comment>
                            <comment id="17030341" author="phoenixjiangnan" created="Wed, 5 Feb 2020 04:11:48 +0000"  >&lt;p&gt;I&apos;m ok with the proposed solution.&lt;/p&gt;

&lt;p&gt;However, that means users cannot use basic SQL like &quot;describe &amp;lt;table&amp;gt;&quot; in Hive to probe the table, as stated in example of &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-master/dev/table/hive/hive_catalog.html#step-4-start-sql-client-and-create-a-kafka-table-with-flink-sql-ddl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.apache.org/projects/flink/flink-docs-master/dev/table/hive/hive_catalog.html#step-4-start-sql-client-and-create-a-kafka-table-with-flink-sql-ddl&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Another solution is to store precisions for such data types in properties or the column names, and keep the schema still in Hive table schema.&lt;/p&gt;</comment>
                            <comment id="17030346" author="lzljs3620320" created="Wed, 5 Feb 2020 04:28:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phoenixjiangnan&quot; class=&quot;user-hover&quot; rel=&quot;phoenixjiangnan&quot;&gt;phoenixjiangnan&lt;/a&gt;, Good point.&lt;/p&gt;

&lt;p&gt;But I think&#160;maybe it&apos;s not just precision. Some other types of Flink can&apos;t be expressed in hive.&#160;And it doesn&apos;t look good to split type and precision.&lt;/p&gt;

&lt;p&gt;I think we can leave it to the 1.11 later to consider whether we want to support the display and use of Flink&apos;s table in hive.&lt;/p&gt;</comment>
                            <comment id="17030368" author="ykt836" created="Wed, 5 Feb 2020 05:35:32 +0000"  >&lt;p&gt;Consider we don&apos;t have much time, fix this issue and improve other usability sounds a reasonable solution.&#160;&lt;/p&gt;

&lt;p&gt;BTW, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phoenixjiangnan&quot; class=&quot;user-hover&quot; rel=&quot;phoenixjiangnan&quot;&gt;phoenixjiangnan&lt;/a&gt;&#160;could you create a Jira to track what you want to achieve?&lt;/p&gt;</comment>
                            <comment id="17030373" author="lirui" created="Wed, 5 Feb 2020 05:52:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;that means users cannot use basic SQL like &quot;describe &amp;lt;table&amp;gt;&quot; in Hive to probe the table&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It doesn&apos;t seem to be a big issue to me. Since generic tables cannot be used in Hive anyway, what&apos;s the point to support displaying the schema via Hive CLI? In addition, it&apos;s not just about precision info, there can be Flink types that cannot be mapped to corresponding Hive types.&lt;/p&gt;

&lt;p&gt;If users want to check whether a table is generic or not, they can call &lt;tt&gt;DESCRIBE FORMATTED&lt;/tt&gt; to look for the &lt;tt&gt;is_generic&lt;/tt&gt; property.&lt;/p&gt;</comment>
                            <comment id="17030511" author="ykt836" created="Wed, 5 Feb 2020 10:04:03 +0000"  >&lt;p&gt;1.10.0:&#160;ba5b5b77cdfeafa4b84028d48af66f130a2cc071&lt;/p&gt;

&lt;p&gt;master:&#160;4fcd877e5c3290412f4a71d1cd01ff3a0b3a4562&lt;/p&gt;</comment>
                            <comment id="17031280" author="phoenixjiangnan" created="Thu, 6 Feb 2020 05:02:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt; please go over Flink docs to update related content&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15933&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-15933&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13283197">FLINK-15901</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0b3fk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>