<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:32:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8894] CurrentJobIdsHandler fails to serialize response</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8894</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;b&gt;Description&lt;/b&gt;&lt;br/&gt;
The non-flip6 &lt;tt&gt;CurrentJobIdsHandler&lt;/tt&gt; fails to serialize instances of &lt;tt&gt;JobIdWithStatus&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Steps to reproduce&lt;/b&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Add &lt;tt&gt;mode: old&lt;/tt&gt; to &lt;tt&gt;flink-conf.yaml&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;bin/start-cluster.sh&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;nc -l 9001&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;bin/flink run  examples/streaming/SocketWindowWordCount.jar --port 9001&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;curl localhost:8081/jobs&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&lt;b&gt;Stacktrace&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.util.concurrent.CompletionException: org.apache.flink.util.FlinkException: Failed to fetch list of all running jobs.
	at org.apache.flink.runtime.rest.handler.legacy.CurrentJobIdsHandler.lambda$handleJsonRequest$0(CurrentJobIdsHandler.java:93)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.flink.util.FlinkException: Failed to fetch list of all running jobs.
	... 9 more
Caused by: java.lang.IllegalStateException: No ObjectCodec defined for the generator, can only serialize simple wrapper types (type passed org.apache.flink.runtime.messages.webmonitor.JobIdsWithStatusOverview$JobIdWithStatus)
	at org.apache.flink.shaded.jackson2.com.fasterxml.jackson.core.JsonGenerator._writeSimpleObject(JsonGenerator.java:1798)
	at org.apache.flink.shaded.jackson2.com.fasterxml.jackson.core.base.GeneratorBase.writeObject(GeneratorBase.java:369)
	at org.apache.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13143479">FLINK-8894</key>
            <summary>CurrentJobIdsHandler fails to serialize response</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gjy">Gary Yao</assignee>
                                    <reporter username="gjy">Gary Yao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Mar 2018 08:19:23 +0000</created>
                <updated>Sun, 18 Mar 2018 18:00:26 +0000</updated>
                            <resolved>Sun, 18 Mar 2018 18:00:26 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.6.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>Runtime / REST</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16392520" author="mingleizhang" created="Fri, 9 Mar 2018 07:14:59 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; I want to reproduce this issue on my machine. But I do not know how to do &lt;tt&gt;Add mode: old to flink-conf.yaml&lt;/tt&gt;. It seems I can not find a key that can set the cluster model for Flip6 or old in this yaml file. Could you tell you how you set that ? Thank you.&lt;/p&gt;</comment>
                            <comment id="16392557" author="gjy" created="Fri, 9 Mar 2018 08:07:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mingleizhang&quot; class=&quot;user-hover&quot; rel=&quot;mingleizhang&quot;&gt;mingleizhang&lt;/a&gt;&#160;You just add a new line to &lt;tt&gt;flink-conf.yaml&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mode: old
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-master/ops/config.html#flip-6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.apache.org/projects/flink/flink-docs-master/ops/config.html#flip-6&lt;/a&gt;&lt;br/&gt;
There are a lot of config keys that rely on defaults, and are not in the &lt;tt&gt;flink-conf.yaml&lt;/tt&gt; template.&lt;/p&gt;
</comment>
                            <comment id="16392560" author="mingleizhang" created="Fri, 9 Mar 2018 08:14:14 +0000"  >&lt;p&gt;Thanks for your response &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; I am so surprise there already has flip6 website.&lt;/p&gt;</comment>
                            <comment id="16392610" author="mingleizhang" created="Fri, 9 Mar 2018 08:53:42 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; It seems that I can not run the &lt;tt&gt;bin/start-cluster.sh&lt;/tt&gt; on the latest code I build from master. I would ask, what version code you are using ? Thank you.&lt;/p&gt;

&lt;p&gt;I got the below error when running start-cluster.sh&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[root@ricezhang-pjhzf bin]# ./start-cluster.sh 
Starting cluster.
Starting jobmanager daemon on host ricezhang-pjhzf.vclound.com.
: Temporary failure in name resolutionost
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="16392666" author="gjy" created="Fri, 9 Mar 2018 10:04:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mingleizhang&quot; class=&quot;user-hover&quot; rel=&quot;mingleizhang&quot;&gt;mingleizhang&lt;/a&gt; I have just recompiled the current master, and I don&apos;t experience the problem you are describing. The next command after &lt;tt&gt;echo &quot;Starting $DAEMON daemon on host $HOSTNAME.&quot;&lt;/tt&gt; already starts the JVM. Can you check if the JVM runs after &lt;tt&gt;./start-cluster.sh&lt;/tt&gt;? &lt;/p&gt;</comment>
                            <comment id="16392678" author="mingleizhang" created="Fri, 9 Mar 2018 10:26:57 +0000"  >&lt;p&gt;Hmm, Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; I do not know either. But the JVM running when I run the script. I built the flink code on my windows machine and copy it to my remote machine that is centos. I think that will cause that problem maybe. I do not have network on my centos machine. So i just COPY. And I already changed the file format (all scripts) to unix by &lt;tt&gt;set ff=unix&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16402416" author="githubbot" created="Fri, 16 Mar 2018 20:00:17 +0000"  >&lt;p&gt;GitHub user GJL opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5711&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8894&quot; title=&quot;CurrentJobIdsHandler fails to serialize response&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8894&quot;&gt;&lt;del&gt;FLINK-8894&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;REST&amp;#93;&lt;/span&gt; CurrentJobIdsHandler fails to serialize response&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    &lt;b&gt;This fixes a serialization error in `CurrentJobIdsHandler`.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    cc: @tillrohrmann &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Set object codec for `JsonGenerator` used in handler.&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Add unit test.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This change added tests and can be verified as follows:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Added test to `CurrentJobIdsHandler`.&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Manually verified the changes.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (*&lt;b&gt;not applicable&lt;/b&gt;* / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/GJL/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/GJL/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8894&quot; title=&quot;CurrentJobIdsHandler fails to serialize response&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8894&quot;&gt;&lt;del&gt;FLINK-8894&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5711.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5711.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5711&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 559a80836c76cabcc687f4a7e129e4dec6e5de6e&lt;br/&gt;
Author: gyao &amp;lt;gary@...&amp;gt;&lt;br/&gt;
Date:   2018-03-16T19:52:11Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8894&quot; title=&quot;CurrentJobIdsHandler fails to serialize response&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8894&quot;&gt;&lt;del&gt;FLINK-8894&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;REST&amp;#93;&lt;/span&gt; Set object codec for JsonGenerator used by CurrentJobIdsHandler&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16404079" author="githubbot" created="Sun, 18 Mar 2018 17:56:28 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5711&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16404083" author="till.rohrmann" created="Sun, 18 Mar 2018 18:00:26 +0000"  >&lt;p&gt;Fixed via&lt;br/&gt;
1.6.0: 096a89ae6d0db9d763648a0acca2334f14efd3b3&lt;br/&gt;
1.5.0: 7739cb71d9a3d476c66cdd29f26744e5ef3eb1b3&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3r16f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>