<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:51:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15170] WebFrontendITCase.testCancelYarn fails on travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15170</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://api.travis-ci.org/v3/job/622756846/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/622756846/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
23:59:33.299 [INFO] Running org.apache.flink.runtime.webmonitor.WebFrontendITCase
23:59:33.365 [INFO] Running org.apache.flink.runtime.webmonitor.handlers.JarSubmissionITCase
23:59:35.379 [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.012 s - in org.apache.flink.runtime.webmonitor.handlers.JarSubmissionITCase
23:59:38.802 [ERROR] Tests run: 9, Failures: 1, Errors: 1, Skipped: 0, Time elapsed: 5.5 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.runtime.webmonitor.WebFrontendITCase
23:59:38.802 [ERROR] testCancelYarn(org.apache.flink.runtime.webmonitor.WebFrontendITCase)  Time elapsed: 0.436 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.util.concurrent.TimeoutException: Connection failed
	at org.apache.flink.runtime.webmonitor.WebFrontendITCase.testCancelYarn(WebFrontendITCase.java:324)

23:59:38.802 [ERROR] testCancel(org.apache.flink.runtime.webmonitor.WebFrontendITCase)  Time elapsed: 0.003 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError
	at org.apache.flink.runtime.webmonitor.WebFrontendITCase.testCancel(WebFrontendITCase.java:240)

23:59:39.193 [INFO] 
23:59:39.193 [INFO] Results:
23:59:39.193 [INFO] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13273552">FLINK-15170</key>
            <summary>WebFrontendITCase.testCancelYarn fails on travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="dwysakowicz">Dawid Wysakowicz</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 10 Dec 2019 08:12:12 +0000</created>
                <updated>Thu, 19 Nov 2020 13:39:18 +0000</updated>
                            <resolved>Thu, 19 Nov 2020 13:39:18 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.3</fixVersion>
                    <fixVersion>1.11.3</fixVersion>
                    <fixVersion>1.12.0</fixVersion>
                                    <component>Deployment / YARN</component>
                    <component>Runtime / Web Frontend</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="16994403" author="lining" created="Thu, 12 Dec 2019 08:54:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;, has it happened again? I have run it in local for many times, and it didn&apos;t happen. Do you have another instance for it?&lt;/p&gt;</comment>
                            <comment id="16994424" author="dawidwys" created="Thu, 12 Dec 2019 09:16:42 +0000"  >&lt;p&gt;That was the only occurrence that I&apos;ve seen. Have you tried running it in travis? If you do not manage to reproduce it there, we can close it for now.&lt;/p&gt;</comment>
                            <comment id="16994458" author="gjy" created="Thu, 12 Dec 2019 09:52:34 +0000"  >&lt;p&gt;How often did you run it?&lt;/p&gt;</comment>
                            <comment id="16994460" author="lining" created="Thu, 12 Dec 2019 09:54:03 +0000"  >&lt;p&gt;I have run it in trails, it didn&apos;t happen, so we could close it first.&lt;/p&gt;</comment>
                            <comment id="16994472" author="lining" created="Thu, 12 Dec 2019 10:05:20 +0000"  >&lt;p&gt;I kept running until there were exceptions, and then I ran more than 2,000 times without this problem.&lt;/p&gt;</comment>
                            <comment id="16994485" author="xintongsong" created="Thu, 12 Dec 2019 10:18:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lining&quot; class=&quot;user-hover&quot; rel=&quot;lining&quot;&gt;lining&lt;/a&gt; &lt;br/&gt;
Maybe you can try checkout the very commit where this problem happen, see if it can be reproduced.&lt;br/&gt;
The commit id is &apos;bb6fd8281654be2a4e03a04c09e755525ec058ca&apos;, which can be found in the travis log attached in the issue description.&lt;br/&gt;
And if it still cannot be reduced, I would suggest to downgrade this issue to Critical instead of close it.&lt;/p&gt;</comment>
                            <comment id="16994519" author="lining" created="Thu, 12 Dec 2019 10:48:17 +0000"  >&lt;p&gt;Ok, I&apos;ll do it.&lt;/p&gt;</comment>
                            <comment id="16995286" author="lining" created="Fri, 13 Dec 2019 02:18:23 +0000"  >&lt;p&gt;I have checked out to the commit from the error log&#65292;this problem still didn&apos;t happen, so I update it from blocker to critical first.&lt;/p&gt;</comment>
                            <comment id="17002753" author="carp84" created="Tue, 24 Dec 2019 09:24:28 +0000"  >&lt;p&gt;Further downgrade the priority to Major since no more occurrence in recent days. &lt;/p&gt;</comment>
                            <comment id="17005149" author="carp84" created="Mon, 30 Dec 2019 06:30:39 +0000"  >&lt;p&gt;Reproduced, the failure instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/630652255/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/630652255/log.txt&lt;/a&gt;&lt;br/&gt;
(Note: this only reproduced in the &lt;tt&gt;core-hadoop 2.4.1&lt;/tt&gt; stage: &lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/630652255&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/630652255&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lining&quot; class=&quot;user-hover&quot; rel=&quot;lining&quot;&gt;lining&lt;/a&gt; could you take a look? Thanks.&lt;/p&gt;</comment>
                            <comment id="17005207" author="lining" created="Mon, 30 Dec 2019 08:53:11 +0000"  >&lt;p&gt;Discover testCancelYarn and testCancel all fail.&lt;/p&gt;

&lt;p&gt;Method testCancel failed because java.lang.AssertionError is at WebFrontendITCase.java:240.&lt;br/&gt;
 Methoud testCancelYarn failed because java.util.concurrent.TimeoutException: Connection failed is located at WebFrontendITCase.java:324.&lt;/p&gt;

&lt;p&gt;Possible cause: If maven test first runs testCancelYarn, its request to cancel fail, then there&apos;s one job is running, so testCancel asserts no running job fail.&lt;/p&gt;</comment>
                            <comment id="17078844" author="dian.fu" created="Thu, 9 Apr 2020 01:17:08 +0000"  >&lt;p&gt;Another instance from master: &lt;a href=&quot;https://api.travis-ci.org/v3/job/672547894/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/672547894/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17083069" author="till.rohrmann" created="Tue, 14 Apr 2020 10:15:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lining&quot; class=&quot;user-hover&quot; rel=&quot;lining&quot;&gt;lining&lt;/a&gt; any updates on this issue?&lt;/p&gt;</comment>
                            <comment id="17088405" author="till.rohrmann" created="Tue, 21 Apr 2020 08:09:08 +0000"  >&lt;p&gt;Gentle reminder for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lining&quot; class=&quot;user-hover&quot; rel=&quot;lining&quot;&gt;lining&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17097245" author="rmetzger" created="Fri, 1 May 2020 08:33:39 +0000"  >&lt;p&gt;Another case in 1.10: &lt;a href=&quot;https://travis-ci.org/github/apache/flink/jobs/681613001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/github/apache/flink/jobs/681613001&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17130665" author="till.rohrmann" created="Wed, 10 Jun 2020 13:12:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lining&quot; class=&quot;user-hover&quot; rel=&quot;lining&quot;&gt;lining&lt;/a&gt; did you have time to work on a fix for this problem?&lt;/p&gt;</comment>
                            <comment id="17170758" author="dian.fu" created="Tue, 4 Aug 2020 12:05:12 +0000"  >&lt;p&gt;Another instance on 1.10: &lt;a href=&quot;https://travis-ci.org/github/apache/flink/jobs/714614632&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/github/apache/flink/jobs/714614632&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17174264" author="lining" created="Mon, 10 Aug 2020 11:49:32 +0000"  >&lt;p&gt;According to the current message, it can be determined that this is due to&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;client.sendGetRequest(&quot;/jobs/&quot; + jid + &quot;/yarn-cancel&quot;, getTimeLeft(deadline));&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;timeout.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17231399" author="till.rohrmann" created="Fri, 13 Nov 2020 11:34:49 +0000"  >&lt;p&gt;I think the problem might be caused because of jumping clocks. The jumping clocks might be cause by using &lt;tt&gt;System.currentTimeMillis&lt;/tt&gt;. I propose to fix this issue by using &lt;tt&gt;System.nanoTime&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17235473" author="till.rohrmann" created="Thu, 19 Nov 2020 13:39:18 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;1.12.0: f62094d7d4b785c85670ce8cd9f0ed12c7f326ff&lt;br/&gt;
1.11.3: 01c5c1432df2fbe2ff9187625ced6793a4912530&lt;br/&gt;
1.10.3: d2409c1877ebd6a222dab3f15936af1cd6c4152b&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09idk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>