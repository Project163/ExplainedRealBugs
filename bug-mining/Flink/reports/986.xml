<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:23:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3909] Maven Failsafe plugin may report SUCCESS on failed tests</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3909</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The following build completed successfully on Travis but there are actually test failures: &lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/129943398#L5402&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/129943398#L5402&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12969569">FLINK-3909</key>
            <summary>Maven Failsafe plugin may report SUCCESS on failed tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="mxm">Maximilian Michels</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 May 2016 16:12:00 +0000</created>
                <updated>Mon, 23 May 2016 10:03:46 +0000</updated>
                            <resolved>Fri, 20 May 2016 15:44:01 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Build System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15286550" author="rmetzger" created="Tue, 17 May 2016 12:51:33 +0000"  >&lt;p&gt;Would be interesting to see if this is an issue of the maven version or the failsafe plugin version&lt;/p&gt;</comment>
                            <comment id="15286742" author="mxm" created="Tue, 17 May 2016 14:40:53 +0000"  >&lt;p&gt;Failing tests are not supposed to fail the entire build in the &lt;tt&gt;integration-test&lt;/tt&gt; phase:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The Failsafe Plugin is used during the integration-test and verify phases of the build lifecycle to execute the integration tests of an application. The Failsafe Plugin will not fail the build during the integration-test phase, thus enabling the post-integration-test phase to execute.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://maven.apache.org/surefire/maven-failsafe-plugin/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-failsafe-plugin/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The verify phase also runs afterwards but doesn&apos;t receive the failed tests from the previous phase. It appears the test failures are read from the &lt;tt&gt;failsafe-reports&lt;/tt&gt; file in the verify phase.&lt;/p&gt;

&lt;p&gt;I verified on my machine that Exceptions thrown in the integration-tests phase let maven fail the build on &lt;tt&gt;mvn verify&lt;/tt&gt;.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] --- maven-failsafe-plugin:2.18.1:verify (default) @ flink-tests_2.10 ---
[INFO] Failsafe report directory: /Users/max/Dev/flink/flink-tests/target/failsafe-reports
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-failsafe-plugin:2.18.1:verify (default) on project flink-tests_2.10: There are test failures.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On Travis, all we get is &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] --- maven-failsafe-plugin:2.18.1:verify (default) @ flink-tests_2.10 ---
[INFO] Failsafe report directory: /home/travis/build/apache/flink/flink-tests/target/failsafe-reports
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;executions&lt;/tt&gt; are set up correctly in the parent pom. I&apos;ll try to reproduce the error on Travis with activated debug logging.&lt;/p&gt;</comment>
                            <comment id="15288968" author="githubbot" created="Wed, 18 May 2016 13:40:14 +0000"  >&lt;p&gt;GitHub user mxm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3909&quot; title=&quot;Maven Failsafe plugin may report SUCCESS on failed tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3909&quot;&gt;&lt;del&gt;FLINK-3909&lt;/del&gt;&lt;/a&gt; update Maven Failsafe version&lt;/p&gt;

&lt;p&gt;    Failures during execution of the integration tests with the Maven&lt;br/&gt;
    Failsafe plugin were silently ignored on Travis with Maven version&lt;br/&gt;
    3.2.5. The problem is that failures are not passed on correctly from the&lt;br/&gt;
    &apos;integration-test&apos; phase (where failures are recorded and tolerated) to&lt;br/&gt;
    the &apos;verify&apos; phase.&lt;/p&gt;

&lt;p&gt;    The cause of the error is most likely &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1127&quot; title=&quot;Failsafe project does not fail in verify phase when a test case object errors during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1127&quot;&gt;&lt;del&gt;SUREFIRE-1127&lt;/del&gt;&lt;/a&gt;. An exception in the&lt;br/&gt;
    &apos;integration-test&apos; is sometimes not flushed back to disk where it is&lt;br/&gt;
    evaluated in the &apos;verify&apos; phase. Bumping the version of the Failsafe&lt;br/&gt;
    plugin from 2.18.1 to 2.19.1 fixes the issue.&lt;/p&gt;

&lt;p&gt;    Tests will fail for this PR &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mxm/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mxm/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3909&quot; title=&quot;Maven Failsafe plugin may report SUCCESS on failed tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3909&quot;&gt;&lt;del&gt;FLINK-3909&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2003&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit dc2530d72609032a2ca72e82b83709c46bd5db96&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-05-18T12:34:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3909&quot; title=&quot;Maven Failsafe plugin may report SUCCESS on failed tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3909&quot;&gt;&lt;del&gt;FLINK-3909&lt;/del&gt;&lt;/a&gt; update Maven Failsafe version&lt;/p&gt;

&lt;p&gt;    Failures during execution of the integration tests with the Maven&lt;br/&gt;
    Failsafe plugin were silently ignored on Travis with Maven version&lt;br/&gt;
    3.2.5. The problem is that failures are not passed on correctly from the&lt;br/&gt;
    &apos;integration-test&apos; phase (where failures are recorded and tolerated) to&lt;br/&gt;
    the &apos;verify&apos; phase.&lt;/p&gt;

&lt;p&gt;    The cause of the error is most likely &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1127&quot; title=&quot;Failsafe project does not fail in verify phase when a test case object errors during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1127&quot;&gt;&lt;del&gt;SUREFIRE-1127&lt;/del&gt;&lt;/a&gt;. An exception in the&lt;br/&gt;
    &apos;integration-test&apos; is sometimes not flushed back to disk where it is&lt;br/&gt;
    evaluated in the &apos;verify&apos; phase. Bumping the version of the Failsafe&lt;br/&gt;
    plugin from 2.18.1 to 2.19.1 fixes the issue.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15289008" author="githubbot" created="Wed, 18 May 2016 14:03:47 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220035850&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220035850&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Tests fail in flink-runtime now. Seem to be class path related problems.&lt;br/&gt;
    ```&lt;br/&gt;
      CheckpointIDCounterTest$ZooKeeperCheckpointIDCounterITCase.org.apache.flink.runtime.checkpoint.CheckpointIDCounterTest$ZooKeeperCheckpointIDCounterITCase &#194;&#187; NoClassDefFound&lt;br/&gt;
      CheckpointIDCounterTest$ZooKeeperCheckpointIDCounterITCase.&amp;lt;clinit&amp;gt;:53 &#194;&#187; NoSuchMethod&lt;br/&gt;
      CheckpointIDCounterTest$ZooKeeperCheckpointIDCounterITCase.testSerialIncrementAndGet &#194;&#187; NoClassDefFound&lt;br/&gt;
      CheckpointIDCounterTest$ZooKeeperCheckpointIDCounterITCase.testSetCount &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperCompletedCheckpointStoreITCase.org.apache.flink.runtime.checkpoint.ZooKeeperCompletedCheckpointStoreITCase &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperCompletedCheckpointStoreITCase.testAddAndGetLatestCheckpoint &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperCompletedCheckpointStoreITCase.testAddCheckpointMoreThanMaxRetained &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperCompletedCheckpointStoreITCase.testDiscardAllCheckpoints &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperCompletedCheckpointStoreITCase.testEmptyState &#194;&#187; NoClassDefFound Could...&lt;br/&gt;
      ZooKeeperCompletedCheckpointStoreITCase.testExceptionOnNoRetainedCheckpoints &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperCompletedCheckpointStoreITCase.testGetAllCheckpoints &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperCompletedCheckpointStoreITCase.&amp;lt;clinit&amp;gt;:40 &#194;&#187; NoSuchMethod org.apache....&lt;br/&gt;
      ZooKeeperSubmittedJobGraphsStoreITCase.org.apache.flink.runtime.jobmanager.ZooKeeperSubmittedJobGraphsStoreITCase &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperSubmittedJobGraphsStoreITCase.testConcurrentAddJobGraph &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperSubmittedJobGraphsStoreITCase.&amp;lt;clinit&amp;gt;:58 &#194;&#187; NoSuchMethod org.apache.f...&lt;br/&gt;
      ZooKeeperSubmittedJobGraphsStoreITCase.testRecoverJobGraphs &#194;&#187; NoClassDefFound ...&lt;br/&gt;
      ZooKeeperSubmittedJobGraphsStoreITCase.testUpdateJobGraphYouDidNotGetOrAdd &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.org.apache.flink.runtime.zookeeper.ZooKeeperStateHandleStoreITCase &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testAdd &#194;&#187; NoClassDefFound Could not initialize...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testAddAlreadyExistingPath &#194;&#187; NoClassDefFound C...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testAddDiscardStateHandleAfterFailure &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testAddWithCreateMode &#194;&#187; NoClassDefFound Could ...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testGetAll &#194;&#187; NoClassDefFound Could not initial...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testGetAllSortedByName &#194;&#187; NoClassDefFound Could...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testGetAndExists &#194;&#187; NoClassDefFound Could not i...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testGetNonExistingPath &#194;&#187; NoClassDefFound Could...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testRemove &#194;&#187; NoClassDefFound Could not initial...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testRemoveAndDiscardAllState &#194;&#187; NoClassDefFound&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testRemoveAndDiscardState &#194;&#187; NoClassDefFound Co...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testRemoveWithCallback &#194;&#187; NoClassDefFound Could...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testReplace &#194;&#187; NoClassDefFound Could not initia...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.&amp;lt;clinit&amp;gt;:66 &#194;&#187; NoSuchMethod org.apache.flink.ru...&lt;br/&gt;
      ZooKeeperStateHandleStoreITCase.testReplaceNonExistingPath &#194;&#187; NoClassDefFound C...&lt;br/&gt;
    ```&lt;/p&gt;</comment>
                            <comment id="15289062" author="githubbot" created="Wed, 18 May 2016 14:31:52 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220044747&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220044747&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good fix! The failures went unnoticed before, I guess?&lt;/p&gt;</comment>
                            <comment id="15289243" author="githubbot" created="Wed, 18 May 2016 16:26:05 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220081808&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220081808&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Running the tests from within IntelliJ works fine without a problem. I guess it has something todo how failsafe `2.19` handles dependencies.&lt;/p&gt;</comment>
                            <comment id="15289291" author="githubbot" created="Wed, 18 May 2016 16:46:12 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220087832&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220087832&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Couldn&apos;t find the problem.&lt;/p&gt;</comment>
                            <comment id="15289374" author="githubbot" created="Wed, 18 May 2016 17:23:23 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220098334&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220098334&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Could you reproduce the problem on your laptop?&lt;/p&gt;</comment>
                            <comment id="15290676" author="githubbot" created="Thu, 19 May 2016 08:16:45 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220257496&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220257496&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I could reproduce it via maven on my machine. It is a bit odd since he complains that&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    org.apache.flink.runtime.util.ZooKeeperUtils.startCuratorFramework(Lorg/apache/flink/configuration/Configuration;)Lorg/apache/curator/framework/CuratorFramework&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    Even though `ZooKeeperUtils` is in `flink-runtime`. Maybe it has something to do with the shading and that `org.apache.curator.framework.CuratorFramework` has been relocated?&lt;/p&gt;</comment>
                            <comment id="15290741" author="githubbot" created="Thu, 19 May 2016 09:04:03 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220267821&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220267821&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Reverting back to version `2.17` it works again (at least the plugin does not complain about the `NoSuchMethodError`).&lt;/p&gt;</comment>
                            <comment id="15290755" author="githubbot" created="Thu, 19 May 2016 09:12:21 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220269755&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220269755&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    But maybe it only works since the exceptions are silently ignored and not forwarded?&lt;/p&gt;</comment>
                            <comment id="15290757" author="githubbot" created="Thu, 19 May 2016 09:13:01 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220269898&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220269898&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    If we can&apos;t resolve issues with the Failsafe plugin, we could switch to using the Surefire plugin also for Integration tests. Actually, the only benefit of the Failsafe plugin is that it enables to use different phases to reuse test infrastructure that is costly, e.g. `pre-integration-test`, `post-integration-test`, `integration-test`, `verify`. However, we only use the `integration-test` phase. We don&apos;t have any special code in the `verify` phase, other than Failsafe&apos;s own mechanism to check for test failures which seems to be broken.&lt;/p&gt;</comment>
                            <comment id="15290758" author="githubbot" created="Thu, 19 May 2016 09:13:26 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220269992&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220269992&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @aljoscha Yes, I think so too &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15290761" author="githubbot" created="Thu, 19 May 2016 09:16:47 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220270745&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220270745&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The question is whether this bug was introduced with version `2.18.1` or whether it was already there in version `2.17`. We originally bumped the version to `2.18` in order to allow retries for the `ElasticSearchSinkITCase`. But if it works with the Surefire plugin, then we can also do this.&lt;/p&gt;</comment>
                            <comment id="15290770" author="githubbot" created="Thu, 19 May 2016 09:20:56 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220271685&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220271685&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    In the surefire JIRA, the &quot;silently ignore exceptions&quot; bug is tagged to affect 2.18, not 2.17, so it may be good.&lt;/p&gt;

&lt;p&gt;    How about:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Checking if using surefire solves things&lt;/li&gt;
	&lt;li&gt;If not, use failsafe 2.17 making sure it is not affected&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15290771" author="githubbot" created="Thu, 19 May 2016 09:22:58 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220272107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220272107&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &#128077; and make sure that the tests were not silently failing with 2.17&lt;/p&gt;</comment>
                            <comment id="15290807" author="githubbot" created="Thu, 19 May 2016 09:42:27 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220276542&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220276542&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I just replaced Failsafe with Surefire. Also updated the version of Surefire in a separate commit to see if the classpath issues occur there as well (after all it&apos;s the same Apache project). &lt;/p&gt;</comment>
                            <comment id="15290851" author="githubbot" created="Thu, 19 May 2016 10:20:36 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220284867&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220284867&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Also pushed a version to my local Travis branch with some deliberately failing tests and debug output to see if the above tests are executed correctly (and don&apos;t fail silently).&lt;/p&gt;</comment>
                            <comment id="15290882" author="githubbot" created="Thu, 19 May 2016 10:42:53 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220289348&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220289348&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @mxm ! Eagerly looking forward to the results...&lt;/p&gt;</comment>
                            <comment id="15291005" author="githubbot" created="Thu, 19 May 2016 12:19:47 +0000"  >&lt;p&gt;Github user markreddy commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220307660&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220307660&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I took a look at the root issue of upgrading to 2.19.1. I&apos;m able to reliably reproduce this issue on my laptop. &lt;/p&gt;

&lt;p&gt;    When I bump the version I get the same as @tillrohrmann &lt;br/&gt;
    `java.lang.NoSuchMethodError:&lt;br/&gt;
    org.apache.flink.runtime.util.ZooKeeperUtils.startCuratorFramework(Lorg/apache/flink/configuration/Configuration;)Lorg/apache/curator/framework/CuratorFramework`&lt;/p&gt;

&lt;p&gt;    When running the build in debug mode for both 2.18.1 and 2.19.1 I observed some differences in the classpath. &lt;/p&gt;

&lt;p&gt;    *&lt;b&gt;2.18.1&lt;/b&gt;*&lt;br/&gt;
    `&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; boot(compact) classpath:  surefire-booter-2.18.1.jar  surefire-api-2.18.1.jar  test-classes  classes  flink-core-1.1-SNAPSHOT.jar.....`&lt;/p&gt;

&lt;p&gt;    *&lt;b&gt;2.19.1&lt;/b&gt;*&lt;br/&gt;
    `&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; boot(compact) classpath:  surefire-booter-2.19.1.jar  surefire-api-2.19.1.jar  test-classes  flink-runtime_2.10-1.1-SNAPSHOT.jar  flink-core-1.1-SNAPSHOT.jar.....`&lt;/p&gt;

&lt;p&gt;    So 2.19.1 has changed behaviour. What is loaded onto the classpath differs, in 2.19.1 instead of loading target/classes it loads the actual built jar. &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-855&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-855&lt;/a&gt; confirms this. &lt;/p&gt;

&lt;p&gt;    The issue with this is the final jar has curator shaded while the test classes are looking for the unshaded version of curator, as shown by the debug output:&lt;br/&gt;
    `Lorg/apache/curator/framework/CuratorFramework`&lt;/p&gt;

&lt;p&gt;    If @mxm can get everything working on a lower version thats the easiest solution. If not or we want to proceed with moving up in version, at least we know the root of the issue and can work from there....&lt;/p&gt;

</comment>
                            <comment id="15291081" author="githubbot" created="Thu, 19 May 2016 13:20:56 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220321817&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220321817&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for looking into the problem and providing a detailed explanation @markreddy. I think we&apos;re good to go with the newest version of the Surefire plugin. I verified the tests 1) fail when errors occur 2) are actually run (added some debug output) 3) the number of tests/ITCases remains unchanged.&lt;/p&gt;

&lt;p&gt;    Just running one more time because I forgot to set the default of `reuseForks` to false for the integration tests. Reusing of forks doesn&apos;t work for some tests because of garbage collection problems (this was the same for the Failsafe plugin). Apparently almost all tests pass. So looking forward to merging this soon.&lt;/p&gt;</comment>
                            <comment id="15291517" author="githubbot" created="Thu, 19 May 2016 17:02:22 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220388275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220388275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I get segfaults from RocksDB in my Travis tests:  &lt;a href=&quot;https://travis-ci.org/mxm/flink/builds/131412162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/mxm/flink/builds/131412162&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Let&apos;s see how the builds here go. All in all, looks ready to be merged.&lt;/p&gt;</comment>
                            <comment id="15292998" author="githubbot" created="Fri, 20 May 2016 08:25:08 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220545613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220545613&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The Travis builds here also segfault in all RocksDB tests. I&apos;m assuming these test failed silently in the past since I can&apos;t make any connection to the test plugin changes.&lt;/p&gt;</comment>
                            <comment id="15293568" author="mxm" created="Fri, 20 May 2016 15:44:01 +0000"  >&lt;p&gt;38698c0b101cbb48f8c10adf4060983ac07e2f4b&lt;/p&gt;</comment>
                            <comment id="15293573" author="githubbot" created="Fri, 20 May 2016 15:44:18 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15293576" author="githubbot" created="Fri, 20 May 2016 15:45:03 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2003#issuecomment-220642391&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2003#issuecomment-220642391&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merging...we need to fix the RocksDB issue afterwards. In the worst case, we&apos;ll comment out the relevant test cases for now. The test which seems to cause the segfaults is `EventTimeWindowCheckpointingITCase`.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12810514">SUREFIRE-1127</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12972014">FLINK-3953</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xxwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>