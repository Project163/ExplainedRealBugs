<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:29:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-7066] Kafka integration tests failing in &quot;airplane mode&quot;</title>
                <link>https://issues.apache.org/jira/browse/FLINK-7066</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Tests KafkaXXXProducerITCase are failing on my laptop in airplane mode. It seemed to have something to do with some service listening on wrong interface, when client tries to connect to different host. Strangely tests for Kafka010 and Kafka011 fails with different error, but there is the same fix for them (maybe in Kafka010 original exception is masked by some other error). Kafka 0.11 tests fails like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;35309 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-3] INFO  Remoting  - Starting remoting
42445 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-3] INFO  Remoting  - Remoting started; listening on addresses :[akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@fe80:0:0:0:165d:140b:f597:e019%13:54398]
&lt;/span&gt;42445 [main] INFO  org.apache.flink.runtime.client.JobClient  - Started JobClient actor system at [fe80::165d:140b:f597:e019]:54398
42450 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.client.JobSubmissionClientActor  - Disconnect from JobManager &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.
42461 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.client.JobSubmissionClientActor  - Received SubmitJobAndWait(JobGraph(jobId: 3b11234d116ab1ed3c1279dd73dfaab5)) but there is no connection to a JobManager yet.
42462 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.client.JobSubmissionClientActor  - Received job Exactly once test (3b11234d116ab1ed3c1279dd73dfaab5).
52473 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.client.JobSubmissionClientActor  - Terminate JobClientActor.
52473 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] INFO  org.apache.flink.runtime.client.JobSubmissionClientActor  - Disconnect from JobManager &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.
org.apache.flink.runtime.client.JobExecutionException: Couldn&apos;t retrieve the JobExecutionResult from the JobManager.
	at org.apache.flink.runtime.client.JobClient.awaitJobResult(JobClient.java:309)
...
Caused by: org.apache.flink.runtime.client.JobClientActorConnectionTimeoutException: Lost connection to the JobManager.
	at org.apache.flink.runtime.client.JobClientActor.handleMessage(JobClientActor.java:219)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think the issue is that there is someone listening on fe80:0:0:0:165d:140b:f597:e019 (note that this is ipv6 address from some virtual utun0 interface on my machine), while JobClient tries to connect to &quot;localhost&quot; - which fails. When I enable wifi and connect to any network and log looks like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;32981 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-2] INFO  Remoting  - Starting remoting
32995 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-3] INFO  Remoting  - Remoting started; listening on addresses :[akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@192.168.178.125:55576]
&lt;/span&gt;address = akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@192.168.178.125:55576
&lt;/span&gt;33000 [main] INFO  org.apache.flink.runtime.client.JobClient  - Started JobClient actor system at 192.168.178.125:55576
33005 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-2] INFO  org.apache.flink.runtime.client.JobSubmissionClientActor  - Disconnect from JobManager &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.
submitJobAndWait config = {restart-strategy.fixed-delay.delay=0 s, local.number-taskmanager=1, taskmanager.network.netty.client.numThreads=1, metrics.reporter.my_reporter.class=org.apache.flink.metrics.jmx.JMXReporter, jobmanager.rpc.address=localhost, taskmanager.numberOfTaskSlots=8, taskmanager.memory.size=16, metrics.reporters=my_reporter, taskmanager.network.netty.server.numThreads=2, jobmanager.rpc.port=55566, query.server.enable=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;}
33013 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-2] INFO  org.apache.flink.runtime.client.JobSubmissionClientActor  - Received SubmitJobAndWait(JobGraph(jobId: ac67638ac85a2179a37486d507a1a008)) but there is no connection to a JobManager yet.
33014 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-2] INFO  org.apache.flink.runtime.client.JobSubmissionClientActor  - Received job Exactly once test (ac67638ac85a2179a37486d507a1a008).
33024 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-2] INFO  org.apache.flink.runtime.client.JobSubmissionClientActor  - Connect to JobManager Actor[akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@localhost:55566/user/jobmanager#-1394172571].&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13084227">FLINK-7066</key>
            <summary>Kafka integration tests failing in &quot;airplane mode&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pnowojski">Piotr Nowojski</assignee>
                                    <reporter username="pnowojski">Piotr Nowojski</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Jul 2017 11:54:56 +0000</created>
                <updated>Thu, 28 Feb 2019 13:36:55 +0000</updated>
                            <resolved>Mon, 3 Jul 2017 12:29:34 +0000</resolved>
                                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Connectors / Kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16072309" author="githubbot" created="Mon, 3 Jul 2017 11:57:35 +0000"  >&lt;p&gt;GitHub user pnowojski opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4247&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7066&quot; title=&quot;Kafka integration tests failing in &amp;quot;airplane mode&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7066&quot;&gt;&lt;del&gt;FLINK-7066&lt;/del&gt;&lt;/a&gt; Fix integration tests in airplane mode&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/pnowojski/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/pnowojski/flink&lt;/a&gt; airplane&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4247.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4247.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4247&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit bc43bda5274bd73bf2daa25b2f9ddbd59ede672b&lt;br/&gt;
Author: Piotr Nowojski &amp;lt;piotr.nowojski@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-07-03T11:55:27Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7066&quot; title=&quot;Kafka integration tests failing in &amp;quot;airplane mode&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7066&quot;&gt;&lt;del&gt;FLINK-7066&lt;/del&gt;&lt;/a&gt; Fix integration tests in airplane mode&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16072348" author="till.rohrmann" created="Mon, 3 Jul 2017 12:29:34 +0000"  >&lt;p&gt;Fixed via d414fe10163895cbf235dacef36d9806c8a675d4&lt;/p&gt;</comment>
                            <comment id="16072349" author="githubbot" created="Mon, 3 Jul 2017 12:30:10 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4247&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16072471" author="githubbot" created="Mon, 3 Jul 2017 13:57:02 +0000"  >&lt;p&gt;Github user pnowojski commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4247&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3h0y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>