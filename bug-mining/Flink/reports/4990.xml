<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:52:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-20321] Get NPE when using AvroDeserializationSchema to deserialize null input</title>
                <link>https://issues.apache.org/jira/browse/FLINK-20321</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;You can reproduce the bug by adding the code into the &lt;tt&gt;AvroDeserializationSchemaTest&lt;/tt&gt;.&lt;br/&gt;
The code follows&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSpecificRecord2() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		DeserializationSchema&amp;lt;Address&amp;gt; deserializer = AvroDeserializationSchema.forSpecific(Address.class);

		Address deserializedAddress = deserializer.deserialize(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
		assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, deserializedAddress);
	}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exception stack:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException
	at org.apache.flink.formats.avro.utils.MutableByteArrayInputStream.setBuffer(MutableByteArrayInputStream.java:43)
	at org.apache.flink.formats.avro.AvroDeserializationSchema.deserialize(AvroDeserializationSchema.java:131)
	at org.apache.flink.formats.avro.AvroDeserializationSchemaTest.testSpecificRecord2(AvroDeserializationSchemaTest.java:69)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13342359">FLINK-20321</key>
            <summary>Get NPE when using AvroDeserializationSchema to deserialize null input</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xwang51">Xue Wang</assignee>
                                    <reporter username="fsk119">Shengkai Fang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>sprint</label>
                            <label>starter</label>
                    </labels>
                <created>Tue, 24 Nov 2020 12:48:25 +0000</created>
                <updated>Thu, 23 Sep 2021 18:02:02 +0000</updated>
                            <resolved>Fri, 8 Jan 2021 14:32:09 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.12.5</fixVersion>
                                    <component>Formats (JSON, Avro, Parquet, ORC, SequenceFile)</component>
                    <component>Table SQL / Ecosystem</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17238102" author="jark" created="Tue, 24 Nov 2020 12:53:35 +0000"  >&lt;p&gt;This problem also exists in &lt;tt&gt;AvroRowDataDeserializationSchema&lt;/tt&gt; and &lt;tt&gt;ConfluentRegistryAvroDeserializationSchema&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17238103" author="jark" created="Tue, 24 Nov 2020 12:54:00 +0000"  >&lt;p&gt;Do you want to fix this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danny0405&quot; class=&quot;user-hover&quot; rel=&quot;danny0405&quot;&gt;danny0405&lt;/a&gt;? &lt;/p&gt;</comment>
                            <comment id="17239645" author="sampadsaha5" created="Fri, 27 Nov 2020 11:54:03 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;This is Sampad here. I can help with fixing this issue. My proposed fix is to check if the message is null before &lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroDeserializationSchema.java#L131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this&lt;/a&gt; line and throw an exception saying &quot;The message is null&quot;.&lt;/p&gt;

&lt;p&gt;Does this sound good? Can you please suggest any better idea? Please don&apos;t mind if my idea doesn&apos;t match the standard of this community. I am new here.&lt;/p&gt;</comment>
                            <comment id="17239705" author="jark" created="Fri, 27 Nov 2020 14:26:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sampadsaha5&quot; class=&quot;user-hover&quot; rel=&quot;sampadsaha5&quot;&gt;sampadsaha5&lt;/a&gt;. Please do not throw exception because this will fail the job. We should just &lt;tt&gt;return null&lt;/tt&gt; to skip the null value.&lt;/p&gt;

&lt;p&gt;We should also fix &lt;tt&gt;AvroRowDataDeserializationSchema&lt;/tt&gt; and &lt;tt&gt;ConfluentRegistryAvroDeserializationSchema&lt;/tt&gt; and &lt;tt&gt;JsonRowDataDeserializationSchema&lt;/tt&gt; and &lt;tt&gt;CsvRowDataDeserializationSchema&lt;/tt&gt;. Please also remember to add tests.&lt;/p&gt;</comment>
                            <comment id="17239711" author="sampadsaha5" created="Fri, 27 Nov 2020 14:39:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;We should just&#160;&lt;tt&gt;return null&lt;/tt&gt;&#160;to skip the null value.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks. This sounds a better idea.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Please also remember to add tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yah. Sure I will do that too.&lt;/p&gt;</comment>
                            <comment id="17255179" author="jark" created="Sun, 27 Dec 2020 06:55:19 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sampadsaha5&quot; class=&quot;user-hover&quot; rel=&quot;sampadsaha5&quot;&gt;sampadsaha5&lt;/a&gt;, are you still working on this? What&apos;s the status of this issue?&lt;/p&gt;</comment>
                            <comment id="17256055" author="xwang51" created="Tue, 29 Dec 2020 16:55:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;, I just joined the community and would like to contribute on some starter issues first to familiarize myself with the code contribution process. This issue seems easy and I should be able to raise a PR to fix it in a day or two. Since we haven&apos;t heard from the last assignee for over a month, do you mind reassigning this issue to me?&lt;/p&gt;</comment>
                            <comment id="17256084" author="sampadsaha5" created="Tue, 29 Dec 2020 17:42:00 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xwang51&quot; class=&quot;user-hover&quot; rel=&quot;xwang51&quot;&gt;xwang51&lt;/a&gt;, if you are interested, you can work on this issue. This would help you understand how different deserialization schema are actually wotking.&lt;/p&gt;

&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;, I am sorry for my behaviour. I had caught up with some other commitment. Really sorry for the delay. Would you please assign this ticket to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xwang51&quot; class=&quot;user-hover&quot; rel=&quot;xwang51&quot;&gt;xwang51&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17256240" author="xwang51" created="Wed, 30 Dec 2020 02:37:51 +0000"  >&lt;p&gt;Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sampadsaha5&quot; class=&quot;user-hover&quot; rel=&quot;sampadsaha5&quot;&gt;sampadsaha5&lt;/a&gt;. I&apos;ve worked with Avro Serdes and Confluent Schema Registry during several projects. I&apos;ll definitely take this opportunity to learn more about Flink and contribute to the community. Feel free to get back when you have time, contributions are always welcome. Cheers!&lt;/p&gt;</comment>
                            <comment id="17256279" author="jark" created="Wed, 30 Dec 2020 04:25:16 +0000"  >&lt;p&gt;I assigned this issue to you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xwang51&quot; class=&quot;user-hover&quot; rel=&quot;xwang51&quot;&gt;xwang51&lt;/a&gt;. &lt;br/&gt;
Welcome contribution anytime &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sampadsaha5&quot; class=&quot;user-hover&quot; rel=&quot;sampadsaha5&quot;&gt;sampadsaha5&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17257043" author="xwang51" created="Thu, 31 Dec 2020 16:06:07 +0000"  >&lt;p&gt;Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;. I just submitted the &lt;a href=&quot;https://github.com/apache/flink/pull/14539&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17261332" author="jark" created="Fri, 8 Jan 2021 14:32:10 +0000"  >&lt;p&gt;Fixed in master: 241185a40118cfe3087eb4f7fc14203afe4073cc&lt;/p&gt;</comment>
                            <comment id="17375211" author="hehuiyuan" created="Tue, 6 Jul 2021 04:51:32 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;,&#160;is it considered merging to 1.12?&lt;/p&gt;</comment>
                            <comment id="17375269" author="jark" created="Tue, 6 Jul 2021 06:33:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hehuiyuan&quot; class=&quot;user-hover&quot; rel=&quot;hehuiyuan&quot;&gt;hehuiyuan&lt;/a&gt; I can help to merge if there is a pull request for 1.12. &lt;/p&gt;</comment>
                            <comment id="17375361" author="hehuiyuan" created="Tue, 6 Jul 2021 08:44:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;, i do it.&lt;/p&gt;</comment>
                            <comment id="17378890" author="jark" created="Mon, 12 Jul 2021 03:48:10 +0000"  >&lt;p&gt;Fixed in release-1.12: 2eaabca6075f91617d8c7f2bfd363964e893d65e&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13343899">FLINK-20459</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13340257">FLINK-20121</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13366505">FLINK-21889</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kvy0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>