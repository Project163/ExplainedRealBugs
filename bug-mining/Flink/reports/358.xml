<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1951] NullPointerException in DeltaIteration when no ForwardedFileds</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1951</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The following exception is thrown by the Connected Components example, if the @ForwardedFieldsFirst(&quot;*&quot;) annotation from the ComponentIdFilter join is removed:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.flink.examples.java.graph.ConnectedComponents$ComponentIdFilter.join(ConnectedComponents.java:186)&lt;br/&gt;
	at org.apache.flink.examples.java.graph.ConnectedComponents$ComponentIdFilter.join(ConnectedComponents.java:1)&lt;br/&gt;
	at org.apache.flink.runtime.operators.JoinWithSolutionSetSecondDriver.run(JoinWithSolutionSetSecondDriver.java:198)&lt;br/&gt;
	at org.apache.flink.runtime.operators.RegularPactTask.run(RegularPactTask.java:496)&lt;br/&gt;
	at org.apache.flink.runtime.iterative.task.AbstractIterativePactTask.run(AbstractIterativePactTask.java:139)&lt;br/&gt;
	at org.apache.flink.runtime.iterative.task.IterationIntermediatePactTask.run(IterationIntermediatePactTask.java:92)&lt;br/&gt;
	at org.apache.flink.runtime.operators.RegularPactTask.invoke(RegularPactTask.java:362)&lt;br/&gt;
	at org.apache.flink.runtime.execution.RuntimeEnvironment.run(RuntimeEnvironment.java:217)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/vasia/flink/tree/cc-test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Code &lt;/a&gt; and &lt;a href=&quot;http://snap.stanford.edu/data/com-DBLP.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dataset &lt;/a&gt; to reproduce.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12824305">FLINK-1951</key>
            <summary>NullPointerException in DeltaIteration when no ForwardedFileds</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fhueske">Fabian Hueske</assignee>
                                    <reporter username="vkalavri">Vasia Kalavri</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Apr 2015 15:12:57 +0000</created>
                <updated>Sun, 29 Jan 2017 14:43:46 +0000</updated>
                            <resolved>Tue, 5 May 2015 21:05:50 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>Runtime / Task</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14521507" author="fhueske" created="Thu, 30 Apr 2015 13:46:20 +0000"  >&lt;p&gt;It was a bit tricky and took some time but I think I finally found the bug &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The problem is the following. The failing join is the join with the solution set. The result of this join is the solution set data that is reinserted into the hashtable that was previously probed. &lt;/p&gt;

&lt;p&gt;If the annotation is set, the optimizer knows that the result of the join is still partitioned and can do the insert locally by chaining the calls. This means that probing and reinserting of the same HT happens in the same thread, i.e., there is no concurrent access.&lt;/p&gt;

&lt;p&gt;If the annotation is NOT set, the optimizer does not know that the result is still partitioned. Hence, it inserts a network shuffling strategy to partition the data. The receiving task then reinserts the solution set delta records into the hash table. Since probing and inserting are happening in two separate tasks which are separated by a network connection, they happen concurrently in two different threads and might interfere.&lt;/p&gt;

&lt;p&gt;Guarding reinsertion and probing with a simple lock solves the problem. Not sure if that&apos;s the best fix for the problem though...&lt;/p&gt;
</comment>
                            <comment id="14521656" author="fhueske" created="Thu, 30 Apr 2015 15:31:14 +0000"  >&lt;p&gt;It turned out that the channel to the solution set update task was meant to be blocking, i.e., it should first collect all updates and apply them after the join with the solution set was done. That way the solution set is not concurrently probed and updated.&lt;/p&gt;

&lt;p&gt;The optimizer did the right decisions, however the decisions were not correctly translated into the JobGraph. &lt;/p&gt;</comment>
                            <comment id="14521661" author="githubbot" created="Thu, 30 Apr 2015 15:35:24 +0000"  >&lt;p&gt;GitHub user fhueske opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/641&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/641&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1951&quot; title=&quot;NullPointerException in DeltaIteration when no ForwardedFileds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1951&quot;&gt;&lt;del&gt;FLINK-1951&lt;/del&gt;&lt;/a&gt; Fix NullPointerException in delta iteration due to missing input temp&lt;/p&gt;

&lt;p&gt;    See JIRA for details.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/fhueske/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fhueske/flink&lt;/a&gt; delta-npe-fix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/641.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/641.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #641&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0c7ad4b03e3a47d5c7ee95659a31e62d89edfac6&lt;br/&gt;
Author: Fabian Hueske &amp;lt;fhueske@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-04-30T15:34:02Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1951&quot; title=&quot;NullPointerException in DeltaIteration when no ForwardedFileds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1951&quot;&gt;&lt;del&gt;FLINK-1951&lt;/del&gt;&lt;/a&gt; Fix NullPointerException in delta iteration due to missing temp&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14521663" author="githubbot" created="Thu, 30 Apr 2015 15:36:48 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/641#issuecomment-97842442&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/641#issuecomment-97842442&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14521678" author="vkalavri" created="Thu, 30 Apr 2015 15:41:41 +0000"  >&lt;p&gt;wow thanks a lot for the nice explanation and fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhueske&quot; class=&quot;user-hover&quot; rel=&quot;fhueske&quot;&gt;fhueske&lt;/a&gt; ^^&lt;/p&gt;</comment>
                            <comment id="14526866" author="githubbot" created="Mon, 4 May 2015 17:08:00 +0000"  >&lt;p&gt;Github user fhueske commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/641#issuecomment-98781618&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/641#issuecomment-98781618&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I added a test to cover the bug.&lt;br/&gt;
    I&apos;ll merge tomorrow, if nobody raises a flag.&lt;/p&gt;</comment>
                            <comment id="14526873" author="githubbot" created="Mon, 4 May 2015 17:10:09 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/641#issuecomment-98782588&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/641#issuecomment-98782588&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks very good.&lt;/p&gt;

&lt;p&gt;    +1 to merge as is&lt;/p&gt;</comment>
                            <comment id="14529264" author="githubbot" created="Tue, 5 May 2015 21:04:00 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/641&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/641&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14529271" author="fhueske" created="Tue, 5 May 2015 21:05:50 +0000"  >&lt;p&gt;Fixed with adb321d61cc783b3a2a78f4e707104d75e1d63c0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2dt7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>