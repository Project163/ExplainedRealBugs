<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:34:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9939] Mesos: Not setting TMP dirs causes NPE</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9939</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Relying on the default tmp dirs can cause an NPE when deploying on Mesos. Find the stacktrace below.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException: Value must not be null.
        at org.apache.flink.configuration.Configuration.setValueInternal(Configuration.java:766)
        at org.apache.flink.configuration.Configuration.setString(Configuration.java:189)
        at org.apache.flink.runtime.clusterframework.BootstrapTools.updateTmpDirectoriesInConfiguration(BootstrapTools.java:490)
        at org.apache.flink.mesos.entrypoint.MesosEntrypointUtils.loadConfiguration(MesosEntrypointUtils.java:176)
        at org.apache.flink.mesos.entrypoint.MesosSessionClusterEntrypoint.main(MesosSessionClusterEntrypoint.java:177)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13174139">FLINK-9939</key>
            <summary>Mesos: Not setting TMP dirs causes NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gjy">Gary Yao</assignee>
                                    <reporter username="gjy">Gary Yao</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 24 Jul 2018 16:33:04 +0000</created>
                <updated>Wed, 25 Jul 2018 15:47:47 +0000</updated>
                            <resolved>Wed, 25 Jul 2018 15:47:47 +0000</resolved>
                                    <version>1.5.2</version>
                    <version>1.6.0</version>
                                    <fixVersion>1.5.2</fixVersion>
                    <fixVersion>1.6.0</fixVersion>
                                    <component>Deployment / Mesos</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16555562" author="githubbot" created="Wed, 25 Jul 2018 12:08:51 +0000"  >&lt;p&gt;GitHub user GJL opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6418&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6418&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9939&quot; title=&quot;Mesos: Not setting TMP dirs causes NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9939&quot;&gt;&lt;del&gt;FLINK-9939&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Mesos: Not setting TMP dirs causes NPE&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    &lt;b&gt;This fixes a possible NPE when deploying on Mesos.&lt;/b&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Add null check to `BootstrapTools.updateTmpDirectoriesInConfiguration(...)`, and add `@Nullable` annotation.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This change added tests and can be verified as follows:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Added unit test to assert that `updateTmpDirectoriesInConfiguration` can handle `null` values.&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Manually deployed on Mesos.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (*&lt;b&gt;yes&lt;/b&gt;* / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (*&lt;b&gt;not applicable&lt;/b&gt;* / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/GJL/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/GJL/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9939&quot; title=&quot;Mesos: Not setting TMP dirs causes NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9939&quot;&gt;&lt;del&gt;FLINK-9939&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6418.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6418.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #6418&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit eb03ada77db7633d330be7847dbdf9ee801a9bee&lt;br/&gt;
Author: gyao &amp;lt;gary@...&amp;gt;&lt;br/&gt;
Date:   2018-07-25T10:23:20Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Fix checkstyle violations in BootstrapToolsTest.&lt;/p&gt;

&lt;p&gt;commit 261d4d7423b9ca179ac0004625f51b7b71655d63&lt;br/&gt;
Author: gyao &amp;lt;gary@...&amp;gt;&lt;br/&gt;
Date:   2018-07-25T11:57:34Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9939&quot; title=&quot;Mesos: Not setting TMP dirs causes NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9939&quot;&gt;&lt;del&gt;FLINK-9939&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Add null check before setting tmp dirs in config.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16555850" author="githubbot" created="Wed, 25 Jul 2018 15:42:25 +0000"  >&lt;p&gt;asfgit closed pull request #6418: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9939&quot; title=&quot;Mesos: Not setting TMP dirs causes NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9939&quot;&gt;&lt;del&gt;FLINK-9939&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Mesos: Not setting TMP dirs causes NPE&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6418&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6418&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/clusterframework/BootstrapTools.java b/flink-runtime/src/main/java/org/apache/flink/runtime/clusterframework/BootstrapTools.java&lt;br/&gt;
index b43946ca5bb..4e43480f1ec 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/main/java/org/apache/flink/runtime/clusterframework/BootstrapTools.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/clusterframework/BootstrapTools.java&lt;br/&gt;
@@ -46,6 +46,8 @@&lt;br/&gt;
 import org.slf4j.Logger;&lt;br/&gt;
 import org.slf4j.LoggerFactory;&lt;/p&gt;

&lt;p&gt;+import javax.annotation.Nullable;&lt;br/&gt;
+&lt;br/&gt;
 import java.io.File;&lt;br/&gt;
 import java.io.FileWriter;&lt;br/&gt;
 import java.io.IOException;&lt;br/&gt;
@@ -480,12 +482,13 @@ public static String getStartCommand(String template,&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param configuration flink config to patch&lt;/li&gt;
	&lt;li&gt;@param defaultDirs in case no tmp directories is set, next directories will be applied&lt;br/&gt;
 	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static void updateTmpDirectoriesInConfiguration(Configuration configuration, String defaultDirs){&lt;br/&gt;
+	public static void updateTmpDirectoriesInConfiguration(&lt;br/&gt;
+			Configuration configuration,&lt;br/&gt;
+			@Nullable String defaultDirs) {&lt;br/&gt;
 		if (configuration.contains(CoreOptions.TMP_DIRS)) {&lt;br/&gt;
 			LOG.info(&quot;Overriding Fink&apos;s temporary file directories with those &quot; +&lt;br/&gt;
 				&quot;specified in the Flink config: {}&quot;, configuration.getValue(CoreOptions.TMP_DIRS));&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;else 
{
+		}
&lt;p&gt; else if (defaultDirs != null) {&lt;br/&gt;
 			LOG.info(&quot;Setting directories for temporary files to: {}&quot;, defaultDirs);&lt;br/&gt;
 			configuration.setString(CoreOptions.TMP_DIRS, defaultDirs);&lt;br/&gt;
 			configuration.setBoolean(USE_LOCAL_DEFAULT_TMP_DIRS, true);&lt;br/&gt;
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/clusterframework/BootstrapToolsTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/clusterframework/BootstrapToolsTest.java&lt;br/&gt;
index 7e31c8e0f6b..d1f32cf514a 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-runtime/src/test/java/org/apache/flink/runtime/clusterframework/BootstrapToolsTest.java&lt;br/&gt;
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/clusterframework/BootstrapToolsTest.java&lt;br/&gt;
@@ -21,6 +21,7 @@&lt;br/&gt;
 import org.apache.flink.configuration.ConfigConstants;&lt;br/&gt;
 import org.apache.flink.configuration.Configuration;&lt;br/&gt;
 import org.apache.flink.configuration.CoreOptions;&lt;br/&gt;
+&lt;br/&gt;
 import org.junit.Test;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import java.util.HashMap;&lt;br/&gt;
@@ -29,27 +30,30 @@&lt;br/&gt;
 import static org.junit.Assert.assertFalse;&lt;br/&gt;
 import static org.junit.Assert.assertNull;&lt;/p&gt;

&lt;p&gt;+/**&lt;br/&gt;
+ * Tests for &lt;/p&gt;
{@link BootstrapToolsTest}
&lt;p&gt;.&lt;br/&gt;
+ */&lt;br/&gt;
 public class BootstrapToolsTest {&lt;/p&gt;

&lt;p&gt; 	@Test&lt;br/&gt;
 	public void testSubstituteConfigKey() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String deprecatedKey1 =&quot;deprecated-key&quot;;&lt;/li&gt;
	&lt;li&gt;String deprecatedKey2 =&quot;another-out_of-date_key&quot;;&lt;/li&gt;
	&lt;li&gt;String deprecatedKey3 =&quot;yet-one-more&quot;;&lt;br/&gt;
+		String deprecatedKey1 = &quot;deprecated-key&quot;;&lt;br/&gt;
+		String deprecatedKey2 = &quot;another-out_of-date_key&quot;;&lt;br/&gt;
+		String deprecatedKey3 = &quot;yet-one-more&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String designatedKey1 =&quot;newkey1&quot;;&lt;/li&gt;
	&lt;li&gt;String designatedKey2 =&quot;newKey2&quot;;&lt;/li&gt;
	&lt;li&gt;String designatedKey3 =&quot;newKey3&quot;;&lt;br/&gt;
+		String designatedKey1 = &quot;newkey1&quot;;&lt;br/&gt;
+		String designatedKey2 = &quot;newKey2&quot;;&lt;br/&gt;
+		String designatedKey3 = &quot;newKey3&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		String value1 = &quot;value1&quot;;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String value2_designated = &quot;designated-value2&quot;;&lt;/li&gt;
	&lt;li&gt;String value2_deprecated = &quot;deprecated-value2&quot;;&lt;br/&gt;
+		String value2Designated = &quot;designated-value2&quot;;&lt;br/&gt;
+		String value2Deprecated = &quot;deprecated-value2&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		// config contains only deprecated key 1, and for key 2 both deprecated and designated&lt;br/&gt;
 		Configuration cfg = new Configuration();&lt;br/&gt;
 		cfg.setString(deprecatedKey1, value1);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;cfg.setString(deprecatedKey2, value2_deprecated);&lt;/li&gt;
	&lt;li&gt;cfg.setString(designatedKey2, value2_designated);&lt;br/&gt;
+		cfg.setString(deprecatedKey2, value2Deprecated);&lt;br/&gt;
+		cfg.setString(designatedKey2, value2Designated);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		BootstrapTools.substituteDeprecatedConfigKey(cfg, deprecatedKey1, designatedKey1);&lt;br/&gt;
 		BootstrapTools.substituteDeprecatedConfigKey(cfg, deprecatedKey2, designatedKey2);&lt;br/&gt;
@@ -59,7 +63,7 @@ public void testSubstituteConfigKey() {&lt;br/&gt;
 		assertEquals(value1, cfg.getString(designatedKey1, null));&lt;/p&gt;

&lt;p&gt; 		// value 2 should not have been set, since it had a value already&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;assertEquals(value2_designated, cfg.getString(designatedKey2, null));&lt;br/&gt;
+		assertEquals(value2Designated, cfg.getString(designatedKey2, null));&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		// nothing should be in there for key 3&lt;br/&gt;
 		assertNull(cfg.getString(designatedKey3, null));&lt;br/&gt;
@@ -68,13 +72,13 @@ public void testSubstituteConfigKey() {&lt;/p&gt;

&lt;p&gt; 	@Test&lt;br/&gt;
 	public void testSubstituteConfigKeyPrefix() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String deprecatedPrefix1 =&quot;deprecated-prefix&quot;;&lt;/li&gt;
	&lt;li&gt;String deprecatedPrefix2 =&quot;-prefix-2&quot;;&lt;/li&gt;
	&lt;li&gt;String deprecatedPrefix3 =&quot;prefix-3&quot;;&lt;br/&gt;
+		String deprecatedPrefix1 = &quot;deprecated-prefix&quot;;&lt;br/&gt;
+		String deprecatedPrefix2 = &quot;-prefix-2&quot;;&lt;br/&gt;
+		String deprecatedPrefix3 = &quot;prefix-3&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String designatedPrefix1 =&quot;p1&quot;;&lt;/li&gt;
	&lt;li&gt;String designatedPrefix2 =&quot;ppp&quot;;&lt;/li&gt;
	&lt;li&gt;String designatedPrefix3 =&quot;zzz&quot;;&lt;br/&gt;
+		String designatedPrefix1 = &quot;p1&quot;;&lt;br/&gt;
+		String designatedPrefix2 = &quot;ppp&quot;;&lt;br/&gt;
+		String designatedPrefix3 = &quot;zzz&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		String depr1 = deprecatedPrefix1 + &quot;var&quot;;&lt;br/&gt;
 		String depr2 = deprecatedPrefix2 + &quot;env&quot;;&lt;br/&gt;
@@ -86,15 +90,15 @@ public void testSubstituteConfigKeyPrefix() {&lt;/p&gt;

&lt;p&gt; 		String val1 = &quot;1&quot;;&lt;br/&gt;
 		String val2 = &quot;2&quot;;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String val3_depr = &quot;3-&quot;;&lt;/li&gt;
	&lt;li&gt;String val3_desig = &quot;3+&quot;;&lt;br/&gt;
+		String val3Depr = &quot;3-&quot;;&lt;br/&gt;
+		String val3Desig = &quot;3+&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		// config contains only deprecated key 1, and for key 2 both deprecated and designated&lt;br/&gt;
 		Configuration cfg = new Configuration();&lt;br/&gt;
 		cfg.setString(depr1, val1);&lt;br/&gt;
 		cfg.setString(depr2, val2);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;cfg.setString(depr3, val3_depr);&lt;/li&gt;
	&lt;li&gt;cfg.setString(desig3, val3_desig);&lt;br/&gt;
+		cfg.setString(depr3, val3Depr);&lt;br/&gt;
+		cfg.setString(desig3, val3Desig);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		BootstrapTools.substituteDeprecatedConfigPrefix(cfg, deprecatedPrefix1, designatedPrefix1);&lt;br/&gt;
 		BootstrapTools.substituteDeprecatedConfigPrefix(cfg, deprecatedPrefix2, designatedPrefix2);&lt;br/&gt;
@@ -102,7 +106,7 @@ public void testSubstituteConfigKeyPrefix() {&lt;/p&gt;

&lt;p&gt; 		assertEquals(val1, cfg.getString(desig1, null));&lt;br/&gt;
 		assertEquals(val2, cfg.getString(desig2, null));&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;assertEquals(val3_desig, cfg.getString(desig3, null));&lt;br/&gt;
+		assertEquals(val3Desig, cfg.getString(desig3, null));&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		// check that nothing with prefix 3 is contained&lt;br/&gt;
 		for (String key : cfg.keySet()) {&lt;br/&gt;
@@ -278,7 +282,7 @@ public void testGetTaskManagerShellCommand() {&lt;br/&gt;
 	}&lt;/p&gt;

&lt;p&gt; 	@Test&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void testUpdateTmpDirectoriesInConfiguration(){&lt;br/&gt;
+	public void testUpdateTmpDirectoriesInConfiguration() {&lt;br/&gt;
 		Configuration config = new Configuration();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		// test that default value is taken&lt;br/&gt;
@@ -295,4 +299,10 @@ public void testUpdateTmpDirectoriesInConfiguration()&lt;/p&gt;
{
 		assertEquals(config.getString(CoreOptions.TMP_DIRS), &quot;&quot;);
 	}

&lt;p&gt;+	@Test&lt;br/&gt;
+	public void testShouldNotUpdateTmpDirectoriesInConfigurationIfNoValueConfigured() &lt;/p&gt;
{
+		Configuration config = new Configuration();
+		BootstrapTools.updateTmpDirectoriesInConfiguration(config, null);
+		assertEquals(config.getString(CoreOptions.TMP_DIRS), CoreOptions.TMP_DIRS.defaultValue());
+	}
&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16555858" author="till.rohrmann" created="Wed, 25 Jul 2018 15:47:47 +0000"  >&lt;p&gt;Fixed via&lt;br/&gt;
master: ef0768b69ca178bc27a460f2958126896574e429&lt;br/&gt;
1.6.0: 9129cebe6e125dd96a23a24ac22fd8d137757a47&lt;br/&gt;
1.5.2: e4e8b82d006fa16d720cfda3cdf70fe88f3be009&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13170237">FLINK-9762</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3w8br:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>