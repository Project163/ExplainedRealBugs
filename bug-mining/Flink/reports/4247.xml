<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:47:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-18045] Fix Kerberos credentials checking to unblock Flink on secured MapR</title>
                <link>https://issues.apache.org/jira/browse/FLINK-18045</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I was not able to run Flink 1.10.1 on YARN on a a secured MapR cluster, but the previous version (1.10.0) works fine.&lt;/p&gt;

&lt;p&gt;After some investigation it looks like during some refactoring, checking if the enabled security method is kerberos was removed, effectively reintroducing&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5949&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-5949&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Refactoring commit:&#160;&lt;a href=&quot;https://github.com/apache/flink/commit/8751e69037d8a9b1756b75eed62a368c3ef29137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/8751e69037d8a9b1756b75eed62a368c3ef29137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;My proposal would be to bring back the kerberos check:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
loginUser.getAuthenticationMethod() == UserGroupInformation.AuthenticationMethod.KERBEROS
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and add an unit test for that case to prevent it from happening again&lt;/p&gt;

&lt;p&gt;I&apos;m happy to prepare a PR after reaching consensus&lt;/p&gt;</description>
                <environment></environment>
        <key id="13308646">FLINK-18045</key>
            <summary>Fix Kerberos credentials checking to unblock Flink on secured MapR</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krasinski">Bart Krasinski</assignee>
                                    <reporter username="krasinski">Bart Krasinski</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 1 Jun 2020 07:04:17 +0000</created>
                <updated>Wed, 5 Aug 2020 12:45:00 +0000</updated>
                            <resolved>Tue, 9 Jun 2020 12:12:00 +0000</resolved>
                                    <version>1.10.1</version>
                    <version>1.11.0</version>
                                    <fixVersion>1.10.2</fixVersion>
                    <fixVersion>1.11.0</fixVersion>
                                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17123595" author="till.rohrmann" created="Tue, 2 Jun 2020 10:15:56 +0000"  >&lt;p&gt;Thanks for reporting this issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krasinski&quot; class=&quot;user-hover&quot; rel=&quot;krasinski&quot;&gt;krasinski&lt;/a&gt;. Your solution proposal sounds good to me. I just wanted to double check with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rongr&quot; class=&quot;user-hover&quot; rel=&quot;rongr&quot;&gt;rongr&lt;/a&gt; whether there was a specific reason for removing &lt;tt&gt;loginUser.getAuthenticationMethod() == UserGroupInformation.AuthenticationMethod.KERBEROS&lt;/tt&gt; from the if statement.&lt;/p&gt;</comment>
                            <comment id="17123885" author="rongr" created="Tue, 2 Jun 2020 14:47:44 +0000"  >&lt;p&gt;Yes. I think specifically checking auth method as Kerberos is the right way. I think the proposal is to replace this line: &lt;a href=&quot;https://github.com/apache/flink/commit/8751e69037d8a9b1756b75eed62a368c3ef29137#diff-3648957eaf615f89c12aab6ea0611b99R116&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/8751e69037d8a9b1756b75eed62a368c3ef29137#diff-3648957eaf615f89c12aab6ea0611b99R116&lt;/a&gt; correct? if so I think that works &lt;/p&gt;</comment>
                            <comment id="17124237" author="krasinski" created="Tue, 2 Jun 2020 19:22:49 +0000"  >&lt;p&gt;Honestly at first I was thinking about simply adding that back to the if statement which contains &lt;em&gt;useTicketCache &amp;amp;&amp;amp; !loginUser.hasKerberosCredentials&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Your proposal &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rongr&quot; class=&quot;user-hover&quot; rel=&quot;rongr&quot;&gt;rongr&lt;/a&gt; (&lt;ins&gt;if I understand correctly&lt;/ins&gt; entirely replacing &lt;em&gt;UserGroupInformation.isSecurityEnabled()&lt;/em&gt; statement with user auth method check) looks nice, but on the other hand Hadoop code inside UserGroupInformation class code often calls it like that:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isSecurityEnabled() &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.user.getAuthenticationMethod() == UserGroupInformation.AuthenticationMethod.KERBEROS &lt;span class=&quot;code-comment&quot;&gt;/* then isKeytab or isKrbTkt */&lt;/span&gt; )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So it looks like it checks if any auth method was configured using the hadoop config, and then the auth method for the user.&lt;br/&gt;
And that might be another way to solve that ticket, which also looks pretty clean in my opinion.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To summarize:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Original proposal was to add the &lt;em&gt;&lt;tt&gt;loginUser.getAuthenticationMethod() == UserGroupInformation.AuthenticationMethod.KERBEROS&lt;/tt&gt;&lt;/em&gt; back to the if statement together with &lt;em&gt;useTicketCache &amp;amp;&amp;amp; !loginUser.hasKerberosCredentials&lt;/em&gt;&lt;/li&gt;
	&lt;li&gt;The second way to go inspired by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rongr&quot; class=&quot;user-hover&quot; rel=&quot;rongr&quot;&gt;rongr&lt;/a&gt; proposal &amp;amp; Hadoop code is to add &lt;em&gt;&lt;tt&gt;loginUser.getAuthenticationMethod() == UserGroupInformation.AuthenticationMethod.KERBEROS&lt;/tt&gt;&lt;/em&gt; to the statement containing &lt;em&gt;UserGroupInformation.isSecurityEnabled()&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rongr&quot; class=&quot;user-hover&quot; rel=&quot;rongr&quot;&gt;rongr&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17124277" author="rongr" created="Tue, 2 Jun 2020 20:26:14 +0000"  >&lt;p&gt;yeah. that makes sense. +1 on the proposed solution #2&lt;/p&gt;</comment>
                            <comment id="17124888" author="krasinski" created="Wed, 3 Jun 2020 11:57:43 +0000"  >&lt;p&gt;I&apos;ve submitted the PR&lt;/p&gt;</comment>
                            <comment id="17129210" author="till.rohrmann" created="Tue, 9 Jun 2020 12:12:00 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;master: 415b78af67e4acab9a0f23af2dc74ac093a54057&lt;br/&gt;
1.11.0: c8205341418d9139dc59d2fcd7b5dbae6b4c5f98&lt;br/&gt;
1.10.2: e71a42c7271922a4feb4f7c967213644c60841b8&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13278940">FLINK-15561</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fdf4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>