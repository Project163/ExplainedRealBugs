<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:22:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-37245] RowData#createFieldGetter can resurrect null values for non-null fields</title>
                <link>https://issues.apache.org/jira/browse/FLINK-37245</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;tt&gt;RowData#createFieldGetter&lt;/tt&gt; is the go-to method for creating field getters for a given field type and position. The method &lt;tt&gt;FieldGetter#getFieldOrNull&lt;/tt&gt; suggests that null is returned if the field has been nulled. But that is not always the case.&lt;/p&gt;

&lt;p&gt;When using BinaryRowData with a non-null field, which has been set to null, a call to &lt;tt&gt;FieldGetter#getFieldOrNull&lt;/tt&gt; will return a non-null value, interpreting whatever bytes are backing the field as an actual value instead of null.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  public static void main(String[] args) {
    IntType nullableIntType = new IntType(true);
    IntType nonNullableIntType = new IntType(false);
    RowDataSerializer rowDataSerializer = new RowDataSerializer(
            nullableIntType, nonNullableIntType
    );
    BinaryRowData binaryRow = rowDataSerializer.toBinaryRow(GenericRowData.of(null, null));
    RowData.FieldGetter fieldGetter1 = RowData.createFieldGetter(nullableIntType, 0);
    RowData.FieldGetter fieldGetter2 = RowData.createFieldGetter(nonNullableIntType, 1);
    System.out.println(fieldGetter1.getFieldOrNull(binaryRow));
    System.out.println(fieldGetter2.getFieldOrNull(binaryRow));
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Output is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;null
0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The expected output would be that the second non-null field also returns null, or raises a NullPointerException directly. That&apos;s not the case because &lt;tt&gt;RowData#createFieldGetter&lt;/tt&gt; only checks for null values (via a call to &lt;tt&gt;Rowdata#isNullAt(pos)&lt;/tt&gt;) when the type is nullable (see &lt;a href=&quot;https://github.com/apache/flink/blob/b86fdf906c06af8fc2841bca3d98dd3944bb5031/flink-table/flink-table-common/src/main/java/org/apache/flink/table/data/RowData.java#L289&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/b86fdf906c06af8fc2841bca3d98dd3944bb5031/flink-table/flink-table-common/src/main/java/org/apache/flink/table/data/RowData.java#L289&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;It seems fair to always check for null fields, instead of deferring this easy to forget check to the caller.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13607045">FLINK-37245</key>
            <summary>RowData#createFieldGetter can resurrect null values for non-null fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="mxm">Maximilian Michels</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sun, 2 Feb 2025 19:24:00 +0000</created>
                <updated>Wed, 10 Sep 2025 11:04:31 +0000</updated>
                            <resolved>Wed, 10 Sep 2025 10:00:30 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>1.20.0</version>
                    <version>1.19.1</version>
                                    <fixVersion>2.1.0</fixVersion>
                                    <component>Table SQL / API</component>
                    <component>Table SQL / Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17923158" author="JIRAUSER307081" created="Mon, 3 Feb 2025 02:49:57 +0000"  >&lt;p&gt;Hi! May I look into this issue?&lt;/p&gt;</comment>
                            <comment id="17923260" author="mxm" created="Mon, 3 Feb 2025 11:07:41 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anirudhprabhakaran&quot; class=&quot;user-hover&quot; rel=&quot;anirudhprabhakaran&quot;&gt;anirudhprabhakaran&lt;/a&gt;! Yes, that&apos;s possible, but I would like to first confirm the issue with the core developers.&lt;/p&gt;</comment>
                            <comment id="18019323" author="mxm" created="Wed, 10 Sep 2025 10:00:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-37643&quot; title=&quot;Support partial deletes when converting to external data structures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-37643&quot;&gt;&lt;del&gt;FLINK-37643&lt;/del&gt;&lt;/a&gt; fixed this issue.&lt;/p&gt;</comment>
                            <comment id="18019335" author="mxm" created="Wed, 10 Sep 2025 11:04:31 +0000"  >&lt;p&gt;Additional tests for FieldGetters added via 5ad464d8156b5094e0aba7712e4aa22b9f44e84d.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13614707">FLINK-37643</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1tyuw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>