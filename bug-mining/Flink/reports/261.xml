<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:18:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1649] Give a good error message when a user program emits a null record</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1649</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description></description>
                <environment></environment>
        <key id="12779559">FLINK-1649</key>
            <summary>Give a good error message when a user program emits a null record</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="sewen">Stephan Ewen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Mar 2015 19:37:19 +0000</created>
                <updated>Thu, 5 Mar 2015 13:09:46 +0000</updated>
                            <resolved>Thu, 5 Mar 2015 13:09:46 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>Runtime / Task</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14347465" author="githubbot" created="Wed, 4 Mar 2015 19:57:45 +0000"  >&lt;p&gt;GitHub user StephanEwen opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/456&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/456&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1649&quot; title=&quot;Give a good error message when a user program emits a null record&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1649&quot;&gt;&lt;del&gt;FLINK-1649&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Give a good error message for null values&lt;/p&gt;

&lt;p&gt;    Contains also a test and code cleanup in the OutputCollector&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/StephanEwen/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StephanEwen/incubator-flink&lt;/a&gt; null_values&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/456.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/456.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #456&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a02632ec8f3b1d0295b2d6d0b425aa017f1ed6fa&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-03-04T19:36:33Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1649&quot; title=&quot;Give a good error message when a user program emits a null record&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1649&quot;&gt;&lt;del&gt;FLINK-1649&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Give a good error message when a user emits an unsupported null value&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14348341" author="githubbot" created="Thu, 5 Mar 2015 07:57:23 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/456#issuecomment-77321524&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/456#issuecomment-77321524&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM&lt;/p&gt;</comment>
                            <comment id="14348547" author="githubbot" created="Thu, 5 Mar 2015 10:32:44 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/456#discussion_r25853770&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/456#discussion_r25853770&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/operators/shipping/OutputCollector.java &amp;#8212;&lt;br/&gt;
    @@ -49,50 +48,33 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param writers List of all writers.&lt;br/&gt;
     	 */&lt;br/&gt;
     	@SuppressWarnings(&quot;unchecked&quot;)&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public OutputCollector(List&amp;lt;RecordWriter&amp;lt;SerializationDelegate&amp;lt;T&amp;gt;&amp;gt;&amp;gt; writers, TypeSerializer&amp;lt;T&amp;gt; serializer)&lt;/li&gt;
	&lt;li&gt;{&lt;br/&gt;
    +	public OutputCollector(List&amp;lt;RecordWriter&amp;lt;SerializationDelegate&amp;lt;T&amp;gt;&amp;gt;&amp;gt; writers, TypeSerializer&amp;lt;T&amp;gt; serializer) 
{
     		this.delegate = new SerializationDelegate&amp;lt;T&amp;gt;(serializer);
     		this.writers = (RecordWriter&amp;lt;SerializationDelegate&amp;lt;T&amp;gt;&amp;gt;[]) writers.toArray(new RecordWriter[writers.size()]);
     	}&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Adds a writer to the OutputCollector.&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @param writer The writer to add.&lt;/li&gt;
	&lt;li&gt;*/&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;@SuppressWarnings(&quot;unchecked&quot;)&lt;/li&gt;
	&lt;li&gt;public void addWriter(RecordWriter&amp;lt;SerializationDelegate&amp;lt;T&amp;gt;&amp;gt; writer)&lt;/li&gt;
	&lt;li&gt;{&lt;/li&gt;
	&lt;li&gt;// avoid using the array-list here to reduce one level of object indirection&lt;/li&gt;
	&lt;li&gt;if (this.writers == null) {&lt;/li&gt;
	&lt;li&gt;this.writers = new RecordWriter[] 
{writer}
&lt;p&gt;;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;else 
{
    -			RecordWriter&amp;lt;SerializationDelegate&amp;lt;T&amp;gt;&amp;gt;[] ws = new RecordWriter[this.writers.length + 1];
    -			System.arraycopy(this.writers, 0, ws, 0, this.writers.length);
    -			ws[this.writers.length] = writer;
    -			this.writers = ws;
    -		}&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Collects a record and emits it to all writers.&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Override&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void collect(T record)&lt;/li&gt;
	&lt;li&gt;{&lt;/li&gt;
	&lt;li&gt;this.delegate.setInstance(record);&lt;/li&gt;
	&lt;li&gt;try {&lt;/li&gt;
	&lt;li&gt;for (int i = 0; i &amp;lt; writers.length; i++) {&lt;/li&gt;
	&lt;li&gt;this.writers&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.emit(this.delegate);&lt;br/&gt;
    +	public void collect(T record)  {&lt;br/&gt;
    +		if (record != null) {&lt;br/&gt;
    +			this.delegate.setInstance(record);&lt;br/&gt;
    +			try 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {    +				for (RecordWriter&amp;lt;SerializationDelegate&amp;lt;T&amp;gt;&amp;gt; writer }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;    +			catch (IOException e) &lt;/p&gt;
{
    +				throw new RuntimeException(&quot;Emitting the record caused an I/O exception: &quot; + e.getMessage(), e);
    +			}
&lt;p&gt;    +			catch (InterruptedException e) &lt;/p&gt;
{
    +				throw new RuntimeException(&quot;Emitting the record was interrupted: &quot; + e.getMessage(), e);
     			}
&lt;p&gt;     		}&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;catch (IOException e) 
{
    -			throw new RuntimeException(&quot;Emitting the record caused an I/O exception: &quot; + e.getMessage(), e);
    -		}&lt;/li&gt;
	&lt;li&gt;catch (InterruptedException e) {&lt;/li&gt;
	&lt;li&gt;throw new RuntimeException(&quot;Emitting the record was interrupted: &quot; + e.getMessage(), e);&lt;br/&gt;
    +		else {&lt;br/&gt;
    +			throw new NullPointerException(&quot;The system does not support records that are null.&quot;&lt;br/&gt;
    +								+ &quot;Null values are only supported as fields inside other objects.&quot;);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing whitespace after new sentence&lt;/p&gt;</comment>
                            <comment id="14348548" author="githubbot" created="Thu, 5 Mar 2015 10:33:09 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/456#issuecomment-77341364&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/456#issuecomment-77341364&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    :1 looks good. I think we should merge this to master and release-0.8.&lt;/p&gt;</comment>
                            <comment id="14348708" author="githubbot" created="Thu, 5 Mar 2015 13:08:53 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/456&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/456&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14348713" author="stephanewen" created="Thu, 5 Mar 2015 13:09:46 +0000"  >&lt;p&gt;Fixed via 482766e949d69e282ed862bd97f2a8378b2f699e&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26d33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>