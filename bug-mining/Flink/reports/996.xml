<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:23:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3962] JMXReporter doesn&apos;t properly register/deregister metrics</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3962</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The following fails our Yarn tests because it checks for errors in the jobmanager/taskmanager logs:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-05-23 19:20:02,349 ERROR org.apache.flink.metrics.reporter.JMXReporter                 - A metric with the name org.apache.flink.metrics:key0=testing-worker-linux-docker-05a6b382-3386-linux-4,key1=taskmanager,key2=9398ca9392af615e9d1896d0bd7ff52a,key3=Flink_Java_Job_at_Mon_May_23_19-20-00_UTC_2016,key4=&amp;lt;task_name&amp;gt;,name=numBytesIn was already registered.
javax.management.InstanceAlreadyExistsException: org.apache.flink.metrics:key0=testing-worker-linux-docker-05a6b382-3386-linux-4,key1=taskmanager,key2=9398ca9392af615e9d1896d0bd7ff52a,key3=Flink_Java_Job_at_Mon_May_23_19-20-00_UTC_2016,key4=&amp;lt;task_name&amp;gt;,name=numBytesIn
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.flink.metrics.reporter.JMXReporter.notifyOfAddedMetric(JMXReporter.java:76)
	at org.apache.flink.metrics.MetricRegistry.register(MetricRegistry.java:177)
	at org.apache.flink.metrics.groups.AbstractMetricGroup.addMetric(AbstractMetricGroup.java:191)
	at org.apache.flink.metrics.groups.AbstractMetricGroup.counter(AbstractMetricGroup.java:144)
	at org.apache.flink.metrics.groups.IOMetricGroup.&amp;lt;init&amp;gt;(IOMetricGroup.java:40)
	at org.apache.flink.metrics.groups.TaskMetricGroup.&amp;lt;init&amp;gt;(TaskMetricGroup.java:68)
	at org.apache.flink.metrics.groups.JobMetricGroup.addTask(JobMetricGroup.java:74)
	at org.apache.flink.metrics.groups.TaskManagerMetricGroup.addTaskForJob(TaskManagerMetricGroup.java:86)
	at org.apache.flink.runtime.taskmanager.TaskManager.submitTask(TaskManager.scala:1092)
	at org.apache.flink.runtime.taskmanager.TaskManager.org$apache$flink$runtime$taskmanager$TaskManager$$handleTaskMessage(TaskManager.scala:441)
	at org.apache.flink.runtime.taskmanager.TaskManager$$anonfun$handleMessage$1.applyOrElse(TaskManager.scala:283)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply$mcVL$sp(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:25)
	at org.apache.flink.runtime.LeaderSessionMessageFilter$$anonfun$receive$1.applyOrElse(LeaderSessionMessageFilter.scala:36)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply$mcVL$sp(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:25)
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:33)
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:28)
	at scala.PartialFunction$class.applyOrElse(PartialFunction.scala:118)
	at org.apache.flink.runtime.LogMessages$$anon$1.applyOrElse(LogMessages.scala:28)
	at akka.actor.Actor$class.aroundReceive(Actor.scala:465)
	at org.apache.flink.runtime.taskmanager.TaskManager.aroundReceive(TaskManager.scala:124)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)
	at akka.actor.ActorCell.invoke(ActorCell.scala:487)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:254)
	at akka.dispatch.Mailbox.run(Mailbox.scala:221)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:231)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12972341">FLINK-3962</key>
            <summary>JMXReporter doesn&apos;t properly register/deregister metrics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="mxm">Maximilian Michels</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 May 2016 09:51:48 +0000</created>
                <updated>Wed, 2 Oct 2019 17:49:08 +0000</updated>
                            <resolved>Thu, 21 Jul 2016 13:55:28 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15298008" author="mxm" created="Tue, 24 May 2016 09:54:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; I assigned you because you had been working on the metrics reporting.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt; said he probably knows why this occurs.&lt;/p&gt;</comment>
                            <comment id="15299980" author="stephanewen" created="Wed, 25 May 2016 12:40:15 +0000"  >&lt;p&gt;I have started to look into this, would be willing to finish it.&lt;/p&gt;

&lt;p&gt;I think the problem is multiple things:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The registry is created multiple times per TaskManager (each time it associates with a JobManager). The JMX registration happens multiple times as well.&lt;/li&gt;
	&lt;li&gt;Reporters are not shut down properly&lt;/li&gt;
	&lt;li&gt;Multiple JMX reporters cannot coexist, because there is one JMX registry per JVM, and reporters would re-register the same beans&lt;/li&gt;
	&lt;li&gt;When the reporter is JMX, Flink does not need to register the JVM wide JMX-based metrics. They are already there.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15300091" author="stephanewen" created="Wed, 25 May 2016 14:03:45 +0000"  >&lt;p&gt;Actually, there seems to be another problem: The scope variables are not properly replaced by unique names, causes name collisions&lt;/p&gt;</comment>
                            <comment id="15300102" author="mxm" created="Wed, 25 May 2016 14:11:29 +0000"  >&lt;p&gt;Thanks for looking into this!&lt;/p&gt;</comment>
                            <comment id="15306417" author="mxm" created="Mon, 30 May 2016 09:11:28 +0000"  >&lt;p&gt;In the Yarn tests, I&apos;m still seeing these exceptions:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-05-30 11:03:47,498 ERROR org.apache.flink.metrics.reporter.JMXReporter                 - A metric with the name org.apache.flink.metrics:key0=mxm,key1=taskmanager,key2=25260e5955217acb4a2be8a0846f44f1,key3=WordCount_Example,key4=CHAIN_DataSource_(at_main(WordCount.java-70)_(org.apache.flink.api.java.io.TextInputFormat))_-&amp;gt;_FlatMap_(FlatMap_at_main(WordCount.java-80))_-&amp;gt;_Combine(SUM(1)-_at_main(WordCount.java-83),name=numBytesIn was already registered.
javax.management.InstanceAlreadyExistsException: org.apache.flink.metrics:key0=mxm,key1=taskmanager,key2=25260e5955217acb4a2be8a0846f44f1,key3=WordCount_Example,key4=CHAIN_DataSource_(at_main(WordCount.java-70)_(org.apache.flink.api.java.io.TextInputFormat))_-&amp;gt;_FlatMap_(FlatMap_at_main(WordCount.java-80))_-&amp;gt;_Combine(SUM(1)-_at_main(WordCount.java-83),name=numBytesIn
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.flink.metrics.reporter.JMXReporter.notifyOfAddedMetric(JMXReporter.java:76)
	at org.apache.flink.metrics.MetricRegistry.register(MetricRegistry.java:177)
	at org.apache.flink.metrics.groups.AbstractMetricGroup.addMetric(AbstractMetricGroup.java:191)
	at org.apache.flink.metrics.groups.AbstractMetricGroup.counter(AbstractMetricGroup.java:144)
	at org.apache.flink.metrics.groups.IOMetricGroup.&amp;lt;init&amp;gt;(IOMetricGroup.java:40)
	at org.apache.flink.metrics.groups.TaskMetricGroup.&amp;lt;init&amp;gt;(TaskMetricGroup.java:74)
	at org.apache.flink.metrics.groups.JobMetricGroup.addTask(JobMetricGroup.java:74)
	at org.apache.flink.metrics.groups.TaskManagerMetricGroup.addTaskForJob(TaskManagerMetricGroup.java:86)
	at org.apache.flink.runtime.taskmanager.TaskManager.submitTask(TaskManager.scala:1093)
	at org.apache.flink.runtime.taskmanager.TaskManager.org$apache$flink$runtime$taskmanager$TaskManager$$handleTaskMessage(TaskManager.scala:442)
	at org.apache.flink.runtime.taskmanager.TaskManager$$anonfun$handleMessage$1.applyOrElse(TaskManager.scala:284)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply$mcVL$sp(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:25)
	at org.apache.flink.runtime.LeaderSessionMessageFilter$$anonfun$receive$1.applyOrElse(LeaderSessionMessageFilter.scala:36)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply$mcVL$sp(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:25)
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:33)
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:28)
	at scala.PartialFunction$class.applyOrElse(PartialFunction.scala:118)
	at org.apache.flink.runtime.LogMessages$$anon$1.applyOrElse(LogMessages.scala:28)
	at akka.actor.Actor$class.aroundReceive(Actor.scala:465)
	at org.apache.flink.runtime.taskmanager.TaskManager.aroundReceive(TaskManager.scala:124)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)
	at akka.actor.ActorCell.invoke(ActorCell.scala:487)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:254)
	at akka.dispatch.Mailbox.run(Mailbox.scala:221)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:231)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15306443" author="zentol" created="Mon, 30 May 2016 09:33:09 +0000"  >&lt;p&gt;This is not due to metrics not being unregistered but the implementation of the collision handling in JobMetricGroup.&lt;/p&gt;

&lt;p&gt;in addTask we always create a new TaskMetricGroup, regardless of whether one already exists for a given task. Within this TaskMetricGroup an IOMetricGroup is immediately created which registers a number of metrics. Since another TaskMetricGroup already existed, we are now bound to register duplicate metrics.&lt;/p&gt;

&lt;p&gt;This issue is further compounded by a fault in addMetric, which tries to register a metric even though we already know it is a duplicate.&lt;/p&gt;

&lt;p&gt;All in all this issue is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3985&quot; title=&quot;A metric with the name * was already registered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3985&quot;&gt;&lt;del&gt;FLINK-3985&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15333440" author="mxm" created="Thu, 16 Jun 2016 09:27:07 +0000"  >&lt;p&gt;Another exception from the Yarn logs:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-06-16 04:58:37,218 ERROR org.apache.flink.metrics.reporter.JMXReporter                 - Metric did not comply with JMX MBean naming rules.
javax.management.NotCompliantMBeanException: Interface is not public: org.apache.flink.metrics.reporter.JMXReporter$JmxGaugeMBean
	at com.sun.jmx.mbeanserver.MBeanAnalyzer.&amp;lt;init&amp;gt;(MBeanAnalyzer.java:114)
	at com.sun.jmx.mbeanserver.MBeanAnalyzer.analyzer(MBeanAnalyzer.java:102)
	at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.getAnalyzer(StandardMBeanIntrospector.java:67)
	at com.sun.jmx.mbeanserver.MBeanIntrospector.getPerInterface(MBeanIntrospector.java:192)
	at com.sun.jmx.mbeanserver.MBeanSupport.&amp;lt;init&amp;gt;(MBeanSupport.java:138)
	at com.sun.jmx.mbeanserver.StandardMBeanSupport.&amp;lt;init&amp;gt;(StandardMBeanSupport.java:60)
	at com.sun.jmx.mbeanserver.Introspector.makeDynamicMBean(Introspector.java:192)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.flink.metrics.reporter.JMXReporter.notifyOfAddedMetric(JMXReporter.java:113)
	at org.apache.flink.metrics.MetricRegistry.register(MetricRegistry.java:174)
	at org.apache.flink.metrics.groups.AbstractMetricGroup.addMetric(AbstractMetricGroup.java:206)
	at org.apache.flink.metrics.groups.AbstractMetricGroup.gauge(AbstractMetricGroup.java:162)
	at org.apache.flink.runtime.taskmanager.TaskManager$.instantiateClassLoaderMetrics(TaskManager.scala:2298)
	at org.apache.flink.runtime.taskmanager.TaskManager$.org$apache$flink$runtime$taskmanager$TaskManager$$instantiateStatusMetrics(TaskManager.scala:2287)
	at org.apache.flink.runtime.taskmanager.TaskManager.associateWithJobManager(TaskManager.scala:951)
	at org.apache.flink.runtime.taskmanager.TaskManager.org$apache$flink$runtime$taskmanager$TaskManager$$handleRegistrationMessage(TaskManager.scala:631)
	at org.apache.flink.runtime.taskmanager.TaskManager$$anonfun$handleMessage$1.applyOrElse(TaskManager.scala:297)
	at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:36)
	at org.apache.flink.runtime.LeaderSessionMessageFilter$$anonfun$receive$1.applyOrElse(LeaderSessionMessageFilter.scala:36)
	at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:36)
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:33)
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:28)
	at scala.PartialFunction$class.applyOrElse(PartialFunction.scala:123)
	at org.apache.flink.runtime.LogMessages$$anon$1.applyOrElse(LogMessages.scala:28)
	at akka.actor.Actor$class.aroundReceive(Actor.scala:465)
	at org.apache.flink.runtime.taskmanager.TaskManager.aroundReceive(TaskManager.scala:124)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)
	at akka.actor.ActorCell.invoke(ActorCell.scala:487)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:254)
	at akka.dispatch.Mailbox.run(Mailbox.scala:221)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:231)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
2016-06-16 04:58:37,221 ERROR org.apache.flink.metrics.reporter.JMXReporter                 - Metric did not comply with JMX MBean naming rules.
javax.management.NotCompliantMBeanException: Interface is not public: org.apache.flink.metrics.reporter.JMXReporter$JmxGaugeMBean
	at com.sun.jmx.mbeanserver.MBeanAnalyzer.&amp;lt;init&amp;gt;(MBeanAnalyzer.java:114)
	at com.sun.jmx.mbeanserver.MBeanAnalyzer.analyzer(MBeanAnalyzer.java:102)
	at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.getAnalyzer(StandardMBeanIntrospector.java:67)
	at com.sun.jmx.mbeanserver.MBeanIntrospector.getPerInterface(MBeanIntrospector.java:192)
	at com.sun.jmx.mbeanserver.MBeanSupport.&amp;lt;init&amp;gt;(MBeanSupport.java:138)
	at com.sun.jmx.mbeanserver.StandardMBeanSupport.&amp;lt;init&amp;gt;(StandardMBeanSupport.java:60)
	at com.sun.jmx.mbeanserver.Introspector.makeDynamicMBean(Introspector.java:192)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.flink.metrics.reporter.JMXReporter.notifyOfAddedMetric(JMXReporter.java:113)
	at org.apache.flink.metrics.MetricRegistry.register(MetricRegistry.java:174)
	at org.apache.flink.metrics.groups.AbstractMetricGroup.addMetric(AbstractMetricGroup.java:206)
	at org.apache.flink.metrics.groups.AbstractMetricGroup.gauge(AbstractMetricGroup.java:162)
	at org.apache.flink.runtime.taskmanager.TaskManager$.instantiateClassLoaderMetrics(TaskManager.scala:2301)
	at org.apache.flink.runtime.taskmanager.TaskManager$.org$apache$flink$runtime$taskmanager$TaskManager$$instantiateStatusMetrics(TaskManager.scala:2287)
	at org.apache.flink.runtime.taskmanager.TaskManager.associateWithJobManager(TaskManager.scala:951)
	at org.apache.flink.runtime.taskmanager.TaskManager.org$apache$flink$runtime$taskmanager$TaskManager$$handleRegistrationMessage(TaskManager.scala:631)
	at org.apache.flink.runtime.taskmanager.TaskManager$$anonfun$handleMessage$1.applyOrElse(TaskManager.scala:297)
	at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:36)
	at org.apache.flink.runtime.LeaderSessionMessageFilter$$anonfun$receive$1.applyOrElse(LeaderSessionMessageFilter.scala:36)
	at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:36)
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:33)
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:28)
	at scala.PartialFunction$class.applyOrElse(PartialFunction.scala:123)
	at org.apache.flink.runtime.LogMessages$$anon$1.applyOrElse(LogMessages.scala:28)
	at akka.actor.Actor$class.aroundReceive(Actor.scala:465)
	at org.apache.flink.runtime.taskmanager.TaskManager.aroundReceive(TaskManager.scala:124)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)
	at akka.actor.ActorCell.invoke(ActorCell.scala:487)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:254)
	at akka.dispatch.Mailbox.run(Mailbox.scala:221)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:231)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15333458" author="zentol" created="Thu, 16 Jun 2016 09:38:32 +0000"  >&lt;p&gt;that new exception makes no sense at all. Both the JMXReporter and JMXGaugeMBean class are clearly marked as public classes. If this were not the case we would have run into that weeks ago.&lt;/p&gt;

&lt;p&gt;there is something odd going on there.&lt;/p&gt;</comment>
                            <comment id="15347222" author="soniclavier" created="Thu, 23 Jun 2016 21:19:30 +0000"  >&lt;p&gt;I am getting this exception in Local execution aswell. (from IDE or when run through `flink run`)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;17:16:38,095 ERROR org.apache.flink.metrics.reporter.JMXReporter                 - A metric with the name org.apache.flink.metrics:key0=localhost,key1=taskmanager,key2=f7bccd0c64bc9c3643647913eced7104,key3=Streaming_Job,key4=Map,key5=0,name=numRecordsIn was already registered.
javax.management.InstanceAlreadyExistsException: org.apache.flink.metrics:key0=localhost,key1=taskmanager,key2=f7bccd0c64bc9c3643647913eced7104,key3=Streaming_Job,key4=Map,key5=0,name=numRecordsIn
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.flink.metrics.reporter.JMXReporter.notifyOfAddedMetric(JMXReporter.java:109)
	at org.apache.flink.metrics.MetricRegistry.register(MetricRegistry.java:174)
	at org.apache.flink.metrics.groups.AbstractMetricGroup.addMetric(AbstractMetricGroup.java:194)
	at org.apache.flink.metrics.groups.AbstractMetricGroup.counter(AbstractMetricGroup.java:150)
	at org.apache.flink.streaming.runtime.io.StreamInputProcessor.processInput(StreamInputProcessor.java:141)
	at org.apache.flink.streaming.runtime.tasks.OneInputStreamTask.run(OneInputStreamTask.java:66)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:235)
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:588)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15348022" author="zentol" created="Fri, 24 Jun 2016 08:55:44 +0000"  >&lt;p&gt;this can easily happen for streaming jobs. The current default scopeformat coupled with the unspecific name of streaming operators can easily lead to that exception.&lt;/p&gt;

&lt;p&gt;We should change the default scopeformat to include the jobID and taskID to be more unique. This will also reduce the number of false positives, making it easier to track down actual defects.&lt;/p&gt;</comment>
                            <comment id="15387726" author="stephanewen" created="Thu, 21 Jul 2016 13:54:40 +0000"  >&lt;p&gt;This issue has been resolved by not throwing exceptions, but merely logging a simple warning.&lt;/p&gt;</comment>
                            <comment id="15715324" author="jstehler" created="Fri, 2 Dec 2016 14:53:21 +0000"  >&lt;p&gt;I&apos;m still seeing this in sentry; is it possible that it&apos;s being logged to ERROR and not WARN?&lt;/p&gt;</comment>
                            <comment id="15715327" author="jstehler" created="Fri, 2 Dec 2016 14:53:45 +0000"  >&lt;p&gt;(v1.1.3)&lt;/p&gt;

&lt;p&gt;java.lang.IllegalArgumentException: A metric named ip-10-80-37-118.taskmanager.79fd3d1675a1ad222ce8e44d7bec75e8.leadercentral batch.Map (Key Extractor).0.numRecordsIn already exists&lt;br/&gt;
    at com.codahale.metrics.MetricRegistry.register(MetricRegistry.java:91)&lt;br/&gt;
    at org.apache.flink.dropwizard.ScheduledDropwizardReporter.notifyOfAddedMetric(ScheduledDropwizardReporter.java:111)&lt;br/&gt;
    at org.apache.flink.runtime.metrics.MetricRegistry.register(MetricRegistry.java:204)&lt;br/&gt;
    at org.apache.flink.runtime.metrics.groups.AbstractMetricGroup.addMetric(AbstractMetricGroup.java:237)&lt;br/&gt;
    at org.apache.flink.runtime.metrics.groups.AbstractMetricGroup.counter(AbstractMetricGroup.java:185)&lt;br/&gt;
    at org.apache.flink.runtime.metrics.groups.AbstractMetricGroup.counter(AbstractMetricGroup.java:175)&lt;br/&gt;
    at org.apache.flink.runtime.operators.chaining.ChainedDriver.setup(ChainedDriver.java:72)&lt;br/&gt;
    at org.apache.flink.runtime.operators.BatchTask.initOutputs(BatchTask.java:1305)&lt;br/&gt;
    at org.apache.flink.runtime.operators.DataSourceTask.initOutputs(DataSourceTask.java:285)&lt;br/&gt;
    at org.apache.flink.runtime.operators.DataSourceTask.invoke(DataSourceTask.java:90)&lt;br/&gt;
    at org.apache.flink.runtime.taskmanager.Task.run(Task.java:585)&lt;br/&gt;
    at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;
</comment>
                            <comment id="15715340" author="zentol" created="Fri, 2 Dec 2016 14:58:19 +0000"  >&lt;p&gt;yes, there is still a LOG.error call in MetricRegistry#register(), thank your for reporting this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12973645">FLINK-3985</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yf07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>