<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:49:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-19086] Performance regression 2020-08-27 in globalWindow benchmark</title>
                <link>https://issues.apache.org/jira/browse/FLINK-19086</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://codespeed.dak8s.net:8000/timeline/?ben=globalWindow&amp;amp;env=2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://codespeed.dak8s.net:8000/timeline/?ben=globalWindow&amp;amp;env=2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://codespeed.dak8s.net:8000/timeline/#/?exe=1,3&amp;amp;ben=tumblingWindow&amp;amp;env=2&amp;amp;revs=200&amp;amp;equid=off&amp;amp;quarts=on&amp;amp;extr=on&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://codespeed.dak8s.net:8000/timeline/#/?exe=1,3&amp;amp;ben=tumblingWindow&amp;amp;env=2&amp;amp;revs=200&amp;amp;equid=off&amp;amp;quarts=on&amp;amp;extr=on&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;The results started to decrease 2 days before decomissioning of an old jenkins node.&lt;/p&gt;

&lt;p&gt;The other tests, however, were stable.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13324992">FLINK-19086</key>
            <summary>Performance regression 2020-08-27 in globalWindow benchmark</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roman">Roman Khachatryan</assignee>
                                    <reporter username="roman">Roman Khachatryan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 28 Aug 2020 08:00:54 +0000</created>
                <updated>Mon, 7 Sep 2020 11:58:09 +0000</updated>
                            <resolved>Mon, 7 Sep 2020 11:58:09 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.12.0</fixVersion>
                                    <component>Benchmarks</component>
                    <component>Runtime / Task</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17186639" author="roman_khachatryan" created="Fri, 28 Aug 2020 15:55:28 +0000"  >&lt;p&gt;Locally couldn&apos;t confirm:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
642d4fe48c (Aug 26)
Benchmark                         Mode  Cnt     Score     Error   Units
WindowBenchmarks.globalWindow    thrpt   30  4580.346 &#177; 215.247  ops/ms
WindowBenchmarks.sessionWindow   thrpt   30   377.308 &#177;  40.897  ops/ms
WindowBenchmarks.slidingWindow   thrpt   30   448.708 &#177;  20.665  ops/ms
WindowBenchmarks.tumblingWindow  thrpt   30  3199.008 &#177;  43.838  ops/ms

e690793c6 (Aug 27)
Benchmark                         Mode  Cnt     Score     Error   Units
WindowBenchmarks.globalWindow    thrpt   30  4814.900 &#177; 100.372  ops/ms
WindowBenchmarks.sessionWindow   thrpt   30   590.319 &#177;   7.214  ops/ms
WindowBenchmarks.slidingWindow   thrpt   30   509.285 &#177;   4.370  ops/ms
WindowBenchmarks.tumblingWindow  thrpt   30  3014.359 &#177;  60.543  ops/ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17186657" author="roman_khachatryan" created="Fri, 28 Aug 2020 16:31:31 +0000"  >&lt;p&gt;However, the &quot;old&quot; machine still gives better results for older commit than for a newer:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
642d4fe48c (Aug 26)
&lt;span class=&quot;code-quote&quot;&gt;&quot;Benchmark&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;Mode&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;Threads&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;Samples&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;Score&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;Score Error (99.9%)&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;Unit&quot;&lt;/span&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.flink.benchmark.WindowBenchmarks.globalWindow&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;thrpt&quot;&lt;/span&gt;,1,30,7484.147160,418.570329,&lt;span class=&quot;code-quote&quot;&gt;&quot;ops/ms&quot;&lt;/span&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.flink.benchmark.WindowBenchmarks.sessionWindow&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;thrpt&quot;&lt;/span&gt;,1,30,921.140648,5.433683,&lt;span class=&quot;code-quote&quot;&gt;&quot;ops/ms&quot;&lt;/span&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.flink.benchmark.WindowBenchmarks.slidingWindow&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;thrpt&quot;&lt;/span&gt;,1,30,791.730208,4.176828,&lt;span class=&quot;code-quote&quot;&gt;&quot;ops/ms&quot;&lt;/span&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.flink.benchmark.WindowBenchmarks.tumblingWindow&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;thrpt&quot;&lt;/span&gt;,1,30,4539.169233,105.467920,&lt;span class=&quot;code-quote&quot;&gt;&quot;ops/ms&quot;&lt;/span&gt;

278d2a043 (Aug 28)
&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.flink.benchmark.WindowBenchmarks.globalWindow&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;thrpt&quot;&lt;/span&gt;,1,30,7117.974175,202.626669,&lt;span class=&quot;code-quote&quot;&gt;&quot;ops/ms&quot;&lt;/span&gt;,,,,
&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.flink.benchmark.WindowBenchmarks.sessionWindow&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;thrpt&quot;&lt;/span&gt;,1,30,905.537850,2.796048,&lt;span class=&quot;code-quote&quot;&gt;&quot;ops/ms&quot;&lt;/span&gt;,,,,
&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.flink.benchmark.WindowBenchmarks.slidingWindow&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;thrpt&quot;&lt;/span&gt;,1,30,788.335585,5.004561,&lt;span class=&quot;code-quote&quot;&gt;&quot;ops/ms&quot;&lt;/span&gt;,,,,
&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.flink.benchmark.WindowBenchmarks.tumblingWindow&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;thrpt&quot;&lt;/span&gt;,1,30,4303.568852,85.755644,&lt;span class=&quot;code-quote&quot;&gt;&quot;ops/ms&quot;&lt;/span&gt;,,,,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17187719" author="roman_khachatryan" created="Mon, 31 Aug 2020 13:03:22 +0000"  >&lt;p&gt;new host - confirms the issue:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;642d4fe48c - &quot;older&quot; but faster commit - see &lt;a href=&quot;http://codespeed.dak8s.net:8080/job/flink-benchmark-request/214/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;run 214&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
globalWindow: 6629.419125,229.649936,ops/ms
sessionWindow: 818.793062,9.702122,ops/ms
slidingWindow: 718.801205,5.159397,ops/ms
tumblingWindow: 3755.088518,44.014276,ops/ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;278d2a043 - &quot;newer&quot; but slower commit - see &lt;a href=&quot;http://codespeed.dak8s.net:8080/job/flink-benchmark-request/215/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;run 215&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;
globalWindow: 5762.352564,99.540663,ops/ms
sessionWindow: 813.267524,6.591522,ops/ms
slidingWindow: 699.681922,14.152090,ops/ms
tumblingWindow: 3521.620899,53.002998,ops/ms

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17187743" author="pnowojski" created="Mon, 31 Aug 2020 13:36:42 +0000"  >&lt;p&gt;Could you bisect the commits to find the culprit? Or analyse it to find a likely candidate?&lt;/p&gt;</comment>
                            <comment id="17187759" author="roman_khachatryan" created="Mon, 31 Aug 2020 14:18:40 +0000"  >&lt;p&gt;Sure, that&apos;s what I&apos;m doing right now.&lt;/p&gt;</comment>
                            <comment id="17189655" author="roman_khachatryan" created="Wed, 2 Sep 2020 19:32:39 +0000"  >&lt;p&gt;Looks like the problem is caused by &lt;a href=&quot;https://github.com/apache/flink/commit/162e3ead63e5766cf2116af09922a88537889e53&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;162e3e (FLINK-19052 [serialization] add constructor cache in PojoSerializer)&lt;/a&gt;&#160; .&lt;/p&gt;

&lt;p&gt;I published a &lt;a href=&quot;https://github.com/apache/flink/pull/13310&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;simple PR&lt;/a&gt; to revert it.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgrebennikov&quot; class=&quot;user-hover&quot; rel=&quot;rgrebennikov&quot;&gt;rgrebennikov&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;&#160;can you take a look?&lt;/p&gt;

&lt;p&gt;(Roman G. maybe you can verify regression/fix in your environment?)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17189946" author="pnowojski" created="Thu, 3 Sep 2020 08:28:29 +0000"  >&lt;p&gt;I&apos;m +1 for trying to revert it. Especially that the I couldn&apos;t find the performance improvement of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-19052&quot; title=&quot;Performance issue with PojoSerializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-19052&quot;&gt;FLINK-19052&lt;/a&gt; on the hetzner machine:&lt;br/&gt;
&lt;a href=&quot;http://codespeed.dak8s.net:8000/timeline/?ben=serializerPojo&amp;amp;env=2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://codespeed.dak8s.net:8000/timeline/?ben=serializerPojo&amp;amp;env=2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17191665" author="pnowojski" created="Mon, 7 Sep 2020 11:58:09 +0000"  >&lt;p&gt;Merged commit reverting &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-19052&quot; title=&quot;Performance issue with PojoSerializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-19052&quot;&gt;FLINK-19052&lt;/a&gt; as 73e0e5c671 into master.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13324631">FLINK-19052</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13010662" name="Screenshot_2020-08-28_09-58-31.png" size="162101" author="roman" created="Fri, 28 Aug 2020 08:02:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0i5ug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>