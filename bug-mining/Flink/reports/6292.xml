<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:09:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-26126] Sink V2 will cause error numRecordsOut metric</title>
                <link>https://issues.apache.org/jira/browse/FLINK-26126</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;We found that the new sink v2 interface will have a wrong numRecordsOut metric for the sink writers. We send a fixed number of records to the source, but the numRecordsOut of the sink continues to increase by the time.&lt;/p&gt;

&lt;p&gt;The problem lies in the method `emitCommittables` in the class `SinkWriterOperator`.&#160; The field `output` in its parent class `AbstractStreamOperator` uses the same counter object as the `KafkaWriter`. It will cause the numRecordsOut increasing when doing the checkpoint.&#160;&lt;/p&gt;

&lt;p&gt;I found this problem when we implement the metric test in the testframe, now I disable this metric test in the &lt;a href=&quot;https://github.com/apache/flink/pull/18496&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt; We could reopen this test case after the fix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13428291">FLINK-26126</key>
            <summary>Sink V2 will cause error numRecordsOut metric</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jingge">Jing Ge</assignee>
                                    <reporter username="ruanhang1993">Ruan Hang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 14 Feb 2022 09:55:22 +0000</created>
                <updated>Sat, 1 Oct 2022 14:34:07 +0000</updated>
                            <resolved>Mon, 7 Mar 2022 08:30:28 +0000</resolved>
                                    <version>1.15.0</version>
                                    <fixVersion>1.15.0</fixVersion>
                                    <component>Connectors / Common</component>
                    <component>Connectors / Kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17492357" author="leonard xu" created="Tue, 15 Feb 2022 04:25:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ruanhang1993&quot; class=&quot;user-hover&quot; rel=&quot;ruanhang1993&quot;&gt;ruanhang1993&lt;/a&gt; The blocker priority means we have to&#160; fix it in the coming release.&lt;/p&gt;

&lt;p&gt;CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arvid&quot; class=&quot;user-hover&quot; rel=&quot;arvid&quot;&gt;arvid&lt;/a&gt; Could you help take a look this one?&lt;/p&gt;</comment>
                            <comment id="17492390" author="ruanhang1993" created="Tue, 15 Feb 2022 06:52:54 +0000"  >&lt;p&gt;The Kafka sink is already using the sink v2 interface in the master branch.&#160;&lt;/p&gt;

&lt;p&gt;I think it should be fixed before the release. Am I right? Or do I need to change the priority?&lt;/p&gt;

&lt;p&gt;CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpaul&quot; class=&quot;user-hover&quot; rel=&quot;fpaul&quot;&gt;fpaul&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17492430" author="fabian.paul" created="Tue, 15 Feb 2022 08:15:50 +0000"  >&lt;p&gt;I plan to work on this today or respectively tomorrow. It is high on my list.&lt;/p&gt;</comment>
                            <comment id="17493213" author="jingge" created="Wed, 16 Feb 2022 12:46:01 +0000"  >&lt;p&gt;reference: the specific commit of the disabled test &lt;a href=&quot;https://github.com/apache/flink/pull/18496/commits/cc23b8d007ad7df80d90db437789470502b78f53&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/18496/commits/cc23b8d007ad7df80d90db437789470502b78f53&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17493424" author="jingge" created="Wed, 16 Feb 2022 18:53:58 +0000"  >&lt;p&gt;It seems fine that KafkaWriter uses the Counter metric from SinkWriterOperator/AbstractStreamOperator, because the count will be increased only when the write(...) of KafkaWriter has been called. Sink V1 has the same implementation of the count metric.&lt;/p&gt;</comment>
                            <comment id="17502129" author="fabian.paul" created="Mon, 7 Mar 2022 08:30:18 +0000"  >&lt;p&gt;Merged in master: 9725933fc0a09274801d2acb52a6a5256afa10f6&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13431191">FLINK-26420</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13429728">FLINK-26282</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13432020">FLINK-26492</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0zjmg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>