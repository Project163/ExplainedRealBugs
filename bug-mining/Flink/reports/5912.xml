<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:07:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-22954] Don&apos;t support consuming update and delete changes when use table function that does not contain table field</title>
                <link>https://issues.apache.org/jira/browse/FLINK-22954</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.flink.table.api.TableException: Table sink &lt;span class=&quot;code-quote&quot;&gt;&apos;default_catalog.default_database.kafkaTableSink&apos;&lt;/span&gt; doesn&lt;span class=&quot;code-quote&quot;&gt;&apos;t support consuming update and delete changes which is produced by node Join(joinType=[LeftOuterJoin], where=[&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;], select=[name, word], leftInputSpec=[NoUniqueKey], rightInputSpec=[NoUniqueKey])Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.flink.table.api.TableException: Table sink &apos;&lt;/span&gt;default_catalog.default_database.kafkaTableSink&lt;span class=&quot;code-quote&quot;&gt;&apos; doesn&apos;&lt;/span&gt;t support consuming update and delete changes which is produced by node Join(joinType=[LeftOuterJoin], where=[&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;], select=[name, word], leftInputSpec=[NoUniqueKey], rightInputSpec=[NoUniqueKey]) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor.createNewNode(FlinkChangelogModeInferenceProgram.scala:382) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor.visit(FlinkChangelogModeInferenceProgram.scala:265) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor.org$apache$flink$table$planner$plan$optimize$program$FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor$$visitChild(FlinkChangelogModeInferenceProgram.scala:341) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor$$anonfun$3.apply(FlinkChangelogModeInferenceProgram.scala:330) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor$$anonfun$3.apply(FlinkChangelogModeInferenceProgram.scala:329) at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234) at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234) at scala.collection.immutable.Range.foreach(Range.scala:160) at scala.collection.TraversableLike$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;map(TraversableLike.scala:234) at scala.collection.AbstractTraversable.map(Traversable.scala:104) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor.visitChildren(FlinkChangelogModeInferenceProgram.scala:329) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor.visit(FlinkChangelogModeInferenceProgram.scala:279) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor.org$apache$flink$table$planner$plan$optimize$program$FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor$$visitChild(FlinkChangelogModeInferenceProgram.scala:341) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor$$anonfun$3.apply(FlinkChangelogModeInferenceProgram.scala:330) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor$$anonfun$3.apply(FlinkChangelogModeInferenceProgram.scala:329) at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234) at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234) at scala.collection.immutable.Range.foreach(Range.scala:160) at scala.collection.TraversableLike$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;map(TraversableLike.scala:234) at scala.collection.AbstractTraversable.map(Traversable.scala:104) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor.visitChildren(FlinkChangelogModeInferenceProgram.scala:329) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram$SatisfyModifyKindSetTraitVisitor.visit(FlinkChangelogModeInferenceProgram.scala:125) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram.optimize(FlinkChangelogModeInferenceProgram.scala:50) at org.apache.flink.table.planner.plan.optimize.program.FlinkChangelogModeInferenceProgram.optimize(FlinkChangelogModeInferenceProgram.scala:39) at org.apache.flink.table.planner.plan.optimize.program.FlinkGroupProgram$$anonfun$optimize$1$$anonfun$apply$1.apply(FlinkGroupProgram.scala:63) at org.apache.flink.table.planner.plan.optimize.program.FlinkGroupProgram$$anonfun$optimize$1$$anonfun$apply$1.apply(FlinkGroupProgram.scala:60) at scala.collection.TraversableOnce$$anonfun$foldLeft$1.apply(TraversableOnce.scala:157) at scala.collection.TraversableOnce$$anonfun$foldLeft$1.apply(TraversableOnce.scala:157) at scala.collection.Iterator$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;foreach(Iterator.scala:893) at scala.collection.AbstractIterator.foreach(Iterator.scala:1336) at scala.collection.IterableLike$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;foreach(IterableLike.scala:72) at scala.collection.AbstractIterable.foreach(Iterable.scala:54) at scala.collection.TraversableOnce$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;foldLeft(TraversableOnce.scala:157) at scala.collection.AbstractTraversable.foldLeft(Traversable.scala:104) at org.apache.flink.table.planner.plan.optimize.program.FlinkGroupProgram$$anonfun$optimize$1.apply(FlinkGroupProgram.scala:60) at org.apache.flink.table.planner.plan.optimize.program.FlinkGroupProgram$$anonfun$optimize$1.apply(FlinkGroupProgram.scala:55) at scala.collection.TraversableOnce$$anonfun$foldLeft$1.apply(TraversableOnce.scala:157) at scala.collection.TraversableOnce$$anonfun$foldLeft$1.apply(TraversableOnce.scala:157) at scala.collection.immutable.Range.foreach(Range.scala:160) at scala.collection.TraversableOnce$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;foldLeft(TraversableOnce.scala:157) at scala.collection.AbstractTraversable.foldLeft(Traversable.scala:104) at org.apache.flink.table.planner.plan.optimize.program.FlinkGroupProgram.optimize(FlinkGroupProgram.scala:55) at org.apache.flink.table.planner.plan.optimize.program.FlinkChainedProgram$$anonfun$optimize$1.apply(FlinkChainedProgram.scala:62) at org.apache.flink.table.planner.plan.optimize.program.FlinkChainedProgram$$anonfun$optimize$1.apply(FlinkChainedProgram.scala:58) at scala.collection.TraversableOnce$$anonfun$foldLeft$1.apply(TraversableOnce.scala:157) at scala.collection.TraversableOnce$$anonfun$foldLeft$1.apply(TraversableOnce.scala:157) at scala.collection.Iterator$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;foreach(Iterator.scala:893) at scala.collection.AbstractIterator.foreach(Iterator.scala:1336) at scala.collection.IterableLike$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;foreach(IterableLike.scala:72) at scala.collection.AbstractIterable.foreach(Iterable.scala:54) at scala.collection.TraversableOnce$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;foldLeft(TraversableOnce.scala:157) at scala.collection.AbstractTraversable.foldLeft(Traversable.scala:104) at org.apache.flink.table.planner.plan.optimize.program.FlinkChainedProgram.optimize(FlinkChainedProgram.scala:57) at org.apache.flink.table.planner.plan.optimize.StreamCommonSubGraphBasedOptimizer.optimizeTree(StreamCommonSubGraphBasedOptimizer.scala:163) at org.apache.flink.table.planner.plan.optimize.StreamCommonSubGraphBasedOptimizer.doOptimize(StreamCommonSubGraphBasedOptimizer.scala:79) at org.apache.flink.table.planner.plan.optimize.CommonSubGraphBasedOptimizer.optimize(CommonSubGraphBasedOptimizer.scala:77) at org.apache.flink.table.planner.delegation.PlannerBase.optimize(PlannerBase.scala:287) at org.apache.flink.table.planner.delegation.StreamPlanner.explain(StreamPlanner.scala:100) at org.apache.flink.table.planner.delegation.StreamPlanner.explain(StreamPlanner.scala:42) at org.apache.flink.table.api.internal.TableEnvironmentImpl.explainInternal(TableEnvironmentImpl.java:630) at org.apache.flink.table.api.internal.StatementSetImpl.explain(StatementSetImpl.java:92)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;UDF code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@FunctionHint(output = @DataTypeHint(&lt;span class=&quot;code-quote&quot;&gt;&quot;ROW&amp;lt;word INT&amp;gt;&quot;&lt;/span&gt;))
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GenerateSeriesUdf &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; TableFunction&amp;lt;Row&amp;gt; {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void eval(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; from, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; to) {
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = from; i &amp;lt; to; i++) {
            Row row = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Row(1);
            row.setField(0, i);
            collect(row);
        }
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TypeInformation&amp;lt;Row&amp;gt; getResultType() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Types.ROW(Types.INT());
    }
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;`JOIN` is ok,&#160; `LEFT JOIN` has error.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE TABLE kafkaTableSource (
    name string,
    age &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
    sex string,
    address string,
    pt as PROCTIME()
) WITH (
    &lt;span class=&quot;code-quote&quot;&gt;&apos;connector&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;kafka&apos;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&apos;topic&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;hehuiyuan1&apos;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&apos;scan.startup.mode&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;latest-offset&apos;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&apos;properties.bootstrap.servers&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;localhost:9092&apos;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&apos;properties.client.id&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;test-consumer-group&apos;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&apos;properties.group.id&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;test-consumer-group&apos;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&apos;format&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;json&apos;&lt;/span&gt;
);

CREATE TABLE kafkaTableSink (
    name string,
    sname string,
    sno string,
    sclass string,
    address string
) WITH (
    &lt;span class=&quot;code-quote&quot;&gt;&apos;connector&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;kafka&apos;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&apos;topic&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;hehuiyuan2&apos;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&apos;properties.bootstrap.servers&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;localhost:9092&apos;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&apos;format&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;json&apos;&lt;/span&gt;
);
INSERT INTO kafkaTableSink
SELECT name, name, name, name, word
FROM kafkaTableSource
LEFT JOIN LATERAL TABLE(GENERATE_SERIES(1,5)) AS T(word) ON TRUE;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// UDF is constant , two inut
&lt;/span&gt;optimize result:
Sink(table=[default_catalog.default_database.kafkaTableSink], fields=[name, name0, name1, name2, word])
+- Calc(select=[name, name AS name0, name AS name1, name AS name2, word])
&#160;&#160; +- Join(joinType=[LeftOuterJoin], where=[&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;], select=[name, word], leftInputSpec=[NoUniqueKey], rightInputSpec=[NoUniqueKey])
&#160; &#160; &#160; :- Exchange(distribution=[single])
&#160; &#160; &#160; :&#160; +- Calc(select=[name])
&#160; &#160; &#160; : &#160; &#160; +- TableSourceScan(table=[[default_catalog, default_database, kafkaTableSource]], fields=[name, age, sex, address])
&#160; &#160; &#160; +- Exchange(distribution=[single])
&#160;&#160; &#160; &#160; &#160; +- Correlate(invocation=[GENERATE_SERIES(1, 5)], correlate=[table(GENERATE_SERIES(1,5))], select=[word], rowType=[RecordType:peek_no_expand(INTEGER word)], joinType=[INNER])
&#160; &#160; &#160; &#160; &#160; &#160; +- Values(tuples=[[{&#160; }]])

&lt;span class=&quot;code-comment&quot;&gt;// UDF that use table field , one inut
&lt;/span&gt;optimize result:
 Sink(table=[default_catalog.default_database.kafkaTableSink], fields=[name, name0, name1, name2, province])
+- Calc(select=[name, name AS name0, name AS name1, name AS name2, word AS province])
&#160;&#160; +- Correlate(invocation=[JSON_TUPLE($cor0.address, _UTF-16LE&lt;span class=&quot;code-quote&quot;&gt;&apos;province&apos;&lt;/span&gt;)], correlate=[table(JSON_TUPLE($cor0.address,_UTF-16LE&lt;span class=&quot;code-quote&quot;&gt;&apos;province&apos;&lt;/span&gt;))], select=[name,age,sex,address,pt,word], rowType=[RecordType(VARCHAR(2147483647) name, INTEGER age, VARCHAR(2147483647) sex, VARCHAR(2147483647) address, TIME ATTRIBUTE(PROCTIME) pt, VARCHAR(2147483647) word)], joinType=[LEFT])
&#160; &#160; &#160; +- Calc(select=[name, age, sex, address, PROCTIME() AS pt])
&#160;&#160; &#160; &#160; &#160; +- TableSourceScan(table=[[default_catalog, default_database, kafkaTableSource]], fields=[name, age, sex, address])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13383082">FLINK-22954</key>
            <summary>Don&apos;t support consuming update and delete changes when use table function that does not contain table field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wenlong.lwl">Wenlong Lyu</assignee>
                                    <reporter username="hehuiyuan">hehuiyuan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>stale-assigned</label>
                    </labels>
                <created>Thu, 10 Jun 2021 03:20:07 +0000</created>
                <updated>Wed, 15 Dec 2021 01:44:04 +0000</updated>
                            <resolved>Sat, 9 Oct 2021 12:03:25 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.13.3</fixVersion>
                    <fixVersion>1.14.3</fixVersion>
                    <fixVersion>1.15.0</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17360522" author="lzljs3620320" created="Thu, 10 Jun 2021 03:37:28 +0000"  >&lt;p&gt;What is the&#160;kafkaTableSource? Can you show the DDL?&lt;/p&gt;</comment>
                            <comment id="17360563" author="jark" created="Thu, 10 Jun 2021 05:38:33 +0000"  >&lt;p&gt;Currently, this behavior is as expected. Becuase if the UDTF is a constant, the query will be optimized into two-input &lt;tt&gt;StreamExecJoin&lt;/tt&gt; instead of &lt;tt&gt;StreamExecCorrelate&lt;/tt&gt;. &lt;tt&gt;StreamExecJoin&lt;/tt&gt; with LEFT_JOIN will generate updating result, that&apos;s why the query is failed. &lt;/p&gt;

&lt;p&gt;I think maybe we shouldn&apos;t apply &lt;tt&gt;StreamPhysicalConstantTableFunctionScanRule&lt;/tt&gt; when outer joins, because it will change ChangelogMode semantic. What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfreyhe&quot; class=&quot;user-hover&quot; rel=&quot;godfreyhe&quot;&gt;godfreyhe&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17360591" author="godfreyhe" created="Thu, 10 Jun 2021 06:33:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; If we do not apply StreamPhysicalConstantTableFunctionScanRule, we can not get physical plan because there is no physical implementation of FlinkLogicalTableFunctionScan. Or we should optimize the above query into StreamExecCorrelate&lt;/p&gt;</comment>
                            <comment id="17360602" author="jark" created="Thu, 10 Jun 2021 06:51:50 +0000"  >&lt;p&gt;Another way can be refactoring the join operator to build the right side first before processing left side. However, this depends on whether &lt;tt&gt;InputSelectable&lt;/tt&gt; and &lt;tt&gt;BoundedMultiInput&lt;/tt&gt; can work on streaming operators. &lt;/p&gt;</comment>
                            <comment id="17365238" author="wenlong.lwl" created="Fri, 18 Jun 2021 04:37:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfreyhe&quot; class=&quot;user-hover&quot; rel=&quot;godfreyhe&quot;&gt;godfreyhe&lt;/a&gt;, I think ConstantTableFunctionScanRule is not the right way to  process the ConstantTableFunction, when the function is not deterministic, the function should be called by every record,  How about adding a new rule to convert LogicalJoin(XX, TableFunctionScan) to LogicalCorrelate(XXX, TableFunctionScan) ?&lt;/p&gt;</comment>
                            <comment id="17365276" author="godfreyhe" created="Fri, 18 Jun 2021 06:52:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wenlong.lwl&quot; class=&quot;user-hover&quot; rel=&quot;wenlong.lwl&quot;&gt;wenlong.lwl&lt;/a&gt; Currently, ConstantTableFunctionScanRule works only when the function is deterministic. See &lt;tt&gt;RexUtil.isConstant&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17365301" author="wenlong.lwl" created="Fri, 18 Jun 2021 07:57:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfreyhe&quot; class=&quot;user-hover&quot; rel=&quot;godfreyhe&quot;&gt;godfreyhe&lt;/a&gt;  thanks for correct me, you are right. so when the function is not deterministic, it is still not supported now?  I have tried to add the rewrite rule, with this pr planner can work well on join constant table function: &lt;a href=&quot;https://github.com/apache/flink/pull/16192&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/16192&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am thinking about that maybe we should remove the limitation of RexUtil.isConstant on ConstantTableFunctionScanRule, because ConstantTableFunctionScanRule only works on: select * from lateral table(XXX), in this case it is ok to support non-deterministic function. what do you think&lt;/p&gt;</comment>
                            <comment id="17371029" author="godfreyhe" created="Tue, 29 Jun 2021 03:55:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wenlong.lwl&quot; class=&quot;user-hover&quot; rel=&quot;wenlong.lwl&quot;&gt;wenlong.lwl&lt;/a&gt; I think we should also make sure there is not input reference in the RexCall of TableFunctionScan (do not care about whether the function is deterministic).&lt;/p&gt;</comment>
                            <comment id="17398967" author="flink-jira-bot" created="Fri, 13 Aug 2021 22:37:35 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issue is assigned but has not received an update in 30 days, so it has been labeled &quot;stale-assigned&quot;.&lt;br/&gt;
If you are still working on the issue, please remove the label and add a comment updating the community on your progress.  If this issue is waiting on feedback, please consider this a reminder to the committer/reviewer. Flink is a very active project, and so we appreciate your patience.&lt;br/&gt;
If you are no longer working on the issue, please unassign yourself so someone else may work on it.&lt;/p&gt;</comment>
                            <comment id="17426574" author="godfreyhe" created="Sat, 9 Oct 2021 12:03:25 +0000"  >&lt;p&gt;Fixed in 1.15.0: f83e60387a17bd927004891fe6dcc35dfddf0488&lt;br/&gt;
Fixed in 1.14.1: 91cb0005dea33a96d445ff9ea08fa7668fd5513f&lt;br/&gt;
Fixed in 1.13.3: 4250543ab483ccc6f8fb0f16788dece42ce6a4d0&lt;/p&gt;</comment>
                            <comment id="17435312" author="hehuiyuan" created="Thu, 28 Oct 2021 10:27:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;, why inner join is not&#160; changelogMode semantic ,&#160; left\right&#160; join is changelogMode semantic?&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; join: StreamExecJoin =&amp;gt;
  &lt;span class=&quot;code-comment&quot;&gt;// join support all changes in input
&lt;/span&gt;  val children = visitChildren(rel, ModifyKindSetTrait.ALL_CHANGES)
  val leftKindSet = getModifyKindSet(children.head)
  val rightKindSet = getModifyKindSet(children.last)
  val innerOrSemi = join.flinkJoinType == FlinkJoinType.INNER ||
      join.flinkJoinType == FlinkJoinType.SEMI
  val providedTrait = &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (innerOrSemi) {
    &lt;span class=&quot;code-comment&quot;&gt;// forward left and right modify operations
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ModifyKindSetTrait(leftKindSet.union(rightKindSet))
  } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
    &lt;span class=&quot;code-comment&quot;&gt;// otherwise, it may produce any kinds of changes
&lt;/span&gt;    ModifyKindSetTrait.ALL_CHANGES
  }
  createNewNode(join, children, providedTrait, requiredTrait, requester)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rtp4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>