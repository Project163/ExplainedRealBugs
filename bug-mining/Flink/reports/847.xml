<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:22:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3410] setting setNumberOfExecutionRetries to 0 still leads to RESTARTs.</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3410</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;While testing the RC0 for 1.0.0 I found the following issue:&lt;/p&gt;

&lt;p&gt;Setting the number of retries to 0 still leads to the job being restarted:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; StreamExecutionEnvironment see = StreamExecutionEnvironment.getExecutionEnvironment();
see.setNumberOfExecutionRetries(0);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;21:19:50,677 INFO  org.apache.flink.runtime.jobmanager.JobManager                - Status of job 0e78d0825da485167aabee7e63c8e913 (Data Generator) changed to RESTARTING.
21:19:50,678 INFO  org.apache.flink.runtime.executiongraph.restart.FixedDelayRestartStrategy  - Delaying retry of job execution &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 10000 ms ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While looking through the code, it seems that the execution config is returning &lt;tt&gt;null&lt;/tt&gt; when the number of retries is set to 0. With &lt;tt&gt;null&lt;/tt&gt; the jobManager picks the default restart strategy.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12939360">FLINK-3410</key>
            <summary>setting setNumberOfExecutionRetries to 0 still leads to RESTARTs.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Feb 2016 20:25:44 +0000</created>
                <updated>Thu, 28 Feb 2019 14:01:21 +0000</updated>
                            <resolved>Tue, 23 Feb 2016 14:23:43 +0000</resolved>
                                    <version>1.0.0</version>
                                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15148664" author="githubbot" created="Tue, 16 Feb 2016 14:34:34 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1643&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1643&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3410&quot; title=&quot;setting setNumberOfExecutionRetries to 0 still leads to RESTARTs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3410&quot;&gt;&lt;del&gt;FLINK-3410&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;restart&amp;#93;&lt;/span&gt; Choose NoRestart strategy if the number of retries is set to 0&lt;/p&gt;

&lt;p&gt;    This fixes the problem that when checkpointing is enabled and the number of execution retries is set to `0` that the automatic restarting should be deactivated. This is consistent with the semantics before the restart strategies where introduced.&lt;/p&gt;

&lt;p&gt;    Be aware, though, that whenever you enable checkpointing for streaming jobs, the cluster wide default restart strategy which is set in the configuration will always be overwritten. Either by manually setting a restart strategy or by automatically setting a `FixedDelayRestartStrategy(Integer.MAX_VALUE, 10000)` strategy in the `StreamingJobGraphGenerator` if nothing was specified. That is consistent with the previous behaviour where all default execution retry attempts set in the configuration where overwritten in case of a checkpointed streaming job.&lt;/p&gt;

&lt;p&gt;    Additionally, this PR sets the default retry delay to 10000 ms and disallows to set it to negative values. Before, the default execution retry delay would have been used if the delay in the `ExecutionConfig` was set to `-1`. However, with the new `RestartStrategies` there is no longer the possibility to set an explicit execution retry delay independent of the number of retries in the configuration file. Therefore it is no longer possible to set the number of execution retries in the configuration file and to specify the execution retry delay in the `ExecutionConfig` or vice versa. Both have to be defined either in the `ExecutionConfig` or the configuration file.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixRestartStrategy&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1643.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1643.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1643&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 36ef22bc3d5491c67165a3ee1d4e08663723260b&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-02-16T00:15:39Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3410&quot; title=&quot;setting setNumberOfExecutionRetries to 0 still leads to RESTARTs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3410&quot;&gt;&lt;del&gt;FLINK-3410&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;restart&amp;#93;&lt;/span&gt; Choose NoRestart strategy if the number of retries is set to 0&lt;/p&gt;

&lt;p&gt;    Add test case&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15148703" author="githubbot" created="Tue, 16 Feb 2016 14:52:57 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1643#discussion_r53020089&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1643#discussion_r53020089&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/ExecutionConfig.java &amp;#8212;&lt;br/&gt;
    @@ -354,9 +358,9 @@ public ExecutionConfig setNumberOfExecutionRetries(int numberOfExecutionRetries)&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Deprecated&lt;br/&gt;
     	public ExecutionConfig setExecutionRetryDelay(long executionRetryDelay) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (executionRetryDelay &amp;lt; -1 ) {&lt;br/&gt;
    +		if (executionRetryDelay &amp;lt; 0 ) {&lt;br/&gt;
     			throw new IllegalArgumentException(&lt;/li&gt;
	&lt;li&gt;&quot;The delay between reties must be non-negative, or -1 (use system default)&quot;);&lt;br/&gt;
    +				&quot;The delay between reties must be non-negative.&quot;);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    we can fix this type while we&apos;re at it: reties:retries&lt;/p&gt;</comment>
                            <comment id="15148768" author="githubbot" created="Tue, 16 Feb 2016 15:06:52 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1643#discussion_r53022123&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1643#discussion_r53022123&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/ExecutionConfig.java &amp;#8212;&lt;br/&gt;
    @@ -354,9 +358,9 @@ public ExecutionConfig setNumberOfExecutionRetries(int numberOfExecutionRetries)&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Deprecated&lt;br/&gt;
     	public ExecutionConfig setExecutionRetryDelay(long executionRetryDelay) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (executionRetryDelay &amp;lt; -1 ) {&lt;br/&gt;
    +		if (executionRetryDelay &amp;lt; 0 ) {&lt;br/&gt;
     			throw new IllegalArgumentException(&lt;/li&gt;
	&lt;li&gt;&quot;The delay between reties must be non-negative, or -1 (use system default)&quot;);&lt;br/&gt;
    +				&quot;The delay between reties must be non-negative.&quot;);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Good catch. Overlooked the typo. Will fix it.&lt;/p&gt;</comment>
                            <comment id="15158569" author="githubbot" created="Tue, 23 Feb 2016 08:51:24 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1643#issuecomment-187605065&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1643#issuecomment-187605065&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @zentol. Will merge it.&lt;/p&gt;</comment>
                            <comment id="15158940" author="githubbot" created="Tue, 23 Feb 2016 14:22:19 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1643&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1643&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15158947" author="till.rohrmann" created="Tue, 23 Feb 2016 14:23:43 +0000"  >&lt;p&gt;Fixed via 6323ed44d6dd051b09f9de9f8fbb95495b82cad6&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sv87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>