<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:42:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15175] syntax  not supported in SQLClient for TPCDS queries</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15175</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Flink SQL&amp;gt; WITH customer_total_return AS
&amp;gt; ( SELECT
&amp;gt;     sr_customer_sk AS ctr_customer_sk,
&amp;gt;     sr_store_sk AS ctr_store_sk,
&amp;gt;     sum(sr_return_amt) AS ctr_total_return
&amp;gt;   FROM store_returns, date_dim
&amp;gt;   WHERE sr_returned_date_sk = d_date_sk AND d_year = 2000
&amp;gt;   GROUP BY sr_customer_sk, sr_store_sk)
&amp;gt; SELECT c_customer_id
&amp;gt; FROM customer_total_return ctr1, store, customer
&amp;gt; WHERE ctr1.ctr_total_return &amp;gt;
&amp;gt;   (SELECT avg(ctr_total_return) * 1.2
&amp;gt;   FROM customer_total_return ctr2
&amp;gt;   WHERE ctr1.ctr_store_sk = ctr2.ctr_store_sk)
&amp;gt;   AND s_store_sk = ctr1.ctr_store_sk
&amp;gt;   AND s_state = &lt;span class=&quot;code-quote&quot;&gt;&apos;TN&apos;&lt;/span&gt;
&amp;gt;   AND ctr1.ctr_customer_sk = c_customer_sk
&amp;gt; ORDER BY c_customer_id
&amp;gt; LIMIT 100;
[ERROR] Unknown or invalid SQL statement.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It seems that the newest branch already support all TPCDS queries, but currently the sql client parser has not supported yet.&#160;&lt;/p&gt;

&lt;p&gt;Anyone already working on this? If not I can try it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13273579">FLINK-15175</key>
            <summary>syntax  not supported in SQLClient for TPCDS queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liupengcheng">liupengcheng</assignee>
                                    <reporter username="liupengcheng">liupengcheng</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 10 Dec 2019 10:24:13 +0000</created>
                <updated>Tue, 24 Dec 2019 06:11:50 +0000</updated>
                            <resolved>Tue, 24 Dec 2019 06:11:50 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Table SQL / Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="16992490" author="ykt836" created="Tue, 10 Dec 2019 12:10:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liupengcheng&quot; class=&quot;user-hover&quot; rel=&quot;liupengcheng&quot;&gt;liupengcheng&lt;/a&gt;, thanks for reporting this. We will look into this, and my gut feeling is there maybe some disconnection between SQL CLI and Flink SQL.&lt;/p&gt;</comment>
                            <comment id="16992494" author="lzljs3620320" created="Tue, 10 Dec 2019 12:19:08 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liupengcheng&quot; class=&quot;user-hover&quot; rel=&quot;liupengcheng&quot;&gt;liupengcheng&lt;/a&gt;, thanks for reporting this ticket.&lt;/p&gt;

&lt;p&gt;Now, SQL-CLI ï¿½has bug to deal with SQL &quot;WITH tableName AS ..&quot;&#160;grammar. It only consider the string start with &apos;&apos;SELECT&quot;.&lt;/p&gt;</comment>
                            <comment id="16993155" author="liupengcheng" created="Wed, 11 Dec 2019 03:04:04 +0000"  >&lt;p&gt;Thanks for reply, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ykt836&quot; class=&quot;user-hover&quot; rel=&quot;ykt836&quot;&gt;ykt836&lt;/a&gt;&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;, Can you assign this Jira to me, I will create a pull request later.&lt;/p&gt;

&lt;p&gt;I think the fast fix is easy, we can just update the regex expression for SELECT in SQL CLI command parser, but I&apos;m a little worried that this kind of fix is not complete, there might be some sql still left unsupported.&lt;/p&gt;

&lt;p&gt;How about extending calcite core parser in flink to support DDL and more sql syntax, thus can make the parser unified, the SQL CLI just manage it&apos;s own customized command(e.g. QUIT), and passing all other sql to the planner directly.&lt;/p&gt;</comment>
                            <comment id="16993164" author="lzljs3620320" created="Wed, 11 Dec 2019 03:36:13 +0000"  >&lt;p&gt;&amp;gt;&#160;extending calcite core parser in flink to support DDL and more sql syntax&lt;/p&gt;

&lt;p&gt;We have this plan too. CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danny0405&quot; class=&quot;user-hover&quot; rel=&quot;danny0405&quot;&gt;danny0405&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16993584" author="ykt836" created="Wed, 11 Dec 2019 14:17:38 +0000"  >&lt;p&gt;The final plan would be &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-14671&quot; title=&quot;Collaborate sql parser with sql cli&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-14671&quot;&gt;&lt;del&gt;FLINK-14671&lt;/del&gt;&lt;/a&gt;, we could do a temporary fix for this version. Feel free to open a PR &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liupengcheng&quot; class=&quot;user-hover&quot; rel=&quot;liupengcheng&quot;&gt;liupengcheng&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16998876" author="liupengcheng" created="Wed, 18 Dec 2019 07:27:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ykt836&quot; class=&quot;user-hover&quot; rel=&quot;ykt836&quot;&gt;ykt836&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&#160;I&apos;ve create an tempory fix &lt;a href=&quot;https://github.com/apache/flink/pull/10619&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10619&lt;/a&gt; for this issue, Thanks!&lt;/p&gt;</comment>
                            <comment id="17002680" author="ykt836" created="Tue, 24 Dec 2019 06:11:50 +0000"  >&lt;p&gt;master:&#160;fc4927e41989be75866218c2a60aa914e1eedcd3&lt;/p&gt;

&lt;p&gt;1.10.0:&#160;3af8e1ef31aa61cf08ed910df32a1a26dd26f892&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 47 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09ijk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>