<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:31:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8013] Check of AggregateFunction merge function signature is too strict.</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8013</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The &lt;tt&gt;AggregationCodeGenerator&lt;/tt&gt; checks that a user-defined &lt;tt&gt;AggregateFunction&lt;/tt&gt; implements all required methods. However, the check for the &lt;tt&gt;merge(accumulator: ACC, its: java.lang.Iterable[ACC]): Unit&lt;/tt&gt; method is too strict and rejects valid UDAGGs. &lt;/p&gt;

&lt;p&gt;This happens for more complex accumulators such as &lt;tt&gt;Array[org.apache.flink.api.java.tuple.Tuple2[java.lang.Integer, java.lang.Float]]&lt;/tt&gt; because generic types are lost such that the check of the argument types of &lt;tt&gt;merge&lt;/tt&gt; fails.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13116725">FLINK-8013</key>
            <summary>Check of AggregateFunction merge function signature is too strict.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twalthr">Timo Walther</assignee>
                                    <reporter username="fhueske">Fabian Hueske</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Nov 2017 16:21:28 +0000</created>
                <updated>Wed, 15 Nov 2017 15:20:33 +0000</updated>
                            <resolved>Wed, 15 Nov 2017 15:20:33 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.4.0</fixVersion>
                    <fixVersion>1.5.0</fixVersion>
                                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16251316" author="githubbot" created="Tue, 14 Nov 2017 12:30:16 +0000"  >&lt;p&gt;GitHub user twalthr opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5011&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5011&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8013&quot; title=&quot;Check of AggregateFunction merge function signature is too strict.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8013&quot;&gt;&lt;del&gt;FLINK-8013&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Support aggregate functions with generic arrays&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Adds supports for aggregate functions with generic arrays and fixes other bugs.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Changes to the type extraction at several locations.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Complex aggregation function added.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): no&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: no&lt;/li&gt;
	&lt;li&gt;The serializers: no&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): no&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: no&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: no&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? no&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? not applicable&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/twalthr/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/twalthr/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8013&quot; title=&quot;Check of AggregateFunction merge function signature is too strict.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8013&quot;&gt;&lt;del&gt;FLINK-8013&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5011.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5011.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5011&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5a18f5e697ad67d1aa08873a5ba65e4eb0bad210&lt;br/&gt;
Author: twalthr &amp;lt;twalthr@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-11-14T10:06:54Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8013&quot; title=&quot;Check of AggregateFunction merge function signature is too strict.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8013&quot;&gt;&lt;del&gt;FLINK-8013&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Support aggregate functions with generic arrays&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16253328" author="githubbot" created="Wed, 15 Nov 2017 11:39:36 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5011#discussion_r151102649&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5011#discussion_r151102649&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/test/scala/org/apache/flink/table/utils/UserDefinedAggFunctions.scala &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,107 @@&lt;br/&gt;
    +package org.apache.flink.table.utils&lt;br/&gt;
    +&lt;br/&gt;
    +import org.apache.flink.table.functions.AggregateFunction&lt;br/&gt;
    +import org.apache.flink.api.java.tuple.&lt;/p&gt;
{Tuple2 =&amp;gt; JTuple2}
&lt;p&gt;    +import java.lang.&lt;/p&gt;
{Integer =&amp;gt; JInt}
&lt;p&gt;    +import java.lang.&lt;/p&gt;
{Float =&amp;gt; JFloat}
&lt;p&gt;    +import java.util&lt;br/&gt;
    +&lt;br/&gt;
    +import org.apache.flink.api.common.typeinfo.TypeInformation&lt;br/&gt;
    +import org.apache.flink.api.java.typeutils.&lt;/p&gt;
{ObjectArrayTypeInfo, TupleTypeInfo}
&lt;p&gt;    +import org.apache.flink.table.api.Types&lt;br/&gt;
    +&lt;br/&gt;
    +/**&lt;br/&gt;
    +  * User-defined aggregation function to compute the TOP 10 most visited pages.&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Adjust the comment:&lt;br/&gt;
    ```&lt;br/&gt;
    User-defined aggregation function to compute the top 10 Int IDs with the highest Float values.&lt;br/&gt;
    We use an Array[Tuple2&lt;span class=&quot;error&quot;&gt;&amp;#91;Int, Float&amp;#93;&lt;/span&gt;] as accumulator to store the top 10 entries.&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    Could also be simplified to just store the Float.&lt;/p&gt;</comment>
                            <comment id="16253329" author="githubbot" created="Wed, 15 Nov 2017 11:40:04 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5011#discussion_r151102741&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5011#discussion_r151102741&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-tests/src/test/scala/org/apache/flink/api/scala/util/CollectionDataSets.scala &amp;#8212;&lt;br/&gt;
    @@ -55,7 +55,6 @@ object CollectionDataSets {&lt;br/&gt;
         data.+=((19, 6L, &quot;Comment#13&quot;))&lt;br/&gt;
         data.+=((20, 6L, &quot;Comment#14&quot;))&lt;br/&gt;
         data.+=((21, 6L, &quot;Comment#15&quot;))&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Random.shuffle(data)
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think this should be added back.&lt;/p&gt;</comment>
                            <comment id="16253345" author="githubbot" created="Wed, 15 Nov 2017 12:11:04 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5011#discussion_r151108713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5011#discussion_r151108713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/test/scala/org/apache/flink/table/utils/UserDefinedAggFunctions.scala &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,107 @@&lt;br/&gt;
    +package org.apache.flink.table.utils&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    ASF header missing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16253488" author="githubbot" created="Wed, 15 Nov 2017 14:07:14 +0000"  >&lt;p&gt;Github user twalthr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5011#discussion_r151134570&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5011#discussion_r151134570&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-tests/src/test/scala/org/apache/flink/api/scala/util/CollectionDataSets.scala &amp;#8212;&lt;br/&gt;
    @@ -55,7 +55,6 @@ object CollectionDataSets {&lt;br/&gt;
         data.+=((19, 6L, &quot;Comment#13&quot;))&lt;br/&gt;
         data.+=((20, 6L, &quot;Comment#14&quot;))&lt;br/&gt;
         data.+=((21, 6L, &quot;Comment#15&quot;))&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Random.shuffle(data)
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    No, the result of this shuffle is discarded. `data` is not modified.&lt;/p&gt;</comment>
                            <comment id="16253490" author="githubbot" created="Wed, 15 Nov 2017 14:08:09 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5011&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5011&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merging this...&lt;/p&gt;</comment>
                            <comment id="16253595" author="githubbot" created="Wed, 15 Nov 2017 15:20:00 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5011&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5011&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16253599" author="twalthr" created="Wed, 15 Nov 2017 15:20:33 +0000"  >&lt;p&gt;Fixed in 1.5: 11218a35dc0fdd7439142a313e6628c51cffe689&lt;br/&gt;
Fixed in 1.4: 32bfc38875faa5baea0dc63d91e1273d7df7b2ef&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mi0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>