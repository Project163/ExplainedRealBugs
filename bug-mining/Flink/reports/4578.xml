<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:49:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-19377] EventTimeWindowCheckpointingITCase setup can hide problems when changing parameters</title>
                <link>https://issues.apache.org/jira/browse/FLINK-19377</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I noticed this while debugging &lt;tt&gt;EventTimeWindowCheckpointingITCase&lt;/tt&gt;. If you change &lt;tt&gt;testSlidingWindows()&lt;/tt&gt; to use a tumbling window instead of the sliding window the test should fail. Interestingly, the tests only fail when using the RocksDB backend but not for the heap-based backends.&lt;/p&gt;

&lt;p&gt;You can follow the flow by setting a breakpoint on the &lt;tt&gt;AssertionError&lt;/tt&gt; being thrown in &lt;tt&gt;ValidatingSink&lt;/tt&gt;. Somewhere in the Task innards it will be suppressed/swallowed and the test will succeed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13328956">FLINK-19377</key>
            <summary>EventTimeWindowCheckpointingITCase setup can hide problems when changing parameters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="aljoscha">Aljoscha Krettek</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Sep 2020 09:33:54 +0000</created>
                <updated>Tue, 22 Jun 2021 13:55:45 +0000</updated>
                            <resolved>Fri, 25 Sep 2020 12:26:28 +0000</resolved>
                                    <version>1.8.3</version>
                    <version>1.9.3</version>
                    <version>1.10.2</version>
                    <version>1.11.2</version>
                                    <fixVersion>1.12.0</fixVersion>
                                    <component>API / DataStream</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17200688" author="aljoscha" created="Wed, 23 Sep 2020 09:34:21 +0000"  >&lt;p&gt;I observed this behaviour as far back as Flink 1.8, then I stopped going back further.&lt;/p&gt;</comment>
                            <comment id="17200712" author="roman_khachatryan" created="Wed, 23 Sep 2020 10:19:26 +0000"  >&lt;p&gt;I see in the debugger that with memory backend the error is&#160;ignored because the task is being canceled.&lt;/p&gt;

&lt;p&gt;With RocksDb it&apos;s the same, but then the error is thrown again and this time it fails the test.&lt;/p&gt;</comment>
                            <comment id="17200738" author="pnowojski" created="Wed, 23 Sep 2020 11:10:38 +0000"  >&lt;p&gt;Yes, we are ignoring exceptions during cancelation. This is a feature, not a bug &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Have one of you checked/know what is the reason behind the cancelation? Is there something else happening and the test is broken, or is the `AssertionError` causing the task to cancel and it&apos;s being ignored because task was cancelled? &lt;/p&gt;</comment>
                            <comment id="17200820" author="arvid" created="Wed, 23 Sep 2020 13:20:00 +0000"  >&lt;p&gt;I dug into it and see it as a non-issue. Here is what happens:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;You have a failing source that fails once.&lt;/li&gt;
	&lt;li&gt;JM cancels job.&lt;/li&gt;
	&lt;li&gt;During cleanup, sink verifies and fails as well.&lt;/li&gt;
	&lt;li&gt;That failure is hidden because task is failing already.&lt;/li&gt;
	&lt;li&gt;Restart happens (restarts = 1 in strategy).&lt;/li&gt;
	&lt;li&gt;Job finishes normally.&lt;/li&gt;
	&lt;li&gt;During cleanup, sink verifies but does not fail in heap backends.&lt;/li&gt;
	&lt;li&gt;Test succeeds.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Not sure why your test succeeds in the second attempt, but that should be easy to debug.&lt;/p&gt;</comment>
                            <comment id="17200884" author="aljoscha" created="Wed, 23 Sep 2020 15:10:31 +0000"  >&lt;p&gt;Oh boy, I finally figured it out. The window size/slide etc. parameters are parameterized based on the state backend. The parameters used for the heap backend happen to also work when you use tumbling windows. That&#8217;s why you get different failure behaviour for different state backend types&#8230;&lt;/p&gt;</comment>
                            <comment id="17202105" author="aljoscha" created="Fri, 25 Sep 2020 12:26:29 +0000"  >&lt;p&gt;master: add08a6aa5905a17fce80a9b697ffed0e33dbcca&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0iu9s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>