<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:08:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-24862] The user-defined hive udaf/udtf cannot be used normally in hive dialect</title>
                <link>https://issues.apache.org/jira/browse/FLINK-24862</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When hive udaf/udtf is used, a validate exception is thrown &#65292;i&#160;added a unit test in HiveDialectITCase to reproduce this question:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testTemporaryFunctionUDAF() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-comment&quot;&gt;// create temp function
&lt;/span&gt;    tableEnv.executeSql(
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;create temporary function temp_count as &lt;span class=&quot;code-quote&quot;&gt;&apos;%s&apos;&lt;/span&gt;&quot;&lt;/span&gt;,
                    GenericUDAFCount.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName()));
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] functions = tableEnv.listUserDefinedFunctions();
    assertArrayEquals(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;temp_count&quot;&lt;/span&gt;}, functions);
    &lt;span class=&quot;code-comment&quot;&gt;// call the function
&lt;/span&gt;    tableEnv.executeSql(&lt;span class=&quot;code-quote&quot;&gt;&quot;create table src(x &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)&quot;&lt;/span&gt;);
    tableEnv.executeSql(&lt;span class=&quot;code-quote&quot;&gt;&quot;insert into src values (1),(-1)&quot;&lt;/span&gt;).await();
    assertEquals(
            &lt;span class=&quot;code-quote&quot;&gt;&quot;[+I[2]]&quot;&lt;/span&gt;,
            queryResult(tableEnv.sqlQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;select temp_count(x) from src&quot;&lt;/span&gt;)).toString());
    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; DB and the temp function can still be used
&lt;/span&gt;    tableEnv.executeSql(&lt;span class=&quot;code-quote&quot;&gt;&quot;create database db1&quot;&lt;/span&gt;);
    tableEnv.useDatabase(&lt;span class=&quot;code-quote&quot;&gt;&quot;db1&quot;&lt;/span&gt;);
    assertEquals(
            &lt;span class=&quot;code-quote&quot;&gt;&quot;[+I[2]]&quot;&lt;/span&gt;,
            queryResult(tableEnv.sqlQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;select temp_count(x) from `&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;`.src&quot;&lt;/span&gt;))
                    .toString());
    &lt;span class=&quot;code-comment&quot;&gt;// drop the function
&lt;/span&gt;    tableEnv.executeSql(&lt;span class=&quot;code-quote&quot;&gt;&quot;drop temporary function temp_count&quot;&lt;/span&gt;);
    functions = tableEnv.listUserDefinedFunctions();
    assertEquals(0, functions.length);
    tableEnv.executeSql(&lt;span class=&quot;code-quote&quot;&gt;&quot;drop temporary function &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; exists foo&quot;&lt;/span&gt;);
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13035916/13035916_image-2021-11-10-20-55-11-988.png&quot; height=&quot;282&quot; width=&quot;1363&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13411061">FLINK-24862</key>
            <summary>The user-defined hive udaf/udtf cannot be used normally in hive dialect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xiangqiao">xiangqiao</assignee>
                                    <reporter username="xiangqiao">xiangqiao</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 10 Nov 2021 12:55:47 +0000</created>
                <updated>Wed, 20 Jul 2022 16:00:15 +0000</updated>
                            <resolved>Thu, 16 Dec 2021 03:03:13 +0000</resolved>
                                    <version>1.11.0</version>
                    <version>1.12.0</version>
                    <version>1.13.0</version>
                    <version>1.14.0</version>
                                    <fixVersion>1.15.0</fixVersion>
                    <fixVersion>1.14.6</fixVersion>
                                    <component>Connectors / Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17441744" author="jark" created="Wed, 10 Nov 2021 13:37:30 +0000"  >&lt;p&gt;AFAIK, create temporary function for hive functions is not supported. You can try to remove the &quot;temporary&quot; keyword which should work. &lt;/p&gt;</comment>
                            <comment id="17442054" author="xiangqiao" created="Thu, 11 Nov 2021 02:55:35 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; ,remove the &quot;temporary&quot; keyword is to create a global function, which will be written to hive Metastore, which can not meet our needs.&lt;/p&gt;

&lt;p&gt;I have solved this problem and can work normally now. Can you review it for me? I&apos;m not sure if it will cause other problems. THX.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/pull/17761&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/17761&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17460378" author="qingru zhang" created="Thu, 16 Dec 2021 02:56:39 +0000"  >&lt;p&gt;Fixed in master: 95b8309213a5470b2e7e61771d6e90de75c71227&lt;br/&gt;
Fixed in release-1.14: b7e3eb948017e50b3d8f9f7ef3f94330bea71400&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17507306" author="hehuiyuan" created="Wed, 16 Mar 2022 02:13:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingzhang&quot; class=&quot;user-hover&quot; rel=&quot;jingzhang&quot;&gt;jingzhang&lt;/a&gt; &#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; , are there any plans to merge 1.14 ? &lt;a href=&quot;https://github.com/apache/flink/pull/19069&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/19069&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17569099" author="qingru zhang" created="Wed, 20 Jul 2022 16:00:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hehuiyuan&quot; class=&quot;user-hover&quot; rel=&quot;hehuiyuan&quot;&gt;hehuiyuan&lt;/a&gt; Thanks for patch. Merged.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13414964">FLINK-25142</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13035916" name="image-2021-11-10-20-55-11-988.png" size="172470" author="xiangqiao" created="Wed, 10 Nov 2021 12:55:13 +0000"/>
                            <attachment id="13035919" name="image-2021-11-10-21-04-32-660.png" size="256941" author="xiangqiao" created="Wed, 10 Nov 2021 13:04:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0wm2g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>