<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:27:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5928] Externalized checkpoints overwritting each other</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5928</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I noticed that PR #3346 accidentally broke externalized checkpoints by using a fixed meta data file name. We should restore the old behaviour with creating random files and double check why no test caught this.&lt;/p&gt;

&lt;p&gt;This will likely superseded by upcoming changes from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=StephanEwen&quot; class=&quot;user-hover&quot; rel=&quot;StephanEwen&quot;&gt;StephanEwen&lt;/a&gt; to use metadata streams on the JobManager.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13046620">FLINK-5928</key>
            <summary>Externalized checkpoints overwritting each other</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uce">Ufuk Celebi</assignee>
                                    <reporter username="uce">Ufuk Celebi</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Feb 2017 11:34:29 +0000</created>
                <updated>Tue, 28 Feb 2017 19:01:33 +0000</updated>
                            <resolved>Tue, 28 Feb 2017 18:37:34 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>Runtime / State Backends</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15886022" author="githubbot" created="Mon, 27 Feb 2017 16:04:02 +0000"  >&lt;p&gt;GitHub user uce opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3424&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5928&quot; title=&quot;Externalized checkpoints overwritting each other&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5928&quot;&gt;&lt;del&gt;FLINK-5928&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;checkpoints&amp;#93;&lt;/span&gt; Use custom metadata file for externalized checkpoints&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adds a checkpoint coordinator test for externalized checkpoints. This was covered only in unit tests for the involved checkpoint components like PendingCheckpoint etc. This would have caught the issue.&lt;/li&gt;
	&lt;li&gt;The fix is to not use a `_metadata` but a random `checkpoint_metadata-:randomSuffix` file for externalized checkpoints, because they are not unique per configured directory. Hopefully, we can get rid of this soon with @StephanEwen&apos;s refactorings.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This is based on top of #3411, which is already good to merge.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/uce/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/uce/flink&lt;/a&gt; 5928-ext_chk_metadata&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3424.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3424.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3424&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a3d2405f690e08d3de4f641428887ab04ba2ca2d&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-02-17T16:51:00Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5822&quot; title=&quot;Make Checkpoint Coordinator aware of State Backend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5822&quot;&gt;&lt;del&gt;FLINK-5822&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;state backends&amp;#93;&lt;/span&gt; Make JobManager / Checkpoint Coordinator aware of the root state backend&lt;/p&gt;

&lt;p&gt;commit b2f3bc41bc991e8deb22fb89822f28c75d94c8f7&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-02-22T21:18:50Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5897&quot; title=&quot;Untie Checkpoint Externalization from FileSystems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5897&quot;&gt;&lt;del&gt;FLINK-5897&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;checkpoints&amp;#93;&lt;/span&gt; Make checkpoint externalization not depend strictly on FileSystems&lt;/p&gt;

&lt;p&gt;    That is the first step towards checkpoints that can be externalized to other stores as well,&lt;br/&gt;
    like k/v stores and databases, if supported by the state backend.&lt;/p&gt;

&lt;p&gt;commit 537be203dab0614383645e859bbafb6ebfeb3161&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-02-27T15:12:37Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5928&quot; title=&quot;Externalized checkpoints overwritting each other&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5928&quot;&gt;&lt;del&gt;FLINK-5928&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;checkpoints&amp;#93;&lt;/span&gt; Add CheckpointCoordinatorExternalizedCheckpointsTest&lt;/p&gt;

&lt;p&gt;    Problem: there were only unit tests for the checkpoint instances available&lt;br/&gt;
    that don&apos;t test the behaviour of the checkpoint coordinator with respect&lt;br/&gt;
    to externalized checkpoints.&lt;/p&gt;

&lt;p&gt;commit 88e4700cce630f8ae869abff22acfd46ab999aa0&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-02-27T15:58:14Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5928&quot; title=&quot;Externalized checkpoints overwritting each other&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5928&quot;&gt;&lt;del&gt;FLINK-5928&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;checkpoints&amp;#93;&lt;/span&gt; Use custom metadata file for externalized checkpoints&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15886521" author="githubbot" created="Mon, 27 Feb 2017 20:57:35 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3424&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks, good and critical fix!&lt;br/&gt;
    Looking at this...&lt;/p&gt;</comment>
                            <comment id="15888336" author="githubbot" created="Tue, 28 Feb 2017 16:11:17 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3424&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good, merging this...&lt;/p&gt;</comment>
                            <comment id="15888615" author="stephanewen" created="Tue, 28 Feb 2017 18:37:34 +0000"  >&lt;p&gt;Fixed via c477d87c68f2da4340c8d469e1b4331e6a660ef0&lt;/p&gt;</comment>
                            <comment id="15888673" author="githubbot" created="Tue, 28 Feb 2017 19:01:33 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3424&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ao73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>