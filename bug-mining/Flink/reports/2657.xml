<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:35:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10295] Tokenisation of Program Args resulting in unexpected results</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10295</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;We were upgrading from Flink 1.4 to 1.6. At present we have a jar which takes all the details to run the job as program args against a jarid, including sql query and kafka details. In version 1.5 the program args are tokenised as a result single quote (&apos;) and double quote(&quot;) are stripped from the arguments. This results in malformed args.&lt;/p&gt;

&lt;p&gt;Attached a sample request for reference.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183348">FLINK-10295</key>
            <summary>Tokenisation of Program Args resulting in unexpected results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="azagrebin">Andrey Zagrebin</assignee>
                                    <reporter username="grvsinghania">Gaurav Singhania</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 6 Sep 2018 09:28:46 +0000</created>
                <updated>Tue, 9 Oct 2018 14:42:34 +0000</updated>
                            <resolved>Tue, 9 Oct 2018 14:42:34 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.6.0</version>
                    <version>1.7.0</version>
                                    <fixVersion>1.7.0</fixVersion>
                                    <component>Runtime / REST</component>
                    <component>Runtime / Web Frontend</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16626106" author="githubbot" created="Mon, 24 Sep 2018 16:51:37 +0000"  >&lt;p&gt;azagrebin opened a new pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This PR add one more option to specify jar program arguments in REST API calls (run and get plan). Users can specify arguments as one string or additionally mow as a list of a separate strings.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;add JarRequestBody as a base for JarRunRequestBody and JarPlanRequestBody&lt;/li&gt;
	&lt;li&gt;add programArgsList to JarRequestBody&lt;/li&gt;
	&lt;li&gt;add JarHandlerUtils.getProgramArgs to resolve program args from programArgs and programArgsList from query path or json body in JarRunHandler or JarPlanHandler&lt;/li&gt;
	&lt;li&gt;user can use programArgs or programArgsList but not both, add test for it&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Unit tests&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (docs)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16626107" author="githubbot" created="Mon, 24 Sep 2018 16:51:56 +0000"  >&lt;p&gt;azagrebin commented on issue #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#issuecomment-424045988&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#issuecomment-424045988&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   cc @zentol&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633805" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221549560&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221549560&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarMessageParameters.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,58 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageParameters;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessagePathParameter;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageQueryParameter;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collection;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Base class of &lt;/p&gt;
{@link MessageParameters}
&lt;p&gt; for &lt;/p&gt;
{@link JarRunHandler}
&lt;p&gt; and &lt;/p&gt;
{@link JarPlanHandler}
&lt;p&gt;.&lt;br/&gt;
+ */&lt;br/&gt;
+abstract class JarMessageParameters extends MessageParameters {&lt;br/&gt;
+&lt;br/&gt;
+	final JarIdPathParameter jarIdPathParameter = new JarIdPathParameter();&lt;br/&gt;
+&lt;br/&gt;
+	final EntryClassQueryParameter entryClassQueryParameter = new EntryClassQueryParameter();&lt;br/&gt;
+&lt;br/&gt;
+	final ParallelismQueryParameter parallelismQueryParameter = new ParallelismQueryParameter();&lt;br/&gt;
+&lt;br/&gt;
+	final ProgramArgsQueryParameter programArgsQueryParameter = new ProgramArgsQueryParameter();&lt;br/&gt;
+&lt;br/&gt;
+	final ProgramArgsListQueryParameter programArgsListQueryParameter = new ProgramArgsListQueryParameter();&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	public Collection&amp;lt;MessagePathParameter&amp;lt;?&amp;gt;&amp;gt; getPathParameters() &lt;/p&gt;
{
+		return Collections.singletonList(jarIdPathParameter);
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	public Collection&amp;lt;MessageQueryParameter&amp;lt;?&amp;gt;&amp;gt; getQueryParameters() {&lt;br/&gt;
+		return new ArrayList&amp;lt;&amp;gt;(Arrays.asList(&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   This should continue to return an unmodifiable collection, otherwise all sub-classes have to wrap it again.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633806" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221549739&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221549739&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunMessageParameters.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -29,32 +28,18 @@&lt;br/&gt;
 /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;{@link MessageParameters}
&lt;p&gt; for &lt;/p&gt;
{@link JarRunHandler}
&lt;p&gt;.&lt;br/&gt;
  */&lt;br/&gt;
-public class JarRunMessageParameters extends MessageParameters {&lt;br/&gt;
+public class JarRunMessageParameters extends JarMessageParameters {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public final JarIdPathParameter jarIdPathParameter = new JarIdPathParameter();&lt;br/&gt;
+	final AllowNonRestoredStateQueryParameter allowNonRestoredStateQueryParameter = new AllowNonRestoredStateQueryParameter();&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public final ProgramArgsQueryParameter programArgsQueryParameter = new ProgramArgsQueryParameter();&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;public final EntryClassQueryParameter entryClassQueryParameter = new EntryClassQueryParameter();&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;public final ParallelismQueryParameter parallelismQueryParameter = new ParallelismQueryParameter();&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;public final AllowNonRestoredStateQueryParameter allowNonRestoredStateQueryParameter = new AllowNonRestoredStateQueryParameter();&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;public final SavepointPathQueryParameter savepointPathQueryParameter = new SavepointPathQueryParameter();&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public Collection&amp;lt;MessagePathParameter&amp;lt;?&amp;gt;&amp;gt; getPathParameters() 
{
-		return Collections.singletonList(jarIdPathParameter);
-	}
&lt;p&gt;+	final SavepointPathQueryParameter savepointPathQueryParameter = new SavepointPathQueryParameter();&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 	@Override&lt;br/&gt;
 	public Collection&amp;lt;MessageQueryParameter&amp;lt;?&amp;gt;&amp;gt; getQueryParameters() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return Collections.unmodifiableCollection(Arrays.asList(&lt;/li&gt;
	&lt;li&gt;programArgsQueryParameter,&lt;/li&gt;
	&lt;li&gt;entryClassQueryParameter,&lt;/li&gt;
	&lt;li&gt;parallelismQueryParameter,&lt;br/&gt;
+		Collection&amp;lt;MessageQueryParameter&amp;lt;?&amp;gt;&amp;gt; pars = super.getQueryParameters();&lt;br/&gt;
+		pars.addAll(Arrays.asList(&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Since you&apos;re creating a new list anyway and the total size is known, add the super parameter to that one instead.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633807" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221551267&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221551267&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/util/HandlerRequestUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -63,4 +66,26 @@&lt;br/&gt;
 		return value;&lt;br/&gt;
 	}&lt;/p&gt;

&lt;p&gt;+	/**&lt;br/&gt;
+	 * Returns &lt;/p&gt;
{@code requestValue}
&lt;p&gt; if it is not null, otherwise returns the query parameter value&lt;br/&gt;
+	 * if it is not null, otherwise returns the default value.&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static &amp;lt;T&amp;gt; T fromRequestBodyOrQueryParameter(&lt;br/&gt;
+		T requestValue,&lt;br/&gt;
+		SupplierWithException&amp;lt;T, RestHandlerException&amp;gt; queryParameterExtractor,&lt;br/&gt;
+		T defaultValue,&lt;br/&gt;
+		Logger log) throws RestHandlerException {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   indent parameters by another tab&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633808" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221550059&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221550059&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRequestBody.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,98 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.RequestBody;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonCreator;&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonIgnore;&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonInclude;&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonProperty;&lt;br/&gt;
+&lt;br/&gt;
+import javax.annotation.Nullable;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Base class for &lt;/p&gt;
{@link RequestBody}
&lt;p&gt; for running a jar or querying the plan.&lt;br/&gt;
+ */&lt;br/&gt;
+@JsonInclude(JsonInclude.Include.NON_NULL)&lt;br/&gt;
+public abstract class JarRequestBody implements RequestBody {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   can be package private?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633809" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221552259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221552259&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/utils/JarHandlerUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -26,13 +36,42 @@&lt;br/&gt;
 import java.util.regex.Matcher;&lt;br/&gt;
 import java.util.regex.Pattern;&lt;/p&gt;

&lt;p&gt;+import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.fromRequestBodyOrQueryParameter;&lt;br/&gt;
+import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.getQueryParameter;&lt;br/&gt;
+import static org.apache.flink.shaded.guava18.com.google.common.base.Strings.emptyToNull;&lt;br/&gt;
+&lt;br/&gt;
 /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Utils for jar handlers.&lt;br/&gt;
  *&lt;/li&gt;
	&lt;li&gt;@see org.apache.flink.runtime.webmonitor.handlers.JarRunHandler&lt;/li&gt;
	&lt;li&gt;@see org.apache.flink.runtime.webmonitor.handlers.JarPlanHandler&lt;br/&gt;
  */&lt;br/&gt;
 public class JarHandlerUtils {&lt;br/&gt;
+	/** Parse program arguments in jar run or plan request. */&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   add an empty line before the javadoc&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633810" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221551766&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221551766&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgsQueryParameter.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -32,6 +32,7 @@ public ProgramArgsQueryParameter() {&lt;/p&gt;

&lt;p&gt; 	@Override&lt;br/&gt;
 	public String getDescription() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return &quot;String value that specifies the arguments for the program or plan.&quot;;&lt;br/&gt;
+		return &quot;Deprecated, please, use &apos;programArgsList&apos; in a JSON request body as a JSON list. &quot; +&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Revert this please. You&apos;re baking in the assumption that the `ProgramArgsQueryParameter` is always used in conjunction with a `JarRequestBody` or similar.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633811" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221548569&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221548569&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandler.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -80,13 +79,13 @@ public JarPlanHandler(&lt;/p&gt;

&lt;p&gt; 	@Override&lt;br/&gt;
 	protected CompletableFuture&amp;lt;JobPlanInfo&amp;gt; handleRequest(&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@Nonnull final HandlerRequest&amp;lt;EmptyRequestBody, JarPlanMessageParameters&amp;gt; request,&lt;br/&gt;
+			@Nonnull final HandlerRequest&amp;lt;JarPlanRequestBody, JarPlanMessageParameters&amp;gt; request,&lt;br/&gt;
 			@Nonnull final RestfulGateway gateway) throws RestHandlerException {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		final String jarId = request.getPathParameter(JarIdPathParameter.class);&lt;br/&gt;
 		final String entryClass = emptyToNull(HandlerRequestUtils.getQueryParameter(request, EntryClassQueryParameter.class));&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Since the `JarPlanRequestBody` also contains this field (and is documented to accept it!) we should either&lt;br/&gt;
   a) reduce the `JarPlanRequestBody` to only contain the program arguments&lt;br/&gt;
   b) change this handler to also use `fromRequestBodyOrQueryParameter`&lt;br/&gt;
   c) exclude this handler from this change for now and handle it in a follow-up.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633812" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221552131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221552131&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgsListQueryParameter.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,39 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageParameter;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.File;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Query parameter specifying the arguments list for the program.&lt;br/&gt;
+ * @see org.apache.flink.client.program.PackagedProgram#PackagedProgram(File, String, String...)&lt;br/&gt;
+ */&lt;br/&gt;
+public class ProgramArgsListQueryParameter extends StringQueryParameter {&lt;br/&gt;
+	public ProgramArgsListQueryParameter() &lt;/p&gt;
{
+		super(&quot;program-args-list&quot;, MessageParameter.MessageParameterRequisiteness.OPTIONAL);
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	public String getDescription() {&lt;br/&gt;
+		return &quot;List of string values that specify the arguments for the program or plan. &quot; +&lt;br/&gt;
+			&quot;It is recommended to specify it in a JSON request body as a JSON list parameter &apos;programArgsList&apos;.&quot;;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Please remove this recommendation. You&apos;re baking in the assumption that the `ProgramArgsListQueryParameter ` is always used in conjunction with a `JarRequestBody` or similar.&lt;/p&gt;

&lt;p&gt;   Deprecation notices for parameters belong into the respective `MessageHeader` description.&lt;br/&gt;
   User already receive a warning when using query parameters during the job submission.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633813" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221553008&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221553008&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/utils/JarHandlerUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -26,13 +36,42 @@&lt;br/&gt;
 import java.util.regex.Matcher;&lt;br/&gt;
 import java.util.regex.Pattern;&lt;/p&gt;

&lt;p&gt;+import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.fromRequestBodyOrQueryParameter;&lt;br/&gt;
+import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.getQueryParameter;&lt;br/&gt;
+import static org.apache.flink.shaded.guava18.com.google.common.base.Strings.emptyToNull;&lt;br/&gt;
+&lt;br/&gt;
 /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Utils for jar handlers.&lt;br/&gt;
  *&lt;/li&gt;
	&lt;li&gt;@see org.apache.flink.runtime.webmonitor.handlers.JarRunHandler&lt;/li&gt;
	&lt;li&gt;@see org.apache.flink.runtime.webmonitor.handlers.JarPlanHandler&lt;br/&gt;
  */&lt;br/&gt;
 public class JarHandlerUtils {&lt;br/&gt;
+	/** Parse program arguments in jar run or plan request. */&lt;br/&gt;
+	public static &amp;lt;R extends JarRequestBody, M extends MessageParameters&amp;gt; List&amp;lt;String&amp;gt; getProgramArgs(&lt;br/&gt;
+		HandlerRequest&amp;lt;R , M&amp;gt; request, Logger log) throws RestHandlerException {&lt;br/&gt;
+		JarRequestBody requestBody = request.getRequestBody();&lt;br/&gt;
+		List&amp;lt;String&amp;gt; programArgs = tokenizeArguments(&lt;br/&gt;
+			fromRequestBodyOrQueryParameter(&lt;br/&gt;
+				emptyToNull(requestBody.getProgramArguments()),&lt;br/&gt;
+				() -&amp;gt; getQueryParameter(request, ProgramArgsQueryParameter.class),&lt;br/&gt;
+				null,&lt;br/&gt;
+				log));&lt;br/&gt;
+		List&amp;lt;String&amp;gt; programArgsList = fromRequestBodyOrQueryParameter(&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   truly a minor thing, but might I suggest to move `fromRequestBodyOrQueryParameter(` to the next line so the indentation of this part is identical to the above?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633814" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221551094&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221551094&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunRequestBodyTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -33,10 +35,11 @@&lt;br/&gt;
 	}&lt;/p&gt;

&lt;p&gt; 	@Override&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;protected JarRunRequestBody getTestRequestInstance() throws Exception {&lt;br/&gt;
+	protected JarRunRequestBody getTestRequestInstance() {&lt;br/&gt;
 		return new JarRunRequestBody(&lt;br/&gt;
 			&quot;hello&quot;,&lt;br/&gt;
 			&quot;world&quot;,&lt;br/&gt;
+			Arrays.asList(&quot;foo&quot;, &quot;bar&quot;),&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   please use 2 words that are not present in the existing argument. `foo` and `bar` are already use as the savepointPath.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633815" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221550646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221550646&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/utils/JarHandlerUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -26,13 +36,42 @@&lt;br/&gt;
 import java.util.regex.Matcher;&lt;br/&gt;
 import java.util.regex.Pattern;&lt;/p&gt;

&lt;p&gt;+import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.fromRequestBodyOrQueryParameter;&lt;br/&gt;
+import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.getQueryParameter;&lt;br/&gt;
+import static org.apache.flink.shaded.guava18.com.google.common.base.Strings.emptyToNull;&lt;br/&gt;
+&lt;br/&gt;
 /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Utils for jar handlers.&lt;br/&gt;
  *&lt;/li&gt;
	&lt;li&gt;@see org.apache.flink.runtime.webmonitor.handlers.JarRunHandler&lt;/li&gt;
	&lt;li&gt;@see org.apache.flink.runtime.webmonitor.handlers.JarPlanHandler&lt;br/&gt;
  */&lt;br/&gt;
 public class JarHandlerUtils {&lt;br/&gt;
+	/** Parse program arguments in jar run or plan request. */&lt;br/&gt;
+	public static &amp;lt;R extends JarRequestBody, M extends MessageParameters&amp;gt; List&amp;lt;String&amp;gt; getProgramArgs(&lt;br/&gt;
+		HandlerRequest&amp;lt;R , M&amp;gt; request, Logger log) throws RestHandlerException {&lt;br/&gt;
+		JarRequestBody requestBody = request.getRequestBody();&lt;br/&gt;
+		List&amp;lt;String&amp;gt; programArgs = tokenizeArguments(&lt;br/&gt;
+			fromRequestBodyOrQueryParameter(&lt;br/&gt;
+				emptyToNull(requestBody.getProgramArguments()),&lt;br/&gt;
+				() -&amp;gt; getQueryParameter(request, ProgramArgsQueryParameter.class),&lt;br/&gt;
+				null,&lt;br/&gt;
+				log));&lt;br/&gt;
+		List&amp;lt;String&amp;gt; programArgsList = fromRequestBodyOrQueryParameter(&lt;br/&gt;
+			requestBody.getProgramArgumentsList(),&lt;br/&gt;
+			() -&amp;gt; request.getQueryParameter(ProgramArgsListQueryParameter.class),&lt;br/&gt;
+			null,&lt;br/&gt;
+			log);&lt;br/&gt;
+		if (requestBody.getProgramArgumentsList() != null) {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   compare against `programArgsList` instead?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633816" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221553160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221553160&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandlerParameterTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -190,7 +195,8 @@ public void testConfigurationViaJsonRequest() throws Exception {&lt;br/&gt;
 			() -&amp;gt; {&lt;br/&gt;
 				final JarRunRequestBody jsonRequest = new JarRunRequestBody(&lt;br/&gt;
 					ParameterProgram.class.getCanonicalName(),&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;--host localhost --port 1234&quot;,&lt;br/&gt;
+					null,&lt;br/&gt;
+					Arrays.asList(&quot;-&lt;del&gt;host&quot;, &quot;localhost&quot;, &quot;&lt;/del&gt;-port&quot;, &quot;1234&quot;),&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   this test should be duplicated instead to cover both cases.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633817" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221555894&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221555894&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/utils/JarHandlerUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -26,13 +36,42 @@&lt;br/&gt;
 import java.util.regex.Matcher;&lt;br/&gt;
 import java.util.regex.Pattern;&lt;/p&gt;

&lt;p&gt;+import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.fromRequestBodyOrQueryParameter;&lt;br/&gt;
+import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.getQueryParameter;&lt;br/&gt;
+import static org.apache.flink.shaded.guava18.com.google.common.base.Strings.emptyToNull;&lt;br/&gt;
+&lt;br/&gt;
 /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Utils for jar handlers.&lt;br/&gt;
  *&lt;/li&gt;
	&lt;li&gt;@see org.apache.flink.runtime.webmonitor.handlers.JarRunHandler&lt;/li&gt;
	&lt;li&gt;@see org.apache.flink.runtime.webmonitor.handlers.JarPlanHandler&lt;br/&gt;
  */&lt;br/&gt;
 public class JarHandlerUtils {&lt;br/&gt;
+	/** Parse program arguments in jar run or plan request. */&lt;br/&gt;
+	public static &amp;lt;R extends JarRequestBody, M extends MessageParameters&amp;gt; List&amp;lt;String&amp;gt; getProgramArgs(&lt;br/&gt;
+		HandlerRequest&amp;lt;R , M&amp;gt; request, Logger log) throws RestHandlerException {&lt;br/&gt;
+		JarRequestBody requestBody = request.getRequestBody();&lt;br/&gt;
+		List&amp;lt;String&amp;gt; programArgs = tokenizeArguments(&lt;br/&gt;
+			fromRequestBodyOrQueryParameter(&lt;br/&gt;
+				emptyToNull(requestBody.getProgramArguments()),&lt;br/&gt;
+				() -&amp;gt; getQueryParameter(request, ProgramArgsQueryParameter.class),&lt;br/&gt;
+				null,&lt;br/&gt;
+				log));&lt;br/&gt;
+		List&amp;lt;String&amp;gt; programArgsList = fromRequestBodyOrQueryParameter(&lt;br/&gt;
+			requestBody.getProgramArgumentsList(),&lt;br/&gt;
+			() -&amp;gt; request.getQueryParameter(ProgramArgsListQueryParameter.class),&lt;br/&gt;
+			null,&lt;br/&gt;
+			log);&lt;br/&gt;
+		if (requestBody.getProgramArgumentsList() != null) {&lt;br/&gt;
+			if (!programArgs.isEmpty()) {&lt;br/&gt;
+				throw new IllegalArgumentException(&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   neither handler is handling this exception, so the user will get an INTERNAL_SERVER_ERROR instead of BAD_REQUEST.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633818" author="githubbot" created="Mon, 1 Oct 2018 10:08:56 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221555549&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221555549&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandlerParameterTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -219,15 +225,40 @@ public void testConfigurationViaJsonRequest() throws Exception {&lt;br/&gt;
 	}&lt;/p&gt;

&lt;p&gt; 	@Test&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void testParameterPrioritization() throws Exception {&lt;br/&gt;
+	public void testParameterPrioritizationWithProgArgsAsString() throws Exception 
{
+		testParameterPrioritization(PROG_ARGS, null);
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testParameterPrioritizationWithProgArgsAsList() throws Exception &lt;/p&gt;
{
+		testParameterPrioritization(null, PROG_ARGS);
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testFailIfProgArgsAreAsStringAndAsList() throws Exception &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+		try {
+			testParameterPrioritization(PROG_ARGS, PROG_ARGS);
+			fail(&quot;IllegalArgumentException is excepted&quot;);
+		} catch (IllegalArgumentException e) {
+			// expected
+		}+	}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+&lt;br/&gt;
+	private void testParameterPrioritization(List&amp;lt;String&amp;gt; programArgs, List&amp;lt;String&amp;gt; programArgsList) throws Exception {&lt;br/&gt;
+		List&amp;lt;String&amp;gt; args = programArgs == null ? programArgsList : programArgs;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   This code is way to confusing. It strikes me as very odd that `args` is never null, and the naming scheme is weird (args should be &quot;argsList&quot;, &quot;argsStr&quot; should be &quot;args&quot; to be somewhat consistent with the method arguments).&lt;/p&gt;

&lt;p&gt;   I would pass in a single collection as arguments and a simple enum for how arguments should be passed.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634153" author="githubbot" created="Mon, 1 Oct 2018 14:58:37 +0000"  >&lt;p&gt;azagrebin commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221641820&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221641820&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRequestBody.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,98 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.RequestBody;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonCreator;&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonIgnore;&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonInclude;&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonProperty;&lt;br/&gt;
+&lt;br/&gt;
+import javax.annotation.Nullable;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Base class for &lt;/p&gt;
{@link RequestBody}
&lt;p&gt; for running a jar or querying the plan.&lt;br/&gt;
+ */&lt;br/&gt;
+@JsonInclude(JsonInclude.Include.NON_NULL)&lt;br/&gt;
+public abstract class JarRequestBody implements RequestBody {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   constructor and `getEntryClassName`, the class is used in `JarHandlerUtils.getProgramArgs` to resolve program args&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16635230" author="githubbot" created="Tue, 2 Oct 2018 09:54:06 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221888363&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221888363&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgsQueryParameter.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -32,6 +32,7 @@ public ProgramArgsQueryParameter() {&lt;/p&gt;

&lt;p&gt; 	@Override&lt;br/&gt;
 	public String getDescription() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return &quot;String value that specifies the arguments for the program or plan.&quot;;&lt;br/&gt;
+		return &quot;Deprecated, please, use &apos;programArgsList&apos; instead. &quot; +&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Let&apos;s also add a `@Deprecated` annotation to the class.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16635231" author="githubbot" created="Tue, 2 Oct 2018 09:54:06 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221888897&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221888897&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgsQueryParameter.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -32,6 +32,7 @@ public ProgramArgsQueryParameter() {&lt;/p&gt;

&lt;p&gt; 	@Override&lt;br/&gt;
 	public String getDescription() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return &quot;String value that specifies the arguments for the program or plan.&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Replace `programArgsList` with `JarRequestBody#FIELD_NAME_PROGRAM_ARGUMENTS_LIST`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16635232" author="githubbot" created="Tue, 2 Oct 2018 09:54:06 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221888186&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221888186&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgsListQueryParameter.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,38 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageParameter;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.File;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Query parameter specifying the arguments list for the program.&lt;br/&gt;
+ * @see org.apache.flink.client.program.PackagedProgram#PackagedProgram(File, String, String...)&lt;br/&gt;
+ */&lt;br/&gt;
+public class ProgramArgsListQueryParameter extends StringQueryParameter {&lt;br/&gt;
+	public ProgramArgsListQueryParameter() {&lt;br/&gt;
+		super(&quot;program-args-list&quot;, MessageParameter.MessageParameterRequisiteness.OPTIONAL);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Rename to `programArgsList` to adhere to the new naming scheme, and use `FIELD_NAME_PROGRAM_ARGUMENTS_LIST`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16635233" author="githubbot" created="Tue, 2 Oct 2018 09:54:06 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221887770&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221887770&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandlerParameterTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -57,17 +61,27 @@&lt;br/&gt;
 import java.util.concurrent.atomic.AtomicReference;&lt;br/&gt;
 import java.util.stream.Collectors;&lt;/p&gt;

&lt;p&gt;+import static junit.framework.TestCase.assertEquals;&lt;br/&gt;
+import static junit.framework.TestCase.fail;&lt;br/&gt;
+&lt;br/&gt;
 /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Tests for the parameter handling of the 
{@link JarRunHandler}
&lt;p&gt;.&lt;br/&gt;
  */&lt;br/&gt;
 public class JarRunHandlerParameterTest extends TestLogger {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   A similar test is required for the `JarPlanHandler`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16635234" author="githubbot" created="Tue, 2 Oct 2018 09:54:06 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r221888435&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r221888435&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgsQueryParameter.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -32,6 +32,7 @@ public ProgramArgsQueryParameter() {&lt;/p&gt;

&lt;p&gt; 	@Override&lt;br/&gt;
 	public String getDescription() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return &quot;String value that specifies the arguments for the program or plan.&quot;;&lt;br/&gt;
+		return &quot;Deprecated, please, use &apos;programArgsList&apos; instead. &quot; +&lt;br/&gt;
+			&quot;String value that specifies the arguments for the program or plan.&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Remove comma after please.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641704" author="githubbot" created="Mon, 8 Oct 2018 11:48:24 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r223330322&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r223330322&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandlerParameterTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,117 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.configuration.Configuration;&lt;br/&gt;
+import org.apache.flink.runtime.jobgraph.jsonplan.JsonPlanGenerator;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.JobPlanInfo;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.testutils.ParameterProgram;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.BeforeClass;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.stream.Collectors;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Tests for the parameter handling of the &lt;/p&gt;
{@link JarPlanHandler}
&lt;p&gt;.&lt;br/&gt;
+ */&lt;br/&gt;
+public class JarPlanHandlerParameterTest extends JarHandlerParameterTest&amp;lt;JarPlanRequestBody, JarPlanMessageParameters&amp;gt; {&lt;br/&gt;
+	private static JarPlanHandler handler;&lt;br/&gt;
+&lt;br/&gt;
+	@BeforeClass&lt;br/&gt;
+	public static void setup() throws Exception {&lt;br/&gt;
+		init();&lt;br/&gt;
+		handler = new JarPlanHandler(&lt;br/&gt;
+			localAddressFuture,&lt;br/&gt;
+			gatewayRetriever,&lt;br/&gt;
+			timeout,&lt;br/&gt;
+			responseHeaders,&lt;br/&gt;
+			JarPlanHeaders.getInstance(),&lt;br/&gt;
+			jarDir,&lt;br/&gt;
+			new Configuration(),&lt;br/&gt;
+			executor,&lt;br/&gt;
+			jobGraph -&amp;gt; {&lt;br/&gt;
+				LAST_SUBMITTED_JOB_GRAPH_REFERENCE.set(jobGraph);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   why is this necessary? Which case does this cover that the `submitFunction` of the `TestingDispatcherGateway` doesn&apos;t?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641705" author="githubbot" created="Mon, 8 Oct 2018 11:48:24 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r223329522&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r223329522&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandlerParameterTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -118,197 +68,87 @@ public static void setup() throws Exception &lt;/p&gt;
{
 			executor);
 	}

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@Before&lt;/li&gt;
	&lt;li&gt;public void reset() {&lt;/li&gt;
	&lt;li&gt;ParameterProgram.actualArguments = null;&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarRunMessageParameters getUnresolvedJarMessageParameters() {&lt;br/&gt;
+		return JarRunHeaders.getInstance().getUnresolvedMessageParameters();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   use `handler.getMessageHeaders().getUnresolvedMessageParameters()` instead&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641706" author="githubbot" created="Mon, 8 Oct 2018 11:48:24 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r223332302&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r223332302&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarHandlerParameterTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,300 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.api.common.ExecutionConfig;&lt;br/&gt;
+import org.apache.flink.api.common.time.Time;&lt;br/&gt;
+import org.apache.flink.runtime.jobgraph.JobGraph;&lt;br/&gt;
+import org.apache.flink.runtime.messages.Acknowledge;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequestException;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.RestHandlerException;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageParameter;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageQueryParameter;&lt;br/&gt;
+import org.apache.flink.runtime.testingUtils.TestingUtils;&lt;br/&gt;
+import org.apache.flink.runtime.util.BlobServerResource;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.TestingDispatcherGateway;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.retriever.GatewayRetriever;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.testutils.ParameterProgram;&lt;br/&gt;
+import org.apache.flink.util.TestLogger;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.shaded.netty4.io.netty.handler.codec.http.HttpResponseStatus;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.Assert;&lt;br/&gt;
+import org.junit.Before;&lt;br/&gt;
+import org.junit.ClassRule;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+import org.junit.rules.TemporaryFolder;&lt;br/&gt;
+&lt;br/&gt;
+import java.nio.file.Files;&lt;br/&gt;
+import java.nio.file.Path;&lt;br/&gt;
+import java.nio.file.Paths;&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.concurrent.CompletableFuture;&lt;br/&gt;
+import java.util.concurrent.Executor;&lt;br/&gt;
+import java.util.concurrent.atomic.AtomicReference;&lt;br/&gt;
+import java.util.stream.Collectors;&lt;br/&gt;
+&lt;br/&gt;
+import static junit.framework.TestCase.assertEquals;&lt;br/&gt;
+import static junit.framework.TestCase.fail;&lt;br/&gt;
+&lt;br/&gt;
+/** Base test class for jar request handlers. */&lt;br/&gt;
+public abstract class JarHandlerParameterTest&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   package-private?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641707" author="githubbot" created="Mon, 8 Oct 2018 11:48:25 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r223328469&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r223328469&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarHandlerParameterTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,300 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.api.common.ExecutionConfig;&lt;br/&gt;
+import org.apache.flink.api.common.time.Time;&lt;br/&gt;
+import org.apache.flink.runtime.jobgraph.JobGraph;&lt;br/&gt;
+import org.apache.flink.runtime.messages.Acknowledge;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequestException;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.RestHandlerException;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageParameter;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageQueryParameter;&lt;br/&gt;
+import org.apache.flink.runtime.testingUtils.TestingUtils;&lt;br/&gt;
+import org.apache.flink.runtime.util.BlobServerResource;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.TestingDispatcherGateway;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.retriever.GatewayRetriever;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.testutils.ParameterProgram;&lt;br/&gt;
+import org.apache.flink.util.TestLogger;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.shaded.netty4.io.netty.handler.codec.http.HttpResponseStatus;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.Assert;&lt;br/&gt;
+import org.junit.Before;&lt;br/&gt;
+import org.junit.ClassRule;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+import org.junit.rules.TemporaryFolder;&lt;br/&gt;
+&lt;br/&gt;
+import java.nio.file.Files;&lt;br/&gt;
+import java.nio.file.Path;&lt;br/&gt;
+import java.nio.file.Paths;&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.concurrent.CompletableFuture;&lt;br/&gt;
+import java.util.concurrent.Executor;&lt;br/&gt;
+import java.util.concurrent.atomic.AtomicReference;&lt;br/&gt;
+import java.util.stream.Collectors;&lt;br/&gt;
+&lt;br/&gt;
+import static junit.framework.TestCase.assertEquals;&lt;br/&gt;
+import static junit.framework.TestCase.fail;&lt;br/&gt;
+&lt;br/&gt;
+/** Base test class for jar request handlers. */&lt;br/&gt;
+public abstract class JarHandlerParameterTest&lt;br/&gt;
+	&amp;lt;REQB extends JarRequestBody, M extends JarMessageParameters&amp;gt; extends TestLogger {&lt;br/&gt;
+	enum ProgramArgsParType &lt;/p&gt;
{
+		String,
+		List,
+		Both
+	}
&lt;p&gt;+&lt;br/&gt;
+	static final String[] PROG_ARGS = new String[] &lt;/p&gt;
{&quot;--host&quot;, &quot;localhost&quot;, &quot;--port&quot;, &quot;1234&quot;}
&lt;p&gt;;&lt;br/&gt;
+	static final int PARALLELISM = 4;&lt;br/&gt;
+&lt;br/&gt;
+	@ClassRule&lt;br/&gt;
+	public static final TemporaryFolder TMP = new TemporaryFolder();&lt;br/&gt;
+&lt;br/&gt;
+	@ClassRule&lt;br/&gt;
+	public static final BlobServerResource BLOB_SERVER_RESOURCE = new BlobServerResource();&lt;br/&gt;
+&lt;br/&gt;
+	static final AtomicReference&amp;lt;JobGraph&amp;gt; LAST_SUBMITTED_JOB_GRAPH_REFERENCE = new AtomicReference&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+	static TestingDispatcherGateway restfulGateway;&lt;br/&gt;
+	static Path jarDir;&lt;br/&gt;
+	static GatewayRetriever&amp;lt;TestingDispatcherGateway&amp;gt; gatewayRetriever = () -&amp;gt; CompletableFuture.completedFuture(restfulGateway);&lt;br/&gt;
+	static CompletableFuture&amp;lt;String&amp;gt; localAddressFuture = CompletableFuture.completedFuture(&quot;shazam://localhost:12345&quot;);&lt;br/&gt;
+	static Time timeout = Time.seconds(10);&lt;br/&gt;
+	static Map&amp;lt;String, String&amp;gt; responseHeaders = Collections.emptyMap();&lt;br/&gt;
+	static Executor executor = TestingUtils.defaultExecutor();&lt;br/&gt;
+&lt;br/&gt;
+	private static Path jarWithManifest;&lt;br/&gt;
+	private static Path jarWithoutManifest;&lt;br/&gt;
+&lt;br/&gt;
+	static void init() throws Exception {&lt;br/&gt;
+		jarDir = TMP.newFolder().toPath();&lt;br/&gt;
+&lt;br/&gt;
+		// properties are set property by surefire plugin&lt;br/&gt;
+		final String parameterProgramJarName = System.getProperty(&quot;parameterJarName&quot;) + &quot;.jar&quot;;&lt;br/&gt;
+		final String parameterProgramWithoutManifestJarName = System.getProperty(&quot;parameterJarWithoutManifestName&quot;) + &quot;.jar&quot;;&lt;br/&gt;
+		final Path jarLocation = Paths.get(System.getProperty(&quot;targetDir&quot;));&lt;br/&gt;
+&lt;br/&gt;
+		jarWithManifest = Files.copy(&lt;br/&gt;
+			jarLocation.resolve(parameterProgramJarName),&lt;br/&gt;
+			jarDir.resolve(&quot;program-with-manifest.jar&quot;));&lt;br/&gt;
+		jarWithoutManifest = Files.copy(&lt;br/&gt;
+			jarLocation.resolve(parameterProgramWithoutManifestJarName),&lt;br/&gt;
+			jarDir.resolve(&quot;program-without-manifest.jar&quot;));&lt;br/&gt;
+&lt;br/&gt;
+		restfulGateway = new TestingDispatcherGateway.Builder()&lt;br/&gt;
+			.setBlobServerPort(BLOB_SERVER_RESOURCE.getBlobServerPort())&lt;br/&gt;
+			.setSubmitFunction(jobGraph -&amp;gt; &lt;/p&gt;
{
+				LAST_SUBMITTED_JOB_GRAPH_REFERENCE.set(jobGraph);
+				return CompletableFuture.completedFuture(Acknowledge.get());
+			}
&lt;p&gt;)&lt;br/&gt;
+			.build();&lt;br/&gt;
+&lt;br/&gt;
+		gatewayRetriever = () -&amp;gt; CompletableFuture.completedFuture(restfulGateway);&lt;br/&gt;
+		localAddressFuture = CompletableFuture.completedFuture(&quot;shazam://localhost:12345&quot;);&lt;br/&gt;
+		timeout = Time.seconds(10);&lt;br/&gt;
+		responseHeaders = Collections.emptyMap();&lt;br/&gt;
+		executor = TestingUtils.defaultExecutor();&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Before&lt;br/&gt;
+	public void reset() &lt;/p&gt;
{
+		ParameterProgram.actualArguments = null;
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testDefaultParameters() throws Exception &lt;/p&gt;
{
+		// baseline, ensure that reasonable defaults are chosen
+		handleRequest(createRequest(
+			getDefaultJarRequestBody(),
+			getUnresolvedJarMessageParameters(),
+			getUnresolvedJarMessageParameters(),
+			jarWithManifest));
+		validateDefaultGraph();
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaQueryParametersWithProgArgsAsString() throws Exception &lt;/p&gt;
{
+		testConfigurationViaQueryParameters(ProgramArgsParType.String);
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaQueryParametersWithProgArgsAsList() throws Exception &lt;/p&gt;
{
+		testConfigurationViaQueryParameters(ProgramArgsParType.List);
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaQueryParametersFailWithProgArgsAsStringAndList() throws Exception {&lt;br/&gt;
+		try &lt;/p&gt;
{
+			testConfigurationViaQueryParameters(ProgramArgsParType.Both);
+			fail(&quot;RestHandlerException is excepted&quot;);
+		}
&lt;p&gt; catch (RestHandlerException e) &lt;/p&gt;
{
+			assertEquals(HttpResponseStatus.BAD_REQUEST, e.getHttpResponseStatus());
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private void testConfigurationViaQueryParameters(ProgramArgsParType programArgsParType) throws Exception {
+		// configure submission via query parameters
+		handleRequest(createRequest(
+			getDefaultJarRequestBody(),
+			getJarMessageParameters(programArgsParType),
+			getUnresolvedJarMessageParameters(),
+			jarWithoutManifest));
+		validateGraph();
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaJsonRequestWithProgArgsAsString() throws Exception {
+		testConfigurationViaJsonRequest(ProgramArgsParType.String);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaJsonRequestWithProgArgsAsList() throws Exception {
+		testConfigurationViaJsonRequest(ProgramArgsParType.List);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaJsonRequestFailWithProgArgsAsStringAndList() throws Exception {&lt;br/&gt;
+		try {
+			testConfigurationViaJsonRequest(ProgramArgsParType.Both);
+			fail(&quot;RestHandlerException is excepted&quot;);
+		} catch (RestHandlerException e) {+			assertEquals(HttpResponseStatus.BAD_REQUEST, e.getHttpResponseStatus());+		}
&lt;p&gt;+	}&lt;br/&gt;
+&lt;br/&gt;
+	private void testConfigurationViaJsonRequest(ProgramArgsParType programArgsParType) throws Exception &lt;/p&gt;
{
+		handleRequest(createRequest(
+			getJarRequestBody(programArgsParType),
+			getUnresolvedJarMessageParameters(),
+			getUnresolvedJarMessageParameters(),
+			jarWithoutManifest
+		));
+		validateGraph();
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testParameterPrioritizationWithProgArgsAsString() throws Exception &lt;/p&gt;
{
+		testParameterPrioritization(ProgramArgsParType.String);
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testParameterPrioritizationWithProgArgsAsList() throws Exception &lt;/p&gt;
{
+		testParameterPrioritization(ProgramArgsParType.List);
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testFailIfProgArgsAreAsStringAndAsList() throws Exception {&lt;br/&gt;
+		try &lt;/p&gt;
{
+			testParameterPrioritization(ProgramArgsParType.Both);
+			fail(&quot;RestHandlerException is excepted&quot;);
+		}
&lt;p&gt; catch (RestHandlerException e) &lt;/p&gt;
{
+			assertEquals(HttpResponseStatus.BAD_REQUEST, e.getHttpResponseStatus());
+		}
&lt;p&gt;+	}&lt;br/&gt;
+&lt;br/&gt;
+	private void testParameterPrioritization(ProgramArgsParType programArgsParType) throws Exception &lt;/p&gt;
{
+		// configure submission via query parameters and JSON request, JSON should be prioritized
+		handleRequest(createRequest(
+			getJarRequestBody(programArgsParType),
+			getWrongJarMessageParameters(programArgsParType),
+			getUnresolvedJarMessageParameters(),
+			jarWithoutManifest));
+		validateGraph();
+	}
&lt;p&gt;+&lt;br/&gt;
+	static String getProgramArgsString(ProgramArgsParType programArgsParType) &lt;/p&gt;
{
+		return programArgsParType == ProgramArgsParType.String || programArgsParType == ProgramArgsParType.Both
+			? String.join(&quot; &quot;, PROG_ARGS) : null;
+	}
&lt;p&gt;+&lt;br/&gt;
+	static List&amp;lt;String&amp;gt; getProgramArgsList(ProgramArgsParType programArgsParType) &lt;/p&gt;
{
+		return programArgsParType == ProgramArgsParType.List || programArgsParType == ProgramArgsParType.Both
+			? Arrays.asList(PROG_ARGS) : null;
+	}
&lt;p&gt;+&lt;br/&gt;
+	private static &amp;lt;&lt;br/&gt;
+		REQB extends JarRequestBody,&lt;br/&gt;
+		M extends JarMessageParameters&amp;gt;&lt;br/&gt;
+	HandlerRequest&amp;lt;REQB, M&amp;gt; createRequest(&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   the indentation doesn&apos;t look correct, it should not be in the same column as `private static &amp;lt;`&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641708" author="githubbot" created="Mon, 8 Oct 2018 11:48:25 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r223333232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r223333232&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: docs/_includes/generated/rest_v1_dispatcher.html&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -290,19 +290,40 @@&lt;br/&gt;
     &amp;lt;tr&amp;gt;&lt;br/&gt;
       &amp;lt;td colspan=&quot;2&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;ul&amp;gt;&lt;br/&gt;
+&amp;lt;li&amp;gt;&amp;lt;code&amp;gt;program-args&amp;lt;/code&amp;gt; (optional): Deprecated, please, use &apos;programArgsList&apos; in a JSON request body as a JSON list. String value that specifies the arguments for the program or plan.&amp;lt;/li&amp;gt;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   needs regeneration&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641709" author="githubbot" created="Mon, 8 Oct 2018 11:48:25 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r223329566&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r223329566&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandlerParameterTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,117 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.configuration.Configuration;&lt;br/&gt;
+import org.apache.flink.runtime.jobgraph.jsonplan.JsonPlanGenerator;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.JobPlanInfo;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.testutils.ParameterProgram;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.BeforeClass;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.stream.Collectors;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Tests for the parameter handling of the &lt;/p&gt;
{@link JarPlanHandler}
&lt;p&gt;.&lt;br/&gt;
+ */&lt;br/&gt;
+public class JarPlanHandlerParameterTest extends JarHandlerParameterTest&amp;lt;JarPlanRequestBody, JarPlanMessageParameters&amp;gt; {&lt;br/&gt;
+	private static JarPlanHandler handler;&lt;br/&gt;
+&lt;br/&gt;
+	@BeforeClass&lt;br/&gt;
+	public static void setup() throws Exception {&lt;br/&gt;
+		init();&lt;br/&gt;
+		handler = new JarPlanHandler(&lt;br/&gt;
+			localAddressFuture,&lt;br/&gt;
+			gatewayRetriever,&lt;br/&gt;
+			timeout,&lt;br/&gt;
+			responseHeaders,&lt;br/&gt;
+			JarPlanHeaders.getInstance(),&lt;br/&gt;
+			jarDir,&lt;br/&gt;
+			new Configuration(),&lt;br/&gt;
+			executor,&lt;br/&gt;
+			jobGraph -&amp;gt; &lt;/p&gt;
{
+				LAST_SUBMITTED_JOB_GRAPH_REFERENCE.set(jobGraph);
+				return new JobPlanInfo(JsonPlanGenerator.generatePlan(jobGraph));
+			}
&lt;p&gt;);&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarPlanMessageParameters getUnresolvedJarMessageParameters() {&lt;br/&gt;
+		return JarPlanHeaders.getInstance().getUnresolvedMessageParameters();&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   use `handler.getMessageHeaders().getUnresolvedMessageParameters()` instead&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641710" author="githubbot" created="Mon, 8 Oct 2018 11:48:25 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r223325748&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r223325748&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgsListQueryParameter.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,38 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageParameter;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.File;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Query parameter specifying one or more arguments for the program.&lt;br/&gt;
+ * @see org.apache.flink.client.program.PackagedProgram#PackagedProgram(File, String, String...)&lt;br/&gt;
+ */&lt;br/&gt;
+public class ProgramArgsListQueryParameter extends StringQueryParameter {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Rename to `ProgramArgQueryParameter`&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641711" author="githubbot" created="Mon, 8 Oct 2018 11:48:25 +0000"  >&lt;p&gt;zentol commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r223331981&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r223331981&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandlerParameterTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,117 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.configuration.Configuration;&lt;br/&gt;
+import org.apache.flink.runtime.jobgraph.jsonplan.JsonPlanGenerator;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.JobPlanInfo;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.testutils.ParameterProgram;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.BeforeClass;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.stream.Collectors;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Tests for the parameter handling of the &lt;/p&gt;
{@link JarPlanHandler}
&lt;p&gt;.&lt;br/&gt;
+ */&lt;br/&gt;
+public class JarPlanHandlerParameterTest extends JarHandlerParameterTest&amp;lt;JarPlanRequestBody, JarPlanMessageParameters&amp;gt; {&lt;br/&gt;
+	private static JarPlanHandler handler;&lt;br/&gt;
+&lt;br/&gt;
+	@BeforeClass&lt;br/&gt;
+	public static void setup() throws Exception {&lt;br/&gt;
+		init();&lt;br/&gt;
+		handler = new JarPlanHandler(&lt;br/&gt;
+			localAddressFuture,&lt;br/&gt;
+			gatewayRetriever,&lt;br/&gt;
+			timeout,&lt;br/&gt;
+			responseHeaders,&lt;br/&gt;
+			JarPlanHeaders.getInstance(),&lt;br/&gt;
+			jarDir,&lt;br/&gt;
+			new Configuration(),&lt;br/&gt;
+			executor,&lt;br/&gt;
+			jobGraph -&amp;gt; &lt;/p&gt;
{
+				LAST_SUBMITTED_JOB_GRAPH_REFERENCE.set(jobGraph);
+				return new JobPlanInfo(JsonPlanGenerator.generatePlan(jobGraph));
+			}
&lt;p&gt;);&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarPlanMessageParameters getUnresolvedJarMessageParameters() &lt;/p&gt;
{
+		return JarPlanHeaders.getInstance().getUnresolvedMessageParameters();
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarPlanMessageParameters getJarMessageParameters(ProgramArgsParType programArgsParType) {&lt;br/&gt;
+		final JarPlanMessageParameters parameters = getUnresolvedJarMessageParameters();&lt;br/&gt;
+		parameters.entryClassQueryParameter.resolve(Collections.singletonList(ParameterProgram.class.getCanonicalName()));&lt;br/&gt;
+		parameters.parallelismQueryParameter.resolve(Collections.singletonList(PARALLELISM));&lt;br/&gt;
+		if (programArgsParType == ProgramArgsParType.String ||&lt;br/&gt;
+			programArgsParType == ProgramArgsParType.Both) &lt;/p&gt;
{
+			parameters.programArgsQueryParameter.resolve(Collections.singletonList(String.join(&quot; &quot;, PROG_ARGS)));
+		}
&lt;p&gt;+		if (programArgsParType == ProgramArgsParType.List ||&lt;br/&gt;
+			programArgsParType == ProgramArgsParType.Both) &lt;/p&gt;
{
+			parameters.programArgsListQueryParameter.resolve(Arrays.asList(PROG_ARGS));
+		}
&lt;p&gt;+		return parameters;&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarPlanMessageParameters getWrongJarMessageParameters(ProgramArgsParType programArgsParType) {&lt;br/&gt;
+		List&amp;lt;String&amp;gt; wrongArgs = Arrays.stream(PROG_ARGS).map(a -&amp;gt; a + &quot;wrong&quot;).collect(Collectors.toList());&lt;br/&gt;
+		String argsWrongStr = String.join(&quot; &quot;, wrongArgs);&lt;br/&gt;
+		final JarPlanMessageParameters parameters = getUnresolvedJarMessageParameters();&lt;br/&gt;
+		parameters.entryClassQueryParameter.resolve(Collections.singletonList(&quot;please.dont.run.me&quot;));&lt;br/&gt;
+		parameters.parallelismQueryParameter.resolve(Collections.singletonList(64));&lt;br/&gt;
+		if (programArgsParType == ProgramArgsParType.String ||&lt;br/&gt;
+			programArgsParType == ProgramArgsParType.Both) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   let&apos;s move this to the previous; every time i scan over this line I believe it to not be part of the condition (also applies to other instances in #getJarMessageParameters)&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641825" author="githubbot" created="Mon, 8 Oct 2018 13:25:33 +0000"  >&lt;p&gt;azagrebin commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r223361879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r223361879&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarHandlerParameterTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,300 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.api.common.ExecutionConfig;&lt;br/&gt;
+import org.apache.flink.api.common.time.Time;&lt;br/&gt;
+import org.apache.flink.runtime.jobgraph.JobGraph;&lt;br/&gt;
+import org.apache.flink.runtime.messages.Acknowledge;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequestException;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.RestHandlerException;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageParameter;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageQueryParameter;&lt;br/&gt;
+import org.apache.flink.runtime.testingUtils.TestingUtils;&lt;br/&gt;
+import org.apache.flink.runtime.util.BlobServerResource;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.TestingDispatcherGateway;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.retriever.GatewayRetriever;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.testutils.ParameterProgram;&lt;br/&gt;
+import org.apache.flink.util.TestLogger;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.shaded.netty4.io.netty.handler.codec.http.HttpResponseStatus;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.Assert;&lt;br/&gt;
+import org.junit.Before;&lt;br/&gt;
+import org.junit.ClassRule;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+import org.junit.rules.TemporaryFolder;&lt;br/&gt;
+&lt;br/&gt;
+import java.nio.file.Files;&lt;br/&gt;
+import java.nio.file.Path;&lt;br/&gt;
+import java.nio.file.Paths;&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.concurrent.CompletableFuture;&lt;br/&gt;
+import java.util.concurrent.Executor;&lt;br/&gt;
+import java.util.concurrent.atomic.AtomicReference;&lt;br/&gt;
+import java.util.stream.Collectors;&lt;br/&gt;
+&lt;br/&gt;
+import static junit.framework.TestCase.assertEquals;&lt;br/&gt;
+import static junit.framework.TestCase.fail;&lt;br/&gt;
+&lt;br/&gt;
+/** Base test class for jar request handlers. */&lt;br/&gt;
+public abstract class JarHandlerParameterTest&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Some Junit limitation:&lt;br/&gt;
   `ValidationError: The @ClassRule &apos;BLOB_SERVER_RESOURCE&apos; must be declared in a public class.`&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641830" author="githubbot" created="Mon, 8 Oct 2018 13:29:38 +0000"  >&lt;p&gt;azagrebin commented on a change in pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754#discussion_r223363283&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754#discussion_r223363283&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandlerParameterTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,117 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.configuration.Configuration;&lt;br/&gt;
+import org.apache.flink.runtime.jobgraph.jsonplan.JsonPlanGenerator;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.JobPlanInfo;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.testutils.ParameterProgram;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.BeforeClass;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.stream.Collectors;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Tests for the parameter handling of the &lt;/p&gt;
{@link JarPlanHandler}
&lt;p&gt;.&lt;br/&gt;
+ */&lt;br/&gt;
+public class JarPlanHandlerParameterTest extends JarHandlerParameterTest&amp;lt;JarPlanRequestBody, JarPlanMessageParameters&amp;gt; {&lt;br/&gt;
+	private static JarPlanHandler handler;&lt;br/&gt;
+&lt;br/&gt;
+	@BeforeClass&lt;br/&gt;
+	public static void setup() throws Exception {&lt;br/&gt;
+		init();&lt;br/&gt;
+		handler = new JarPlanHandler(&lt;br/&gt;
+			localAddressFuture,&lt;br/&gt;
+			gatewayRetriever,&lt;br/&gt;
+			timeout,&lt;br/&gt;
+			responseHeaders,&lt;br/&gt;
+			JarPlanHeaders.getInstance(),&lt;br/&gt;
+			jarDir,&lt;br/&gt;
+			new Configuration(),&lt;br/&gt;
+			executor,&lt;br/&gt;
+			jobGraph -&amp;gt; {&lt;br/&gt;
+				LAST_SUBMITTED_JOB_GRAPH_REFERENCE.set(jobGraph);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   the jar plan handler does not call `submitFunction`, it just generates the plan.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16642185" author="azagrebin" created="Mon, 8 Oct 2018 17:19:45 +0000"  >&lt;p&gt;The pull request adds another way to provide program args as list of string. The most&#160;secure&#160;option is to pass&#160;program args as a json list in the body of the http request. This way is cross-platform. The args string does not need any tokenisation because they are already tokenised in the list. The follow-up issue&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10515&quot; title=&quot;Improve tokenisation of program args passed as string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10515&quot;&gt;FLINK-10515&lt;/a&gt;&#160;is to still improve the&#160;tokenisation to simplify passing args as string in web UI at least for unix style escaping.&lt;/p&gt;</comment>
                            <comment id="16643527" author="githubbot" created="Tue, 9 Oct 2018 14:40:28 +0000"  >&lt;p&gt;zentol closed pull request #6754: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10295&quot; title=&quot;Tokenisation of Program Args resulting in unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10295&quot;&gt;&lt;del&gt;FLINK-10295&lt;/del&gt;&lt;/a&gt; Add support of passing jar arguments as list of separate strings in REST API&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6754&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6754&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/docs/_includes/generated/rest_v1_dispatcher.html b/docs/_includes/generated/rest_v1_dispatcher.html&lt;br/&gt;
index 6ee705eeb0a..4977e5ccfeb 100644&lt;br/&gt;
&amp;#8212; a/docs/_includes/generated/rest_v1_dispatcher.html&lt;br/&gt;
+++ b/docs/_includes/generated/rest_v1_dispatcher.html&lt;br/&gt;
@@ -272,7 +272,7 @@&lt;br/&gt;
       &amp;lt;td class=&quot;text-left&quot;&amp;gt;Response code: &amp;lt;code&amp;gt;200 OK&amp;lt;/code&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
     &amp;lt;/tr&amp;gt;&lt;br/&gt;
     &amp;lt;tr&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;td colspan=&quot;2&quot;&amp;gt;Returns the dataflow plan of a job contained in a jar previously uploaded via &apos;/jars/upload&apos;.&amp;lt;/td&amp;gt;&lt;br/&gt;
+      &amp;lt;td colspan=&quot;2&quot;&amp;gt;Returns the dataflow plan of a job contained in a jar previously uploaded via &apos;/jars/upload&apos;. Program arguments can be passed both via the JSON request (recommended) or query parameters.&amp;lt;/td&amp;gt;&lt;br/&gt;
     &amp;lt;/tr&amp;gt;&lt;br/&gt;
     &amp;lt;tr&amp;gt;&lt;br/&gt;
       &amp;lt;td colspan=&quot;2&quot;&amp;gt;Path parameters&amp;lt;/td&amp;gt;&lt;br/&gt;
@@ -290,19 +290,40 @@&lt;br/&gt;
     &amp;lt;tr&amp;gt;&lt;br/&gt;
       &amp;lt;td colspan=&quot;2&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;ul&amp;gt;&lt;br/&gt;
+&amp;lt;li&amp;gt;&amp;lt;code&amp;gt;program-args&amp;lt;/code&amp;gt; (optional): Deprecated, please use &apos;programArg&apos; instead. String value that specifies the arguments for the program or plan&amp;lt;/li&amp;gt;&lt;br/&gt;
+&amp;lt;li&amp;gt;&amp;lt;code&amp;gt;programArg&amp;lt;/code&amp;gt; (optional): Comma-separated list of program arguments.&amp;lt;/li&amp;gt;&lt;br/&gt;
 &amp;lt;li&amp;gt;&amp;lt;code&amp;gt;entry-class&amp;lt;/code&amp;gt; (optional): String value that specifies the fully qualified name of the entry point class. Overrides the class defined in the jar file manifest.&amp;lt;/li&amp;gt;&lt;br/&gt;
 &amp;lt;li&amp;gt;&amp;lt;code&amp;gt;parallelism&amp;lt;/code&amp;gt; (optional): Positive integer value that specifies the desired parallelism for the job.&amp;lt;/li&amp;gt;&lt;br/&gt;
-&amp;lt;li&amp;gt;&amp;lt;code&amp;gt;program-args&amp;lt;/code&amp;gt; (optional): String value that specifies the arguments for the program or plan.&amp;lt;/li&amp;gt;&lt;br/&gt;
         &amp;lt;/ul&amp;gt;&lt;br/&gt;
       &amp;lt;/td&amp;gt;&lt;br/&gt;
     &amp;lt;/tr&amp;gt;&lt;br/&gt;
     &amp;lt;tr&amp;gt;&lt;br/&gt;
       &amp;lt;td colspan=&quot;2&quot;&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;button data-toggle=&quot;collapse&quot; data-target=&quot;#-181694384&quot;&amp;gt;Request&amp;lt;/button&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;div id=&quot;-181694384&quot; class=&quot;collapse&quot;&amp;gt;&lt;br/&gt;
+        &amp;lt;button data-toggle=&quot;collapse&quot; data-target=&quot;#550027726&quot;&amp;gt;Request&amp;lt;/button&amp;gt;&lt;br/&gt;
+        &amp;lt;div id=&quot;550027726&quot; class=&quot;collapse&quot;&amp;gt;&lt;br/&gt;
           &amp;lt;pre&amp;gt;&lt;br/&gt;
             &amp;lt;code&amp;gt;&lt;br/&gt;
-{}            &amp;lt;/code&amp;gt;&lt;br/&gt;
+{&lt;br/&gt;
+  &quot;type&quot; : &quot;object&quot;,&lt;br/&gt;
+  &quot;id&quot; : &quot;urn:jsonschema:org:apache:flink:runtime:webmonitor:handlers:JarPlanRequestBody&quot;,&lt;br/&gt;
+  &quot;properties&quot; : {&lt;br/&gt;
+    &quot;entryClass&quot; : 
{
+      &quot;type&quot; : &quot;string&quot;
+    }
&lt;p&gt;,&lt;br/&gt;
+    &quot;programArgs&quot; : &lt;/p&gt;
{
+      &quot;type&quot; : &quot;string&quot;
+    }
&lt;p&gt;,&lt;br/&gt;
+    &quot;programArgsList&quot; : &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+      &amp;quot;type&amp;quot; }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;,&lt;br/&gt;
+    &quot;parallelism&quot; : &lt;/p&gt;
{
+      &quot;type&quot; : &quot;integer&quot;
+    }
&lt;p&gt;+  }&lt;br/&gt;
+}            &amp;lt;/code&amp;gt;&lt;br/&gt;
           &amp;lt;/pre&amp;gt;&lt;br/&gt;
          &amp;lt;/div&amp;gt;&lt;br/&gt;
       &amp;lt;/td&amp;gt;&lt;br/&gt;
@@ -338,7 +359,7 @@&lt;br/&gt;
       &amp;lt;td class=&quot;text-left&quot;&amp;gt;Response code: &amp;lt;code&amp;gt;200 OK&amp;lt;/code&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
     &amp;lt;/tr&amp;gt;&lt;br/&gt;
     &amp;lt;tr&amp;gt;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;td colspan=&quot;2&quot;&amp;gt;Submits a job by running a jar previously uploaded via &apos;/jars/upload&apos;.&amp;lt;/td&amp;gt;&lt;br/&gt;
+      &amp;lt;td colspan=&quot;2&quot;&amp;gt;Submits a job by running a jar previously uploaded via &apos;/jars/upload&apos;. Program arguments can be passed both via the JSON request (recommended) or query parameters.&amp;lt;/td&amp;gt;&lt;br/&gt;
     &amp;lt;/tr&amp;gt;&lt;br/&gt;
     &amp;lt;tr&amp;gt;&lt;br/&gt;
       &amp;lt;td colspan=&quot;2&quot;&amp;gt;Path parameters&amp;lt;/td&amp;gt;&lt;br/&gt;
@@ -356,11 +377,12 @@&lt;br/&gt;
     &amp;lt;tr&amp;gt;&lt;br/&gt;
       &amp;lt;td colspan=&quot;2&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;ul&amp;gt;&lt;br/&gt;
-&amp;lt;li&amp;gt;&amp;lt;code&amp;gt;program-args&amp;lt;/code&amp;gt; (optional): String value that specifies the arguments for the program or plan.&amp;lt;/li&amp;gt;&lt;br/&gt;
-&amp;lt;li&amp;gt;&amp;lt;code&amp;gt;entry-class&amp;lt;/code&amp;gt; (optional): String value that specifies the fully qualified name of the entry point class. Overrides the class defined in the jar file manifest.&amp;lt;/li&amp;gt;&lt;br/&gt;
-&amp;lt;li&amp;gt;&amp;lt;code&amp;gt;parallelism&amp;lt;/code&amp;gt; (optional): Positive integer value that specifies the desired parallelism for the job.&amp;lt;/li&amp;gt;&lt;br/&gt;
 &amp;lt;li&amp;gt;&amp;lt;code&amp;gt;allowNonRestoredState&amp;lt;/code&amp;gt; (optional): Boolean value that specifies whether the job submission should be rejected if the savepoint contains state that cannot be mapped back to the job.&amp;lt;/li&amp;gt;&lt;br/&gt;
 &amp;lt;li&amp;gt;&amp;lt;code&amp;gt;savepointPath&amp;lt;/code&amp;gt; (optional): String value that specifies the path of the savepoint to restore the job from.&amp;lt;/li&amp;gt;&lt;br/&gt;
+&amp;lt;li&amp;gt;&amp;lt;code&amp;gt;program-args&amp;lt;/code&amp;gt; (optional): Deprecated, please use &apos;programArg&apos; instead. String value that specifies the arguments for the program or plan&amp;lt;/li&amp;gt;&lt;br/&gt;
+&amp;lt;li&amp;gt;&amp;lt;code&amp;gt;programArg&amp;lt;/code&amp;gt; (optional): Comma-separated list of program arguments.&amp;lt;/li&amp;gt;&lt;br/&gt;
+&amp;lt;li&amp;gt;&amp;lt;code&amp;gt;entry-class&amp;lt;/code&amp;gt; (optional): String value that specifies the fully qualified name of the entry point class. Overrides the class defined in the jar file manifest.&amp;lt;/li&amp;gt;&lt;br/&gt;
+&amp;lt;li&amp;gt;&amp;lt;code&amp;gt;parallelism&amp;lt;/code&amp;gt; (optional): Positive integer value that specifies the desired parallelism for the job.&amp;lt;/li&amp;gt;&lt;br/&gt;
         &amp;lt;/ul&amp;gt;&lt;br/&gt;
       &amp;lt;/td&amp;gt;&lt;br/&gt;
     &amp;lt;/tr&amp;gt;&lt;br/&gt;
@@ -380,6 +402,12 @@&lt;br/&gt;
     &quot;programArgs&quot; : 
{
       &quot;type&quot; : &quot;string&quot;
     }
&lt;p&gt;,&lt;br/&gt;
+    &quot;programArgsList&quot; : &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+      &amp;quot;type&amp;quot; }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;,&lt;br/&gt;
     &quot;parallelism&quot; : &lt;/p&gt;
{
       &quot;type&quot; : &quot;integer&quot;
     }
&lt;p&gt;,&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarMessageParameters.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarMessageParameters.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..f1bf00a83f4&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;/dev/null&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarMessageParameters.java&lt;br/&gt;
@@ -0,0 +1,57 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageParameters;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessagePathParameter;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageQueryParameter;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collection;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Base class of 
{@link MessageParameters} for {@link JarRunHandler} and {@link JarPlanHandler}.&lt;br/&gt;
+ */&lt;br/&gt;
+abstract class JarMessageParameters extends MessageParameters {&lt;br/&gt;
+&lt;br/&gt;
+	final JarIdPathParameter jarIdPathParameter = new JarIdPathParameter();&lt;br/&gt;
+&lt;br/&gt;
+	final EntryClassQueryParameter entryClassQueryParameter = new EntryClassQueryParameter();&lt;br/&gt;
+&lt;br/&gt;
+	final ParallelismQueryParameter parallelismQueryParameter = new ParallelismQueryParameter();&lt;br/&gt;
+&lt;br/&gt;
+	final ProgramArgsQueryParameter programArgsQueryParameter = new ProgramArgsQueryParameter();&lt;br/&gt;
+&lt;br/&gt;
+	final ProgramArgQueryParameter programArgQueryParameter = new ProgramArgQueryParameter();&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	public Collection&amp;lt;MessagePathParameter&amp;lt;?&amp;gt;&amp;gt; getPathParameters() {
+		return Collections.singletonList(jarIdPathParameter);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	public Collection&amp;lt;MessageQueryParameter&amp;lt;?&amp;gt;&amp;gt; getQueryParameters() {
+		return Collections.unmodifiableList(Arrays.asList(
+			programArgsQueryParameter,
+			programArgQueryParameter,
+			entryClassQueryParameter,
+			parallelismQueryParameter));
+	}&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandler.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandler.java&lt;br/&gt;
index 2f0631610fc..94a53643af1 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandler.java&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandler.java&lt;br/&gt;
@@ -18,44 +18,34 @@&lt;br/&gt;
 &lt;br/&gt;
 package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
 &lt;br/&gt;
-import org.apache.flink.api.common.ExecutionConfig;&lt;br/&gt;
 import org.apache.flink.api.common.time.Time;&lt;br/&gt;
-import org.apache.flink.client.program.PackagedProgram;&lt;br/&gt;
-import org.apache.flink.client.program.PackagedProgramUtils;&lt;br/&gt;
-import org.apache.flink.client.program.ProgramInvocationException;&lt;br/&gt;
 import org.apache.flink.configuration.Configuration;&lt;br/&gt;
 import org.apache.flink.runtime.jobgraph.JobGraph;&lt;br/&gt;
 import org.apache.flink.runtime.jobgraph.jsonplan.JsonPlanGenerator;&lt;br/&gt;
 import org.apache.flink.runtime.rest.handler.AbstractRestHandler;&lt;br/&gt;
 import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
 import org.apache.flink.runtime.rest.handler.RestHandlerException;&lt;br/&gt;
-import org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils;&lt;br/&gt;
-import org.apache.flink.runtime.rest.messages.EmptyRequestBody;&lt;br/&gt;
 import org.apache.flink.runtime.rest.messages.JobPlanInfo;&lt;br/&gt;
 import org.apache.flink.runtime.rest.messages.MessageHeaders;&lt;br/&gt;
 import org.apache.flink.runtime.webmonitor.RestfulGateway;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.handlers.utils.JarHandlerUtils.JarHandlerContext;&lt;br/&gt;
 import org.apache.flink.runtime.webmonitor.retriever.GatewayRetriever;&lt;br/&gt;
 &lt;br/&gt;
-import org.apache.flink.shaded.netty4.io.netty.handler.codec.http.HttpResponseStatus;&lt;br/&gt;
-&lt;br/&gt;
 import javax.annotation.Nonnull;&lt;br/&gt;
 &lt;br/&gt;
 import java.nio.file.Path;&lt;br/&gt;
-import java.util.List;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
 import java.util.concurrent.CompletableFuture;&lt;br/&gt;
-import java.util.concurrent.CompletionException;&lt;br/&gt;
 import java.util.concurrent.Executor;&lt;br/&gt;
+import java.util.function.Function;&lt;br/&gt;
 &lt;br/&gt;
 import static java.util.Objects.requireNonNull;&lt;br/&gt;
-import static org.apache.flink.runtime.webmonitor.handlers.utils.JarHandlerUtils.tokenizeArguments;&lt;br/&gt;
-import static org.apache.flink.shaded.guava18.com.google.common.base.Strings.emptyToNull;&lt;br/&gt;
 &lt;br/&gt;
 /**&lt;br/&gt;
  * This handler handles requests to fetch the plan for a jar.&lt;br/&gt;
  */&lt;br/&gt;
 public class JarPlanHandler&lt;br/&gt;
-		extends AbstractRestHandler&amp;lt;RestfulGateway, EmptyRequestBody, JobPlanInfo, JarPlanMessageParameters&amp;gt; {&lt;br/&gt;
+		extends AbstractRestHandler&amp;lt;RestfulGateway, JarPlanRequestBody, JobPlanInfo, JarPlanMessageParameters&amp;gt; {&lt;br/&gt;
 &lt;br/&gt;
 	private final Path jarDir;&lt;br/&gt;
 &lt;br/&gt;
@@ -63,47 +53,49 @@&lt;br/&gt;
 &lt;br/&gt;
 	private final Executor executor;&lt;br/&gt;
 &lt;br/&gt;
+	private final Function&amp;lt;JobGraph, JobPlanInfo&amp;gt; planGenerator;&lt;br/&gt;
+&lt;br/&gt;
 	public JarPlanHandler(&lt;br/&gt;
 			final CompletableFuture&amp;lt;String&amp;gt; localRestAddress,&lt;br/&gt;
 			final GatewayRetriever&amp;lt;? extends RestfulGateway&amp;gt; leaderRetriever,&lt;br/&gt;
 			final Time timeout,&lt;br/&gt;
 			final Map&amp;lt;String, String&amp;gt; responseHeaders,&lt;br/&gt;
-			final MessageHeaders&amp;lt;EmptyRequestBody, JobPlanInfo, JarPlanMessageParameters&amp;gt; messageHeaders,&lt;br/&gt;
+			final MessageHeaders&amp;lt;JarPlanRequestBody, JobPlanInfo, JarPlanMessageParameters&amp;gt; messageHeaders,&lt;br/&gt;
 			final Path jarDir,&lt;br/&gt;
 			final Configuration configuration,&lt;br/&gt;
 			final Executor executor) {
+		this(
+			localRestAddress, leaderRetriever, timeout, responseHeaders,
+			messageHeaders, jarDir, configuration, executor,
+			jobGraph -&amp;gt; new JobPlanInfo(JsonPlanGenerator.generatePlan(jobGraph)));
+	}&lt;br/&gt;
+&lt;br/&gt;
+	public JarPlanHandler(&lt;br/&gt;
+			final CompletableFuture&amp;lt;String&amp;gt; localRestAddress,&lt;br/&gt;
+			final GatewayRetriever&amp;lt;? extends RestfulGateway&amp;gt; leaderRetriever,&lt;br/&gt;
+			final Time timeout,&lt;br/&gt;
+			final Map&amp;lt;String, String&amp;gt; responseHeaders,&lt;br/&gt;
+			final MessageHeaders&amp;lt;JarPlanRequestBody, JobPlanInfo, JarPlanMessageParameters&amp;gt; messageHeaders,&lt;br/&gt;
+			final Path jarDir,&lt;br/&gt;
+			final Configuration configuration,&lt;br/&gt;
+			final Executor executor,&lt;br/&gt;
+			final Function&amp;lt;JobGraph, JobPlanInfo&amp;gt; planGenerator) {
 		super(localRestAddress, leaderRetriever, timeout, responseHeaders, messageHeaders);
 		this.jarDir = requireNonNull(jarDir);
 		this.configuration = requireNonNull(configuration);
 		this.executor = requireNonNull(executor);
+		this.planGenerator = planGenerator;
 	}&lt;br/&gt;
 &lt;br/&gt;
 	@Override&lt;br/&gt;
 	protected CompletableFuture&amp;lt;JobPlanInfo&amp;gt; handleRequest(&lt;br/&gt;
-			@Nonnull final HandlerRequest&amp;lt;EmptyRequestBody, JarPlanMessageParameters&amp;gt; request,&lt;br/&gt;
+			@Nonnull final HandlerRequest&amp;lt;JarPlanRequestBody, JarPlanMessageParameters&amp;gt; request,&lt;br/&gt;
 			@Nonnull final RestfulGateway gateway) throws RestHandlerException {&lt;br/&gt;
-&lt;br/&gt;
-		final String jarId = request.getPathParameter(JarIdPathParameter.class);&lt;br/&gt;
-		final String entryClass = emptyToNull(HandlerRequestUtils.getQueryParameter(request, EntryClassQueryParameter.class));&lt;br/&gt;
-		final Integer parallelism = HandlerRequestUtils.getQueryParameter(request, ParallelismQueryParameter.class, ExecutionConfig.PARALLELISM_DEFAULT);&lt;br/&gt;
-		final List&amp;lt;String&amp;gt; programArgs = tokenizeArguments(HandlerRequestUtils.getQueryParameter(request, ProgramArgsQueryParameter.class));&lt;br/&gt;
-		final Path jarFile = jarDir.resolve(jarId);&lt;br/&gt;
+		final JarHandlerContext context = JarHandlerContext.fromRequest(request, jarDir, log);&lt;br/&gt;
 &lt;br/&gt;
 		return CompletableFuture.supplyAsync(() -&amp;gt; {&lt;br/&gt;
-			final JobGraph jobGraph;&lt;br/&gt;
-			try {
-				final PackagedProgram packagedProgram = new PackagedProgram(
-					jarFile.toFile(),
-					entryClass,
-					programArgs.toArray(new String[programArgs.size()]));
-				jobGraph = PackagedProgramUtils.createJobGraph(packagedProgram, configuration, parallelism);
-			} catch (final ProgramInvocationException e) {
-				throw new CompletionException(new RestHandlerException(
-					e.getMessage(),
-					HttpResponseStatus.INTERNAL_SERVER_ERROR,
-					e));
-			}&lt;br/&gt;
-			return new JobPlanInfo(JsonPlanGenerator.generatePlan(jobGraph));&lt;br/&gt;
+			final JobGraph jobGraph = context.toJobGraph(configuration);&lt;br/&gt;
+			return planGenerator.apply(jobGraph);&lt;br/&gt;
 		}, executor);&lt;br/&gt;
 	}&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHeaders.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHeaders.java&lt;br/&gt;
index 38fc705e84b..09311d8aca0 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHeaders.java&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHeaders.java&lt;br/&gt;
@@ -19,7 +19,6 @@&lt;br/&gt;
 package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
 &lt;br/&gt;
 import org.apache.flink.runtime.rest.HttpMethodWrapper;&lt;br/&gt;
-import org.apache.flink.runtime.rest.messages.EmptyRequestBody;&lt;br/&gt;
 import org.apache.flink.runtime.rest.messages.JobPlanInfo;&lt;br/&gt;
 import org.apache.flink.runtime.rest.messages.MessageHeaders;&lt;br/&gt;
 &lt;br/&gt;
@@ -28,7 +27,7 @@&lt;br/&gt;
 /**&lt;br/&gt;
  * Message headers for {@link JarPlanHandler}.&lt;br/&gt;
  */&lt;br/&gt;
-public class JarPlanHeaders implements MessageHeaders&amp;lt;EmptyRequestBody, JobPlanInfo, JarPlanMessageParameters&amp;gt; {&lt;br/&gt;
+public class JarPlanHeaders implements MessageHeaders&amp;lt;JarPlanRequestBody, JobPlanInfo, JarPlanMessageParameters&amp;gt; {&lt;br/&gt;
 &lt;br/&gt;
 	private static final JarPlanHeaders INSTANCE = new JarPlanHeaders();&lt;br/&gt;
 &lt;br/&gt;
@@ -43,8 +42,8 @@ public HttpResponseStatus getResponseStatusCode() {&lt;br/&gt;
 	}&lt;br/&gt;
 &lt;br/&gt;
 	@Override&lt;br/&gt;
-	public Class&amp;lt;EmptyRequestBody&amp;gt; getRequestClass() {&lt;br/&gt;
-		return EmptyRequestBody.class;&lt;br/&gt;
+	public Class&amp;lt;JarPlanRequestBody&amp;gt; getRequestClass() {
+		return JarPlanRequestBody.class;
 	}&lt;br/&gt;
 &lt;br/&gt;
 	@Override&lt;br/&gt;
@@ -68,6 +67,7 @@ public static JarPlanHeaders getInstance() {&lt;br/&gt;
 &lt;br/&gt;
 	@Override&lt;br/&gt;
 	public String getDescription() {
-		return &quot;Returns the dataflow plan of a job contained in a jar previously uploaded via &apos;&quot; + JarUploadHeaders.URL + &quot;&apos;.&quot;;
+		return &quot;Returns the dataflow plan of a job contained in a jar previously uploaded via &apos;&quot; + JarUploadHeaders.URL + &quot;&apos;. &quot; +
+			&quot;Program arguments can be passed both via the JSON request (recommended) or query parameters.&quot;;
 	}&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanMessageParameters.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanMessageParameters.java&lt;br/&gt;
index 8599a2ccf44..e7619b36361 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanMessageParameters.java&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanMessageParameters.java&lt;br/&gt;
@@ -19,36 +19,9 @@&lt;br/&gt;
 package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
 &lt;br/&gt;
 import org.apache.flink.runtime.rest.messages.MessageParameters;&lt;br/&gt;
-import org.apache.flink.runtime.rest.messages.MessagePathParameter;&lt;br/&gt;
-import org.apache.flink.runtime.rest.messages.MessageQueryParameter;&lt;br/&gt;
-&lt;br/&gt;
-import java.util.Arrays;&lt;br/&gt;
-import java.util.Collection;&lt;br/&gt;
-import java.util.Collections;&lt;br/&gt;
 &lt;br/&gt;
 /**&lt;br/&gt;
- * Message parameters for {@link JarPlanHandler}.&lt;br/&gt;
+ * {@link MessageParameters}
&lt;p&gt; for &lt;/p&gt;
{@link JarPlanHandler}.&lt;br/&gt;
  */&lt;br/&gt;
-public class JarPlanMessageParameters extends MessageParameters {&lt;br/&gt;
-&lt;br/&gt;
-	public final JarIdPathParameter jarIdPathParameter = new JarIdPathParameter();&lt;br/&gt;
-&lt;br/&gt;
-	private final EntryClassQueryParameter entryClassQueryParameter = new EntryClassQueryParameter();&lt;br/&gt;
-&lt;br/&gt;
-	private final ParallelismQueryParameter parallelismQueryParameter = new ParallelismQueryParameter();&lt;br/&gt;
-&lt;br/&gt;
-	private final ProgramArgsQueryParameter programArgsQueryParameter = new ProgramArgsQueryParameter();&lt;br/&gt;
-&lt;br/&gt;
-	@Override&lt;br/&gt;
-	public Collection&amp;lt;MessagePathParameter&amp;lt;?&amp;gt;&amp;gt; getPathParameters() {
-		return Collections.singletonList(jarIdPathParameter);
-	}&lt;br/&gt;
-&lt;br/&gt;
-	@Override&lt;br/&gt;
-	public Collection&amp;lt;MessageQueryParameter&amp;lt;?&amp;gt;&amp;gt; getQueryParameters() {
-		return Collections.unmodifiableCollection(Arrays.asList(
-			entryClassQueryParameter,
-			parallelismQueryParameter,
-			programArgsQueryParameter));
-	}&lt;br/&gt;
+class JarPlanMessageParameters extends JarMessageParameters {&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanRequestBody.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanRequestBody.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..8e209b41cc1&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanRequestBody.java&lt;br/&gt;
@@ -0,0 +1,48 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.RequestBody;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonCreator;&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonInclude;&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonProperty;&lt;br/&gt;
+&lt;br/&gt;
+import javax.annotation.Nullable;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * {@link RequestBody} for querying the plan from a jar.&lt;br/&gt;
+ */&lt;br/&gt;
+@JsonInclude(JsonInclude.Include.NON_NULL)&lt;br/&gt;
+public class JarPlanRequestBody extends JarRequestBody {&lt;br/&gt;
+	JarPlanRequestBody() {
+		super(null, null, null, null);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@JsonCreator&lt;br/&gt;
+	JarPlanRequestBody(&lt;br/&gt;
+		@Nullable @JsonProperty(FIELD_NAME_ENTRY_CLASS) String entryClassName,&lt;br/&gt;
+		@Nullable @JsonProperty(FIELD_NAME_PROGRAM_ARGUMENTS) String programArguments,&lt;br/&gt;
+		@Nullable @JsonProperty(FIELD_NAME_PROGRAM_ARGUMENTS_LIST) List&amp;lt;String&amp;gt; programArgumentsList,&lt;br/&gt;
+		@Nullable @JsonProperty(FIELD_NAME_PARALLELISM) Integer parallelism) {
+		super(entryClassName, programArguments, programArgumentsList, parallelism);
+	}&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRequestBody.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRequestBody.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..144ac05058c&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRequestBody.java&lt;br/&gt;
@@ -0,0 +1,98 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.RequestBody;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonCreator;&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonIgnore;&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonInclude;&lt;br/&gt;
+import org.apache.flink.shaded.jackson2.com.fasterxml.jackson.annotation.JsonProperty;&lt;br/&gt;
+&lt;br/&gt;
+import javax.annotation.Nullable;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Base class for {@link RequestBody} for running a jar or querying the plan.&lt;br/&gt;
+ */&lt;br/&gt;
+@JsonInclude(JsonInclude.Include.NON_NULL)&lt;br/&gt;
+public abstract class JarRequestBody implements RequestBody {&lt;br/&gt;
+&lt;br/&gt;
+	static final String FIELD_NAME_ENTRY_CLASS = &quot;entryClass&quot;;&lt;br/&gt;
+	static final String FIELD_NAME_PROGRAM_ARGUMENTS = &quot;programArgs&quot;;&lt;br/&gt;
+	static final String FIELD_NAME_PROGRAM_ARGUMENTS_LIST = &quot;programArgsList&quot;;&lt;br/&gt;
+	static final String FIELD_NAME_PARALLELISM = &quot;parallelism&quot;;&lt;br/&gt;
+&lt;br/&gt;
+	@JsonProperty(FIELD_NAME_ENTRY_CLASS)&lt;br/&gt;
+	@Nullable&lt;br/&gt;
+	private String entryClassName;&lt;br/&gt;
+&lt;br/&gt;
+	@JsonProperty(FIELD_NAME_PROGRAM_ARGUMENTS)&lt;br/&gt;
+	@Nullable&lt;br/&gt;
+	private String programArguments;&lt;br/&gt;
+&lt;br/&gt;
+	@JsonProperty(FIELD_NAME_PROGRAM_ARGUMENTS_LIST)&lt;br/&gt;
+	@Nullable&lt;br/&gt;
+	private List&amp;lt;String&amp;gt; programArgumentsList;&lt;br/&gt;
+&lt;br/&gt;
+	@JsonProperty(FIELD_NAME_PARALLELISM)&lt;br/&gt;
+	@Nullable&lt;br/&gt;
+	private Integer parallelism;&lt;br/&gt;
+&lt;br/&gt;
+	JarRequestBody() {
+		this(null, null, null, null);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@JsonCreator&lt;br/&gt;
+	JarRequestBody(&lt;br/&gt;
+		@Nullable @JsonProperty(FIELD_NAME_ENTRY_CLASS) String entryClassName,&lt;br/&gt;
+		@Nullable @JsonProperty(FIELD_NAME_PROGRAM_ARGUMENTS) String programArguments,&lt;br/&gt;
+		@Nullable @JsonProperty(FIELD_NAME_PROGRAM_ARGUMENTS_LIST) List&amp;lt;String&amp;gt; programArgumentsList,&lt;br/&gt;
+		@Nullable @JsonProperty(FIELD_NAME_PARALLELISM) Integer parallelism) {
+		this.entryClassName = entryClassName;
+		this.programArguments = programArguments;
+		this.programArgumentsList = programArgumentsList;
+		this.parallelism = parallelism;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Nullable&lt;br/&gt;
+	@JsonIgnore&lt;br/&gt;
+	public String getEntryClassName() {
+		return entryClassName;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Nullable&lt;br/&gt;
+	@JsonIgnore&lt;br/&gt;
+	public String getProgramArguments() {
+		return programArguments;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Nullable&lt;br/&gt;
+	@JsonIgnore&lt;br/&gt;
+	public List&amp;lt;String&amp;gt; getProgramArgumentsList() {
+		return programArgumentsList;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Nullable&lt;br/&gt;
+	@JsonIgnore&lt;br/&gt;
+	public Integer getParallelism() {
+		return parallelism;
+	}&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandler.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandler.java&lt;br/&gt;
index bae4ba86a0e..679dfe988ef 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandler.java&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandler.java&lt;br/&gt;
@@ -18,11 +18,7 @@&lt;br/&gt;
 &lt;br/&gt;
 package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
 &lt;br/&gt;
-import org.apache.flink.api.common.ExecutionConfig;&lt;br/&gt;
 import org.apache.flink.api.common.time.Time;&lt;br/&gt;
-import org.apache.flink.client.program.PackagedProgram;&lt;br/&gt;
-import org.apache.flink.client.program.PackagedProgramUtils;&lt;br/&gt;
-import org.apache.flink.client.program.ProgramInvocationException;&lt;br/&gt;
 import org.apache.flink.configuration.Configuration;&lt;br/&gt;
 import org.apache.flink.runtime.blob.BlobClient;&lt;br/&gt;
 import org.apache.flink.runtime.client.ClientUtils;&lt;br/&gt;
@@ -34,29 +30,24 @@&lt;br/&gt;
 import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
 import org.apache.flink.runtime.rest.handler.RestHandlerException;&lt;br/&gt;
 import org.apache.flink.runtime.rest.messages.MessageHeaders;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.handlers.utils.JarHandlerUtils.JarHandlerContext;&lt;br/&gt;
 import org.apache.flink.runtime.webmonitor.retriever.GatewayRetriever;&lt;br/&gt;
 import org.apache.flink.util.FlinkException;&lt;br/&gt;
-import org.apache.flink.util.function.SupplierWithException;&lt;br/&gt;
 &lt;br/&gt;
 import org.apache.flink.shaded.netty4.io.netty.handler.codec.http.HttpResponseStatus;&lt;br/&gt;
 &lt;br/&gt;
-import org.slf4j.Logger;&lt;br/&gt;
-&lt;br/&gt;
 import javax.annotation.Nonnull;&lt;br/&gt;
-import javax.annotation.Nullable;&lt;br/&gt;
 &lt;br/&gt;
 import java.net.InetSocketAddress;&lt;br/&gt;
-import java.nio.file.Files;&lt;br/&gt;
 import java.nio.file.Path;&lt;br/&gt;
-import java.util.List;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
 import java.util.concurrent.CompletableFuture;&lt;br/&gt;
 import java.util.concurrent.CompletionException;&lt;br/&gt;
 import java.util.concurrent.Executor;&lt;br/&gt;
 &lt;br/&gt;
 import static java.util.Objects.requireNonNull;&lt;br/&gt;
+import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.fromRequestBodyOrQueryParameter;&lt;br/&gt;
 import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.getQueryParameter;&lt;br/&gt;
-import static org.apache.flink.runtime.webmonitor.handlers.utils.JarHandlerUtils.tokenizeArguments;&lt;br/&gt;
 import static org.apache.flink.shaded.guava18.com.google.common.base.Strings.emptyToNull;&lt;br/&gt;
 &lt;br/&gt;
 /**&lt;br/&gt;
@@ -91,39 +82,11 @@ public JarRunHandler(&lt;br/&gt;
 	protected CompletableFuture&amp;lt;JarRunResponseBody&amp;gt; handleRequest(&lt;br/&gt;
 			@Nonnull final HandlerRequest&amp;lt;JarRunRequestBody, JarRunMessageParameters&amp;gt; request,&lt;br/&gt;
 			@Nonnull final DispatcherGateway gateway) throws RestHandlerException {
-
-		final JarRunRequestBody requestBody = request.getRequestBody();
-
-		final String pathParameter = request.getPathParameter(JarIdPathParameter.class);
-		final Path jarFile = jarDir.resolve(pathParameter);
-
-		final String entryClass = fromRequestBodyOrQueryParameter(
-			emptyToNull(requestBody.getEntryClassName()),
-			() -&amp;gt; emptyToNull(getQueryParameter(request, EntryClassQueryParameter.class)),
-			null,
-			log);
-
-		final List&amp;lt;String&amp;gt; programArgs = tokenizeArguments(
-			fromRequestBodyOrQueryParameter(
-				emptyToNull(requestBody.getProgramArguments()),
-				() -&amp;gt; getQueryParameter(request, ProgramArgsQueryParameter.class),
-				null,
-				log));
-
-		final int parallelism = fromRequestBodyOrQueryParameter(
-			requestBody.getParallelism(),
-			() -&amp;gt; getQueryParameter(request, ParallelismQueryParameter.class),
-			ExecutionConfig.PARALLELISM_DEFAULT,
-			log);
+		final JarHandlerContext context = JarHandlerContext.fromRequest(request, jarDir, log);
 
 		final SavepointRestoreSettings savepointRestoreSettings = getSavepointRestoreSettings(request);
 
-		final CompletableFuture&amp;lt;JobGraph&amp;gt; jobGraphFuture = getJobGraphAsync(
-			jarFile,
-			entryClass,
-			programArgs,
-			savepointRestoreSettings,
-			parallelism);
+		final CompletableFuture&amp;lt;JobGraph&amp;gt; jobGraphFuture = getJobGraphAsync(context, savepointRestoreSettings);
 
 		CompletableFuture&amp;lt;Integer&amp;gt; blobServerPortFuture = gateway.getBlobServerPort(timeout);
 
@@ -181,52 +144,11 @@ private SavepointRestoreSettings getSavepointRestoreSettings(
 		return savepointRestoreSettings;
 	}&lt;br/&gt;
 &lt;br/&gt;
-	/**&lt;br/&gt;
-	 * Returns {@code requestValue} if it is not null, otherwise returns the query parameter value&lt;br/&gt;
-	 * if it is not null, otherwise returns the default value.&lt;br/&gt;
-	 */&lt;br/&gt;
-	private static &amp;lt;T&amp;gt; T fromRequestBodyOrQueryParameter(&lt;br/&gt;
-			T requestValue,&lt;br/&gt;
-			SupplierWithException&amp;lt;T, RestHandlerException&amp;gt; queryParameterExtractor,&lt;br/&gt;
-			T defaultValue,&lt;br/&gt;
-			Logger log) throws RestHandlerException {&lt;br/&gt;
-		if (requestValue != null) {
-			return requestValue;
-		} else {&lt;br/&gt;
-			T queryParameterValue = queryParameterExtractor.get();&lt;br/&gt;
-			if (queryParameterValue != null) {
-				log.warn(&quot;Configuring the job submission via query parameters is deprecated.&quot; +
-					&quot; Please migrate to submitting a JSON request instead.&quot;);
-				return queryParameterValue;
-			} else {
-				return defaultValue;
-			}&lt;br/&gt;
-		}&lt;br/&gt;
-	}&lt;br/&gt;
-&lt;br/&gt;
 	private CompletableFuture&amp;lt;JobGraph&amp;gt; getJobGraphAsync(&lt;br/&gt;
-			final Path jarFile,&lt;br/&gt;
-			@Nullable final String entryClass,&lt;br/&gt;
-			final List&amp;lt;String&amp;gt; programArgs,&lt;br/&gt;
-			final SavepointRestoreSettings savepointRestoreSettings,&lt;br/&gt;
-			final int parallelism) {&lt;br/&gt;
-&lt;br/&gt;
+			JarHandlerContext context,&lt;br/&gt;
+			final SavepointRestoreSettings savepointRestoreSettings) {&lt;br/&gt;
 		return CompletableFuture.supplyAsync(() -&amp;gt; {&lt;br/&gt;
-			if (!Files.exists(jarFile)) {
-				throw new CompletionException(new RestHandlerException(
-					String.format(&quot;Jar file %s does not exist&quot;, jarFile), HttpResponseStatus.BAD_REQUEST));
-			}&lt;br/&gt;
-&lt;br/&gt;
-			final JobGraph jobGraph;&lt;br/&gt;
-			try {
-				final PackagedProgram packagedProgram = new PackagedProgram(
-					jarFile.toFile(),
-					entryClass,
-					programArgs.toArray(new String[programArgs.size()]));
-				jobGraph = PackagedProgramUtils.createJobGraph(packagedProgram, configuration, parallelism);
-			} catch (final ProgramInvocationException e) {
-				throw new CompletionException(e);
-			}&lt;br/&gt;
+			final JobGraph jobGraph = context.toJobGraph(configuration);&lt;br/&gt;
 			jobGraph.setSavepointRestoreSettings(savepointRestoreSettings);&lt;br/&gt;
 			return jobGraph;&lt;br/&gt;
 		}, executor);&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHeaders.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHeaders.java&lt;br/&gt;
index fa062e906bc..6085528d0ce 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHeaders.java&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHeaders.java&lt;br/&gt;
@@ -68,6 +68,7 @@ public static JarRunHeaders getInstance() {&lt;br/&gt;
 &lt;br/&gt;
 	@Override&lt;br/&gt;
 	public String getDescription() {
-		return &quot;Submits a job by running a jar previously uploaded via &apos;&quot; + JarUploadHeaders.URL + &quot;&apos;.&quot;;
+		return &quot;Submits a job by running a jar previously uploaded via &apos;&quot; + JarUploadHeaders.URL + &quot;&apos;. &quot; +
+			&quot;Program arguments can be passed both via the JSON request (recommended) or query parameters.&quot;;
 	}&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunMessageParameters.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunMessageParameters.java&lt;br/&gt;
index 78267db22a0..ed69b81017f 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunMessageParameters.java&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunMessageParameters.java&lt;br/&gt;
@@ -19,9 +19,9 @@&lt;br/&gt;
 package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
 &lt;br/&gt;
 import org.apache.flink.runtime.rest.messages.MessageParameters;&lt;br/&gt;
-import org.apache.flink.runtime.rest.messages.MessagePathParameter;&lt;br/&gt;
 import org.apache.flink.runtime.rest.messages.MessageQueryParameter;&lt;br/&gt;
 &lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
 import java.util.Arrays;&lt;br/&gt;
 import java.util.Collection;&lt;br/&gt;
 import java.util.Collections;&lt;br/&gt;
@@ -29,32 +29,18 @@&lt;br/&gt;
 /**&lt;br/&gt;
  * {@link MessageParameters} for {@link JarRunHandler}.&lt;br/&gt;
  */&lt;br/&gt;
-public class JarRunMessageParameters extends MessageParameters {&lt;br/&gt;
+public class JarRunMessageParameters extends JarMessageParameters {&lt;br/&gt;
 &lt;br/&gt;
-	public final JarIdPathParameter jarIdPathParameter = new JarIdPathParameter();&lt;br/&gt;
+	final AllowNonRestoredStateQueryParameter allowNonRestoredStateQueryParameter = new AllowNonRestoredStateQueryParameter();&lt;br/&gt;
 &lt;br/&gt;
-	public final ProgramArgsQueryParameter programArgsQueryParameter = new ProgramArgsQueryParameter();&lt;br/&gt;
-&lt;br/&gt;
-	public final EntryClassQueryParameter entryClassQueryParameter = new EntryClassQueryParameter();&lt;br/&gt;
-&lt;br/&gt;
-	public final ParallelismQueryParameter parallelismQueryParameter = new ParallelismQueryParameter();&lt;br/&gt;
-&lt;br/&gt;
-	public final AllowNonRestoredStateQueryParameter allowNonRestoredStateQueryParameter = new AllowNonRestoredStateQueryParameter();&lt;br/&gt;
-&lt;br/&gt;
-	public final SavepointPathQueryParameter savepointPathQueryParameter = new SavepointPathQueryParameter();&lt;br/&gt;
-&lt;br/&gt;
-	@Override&lt;br/&gt;
-	public Collection&amp;lt;MessagePathParameter&amp;lt;?&amp;gt;&amp;gt; getPathParameters() {-		return Collections.singletonList(jarIdPathParameter);-	}&lt;br/&gt;
+	final SavepointPathQueryParameter savepointPathQueryParameter = new SavepointPathQueryParameter();&lt;br/&gt;
 &lt;br/&gt;
 	@Override&lt;br/&gt;
 	public Collection&amp;lt;MessageQueryParameter&amp;lt;?&amp;gt;&amp;gt; getQueryParameters() {
-		return Collections.unmodifiableCollection(Arrays.asList(
-			programArgsQueryParameter,
-			entryClassQueryParameter,
-			parallelismQueryParameter,
+		Collection&amp;lt;MessageQueryParameter&amp;lt;?&amp;gt;&amp;gt; pars = new ArrayList&amp;lt;&amp;gt;(Arrays.asList(
 			allowNonRestoredStateQueryParameter,
 			savepointPathQueryParameter));
+		pars.addAll(super.getQueryParameters());
+		return Collections.unmodifiableCollection(pars);
 	}&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunRequestBody.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunRequestBody.java&lt;br/&gt;
index b30ae6113ef..9e4ee0f8c2a 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunRequestBody.java&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/JarRunRequestBody.java&lt;br/&gt;
@@ -27,30 +27,16 @@&lt;br/&gt;
 &lt;br/&gt;
 import javax.annotation.Nullable;&lt;br/&gt;
 &lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+&lt;br/&gt;
 /**&lt;br/&gt;
  * {@link RequestBody} for running a jar.&lt;br/&gt;
  */&lt;br/&gt;
 @JsonInclude(JsonInclude.Include.NON_NULL)&lt;br/&gt;
-public class JarRunRequestBody implements RequestBody {&lt;br/&gt;
-&lt;br/&gt;
-	private static final String FIELD_NAME_ENTRY_CLASS = &quot;entryClass&quot;;&lt;br/&gt;
-	private static final String FIELD_NAME_PROGRAM_ARGUMENTS = &quot;programArgs&quot;;&lt;br/&gt;
-	private static final String FIELD_NAME_PARALLELISM = &quot;parallelism&quot;;&lt;br/&gt;
+public class JarRunRequestBody extends JarRequestBody {&lt;br/&gt;
 	private static final String FIELD_NAME_ALLOW_NON_RESTORED_STATE = &quot;allowNonRestoredState&quot;;&lt;br/&gt;
 	private static final String FIELD_NAME_SAVEPOINT_PATH = &quot;savepointPath&quot;;&lt;br/&gt;
 &lt;br/&gt;
-	@JsonProperty(FIELD_NAME_ENTRY_CLASS)&lt;br/&gt;
-	@Nullable&lt;br/&gt;
-	private String entryClassName;&lt;br/&gt;
-&lt;br/&gt;
-	@JsonProperty(FIELD_NAME_PROGRAM_ARGUMENTS)&lt;br/&gt;
-	@Nullable&lt;br/&gt;
-	private String programArguments;&lt;br/&gt;
-&lt;br/&gt;
-	@JsonProperty(FIELD_NAME_PARALLELISM)&lt;br/&gt;
-	@Nullable&lt;br/&gt;
-	private Integer parallelism;&lt;br/&gt;
-&lt;br/&gt;
 	@JsonProperty(FIELD_NAME_ALLOW_NON_RESTORED_STATE)&lt;br/&gt;
 	@Nullable&lt;br/&gt;
 	private Boolean allowNonRestoredState;&lt;br/&gt;
@@ -60,41 +46,22 @@&lt;br/&gt;
 	private String savepointPath;&lt;br/&gt;
 &lt;br/&gt;
 	public JarRunRequestBody() {
-		this(null, null, null, null, null);
+		this(null, null, null, null, null, null);
 	}&lt;br/&gt;
 &lt;br/&gt;
 	@JsonCreator&lt;br/&gt;
 	public JarRunRequestBody(&lt;br/&gt;
 			@Nullable @JsonProperty(FIELD_NAME_ENTRY_CLASS) String entryClassName,&lt;br/&gt;
 			@Nullable @JsonProperty(FIELD_NAME_PROGRAM_ARGUMENTS) String programArguments,&lt;br/&gt;
+			@Nullable @JsonProperty(FIELD_NAME_PROGRAM_ARGUMENTS_LIST) List&amp;lt;String&amp;gt; programArgumentsList,&lt;br/&gt;
 			@Nullable @JsonProperty(FIELD_NAME_PARALLELISM) Integer parallelism,&lt;br/&gt;
 			@Nullable @JsonProperty(FIELD_NAME_ALLOW_NON_RESTORED_STATE) Boolean allowNonRestoredState,&lt;br/&gt;
 			@Nullable @JsonProperty(FIELD_NAME_SAVEPOINT_PATH) String savepointPath) {
-		this.entryClassName = entryClassName;
-		this.programArguments = programArguments;
-		this.parallelism = parallelism;
+		super(entryClassName, programArguments, programArgumentsList, parallelism);
 		this.allowNonRestoredState = allowNonRestoredState;
 		this.savepointPath = savepointPath;
 	}&lt;br/&gt;
 &lt;br/&gt;
-	@Nullable&lt;br/&gt;
-	@JsonIgnore&lt;br/&gt;
-	public String getEntryClassName() {
-		return entryClassName;
-	}&lt;br/&gt;
-&lt;br/&gt;
-	@Nullable&lt;br/&gt;
-	@JsonIgnore&lt;br/&gt;
-	public String getProgramArguments() {
-		return programArguments;
-	}&lt;br/&gt;
-&lt;br/&gt;
-	@Nullable&lt;br/&gt;
-	@JsonIgnore&lt;br/&gt;
-	public Integer getParallelism() {
-		return parallelism;
-	}&lt;br/&gt;
-&lt;br/&gt;
 	@Nullable&lt;br/&gt;
 	@JsonIgnore&lt;br/&gt;
 	public Boolean getAllowNonRestoredState() {&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgQueryParameter.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgQueryParameter.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..769da5b7a4f&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgQueryParameter.java&lt;br/&gt;
@@ -0,0 +1,40 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageParameter;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.File;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Query parameter specifying one or more arguments for the program.&lt;br/&gt;
+ * @see org.apache.flink.client.program.PackagedProgram#PackagedProgram(File, String, String...)&lt;br/&gt;
+ */&lt;br/&gt;
+public class ProgramArgQueryParameter extends StringQueryParameter {&lt;br/&gt;
+	static final String PROGRAM_ARG_PARAMETER_NAME = &quot;programArg&quot;;&lt;br/&gt;
+&lt;br/&gt;
+	public ProgramArgQueryParameter() {
+		super(PROGRAM_ARG_PARAMETER_NAME, MessageParameter.MessageParameterRequisiteness.OPTIONAL);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	public String getDescription() {
+		return &quot;Comma-separated list of program arguments.&quot;;
+	}&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgsQueryParameter.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgsQueryParameter.java&lt;br/&gt;
index d4b0a4fdd23..2cb77e59417 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgsQueryParameter.java&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/ProgramArgsQueryParameter.java&lt;br/&gt;
@@ -22,8 +22,10 @@&lt;br/&gt;
 &lt;br/&gt;
 /**&lt;br/&gt;
  * Query parameter specifying the arguments for the program.&lt;br/&gt;
+ * @deprecated please, use {@link JarRequestBody#FIELD_NAME_PROGRAM_ARGUMENTS_LIST}&lt;br/&gt;
  * @see org.apache.flink.client.program.PackagedProgram#PackagedProgram(File, String, String...)&lt;br/&gt;
  */&lt;br/&gt;
+@Deprecated&lt;br/&gt;
 public class ProgramArgsQueryParameter extends StringQueryParameter {&lt;br/&gt;
 &lt;br/&gt;
 	public ProgramArgsQueryParameter() {&lt;br/&gt;
@@ -32,6 +34,8 @@ public ProgramArgsQueryParameter() {&lt;br/&gt;
 &lt;br/&gt;
 	@Override&lt;br/&gt;
 	public String getDescription() {
-		return &quot;String value that specifies the arguments for the program or plan.&quot;;
+		return String.format(&quot;Deprecated, please use &apos;%s&apos; instead. &quot; +
+			&quot;String value that specifies the arguments for the program or plan&quot;,
+			ProgramArgQueryParameter.PROGRAM_ARG_PARAMETER_NAME);
 	}&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/utils/JarHandlerUtils.java b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/utils/JarHandlerUtils.java&lt;br/&gt;
index 3b1b7449303..9026cf00c5e 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/utils/JarHandlerUtils.java&lt;br/&gt;
+++ b/flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/handlers/utils/JarHandlerUtils.java&lt;br/&gt;
@@ -18,14 +18,43 @@&lt;br/&gt;
 &lt;br/&gt;
 package org.apache.flink.runtime.webmonitor.handlers.utils;&lt;br/&gt;
 &lt;br/&gt;
+import org.apache.flink.annotation.VisibleForTesting;&lt;br/&gt;
+import org.apache.flink.api.common.ExecutionConfig;&lt;br/&gt;
+import org.apache.flink.client.program.PackagedProgram;&lt;br/&gt;
+import org.apache.flink.client.program.PackagedProgramUtils;&lt;br/&gt;
+import org.apache.flink.client.program.ProgramInvocationException;&lt;br/&gt;
+import org.apache.flink.configuration.Configuration;&lt;br/&gt;
+import org.apache.flink.runtime.jobgraph.JobGraph;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.RestHandlerException;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageParameters;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.handlers.EntryClassQueryParameter;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.handlers.JarIdPathParameter;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.handlers.JarRequestBody;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.handlers.ParallelismQueryParameter;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.handlers.ProgramArgQueryParameter;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.handlers.ProgramArgsQueryParameter;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.shaded.netty4.io.netty.handler.codec.http.HttpResponseStatus;&lt;br/&gt;
+&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+&lt;br/&gt;
+import javax.annotation.Nonnull;&lt;br/&gt;
 import javax.annotation.Nullable;&lt;br/&gt;
 &lt;br/&gt;
+import java.nio.file.Files;&lt;br/&gt;
+import java.nio.file.Path;&lt;br/&gt;
 import java.util.ArrayList;&lt;br/&gt;
 import java.util.Collections;&lt;br/&gt;
 import java.util.List;&lt;br/&gt;
+import java.util.concurrent.CompletionException;&lt;br/&gt;
 import java.util.regex.Matcher;&lt;br/&gt;
 import java.util.regex.Pattern;&lt;br/&gt;
 &lt;br/&gt;
+import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.fromRequestBodyOrQueryParameter;&lt;br/&gt;
+import static org.apache.flink.runtime.rest.handler.util.HandlerRequestUtils.getQueryParameter;&lt;br/&gt;
+import static org.apache.flink.shaded.guava18.com.google.common.base.Strings.emptyToNull;&lt;br/&gt;
+&lt;br/&gt;
 /**&lt;br/&gt;
  * Utils for jar handlers.&lt;br/&gt;
  *&lt;br/&gt;
@@ -34,6 +63,93 @@&lt;br/&gt;
  */&lt;br/&gt;
 public class JarHandlerUtils {&lt;br/&gt;
 &lt;br/&gt;
+	/** Standard jar handler parameters parsed from request. */&lt;br/&gt;
+	public static class JarHandlerContext {&lt;br/&gt;
+		private final Path jarFile;&lt;br/&gt;
+		private final String entryClass;&lt;br/&gt;
+		private final List&amp;lt;String&amp;gt; programArgs;&lt;br/&gt;
+		private final int parallelism;&lt;br/&gt;
+&lt;br/&gt;
+		private JarHandlerContext(Path jarFile, String entryClass, List&amp;lt;String&amp;gt; programArgs, int parallelism) {
+			this.jarFile = jarFile;
+			this.entryClass = entryClass;
+			this.programArgs = programArgs;
+			this.parallelism = parallelism;
+		}&lt;br/&gt;
+&lt;br/&gt;
+		public static &amp;lt;R extends JarRequestBody&amp;gt; JarHandlerContext fromRequest(&lt;br/&gt;
+				@Nonnull final HandlerRequest&amp;lt;R, ?&amp;gt; request,&lt;br/&gt;
+				@Nonnull final Path jarDir,&lt;br/&gt;
+				@Nonnull final Logger log) throws RestHandlerException {
+			final JarRequestBody requestBody = request.getRequestBody();
+
+			final String pathParameter = request.getPathParameter(JarIdPathParameter.class);
+			Path jarFile = jarDir.resolve(pathParameter);
+
+			String entryClass = fromRequestBodyOrQueryParameter(
+				emptyToNull(requestBody.getEntryClassName()),
+				() -&amp;gt; emptyToNull(getQueryParameter(request, EntryClassQueryParameter.class)),
+				null,
+				log);
+
+			List&amp;lt;String&amp;gt; programArgs = JarHandlerUtils.getProgramArgs(request, log);
+
+			int parallelism = fromRequestBodyOrQueryParameter(
+				requestBody.getParallelism(),
+				() -&amp;gt; getQueryParameter(request, ParallelismQueryParameter.class),
+				ExecutionConfig.PARALLELISM_DEFAULT,
+				log);
+
+			return new JarHandlerContext(jarFile, entryClass, programArgs, parallelism);
+		}&lt;br/&gt;
+&lt;br/&gt;
+		public JobGraph toJobGraph(Configuration configuration) {&lt;br/&gt;
+			if (!Files.exists(jarFile)) {
+				throw new CompletionException(new RestHandlerException(
+					String.format(&quot;Jar file %s does not exist&quot;, jarFile), HttpResponseStatus.BAD_REQUEST));
+			}&lt;br/&gt;
+&lt;br/&gt;
+			try {
+				final PackagedProgram packagedProgram = new PackagedProgram(
+					jarFile.toFile(),
+					entryClass,
+					programArgs.toArray(new String[0]));
+				return PackagedProgramUtils.createJobGraph(packagedProgram, configuration, parallelism);
+			} catch (final ProgramInvocationException e) {
+				throw new CompletionException(e);
+			}&lt;br/&gt;
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	/** Parse program arguments in jar run or plan request. */&lt;br/&gt;
+	private static &amp;lt;R extends JarRequestBody, M extends MessageParameters&amp;gt; List&amp;lt;String&amp;gt; getProgramArgs(&lt;br/&gt;
+			HandlerRequest&amp;lt;R, M&amp;gt; request, Logger log) throws RestHandlerException {&lt;br/&gt;
+		JarRequestBody requestBody = request.getRequestBody();&lt;br/&gt;
+		@SuppressWarnings(&quot;deprecation&quot;)&lt;br/&gt;
+		List&amp;lt;String&amp;gt; programArgs = tokenizeArguments(&lt;br/&gt;
+			fromRequestBodyOrQueryParameter(&lt;br/&gt;
+				emptyToNull(requestBody.getProgramArguments()),&lt;br/&gt;
+				() -&amp;gt; getQueryParameter(request, ProgramArgsQueryParameter.class),&lt;br/&gt;
+				null,&lt;br/&gt;
+				log));&lt;br/&gt;
+		List&amp;lt;String&amp;gt; programArgsList =&lt;br/&gt;
+			fromRequestBodyOrQueryParameter(&lt;br/&gt;
+				requestBody.getProgramArgumentsList(),&lt;br/&gt;
+				() -&amp;gt; request.getQueryParameter(ProgramArgQueryParameter.class),&lt;br/&gt;
+				null,&lt;br/&gt;
+				log);&lt;br/&gt;
+		if (!programArgsList.isEmpty()) {&lt;br/&gt;
+			if (!programArgs.isEmpty()) {
+				throw new RestHandlerException(
+					&quot;Confusing request: programArgs and programArgsList are specified, please, use only programArgsList&quot;,
+					HttpResponseStatus.BAD_REQUEST);
+			}&lt;br/&gt;
+			return programArgsList;&lt;br/&gt;
+		} else {
+			return programArgs;
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
 	private static final Pattern ARGUMENTS_TOKENIZE_PATTERN = Pattern.compile(&quot;(&lt;span class=&quot;error&quot;&gt;&amp;#91;^\&amp;quot;\&amp;#39;&amp;#93;&lt;/span&gt;\\S*|\&quot;.&lt;ins&gt;?\&quot;|\&apos;.&lt;/ins&gt;?\&apos;)&lt;br class=&quot;atl-forced-newline&quot; /&gt;s*&quot;);&lt;br/&gt;
 &lt;br/&gt;
 	/**&lt;br/&gt;
@@ -48,7 +164,8 @@&lt;br/&gt;
 	 *&lt;br/&gt;
 	 * &amp;lt;strong&amp;gt;WARNING: &amp;lt;/strong&amp;gt;This method does not respect escaped quotes.&lt;br/&gt;
 	 */&lt;br/&gt;
-	public static List&amp;lt;String&amp;gt; tokenizeArguments(@Nullable final String args) {&lt;br/&gt;
+	@VisibleForTesting&lt;br/&gt;
+	static List&amp;lt;String&amp;gt; tokenizeArguments(@Nullable final String args) {&lt;br/&gt;
 		if (args == null) {
 			return Collections.emptyList();
 		}&lt;br/&gt;
diff --git a/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarHandlerParameterTest.java b/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarHandlerParameterTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..5c0ad507b4b&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarHandlerParameterTest.java&lt;br/&gt;
@@ -0,0 +1,298 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.api.common.ExecutionConfig;&lt;br/&gt;
+import org.apache.flink.api.common.time.Time;&lt;br/&gt;
+import org.apache.flink.runtime.jobgraph.JobGraph;&lt;br/&gt;
+import org.apache.flink.runtime.messages.Acknowledge;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequestException;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.RestHandlerException;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageParameter;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.MessageQueryParameter;&lt;br/&gt;
+import org.apache.flink.runtime.testingUtils.TestingUtils;&lt;br/&gt;
+import org.apache.flink.runtime.util.BlobServerResource;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.TestingDispatcherGateway;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.retriever.GatewayRetriever;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.testutils.ParameterProgram;&lt;br/&gt;
+import org.apache.flink.util.TestLogger;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.shaded.netty4.io.netty.handler.codec.http.HttpResponseStatus;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.Assert;&lt;br/&gt;
+import org.junit.Before;&lt;br/&gt;
+import org.junit.ClassRule;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+import org.junit.rules.TemporaryFolder;&lt;br/&gt;
+&lt;br/&gt;
+import java.nio.file.Files;&lt;br/&gt;
+import java.nio.file.Path;&lt;br/&gt;
+import java.nio.file.Paths;&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.concurrent.CompletableFuture;&lt;br/&gt;
+import java.util.concurrent.Executor;&lt;br/&gt;
+import java.util.concurrent.atomic.AtomicReference;&lt;br/&gt;
+import java.util.stream.Collectors;&lt;br/&gt;
+&lt;br/&gt;
+import static junit.framework.TestCase.assertEquals;&lt;br/&gt;
+import static junit.framework.TestCase.fail;&lt;br/&gt;
+&lt;br/&gt;
+/** Base test class for jar request handlers. */&lt;br/&gt;
+public abstract class JarHandlerParameterTest&lt;br/&gt;
+	&amp;lt;REQB extends JarRequestBody, M extends JarMessageParameters&amp;gt; extends TestLogger {&lt;br/&gt;
+	enum ProgramArgsParType {
+		String,
+		List,
+		Both
+	}&lt;br/&gt;
+&lt;br/&gt;
+	static final String[] PROG_ARGS = new String[] {&quot;--host&quot;, &quot;localhost&quot;, &quot;--port&quot;, &quot;1234&quot;};&lt;br/&gt;
+	static final int PARALLELISM = 4;&lt;br/&gt;
+&lt;br/&gt;
+	@ClassRule&lt;br/&gt;
+	public static final TemporaryFolder TMP = new TemporaryFolder();&lt;br/&gt;
+&lt;br/&gt;
+	@ClassRule&lt;br/&gt;
+	public static final BlobServerResource BLOB_SERVER_RESOURCE = new BlobServerResource();&lt;br/&gt;
+&lt;br/&gt;
+	static final AtomicReference&amp;lt;JobGraph&amp;gt; LAST_SUBMITTED_JOB_GRAPH_REFERENCE = new AtomicReference&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+	static TestingDispatcherGateway restfulGateway;&lt;br/&gt;
+	static Path jarDir;&lt;br/&gt;
+	static GatewayRetriever&amp;lt;TestingDispatcherGateway&amp;gt; gatewayRetriever = () -&amp;gt; CompletableFuture.completedFuture(restfulGateway);&lt;br/&gt;
+	static CompletableFuture&amp;lt;String&amp;gt; localAddressFuture = CompletableFuture.completedFuture(&quot;shazam://localhost:12345&quot;);&lt;br/&gt;
+	static Time timeout = Time.seconds(10);&lt;br/&gt;
+	static Map&amp;lt;String, String&amp;gt; responseHeaders = Collections.emptyMap();&lt;br/&gt;
+	static Executor executor = TestingUtils.defaultExecutor();&lt;br/&gt;
+&lt;br/&gt;
+	private static Path jarWithManifest;&lt;br/&gt;
+	private static Path jarWithoutManifest;&lt;br/&gt;
+&lt;br/&gt;
+	static void init() throws Exception {&lt;br/&gt;
+		jarDir = TMP.newFolder().toPath();&lt;br/&gt;
+&lt;br/&gt;
+		// properties are set property by surefire plugin&lt;br/&gt;
+		final String parameterProgramJarName = System.getProperty(&quot;parameterJarName&quot;) + &quot;.jar&quot;;&lt;br/&gt;
+		final String parameterProgramWithoutManifestJarName = System.getProperty(&quot;parameterJarWithoutManifestName&quot;) + &quot;.jar&quot;;&lt;br/&gt;
+		final Path jarLocation = Paths.get(System.getProperty(&quot;targetDir&quot;));&lt;br/&gt;
+&lt;br/&gt;
+		jarWithManifest = Files.copy(&lt;br/&gt;
+			jarLocation.resolve(parameterProgramJarName),&lt;br/&gt;
+			jarDir.resolve(&quot;program-with-manifest.jar&quot;));&lt;br/&gt;
+		jarWithoutManifest = Files.copy(&lt;br/&gt;
+			jarLocation.resolve(parameterProgramWithoutManifestJarName),&lt;br/&gt;
+			jarDir.resolve(&quot;program-without-manifest.jar&quot;));&lt;br/&gt;
+&lt;br/&gt;
+		restfulGateway = new TestingDispatcherGateway.Builder()&lt;br/&gt;
+			.setBlobServerPort(BLOB_SERVER_RESOURCE.getBlobServerPort())&lt;br/&gt;
+			.setSubmitFunction(jobGraph -&amp;gt; {
+				LAST_SUBMITTED_JOB_GRAPH_REFERENCE.set(jobGraph);
+				return CompletableFuture.completedFuture(Acknowledge.get());
+			})&lt;br/&gt;
+			.build();&lt;br/&gt;
+&lt;br/&gt;
+		gatewayRetriever = () -&amp;gt; CompletableFuture.completedFuture(restfulGateway);&lt;br/&gt;
+		localAddressFuture = CompletableFuture.completedFuture(&quot;shazam://localhost:12345&quot;);&lt;br/&gt;
+		timeout = Time.seconds(10);&lt;br/&gt;
+		responseHeaders = Collections.emptyMap();&lt;br/&gt;
+		executor = TestingUtils.defaultExecutor();&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Before&lt;br/&gt;
+	public void reset() {
+		ParameterProgram.actualArguments = null;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testDefaultParameters() throws Exception {
+		// baseline, ensure that reasonable defaults are chosen
+		handleRequest(createRequest(
+			getDefaultJarRequestBody(),
+			getUnresolvedJarMessageParameters(),
+			getUnresolvedJarMessageParameters(),
+			jarWithManifest));
+		validateDefaultGraph();
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaQueryParametersWithProgArgsAsString() throws Exception {
+		testConfigurationViaQueryParameters(ProgramArgsParType.String);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaQueryParametersWithProgArgsAsList() throws Exception {
+		testConfigurationViaQueryParameters(ProgramArgsParType.List);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaQueryParametersFailWithProgArgsAsStringAndList() throws Exception {&lt;br/&gt;
+		try {
+			testConfigurationViaQueryParameters(ProgramArgsParType.Both);
+			fail(&quot;RestHandlerException is excepted&quot;);
+		} catch (RestHandlerException e) {
+			assertEquals(HttpResponseStatus.BAD_REQUEST, e.getHttpResponseStatus());
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private void testConfigurationViaQueryParameters(ProgramArgsParType programArgsParType) throws Exception {
+		// configure submission via query parameters
+		handleRequest(createRequest(
+			getDefaultJarRequestBody(),
+			getJarMessageParameters(programArgsParType),
+			getUnresolvedJarMessageParameters(),
+			jarWithoutManifest));
+		validateGraph();
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaJsonRequestWithProgArgsAsString() throws Exception {
+		testConfigurationViaJsonRequest(ProgramArgsParType.String);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaJsonRequestWithProgArgsAsList() throws Exception {
+		testConfigurationViaJsonRequest(ProgramArgsParType.List);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testConfigurationViaJsonRequestFailWithProgArgsAsStringAndList() throws Exception {&lt;br/&gt;
+		try {
+			testConfigurationViaJsonRequest(ProgramArgsParType.Both);
+			fail(&quot;RestHandlerException is excepted&quot;);
+		} catch (RestHandlerException e) {+			assertEquals(HttpResponseStatus.BAD_REQUEST, e.getHttpResponseStatus());+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private void testConfigurationViaJsonRequest(ProgramArgsParType programArgsParType) throws Exception {
+		handleRequest(createRequest(
+			getJarRequestBody(programArgsParType),
+			getUnresolvedJarMessageParameters(),
+			getUnresolvedJarMessageParameters(),
+			jarWithoutManifest
+		));
+		validateGraph();
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testParameterPrioritizationWithProgArgsAsString() throws Exception {
+		testParameterPrioritization(ProgramArgsParType.String);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testParameterPrioritizationWithProgArgsAsList() throws Exception {
+		testParameterPrioritization(ProgramArgsParType.List);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testFailIfProgArgsAreAsStringAndAsList() throws Exception {&lt;br/&gt;
+		try {
+			testParameterPrioritization(ProgramArgsParType.Both);
+			fail(&quot;RestHandlerException is excepted&quot;);
+		} catch (RestHandlerException e) {
+			assertEquals(HttpResponseStatus.BAD_REQUEST, e.getHttpResponseStatus());
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private void testParameterPrioritization(ProgramArgsParType programArgsParType) throws Exception {
+		// configure submission via query parameters and JSON request, JSON should be prioritized
+		handleRequest(createRequest(
+			getJarRequestBody(programArgsParType),
+			getWrongJarMessageParameters(programArgsParType),
+			getUnresolvedJarMessageParameters(),
+			jarWithoutManifest));
+		validateGraph();
+	}&lt;br/&gt;
+&lt;br/&gt;
+	static String getProgramArgsString(ProgramArgsParType programArgsParType) {
+		return programArgsParType == ProgramArgsParType.String || programArgsParType == ProgramArgsParType.Both
+			? String.join(&quot; &quot;, PROG_ARGS) : null;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	static List&amp;lt;String&amp;gt; getProgramArgsList(ProgramArgsParType programArgsParType) {
+		return programArgsParType == ProgramArgsParType.List || programArgsParType == ProgramArgsParType.Both
+			? Arrays.asList(PROG_ARGS) : null;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private static &amp;lt;REQB extends JarRequestBody, M extends JarMessageParameters&amp;gt;&lt;br/&gt;
+	HandlerRequest&amp;lt;REQB, M&amp;gt; createRequest(&lt;br/&gt;
+		REQB requestBody, M parameters, M unresolvedMessageParameters, Path jar)&lt;br/&gt;
+		throws HandlerRequestException {
+
+		final Map&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt; queryParameterAsMap = parameters.getQueryParameters().stream()
+			.filter(MessageParameter::isResolved)
+			.collect(Collectors.toMap(
+				MessageParameter::getKey,
+				JarHandlerParameterTest::getValuesAsString
+			));
+
+		return new HandlerRequest&amp;lt;&amp;gt;(
+			requestBody,
+			unresolvedMessageParameters,
+			Collections.singletonMap(JarIdPathParameter.KEY, jar.getFileName().toString()),
+			queryParameterAsMap,
+			Collections.emptyList()
+		);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private static &amp;lt;X&amp;gt; List&amp;lt;String&amp;gt; getValuesAsString(MessageQueryParameter&amp;lt;X&amp;gt; parameter) {
+		final List&amp;lt;X&amp;gt; values = parameter.getValue();
+		return values.stream().map(parameter::convertValueToString).collect(Collectors.toList());
+	}&lt;br/&gt;
+&lt;br/&gt;
+	abstract M getUnresolvedJarMessageParameters();&lt;br/&gt;
+&lt;br/&gt;
+	abstract M getJarMessageParameters(ProgramArgsParType programArgsParType);&lt;br/&gt;
+&lt;br/&gt;
+	abstract M getWrongJarMessageParameters(ProgramArgsParType programArgsParType);&lt;br/&gt;
+&lt;br/&gt;
+	abstract REQB getDefaultJarRequestBody();&lt;br/&gt;
+&lt;br/&gt;
+	abstract REQB getJarRequestBody(ProgramArgsParType programArgsParType);&lt;br/&gt;
+&lt;br/&gt;
+	abstract void handleRequest(HandlerRequest&amp;lt;REQB, M&amp;gt; request) throws Exception;&lt;br/&gt;
+&lt;br/&gt;
+	JobGraph validateDefaultGraph() {
+		JobGraph jobGraph = LAST_SUBMITTED_JOB_GRAPH_REFERENCE.getAndSet(null);
+		Assert.assertEquals(0, ParameterProgram.actualArguments.length);
+		Assert.assertEquals(ExecutionConfig.PARALLELISM_DEFAULT, getExecutionConfig(jobGraph).getParallelism());
+		return jobGraph;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	JobGraph validateGraph() {
+		JobGraph jobGraph = LAST_SUBMITTED_JOB_GRAPH_REFERENCE.getAndSet(null);
+		Assert.assertArrayEquals(PROG_ARGS, ParameterProgram.actualArguments);
+		Assert.assertEquals(PARALLELISM, getExecutionConfig(jobGraph).getParallelism());
+		return jobGraph;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private static ExecutionConfig getExecutionConfig(JobGraph jobGraph) {&lt;br/&gt;
+		ExecutionConfig executionConfig;&lt;br/&gt;
+		try {
+			executionConfig = jobGraph.getSerializedExecutionConfig().deserializeValue(ParameterProgram.class.getClassLoader());
+		} catch (Exception e) {
+			throw new AssertionError(&quot;Exception while deserializing ExecutionConfig.&quot;, e);
+		}&lt;br/&gt;
+		return executionConfig;&lt;br/&gt;
+	}&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandlerParameterTest.java b/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandlerParameterTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..1e496bff897&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarPlanHandlerParameterTest.java&lt;br/&gt;
@@ -0,0 +1,116 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.flink.configuration.Configuration;&lt;br/&gt;
+import org.apache.flink.runtime.jobgraph.jsonplan.JsonPlanGenerator;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
+import org.apache.flink.runtime.rest.messages.JobPlanInfo;&lt;br/&gt;
+import org.apache.flink.runtime.webmonitor.testutils.ParameterProgram;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.BeforeClass;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.stream.Collectors;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Tests for the parameter handling of the {@link JarPlanHandler}
&lt;p&gt;.&lt;br/&gt;
+ */&lt;br/&gt;
+public class JarPlanHandlerParameterTest extends JarHandlerParameterTest&amp;lt;JarPlanRequestBody, JarPlanMessageParameters&amp;gt; {&lt;br/&gt;
+	private static JarPlanHandler handler;&lt;br/&gt;
+&lt;br/&gt;
+	@BeforeClass&lt;br/&gt;
+	public static void setup() throws Exception &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+		init();+		handler = new JarPlanHandler(+			localAddressFuture,+			gatewayRetriever,+			timeout,+			responseHeaders,+			JarPlanHeaders.getInstance(),+			jarDir,+			new Configuration(),+			executor,+			jobGraph -&amp;gt; {
+				LAST_SUBMITTED_JOB_GRAPH_REFERENCE.set(jobGraph);
+				return new JobPlanInfo(JsonPlanGenerator.generatePlan(jobGraph));
+			});+	}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarPlanMessageParameters getUnresolvedJarMessageParameters() &lt;/p&gt;
{
+		return handler.getMessageHeaders().getUnresolvedMessageParameters();
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarPlanMessageParameters getJarMessageParameters(ProgramArgsParType programArgsParType) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+		final JarPlanMessageParameters parameters = getUnresolvedJarMessageParameters();+		parameters.entryClassQueryParameter.resolve(Collections.singletonList(ParameterProgram.class.getCanonicalName()));+		parameters.parallelismQueryParameter.resolve(Collections.singletonList(PARALLELISM));+		if (programArgsParType == ProgramArgsParType.String ||+			programArgsParType == ProgramArgsParType.Both) {
+			parameters.programArgsQueryParameter.resolve(Collections.singletonList(String.join(&quot; &quot;, PROG_ARGS)));
+		}&lt;br/&gt;
+		if (programArgsParType == ProgramArgsParType.List ||&lt;br/&gt;
+			programArgsParType == ProgramArgsParType.Both) {
+			parameters.programArgQueryParameter.resolve(Arrays.asList(PROG_ARGS));
+		}&lt;br/&gt;
+		return parameters;&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarPlanMessageParameters getWrongJarMessageParameters(ProgramArgsParType programArgsParType) {&lt;br/&gt;
+		List&amp;lt;String&amp;gt; wrongArgs = Arrays.stream(PROG_ARGS).map(a -&amp;gt; a + &quot;wrong&quot;).collect(Collectors.toList());&lt;br/&gt;
+		String argsWrongStr = String.join(&quot; &quot;, wrongArgs);&lt;br/&gt;
+		final JarPlanMessageParameters parameters = getUnresolvedJarMessageParameters();&lt;br/&gt;
+		parameters.entryClassQueryParameter.resolve(Collections.singletonList(&quot;please.dont.run.me&quot;));&lt;br/&gt;
+		parameters.parallelismQueryParameter.resolve(Collections.singletonList(64));&lt;br/&gt;
+		if (programArgsParType == ProgramArgsParType.String || programArgsParType == ProgramArgsParType.Both) {
+			parameters.programArgsQueryParameter.resolve(Collections.singletonList(argsWrongStr));
+		}&lt;br/&gt;
+		if (programArgsParType == ProgramArgsParType.List ||&lt;br/&gt;
+			programArgsParType == ProgramArgsParType.Both) {
+			parameters.programArgQueryParameter.resolve(wrongArgs);
+		}&lt;br/&gt;
+		return parameters;&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarPlanRequestBody getDefaultJarRequestBody() {
+		return new JarPlanRequestBody();
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarPlanRequestBody getJarRequestBody(ProgramArgsParType programArgsParType) {
+		return new JarPlanRequestBody(
+			ParameterProgram.class.getCanonicalName(),
+			getProgramArgsString(programArgsParType),
+			getProgramArgsList(programArgsParType),
+			PARALLELISM);
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Override&lt;br/&gt;
+	void handleRequest(HandlerRequest&amp;lt;JarPlanRequestBody, JarPlanMessageParameters&amp;gt; request)&lt;br/&gt;
+		throws Exception {
+		handler.handleRequest(request, restfulGateway).get();
+	}&lt;br/&gt;
+}&lt;br/&gt;
+&lt;br/&gt;
diff --git a/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandlerParameterTest.java b/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandlerParameterTest.java&lt;br/&gt;
index 8bb358a543c..c36f7c7802e 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandlerParameterTest.java&lt;br/&gt;
+++ b/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunHandlerParameterTest.java&lt;br/&gt;
@@ -18,89 +18,39 @@&lt;br/&gt;
 &lt;br/&gt;
 package org.apache.flink.runtime.webmonitor.handlers;&lt;br/&gt;
 &lt;br/&gt;
-import org.apache.flink.api.common.ExecutionConfig;&lt;br/&gt;
 import org.apache.flink.api.common.time.Time;&lt;br/&gt;
-import org.apache.flink.configuration.BlobServerOptions;&lt;br/&gt;
 import org.apache.flink.configuration.Configuration;&lt;br/&gt;
-import org.apache.flink.runtime.dispatcher.DispatcherGateway;&lt;br/&gt;
 import org.apache.flink.runtime.jobgraph.JobGraph;&lt;br/&gt;
 import org.apache.flink.runtime.jobgraph.SavepointRestoreSettings;&lt;br/&gt;
-import org.apache.flink.runtime.messages.Acknowledge;&lt;br/&gt;
 import org.apache.flink.runtime.rest.handler.HandlerRequest;&lt;br/&gt;
-import org.apache.flink.runtime.rest.handler.HandlerRequestException;&lt;br/&gt;
-import org.apache.flink.runtime.rest.messages.MessageParameter;&lt;br/&gt;
-import org.apache.flink.runtime.rest.messages.MessageQueryParameter;&lt;br/&gt;
 import org.apache.flink.runtime.testingUtils.TestingUtils;&lt;br/&gt;
-import org.apache.flink.runtime.util.BlobServerResource;&lt;br/&gt;
 import org.apache.flink.runtime.webmonitor.TestingDispatcherGateway;&lt;br/&gt;
 import org.apache.flink.runtime.webmonitor.retriever.GatewayRetriever;&lt;br/&gt;
 import org.apache.flink.runtime.webmonitor.testutils.ParameterProgram;&lt;br/&gt;
-import org.apache.flink.util.TestLogger;&lt;br/&gt;
-import org.apache.flink.util.function.SupplierWithException;&lt;br/&gt;
-import org.apache.flink.util.function.ThrowingConsumer;&lt;br/&gt;
 &lt;br/&gt;
 import org.junit.Assert;&lt;br/&gt;
-import org.junit.Before;&lt;br/&gt;
 import org.junit.BeforeClass;&lt;br/&gt;
-import org.junit.ClassRule;&lt;br/&gt;
-import org.junit.Test;&lt;br/&gt;
-import org.junit.rules.TemporaryFolder;&lt;br/&gt;
 &lt;br/&gt;
-import java.nio.file.Files;&lt;br/&gt;
-import java.nio.file.Path;&lt;br/&gt;
-import java.nio.file.Paths;&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
 import java.util.Collections;&lt;br/&gt;
 import java.util.List;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
 import java.util.concurrent.CompletableFuture;&lt;br/&gt;
 import java.util.concurrent.Executor;&lt;br/&gt;
-import java.util.concurrent.atomic.AtomicReference;&lt;br/&gt;
 import java.util.stream.Collectors;&lt;br/&gt;
 &lt;br/&gt;
 /**&lt;br/&gt;
  * Tests for the parameter handling of the {@link JarRunHandler}.&lt;br/&gt;
  */&lt;br/&gt;
-public class JarRunHandlerParameterTest extends TestLogger {&lt;br/&gt;
+public class JarRunHandlerParameterTest extends JarHandlerParameterTest&amp;lt;JarRunRequestBody, JarRunMessageParameters&amp;gt; {&lt;br/&gt;
+	private static final boolean ALLOW_NON_RESTORED_STATE_QUERY = true;&lt;br/&gt;
+	private static final String RESTORE_PATH = &quot;/foo/bar&quot;;&lt;br/&gt;
 &lt;br/&gt;
-	@ClassRule&lt;br/&gt;
-	public static final TemporaryFolder TMP = new TemporaryFolder();&lt;br/&gt;
-&lt;br/&gt;
-	@ClassRule&lt;br/&gt;
-	public static final BlobServerResource BLOB_SERVER_RESOURCE = new BlobServerResource();&lt;br/&gt;
-&lt;br/&gt;
-	private static final AtomicReference&amp;lt;JobGraph&amp;gt; lastSubmittedJobGraphReference = new AtomicReference&amp;lt;&amp;gt;();&lt;br/&gt;
 	private static JarRunHandler handler;&lt;br/&gt;
-	private static Path jarWithManifest;&lt;br/&gt;
-	private static Path jarWithoutManifest;&lt;br/&gt;
-	private static TestingDispatcherGateway restfulGateway;&lt;br/&gt;
 &lt;br/&gt;
 	@BeforeClass&lt;br/&gt;
 	public static void setup() throws Exception {&lt;br/&gt;
-		Path jarDir = TMP.newFolder().toPath();&lt;br/&gt;
-&lt;br/&gt;
-		// properties are set property by surefire plugin&lt;br/&gt;
-		final String parameterProgramJarName = System.getProperty(&quot;parameterJarName&quot;) + &quot;.jar&quot;;&lt;br/&gt;
-		final String parameterProgramWithoutManifestJarName = System.getProperty(&quot;parameterJarWithoutManifestName&quot;) + &quot;.jar&quot;;&lt;br/&gt;
-		final Path jarLocation = Paths.get(System.getProperty(&quot;targetDir&quot;));&lt;br/&gt;
-&lt;br/&gt;
-		jarWithManifest = Files.copy(&lt;br/&gt;
-			jarLocation.resolve(parameterProgramJarName),&lt;br/&gt;
-			jarDir.resolve(&quot;program-with-manifest.jar&quot;));&lt;br/&gt;
-		jarWithoutManifest = Files.copy(&lt;br/&gt;
-			jarLocation.resolve(parameterProgramWithoutManifestJarName),&lt;br/&gt;
-			jarDir.resolve(&quot;program-without-manifest.jar&quot;));&lt;br/&gt;
-&lt;br/&gt;
-		Configuration config = new Configuration();&lt;br/&gt;
-		config.setString(BlobServerOptions.STORAGE_DIRECTORY,&lt;br/&gt;
-			TMP.newFolder().getAbsolutePath());&lt;br/&gt;
-&lt;br/&gt;
-		restfulGateway = new TestingDispatcherGateway.Builder()&lt;br/&gt;
-			.setBlobServerPort(BLOB_SERVER_RESOURCE.getBlobServerPort())&lt;br/&gt;
-			.setSubmitFunction(jobGraph -&amp;gt; {
-				lastSubmittedJobGraphReference.set(jobGraph);
-				return CompletableFuture.completedFuture(Acknowledge.get());
-			})&lt;br/&gt;
-			.build();&lt;br/&gt;
+		init();&lt;br/&gt;
 		final GatewayRetriever&amp;lt;TestingDispatcherGateway&amp;gt; gatewayRetriever = () -&amp;gt; CompletableFuture.completedFuture(restfulGateway);&lt;br/&gt;
 		final CompletableFuture&amp;lt;String&amp;gt; localAddressFuture = CompletableFuture.completedFuture(&quot;shazam://localhost:12345&quot;);&lt;br/&gt;
 		final Time timeout = Time.seconds(10);&lt;br/&gt;
@@ -118,197 +68,87 @@ public static void setup() throws Exception {
 			executor);
 	}&lt;br/&gt;
 &lt;br/&gt;
-	@Before&lt;br/&gt;
-	public void reset() {&lt;br/&gt;
-		ParameterProgram.actualArguments = null;&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarRunMessageParameters getUnresolvedJarMessageParameters() {
+		return handler.getMessageHeaders().getUnresolvedMessageParameters();
 	}&lt;br/&gt;
 &lt;br/&gt;
-	@Test&lt;br/&gt;
-	public void testDefaultParameters() throws Exception {&lt;br/&gt;
-		// baseline, ensure that reasonable defaults are chosen&lt;br/&gt;
-		sendRequestAndValidateGraph(&lt;br/&gt;
-			handler,&lt;br/&gt;
-			restfulGateway,&lt;br/&gt;
-			() -&amp;gt; createRequest(&lt;br/&gt;
-				new JarRunRequestBody(),&lt;br/&gt;
-				JarRunHeaders.getInstance().getUnresolvedMessageParameters(),&lt;br/&gt;
-				jarWithManifest&lt;br/&gt;
-			),&lt;br/&gt;
-			jobGraph -&amp;gt; {
-				Assert.assertEquals(0, ParameterProgram.actualArguments.length);
-
-				Assert.assertEquals(ExecutionConfig.PARALLELISM_DEFAULT, getExecutionConfig(jobGraph).getParallelism());
-
-				final SavepointRestoreSettings savepointRestoreSettings = jobGraph.getSavepointRestoreSettings();
-				Assert.assertFalse(savepointRestoreSettings.allowNonRestoredState());
-				Assert.assertNull(savepointRestoreSettings.getRestorePath());
-			}&lt;br/&gt;
-		);&lt;br/&gt;
-	}&lt;br/&gt;
-&lt;br/&gt;
-	@Test&lt;br/&gt;
-	public void testConfigurationViaQueryParameters() throws Exception {&lt;br/&gt;
-		// configure submission via query parameters&lt;br/&gt;
-		sendRequestAndValidateGraph(&lt;br/&gt;
-			handler,&lt;br/&gt;
-			restfulGateway,&lt;br/&gt;
-			() -&amp;gt; {
-				final JarRunMessageParameters parameters = JarRunHeaders.getInstance().getUnresolvedMessageParameters();
-				parameters.allowNonRestoredStateQueryParameter.resolve(Collections.singletonList(true));
-				parameters.savepointPathQueryParameter.resolve(Collections.singletonList(&quot;/foo/bar&quot;));
-				parameters.entryClassQueryParameter.resolve(Collections.singletonList(ParameterProgram.class.getCanonicalName()));
-				parameters.parallelismQueryParameter.resolve(Collections.singletonList(4));
-				parameters.programArgsQueryParameter.resolve(Collections.singletonList(&quot;--host localhost --port 1234&quot;));
-
-				return createRequest(
-					new JarRunRequestBody(),
-					parameters,
-					jarWithoutManifest
-				);
-			},&lt;br/&gt;
-			jobGraph -&amp;gt; {
-				Assert.assertEquals(4, ParameterProgram.actualArguments.length);
-				Assert.assertEquals(&quot;--host&quot;, ParameterProgram.actualArguments[0]);
-				Assert.assertEquals(&quot;localhost&quot;, ParameterProgram.actualArguments[1]);
-				Assert.assertEquals(&quot;--port&quot;, ParameterProgram.actualArguments[2]);
-				Assert.assertEquals(&quot;1234&quot;, ParameterProgram.actualArguments[3]);
-
-				Assert.assertEquals(4, getExecutionConfig(jobGraph).getParallelism());
-
-				final SavepointRestoreSettings savepointRestoreSettings = jobGraph.getSavepointRestoreSettings();
-				Assert.assertTrue(savepointRestoreSettings.allowNonRestoredState());
-				Assert.assertEquals(&quot;/foo/bar&quot;, savepointRestoreSettings.getRestorePath());
-			}&lt;br/&gt;
-		);&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarRunMessageParameters getJarMessageParameters(ProgramArgsParType programArgsParType) {&lt;br/&gt;
+		final JarRunMessageParameters parameters = getUnresolvedJarMessageParameters();&lt;br/&gt;
+		parameters.allowNonRestoredStateQueryParameter.resolve(Collections.singletonList(ALLOW_NON_RESTORED_STATE_QUERY));&lt;br/&gt;
+		parameters.savepointPathQueryParameter.resolve(Collections.singletonList(RESTORE_PATH));&lt;br/&gt;
+		parameters.entryClassQueryParameter.resolve(Collections.singletonList(ParameterProgram.class.getCanonicalName()));&lt;br/&gt;
+		parameters.parallelismQueryParameter.resolve(Collections.singletonList(PARALLELISM));&lt;br/&gt;
+		if (programArgsParType == ProgramArgsParType.String ||&lt;br/&gt;
+			programArgsParType == ProgramArgsParType.Both) {+			parameters.programArgsQueryParameter.resolve(Collections.singletonList(String.join(&quot; &quot;, PROG_ARGS)));+		}+		if (programArgsParType == ProgramArgsParType.List ||+			programArgsParType == ProgramArgsParType.Both) {
+			parameters.programArgQueryParameter.resolve(Arrays.asList(PROG_ARGS));
+		}+		return parameters; 	}&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@Test&lt;/li&gt;
	&lt;li&gt;public void testConfigurationViaJsonRequest() throws Exception {&lt;/li&gt;
	&lt;li&gt;sendRequestAndValidateGraph(&lt;/li&gt;
	&lt;li&gt;handler,&lt;/li&gt;
	&lt;li&gt;restfulGateway,&lt;/li&gt;
	&lt;li&gt;() -&amp;gt; 
{
-				final JarRunRequestBody jsonRequest = new JarRunRequestBody(
-					ParameterProgram.class.getCanonicalName(),
-					&quot;--host localhost --port 1234&quot;,
-					4,
-					true,
-					&quot;/foo/bar&quot;
-				);
-
-				return createRequest(
-					jsonRequest,
-					JarRunHeaders.getInstance().getUnresolvedMessageParameters(),
-					jarWithoutManifest
-				);
-			}
&lt;p&gt;,&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;jobGraph -&amp;gt; 
{
-				Assert.assertEquals(4, ParameterProgram.actualArguments.length);
-				Assert.assertEquals(&quot;--host&quot;, ParameterProgram.actualArguments[0]);
-				Assert.assertEquals(&quot;localhost&quot;, ParameterProgram.actualArguments[1]);
-				Assert.assertEquals(&quot;--port&quot;, ParameterProgram.actualArguments[2]);
-				Assert.assertEquals(&quot;1234&quot;, ParameterProgram.actualArguments[3]);
-
-				Assert.assertEquals(4, getExecutionConfig(jobGraph).getParallelism());
-
-				final SavepointRestoreSettings savepointRestoreSettings = jobGraph.getSavepointRestoreSettings();
-				Assert.assertTrue(savepointRestoreSettings.allowNonRestoredState());
-				Assert.assertEquals(&quot;/foo/bar&quot;, savepointRestoreSettings.getRestorePath());
-			}&lt;br/&gt;
-		);&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarRunMessageParameters getWrongJarMessageParameters(ProgramArgsParType programArgsParType) {&lt;br/&gt;
+		List&amp;lt;String&amp;gt; wrongArgs = Arrays.stream(PROG_ARGS).map(a -&amp;gt; a + &quot;wrong&quot;).collect(Collectors.toList());&lt;br/&gt;
+		String argsWrongStr = String.join(&quot; &quot;, wrongArgs);&lt;br/&gt;
+		final JarRunMessageParameters parameters = getUnresolvedJarMessageParameters();&lt;br/&gt;
+		parameters.allowNonRestoredStateQueryParameter.resolve(Collections.singletonList(false));&lt;br/&gt;
+		parameters.savepointPathQueryParameter.resolve(Collections.singletonList(&quot;/no/uh&quot;));&lt;br/&gt;
+		parameters.entryClassQueryParameter.resolve(Collections.singletonList(&quot;please.dont.run.me&quot;));&lt;br/&gt;
+		parameters.parallelismQueryParameter.resolve(Collections.singletonList(64));&lt;br/&gt;
+		if (programArgsParType == ProgramArgsParType.String ||&lt;br/&gt;
+			programArgsParType == ProgramArgsParType.Both) {
+			parameters.programArgsQueryParameter.resolve(Collections.singletonList(argsWrongStr));
+		}&lt;br/&gt;
+		if (programArgsParType == ProgramArgsParType.List ||&lt;br/&gt;
+			programArgsParType == ProgramArgsParType.Both) {
+			parameters.programArgQueryParameter.resolve(wrongArgs);
+		}&lt;br/&gt;
+		return parameters;&lt;br/&gt;
 	}&lt;br/&gt;
 &lt;br/&gt;
-	@Test&lt;br/&gt;
-	public void testParameterPrioritization() throws Exception {&lt;br/&gt;
-		// configure submission via query parameters and JSON request, JSON should be prioritized&lt;br/&gt;
-		sendRequestAndValidateGraph(&lt;br/&gt;
-			handler,&lt;br/&gt;
-			restfulGateway,&lt;br/&gt;
-			() -&amp;gt; {
-				final JarRunRequestBody jsonRequest = new JarRunRequestBody(
-					ParameterProgram.class.getCanonicalName(),
-					&quot;--host localhost --port 1234&quot;,
-					4,
-					true,
-					&quot;/foo/bar&quot;
-				);
-
-				final JarRunMessageParameters parameters = JarRunHeaders.getInstance().getUnresolvedMessageParameters();
-				parameters.allowNonRestoredStateQueryParameter.resolve(Collections.singletonList(false));
-				parameters.savepointPathQueryParameter.resolve(Collections.singletonList(&quot;/no/uh&quot;));
-				parameters.entryClassQueryParameter.resolve(Collections.singletonList(&quot;please.dont.run.me&quot;));
-				parameters.parallelismQueryParameter.resolve(Collections.singletonList(64));
-				parameters.programArgsQueryParameter.resolve(Collections.singletonList(&quot;--host wrong --port wrong&quot;));
-
-				return createRequest(
-					jsonRequest,
-					parameters,
-					jarWithoutManifest
-				);
-			},&lt;br/&gt;
-			jobGraph -&amp;gt; {-				Assert.assertEquals(4, ParameterProgram.actualArguments.length);-				Assert.assertEquals(&quot;--host&quot;, ParameterProgram.actualArguments[0]);-				Assert.assertEquals(&quot;localhost&quot;, ParameterProgram.actualArguments[1]);-				Assert.assertEquals(&quot;--port&quot;, ParameterProgram.actualArguments[2]);-				Assert.assertEquals(&quot;1234&quot;, ParameterProgram.actualArguments[3]);--				Assert.assertEquals(4, getExecutionConfig(jobGraph).getParallelism());--				final SavepointRestoreSettings savepointRestoreSettings = jobGraph.getSavepointRestoreSettings();-				Assert.assertTrue(savepointRestoreSettings.allowNonRestoredState());-				Assert.assertEquals(&quot;/foo/bar&quot;, savepointRestoreSettings.getRestorePath());-			}&lt;/li&gt;
	&lt;li&gt;);&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarRunRequestBody getDefaultJarRequestBody() 
{
+		return new JarRunRequestBody();
 	}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static HandlerRequest&amp;lt;JarRunRequestBody, JarRunMessageParameters&amp;gt; createRequest(&lt;/li&gt;
	&lt;li&gt;JarRunRequestBody requestBody,&lt;/li&gt;
	&lt;li&gt;JarRunMessageParameters parameters,&lt;/li&gt;
	&lt;li&gt;Path jar) throws HandlerRequestException {&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;final Map&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt; queryParameterAsMap = parameters.getQueryParameters().stream()&lt;/li&gt;
	&lt;li&gt;.filter(MessageParameter::isResolved)&lt;/li&gt;
	&lt;li&gt;.collect(Collectors.toMap(&lt;/li&gt;
	&lt;li&gt;MessageParameter::getKey,&lt;/li&gt;
	&lt;li&gt;JarRunHandlerParameterTest::getValuesAsString&lt;/li&gt;
	&lt;li&gt;));&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;return new HandlerRequest&amp;lt;&amp;gt;(&lt;/li&gt;
	&lt;li&gt;requestBody,&lt;/li&gt;
	&lt;li&gt;JarRunHeaders.getInstance().getUnresolvedMessageParameters(),&lt;/li&gt;
	&lt;li&gt;Collections.singletonMap(JarIdPathParameter.KEY, jar.getFileName().toString()),&lt;/li&gt;
	&lt;li&gt;queryParameterAsMap,&lt;/li&gt;
	&lt;li&gt;Collections.emptyList()&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JarRunRequestBody getJarRequestBody(ProgramArgsParType programArgsParType) 
{
+		return new JarRunRequestBody(
+			ParameterProgram.class.getCanonicalName(),
+			getProgramArgsString(programArgsParType),
+			getProgramArgsList(programArgsParType),
+			PARALLELISM,
+			ALLOW_NON_RESTORED_STATE_QUERY,
+			RESTORE_PATH
 		);
 	}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static void sendRequestAndValidateGraph(&lt;/li&gt;
	&lt;li&gt;JarRunHandler handler,&lt;/li&gt;
	&lt;li&gt;DispatcherGateway dispatcherGateway,&lt;/li&gt;
	&lt;li&gt;SupplierWithException&amp;lt;HandlerRequest&amp;lt;JarRunRequestBody, JarRunMessageParameters&amp;gt;, HandlerRequestException&amp;gt; requestSupplier,&lt;/li&gt;
	&lt;li&gt;ThrowingConsumer&amp;lt;JobGraph, AssertionError&amp;gt; validator) throws Exception {&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;handler.handleRequest(requestSupplier.get(), dispatcherGateway)&lt;/li&gt;
	&lt;li&gt;.get();&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;JobGraph submittedJobGraph = lastSubmittedJobGraphReference.getAndSet(null);&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;validator.accept(submittedJobGraph);&lt;br/&gt;
+	@Override&lt;br/&gt;
+	void handleRequest(HandlerRequest&amp;lt;JarRunRequestBody, JarRunMessageParameters&amp;gt; request)&lt;br/&gt;
+		throws Exception 
{
+		handler.handleRequest(request, restfulGateway).get();
 	}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static ExecutionConfig getExecutionConfig(JobGraph jobGraph) {&lt;/li&gt;
	&lt;li&gt;ExecutionConfig executionConfig;&lt;/li&gt;
	&lt;li&gt;try 
{
-			executionConfig = jobGraph.getSerializedExecutionConfig().deserializeValue(ParameterProgram.class.getClassLoader());
-		}
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
-			throw new AssertionError(&quot;Exception while deserializing ExecutionConfig.&quot;, e);
-		}&lt;/li&gt;
	&lt;li&gt;return executionConfig;&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JobGraph validateDefaultGraph() 
{
+		JobGraph jobGraph = super.validateDefaultGraph();
+		final SavepointRestoreSettings savepointRestoreSettings = jobGraph.getSavepointRestoreSettings();
+		Assert.assertFalse(savepointRestoreSettings.allowNonRestoredState());
+		Assert.assertNull(savepointRestoreSettings.getRestorePath());
+		return jobGraph;
 	}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static &amp;lt;X&amp;gt; List&amp;lt;String&amp;gt; getValuesAsString(MessageQueryParameter&amp;lt;X&amp;gt; parameter) {&lt;/li&gt;
	&lt;li&gt;final List&amp;lt;X&amp;gt; values = parameter.getValue();&lt;/li&gt;
	&lt;li&gt;return values.stream().map(parameter::convertValueToString).collect(Collectors.toList());&lt;br/&gt;
+	@Override&lt;br/&gt;
+	JobGraph validateGraph() 
{
+		JobGraph jobGraph = super.validateGraph();
+		final SavepointRestoreSettings savepointRestoreSettings = jobGraph.getSavepointRestoreSettings();
+		Assert.assertTrue(savepointRestoreSettings.allowNonRestoredState());
+		Assert.assertEquals(RESTORE_PATH, savepointRestoreSettings.getRestorePath());
+		return jobGraph;
 	}
&lt;p&gt; }&lt;br/&gt;
diff --git a/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunRequestBodyTest.java b/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunRequestBodyTest.java&lt;br/&gt;
index 0706873c0fa..18fcd97d340 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunRequestBodyTest.java&lt;br/&gt;
+++ b/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarRunRequestBodyTest.java&lt;br/&gt;
@@ -20,6 +20,8 @@&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import org.apache.flink.runtime.rest.messages.RestRequestMarshallingTestBase;&lt;/p&gt;

&lt;p&gt;+import java.util.Arrays;&lt;br/&gt;
+&lt;br/&gt;
 import static org.junit.Assert.assertEquals;&lt;/p&gt;

&lt;p&gt; /**&lt;br/&gt;
@@ -33,10 +35,11 @@&lt;br/&gt;
 	}&lt;/p&gt;

&lt;p&gt; 	@Override&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;protected JarRunRequestBody getTestRequestInstance() throws Exception {&lt;br/&gt;
+	protected JarRunRequestBody getTestRequestInstance() {&lt;br/&gt;
 		return new JarRunRequestBody(&lt;br/&gt;
 			&quot;hello&quot;,&lt;br/&gt;
 			&quot;world&quot;,&lt;br/&gt;
+			Arrays.asList(&quot;boo&quot;, &quot;far&quot;),&lt;br/&gt;
 			4,&lt;br/&gt;
 			true,&lt;br/&gt;
 			&quot;foo/bar&quot;&lt;br/&gt;
@@ -49,6 +52,7 @@ protected void assertOriginalEqualsToUnmarshalled(&lt;br/&gt;
 			final JarRunRequestBody actual) {&lt;br/&gt;
 		assertEquals(expected.getEntryClassName(), actual.getEntryClassName());&lt;br/&gt;
 		assertEquals(expected.getProgramArguments(), actual.getProgramArguments());&lt;br/&gt;
+		assertEquals(expected.getProgramArgumentsList(), actual.getProgramArgumentsList());&lt;br/&gt;
 		assertEquals(expected.getParallelism(), actual.getParallelism());&lt;br/&gt;
 		assertEquals(expected.getAllowNonRestoredState(), actual.getAllowNonRestoredState());&lt;br/&gt;
 		assertEquals(expected.getSavepointPath(), actual.getSavepointPath());&lt;br/&gt;
diff --git a/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarSubmissionITCase.java b/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarSubmissionITCase.java&lt;br/&gt;
index e64c708dbe7..0753c494c63 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarSubmissionITCase.java&lt;br/&gt;
+++ b/flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/handlers/JarSubmissionITCase.java&lt;br/&gt;
@@ -127,8 +127,8 @@ private static JarListInfo listJars(JarListHandler handler, RestfulGateway restf&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 	private static JobPlanInfo showPlan(JarPlanHandler handler, String jarName, RestfulGateway restfulGateway) throws Exception &lt;/p&gt;
{
 		JarPlanMessageParameters planParameters = JarPlanHeaders.getInstance().getUnresolvedMessageParameters();
-		HandlerRequest&amp;lt;EmptyRequestBody, JarPlanMessageParameters&amp;gt; planRequest = new HandlerRequest&amp;lt;&amp;gt;(
-			EmptyRequestBody.getInstance(),
+		HandlerRequest&amp;lt;JarPlanRequestBody, JarPlanMessageParameters&amp;gt; planRequest = new HandlerRequest&amp;lt;&amp;gt;(
+			new JarPlanRequestBody(),
 			planParameters,
 			Collections.singletonMap(planParameters.jarIdPathParameter.getKey(), jarName),
 			Collections.emptyMap(),
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/util/HandlerRequestUtils.java b/flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/util/HandlerRequestUtils.java
index c738df821bb..8b18f9907f5 100644
--- a/flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/util/HandlerRequestUtils.java
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/util/HandlerRequestUtils.java
@@ -23,9 +23,12 @@
 import org.apache.flink.runtime.rest.messages.MessageParameters;
 import org.apache.flink.runtime.rest.messages.MessageQueryParameter;
 import org.apache.flink.runtime.rest.messages.RequestBody;
+import org.apache.flink.util.function.SupplierWithException;
 
 import org.apache.flink.shaded.netty4.io.netty.handler.codec.http.HttpResponseStatus;
 
+import org.slf4j.Logger;
+
 import java.util.List;
 
 /**
@@ -63,4 +66,26 @@
 		return value;
 	}

&lt;p&gt;+	/**&lt;br/&gt;
+	 * Returns &lt;/p&gt;
{@code requestValue}
&lt;p&gt; if it is not null, otherwise returns the query parameter value&lt;br/&gt;
+	 * if it is not null, otherwise returns the default value.&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static &amp;lt;T&amp;gt; T fromRequestBodyOrQueryParameter(&lt;br/&gt;
+			T requestValue,&lt;br/&gt;
+			SupplierWithException&amp;lt;T, RestHandlerException&amp;gt; queryParameterExtractor,&lt;br/&gt;
+			T defaultValue,&lt;br/&gt;
+			Logger log) throws RestHandlerException {&lt;br/&gt;
+		if (requestValue != null) &lt;/p&gt;
{
+			return requestValue;
+		}
&lt;p&gt; else {&lt;br/&gt;
+			T queryParameterValue = queryParameterExtractor.get();&lt;br/&gt;
+			if (queryParameterValue != null) &lt;/p&gt;
{
+				log.warn(&quot;Configuring the job submission via query parameters is deprecated.&quot; +
+					&quot; Please migrate to submitting a JSON request instead.&quot;);
+				return queryParameterValue;
+			}
&lt;p&gt; else &lt;/p&gt;
{
+				return defaultValue;
+			}
&lt;p&gt;+		}&lt;br/&gt;
+	}&lt;br/&gt;
 }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16643529" author="zentol" created="Tue, 9 Oct 2018 14:42:34 +0000"  >&lt;p&gt;master: a887b7f33b029005c46c9e8d13669d7b61eadb78&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13190152">FLINK-10515</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12938622" name="sample_request.txt" size="1301" author="grvsinghania" created="Thu, 6 Sep 2018 09:28:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xsmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>