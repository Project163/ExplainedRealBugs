<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6578] SharedBuffer creates self-loops when having elements with same value/timestamp.</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6578</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;This is a test that fails with the current implementation due to the fact that the looping state accepts the two &lt;tt&gt;middleEvent1&lt;/tt&gt; elements but the shared buffer cannot distinguish between them and gets trapped in an infinite loop leading to running out of memory.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testEagerZeroOrMoreSameElement() {
		List&amp;lt;StreamRecord&amp;lt;Event&amp;gt;&amp;gt; inputEvents = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;();

		Event startEvent = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Event(40, &lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;, 1.0);
		Event middleEvent1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Event(41, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, 2.0);
		Event middleEvent2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Event(42, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, 3.0);
		Event middleEvent3 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Event(43, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, 4.0);
		Event end1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Event(44, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;, 5.0);

		inputEvents.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamRecord&amp;lt;&amp;gt;(startEvent, 1));
		inputEvents.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamRecord&amp;lt;&amp;gt;(middleEvent1, 3));
		inputEvents.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamRecord&amp;lt;&amp;gt;(middleEvent1, 3));
		inputEvents.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamRecord&amp;lt;&amp;gt;(middleEvent1, 3));
		inputEvents.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamRecord&amp;lt;&amp;gt;(middleEvent2, 4));
		inputEvents.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamRecord&amp;lt;&amp;gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Event(50, &lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;, 6.0), 5));
		inputEvents.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamRecord&amp;lt;&amp;gt;(middleEvent3, 6));
		inputEvents.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamRecord&amp;lt;&amp;gt;(middleEvent3, 6));
		inputEvents.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamRecord&amp;lt;&amp;gt;(end1, 7));

		Pattern&amp;lt;Event, ?&amp;gt; pattern = Pattern.&amp;lt;Event&amp;gt;begin(&lt;span class=&quot;code-quote&quot;&gt;&quot;start&quot;&lt;/span&gt;).where(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleCondition&amp;lt;Event&amp;gt;() {
			&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; serialVersionUID = 5726188262756267490L;

			@Override
			&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; filter(Event value) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
				&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value.getName().equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;);
			}
		}).followedBy(&lt;span class=&quot;code-quote&quot;&gt;&quot;middle&quot;&lt;/span&gt;).where(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleCondition&amp;lt;Event&amp;gt;() {
			&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; serialVersionUID = 5726188262756267490L;

			@Override
			&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; filter(Event value) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
				&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value.getName().equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;);
			}
		}).oneOrMore().optional().followedBy(&lt;span class=&quot;code-quote&quot;&gt;&quot;end1&quot;&lt;/span&gt;).where(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleCondition&amp;lt;Event&amp;gt;() {
			&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; serialVersionUID = 5726188262756267490L;

			@Override
			&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; filter(Event value) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
				&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value.getName().equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;);
			}
		});

		NFA&amp;lt;Event&amp;gt; nfa = NFACompiler.compile(pattern, Event.createTypeSerializer(), &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);

		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; List&amp;lt;List&amp;lt;Event&amp;gt;&amp;gt; resultingPatterns = feedNFA(inputEvents, nfa);

		compareMaps(resultingPatterns, Lists.&amp;lt;List&amp;lt;Event&amp;gt;&amp;gt;newArrayList(
				Lists.newArrayList(startEvent, middleEvent1, middleEvent1, middleEvent1, middleEvent2, middleEvent3, middleEvent3, end1),
				Lists.newArrayList(startEvent, middleEvent1, middleEvent1, middleEvent1, middleEvent2, middleEvent3, end1),
				Lists.newArrayList(startEvent, middleEvent1, middleEvent1, middleEvent1, middleEvent2, end1),
				Lists.newArrayList(startEvent, middleEvent1, middleEvent1, middleEvent1, end1),
				Lists.newArrayList(startEvent, middleEvent1, middleEvent1, end1),
				Lists.newArrayList(startEvent, middleEvent1, end1),
				Lists.newArrayList(startEvent, end1)
		));
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13071822">FLINK-6578</key>
            <summary>SharedBuffer creates self-loops when having elements with same value/timestamp.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkl0u">Kostas Kloudas</assignee>
                                    <reporter username="kkl0u">Kostas Kloudas</reporter>
                        <labels>
                    </labels>
                <created>Sun, 14 May 2017 15:34:50 +0000</created>
                <updated>Thu, 18 May 2017 09:09:59 +0000</updated>
                            <resolved>Wed, 17 May 2017 12:58:32 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>Library / CEP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16010482" author="githubbot" created="Mon, 15 May 2017 13:15:24 +0000"  >&lt;p&gt;GitHub user kl0u opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3909&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3909&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6578&quot; title=&quot;SharedBuffer creates self-loops when having elements with same value/timestamp.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6578&quot;&gt;&lt;del&gt;FLINK-6578&lt;/del&gt;&lt;/a&gt; Fix self-loop handling in SharedBuffer.&lt;/p&gt;

&lt;p&gt;    This RP addresses: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6371&quot; title=&quot;Return matched patterns as Map&amp;lt;String, List&amp;lt;T&amp;gt;&amp;gt; instead of Map&amp;lt;String, T&amp;gt; &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6371&quot;&gt;&lt;del&gt;FLINK-6371&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6536&quot; title=&quot;Improve error message in SharedBuffer::put()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6536&quot;&gt;&lt;del&gt;FLINK-6536&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6255&quot; title=&quot;Remove PatternStream.getSideOutput()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6255&quot;&gt;&lt;del&gt;FLINK-6255&lt;/del&gt;&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6578&quot; title=&quot;SharedBuffer creates self-loops when having elements with same value/timestamp.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6578&quot;&gt;&lt;del&gt;FLINK-6578&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;    R @dawidwys &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kl0u/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kl0u/flink&lt;/a&gt; cep-uber-pr&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3909.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3909.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3909&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit dd1784e20baeab97c6af36bd110cff95a2aa1731&lt;br/&gt;
Author: kl0u &amp;lt;kkloudas@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-05-05T11:55:07Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6371&quot; title=&quot;Return matched patterns as Map&amp;lt;String, List&amp;lt;T&amp;gt;&amp;gt; instead of Map&amp;lt;String, T&amp;gt; &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6371&quot;&gt;&lt;del&gt;FLINK-6371&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;cep&amp;#93;&lt;/span&gt; NFA return matched patterns as Map&amp;lt;String, List&amp;lt;T&amp;gt;&amp;gt;.&lt;/p&gt;

&lt;p&gt;commit bd7b5270a37a3f134e214aea0e17f1efd9395bbf&lt;br/&gt;
Author: kl0u &amp;lt;kkloudas@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-05-11T09:39:00Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6536&quot; title=&quot;Improve error message in SharedBuffer::put()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6536&quot;&gt;&lt;del&gt;FLINK-6536&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;cep&amp;#93;&lt;/span&gt; Improve error message in SharedBuffer::put().&lt;/p&gt;

&lt;p&gt;commit 72a23bd98cee6a94d31c31b2ea8ff0ddb9757186&lt;br/&gt;
Author: kl0u &amp;lt;kkloudas@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-05-12T14:01:38Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6255&quot; title=&quot;Remove PatternStream.getSideOutput()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6255&quot;&gt;&lt;del&gt;FLINK-6255&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;cep&amp;#93;&lt;/span&gt; Remove PatternStream.getSideOutput().&lt;/p&gt;

&lt;p&gt;commit 96299aa50307119f7bc0654c3ec2acb00f06c68f&lt;br/&gt;
Author: kkloudas &amp;lt;kkloudas@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-05-15T12:33:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6578&quot; title=&quot;SharedBuffer creates self-loops when having elements with same value/timestamp.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6578&quot;&gt;&lt;del&gt;FLINK-6578&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;cep&amp;#93;&lt;/span&gt; Fix self-loop handling in SharedBuffer.&lt;/p&gt;

&lt;p&gt;commit 07f73391e5c80afda9800b4dc2cde41da1a37acf&lt;br/&gt;
Author: kkloudas &amp;lt;kkloudas@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-05-15T12:49:00Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;cep&amp;#93;&lt;/span&gt; Remove unused keySelector in operator.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16012085" author="githubbot" created="Tue, 16 May 2017 09:53:47 +0000"  >&lt;p&gt;Github user dawidwys commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3909#discussion_r116700008&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3909#discussion_r116700008&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-cep/src/main/java/org/apache/flink/cep/nfa/SharedBuffer.java &amp;#8212;&lt;br/&gt;
    @@ -83,26 +84,29 @@ public SharedBuffer(final TypeSerializer&amp;lt;V&amp;gt; valueSerializer) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param previousTimestamp Timestamp of the value for the previous relation&lt;/li&gt;
	&lt;li&gt;@param version           Version of the previous relation&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void put(&lt;br/&gt;
    +	public int put(
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing javadoc for return&lt;/p&gt;</comment>
                            <comment id="16012086" author="githubbot" created="Tue, 16 May 2017 09:53:47 +0000"  >&lt;p&gt;Github user dawidwys commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3909#discussion_r116699827&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3909#discussion_r116699827&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-cep/src/main/java/org/apache/flink/cep/nfa/NFA.java &amp;#8212;&lt;br/&gt;
    @@ -593,15 +596,24 @@ private boolean checkFilterCondition(ComputationState&amp;lt;T&amp;gt; computationState, Itera&lt;br/&gt;
     		return condition == null || condition.filter(event, computationState.getConditionContext());&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * Extracts all the sequences of events from the start to the given computation state. An event&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    With the `Preconditions.checkState(paths.size() &amp;lt;= 1);` all = 1&lt;/p&gt;</comment>
                            <comment id="16012087" author="githubbot" created="Tue, 16 May 2017 09:53:47 +0000"  >&lt;p&gt;Github user dawidwys commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3909#discussion_r116700283&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3909#discussion_r116700283&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-cep/src/main/java/org/apache/flink/cep/nfa/SharedBuffer.java &amp;#8212;&lt;br/&gt;
    @@ -256,8 +271,8 @@ public void prune(long pruningTimestamp) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value     Value to lock&lt;/li&gt;
	&lt;li&gt;@param timestamp Timestamp of the value to lock&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void lock(final K key, final V value, final long timestamp) {&lt;/li&gt;
	&lt;li&gt;SharedBufferEntry&amp;lt;K, V&amp;gt; entry = get(key, value, timestamp);&lt;br/&gt;
    +	public void lock(final K key, final V value, final long timestamp, int counter) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing javadoc for counter&lt;/p&gt;</comment>
                            <comment id="16012088" author="githubbot" created="Tue, 16 May 2017 09:53:47 +0000"  >&lt;p&gt;Github user dawidwys commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3909#discussion_r116700334&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3909#discussion_r116700334&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-cep/src/main/java/org/apache/flink/cep/nfa/SharedBuffer.java &amp;#8212;&lt;br/&gt;
    @@ -271,8 +286,8 @@ public void lock(final K key, final V value, final long timestamp) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value     Value to release&lt;/li&gt;
	&lt;li&gt;@param timestamp Timestamp of the value to release&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void release(final K key, final V value, final long timestamp) {&lt;/li&gt;
	&lt;li&gt;SharedBufferEntry&amp;lt;K, V&amp;gt; entry = get(key, value, timestamp);&lt;br/&gt;
    +	public void release(final K key, final V value, final long timestamp, int counter) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing javadoc for counter&lt;/p&gt;</comment>
                            <comment id="16012089" author="githubbot" created="Tue, 16 May 2017 09:53:47 +0000"  >&lt;p&gt;Github user dawidwys commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3909#discussion_r116700094&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3909#discussion_r116700094&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-cep/src/main/java/org/apache/flink/cep/nfa/SharedBuffer.java &amp;#8212;&lt;br/&gt;
    @@ -114,16 +118,16 @@ public void put(&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param timestamp Timestamp of the current value (a value requires always a timestamp to make it uniquely referable))&lt;/li&gt;
	&lt;li&gt;@param version   Version of the previous relation&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void put(&lt;br/&gt;
    +	public int put(
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing javadoc for return&lt;/p&gt;</comment>
                            <comment id="16013969" author="kkl0u" created="Wed, 17 May 2017 12:58:32 +0000"  >&lt;p&gt;Merged at 8e4db423b79580de0cf66e905f8a66c12ea3748a in master.&lt;/p&gt;</comment>
                            <comment id="16013994" author="githubbot" created="Wed, 17 May 2017 13:09:11 +0000"  >&lt;p&gt;Github user kl0u commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3909&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3909&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merged.&lt;/p&gt;</comment>
                            <comment id="16013995" author="githubbot" created="Wed, 17 May 2017 13:09:11 +0000"  >&lt;p&gt;Github user kl0u closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3909&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3909&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16014903" author="yuzhihong@gmail.com" created="Wed, 17 May 2017 23:03:40 +0000"  >&lt;p&gt;SharedBuffer.java isn&apos;t shown in the PR, so allow me to comment here.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; hashCode() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) (31 * (timestamp ^ timestamp &amp;gt;&amp;gt;&amp;gt; 32) + 31 * value.hashCode()) + counter;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Multiplier of 31 is applied to both (timestamp ^ timestamp &amp;gt;&amp;gt;&amp;gt; 32) and value.hashCode().&lt;br/&gt;
The following is probably the right expression:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 31 * (31 * (timestamp ^ timestamp &amp;gt;&amp;gt;&amp;gt; 32) + value.hashCode()) + counter;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13073057">FLINK-6624</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ey4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>