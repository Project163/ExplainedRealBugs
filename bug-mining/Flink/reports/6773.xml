<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:15:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-29498] Flink Async I/O Retry Strategies Do Not Work for Scala AsyncDataStream API</title>
                <link>https://issues.apache.org/jira/browse/FLINK-29498</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;We are using the async I/O to make HTTP calls and one of the features we wanted to leverage was the retries, so we pulled the newest commit: &lt;a href=&quot;http://github.com/apache/flink/pull/19983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://github.com/apache/flink/pull/19983&lt;/a&gt; into our internal Flink fork.&lt;/p&gt;

&lt;p&gt;When I try calling the function &lt;tt&gt;AsyncDataStream.unorderedWaitWithRetry&lt;/tt&gt; from the scala API I with a retry strategy from the java API I get an error as &lt;tt&gt;unorderedWaitWithRetry&lt;/tt&gt; expects a scala retry strategy. The problem is that retry strategies were only implemented in java and not Scala in this PR: &lt;a href=&quot;http://github.com/apache/flink/pull/19983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://github.com/apache/flink/pull/19983&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here is some of the code to reproduce the error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.streaming.api.scala.AsyncDataStream
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.streaming.util.retryable.{AsyncRetryStrategies =&amp;gt; JAsyncRetryStrategies}

val javaAsyncRetryStrategy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JAsyncRetryStrategies.FixedDelayRetryStrategyBuilder[Int](3, 100L)
    .build()

val data = AsyncDataStream.unorderedWaitWithRetry(
  source,
  asyncOperator,
  pipelineTimeoutInMs,
  TimeUnit.MILLISECONDS,
  javaAsyncRetryStrategy
)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13484317">FLINK-29498</key>
            <summary>Flink Async I/O Retry Strategies Do Not Work for Scala AsyncDataStream API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eric.xiao">Eric Xiao</assignee>
                                    <reporter username="eric.xiao">Eric Xiao</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 3 Oct 2022 19:37:08 +0000</created>
                <updated>Thu, 17 Nov 2022 16:08:42 +0000</updated>
                            <resolved>Thu, 17 Nov 2022 09:54:35 +0000</resolved>
                                    <version>1.15.3</version>
                                    <fixVersion>1.17.0</fixVersion>
                                    <component>API / Scala</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17612486" author="lincoln.86xy" created="Tue, 4 Oct 2022 06:08:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eric.xiao&quot; class=&quot;user-hover&quot; rel=&quot;eric.xiao&quot;&gt;eric.xiao&lt;/a&gt; There&apos;s a separate `org.apache.flink.streaming.api.scala.async.AsyncRetryStrategy` for scala api usage, the java utilities can not be used directly in scala (by design). For your case, you can try to implement your own `AsyncRetryStrategy` to enable retries.&lt;/p&gt;</comment>
                            <comment id="17612625" author="JIRAUSER295489" created="Tue, 4 Oct 2022 14:01:45 +0000"  >&lt;p&gt;&amp;gt; For your case, you can try to implement your own `AsyncRetryStrategy` to enable retries.&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lincoln.86xy&quot; class=&quot;user-hover&quot; rel=&quot;lincoln.86xy&quot;&gt;lincoln.86xy&lt;/a&gt; for replying &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, this is what we have done so far, thankfully the code is not a lot but we were wondering if there was a reason why the `AsyncRetryStrategies` are only available in Java API and not the Scala API? Similar for the `RetryPredicates`?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I am fairly new to Flink, but I believe I have seem some `.toJava` and `.toScala` helper methods on other Flink components and was wondering if there is room to add the same such functionality to the retry strategies builder and retry predicates?&lt;/p&gt;</comment>
                            <comment id="17614637" author="lincoln.86xy" created="Sun, 9 Oct 2022 07:26:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eric.xiao&quot; class=&quot;user-hover&quot; rel=&quot;eric.xiao&quot;&gt;eric.xiao&lt;/a&gt; the retry feature is implemented under the interface-level equivalence between the java and scala api but not included utilities.&lt;br/&gt;
Recently a discussion &quot;Deprecate and remove Scala API support&quot;(&lt;a href=&quot;https://lists.apache.org/thread/d3borhdzj496nnggohq42fyb6zkwob3h&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/d3borhdzj496nnggohq42fyb6zkwob3h&lt;/a&gt;) was raised on the ML,&lt;br/&gt;
before a conclusion is reached on it, I think we can move forward with improvements that are valuable to users, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="17618378" author="JIRAUSER295489" created="Mon, 17 Oct 2022 02:25:50 +0000"  >&lt;p&gt;As discussed in the &lt;a href=&quot;https://apache-flink.slack.com/archives/C03G7LJTS2G/p1663957561957419&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;slack thread&lt;/a&gt; I am eager to contribute the Scala util classes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Should we assign the Jira ticket to me (Not sure how to do that)?&lt;/p&gt;</comment>
                            <comment id="17620102" author="gaoyunhaii" created="Wed, 19 Oct 2022 08:37:11 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eric.xiao&quot; class=&quot;user-hover&quot; rel=&quot;eric.xiao&quot;&gt;eric.xiao&lt;/a&gt; for the efforts! I also think we could first add the improvement since the Scala API would still be exists for several versions after deprecated. I have assigned the issue to you.&#160;&lt;/p&gt;</comment>
                            <comment id="17621332" author="JIRAUSER295489" created="Thu, 20 Oct 2022 19:30:04 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt;, I believe I have a &lt;a href=&quot;https://github.com/apache/flink/pull/21077&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt; that is in a reviewable state, what is the process of getting folks from the community to review the PR?&lt;/p&gt;</comment>
                            <comment id="17621460" author="gaoyunhaii" created="Fri, 21 Oct 2022 03:00:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eric.xiao&quot; class=&quot;user-hover&quot; rel=&quot;eric.xiao&quot;&gt;eric.xiao&lt;/a&gt; Thanks for the PR! I&apos;ll have a look&lt;/p&gt;</comment>
                            <comment id="17635258" author="gaoyunhaii" created="Thu, 17 Nov 2022 09:54:24 +0000"  >&lt;p&gt;Merged on master via&#160;d426489c9e5c634e2eec8fde6c71356700b7d4b2.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1914g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>