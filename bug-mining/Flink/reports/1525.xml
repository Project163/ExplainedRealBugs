<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:27:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5907] RowCsvInputFormat bug on parsing tsv</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5907</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The following snippet reproduce the problem (using the attached file as input):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; fieldDelim = &lt;span class=&quot;code-quote&quot;&gt;&apos;\t&apos;&lt;/span&gt;;
    TypeInformation&amp;lt;?&amp;gt;[] fieldTypes = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TypeInformation&amp;lt;?&amp;gt;[51];
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; fieldTypes.length; i++) {
      fieldTypes[i] = BasicTypeInfo.STRING_TYPE_INFO;
    }
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] fieldMask = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[fieldTypes.length];
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; fieldMask.length; i++) {
      fieldMask[i] = i;
    }
    RowCsvInputFormat csvIF = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RowCsvInputFormat(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(testCsv), fieldTypes, &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;, fieldDelim +&quot;&quot;, 
       fieldMask, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    csvIF.setNestedFileEnumeration(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    DataSet&amp;lt;Row&amp;gt; csv = env.createInput(csvIF);
   csv.print()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13045983">FLINK-5907</key>
            <summary>RowCsvInputFormat bug on parsing tsv</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ykt836">Kurt Young</assignee>
                                    <reporter username="f.pompermaier">Flavio Pompermaier</reporter>
                        <labels>
                            <label>csv</label>
                            <label>parsing</label>
                    </labels>
                <created>Fri, 24 Feb 2017 10:43:23 +0000</created>
                <updated>Thu, 28 Feb 2019 14:29:05 +0000</updated>
                            <resolved>Mon, 27 Feb 2017 23:51:02 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.1</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15882433" author="f.pompermaier" created="Fri, 24 Feb 2017 10:43:47 +0000"  >&lt;p&gt;Test file&lt;/p&gt;</comment>
                            <comment id="15884013" author="ykt836" created="Sat, 25 Feb 2017 04:26:02 +0000"  >&lt;p&gt;Looks like RowCsvInputFormat didn&apos;t handle rows which ended with field delimiter correctly.&lt;/p&gt;</comment>
                            <comment id="15884152" author="ykt836" created="Sat, 25 Feb 2017 08:33:01 +0000"  >&lt;p&gt;You can add one more &apos;\t&apos; at the end of each line to work around first.&lt;/p&gt;</comment>
                            <comment id="15884154" author="githubbot" created="Sat, 25 Feb 2017 08:42:43 +0000"  >&lt;p&gt;GitHub user KurtYoung opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5907&quot; title=&quot;RowCsvInputFormat bug on parsing tsv&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5907&quot;&gt;&lt;del&gt;FLINK-5907&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;java api&amp;#93;&lt;/span&gt; Fix trailing empty fields in CsvInputFormat&lt;/p&gt;

&lt;p&gt;    If there are 3 fields with field delimiter &quot;,&quot;, both these two line should be parsed successfully:&lt;br/&gt;
    aaa,bbb,&lt;br/&gt;
    aaa,bbb&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/KurtYoung/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/KurtYoung/flink&lt;/a&gt; flink-5907&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3417&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4e93fe1376d623eda5f8f68afb54583070968881&lt;br/&gt;
Author: Kurt Young &amp;lt;ykt836@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-02-25T08:37:37Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5907&quot; title=&quot;RowCsvInputFormat bug on parsing tsv&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5907&quot;&gt;&lt;del&gt;FLINK-5907&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;java api&amp;#93;&lt;/span&gt; Fix trailing empty fields in CsvInputFormat&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15885477" author="githubbot" created="Mon, 27 Feb 2017 09:54:23 +0000"  >&lt;p&gt;Github user fpompermaier commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ve tested your PR against my original CSV that was causing the problem and it works now! Thanks for this fix&lt;/p&gt;</comment>
                            <comment id="15885776" author="githubbot" created="Mon, 27 Feb 2017 13:24:07 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103200986&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103200986&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-java/src/main/java/org/apache/flink/api/java/io/RowCsvInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -197,6 +197,14 @@ protected boolean parseRecord(Object[] holders, byte[] bytes, int offset, int nu&lt;br/&gt;
     			if (startPos &amp;lt; 0) &lt;/p&gt;
{
     				throw new ParseException(String.format(&quot;Unexpected parser position for column %1$s of row &apos;%2$s&apos;&quot;,
     					field, new String(bytes, offset, numBytes)));
    +			}
&lt;p&gt; else if (startPos == limit&lt;br/&gt;
    +					&amp;amp;&amp;amp; field != fieldIncluded.length - 1&lt;br/&gt;
    +					&amp;amp;&amp;amp; !FieldParser.endsWithDelimiter(bytes, startPos - 1, fieldDelimiter)) {&lt;br/&gt;
    +				if (isLenient()) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Add a comment: &quot;We are at the end of the record, but not all fields have been read and the end is not a field delimiter indicating an empty last field.&quot;&lt;/p&gt;</comment>
                            <comment id="15885777" author="githubbot" created="Mon, 27 Feb 2017 13:24:07 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103197368&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103197368&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-java/src/test/java/org/apache/flink/api/java/io/RowCsvInputFormatTest.java &amp;#8212;&lt;br/&gt;
    @@ -311,7 +317,7 @@ public void readMixedQuotedStringFields() throws Exception {&lt;/p&gt;

&lt;p&gt;     	@Test&lt;br/&gt;
     	public void readStringFieldsWithTrailingDelimiters() throws Exception {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String fileContent = &quot;abc|&lt;del&gt;def|-ghijk\nabc|&lt;/del&gt;|&lt;del&gt;hhg\n|&lt;/del&gt;|&lt;del&gt;|&lt;/del&gt;\n&quot;;&lt;br/&gt;
    +		String fileContent = &quot;abc|&lt;del&gt;def|-ghijk\nabc|&lt;/del&gt;|&lt;del&gt;hhg\n|&lt;/del&gt;|&lt;del&gt;|&lt;/del&gt;\n|&lt;del&gt;|&lt;/del&gt;\nabc|-def\n&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Can you move the checks for correctly handling empty last fields into a dedicated method?&lt;/p&gt;</comment>
                            <comment id="15885778" author="githubbot" created="Mon, 27 Feb 2017 13:24:07 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103203173&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103203173&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/GenericCsvInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -358,24 +358,27 @@ protected boolean parseRecord(Object[] holders, byte[] bytes, int offset, int nu&lt;br/&gt;
     		for (int field = 0, output = 0; field &amp;lt; fieldIncluded.length; field++) {&lt;/p&gt;

&lt;p&gt;     			// check valid start position&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (startPos &amp;gt;= limit) {&lt;br/&gt;
    +			if (startPos &amp;gt; limit || (startPos == limit &amp;amp;&amp;amp; field != fieldIncluded.length - 1)) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {     				if (lenient) {
     					return false;
     				} else {
     					throw new ParseException(&quot;Row too short: &quot; + new String(bytes, offset, numBytes));
     				}     			}&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     			if (fieldIncluded&lt;span class=&quot;error&quot;&gt;&amp;#91;field&amp;#93;&lt;/span&gt;) {&lt;br/&gt;
     				// parse field&lt;br/&gt;
     				@SuppressWarnings(&quot;unchecked&quot;)&lt;br/&gt;
     				FieldParser&amp;lt;Object&amp;gt; parser = (FieldParser&amp;lt;Object&amp;gt;) this.fieldParsers&lt;span class=&quot;error&quot;&gt;&amp;#91;output&amp;#93;&lt;/span&gt;;&lt;br/&gt;
     				Object reuse = holders&lt;span class=&quot;error&quot;&gt;&amp;#91;output&amp;#93;&lt;/span&gt;;&lt;br/&gt;
     				startPos = parser.resetErrorStateAndParse(bytes, startPos, limit, this.fieldDelim, reuse);&lt;br/&gt;
     				holders&lt;span class=&quot;error&quot;&gt;&amp;#91;output&amp;#93;&lt;/span&gt; = parser.getLastResult();&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     				// check parse result&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (startPos &amp;lt; 0) {&lt;br/&gt;
    +				if (startPos &amp;lt; 0 ||&lt;br/&gt;
    +						(startPos == limit
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Move this condition into an `else if` branch and give a more detailed error message (row to short).&lt;br/&gt;
    Also add a comment that we read the whole records but that there are fields missing.&lt;/p&gt;</comment>
                            <comment id="15885779" author="githubbot" created="Mon, 27 Feb 2017 13:24:07 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103197216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103197216&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-java/src/test/java/org/apache/flink/api/java/io/CsvInputFormatTest.java &amp;#8212;&lt;br/&gt;
    @@ -400,7 +400,7 @@ public void readMixedQuotedStringFields() {&lt;br/&gt;
     	@Test&lt;br/&gt;
     	public void readStringFieldsWithTrailingDelimiters() {&lt;br/&gt;
     		try {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final String fileContent = &quot;abc|&lt;del&gt;def|-ghijk\nabc|&lt;/del&gt;|&lt;del&gt;hhg\n|&lt;/del&gt;|&lt;del&gt;|&lt;/del&gt;\n&quot;;&lt;br/&gt;
    +			final String fileContent = &quot;abc|&lt;del&gt;def|-ghijk\nabc|&lt;/del&gt;|&lt;del&gt;hhg\n|&lt;/del&gt;|&lt;del&gt;|&lt;/del&gt;\n|&lt;del&gt;|&lt;/del&gt;\nabc|-def\n&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This method tests whether an additional field delimiter at the end is accepted.&lt;br/&gt;
    Can you move the checks for correctly identifying empty last fields into a separate `testTailingEmptyFields` method?&lt;/p&gt;</comment>
                            <comment id="15885780" author="githubbot" created="Mon, 27 Feb 2017 13:24:07 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103183251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103183251&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-java/src/test/java/org/apache/flink/api/java/io/CsvInputFormatTest.java &amp;#8212;&lt;br/&gt;
    @@ -957,6 +964,42 @@ public void testPojoTypeWithPrivateField() throws Exception {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	@Test&lt;br/&gt;
    +	public void testPojoTypeWithTrailingEmptyFields() throws Exception {&lt;br/&gt;
    +		File tempFile = File.createTempFile(&quot;CsvReaderPojoType&quot;, &quot;tmp&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Use the tmp file utils as in `readStringFieldsWithTrailingDelimiters()`&lt;/p&gt;</comment>
                            <comment id="15885781" author="githubbot" created="Mon, 27 Feb 2017 13:24:07 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103203254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103203254&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/GenericCsvInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -392,12 +395,17 @@ protected boolean parseRecord(Object[] holders, byte[] bytes, int offset, int nu&lt;br/&gt;
     			else {&lt;br/&gt;
     				// skip field&lt;br/&gt;
     				startPos = skipFields(bytes, startPos, limit, this.fieldDelim);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (startPos &amp;lt; 0) {&lt;br/&gt;
    +				if (startPos &amp;lt; 0 ||
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Same here as above&lt;/p&gt;</comment>
                            <comment id="15885895" author="githubbot" created="Mon, 27 Feb 2017 14:58:33 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103224286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103224286&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-java/src/test/java/org/apache/flink/api/java/io/CsvInputFormatTest.java &amp;#8212;&lt;br/&gt;
    @@ -400,7 +400,7 @@ public void readMixedQuotedStringFields() {&lt;br/&gt;
     	@Test&lt;br/&gt;
     	public void readStringFieldsWithTrailingDelimiters() {&lt;br/&gt;
     		try {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final String fileContent = &quot;abc|&lt;del&gt;def|-ghijk\nabc|&lt;/del&gt;|&lt;del&gt;hhg\n|&lt;/del&gt;|&lt;del&gt;|&lt;/del&gt;\n&quot;;&lt;br/&gt;
    +			final String fileContent = &quot;abc|&lt;del&gt;def|-ghijk\nabc|&lt;/del&gt;|&lt;del&gt;hhg\n|&lt;/del&gt;|&lt;del&gt;|&lt;/del&gt;\n|&lt;del&gt;|&lt;/del&gt;\nabc|-def\n&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    sounds good&lt;/p&gt;</comment>
                            <comment id="15885898" author="githubbot" created="Mon, 27 Feb 2017 14:58:44 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103224327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103224327&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-java/src/test/java/org/apache/flink/api/java/io/CsvInputFormatTest.java &amp;#8212;&lt;br/&gt;
    @@ -957,6 +964,42 @@ public void testPojoTypeWithPrivateField() throws Exception {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	@Test&lt;br/&gt;
    +	public void testPojoTypeWithTrailingEmptyFields() throws Exception {&lt;br/&gt;
    +		File tempFile = File.createTempFile(&quot;CsvReaderPojoType&quot;, &quot;tmp&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    changed&lt;/p&gt;</comment>
                            <comment id="15885904" author="githubbot" created="Mon, 27 Feb 2017 15:01:52 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103225144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103225144&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-java/src/test/java/org/apache/flink/api/java/io/RowCsvInputFormatTest.java &amp;#8212;&lt;br/&gt;
    @@ -311,7 +317,7 @@ public void readMixedQuotedStringFields() throws Exception {&lt;/p&gt;

&lt;p&gt;     	@Test&lt;br/&gt;
     	public void readStringFieldsWithTrailingDelimiters() throws Exception {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String fileContent = &quot;abc|&lt;del&gt;def|-ghijk\nabc|&lt;/del&gt;|&lt;del&gt;hhg\n|&lt;/del&gt;|&lt;del&gt;|&lt;/del&gt;\n&quot;;&lt;br/&gt;
    +		String fileContent = &quot;abc|&lt;del&gt;def|-ghijk\nabc|&lt;/del&gt;|&lt;del&gt;hhg\n|&lt;/del&gt;|&lt;del&gt;|&lt;/del&gt;\n|&lt;del&gt;|&lt;/del&gt;\nabc|-def\n&quot;;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    ok&lt;/p&gt;</comment>
                            <comment id="15885905" author="githubbot" created="Mon, 27 Feb 2017 15:04:08 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103225729&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103225729&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-java/src/main/java/org/apache/flink/api/java/io/RowCsvInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -197,6 +197,14 @@ protected boolean parseRecord(Object[] holders, byte[] bytes, int offset, int nu&lt;br/&gt;
     			if (startPos &amp;lt; 0) &lt;/p&gt;
{
     				throw new ParseException(String.format(&quot;Unexpected parser position for column %1$s of row &apos;%2$s&apos;&quot;,
     					field, new String(bytes, offset, numBytes)));
    +			}
&lt;p&gt; else if (startPos == limit&lt;br/&gt;
    +					&amp;amp;&amp;amp; field != fieldIncluded.length - 1&lt;br/&gt;
    +					&amp;amp;&amp;amp; !FieldParser.endsWithDelimiter(bytes, startPos - 1, fieldDelimiter)) {&lt;br/&gt;
    +				if (isLenient()) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    added&lt;/p&gt;</comment>
                            <comment id="15885908" author="githubbot" created="Mon, 27 Feb 2017 15:08:28 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103226814&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103226814&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/GenericCsvInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -392,12 +395,17 @@ protected boolean parseRecord(Object[] holders, byte[] bytes, int offset, int nu&lt;br/&gt;
     			else {&lt;br/&gt;
     				// skip field&lt;br/&gt;
     				startPos = skipFields(bytes, startPos, limit, this.fieldDelim);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (startPos &amp;lt; 0) {&lt;br/&gt;
    +				if (startPos &amp;lt; 0 ||
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    done&lt;/p&gt;</comment>
                            <comment id="15885909" author="githubbot" created="Mon, 27 Feb 2017 15:08:28 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417#discussion_r103226821&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417#discussion_r103226821&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/GenericCsvInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -358,24 +358,27 @@ protected boolean parseRecord(Object[] holders, byte[] bytes, int offset, int nu&lt;br/&gt;
     		for (int field = 0, output = 0; field &amp;lt; fieldIncluded.length; field++) {&lt;/p&gt;

&lt;p&gt;     			// check valid start position&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (startPos &amp;gt;= limit) {&lt;br/&gt;
    +			if (startPos &amp;gt; limit || (startPos == limit &amp;amp;&amp;amp; field != fieldIncluded.length - 1)) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {     				if (lenient) {
     					return false;
     				} else {
     					throw new ParseException(&quot;Row too short: &quot; + new String(bytes, offset, numBytes));
     				}     			}&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     			if (fieldIncluded&lt;span class=&quot;error&quot;&gt;&amp;#91;field&amp;#93;&lt;/span&gt;) {&lt;br/&gt;
     				// parse field&lt;br/&gt;
     				@SuppressWarnings(&quot;unchecked&quot;)&lt;br/&gt;
     				FieldParser&amp;lt;Object&amp;gt; parser = (FieldParser&amp;lt;Object&amp;gt;) this.fieldParsers&lt;span class=&quot;error&quot;&gt;&amp;#91;output&amp;#93;&lt;/span&gt;;&lt;br/&gt;
     				Object reuse = holders&lt;span class=&quot;error&quot;&gt;&amp;#91;output&amp;#93;&lt;/span&gt;;&lt;br/&gt;
     				startPos = parser.resetErrorStateAndParse(bytes, startPos, limit, this.fieldDelim, reuse);&lt;br/&gt;
     				holders&lt;span class=&quot;error&quot;&gt;&amp;#91;output&amp;#93;&lt;/span&gt; = parser.getLastResult();&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     				// check parse result&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (startPos &amp;lt; 0) {&lt;br/&gt;
    +				if (startPos &amp;lt; 0 ||&lt;br/&gt;
    +						(startPos == limit
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    done&lt;/p&gt;</comment>
                            <comment id="15886379" author="githubbot" created="Mon, 27 Feb 2017 19:38:52 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the fast update @KurtYoung.&lt;br/&gt;
    +1 to merge&lt;/p&gt;</comment>
                            <comment id="15886552" author="githubbot" created="Mon, 27 Feb 2017 21:21:07 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merging&lt;/p&gt;</comment>
                            <comment id="15886762" author="githubbot" created="Mon, 27 Feb 2017 23:36:37 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3417&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15886781" author="fhueske" created="Mon, 27 Feb 2017 23:51:02 +0000"  >&lt;p&gt;Fixed for 1.2.1 with 5168b9f62a05176aca5bd3c094241daaa4d14b2e&lt;br/&gt;
Fixed for 1.3.0 with 1a062b796274c9f63caeb2bf12aad96e34efd0aa&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12854448" name="test.tsv" size="177" author="f.pompermaier" created="Fri, 24 Feb 2017 10:43:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3aknz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>