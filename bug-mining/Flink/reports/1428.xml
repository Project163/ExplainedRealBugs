<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:26:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5380] Number of outgoing records not reported in web interface</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5380</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The web frontend does not report any outgoing records in the web frontend.&lt;br/&gt;
The amount of data in MB is reported correctly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13029766">FLINK-5380</key>
            <summary>Number of outgoing records not reported in web interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Dec 2016 14:33:27 +0000</created>
                <updated>Thu, 28 Feb 2019 10:45:58 +0000</updated>
                            <resolved>Fri, 20 Jan 2017 05:44:01 +0000</resolved>
                                    <version>1.2.0</version>
                    <version>1.3.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>Runtime / Metrics</component>
                    <component>Runtime / Web Frontend</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15801275" author="zentol" created="Thu, 5 Jan 2017 12:51:59 +0000"  >&lt;p&gt;This is a problem with detecting which operator&apos;s metrics should be used for a task.&lt;/p&gt;

&lt;p&gt;Consider a chain A -&amp;gt; B. Both operators A and B measure how many records they receive and send. Since the WebInterface however only views them as a single task we don&apos;t need all of these; we only need the input count from A and output from B; or in other words the input from the first operator and the output from the last.&lt;/p&gt;

&lt;p&gt;Which metrics are reused is governed by the isChainStart/isChainEnd properties of the StreamConfig, which are set in the in the StreamingJobGraphGenerator#createChain.&lt;/p&gt;

&lt;p&gt;The issue is simply that I did not account for the case where a chain only consists of a single operator; in which case we need both the in- and output metrics.&lt;/p&gt;

&lt;p&gt;In short, adding &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (chainableOutputs.isEmpty()) {
	config.setChainEnd();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;at the end of the &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (currentNodeId.equals(startNodeId)) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;block should fix this issue.&lt;/p&gt;</comment>
                            <comment id="15801317" author="zentol" created="Thu, 5 Jan 2017 13:10:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sachingoel0101&quot; class=&quot;user-hover&quot; rel=&quot;sachingoel0101&quot;&gt;sachingoel0101&lt;/a&gt; Would you mind if i take this over?&lt;/p&gt;</comment>
                            <comment id="15801669" author="sachingoel0101" created="Thu, 5 Jan 2017 15:37:45 +0000"  >&lt;p&gt;No problem! &lt;/p&gt;</comment>
                            <comment id="15801802" author="githubbot" created="Thu, 5 Jan 2017 16:33:02 +0000"  >&lt;p&gt;GitHub user zentol opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3068&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3068&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5380&quot; title=&quot;Number of outgoing records not reported in web interface&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5380&quot;&gt;&lt;del&gt;FLINK-5380&lt;/del&gt;&lt;/a&gt; Fix task metrics reuse for single-operator chains&lt;/p&gt;

&lt;p&gt;    This PR fixes the chain end detection in the `StreamingJobGraphGenerator`, which fixes the re-use of metrics for tasks consisting of only a single operator, which fixes the display in the WebInterface.&lt;/p&gt;

&lt;p&gt;    I&apos;ve also added a test to make sure that chain start and end are set correctly. Before the fix, `assertTrue(sourceConfig.isChainEnd());` would have failed.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zentol/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zentol/flink&lt;/a&gt; 5380_web_metrics&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3068.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3068.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3068&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit bfd038d13b73816adb4dab1387b1f75ecf2f2bfc&lt;br/&gt;
Author: zentol &amp;lt;chesnay@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-01-05T13:37:03Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5380&quot; title=&quot;Number of outgoing records not reported in web interface&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5380&quot;&gt;&lt;del&gt;FLINK-5380&lt;/del&gt;&lt;/a&gt; Fix task metrics reuse for single-operator chains&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15823165" author="githubbot" created="Sun, 15 Jan 2017 15:21:21 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3068&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3068&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge&lt;/p&gt;

&lt;p&gt;    !&lt;span class=&quot;error&quot;&gt;&amp;#91;image&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://cloud.githubusercontent.com/assets/89049/21963634/948c5988-db3e-11e6-8641-6089521e9d87.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cloud.githubusercontent.com/assets/89049/21963634/948c5988-db3e-11e6-8641-6089521e9d87.png&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="15823650" author="githubbot" created="Mon, 16 Jan 2017 09:03:13 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3068&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3068&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merging.&lt;/p&gt;</comment>
                            <comment id="15824522" author="githubbot" created="Mon, 16 Jan 2017 19:59:25 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3068&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3068&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Mh, I just realized that the streaming APIs multichaining is leading to some ugly side effects.&lt;/p&gt;

&lt;p&gt;    In below screenshot, you see that the number of outgoing records is reported as 247. These records are the number of elements emitted by the filter.&lt;br/&gt;
    The task below the source is the window that is consuming the data from the filter.&lt;br/&gt;
    Now the next two tasks also consume data from the same task, but without the filter. You can see that they&apos;ve consumed much more data (because its unfiltered).&lt;/p&gt;

&lt;p&gt;    !&lt;span class=&quot;error&quot;&gt;&amp;#91;image&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://cloud.githubusercontent.com/assets/89049/21997216/58c989a2-dc2e-11e6-9065-214dffcc6bbc.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cloud.githubusercontent.com/assets/89049/21997216/58c989a2-dc2e-11e6-9065-214dffcc6bbc.png&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="15825982" author="githubbot" created="Tue, 17 Jan 2017 12:43:41 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3068&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3068&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    So that&apos;s like...a side output? I didn&apos;t even know that was possible.&lt;/p&gt;

&lt;p&gt;    Until we can display operators in the web-interface, and by extension in the ExecutionGraph, i don&apos;t see a way to change this.&lt;/p&gt;</comment>
                            <comment id="15826022" author="githubbot" created="Tue, 17 Jan 2017 13:10:36 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3068&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3068&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes, its some fancy multi-chaining of the streaming API.&lt;/p&gt;

&lt;p&gt;    Then lets merge it as is &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15831228" author="githubbot" created="Fri, 20 Jan 2017 05:41:11 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3068&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3068&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15831238" author="zentol" created="Fri, 20 Jan 2017 05:44:01 +0000"  >&lt;p&gt;master: cb05915759b1d5ea4dbfcdd3ff76dcfd9cebe601&lt;br/&gt;
1.2: 792f7e45216377fa1d6f29dfc767d83cf1a84f37&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12844252" name="outRecordsNotreported.png" size="130983" author="rmetzger" created="Wed, 21 Dec 2016 14:34:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37vmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>