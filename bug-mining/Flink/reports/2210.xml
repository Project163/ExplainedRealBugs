<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:31:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8275] Flink YARN deployment with Kerberos enabled not working </title>
                <link>https://issues.apache.org/jira/browse/FLINK-8275</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The local keytab path in YarnTaskManagerRunner is incorrectly set to the ApplicationMaster&apos;s local keytab path. This causes jobs to fail because the TaskManager can&apos;t read the keytab.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13125541">FLINK-8275</key>
            <summary>Flink YARN deployment with Kerberos enabled not working </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="suez1224">Shuyi Chen</assignee>
                                    <reporter username="suez1224">Shuyi Chen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Dec 2017 07:52:53 +0000</created>
                <updated>Mon, 2 Dec 2019 08:39:09 +0000</updated>
                            <resolved>Tue, 6 Feb 2018 19:12:11 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.4.1</fixVersion>
                    <fixVersion>1.5.0</fixVersion>
                                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16294621" author="githubbot" created="Mon, 18 Dec 2017 07:58:06 +0000"  >&lt;p&gt;GitHub user suez1224 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8275&quot; title=&quot;Flink YARN deployment with Kerberos enabled not working &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8275&quot;&gt;&lt;del&gt;FLINK-8275&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Security&amp;#93;&lt;/span&gt; fix keytab local path in YarnTaskManagerRunner&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Set the local keytab path in YarnTaskManagerRunner to the correct local path.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Manually verified the change by running in a production secure cluser with 1 JobManager and 2 TaskManagers. Both the JobManager and the Taskmanagers can start, and verify through kerberos metrics.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/suez1224/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/suez1224/flink&lt;/a&gt; keytab-fix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5172&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e40bef03f18d80f423150c8b94f875d9edb5ef24&lt;br/&gt;
Author: Shuyi Chen &amp;lt;shuyi@uber.com&amp;gt;&lt;br/&gt;
Date:   2017-12-18T07:50:07Z&lt;/p&gt;

&lt;p&gt;    fix keytab local path in YarnTaskManagerRunner&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16294629" author="tzulitai" created="Mon, 18 Dec 2017 08:08:19 +0000"  >&lt;p&gt;This is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8270&quot; title=&quot;TaskManagers do not use correct local path for shipped Keytab files in Yarn deployment modes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8270&quot;&gt;&lt;del&gt;FLINK-8270&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=suez1224&quot; class=&quot;user-hover&quot; rel=&quot;suez1224&quot;&gt;suez1224&lt;/a&gt; can you also incorporate the suggestions explained in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8270&quot; title=&quot;TaskManagers do not use correct local path for shipped Keytab files in Yarn deployment modes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8270&quot;&gt;&lt;del&gt;FLINK-8270&lt;/del&gt;&lt;/a&gt; in your solution?&lt;/p&gt;</comment>
                            <comment id="16294630" author="githubbot" created="Mon, 18 Dec 2017 08:09:23 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the PR @suez1224.&lt;br/&gt;
    There is a duplicate JIRA for this issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8270&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-8270&lt;/a&gt;.&lt;br/&gt;
    Can you take a look at the suggestions explained in that JIRA, and include that in your solution too?&lt;/p&gt;</comment>
                            <comment id="16294656" author="githubbot" created="Mon, 18 Dec 2017 08:49:33 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    cc @EronWright, gentle ping since you mentioned to include you in the review &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16295493" author="githubbot" created="Mon, 18 Dec 2017 19:10:02 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @suez1224 keep in mind, that contribution PRs should initially have one commit with the commit message appropriately set (the title of the PR would be a good commit message for your case).&lt;/p&gt;</comment>
                            <comment id="16295515" author="githubbot" created="Mon, 18 Dec 2017 19:23:02 +0000"  >&lt;p&gt;Github user EronWright commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This PR probably fixes the problem, but it would be good to address the deeper problem that the code is confusing.   At least we could add some commentary to the code.  The specific problems, in my view, are:&lt;br/&gt;
    1. A filename is transmitted from client -&amp;gt; AM -&amp;gt; TM in the env variable `_KEYTAB_PATH` but the value doesn&apos;t appear to be used.   In effect it is a flag asserting that a keytab named `krb5.keytab` is available.  Alternatives:&lt;br/&gt;
      a. Use `krb5.keytab` as the value.&lt;br/&gt;
      b. Eliminate the env check and simply look for the file; if present, use it.&lt;br/&gt;
    2. The existence of the &quot;integration test code&quot; has an unclear purpose.   It mutates the Hadoop configuration, why?   Is the code active in any production scenario?&lt;/p&gt;

&lt;p&gt;    Note that `YarnTaskExecutorRunner` implements this in a slightly different way, and should be re-tested for 1.5.0 (since I don&apos;t think it is in use yet).&lt;/p&gt;
</comment>
                            <comment id="16317067" author="suez1224" created="Mon, 8 Jan 2018 21:11:52 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eronwright&quot; class=&quot;user-hover&quot; rel=&quot;eronwright&quot;&gt;eronwright&lt;/a&gt;,&lt;br/&gt;
I&apos;ve added unittest to capture the securityconfiguration keytab related settings. Also, I&apos;ve refactored the code to use the existing of krb5.keytab file instead of `_KEYTAB_PATH`. &lt;/p&gt;

&lt;p&gt;For the integration test code, I &apos;ve created a different &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8390&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JIRA&lt;/a&gt; to follow, it&apos;s better to a smaller PR rather than fixing everything in one PR.&lt;/p&gt;

&lt;p&gt;Could you please take another look at this PR?&lt;/p&gt;</comment>
                            <comment id="16327369" author="githubbot" created="Tue, 16 Jan 2018 16:51:34 +0000"  >&lt;p&gt;Github user EronWright commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172#discussion_r161818655&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172#discussion_r161818655&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/security/SecurityUtils.java &amp;#8212;&lt;br/&gt;
    @@ -48,7 +48,7 @@ public static SecurityContext getInstalledContext() {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	@VisibleForTesting&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    (minor) Please remove the `@VisibleForTesting` annotation.&lt;/p&gt;</comment>
                            <comment id="16327379" author="githubbot" created="Tue, 16 Jan 2018 16:59:26 +0000"  >&lt;p&gt;Github user EronWright commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172#discussion_r161821092&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172#discussion_r161821092&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/YarnTaskManagerRunner.java &amp;#8212;&lt;br/&gt;
    @@ -126,12 +124,6 @@ public static void runYarnTaskManager(String[] args, final Class&amp;lt;? extends YarnT&lt;br/&gt;
     				hadoopConfiguration.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION, &quot;kerberos&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    The block of code labeled &apos;integration test&apos; seems dangerous.  It appears to override the Hadoop configuration whenever there&apos;s a keytab.    Since we&apos;re touching this code, it seems like the right time to remove or to defend this &apos;test&apos; code.&lt;/p&gt;</comment>
                            <comment id="16327388" author="githubbot" created="Tue, 16 Jan 2018 17:02:49 +0000"  >&lt;p&gt;Github user EronWright commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172#discussion_r161822100&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172#discussion_r161822100&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/YarnTaskManagerRunner.java &amp;#8212;&lt;br/&gt;
    @@ -142,19 +134,22 @@ public static void runYarnTaskManager(String[] args, final Class&amp;lt;? extends YarnT&lt;/p&gt;

&lt;p&gt;     			SecurityUtils.install(sc);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SecurityUtils.getInstalledContext().runSecured(new Callable&amp;lt;Object&amp;gt;() {&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public Integer call() {&lt;/li&gt;
	&lt;li&gt;try 
{
    -						TaskManager.selectNetworkInterfaceAndRunTaskManager(configuration, resourceId, taskManager);
    -					}&lt;/li&gt;
	&lt;li&gt;catch (Throwable t) {&lt;/li&gt;
	&lt;li&gt;LOG.error(&quot;Error while starting the TaskManager&quot;, t);&lt;/li&gt;
	&lt;li&gt;System.exit(TaskManager.STARTUP_FAILURE_RETURN_CODE());&lt;br/&gt;
    +			if (mainRunner == null) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    If we need to separate out the &apos;secured&apos; code block, can we do that in all scenarios instead of the conditional logic here?   For example, move the block on lines 138-147 to a new method, and pass a method reference to `runTaskManager` as the callable.  &lt;/p&gt;</comment>
                            <comment id="16327389" author="githubbot" created="Tue, 16 Jan 2018 17:03:12 +0000"  >&lt;p&gt;Github user EronWright commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172#discussion_r161822214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172#discussion_r161822214&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/test/resources/flink-conf.yaml &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,23 @@&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +#  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +#  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +#  distributed with this work for additional information&lt;br/&gt;
    +#  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +#  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +#  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +#  with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#      &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +#  Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +#  See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +#&lt;br/&gt;
    +# This is a test configuration for validation of YarnTaskManagerRunner.&lt;br/&gt;
    +#&lt;br/&gt;
    +&lt;br/&gt;
    +taskmanager.tmp.dirs: /tmp&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This seems unrelated.&lt;/p&gt;</comment>
                            <comment id="16329529" author="githubbot" created="Wed, 17 Jan 2018 21:52:00 +0000"  >&lt;p&gt;Github user suez1224 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172#discussion_r162190016&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172#discussion_r162190016&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/test/resources/flink-conf.yaml &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,23 @@&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +#  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +#  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +#  distributed with this work for additional information&lt;br/&gt;
    +#  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +#  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +#  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +#  with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#      &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +#  Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +#  See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +#&lt;br/&gt;
    +# This is a test configuration for validation of YarnTaskManagerRunner.&lt;br/&gt;
    +#&lt;br/&gt;
    +&lt;br/&gt;
    +taskmanager.tmp.dirs: /tmp&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This is needed for YarnTaskManagerRunnerTest.&lt;/p&gt;</comment>
                            <comment id="16329655" author="githubbot" created="Wed, 17 Jan 2018 22:55:22 +0000"  >&lt;p&gt;Github user suez1224 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172#discussion_r162204277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172#discussion_r162204277&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/YarnTaskManagerRunner.java &amp;#8212;&lt;br/&gt;
    @@ -142,19 +134,22 @@ public static void runYarnTaskManager(String[] args, final Class&amp;lt;? extends YarnT&lt;/p&gt;

&lt;p&gt;     			SecurityUtils.install(sc);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SecurityUtils.getInstalledContext().runSecured(new Callable&amp;lt;Object&amp;gt;() {&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public Integer call() {&lt;/li&gt;
	&lt;li&gt;try 
{
    -						TaskManager.selectNetworkInterfaceAndRunTaskManager(configuration, resourceId, taskManager);
    -					}&lt;/li&gt;
	&lt;li&gt;catch (Throwable t) {&lt;/li&gt;
	&lt;li&gt;LOG.error(&quot;Error while starting the TaskManager&quot;, t);&lt;/li&gt;
	&lt;li&gt;System.exit(TaskManager.STARTUP_FAILURE_RETURN_CODE());&lt;br/&gt;
    +			if (mainRunner == null) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Refactored. Since the method is only used in this class and it need access to variable in its outer scope, I just put it in the same method.&lt;/p&gt;</comment>
                            <comment id="16329929" author="githubbot" created="Thu, 18 Jan 2018 03:05:48 +0000"  >&lt;p&gt;Github user suez1224 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172#discussion_r162239390&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172#discussion_r162239390&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/YarnTaskManagerRunner.java &amp;#8212;&lt;br/&gt;
    @@ -126,12 +124,6 @@ public static void runYarnTaskManager(String[] args, final Class&amp;lt;? extends YarnT&lt;br/&gt;
     				hadoopConfiguration.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION, &quot;kerberos&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    @EronWright , I&apos;ve created a PR for &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8390&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FLINK-8390&lt;/a&gt; to address the integration test code issue. Could you please take a look at that as well?&lt;/p&gt;</comment>
                            <comment id="16329931" author="githubbot" created="Thu, 18 Jan 2018 03:07:02 +0000"  >&lt;p&gt;Github user suez1224 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks a lot for the review, @EronWright. Could you please take another look?&lt;/p&gt;</comment>
                            <comment id="16337049" author="githubbot" created="Wed, 24 Jan 2018 07:13:19 +0000"  >&lt;p&gt;Github user toggm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    We try to use apache flink in Kerberos secured environment and had to backport to flink 1.3.2 because of that issue. Would be good to have that PR to be able to migrate to the latest flink version.&lt;/p&gt;</comment>
                            <comment id="16350430" author="githubbot" created="Fri, 2 Feb 2018 14:48:08 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172#discussion_r165636080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172#discussion_r165636080&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/YarnTaskManagerRunner.java &amp;#8212;&lt;br/&gt;
    @@ -142,19 +153,10 @@ public static void runYarnTaskManager(String[] args, final Class&amp;lt;? extends YarnT&lt;/p&gt;

&lt;p&gt;     			SecurityUtils.install(sc);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SecurityUtils.getInstalledContext().runSecured(new Callable&amp;lt;Object&amp;gt;() {&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public Integer call() {&lt;/li&gt;
	&lt;li&gt;try 
{
    -						TaskManager.selectNetworkInterfaceAndRunTaskManager(configuration, resourceId, taskManager);
    -					}&lt;/li&gt;
	&lt;li&gt;catch (Throwable t) 
{
    -						LOG.error(&quot;Error while starting the TaskManager&quot;, t);
    -						System.exit(TaskManager.STARTUP_FAILURE_RETURN_CODE());
    -					}&lt;/li&gt;
	&lt;li&gt;return null;&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;});&lt;br/&gt;
    +			if (mainRunner == null) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Not sure about this.&lt;br/&gt;
    This is basically adding a non-production code relevant path in for testing purposes (i.e., it is only ever non-null in the `YarnTaskManagerRunnerTest`).&lt;/p&gt;

&lt;p&gt;    I think it would be better if we have a `protected createMainRunner(...)` method that can be overriden to inject the mock runner dependency for testing.&lt;/p&gt;</comment>
                            <comment id="16350431" author="githubbot" created="Fri, 2 Feb 2018 14:48:08 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172#discussion_r165635517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172#discussion_r165635517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/YarnApplicationMasterRunner.java &amp;#8212;&lt;br/&gt;
    @@ -170,9 +160,10 @@ protected int run(String[] args) {&lt;/p&gt;

&lt;p&gt;     			final Configuration flinkConfig = createConfiguration(currDir, dynamicProperties);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// set keytab principal and replace path with the local path of the shipped keytab file in NodeManager&lt;/li&gt;
	&lt;li&gt;if (keytabPath != null &amp;amp;&amp;amp; remoteKeytabPrincipal != null) {&lt;/li&gt;
	&lt;li&gt;flinkConfig.setString(SecurityOptions.KERBEROS_LOGIN_KEYTAB, keytabPath);&lt;br/&gt;
    +			File f = new File(currDir, Utils.KEYTAB_FILE_NAME);&lt;br/&gt;
    +			if (remoteKeytabPrincipal != null &amp;amp;&amp;amp; f.exists()) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Can we re-add the debug log `LOG.debug(&quot;keytabPath: {}&quot;, keytabPath);` to provide more visibility to this?&lt;/p&gt;</comment>
                            <comment id="16350432" author="githubbot" created="Fri, 2 Feb 2018 14:48:08 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172#discussion_r165663546&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172#discussion_r165663546&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/YarnTaskManagerRunner.java &amp;#8212;&lt;br/&gt;
    @@ -142,19 +153,10 @@ public static void runYarnTaskManager(String[] args, final Class&amp;lt;? extends YarnT&lt;/p&gt;

&lt;p&gt;     			SecurityUtils.install(sc);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SecurityUtils.getInstalledContext().runSecured(new Callable&amp;lt;Object&amp;gt;() {&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public Integer call() {&lt;/li&gt;
	&lt;li&gt;try 
{
    -						TaskManager.selectNetworkInterfaceAndRunTaskManager(configuration, resourceId, taskManager);
    -					}&lt;/li&gt;
	&lt;li&gt;catch (Throwable t) 
{
    -						LOG.error(&quot;Error while starting the TaskManager&quot;, t);
    -						System.exit(TaskManager.STARTUP_FAILURE_RETURN_CODE());
    -					}&lt;/li&gt;
	&lt;li&gt;return null;&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;});&lt;br/&gt;
    +			if (mainRunner == null) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I don&apos;t think this is a good idea, to add a code path in production code that exists only for the purpose of injecting a mock runner dependency in tests.&lt;/p&gt;

&lt;p&gt;    I&apos;ve added another commit upon @suez1224&apos;s changes that makes `YarnTaskManagerRunner` a factory-like class, that creates a `Runner` containing all the final configurations. The unit test can then test against that configuration.&lt;/p&gt;</comment>
                            <comment id="16350438" author="githubbot" created="Fri, 2 Feb 2018 14:50:34 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @suez1224 Thanks a lot for the contribution!&lt;br/&gt;
    I&apos;ve had a look and the changes LGTM. I did have a comment regarding injecting a dependency for the runner, which I&apos;ve added a commit for.&lt;/p&gt;

&lt;p&gt;    Can you take a look at 2ffa659 before I actually merge this, and let me know what you think? Thanks!&lt;br/&gt;
    Will make sure this gets in for Flink 1.4.1 ..&lt;/p&gt;</comment>
                            <comment id="16352146" author="githubbot" created="Mon, 5 Feb 2018 08:41:19 +0000"  >&lt;p&gt;Github user suez1224 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai thanks a lot for the refactoring, the commit looks good to me.&lt;/p&gt;</comment>
                            <comment id="16354362" author="githubbot" created="Tue, 6 Feb 2018 19:04:05 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16354391" author="tzulitai" created="Tue, 6 Feb 2018 19:12:03 +0000"  >&lt;p&gt;Merged.&lt;/p&gt;

&lt;p&gt;1.5 -&#160;97f0cac2af3a1140fa68090d94d83e009ad1e684&lt;br/&gt;
1.4 -&#160;82f3957811d2e5bcefabaa42326d3d4476e45df0&lt;/p&gt;</comment>
                            <comment id="16356577" author="githubbot" created="Thu, 8 Feb 2018 07:11:44 +0000"  >&lt;p&gt;Github user toggm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    What happended with this PR? Why was it closed?&lt;/p&gt;</comment>
                            <comment id="16356589" author="githubbot" created="Thu, 8 Feb 2018 07:20:57 +0000"  >&lt;p&gt;Github user suez1224 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It&apos;s already merged to master, and should be available in Flink 1.4.1.&lt;/p&gt;

&lt;p&gt;    On Wed, Feb 7, 2018 at 11:11 PM, toggm &amp;lt;notifications@github.com&amp;gt; wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; What happended with this PR? Why was it closed?&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; You are receiving this because you were mentioned.&lt;br/&gt;
    &amp;gt; Reply to this email directly, view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/flink/pull/5172#issuecomment-364022397&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5172#issuecomment-364022397&lt;/a&gt;&amp;gt;, or mute&lt;br/&gt;
    &amp;gt; the thread&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/notifications/unsubscribe-auth/AJ4thX1cYxNyVPuMuGza3FYL3WxyzA0sks5tSp47gaJpZM4RFGC7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/notifications/unsubscribe-auth/AJ4thX1cYxNyVPuMuGza3FYL3WxyzA0sks5tSp47gaJpZM4RFGC7&lt;/a&gt;&amp;gt;&lt;br/&gt;
    &amp;gt; .&lt;br/&gt;
    &amp;gt;&lt;/p&gt;



&lt;p&gt;    &amp;#8211; &lt;br/&gt;
    &quot;So you have to trust that the dots will somehow connect in your future.&quot;&lt;/p&gt;
</comment>
                            <comment id="16985905" author="wxchunjhyy@163.com" created="Mon, 2 Dec 2019 08:39:09 +0000"  >&lt;p&gt;flink on yarn deploy on simple authentication hadoop cluster can read hbase in another hadoop cluster with kerberos authentication ?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13125367">FLINK-8270</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o06f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>