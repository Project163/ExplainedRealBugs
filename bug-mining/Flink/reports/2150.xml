<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:31:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8352] Flink UI Reports No Error on Job Submission Failures</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8352</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;If you submit a job jar via the web UI and it raises an exception when started, the UI will report no error and will continue the show the animated image that makes it seem as if it is working.  In addition, no error is printed in the logs, unless the level is increased to at least DEBUG:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;@400000005a4c399202b87ebc DEBUG org.apache.flink.runtime.webmonitor.RuntimeMonitorHandler     - Error while handling request.
@400000005a4c399202b8868c java.util.concurrent.CompletionException: org.apache.flink.client.program.ProgramInvocationException: The program caused an error: 
@400000005a4c399202b88a74 	at org.apache.flink.runtime.webmonitor.handlers.JarPlanHandler.lambda$handleJsonRequest$0(JarPlanHandler.java:68)
@400000005a4c399202b88e5c 	at java.util.concurrent.CompletableFuture$AsyncSupply.run(Unknown Source)
@400000005a4c399202b8e44c 	at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
@400000005a4c399202b8e44c 	at java.util.concurrent.FutureTask.run(Unknown Source)
@400000005a4c399202b8e834 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(Unknown Source)
@400000005a4c399202b8e834 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
@400000005a4c399202b8f3ec 	at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
@400000005a4c399202b8f7d4 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
@400000005a4c399202b8f7d4 	at java.lang.Thread.run(Unknown Source)
@400000005a4c399202b8fbbc Caused by: org.apache.flink.client.program.ProgramInvocationException: The program caused an error: 
@400000005a4c399202b90b5c 	at org.apache.flink.client.program.OptimizerPlanEnvironment.getOptimizedPlan(OptimizerPlanEnvironment.java:93)
@400000005a4c399202b90f44 	at org.apache.flink.client.program.ClusterClient.getOptimizedPlan(ClusterClient.java:334)
@400000005a4c399202b90f44 	at org.apache.flink.runtime.webmonitor.handlers.JarActionHandler.getJobGraphAndClassLoader(JarActionHandler.java:76)
@400000005a4c399202b91afc 	at org.apache.flink.runtime.webmonitor.handlers.JarPlanHandler.lambda$handleJsonRequest$0(JarPlanHandler.java:57)
@400000005a4c399202b91afc 	... 8 more
@400000005a4c399202b91ee4 Caused by: java.lang.ExceptionInInitializerError
@400000005a4c399202b91ee4 	at com.cisco.sbg.amp.flink.ioc_engine.IocEngine.main(IocEngine.scala)
@400000005a4c399202b922cc 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
@400000005a4c399202b92a9c 	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
@400000005a4c399202b92a9c 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
@400000005a4c399202b92e84 	at java.lang.reflect.Method.invoke(Unknown Source)
@400000005a4c399202b92e84 	at org.apache.flink.client.program.PackagedProgram.callMainMethod(PackagedProgram.java:525)
@400000005a4c399202b9326c 	at org.apache.flink.client.program.PackagedProgram.invokeInteractiveModeForExecution(PackagedProgram.java:417)
@400000005a4c399202b93a3c 	at org.apache.flink.client.program.OptimizerPlanEnvironment.getOptimizedPlan(OptimizerPlanEnvironment.java:83)
@400000005a4c399202b949dc 	... 11 more
@400000005a4c399202b949dc Caused by: java.io.FileNotFoundException: /data/jenkins/jobs/XXX/workspace/target/scala-2.11/scoverage-data/scoverage.measurements.55 (No such file or directory)
@400000005a4c399202b951ac 	at java.io.FileOutputStream.open0(Native Method)
@400000005a4c399202b951ac 	at java.io.FileOutputStream.open(Unknown Source)
@400000005a4c399202b9597c 	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(Unknown Source)
@400000005a4c399202b9597c 	at java.io.FileWriter.&amp;lt;init&amp;gt;(Unknown Source)
@400000005a4c399202b95d64 	at scoverage.Invoker$$anonfun$1.apply(Invoker.scala:42)
@400000005a4c399202b95d64 	at scoverage.Invoker$$anonfun$1.apply(Invoker.scala:42)
@400000005a4c399202b9614c 	at scala.collection.concurrent.TrieMap.getOrElseUpdate(TrieMap.scala:901)
@400000005a4c399202b9614c 	at scoverage.Invoker$.invoked(Invoker.scala:42)
@400000005a4c399202b9691c 	at com.XXX$.&amp;lt;init&amp;gt;(IocEngine.scala:28)
@400000005a4c399202b9691c 	at com.XXX$.&amp;lt;clinit&amp;gt;(IocEngine.scala)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13128132">FLINK-8352</key>
            <summary>Flink UI Reports No Error on Job Submission Failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stevenlangbroek">Steven Langbroek</assignee>
                                    <reporter username="elevy">Elias Levy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jan 2018 02:09:01 +0000</created>
                <updated>Wed, 2 Oct 2019 17:50:48 +0000</updated>
                            <resolved>Thu, 25 Jan 2018 11:09:42 +0000</resolved>
                                    <version>1.4.0</version>
                    <version>1.5.0</version>
                                    <fixVersion>1.4.1</fixVersion>
                    <fixVersion>1.5.0</fixVersion>
                                    <component>Runtime / Web Frontend</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16315826" author="uce" created="Mon, 8 Jan 2018 07:58:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt;, do you know whether this is handled in the recently refactored (in master) run jar endpoint?&lt;/p&gt;</comment>
                            <comment id="16316214" author="zentol" created="Mon, 8 Jan 2018 12:31:13 +0000"  >&lt;p&gt;Doubt it. The handler will return an error but the UI won&apos;t display it.&lt;/p&gt;</comment>
                            <comment id="16316249" author="uce" created="Mon, 8 Jan 2018 12:51:41 +0000"  >&lt;p&gt;Great, if we get an error by the endpoint, that&apos;s already good. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Chesnay, do you have time to add a log message on warn level in `JarPlanHandler`?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevenlangbroek&quot; class=&quot;user-hover&quot; rel=&quot;stevenlangbroek&quot;&gt;stevenlangbroek&lt;/a&gt;, do you maybe have time to look into this issue? It would be very nice to get some UI feedback in case this happens. Ping me for details if you need a job that behaves badly to reproduce this.&lt;/p&gt;</comment>
                            <comment id="16316316" author="zentol" created="Mon, 8 Jan 2018 13:46:16 +0000"  >&lt;p&gt;All refactored handlers log exceptions as an ERROR already.&lt;/p&gt;</comment>
                            <comment id="16316498" author="uce" created="Mon, 8 Jan 2018 15:40:01 +0000"  >&lt;p&gt;Great, thanks for your comments.&lt;/p&gt;</comment>
                            <comment id="16316560" author="githubbot" created="Mon, 8 Jan 2018 16:32:55 +0000"  >&lt;p&gt;GitHub user StevenLangbroek opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5264&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8352&quot; title=&quot;Flink UI Reports No Error on Job Submission Failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8352&quot;&gt;&lt;del&gt;FLINK-8352&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;web-dashboard&amp;#93;&lt;/span&gt; Flink UI Reports No Error on Job Submission Failures&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Report Job submission failures to Flink UI users.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    When running a newly uploaded job, we trigger the `run` endpoint. This XHR request goes through Angular&apos;s `$http` server, but is converted to a promise through the library `q`. The &quot;error&quot; case isn&apos;t handled however, so the promise is never rejected, and so the error state is never propagated to the UI. &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Run the Flink UI locally, then upload the `SocketWindowWordCount.jar`, and start it without changing any configuration.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/StevenLangbroek/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StevenLangbroek/flink&lt;/a&gt; flink_8352_job_failure&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5264.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5264.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5264&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 33f0170627e82eb76eb08044383512ff9a9130d9&lt;br/&gt;
Author: Steven Langbroek &amp;lt;steven@...&amp;gt;&lt;br/&gt;
Date:   2018-01-08T16:27:15Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8352&quot; title=&quot;Flink UI Reports No Error on Job Submission Failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8352&quot;&gt;&lt;del&gt;FLINK-8352&lt;/del&gt;&lt;/a&gt; Flink UI Reports No Error on Job Submission Failures&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16316595" author="githubbot" created="Mon, 8 Jan 2018 17:08:04 +0000"  >&lt;p&gt;Github user uce commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5264&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good to me. I&apos;ve tried this out locally for both a working and not working (see screenshot) JAR.&lt;/p&gt;

&lt;p&gt;    !&lt;span class=&quot;error&quot;&gt;&amp;#91;screen shot 2018-01-08 at 18 05 58&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://user-images.githubusercontent.com/1756620/34682298-cad92672-f49e-11e7-9d55-486a53d5d3ad.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://user-images.githubusercontent.com/1756620/34682298-cad92672-f49e-11e7-9d55-486a53d5d3ad.png&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    I will merge this as soon as Travis gives a green light. &lt;/p&gt;</comment>
                            <comment id="16318108" author="githubbot" created="Tue, 9 Jan 2018 09:20:25 +0000"  >&lt;p&gt;Github user uce commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5264&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Build failure is unrelated (YARN test). Merging this. Thanks!&lt;/p&gt;
</comment>
                            <comment id="16318470" author="githubbot" created="Tue, 9 Jan 2018 14:14:57 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5264&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16339083" author="zentol" created="Thu, 25 Jan 2018 11:00:15 +0000"  >&lt;p&gt;master: 40ba6261b9b151459b3402087d20bb9ccba73599&lt;/p&gt;</comment>
                            <comment id="16339092" author="zentol" created="Thu, 25 Jan 2018 11:08:47 +0000"  >&lt;p&gt;1.4: 38278ebefe0fcc88448e6770de9c345f16b0d482&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13122191">FLINK-8187</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3og3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>