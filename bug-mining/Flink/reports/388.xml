<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2023] TypeExtractor does not work for (some) Scala Classes</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2023</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vanaepi&quot; class=&quot;user-hover&quot; rel=&quot;vanaepi&quot;&gt;vanaepi&lt;/a&gt; discovered some problems while working on the Scala Gelly API where, for example, a Scala MapFunction can not be correctly analyzed by the type extractor. For example, generic types will not be correctly detected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12830170">FLINK-2023</key>
            <summary>TypeExtractor does not work for (some) Scala Classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10200" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Not a Priority</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="aljoscha">Aljoscha Krettek</reporter>
                        <labels>
                            <label>auto-deprioritized-major</label>
                            <label>auto-deprioritized-minor</label>
                    </labels>
                <created>Fri, 15 May 2015 13:34:56 +0000</created>
                <updated>Thu, 10 Feb 2022 10:38:03 +0000</updated>
                                                                            <component>API / Type Serialization System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14546969" author="aalexandrov" created="Sat, 16 May 2015 22:50:30 +0000"  >&lt;p&gt;I think there is no easy way around this. Generic parameters in Scala classes are erased and at the Java level (on which the TypeExtractor operates) you will see only &lt;tt&gt;java.lang.Object&lt;/tt&gt; instances instead. For a more detailed description of the problem with some examples check &lt;a href=&quot;http://stackoverflow.com/questions/20749536/why-dont-scala-primitives-show-up-as-type-parameters-in-java-reflection&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this Stackoverflow entry&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14546970" author="aalexandrov" created="Sat, 16 May 2015 22:51:13 +0000"  >&lt;p&gt;Long story short - you cannot use the Java API directly from Scala (i.e., with Scala types) and rely on correct type inference form the TypeExtractor.&lt;/p&gt;</comment>
                            <comment id="14547064" author="aljoscha" created="Sun, 17 May 2015 06:47:03 +0000"  >&lt;p&gt;Yes, this is what I observed as well. Unfortunately this is quite bad for things like the Scala Gelli API on which &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vanaepi&quot; class=&quot;user-hover&quot; rel=&quot;vanaepi&quot;&gt;vanaepi&lt;/a&gt; is working.&lt;/p&gt;</comment>
                            <comment id="14547105" author="aalexandrov" created="Sun, 17 May 2015 09:50:23 +0000"  >&lt;p&gt;I suggest to have a thin layer which implicitly provides the TypeInformations over the Gelly Java API in Scala (similar to what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; has done with the DataSet Scala API).&lt;/p&gt;</comment>
                            <comment id="14547666" author="vanaepi" created="Mon, 18 May 2015 07:49:57 +0000"  >&lt;p&gt;The thing is that the Scala DataSet API reimplements the logic of the Java DataSet API rather than wrapping around it. For instance, scala.DataSet.map(MapFunction) builds a new MapOperator rather than passing the MapFunction to the Java API so a MapOperator is built there. The reason for this is probably similar to this issue. &lt;/p&gt;

&lt;p&gt;For the Scala Gelly API, we are trying to avoid reimplementing the whole thing in Scala. If we weren&apos;t, we could&apos;ve just talked to the Scala DataSet API rather than dealing with the Java API. Since the Gelly API is more high level, I&apos;m not sure how we could go about creating a thin layer to provide implicit TypeInformations without drilling all the way down to the layer of MapOperators, which would require reimplementing a lot of the Gelly logic (in which case it would be better to reimplement it on top of the scala DataSet API).&lt;/p&gt;</comment>
                            <comment id="14547706" author="aalexandrov" created="Mon, 18 May 2015 08:27:36 +0000"  >&lt;p&gt;For a lot of operators, Flink&apos;s DataSet API provides overloaded method signatures where a user can explicitly pass a TypeInformation object. If this is not given, Flink falls back to the TypeExtractor logic. &lt;/p&gt;

&lt;p&gt;If you follow a similar pattern in Gelly, you can &lt;/p&gt;

&lt;p&gt;1. wrap the Java API in Scala;&lt;br/&gt;
2. synthesize the TypeInformation using the already present Scala macros;&lt;br/&gt;
3. pass the synthesized object using the &quot;explicit&quot; signatures in Gelly.&lt;/p&gt;

&lt;p&gt;As a pre-requisite for that, the TypeExtraction logic should be extended in order to work with Scala base types.&lt;/p&gt;</comment>
                            <comment id="14547747" author="vanaepi" created="Mon, 18 May 2015 08:57:11 +0000"  >&lt;p&gt;So this works, I&apos;m just not entirely sure this is what you meant :&lt;/p&gt;

&lt;p&gt;I extended the java Gelly API with a method like the one below so I can explicitely pass all TypeInformation:&lt;/p&gt;

&lt;p&gt;    public &amp;lt;NV&amp;gt; Graph&amp;lt;K, NV, EV&amp;gt; mapVertices(final MapFunction&amp;lt;Vertex&amp;lt;K, VV&amp;gt;, NV&amp;gt; mapper, TypeInformation&amp;lt;K&amp;gt; keyType, TypeInformation&amp;lt;NV&amp;gt; valueType, TypeInformation&amp;lt;Vertex&amp;lt;K, NV&amp;gt;&amp;gt; returnType) {&lt;br/&gt;
        DataSet&amp;lt;Vertex&amp;lt;K, NV&amp;gt;&amp;gt; mappedVertices = vertices.map(&lt;br/&gt;
                new MapFunction&amp;lt;Vertex&amp;lt;K, VV&amp;gt;, Vertex&amp;lt;K, NV&amp;gt;&amp;gt;() {&lt;br/&gt;
                    public Vertex&amp;lt;K, NV&amp;gt; map(Vertex&amp;lt;K, VV&amp;gt; value) throws Exception &lt;/p&gt;
{
                        return new Vertex&amp;lt;K, NV&amp;gt;(value.f0, mapper.map(value));
                    }
&lt;p&gt;                }).returns(returnType);&lt;/p&gt;

&lt;p&gt;        return new Graph&amp;lt;K, NV, EV&amp;gt;(mappedVertices, this.edges, this.context);&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;I then call this method in the Scala API like this :&lt;/p&gt;

&lt;p&gt;new Graph&lt;span class=&quot;error&quot;&gt;&amp;#91;K, NV, EV&amp;#93;&lt;/span&gt;(jgraph.mapVertices&lt;span class=&quot;error&quot;&gt;&amp;#91;NV&amp;#93;&lt;/span&gt;(&lt;br/&gt;
            mapper,&lt;br/&gt;
            createTypeInformation&lt;span class=&quot;error&quot;&gt;&amp;#91;K&amp;#93;&lt;/span&gt;,&lt;br/&gt;
            createTypeInformation&lt;span class=&quot;error&quot;&gt;&amp;#91;NV&amp;#93;&lt;/span&gt;,&lt;br/&gt;
            createTypeInformation[Vertex&lt;span class=&quot;error&quot;&gt;&amp;#91;K, NV&amp;#93;&lt;/span&gt;]&lt;br/&gt;
        ))&lt;/p&gt;</comment>
                            <comment id="14547764" author="aalexandrov" created="Mon, 18 May 2015 09:19:21 +0000"  >&lt;p&gt;This was my basic idea, yes. In the example you have given things could be probably simplified a bit, as type info related to the input are already properly set. In the example above, you just need to pass the &lt;tt&gt;returnType&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14547776" author="vanaepi" created="Mon, 18 May 2015 09:37:04 +0000"  >&lt;p&gt;Indeed you are right. In the Java API, keyType and valueType are used to construct returnType, but since I am already constructing it, they serve no purpose. In any case, I will log a ticket to add these overloaded methods into the Java Gelly API. Thanks! Edit: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2033&quot; title=&quot;Add overloaded methods with explicit TypeInformation parameters to Gelly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2033&quot;&gt;&lt;del&gt;FLINK-2033&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14624671" author="stephanewen" created="Mon, 13 Jul 2015 13:56:06 +0000"  >&lt;p&gt;Is this issue actually resolved as &quot;Not a Problem&quot;, or is some problem remaining?&lt;/p&gt;</comment>
                            <comment id="14624709" author="aljoscha" created="Mon, 13 Jul 2015 14:27:33 +0000"  >&lt;p&gt;I think right now it&apos;s not an issue. But let&apos;s wait what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vanaepi&quot; class=&quot;user-hover&quot; rel=&quot;vanaepi&quot;&gt;vanaepi&lt;/a&gt; has to say about it once he get&apos;s back.&lt;/p&gt;</comment>
                            <comment id="14624724" author="vanaepi" created="Mon, 13 Jul 2015 14:34:19 +0000"  >&lt;p&gt;I am back as of today &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Adding the overloaded methods to the Java API which take an explicit TypeInformation as additional input solved this issue. Not sure how you want to label it, but it does not block the progress on the Scala Graph API anymore.&lt;/p&gt;</comment>
                            <comment id="17328985" author="flink-jira-bot" created="Thu, 22 Apr 2021 12:23:10 +0000"  >&lt;p&gt;This major issue is unassigned and itself and all of its Sub-Tasks have not been updated for 30 days. So, it has been labeled &quot;stale-major&quot;. If this ticket is indeed &quot;major&quot;, please either assign yourself or give an update. Afterwards, please remove the label. In 7 days the issue will be deprioritized.&lt;/p&gt;</comment>
                            <comment id="17336922" author="flink-jira-bot" created="Thu, 29 Apr 2021 23:46:53 +0000"  >&lt;p&gt;This issue was labeled &quot;stale-major&quot; 7 ago and has not received any updates so it is being deprioritized. If this ticket is actually Major, please raise the priority and ask a committer to assign you the issue or revive the public discussion.&lt;/p&gt;</comment>
                            <comment id="17467216" author="flink-jira-bot" created="Fri, 31 Dec 2021 10:39:55 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issues has been marked as Minor but is unassigned and neither itself nor its Sub-Tasks have been updated for 180 days. I have gone ahead and marked it &quot;stale-minor&quot;. If this ticket is still Minor, please either assign yourself or give an update. Afterwards, please remove the label or in 7 days the issue will be deprioritized.&lt;/p&gt;</comment>
                            <comment id="17490102" author="flink-jira-bot" created="Thu, 10 Feb 2022 10:38:03 +0000"  >&lt;p&gt;This issue was labeled &quot;stale-minor&quot; 7 days ago and has not received any updates so it is being deprioritized. If this ticket is actually Minor, please raise the priority and ask a committer to assign you the issue or revive the public discussion.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2es8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>