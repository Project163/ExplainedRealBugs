<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:22:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3197] InputStream not closed in BinaryInputFormat#createStatistics</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3197</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Here is related code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      FSDataInputStream fdis = file.getPath().getFileSystem().open(file.getPath(), blockInfo.getInfoSize());
      fdis.seek(file.getLen() - blockInfo.getInfoSize());

      blockInfo.read(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataInputViewStreamWrapper(fdis));
      totalCount += blockInfo.getAccumulatedRecordCount();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;fdis / wrapper should be closed upon leaving the method&lt;/p&gt;</description>
                <environment></environment>
        <key id="12925145">FLINK-3197</key>
            <summary>InputStream not closed in BinaryInputFormat#createStatistics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Dec 2015 20:08:46 +0000</created>
                <updated>Fri, 15 Jan 2016 10:54:37 +0000</updated>
                            <resolved>Fri, 15 Jan 2016 10:54:30 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15088831" author="githubbot" created="Fri, 8 Jan 2016 07:27:42 +0000"  >&lt;p&gt;GitHub user ajaybhat opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1494&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1494&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3197&quot; title=&quot;InputStream not closed in BinaryInputFormat#createStatistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3197&quot;&gt;&lt;del&gt;FLINK-3197&lt;/del&gt;&lt;/a&gt;: InputStream not closed in BinaryInputFormat#createStatistics&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ajaybhat/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ajaybhat/flink&lt;/a&gt; input_stream&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1494.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1494.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1494&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4669df94ad715eb76ab8ead7898e86c67596ee85&lt;br/&gt;
Author: Ajay Bhat &amp;lt;a.ajay.bhat@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-01-08T07:01:02Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3197&quot; title=&quot;InputStream not closed in BinaryInputFormat#createStatistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3197&quot;&gt;&lt;del&gt;FLINK-3197&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
    InputStream not closed in BinaryInputFormat#createStatistics&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15088905" author="githubbot" created="Fri, 8 Jan 2016 08:51:05 +0000"  >&lt;p&gt;Github user ramkrish86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1494#discussion_r49168115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1494#discussion_r49168115&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/BinaryInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -213,9 +213,10 @@ protected SequentialStatistics createStatistics(List&amp;lt;FileStatus&amp;gt; files, FileBase&lt;/p&gt;

&lt;p&gt;     			FSDataInputStream fdis = file.getPath().getFileSystem().open(file.getPath(), blockInfo.getInfoSize());&lt;br/&gt;
     			fdis.seek(file.getLen() - blockInfo.getInfoSize());&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     			blockInfo.read(new DataInputViewStreamWrapper(fdis));&lt;br/&gt;
     			totalCount += blockInfo.getAccumulatedRecordCount();&lt;br/&gt;
    +			fdis.close();&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Generally it is expected to enclose these type of IO streams/files to be enclosed in a try/finally block.&lt;/p&gt;</comment>
                            <comment id="15089343" author="githubbot" created="Fri, 8 Jan 2016 15:31:28 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1494#discussion_r49199370&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1494#discussion_r49199370&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/BinaryInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -213,9 +213,10 @@ protected SequentialStatistics createStatistics(List&amp;lt;FileStatus&amp;gt; files, FileBase&lt;/p&gt;

&lt;p&gt;     			FSDataInputStream fdis = file.getPath().getFileSystem().open(file.getPath(), blockInfo.getInfoSize());&lt;br/&gt;
     			fdis.seek(file.getLen() - blockInfo.getInfoSize());&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     			blockInfo.read(new DataInputViewStreamWrapper(fdis));&lt;br/&gt;
     			totalCount += blockInfo.getAccumulatedRecordCount();&lt;br/&gt;
    +			fdis.close();&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Agreed, we should try and consistently use a &quot;try-with-resource&quot; clause for streams.&lt;/p&gt;</comment>
                            <comment id="15089430" author="githubbot" created="Fri, 8 Jan 2016 16:13:52 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1494#discussion_r49205022&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1494#discussion_r49205022&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/BinaryInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -213,9 +213,10 @@ protected SequentialStatistics createStatistics(List&amp;lt;FileStatus&amp;gt; files, FileBase&lt;/p&gt;

&lt;p&gt;     			FSDataInputStream fdis = file.getPath().getFileSystem().open(file.getPath(), blockInfo.getInfoSize());&lt;br/&gt;
     			fdis.seek(file.getLen() - blockInfo.getInfoSize());&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     			blockInfo.read(new DataInputViewStreamWrapper(fdis));&lt;br/&gt;
     			totalCount += blockInfo.getAccumulatedRecordCount();&lt;br/&gt;
    +			fdis.close();&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +1, or to use the try with resources construct.&lt;/p&gt;</comment>
                            <comment id="15101619" author="githubbot" created="Fri, 15 Jan 2016 10:53:53 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1494&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1494&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15101620" author="stephanewen" created="Fri, 15 Jan 2016 10:54:30 +0000"  >&lt;p&gt;Fixed via 2c556f74e491a47e7c10e7b8cc03e5c65cf34d23&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qfvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>