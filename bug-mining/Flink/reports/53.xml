<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:17:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1096] Unexpected Histogram accumulator behavior</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1096</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The &lt;tt&gt;Histogram&lt;/tt&gt; accumulator uses the given value as both key and value for the histogram map. Hence, the histogram always contains entries like &lt;tt&gt;key -&amp;gt; n * key&lt;/tt&gt; where &lt;tt&gt;n&lt;/tt&gt; is the number of times that &lt;tt&gt;key&lt;/tt&gt; has been added to the histogram.&lt;br/&gt;
Supposedly, adding &lt;tt&gt;key&lt;/tt&gt; into the histogram &lt;tt&gt;n&lt;/tt&gt; times should create the entr &lt;tt&gt;key -&amp;gt; n&lt;/tt&gt; instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12740543">FLINK-1096</key>
            <summary>Unexpected Histogram accumulator behavior</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sekruse">Sebastian Kruse</assignee>
                                    <reporter username="sekruse">Sebastian Kruse</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Sep 2014 16:37:35 +0000</created>
                <updated>Tue, 13 Apr 2021 20:39:05 +0000</updated>
                            <resolved>Sun, 21 Sep 2014 18:28:30 +0000</resolved>
                                                    <fixVersion>0.7.0-incubating</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14128725" author="githubbot" created="Wed, 10 Sep 2014 17:01:06 +0000"  >&lt;p&gt;GitHub user sekruse opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1096&quot; title=&quot;Unexpected Histogram accumulator behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1096&quot;&gt;&lt;del&gt;FLINK-1096&lt;/del&gt;&lt;/a&gt; Correction to histogram accumulator&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;each key is associated with the number of times it was inserted into the accumulator&lt;/li&gt;
	&lt;li&gt;backed histogram with a tree map to present the entries sorted by key&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sekruse/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/sekruse/incubator-flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1096&quot; title=&quot;Unexpected Histogram accumulator behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1096&quot;&gt;&lt;del&gt;FLINK-1096&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #117&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5080784896b8265bb58bf5c3fb471552c1277b37&lt;br/&gt;
Author: Sebastian Kruse &amp;lt;sebastian.kruse@hpi.de&amp;gt;&lt;br/&gt;
Date:   2014-09-10T16:59:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1096&quot; title=&quot;Unexpected Histogram accumulator behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1096&quot;&gt;&lt;del&gt;FLINK-1096&lt;/del&gt;&lt;/a&gt; Correction to histogram accumulator&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;each key is associated with the number of times it was inserted into the accumulator&lt;/li&gt;
	&lt;li&gt;backed histogram with a tree map to present the entries sorted by key&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="14130039" author="githubbot" created="Thu, 11 Sep 2014 13:56:00 +0000"  >&lt;p&gt;Github user fhueske commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117#issuecomment-55266868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117#issuecomment-55266868&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the PR.&lt;br/&gt;
    LGTM&lt;/p&gt;</comment>
                            <comment id="14130045" author="fhueske" created="Thu, 11 Sep 2014 13:59:31 +0000"  >&lt;p&gt;I agree. I would also expect the count instead of the sum.&lt;br/&gt;
+1 for changing this.&lt;/p&gt;

&lt;p&gt;Does it make sense to make the Histogram more generic and support all comparable data types?&lt;/p&gt;</comment>
                            <comment id="14130115" author="sekruse" created="Thu, 11 Sep 2014 15:02:00 +0000"  >&lt;p&gt;That seems to be a good idea. You have to provide a write and read function for accumulators, though. For user-defined keys, you would need user-defined serialization functions as well. Moreover, I think that counted values are in general not comparable, e.g., some kind of arrays or so.&lt;/p&gt;

&lt;p&gt;I would suggest to have some standard histograms, e.g. for longs/ints and strings, and maybe an abstract base class for user-defined keys.&lt;/p&gt;</comment>
                            <comment id="14130133" author="githubbot" created="Thu, 11 Sep 2014 15:21:01 +0000"  >&lt;p&gt;Github user sekruse commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117#issuecomment-55279816&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117#issuecomment-55279816&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Oh, indeed, I seem to have missed a test. I changed that one and now ran a &lt;tt&gt;mvn test&lt;/tt&gt; successfully on my machine.&lt;/p&gt;</comment>
                            <comment id="14130137" author="githubbot" created="Thu, 11 Sep 2014 15:24:35 +0000"  >&lt;p&gt;Github user fhueske commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117#issuecomment-55280405&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117#issuecomment-55280405&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Integration tests are only triggered with ``mvn verify``.&lt;br/&gt;
    Not sure if there are any that depend on the changed code.&lt;/p&gt;</comment>
                            <comment id="14130168" author="githubbot" created="Thu, 11 Sep 2014 15:51:06 +0000"  >&lt;p&gt;Github user sekruse commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117#issuecomment-55284546&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117#issuecomment-55284546&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ah okay, the more you know :smiley: &lt;/p&gt;

&lt;p&gt;    Unfortunately, on my Windows, there seems to be an issue with the deletion of a temp file, so that I cannot actually run the whole integration tests there. On travis, it seems to be passing now, though.&lt;/p&gt;</comment>
                            <comment id="14137380" author="githubbot" created="Wed, 17 Sep 2014 15:21:21 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117#issuecomment-55910128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117#issuecomment-55910128&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Do you think its difficult to fix the temp file deletion? Would be cool to have support for Windows as well&lt;/p&gt;</comment>
                            <comment id="14137383" author="githubbot" created="Wed, 17 Sep 2014 15:24:23 +0000"  >&lt;p&gt;Github user sekruse commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117#issuecomment-55910613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117#issuecomment-55910613&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I don&apos;t think that this issue is caused by the histogram, it is just a problem with one of the integration tests. I can report that issue, though.&lt;/p&gt;</comment>
                            <comment id="14137384" author="githubbot" created="Wed, 17 Sep 2014 15:28:19 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117#issuecomment-55911250&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117#issuecomment-55911250&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think adding a JIRA ticket for the issue would be great.&lt;/p&gt;</comment>
                            <comment id="14137735" author="githubbot" created="Wed, 17 Sep 2014 18:49:58 +0000"  >&lt;p&gt;Github user fhueske commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117#issuecomment-55941511&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117#issuecomment-55941511&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think, there is already a ticket for this issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-98&quot; title=&quot;Temp Files are not removed if job fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-98&quot;&gt;&lt;del&gt;FLINK-98&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
    Please check and add a comment if you think something is missing.&lt;/p&gt;</comment>
                            <comment id="14142538" author="githubbot" created="Sun, 21 Sep 2014 17:56:50 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117#issuecomment-56306783&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117#issuecomment-56306783&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This looks good to me, I will merge this...&lt;/p&gt;</comment>
                            <comment id="14142548" author="githubbot" created="Sun, 21 Sep 2014 18:28:15 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/117&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/117&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14142551" author="stephanewen" created="Sun, 21 Sep 2014 18:28:30 +0000"  >&lt;p&gt;Fixed in 9463e27bc5142b3f72ee26e5eb25de9dac1b0125&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zvzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>