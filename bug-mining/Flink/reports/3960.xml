<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:45:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-17135] PythonCalcSplitRuleTest.testPandasFunctionMixedWithGeneralPythonFunction failed</title>
                <link>https://issues.apache.org/jira/browse/FLINK-17135</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Shared by Chesnay on&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17093?focusedCommentId=17083055&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17083055:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-17093?focusedCommentId=17083055&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17083055:&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;PythonCalcSplitRuleTest.testPandasFunctionMixedWithGeneralPythonFunction failed on master:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 [INFO] Running org.apache.flink.table.planner.plan.rules.logical.PythonCalcSplitRuleTest
 [ERROR] Tests run: 19, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.441 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.table.planner.plan.rules.logical.PythonCalcSplitRuleTest
 [ERROR] testPandasFunctionMixedWithGeneralPythonFunction(org.apache.flink.table.planner.plan.rules.logical.PythonCalcSplitRuleTest) Time elapsed: 0.032 s &amp;lt;&amp;lt;&amp;lt; FAILURE!
 java.lang.AssertionError: 
 type mismatch:
 type1:
 INTEGER NOT NULL
 type2:
 INTEGER NOT NULL
 at org.apache.calcite.util.Litmus$1.fail(Litmus.java:31)
 at org.apache.calcite.plan.RelOptUtil.eq(RelOptUtil.java:2188)
 at org.apache.calcite.rex.RexProgramBuilder$RegisterInputShuttle.visitInputRef(RexProgramBuilder.java:948)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13298240">FLINK-17135</key>
            <summary>PythonCalcSplitRuleTest.testPandasFunctionMixedWithGeneralPythonFunction failed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dian.fu">Dian Fu</assignee>
                                    <reporter username="dian.fu">Dian Fu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 14 Apr 2020 11:06:09 +0000</created>
                <updated>Tue, 21 Apr 2020 02:39:10 +0000</updated>
                            <resolved>Tue, 21 Apr 2020 02:39:10 +0000</resolved>
                                    <version>1.11.0</version>
                                    <fixVersion>1.11.0</fixVersion>
                                    <component>API / Python</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="17083115" author="dawidwys" created="Tue, 14 Apr 2020 11:12:36 +0000"  >&lt;p&gt;I also observed this problem locally. It is not deterministic though. I&apos;ve seen it only once in a couple of runs.&lt;/p&gt;</comment>
                            <comment id="17083117" author="dian.fu" created="Tue, 14 Apr 2020 11:15:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&#160;Thanks for sharing this information. Seems an instable test. I will take a look at it.&lt;/p&gt;</comment>
                            <comment id="17083201" author="aljoscha" created="Tue, 14 Apr 2020 13:07:27 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://dev.azure.com/aljoschakrettek/Flink/_build/results?buildId=93&amp;amp;view=logs&amp;amp;j=a1590513-d0ea-59c3-3c7b-aad756c48f25&amp;amp;t=912be268-3995-5931-14ba-f3d52302cb3c&amp;amp;l=4792&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/aljoschakrettek/Flink/_build/results?buildId=93&amp;amp;view=logs&amp;amp;j=a1590513-d0ea-59c3-3c7b-aad756c48f25&amp;amp;t=912be268-3995-5931-14ba-f3d52302cb3c&amp;amp;l=4792&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17084133" author="dian.fu" created="Wed, 15 Apr 2020 14:35:44 +0000"  >&lt;p&gt;Status update: I found that this issue could be reproduced every time in the personal Azure Pipeline. However, I still cannot reproduce it in my local environment and also I have not found failures in the Azure Pipeline triggered in the PR. I&apos;m still adding more logs and trying to figure out the root cause.&lt;/p&gt;</comment>
                            <comment id="17084300" author="dawidwys" created="Wed, 15 Apr 2020 18:31:42 +0000"  >&lt;p&gt;Locally for me it fails every two runs when I execute &lt;tt&gt;mvn clean install&lt;/tt&gt; in &lt;tt&gt;flink-table&lt;/tt&gt; module.&lt;/p&gt;</comment>
                            <comment id="17084473" author="dian.fu" created="Thu, 16 Apr 2020 01:35:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&#160;Thanks a lot for this information. Very helpful. I could not reproduce it when executing in the IDE and also only executing PythonCalcSplitRuleTest in the command line. Will try to execute all the tests using `mvn clean install` in the command line.&lt;/p&gt;</comment>
                            <comment id="17084686" author="dian.fu" created="Thu, 16 Apr 2020 09:07:02 +0000"  >&lt;p&gt;I have reproduced this issue in my local machine and I think it&apos;s a bug introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/CALCITE-3149&quot; title=&quot;CACHE in RelDataTypeFactoryImpl can&amp;#39;t be garbage collected &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CALCITE-3149&quot;&gt;&lt;del&gt;CALCITE-3149&lt;/del&gt;&lt;/a&gt; after debugging. &lt;a href=&quot;https://issues.apache.org/jira/browse/CALCITE-3149&quot; title=&quot;CACHE in RelDataTypeFactoryImpl can&amp;#39;t be garbage collected &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CALCITE-3149&quot;&gt;&lt;del&gt;CALCITE-3149&lt;/del&gt;&lt;/a&gt; ensures that the&#160;RelDataType cache(DATATYPE_CACHE) in RelDataTypeFactoryImpl could be garbage collected. However, the equality check still checks the &lt;span class=&quot;error&quot;&gt;&amp;#91;object reference&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/calcite/blob/52a57078ba081b24b9d086ed363c715485d1a519/core/src/main/java/org/apache/calcite/rex/RexProgramBuilder.java#L948&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/calcite/blob/52a57078ba081b24b9d086ed363c715485d1a519/core/src/main/java/org/apache/calcite/rex/RexProgramBuilder.java#L948&lt;/a&gt;). It may cause issues in cases that the cache DATATYPE_CACHE has been garbage collected and at the same time there are still references to the old RelDataType (I have saw there are RelDataTypes which are not in the DATATYPE_CACHE cache and this is the root cause of the test failure reported in this JIRA). I will change the tests a bit to work around this issue for the time being. &lt;/p&gt;

&lt;p&gt;However, this is a bug which should also be fixed in calcite. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danny0405&quot; class=&quot;user-hover&quot; rel=&quot;danny0405&quot;&gt;danny0405&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17087048" author="rmetzger" created="Sun, 19 Apr 2020 15:22:29 +0000"  >&lt;p&gt;more instances:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/georgeryan1322/Flink/_build/results?buildId=304&amp;amp;view=logs&amp;amp;j=a1590513-d0ea-59c3-3c7b-aad756c48f25&amp;amp;t=d62215ae-261e-5cec-c84f-5abb77c78ded&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/georgeryan1322/Flink/_build/results?buildId=304&amp;amp;view=logs&amp;amp;j=a1590513-d0ea-59c3-3c7b-aad756c48f25&amp;amp;t=d62215ae-261e-5cec-c84f-5abb77c78ded&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/georgeryan1322/Flink/_build/results?buildId=305&amp;amp;view=logs&amp;amp;j=a1590513-d0ea-59c3-3c7b-aad756c48f25&amp;amp;t=d62215ae-261e-5cec-c84f-5abb77c78ded&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/georgeryan1322/Flink/_build/results?buildId=305&amp;amp;view=logs&amp;amp;j=a1590513-d0ea-59c3-3c7b-aad756c48f25&amp;amp;t=d62215ae-261e-5cec-c84f-5abb77c78ded&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/georgeryan1322/Flink/_build/results?buildId=306&amp;amp;view=logs&amp;amp;j=a1590513-d0ea-59c3-3c7b-aad756c48f25&amp;amp;t=d62215ae-261e-5cec-c84f-5abb77c78ded&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/georgeryan1322/Flink/_build/results?buildId=306&amp;amp;view=logs&amp;amp;j=a1590513-d0ea-59c3-3c7b-aad756c48f25&amp;amp;t=d62215ae-261e-5cec-c84f-5abb77c78ded&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/georgeryan1322/Flink/_build/results?buildId=308&amp;amp;view=logs&amp;amp;j=a1590513-d0ea-59c3-3c7b-aad756c48f25&amp;amp;t=d62215ae-261e-5cec-c84f-5abb77c78ded&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/georgeryan1322/Flink/_build/results?buildId=308&amp;amp;view=logs&amp;amp;j=a1590513-d0ea-59c3-3c7b-aad756c48f25&amp;amp;t=d62215ae-261e-5cec-c84f-5abb77c78ded&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17088230" author="hequn8128" created="Tue, 21 Apr 2020 02:38:51 +0000"  >&lt;p&gt;Hi, the fix has been merged into master via 34105c708b518f1fc5cc83f62bf10143ff662d13&lt;br/&gt;
Sorry for the trouble.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0dly0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>