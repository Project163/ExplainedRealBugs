<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1952] Cannot run ConnectedComponents example: Could not allocate a slot on instance</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1952</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Steps to reproduce&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./bin/yarn-session.sh -n 350 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;... wait until they are connected ...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of connected TaskManagers changed to 266. Slots available: 266
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of connected TaskManagers changed to 323. Slots available: 323
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of connected TaskManagers changed to 334. Slots available: 334
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of connected TaskManagers changed to 343. Slots available: 343
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of connected TaskManagers changed to 350. Slots available: 350
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Start CC&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./bin/flink run -p 350 ./examples/flink-java-examples-0.9-SNAPSHOT-ConnectedComponents.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;---&amp;gt; it runs&lt;/p&gt;

&lt;p&gt;Run KMeans, let it fail with &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Failed to deploy the task Map (Map at main(KMeans.java:100)) (1/350) - execution #0 to slot SimpleSlot (2)(2)(0) - 182b7661ca9547a84591de940c47a200 - ALLOCATED/ALIVE: java.io.IOException: Insufficient number of network buffers: required 350, but only 254 available. The total number of network buffers is currently set to 2048. You can increase &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; number by setting the configuration key &lt;span class=&quot;code-quote&quot;&gt;&apos;taskmanager.network.numberOfBuffers&apos;&lt;/span&gt;.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;... as expected.&lt;/p&gt;

&lt;p&gt;(I&apos;ve waited for 10 minutes between the two submissions)&lt;/p&gt;

&lt;p&gt;Starting CC now will fail:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./bin/flink run -p 350 ./examples/flink-java-examples-0.9-SNAPSHOT-ConnectedComponents.jar 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Error message(s):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.IllegalStateException: Could not schedule consumer vertex IterationHead(WorksetIteration (Unnamed Delta Iteration)) (19/350)
	at org.apache.flink.runtime.executiongraph.Execution$3.call(Execution.java:479)
	at org.apache.flink.runtime.executiongraph.Execution$3.call(Execution.java:469)
	at akka.dispatch.Futures$$anonfun$&lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;$1.apply(Future.scala:94)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)
	at scala.concurrent.impl.ExecutionContextImpl$$anon$3.exec(ExecutionContextImpl.scala:107)
	... 4 more
Caused by: org.apache.flink.runtime.jobmanager.scheduler.NoResourceAvailableException: Could not allocate a slot on instance 4a6d761cb084c32310ece1f849556faf @ cloud-19 - 1 slots - URL: akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@130.149.21.23:51400/user/taskmanager, as required by the co-location constraint.
&lt;/span&gt;	at org.apache.flink.runtime.jobmanager.scheduler.Scheduler.scheduleTask(Scheduler.java:247)
	at org.apache.flink.runtime.jobmanager.scheduler.Scheduler.scheduleImmediately(Scheduler.java:110)
	at org.apache.flink.runtime.executiongraph.Execution.scheduleForExecution(Execution.java:262)
	at org.apache.flink.runtime.executiongraph.ExecutionVertex.scheduleForExecution(ExecutionVertex.java:436)
	at org.apache.flink.runtime.executiongraph.Execution$3.call(Execution.java:475)
	... 9 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12825482">FLINK-1952</key>
            <summary>Cannot run ConnectedComponents example: Could not allocate a slot on instance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Apr 2015 10:34:42 +0000</created>
                <updated>Thu, 28 Feb 2019 14:32:06 +0000</updated>
                            <resolved>Wed, 27 May 2015 15:03:31 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14516818" author="rmetzger" created="Tue, 28 Apr 2015 11:07:47 +0000"  >&lt;p&gt;Also, I saw this error, maybe its helpful&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Could not prepare the execution graph org.apache.flink.runtime.executiongraph.ExecutionGraph@17646800 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; archiving.
java.lang.IllegalStateException: SlotSharingGroup cannot clear task assignment, group still has allocated resources.
	at org.apache.flink.runtime.jobmanager.scheduler.SlotSharingGroup.clearTaskAssignment(SlotSharingGroup.java:76)
	at org.apache.flink.runtime.executiongraph.ExecutionJobVertex.prepareForArchiving(ExecutionJobVertex.java:400)
	at org.apache.flink.runtime.executiongraph.ExecutionGraph.prepareForArchiving(ExecutionGraph.java:771)
	at org.apache.flink.runtime.jobmanager.JobManager.org$apache$flink$runtime$jobmanager$JobManager$$removeJob(JobManager.scala:675)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$receiveWithLogMessages$1.applyOrElse(JobManager.scala:329)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply$mcVL$sp(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:25)
	at org.apache.flink.yarn.ApplicationMasterActor$$anonfun$receiveYarnMessages$1.applyOrElse(ApplicationMasterActor.scala:99)
	at scala.PartialFunction$OrElse.apply(PartialFunction.scala:162)
	at org.apache.flink.runtime.ActorLogMessages$$anon$1.apply(ActorLogMessages.scala:37)
	at org.apache.flink.runtime.ActorLogMessages$$anon$1.apply(ActorLogMessages.scala:30)
	at scala.PartialFunction$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;applyOrElse(PartialFunction.scala:118)
	at org.apache.flink.runtime.ActorLogMessages$$anon$1.applyOrElse(ActorLogMessages.scala:30)
	at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundReceive(Actor.scala:465)
	at org.apache.flink.runtime.jobmanager.JobManager.aroundReceive(JobManager.scala:94)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)
	at akka.actor.ActorCell.invoke(ActorCell.scala:487)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:254)
	at akka.dispatch.Mailbox.run(Mailbox.scala:221)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:231)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14516845" author="stephanewen" created="Tue, 28 Apr 2015 11:25:49 +0000"  >&lt;p&gt;That is helpful, thanks!&lt;/p&gt;</comment>
                            <comment id="14550201" author="stephanewen" created="Tue, 19 May 2015 10:27:30 +0000"  >&lt;p&gt;I cannot reproduce this error any more with these steps:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ConnectedComponents (successful)&lt;/li&gt;
	&lt;li&gt;KMeans (runs out of buffers)&lt;/li&gt;
	&lt;li&gt;ConnectedComponents&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The third program now succeeds as expected.&lt;/p&gt;

&lt;p&gt;I think the reason is that the task lifecycle is more robust now (with my changes from two weeks ago). &lt;/p&gt;

&lt;p&gt;Still, it does not mean that the slot sharing groups are bug free. It only means that this situation does not trigger that bug any more...&lt;/p&gt;</comment>
                            <comment id="14550215" author="rmetzger" created="Tue, 19 May 2015 10:41:59 +0000"  >&lt;p&gt;Thank you for looking into the issue.&lt;/p&gt;

&lt;p&gt;Lets have a look together into this.&lt;br/&gt;
I just tried it again, now it fails even earlier.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./bin/yarn-session.sh -n 350
./bin/flink run -p 350 ./examples/flink-java-examples-0.9-SNAPSHOT-ConnectedComponents.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It fails with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.IllegalStateException: Could not schedule consumer vertex IterationHead(WorksetIteration (Unnamed Delta Iteration)) (295/350)
	at org.apache.flink.runtime.executiongraph.Execution$3.call(Execution.java:478)
	at org.apache.flink.runtime.executiongraph.Execution$3.call(Execution.java:468)
	at akka.dispatch.Futures$$anonfun$&lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;$1.apply(Future.scala:94)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)
	at scala.concurrent.impl.ExecutionContextImpl$$anon$3.exec(ExecutionContextImpl.scala:107)
	... 4 more
Caused by: org.apache.flink.runtime.jobmanager.scheduler.NoResourceAvailableException: Could not allocate a slot on instance df15c17dbcf62e90e0988b9a1006889e @ cloud-36 - 1 slots - URL: akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@130.149.21.66:58234/user/taskmanager, as required by the co-location constraint.
&lt;/span&gt;	at org.apache.flink.runtime.jobmanager.scheduler.Scheduler.scheduleTask(Scheduler.java:247)
	at org.apache.flink.runtime.jobmanager.scheduler.Scheduler.scheduleImmediately(Scheduler.java:110)
	at org.apache.flink.runtime.executiongraph.Execution.scheduleForExecution(Execution.java:272)
	at org.apache.flink.runtime.executiongraph.ExecutionVertex.scheduleForExecution(ExecutionVertex.java:426)
	at org.apache.flink.runtime.executiongraph.Execution$3.call(Execution.java:474)
	... 9 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14550364" author="stephanewen" created="Tue, 19 May 2015 12:39:04 +0000"  >&lt;p&gt;Okay, I am able to reproduce it locally with a local mini cluster using 100 taskmanagers.&lt;/p&gt;

&lt;p&gt;Not so mini any more, that minicluster &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14550892" author="stephanewen" created="Tue, 19 May 2015 17:59:32 +0000"  >&lt;p&gt;Next step in the diagnosis: There is apparently something wrong in the hierarchy of shared slots. The root slot (that is actually allocated from the TaskManager) is released, while the slot associated with the CoLocation group of the tasks is still alive.&lt;/p&gt;</comment>
                            <comment id="14559951" author="githubbot" created="Tue, 26 May 2015 21:57:08 +0000"  >&lt;p&gt;GitHub user StephanEwen opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/731&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/731&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1952&quot; title=&quot;Cannot run ConnectedComponents example: Could not allocate a slot on instance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1952&quot;&gt;&lt;del&gt;FLINK-1952&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jobmanager&amp;#93;&lt;/span&gt; Rework and fix slot sharing scheduler&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/StephanEwen/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StephanEwen/incubator-flink&lt;/a&gt; slots_fix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/731.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/731.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #731&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 771437360662bcf105c72d95924a5ce3c69f1585&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-05-19T17:08:25Z&lt;/p&gt;

&lt;p&gt;    Add big not so mini cluster test for CC to provoke scheduler problem&lt;/p&gt;

&lt;p&gt;commit 067c3868c07ea125d8f429e38476d3e8edfbad08&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-05-20T09:37:56Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1952&quot; title=&quot;Cannot run ConnectedComponents example: Could not allocate a slot on instance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1952&quot;&gt;&lt;del&gt;FLINK-1952&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jobmanager&amp;#93;&lt;/span&gt; Rework and fix slot sharing scheduler&lt;/p&gt;

&lt;p&gt;commit 88074eda5c99945d0c0f106240010a451ba41658&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-05-26T20:56:50Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Fix AvroExternalJarProgramITCase logging&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14559961" author="githubbot" created="Tue, 26 May 2015 22:01:50 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/731#issuecomment-105679811&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/731#issuecomment-105679811&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The latest commit &quot;Add big not so mini cluster test for CC to provoke scheduler problem&quot; is not going to be merged. It is solely for verifying that the scheduler now correctly handles jobs with iterations and higher parallelism and many TaskManagers.&lt;/p&gt;

&lt;p&gt;    You can start a 100 TaskManager cluster with that test setup in the commit and run connected components. (Give the VM 5GB heap space, then it works smoothly).&lt;/p&gt;</comment>
                            <comment id="14559963" author="githubbot" created="Tue, 26 May 2015 22:02:23 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/731#issuecomment-105679990&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/731#issuecomment-105679990&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Sorry for the whitespace re-formatting. My IntelliJ settings got reverted somehow, so it started auto-reformatting code :-/&lt;/p&gt;</comment>
                            <comment id="14560726" author="githubbot" created="Wed, 27 May 2015 10:10:13 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/731#discussion_r31119327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/731#discussion_r31119327&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/instance/Slot.java &amp;#8212;&lt;br/&gt;
    @@ -24,27 +24,40 @@&lt;br/&gt;
     import java.util.concurrent.atomic.AtomicIntegerFieldUpdater;&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Base class for task slots. TaskManagers offer one or more task slots, they define how many&lt;/li&gt;
	&lt;li&gt;* parallel tasks or task groups a TaskManager executes.&lt;br/&gt;
    + * Base class for task slots. TaskManagers offer one or more task slots, which define a slice of &lt;br/&gt;
    + * their resources.&lt;br/&gt;
    + *&lt;br/&gt;
    + * &amp;lt;p&amp;gt;In the simplest case, a slot holds a single task (
{@link SimpleSlot}
&lt;p&gt;). In the more complex&lt;br/&gt;
    + * case, a slot is shared (&lt;/p&gt;
{@link SharedSlot}
&lt;p&gt;) abd contains a set of tasks. Shared slots may contain&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    typo: abd -&amp;gt; and&lt;/p&gt;</comment>
                            <comment id="14560860" author="githubbot" created="Wed, 27 May 2015 12:25:46 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/731#discussion_r31127537&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/731#discussion_r31127537&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/test/java/org/apache/flink/runtime/instance/SharedSlotsTest.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,665 @@&lt;br/&gt;
    +/*&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + * distributed with this work for additional information&lt;br/&gt;
    + * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    + * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    + * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    + * with the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +&lt;br/&gt;
    +package org.apache.flink.runtime.instance;&lt;br/&gt;
    +&lt;br/&gt;
    +import org.apache.flink.api.common.JobID;&lt;br/&gt;
    +import org.apache.flink.runtime.jobgraph.AbstractJobVertex;&lt;br/&gt;
    +import org.apache.flink.runtime.jobgraph.JobVertexID;&lt;br/&gt;
    +import org.apache.flink.runtime.jobmanager.scheduler.CoLocationConstraint;&lt;br/&gt;
    +import org.apache.flink.runtime.jobmanager.scheduler.CoLocationGroup;&lt;br/&gt;
    +import org.apache.flink.runtime.jobmanager.scheduler.Locality;&lt;br/&gt;
    +import org.apache.flink.runtime.jobmanager.scheduler.SchedulerTestUtils;&lt;br/&gt;
    +import org.apache.flink.runtime.jobmanager.scheduler.SlotSharingGroup;&lt;br/&gt;
    +import org.apache.flink.util.AbstractID;&lt;br/&gt;
    +&lt;br/&gt;
    +import org.junit.Test;&lt;br/&gt;
    +&lt;br/&gt;
    +import java.util.Collections;&lt;br/&gt;
    +&lt;br/&gt;
    +import static org.junit.Assert.*;&lt;br/&gt;
    +&lt;br/&gt;
    +/**&lt;br/&gt;
    + * Tests for the allocation, properties, and release of shared slots.&lt;br/&gt;
    + */&lt;br/&gt;
    +public class SharedSlotsTest {&lt;br/&gt;
    +	&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void allocateAndReleaseEmptySlot() {&lt;br/&gt;
    +		try {&lt;br/&gt;
    +			JobID jobId = new JobID();&lt;br/&gt;
    +			JobVertexID vertexId = new JobVertexID();&lt;br/&gt;
    +			&lt;br/&gt;
    +			SlotSharingGroup sharingGroup = new SlotSharingGroup(vertexId);&lt;br/&gt;
    +			SlotSharingGroupAssignment assignment = sharingGroup.getTaskAssignment();&lt;br/&gt;
    +			&lt;br/&gt;
    +			assertEquals(0, assignment.getNumberOfSlots());&lt;br/&gt;
    +			assertEquals(0, assignment.getNumberOfAvailableSlotsForGroup(vertexId));&lt;br/&gt;
    +			&lt;br/&gt;
    +			Instance instance = SchedulerTestUtils.getRandomInstance(2);&lt;br/&gt;
    +			&lt;br/&gt;
    +			assertEquals(2, instance.getTotalNumberOfSlots());&lt;br/&gt;
    +			assertEquals(0, instance.getNumberOfAllocatedSlots());&lt;br/&gt;
    +			assertEquals(2, instance.getNumberOfAvailableSlots());&lt;br/&gt;
    +			&lt;br/&gt;
    +			// allocate a shared slot&lt;br/&gt;
    +			SharedSlot slot = instance.allocateSharedSlot(jobId, assignment);&lt;br/&gt;
    +			assertEquals(2, instance.getTotalNumberOfSlots());&lt;br/&gt;
    +			assertEquals(1, instance.getNumberOfAllocatedSlots());&lt;br/&gt;
    +			assertEquals(1, instance.getNumberOfAvailableSlots());&lt;br/&gt;
    +			&lt;br/&gt;
    +			// check that the new slot is fresh&lt;br/&gt;
    +			assertTrue(slot.isAlive());&lt;br/&gt;
    +			assertFalse(slot.isCanceled());&lt;br/&gt;
    +			assertFalse(slot.isReleased());&lt;br/&gt;
    +			assertEquals(0, slot.getNumberLeaves());&lt;br/&gt;
    +			assertFalse(slot.hasChildren());&lt;br/&gt;
    +			assertTrue(slot.isRootAndEmpty());&lt;br/&gt;
    +			assertNotNull(slot.toString());&lt;br/&gt;
    +			assertTrue(slot.getSubSlots().isEmpty());&lt;br/&gt;
    +			assertEquals(0, slot.getSlotNumber());&lt;br/&gt;
    +			assertEquals(0, slot.getRootSlotNumber());&lt;br/&gt;
    +			&lt;br/&gt;
    +			// release the slot immediately.&lt;br/&gt;
    +			slot.releaseSlot();&lt;br/&gt;
    +&lt;br/&gt;
    +			assertTrue(slot.isCanceled());&lt;br/&gt;
    +			assertTrue(slot.isReleased());&lt;br/&gt;
    +			&lt;br/&gt;
    +			// the slot sharing group and instance should not&lt;br/&gt;
    +			assertEquals(2, instance.getTotalNumberOfSlots());&lt;br/&gt;
    +			assertEquals(0, instance.getNumberOfAllocatedSlots());&lt;br/&gt;
    +			assertEquals(2, instance.getNumberOfAvailableSlots());&lt;br/&gt;
    +&lt;br/&gt;
    +			assertEquals(0, assignment.getNumberOfSlots());&lt;br/&gt;
    +			assertEquals(0, assignment.getNumberOfAvailableSlotsForGroup(vertexId));&lt;br/&gt;
    +			&lt;br/&gt;
    +			// we should not be able to allocate any children from this released slot&lt;br/&gt;
    +			assertNull(slot.allocateSharedSlot(new AbstractID()));&lt;br/&gt;
    +			assertNull(slot.allocateSubSlot(new AbstractID()));&lt;br/&gt;
    +			&lt;br/&gt;
    +			// we cannot add this slot to the assignment group&lt;br/&gt;
    +			assignment.addSharedSlotAndAllocateSubSlot(slot, Locality.NON_LOCAL, vertexId);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Is an assertion which checks that the slot was not added missing here?&lt;/p&gt;</comment>
                            <comment id="14560877" author="githubbot" created="Wed, 27 May 2015 12:34:00 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/731#discussion_r31128102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/731#discussion_r31128102&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-tests/src/test/resources/log4j.properties &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,32 @@&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +#  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +#  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +#  distributed with this work for additional information&lt;br/&gt;
    +#  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +#  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +#  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +#  with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#      &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +#  Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +#  See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +# Set root logger level to OFF to not flood build logs&lt;br/&gt;
    +# set manually to INFO for debugging purposes&lt;br/&gt;
    +log4j.rootLogger=INFO, testlogger&lt;br/&gt;
    +&lt;br/&gt;
    +# A1 is set to be a ConsoleAppender.&lt;br/&gt;
    +log4j.appender.testlogger=org.apache.log4j.ConsoleAppender&lt;br/&gt;
    +log4j.appender.testlogger.target = System.err&lt;br/&gt;
    +log4j.appender.testlogger.layout=org.apache.log4j.PatternLayout&lt;br/&gt;
    +log4j.appender.testlogger.layout.ConversionPattern=%-4r &lt;span class=&quot;error&quot;&gt;&amp;#91;%t&amp;#93;&lt;/span&gt; %-5p %c %x - %m%n&lt;br/&gt;
    +&lt;br/&gt;
    +log4j.logger.org.apache.flink.runtime.client.JobClient=OFF&lt;br/&gt;
    +&lt;br/&gt;
    +# suppress the irrelevant (wrong) warnings from the netty channel handler&lt;br/&gt;
    +log4j.logger.org.jboss.netty.channel.DefaultChannelPipeline=ERROR, testlogger&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Was this file added for debugging purposes?&lt;/p&gt;</comment>
                            <comment id="14560879" author="githubbot" created="Wed, 27 May 2015 12:34:42 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/731#issuecomment-105890755&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/731#issuecomment-105890755&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM.&lt;/p&gt;</comment>
                            <comment id="14561106" author="githubbot" created="Wed, 27 May 2015 15:00:57 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/731#issuecomment-105945508&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/731#issuecomment-105945508&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks!&lt;/p&gt;

&lt;p&gt;    I&apos;ll address the comments, remove the accidentally added `log4j.properties` file and merge this.&lt;/p&gt;</comment>
                            <comment id="14561107" author="githubbot" created="Wed, 27 May 2015 15:01:38 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/731&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/731&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14561109" author="stephanewen" created="Wed, 27 May 2015 15:03:31 +0000"  >&lt;p&gt;Fixed via 017b4f0f90c3a40c0f5557916c6ad5c4612606a3&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2e04n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>