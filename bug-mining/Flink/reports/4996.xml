<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:52:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-20885] Deserialization exception when using &apos;canal-json.table.include&apos; to filter out the binlog of the specified table</title>
                <link>https://issues.apache.org/jira/browse/FLINK-20885</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I found a bug in the canal code. &apos;canal-json.table.include&apos; does not filter out the binlog of the specified table correctly, which will cause an error in the parsing section. For example, if I want to read the binlog of canal-json.table.include = &apos;a&apos; table, there is a source field of int in table a, but at this time if table b also has a source field of string, An error will be reported.&lt;/p&gt;


&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13018295/13018295_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13350858">FLINK-20885</key>
            <summary>Deserialization exception when using &apos;canal-json.table.include&apos; to filter out the binlog of the specified table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nicholasjiang">Nicholas Jiang</assignee>
                                    <reporter username="jark">Jark Wu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 7 Jan 2021 10:20:19 +0000</created>
                <updated>Fri, 28 May 2021 07:08:01 +0000</updated>
                            <resolved>Thu, 14 Jan 2021 14:05:29 +0000</resolved>
                                                    <fixVersion>1.13.0</fixVersion>
                                    <component>Formats (JSON, Avro, Parquet, ORC, SequenceFile)</component>
                    <component>Table SQL / Ecosystem</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17260374" author="jark" created="Thu, 7 Jan 2021 10:21:21 +0000"  >&lt;p&gt;This is reported in the comments of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-20385&quot; title=&quot;Allow to read metadata for Canal-json format&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-20385&quot;&gt;&lt;del&gt;FLINK-20385&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17260946" author="wangfeiair2324" created="Fri, 8 Jan 2021 02:33:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;When is this expected to be fixed&#160;&lt;/p&gt;</comment>
                            <comment id="17260980" author="jark" created="Fri, 8 Jan 2021 04:17:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wangfeiair2324&quot; class=&quot;user-hover&quot; rel=&quot;wangfeiair2324&quot;&gt;wangfeiair2324&lt;/a&gt; What Flink version are you using? &lt;/p&gt;</comment>
                            <comment id="17260981" author="jark" created="Fri, 8 Jan 2021 04:17:42 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nicholasjiang&quot; class=&quot;user-hover&quot; rel=&quot;nicholasjiang&quot;&gt;nicholasjiang&lt;/a&gt; are you interested in this? &lt;/p&gt;</comment>
                            <comment id="17260988" author="wangfeiair2324" created="Fri, 8 Jan 2021 04:35:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;I&apos;m using Flink Master based compilation, probably 1.13.&lt;/p&gt;</comment>
                            <comment id="17261050" author="wangfeiair2324" created="Fri, 8 Jan 2021 06:52:29 +0000"  >&lt;p&gt;I have modified the code locally to fix this bug, and if you do, it is recommended that canal-json.database.include and canal-json.table.include support regular matching, and contain relationships rather than equal relationships. Filter isDdl=true for all binlogs that have an alter or create error.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#25105;&#22312;&#26412;&#22320;&#20462;&#25913;&#20102;&#20195;&#30721; &#26469;&#35299;&#20915;&#36825;&#20010;bug&#65292;&#22914;&#26524;&#20320;&#20204;&#26469;&#35299;&#20915;&#30340;&#35805;&#65292;&#24314;&#35758;canal-json.database.include &#21644; canal-json.table.include &#24212;&#35813;&#25903;&#25345;&#27491;&#21017;&#21305;&#37197;&#65292;&#24212;&#35813;&#26159;&#21253;&#21547;&#20851;&#31995; &#32780;&#19981;&#26159;&#31561;&#20110;&#20851;&#31995;&#12290;&#24182;&#19988;&#22914;&#26524;&#26377;alter &#25110;&#32773;create &#31561;binlog&#20063;&#20250;&#25253;&#38169;&#65292;&#24314;&#35758;&#36807;&#28388;&#25481;isDdl=true&#30340;binlog&#12290;&lt;/p&gt;</comment>
                            <comment id="17261051" author="wangfeiair2324" created="Fri, 8 Jan 2021 06:53:33 +0000"  >&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13018352/13018352_image-2021-01-08-14-52-53-443.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17261052" author="wangfeiair2324" created="Fri, 8 Jan 2021 06:53:43 +0000"  >&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13018353/13018353_image-2021-01-08-14-53-40-476.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17261054" author="wangfeiair2324" created="Fri, 8 Jan 2021 06:55:38 +0000"  >&lt;p&gt;This is just a temporary solution for my production environment, looking forward to the community&apos;s update, Thanks.&lt;/p&gt;</comment>
                            <comment id="17263315" author="nicholasjiang" created="Tue, 12 Jan 2021 13:00:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;, I would like to work for this issue. Please assign to me for fix.&lt;/p&gt;</comment>
                            <comment id="17263851" author="nicholasjiang" created="Wed, 13 Jan 2021 02:58:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wangfeiair2324&quot; class=&quot;user-hover&quot; rel=&quot;wangfeiair2324&quot;&gt;wangfeiair2324&lt;/a&gt;, could you please provide me with the binlog record above mentioned?&lt;/p&gt;</comment>
                            <comment id="17263857" author="wangfeiair2324" created="Wed, 13 Jan 2021 03:08:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nicholasjiang&quot; class=&quot;user-hover&quot; rel=&quot;nicholasjiang&quot;&gt;nicholasjiang&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CREATE TABLE `test_2` (&lt;br/&gt;
 `id` int(11) NOT NULL,&lt;br/&gt;
 `username` int(11) DEFAULT NULL COMMENT &apos;&#29992;&#25143;&#21517;&apos;,&lt;br/&gt;
 `password` varchar(255) DEFAULT NULL COMMENT &apos;&#23494;&#30721;&apos;,&lt;br/&gt;
 `AddTime` datetime NOT NULL COMMENT &apos;&#21019;&#24314;&#26102;&#38388;&apos;,&lt;br/&gt;
 PRIMARY KEY (`id`)&lt;br/&gt;
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&lt;/p&gt;

{&quot;data&quot;:[\{&quot;id&quot;:&quot;0&quot;,&quot;username&quot;:&quot;22&quot;,&quot;password&quot;:&quot;111111&quot;,&quot;AddTime&quot;:&quot;0000-00-00 00:00:00&quot;}
&lt;p&gt;],&quot;database&quot;:&quot;plink&quot;,&quot;es&quot;:1610507187000,&quot;id&quot;:90481,&quot;isDdl&quot;:false,&quot;mysqlType&quot;:{&quot;id&quot;:&quot;int(11)&quot;,&quot;username&quot;:&quot;int(11)&quot;,&quot;password&quot;:&quot;varchar(255)&quot;,&quot;AddTime&quot;:&quot;datetime&quot;},&quot;old&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;\{&amp;quot;password&amp;quot;:null}&amp;#93;&lt;/span&gt;,&quot;pkNames&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;id&amp;quot;&amp;#93;&lt;/span&gt;,&quot;sql&quot;:&quot;&quot;,&quot;sqlType&quot;:{&quot;id&quot;:4,&quot;username&quot;:4,&quot;password&quot;:12,&quot;AddTime&quot;:93},&quot;table&quot;:&quot;test_2&quot;,&quot;ts&quot;:1610507187259,&quot;type&quot;:&quot;UPDATE&quot;}&lt;/p&gt;


&lt;p&gt;CREATE TABLE `test_1` (&lt;br/&gt;
 `id` int(11) NOT NULL,&lt;br/&gt;
 `username` varchar(255) DEFAULT NULL COMMENT &apos;&#29992;&#25143;&#21517;&apos;,&lt;br/&gt;
 `password` varchar(255) DEFAULT NULL COMMENT &apos;&#23494;&#30721;&apos;,&lt;br/&gt;
 `AddTime` datetime NOT NULL COMMENT &apos;&#21019;&#24314;&#26102;&#38388;&apos;,&lt;br/&gt;
 PRIMARY KEY (`id`)&lt;br/&gt;
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&lt;/p&gt;

{&quot;data&quot;:[\{&quot;id&quot;:&quot;0&quot;,&quot;username&quot;:&quot;zhangsna&quot;,&quot;password&quot;:&quot;1111111&quot;,&quot;AddTime&quot;:&quot;0000-00-00 00:00:00&quot;}
&lt;p&gt;],&quot;database&quot;:&quot;plink&quot;,&quot;es&quot;:1610507126000,&quot;id&quot;:90469,&quot;isDdl&quot;:false,&quot;mysqlType&quot;:{&quot;id&quot;:&quot;int(11)&quot;,&quot;username&quot;:&quot;varchar(255)&quot;,&quot;password&quot;:&quot;varchar(255)&quot;,&quot;AddTime&quot;:&quot;datetime&quot;},&quot;old&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;\{&amp;quot;username&amp;quot;:null,&amp;quot;password&amp;quot;:null}&amp;#93;&lt;/span&gt;,&quot;pkNames&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;id&amp;quot;&amp;#93;&lt;/span&gt;,&quot;sql&quot;:&quot;&quot;,&quot;sqlType&quot;:{&quot;id&quot;:4,&quot;username&quot;:12,&quot;password&quot;:12,&quot;AddTime&quot;:93},&quot;table&quot;:&quot;test_1&quot;,&quot;ts&quot;:1610507127009,&quot;type&quot;:&quot;UPDATE&quot;}&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17263858" author="wangfeiair2324" created="Wed, 13 Jan 2021 03:11:07 +0000"  >&lt;p&gt;table test_2.userName (int); table test_1.userName (varchar);&lt;br/&gt;
 You create a ddl with canal-json.table.include=test_2 .&lt;/p&gt;

&lt;p&gt;Then add the binlog of test_1, as in the binlog format above&lt;/p&gt;

{&quot;data&quot;:[\{&quot;id&quot;:&quot;0&quot;,&quot;username&quot;:&quot;zhangsna&quot;,&quot;password&quot;:&quot;11111111&quot;,&quot;AddTime&quot;:&quot;0000-00-00 00:00:00&quot;}
&lt;p&gt;],&quot;database&quot;:&quot;plink&quot;,&quot;es&quot;:1610507775000,&quot;id&quot;:90557,&quot;isDdl&quot;:false,&quot;mysqlType&quot;:{&quot;id&quot;:&quot;int(11)&quot;,&quot;username&quot;:&quot;varchar(255)&quot;,&quot;password&quot;:&quot;varchar(255)&quot;,&quot;AddTime&quot;:&quot;datetime&quot;},&quot;old&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;\{&amp;quot;password&amp;quot;:&amp;quot;1111111&amp;quot;}&amp;#93;&lt;/span&gt;,&quot;pkNames&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;id&amp;quot;&amp;#93;&lt;/span&gt;,&quot;sql&quot;:&quot;&quot;,&quot;sqlType&quot;:{&quot;id&quot;:4,&quot;username&quot;:12,&quot;password&quot;:12,&quot;AddTime&quot;:93},&quot;table&quot;:&quot;test_1&quot;,&quot;ts&quot;:1610507775184,&quot;type&quot;:&quot;UPDATE&quot;}&lt;/p&gt;

&lt;p&gt;Then you get an error&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17263913" author="nicholasjiang" created="Wed, 13 Jan 2021 06:39:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wangfeiair2324&quot; class=&quot;user-hover&quot; rel=&quot;wangfeiair2324&quot;&gt;wangfeiair2324&lt;/a&gt;, the &quot;data&quot; field in binlog record you provided above has some problem to parse. Could you check the correct of the binlog record? And canal-json.database.include and canal-json.table.include only match one database and table.&lt;/p&gt;</comment>
                            <comment id="17263916" author="wangfeiair2324" created="Wed, 13 Jan 2021 06:46:47 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;{&quot;data&quot;:[\{&quot;id&quot;:&quot;0&quot;,&quot;username&quot;:&quot;zhangsna&quot;,&quot;password&quot;:&quot;passwd&quot;,&quot;AddTime&quot;:&quot;2020-12-25 14:23:07&quot;}
&lt;p&gt;],&quot;database&quot;:&quot;plink&quot;,&quot;es&quot;:1610520384000,&quot;id&quot;:92151,&quot;isDdl&quot;:false,&quot;mysqlType&quot;:{&quot;id&quot;:&quot;int(11)&quot;,&quot;username&quot;:&quot;varchar(255)&quot;,&quot;password&quot;:&quot;varchar(255)&quot;,&quot;AddTime&quot;:&quot;datetime&quot;},&quot;old&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;\{&amp;quot;password&amp;quot;:&amp;quot;11111111&amp;quot;}&amp;#93;&lt;/span&gt;,&quot;pkNames&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;id&amp;quot;&amp;#93;&lt;/span&gt;,&quot;sql&quot;:&quot;&quot;,&quot;sqlType&quot;:{&quot;id&quot;:4,&quot;username&quot;:12,&quot;password&quot;:12,&quot;AddTime&quot;:93},&quot;table&quot;:&quot;test_1&quot;,&quot;ts&quot;:1610520384579,&quot;type&quot;:&quot;UPDATE&quot;}&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17263917" author="wangfeiair2324" created="Wed, 13 Jan 2021 06:48:36 +0000"  >&lt;p&gt;You can use the JSON above&#12290;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;and canal-json.database.include and canal-json.table.include&#65292;&lt;/p&gt;

&lt;p&gt;It cannot be modified to support regular or wildcard characters&#65311;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17263921" author="nicholasjiang" created="Wed, 13 Jan 2021 06:54:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wangfeiair2324&quot; class=&quot;user-hover&quot; rel=&quot;wangfeiair2324&quot;&gt;wangfeiair2324&lt;/a&gt;, I have already used &lt;a href=&quot;https://www.bejson.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.bejson.com&lt;/a&gt; to check your JSON above provided. But unfortunately, this format of JSON above checks fails.&lt;/p&gt;</comment>
                            <comment id="17263923" author="wangfeiair2324" created="Wed, 13 Jan 2021 07:01:41 +0000"  >&lt;p&gt;Remove \, the JIRA automatically adds \&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13018661/13018661_image-2021-01-13-15-02-33-266.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17264908" author="jark" created="Thu, 14 Jan 2021 14:05:29 +0000"  >&lt;p&gt;Fixed in master: 9d674edd478706cc8ef7233d42385e948bae60e6&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13018352" name="image-2021-01-08-14-52-53-443.png" size="163550" author="wangfeiair2324" created="Fri, 8 Jan 2021 06:52:58 +0000"/>
                            <attachment id="13018353" name="image-2021-01-08-14-53-40-476.png" size="279316" author="wangfeiair2324" created="Fri, 8 Jan 2021 06:53:42 +0000"/>
                            <attachment id="13018661" name="image-2021-01-13-15-02-33-266.png" size="74145" author="wangfeiair2324" created="Wed, 13 Jan 2021 07:02:34 +0000"/>
                            <attachment id="13018295" name="screenshot-1.png" size="261383" author="jark" created="Thu, 7 Jan 2021 10:20:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mcj4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>