<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:21:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2611] YARN reports failed final state for successful jobs</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2611</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Flink sets the final app state to failed even though the application succeeded.&lt;br/&gt;
&lt;a href=&quot;http://apache-flink-user-mailing-list-archive.2336050.n4.nabble.com/Flink-batch-runs-OK-but-Yarn-container-fails-in-batch-mode-with-m-yarn-cluster-td2652.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-flink-user-mailing-list-archive.2336050.n4.nabble.com/Flink-batch-runs-OK-but-Yarn-container-fails-in-batch-mode-with-m-yarn-cluster-td2652.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12861502">FLINK-2611</key>
            <summary>YARN reports failed final state for successful jobs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Sep 2015 08:51:07 +0000</created>
                <updated>Mon, 19 Dec 2016 12:47:12 +0000</updated>
                            <resolved>Mon, 19 Oct 2015 10:12:38 +0000</resolved>
                                    <version>0.9</version>
                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14948343" author="mxm" created="Thu, 8 Oct 2015 09:14:23 +0000"  >&lt;p&gt;The CliFrontend doesn&apos;t shutdown the YarnCluster anymore. Thus, the shutdown hook takes over assuming the execution failed.&lt;/p&gt;</comment>
                            <comment id="14948371" author="githubbot" created="Thu, 8 Oct 2015 09:32:13 +0000"  >&lt;p&gt;GitHub user mxm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1240&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1240&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2611&quot; title=&quot;YARN reports failed final state for successful jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2611&quot;&gt;&lt;del&gt;FLINK-2611&lt;/del&gt;&lt;/a&gt; YARN reports failed final state for successful jobs&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mxm/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mxm/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2611&quot; title=&quot;YARN reports failed final state for successful jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2611&quot;&gt;&lt;del&gt;FLINK-2611&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1240.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1240.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1240&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3ca6ba9af6a54e9a930d83216b8aeb3b5ab3e517&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-10-08T09:30:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2611&quot; title=&quot;YARN reports failed final state for successful jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2611&quot;&gt;&lt;del&gt;FLINK-2611&lt;/del&gt;&lt;/a&gt; YARN reports failed final state for successful jobs&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14948586" author="githubbot" created="Thu, 8 Oct 2015 12:25:31 +0000"  >&lt;p&gt;Github user mxm closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1240&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1240&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14948589" author="mxm" created="Thu, 8 Oct 2015 12:28:58 +0000"  >&lt;p&gt;Turns out, the YarnCluster is shutdown correctly. I tried to reproduce the problem for Flink 0.9.0, 0.9.1, and the current master but it would always set the final application status to SUCCEEDED for me.&lt;/p&gt;

&lt;p&gt;We need to get more information from the user.&lt;/p&gt;</comment>
                            <comment id="14949785" author="rmetzger" created="Fri, 9 Oct 2015 02:30:30 +0000"  >&lt;p&gt;I also saw this issue from time to time.&lt;/p&gt;

&lt;p&gt;Let me see whether I can quickly reproduce it ....&lt;/p&gt;</comment>
                            <comment id="14949806" author="rmetzger" created="Fri, 9 Oct 2015 02:57:10 +0000"  >&lt;p&gt;Steps to reproduce:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;./bin/yarn-session -n 1&lt;/tt&gt;&lt;br/&gt;
... wait until everything is deployed ...&lt;br/&gt;
... stop yarn session using CTRL+C ...&lt;/p&gt;

&lt;p&gt;Read this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;02:51:11,928 INFO  akka.remote.RemoteActorRefProvider$RemotingTerminator         - Remoting shut down.
02:51:11,941 INFO  org.apache.flink.yarn.FlinkYarnCluster                        - Deleting files in hdfs:&lt;span class=&quot;code-comment&quot;&gt;//nameservice1/user/robert/.flink/application_1441703985068_0058
&lt;/span&gt;02:51:11,943 INFO  org.apache.flink.yarn.FlinkYarnCluster                        - Application application_1441703985068_0058 finished with state FINISHED and &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; state FAILED at 1444359071726

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14949838" author="rmetzger" created="Fri, 9 Oct 2015 03:32:51 +0000"  >&lt;p&gt;Btw: I don&apos;t think that this issue is critical for the 0.10 release. Its basically a usability issue, not breaking any functionality.&lt;/p&gt;</comment>
                            <comment id="14950043" author="mxm" created="Fri, 9 Oct 2015 07:57:06 +0000"  >&lt;p&gt;The user ran &lt;tt&gt;flink run -m yarn-cluster run ...&lt;/tt&gt;. I couldn&apos;t observe any failed container state there. That&apos;s what I tried to reproduce.&lt;/p&gt;

&lt;p&gt;The problem you reported is different because it depends on the &lt;tt&gt;FlinkYarnSessionCli&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14963104" author="mxm" created="Mon, 19 Oct 2015 10:12:38 +0000"  >&lt;p&gt;This issue is caused by the client shutdown hook which always sets the application status to FAILED. Flink sets the YARN application to failed if it discovers a yarn cluster error or a per-job YARN cluster fails to execute a Flink job. This is resolved in &lt;tt&gt;da071bc&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jqhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>