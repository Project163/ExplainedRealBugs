<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:35:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10826] Heavy deployment end-to-end test produces no output on Travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10826</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The Heavy deployment end-to-end test produces no output on Travis such that it is killed after 10 minutes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13197083">FLINK-10826</key>
            <summary>Heavy deployment end-to-end test produces no output on Travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srichter">Stefan Richter</assignee>
                                    <reporter username="twalthr">Timo Walther</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 8 Nov 2018 10:47:42 +0000</created>
                <updated>Tue, 13 Nov 2018 10:53:39 +0000</updated>
                            <resolved>Mon, 12 Nov 2018 09:36:42 +0000</resolved>
                                    <version>1.7.0</version>
                                    <fixVersion>1.7.0</fixVersion>
                                    <component>Test Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16679868" author="hequn8128" created="Thu, 8 Nov 2018 14:55:56 +0000"  >&lt;p&gt;I think we can echo some messages in the script when the test is running. For example, echo a message every minute. &lt;/p&gt;</comment>
                            <comment id="16680061" author="srichter" created="Thu, 8 Nov 2018 17:31:26 +0000"  >&lt;p&gt;I think we just need to tune this test a bit down, seems like it is too heavy for travis.&lt;/p&gt;</comment>
                            <comment id="16680068" author="githubbot" created="Thu, 8 Nov 2018 17:35:20 +0000"  >&lt;p&gt;StefanRRichter opened a new pull request #7066: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10826&quot; title=&quot;Heavy deployment end-to-end test produces no output on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10826&quot;&gt;&lt;del&gt;FLINK-10826&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;test&amp;#93;&lt;/span&gt; Decrease deployment size of heavy deplyment e2e t&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7066&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7066&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   The previous size of the deployment turned out to be too heavy for Travis, so I tuned the parameters down to some values that should give us a stable test.&lt;/p&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16681080" author="githubbot" created="Fri, 9 Nov 2018 08:46:56 +0000"  >&lt;p&gt;zentol commented on issue #7066: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10826&quot; title=&quot;Heavy deployment end-to-end test produces no output on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10826&quot;&gt;&lt;del&gt;FLINK-10826&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;test&amp;#93;&lt;/span&gt; Decrease deployment size of heavy deplyment e2e t&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7066#issuecomment-437290799&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7066#issuecomment-437290799&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   You may want to increase the network timeout like we did for the high-parallelism iterations test. &lt;a href=&quot;https://github.com/apache/flink/commit/ecd4567bcf5403f26c46d212d6e1698b3eeadbfb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/ecd4567bcf5403f26c46d212d6e1698b3eeadbfb&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Jobs that take too long time (25+ seconds) to fully deploy may fail otherwise.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16683431" author="githubbot" created="Mon, 12 Nov 2018 08:57:57 +0000"  >&lt;p&gt;twalthr commented on issue #7066: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10826&quot; title=&quot;Heavy deployment end-to-end test produces no output on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10826&quot;&gt;&lt;del&gt;FLINK-10826&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;test&amp;#93;&lt;/span&gt; Decrease deployment size of heavy deplyment e2e t&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7066#issuecomment-437803788&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7066#issuecomment-437803788&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks @StefanRRichter I will address @zentol comments and merge this to unblock #7045.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16683460" author="githubbot" created="Mon, 12 Nov 2018 09:35:36 +0000"  >&lt;p&gt;asfgit closed pull request #7066: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10826&quot; title=&quot;Heavy deployment end-to-end test produces no output on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10826&quot;&gt;&lt;del&gt;FLINK-10826&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;test&amp;#93;&lt;/span&gt; Decrease deployment size of heavy deplyment e2e t&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7066&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7066&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-end-to-end-tests/test-scripts/test_heavy_deployment.sh b/flink-end-to-end-tests/test-scripts/test_heavy_deployment.sh&lt;br/&gt;
index 895e4a7f302..b4646fc3260 100755&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/test_heavy_deployment.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test_heavy_deployment.sh&lt;br/&gt;
@@ -25,7 +25,7 @@ TEST=flink-heavy-deployment-stress-test&lt;br/&gt;
 TEST_PROGRAM_NAME=HeavyDeploymentStressTestProgram&lt;br/&gt;
 TEST_PROGRAM_JAR=${END_TO_END_DIR}/$TEST/target/$TEST_PROGRAM_NAME.jar&lt;/p&gt;

&lt;p&gt;-set_conf &quot;taskmanager.heap.mb&quot; &quot;256&quot; # 256Mb x 20TMs = 5Gb total heap&lt;br/&gt;
+set_conf &quot;taskmanager.heap.mb&quot; &quot;512&quot; # 512Mb x 10TMs = 5Gb total heap&lt;/p&gt;

&lt;p&gt; set_conf &quot;taskmanager.memory.size&quot; &quot;8&quot; # 8Mb&lt;br/&gt;
 set_conf &quot;taskmanager.network.memory.min&quot; &quot;8mb&quot;&lt;br/&gt;
@@ -35,12 +35,12 @@ set_conf &quot;taskmanager.memory.segment-size&quot; &quot;8kb&quot;&lt;br/&gt;
 set_conf &quot;taskmanager.numberOfTaskSlots&quot; &quot;10&quot; # 10 slots per TM&lt;/p&gt;

&lt;p&gt; start_cluster # this also starts 1TM&lt;br/&gt;
-start_taskmanagers 19 # 1TM + 19TM = 20TM a 10 slots = 200 slots&lt;br/&gt;
+start_taskmanagers 9 # 1TM + 9TM = 10TM a 10 slots = 100 slots&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;This call will result in a deployment with state meta data of 200 x 200 x 50 union states x each 75 entries.&lt;br/&gt;
+# This call will result in a deployment with state meta data of 100 x 100 x 50 union states x each 100 entries.&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;We can scale up the numbers to make the test even heavier.&lt;br/&gt;
 $FLINK_DIR/bin/flink run ${TEST_PROGRAM_JAR} \&lt;br/&gt;
---environment.max_parallelism 1024 --environment.parallelism 200 \&lt;br/&gt;
+--environment.max_parallelism 1024 --environment.parallelism 100 \&lt;br/&gt;
 --environment.restart_strategy fixed_delay --environment.restart_strategy.fixed_delay.attempts 3 \&lt;br/&gt;
 --state_backend.checkpoint_directory ${CHECKPOINT_DIR} \&lt;br/&gt;
---heavy_deployment_test.num_list_states_per_op 50 --heavy_deployment_test.num_partitions_per_list_state 75&lt;br/&gt;
+--heavy_deployment_test.num_list_states_per_op 50 --heavy_deployment_test.num_partitions_per_list_state 100&lt;/li&gt;
&lt;/ol&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16683461" author="twalthr" created="Mon, 12 Nov 2018 09:36:42 +0000"  >&lt;p&gt;Fixed in master: f393fb70b27cd2a64cb2c010d7d2e902f75c519f, 6115b05c87e387c301b21758a6d29e300d138a84&lt;br/&gt;
Fixed in 1.7: 7d9fcbaf1408b09ee1d409ec1568a5af51d726d0, 78ea3923782fddfd4fbb414c754d4db7701e24ca&lt;/p&gt;</comment>
                            <comment id="16684903" author="twalthr" created="Tue, 13 Nov 2018 08:51:31 +0000"  >&lt;p&gt;Travis still failed: &lt;a href=&quot;https://api.travis-ci.org/v3/job/453868658/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/453868658/log.txt&lt;/a&gt;&lt;br/&gt;
We further decreased the deployment size by &lt;tt&gt;num_partitions_per_list_state=50&lt;/tt&gt; for now.&lt;/p&gt;

&lt;p&gt;Fixed in master: 665ccae2c59566e7a97cea1628f22544ffba5248&lt;br/&gt;
Fixed in 1.7: eb5ff6dada90b63cdeef6a84ba87473a762af7ff&lt;/p&gt;</comment>
                            <comment id="16685016" author="till.rohrmann" created="Tue, 13 Nov 2018 10:43:20 +0000"  >&lt;p&gt;Maybe it is not a good idea to run the heavy-deployment test every time given that it sets some tight requirements on the available resources. Maybe it could be a test which is manually run for release testings on a beefy machine.&lt;/p&gt;</comment>
                            <comment id="16685030" author="twalthr" created="Tue, 13 Nov 2018 10:52:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt; I think we should run it in the nightly jobs as a safety net but should parameterize it such that we can execute it on a bigger scale for releases. The current configuration runs on Travis without problems (modulo &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10859&quot; title=&quot;Queryable state (rocksdb) end-to-end test fails on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10859&quot;&gt;&lt;del&gt;FLINK-10859&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12947397" name="heavy_deployement_log.txt" size="1644327" author="twalthr" created="Thu, 8 Nov 2018 10:48:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s009oo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>