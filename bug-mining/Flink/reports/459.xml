<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:20:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1085] Unnecessary failing of GroupReduceCombineDriver</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1085</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;With a recent update (commit cbbcf7820885a8a9734ffeba637b0182a6637939) the GroupReduceCombineDriver was changed to not use an asynchronous partial sorter. Instead, the driver fills a sort buffer with records, sorts it, combines them, clears the buffer, and continues to fill it again.&lt;/p&gt;

&lt;p&gt;The GroupReduceCombineDriver fails if a record cannot be serialized into an empty sort buffer, i.e., if the record is too large for the buffer.&lt;/p&gt;

&lt;p&gt;Alternatively, we should emit a WARN message for the first record that is too large and just forward all records which do not fit into the empty sort buffer (maybe continue to count how many records were simply forwarded and give a second WARN message with this statistic).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12738360">FLINK-1085</key>
            <summary>Unnecessary failing of GroupReduceCombineDriver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fhueske">Fabian Hueske</reporter>
                        <labels>
                            <label>starter</label>
                    </labels>
                <created>Tue, 2 Sep 2014 07:56:08 +0000</created>
                <updated>Mon, 13 Jul 2015 15:53:39 +0000</updated>
                            <resolved>Mon, 13 Jul 2015 15:49:53 +0000</resolved>
                                    <version>0.6.1-incubating</version>
                    <version>0.7.0-incubating</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Runtime / Task</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14118108" author="fhueske" created="Tue, 2 Sep 2014 11:43:14 +0000"  >&lt;p&gt;The same applies to the &lt;tt&gt;SynchronousChainedCombineDriver&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14118159" author="stephanewen" created="Tue, 2 Sep 2014 12:58:34 +0000"  >&lt;p&gt;Did you already encounter such a case? Because it should only occur with really large records...&lt;/p&gt;</comment>
                            <comment id="14118167" author="fhueske" created="Tue, 2 Sep 2014 13:02:39 +0000"  >&lt;p&gt;No, just found it while browsing the code and since forwarding is OK for combine it&apos;s not necessary to fail the job.&lt;br/&gt;
The job might fail later in Reduce due to the same problem, but that shouldn&apos;t be a reason to fail it here IMO.&lt;/p&gt;</comment>
                            <comment id="14594853" author="githubbot" created="Sat, 20 Jun 2015 22:40:06 +0000"  >&lt;p&gt;GitHub user dabaitu opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1085&quot; title=&quot;Unnecessary failing of GroupReduceCombineDriver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1085&quot;&gt;&lt;del&gt;FLINK-1085&lt;/del&gt;&lt;/a&gt;: Unnecessary failing of GroupReduceCombineDriver&lt;/p&gt;

&lt;p&gt;    I have a unit test failure and it seems it may have been there before my changes:&lt;/p&gt;

&lt;p&gt;    Tests in error: &lt;br/&gt;
      UtilsTest.testUberjarLocator:39 NullPointer&lt;/p&gt;

&lt;p&gt;    It&apos;s looking for some uber jar and not finding it. Did I need to compile something else first?&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dabaitu/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dabaitu/flink&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #854&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e693ba2398c170b6d65a2365a4cc0fe091f3319b&lt;br/&gt;
Author: dabaitu &amp;lt;tom.ssf@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-06-20T22:35:48Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1085&quot; title=&quot;Unnecessary failing of GroupReduceCombineDriver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1085&quot;&gt;&lt;del&gt;FLINK-1085&lt;/del&gt;&lt;/a&gt;: change exception to warning log and track oversized Record count&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14594858" author="githubbot" created="Sat, 20 Jun 2015 22:51:55 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#issuecomment-113835793&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#issuecomment-113835793&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    How did you start the tests?&lt;/p&gt;</comment>
                            <comment id="14594881" author="githubbot" created="Sat, 20 Jun 2015 23:39:06 +0000"  >&lt;p&gt;Github user dabaitu commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#issuecomment-113842215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#issuecomment-113842215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @rmetzger : &apos;mvn test&apos;&lt;/p&gt;</comment>
                            <comment id="14594886" author="githubbot" created="Sat, 20 Jun 2015 23:50:47 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#issuecomment-113842515&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#issuecomment-113842515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Can you try to run &quot;mvn clean verify&quot; in the project root?&lt;br/&gt;
    It will use a lot of resources and run for more than 30 minutes but the tests should pass &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;    Also, the travis (CI system) build for your pull request passed.&lt;br/&gt;
    So the tests are all good.&lt;/p&gt;

&lt;p&gt;    Lets wait for @fhueske to review your proposed changes.&lt;/p&gt;</comment>
                            <comment id="14595518" author="githubbot" created="Mon, 22 Jun 2015 08:50:11 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#issuecomment-114043020&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#issuecomment-114043020&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think this code actually simply drops oversized records, or am I overlooking something?&lt;/p&gt;

&lt;p&gt;    Also, outputting oversized records on WARN debug level seems heavy, it is not really something that should alert the person that runs the program.&lt;/p&gt;

&lt;p&gt;    Before merging this, we need to&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make sure the records are not lost&lt;/li&gt;
	&lt;li&gt;Add a test that validates exactly that (not as an ITCase, but a unit test)&lt;/li&gt;
	&lt;li&gt;Reduce the log level for large records to DEBUG&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14597014" author="githubbot" created="Tue, 23 Jun 2015 02:25:04 +0000"  >&lt;p&gt;Github user dabaitu commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#issuecomment-114331577&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#issuecomment-114331577&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @StephanEwen @fhueske - apologies, I forgot to call collect. &lt;br/&gt;
    A dumb question - why do we need to sort the records before combining them? Should I just call collect on the oversized record or still pass it to the combiner? What do combiners do(or what are they suppose to do in general)?&lt;/p&gt;</comment>
                            <comment id="14597304" author="githubbot" created="Tue, 23 Jun 2015 07:57:33 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#issuecomment-114396094&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#issuecomment-114396094&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The combiner partially sorts the records, to group subsequences in order to combine (reduce) them.&lt;/p&gt;

&lt;p&gt;    If a record does not fit into a fresh sort buffer, then we can simply emit it as it is. There is no assumption on records being emitted in sorted order.&lt;/p&gt;</comment>
                            <comment id="14611454" author="githubbot" created="Thu, 2 Jul 2015 04:29:33 +0000"  >&lt;p&gt;Github user dabaitu commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#discussion_r33746632&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#discussion_r33746632&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/operators/GroupReduceCombineDriver.java &amp;#8212;&lt;br/&gt;
    @@ -170,7 +171,12 @@ public void run() throws Exception {&lt;/p&gt;

&lt;p&gt;     			// write the value again&lt;br/&gt;
     			if (!this.sorter.write(value)) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throw new IOException(&quot;Cannot write record to fresh sort buffer. Record too large.&quot;);&lt;br/&gt;
    +				if (oversizedRecordCount == Long.MAX_VALUE) 
{
    +					LOG.error(&quot;Number of oversized record has exceeded MAX Long&quot;);
    +				}
&lt;p&gt; else {&lt;br/&gt;
    +					++oversizedRecordCount;&lt;br/&gt;
    +					LOG.warn(&quot;Cannot write record to fresh sort buffer. Record too large. Oversized record count: {}&quot;, oversizedRecordCount);&lt;br/&gt;
    +				}&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I tried to call&lt;br/&gt;
    ```&lt;br/&gt;
    this.output.collect(value)&lt;br/&gt;
    ```&lt;br/&gt;
    I couldn&apos;t figure out how to convert this single value from type IN to type OUT. Could you guys please help me? @StephanEwen @rmetzger &lt;/p&gt;</comment>
                            <comment id="14611542" author="githubbot" created="Thu, 2 Jul 2015 06:20:56 +0000"  >&lt;p&gt;Github user dabaitu commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#discussion_r33749807&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#discussion_r33749807&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/operators/GroupReduceCombineDriver.java &amp;#8212;&lt;br/&gt;
    @@ -170,7 +171,14 @@ public void run() throws Exception {&lt;/p&gt;

&lt;p&gt;     			// write the value again&lt;br/&gt;
     			if (!this.sorter.write(value)) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throw new IOException(&quot;Cannot write record to fresh sort buffer. Record too large.&quot;);&lt;br/&gt;
    +				if (oversizedRecordCount == Long.MAX_VALUE) 
{
    +					LOG.debug(&quot;Number of oversized record has exceeded MAX Long&quot;);
    +				}
&lt;p&gt; else {&lt;br/&gt;
    +					++oversizedRecordCount;&lt;br/&gt;
    +					LOG.debug(&quot;Cannot write record to fresh sort buffer. Record too large. Oversized record count: {}&quot;, oversizedRecordCount);&lt;br/&gt;
    +				}&lt;br/&gt;
    +				// simply forward the record&lt;br/&gt;
    +				this.output.collect((OUT)value);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I tried to call&lt;/p&gt;

&lt;p&gt;    this.output.collect(value)&lt;br/&gt;
    I couldn&apos;t figure out how to convert this single value from type IN to type OUT besides direct casting. Could you guys please help me? @StephanEwen @rmetzger&lt;/p&gt;</comment>
                            <comment id="14611544" author="githubbot" created="Thu, 2 Jul 2015 06:22:12 +0000"  >&lt;p&gt;Github user dabaitu commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#discussion_r33749843&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#discussion_r33749843&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/test/java/org/apache/flink/runtime/operators/CombineTaskTest.java &amp;#8212;&lt;br/&gt;
    @@ -92,7 +92,35 @@ public void testCombineTask() &lt;/p&gt;
{
     		
     		this.outList.clear();
     	}
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testOversizedRecordCombineTask() {&lt;br/&gt;
    +		int keyCnt = 1;&lt;br/&gt;
    +		int valCnt = 20;&lt;br/&gt;
    +&lt;br/&gt;
    +		addInput(new UniformRecordGenerator(keyCnt, valCnt, true));&lt;br/&gt;
    +		addDriverComparator(this.comparator);&lt;br/&gt;
    +		addDriverComparator(this.comparator);&lt;br/&gt;
    +		setOutput(this.outList);&lt;br/&gt;
    +&lt;br/&gt;
    +		getTaskConfig().setDriverStrategy(DriverStrategy.SORTED_GROUP_COMBINE);&lt;br/&gt;
    +		getTaskConfig().setRelativeMemoryDriver(combine_frac);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I tried tweaking this to configure the memory size of the sorter, but failed. Please help too&lt;/p&gt;</comment>
                            <comment id="14612355" author="githubbot" created="Thu, 2 Jul 2015 18:44:26 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#discussion_r33809590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#discussion_r33809590&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/operators/GroupReduceCombineDriver.java &amp;#8212;&lt;br/&gt;
    @@ -170,7 +171,14 @@ public void run() throws Exception {&lt;/p&gt;

&lt;p&gt;     			// write the value again&lt;br/&gt;
     			if (!this.sorter.write(value)) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throw new IOException(&quot;Cannot write record to fresh sort buffer. Record too large.&quot;);&lt;br/&gt;
    +				if (oversizedRecordCount == Long.MAX_VALUE) 
{
    +					LOG.debug(&quot;Number of oversized record has exceeded MAX Long&quot;);
    +				}
&lt;p&gt; else {&lt;br/&gt;
    +					++oversizedRecordCount;&lt;br/&gt;
    +					LOG.debug(&quot;Cannot write record to fresh sort buffer. Record too large. Oversized record count: {}&quot;, oversizedRecordCount);&lt;br/&gt;
    +				}&lt;br/&gt;
    +				// simply forward the record&lt;br/&gt;
    +				this.output.collect((OUT)value);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think this is fine, calling `out.collect((OUT) value)`. The generics are a bit confusing here, I think. OUT is for combine functions really the same thing as IN - they are not allowed to change the type. This should really be simplified, otherwise it is confusing, agreed.&lt;/p&gt;</comment>
                            <comment id="14612357" author="githubbot" created="Thu, 2 Jul 2015 18:46:20 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#discussion_r33809780&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#discussion_r33809780&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/test/java/org/apache/flink/runtime/operators/CombineTaskTest.java &amp;#8212;&lt;br/&gt;
    @@ -92,7 +92,35 @@ public void testCombineTask() &lt;/p&gt;
{
     		
     		this.outList.clear();
     	}
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testOversizedRecordCombineTask() {&lt;br/&gt;
    +		int keyCnt = 1;&lt;br/&gt;
    +		int valCnt = 20;&lt;br/&gt;
    +&lt;br/&gt;
    +		addInput(new UniformRecordGenerator(keyCnt, valCnt, true));&lt;br/&gt;
    +		addDriverComparator(this.comparator);&lt;br/&gt;
    +		addDriverComparator(this.comparator);&lt;br/&gt;
    +		setOutput(this.outList);&lt;br/&gt;
    +&lt;br/&gt;
    +		getTaskConfig().setDriverStrategy(DriverStrategy.SORTED_GROUP_COMBINE);&lt;br/&gt;
    +		getTaskConfig().setRelativeMemoryDriver(combine_frac);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think you cannot reduce the memory further below to enforce records to be oversized. I think you need to change the data generator to provide you with an oversized record. I think the tests have a `UnionIterator` where you can mix an oversized record into the generating iterator.&lt;/p&gt;</comment>
                            <comment id="14612788" author="githubbot" created="Fri, 3 Jul 2015 03:10:51 +0000"  >&lt;p&gt;Github user dabaitu commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#issuecomment-118219396&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#issuecomment-118219396&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @StephanEwen please review again. Thanks!&lt;/p&gt;</comment>
                            <comment id="14623977" author="githubbot" created="Sun, 12 Jul 2015 19:56:54 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#discussion_r34425008&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#discussion_r34425008&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/operators/GroupReduceCombineDriver.java &amp;#8212;&lt;br/&gt;
    @@ -170,7 +171,14 @@ public void run() throws Exception {&lt;/p&gt;

&lt;p&gt;     			// write the value again&lt;br/&gt;
     			if (!this.sorter.write(value)) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throw new IOException(&quot;Cannot write record to fresh sort buffer. Record too large.&quot;);&lt;br/&gt;
    +				if (oversizedRecordCount == Long.MAX_VALUE) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think we can skip this test. It&apos;s going to be very hard to process 2^63 oversized records in a single Flink thread. Might take a millennium or so &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14624051" author="githubbot" created="Sun, 12 Jul 2015 22:35:11 +0000"  >&lt;p&gt;Github user dabaitu commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#issuecomment-120769914&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#issuecomment-120769914&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    ProcessFailureStreamingRecoveryITCase passes locally. Is the master branch broken?&lt;/p&gt;</comment>
                            <comment id="14624336" author="githubbot" created="Mon, 13 Jul 2015 07:59:19 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#issuecomment-120842381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#issuecomment-120842381&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think there was a test instability, but it was fixed a bit back...&lt;/p&gt;</comment>
                            <comment id="14624337" author="githubbot" created="Mon, 13 Jul 2015 07:59:34 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854#issuecomment-120842417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854#issuecomment-120842417&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good, let me merge this...&lt;/p&gt;</comment>
                            <comment id="14624831" author="stephanewen" created="Mon, 13 Jul 2015 15:49:53 +0000"  >&lt;p&gt;Fixed via 7271881163d240ad1106a77036dce981dafb82f3 and 01c74338ff44ea7f3735a7eb94b2ce01ababc505.&lt;/p&gt;

&lt;p&gt;Thanks you for the patch.&lt;/p&gt;</comment>
                            <comment id="14624843" author="githubbot" created="Mon, 13 Jul 2015 15:53:39 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/854&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/854&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zkg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>