<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:11:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-28003] Hive sql is wrongly modified by SqlCompleter in SQL client when using -f {file}</title>
                <link>https://issues.apache.org/jira/browse/FLINK-28003</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When I run the following sql in SqlClient using &apos;sql-client.sh -f zj_test.sql&apos;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
create table &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not exists db.zj_test(
pos &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
rank_cmd &#160; &#160; &#160; &#160; &#160; &#160; &#160;string
)
partitioned by (
`p_date` string,
`p_hourmin` string);

INSERT OVERWRITE TABLE db.zj_test PARTITION (p_date=&lt;span class=&quot;code-quote&quot;&gt;&apos;20220605&apos;&lt;/span&gt;, p_hourmin = &lt;span class=&quot;code-quote&quot;&gt;&apos;0100&apos;&lt;/span&gt;)
SELECT
pos ,
rank_cmd
FROM db.sourceT
where p_date = &lt;span class=&quot;code-quote&quot;&gt;&apos;20220605&apos;&lt;/span&gt; and p_hourmin = &lt;span class=&quot;code-quote&quot;&gt;&apos;0100&apos;&lt;/span&gt;; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;An error would be thrown out because the &apos;pos&apos; field is changed to &apos;POSITION&apos;. I guess `SqlCompleter` in sqlClient module might do something wrong.&lt;/p&gt;

&lt;p&gt;The error could be reproduced using the attached file.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13449447">FLINK-28003</key>
            <summary>Hive sql is wrongly modified by SqlCompleter in SQL client when using -f {file}</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Jiangang">Liu</assignee>
                                    <reporter username="jingzhang">Jing Zhang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 10 Jun 2022 12:40:11 +0000</created>
                <updated>Tue, 16 Aug 2022 04:10:41 +0000</updated>
                            <resolved>Tue, 16 Aug 2022 04:10:41 +0000</resolved>
                                    <version>1.15.0</version>
                                    <fixVersion>1.16.0</fixVersion>
                                    <component>Table SQL / Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17553500" author="martijnvisser" created="Mon, 13 Jun 2022 10:10:54 +0000"  >&lt;p&gt;If you want to use a reserved keyword in your SQL syntax, you&apos;ll need to use backticks for these columns. &lt;/p&gt;</comment>
                            <comment id="17553860" author="qingru zhang" created="Tue, 14 Jun 2022 02:51:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijnvisser&quot; class=&quot;user-hover&quot; rel=&quot;martijnvisser&quot;&gt;martijnvisser&lt;/a&gt; Thanks for response, however you might misunderstand here.&lt;/p&gt;

&lt;p&gt;I don&apos;t use reserved keyword, I use &apos;pos&apos;, but SqlClient replaces it to&lt;/p&gt;

&lt;p&gt;&apos;position&apos; which leads to an error.&lt;/p&gt;

&lt;p&gt;This replacement causes a lot of problems.&lt;/p&gt;</comment>
                            <comment id="17553870" author="qingru zhang" created="Tue, 14 Jun 2022 03:14:32 +0000"  >&lt;p&gt;As discussed with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fsk119&quot; class=&quot;user-hover&quot; rel=&quot;fsk119&quot;&gt;fsk119&lt;/a&gt; offline, we would add a configure to disable sql complete in SqlClient. Besides, for &apos;-f sqlFile&apos;, it makes sense to disable sql complete by default.&lt;/p&gt;</comment>
                            <comment id="17553944" author="martijnvisser" created="Tue, 14 Jun 2022 07:29:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingzhang&quot; class=&quot;user-hover&quot; rel=&quot;jingzhang&quot;&gt;jingzhang&lt;/a&gt; I was under the impression that pos was a reserved keyword, but I misread that. Apologies. &lt;/p&gt;</comment>
                            <comment id="17555019" author="qingru zhang" created="Thu, 16 Jun 2022 10:32:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijnvisser&quot; class=&quot;user-hover&quot; rel=&quot;martijnvisser&quot;&gt;martijnvisser&lt;/a&gt; Never mind, thanks for your attention.&lt;/p&gt;</comment>
                            <comment id="17563090" author="jiangang" created="Wed, 6 Jul 2022 10:06:11 +0000"  >&lt;p&gt;I have discussed with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingzhang&quot; class=&quot;user-hover&quot; rel=&quot;jingzhang&quot;&gt;jingzhang&lt;/a&gt; and solve it in our inner flink version. Could you review the code, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fsk119&quot; class=&quot;user-hover&quot; rel=&quot;fsk119&quot;&gt;fsk119&lt;/a&gt; . Thanks.&lt;/p&gt;</comment>
                            <comment id="17575578" author="jiangang" created="Fri, 5 Aug 2022 05:14:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shengkai&quot; class=&quot;user-hover&quot; rel=&quot;shengkai&quot;&gt;shengkai&lt;/a&gt; Do you have time to review it? Thanks.&lt;/p&gt;</comment>
                            <comment id="17580032" author="jark" created="Tue, 16 Aug 2022 04:10:41 +0000"  >&lt;p&gt;Fixed in master: 226f1602c047092cc1997f6e861aa37858df21f7&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13044938" name="zj_test.sql" size="659" author="jingzhang" created="Fri, 10 Jun 2022 12:38:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z134ns:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>