<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:21:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3011] Cannot cancel failing/restarting streaming job from the command line</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3011</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I cannot seem to be able to cancel a failing/restarting job from the command line client. The job cannot be rescheduled so it keeps failing:&lt;/p&gt;

&lt;p&gt;The exception I get:&lt;br/&gt;
13:58:11,240 INFO  org.apache.flink.runtime.jobmanager.JobManager                - Status of job 0c895d22c632de5dfe16c42a9ba818d5 (player-id) changed to RESTARTING.&lt;br/&gt;
13:58:25,234 INFO  org.apache.flink.runtime.jobmanager.JobManager                - Trying to cancel job with ID 0c895d22c632de5dfe16c42a9ba818d5.&lt;br/&gt;
13:58:25,561 WARN  akka.remote.ReliableDeliverySupervisor                        - Association with remote system &lt;span class=&quot;error&quot;&gt;&amp;#91;akka.tcp://flink@127.0.0.1:42012&amp;#93;&lt;/span&gt; has failed, address is now gated for &lt;span class=&quot;error&quot;&gt;&amp;#91;5000&amp;#93;&lt;/span&gt; ms. Reason is: &lt;span class=&quot;error&quot;&gt;&amp;#91;Disassociated&amp;#93;&lt;/span&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12912835">FLINK-3011</key>
            <summary>Cannot cancel failing/restarting streaming job from the command line</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uce">Ufuk Celebi</assignee>
                                    <reporter username="gyfora">Gyula Fora</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Nov 2015 14:09:05 +0000</created>
                <updated>Thu, 19 Nov 2015 17:45:42 +0000</updated>
                            <resolved>Thu, 19 Nov 2015 17:45:42 +0000</resolved>
                                    <version>0.10.0</version>
                    <version>1.0.0</version>
                                    <fixVersion>0.10.1</fixVersion>
                    <fixVersion>1.0.0</fixVersion>
                                    <component>Command Line Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15008719" author="githubbot" created="Tue, 17 Nov 2015 14:21:30 +0000"  >&lt;p&gt;GitHub user uce opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1369&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1369&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;FLINK-3011, 3019, 3028&amp;#93;&lt;/span&gt; Cancel jobs in RESTARTING state&lt;/p&gt;

&lt;p&gt;    This addresses issues with cancelling jobs, which are in the `RESTARTING` state. A job enters this state  after a failure as soon as all job vertices are in their final state. It then stays in this state until it is redeployed (e.g. default 100s currently). In this state, the job cannot be cancelled. If the failure is permanent (for example missing slots), the job can never be cancelled.&lt;/p&gt;

&lt;p&gt;    This PR includes changes to the ExecutionGraph and to the clients:&lt;/p&gt;

&lt;p&gt;    *&lt;b&gt;ExecutionGraph&lt;/b&gt;* (&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3011&quot; title=&quot;Cannot cancel failing/restarting streaming job from the command line&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3011&quot;&gt;&lt;del&gt;FLINK-3011&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Remove the state transition from `FAILED` to `RESTARTING` in `restart()`. This was breaking the semantics of `FAILED` being a terminal state. It was only relevant for a test as far as I can tell.&lt;/li&gt;
	&lt;li&gt;When cancelling during restarts, two job states are relevant:&lt;/li&gt;
	&lt;li&gt;`RESTARTING`: try to set the state directly to `CANCELED` as all vertices have been already failed when the job enters the `RESTARTING` state. If the state transition to `CANCELED` succeeds, the restart will be ignored with a log message.&lt;/li&gt;
	&lt;li&gt;`FAILING`: try to set the state to `CANCELLING` and wait for the failing of the vertices to finish. This will finish the cancellation as usual in `jobVertexInFinalState()`.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    When reviewing the `cancel()`, `jobVertexInFinalState()`, and `restart()` methods are relevant.&lt;/p&gt;

&lt;p&gt;    *&lt;b&gt;CLIFrontend&lt;/b&gt;* (&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3019&quot; title=&quot;CLI does not list running/restarting jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3019&quot;&gt;&lt;del&gt;FLINK-3019&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;List restarting jobs with scheduled jobs&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    ```&lt;br/&gt;
    $ bin/flink list&lt;br/&gt;
    No running jobs.&lt;br/&gt;
    ---------------- Scheduled/Restarting Jobs -------------------&lt;br/&gt;
    17.11.2015 15:14:01 : 4b3fa06c88e5a2a4963241e7afca7b7d : Streaming WordCount (RESTARTING)&lt;br/&gt;
    --------------------------------------------------------------&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    *&lt;b&gt;WebFrontend&lt;/b&gt;* (&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3028&quot; title=&quot;Cannot cancel restarting job via web frontend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3028&quot;&gt;&lt;del&gt;FLINK-3028&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Show the cancel button if the job is restarting. It was only displayed for running or created jobs before.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &amp;#8212;&lt;/p&gt;

&lt;p&gt;    I want to merge this for 0.10.1 and 1.0.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/uce/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/uce/flink&lt;/a&gt; 3011-restart&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1369.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1369.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1369&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0c5a3306808bec5b9a833703adbcd9f45bbe6de5&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-11-16T15:18:20Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3011&quot; title=&quot;Cannot cancel failing/restarting streaming job from the command line&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3011&quot;&gt;&lt;del&gt;FLINK-3011&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Disallow ExecutionGraph state transition from FAILED to RESTARTING&lt;/p&gt;

&lt;p&gt;    Removes the possibility to go from FAILED state back to RESTARTING. This was only used in a test&lt;br/&gt;
    case. It was a breaking the terminal state semantics of the FAILED state.&lt;/p&gt;

&lt;p&gt;commit 19c602b2ce7686237d8611645a4662aa2b2a0cef&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-11-17T10:40:54Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3011&quot; title=&quot;Cannot cancel failing/restarting streaming job from the command line&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3011&quot;&gt;&lt;del&gt;FLINK-3011&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime, tests&amp;#93;&lt;/span&gt; Translate ExecutionGraphRestartTest to Java&lt;/p&gt;

&lt;p&gt;commit e13dd1bac7029af6ae4157af226131a10f5d02d0&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-11-17T10:56:42Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3011&quot; title=&quot;Cannot cancel failing/restarting streaming job from the command line&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3011&quot;&gt;&lt;del&gt;FLINK-3011&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Fix cancel during restart&lt;/p&gt;

&lt;p&gt;commit 657e34f31fe9c6325900f42c36257b5c5d2019be&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-11-17T13:11:44Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3019&quot; title=&quot;CLI does not list running/restarting jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3019&quot;&gt;&lt;del&gt;FLINK-3019&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;client&amp;#93;&lt;/span&gt; List restarting jobs with scheduled jobs&lt;/p&gt;

&lt;p&gt;commit 8b2850610aff1197d204bdb7d790df8fb6b5df4c&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-11-17T13:51:15Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3028&quot; title=&quot;Cannot cancel restarting job via web frontend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3028&quot;&gt;&lt;del&gt;FLINK-3028&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime-web&amp;#93;&lt;/span&gt; Show cancel button for restarting jobs&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15008722" author="githubbot" created="Tue, 17 Nov 2015 14:22:24 +0000"  >&lt;p&gt;Github user gyfora commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1369#issuecomment-157383381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1369#issuecomment-157383381&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I verified the intended behaviour on a cluster application, it works for cancelling from both the command line and also from the web interface.&lt;/p&gt;

&lt;p&gt;    +1 from my side, this is a critical fix for production environments&lt;/p&gt;</comment>
                            <comment id="15011009" author="githubbot" created="Wed, 18 Nov 2015 13:52:36 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1369#issuecomment-157719028&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1369#issuecomment-157719028&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good. I am wondering, though, whether RESTARTING jobs should be rather listed among RUNNING jobs?&lt;/p&gt;</comment>
                            <comment id="15011029" author="githubbot" created="Wed, 18 Nov 2015 14:01:50 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1369#issuecomment-157721702&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1369#issuecomment-157721702&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Pretty nice otherwise, +1&lt;/p&gt;</comment>
                            <comment id="15013474" author="githubbot" created="Thu, 19 Nov 2015 12:49:10 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1369#issuecomment-158047558&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1369#issuecomment-158047558&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ve updated the PR as you suggested and rebased on the current master. Waiting for Travis. After that I, think it is ready to be merged to `release-0.10` and `master`.&lt;/p&gt;</comment>
                            <comment id="15013960" author="githubbot" created="Thu, 19 Nov 2015 17:23:01 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1369#issuecomment-158126406&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1369#issuecomment-158126406&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Failed test is unrelated. Merging...&lt;/p&gt;</comment>
                            <comment id="15013962" author="githubbot" created="Thu, 19 Nov 2015 17:24:04 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1369&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1369&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15013965" author="uce" created="Thu, 19 Nov 2015 17:25:07 +0000"  >&lt;p&gt;Fixed via 5a86a0a &lt;/p&gt;</comment>
                            <comment id="15014009" author="uce" created="Thu, 19 Nov 2015 17:45:42 +0000"  >&lt;p&gt;Fixed via bf065a3 (release-0.10 branch)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2od07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>