<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:16:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-31120] ConcurrentModificationException occurred in StringFunctionsITCase.test</title>
                <link>https://issues.apache.org/jira/browse/FLINK-31120</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46255&amp;amp;view=logs&amp;amp;j=0c940707-2659-5648-cbe6-a1ad63045f0a&amp;amp;t=075c2716-8010-5565-fe08-3c4bb45824a4&amp;amp;l=12334&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46255&amp;amp;view=logs&amp;amp;j=0c940707-2659-5648-cbe6-a1ad63045f0a&amp;amp;t=075c2716-8010-5565-fe08-3c4bb45824a4&amp;amp;l=12334&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Feb 17 04:51:25 [ERROR] Tests run: 4, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 10.725 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.table.planner.functions.StringFunctionsITCase
Feb 17 04:51:25 [ERROR] org.apache.flink.table.planner.functions.StringFunctionsITCase.test(TestCase)[4] Time elapsed: 4.367 s &amp;lt;&amp;lt;&amp;lt; ERROR!
Feb 17 04:51:25 org.apache.flink.table.api.TableException: Failed to execute sql
Feb 17 04:51:25 at org.apache.flink.table.api.internal.TableEnvironmentImpl.executeQueryOperation(TableEnvironmentImpl.java:974)
Feb 17 04:51:25 at org.apache.flink.table.api.internal.TableEnvironmentImpl.executeInternal(TableEnvironmentImpl.java:1422)
Feb 17 04:51:25 at org.apache.flink.table.api.internal.TableImpl.execute(TableImpl.java:476)
Feb 17 04:51:25 at org.apache.flink.table.planner.functions.BuiltInFunctionTestBase$ResultTestItem.test(BuiltInFunctionTestBase.java:354)
Feb 17 04:51:25 at org.apache.flink.table.planner.functions.BuiltInFunctionTestBase$TestSetSpec.lambda$getTestCase$4(BuiltInFunctionTestBase.java:320)
Feb 17 04:51:25 at org.apache.flink.table.planner.functions.BuiltInFunctionTestBase$TestCase.execute(BuiltInFunctionTestBase.java:113)
Feb 17 04:51:25 at org.apache.flink.table.planner.functions.BuiltInFunctionTestBase.test(BuiltInFunctionTestBase.java:93)
Feb 17 04:51:25 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13525178">FLINK-31120</key>
            <summary>ConcurrentModificationException occurred in StringFunctionsITCase.test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="csq">Shuiqiang Chen</assignee>
                                    <reporter username="mapohl">Matthias Pohl</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Fri, 17 Feb 2023 10:09:28 +0000</created>
                <updated>Thu, 23 Feb 2023 07:24:30 +0000</updated>
                            <resolved>Thu, 23 Feb 2023 02:43:56 +0000</resolved>
                                    <version>1.17.0</version>
                                    <fixVersion>1.17.0</fixVersion>
                    <fixVersion>1.16.2</fixVersion>
                    <fixVersion>1.18.0</fixVersion>
                                    <component>Table SQL / Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17690372" author="weijie guo" created="Fri, 17 Feb 2023 12:28:53 +0000"  >&lt;p&gt;Sorry, I accidentally touched it.&lt;/p&gt;</comment>
                            <comment id="17690523" author="csq" created="Fri, 17 Feb 2023 18:14:21 +0000"  >&lt;p&gt;Maybe it needs concurrent control for access to the static field `collectIterators` in `StreamExecutionEnvironment`. There are four test cases executing when running StringFunctionsITCase in a concurrent execution mode, that has chance  for a thread to add a collectorIterator through `registerCollectIterator` while there is a foreach loop in executeAsync() in another thread.&lt;/p&gt;</comment>
                            <comment id="17690768" author="leonard xu" created="Sat, 18 Feb 2023 15:19:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=TsReaper&quot; class=&quot;user-hover&quot; rel=&quot;TsReaper&quot;&gt;TsReaper&lt;/a&gt; Would you like to review this PR?&lt;/p&gt;</comment>
                            <comment id="17691082" author="aitozi" created="Mon, 20 Feb 2023 09:10:54 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46301&amp;amp;view=logs&amp;amp;s=ae4f8708-9994-57d3-c2d7-b892156e7812&amp;amp;j=0c940707-2659-5648-cbe6-a1ad63045f0a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46301&amp;amp;view=logs&amp;amp;s=ae4f8708-9994-57d3-c2d7-b892156e7812&amp;amp;j=0c940707-2659-5648-cbe6-a1ad63045f0a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17691424" author="samrat007" created="Tue, 21 Feb 2023 07:22:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46347&amp;amp;view=logs&amp;amp;j=0c940707-2659-5648-cbe6-a1ad63045f0a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46347&amp;amp;view=logs&amp;amp;j=0c940707-2659-5648-cbe6-a1ad63045f0a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17691900" author="tsreaper" created="Wed, 22 Feb 2023 03:24:15 +0000"  >&lt;p&gt;I&apos;ve left my review in the github PR. My main concern is that why do we need a static variable. I see &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; is the author of the related code. Would you please take a look?&lt;/p&gt;</comment>
                            <comment id="17692070" author="mapohl" created="Wed, 22 Feb 2023 09:41:18 +0000"  >&lt;p&gt;&lt;tt&gt;ConstructedAccessFunctionsITCase.testTableApiFlattenStructuredType&lt;/tt&gt; instability due to a &lt;tt&gt;ConcurrentModificationException&lt;/tt&gt; with a similar stacktrace:&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46387&amp;amp;view=logs&amp;amp;j=0c940707-2659-5648-cbe6-a1ad63045f0a&amp;amp;t=075c2716-8010-5565-fe08-3c4bb45824a4&amp;amp;l=11938&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46387&amp;amp;view=logs&amp;amp;j=0c940707-2659-5648-cbe6-a1ad63045f0a&amp;amp;t=075c2716-8010-5565-fe08-3c4bb45824a4&amp;amp;l=11938&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Feb 22 04:26:07 [ERROR] Tests run: 7, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 10.108 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.table.planner.functions.ConstructedAccessFunctionsITCase
Feb 22 04:26:07 [ERROR] org.apache.flink.table.planner.functions.ConstructedAccessFunctionsITCase.testTableApiFlattenStructuredType  Time elapsed: 5.107 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
Feb 22 04:26:07 org.apache.flink.table.api.TableException: Failed to execute sql
Feb 22 04:26:07 	at org.apache.flink.table.api.internal.TableEnvironmentImpl.executeQueryOperation(TableEnvironmentImpl.java:974)
Feb 22 04:26:07 	at org.apache.flink.table.api.internal.TableEnvironmentImpl.executeInternal(TableEnvironmentImpl.java:1422)
Feb 22 04:26:07 	at org.apache.flink.table.api.internal.TableImpl.execute(TableImpl.java:476)
Feb 22 04:26:07 	at org.apache.flink.table.planner.functions.ConstructedAccessFunctionsITCase.testTableApiFlattenStructuredType(ConstructedAccessFunctionsITCase.java:192)
Feb 22 04:26:07 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
Feb 22 04:26:07 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
Feb 22 04:26:07 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
Feb 22 04:26:07 	at java.lang.reflect.Method.invoke(Method.java:498)
Feb 22 04:26:07 	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
Feb 22 04:26:07 	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
Feb 22 04:26:07 	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
Feb 22 04:26:07 	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
Feb 22 04:26:07 	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
Feb 22 04:26:07 	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
Feb 22 04:26:07 	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
Feb 22 04:26:07 	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
Feb 22 04:26:07 	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
Feb 22 04:26:07 	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
Feb 22 04:26:07 	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
Feb 22 04:26:07 	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
Feb 22 04:26:07 	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
Feb 22 04:26:07 	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
Feb 22 04:26:07 	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
Feb 22 04:26:07 	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
Feb 22 04:26:07 	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
Feb 22 04:26:07 	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
Feb 22 04:26:07 	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
Feb 22 04:26:07 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
Feb 22 04:26:07 	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
Feb 22 04:26:07 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
Feb 22 04:26:07 	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
Feb 22 04:26:07 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
Feb 22 04:26:07 	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
Feb 22 04:26:07 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
Feb 22 04:26:07 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
Feb 22 04:26:07 	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)
Feb 22 04:26:07 	at java.util.concurrent.RecursiveAction.exec(RecursiveAction.java:189)
Feb 22 04:26:07 	at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)
Feb 22 04:26:07 	at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)
Feb 22 04:26:07 	at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)
Feb 22 04:26:07 	at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:175)
Feb 22 04:26:07 Caused by: java.util.ConcurrentModificationException
Feb 22 04:26:07 	at java.util.ArrayList.forEach(ArrayList.java:1262)
Feb 22 04:26:07 	at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.executeAsync(StreamExecutionEnvironment.java:2202)
Feb 22 04:26:07 	at org.apache.flink.table.planner.delegation.DefaultExecutor.executeAsync(DefaultExecutor.java:95)
Feb 22 04:26:07 	at org.apache.flink.table.api.internal.TableEnvironmentImpl.executeQueryOperation(TableEnvironmentImpl.java:955)
Feb 22 04:26:07 	... 40 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17692076" author="csq" created="Wed, 22 Feb 2023 09:46:09 +0000"  >&lt;p&gt;I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=TsReaper&quot; class=&quot;user-hover&quot; rel=&quot;TsReaper&quot;&gt;TsReaper&lt;/a&gt; that the variable does not need to be static since it is accessed only by current environment. Or is there any other consideration?&lt;/p&gt;</comment>
                            <comment id="17692453" author="tsreaper" created="Thu, 23 Feb 2023 02:44:08 +0000"  >&lt;p&gt;master: fa6a2aed6136ae59ed14cd01819e8f94867840b7&lt;br/&gt;
release-1.17: 7201d0aa1c69ae0a52f07cea38a0545203f67c17&lt;br/&gt;
release-1.16: 4ba657ea60452f16d3f6175031f8471b3b7f042f&lt;/p&gt;</comment>
                            <comment id="17692534" author="mapohl" created="Thu, 23 Feb 2023 07:24:30 +0000"  >&lt;p&gt;This build failure didn&apos;t contain the aforementioned fix, yet:&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46433&amp;amp;view=logs&amp;amp;j=f2c100be-250b-5e85-7bbe-176f68fcddc5&amp;amp;t=05efd11e-5400-54a4-0d27-a4663be008a9&amp;amp;l=12384&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46433&amp;amp;view=logs&amp;amp;j=f2c100be-250b-5e85-7bbe-176f68fcddc5&amp;amp;t=05efd11e-5400-54a4-0d27-a4663be008a9&amp;amp;l=12384&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1g0gw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>