<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:25:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4081] FieldParsers should support empty strings</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4081</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;In order to parse CSV files using the new Table API that converts rows to Row objects (that support null values), FiledParser implementations should support emptry strings setting the parser state to ParseErrorState.EMPTY_STRING (for example FloatParser and DoubleParser doesn&apos;t respect this constraint)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12979735">FLINK-4081</key>
            <summary>FieldParsers should support empty strings</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twalthr">Timo Walther</assignee>
                                    <reporter username="f.pompermaier">Flavio Pompermaier</reporter>
                        <labels>
                            <label>csvparser</label>
                            <label>table-api</label>
                    </labels>
                <created>Thu, 16 Jun 2016 09:28:27 +0000</created>
                <updated>Thu, 28 Feb 2019 13:21:41 +0000</updated>
                            <resolved>Mon, 19 Sep 2016 14:26:10 +0000</resolved>
                                                    <fixVersion>1.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15393895" author="githubbot" created="Tue, 26 Jul 2016 14:51:29 +0000"  >&lt;p&gt;GitHub user twalthr opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2297&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4081&quot; title=&quot;FieldParsers should support empty strings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4081&quot;&gt;&lt;del&gt;FLINK-4081&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;core&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; FieldParsers should support empty strings&lt;/p&gt;

&lt;p&gt;    Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.&lt;br/&gt;
    If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the &lt;span class=&quot;error&quot;&gt;&amp;#91;How To Contribute guide&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://flink.apache.org/how-to-contribute.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://flink.apache.org/how-to-contribute.html&lt;/a&gt;).&lt;br/&gt;
    In addition to going through the list, please provide a meaningful description of your changes.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; General&lt;/li&gt;
	&lt;li&gt;The pull request references the related JIRA issue (&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;FLINK-XXX&amp;#93;&lt;/span&gt; Jira title text&quot;)&lt;/li&gt;
	&lt;li&gt;The pull request addresses only one issue&lt;/li&gt;
	&lt;li&gt;Each commit in the PR has a meaningful commit message (including the JIRA id)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Documentation&lt;/li&gt;
	&lt;li&gt;Documentation has been added for new functionality&lt;/li&gt;
	&lt;li&gt;Old documentation affected by the pull request has been updated&lt;/li&gt;
	&lt;li&gt;JavaDoc for public methods has been added&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Tests &amp;amp; Build&lt;/li&gt;
	&lt;li&gt;Functionality added by the pull request is covered by tests&lt;/li&gt;
	&lt;li&gt;`mvn clean verify` has been executed successfully locally or a Travis build has passed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This PR adds the FieldParser error state `EMPTY_STRING` to all FieldParsers. Until now the behavior was inconsistent, e.g. IntParser had it but FloatParser not. This PR allows for `null` values in advanced input formats such as `RowCsvInputFormat`. &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/twalthr/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/twalthr/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4081&quot; title=&quot;FieldParsers should support empty strings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4081&quot;&gt;&lt;del&gt;FLINK-4081&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2297.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2297.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2297&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c04532ec69a42993e7070f959d265e5d0ff39704&lt;br/&gt;
Author: twalthr &amp;lt;twalthr@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-07-26T14:24:24Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4081&quot; title=&quot;FieldParsers should support empty strings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4081&quot;&gt;&lt;del&gt;FLINK-4081&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;core&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; FieldParsers should support empty strings&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15404107" author="githubbot" created="Tue, 2 Aug 2016 14:41:49 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2297&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Using an error state for an empty string seems a bit unorthodox.&lt;br/&gt;
    I take it returning `0` does not work for some reason?&lt;/p&gt;</comment>
                            <comment id="15404167" author="githubbot" created="Tue, 2 Aug 2016 15:18:26 +0000"  >&lt;p&gt;Github user fpompermaier commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2297&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    For our use cases it is important to know whether a value of cell is empty or it is 0.&lt;br/&gt;
    The EMPTY_STRING error could be intercepted by the csv parser in order to generate Row objects with null values instead of 0 using the Table API&lt;/p&gt;</comment>
                            <comment id="15405909" author="githubbot" created="Wed, 3 Aug 2016 13:23:38 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2297&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I am confused here, the return value is not the parsed value, but the length that got parsed.&lt;/p&gt;</comment>
                            <comment id="15411602" author="githubbot" created="Mon, 8 Aug 2016 09:48:16 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2297&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The length is not sufficient to differentiate between empty column and empty string.&lt;br/&gt;
    E.g. if you have quoted strings: `,,` and `,&quot;&quot;,`&lt;br/&gt;
    With the changes in this PR we don&apos;t modify the return values, but deposit the information of an empty column in the error state.&lt;/p&gt;</comment>
                            <comment id="15411745" author="githubbot" created="Mon, 8 Aug 2016 12:40:47 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2297&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Okay, I think the main source of confusion here is that `EMPTY_STRING` does actually not refer to an empty string (as specific to the string parser) but to something like &quot;null&quot;, &quot;empty column&quot;, or &quot;missing value&quot;.&lt;/p&gt;

&lt;p&gt;    Let&apos;s call it something like that and then it actually makes sense to me to communicate that via an error state. Because it is actually not a regular value (as an empty string would be).&lt;/p&gt;
</comment>
                            <comment id="15420758" author="githubbot" created="Mon, 15 Aug 2016 09:13:59 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2297&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @StephanEwen I renamed `EMPTY_STRING` to `EMPTY_COLUMN`. All parsers that have a &quot;format&quot; (like Double, Boolean, Integer etc.) return `-1` and set `EMPTY_COLUMN`. The `StringParser` returns the String but sets `EMPTY_COLUMN` in case no quoting could be found.&lt;/p&gt;

&lt;p&gt;    So in `..,12,,xyz,..` the column `,,` will always be set as `EMPTY_COLUMN` consistently across all parsers.&lt;/p&gt;</comment>
                            <comment id="15496347" author="githubbot" created="Fri, 16 Sep 2016 13:31:30 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2297&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    If there are no objections, I would like to merge this PR next week. Other my other PRs depend on this.&lt;/p&gt;</comment>
                            <comment id="15502888" author="githubbot" created="Mon, 19 Sep 2016 09:45:28 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2297&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    That looks more consistent.&lt;/p&gt;

&lt;p&gt;    If the tests pass, +1 from my side&lt;/p&gt;</comment>
                            <comment id="15503638" author="twalthr" created="Mon, 19 Sep 2016 14:26:10 +0000"  >&lt;p&gt;Fixed in 4b1a9c72e99125680035e5dadc148b187d9d4124.&lt;/p&gt;</comment>
                            <comment id="15503640" author="githubbot" created="Mon, 19 Sep 2016 14:26:25 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2297&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zjtr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>