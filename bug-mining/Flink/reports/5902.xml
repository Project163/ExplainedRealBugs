<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:07:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-19792] Interval join with equal time attributes is not recognized</title>
                <link>https://issues.apache.org/jira/browse/FLINK-19792</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;A user reported that interval joins with equal time attribute predicate are not recognized, instead a regular inner join is used:&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
table1 = table_env.from_path(&lt;span class=&quot;code-quote&quot;&gt;&quot;table1&quot;&lt;/span&gt;)
table2 = table_env.from_path(&lt;span class=&quot;code-quote&quot;&gt;&quot;table2&quot;&lt;/span&gt;)

print(table1.join(table2).where(&lt;span class=&quot;code-quote&quot;&gt;&quot;ts = ts2 &amp;amp;&amp;amp; id = id2&quot;&lt;/span&gt;).select(&lt;span class=&quot;code-quote&quot;&gt;&quot;id, ts&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The documentation clearly states that this should be supported:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
For example, the following predicates are valid interval join conditions:

ltime === rtime
ltime &amp;gt;= rtime &amp;amp;&amp;amp; ltime &amp;lt; rtime + 10.minutes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Source: &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-release-1.11/dev/table/tableApi.html#joins&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.apache.org/projects/flink/flink-docs-release-1.11/dev/table/tableApi.html#joins&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;See also the discussion here:&lt;br/&gt;
&lt;a href=&quot;https://stackoverflow.com/q/64445207/806430&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/q/64445207/806430&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13336943">FLINK-19792</key>
            <summary>Interval join with equal time attributes is not recognized</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slinkydeveloper">Francesco Guardiani</assignee>
                                    <reporter username="twalthr">Timo Walther</reporter>
                        <labels>
                            <label>auto-deprioritized-major</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 23 Oct 2020 14:56:26 +0000</created>
                <updated>Tue, 30 Nov 2021 05:56:27 +0000</updated>
                            <resolved>Fri, 1 Oct 2021 08:44:20 +0000</resolved>
                                                    <fixVersion>1.15.0</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17219737" author="alexmojaki" created="Fri, 23 Oct 2020 14:58:48 +0000"  >&lt;p&gt;Fortunately just &quot;ts &amp;gt;= ts2 &amp;amp;&amp;amp; ts &amp;lt;= ts2&quot; seems to work fine.&lt;/p&gt;</comment>
                            <comment id="17327592" author="flink-jira-bot" created="Thu, 22 Apr 2021 11:04:52 +0000"  >&lt;p&gt;This major issue is unassigned and itself and all of its Sub-Tasks have not been updated for 30 days. So, it has been labeled &quot;stale-major&quot;. If this ticket is indeed &quot;major&quot;, please either assign yourself or give an update. Afterwards, please remove the label. In 7 days the issue will be deprioritized.&lt;/p&gt;</comment>
                            <comment id="17336062" author="flink-jira-bot" created="Thu, 29 Apr 2021 23:05:07 +0000"  >&lt;p&gt;This issue was labeled &quot;stale-major&quot; 7 ago and has not received any updates so it is being deprioritized. If this ticket is actually Major, please raise the priority and ask a committer to assign you the issue or revive the public discussion.&lt;/p&gt;</comment>
                            <comment id="17417971" author="slinkydeveloper" created="Tue, 21 Sep 2021 08:14:22 +0000"  >&lt;p&gt;I tried to replicate the issue with the following query (rowtime is just a TIMESTAMP typed attribute computed from another attribute):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT t1.a, t2.b FROM A t1, B t2 WHERE t1.rowtime = t2.rowtime AND t1.a = t2.a
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And I see a proper interval join is planned:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Calc(select=[a, b])
+- IntervalJoin(joinType=[InnerJoin], windowBounds=[isRowTime=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, leftLowerBound=0, leftUpperBound=0, leftTimeIndex=1, rightTimeIndex=2], where=[((rowtime = rowtime0) AND (a = a0))], select=[a, rowtime, a0, b, rowtime0])
   :- Exchange(distribution=[hash[rowtime, a]])
   :  +- WatermarkAssigner(rowtime=[rowtime], watermark=[(rowtime - 1000:INTERVAL SECOND)])
   :     +- Calc(select=[a, TO_TIMESTAMP(FROM_UNIXTIME(c)) AS rowtime])
   :        +- TableSourceScan(table=[[default_catalog, default_database, A, project=[a, c], metadata=[]]], fields=[a, c])
   +- Exchange(distribution=[hash[rowtime, a]])
      +- WatermarkAssigner(rowtime=[rowtime], watermark=[(rowtime - 1000:INTERVAL SECOND)])
         +- Calc(select=[a, b, TO_TIMESTAMP(FROM_UNIXTIME(c)) AS rowtime])
            +- TableSourceScan(table=[[default_catalog, default_database, B]], fields=[a, b, c])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Am I overlooking something?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17423191" author="twalthr" created="Fri, 1 Oct 2021 08:44:21 +0000"  >&lt;p&gt;Fixed in master: 7033cbfe404bea1519d3342a611e2f92768d70f9&lt;/p&gt;

&lt;p&gt;I did not back port this change due to the involved plan changes. A workaround has been mentioned in the comments.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13412098">FLINK-24926</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0jyk8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>