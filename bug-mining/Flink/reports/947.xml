<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:23:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2544] Some test cases using PowerMock fail with Java 8u20</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2544</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I observed that some of the test cases using &lt;tt&gt;PowerMockRunner&lt;/tt&gt; fail with Java 8u20 with the following error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.VerifyError: Bad &amp;lt;init&amp;gt; method call from inside of a branch
Exception Details:
  Location:
    org/apache/flink/client/program/ClientTest$SuccessReturningActor.&amp;lt;init&amp;gt;()V @32: invokespecial
  Reason:
    Error exists in the bytecode
  Bytecode:
    0x0000000: 2a4c 1214 b800 1a03 bd00 0d12 1bb8 001f
    0x0000010: b800 254e 2db2 0029 a500 0e2a 01c0 002b
    0x0000020: b700 2ea7 0009 2bb7 0030 0157 2a01 4c01
    0x0000030: 4d01 4e2b 01a5 0008 2b4e a700 0912 32b8
    0x0000040: 001a 4e2d 1234 03bd 000d 1236 b800 1f12
    0x0000050: 32b8 003a 3a04 1904 b200 29a6 000a b800
    0x0000060: 3c4d a700 0919 04c0 0011 4d2c b800 42b5
    0x0000070: 0046 b1                                
  Stackmap Table:
    full_frame(@38,{UninitializedThis,UninitializedThis,Top,&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#13]},{})
    full_frame(@44,{&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#2],&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#2],Top,&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#13]},{})
    full_frame(@61,{&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#2],Null,Null,Null},{&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#2]})
    full_frame(@67,{&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#2],Null,Null,&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#15]},{&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#2]})
    full_frame(@101,{&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#2],Null,Null,&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#15],&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#13]},{&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#2]})
    full_frame(@107,{&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#2],Null,&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#17],&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#15],&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#13]},{&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[#2]})

	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getDeclaredConstructors0(Native Method)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.privateGetDeclaredConstructors(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:2658)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getConstructor0(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:3062)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getDeclaredConstructor(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:2165)
	at akka.util.Reflect$$anonfun$4.apply(Reflect.scala:86)
	at akka.util.Reflect$$anonfun$4.apply(Reflect.scala:86)
	at scala.util.Try$.apply(Try.scala:161)
	at akka.util.Reflect$.findConstructor(Reflect.scala:86)
	at akka.actor.NoArgsReflectConstructor.&amp;lt;init&amp;gt;(Props.scala:359)
	at akka.actor.IndirectActorProducer$.apply(Props.scala:308)
	at akka.actor.Props.producer(Props.scala:176)
	at akka.actor.Props.&amp;lt;init&amp;gt;(Props.scala:189)
	at akka.actor.Props$.create(Props.scala:99)
	at akka.actor.Props$.create(Props.scala:99)
	at akka.actor.Props.create(Props.scala)
	at org.apache.flink.client.program.ClientTest.shouldSubmitToJobClient(ClientTest.java:143)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:310)
	at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:88)
	at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:96)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:294)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:127)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:282)
	at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:86)
	at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:207)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:146)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:120)
	at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:33)
	at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:45)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:118)
	at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:104)
	at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
	at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:53)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:78)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:212)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:140)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Affected tests are: &lt;tt&gt;ClientTest.shouldSubmitToJobClient&lt;/tt&gt;, &lt;tt&gt;ClientTest.shouldSubmitToJobClientFails&lt;/tt&gt;, &lt;tt&gt;DataSourceTaskTest&lt;/tt&gt;, &lt;tt&gt;DataSinkTaskTest&lt;/tt&gt; and &lt;tt&gt;ChainTaskTest&lt;/tt&gt;. This list, however, is by no means complete.&lt;/p&gt;

&lt;p&gt;With the latest java version Java 8u51, the tests pass, though. The problem might be related to &lt;a href=&quot;https://code.google.com/p/powermock/issues/detail?id=505&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://code.google.com/p/powermock/issues/detail?id=505&lt;/a&gt; and to &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8051012&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8051012&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I propose to either document this fact more prominently or to rewrite the affected tests so that they also run with Java 8u20.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12856926">FLINK-2544</key>
            <summary>Some test cases using PowerMock fail with Java 8u20</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spkavulya">Soila Kavulya</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Aug 2015 14:17:04 +0000</created>
                <updated>Mon, 18 Apr 2016 17:49:22 +0000</updated>
                            <resolved>Fri, 15 Apr 2016 19:00:55 +0000</resolved>
                                                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14701331" author="stephanewen" created="Tue, 18 Aug 2015 14:27:20 +0000"  >&lt;p&gt;+1 for documenting this&lt;/p&gt;</comment>
                            <comment id="15185081" author="zentol" created="Tue, 8 Mar 2016 15:31:45 +0000"  >&lt;p&gt;Should we add a comment into all tests using PowerMockRunner, right next to the @RunWIth annotation?&lt;/p&gt;</comment>
                            <comment id="15232697" author="spkavulya" created="Fri, 8 Apr 2016 18:43:24 +0000"  >&lt;p&gt;+1 for documenting this. I ran into this while building the unit tests with Java 8u20. It would be nice to have it in the README under building Apache Flink from source.&lt;/p&gt;</comment>
                            <comment id="15239870" author="githubbot" created="Wed, 13 Apr 2016 19:09:26 +0000"  >&lt;p&gt;GitHub user skavulya opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1882&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1882&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2544&quot; title=&quot;Some test cases using PowerMock fail with Java 8u20&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2544&quot;&gt;&lt;del&gt;FLINK-2544&lt;/del&gt;&lt;/a&gt; Add Java 8 version for building PowerMock tests to docs&lt;/p&gt;

&lt;p&gt;    Java 8 update 11 introduced a stricter bytecode verifier that leads to failures in unit tests that use the PowerMock runner. The tests run correctly in Java 8u51 or above. This PR updates the README with a note about the Java versions needed to run unit tests that use the PowerMock runner.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/skavulya/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/skavulya/flink&lt;/a&gt; update-readme&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1882.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1882.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1882&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 574e25a59dde5c1f85ce2fbac574b5a6f252d734&lt;br/&gt;
Author: spkavuly &amp;lt;soila.p.kavulya@intel.com&amp;gt;&lt;br/&gt;
Date:   2016-04-13T19:02:57Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2544&quot; title=&quot;Some test cases using PowerMock fail with Java 8u20&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2544&quot;&gt;&lt;del&gt;FLINK-2544&lt;/del&gt;&lt;/a&gt; Add Java 8 version for building PowerMock tests to docs&lt;/p&gt;

&lt;p&gt;    Java 8 update 11 introduced a stricter bytecode verifier that leads&lt;br/&gt;
    to failures in unit tests that use the PowerMock runner. The tests&lt;br/&gt;
    run correctly in Java 8u51 or above.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15239877" author="spkavulya" created="Wed, 13 Apr 2016 19:13:20 +0000"  >&lt;p&gt;I created a pull request to update README.md and BUILDING.md. &lt;/p&gt;

&lt;p&gt;I found a blog that explains the failures &lt;a href=&quot;http://blog.takipi.com/oracles-latest-java-8-update-broke-your-tools-how-did-it-happen/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://blog.takipi.com/oracles-latest-java-8-update-broke-your-tools-how-did-it-happen/&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;The solution is to upgrade Java, or run the tests with java -noverify flag (not recommended).&lt;/p&gt;</comment>
                            <comment id="15241425" author="githubbot" created="Thu, 14 Apr 2016 16:08:33 +0000"  >&lt;p&gt;Github user fhueske commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1882#issuecomment-210022577&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1882#issuecomment-210022577&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the fix, @skavulya!&lt;br/&gt;
    Looks good to merge.&lt;/p&gt;</comment>
                            <comment id="15242737" author="githubbot" created="Fri, 15 Apr 2016 10:06:26 +0000"  >&lt;p&gt;Github user fhueske commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1882#issuecomment-210399164&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1882#issuecomment-210399164&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Will merge this PR.&lt;/p&gt;</comment>
                            <comment id="15242868" author="githubbot" created="Fri, 15 Apr 2016 12:03:52 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1882#issuecomment-210438717&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1882#issuecomment-210438717&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    As a followup, could we add some &quot;Assume&quot; statements in the tests that check whether the Java version is either Java 7 or Java 8u51+ ?&lt;/p&gt;</comment>
                            <comment id="15243285" author="githubbot" created="Fri, 15 Apr 2016 17:40:26 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1882&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1882&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15243417" author="fhueske" created="Fri, 15 Apr 2016 19:00:55 +0000"  >&lt;p&gt;Fixed for 1.0.2 with c1eb247e968a54f3f252ece792847c00b8ef5464&lt;br/&gt;
Fixed for 1.1.0 with d938c5f592addcee75227502a930264b36306aed&lt;/p&gt;</comment>
                            <comment id="15243418" author="fhueske" created="Fri, 15 Apr 2016 19:02:38 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spkavulya&quot; class=&quot;user-hover&quot; rel=&quot;spkavulya&quot;&gt;spkavulya&lt;/a&gt;, I gave you contributor permissions for the Flink JIRA. &lt;br/&gt;
Now you can assign JIRAs to yourself.&lt;/p&gt;

&lt;p&gt;Thanks for your contribution!&lt;/p&gt;</comment>
                            <comment id="15246133" author="githubbot" created="Mon, 18 Apr 2016 17:49:22 +0000"  >&lt;p&gt;Github user skavulya commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1882#issuecomment-211498750&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1882#issuecomment-211498750&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @StephanEwen Adding &quot;Assume&quot; statements is a good idea. We could limit them to the affected tests.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j20n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>