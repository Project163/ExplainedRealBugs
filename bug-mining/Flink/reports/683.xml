<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:21:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3025] Flink Kafka consumer may get stuck due to Kafka/Zookeeper client bug</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3025</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;In some cases the Flink kafka consumer might fail due to &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-824&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-824&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Subsequently it can happen that the sources gets stuck in a Zookeeper client call (zookeeper bug).&lt;/p&gt;

&lt;p&gt;A proposed fix would be bumping the zookeeper dependency to a version that includes the fix for this bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12913638">FLINK-3025</key>
            <summary>Flink Kafka consumer may get stuck due to Kafka/Zookeeper client bug</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="gyfora">Gyula Fora</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Nov 2015 10:47:36 +0000</created>
                <updated>Thu, 25 Feb 2016 09:13:45 +0000</updated>
                            <resolved>Thu, 25 Feb 2016 09:13:45 +0000</resolved>
                                    <version>0.10.0</version>
                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>Connectors / Common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15008491" author="githubbot" created="Tue, 17 Nov 2015 11:05:10 +0000"  >&lt;p&gt;GitHub user StephanEwen opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1365&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1365&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3025&quot; title=&quot;Flink Kafka consumer may get stuck due to Kafka/Zookeeper client bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3025&quot;&gt;&lt;del&gt;FLINK-3025&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;kafka consumer&amp;#93;&lt;/span&gt; Bump transitive ZkClient dependency to 0.7 for bugfixes&lt;/p&gt;

&lt;p&gt;    Gives us a fix against deadlocks in the ZkClient which have caused the Kafka Consumer to freeze.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/StephanEwen/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StephanEwen/incubator-flink&lt;/a&gt; zk_version_fix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1365.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1365.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1365&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 97715cd9e6ad88a1b7d1178f13e1e12fd0544996&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-11-17T11:03:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3025&quot; title=&quot;Flink Kafka consumer may get stuck due to Kafka/Zookeeper client bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3025&quot;&gt;&lt;del&gt;FLINK-3025&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;kafka consumer&amp;#93;&lt;/span&gt; Bump transitive ZkClient dependency to 0.7 for bugfixes&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15008568" author="githubbot" created="Tue, 17 Nov 2015 12:19:54 +0000"  >&lt;p&gt;Github user gyfora commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1365#issuecomment-157354372&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1365#issuecomment-157354372&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    :+1: &lt;/p&gt;</comment>
                            <comment id="15008587" author="githubbot" created="Tue, 17 Nov 2015 12:45:29 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1365#issuecomment-157362141&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1365#issuecomment-157362141&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Tests pass, will merge this...&lt;/p&gt;</comment>
                            <comment id="15008751" author="githubbot" created="Tue, 17 Nov 2015 14:49:11 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1365&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1365&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15008811" author="stephanewen" created="Tue, 17 Nov 2015 15:17:19 +0000"  >&lt;p&gt;Fixed in &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;0.10 via d209cdc64b960a335524430cefb7bd3a5fbabfed&lt;/li&gt;
	&lt;li&gt;1.0 via a654760299f6698b2a2673ca5b6ffba38b39ea4e&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15024059" author="gyfora" created="Tue, 24 Nov 2015 09:12:36 +0000"  >&lt;p&gt;I am still getting the same issue after running into this exception:&lt;/p&gt;

&lt;p&gt;java.lang.RuntimeException: Error while confirming checkpoint&lt;br/&gt;
at org.apache.flink.runtime.taskmanager.Task$2.run(Task.java:935)&lt;br/&gt;
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)&lt;br/&gt;
at java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
at org.I0Itec.zkclient.ZkConnection.writeDataReturnStat(ZkConnection.java:115)&lt;br/&gt;
at org.I0Itec.zkclient.ZkClient$10.call(ZkClient.java:817)&lt;br/&gt;
at org.I0Itec.zkclient.ZkClient.retryUntilConnected(ZkClient.java:675)&lt;br/&gt;
at org.I0Itec.zkclient.ZkClient.writeDataReturnStat(ZkClient.java:813)&lt;br/&gt;
at org.I0Itec.zkclient.ZkClient.writeData(ZkClient.java:808)&lt;br/&gt;
at org.I0Itec.zkclient.ZkClient.writeData(ZkClient.java:777)&lt;br/&gt;
at kafka.utils.ZkUtils$.updatePersistentPath(ZkUtils.scala:332)&lt;br/&gt;
at kafka.utils.ZkUtils.updatePersistentPath(ZkUtils.scala)&lt;br/&gt;
at org.apache.flink.streaming.connectors.kafka.internals.ZookeeperOffsetHandler.setOffsetInZooKeeper(ZookeeperOffsetHandler.java:112)&lt;br/&gt;
at org.apache.flink.streaming.connectors.kafka.internals.ZookeeperOffsetHandler.commit(ZookeeperOffsetHandler.java:80)&lt;br/&gt;
at org.apache.flink.streaming.connectors.kafka.FlinkKafkaConsumer.notifyCheckpointComplete(FlinkKafkaConsumer.java:563)&lt;br/&gt;
at org.apache.flink.streaming.api.operators.AbstractUdfStreamOperator.notifyOfCompletedCheckpoint(AbstractUdfStreamOperator.java:176)&lt;br/&gt;
at org.apache.flink.streaming.runtime.tasks.StreamTask.notifyCheckpointComplete(StreamTask.java:478)&lt;br/&gt;
at org.apache.flink.runtime.taskmanager.Task$2.run(Task.java:931)&lt;br/&gt;
... 5 more&lt;br/&gt;
06:23:28,373 INFO org.apache.flink.runtime.executiongraph.ExecutionGraph - Source: Kafka&lt;span class=&quot;error&quot;&gt;&amp;#91;event.rakdos.log&amp;#93;&lt;/span&gt; (1/1) (d79e6b7a25b1ac307d2e0c8&lt;/p&gt;</comment>
                            <comment id="15024060" author="gyfora" created="Tue, 24 Nov 2015 09:12:47 +0000"  >&lt;p&gt;We suspect that the problem is that flink cannot handle kafka broker failures. We will try to reproduce it by killing a broker in our kafka cluster later, and then I can give some more feedback.&lt;/p&gt;</comment>
                            <comment id="15166962" author="rmetzger" created="Thu, 25 Feb 2016 09:13:45 +0000"  >&lt;p&gt;This has been resolved in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3067&quot; title=&quot;Kafka source fails during checkpoint notifications with NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3067&quot;&gt;&lt;del&gt;FLINK-3067&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ohxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>