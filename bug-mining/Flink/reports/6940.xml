<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:16:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-31109] Fails with proxy user not supported even when security.kerberos.fetch.delegation-token is set to false</title>
                <link>https://issues.apache.org/jira/browse/FLINK-31109</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;With&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
security.kerberos.fetch.delegation-token: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and delegation tokens obtained through our internal service which sets both HADOOP_TOKEN_FILE_LOCATION to pick up the DTs and also sets the HADOOP_PROXY_USER which fails with the below error&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SLF4J: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/export/home/vsowrira/flink-1.18-SNAPSHOT/lib/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/export/apps/hadoop/hadoop-bin_2100503/share/hadoop/common/lib/slf4j-log4j12-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http:&lt;span class=&quot;code-comment&quot;&gt;//www.slf4j.org/codes.html#multiple_bindings &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; an explanation.
&lt;/span&gt;SLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]
org.apache.flink.runtime.security.modules.SecurityModule$SecurityInstallException: Unable to set the Hadoop login user
	at org.apache.flink.runtime.security.modules.HadoopModule.install(HadoopModule.java:106)
	at org.apache.flink.runtime.security.SecurityUtils.installModules(SecurityUtils.java:76)
	at org.apache.flink.runtime.security.SecurityUtils.install(SecurityUtils.java:57)
	at org.apache.flink.client.cli.CliFrontend.mainInternal(CliFrontend.java:1188)
	at org.apache.flink.client.cli.CliFrontend.main(CliFrontend.java:1157)
Caused by: java.lang.UnsupportedOperationException: Proxy user is not supported
	at org.apache.flink.runtime.security.token.hadoop.KerberosLoginProvider.throwProxyUserNotSupported(KerberosLoginProvider.java:137)
	at org.apache.flink.runtime.security.token.hadoop.KerberosLoginProvider.isLoginPossible(KerberosLoginProvider.java:81)
	at org.apache.flink.runtime.security.modules.HadoopModule.install(HadoopModule.java:73)
	... 4 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This seems to have gotten changed after &lt;a href=&quot;https://github.com/apache/flink/commit/480e6edf9732f8334ef7576080fdbfc98051cb28&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;480e6edf&lt;/a&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-28330&quot; title=&quot;Remove old delegation token framework code when new is working fine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-28330&quot;&gt;&lt;del&gt;FLINK-28330&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;security&amp;#93;&lt;/span&gt; Remove old delegation token framework code)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13525087">FLINK-31109</key>
            <summary>Fails with proxy user not supported even when security.kerberos.fetch.delegation-token is set to false</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vsowrirajan">Venkata krishnan Sowrirajan</assignee>
                                    <reporter username="vsowrirajan">Venkata krishnan Sowrirajan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 16 Feb 2023 21:23:10 +0000</created>
                <updated>Mon, 27 May 2024 05:35:28 +0000</updated>
                            <resolved>Mon, 27 Feb 2023 13:54:17 +0000</resolved>
                                    <version>1.17.0</version>
                                    <fixVersion>1.17.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17690067" author="vsowrirajan" created="Fri, 17 Feb 2023 00:35:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaborgsomogyi&quot; class=&quot;user-hover&quot; rel=&quot;gaborgsomogyi&quot;&gt;gaborgsomogyi&lt;/a&gt; I will take a stab on fixing the issue.&lt;/p&gt;</comment>
                            <comment id="17690228" author="gaborgsomogyi" created="Fri, 17 Feb 2023 07:59:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vsowrirajan&quot; class=&quot;user-hover&quot; rel=&quot;vsowrirajan&quot;&gt;vsowrirajan&lt;/a&gt; thanks for reporting the issue. I agree that proxy support is not allowed only in case of DT but in normal usage it should work. The mentioned check must be turned off/avoided all cases where no DT is involved (HadoopModule for sure, YARN area maybe affected). Ping me on the PR and I can review it...&lt;/p&gt;</comment>
                            <comment id="17690230" author="gaborgsomogyi" created="Fri, 17 Feb 2023 08:02:57 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijnvisser&quot; class=&quot;user-hover&quot; rel=&quot;martijnvisser&quot;&gt;martijnvisser&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17690241" author="martijnvisser" created="Fri, 17 Feb 2023 08:26:55 +0000"  >&lt;p&gt;Which version has been used for testing? Please update the affected version for this. Especially if it&apos;s marked as a blocker&lt;/p&gt;</comment>
                            <comment id="17690248" author="gaborgsomogyi" created="Fri, 17 Feb 2023 08:34:35 +0000"  >&lt;p&gt;This exists on the latest master.&lt;/p&gt;</comment>
                            <comment id="17690257" author="martijnvisser" created="Fri, 17 Feb 2023 08:49:14 +0000"  >&lt;p&gt;OK, then this is a release blocker for 1.17. We should get this fixed asap&lt;/p&gt;</comment>
                            <comment id="17690291" author="gaborgsomogyi" created="Fri, 17 Feb 2023 09:40:10 +0000"  >&lt;p&gt;Waiting on &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vsowrirajan&quot; class=&quot;user-hover&quot; rel=&quot;vsowrirajan&quot;&gt;vsowrirajan&lt;/a&gt; since they have the test env where it can be validated. What I can help is to review when PR is available.&lt;/p&gt;</comment>
                            <comment id="17690294" author="martijnvisser" created="Fri, 17 Feb 2023 09:46:27 +0000"  >&lt;p&gt;Perfect, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaborgsomogyi&quot; class=&quot;user-hover&quot; rel=&quot;gaborgsomogyi&quot;&gt;gaborgsomogyi&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vsowrirajan&quot; class=&quot;user-hover&quot; rel=&quot;vsowrirajan&quot;&gt;vsowrirajan&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17691280" author="vsowrirajan" created="Mon, 20 Feb 2023 19:47:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaborgsomogyi&quot; class=&quot;user-hover&quot; rel=&quot;gaborgsomogyi&quot;&gt;gaborgsomogyi&lt;/a&gt; Thanks for the confirmation. Yeah I am still working on the fix. Will post it soon after testing it internally.&lt;/p&gt;</comment>
                            <comment id="17691447" author="martijnvisser" created="Tue, 21 Feb 2023 08:08:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vsowrirajan&quot; class=&quot;user-hover&quot; rel=&quot;vsowrirajan&quot;&gt;vsowrirajan&lt;/a&gt; Is there any eta on this? Since its a blocker for 1.17, we would like to understand how long this is expecting to take before being resolved.&lt;/p&gt;</comment>
                            <comment id="17691740" author="vsowrirajan" created="Tue, 21 Feb 2023 18:25:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijnvisser&quot; class=&quot;user-hover&quot; rel=&quot;martijnvisser&quot;&gt;martijnvisser&lt;/a&gt; I&apos;m still looking into it. I would probably need till the end of this week for the fix and all the internal testing that needs to be done before raising the PR. Do you have any timelines in mind?&lt;/p&gt;</comment>
                            <comment id="17691811" author="martijnvisser" created="Tue, 21 Feb 2023 22:08:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vsowrirajan&quot; class=&quot;user-hover&quot; rel=&quot;vsowrirajan&quot;&gt;vsowrirajan&lt;/a&gt; Its planned to have all release testing and blockers resolved at the end of this week, so we can create a release candidate on Monday next week. &lt;/p&gt;</comment>
                            <comment id="17692973" author="vsowrirajan" created="Fri, 24 Feb 2023 02:09:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijnvisser&quot; class=&quot;user-hover&quot; rel=&quot;martijnvisser&quot;&gt;martijnvisser&lt;/a&gt; Sure, I have posted a PR with the fix after discussing with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaborgsomogyi&quot; class=&quot;user-hover&quot; rel=&quot;gaborgsomogyi&quot;&gt;gaborgsomogyi&lt;/a&gt; . Please take a look whenever you get a chance. Thanks.&lt;/p&gt;</comment>
                            <comment id="17693699" author="martijnvisser" created="Sun, 26 Feb 2023 20:09:21 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;

&lt;p&gt;Master: 78136133fbec4ca145dec66d4bc0c324c8e16d82&lt;br/&gt;
Release-1.17: 29f4181e1076712dcaeaadeaad0c1bcb2ef25b70&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1fzwo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>