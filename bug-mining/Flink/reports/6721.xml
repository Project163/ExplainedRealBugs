<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:14:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-29576] Serialized OperatorCoordinators are collected in a not thread-safe ArrayList even though serialization was parallelized in FLINK-26675</title>
                <link>https://issues.apache.org/jira/browse/FLINK-29576</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;There&apos;s a &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=41843&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=8523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build failure&lt;/a&gt; being caused by &lt;tt&gt;SourceNAryInputChainingITCase.testDirectSourcesOnlyExecution&lt;/tt&gt; on &lt;tt&gt;master&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Oct 11 01:45:36 [ERROR] Errors: 
Oct 11 01:45:36 [ERROR]   SourceNAryInputChainingITCase.testDirectSourcesOnlyExecution:89 &#187; &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Fail...
Oct 11 01:45:36 [INFO] 
Oct 11 01:45:36 [ERROR] Tests run: 1931, Failures: 0, Errors: 1, Skipped: 4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The actual cause might be a missing &lt;tt&gt;OperatorCoordinatorHolder&lt;/tt&gt; in &lt;tt&gt;DefaultOperatorCoordinatorHandler&lt;/tt&gt; (see attached Maven logs that were extracted from the linked build):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
01:44:28,248 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-5] WARN  org.apache.flink.runtime.taskmanager.Task                    [] - MultipleInputOperator [Source: source-1, Source: source-2, Source: source-3] (1/4)#0 (9babb402557eb959216c28116aabddbe_1dd2eb40b0971d6d849b9e4a69494c88_0_0) switched from RUNNING to FAILED with failure cause: org.apache.flink.util.FlinkException: No coordinator registered &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; bc764cd8ddf7a0cff126f51c16239658
        at org.apache.flink.runtime.scheduler.DefaultOperatorCoordinatorHandler.deliverOperatorEventToCoordinator(DefaultOperatorCoordinatorHandler.java:117)
        at org.apache.flink.runtime.scheduler.SchedulerBase.deliverOperatorEventToCoordinator(SchedulerBase.java:1031)
        at org.apache.flink.runtime.jobmaster.JobMaster.sendOperatorEventToCoordinator(JobMaster.java:588)
        at sun.reflect.GeneratedMethodAccessor17.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.lambda$handleRpcInvocation$1(AkkaRpcActor.java:309)
        at org.apache.flink.runtime.concurrent.akka.ClassLoadingUtils.runWithContextClassLoader(ClassLoadingUtils.java:83)
        at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcInvocation(AkkaRpcActor.java:307)
        at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcMessage(AkkaRpcActor.java:222)
        at org.apache.flink.runtime.rpc.akka.FencedAkkaRpcActor.handleRpcMessage(FencedAkkaRpcActor.java:84)
        at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleMessage(AkkaRpcActor.java:168)
        at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:24)
        at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:20)
        at scala.PartialFunction.applyOrElse(PartialFunction.scala:123)
        at scala.PartialFunction.applyOrElse$(PartialFunction.scala:122)
        at akka.japi.pf.UnitCaseStatement.applyOrElse(CaseStatements.scala:20)
        at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171)
        at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:172)
        at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:172)
        at akka.actor.Actor.aroundReceive(Actor.scala:537)
        at akka.actor.Actor.aroundReceive$(Actor.scala:535)
        at akka.actor.AbstractActor.aroundReceive(AbstractActor.scala:220)
        at akka.actor.ActorCell.receiveMessage(ActorCell.scala:580)
        at akka.actor.ActorCell.invoke(ActorCell.scala:548)
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:270)
        at akka.dispatch.Mailbox.run(Mailbox.scala:231)
        at akka.dispatch.Mailbox.exec(Mailbox.scala:243)
        at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)
        at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)
        at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)
        at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:175)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13485591">FLINK-29576</key>
            <summary>Serialized OperatorCoordinators are collected in a not thread-safe ArrayList even though serialization was parallelized in FLINK-26675</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mapohl">Matthias Pohl</assignee>
                                    <reporter username="mapohl">Matthias Pohl</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 11 Oct 2022 07:34:47 +0000</created>
                <updated>Fri, 14 Oct 2022 09:36:45 +0000</updated>
                            <resolved>Fri, 14 Oct 2022 09:36:45 +0000</resolved>
                                    <version>1.16.0</version>
                    <version>1.17.0</version>
                                    <fixVersion>1.16.0</fixVersion>
                    <fixVersion>1.17.0</fixVersion>
                                    <component>API / DataStream</component>
                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17615585" author="mapohl" created="Tue, 11 Oct 2022 08:15:36 +0000"  >&lt;p&gt;The issue is reproducible locally by running the test repeatedly until failure.&lt;/p&gt;</comment>
                            <comment id="17615590" author="mapohl" created="Tue, 11 Oct 2022 08:20:09 +0000"  >&lt;p&gt;Maybe unrelated, but one test run failed with a different stacktrace while initializing the &lt;tt&gt;JobMaster&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.NullPointerException
	at org.apache.flink.runtime.operators.coordination.OperatorCoordinatorHolder.create(OperatorCoordinatorHolder.java:488) ~[classes/:?]
	at org.apache.flink.runtime.executiongraph.ExecutionJobVertex.createOperatorCoordinatorHolder(ExecutionJobVertex.java:286) ~[classes/:?]
	at org.apache.flink.runtime.executiongraph.ExecutionJobVertex.initialize(ExecutionJobVertex.java:223) ~[classes/:?]
	at org.apache.flink.runtime.executiongraph.DefaultExecutionGraph.initializeJobVertex(DefaultExecutionGraph.java:901) ~[classes/:?]
	at org.apache.flink.runtime.executiongraph.DefaultExecutionGraph.initializeJobVertices(DefaultExecutionGraph.java:891) ~[classes/:?]
	at org.apache.flink.runtime.executiongraph.DefaultExecutionGraph.attachJobGraph(DefaultExecutionGraph.java:848) ~[classes/:?]
	at org.apache.flink.runtime.executiongraph.DefaultExecutionGraph.attachJobGraph(DefaultExecutionGraph.java:830) ~[classes/:?]
	at org.apache.flink.runtime.executiongraph.DefaultExecutionGraphBuilder.buildGraph(DefaultExecutionGraphBuilder.java:203) ~[classes/:?]
	at org.apache.flink.runtime.scheduler.DefaultExecutionGraphFactory.createAndRestoreExecutionGraph(DefaultExecutionGraphFactory.java:156) ~[classes/:?]
	at org.apache.flink.runtime.scheduler.SchedulerBase.createAndRestoreExecutionGraph(SchedulerBase.java:361) ~[classes/:?]
	at org.apache.flink.runtime.scheduler.SchedulerBase.&amp;lt;init&amp;gt;(SchedulerBase.java:206) ~[classes/:?]
	at org.apache.flink.runtime.scheduler.DefaultScheduler.&amp;lt;init&amp;gt;(DefaultScheduler.java:134) ~[classes/:?]
	at org.apache.flink.runtime.scheduler.DefaultSchedulerFactory.createInstance(DefaultSchedulerFactory.java:152) ~[classes/:?]
	at org.apache.flink.runtime.jobmaster.DefaultSlotPoolServiceSchedulerFactory.createScheduler(DefaultSlotPoolServiceSchedulerFactory.java:119) ~[classes/:?]
	at org.apache.flink.runtime.jobmaster.JobMaster.createScheduler(JobMaster.java:369) ~[classes/:?]
	at org.apache.flink.runtime.jobmaster.JobMaster.&amp;lt;init&amp;gt;(JobMaster.java:346) ~[classes/:?]
	at org.apache.flink.runtime.jobmaster.factories.DefaultJobMasterServiceFactory.internalCreateJobMasterService(DefaultJobMasterServiceFactory.java:123) ~[classes/:?]
	at org.apache.flink.runtime.jobmaster.factories.DefaultJobMasterServiceFactory.lambda$createJobMasterService$0(DefaultJobMasterServiceFactory.java:95) ~[classes/:?]
	at org.apache.flink.util.function.FunctionUtils.lambda$uncheckedSupplier$4(FunctionUtils.java:112) ~[classes/:?]
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604) ~[?:1.8.0_345]
	... 3 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17615594" author="mapohl" created="Tue, 11 Oct 2022 08:24:15 +0000"  >&lt;p&gt;I&apos;m increasing the issue&apos;s priority to CRITICAL because it seems to be coordination-related and might affect other components. I added &lt;tt&gt;1.16.0&lt;/tt&gt; because I haven&apos;t seen any evidence, yet, that this is a recently added problem.&lt;/p&gt;</comment>
                            <comment id="17615614" author="mapohl" created="Tue, 11 Oct 2022 08:55:38 +0000"  >&lt;p&gt;Adding additional log output reveals that the Operator ID in question, indeed, is not registered with the &lt;tt&gt;DefaultOperatorCoordinatorHandler&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
38013 [jobmanager-io-thread-1] DEBUG org.apache.flink.runtime.scheduler.DefaultOperatorCoordinatorHandler [] - OperatorIds &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ExecutionJobVertex[initialized=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;] MultipleInputOperator [Source: source-1, Source: source-2, Source: source-3]: [bc764cd8ddf7a0cff126f51c16239658, 605b35e407e90cda15ad084365733fdd]
38013 [jobmanager-io-thread-1] DEBUG org.apache.flink.runtime.scheduler.DefaultOperatorCoordinatorHandler [] - OperatorIds &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ExecutionJobVertex[initialized=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;] Sink: Data stream collect sink [Source: source-1, Source: source-2, Source: source-3]: [ad41044d493a326176171462a740339f]
38013 [jobmanager-io-thread-1] DEBUG org.apache.flink.runtime.scheduler.DefaultOperatorCoordinatorHandler [] - Registered Operators: [bc764cd8ddf7a0cff126f51c16239658, 605b35e407e90cda15ad084365733fdd, ad41044d493a326176171462a740339f]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;...but the run fails with not finding the &lt;tt&gt;OperatorHandler&lt;/tt&gt; for a completely different ID &lt;tt&gt;feca28aff5a3958840bee985ee7de4d3&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
38096 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-10] WARN  org.apache.flink.runtime.taskmanager.Task [] - MultipleInputOperator [Source: source-1, Source: source-2, Source: source-3] (2/4)#0 (dfa76d436eae78327927f1d9bf6db514_1dd2eb40b0971d6d849b9e4a69494c88_1_0) switched from RUNNING to FAILED with failure cause: org.apache.flink.util.FlinkException: No coordinator registered &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; feca28aff5a3958840bee985ee7de4d3
	at org.apache.flink.runtime.scheduler.DefaultOperatorCoordinatorHandler.deliverOperatorEventToCoordinator(DefaultOperatorCoordinatorHandler.java:134)
	at org.apache.flink.runtime.scheduler.SchedulerBase.deliverOperatorEventToCoordinator(SchedulerBase.java:1031)
	at org.apache.flink.runtime.jobmaster.JobMaster.sendOperatorEventToCoordinator(JobMaster.java:588)
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17615663" author="mapohl" created="Tue, 11 Oct 2022 10:28:15 +0000"  >&lt;p&gt;I finally found the cause of this issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-26675&quot; title=&quot;Parallelized heavy serialization operations in StreamingJobGraphGenerator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-26675&quot;&gt;&lt;del&gt;FLINK-26675&lt;/del&gt;&lt;/a&gt; introduces parallel serialization for the operators. These serialized operators are added to the JobVertex&apos;s operatorCoordinators which is a basic &lt;tt&gt;ArrayList&lt;/tt&gt; and, therefore, not thread-safe. Concurrently adding the serialized OperatorCoordinators might result in dropping some of them occassionally.&lt;/p&gt;

&lt;p&gt;As a consequence, I&apos;m marking this one as a blocker for 1.16.&lt;/p&gt;</comment>
                            <comment id="17615664" author="mapohl" created="Tue, 11 Oct 2022 10:32:40 +0000"  >&lt;p&gt;FYI: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guoyangze&quot; class=&quot;user-hover&quot; rel=&quot;guoyangze&quot;&gt;guoyangze&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17617601" author="mapohl" created="Fri, 14 Oct 2022 09:36:45 +0000"  >&lt;p&gt;master: dc83e69dbabdc53e89bdc787a93f1fe904211cee&lt;br/&gt;
1.16: b05fac1560add86dcb41b0b5a8297326dbc99a19&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13434046">FLINK-26675</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13050282" name="SourceNAryInputChainingITCase.testDirectSourcesOnlyExecution.log" size="118973" author="mapohl" created="Tue, 11 Oct 2022 07:45:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z198y0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>