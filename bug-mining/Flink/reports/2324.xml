<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:32:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8941] SpanningRecordSerializationTest fails on Travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8941</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/zentol/flink/jobs/353217791&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/zentol/flink/jobs/353217791&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testHandleMixedLargeRecords(org.apache.flink.runtime.io.network.api.serialization.SpanningRecordSerializationTest)  Time elapsed: 1.992 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.nio.channels.ClosedChannelException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at sun.nio.ch.FileChannelImpl.ensureOpen(FileChannelImpl.java:110)
	at sun.nio.ch.FileChannelImpl.write(FileChannelImpl.java:199)
	at org.apache.flink.runtime.io.network.api.serialization.SpillingAdaptiveSpanningRecordDeserializer$SpanningWrapper.addNextChunkFromMemorySegment(SpillingAdaptiveSpanningRecordDeserializer.java:528)
	at org.apache.flink.runtime.io.network.api.serialization.SpillingAdaptiveSpanningRecordDeserializer$SpanningWrapper.access$200(SpillingAdaptiveSpanningRecordDeserializer.java:430)
	at org.apache.flink.runtime.io.network.api.serialization.SpillingAdaptiveSpanningRecordDeserializer.setNextBuffer(SpillingAdaptiveSpanningRecordDeserializer.java:75)
	at org.apache.flink.runtime.io.network.api.serialization.SpanningRecordSerializationTest.testSerializationRoundTrip(SpanningRecordSerializationTest.java:143)
	at org.apache.flink.runtime.io.network.api.serialization.SpanningRecordSerializationTest.testSerializationRoundTrip(SpanningRecordSerializationTest.java:109)
	at org.apache.flink.runtime.io.network.api.serialization.SpanningRecordSerializationTest.testHandleMixedLargeRecords(SpanningRecordSerializationTest.java:98)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13145019">FLINK-8941</key>
            <summary>SpanningRecordSerializationTest fails on Travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="nkruber">Nico Kruber</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                            <label>test-stability</label>
                    </labels>
                <created>Wed, 14 Mar 2018 12:54:40 +0000</created>
                <updated>Wed, 4 Jul 2018 15:32:12 +0000</updated>
                            <resolved>Wed, 4 Jul 2018 15:32:12 +0000</resolved>
                                    <version>1.5.0</version>
                                                    <component>Runtime / Network</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16401936" author="githubbot" created="Fri, 16 Mar 2018 13:54:41 +0000"  >&lt;p&gt;GitHub user NicoK opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5709&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5709&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8941&quot; title=&quot;SpanningRecordSerializationTest fails on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8941&quot;&gt;&lt;del&gt;FLINK-8941&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;network&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;serializer&amp;#93;&lt;/span&gt; improve SpanningRecordSerializationTest and ensure unique spilling files&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This PR contains two commits trying to tackle &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8941&quot; title=&quot;SpanningRecordSerializationTest fails on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8941&quot;&gt;&lt;del&gt;FLINK-8941&lt;/del&gt;&lt;/a&gt; (which I could not reproduce).&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;let `SpanningRecordSerializationTest` extend from `TestLogger`&lt;/li&gt;
	&lt;li&gt;use a `TemporaryFolder` in `SpanningRecordSerializationTest` for spilling files&lt;/li&gt;
	&lt;li&gt;make sure `SpillingAdaptiveSpanningRecordDeserializer` does not work on an existing file, e.g. from another instance running on the same machine - allow 10 retries with 20 random bytes file names and fail otherwise&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This change is already covered by existing tests, such as `SpanningRecordSerializationTest`.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The serializers: *&lt;b&gt;yes&lt;/b&gt;* (well, partly - the code around the actual serializers)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? *&lt;b&gt;not applicable&lt;/b&gt;*&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/NicoK/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/NicoK/flink&lt;/a&gt; flink-8941&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5709.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5709.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5709&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5086956c743273dc4cd379fc6a6ee97da5c20258&lt;br/&gt;
Author: Nico Kruber &amp;lt;nico@...&amp;gt;&lt;br/&gt;
Date:   2018-03-16T10:43:43Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8941&quot; title=&quot;SpanningRecordSerializationTest fails on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8941&quot;&gt;&lt;del&gt;FLINK-8941&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; use TestLogger and TemporaryFolder in SpanningRecordSerializationTest&lt;/p&gt;

&lt;p&gt;commit c9ba08b1c92c2510676c3cd3116410c7a379d072&lt;br/&gt;
Author: Nico Kruber &amp;lt;nico@...&amp;gt;&lt;br/&gt;
Date:   2018-03-16T10:51:29Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8941&quot; title=&quot;SpanningRecordSerializationTest fails on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8941&quot;&gt;&lt;del&gt;FLINK-8941&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;serialization&amp;#93;&lt;/span&gt; make sure we use unique spilling files&lt;/p&gt;

&lt;p&gt;    Although the spilling files were chosen with random names of 20 bytes, it could&lt;br/&gt;
    rarely happen that these collide. In that case, have another try (at most 10) at&lt;br/&gt;
    selecting a unique file name.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16406380" author="githubbot" created="Tue, 20 Mar 2018 14:06:30 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5709&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5709&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I agree with @pnowojski. To me it seems quite unlikely that `randomString` will generate collisions and, thus, this commit, should actually not fix the reported problem. I would be in favor of closing this PR and only commit 5086956 as a hotfix.&lt;/p&gt;</comment>
                            <comment id="16413569" author="githubbot" created="Mon, 26 Mar 2018 08:38:05 +0000"  >&lt;p&gt;Github user NicoK commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5709&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5709&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;d actually like to keep this collision detection since it does not hurt although it may not fix the problem. Both commits are actually somewhat shots in the dark trying to tackle the original problem which I could not really explain otherwise.&lt;/p&gt;</comment>
                            <comment id="16415688" author="githubbot" created="Tue, 27 Mar 2018 14:15:35 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5709&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5709&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Alright. Thanks for your contribution @NicoK and the review @pnowojski. Merging this PR.&lt;/p&gt;</comment>
                            <comment id="16416868" author="githubbot" created="Wed, 28 Mar 2018 06:13:23 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5709&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5709&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16416872" author="till.rohrmann" created="Wed, 28 Mar 2018 06:14:17 +0000"  >&lt;p&gt;Fixed via&lt;br/&gt;
master:&lt;br/&gt;
39be1996e461bbeec148bf34a2f92cedeccf59ab&lt;br/&gt;
a148492e142c7f62cbd890f299c2ee2a0b2761cc&lt;/p&gt;

&lt;p&gt;1.5.0:&lt;br/&gt;
7a060d4191729b2c6cd1d0c8ba6044d22618b349&lt;br/&gt;
1bb9567f8ce53a7c4e03a2abc74989da7f1490bf&lt;/p&gt;</comment>
                            <comment id="16493374" author="till.rohrmann" created="Tue, 29 May 2018 11:09:31 +0000"  >&lt;p&gt;Encountered another instance of the problem: &lt;a href=&quot;https://api.travis-ci.org/v3/job/385097114/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/385097114/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16501739" author="nicok" created="Tue, 5 Jun 2018 13:09:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt;, the log you linked to actually contains a successful build (now).&lt;/p&gt;</comment>
                            <comment id="16501897" author="till.rohrmann" created="Tue, 5 Jun 2018 14:49:59 +0000"  >&lt;p&gt;Sorry, I think I restarted the build and then Travis overwrote the logs. Let&apos;s close the issue until we see it again.&lt;/p&gt;</comment>
                            <comment id="16501898" author="till.rohrmann" created="Tue, 5 Jun 2018 14:50:36 +0000"  >&lt;p&gt;Accidentally triggered a restart of the Travis build which overwrote the logs.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ra8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>