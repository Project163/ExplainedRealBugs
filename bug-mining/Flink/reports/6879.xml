<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:16:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-29038] AsyncWaitOperatorTest.testProcessingTimeRepeatedCompleteOrderedWithRetry failed with AssertionError</title>
                <link>https://issues.apache.org/jira/browse/FLINK-29038</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2022-08-18T15:58:28.8029934Z Aug 18 15:58:28 [INFO] Results:
2022-08-18T15:58:28.8030287Z Aug 18 15:58:28 [INFO] 
2022-08-18T15:58:28.8030644Z Aug 18 15:58:28 [ERROR] Failures: 
2022-08-18T15:58:28.8032800Z Aug 18 15:58:28 [ERROR]   AsyncWaitOperatorTest.testProcessingTimeRepeatedCompleteOrderedWithRetry:1203-&amp;gt;testProcessingTimeWithRetry:1253 ORDERED Output was not correct.: array lengths differed, expected.length=3 actual.length=2; arrays first differed at element [2]; expected:&amp;lt;Record @ 6 : 12&amp;gt; but was:&amp;lt;end of array&amp;gt;
2022-08-18T15:58:28.8033826Z Aug 18 15:58:28 [INFO] 
2022-08-18T15:58:28.8034265Z Aug 18 15:58:28 [ERROR] Tests run: 2061, Failures: 1, Errors: 0, Skipped: 28
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=40164&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=24c3384f-1bcb-57b3-224f-51bf973bbee8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=40164&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=24c3384f-1bcb-57b3-224f-51bf973bbee8&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13477515">FLINK-29038</key>
            <summary>AsyncWaitOperatorTest.testProcessingTimeRepeatedCompleteOrderedWithRetry failed with AssertionError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lincoln.86xy">lincoln lee</assignee>
                                    <reporter username="hxbks2ks">Huang Xingbo</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Fri, 19 Aug 2022 02:15:02 +0000</created>
                <updated>Mon, 6 Feb 2023 03:43:23 +0000</updated>
                            <resolved>Mon, 6 Feb 2023 03:43:23 +0000</resolved>
                                    <version>1.16.0</version>
                    <version>1.17.0</version>
                                    <fixVersion>1.17.0</fixVersion>
                    <fixVersion>1.16.2</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17581602" author="hxbks2ks" created="Fri, 19 Aug 2022 02:24:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lincoln.86xy&quot; class=&quot;user-hover&quot; rel=&quot;lincoln.86xy&quot;&gt;lincoln.86xy&lt;/a&gt; Could you help take a look? Thx.&lt;/p&gt;</comment>
                            <comment id="17581610" author="lincoln.86xy" created="Fri, 19 Aug 2022 02:37:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hxbks2ks&quot; class=&quot;user-hover&quot; rel=&quot;hxbks2ks&quot;&gt;hxbks2ks&lt;/a&gt; sure, I&apos;ll lookup into this.&lt;/p&gt;</comment>
                            <comment id="17582716" author="lincoln.86xy" created="Mon, 22 Aug 2022 03:35:34 +0000"  >&lt;p&gt;The failure record is the last input record of test data, it doesn&apos;t hit retry condition and was expected as a normal process and directly outputs &apos;12,6&apos;, can&apos;t find the reason the record lost after `StreamTaskMailboxTestHarness#processAll` (no close operation before getOutput) so far, I will continue to track this problem and try to find someone that familiar with the harness test to help lookup at this.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17597081" author="lincoln.86xy" created="Mon, 29 Aug 2022 09:43:29 +0000"  >&lt;p&gt;This failure most probably cause by slow execution of internal execution service used by the test async function. We will improve the execution deadline from 1s to 10s so as to reduce the failure possiblilty(In most cases, it will only take less than 1s).&#160; Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt; for helping investigating this!&lt;/p&gt;</comment>
                            <comment id="17597485" author="hxb" created="Tue, 30 Aug 2022 02:47:16 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lincoln.86xy&quot; class=&quot;user-hover&quot; rel=&quot;lincoln.86xy&quot;&gt;lincoln.86xy&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt; for the fix.&lt;/p&gt;</comment>
                            <comment id="17597486" author="hxb" created="Tue, 30 Aug 2022 02:48:20 +0000"  >&lt;p&gt;Merged into master via a1d74c131b0fd10f34436463077fd5c7a7984a2b&lt;/p&gt;</comment>
                            <comment id="17683279" author="mapohl" created="Thu, 2 Feb 2023 08:55:42 +0000"  >&lt;p&gt;I&apos;m reopening this issue since it appeared again in a 1.17 build.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=45586&amp;amp;view=logs&amp;amp;j=0e7be18f-84f2-53f0-a32d-4a5e4a174679&amp;amp;t=7c1d86e3-35bd-5fd5-3b7c-30c126a78702&amp;amp;l=9203&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=45586&amp;amp;view=logs&amp;amp;j=0e7be18f-84f2-53f0-a32d-4a5e4a174679&amp;amp;t=7c1d86e3-35bd-5fd5-3b7c-30c126a78702&amp;amp;l=9203&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lincoln.86xy&quot; class=&quot;user-hover&quot; rel=&quot;lincoln.86xy&quot;&gt;lincoln.86xy&lt;/a&gt; or does it deserve a new ticket?&lt;/p&gt;</comment>
                            <comment id="17683379" author="lincoln.86xy" created="Thu, 2 Feb 2023 12:20:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; Looks like the timeout is still occurring under the current test machine load after the time was previously turned up. Let&apos;s watch for a while, and if the failure of this case continues to occur I&apos;ll turn up the timeout again, WDYT?&lt;/p&gt;</comment>
                            <comment id="17683732" author="mapohl" created="Fri, 3 Feb 2023 08:11:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lincoln.86xy&quot; class=&quot;user-hover&quot; rel=&quot;lincoln.86xy&quot;&gt;lincoln.86xy&lt;/a&gt;: I didn&apos;t check the fix earlier. I did a pass over it now: The test class itself doesn&apos;t follow Flink&apos;s coding guidelines in terms of timeouts which leaves it vulnerable to test instabilities. We agreed on not using timeouts in tests and let the be shutdown by the test watchdog process which will print a thread dump at the end (see &lt;a href=&quot;https://flink.apache.org/contributing/code-style-and-quality-common.html#avoid-timeouts-in-junit-tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;coding guidelines&lt;/a&gt;). If we really have an issue with tests running into timeouts, printing the thread dump in the end might help investigating the issue in comparison to letting the test fail early. I feel like using the 10s deadline in &lt;a href=&quot;https://github.com/apache/flink/blob/a1d74c131b0fd10f34436463077fd5c7a7984a2b/flink-streaming-java/src/test/java/org/apache/flink/streaming/api/operators/async/AsyncWaitOperatorTest.java#L1242&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AsyncWaitOperatorTest:1242&lt;/a&gt; is not necessary. The same applies to other tests in this class where we use timeouts.&lt;/p&gt;</comment>
                            <comment id="17683769" author="lincoln.86xy" created="Fri, 3 Feb 2023 09:15:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; thanks for pointing out the testing guideline violation, agree with you not using local timeout and let the test watchdog process the timeout can be better. I&apos;ve submitted a fix for this.&lt;/p&gt;</comment>
                            <comment id="17683873" author="lincoln.86xy" created="Fri, 3 Feb 2023 13:12:42 +0000"  >&lt;p&gt;fixed in master: b138c82a464d825ec51587e57f136f91128d6bba&lt;/p&gt;</comment>
                            <comment id="17684408" author="lincoln.86xy" created="Mon, 6 Feb 2023 03:43:23 +0000"  >&lt;p&gt;fixed in 1.16: db524dfb46673bc98d4cf93b9e84ed9a4b76d837&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13448060">FLINK-27878</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z17vk8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>