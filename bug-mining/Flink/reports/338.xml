<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1660] MultiTriggerPolicyTest timeout during test</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1660</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Running tests through Maven locally, I encountered a timeout in &lt;/p&gt;

&lt;p&gt;MultiTriggerPolicyTest#testActiveTriggerRunnables&lt;/p&gt;

&lt;p&gt;saying that it timed out after 10s.&lt;/p&gt;

&lt;p&gt;I&apos;ve looked into the code and saw that it is almost totally unrelated to the runtime. I therefore suspect that it was due to a system hickup. Could someone please confirm this and maybe increase the timeout?&lt;/p&gt;

&lt;p&gt;In general, we should consider setting these timeouts rather high (due to Travis etc.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12780442">FLINK-1660</key>
            <summary>MultiTriggerPolicyTest timeout during test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uce">Ufuk Celebi</assignee>
                                    <reporter username="uce">Ufuk Celebi</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Mar 2015 09:46:21 +0000</created>
                <updated>Thu, 28 Feb 2019 11:15:53 +0000</updated>
                            <resolved>Tue, 14 Apr 2015 13:06:16 +0000</resolved>
                                                    <fixVersion>0.9</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14352772" author="powibol" created="Mon, 9 Mar 2015 10:40:41 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Just a few words about what this test does:&lt;br/&gt;
This test verifies, whether separated threads start up correctly or not. In case time-based window discretisation is used, we use separated threads to cause the emission of results for windows, even if no data-item arrives within the duration of a window. The test expects three such threads to start up and to confirm their startup thew a callback method. If they don&apos;t reply within 10 sec. the test fails.&lt;/p&gt;

&lt;p&gt;Increasing the timeout might be indeed a good and simple solution. The question is whether it solves the problem or not. An alternative would be to remove the timeout, but then the test possibly runs infinitely instead of failing after a while.&lt;/p&gt;

&lt;p&gt;As I cannot reproduce the problem you described (because in my case the test succeeds), can you be so kind and just increase the value for the timeout in code line 142 of MultiTriggerPolicyTest and test whether it solves the problem or not?&lt;/p&gt;</comment>
                            <comment id="14352821" author="uce" created="Mon, 9 Mar 2015 11:15:11 +0000"  >&lt;p&gt;It is not reproducible by just running it. It only occurred once during a local Maven verify run. This is exactly the thing with the timeouts: its mostly fine, except for cases when it is not. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; In this case, it was most likely due to the high load on my system (mutliple JVM forks running the tests etc.) and not an actual problem. The timings are just different depending on the load of the system and 10s might not be enough.&lt;/p&gt;

&lt;p&gt;If it ever really gets stuck it&apos;s easy to debug locally (jps and jstack) and also on Travis, which does this for stalled builds.&lt;/p&gt;</comment>
                            <comment id="14354535" author="powibol" created="Tue, 10 Mar 2015 08:29:38 +0000"  >&lt;p&gt;I made a commit increasing the timeout to two minutes. I added a constant to keep the value for the timeout and added a commented out line which would sets this constant to MAX_VALUE. This makes it easy to set a maximum timeout in case one uses a system where even two minutes are insufficient to start three threads (Hope that this will not happen &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ). I&apos;ll ask Gyula to push it to the master.&lt;/p&gt;</comment>
                            <comment id="14378025" author="uce" created="Tue, 24 Mar 2015 15:30:36 +0000"  >&lt;p&gt;This just occurred again during my local run. I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ktzoumas&quot; class=&quot;user-hover&quot; rel=&quot;ktzoumas&quot;&gt;ktzoumas&lt;/a&gt; ran into it as well last week.&lt;/p&gt;</comment>
                            <comment id="14490856" author="uce" created="Sat, 11 Apr 2015 07:57:50 +0000"  >&lt;p&gt;Occurred again &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/57951323/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/57951323/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14490881" author="uce" created="Sat, 11 Apr 2015 09:17:16 +0000"  >&lt;p&gt;Seems to be a thread-safety issue.&lt;/p&gt;

&lt;p&gt;Each thread running ActiveTriggerWithRunnable calls the MyCallbackClass callback, which adds an element to the linked list of received elements. This list is not thread-safe. That&apos;s why the main thread running the test method sometimes waits indefinitely to receive all elements.&lt;/p&gt;

&lt;p&gt;PS: This is an issue of the test not the tested component from what I&apos;ve seen. I&apos;ll change this and push the fix.&lt;/p&gt;</comment>
                            <comment id="14492239" author="githubbot" created="Mon, 13 Apr 2015 10:21:03 +0000"  >&lt;p&gt;GitHub user uce opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/590&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1660&quot; title=&quot;MultiTriggerPolicyTest timeout during test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1660&quot;&gt;&lt;del&gt;FLINK-1660&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;streaming&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Fix MultiTriggerPolicyTest race&lt;/p&gt;

&lt;p&gt;    Waiting for Travis and a short look over this won&apos;t hurt. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/uce/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/uce/incubator-flink&lt;/a&gt; trigger-1660&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/590.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/590.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #590&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d1cb1cbb4d28ace1232d32b3c3a79e13cc3477b8&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-04-13T10:16:16Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1660&quot; title=&quot;MultiTriggerPolicyTest timeout during test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1660&quot;&gt;&lt;del&gt;FLINK-1660&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;streaming&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Fix MultiTriggerPolicyTest race&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14492257" author="githubbot" created="Mon, 13 Apr 2015 10:39:41 +0000"  >&lt;p&gt;Github user gyfora commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/590#issuecomment-92303923&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/590#issuecomment-92303923&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks fine to me :+1: &lt;/p&gt;

&lt;p&gt;    (But it seems to fail on some stupid guava dependency issue)&lt;/p&gt;</comment>
                            <comment id="14492273" author="githubbot" created="Mon, 13 Apr 2015 11:04:12 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/590#issuecomment-92312643&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/590#issuecomment-92312643&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    OK, Guava dependency was missing. Strange thing is that it compiled locally. I&apos;ve added the dependency, should be fine now.&lt;/p&gt;</comment>
                            <comment id="14492439" author="githubbot" created="Mon, 13 Apr 2015 14:15:23 +0000"  >&lt;p&gt;Github user mbalassi commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/590#issuecomment-92370280&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/590#issuecomment-92370280&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    All is well, merging.&lt;/p&gt;</comment>
                            <comment id="14493713" author="powibol" created="Tue, 14 Apr 2015 07:20:08 +0000"  >&lt;p&gt;First, sorry for not replying so far! I had a lot of work with my Thesis which I presented yesterday.&lt;/p&gt;

&lt;p&gt;Thank you very much for fixing this issue!&lt;/p&gt;</comment>
                            <comment id="14494075" author="githubbot" created="Tue, 14 Apr 2015 13:02:30 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/590&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14494079" author="mbalassi" created="Tue, 14 Apr 2015 13:06:16 +0000"  >&lt;p&gt;Fixed via  e5a3b95&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12820012">FLINK-1859</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26idz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>