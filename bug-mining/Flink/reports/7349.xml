<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:19:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-20672] notifyCheckpointAborted RPC failure can fail JM</title>
                <link>https://issues.apache.org/jira/browse/FLINK-20672</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8871&quot; title=&quot;Checkpoint cancellation is not propagated to stop checkpointing threads on the task manager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8871&quot;&gt;&lt;del&gt;FLINK-8871&lt;/del&gt;&lt;/a&gt;, aborted RPC notifications are done asynchonously:&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void sendAbortedMessages(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; checkpointId, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; timeStamp) {
		&lt;span class=&quot;code-comment&quot;&gt;// send notification of aborted checkpoints asynchronously.
&lt;/span&gt;		executor.execute(() -&amp;gt; {
			&lt;span class=&quot;code-comment&quot;&gt;// send the &lt;span class=&quot;code-quote&quot;&gt;&quot;abort checkpoint&quot;&lt;/span&gt; messages to necessary vertices.
&lt;/span&gt;                        &lt;span class=&quot;code-comment&quot;&gt;// ..
&lt;/span&gt;		});
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, the executor that eventually executes this request is created as follows&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ScheduledExecutorService futureExecutor = Executors.newScheduledThreadPool(
				Hardware.getNumberCPUCores(),
				&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ExecutorThreadFactory(&lt;span class=&quot;code-quote&quot;&gt;&quot;jobmanager-&lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ExecutorThreadFactory uses UncaughtExceptionHandler that exits JVM on error.&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13346749">FLINK-20672</key>
            <summary>notifyCheckpointAborted RPC failure can fail JM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10200" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Not a Priority</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="zakelly">Zakelly Lan</assignee>
                                    <reporter username="roman">Roman Khachatryan</reporter>
                        <labels>
                            <label>auto-deprioritized-major</label>
                            <label>auto-deprioritized-minor</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 18 Dec 2020 09:21:04 +0000</created>
                <updated>Fri, 19 Jan 2024 06:06:19 +0000</updated>
                                            <version>1.11.3</version>
                    <version>1.12.0</version>
                                                    <component>Runtime / Checkpointing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17251633" author="yunta" created="Fri, 18 Dec 2020 09:48:53 +0000"  >&lt;p&gt;Is this also true for notification checkpoint completed?&lt;/p&gt;</comment>
                            <comment id="17251661" author="roman_khachatryan" created="Fri, 18 Dec 2020 10:18:12 +0000"  >&lt;p&gt;No, checkpoint completed notifications are sent synchronously.&lt;/p&gt;</comment>
                            <comment id="17251694" author="yunta" created="Fri, 18 Dec 2020 10:45:43 +0000"  >&lt;p&gt;I think you&apos;re right and this might happen in extra case. I think the solution might be catching any exception when sending these abort messages just like current disposing/discarding checkpoint in the executor.&lt;/p&gt;</comment>
                            <comment id="17251928" author="roman_khachatryan" created="Fri, 18 Dec 2020 18:23:53 +0000"  >&lt;p&gt;Thanks for the confirmation &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17349546" author="flink-jira-bot" created="Fri, 21 May 2021 22:52:14 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issues has been marked as Major but is unassigned and neither itself nor its Sub-Tasks have been updated for 30 days. I have gone ahead and added a &quot;stale-major&quot; to the issue&quot;. If this ticket is a Major, please either assign yourself or give an update. Afterwards, please remove the label or in 7 days the issue will be deprioritized.&lt;/p&gt;</comment>
                            <comment id="17353873" author="flink-jira-bot" created="Sat, 29 May 2021 23:09:39 +0000"  >&lt;p&gt;This issue was labeled &quot;stale-major&quot; 7 ago and has not received any updates so it is being deprioritized. If this ticket is actually Major, please raise the priority and ask a committer to assign you the issue or revive the public discussion.&lt;/p&gt;</comment>
                            <comment id="17449803" author="flink-jira-bot" created="Sat, 27 Nov 2021 10:39:04 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issues has been marked as Minor but is unassigned and neither itself nor its Sub-Tasks have been updated for 180 days. I have gone ahead and marked it &quot;stale-minor&quot;. If this ticket is still Minor, please either assign yourself or give an update. Afterwards, please remove the label or in 7 days the issue will be deprioritized.&lt;/p&gt;</comment>
                            <comment id="17453563" author="flink-jira-bot" created="Sun, 5 Dec 2021 10:38:55 +0000"  >&lt;p&gt;This issue was labeled &quot;stale-minor&quot; 7 days ago and has not received any updates so it is being deprioritized. If this ticket is actually Minor, please raise the priority and ask a committer to assign you the issue or revive the public discussion.&lt;/p&gt;</comment>
                            <comment id="17783111" author="zakelly" created="Mon, 6 Nov 2023 07:03:35 +0000"  >&lt;p&gt;I would like to fix this if no one takes.&lt;/p&gt;</comment>
                            <comment id="17783868" author="yunta" created="Wed, 8 Nov 2023 03:00:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Zakelly&quot; class=&quot;user-hover&quot; rel=&quot;zakelly&quot;&gt;Zakelly&lt;/a&gt; Thanks for picking up the stale tickets. However, I think this is not true after &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-23654&quot; title=&quot;Allow configurable number of jobmanager-future threads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-23654&quot;&gt;&lt;del&gt;FLINK-23654&lt;/del&gt;&lt;/a&gt; is resolved.&lt;/p&gt;</comment>
                            <comment id="17783892" author="zakelly" created="Wed, 8 Nov 2023 06:21:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt; I&apos;m afraid this is still valid since the io executors are using the&#160;&lt;br/&gt;
FatalExitExceptionHandler (see &lt;a href=&quot;https://github.com/apache/flink/pull/16946/files#diff-2d970a09502b5a55d74c67dabafa932a18848d4a600b9b33f4afb584328dc0f0R178&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;initialization code&lt;/a&gt;). I did an experiment by throwing an RuntimeException within the abort message sending lambda:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// send notification of aborted checkpoints asynchronously.
&lt;/span&gt;        executor.execute(
                () -&amp;gt; {
                    &lt;span class=&quot;code-comment&quot;&gt;// send the &lt;span class=&quot;code-quote&quot;&gt;&quot;abort checkpoint&quot;&lt;/span&gt; messages to necessary vertices.
&lt;/span&gt;                    &lt;span class=&quot;code-comment&quot;&gt;// ...
&lt;/span&gt;                    LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Simulate something wrong.&quot;&lt;/span&gt;);
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;something wrong&quot;&lt;/span&gt;);
                });

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And when a checkpoint expired it turns out the JM exits with this log:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.flink.runtime.checkpoint.CheckpointException: Checkpoint expired before completing.
	at org.apache.flink.runtime.checkpoint.CheckpointCoordinator$CheckpointCanceller.run(CheckpointCoordinator.java:2323) [flink-dist-1.19-SNAPSHOT.jar:1.19-SNAPSHOT]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_372]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_372]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_372]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [?:1.8.0_372]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_372]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_372]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:750) [?:1.8.0_372]
2023-11-08 13:58:13,693 INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Simulate something wrong.
2023-11-08 13:58:13,694 ERROR org.apache.flink.util.FatalExitExceptionHandler              [] - FATAL: &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;jobmanager-io-thread-1&apos;&lt;/span&gt; produced an uncaught exception. Stopping the process...
java.lang.RuntimeException: something wrong
	at org.apache.flink.runtime.checkpoint.CheckpointCoordinator.lambda$sendAbortedMessages$12(CheckpointCoordinator.java:1605) ~[flink-dist-1.19-SNAPSHOT.jar:1.19-SNAPSHOT]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_372]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_372]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:750) [?:1.8.0_372]
2023-11-08 13:58:13,722 ERROR org.apache.flink.util.FatalExitExceptionHandler

(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; dump omitted)

2023-11-08 13:58:13,724 INFO  org.apache.flink.runtime.entrypoint.ClusterEntrypoint        [] - Shutting YarnJobClusterEntrypoint down with application status UNKNOWN. Diagnostics Cluster entrypoint has been closed externally..
2023-11-08 13:58:13,725 INFO  org.apache.flink.runtime.blob.BlobServer                     [] - Stopped BLOB server at 0.0.0.0:38077
2023-11-08 13:58:13,727 INFO  org.apache.flink.runtime.jobmaster.MiniDispatcherRestEndpoint [] - Shutting down &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; endpoint.
2023-11-08 13:58:13,736 INFO  org.apache.flink.runtime.jobmaster.MiniDispatcherRestEndpoint [] - Removing cache directory /tmp/flink-web-318212a0-3faa-4fe8-92df-ed445943d4e0/flink-web-ui
2023-11-08 13:58:13,736 INFO  org.apache.flink.runtime.jobmaster.MiniDispatcherRestEndpoint [] - http:&lt;span class=&quot;code-comment&quot;&gt;//10.0.3.79:38897 lost leadership
&lt;/span&gt;2023-11-08 13:58:13,736 INFO  org.apache.flink.runtime.jobmaster.MiniDispatcherRestEndpoint [] - Shut down complete.
2023-11-08 13:58:13,736 INFO  org.apache.flink.runtime.entrypoint.component.DispatcherResourceManagerComponent [] - Closing components.
2023-11-08 13:58:13,737 INFO  org.apache.flink.runtime.dispatcher.runner.JobDispatcherLeaderProcess [] - Stopping JobDispatcherLeaderProcess.
2023-11-08 13:58:13,737 INFO  org.apache.flink.runtime.resourcemanager.ResourceManagerServiceImpl [] - Stopping resource manager service.
2023-11-08 13:58:13,739 INFO  org.apache.flink.runtime.dispatcher.MiniDispatcher           [] - Stopping dispatcher pekko.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@xxxxxxxxxx:44267/user/rpc/dispatcher_0.
&lt;/span&gt;2023-11-08 13:58:13,739 INFO  org.apache.flink.runtime.dispatcher.MiniDispatcher           [] - Stopping all currently running jobs of dispatcher pekko.tcp:&lt;span class=&quot;code-comment&quot;&gt;//xxxxxxxxxx:44267/user/rpc/dispatcher_0.
&lt;/span&gt;2023-11-08 13:58:13,743 INFO  org.apache.flink.runtime.jobmaster.JobMaster                 [] - Stopping the JobMaster &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job &lt;span class=&quot;code-quote&quot;&gt;&apos;testing6&apos;&lt;/span&gt; (bf8a2c9a2628fedd369e1c50451f66ea).
2023-11-08 13:58:13,744 INFO  org.apache.flink.runtime.dispatcher.MiniDispatcher           [] - Job bf8a2c9a2628fedd369e1c50451f66ea reached terminal state SUSPENDED.
2023-11-08 13:58:13,745 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph       [] - Job testing6 (bf8a2c9a2628fedd369e1c50451f66ea) switched from state RUNNING to SUSPENDED.
org.apache.flink.util.FlinkException: Scheduler is being stopped.
	at org.apache.flink.runtime.scheduler.SchedulerBase.closeAsync(SchedulerBase.java:656) ~[flink-dist-1.19-SNAPSHOT.jar:1.19-SNAPSHOT]
	at org.apache.flink.runtime.jobmaster.JobMaster.stopScheduling(JobMaster.java:1082) ~[flink-dist-1.19-SNAPSHOT.jar:1.19-SNAPSHOT]
	at org.apache.flink.runtime.jobmaster.JobMaster.stopJobExecution(JobMaster.java:1045) ~[flink-dist-1.19-SNAPSHOT.jar:1.19-SNAPSHOT]
	at org.apache.flink.runtime.jobmaster.JobMaster.onStop(JobMaster.java:451) ~[flink-dist-1.19-SNAPSHOT.jar:1.19-SNAPSHOT]
	at org.apache.flink.runtime.rpc.RpcEndpoint.internalCallOnStop(RpcEndpoint.java:239) ~[flink-dist-1.19-SNAPSHOT.jar:1.19-SNAPSHOT]
	at org.apache.flink.runtime.rpc.pekko.PekkoRpcActor$StartedState.lambda$terminate$0(PekkoRpcActor.java:574) ~[flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.flink.runtime.concurrent.ClassLoadingUtils.runWithContextClassLoader(ClassLoadingUtils.java:83) ~[flink-dist-1.19-SNAPSHOT.jar:1.19-SNAPSHOT]
	at org.apache.flink.runtime.rpc.pekko.PekkoRpcActor$StartedState.terminate(PekkoRpcActor.java:573) ~[flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.flink.runtime.rpc.pekko.PekkoRpcActor.handleControlMessage(PekkoRpcActor.java:196) ~[flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.pekko.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:33) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.pekko.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:29) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at scala.PartialFunction.applyOrElse(PartialFunction.scala:127) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at scala.PartialFunction.applyOrElse$(PartialFunction.scala:126) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.pekko.japi.pf.UnitCaseStatement.applyOrElse(CaseStatements.scala:29) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:175) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:176) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.pekko.actor.Actor.aroundReceive(Actor.scala:547) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.pekko.actor.Actor.aroundReceive$(Actor.scala:545) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.pekko.actor.AbstractActor.aroundReceive(AbstractActor.scala:229) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.pekko.actor.ActorCell.receiveMessage(ActorCell.scala:590) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.pekko.actor.ActorCell.invoke(ActorCell.scala:557) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.pekko.dispatch.Mailbox.processMailbox(Mailbox.scala:280) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.pekko.dispatch.Mailbox.run(Mailbox.scala:241) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at org.apache.pekko.dispatch.Mailbox.exec(Mailbox.scala:253) [flink-rpc-akka0bb3ee80-884c-4212-8125-e26007032634.jar:1.19-SNAPSHOT]
	at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289) [?:1.8.0_372]
	at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056) [?:1.8.0_372]
	at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692) [?:1.8.0_372]
	at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:175) [?:1.8.0_372]

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="17784035" author="yunta" created="Wed, 8 Nov 2023 12:49:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Zakelly&quot; class=&quot;user-hover&quot; rel=&quot;zakelly&quot;&gt;Zakelly&lt;/a&gt; Thanks for the information. If so, I have another question: do we really need the &lt;tt&gt;io-executor&lt;/tt&gt; to work with &lt;tt&gt;FatalExitExceptionHandler&lt;/tt&gt;? From my point of view, if we do not delete the Savepoint correctly (as this is also executed on the &lt;tt&gt;io-executor&lt;/tt&gt;), shall we need to fail the whole JobManager?&lt;/p&gt;

&lt;p&gt;If the correct behavior of the exception handler of &lt;tt&gt;io-executor&lt;/tt&gt; is not fatal exiting, I think we shall correct that behavior first.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Zakelly&quot; class=&quot;user-hover&quot; rel=&quot;zakelly&quot;&gt;Zakelly&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roman&quot; class=&quot;user-hover&quot; rel=&quot;roman&quot;&gt;roman&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srichter&quot; class=&quot;user-hover&quot; rel=&quot;srichter&quot;&gt;srichter&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="17784274" author="zakelly" created="Thu, 9 Nov 2023 04:44:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt; A fatal exit for uncaught exception is a relatively &quot;safe&quot; option, since the executor service may not know what to do when encountering errors. If we could strictly limit its use and stipulate that it should not affect the job junning, we could use another handler without failing the process.&lt;/p&gt;

&lt;p&gt;After reading some code, IIUC, the&#160;&lt;tt&gt;&lt;a href=&quot;https://github.com/apache/flink/blob/eb4ae5d4e7d517300e98e632de95249dbdd22192/flink-runtime/src/main/java/org/apache/flink/runtime/dispatcher/JobMasterServiceLeadershipRunnerFactory.java#L101C1-L101C1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;DefaultJobMasterServiceFactory&lt;/a&gt;&lt;/tt&gt; is using the io-executor to &lt;tt&gt;&lt;a href=&quot;https://github.com/apache/flink/blob/eb4ae5d4e7d517300e98e632de95249dbdd22192/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/factories/DefaultJobMasterServiceFactory.java#L101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;createJobMasterService&lt;/a&gt;&lt;/tt&gt;, which is essential for job running. And it leave all exceptions uncaught, which should be also changed if we decide to change the behavior of io executor.&lt;/p&gt;

&lt;p&gt;Actually I have no preference changing this behavior or not, since maybe some &quot;io&quot; operations are fatal and most are not. This is a matter of regulations and contracts. I suggest we could do our best to catch the exception within a runnable task if we are sure this one should not have any side effects on the job. WDYT?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13393785">FLINK-23654</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ln00:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>