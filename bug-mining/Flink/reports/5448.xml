<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:57:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-18934] Idle stream does not advance watermark in connected stream</title>
                <link>https://issues.apache.org/jira/browse/FLINK-18934</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Per Flink documents, when a stream is idle, it will allow watermarks of downstream operator to advance. However, when I connect an active data stream with an idle data stream, the output watermark of the CoProcessOperator does not increase.&lt;/p&gt;

&lt;p&gt;Here&apos;s a small test that reproduces the problem.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/kien-truong/flink-idleness-testing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kien-truong/flink-idleness-testing&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13322476">FLINK-18934</key>
            <summary>Idle stream does not advance watermark in connected stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dwysakowicz">Dawid Wysakowicz</assignee>
                                    <reporter username="kien_truong">Truong Duc Kien</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>stale-assigned</label>
                    </labels>
                <created>Thu, 13 Aug 2020 07:30:09 +0000</created>
                <updated>Mon, 11 Oct 2021 08:58:42 +0000</updated>
                            <resolved>Fri, 8 Oct 2021 15:15:46 +0000</resolved>
                                    <version>1.11.0</version>
                    <version>1.12.0</version>
                    <version>1.13.0</version>
                                    <fixVersion>1.14.0</fixVersion>
                                    <component>API / DataStream</component>
                    <component>Runtime / Task</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>19</watches>
                                                                                                                <comments>
                            <comment id="17177070" author="kkrugler" created="Thu, 13 Aug 2020 14:45:24 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kien_truong&quot; class=&quot;user-hover&quot; rel=&quot;kien_truong&quot;&gt;kien_truong&lt;/a&gt;&#160;- I would suggest posting this question to the Flink user mailing list, and after reviewing the responses, decide whether this is really a bug.&lt;/p&gt;</comment>
                            <comment id="17183225" author="aljoscha" created="Mon, 24 Aug 2020 12:42:06 +0000"  >&lt;p&gt;Is there any update on this?&lt;/p&gt;</comment>
                            <comment id="17183311" author="kien_truong" created="Mon, 24 Aug 2020 14:04:49 +0000"  >&lt;p&gt;Sorry, I&apos;ve forgotten about this issue so I&apos;ve only made a post to the mailing list just now.&lt;/p&gt;

&lt;p&gt;Maybe we could wait a few days to see if there&apos;s any response. Thanks.&lt;/p&gt;</comment>
                            <comment id="17186823" author="kkrugler" created="Fri, 28 Aug 2020 21:48:43 +0000"  >&lt;p&gt;On the list, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&#160;said:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Hi Kien,&lt;br/&gt;
I am afraid this is a valid bug. I am not 100% sure but the way I&lt;br/&gt;
understand the code the idleness mechanism applies to input channels,&lt;br/&gt;
which means e.g. when multiple parallell instances shuffle its results&lt;br/&gt;
to downstream operators.&lt;br/&gt;
In case of a two input operator, combining the watermark of two&lt;br/&gt;
different upstream operators happens inside of the operator itself.&lt;br/&gt;
There we do not have the idleness status. We do not have a status that a&lt;br/&gt;
whole upstream operator became idle. That&apos;s definitely a bug/limitation.&lt;br/&gt;
I&apos;m also cc&apos;ing Aljoscha who could maybe confirm my analysis.&lt;br/&gt;
Best,&lt;br/&gt;
Dawid&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; added:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Yes, I&apos;m afraid this analysis is correct. The StreamOperator, AbstractStreamOperator to be specific, computes the combined watermarks from both inputs here: &lt;a href=&quot;https://github.com/apache/flink/blob/f0ed29c06d331892a06ee9bddea4173d6300835d/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/operators/AbstractStreamOperator.java#L573&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/f0ed29c06d331892a06ee9bddea4173d6300835d/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/operators/AbstractStreamOperator.java#L573&lt;/a&gt;. The operator layer is not aware of idleness so it will never notice. The idleness only works on the level of inputs but is never forwarded to an operator itself.&lt;/p&gt;

&lt;p&gt;To fix this we would have to also make operators aware of idleness such that they can take this into account when computing the combined output watermark.&lt;/p&gt;

&lt;p&gt;Best,&lt;br/&gt;
Aljoscha&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="17186872" author="libenchao" created="Sat, 29 Aug 2020 01:45:43 +0000"  >&lt;p&gt;+1 for fixing this issue, we also found this limitation when using &apos;temporal table function&apos;, and fixed it in our internal branch.&lt;/p&gt;</comment>
                            <comment id="17187696" author="pnowojski" created="Mon, 31 Aug 2020 12:31:44 +0000"  >&lt;p&gt;Side note, if you need to fix &lt;tt&gt;AbstractStreamOperator&lt;/tt&gt;, please remember about fixing &lt;tt&gt;AbstractStreamOperatorV2&lt;/tt&gt; as well.&lt;/p&gt;</comment>
                            <comment id="17189816" author="zhuzh" created="Thu, 3 Sep 2020 03:38:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knaufk&quot; class=&quot;user-hover&quot; rel=&quot;knaufk&quot;&gt;knaufk&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; Given that this issue was proposed as a blocker for releasing 1.11.2, I have a couple of questions to understand the state of it. Appreciate if you can help with them.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Should it be a strict blocker of releasing 1.11.2?&lt;/li&gt;
	&lt;li&gt;Is there a concise on how we can fix it?&lt;/li&gt;
	&lt;li&gt;Does next Monday as the deadline to cut RC1 work for the fix?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17191470" author="zhuzh" created="Mon, 7 Sep 2020 06:24:22 +0000"  >&lt;p&gt;I think this ticket still needs some time to figure out a proper solution, so moving it to 1.11.3.&lt;/p&gt;</comment>
                            <comment id="17200082" author="pnowojski" created="Tue, 22 Sep 2020 13:25:53 +0000"  >&lt;p&gt;Note to anyone who will be fixing this issue. In the &lt;tt&gt;MultipleInputStreamTaskTest#testWatermarkAndStreamStatusForwarding&lt;/tt&gt; (implemented as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-18907&quot; title=&quot;Add watermarks and metrics tests for MultipleSourceOperatorStreamTask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-18907&quot;&gt;&lt;del&gt;FLINK-18907&lt;/del&gt;&lt;/a&gt; ) there is a workaround of this bug, that needs to be removed when this bug is fixed.&lt;/p&gt;</comment>
                            <comment id="17229711" author="dian.fu" created="Wed, 11 Nov 2020 03:49:07 +0000"  >&lt;p&gt;What&apos;s the status of this issue? Is it still target to fixed in 1.12.0?&lt;/p&gt;</comment>
                            <comment id="17229959" author="aljoscha" created="Wed, 11 Nov 2020 12:48:53 +0000"  >&lt;p&gt;I don&apos;t think we can fix it for Flink 1.12. This requires extending the operator interface to &quot;teach&quot; operators about idleness as well so that they can combine the two sides and forward an appropriate watermark/idleness.&lt;/p&gt;</comment>
                            <comment id="17229963" author="dian.fu" created="Wed, 11 Nov 2020 12:53:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;&#160;Thanks a lot. I have updated the fix version to 1.13.0.&lt;/p&gt;</comment>
                            <comment id="17319371" author="knaufk" created="Mon, 12 Apr 2021 11:18:00 +0000"  >&lt;p&gt;As this is clearly not a Blocker (open for &amp;gt; 6 months), I&apos;ve deprioritized it to Major for now (see also &lt;a href=&quot;https://cwiki.apache.org/confluence/display/FLINK/Flink+Jira+Process&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/FLINK/Flink+Jira+Process&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="17319373" author="dawidwys" created="Mon, 12 Apr 2021 11:19:07 +0000"  >&lt;p&gt;Actually it is a blocker that we&apos;ve not handled well so far &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17319382" author="knaufk" created="Mon, 12 Apr 2021 11:24:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; Why is this a blocker? It is not an infrastructure failure and its not a bug that is blocking us from releasing. &lt;/p&gt;</comment>
                            <comment id="17319388" author="dawidwys" created="Mon, 12 Apr 2021 11:29:07 +0000"  >&lt;p&gt;We agreed offline it is an important bug that lingers for a long time and thus we should consider this a must for 1.13.1 and 1.14&lt;/p&gt;</comment>
                            <comment id="17326982" author="flink-jira-bot" created="Wed, 21 Apr 2021 22:44:13 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 7 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17350824" author="dawidwys" created="Tue, 25 May 2021 06:40:21 +0000"  >&lt;p&gt;Fixed in 214ba6817762c595110db289a7a3550cba5024e6..ee9f9b227a7703c2688924070c4746a70bff3fd8&lt;/p&gt;</comment>
                            <comment id="17426225" author="dawidwys" created="Fri, 8 Oct 2021 15:14:12 +0000"  >&lt;p&gt;It has not been backported to previous versions because it needed to change the &lt;tt&gt;Input&lt;/tt&gt; interface which is marked as &lt;tt&gt;PublicEvolving&lt;/tt&gt;. We did not want to introduce such a change in a minor release.&lt;/p&gt;</comment>
                            <comment id="17426226" author="dawidwys" created="Fri, 8 Oct 2021 15:14:32 +0000"  >&lt;p&gt;Reopen to add release notes.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13382488">FLINK-22904</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13382184">FLINK-22881</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hqc8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>We added `processWatermarkStatusX` method to classes such as `AbstractStreamOperator`, `Input` etc. It allows to take the `WatermarkStatus` into account when combining watermarks in two/multi input operators.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>