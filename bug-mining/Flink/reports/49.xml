<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:17:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1087] A DeltaIteration fails  with Reducer as Input</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1087</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The following modified WordCount example fails:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// set up the execution environment
&lt;/span&gt;		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();
		
		&lt;span class=&quot;code-comment&quot;&gt;// get input data
&lt;/span&gt;		DataSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; text = getTextDataSet(env);
		
		DataSet&amp;lt;Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; counts = 
				&lt;span class=&quot;code-comment&quot;&gt;// split up the lines in pairs (2-tuples) containing: (word,1)
&lt;/span&gt;				text.flatMap(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Tokenizer())
				&lt;span class=&quot;code-comment&quot;&gt;// group by the tuple field &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; and sum up tuple field &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;
&lt;/span&gt;				.groupBy(0)
				.sum(1);

		DeltaIteration&amp;lt;Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;, Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; iteration = counts.iterateDelta(counts, 10, 0);

		DataSet&amp;lt;Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; delta =
				iteration.getSolutionSet().join(iteration.getWorkset()).where(0).equalTo(0).with(
				&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JoinFunction&amp;lt;Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;, Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;, Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt;() {

					&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; join(Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; first, Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; second) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
						&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; second;
					}
				});

		DataSet&amp;lt;Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; newWorkset = delta.filter(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FilterFunction&amp;lt;Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt;() {
			@Override
			&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; filter(Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; value) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
				&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
			}
		});

		DataSet&amp;lt;Tuple2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; result = iteration.closeWith(delta, newWorkset);
		result.print();

		&lt;span class=&quot;code-comment&quot;&gt;// execute program
&lt;/span&gt;		env.execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;WordCount Example&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With this Exception:&lt;br/&gt;
Exception in thread &quot;main&quot; org.apache.flink.runtime.client.JobExecutionException: java.lang.RuntimeException: Initializing the input streams failed in Task Join(org.apache.flink.api.java.operators.JoinOperator$DefaultJoin$WrappingFlatJoinFunction): Illegal input group size in task configuration: -1&lt;br/&gt;
	at org.apache.flink.runtime.operators.RegularPactTask.registerInputOutput(RegularPactTask.java:260)&lt;br/&gt;
	at org.apache.flink.runtime.execution.RuntimeEnvironment.&amp;lt;init&amp;gt;(RuntimeEnvironment.java:205)&lt;br/&gt;
	at org.apache.flink.runtime.taskmanager.TaskManager.submitTasks(TaskManager.java:775)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:483)&lt;br/&gt;
	at org.apache.flink.runtime.ipc.RPC$Server.call(RPC.java:422)&lt;br/&gt;
	at org.apache.flink.runtime.ipc.Server$Handler.run(Server.java:958)&lt;br/&gt;
Caused by: java.lang.Exception: Illegal input group size in task configuration: -1&lt;br/&gt;
	at org.apache.flink.runtime.operators.RegularPactTask.initInputReaders(RegularPactTask.java:739)&lt;br/&gt;
	at org.apache.flink.runtime.operators.RegularPactTask.registerInputOutput(RegularPactTask.java:256)&lt;br/&gt;
	... 7 more&lt;/p&gt;

&lt;p&gt;	at org.apache.flink.runtime.client.JobClient.submitJobAndWait(JobClient.java:361)&lt;br/&gt;
	at org.apache.flink.client.LocalExecutor.executePlan(LocalExecutor.java:245)&lt;br/&gt;
	at org.apache.flink.api.java.LocalEnvironment.execute(LocalEnvironment.java:58)&lt;br/&gt;
	at org.apache.flink.example.java.wordcount.WordCount.main(WordCount.java:100)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:483)&lt;br/&gt;
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12739130">FLINK-1087</key>
            <summary>A DeltaIteration fails  with Reducer as Input</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="aljoscha">Aljoscha Krettek</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Sep 2014 14:09:25 +0000</created>
                <updated>Thu, 4 Sep 2014 14:51:33 +0000</updated>
                            <resolved>Thu, 4 Sep 2014 14:51:33 +0000</resolved>
                                                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14121399" author="stephanewen" created="Thu, 4 Sep 2014 14:19:39 +0000"  >&lt;p&gt;This is a bug in the merging of the iteration auxiliary tasks.&lt;/p&gt;

&lt;p&gt;You can deactivate it by the topmost flag in the &lt;tt&gt;NepheleJobGraphGenerator&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Once we introduce the buffer oriented runtime, we can throw out this logic for good.&lt;/p&gt;</comment>
                            <comment id="14121410" author="aljoscha" created="Thu, 4 Sep 2014 14:28:46 +0000"  >&lt;p&gt;Ok, I&apos;ll check it and commit a fix.&lt;/p&gt;</comment>
                            <comment id="14121427" author="aljoscha" created="Thu, 4 Sep 2014 14:51:24 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/incubator-flink/commit/80af60b986f4aaf57ab56b243d3c897dabb0bddd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/commit/80af60b986f4aaf57ab56b243d3c897dabb0bddd&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zomn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>