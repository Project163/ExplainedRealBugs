<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15377] Mesos WordCount test fails on travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15377</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The &quot;Run Mesos WordCount test&quot; fails nightly run on travis with below error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
rm: cannot remove &lt;span class=&quot;code-quote&quot;&gt;&apos;/home/travis/build/apache/flink/flink-end-to-end-tests/test-scripts/test-data/log/mesos-sl/mesos-slave.INFO&apos;&lt;/span&gt;: Permission denied
rm: cannot remove &lt;span class=&quot;code-quote&quot;&gt;&apos;/home/travis/build/apache/flink/flink-end-to-end-tests/test-scripts/test-data/log/mesos-sl/mesos-fetcher.INFO&apos;&lt;/span&gt;: Permission denied
rm: cannot remove &lt;span class=&quot;code-quote&quot;&gt;&apos;/home/travis/build/apache/flink/flink-end-to-end-tests/test-scripts/test-data/log/mesos-sl/mesos-slave.4a4fda410c57.invalid-user.log.INFO.20191224-031307.1&apos;&lt;/span&gt;: Permission denied
...
[FAIL] &lt;span class=&quot;code-quote&quot;&gt;&apos;Run Mesos WordCount test&apos;&lt;/span&gt; failed after 5 minutes and 26 seconds! Test exited with exit code 0 but the logs contained errors, exceptions or non-empty .out files
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://api.travis-ci.org/v3/job/628795106/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/628795106/log.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13276186">FLINK-15377</key>
            <summary>Mesos WordCount test fails on travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guoyangze">Yangze Guo</assignee>
                                    <reporter username="liyu">Yu Li</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 24 Dec 2019 06:47:29 +0000</created>
                <updated>Tue, 30 Nov 2021 20:38:18 +0000</updated>
                            <resolved>Thu, 2 Jan 2020 15:50:20 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Deployment / Mesos</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17002688" author="carp84" created="Tue, 24 Dec 2019 06:47:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guoyangze&quot; class=&quot;user-hover&quot; rel=&quot;guoyangze&quot;&gt;guoyangze&lt;/a&gt; FYI.&lt;/p&gt;</comment>
                            <comment id="17002697" author="karmagyz" created="Tue, 24 Dec 2019 07:14:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; That&apos;s why I add &lt;em&gt;sudo&lt;/em&gt; to the clean-up function in the beginning. However, it&apos;s an accidental error. I could not reproduce it locally; Thus, I could not figure out what wrong with the permission. I prefer to add sudo privilege. WDYT?&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17002699" author="karmagyz" created="Tue, 24 Dec 2019 07:22:19 +0000"  >&lt;p&gt;BTW, as the correctness of this test case has been verified by the &lt;b&gt;check_result_hash&lt;/b&gt; function. I think we could also skip the exception check.&lt;/p&gt;

&lt;p&gt;At least, it could be a quick fix without breaking the test. WDYT?&lt;/p&gt;</comment>
                            <comment id="17003044" author="karmagyz" created="Wed, 25 Dec 2019 02:07:41 +0000"  >&lt;p&gt;After re-read the error log, I found error &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception occurred in REST handler: Cannot connect to ResourceManager right now. Please &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to refresh.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s because we wait the rest endpoint up by periodically requesting the TaskManagerInfo. However, at the very beginning, the resource manager has not been set up, which is the root cause of the above Exception and this issue.&lt;/p&gt;

&lt;p&gt;I think we could add this exception to the whitelist. WDYT?&lt;/p&gt;

&lt;p&gt;Regarding the permission issue, we could unmount the log and data dir of Mesos, Docker will clean-up the files itself.&lt;/p&gt;</comment>
                            <comment id="17003085" author="zhuzh" created="Wed, 25 Dec 2019 05:40:44 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;master:&lt;br/&gt;
3036dd97eef4d1451baf6984885ad3784333a617&lt;/p&gt;

&lt;p&gt;1.10.0:&lt;br/&gt;
d3eb451c2551ffa928bb04c8445c0967af69da60&lt;/p&gt;</comment>
                            <comment id="17003476" author="carp84" created="Thu, 26 Dec 2019 06:10:52 +0000"  >&lt;p&gt;Another instance after the merged commits:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR: Could not build mesos image. Aborting...
Removing network docker-mesos-cluster-network
Network docker-mesos-cluster-network not found.
[FAIL] Test script contains errors.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://api.travis-ci.org/v3/job/629426135/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/629426135/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;build link: &lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/629426135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/629426135&lt;/a&gt;&lt;br/&gt;
commit of build: 02ea912&lt;/p&gt;</comment>
                            <comment id="17003493" author="karmagyz" created="Thu, 26 Dec 2019 07:00:30 +0000"  >&lt;p&gt;Thanks for reporting it &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liyu&quot; class=&quot;user-hover&quot; rel=&quot;liyu&quot;&gt;liyu&lt;/a&gt;, I think it&apos;s a network environment issue while installing docker. Maybe we could found another way to enhance the stability of image building. But so far, I&apos;d like to downgrade the priority of this issue to critical. WDYT?&lt;/p&gt;</comment>
                            <comment id="17003522" author="carp84" created="Thu, 26 Dec 2019 08:36:10 +0000"  >&lt;p&gt;I suggest to wait for another nightly build to see whether the issue reproduces, and downgrade it if not. What do you think? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guoyangze&quot; class=&quot;user-hover&quot; rel=&quot;guoyangze&quot;&gt;guoyangze&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17004047" author="karmagyz" created="Fri, 27 Dec 2019 09:50:11 +0000"  >&lt;p&gt;Since the issue not reproduce in &lt;a href=&quot;https://travis-ci.org/apache/flink/builds/629699386?utm_medium=notification&amp;amp;utm_source=github_status&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/builds/629699386?utm_medium=notification&amp;amp;utm_source=github_status&lt;/a&gt; and &lt;a href=&quot;https://travis-ci.org/apache/flink/builds/629644154?utm_medium=notification&amp;amp;utm_source=github_status&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/builds/629644154?utm_medium=notification&amp;amp;utm_source=github_status&lt;/a&gt;. Downgrade this issue to critical.&lt;/p&gt;</comment>
                            <comment id="17006686" author="gjy" created="Thu, 2 Jan 2020 09:22:55 +0000"  >&lt;p&gt;I will review this.&lt;/p&gt;</comment>
                            <comment id="17006883" author="gjy" created="Thu, 2 Jan 2020 15:50:21 +0000"  >&lt;p&gt;1.10: cd5cda1d34bfebeac2354207fdb97087d4381f90&lt;br/&gt;
master: 8830ef0eba258a52761e164d98b20ceef99b13e3&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09ymw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>