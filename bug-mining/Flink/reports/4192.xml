<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:46:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-17935] Logs could not show up when deploying Flink on Yarn via &quot;--executor&quot;</title>
                <link>https://issues.apache.org/jira/browse/FLINK-17935</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./bin/flink run -d -p 5 -e yarn-per-job examples/streaming/WindowJoin.jar&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When we use the &lt;tt&gt;&lt;del&gt;e/&lt;/del&gt;-executor&lt;/tt&gt; to specify the deploy target to Yarn per-job, the logs could not show up. The root cause is we do not set the logging files in &lt;tt&gt;ExecutorCLI&lt;/tt&gt;. We only do it in the &lt;tt&gt;FlinkYarnSessionCli&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;If we use &lt;tt&gt;-m yarn-cluster&lt;/tt&gt;, everything works well.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Maybe we should move the &lt;tt&gt;setLogConfigFileInConfig&lt;/tt&gt; to &lt;tt&gt;YarnClusterDescriptor&lt;/tt&gt; to avoid this problem. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkl0u&quot; class=&quot;user-hover&quot; rel=&quot;kkl0u&quot;&gt;kkl0u&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13307338">FLINK-17935</key>
            <summary>Logs could not show up when deploying Flink on Yarn via &quot;--executor&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkl0u">Kostas Kloudas</assignee>
                                    <reporter username="wangyang0918">Yang Wang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 26 May 2020 05:43:59 +0000</created>
                <updated>Fri, 5 Jun 2020 07:56:49 +0000</updated>
                            <resolved>Thu, 4 Jun 2020 14:37:37 +0000</resolved>
                                    <version>1.11.0</version>
                    <version>1.12.0</version>
                                    <fixVersion>1.11.0</fixVersion>
                    <fixVersion>1.12.0</fixVersion>
                                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17116699" author="echo lee" created="Tue, 26 May 2020 12:29:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt; There is really a problem here. Our approach is to add &lt;tt&gt;setLogConfigFileInConfig&lt;/tt&gt;&#160;to the custom executor.&lt;/p&gt;</comment>
                            <comment id="17116715" author="kkl0u" created="Tue, 26 May 2020 12:45:07 +0000"  >&lt;p&gt;I already have a branch for this one. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Echo+Lee&quot; class=&quot;user-hover&quot; rel=&quot;Echo Lee&quot;&gt;Echo Lee&lt;/a&gt; I think that the &lt;tt&gt;setLogConfigFileInConfig&lt;/tt&gt; should go to the &lt;tt&gt;YarnClusterClientFactory.createClusterDescriptor()&lt;/tt&gt; and remove it from anywhere else, so that we do not spread it everywhere in the codebase. &lt;/p&gt;</comment>
                            <comment id="17117221" author="echo lee" created="Wed, 27 May 2020 01:29:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkl0u&quot; class=&quot;user-hover&quot; rel=&quot;kkl0u&quot;&gt;kkl0u&lt;/a&gt;&#160;You are right. Because of business needs, we have customized a yarn executor, so only a temporary solution.&#160;I look forward to your fix of this issue.&lt;/p&gt;</comment>
                            <comment id="17117236" author="fly_in_gis" created="Wed, 27 May 2020 02:09:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Echo+Lee&quot; class=&quot;user-hover&quot; rel=&quot;Echo Lee&quot;&gt;Echo Lee&lt;/a&gt;&#160;Thanks for your comments. I am not fully understand why we could not move the &lt;tt&gt;setLogConfigFileInConfig&lt;/tt&gt; to &lt;tt&gt;YarnClusterDescriptor&lt;/tt&gt;. It is more straightforward and could be the only entry for setting logging configurations.&lt;/p&gt;</comment>
                            <comment id="17117485" author="kkl0u" created="Wed, 27 May 2020 07:56:01 +0000"  >&lt;p&gt;My only concern with moving the configuration to the &lt;tt&gt;YarnClusterDescriptor&lt;/tt&gt; itself is that this will tie it to an implicit contract (having to set an environment variable) which is hard to maintain. Also for its testability, it would be nice if we could just pass a complete configuration to the descriptor itself and not set fields inside there (as much as possible).&lt;/p&gt;</comment>
                            <comment id="17117514" author="fly_in_gis" created="Wed, 27 May 2020 08:37:07 +0000"  >&lt;p&gt;What i mean is not directly get the &lt;tt&gt;configDir&lt;/tt&gt; from environment in &lt;tt&gt;YarnClusterDescriptor&lt;/tt&gt;. Instead, we add a new argument &lt;tt&gt;String configDir&lt;/tt&gt; to constructor of &lt;tt&gt;YarnClusterDescriptor&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I do not insist on this. Moving it to &lt;tt&gt;YarnClusterClientFactory&lt;/tt&gt; also makes sense to me.&lt;/p&gt;</comment>
                            <comment id="17117572" author="echo lee" created="Wed, 27 May 2020 09:29:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt;&#160;Yes, I agree with this unified solution. But first need to solve how flinkConfDir should be set.&lt;/p&gt;</comment>
                            <comment id="17125690" author="kkl0u" created="Thu, 4 Jun 2020 08:37:08 +0000"  >&lt;p&gt;Fixed on master with 2eb7377163490878f12e4687db5fb4db0e6f47c2&lt;br/&gt;
and on release-1.11 with 32c65903b736f204bfe8b0f1d23c8ccddbd1b2f1&lt;/p&gt;</comment>
                            <comment id="17125975" author="kkl0u" created="Thu, 4 Jun 2020 14:37:37 +0000"  >&lt;p&gt;Fixed on master with a674b5e181a2af050aee4c4f23a86a6c61eda94f&lt;br/&gt;
and on release-1.11 with d22874ef6322bfb774d60b09c022c3dbbe295d70&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13309646">FLINK-18149</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0f5ew:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>