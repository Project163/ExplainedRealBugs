<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:31:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6464] Metric name is not stable</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6464</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently according to the documentation (&lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-release-1.2/monitoring/metrics.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.apache.org/projects/flink/flink-docs-release-1.2/monitoring/metrics.html&lt;/a&gt;) operator metrics constructed using the following pattern:&lt;br/&gt;
&amp;lt;operator_name&amp;gt;, &amp;lt;subtask_index&amp;gt;&lt;/p&gt;

&lt;p&gt;For some operators, &quot;operator_name&quot; could contain default implementation of toString method. For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;TriggerWindow(TumblingProcessingTimeWindows(3000), ListStateDescriptor{serializer=org.apache.flink.api.java.typeutils.runtime.kryo.KryoSerializer@c65792d4}, xxx.Trigger@665fe457, WindowedStream.apply(WindowedStream.java:521)) -&amp;gt; Sink: Unnamed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The part &quot;@c65792d4&quot; will be changed every time job is restarted/cancelled. &lt;/p&gt;

&lt;p&gt;As a consequence it&apos;s not possible to store metrics for a long time.&lt;/p&gt;

&lt;p&gt;Expected:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;ensure all operators return human readable, non-default names OR&lt;/li&gt;
	&lt;li&gt;change the way TriggerWindow generates it&apos;s name.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13069494">FLINK-6464</key>
            <summary>Metric name is not stable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="dernasherbrezon">Andrey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 May 2017 15:30:15 +0000</created>
                <updated>Tue, 30 Jan 2018 14:57:40 +0000</updated>
                            <resolved>Tue, 30 Jan 2018 14:57:40 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>API / DataStream</component>
                    <component>Runtime / Metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16064097" author="dbrinegar" created="Tue, 27 Jun 2017 01:45:32 +0000"  >&lt;p&gt;nice find!  &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7009&quot; title=&quot;dogstatsd mode in statsd reporter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7009&quot;&gt;FLINK-7009&lt;/a&gt; tries to address this by removing the instance ids, then using a hash of the remaining stable part of the string as a compressed metric name.  So the above would convert into something like &quot;TriggerWin_abcdef12&quot; which is at least the same every time you run the job, and short so metric systems can handle it without truncation or conversion problems, but in the end only a shorter more stable default name, not particularly readable in itself.  Thoughts?&lt;/p&gt;</comment>
                            <comment id="16064482" author="zentol" created="Tue, 27 Jun 2017 08:48:30 +0000"  >&lt;p&gt;This is something that we should solve in general, and not rely on every single reporter to deal with it. We should also decouple this issue with the length of the names, as the latter is generally a reporter specific issue.&lt;/p&gt;

&lt;p&gt;I&apos;m not quite sure where the names are generated, but probably its either various DataStream classes or StreamjobGraphGenerator.&lt;/p&gt;

&lt;p&gt;For the example above, IMO the only info we actually need is &lt;tt&gt;TumblingProcessingTimeWindow(3000, ListStateDescriptor, &amp;lt;TriggerClassName&amp;gt;)&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16334297" author="githubbot" created="Mon, 22 Jan 2018 14:07:33 +0000"  >&lt;p&gt;GitHub user zentol opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5332&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6464&quot; title=&quot;Metric name is not stable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6464&quot;&gt;&lt;del&gt;FLINK-6464&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;streaming&amp;#93;&lt;/span&gt; Stabilize default window operator names&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This PR modifies the generation of default operator names for window operators to be more concise, and more importantly, stable across job submissions.&lt;/p&gt;

&lt;p&gt;    Example: SocketTextWordCount&lt;/p&gt;

&lt;p&gt;    Before:&lt;br/&gt;
    ```&lt;br/&gt;
    TriggerWindow(TumblingProcessingTimeWindows(5000), ReducingStateDescriptor&lt;/p&gt;
{serializer=org.apache.flink.api.java.typeutils.runtime.PojoSerializer@591ae253, reduceFunction=org.apache.flink.streaming.examples.socket.SocketWindowWordCount$1@48974e45}
&lt;p&gt;, ProcessingTimeTrigger(), WindowedStream.reduce(WindowedStream.java:241))&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    After:&lt;br/&gt;
    ```&lt;br/&gt;
    Window(TumblingProcessingTimeWindows(5000), ProcessingTimeTrigger, WindowedStream.reduce(WindowedStream.java:243))&lt;br/&gt;
    ```&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;create shared static utility method to generate names&lt;/li&gt;
	&lt;li&gt;remove state-descriptor from operator name&lt;/li&gt;
	&lt;li&gt;replace `TriggerWindow` with `Window`&lt;/li&gt;
	&lt;li&gt;trigger/assigner are now included with their simple class name instead of fully qualified class name + object reference&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This change is a trivial rework / code cleanup without any test coverage.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zentol/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zentol/flink&lt;/a&gt; 6464&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5332.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5332.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5332&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 065e5420d9382b15fc32c2738c2ede33aee69d38&lt;br/&gt;
Author: zentol &amp;lt;chesnay@...&amp;gt;&lt;br/&gt;
Date:   2018-01-22T13:46:02Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6464&quot; title=&quot;Metric name is not stable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6464&quot;&gt;&lt;del&gt;FLINK-6464&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;streaming&amp;#93;&lt;/span&gt; Stabilize default window operator names&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16334556" author="githubbot" created="Mon, 22 Jan 2018 17:15:21 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5332&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Changes look good!&lt;/p&gt;

&lt;p&gt;    It might make sense to also remove the line number from the string because this might also change in the future. It&apos;s not a must, though.&lt;/p&gt;</comment>
                            <comment id="16334741" author="githubbot" created="Mon, 22 Jan 2018 18:52:53 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5332&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    How about we replace the line-number with the UDF class name?&lt;/p&gt;</comment>
                            <comment id="16337421" author="githubbot" created="Wed, 24 Jan 2018 11:20:03 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5332&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &#128077; &lt;/p&gt;</comment>
                            <comment id="16337608" author="githubbot" created="Wed, 24 Jan 2018 13:56:47 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5332&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @aljoscha Done, we now include the function name instead. Is a bit more complicated that I had hoped though...&lt;/p&gt;</comment>
                            <comment id="16339295" author="githubbot" created="Thu, 25 Jan 2018 14:38:37 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5332&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good &#128077; &lt;/p&gt;</comment>
                            <comment id="16343220" author="githubbot" created="Mon, 29 Jan 2018 10:56:29 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5332&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merging.&lt;/p&gt;</comment>
                            <comment id="16345169" author="githubbot" created="Tue, 30 Jan 2018 14:57:24 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5332&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16345173" author="zentol" created="Tue, 30 Jan 2018 14:57:40 +0000"  >&lt;p&gt;master: 7d4bd4b6d6710a7e81a7883aee1947a76d564b9a&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ejsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>