<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:47:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-17260] StreamingKafkaITCase failure on Azure</title>
                <link>https://issues.apache.org/jira/browse/FLINK-17260</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/rmetzger/5bd3ef0a-4359-41af-abca-811b04098d2e/_apis/build/builds/7544/logs/165&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/5bd3ef0a-4359-41af-abca-811b04098d2e/_apis/build/builds/7544/logs/165&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-04-16T00:12:32.2848429Z [INFO] Running org.apache.flink.tests.util.kafka.StreamingKafkaITCase
2020-04-16T00:14:47.9100927Z [ERROR] Tests run: 3, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 135.621 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.tests.util.k afka.StreamingKafkaITCase
2020-04-16T00:14:47.9103036Z [ERROR] testKafka[0: kafka-version:0.10.2.0](org.apache.flink.tests.util.kafka.StreamingKafkaITCase)  Time elapsed: 46.222 s  &amp;lt;&amp;lt;&amp;lt;  FAILURE!
2020-04-16T00:14:47.9104033Z java.lang.AssertionError: expected:&amp;lt;[elephant,27,64213]&amp;gt; but was:&amp;lt;[]&amp;gt;
2020-04-16T00:14:47.9104638Z    at org.junit.Assert.fail(Assert.java:88)
2020-04-16T00:14:47.9105148Z    at org.junit.Assert.failNotEquals(Assert.java:834)
2020-04-16T00:14:47.9105701Z    at org.junit.Assert.assertEquals(Assert.java:118)
2020-04-16T00:14:47.9106239Z    at org.junit.Assert.assertEquals(Assert.java:144)
2020-04-16T00:14:47.9107177Z    at org.apache.flink.tests.util.kafka.StreamingKafkaITCase.testKafka(StreamingKafkaITCase.java:162)
2020-04-16T00:14:47.9107845Z    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2020-04-16T00:14:47.9108434Z    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2020-04-16T00:14:47.9109318Z    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2020-04-16T00:14:47.9109914Z    at java.lang.reflect.Method.invoke(Method.java:498)
2020-04-16T00:14:47.9110434Z    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
2020-04-16T00:14:47.9110985Z    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
2020-04-16T00:14:47.9111548Z    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
2020-04-16T00:14:47.9112083Z    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
2020-04-16T00:14:47.9112629Z    at org.apache.flink.util.ExternalResource$1.evaluate(ExternalResource.java:48)
2020-04-16T00:14:47.9113145Z    at org.apache.flink.util.ExternalResource$1.evaluate(ExternalResource.java:48)
2020-04-16T00:14:47.9113637Z    at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
2020-04-16T00:14:47.9114072Z    at org.junit.rules.RunRules.evaluate(RunRules.java:20)
2020-04-16T00:14:47.9114490Z    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
2020-04-16T00:14:47.9115256Z    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
2020-04-16T00:14:47.9115791Z    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
2020-04-16T00:14:47.9116292Z    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
2020-04-16T00:14:47.9116736Z    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
2020-04-16T00:14:47.9117779Z    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
2020-04-16T00:14:47.9118274Z    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
2020-04-16T00:14:47.9118766Z    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
2020-04-16T00:14:47.9119204Z    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
2020-04-16T00:14:47.9119625Z    at org.junit.runners.Suite.runChild(Suite.java:128)
2020-04-16T00:14:47.9120005Z    at org.junit.runners.Suite.runChild(Suite.java:27)
2020-04-16T00:14:47.9120428Z    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
2020-04-16T00:14:47.9120876Z    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
2020-04-16T00:14:47.9121350Z    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
2020-04-16T00:14:47.9121805Z    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
2020-04-16T00:14:47.9122273Z    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
2020-04-16T00:14:47.9122729Z    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
2020-04-16T00:14:47.9123130Z    at org.junit.runners.Suite.runChild(Suite.java:128)
...
2020-04-16T00:14:47.9132530Z
2020-04-16T00:14:47.9134982Z [INFO] Running org.apache.flink.tests.util.kafka.SQLClientKafkaITCase
2020-04-16T00:17:18.7332734Z [INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 150.813 s - in org.apache.flink.tests.util.kafka.SQLClient KafkaITCase
2020-04-16T00:17:19.0840872Z [INFO]
2020-04-16T00:17:19.0841522Z [INFO] Results:
2020-04-16T00:17:19.0841820Z [INFO]
2020-04-16T00:17:19.0842133Z [ERROR] Failures:
2020-04-16T00:17:19.0842565Z [ERROR]   StreamingKafkaITCase.testKafka:162 expected:&amp;lt;[elephant,27,64213]&amp;gt; but was:&amp;lt;[]&amp;gt;
2020-04-16T00:17:19.0842993Z [INFO]
2020-04-16T00:17:19.0843766Z [ERROR] Tests run: 6, Failures: 1, Errors: 0, Skipped: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;Occured first while implementing&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17156&quot; title=&quot;Add checkpoint cancellation to Unaligner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17156&quot;&gt;&lt;del&gt;FLINK-17156&lt;/del&gt;&lt;/a&gt; (wasn&apos;t able to reproduce).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13299602">FLINK-17260</key>
            <summary>StreamingKafkaITCase failure on Azure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="roman">Roman Khachatryan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Mon, 20 Apr 2020 08:00:02 +0000</created>
                <updated>Tue, 15 Sep 2020 15:39:05 +0000</updated>
                            <resolved>Tue, 15 Sep 2020 15:39:05 +0000</resolved>
                                    <version>1.11.0</version>
                    <version>1.12.0</version>
                                    <fixVersion>1.12.0</fixVersion>
                                    <component>Connectors / Kafka</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>16</watches>
                                                                                                                <comments>
                            <comment id="17087538" author="till.rohrmann" created="Mon, 20 Apr 2020 09:39:20 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=7703&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=7703&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It failed with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
expected:&amp;lt;[elephant,27,64213]&amp;gt; but was:&amp;lt;[elephant,41,64213]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17087540" author="till.rohrmann" created="Mon, 20 Apr 2020 09:40:51 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17156&quot; title=&quot;Add checkpoint cancellation to Unaligner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17156&quot;&gt;&lt;del&gt;FLINK-17156&lt;/del&gt;&lt;/a&gt; might actually not be related. If you agree &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roman_khachatryan&quot; class=&quot;user-hover&quot; rel=&quot;roman_khachatryan&quot;&gt;roman_khachatryan&lt;/a&gt;, then please delete the link.&lt;/p&gt;</comment>
                            <comment id="17087552" author="roman_khachatryan" created="Mon, 20 Apr 2020 09:45:56 +0000"  >&lt;p&gt;Yes, I think they are not unrelated.&lt;/p&gt;

&lt;p&gt;Deleted the link.&lt;/p&gt;</comment>
                            <comment id="17096226" author="rmetzger" created="Thu, 30 Apr 2020 06:53:22 +0000"  >&lt;p&gt;Another case: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=443&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=443&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17106057" author="rmetzger" created="Wed, 13 May 2020 07:36:19 +0000"  >&lt;p&gt;Another case: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=1083&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=1083&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17111168" author="till.rohrmann" created="Tue, 19 May 2020 13:24:03 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://dev.azure.com/tillrohrmann/flink/_build/results?buildId=127&amp;amp;view=logs&amp;amp;j=1f3ed471-1849-5d3c-a34c-19792af4ad16&amp;amp;t=2f5b54d0-1d28-5b01-d344-aa50ffe0cdf8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/tillrohrmann/flink/_build/results?buildId=127&amp;amp;view=logs&amp;amp;j=1f3ed471-1849-5d3c-a34c-19792af4ad16&amp;amp;t=2f5b54d0-1d28-5b01-d344-aa50ffe0cdf8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17111465" author="rmetzger" created="Tue, 19 May 2020 19:35:03 +0000"  >&lt;p&gt;another instance: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=1809&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=1809&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17116984" author="rmetzger" created="Tue, 26 May 2020 19:06:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=8084&amp;amp;view=logs&amp;amp;j=1f3ed471-1849-5d3c-a34c-19792af4ad16&amp;amp;t=2f5b54d0-1d28-5b01-d344-aa50ffe0cdf8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=8084&amp;amp;view=logs&amp;amp;j=1f3ed471-1849-5d3c-a34c-19792af4ad16&amp;amp;t=2f5b54d0-1d28-5b01-d344-aa50ffe0cdf8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17117438" author="rmetzger" created="Wed, 27 May 2020 06:46:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2231&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=931b3127-d6ee-5f94-e204-48d51cd1c334&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2231&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=931b3127-d6ee-5f94-e204-48d51cd1c334&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17117502" author="lzljs3620320" created="Wed, 27 May 2020 08:26:16 +0000"  >&lt;p&gt;another instance:&#160;&lt;a href=&quot;https://dev.azure.com/apache-flink/98463496-1af2-4620-8eab-a2ecc1a2e6fe/_apis/build/builds/2190/logs/133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/98463496-1af2-4620-8eab-a2ecc1a2e6fe/_apis/build/builds/2190/logs/133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17117774" author="rmetzger" created="Wed, 27 May 2020 13:44:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2263&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2263&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17119294" author="pnowojski" created="Fri, 29 May 2020 06:04:27 +0000"  >&lt;p&gt;another one:&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2404&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2404&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17124242" author="rmetzger" created="Tue, 2 Jun 2020 19:25:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2555&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&amp;amp;l=16946&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2555&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&amp;amp;l=16946&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17124621" author="rmetzger" created="Wed, 3 Jun 2020 05:42:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2586&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=931b3127-d6ee-5f94-e204-48d51cd1c334&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2586&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=931b3127-d6ee-5f94-e204-48d51cd1c334&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17125591" author="rmetzger" created="Thu, 4 Jun 2020 06:50:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2669&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2669&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17125629" author="aljoscha" created="Thu, 4 Jun 2020 07:33:56 +0000"  >&lt;p&gt;I think this is two separate issues, for some failures we don&apos;t get any data, while for some we get wrong results. For example, the last one says:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.AssertionError: expected:&amp;lt;[elephant,27,64213]&amp;gt; but was:&amp;lt;[elephant,41,64213]&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;if this were an actual bug it would indicate that our exactly-once is somehow broken.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; could it be that the tests for the different versions clash with each other? That could explain the issue of seeing wrong results.&lt;/p&gt;</comment>
                            <comment id="17126683" author="godfreyhe" created="Fri, 5 Jun 2020 11:19:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2673&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2673&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17126780" author="aljoscha" created="Fri, 5 Jun 2020 13:50:41 +0000"  >&lt;p&gt;master:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;455fb243486682fded9c136e4e2f4a8551d9a962&lt;/li&gt;
	&lt;li&gt;ce7b41e5173d45beebf461a7dcb74dd868807d6a&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;release-1.11: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;31c3a15731e91d01fb033fe5a8f8173e3ba0cb38&lt;/li&gt;
	&lt;li&gt;e4034ac296d4e8b43af570d3436cd2dec33d9ef1&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This potentially fixes the instability, please re-open if the problem persists.&lt;/p&gt;</comment>
                            <comment id="17127000" author="rmetzger" created="Fri, 5 Jun 2020 18:16:32 +0000"  >&lt;p&gt;failed again on master (including your commit): &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2834&amp;amp;view=logs&amp;amp;s=ae4f8708-9994-57d3-c2d7-b892156e7812&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2834&amp;amp;view=logs&amp;amp;s=ae4f8708-9994-57d3-c2d7-b892156e7812&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17127925" author="rmetzger" created="Mon, 8 Jun 2020 06:27:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2861&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=931b3127-d6ee-5f94-e204-48d51cd1c334&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2861&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=931b3127-d6ee-5f94-e204-48d51cd1c334&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17127927" author="rmetzger" created="Mon, 8 Jun 2020 06:29:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2860&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2860&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17128196" author="rmetzger" created="Mon, 8 Jun 2020 11:34:22 +0000"  >&lt;p&gt;&lt;tt&gt;expected:&amp;lt;&lt;span class=&quot;error&quot;&gt;&amp;#91;elephant,27,64213&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;[]&amp;gt;&lt;/tt&gt;: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2909&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2909&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17128461" author="aljoscha" created="Mon, 8 Jun 2020 17:05:51 +0000"  >&lt;p&gt;I pushed 50b6d9d5ffbcfbcc20c843e8758a0d2326b44ee1 to master to help with debugging. Please keep reporting failures.&lt;/p&gt;</comment>
                            <comment id="17128762" author="godfreyhe" created="Tue, 9 Jun 2020 01:44:12 +0000"  >&lt;p&gt;another one:&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2961&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2961&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17128922" author="rmetzger" created="Tue, 9 Jun 2020 06:41:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2947&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2947&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17128984" author="wanglijie95" created="Tue, 9 Jun 2020 08:10:27 +0000"  >&lt;p&gt;+1&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
expected:&amp;lt;[elephant,27,64213]&amp;gt; but was:&amp;lt;[elephant,27,64213, elephant,40,64213]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2962&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=2962&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17129065" author="zjwang" created="Tue, 9 Jun 2020 09:43:29 +0000"  >&lt;p&gt;another instance&#160;&lt;a href=&quot;https://dev.azure.com/apache-flink/98463496-1af2-4620-8eab-a2ecc1a2e6fe/_apis/build/builds/3003/logs/143&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/98463496-1af2-4620-8eab-a2ecc1a2e6fe/_apis/build/builds/3003/logs/143&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17130120" author="rmetzger" created="Wed, 10 Jun 2020 06:13:07 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
StreamingKafkaITCase.testKafka:166 Messages from Kafka 0.10.2.0: [elephant,41,64213, bee,31,65647, giraffe,9,65555, squirrel,86,66413] expected:&amp;lt;[elephant,27,64213]&amp;gt; but was:&amp;lt;[elephant,41,64213]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3047&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3047&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17130448" author="aljoscha" created="Wed, 10 Jun 2020 09:29:09 +0000"  >&lt;p&gt;Nice! So it seems that we double count the first set of messages. What the test does is:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;create input/output topics&lt;/li&gt;
	&lt;li&gt;start job&lt;/li&gt;
	&lt;li&gt;inject messages&lt;/li&gt;
	&lt;li&gt;increase partitions from 1 to 2 on input topic&lt;/li&gt;
	&lt;li&gt;inject more messages&lt;/li&gt;
	&lt;li&gt;verify result&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The test doesn&apos;t inject failures or anything, so it could be that there really is sth wrong in the Kafka connector.&lt;/p&gt;</comment>
                            <comment id="17130460" author="aljoscha" created="Wed, 10 Jun 2020 09:53:04 +0000"  >&lt;p&gt;Looking through the logs, it also seems to only occur for Kafka 0.10.x&lt;/p&gt;</comment>
                            <comment id="17130472" author="zentol" created="Wed, 10 Jun 2020 10:02:55 +0000"  >&lt;p&gt;Current theory is that this is caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16389&quot; title=&quot;Bump Kafka 0.10 to 0.10.2.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16389&quot;&gt;&lt;del&gt;FLINK-16389&lt;/del&gt;&lt;/a&gt;, where we bumped the 0.10 version. Will try reverting the commit and loop it on CI to confirm.&lt;/p&gt;</comment>
                            <comment id="17133005" author="zhuzh" created="Thu, 11 Jun 2020 07:29:39 +0000"  >&lt;p&gt;another instance:&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/98463496-1af2-4620-8eab-a2ecc1a2e6fe/_apis/build/builds/3230/logs/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/98463496-1af2-4620-8eab-a2ecc1a2e6fe/_apis/build/builds/3230/logs/137&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17133211" author="rmetzger" created="Thu, 11 Jun 2020 12:11:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3259&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3259&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17134125" author="pnowojski" created="Fri, 12 Jun 2020 10:59:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3371&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3371&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17135621" author="aljoscha" created="Mon, 15 Jun 2020 08:58:15 +0000"  >&lt;p&gt;That last one is for &lt;tt&gt;SQLClientKafkaITCase&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17135627" author="zentol" created="Mon, 15 Jun 2020 09:00:21 +0000"  >&lt;p&gt;I believe that some other test is interfering. I ran the test over 600 times on CI without it failing.&lt;br/&gt;
It seems more likely that some other test is interfering; hence I&apos;m downgrading the priority and closing &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-18020&quot; title=&quot;SQLClientKafkaITCase.testKafka is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-18020&quot;&gt;&lt;del&gt;FLINK-18020&lt;/del&gt;&lt;/a&gt; as a duplicate.&lt;/p&gt;

&lt;p&gt;I still couldn&apos;t get the test to fail, but there is sometimes a leftover kafka process before the java e2e tests are started. There was also a case where we used 13gb more disk space (52%-&amp;gt;67% usage); if there is a more extreme case this could maybe also interfere. In short, I don&apos;t think the test is a problem, nor kafka for that matter.&lt;/p&gt;

&lt;p&gt;I&apos;ve opened &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-18294&quot; title=&quot;Log java processes and disk space after each e2e test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-18294&quot;&gt;&lt;del&gt;FLINK-18294&lt;/del&gt;&lt;/a&gt; to log java processes and disk space usage, which may allow us to narrow down the interfering tests.&lt;/p&gt;</comment>
                            <comment id="17136107" author="rmetzger" created="Mon, 15 Jun 2020 19:02:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3490&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3490&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR]   StreamingKafkaITCase.testKafka:166 Messages from Kafka 0.10.2.0: [giraffe,9,65555, squirrel,86,66413, elephant,41,64213, bee,31,65647] expected:&amp;lt;[elephant,27,64213]&amp;gt; but was:&amp;lt;[elephant,41,64213]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17138107" author="pnowojski" created="Wed, 17 Jun 2020 05:13:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3638&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3638&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR]   SQLClientKafkaITCase.testKafka:177-&amp;gt;checkCsvResultFile:246 
Expected: [&quot;2018-03-12 08:00:00.000,Alice,This was a warning.,2,Success constant folding.&quot;, &quot;2018-03-12 09:00:00.000,Bob,This was another warning.,1,Success constant folding.&quot;, &quot;2018-03-12 09:00:00.000,Steve,This was another info.,2,Success constant folding.&quot;, &quot;2018-03-12 09:00:00.000,Alice,This was a info.,1,Success constant folding.&quot;] in any order
     but: Not matched: &quot;2018-03-12 08:00:00.000,Alice,This was a warning.,6,Success constant folding.&quot;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17138205" author="rmetzger" created="Wed, 17 Jun 2020 07:54:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3630&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3630&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17138264" author="zentol" created="Wed, 17 Jun 2020 09:02:29 +0000"  >&lt;p&gt;hmm. In the last run that  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt; reported, there was still plenty disk-space available. We have 2 leaked task executors, but those shouldn&apos;t cause a problem.&lt;br/&gt;
So we&apos;re back to square one.&lt;/p&gt;

&lt;p&gt;The next time the test fails we should have the kafka logs with &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-18301&quot; title=&quot;Backup Kafka logs on e2e failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-18301&quot;&gt;&lt;del&gt;FLINK-18301&lt;/del&gt;&lt;/a&gt;, maybe they contain a hint.&lt;/p&gt;</comment>
                            <comment id="17138272" author="zentol" created="Wed, 17 Jun 2020 09:09:57 +0000"  >&lt;p&gt;In one of the TaskExecutor logs we can see this line:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-06-16 22:03:26,594 WARN  org.apache.flink.kafka011.shaded.org.apache.kafka.clients.NetworkClient [] - Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; fetching metadata with correlation id 1 : {test-avro=LEADER_NOT_AVAILABLE}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There isn&apos;t any debugging info unfortunately, see &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-18343&quot; title=&quot;Enable DEBUG logging for java e2e tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-18343&quot;&gt;&lt;del&gt;FLINK-18343&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17138422" author="jark" created="Wed, 17 Jun 2020 13:13:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3687&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3687&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failures: 
[ERROR]   StreamingKafkaITCase.testKafka:166 expected:&amp;lt;[elephant,27,64213]&amp;gt; but was:&amp;lt;[elephant,41,64213]&amp;gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17162805" author="rmetzger" created="Wed, 22 Jul 2020 13:40:33 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Tests run: 3, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 132.418 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.tests.util.kafka.StreamingKafkaITCase
[ERROR] testKafka[0: kafka-version:0.10.2.2](org.apache.flink.tests.util.kafka.StreamingKafkaITCase)  Time elapsed: 43.356 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: Messages from Kafka 0.10.2.2: [elephant,41,64213, giraffe,9,65555, bee,31,65647, squirrel,86,66413] expected:&amp;lt;[elephant,27,64213]&amp;gt; but was:&amp;lt;[elephant,41,64213]&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.apache.flink.tests.util.kafka.StreamingKafkaITCase.testKafka(StreamingKafkaITCase.java:166)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=4722&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=4722&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17163181" author="dian.fu" created="Thu, 23 Jul 2020 02:43:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=4743&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=7f606211-1454-543c-70ab-c7a028a1ce8c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=4743&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=7f606211-1454-543c-70ab-c7a028a1ce8c&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-07-22T23:58:46.0860584Z [ERROR] testKafka[0: kafka-version:0.10.2.2](org.apache.flink.tests.util.kafka.StreamingKafkaITCase) Time elapsed: 46.849 s &amp;lt;&amp;lt;&amp;lt; FAILURE! 2020-07-22T23:58:46.0861582Z java.lang.AssertionError: Messages from Kafka 0.10.2.2: [elephant,41,64213, giraffe,9,65555, bee,31,65647, squirrel,86,66413] expected:&amp;lt;[elephant,27,64213]&amp;gt; but was:&amp;lt;[elephant,41,64213]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17165689" author="zentol" created="Mon, 27 Jul 2020 13:01:45 +0000"  >&lt;p&gt;I couldn&apos;t find anything obvious in the Kafka logs that hints at a problem; so we&apos;re somewhat back to square one.&lt;/p&gt;

&lt;p&gt;It is rather curious that the failure cases are consistent; the unexpected failure is always the same value.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jqin&quot; class=&quot;user-hover&quot; rel=&quot;jqin&quot;&gt;jqin&lt;/a&gt; Do you maybe have an idea what the problem could be?&lt;/p&gt;</comment>
                            <comment id="17166330" author="becket_qin" created="Tue, 28 Jul 2020 10:39:38 +0000"  >&lt;p&gt;I don&apos;t have a clue either. From the phenomenon itself, a wild guess is the aggregation value 14 is somehow doubled.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The expected final result 27 comes from the aggregation of three events: 5, 9, 13.&lt;/li&gt;
	&lt;li&gt;The error always have a 41, which is 14 greater than the expected result.&lt;/li&gt;
	&lt;li&gt;There are two possibilities for this to happen
	&lt;ul&gt;
		&lt;li&gt;There are duplicate messages in Kafka.&lt;/li&gt;
		&lt;li&gt;The state got wrong.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;If there are duplicate messages, then 5 and 9 must both be duplicate. In that case, the output sequence should be 14, 19, 28, 41. So there should also be 19 and 28 before 41 is emitted.&lt;/li&gt;
	&lt;li&gt;So mathematically speaking, it seems that the aggregated value of 14 is somehow doubled.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll try to reproduce this locally with some logging added.&lt;/p&gt;</comment>
                            <comment id="17167019" author="pnowojski" created="Wed, 29 Jul 2020 07:49:50 +0000"  >&lt;p&gt;Another instance:&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=4972&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=4972&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] testKafka[0: kafka-version:0.10.2.2](org.apache.flink.tests.util.kafka.StreamingKafkaITCase)  Time elapsed: 44.769 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: Messages from Kafka 0.10.2.2: [elephant,41,64213, giraffe,9,65555, bee,31,65647, squirrel,86,66413] expected:&amp;lt;[elephant,27,64213]&amp;gt; but was:&amp;lt;[elephant,41,64213]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17175628" author="stephanewen" created="Tue, 11 Aug 2020 14:56:22 +0000"  >&lt;p&gt;Just to double check: Is this something that is strictly occurring only with Kafka 0.10.x ?&lt;/p&gt;

&lt;p&gt;I think it is probably time to drop that version anyways, so if that is the only affected version, we may not have an issue.&lt;/p&gt;

&lt;p&gt;Also: Wasn&apos;t 0.10 before the &quot;idempotent producer&quot; ? Isn&apos;t it inherently possible for Kafka to have duplicates through producer-internal re-tries in 0.10 in some situations?&lt;/p&gt;
</comment>
                            <comment id="17183306" author="aljoscha" created="Mon, 24 Aug 2020 13:57:55 +0000"  >&lt;p&gt;I believe you&apos;re right: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-4815&quot; title=&quot;Idempotent/transactional Producer (KIP-98)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KAFKA-4815&quot;&gt;&lt;del&gt;KAFKA-4815&lt;/del&gt;&lt;/a&gt;. We should remove testing for the 0.10 producer, or maybe remove that producer altogether.&lt;/p&gt;</comment>
                            <comment id="17188378" author="rmetzger" created="Tue, 1 Sep 2020 11:41:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=6041&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=6041&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17194068" author="dian.fu" created="Fri, 11 Sep 2020 08:00:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=6451&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=7f606211-1454-543c-70ab-c7a028a1ce8c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=6451&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=7f606211-1454-543c-70ab-c7a028a1ce8c&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17196243" author="aljoscha" created="Tue, 15 Sep 2020 15:39:05 +0000"  >&lt;p&gt;Fixed via &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-19152&quot; title=&quot;Remove Kafka 0.10.x and 0.11.x connectors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-19152&quot;&gt;&lt;del&gt;FLINK-19152&lt;/del&gt;&lt;/a&gt;, which removes the Kafka 0.10 connector.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13311431">FLINK-18294</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13311465">FLINK-18301</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0dtzs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>