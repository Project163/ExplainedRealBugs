<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15427] State TTL RocksDb backend end-to-end test stalls on travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15427</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The &apos;State TTL RocksDb backend end-to-end test&apos; case stalls and finally timedout with error message:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;The job exceeded the maximum log length, and has been terminated.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://api.travis-ci.org/v3/job/629699416/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/629699416/log.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13276603">FLINK-15427</key>
            <summary>State TTL RocksDb backend end-to-end test stalls on travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klion26">Congxian Qiu</assignee>
                                    <reporter username="liyu">Yu Li</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Fri, 27 Dec 2019 11:48:19 +0000</created>
                <updated>Fri, 3 Jan 2020 10:49:51 +0000</updated>
                            <resolved>Fri, 3 Jan 2020 10:49:51 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Runtime / State Backends</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="17004128" author="klion26" created="Fri, 27 Dec 2019 11:49:10 +0000"  >&lt;p&gt;I&apos;ll&#160; take a look at this issue&lt;/p&gt;</comment>
                            <comment id="17004461" author="klion26" created="Sat, 28 Dec 2019 11:23:37 +0000"  >&lt;p&gt;This test itself passed, but failed when &lt;tt&gt;checking exceptions&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Checking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; errors...^M
Found error in log files:^M
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;after executing the command to find the exception we&apos;ll get&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2019-12-27 05:18:34,743 ERROR org.apache.flink.streaming.runtime.tasks.StreamTask           - Received CancelTaskException &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; we are not canceled. This is a bug and should be reported^M
org.apache.flink.runtime.execution.CancelTaskException: Consumed partition PipelinedSubpartitionView(index: 2) of ResultPartition 745fd76b3c0327b1b0732bb14045de1c@2e06db5ab07dfc5dabc32576a9a40a0f has been released.^M
        at org.apache.flink.runtime.io.network.partition.consumer.LocalInputChannel.getNextBuffer(LocalInputChannel.java:190)^M
        at org.apache.flink.runtime.io.network.partition.consumer.SingleInputGate.waitAndGetNextData(SingleInputGate.java:509)^M
        at org.apache.flink.runtime.io.network.partition.consumer.SingleInputGate.getNextBufferOrEvent(SingleInputGate.java:487)^M
        at org.apache.flink.runtime.io.network.partition.consumer.SingleInputGate.pollNext(SingleInputGate.java:475)^M
        at org.apache.flink.runtime.taskmanager.InputGateWithMetrics.pollNext(InputGateWithMetrics.java:75)^M
        at org.apache.flink.streaming.runtime.io.CheckpointedInputGate.pollNext(CheckpointedInputGate.java:125)^M
        at org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput.emitNext(StreamTaskNetworkInput.java:133)^M
        at org.apache.flink.streaming.runtime.io.StreamOneInputProcessor.processInput(StreamOneInputProcessor.java:69)^M
        at org.apache.flink.streaming.runtime.tasks.StreamTask.processInput(StreamTask.java:311)^M
        at org.apache.flink.streaming.runtime.tasks.mailbox.MailboxProcessor.runMailboxLoop(MailboxProcessor.java:187)^M
        at org.apache.flink.streaming.runtime.tasks.StreamTask.runMailboxLoop(StreamTask.java:488)^M
        at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:470)^M
        at org.apache.flink.runtime.taskmanager.Task.doRun(Task.java:702)^M

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This &lt;tt&gt;CancelException&lt;/tt&gt; was introduced by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AHeise&quot; class=&quot;user-hover&quot; rel=&quot;AHeise&quot;&gt;AHeise&lt;/a&gt;&#160;in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15317&quot; title=&quot;State TTL Heap backend end-to-end test fails on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15317&quot;&gt;&lt;del&gt;FLINK-15317&lt;/del&gt;&lt;/a&gt;, and I think &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15403&quot; title=&quot;&amp;#39;State Migration end-to-end test from 1.6&amp;#39; is unstable on travis.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15403&quot;&gt;&lt;del&gt;FLINK-15403&lt;/del&gt;&lt;/a&gt; has already been tracking it.&lt;/p&gt;

&lt;p&gt;For this issue, it wants to verify state ttl, if the verify failed, it will print something in the stdout. we used the &lt;tt&gt;check exceptions(which will check whether the `.out` file is empty or not)&lt;/tt&gt;&#160;to do this thing.&lt;/p&gt;

&lt;p&gt;So, I propose to check in the &lt;tt&gt;test_stream_state__ttl&lt;/tt&gt;.sh other than &lt;tt&gt;delegating to the exceptions check&lt;/tt&gt;, the reason is something like &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15105&quot; title=&quot;Resuming Externalized Checkpoint after terminal failure (rocks, incremental) end-to-end test stalls on travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15105&quot;&gt;&lt;del&gt;FLINK-15105&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;we&apos;ll add some checking logic in the end of &lt;tt&gt;test_stream_state_ttl.sh&lt;/tt&gt;&#160; such as below and skip exception check for this test. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=azagrebin&quot; class=&quot;user-hover&quot; rel=&quot;azagrebin&quot;&gt;azagrebin&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; grep &lt;span class=&quot;code-quote&quot;&gt;&quot;TtlVerificationContext{&quot;&lt;/span&gt; $FLINK_DIR/log/*.out &amp;gt; /dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; then
   exit 1; # contains the output
fi
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17005163" author="carp84" created="Mon, 30 Dec 2019 06:50:13 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/630372588/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/630372588/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17007399" author="till.rohrmann" created="Fri, 3 Jan 2020 10:49:51 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;master: &lt;br/&gt;
552a07677470d2df620aeb4e681e829f31d1526f&lt;br/&gt;
897e13793aa05a07ebb946e2198ee7b5d0c74e79&lt;/p&gt;

&lt;p&gt;1.10.0: &lt;br/&gt;
239c1640d5d09d89152980fe92f13a9e0d19186c&lt;br/&gt;
a7eec5cfffd4d22aaf31efd976540338bb95c7a8&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13276447">FLINK-15403</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 45 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0a17k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>