<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:45:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-17338] LocalExecutorITCase.testBatchQueryCancel test timeout</title>
                <link>https://issues.apache.org/jira/browse/FLINK-17338</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;CI &lt;a href=&quot;https://travis-ci.org/github/apache/flink/jobs/678185941&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/github/apache/flink/jobs/678185941&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running org.apache.flink.table.client.gateway.local.LocalExecutorITCase
[ERROR] Tests run: 70, Failures: 0, Errors: 1, Skipped: 5, Time elapsed: 226.359 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.table.client.gateway.local.LocalExecutorITCase
[ERROR] testBatchQueryCancel[Planner: old](org.apache.flink.table.client.gateway.local.LocalExecutorITCase)  Time elapsed: 30.009 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.junit.runners.model.TestTimedOutException: test timed out after 30000 milliseconds
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)
	at org.apache.flink.table.client.gateway.local.LocalExecutorITCase.testBatchQueryCancel(LocalExecutorITCase.java:733)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Errors: 
[ERROR]   LocalExecutorITCase.testBatchQueryCancel:733 &#194;&#187; TestTimedOut test timed out aft...
[INFO] 
[ERROR] Tests run: 70, Failures: 0, Errors: 1, Skipped: 5
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] flink-table-common ................................. SUCCESS [  9.955 s]
[INFO] flink-table-api-java ............................... SUCCESS [  4.615 s]
[INFO] flink-table-api-java-bridge ........................ SUCCESS [  4.150 s]
[INFO] flink-table-api-scala .............................. SUCCESS [  2.843 s]
[INFO] flink-table-api-scala-bridge ....................... SUCCESS [  2.843 s]
[INFO] flink-cep .......................................... SUCCESS [ 30.868 s]
[INFO] flink-table-planner ................................ SUCCESS [04:51 min]
[INFO] flink-cep-scala .................................... SUCCESS [  8.361 s]
[INFO] flink-sql-client ................................... FAILURE [04:21 min]
[INFO] flink-state-processor-api .......................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13300464">FLINK-17338</key>
            <summary>LocalExecutorITCase.testBatchQueryCancel test timeout</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 23 Apr 2020 07:20:42 +0000</created>
                <updated>Mon, 27 Apr 2020 05:43:57 +0000</updated>
                            <resolved>Sun, 26 Apr 2020 08:28:35 +0000</resolved>
                                    <version>1.10.0</version>
                    <version>1.11.0</version>
                                    <fixVersion>1.10.1</fixVersion>
                    <fixVersion>1.11.0</fixVersion>
                                    <component>Table SQL / Client</component>
                    <component>Table SQL / Legacy Planner</component>
                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17090344" author="till.rohrmann" created="Thu, 23 Apr 2020 07:31:18 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/678204034/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/678204034/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17090377" author="aljoscha" created="Thu, 23 Apr 2020 08:06:32 +0000"  >&lt;p&gt;This test has always been very heavy, on my machine some tests are pushing 10s or more. This means that we can pretty much expect them to timeout on Travis with only a 30s timeout.&lt;/p&gt;

&lt;p&gt;I have started investigating the runtime of this test recently. There are some quick fixes like excluding Hive catalogs from those tests but that doesn&apos;t solve the overall problem.&lt;/p&gt;

&lt;p&gt;For now, we can massively increase the timeout until we fix it properly. WDYT?&lt;/p&gt;</comment>
                            <comment id="17090454" author="rmetzger" created="Thu, 23 Apr 2020 09:56:58 +0000"  >&lt;p&gt;Also happening in my private AZP (MSFT hosted): &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=7891&amp;amp;view=logs&amp;amp;j=69332ead-8935-5abf-5b3d-e4280fb1ff4c&amp;amp;t=6855dd6e-a7b0-5fd1-158e-29fc186b16c8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=7891&amp;amp;view=logs&amp;amp;j=69332ead-8935-5abf-5b3d-e4280fb1ff4c&amp;amp;t=6855dd6e-a7b0-5fd1-158e-29fc186b16c8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m okay with that workaround as long as we mark this ticket a release blocker and really resolve it properly.&lt;/p&gt;</comment>
                            <comment id="17090557" author="aljoscha" created="Thu, 23 Apr 2020 12:03:08 +0000"  >&lt;p&gt;I increased the test timeouts master: 008e0afb3c62c059dcdf2c58a43cdd2e2d283512&lt;/p&gt;

&lt;p&gt;I don&apos;t think we will be able to fix this &quot;properly&quot; . Some tests are inefficient, yes, because they often recompile/optimize SQL queries. But I changed a test to only do the bare minimum and it still takes roughly 8s on my machine. The majority of this time is spent in Calcite, parsing and optimising the query, and then in a mix of Flink and Calcite to translate that into a JobGraph. Unless we speed up those parts or radically refactor this test we won&apos;t solve that.&lt;/p&gt;

&lt;p&gt;I&apos;ll look into it a bit more.&lt;/p&gt;</comment>
                            <comment id="17090580" author="aljoscha" created="Thu, 23 Apr 2020 12:42:34 +0000"  >&lt;p&gt;master: 008e0afb3c62c059dcdf2c58a43cdd2e2d283512&lt;/p&gt;

&lt;p&gt;Fixed by increasing timeouts, please re-open if it fails again.&lt;/p&gt;</comment>
                            <comment id="17090594" author="rmetzger" created="Thu, 23 Apr 2020 12:54:00 +0000"  >&lt;p&gt;Okay, thanks!&lt;/p&gt;</comment>
                            <comment id="17091247" author="carp84" created="Fri, 24 Apr 2020 06:47:41 +0000"  >&lt;p&gt;Also see this failure in release-1.10 crone job: &lt;a href=&quot;https://api.travis-ci.org/v3/job/678277566/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/678277566/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So back ported the fix into release-1.10 via: 0e2b520ec60cc11dce210bc38e574a05fa5a7734&lt;/p&gt;</comment>
                            <comment id="17092316" author="till.rohrmann" created="Sat, 25 Apr 2020 18:43:58 +0000"  >&lt;p&gt;It failed unfortunately again: &lt;a href=&quot;https://api.travis-ci.com/v3/job/323314732/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.com/v3/job/323314732/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17092320" author="carp84" created="Sat, 25 Apr 2020 18:49:36 +0000"  >&lt;p&gt;The same observation in latest release-1.10 crone job: &lt;a href=&quot;https://api.travis-ci.org/v3/job/679144604/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/679144604/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Now the error message is different, though (no more timeout but incorrect job status):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
15:51:15.970 [ERROR] testBatchQueryCancel[Planner: blink](org.apache.flink.table.client.gateway.local.LocalExecutorITCase)  Time elapsed: 31.938 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: expected:&amp;lt;CANCELED&amp;gt; but was:&amp;lt;FINISHED&amp;gt;
	at org.apache.flink.table.client.gateway.local.LocalExecutorITCase.testBatchQueryCancel(LocalExecutorITCase.java:738)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17092570" author="aljoscha" created="Sun, 26 Apr 2020 07:37:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liyu&quot; class=&quot;user-hover&quot; rel=&quot;liyu&quot;&gt;liyu&lt;/a&gt;  It&apos;s a different issue, the test added in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15669&quot; title=&quot;SQL client can&amp;#39;t cancel flink job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15669&quot;&gt;&lt;del&gt;FLINK-15669&lt;/del&gt;&lt;/a&gt; is flaky by design. I&apos;m reverting the test and re-opening &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15669&quot; title=&quot;SQL client can&amp;#39;t cancel flink job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15669&quot;&gt;&lt;del&gt;FLINK-15669&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17092588" author="aljoscha" created="Sun, 26 Apr 2020 08:28:29 +0000"  >&lt;p&gt;I reverted the broken tests: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15669?focusedCommentId=17092586&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17092586&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-15669?focusedCommentId=17092586&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17092586&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17093023" author="carp84" created="Mon, 27 Apr 2020 05:43:57 +0000"  >&lt;p&gt;Thanks for the analysis and clarification &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13300555">FLINK-17349</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13301062">FLINK-17389</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0dzbc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>