<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:21:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2690] CsvInputFormat cannot find the field of derived POJO class</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2690</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;A user reports &lt;tt&gt;CsvInputFormat&lt;/tt&gt; cannot find the field of derived POJO class. (&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/flink-user/201509.mbox/%3cCAJ54yvi6CbLdN7cYpey+xe8a5A_J1-6Tnx1wm1Eb63gVnQd16w@mail.gmail.com%3e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/flink-user/201509.mbox/%3cCAJ54yvi6CbLdN7cYpey+xe8a5A_J1-6Tnx1wm1Eb63gVnQd16w@mail.gmail.com%3e&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;The reason of the bug is that &lt;tt&gt;CsvInputFormat&lt;/tt&gt; uses &lt;tt&gt;getDeclaredField&lt;/tt&gt; method without scanning base classes to find the field. When &lt;tt&gt;CsvInputFormat&lt;/tt&gt; was wrote, &lt;tt&gt;TypeInformation&lt;/tt&gt; cannot be serialized. So we needed to initialize &lt;tt&gt;TypeInformation&lt;/tt&gt; in &lt;tt&gt;open&lt;/tt&gt; method manually. Some mistakes in initializing cause this bug.&lt;/p&gt;

&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2637&quot; title=&quot;Add abstract equals, hashCode and toString methods to TypeInformation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2637&quot;&gt;&lt;del&gt;FLINK-2637&lt;/del&gt;&lt;/a&gt; is merged, we can serialize &lt;tt&gt;TypeInformation&lt;/tt&gt; and don&apos;t need to create field objects in &lt;tt&gt;CsvInputFormat&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12873038">FLINK-2690</key>
            <summary>CsvInputFormat cannot find the field of derived POJO class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="chiwanpark">Chiwan Park</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Sep 2015 16:59:15 +0000</created>
                <updated>Thu, 28 Feb 2019 14:29:13 +0000</updated>
                            <resolved>Mon, 28 Sep 2015 10:23:44 +0000</resolved>
                                    <version>0.10.0</version>
                                                    <component>API / Scala</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14790869" author="zentol" created="Wed, 16 Sep 2015 18:26:41 +0000"  >&lt;p&gt;It appears that &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2684&quot; title=&quot;Make TypeInformation non-serializable again by removing Table API&amp;#39;s need for it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2684&quot;&gt;&lt;del&gt;FLINK-2684&lt;/del&gt;&lt;/a&gt; collides with this issue, it proposes making TypeInformation not serializable.&lt;/p&gt;</comment>
                            <comment id="14802695" author="till.rohrmann" created="Thu, 17 Sep 2015 09:59:15 +0000"  >&lt;p&gt;Extracting properly all declared fields in the &lt;tt&gt;CsvInputFormat&lt;/tt&gt; also seems to solve the problem. I&apos;ve code which does this. Will open PR for it.&lt;/p&gt;</comment>
                            <comment id="14802697" author="chiwanpark" created="Thu, 17 Sep 2015 10:01:24 +0000"  >&lt;p&gt;Okay. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14802966" author="githubbot" created="Thu, 17 Sep 2015 14:15:06 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1141&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1141&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2690&quot; title=&quot;CsvInputFormat cannot find the field of derived POJO class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2690&quot;&gt;&lt;del&gt;FLINK-2690&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;api-breaking&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;scala api&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;java api&amp;#93;&lt;/span&gt; Allows CsvInputFormat to use derived Pojos&lt;/p&gt;

&lt;p&gt;    This PR adds support for the `CsvInputFormat` to use derived Pojos. In order to also find pojo fields defined in a parent class, one has to traverse the type hierarchy. This is done by the function `findAllFields`.&lt;/p&gt;

&lt;p&gt;    While working on the `CsvInputFormat`, I noticed that the `ScalaCsvInputFormat` shared almost all code with the `CsvInputFormat`. In order to reduce duplicated code, both input formats now extend the `CommonCsvInputFormat` which contains the shared code.&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixCsvInputFormatPojo&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1141.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1141.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1141&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit bf2e2c40f340ccfe31256744380345287c9e6f9e&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-09-17T13:28:25Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2690&quot; title=&quot;CsvInputFormat cannot find the field of derived POJO class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2690&quot;&gt;&lt;del&gt;FLINK-2690&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;api-breaking&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;scala api&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;java api&amp;#93;&lt;/span&gt; Adds functionality to the CsvInputFormat to find fields defined in a super class of a Pojo. Refactors CsvInputFormat to share code between this format and ScalaCsvInputFormat.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14906446" author="githubbot" created="Thu, 24 Sep 2015 14:52:35 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1141#discussion_r40327817&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1141#discussion_r40327817&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-staging/flink-language-binding/flink-language-binding-generic/src/main/java/org/apache/flink/languagebinding/api/java/common/PlanBinder.java &amp;#8212;&lt;br/&gt;
    @@ -256,7 +258,20 @@ protected OperationInfo createOperationInfo(Operation operationIdentifier) throw&lt;br/&gt;
     	protected abstract INFO createOperationInfo(AbstractOperation operationIdentifier) throws IOException;&lt;/p&gt;

&lt;p&gt;     	private void createCsvSource(OperationInfo info) throws IOException {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;sets.put(info.setID, env.createInput(new CsvInputFormat(new Path(info.path), info.lineDelimiter, info.fieldDelimiter, info.types), info.types).name(&quot;CsvSource&quot;));&lt;br/&gt;
    +		if (!(info.types instanceof CompositeType)) 
{
    +			throw new RuntimeException(&quot;The output type of a csv source has to be a tuple or a &quot; +
    +				&quot;pojo type. The derived type is &quot; + info);
    +		}
&lt;p&gt;    +&lt;br/&gt;
    +		sets.put(&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Style comment: I think that is a bit much line breaking for the common Java style. I think the common Java styles don&apos;t do that quite as heavy as the Scala style.&lt;/p&gt;</comment>
                            <comment id="14906450" author="githubbot" created="Thu, 24 Sep 2015 14:53:48 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1141#issuecomment-142953065&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1141#issuecomment-142953065&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good to me, feel free to merge.&lt;/p&gt;

&lt;p&gt;    Minor comment: We now have a `GenericCsvInputFormat` and a `CommonCSVInputFormat`. Anything preventing us from unifying them into one class? Or are there conflicts with the deprecated Record API?&lt;/p&gt;</comment>
                            <comment id="14906467" author="githubbot" created="Thu, 24 Sep 2015 15:05:47 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1141#issuecomment-142956414&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1141#issuecomment-142956414&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes the reason why I introduced the `CommonCSVInputFormat` instead of unifying it with the `GenericCsvInputFormat` was that we still have the Record API `CsvInputFormat` in the code base. It doesn&apos;t need the pojo type information and, thus, I thought that it does not make sense to let it inherit from a class which has these fields. Actually, I would be in favour of removing the Record API&apos;s `CsvInputFormat` if possible. Moreover, I would like to more cleanly separate the tuple type `CsvInputFormat` and the pojo type `CsvInputFormat`, because the pojo support was kind of hacked into the original `CsvInputFormat`. Also the way the input format is set up, is imho a little bit clumsy and error-prone (see &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2692&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-2692&lt;/a&gt;). But this has no high priority.&lt;/p&gt;</comment>
                            <comment id="14906468" author="githubbot" created="Thu, 24 Sep 2015 15:06:43 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1141#discussion_r40329651&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1141#discussion_r40329651&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-staging/flink-language-binding/flink-language-binding-generic/src/main/java/org/apache/flink/languagebinding/api/java/common/PlanBinder.java &amp;#8212;&lt;br/&gt;
    @@ -256,7 +258,20 @@ protected OperationInfo createOperationInfo(Operation operationIdentifier) throw&lt;br/&gt;
     	protected abstract INFO createOperationInfo(AbstractOperation operationIdentifier) throws IOException;&lt;/p&gt;

&lt;p&gt;     	private void createCsvSource(OperationInfo info) throws IOException {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;sets.put(info.setID, env.createInput(new CsvInputFormat(new Path(info.path), info.lineDelimiter, info.fieldDelimiter, info.types), info.types).name(&quot;CsvSource&quot;));&lt;br/&gt;
    +		if (!(info.types instanceof CompositeType)) 
{
    +			throw new RuntimeException(&quot;The output type of a csv source has to be a tuple or a &quot; +
    +				&quot;pojo type. The derived type is &quot; + info);
    +		}
&lt;p&gt;    +&lt;br/&gt;
    +		sets.put(&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    That is true. Will change it when merging.&lt;/p&gt;</comment>
                            <comment id="14907953" author="githubbot" created="Fri, 25 Sep 2015 11:35:54 +0000"  >&lt;p&gt;Github user chiwanpark commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1141#issuecomment-143192190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1141#issuecomment-143192190&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good to merge and +1 for &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2692&quot; title=&quot;Untangle CsvInputFormat into PojoTypeCsvInputFormat and TupleTypeCsvInputFormat &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2692&quot;&gt;&lt;del&gt;FLINK-2692&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14933100" author="githubbot" created="Mon, 28 Sep 2015 09:54:41 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1141#issuecomment-143697315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1141#issuecomment-143697315&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Will merge this now.&lt;/p&gt;</comment>
                            <comment id="14933122" author="githubbot" created="Mon, 28 Sep 2015 10:23:35 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1141&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1141&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14933123" author="till.rohrmann" created="Mon, 28 Sep 2015 10:23:44 +0000"  >&lt;p&gt;Fixed via 501a9b0854995b3de1c293b3391eeb3048daeef0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k9db:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>