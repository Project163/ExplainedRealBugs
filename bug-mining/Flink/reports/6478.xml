<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:10:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-27999] NoSuchMethodError when using Hive 3 dialect</title>
                <link>https://issues.apache.org/jira/browse/FLINK-27999</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;VirtualColumn.VIRTUAL_COLUMN_NAMES uses different types in Hive2 / Hive3, causing NoSuchMethodErrors when the Hive dialect is used.&lt;/p&gt;

&lt;p&gt;When use &apos;mvn test -PHive3.1.1&apos;&#160; Hive connector, it will throw the following exception &quot;Caused by: MetaException(message:Required table missing : &quot;DBS&quot; in Catalog &quot;&quot; Schema &quot;&quot;. DataNucleus requires this table to perform its persistence operations. Either your MetaData is incorrect, or you need to enable &quot;datanucleus.schema.autoCreateTables&quot;)&quot;.&lt;/p&gt;

&lt;p&gt;From the error message, we can know the reason is the configuration &quot;datanucleus.schema.autoCreateTables&quot; is not true. But when create HiveCatalog, we do really set the configuration &quot;datanucleus.schema.autoCreateTables&quot; to true in the hive-site.xml.&lt;/p&gt;

&lt;p&gt;After some debuging, I found the reason is that some test modify a static variable, and then boil the other test.&lt;/p&gt;

&lt;p&gt;When running HiveCatalogFactoryTest, it will call &#160;HiveCatalog#createHiveConf(@Nullable String hiveConfDir, @Nullable String hadoopConfDir) to create a HiveConf for HiveCatalog. In this method, it will set&#160; the static variable &quot;hiveSiteURL&quot; to null.&lt;/p&gt;

&lt;p&gt;Then, if we run &quot;HiveCatalogHiveMetadataTest&quot;, it will call HiveTestUtils#createHiveConf() to create HiveConf. The following code will create a empty HiveConf;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HiveConf hiveConf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HiveConf(); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But in the&#160;initialize function of HiveConf, it first will apply all default variables, so &quot;datanucleus.schema.autoCreateTables&quot; will be set to false. And the &quot;hiveSiteURL&quot; is null, so skip add the resource. Then, it will check &quot;&quot;hive.metastore.schema.verification&quot; is true or false. If it&apos;s true, it will set &quot;datanucleus.schema.autoCreateTables&quot; to false. This have a higher priority and thus overwrite the value we configure in hive-site.xml.&lt;/p&gt;

&lt;p&gt;To fix it, we only need to reset the static variable &quot;hiveSiteURL&quot; with our hive-site.xml.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13449413">FLINK-27999</key>
            <summary>NoSuchMethodError when using Hive 3 dialect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luoyuxia">luoyuxia</assignee>
                                    <reporter username="luoyuxia">luoyuxia</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 10 Jun 2022 10:08:44 +0000</created>
                <updated>Mon, 20 Jun 2022 12:34:14 +0000</updated>
                            <resolved>Tue, 14 Jun 2022 08:32:46 +0000</resolved>
                                    <version>1.15.0</version>
                                    <fixVersion>1.15.1</fixVersion>
                    <fixVersion>1.16.0</fixVersion>
                                    <component>Connectors / Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17552659" author="martijnvisser" created="Fri, 10 Jun 2022 10:15:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=luoyuxia&quot; class=&quot;user-hover&quot; rel=&quot;luoyuxia&quot;&gt;luoyuxia&lt;/a&gt; Can you make the title more descriptive / add a description? This ticket is now rather vague&lt;/p&gt;</comment>
                            <comment id="17552673" author="martijnvisser" created="Fri, 10 Jun 2022 10:35:16 +0000"  >&lt;p&gt;Thank you so much &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=luoyuxia&quot; class=&quot;user-hover&quot; rel=&quot;luoyuxia&quot;&gt;luoyuxia&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17552677" author="luoyuxia" created="Fri, 10 Jun 2022 10:35:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijnvisser&quot; class=&quot;user-hover&quot; rel=&quot;martijnvisser&quot;&gt;martijnvisser&lt;/a&gt; Thanks for your reminder. I will update it later.&lt;/p&gt;</comment>
                            <comment id="17553979" author="zentol" created="Tue, 14 Jun 2022 08:32:46 +0000"  >&lt;p&gt;master: 69390b71be731557397c4523e818c3fae1af278a&lt;br/&gt;
1.15: 90b8e82ee8a868864e65e63076fd723bdc9796d9 &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13449955">FLINK-28042</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z134g8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>