<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:57:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-22886] Thread leak in RocksDBStateUploader</title>
                <link>https://issues.apache.org/jira/browse/FLINK-22886</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;tt&gt;ExecutorService&lt;/tt&gt; in &lt;tt&gt;RocksDBStateUploader&lt;/tt&gt; is not shut down, which may leak thread when tasks fail.&lt;/p&gt;

&lt;p&gt;BTW, we should name the thread group in &lt;tt&gt;ExecutorService&lt;/tt&gt;, otherwise what we see in the stack, is a lot of threads named with pool-m-thread-n&#160;like this:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13026450/13026450_image-2021-06-06-13-46-34-604.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382322">FLINK-22886</key>
            <summary>Thread leak in RocksDBStateUploader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mayuehappy">Yue Ma</assignee>
                                    <reporter username="wind_ljy">Jiayi Liao</reporter>
                        <labels>
                            <label>critical</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sun, 6 Jun 2021 05:45:39 +0000</created>
                <updated>Sat, 28 Aug 2021 12:19:44 +0000</updated>
                            <resolved>Tue, 22 Jun 2021 18:27:38 +0000</resolved>
                                    <version>1.11.3</version>
                    <version>1.13.1</version>
                    <version>1.12.4</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.12.5</fixVersion>
                    <fixVersion>1.13.2</fixVersion>
                                    <component>Runtime / State Backends</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17358323" author="yunta" created="Mon, 7 Jun 2021 02:58:09 +0000"  >&lt;p&gt;Thanks for reporting this, would you like to fix this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wind_ljy&quot; class=&quot;user-hover&quot; rel=&quot;wind_ljy&quot;&gt;wind_ljy&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17358338" author="wind_ljy" created="Mon, 7 Jun 2021 03:55:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt; Hi Yun, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mayuehappy&quot; class=&quot;user-hover&quot; rel=&quot;mayuehappy&quot;&gt;mayuehappy&lt;/a&gt; is solving this issue in our inner version, you can assign this to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mayuehappy&quot; class=&quot;user-hover&quot; rel=&quot;mayuehappy&quot;&gt;mayuehappy&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="17358345" author="yunta" created="Mon, 7 Jun 2021 04:15:38 +0000"  >&lt;p&gt;Glad to know ready solution.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mayuehappy&quot; class=&quot;user-hover&quot; rel=&quot;mayuehappy&quot;&gt;mayuehappy&lt;/a&gt;, please go ahead to create PR.&lt;/p&gt;</comment>
                            <comment id="17364075" author="mayuehappy" created="Wed, 16 Jun 2021 05:47:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt;&#160;Sorry for the late creation of pr. &lt;a href=&quot;https://github.com/apache/flink/pull/16171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/16171&lt;/a&gt;&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="17364147" author="roman_khachatryan" created="Wed, 16 Jun 2021 08:49:55 +0000"  >&lt;p&gt;FYI there is a PR already in a duplicate ticket: &lt;a href=&quot;https://github.com/apache/flink/pull/16168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/16168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Maybe we can pull the commit from 16171 with a unit test add it to 16168 and merge the resulting PR with two commits?&lt;/p&gt;</comment>
                            <comment id="17364229" author="mayuehappy" created="Wed, 16 Jun 2021 10:45:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roman_khachatryan&quot; class=&quot;user-hover&quot; rel=&quot;roman_khachatryan&quot;&gt;roman_khachatryan&lt;/a&gt;&#160;thx, I will solve it soon&lt;/p&gt;</comment>
                            <comment id="17364376" author="mayuehappy" created="Wed, 16 Jun 2021 16:44:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roman_khachatryan&quot; class=&quot;user-hover&quot; rel=&quot;roman_khachatryan&quot;&gt;roman_khachatryan&lt;/a&gt;&#160; Follow your suggestion, i&#160;merge the resulting PR with two commits .&#160;&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/16171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/16171&lt;/a&gt;&#160;&#160;&lt;br/&gt;
would you please take a review?&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17366658" author="roman_khachatryan" created="Mon, 21 Jun 2021 15:06:50 +0000"  >&lt;p&gt;Merged into master as&#160;3ebb34ec5e67f70f13898570d2f331fc9f32b4f7.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mayuehappy&quot; class=&quot;user-hover&quot; rel=&quot;mayuehappy&quot;&gt;mayuehappy&lt;/a&gt;&#160;would you like to publish a backport PR for 1.12?&#160;&lt;/p&gt;

&lt;p&gt;(alternatively, I can push the commit after CI, there shouldn&apos;t be any conflicts or comments)&lt;/p&gt;</comment>
                            <comment id="17366959" author="mayuehappy" created="Tue, 22 Jun 2021 03:06:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roman_khachatryan&quot; class=&quot;user-hover&quot; rel=&quot;roman_khachatryan&quot;&gt;roman_khachatryan&lt;/a&gt; ok ,There is a little difference between 1.12 and the master code, I will&#160; publish it&#160; soon&lt;/p&gt;</comment>
                            <comment id="17367044" author="mayuehappy" created="Tue, 22 Jun 2021 06:40:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/pull/16234&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/16234&lt;/a&gt;&#160; &#160;This commit includes bug fixes in &lt;a href=&quot;https://github.com/apache/flink/pull/16168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/16168&lt;/a&gt;&#160;&#160; and unit tests parts in&#160;&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/16171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/16171&lt;/a&gt;&#160;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roman_khachatryan&quot; class=&quot;user-hover&quot; rel=&quot;roman_khachatryan&quot;&gt;roman_khachatryan&lt;/a&gt;&#160;would you please take a review again?&lt;/p&gt;</comment>
                            <comment id="17367597" author="roman_khachatryan" created="Tue, 22 Jun 2021 18:27:00 +0000"  >&lt;p&gt;Reviewed and merged into 1.12 as 20da2a10dd91d7dbc935a11dcf4964de8d7bef2b&lt;br/&gt;
and into 1.13 as 4519089d4a45f223ca3ffd2a88864d02a059f8cd.&lt;/p&gt;

&lt;p&gt;Thanks a lot for providing the fix and the test!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13384029">FLINK-23003</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13026450" name="image-2021-06-06-13-46-34-604.png" size="268889" author="wind_ljy" created="Sun, 6 Jun 2021 05:46:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rp0o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>