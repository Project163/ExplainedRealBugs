<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:33:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9257] End-to-end tests prints &quot;All tests PASS&quot; even if individual test-script returns non-zero exit code</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9257</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;In some cases the test-suite exits with non-zero exit code but still prints &quot;All tests PASS&quot; to stdout. This happens because how the test runner works, which is roughly as follows&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Either run-nightly-tests.sh or run-precommit-tests.sh executes a suite of tests consisting of one multiple bash scripts.&lt;/li&gt;
	&lt;li&gt;As soon as one of those bash scripts exists with non-zero exit code, the tests won&apos;t continue to run and the test-suite will also exit with non-zero exit code.&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;During the cleanup hook (trap cleanup EXIT in common.sh) it will be checked whether there are non-empty out files or log files with certain exceptions. If a tests fails with non-zero exit code, but does not have any exceptions or .out files, this will still print &quot;All tests PASS&quot; to stdout, even though they don&apos;t&lt;/b&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13155150">FLINK-9257</key>
            <summary>End-to-end tests prints &quot;All tests PASS&quot; even if individual test-script returns non-zero exit code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="florianschmidt">Florian Schmidt</assignee>
                                    <reporter username="florianschmidt">Florian Schmidt</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Apr 2018 14:50:46 +0000</created>
                <updated>Thu, 14 Jun 2018 23:51:42 +0000</updated>
                            <resolved>Thu, 14 Jun 2018 23:51:11 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.1</fixVersion>
                    <fixVersion>1.6.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16483867" author="githubbot" created="Tue, 22 May 2018 12:28:42 +0000"  >&lt;p&gt;GitHub user florianschmidt1994 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9257&quot; title=&quot;End-to-end tests prints &amp;quot;All tests PASS&amp;quot; even if individual test-script returns non-zero exit code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9257&quot;&gt;&lt;del&gt;FLINK-9257&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;E2E Tests&amp;#93;&lt;/span&gt; Fix wrong &quot;All tests pass&quot; message&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;br/&gt;
    Fix a wrongly printed &quot;All tests PASS&quot; message when they actually don&apos;t&quot;&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Previously the behaviour was like this:&lt;br/&gt;
    &amp;gt;During the cleanup hook (trap cleanup EXIT in common.sh) it will be checked whether there are non-empty out files or log files with certain exceptions. If a tests fails with non-zero exit code, but does not have any exceptions or .out files, this will still print &quot;All tests PASS&quot; to stdout, even though they don&apos;t&lt;/p&gt;

&lt;p&gt;    With this PR the whole test-runner is restructured so that&lt;br/&gt;
    1. The check for non-empty .out files, errors and exceptions in logs is triggered from the `run_test` method&lt;br/&gt;
    2. The error message after each test is dependant on both the exit code of the test script as well as the result from checking the log files&lt;br/&gt;
    3. cleanup is now triggered by the test runner, not by the individual tests anymore&lt;br/&gt;
    4. tests that signaled their failure by modifying `PASS`  now do so by exiting with non-zero exit code&lt;br/&gt;
    5. `check_result_hash` exits with 1 instead of modifying `PASS`&lt;/p&gt;

&lt;p&gt;    Additionally this PR&lt;br/&gt;
    1. Reformats the output a little compared to previous tests&lt;br/&gt;
    ```&lt;br/&gt;
    Flink dist directory: /Users/florianschmidt/dev/flink/flink-dist/target/flink-1.6-SNAPSHOT-bin/flink-1.6-SNAPSHOT&lt;br/&gt;
    TEST_DATA_DIR: /Users/florianschmidt/dev/flink/flink-end-to-end-tests/temp-test-directory-00N&lt;br/&gt;
    Flink dist directory: /Users/florianschmidt/dev/flink/flink-dist/target/flink-1.6-SNAPSHOT-bin/flink-1.6-SNAPSHOT&lt;br/&gt;
    TEST_DATA_DIR: /Users/florianschmidt/dev/flink/flink-end-to-end-tests/temp-test-directory-00N&lt;br/&gt;
    flink-end-to-end-test directory: /Users/florianschmidt/dev/flink/flink-end-to-end-tests&lt;br/&gt;
    Flink distribution directory: /Users/florianschmidt/dev/flink/flink-dist/target/flink-1.6-SNAPSHOT-bin/flink-1.6-SNAPSHOT&lt;/p&gt;

&lt;p&gt;    ==============================================================================&lt;br/&gt;
    Running &apos;Streaming Python Wordcount end-to-end test&apos;&lt;br/&gt;
    ==============================================================================&lt;br/&gt;
    Flink dist directory: /Users/florianschmidt/dev/flink/flink-dist/target/flink-1.6-SNAPSHOT-bin/flink-1.6-SNAPSHOT&lt;br/&gt;
    TEST_DATA_DIR: /Users/florianschmidt/dev/flink/flink-end-to-end-tests/test-scripts/temp-test-directory-00N&lt;br/&gt;
    Starting cluster.&lt;br/&gt;
    Starting standalonesession daemon on host Florians-MBP.fritz.box.&lt;br/&gt;
    Starting taskexecutor daemon on host Florians-MBP.fritz.box.&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Dispatcher REST endpoint is up.&lt;br/&gt;
    Starting execution of program&lt;br/&gt;
    Program execution finished&lt;br/&gt;
    Job with JobID 436dfd1f2a81ab4f818fc7fb9c395f0c has finished.&lt;br/&gt;
    Job Runtime: 7512 ms&lt;br/&gt;
    pass StreamingPythonWordCount&lt;br/&gt;
    Stopping taskexecutor daemon (pid: 9877) on host Florians-MBP.fritz.box.&lt;br/&gt;
    Stopping standalonesession daemon (pid: 9585) on host Florians-MBP.fritz.box.&lt;br/&gt;
    No zookeeper daemon to stop on host Florians-MBP.fritz.box.&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;PASS&amp;#93;&lt;/span&gt; &apos;Streaming Python Wordcount end-to-end test&apos; passed after 0 minutes and 22 seconds! Test exited with exit code 0.&lt;/p&gt;


&lt;p&gt;    ==============================================================================&lt;br/&gt;
    Running &apos;Wordcount end-to-end test&apos;&lt;br/&gt;
    ==============================================================================&lt;br/&gt;
    Flink dist directory: /Users/florianschmidt/dev/flink/flink-dist/target/flink-1.6-SNAPSHOT-bin/flink-1.6-SNAPSHOT&lt;br/&gt;
    TEST_DATA_DIR: /Users/florianschmidt/dev/flink/flink-end-to-end-tests/test-scripts/temp-test-directory-24N&lt;br/&gt;
    ```&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
	&lt;li&gt;I ran the test scripts manually and checked that they still behave as expected&lt;/li&gt;
	&lt;li&gt;I used the following script as a sample e2e-test to trigger different failure / success behaviours&lt;br/&gt;
    ```&lt;br/&gt;
    #!/usr/bin/env bash&lt;br/&gt;
    source &quot;$(dirname &quot;$0&quot;)&quot;/common.sh&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;each of those can be used to cause a test to fail&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;echo &quot;This should cause the test to fail&quot; &amp;gt; $FLINK_DIR/log/test.out&lt;/li&gt;
	&lt;li&gt;check_result_hash &quot;asf&quot; &quot;$FLINK_DIR/log/&quot;&lt;/li&gt;
	&lt;li&gt;exit 1&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    function test_cleanup &lt;/p&gt;
{
        echo &quot;Something&quot;
    
        # Uncomment to see test fail in cleanup
        # exit 2
    }

&lt;p&gt;    trap test_cleanup EXIT&lt;br/&gt;
    ```&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): no&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: no&lt;/li&gt;
	&lt;li&gt;The serializers: no&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): no&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: no&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: no&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? no&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? not applicable&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/florianschmidt1994/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/florianschmidt1994/flink&lt;/a&gt; flink-9257-fix-all-tests-pass-message&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #6053&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2ca08c6ed0a4faea7e4094004d8d73aaa9140ac3&lt;br/&gt;
Author: Florian Schmidt &amp;lt;florian.schmidt.1994@...&amp;gt;&lt;br/&gt;
Date:   2018-05-22T09:36:55Z&lt;/p&gt;

&lt;p&gt;    Move error/exception/out checking to functions&lt;/p&gt;

&lt;p&gt;commit 54c23a7858efad8d2b7dfda932ad5f50080bf95a&lt;br/&gt;
Author: Florian Schmidt &amp;lt;florian.schmidt.1994@...&amp;gt;&lt;br/&gt;
Date:   2018-05-22T11:19:23Z&lt;/p&gt;

&lt;p&gt;    Use changed test runner for nightly tests&lt;/p&gt;

&lt;p&gt;commit 9cac304e4852b1c89ccf750446bda667768be2bb&lt;br/&gt;
Author: Florian Schmidt &amp;lt;florian.schmidt.1994@...&amp;gt;&lt;br/&gt;
Date:   2018-05-22T11:22:03Z&lt;/p&gt;

&lt;p&gt;    Use new test runner for pre-commit tests&lt;/p&gt;

&lt;p&gt;commit c5108fee328e4b33558c46a6f52e03a2aa7a6dbc&lt;br/&gt;
Author: Florian Schmidt &amp;lt;florian.schmidt.1994@...&amp;gt;&lt;br/&gt;
Date:   2018-05-22T11:35:17Z&lt;/p&gt;

&lt;p&gt;    Use script exit codes where PASS=&quot;&quot; has been used&lt;/p&gt;

&lt;p&gt;commit ee2cfc489209baa8963adbdc05c55bf6b8f41aae&lt;br/&gt;
Author: Florian Schmidt &amp;lt;florian.schmidt.1994@...&amp;gt;&lt;br/&gt;
Date:   2018-05-22T11:44:29Z&lt;/p&gt;

&lt;p&gt;    Exit immediately on check_result_hash failure&lt;/p&gt;

&lt;p&gt;commit acbbae63e11fceac74e1e691e967731235268a8c&lt;br/&gt;
Author: Florian Schmidt &amp;lt;florian.schmidt.1994@...&amp;gt;&lt;br/&gt;
Date:   2018-05-22T11:45:02Z&lt;/p&gt;

&lt;p&gt;    Add missing initialization for test_has_errors&lt;/p&gt;

&lt;p&gt;commit 43a6244e34dcbdfa9727b49b0946b0f055510cf9&lt;br/&gt;
Author: Florian Schmidt &amp;lt;florian.schmidt.1994@...&amp;gt;&lt;br/&gt;
Date:   2018-05-22T11:59:55Z&lt;/p&gt;

&lt;p&gt;    Restructure test runner for nicer output&lt;/p&gt;

&lt;p&gt;commit d4785eb23bf772cded6859f0545812a1be1e0991&lt;br/&gt;
Author: Florian Schmidt &amp;lt;florian.schmidt.1994@...&amp;gt;&lt;br/&gt;
Date:   2018-05-22T12:03:38Z&lt;/p&gt;

&lt;p&gt;    Remove sample test and unnecessary EXIT_CODE&lt;/p&gt;

&lt;p&gt;commit 8f404f9f6dedbf58ab96fa515569ea50b83d79f7&lt;br/&gt;
Author: Florian Schmidt &amp;lt;florian.schmidt.1994@...&amp;gt;&lt;br/&gt;
Date:   2018-05-22T12:11:41Z&lt;/p&gt;

&lt;p&gt;    Add all tests passed message&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16483897" author="githubbot" created="Tue, 22 May 2018 12:52:05 +0000"  >&lt;p&gt;Github user florianschmidt1994 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @zentol Maybe you could have a look at this?&lt;/p&gt;</comment>
                            <comment id="16483906" author="githubbot" created="Tue, 22 May 2018 13:03:08 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ll take a look tomorrow.&lt;/p&gt;</comment>
                            <comment id="16486730" author="githubbot" created="Wed, 23 May 2018 05:28:58 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r190124962&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r190124962&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/run-pre-commit-tests.sh &amp;#8212;&lt;br/&gt;
    @@ -31,56 +31,23 @@ if [ -z &quot;$FLINK_DIR&quot; ] ; then&lt;br/&gt;
     fi&lt;/p&gt;

&lt;p&gt;     source &quot;$(dirname &quot;$0&quot;)&quot;/test-scripts/common.sh&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I think this can now be removed?&lt;/p&gt;</comment>
                            <comment id="16486731" author="githubbot" created="Wed, 23 May 2018 05:28:58 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r190125404&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r190125404&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/test-scripts/test-runner-common.sh &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,76 @@&lt;br/&gt;
    +#!/usr/bin/env bash&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +# distributed with this work for additional information&lt;br/&gt;
    +# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +# with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +# See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +source &quot;$(pwd)&quot;/test-scripts/common.sh&lt;br/&gt;
    +&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +# Prints the given description, runs the given test and prints how long the execution took.&lt;br/&gt;
    +# Arguments:&lt;br/&gt;
    +#   $1: description of the test&lt;br/&gt;
    +#   $2: command to execute&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +function run_test {&lt;br/&gt;
    +    description=&quot;$1&quot;&lt;br/&gt;
    +    command=&quot;$2&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +    printf &quot;\n==============================================================================\n&quot;&lt;br/&gt;
    +    printf &quot;Running &apos;${description}&apos;\n&quot;&lt;br/&gt;
    +    printf &quot;==============================================================================\n&quot;&lt;br/&gt;
    +    start_timer&lt;br/&gt;
    +    ${command}&lt;br/&gt;
    +    exit_code=&quot;$?&quot;&lt;br/&gt;
    +    time_elapsed=$(end_timer)&lt;br/&gt;
    +&lt;br/&gt;
    +    check_logs_for_errors&lt;br/&gt;
    +    check_logs_for_exceptions&lt;br/&gt;
    +    check_logs_for_non_empty_out_files&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Maybe we should move all these methods:&lt;br/&gt;
    ```&lt;br/&gt;
    start_timer&lt;br/&gt;
    end_timer&lt;br/&gt;
    check_logs_for_errors&lt;br/&gt;
    check_logs_for_exceptions&lt;br/&gt;
    check_logs_for_non_empty_out_files&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    to `test-runner-common.sh` since that&apos;s the only place they are used anyways&lt;/p&gt;</comment>
                            <comment id="16486732" author="githubbot" created="Wed, 23 May 2018 05:28:58 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r190126071&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r190126071&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/test-scripts/test_local_recovery_and_scheduling.sh &amp;#8212;&lt;br/&gt;
    @@ -53,8 +53,6 @@ function cleanup_after_test {&lt;br/&gt;
         #&lt;br/&gt;
         kill ${watchdog_pid} 2&amp;gt; /dev/null&lt;br/&gt;
         wait ${watchdog_pid} 2&amp;gt; /dev/null&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;#&lt;/li&gt;
	&lt;li&gt;cleanup
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The `test_local_recovery_and_scheduling` test currently bundles several executions of the test (e.g. with different state backend configurations) in a single run of the test script. That&apos;s why it required this cleanup within the test itself.&lt;/p&gt;

&lt;p&gt;    How would the change of this PR affect this?&lt;br/&gt;
    In general, should we also restructure e2e tests so that each execution configuration variant should be executed with the `test-runner-cleanup#run_test` method (instead of cleaning up itself in-between executions)?&lt;/p&gt;

&lt;p&gt;    AFAIK, only the `test_local_recovery_and_scheduling` does this at the moment.&lt;/p&gt;</comment>
                            <comment id="16486733" author="githubbot" created="Wed, 23 May 2018 05:28:58 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r190126277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r190126277&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/run-nightly-tests.sh &amp;#8212;&lt;br/&gt;
    @@ -30,168 +30,50 @@ if [ -z &quot;$FLINK_DIR&quot; ] ; then&lt;br/&gt;
         exit 1&lt;br/&gt;
     fi&lt;/p&gt;

&lt;p&gt;    -source &quot;$(dirname &quot;$0&quot;)&quot;/test-scripts/common.sh&lt;br/&gt;
    +source &quot;$(dirname &quot;$0&quot;)&quot;/test-scripts/test-runner-common.sh&lt;/p&gt;

&lt;p&gt;     FLINK_DIR=&quot;`( cd \&quot;$FLINK_DIR\&quot; &amp;amp;&amp;amp; pwd )`&quot; # absolutized and normalized&lt;/p&gt;

&lt;p&gt;     echo &quot;flink-end-to-end-test directory: $END_TO_END_DIR&quot;&lt;br/&gt;
     echo &quot;Flink distribution directory: $FLINK_DIR&quot;&lt;/p&gt;

&lt;p&gt;    -EXIT_CODE=0&lt;br/&gt;
    -&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Template for adding a test:&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
		&lt;li&gt;run_test &quot;&amp;lt;description&amp;gt;&quot; &quot;$END_TO_END_DIR/test-scripts/&amp;lt;script_name&amp;gt;&quot;&lt;/li&gt;
		&lt;li&gt;EXIT_CODE=$?&lt;/li&gt;
		&lt;li&gt;fi&lt;br/&gt;
    -&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file true false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file false false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (rocks, non-incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (rocks, incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, async, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, sync, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, async, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, sync, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, async, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, sync, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (rocks, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 rocks&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (rocks, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 rocks&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (rocks, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 rocks&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint after terminal failure (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;DataSet allround end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_batch_allround.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Streaming SQL end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_sql.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Streaming bucketing end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_bucketing.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Stateful stream job upgrade end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_stateful_stream_job_upgrade.sh 2 4&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test \&lt;/li&gt;
	&lt;li&gt;&quot;Elasticsearch (v1.7.1) sink end-to-end test&quot; \&lt;/li&gt;
	&lt;li&gt;&quot;$END_TO_END_DIR/test-scripts/test_streaming_elasticsearch.sh 1 &lt;a href=&quot;https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.1.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.1.tar.gz&lt;/a&gt;&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test \&lt;/li&gt;
	&lt;li&gt;&quot;Elasticsearch (v2.3.5) sink end-to-end test&quot; \&lt;/li&gt;
	&lt;li&gt;&quot;$END_TO_END_DIR/test-scripts/test_streaming_elasticsearch.sh 2 &lt;a href=&quot;https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz&lt;/a&gt;&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test \&lt;/li&gt;
	&lt;li&gt;&quot;Elasticsearch (v5.1.2) sink end-to-end test&quot; \&lt;/li&gt;
	&lt;li&gt;&quot;$END_TO_END_DIR/test-scripts/test_streaming_elasticsearch.sh 5 &lt;a href=&quot;https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.1.2.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.1.2.tar.gz&lt;/a&gt;&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Local recovery and sticky scheduling nightly end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_local_recovery_and_scheduling.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Quickstarts nightly end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_quickstarts.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -
	&lt;ol&gt;
		&lt;li&gt;Exit code for Travis build success/failure&lt;br/&gt;
    -exit $EXIT_CODE&lt;br/&gt;
    +# run_test &quot;&amp;lt;description&amp;gt;&quot; &quot;$END_TO_END_DIR/test-scripts/&amp;lt;script_name&amp;gt;&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Running HA (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file true false&quot;&lt;br/&gt;
    +run_test &quot;Running HA (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file false false&quot;&lt;br/&gt;
    +run_test &quot;Running HA (rocks, non-incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true false&quot;&lt;br/&gt;
    +run_test &quot;Running HA (rocks, incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true true&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, async, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, sync, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, async, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, sync, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, async, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, sync, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (rocks, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 rocks&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (rocks, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 rocks&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (rocks, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 rocks&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint after terminal failure (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks true&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;DataSet allround end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_batch_allround.sh&quot;&lt;br/&gt;
    +run_test &quot;Streaming SQL end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_sql.sh&quot;&lt;br/&gt;
    +run_test &quot;Streaming bucketing end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_bucketing.sh&quot;&lt;br/&gt;
    +run_test &quot;Stateful stream job upgrade end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_stateful_stream_job_upgrade.sh 2 4&quot;&lt;br/&gt;
    +run_test &quot;Local recovery and sticky scheduling end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_local_recovery_and_scheduling.sh&quot;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This test currently performs log verifications and cleanups within a single execution of the test script, since it specifies multiple executions with different state backend configurations.&lt;/p&gt;

&lt;p&gt;    Should we break this up, so that each configuration variant is explicitly executed by the `run_test` method (like what we currently do with the savepoint / externalized checkpoint tests)&lt;/p&gt;</comment>
                            <comment id="16486885" author="githubbot" created="Wed, 23 May 2018 08:08:51 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r190156721&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r190156721&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/run-nightly-tests.sh &amp;#8212;&lt;br/&gt;
    @@ -30,168 +30,50 @@ if [ -z &quot;$FLINK_DIR&quot; ] ; then&lt;br/&gt;
         exit 1&lt;br/&gt;
     fi&lt;/p&gt;

&lt;p&gt;    -source &quot;$(dirname &quot;$0&quot;)&quot;/test-scripts/common.sh&lt;br/&gt;
    +source &quot;$(dirname &quot;$0&quot;)&quot;/test-scripts/test-runner-common.sh&lt;/p&gt;

&lt;p&gt;     FLINK_DIR=&quot;`( cd \&quot;$FLINK_DIR\&quot; &amp;amp;&amp;amp; pwd )`&quot; # absolutized and normalized&lt;/p&gt;

&lt;p&gt;     echo &quot;flink-end-to-end-test directory: $END_TO_END_DIR&quot;&lt;br/&gt;
     echo &quot;Flink distribution directory: $FLINK_DIR&quot;&lt;/p&gt;

&lt;p&gt;    -EXIT_CODE=0&lt;br/&gt;
    -&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Template for adding a test:&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
		&lt;li&gt;run_test &quot;&amp;lt;description&amp;gt;&quot; &quot;$END_TO_END_DIR/test-scripts/&amp;lt;script_name&amp;gt;&quot;&lt;/li&gt;
		&lt;li&gt;EXIT_CODE=$?&lt;/li&gt;
		&lt;li&gt;fi&lt;br/&gt;
    -&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file true false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file false false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (rocks, non-incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (rocks, incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, async, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, sync, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, async, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, sync, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, async, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, sync, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (rocks, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 rocks&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (rocks, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 rocks&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (rocks, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 rocks&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint after terminal failure (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;DataSet allround end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_batch_allround.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Streaming SQL end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_sql.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Streaming bucketing end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_bucketing.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Stateful stream job upgrade end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_stateful_stream_job_upgrade.sh 2 4&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test \&lt;/li&gt;
	&lt;li&gt;&quot;Elasticsearch (v1.7.1) sink end-to-end test&quot; \&lt;/li&gt;
	&lt;li&gt;&quot;$END_TO_END_DIR/test-scripts/test_streaming_elasticsearch.sh 1 &lt;a href=&quot;https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.1.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.1.tar.gz&lt;/a&gt;&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test \&lt;/li&gt;
	&lt;li&gt;&quot;Elasticsearch (v2.3.5) sink end-to-end test&quot; \&lt;/li&gt;
	&lt;li&gt;&quot;$END_TO_END_DIR/test-scripts/test_streaming_elasticsearch.sh 2 &lt;a href=&quot;https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz&lt;/a&gt;&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test \&lt;/li&gt;
	&lt;li&gt;&quot;Elasticsearch (v5.1.2) sink end-to-end test&quot; \&lt;/li&gt;
	&lt;li&gt;&quot;$END_TO_END_DIR/test-scripts/test_streaming_elasticsearch.sh 5 &lt;a href=&quot;https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.1.2.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.1.2.tar.gz&lt;/a&gt;&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Local recovery and sticky scheduling nightly end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_local_recovery_and_scheduling.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Quickstarts nightly end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_quickstarts.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -
	&lt;ol&gt;
		&lt;li&gt;Exit code for Travis build success/failure&lt;br/&gt;
    -exit $EXIT_CODE&lt;br/&gt;
    +# run_test &quot;&amp;lt;description&amp;gt;&quot; &quot;$END_TO_END_DIR/test-scripts/&amp;lt;script_name&amp;gt;&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Running HA (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file true false&quot;&lt;br/&gt;
    +run_test &quot;Running HA (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file false false&quot;&lt;br/&gt;
    +run_test &quot;Running HA (rocks, non-incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true false&quot;&lt;br/&gt;
    +run_test &quot;Running HA (rocks, incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true true&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, async, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, sync, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, async, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, sync, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, async, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, sync, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (rocks, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 rocks&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (rocks, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 rocks&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (rocks, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 rocks&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint after terminal failure (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks true&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;DataSet allround end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_batch_allround.sh&quot;&lt;br/&gt;
    +run_test &quot;Streaming SQL end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_sql.sh&quot;&lt;br/&gt;
    +run_test &quot;Streaming bucketing end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_bucketing.sh&quot;&lt;br/&gt;
    +run_test &quot;Stateful stream job upgrade end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_stateful_stream_job_upgrade.sh 2 4&quot;&lt;br/&gt;
    +run_test &quot;Local recovery and sticky scheduling end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_local_recovery_and_scheduling.sh&quot;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +1 to having each execution as a separate test&lt;/p&gt;</comment>
                            <comment id="16496710" author="githubbot" created="Thu, 31 May 2018 15:26:12 +0000"  >&lt;p&gt;Github user florianschmidt1994 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r192139268&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r192139268&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/test-scripts/test-runner-common.sh &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,76 @@&lt;br/&gt;
    +#!/usr/bin/env bash&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +# distributed with this work for additional information&lt;br/&gt;
    +# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +# with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +# See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +source &quot;$(pwd)&quot;/test-scripts/common.sh&lt;br/&gt;
    +&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +# Prints the given description, runs the given test and prints how long the execution took.&lt;br/&gt;
    +# Arguments:&lt;br/&gt;
    +#   $1: description of the test&lt;br/&gt;
    +#   $2: command to execute&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +function run_test {&lt;br/&gt;
    +    description=&quot;$1&quot;&lt;br/&gt;
    +    command=&quot;$2&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +    printf &quot;\n==============================================================================\n&quot;&lt;br/&gt;
    +    printf &quot;Running &apos;${description}&apos;\n&quot;&lt;br/&gt;
    +    printf &quot;==============================================================================\n&quot;&lt;br/&gt;
    +    start_timer&lt;br/&gt;
    +    ${command}&lt;br/&gt;
    +    exit_code=&quot;$?&quot;&lt;br/&gt;
    +    time_elapsed=$(end_timer)&lt;br/&gt;
    +&lt;br/&gt;
    +    check_logs_for_errors&lt;br/&gt;
    +    check_logs_for_exceptions&lt;br/&gt;
    +    check_logs_for_non_empty_out_files&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    We have been discussing about changing the semantics at some point to leave it up to each individual test case to check the logs for errors and drop it from the test runner, maybe even with a whitelist / blacklist approach of expected exceptions. If we want to go that way I&apos;d say leave it in common.sh&lt;br/&gt;
    We could also say we&apos;re probably gonna stick with the current approach for a while, then I&apos;d say let&apos;s move them to test-runner-common.sh&lt;/p&gt;</comment>
                            <comment id="16510941" author="githubbot" created="Wed, 13 Jun 2018 10:43:43 +0000"  >&lt;p&gt;Github user florianschmidt1994 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r195036305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r195036305&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/test-scripts/test_local_recovery_and_scheduling.sh &amp;#8212;&lt;br/&gt;
    @@ -53,8 +53,6 @@ function cleanup_after_test {&lt;br/&gt;
         #&lt;br/&gt;
         kill ${watchdog_pid} 2&amp;gt; /dev/null&lt;br/&gt;
         wait ${watchdog_pid} 2&amp;gt; /dev/null&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;#&lt;/li&gt;
	&lt;li&gt;cleanup
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This should not be a concern anymore with the new changed where each configuration of `test_local_recovery_and_scheduling` is its own test-case&lt;/p&gt;</comment>
                            <comment id="16511018" author="githubbot" created="Wed, 13 Jun 2018 12:09:17 +0000"  >&lt;p&gt;Github user florianschmidt1994 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @zentol and @tzulitai for the review. I addressed your concerns in the lastest couple of commits&lt;/p&gt;</comment>
                            <comment id="16511094" author="githubbot" created="Wed, 13 Jun 2018 12:59:44 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r195060959&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r195060959&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/run-nightly-tests.sh &amp;#8212;&lt;br/&gt;
    @@ -30,168 +30,57 @@ if [ -z &quot;$FLINK_DIR&quot; ] ; then&lt;br/&gt;
         exit 1&lt;br/&gt;
     fi&lt;/p&gt;

&lt;p&gt;    -source &quot;$(dirname &quot;$0&quot;)&quot;/test-scripts/common.sh&lt;br/&gt;
    +source &quot;$(dirname &quot;$0&quot;)&quot;/test-scripts/test-runner-common.sh&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    use `END_TO_END_DIR` instead&lt;/p&gt;</comment>
                            <comment id="16511095" author="githubbot" created="Wed, 13 Jun 2018 13:00:12 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Oh you already rebased it in the mean-time. neat.&lt;/p&gt;</comment>
                            <comment id="16511097" author="githubbot" created="Wed, 13 Jun 2018 13:00:54 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r195071307&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r195071307&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/run-nightly-tests.sh &amp;#8212;&lt;br/&gt;
    @@ -25,180 +25,65 @@ if [ -z &quot;$END_TO_END_DIR&quot; ] ; then&lt;br/&gt;
         exit 1  # fail&lt;br/&gt;
     fi&lt;/p&gt;

&lt;p&gt;    -export END_TO_END_DIR=&quot;${END_TO_END_DIR}&quot;&lt;br/&gt;
    -&lt;br/&gt;
     if [ -z &quot;$FLINK_DIR&quot; ] ; then&lt;br/&gt;
         echo &quot;You have to export the Flink distribution directory as FLINK_DIR&quot;&lt;br/&gt;
         exit 1&lt;br/&gt;
     fi&lt;/p&gt;

&lt;p&gt;    -source &quot;$(dirname &quot;$0&quot;)&quot;/test-scripts/common.sh&lt;br/&gt;
    +source &quot;$(dirname &quot;$0&quot;)&quot;/test-scripts/test-runner-common.sh&lt;/p&gt;

&lt;p&gt;     FLINK_DIR=&quot;`( cd \&quot;$FLINK_DIR\&quot; &amp;amp;&amp;amp; pwd )`&quot; # absolutized and normalized&lt;/p&gt;

&lt;p&gt;     echo &quot;flink-end-to-end-test directory: $END_TO_END_DIR&quot;&lt;br/&gt;
     echo &quot;Flink distribution directory: $FLINK_DIR&quot;&lt;/p&gt;

&lt;p&gt;    -EXIT_CODE=0&lt;br/&gt;
    -&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Template for adding a test:&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
		&lt;li&gt;run_test &quot;&amp;lt;description&amp;gt;&quot; &quot;$END_TO_END_DIR/test-scripts/&amp;lt;script_name&amp;gt;&quot;&lt;/li&gt;
		&lt;li&gt;EXIT_CODE=$?&lt;/li&gt;
		&lt;li&gt;fi&lt;br/&gt;
    -&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file true false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file false false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (rocks, non-incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Running HA (rocks, incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, async, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, sync, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, async, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, sync, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, async, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (file, sync, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (rocks, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 rocks&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (rocks, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 rocks&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Savepoint (rocks, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 rocks&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks false&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Resuming Externalized Checkpoint after terminal failure (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks true&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;DataSet allround end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_batch_allround.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Streaming SQL end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_sql.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Streaming bucketing end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_bucketing.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Stateful stream job upgrade end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_stateful_stream_job_upgrade.sh 2 4&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test \&lt;/li&gt;
	&lt;li&gt;&quot;Elasticsearch (v1.7.1) sink end-to-end test&quot; \&lt;/li&gt;
	&lt;li&gt;&quot;$END_TO_END_DIR/test-scripts/test_streaming_elasticsearch.sh 1 &lt;a href=&quot;https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.1.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.1.tar.gz&lt;/a&gt;&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test \&lt;/li&gt;
	&lt;li&gt;&quot;Elasticsearch (v2.3.5) sink end-to-end test&quot; \&lt;/li&gt;
	&lt;li&gt;&quot;$END_TO_END_DIR/test-scripts/test_streaming_elasticsearch.sh 2 &lt;a href=&quot;https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz&lt;/a&gt;&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test \&lt;/li&gt;
	&lt;li&gt;&quot;Elasticsearch (v5.1.2) sink end-to-end test&quot; \&lt;/li&gt;
	&lt;li&gt;&quot;$END_TO_END_DIR/test-scripts/test_streaming_elasticsearch.sh 5 &lt;a href=&quot;https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.1.2.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.1.2.tar.gz&lt;/a&gt;&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Local recovery and sticky scheduling nightly end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_local_recovery_and_scheduling.sh&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Quickstarts Java nightly end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_quickstarts.sh java&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -&lt;br/&gt;
    -if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
	&lt;li&gt;run_test &quot;Quickstarts Scala nightly end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_quickstarts.sh scala&quot;&lt;/li&gt;
	&lt;li&gt;EXIT_CODE=$?&lt;br/&gt;
    -fi&lt;br/&gt;
    -
	&lt;ol&gt;
		&lt;li&gt;Exit code for Travis build success/failure&lt;br/&gt;
    -exit $EXIT_CODE&lt;br/&gt;
    +# run_test &quot;&amp;lt;description&amp;gt;&quot; &quot;$END_TO_END_DIR/test-scripts/&amp;lt;script_name&amp;gt;&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Running HA (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file true false&quot;&lt;br/&gt;
    +run_test &quot;Running HA (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh file false false&quot;&lt;br/&gt;
    +run_test &quot;Running HA (rocks, non-incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true false&quot;&lt;br/&gt;
    +run_test &quot;Running HA (rocks, incremental) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_ha.sh rocks true true&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, async, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, sync, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, async, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, sync, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, async, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (file, sync, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (rocks, no parallelism change) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 2 rocks&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (rocks, scale up) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 2 4 rocks&quot;&lt;br/&gt;
    +run_test &quot;Resuming Savepoint (rocks, scale down) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_savepoint.sh 4 2 rocks&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, async) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file true true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint after terminal failure (file, sync) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh file false true&quot;&lt;br/&gt;
    +run_test &quot;Resuming Externalized Checkpoint after terminal failure (rocks) end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_resume_externalized_checkpoints.sh rocks true&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;DataSet allround end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_batch_allround.sh&quot;&lt;br/&gt;
    +run_test &quot;Streaming SQL end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_sql.sh&quot;&lt;br/&gt;
    +run_test &quot;Streaming bucketing end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_streaming_bucketing.sh&quot;&lt;br/&gt;
    +run_test &quot;Stateful stream job upgrade end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_stateful_stream_job_upgrade.sh 2 4&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Local recovery and sticky scheduling end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_local_recovery_and_scheduling.sh 4 3 file false false&quot;&lt;br/&gt;
    +run_test &quot;Local recovery and sticky scheduling end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_local_recovery_and_scheduling.sh 4 3 file false true&quot;&lt;br/&gt;
    +run_test &quot;Local recovery and sticky scheduling end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_local_recovery_and_scheduling.sh 4 10 rocks false false&quot;&lt;br/&gt;
    +run_test &quot;Local recovery and sticky scheduling end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_local_recovery_and_scheduling.sh 4 10 rocks true false&quot;&lt;br/&gt;
    +run_test &quot;Local recovery and sticky scheduling end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_local_recovery_and_scheduling.sh 4 10 rocks false true&quot;&lt;br/&gt;
    +run_test &quot;Local recovery and sticky scheduling end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_local_recovery_and_scheduling.sh 4 10 rocks true true&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +run_test &quot;Quickstarts nightly end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_quickstarts.sh&quot;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    this shouldn&apos;t be here&lt;/p&gt;</comment>
                            <comment id="16511099" author="githubbot" created="Wed, 13 Jun 2018 13:02:22 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r195071781&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r195071781&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/test-scripts/test_local_recovery_and_scheduling.sh &amp;#8212;&lt;br/&gt;
    @@ -71,8 +69,14 @@ function run_local_recovery_test {&lt;br/&gt;
         local incremental=$4&lt;br/&gt;
         local kill_jvm=$5&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo &quot;Running local recovery test on ${backend} backend: incremental checkpoints = ${incremental}, kill JVM = ${kill_jvm}.&quot;&lt;/li&gt;
	&lt;li&gt;TEST_PROGRAM_JAR=${END_TO_END_DIR}/flink-local-recovery-and-allocation-test/target/StickyAllocationAndLocalRecoveryTestJob.jar&lt;br/&gt;
    +    echo &quot;Running local recovery test with configuration:&lt;br/&gt;
    +        parallelism: ${parallelism}&lt;br/&gt;
    +        max attempts: ${max_attempts}&lt;br/&gt;
    +        backend: ${backend}&lt;br/&gt;
    +        incremental checkpoints: ${incremental}&lt;br/&gt;
    +        kill JVM: ${kill_jvm}&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +    TEST_PROGRAM_JAR=$TEST_INFRA_DIR/../../flink-end-to-end-tests/flink-local-recovery-and-allocation-test/target/StickyAllocationAndLocalRecoveryTestJob.jar
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    use `END_TO_END_DIR` instead&lt;/p&gt;</comment>
                            <comment id="16511107" author="githubbot" created="Wed, 13 Jun 2018 13:15:46 +0000"  >&lt;p&gt;Github user florianschmidt1994 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r195076092&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r195076092&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/test-scripts/test_local_recovery_and_scheduling.sh &amp;#8212;&lt;br/&gt;
    @@ -71,8 +69,14 @@ function run_local_recovery_test {&lt;br/&gt;
         local incremental=$4&lt;br/&gt;
         local kill_jvm=$5&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo &quot;Running local recovery test on ${backend} backend: incremental checkpoints = ${incremental}, kill JVM = ${kill_jvm}.&quot;&lt;/li&gt;
	&lt;li&gt;TEST_PROGRAM_JAR=${END_TO_END_DIR}/flink-local-recovery-and-allocation-test/target/StickyAllocationAndLocalRecoveryTestJob.jar&lt;br/&gt;
    +    echo &quot;Running local recovery test with configuration:&lt;br/&gt;
    +        parallelism: ${parallelism}&lt;br/&gt;
    +        max attempts: ${max_attempts}&lt;br/&gt;
    +        backend: ${backend}&lt;br/&gt;
    +        incremental checkpoints: ${incremental}&lt;br/&gt;
    +        kill JVM: ${kill_jvm}&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +    TEST_PROGRAM_JAR=$TEST_INFRA_DIR/../../flink-end-to-end-tests/flink-local-recovery-and-allocation-test/target/StickyAllocationAndLocalRecoveryTestJob.jar
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Only works if we export END_TO_END_DIR in run_nightly/precommit_tests.sh, but I&apos;ll just add that there as well&lt;/p&gt;</comment>
                            <comment id="16511127" author="githubbot" created="Wed, 13 Jun 2018 13:24:19 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r195079122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r195079122&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/test-scripts/test_local_recovery_and_scheduling.sh &amp;#8212;&lt;br/&gt;
    @@ -71,8 +69,14 @@ function run_local_recovery_test {&lt;br/&gt;
         local incremental=$4&lt;br/&gt;
         local kill_jvm=$5&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo &quot;Running local recovery test on ${backend} backend: incremental checkpoints = ${incremental}, kill JVM = ${kill_jvm}.&quot;&lt;/li&gt;
	&lt;li&gt;TEST_PROGRAM_JAR=${END_TO_END_DIR}/flink-local-recovery-and-allocation-test/target/StickyAllocationAndLocalRecoveryTestJob.jar&lt;br/&gt;
    +    echo &quot;Running local recovery test with configuration:&lt;br/&gt;
    +        parallelism: ${parallelism}&lt;br/&gt;
    +        max attempts: ${max_attempts}&lt;br/&gt;
    +        backend: ${backend}&lt;br/&gt;
    +        incremental checkpoints: ${incremental}&lt;br/&gt;
    +        kill JVM: ${kill_jvm}&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +    TEST_PROGRAM_JAR=$TEST_INFRA_DIR/../../flink-end-to-end-tests/flink-local-recovery-and-allocation-test/target/StickyAllocationAndLocalRecoveryTestJob.jar
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    well we already did export it there, but you removed it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16511131" author="githubbot" created="Wed, 13 Jun 2018 13:26:44 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r195079715&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r195079715&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/test-scripts/test-runner-common.sh &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,76 @@&lt;br/&gt;
    +#!/usr/bin/env bash&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +# distributed with this work for additional information&lt;br/&gt;
    +# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +# with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +# See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +source &quot;${END_TO_END_DIR}&quot;/test-scripts/common.sh&lt;br/&gt;
    +&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +# Prints the given description, runs the given test and prints how long the execution took.&lt;br/&gt;
    +# Arguments:&lt;br/&gt;
    +#   $1: description of the test&lt;br/&gt;
    +#   $2: command to execute&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +function run_test {&lt;br/&gt;
    +    description=&quot;$1&quot;&lt;br/&gt;
    +    command=&quot;$2&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +    printf &quot;\n==============================================================================\n&quot;&lt;br/&gt;
    +    printf &quot;Running &apos;${description}&apos;\n&quot;&lt;br/&gt;
    +    printf &quot;==============================================================================\n&quot;&lt;br/&gt;
    +    start_timer&lt;br/&gt;
    +    ${command}&lt;br/&gt;
    +    exit_code=&quot;$?&quot;&lt;br/&gt;
    +    time_elapsed=$(end_timer)&lt;br/&gt;
    +&lt;br/&gt;
    +    check_logs_for_errors&lt;br/&gt;
    +    check_logs_for_exceptions&lt;br/&gt;
    +    check_logs_for_non_empty_out_files&lt;br/&gt;
    +&lt;br/&gt;
    +    cleanup&lt;br/&gt;
    +&lt;br/&gt;
    +    if [[ ${exit_code} == 0 ]]; then&lt;br/&gt;
    +        if [[ ! &quot;$PASS&quot; ]]; then&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I thought we aren&apos;t using pass anymore?&lt;/p&gt;</comment>
                            <comment id="16511132" author="githubbot" created="Wed, 13 Jun 2018 13:26:44 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r195079963&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r195079963&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/test-scripts/test-runner-common.sh &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,76 @@&lt;br/&gt;
    +#!/usr/bin/env bash&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +# distributed with this work for additional information&lt;br/&gt;
    +# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +# with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +# See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +source &quot;${END_TO_END_DIR}&quot;/test-scripts/common.sh&lt;br/&gt;
    +&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +# Prints the given description, runs the given test and prints how long the execution took.&lt;br/&gt;
    +# Arguments:&lt;br/&gt;
    +#   $1: description of the test&lt;br/&gt;
    +#   $2: command to execute&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +function run_test {&lt;br/&gt;
    +    description=&quot;$1&quot;&lt;br/&gt;
    +    command=&quot;$2&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +    printf &quot;\n==============================================================================\n&quot;&lt;br/&gt;
    +    printf &quot;Running &apos;${description}&apos;\n&quot;&lt;br/&gt;
    +    printf &quot;==============================================================================\n&quot;&lt;br/&gt;
    +    start_timer&lt;br/&gt;
    +    ${command}&lt;br/&gt;
    +    exit_code=&quot;$?&quot;&lt;br/&gt;
    +    time_elapsed=$(end_timer)&lt;br/&gt;
    +&lt;br/&gt;
    +    check_logs_for_errors&lt;br/&gt;
    +    check_logs_for_exceptions&lt;br/&gt;
    +    check_logs_for_non_empty_out_files&lt;br/&gt;
    +&lt;br/&gt;
    +    cleanup&lt;br/&gt;
    +&lt;br/&gt;
    +    if [[ ${exit_code} == 0 ]]; then&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Am I mistaken or didn&apos;t you already change this to `EXIT_CODE`? Did maybe something go wrong during the rebase?&lt;/p&gt;</comment>
                            <comment id="16511136" author="githubbot" created="Wed, 13 Jun 2018 13:27:25 +0000"  >&lt;p&gt;Github user florianschmidt1994 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r195080229&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r195080229&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/test-scripts/test-runner-common.sh &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,76 @@&lt;br/&gt;
    +#!/usr/bin/env bash&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +# distributed with this work for additional information&lt;br/&gt;
    +# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +# with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +# See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +source &quot;${END_TO_END_DIR}&quot;/test-scripts/common.sh&lt;br/&gt;
    +&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +# Prints the given description, runs the given test and prints how long the execution took.&lt;br/&gt;
    +# Arguments:&lt;br/&gt;
    +#   $1: description of the test&lt;br/&gt;
    +#   $2: command to execute&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +function run_test {&lt;br/&gt;
    +    description=&quot;$1&quot;&lt;br/&gt;
    +    command=&quot;$2&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +    printf &quot;\n==============================================================================\n&quot;&lt;br/&gt;
    +    printf &quot;Running &apos;${description}&apos;\n&quot;&lt;br/&gt;
    +    printf &quot;==============================================================================\n&quot;&lt;br/&gt;
    +    start_timer&lt;br/&gt;
    +    ${command}&lt;br/&gt;
    +    exit_code=&quot;$?&quot;&lt;br/&gt;
    +    time_elapsed=$(end_timer)&lt;br/&gt;
    +&lt;br/&gt;
    +    check_logs_for_errors&lt;br/&gt;
    +    check_logs_for_exceptions&lt;br/&gt;
    +    check_logs_for_non_empty_out_files&lt;br/&gt;
    +&lt;br/&gt;
    +    cleanup&lt;br/&gt;
    +&lt;br/&gt;
    +    if [[ ${exit_code} == 0 ]]; then&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Oh damn. Something might have gone wrong here... &lt;/p&gt;</comment>
                            <comment id="16511138" author="githubbot" created="Wed, 13 Jun 2018 13:31:45 +0000"  >&lt;p&gt;Github user florianschmidt1994 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053#discussion_r195081885&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053#discussion_r195081885&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-end-to-end-tests/test-scripts/test-runner-common.sh &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,76 @@&lt;br/&gt;
    +#!/usr/bin/env bash&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +# distributed with this work for additional information&lt;br/&gt;
    +# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +# with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +# See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +source &quot;${END_TO_END_DIR}&quot;/test-scripts/common.sh&lt;br/&gt;
    +&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +# Prints the given description, runs the given test and prints how long the execution took.&lt;br/&gt;
    +# Arguments:&lt;br/&gt;
    +#   $1: description of the test&lt;br/&gt;
    +#   $2: command to execute&lt;br/&gt;
    +#######################################&lt;br/&gt;
    +function run_test {&lt;br/&gt;
    +    description=&quot;$1&quot;&lt;br/&gt;
    +    command=&quot;$2&quot;&lt;br/&gt;
    +&lt;br/&gt;
    +    printf &quot;\n==============================================================================\n&quot;&lt;br/&gt;
    +    printf &quot;Running &apos;${description}&apos;\n&quot;&lt;br/&gt;
    +    printf &quot;==============================================================================\n&quot;&lt;br/&gt;
    +    start_timer&lt;br/&gt;
    +    ${command}&lt;br/&gt;
    +    exit_code=&quot;$?&quot;&lt;br/&gt;
    +    time_elapsed=$(end_timer)&lt;br/&gt;
    +&lt;br/&gt;
    +    check_logs_for_errors&lt;br/&gt;
    +    check_logs_for_exceptions&lt;br/&gt;
    +    check_logs_for_non_empty_out_files&lt;br/&gt;
    +&lt;br/&gt;
    +    cleanup&lt;br/&gt;
    +&lt;br/&gt;
    +    if [[ ${exit_code} == 0 ]]; then&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Oh that is still in there b.c. I left the `check_logs_for_non_empty_out_files` etc. untouched, which again use the `PASS` thing to signal whether or not a test case should fail. &lt;br/&gt;
    I&apos;ll go ahead and change this to our new convention as well.&lt;br/&gt;
    At least it&apos;s nothing went wrong during the rebase &#128517;&lt;/p&gt;</comment>
                            <comment id="16511317" author="githubbot" created="Wed, 13 Jun 2018 15:46:00 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good to me, let&apos;s see what travis says.&lt;/p&gt;</comment>
                            <comment id="16512333" author="githubbot" created="Thu, 14 Jun 2018 11:25:09 +0000"  >&lt;p&gt;Github user florianschmidt1994 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @zentol Looks like travis likes it &#128578;&lt;/p&gt;</comment>
                            <comment id="16512348" author="githubbot" created="Thu, 14 Jun 2018 11:35:55 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    ==============================================================================&lt;br/&gt;
    Running &apos;Streaming Python Wordcount end-to-end test&apos;&lt;br/&gt;
    ==============================================================================&lt;br/&gt;
    Flink dist directory: /home/travis/build/apache/flink/build-target&lt;br/&gt;
    TEST_DATA_DIR: /home/travis/build/apache/flink/flink-end-to-end-tests/test-scripts/temp-test-directory-10412258255&lt;br/&gt;
    Starting cluster.&lt;br/&gt;
    Starting standalonesession daemon on host travis-job-363a754a-fe5f-4873-bbe8-fe4064b95bc8.&lt;br/&gt;
    Starting taskexecutor daemon on host travis-job-363a754a-fe5f-4873-bbe8-fe4064b95bc8.&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Dispatcher REST endpoint is up.&lt;br/&gt;
    Starting execution of program&lt;br/&gt;
    Program execution finished&lt;br/&gt;
    Job with JobID 06184a085272dd12b3573b1bcb96badc has finished.&lt;br/&gt;
    Job Runtime: 6103 ms&lt;br/&gt;
    pass StreamingPythonWordCount&lt;br/&gt;
    Stopping taskexecutor daemon (pid: 31303) on host travis-job-363a754a-fe5f-4873-bbe8-fe4064b95bc8.&lt;br/&gt;
    Stopping standalonesession daemon (pid: 30988) on host travis-job-363a754a-fe5f-4873-bbe8-fe4064b95bc8.&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;PASS&amp;#93;&lt;/span&gt; &apos;Streaming Python Wordcount end-to-end test&apos; passed after 0 minutes and 24 seconds! Test exited with exit code 0.&lt;/p&gt;


&lt;p&gt;    ==============================================================================&lt;br/&gt;
    Running &apos;Wordcount end-to-end test&apos;&lt;br/&gt;
    ==============================================================================&lt;br/&gt;
    Flink dist directory: /home/travis/build/apache/flink/build-target&lt;br/&gt;
    TEST_DATA_DIR: /home/travis/build/apache/flink/flink-end-to-end-tests/test-scripts/temp-test-directory-36174383269&lt;br/&gt;
    Starting cluster.&lt;br/&gt;
    Starting standalonesession daemon on host travis-job-363a754a-fe5f-4873-bbe8-fe4064b95bc8.&lt;br/&gt;
    Starting taskexecutor daemon on host travis-job-363a754a-fe5f-4873-bbe8-fe4064b95bc8.&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Waiting for dispatcher REST endpoint to come up...&lt;br/&gt;
    Dispatcher REST endpoint is up.&lt;br/&gt;
    Starting execution of program&lt;br/&gt;
    Program execution finished&lt;br/&gt;
    Job with JobID 30256ad7ff23ea8543ddca76bacaaee5 has finished.&lt;br/&gt;
    Job Runtime: 1352 ms&lt;br/&gt;
    pass WordCount&lt;br/&gt;
    Stopping taskexecutor daemon (pid: 835) on host travis-job-363a754a-fe5f-4873-bbe8-fe4064b95bc8.&lt;br/&gt;
    Stopping standalonesession daemon (pid: 517) on host travis-job-363a754a-fe5f-4873-bbe8-fe4064b95bc8.&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;PASS&amp;#93;&lt;/span&gt; &apos;Wordcount end-to-end test&apos; passed after 0 minutes and 11 seconds! Test exited with exit code 0.&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    Travis logs excerpt looks good. Follow up commits looks good.&lt;br/&gt;
    +1, LGTM on my side.&lt;/p&gt;</comment>
                            <comment id="16512796" author="githubbot" created="Thu, 14 Jun 2018 17:30:34 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merging.&lt;/p&gt;</comment>
                            <comment id="16513142" author="zentol" created="Thu, 14 Jun 2018 23:51:11 +0000"  >&lt;p&gt;master:45ac85e2c4ec66ff02e4277c1781247710252a26&lt;/p&gt;

&lt;p&gt;1.5: 0796ac7e212f8d6197e5db95b1a85417767b247c&lt;/p&gt;</comment>
                            <comment id="16513145" author="githubbot" created="Thu, 14 Jun 2018 23:51:42 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6053&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t0hr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>