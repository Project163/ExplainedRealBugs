<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:22:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3300] Concurrency Bug in Yarn JobManager</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3300</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The change to use the async ResourceManager client introduced concurrency problems: The ResourceManager callback threads run and change data structures at the same time as the actor methods, voiding the actor concurrency model.&lt;/p&gt;

&lt;p&gt;One example that can happen is that the callback tries to start containers while the ContainerLaunchContext is still not set (because the actor method is still in the StartYarnSession method).&lt;/p&gt;

&lt;p&gt;Bug introducing commit: &lt;a href=&quot;https://github.com/apache/flink/commit/4e52fe4304566e5239996b3d48290e0c1f0772e8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/4e52fe4304566e5239996b3d48290e0c1f0772e8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Quick fix could be to revert the commit. Better solution would be to let the callback methods send actor messages to the YobManager, rather than directly acting.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12934904">FLINK-3300</key>
            <summary>Concurrency Bug in Yarn JobManager</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="sewen">Stephan Ewen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jan 2016 20:20:02 +0000</created>
                <updated>Thu, 28 Feb 2019 14:01:23 +0000</updated>
                            <resolved>Mon, 1 Feb 2016 09:12:03 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15123269" author="till.rohrmann" created="Fri, 29 Jan 2016 09:46:03 +0000"  >&lt;p&gt;+1 for actor messages&lt;/p&gt;</comment>
                            <comment id="15123284" author="mxm" created="Fri, 29 Jan 2016 09:55:44 +0000"  >&lt;p&gt;Thanks for reporting. Quick fix would be to just initialize the ContainerLaunchContext before bringing up the AsyncClient. Reverting IMHO is not an option because the old implementation could also cause problems like blocking the actor on allocation of containers.&lt;/p&gt;

&lt;p&gt;+1 for allocating/removing containers in the YarnJobManager actor and sending messages from the AsyncClient to trigger that.&lt;/p&gt;</comment>
                            <comment id="15123326" author="stephanewen" created="Fri, 29 Jan 2016 10:37:09 +0000"  >&lt;p&gt;+1 for the actor messages. That would be the cleanest approach!&lt;/p&gt;</comment>
                            <comment id="15123338" author="githubbot" created="Fri, 29 Jan 2016 10:49:06 +0000"  >&lt;p&gt;GitHub user mxm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1561&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3300&quot; title=&quot;Concurrency Bug in Yarn JobManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3300&quot;&gt;&lt;del&gt;FLINK-3300&lt;/del&gt;&lt;/a&gt; fix concurrency bug in YarnJobManager&lt;/p&gt;

&lt;p&gt;    Adds message passing between Hadoop&apos;s async resource manager client and&lt;br/&gt;
    the YarnJobManager actor.&lt;/p&gt;

&lt;p&gt;    It helps to view the diff with ignored whitespace (`?w=1`).&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mxm/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mxm/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3300&quot; title=&quot;Concurrency Bug in Yarn JobManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3300&quot;&gt;&lt;del&gt;FLINK-3300&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1561.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1561.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1561&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2a8966dc9fd0f14f2fdae2b5cf70441ba505bb8a&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-01-29T10:21:08Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3300&quot; title=&quot;Concurrency Bug in Yarn JobManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3300&quot;&gt;&lt;del&gt;FLINK-3300&lt;/del&gt;&lt;/a&gt; fix concurrency bug in YarnJobManager&lt;/p&gt;

&lt;p&gt;    Adds message passing between Hadoop&apos;s async resource manager client and&lt;br/&gt;
    the YarnJobManager actor.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15123401" author="githubbot" created="Fri, 29 Jan 2016 12:07:11 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1561#issuecomment-176723782&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1561#issuecomment-176723782&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Test failures unrelated to the changes. Yarn tests pass in this build: &lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/105645193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/105645193&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15123438" author="githubbot" created="Fri, 29 Jan 2016 12:51:45 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1561#issuecomment-176737933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1561#issuecomment-176737933&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    As far as I can tell the changes look good to me. Good work @mxm &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15123641" author="githubbot" created="Fri, 29 Jan 2016 16:06:31 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1561#issuecomment-176838676&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1561#issuecomment-176838676&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @tillrohrmann. Going to merge this soon as it is a release critical fix.&lt;/p&gt;</comment>
                            <comment id="15125977" author="githubbot" created="Mon, 1 Feb 2016 09:11:54 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1561&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15125978" author="mxm" created="Mon, 1 Feb 2016 09:12:03 +0000"  >&lt;p&gt;Fixed in 2a49eaaf3c949864457aee0ffd99343a50ac7285.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s413:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>