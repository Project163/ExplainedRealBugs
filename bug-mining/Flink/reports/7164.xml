<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:17:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-32663] RescalingITCase.testSavepointRescalingInPartitionedOperatorStateList fails on AZP</title>
                <link>https://issues.apache.org/jira/browse/FLINK-32663</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;This build &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51501&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8665&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51501&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8665&lt;/a&gt;&lt;br/&gt;
fails as&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Jul 21 01:24:54 01:24:54.146 [ERROR] RescalingITCase.testSavepointRescalingInPartitionedOperatorStateList  Time elapsed: 1.485 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
Jul 21 01:24:54 java.lang.AssertionError: expected:&amp;lt;530&amp;gt; but was:&amp;lt;30&amp;gt;
Jul 21 01:24:54 	at org.junit.Assert.fail(Assert.java:89)
Jul 21 01:24:54 	at org.junit.Assert.failNotEquals(Assert.java:835)
Jul 21 01:24:54 	at org.junit.Assert.assertEquals(Assert.java:647)
Jul 21 01:24:54 	at org.junit.Assert.assertEquals(Assert.java:633)
Jul 21 01:24:54 	at org.apache.flink.test.checkpointing.RescalingITCase.testSavepointRescalingPartitionedOperatorState(RescalingITCase.java:621)
Jul 21 01:24:54 	at org.apache.flink.test.checkpointing.RescalingITCase.testSavepointRescalingInPartitionedOperatorStateList(RescalingITCase.java:508)
Jul 21 01:24:54 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
Jul 21 01:24:54 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
Jul 21 01:24:54 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:4
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13544716">FLINK-32663</key>
            <summary>RescalingITCase.testSavepointRescalingInPartitionedOperatorStateList fails on AZP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fanrui">Rui Fan</assignee>
                                    <reporter username="Sergey Nuyanzin">Sergey Nuyanzin</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Mon, 24 Jul 2023 23:07:14 +0000</created>
                <updated>Fri, 4 Aug 2023 07:29:54 +0000</updated>
                            <resolved>Wed, 2 Aug 2023 05:50:41 +0000</resolved>
                                    <version>1.18.0</version>
                                    <fixVersion>1.18.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17746700" author="sergey nuyanzin" created="Mon, 24 Jul 2023 23:31:23 +0000"  >&lt;p&gt;also very similar fail of &lt;tt&gt;RescalingITCase.testSavepointRescalingOutPartitionedOperatorStateList&lt;/tt&gt; &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51627&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8664&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51627&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8664&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17746933" author="mapohl" created="Tue, 25 Jul 2023 11:44:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Yanfei+Lei&quot; class=&quot;user-hover&quot; rel=&quot;Yanfei Lei&quot;&gt;Yanfei Lei&lt;/a&gt; Is this one a duplicate issue of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-32574&quot; title=&quot;RescalingITCase.testSavepointRescalingInPartitionedOperatorState fails on AZP&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-32574&quot;&gt;&lt;del&gt;FLINK-32574&lt;/del&gt;&lt;/a&gt;. ...since you&apos;re looking into &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-32574&quot; title=&quot;RescalingITCase.testSavepointRescalingInPartitionedOperatorState fails on AZP&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-32574&quot;&gt;&lt;del&gt;FLINK-32574&lt;/del&gt;&lt;/a&gt;. The tests only differ in the the type of state they are using but have a similar assertion error. Could you close that one as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-32574&quot; title=&quot;RescalingITCase.testSavepointRescalingInPartitionedOperatorState fails on AZP&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-32574&quot;&gt;&lt;del&gt;FLINK-32574&lt;/del&gt;&lt;/a&gt; if that&apos;s the case?&lt;/p&gt;</comment>
                            <comment id="17746972" author="yanfei lei" created="Tue, 25 Jul 2023 12:29:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; I think they are duplicate, I&apos;ll close &#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-32574&quot; title=&quot;RescalingITCase.testSavepointRescalingInPartitionedOperatorState fails on AZP&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-32574&quot;&gt;&lt;del&gt;FLINK-32574&lt;/del&gt;&lt;/a&gt; and marked it as a duplicate.&lt;/p&gt;</comment>
                            <comment id="17749069" author="mapohl" created="Mon, 31 Jul 2023 07:37:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Yanfei+Lei&quot; class=&quot;user-hover&quot; rel=&quot;Yanfei Lei&quot;&gt;Yanfei Lei&lt;/a&gt; but do you continue looking into that issue?&lt;/p&gt;</comment>
                            <comment id="17749070" author="mapohl" created="Mon, 31 Jul 2023 07:38:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51804&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8036&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51804&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8036&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17749073" author="mapohl" created="Mon, 31 Jul 2023 07:40:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51817&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8030&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51817&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8030&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17749523" author="renqs" created="Tue, 1 Aug 2023 07:54:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fanrui&quot; class=&quot;user-hover&quot; rel=&quot;fanrui&quot;&gt;fanrui&lt;/a&gt; Could you help investigating this issue? It&apos;s probably related to unaligned checkpoint. Thanks a lot!&lt;/p&gt;</comment>
                            <comment id="17749525" author="fanrui" created="Tue, 1 Aug 2023 07:57:14 +0000"  >&lt;p&gt;Thanks for the report, I will take a look asap. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=renqs&quot; class=&quot;user-hover&quot; rel=&quot;renqs&quot;&gt;renqs&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17749622" author="fanrui" created="Tue, 1 Aug 2023 11:03:08 +0000"  >&lt;p&gt;Don&apos;t find the root cause, just updating some temporary info here.&lt;/p&gt;

&lt;p&gt;This test is savepoint instead of checkpoint, and the savepoint doesn&apos;t support unaligned checkpoint. We can see this test is &lt;em&gt;client.triggerSavepoint&lt;/em&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, and the java doc of RescalingITCase also writes `/** Test savepoint rescaling. */`&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;Hope these infos are useful for other contributors, I will continue analyze it as well.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/flink/blob/c6d58e17e8ce736a062234e1558ac8d7b65990ef/flink-tests/src/test/java/org/apache/flink/test/checkpointing/RescalingITCase.java#L563&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/c6d58e17e8ce736a062234e1558ac8d7b65990ef/flink-tests/src/test/java/org/apache/flink/test/checkpointing/RescalingITCase.java#L563&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/flink/blob/c6d58e17e8ce736a062234e1558ac8d7b65990ef/flink-tests/src/test/java/org/apache/flink/test/checkpointing/RescalingITCase.java#L93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/c6d58e17e8ce736a062234e1558ac8d7b65990ef/flink-tests/src/test/java/org/apache/flink/test/checkpointing/RescalingITCase.java#L93&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17749651" author="fanrui" created="Tue, 1 Aug 2023 11:52:29 +0000"  >&lt;p&gt;This bug is caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-28386&quot; title=&quot;Trigger an immediate checkpoint after all tasks has reached end-of-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-28386&quot;&gt;&lt;del&gt;FLINK-28386&lt;/del&gt;&lt;/a&gt;, this test doesn&apos;t enable checkpoint. And the test will fail once the checkpoint is executed, because the addtional checkpoint will update the `PartitionedStateSource.checkCorrectSnapshot`. This bug can always be reproduced when enabling checkpoint.&lt;/p&gt;

&lt;p&gt;However &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-28386&quot; title=&quot;Trigger an immediate checkpoint after all tasks has reached end-of-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-28386&quot;&gt;&lt;del&gt;FLINK-28386&lt;/del&gt;&lt;/a&gt; triggers an immediate checkpoint after all sinks finished. From the log, we can see this job triggered a checkpoint.&lt;/p&gt;

&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Yanfei+Lei&quot; class=&quot;user-hover&quot; rel=&quot;Yanfei Lei&quot;&gt;Yanfei Lei&lt;/a&gt;, would you mind I fix this bug?&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13061828/13061828_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17749656" author="fanrui" created="Tue, 1 Aug 2023 12:01:19 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt;, I see you help reviewed the &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-28386&quot; title=&quot;Trigger an immediate checkpoint after all tasks has reached end-of-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-28386&quot;&gt;&lt;del&gt;FLINK-28386&lt;/del&gt;&lt;/a&gt;, it caused this bug. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jiang+Xin&quot; class=&quot;user-hover&quot; rel=&quot;Jiang Xin&quot;&gt;Jiang Xin&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;May I know whether we just trigger an immediate checkpoint when checkpoint is enabled is reasonable? Or we really want to trigger an immediate checkpoint after all sources finished regardless of whether checkpoint is enabled.&lt;/p&gt;

&lt;p&gt;This question will determine how to fix this bug, looking forward to your feedback, thanks a lot&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17749667" author="fanrui" created="Tue, 1 Aug 2023 12:09:14 +0000"  >&lt;p&gt;The priority is upgraded to blocker due to it&apos;s caused in 1.18. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=renqs&quot; class=&quot;user-hover&quot; rel=&quot;renqs&quot;&gt;renqs&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Sergey+Nuyanzin&quot; class=&quot;user-hover&quot; rel=&quot;Sergey Nuyanzin&quot;&gt;Sergey Nuyanzin&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17749719" author="lindong" created="Tue, 1 Aug 2023 12:52:24 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fanrui&quot; class=&quot;user-hover&quot; rel=&quot;fanrui&quot;&gt;fanrui&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-28386&quot; title=&quot;Trigger an immediate checkpoint after all tasks has reached end-of-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-28386&quot;&gt;&lt;del&gt;FLINK-28386&lt;/del&gt;&lt;/a&gt; will let Flink runtime trigger a checkpoint immediately after all tasks have received end-of-data, instead of after all sources finished. I have updated its JIRA title/description to clarify this.&lt;/p&gt;

&lt;p&gt;And yes, I believe it is reasonable to trigger a checkpoint immediately after tall tasks have received end-of-data. This is because if we don&apos;t do this, the streaming job will waste time waiting for the triggering of the next periodic checkpoint triggering in order to shutdown, for no good reason.&lt;/p&gt;

&lt;p&gt;By &quot;it caused this bug&quot;, I guess what you mean is that the test failure is caused by a checkpoint triggered by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-28386&quot; title=&quot;Trigger an immediate checkpoint after all tasks has reached end-of-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-28386&quot;&gt;&lt;del&gt;FLINK-28386&lt;/del&gt;&lt;/a&gt;. However, it does not necessarily mean that &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-28386&quot; title=&quot;Trigger an immediate checkpoint after all tasks has reached end-of-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-28386&quot;&gt;&lt;del&gt;FLINK-28386&lt;/del&gt;&lt;/a&gt; is the root cause of this bug. For example, if the test can fail due to an immediate checkpoint triggered by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-28386&quot; title=&quot;Trigger an immediate checkpoint after all tasks has reached end-of-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-28386&quot;&gt;&lt;del&gt;FLINK-28386&lt;/del&gt;&lt;/a&gt;, there is also chance that the test can fail due to periodically triggered checkpoint.&lt;/p&gt;

&lt;p&gt;So we probably need to understand the root cause before determining how to fix it.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17749725" author="fanrui" created="Tue, 1 Aug 2023 12:59:29 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt;, thanks for your quick feedback.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;For example, if the test can fail due to an immediate checkpoint triggered by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-28386&quot; title=&quot;Trigger an immediate checkpoint after all tasks has reached end-of-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-28386&quot;&gt;&lt;del&gt;FLINK-28386&lt;/del&gt;&lt;/a&gt;, there is also chance that the test can fail due to periodically triggered checkpoint.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;As I said before, this test doesn&apos;t enable checkpoint. And the test will fail once the checkpoint is executed, because the addtional checkpoint will update the `PartitionedStateSource.checkCorrectSnapshot`. This bug can always be reproduced when enabling checkpoint.&lt;/p&gt;

&lt;p&gt;So my question is should &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-28386&quot; title=&quot;Trigger an immediate checkpoint after all tasks has reached end-of-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-28386&quot;&gt;&lt;del&gt;FLINK-28386&lt;/del&gt;&lt;/a&gt; trigger an immediate checkpoint even if the checkpoint of this job is disable? If yes, I can fix this test. If no, I can fix the &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-28386&quot; title=&quot;Trigger an immediate checkpoint after all tasks has reached end-of-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-28386&quot;&gt;&lt;del&gt;FLINK-28386&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17750073" author="lindong" created="Wed, 2 Aug 2023 03:09:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fanrui&quot; class=&quot;user-hover&quot; rel=&quot;fanrui&quot;&gt;fanrui&lt;/a&gt; Thanks for the investigation!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-27386&quot; title=&quot;throw NPE if multi MAPJOIN hint union all&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-27386&quot;&gt;&lt;del&gt;FLINK-27386&lt;/del&gt;&lt;/a&gt; is expected to trigger an immediate checkpoint only if checkpoint is enabled. According to our offline discussion, it appears that `StateWithExecutionGraph#notifyEndOfData` triggers an immediate checkpoint for this test.&lt;/p&gt;

&lt;p&gt;Currently, `StateWithExecutionGraph#notifyEndOfData` relies on `checkpointCoordinatorConfiguration != null` to check whether checkpoint is enabled. I agree it is useful to additionally check whether&#160;checkpointInterval is in range (0, Long.MAX_VALUE), similar to what is done in `JobGraph#isCheckpointingEnabled`.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17750102" author="lindong" created="Wed, 2 Aug 2023 05:25:21 +0000"  >&lt;p&gt;Merged to apache/flink master branch 7d07ec270cc02a04809d4981fbd1423bdf2822f2&lt;/p&gt;</comment>
                            <comment id="17750134" author="mapohl" created="Wed, 2 Aug 2023 06:43:53 +0000"  >&lt;p&gt;The following build failed due to the issue described in this Jira twice. It doesn&apos;t contain the above mentioned fix yet. I&apos;ll add this build failure anyway for documentation purposes.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51891&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8341&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51891&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8341&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51891&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=51891&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=8340&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="17750135" author="mapohl" created="Wed, 2 Aug 2023 06:44:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt; Please be reminded to update the fix version as well when merging the PR and closing the Jira. I will do it for this one. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17750156" author="lindong" created="Wed, 2 Aug 2023 07:23:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; Thanks for the reminder. Will do it in the future &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17750992" author="yanfei lei" created="Fri, 4 Aug 2023 07:29:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fanrui&quot; class=&quot;user-hover&quot; rel=&quot;fanrui&quot;&gt;fanrui&lt;/a&gt; Sorry for the late reply, thanks for the fix!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13470049">FLINK-28386</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13543117">FLINK-32574</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13061828" name="screenshot-1.png" size="312893" author="fanrui" created="Tue, 1 Aug 2023 11:48:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jcj4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>