<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:29:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-7552] Extend SinkFunction interface with SinkContext</title>
                <link>https://issues.apache.org/jira/browse/FLINK-7552</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Now that we require Java 8 we can extend the &lt;tt&gt;SinkFunction&lt;/tt&gt; interface without breaking backwards compatibility. I&apos;m proposing this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/**
 * Interface &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; implementing user defined sink functionality.
 *
 * @param &amp;lt;IN&amp;gt; Input type parameter.
 */
@Public
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; SinkFunction&amp;lt;IN&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Function, Serializable {

	/**
	 * Function &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; standard sink behaviour. This function is called &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; every record.
	 *
	 * @param value The input record.
	 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
	 * @deprecated Use {@link #invoke(SinkContext, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)}.
	 */
	@Deprecated
	&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; void invoke(IN value) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
	}

	/**
	 * Writes the given value to the sink. This function is called &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; every record.
	 *
	 * @param context Additional context about the input record.
	 * @param value The input record.
	 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
	 */
	&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; void invoke(SinkContext context, IN value) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		invoke(value);
	}

	/**
	 * Context that {@link SinkFunction SinkFunctions } can use &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting additional data about
	 * an input record.
	 *
	 * @param &amp;lt;T&amp;gt; The type of elements accepted by the sink.
	 */
	@Public &lt;span class=&quot;code-comment&quot;&gt;// Interface might be extended in the &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; with additional methods.
&lt;/span&gt;	&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; SinkContext&amp;lt;T&amp;gt; {

		/**
		 * Returns the timestamp of the current input record.
		 */
		&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; timestamp();
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For now, this only allows access to the element timestamp. This would allow us to fix the abomination that is &lt;tt&gt;FlinkKafkaProducer010&lt;/tt&gt;, which is a hybrid &lt;tt&gt;SinkFunction&lt;/tt&gt;/&lt;tt&gt;StreamOperator&lt;/tt&gt; only because it needs access to timestamps.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13098273">FLINK-7552</key>
            <summary>Extend SinkFunction interface with SinkContext</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="aljoscha">Aljoscha Krettek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Aug 2017 13:46:27 +0000</created>
                <updated>Thu, 21 Sep 2017 11:52:00 +0000</updated>
                            <resolved>Thu, 21 Sep 2017 11:51:27 +0000</resolved>
                                                    <fixVersion>1.4.0</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16145339" author="githubbot" created="Tue, 29 Aug 2017 13:59:50 +0000"  >&lt;p&gt;GitHub user aljoscha opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7552&quot; title=&quot;Extend SinkFunction interface with SinkContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7552&quot;&gt;&lt;del&gt;FLINK-7552&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7553&quot; title=&quot;Use new SinkFunction interface in FlinkKafkaProducer010&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7553&quot;&gt;&lt;del&gt;FLINK-7553&lt;/del&gt;&lt;/a&gt; Enhance SinkInterface / Use in FlinkKafkaProducer&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Enhance `SinkFunction` with a way of retrieving the element timestamp. This allows us to get rid of the hybrid nature of `FlinkKafkaProducer010`.&lt;/p&gt;

&lt;p&gt;    This is keeping the legacy static &quot;convenience&quot; methods &#224; la `FlinkKafkaProducer010.writeToKafkaWithTimestamps` for backwards compatibility.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Enhance Sink interface&lt;/li&gt;
	&lt;li&gt;Use new interface in Kafka Producer&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This change is already covered by existing tests, such as &lt;b&gt;(please describe tests)&lt;/b&gt;.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): no&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: no&lt;/li&gt;
	&lt;li&gt;The serializers: no&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): yes, call stack of KafkaProducer with writing timestamps is changed slightly, also, `StreamSink` operator now has a context object.&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: no&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? no&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? not applicable&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/aljoscha/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aljoscha/flink&lt;/a&gt; jira-7553-fix-kafka010-producer&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4616&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0b5bea36247736a0160ce584b94050d7b676d091&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-08-29T13:50:56Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7552&quot; title=&quot;Extend SinkFunction interface with SinkContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7552&quot;&gt;&lt;del&gt;FLINK-7552&lt;/del&gt;&lt;/a&gt; Extend SinkFunction interface with SinkContext&lt;/p&gt;

&lt;p&gt;commit d3a7b294542ea40287290ff4970715ead621d398&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-08-29T13:53:16Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7553&quot; title=&quot;Use new SinkFunction interface in FlinkKafkaProducer010&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7553&quot;&gt;&lt;del&gt;FLINK-7553&lt;/del&gt;&lt;/a&gt; Use new SinkFunction interface in FlinkKafkaProducer010&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16145357" author="githubbot" created="Tue, 29 Aug 2017 14:11:48 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    R: @rmetzger @pnowojski Could you please review this?&lt;/p&gt;</comment>
                            <comment id="16147230" author="githubbot" created="Wed, 30 Aug 2017 13:21:16 +0000"  >&lt;p&gt;Github user pnowojski commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r136062152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r136062152&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/sink/SinkFunction.java &amp;#8212;&lt;br/&gt;
    @@ -35,6 +35,40 @@&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value The input record.&lt;/li&gt;
	&lt;li&gt;@throws Exception&lt;br/&gt;
    +	 * @deprecated Use 
{@link #invoke(SinkContext, Object)}
&lt;p&gt;.&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;void invoke(IN value) throws Exception;&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	default void invoke(IN value) throws Exception 
{
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Writes the given value to the sink. This function is called for every record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param context Additional context about the input record.&lt;br/&gt;
    +	 * @param value The input record.&lt;br/&gt;
    +	 * @throws Exception&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	default void invoke(SinkContext context, IN value) throws Exception &lt;/p&gt;
{
    +		invoke(value);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Context that &lt;/p&gt;
{@link SinkFunction SinkFunctions }
&lt;p&gt; can use for getting additional data about&lt;br/&gt;
    +	 * an input record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;The context is only valid for the duration of a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link SinkFunction#invoke(SinkContext, Object)}
&lt;p&gt; call. Do not store the context and use&lt;br/&gt;
    +	 * afterwards!&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param &amp;lt;T&amp;gt; The type of elements accepted by the sink.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Public // Interface might be extended in the future with additional methods.&lt;br/&gt;
    +	interface SinkContext&amp;lt;T&amp;gt; &lt;/p&gt;
{
    +
    +		/**
    +		 * Returns the timestamp of the current input record.
    +		 */
    +		long timestamp();
    +	}
&lt;p&gt;    +&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    nit/side question: do we have new line between closing braces `}` at the end of the class in the code style?&lt;/p&gt;</comment>
                            <comment id="16147231" author="githubbot" created="Wed, 30 Aug 2017 13:21:16 +0000"  >&lt;p&gt;Github user pnowojski commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r136063488&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r136063488&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/operators/StreamSink.java &amp;#8212;&lt;br/&gt;
    @@ -31,14 +31,24 @@&lt;/p&gt;

&lt;p&gt;     	private static final long serialVersionUID = 1L;&lt;/p&gt;

&lt;p&gt;    +	private transient SimpleSinkContext sinkContext;&lt;br/&gt;
    +&lt;br/&gt;
     	public StreamSink(SinkFunction&amp;lt;IN&amp;gt; sinkFunction) &lt;/p&gt;
{
     		super(sinkFunction);
     		chainingStrategy = ChainingStrategy.ALWAYS;
     	}

&lt;p&gt;     	@Override&lt;br/&gt;
    +	public void open() throws Exception &lt;/p&gt;
{
    +		super.open();
    +
    +		this.sinkContext = new SimpleSinkContext&amp;lt;&amp;gt;();
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	@Override&lt;br/&gt;
     	public void processElement(StreamRecord&amp;lt;IN&amp;gt; element) throws Exception {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;userFunction.invoke(element.getValue());&lt;br/&gt;
    +		sinkContext.element = element;&lt;br/&gt;
    +		userFunction.invoke(sinkContext, element.getValue());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    wouldn&apos;t it be better/simpler to just pass `StreamRecord` to the `userFunction`?&lt;/p&gt;

&lt;p&gt;    `userFunction.invoke(element)`?&lt;/p&gt;

&lt;p&gt;    and instead of adding `SinkContext` as a first argument of the `invoke` method in the sink interface, just change the element type from `IN` to `StreamRecord&amp;lt;IN&amp;gt;`?&lt;/p&gt;</comment>
                            <comment id="16148659" author="githubbot" created="Thu, 31 Aug 2017 08:50:46 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r136279356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r136279356&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/sink/SinkFunction.java &amp;#8212;&lt;br/&gt;
    @@ -35,6 +35,40 @@&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value The input record.&lt;/li&gt;
	&lt;li&gt;@throws Exception&lt;br/&gt;
    +	 * @deprecated Use 
{@link #invoke(SinkContext, Object)}
&lt;p&gt;.&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;void invoke(IN value) throws Exception;&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	default void invoke(IN value) throws Exception 
{
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Writes the given value to the sink. This function is called for every record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param context Additional context about the input record.&lt;br/&gt;
    +	 * @param value The input record.&lt;br/&gt;
    +	 * @throws Exception&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	default void invoke(SinkContext context, IN value) throws Exception &lt;/p&gt;
{
    +		invoke(value);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Context that &lt;/p&gt;
{@link SinkFunction SinkFunctions }
&lt;p&gt; can use for getting additional data about&lt;br/&gt;
    +	 * an input record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;The context is only valid for the duration of a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link SinkFunction#invoke(SinkContext, Object)}
&lt;p&gt; call. Do not store the context and use&lt;br/&gt;
    +	 * afterwards!&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param &amp;lt;T&amp;gt; The type of elements accepted by the sink.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Public // Interface might be extended in the future with additional methods.&lt;br/&gt;
    +	interface SinkContext&amp;lt;T&amp;gt; &lt;/p&gt;
{
    +
    +		/**
    +		 * Returns the timestamp of the current input record.
    +		 */
    +		long timestamp();
    +	}
&lt;p&gt;    +&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think our &quot;code style&quot; is &quot;whatever is not rejected by our checkstyle&quot;, which is quite loose. &#128521; But you&apos;re right, I&apos;m removing the line.&lt;/p&gt;</comment>
                            <comment id="16148662" author="githubbot" created="Thu, 31 Aug 2017 08:51:44 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r136279538&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r136279538&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/operators/StreamSink.java &amp;#8212;&lt;br/&gt;
    @@ -31,14 +31,24 @@&lt;/p&gt;

&lt;p&gt;     	private static final long serialVersionUID = 1L;&lt;/p&gt;

&lt;p&gt;    +	private transient SimpleSinkContext sinkContext;&lt;br/&gt;
    +&lt;br/&gt;
     	public StreamSink(SinkFunction&amp;lt;IN&amp;gt; sinkFunction) &lt;/p&gt;
{
     		super(sinkFunction);
     		chainingStrategy = ChainingStrategy.ALWAYS;
     	}

&lt;p&gt;     	@Override&lt;br/&gt;
    +	public void open() throws Exception &lt;/p&gt;
{
    +		super.open();
    +
    +		this.sinkContext = new SimpleSinkContext&amp;lt;&amp;gt;();
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	@Override&lt;br/&gt;
     	public void processElement(StreamRecord&amp;lt;IN&amp;gt; element) throws Exception {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;userFunction.invoke(element.getValue());&lt;br/&gt;
    +		sinkContext.element = element;&lt;br/&gt;
    +		userFunction.invoke(sinkContext, element.getValue());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    `StreamRecord` is an internal concept that should not be exposed in any user facing API. That&apos;s the reason for the extract context. Plus, the context allows us to extend the information that we pass to the `SinkFunction` in the future, similar to the context in `ProcessFunction` and `ProcessWindowFunction`.&lt;/p&gt;</comment>
                            <comment id="16148664" author="githubbot" created="Thu, 31 Aug 2017 08:52:13 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    To be honest, I didn&apos;t look at the tests because I didn&apos;t think they would fail. Sorry for that. &#128531; I&apos;ll fix the tests and let you know once this is ready again.&lt;/p&gt;</comment>
                            <comment id="16148924" author="githubbot" created="Thu, 31 Aug 2017 12:42:40 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @rmetzger the binary compatibility checker is acting up because it doesn&apos;t like the changes to `SinkFunction` and `RichSinkFunction`. It might be that we can&apos;t actually change this. What do you think?&lt;/p&gt;</comment>
                            <comment id="16148966" author="githubbot" created="Thu, 31 Aug 2017 13:22:30 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The problem is that `RichSinkFunction` defines&lt;br/&gt;
    ```&lt;br/&gt;
    public abstract void invoke(IN value) throws Exception;&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    even though it implements `SinkFunction`, which defines:&lt;br/&gt;
    ```&lt;br/&gt;
    void invoke(IN value) throws Exception;&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    What this means is that code that is invoking these methods is different, depending on the type of reference. For example, in&lt;br/&gt;
    ```&lt;br/&gt;
    SinkFunction&amp;lt;String&amp;gt; interfaceSink = new SinkFunction&amp;lt;String&amp;gt;() {&lt;br/&gt;
        @Override&lt;br/&gt;
        public void invoke(String value) throws Exception {&lt;/p&gt;

&lt;p&gt;        }&lt;br/&gt;
    };&lt;/p&gt;

&lt;p&gt;    SinkFunction&amp;lt;String&amp;gt; interfaceSinkToRichSink = new RichSinkFunction&amp;lt;String&amp;gt;() {&lt;br/&gt;
        @Override&lt;br/&gt;
        public void invoke(String value) throws Exception {&lt;/p&gt;

&lt;p&gt;        }&lt;br/&gt;
    };&lt;/p&gt;

&lt;p&gt;    RichSinkFunction&amp;lt;String&amp;gt; richSink = new RichSinkFunction&amp;lt;String&amp;gt;() {&lt;br/&gt;
        @Override&lt;br/&gt;
        public void invoke(String value) throws Exception {&lt;/p&gt;

&lt;p&gt;        }&lt;br/&gt;
    };&lt;/p&gt;

&lt;p&gt;    interfaceSink.invoke(&quot;hello&quot;);&lt;br/&gt;
    interfaceSinkToRichSink.invoke(&quot;hello&quot;);&lt;br/&gt;
    richSink.invoke(&quot;hello&quot;);&lt;br/&gt;
    ```&lt;br/&gt;
    the first two calls are `invokeinterface` while the last call is using `invokevirtual`.&lt;/p&gt;

&lt;p&gt;    I don&apos;t think that people are using the sink interfaces for directly calling methods on them but this is the reason the binary compatibility checker is complaining.&lt;/p&gt;</comment>
                            <comment id="16148970" author="githubbot" created="Thu, 31 Aug 2017 13:29:08 +0000"  >&lt;p&gt;Github user pnowojski commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r136334346&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r136334346&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/operators/StreamSink.java &amp;#8212;&lt;br/&gt;
    @@ -31,14 +31,24 @@&lt;/p&gt;

&lt;p&gt;     	private static final long serialVersionUID = 1L;&lt;/p&gt;

&lt;p&gt;    +	private transient SimpleSinkContext sinkContext;&lt;br/&gt;
    +&lt;br/&gt;
     	public StreamSink(SinkFunction&amp;lt;IN&amp;gt; sinkFunction) &lt;/p&gt;
{
     		super(sinkFunction);
     		chainingStrategy = ChainingStrategy.ALWAYS;
     	}

&lt;p&gt;     	@Override&lt;br/&gt;
    +	public void open() throws Exception &lt;/p&gt;
{
    +		super.open();
    +
    +		this.sinkContext = new SimpleSinkContext&amp;lt;&amp;gt;();
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	@Override&lt;br/&gt;
     	public void processElement(StreamRecord&amp;lt;IN&amp;gt; element) throws Exception {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;userFunction.invoke(element.getValue());&lt;br/&gt;
    +		sinkContext.element = element;&lt;br/&gt;
    +		userFunction.invoke(sinkContext, element.getValue());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I get it, however I still do not like this objects repacking thing done here. Instead of passing `StreamRecord` directly, we could introduce `UserRecord` interface with `getTimestamp()` method, that would be implemented by `StreamRecord`.&lt;/p&gt;

&lt;p&gt;    But that&apos;s minor complain, if you have stronger preferences for keeping it as it is, it&apos;s fine for me.&lt;/p&gt;</comment>
                            <comment id="16148978" author="githubbot" created="Thu, 31 Aug 2017 13:35:42 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I see. It is a similar problem we&apos;ve discussed with the SourceContext. Users only implement it, but don&apos;t call it.&lt;/p&gt;

&lt;p&gt;    I believe in this case, it makes sense to add an exception to Japicmp to allow this change.&lt;/p&gt;</comment>
                            <comment id="16148990" author="githubbot" created="Thu, 31 Aug 2017 13:44:19 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Can we add fine-grained exclusions, or would this exclude the whole file?&lt;/p&gt;</comment>
                            <comment id="16149111" author="githubbot" created="Thu, 31 Aug 2017 15:13:38 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    No, you can define fine-grained exclusions. Check the excludes in the example: &lt;a href=&quot;http://siom79.github.io/japicmp/MavenPlugin.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://siom79.github.io/japicmp/MavenPlugin.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16150206" author="githubbot" created="Fri, 1 Sep 2017 08:38:13 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It seems we completely have to ignore `SinkFunction`, because japicmp will check its serialiVersionUID, which changed by adding a new method to the interface. (And yes, I know that checking the serialVersionUID on an interface does not make a lot of sense.)&lt;/p&gt;</comment>
                            <comment id="16150438" author="githubbot" created="Fri, 1 Sep 2017 12:35:07 +0000"  >&lt;p&gt;Github user pnowojski commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r136563378&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r136563378&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/FlinkKafkaProducerBase.java &amp;#8212;&lt;br/&gt;
    @@ -311,7 +311,6 @@ public void invoke(IN next) throws Exception &lt;/p&gt;
{
     		producer.send(record, callback);
     	}

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@Override
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Why did you remove `@Override`?&lt;/p&gt;</comment>
                            <comment id="16150531" author="githubbot" created="Fri, 1 Sep 2017 13:36:32 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r136575860&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r136575860&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/FlinkKafkaProducerBase.java &amp;#8212;&lt;br/&gt;
    @@ -311,7 +311,6 @@ public void invoke(IN next) throws Exception &lt;/p&gt;
{
     		producer.send(record, callback);
     	}

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@Override
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    That must have happened by accident, fixing...&lt;/p&gt;</comment>
                            <comment id="16150789" author="githubbot" created="Fri, 1 Sep 2017 16:26:26 +0000"  >&lt;p&gt;Github user EronWright commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r136614448&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r136614448&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/sink/SinkFunction.java &amp;#8212;&lt;br/&gt;
    @@ -35,6 +35,39 @@&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value The input record.&lt;/li&gt;
	&lt;li&gt;@throws Exception&lt;br/&gt;
    +	 * @deprecated Use 
{@link #invoke(SinkContext, Object)}
&lt;p&gt;.&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;void invoke(IN value) throws Exception;&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	default void invoke(IN value) throws Exception 
{
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Writes the given value to the sink. This function is called for every record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param context Additional context about the input record.&lt;br/&gt;
    +	 * @param value The input record.&lt;br/&gt;
    +	 * @throws Exception&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	default void invoke(SinkContext context, IN value) throws Exception {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Consider re-ordering the two arguments to more closely match the similar signature in `ProcessFunction`.&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    default void invoke(IN value, SinkContext ctx) throws Exception&lt;br/&gt;
    ```&lt;/p&gt;</comment>
                            <comment id="16150792" author="githubbot" created="Fri, 1 Sep 2017 16:29:43 +0000"  >&lt;p&gt;Github user EronWright commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r136615089&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r136615089&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/sink/SinkFunction.java &amp;#8212;&lt;br/&gt;
    @@ -35,6 +35,39 @@&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value The input record.&lt;/li&gt;
	&lt;li&gt;@throws Exception&lt;br/&gt;
    +	 * @deprecated Use 
{@link #invoke(SinkContext, Object)}
&lt;p&gt;.&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;void invoke(IN value) throws Exception;&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	default void invoke(IN value) throws Exception 
{
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Writes the given value to the sink. This function is called for every record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param context Additional context about the input record.&lt;br/&gt;
    +	 * @param value The input record.&lt;br/&gt;
    +	 * @throws Exception&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	default void invoke(SinkContext context, IN value) throws Exception &lt;/p&gt;
{
    +		invoke(value);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Context that &lt;/p&gt;
{@link SinkFunction SinkFunctions }
&lt;p&gt; can use for getting additional data about&lt;br/&gt;
    +	 * an input record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;The context is only valid for the duration of a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link SinkFunction#invoke(SinkContext, Object)}
&lt;p&gt; call. Do not store the context and use&lt;br/&gt;
    +	 * afterwards!&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param &amp;lt;T&amp;gt; The type of elements accepted by the sink.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Public // Interface might be extended in the future with additional methods.&lt;br/&gt;
    +	interface SinkContext&amp;lt;T&amp;gt; {&lt;br/&gt;
    +&lt;br/&gt;
    +		/**&lt;br/&gt;
    +		 * Returns the timestamp of the current input record.&lt;br/&gt;
    +		 */&lt;br/&gt;
    +		long timestamp();&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Consider returning a `Long` to better match the `Context` interface in `ProcessFunction`, and document the behavior when the time characteristic is `ProcessingTime`.&lt;br/&gt;
    ```&lt;br/&gt;
    		/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Timestamp of the element currently being processed or timestamp of a firing timer.&lt;br/&gt;
    		 *&lt;/li&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;This might be 
{@code null}
&lt;p&gt;, for example if the time characteristic of your program&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;is set to 
{@link org.apache.flink.streaming.api.TimeCharacteristic#ProcessingTime}
&lt;p&gt;.&lt;br/&gt;
    		 */&lt;br/&gt;
    		public abstract Long timestamp();&lt;br/&gt;
    ```&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16150797" author="githubbot" created="Fri, 1 Sep 2017 16:34:06 +0000"  >&lt;p&gt;Github user EronWright commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r136615982&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r136615982&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/sink/SinkFunction.java &amp;#8212;&lt;br/&gt;
    @@ -35,6 +35,39 @@&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value The input record.&lt;/li&gt;
	&lt;li&gt;@throws Exception&lt;br/&gt;
    +	 * @deprecated Use 
{@link #invoke(SinkContext, Object)}
&lt;p&gt;.&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;void invoke(IN value) throws Exception;&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	default void invoke(IN value) throws Exception 
{
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Writes the given value to the sink. This function is called for every record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param context Additional context about the input record.&lt;br/&gt;
    +	 * @param value The input record.&lt;br/&gt;
    +	 * @throws Exception&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	default void invoke(SinkContext context, IN value) throws Exception &lt;/p&gt;
{
    +		invoke(value);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Context that &lt;/p&gt;
{@link SinkFunction SinkFunctions }
&lt;p&gt; can use for getting additional data about&lt;br/&gt;
    +	 * an input record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;The context is only valid for the duration of a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link SinkFunction#invoke(SinkContext, Object)}
&lt;p&gt; call. Do not store the context and use&lt;br/&gt;
    +	 * afterwards!&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param &amp;lt;T&amp;gt; The type of elements accepted by the sink.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Public // Interface might be extended in the future with additional methods.&lt;br/&gt;
    +	interface SinkContext&amp;lt;T&amp;gt; {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Looking at `ProcessFunction`, the `Context` is an abstract class and has a simpler name.  For the sake of consistency, consider the same.&lt;/p&gt;</comment>
                            <comment id="16151820" author="githubbot" created="Sun, 3 Sep 2017 13:57:30 +0000"  >&lt;p&gt;Github user pnowojski commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r136717253&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r136717253&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/sink/SinkFunction.java &amp;#8212;&lt;br/&gt;
    @@ -35,6 +35,39 @@&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value The input record.&lt;/li&gt;
	&lt;li&gt;@throws Exception&lt;br/&gt;
    +	 * @deprecated Use 
{@link #invoke(SinkContext, Object)}
&lt;p&gt;.&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;void invoke(IN value) throws Exception;&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	default void invoke(IN value) throws Exception 
{
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Writes the given value to the sink. This function is called for every record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param context Additional context about the input record.&lt;br/&gt;
    +	 * @param value The input record.&lt;br/&gt;
    +	 * @throws Exception&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	default void invoke(SinkContext context, IN value) throws Exception &lt;/p&gt;
{
    +		invoke(value);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Context that &lt;/p&gt;
{@link SinkFunction SinkFunctions }
&lt;p&gt; can use for getting additional data about&lt;br/&gt;
    +	 * an input record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;The context is only valid for the duration of a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link SinkFunction#invoke(SinkContext, Object)}
&lt;p&gt; call. Do not store the context and use&lt;br/&gt;
    +	 * afterwards!&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param &amp;lt;T&amp;gt; The type of elements accepted by the sink.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Public // Interface might be extended in the future with additional methods.&lt;br/&gt;
    +	interface SinkContext&amp;lt;T&amp;gt; {&lt;br/&gt;
    +&lt;br/&gt;
    +		/**&lt;br/&gt;
    +		 * Returns the timestamp of the current input record.&lt;br/&gt;
    +		 */&lt;br/&gt;
    +		long timestamp();&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I would be against unnecessary boxing whenever it is possible. If calling `timestamp()` doesn&apos;t make sense for processing time, then it would be better to just throw an exception.&lt;/p&gt;</comment>
                            <comment id="16153919" author="githubbot" created="Tue, 5 Sep 2017 16:25:52 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r137039841&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r137039841&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/sink/SinkFunction.java &amp;#8212;&lt;br/&gt;
    @@ -35,6 +35,39 @@&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value The input record.&lt;/li&gt;
	&lt;li&gt;@throws Exception&lt;br/&gt;
    +	 * @deprecated Use 
{@link #invoke(SinkContext, Object)}
&lt;p&gt;.&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;void invoke(IN value) throws Exception;&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	default void invoke(IN value) throws Exception 
{
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Writes the given value to the sink. This function is called for every record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param context Additional context about the input record.&lt;br/&gt;
    +	 * @param value The input record.&lt;br/&gt;
    +	 * @throws Exception&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	default void invoke(SinkContext context, IN value) throws Exception {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Makes sense, I will change this. &#128077; &lt;/p&gt;</comment>
                            <comment id="16154126" author="githubbot" created="Tue, 5 Sep 2017 18:49:04 +0000"  >&lt;p&gt;Github user EronWright commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r137082133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r137082133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/sink/SinkFunction.java &amp;#8212;&lt;br/&gt;
    @@ -35,6 +35,39 @@&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value The input record.&lt;/li&gt;
	&lt;li&gt;@throws Exception&lt;br/&gt;
    +	 * @deprecated Use 
{@link #invoke(SinkContext, Object)}
&lt;p&gt;.&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;void invoke(IN value) throws Exception;&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	default void invoke(IN value) throws Exception 
{
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Writes the given value to the sink. This function is called for every record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param context Additional context about the input record.&lt;br/&gt;
    +	 * @param value The input record.&lt;br/&gt;
    +	 * @throws Exception&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	default void invoke(SinkContext context, IN value) throws Exception &lt;/p&gt;
{
    +		invoke(value);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Context that &lt;/p&gt;
{@link SinkFunction SinkFunctions }
&lt;p&gt; can use for getting additional data about&lt;br/&gt;
    +	 * an input record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;The context is only valid for the duration of a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link SinkFunction#invoke(SinkContext, Object)}
&lt;p&gt; call. Do not store the context and use&lt;br/&gt;
    +	 * afterwards!&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param &amp;lt;T&amp;gt; The type of elements accepted by the sink.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Public // Interface might be extended in the future with additional methods.&lt;br/&gt;
    +	interface SinkContext&amp;lt;T&amp;gt; {&lt;br/&gt;
    +&lt;br/&gt;
    +		/**&lt;br/&gt;
    +		 * Returns the timestamp of the current input record.&lt;br/&gt;
    +		 */&lt;br/&gt;
    +		long timestamp();&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    @pnowojski let us not throw an exception here, given the commented-out section of `StreamRecord::getTimestamp` which suggests a problem with that approach.   It would be good to know why `ProcessFunction` used a `Long` rather than `long`.   I have an almost unhealthy desire for consistency.&lt;/p&gt;</comment>
                            <comment id="16155012" author="githubbot" created="Wed, 6 Sep 2017 08:40:47 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r137205749&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r137205749&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/sink/SinkFunction.java &amp;#8212;&lt;br/&gt;
    @@ -35,6 +35,39 @@&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value The input record.&lt;/li&gt;
	&lt;li&gt;@throws Exception&lt;br/&gt;
    +	 * @deprecated Use 
{@link #invoke(SinkContext, Object)}
&lt;p&gt;.&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;void invoke(IN value) throws Exception;&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	default void invoke(IN value) throws Exception 
{
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Writes the given value to the sink. This function is called for every record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param context Additional context about the input record.&lt;br/&gt;
    +	 * @param value The input record.&lt;br/&gt;
    +	 * @throws Exception&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	default void invoke(SinkContext context, IN value) throws Exception &lt;/p&gt;
{
    +		invoke(value);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Context that &lt;/p&gt;
{@link SinkFunction SinkFunctions }
&lt;p&gt; can use for getting additional data about&lt;br/&gt;
    +	 * an input record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;The context is only valid for the duration of a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link SinkFunction#invoke(SinkContext, Object)}
&lt;p&gt; call. Do not store the context and use&lt;br/&gt;
    +	 * afterwards!&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param &amp;lt;T&amp;gt; The type of elements accepted by the sink.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Public // Interface might be extended in the future with additional methods.&lt;br/&gt;
    +	interface SinkContext&amp;lt;T&amp;gt; {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I&apos;d like that as well but the approach won&apos;t work here because `SinkFunction` is an interface, i.e. I cannot have a `SinkFunction&amp;lt;T&amp;gt;.Context` because I can&apos;t use the generic parameter here.&lt;/p&gt;</comment>
                            <comment id="16155014" author="githubbot" created="Wed, 6 Sep 2017 08:43:32 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r137206502&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r137206502&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/sink/SinkFunction.java &amp;#8212;&lt;br/&gt;
    @@ -35,6 +35,39 @@&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param value The input record.&lt;/li&gt;
	&lt;li&gt;@throws Exception&lt;br/&gt;
    +	 * @deprecated Use 
{@link #invoke(SinkContext, Object)}
&lt;p&gt;.&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;void invoke(IN value) throws Exception;&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	default void invoke(IN value) throws Exception 
{
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Writes the given value to the sink. This function is called for every record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param context Additional context about the input record.&lt;br/&gt;
    +	 * @param value The input record.&lt;br/&gt;
    +	 * @throws Exception&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	default void invoke(SinkContext context, IN value) throws Exception &lt;/p&gt;
{
    +		invoke(value);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Context that &lt;/p&gt;
{@link SinkFunction SinkFunctions }
&lt;p&gt; can use for getting additional data about&lt;br/&gt;
    +	 * an input record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;The context is only valid for the duration of a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link SinkFunction#invoke(SinkContext, Object)}
&lt;p&gt; call. Do not store the context and use&lt;br/&gt;
    +	 * afterwards!&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param &amp;lt;T&amp;gt; The type of elements accepted by the sink.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Public // Interface might be extended in the future with additional methods.&lt;br/&gt;
    +	interface SinkContext&amp;lt;T&amp;gt; {&lt;br/&gt;
    +&lt;br/&gt;
    +		/**&lt;br/&gt;
    +		 * Returns the timestamp of the current input record.&lt;br/&gt;
    +		 */&lt;br/&gt;
    +		long timestamp();&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    @StephanEwen What do you think about this? You introduced the code in `StreamRecord` that returns `Long.MIN_VALUE` when there is no timestamp instead of throwing an exception.&lt;/p&gt;</comment>
                            <comment id="16171753" author="githubbot" created="Tue, 19 Sep 2017 14:01:46 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @pnowojski and @EronWright I changed the name of the `Context`, I added a test in `StreamSinkOperatorTest`, I added methods or querying current processing time/watermark to the context. I changed the `timestamp()` method to return a primitive `long` and I added a method `hasTimestamp()`. Also, `timestamp()` now throws an exception if no timestamp is available.&lt;/p&gt;

&lt;p&gt;    What do you think?&lt;/p&gt;</comment>
                            <comment id="16173158" author="githubbot" created="Wed, 20 Sep 2017 13:14:01 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 from my side to merge it like this (using boxed long, dropping the `hasTimestamp()` method.&lt;/p&gt;

&lt;p&gt;    My reasoning is that this is consistent with `ProcessFunction` (like @EronWright said), it is also not in a hot loop and lazily created, so I do not expect a big performance hit.&lt;/p&gt;

&lt;p&gt;    @aljoscha and me talked a lot about the whole design of when records have timestamps and whether in the future we should just assume that records always have timestamps. That biased my towards dropping the `hasTimestamp()` method.&lt;/p&gt;</comment>
                            <comment id="16173931" author="githubbot" created="Wed, 20 Sep 2017 22:25:28 +0000"  >&lt;p&gt;Github user EronWright commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616#discussion_r140108752&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616#discussion_r140108752&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/sink/SinkFunction.java &amp;#8212;&lt;br/&gt;
    @@ -31,10 +31,50 @@&lt;br/&gt;
     public interface SinkFunction&amp;lt;IN&amp;gt; extends Function, Serializable {&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Function for standard sink behaviour. This function is called for every record.&lt;br/&gt;
    +	 * @deprecated Use 
{@link #invoke(Object, Context)}
&lt;p&gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Deprecated&lt;br/&gt;
    +	default void invoke(IN value) throws Exception {}&lt;br/&gt;
    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Writes the given value to the sink. This function is called for every record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;You have to override this method when implementing a &lt;/p&gt;
{@code SinkFunction}
&lt;p&gt;, this is a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@code default}
&lt;p&gt; method for backward compatibility with the old-style method only.&lt;br/&gt;
     	 *&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;@param value The input record.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @throws Exception&lt;br/&gt;
    +	 * @param context Additional context about the input record.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @throws Exception This method may throw exceptions. Throwing an exception will cause the operation&lt;br/&gt;
    +	 *                   to fail and may trigger recovery.&lt;br/&gt;
     	 */&lt;/li&gt;
	&lt;li&gt;void invoke(IN value) throws Exception;&lt;br/&gt;
    +	default void invoke(IN value, Context context) throws Exception 
{
    +		invoke(value);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Context that &lt;/p&gt;
{@link SinkFunction SinkFunctions }
&lt;p&gt; can use for getting additional data about&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Is the link in this comment well-formed?&lt;/p&gt;</comment>
                            <comment id="16173936" author="githubbot" created="Wed, 20 Sep 2017 22:27:15 +0000"  >&lt;p&gt;Github user EronWright commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1&lt;/p&gt;</comment>
                            <comment id="16174616" author="githubbot" created="Thu, 21 Sep 2017 11:47:13 +0000"  >&lt;p&gt;Github user aljoscha closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16174622" author="aljoscha" created="Thu, 21 Sep 2017 11:51:27 +0000"  >&lt;p&gt;Implemented in e7996b0d0ff5fe705a3830f3855f977cad4f0c44&lt;/p&gt;</comment>
                            <comment id="16174624" author="githubbot" created="Thu, 21 Sep 2017 11:52:00 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4616&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the reviews, everyone! &#128515; &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="13011287">FLINK-4796</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="13098276">FLINK-7553</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jeiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>