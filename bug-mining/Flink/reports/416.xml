<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2098] Checkpoint barrier initiation at source is not aligned with snapshotting</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2098</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The stream source does not properly align the emission of checkpoint barriers with the drawing of snapshots.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12833021">FLINK-2098</key>
            <summary>Checkpoint barrier initiation at source is not aligned with snapshotting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="sewen">Stephan Ewen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 May 2015 12:20:47 +0000</created>
                <updated>Thu, 28 Feb 2019 11:15:31 +0000</updated>
                            <resolved>Thu, 4 Jun 2015 16:53:42 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14560901" author="aljoscha" created="Wed, 27 May 2015 12:48:04 +0000"  >&lt;p&gt;Is this the reason for the non-deterministic test cases we observed?&lt;/p&gt;</comment>
                            <comment id="14562597" author="aljoscha" created="Thu, 28 May 2015 09:49:00 +0000"  >&lt;p&gt;I started working on this. I will first develop a test that spots the current faulty behaviour and then I will fix it.&lt;/p&gt;</comment>
                            <comment id="14563209" author="githubbot" created="Thu, 28 May 2015 16:34:09 +0000"  >&lt;p&gt;GitHub user aljoscha opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2098&quot; title=&quot;Checkpoint barrier initiation at source is not aligned with snapshotting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2098&quot;&gt;&lt;del&gt;FLINK-2098&lt;/del&gt;&lt;/a&gt; Ensure checkpoints and element emission are in order&lt;/p&gt;

&lt;p&gt;    Before, it could happen that a streaming source would keep emitting&lt;br/&gt;
    elements while a checkpoint is being performed. This can lead to&lt;br/&gt;
    inconsistencies in the checkpoints with other operators.&lt;/p&gt;

&lt;p&gt;    This also adds a test that checks whether only one checkpoint is&lt;br/&gt;
    executed at a time and the serial behaviour of checkpointing and&lt;br/&gt;
    emission.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/aljoscha/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aljoscha/flink&lt;/a&gt; checkpoint-hardening&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #742&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5df7410f44c640f3a183b525f697bbc11a69c69b&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-05-28T08:24:37Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2098&quot; title=&quot;Checkpoint barrier initiation at source is not aligned with snapshotting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2098&quot;&gt;&lt;del&gt;FLINK-2098&lt;/del&gt;&lt;/a&gt; Ensure checkpoints and element emission are in order&lt;/p&gt;

&lt;p&gt;    Before, it could happen that a streaming source would keep emitting&lt;br/&gt;
    elements while a checkpoint is being performed. This can lead to&lt;br/&gt;
    inconsistencies in the checkpoints with other operators.&lt;/p&gt;

&lt;p&gt;    This also adds a test that checks whether only one checkpoint is&lt;br/&gt;
    executed at a time and the serial behaviour of checkpointing and&lt;br/&gt;
    emission.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14563211" author="githubbot" created="Thu, 28 May 2015 16:35:03 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-106471093&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-106471093&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This also enables the exactly once checkpointing test added earlier by @StephanEwen.&lt;/p&gt;</comment>
                            <comment id="14563229" author="githubbot" created="Thu, 28 May 2015 16:45:02 +0000"  >&lt;p&gt;Github user mbalassi commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#discussion_r31253258&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#discussion_r31253258&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-staging/flink-streaming/flink-streaming-core/src/test/java/org/apache/flink/streaming/runtime/tasks/StreamMockEnvironment.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,294 @@&lt;br/&gt;
    +/**&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + * distributed with this work for additional information&lt;br/&gt;
    + * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    + * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    + * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    + * with the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +package org.apache.flink.streaming.runtime.tasks;&lt;br/&gt;
    +/*&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Trivial: two licenses.&lt;/p&gt;</comment>
                            <comment id="14563231" author="githubbot" created="Thu, 28 May 2015 16:45:56 +0000"  >&lt;p&gt;Github user mbalassi commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#discussion_r31253333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#discussion_r31253333&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-staging/flink-streaming/flink-streaming-core/src/test/java/org/apache/flink/streaming/runtime/tasks/StreamTaskTestBase.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,135 @@&lt;br/&gt;
    +/**&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + * distributed with this work for additional information&lt;br/&gt;
    + * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    + * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    + * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    + * with the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +package org.apache.flink.streaming.runtime.tasks;&lt;br/&gt;
    +/*&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + * distributed with this work for additional information&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Trivial: two licenses.&lt;/p&gt;</comment>
                            <comment id="14567126" author="githubbot" created="Mon, 1 Jun 2015 10:13:40 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-107388477&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-107388477&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    As per the discussion on the mailing list I&apos;m rewriting the Source interface to only have the run()/cancel() variant.&lt;/p&gt;</comment>
                            <comment id="14567445" author="githubbot" created="Mon, 1 Jun 2015 15:36:34 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-107589378&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-107589378&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I reworked the sources now. Could someone please have another pass over this. I think this is very critical code.&lt;/p&gt;</comment>
                            <comment id="14567498" author="githubbot" created="Mon, 1 Jun 2015 16:11:35 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-107613541&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-107613541&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ll make a pass&lt;/p&gt;</comment>
                            <comment id="14567848" author="githubbot" created="Mon, 1 Jun 2015 19:26:32 +0000"  >&lt;p&gt;Github user mbalassi commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#discussion_r31460503&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#discussion_r31460503&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-staging/flink-streaming/flink-streaming-core/src/main/java/org/apache/flink/streaming/api/functions/source/SourceFunction.java &amp;#8212;&lt;br/&gt;
    @@ -19,66 +19,81 @@&lt;br/&gt;
     package org.apache.flink.streaming.api.functions.source;&lt;/p&gt;

&lt;p&gt;     import org.apache.flink.api.common.functions.Function;&lt;br/&gt;
    +import org.apache.flink.util.Collector;&lt;/p&gt;

&lt;p&gt;     import java.io.Serializable;&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Base interface for all stream data sources in Flink. The contract of a stream source&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* is similar to an iterator - it is consumed as in the following pseudo code:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Maybe streaming data sources, instead of stream data sources. Not to confuse with file streams are intermediate results.&lt;/p&gt;</comment>
                            <comment id="14567853" author="githubbot" created="Mon, 1 Jun 2015 19:30:24 +0000"  >&lt;p&gt;Github user mbalassi commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#discussion_r31460859&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#discussion_r31460859&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-staging/flink-streaming/flink-streaming-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/api/persistent/PersistentKafkaSource.java &amp;#8212;&lt;br/&gt;
    @@ -61,10 +63,14 @@&lt;br/&gt;
      *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Note that the autocommit feature of Kafka needs to be disabled for using this source.&lt;br/&gt;
      */&lt;br/&gt;
    -public class PersistentKafkaSource&amp;lt;OUT&amp;gt; extends RichParallelSourceFunction&amp;lt;OUT&amp;gt; implements&lt;br/&gt;
    +public class PersistentKafkaSource&amp;lt;OUT&amp;gt; extends RichSourceFunction&amp;lt;OUT&amp;gt; implements&lt;br/&gt;
     		ResultTypeQueryable&amp;lt;OUT&amp;gt;,&lt;br/&gt;
     		CheckpointCommitter,&lt;br/&gt;
    +		ParallelSourceFunction&amp;lt;OUT&amp;gt;,&lt;br/&gt;
     		CheckpointedAsynchronously&amp;lt;long[]&amp;gt; {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Please have a RichParallelSourceFunction instead.&lt;/p&gt;</comment>
                            <comment id="14567868" author="githubbot" created="Mon, 1 Jun 2015 19:41:33 +0000"  >&lt;p&gt;Github user mbalassi commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#discussion_r31461903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#discussion_r31461903&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-staging/flink-streaming/flink-streaming-connectors/flink-connector-twitter/src/main/java/org/apache/flink/streaming/connectors/twitter/TwitterSource.java &amp;#8212;&lt;br/&gt;
    @@ -1,322 +1,322 @@&lt;br/&gt;
    -/*&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Licensed to the Apache Software Foundation (ASF) under one or more&lt;/li&gt;
	&lt;li&gt;* contributor license agreements.  See the NOTICE file distributed with&lt;/li&gt;
	&lt;li&gt;* this work for additional information regarding copyright ownership.&lt;/li&gt;
	&lt;li&gt;* The ASF licenses this file to You under the Apache License, Version 2.0&lt;/li&gt;
	&lt;li&gt;* (the &quot;License&quot;); you may not use this file except in compliance with&lt;/li&gt;
	&lt;li&gt;* the License.  You may obtain a copy of the License at&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;*    &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* Unless required by applicable law or agreed to in writing, software&lt;/li&gt;
	&lt;li&gt;* distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;/li&gt;
	&lt;li&gt;* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;/li&gt;
	&lt;li&gt;* See the License for the specific language governing permissions and&lt;/li&gt;
	&lt;li&gt;* limitations under the License.&lt;/li&gt;
	&lt;li&gt;*/&lt;br/&gt;
    -&lt;br/&gt;
    -package org.apache.flink.streaming.connectors.twitter;&lt;br/&gt;
    -&lt;br/&gt;
    -import java.io.FileInputStream;&lt;br/&gt;
    -import java.io.InputStream;&lt;br/&gt;
    -import java.util.Properties;&lt;br/&gt;
    -import java.util.concurrent.BlockingQueue;&lt;br/&gt;
    -import java.util.concurrent.LinkedBlockingQueue;&lt;br/&gt;
    -import java.util.concurrent.TimeUnit;&lt;br/&gt;
    -&lt;br/&gt;
    -import org.apache.flink.configuration.Configuration;&lt;br/&gt;
    -import org.apache.flink.streaming.api.functions.source.RichParallelSourceFunction;&lt;br/&gt;
    -import org.apache.flink.streaming.api.functions.source.SourceFunction;&lt;br/&gt;
    -import org.apache.flink.util.Collector;&lt;br/&gt;
    -import org.slf4j.Logger;&lt;br/&gt;
    -import org.slf4j.LoggerFactory;&lt;br/&gt;
    -&lt;br/&gt;
    -import com.twitter.hbc.ClientBuilder;&lt;br/&gt;
    -import com.twitter.hbc.core.Constants;&lt;br/&gt;
    -import com.twitter.hbc.core.endpoint.StatusesSampleEndpoint;&lt;br/&gt;
    -import com.twitter.hbc.core.processor.StringDelimitedProcessor;&lt;br/&gt;
    -import com.twitter.hbc.httpclient.BasicClient;&lt;br/&gt;
    -import com.twitter.hbc.httpclient.auth.Authentication;&lt;br/&gt;
    -import com.twitter.hbc.httpclient.auth.OAuth1;&lt;br/&gt;
    -&lt;br/&gt;
    -/**&lt;/li&gt;
	&lt;li&gt;* Implementation of 
{@link SourceFunction}
&lt;p&gt; specialized to emit tweets from&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;* Twitter. It can connect to Twitter Streaming API, collect tweets and&lt;/li&gt;
	&lt;li&gt;*/&lt;br/&gt;
    -public class TwitterSource extends RichParallelSourceFunction&amp;lt;String&amp;gt; {&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private static final Logger LOG = LoggerFactory.getLogger(TwitterSource.class);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private static final long serialVersionUID = 1L;&lt;/li&gt;
	&lt;li&gt;private String authPath;&lt;/li&gt;
	&lt;li&gt;private transient BlockingQueue&amp;lt;String&amp;gt; queue;&lt;/li&gt;
	&lt;li&gt;private int queueSize = 10000;&lt;/li&gt;
	&lt;li&gt;private transient BasicClient client;&lt;/li&gt;
	&lt;li&gt;private int waitSec = 5;&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private int maxNumberOfTweets;&lt;/li&gt;
	&lt;li&gt;private int currentNumberOfTweets;&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private String nextElement = null;&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private volatile boolean isRunning = false;&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Create 
{@link TwitterSource} for streaming&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @param authPath&lt;br/&gt;
    -	 *            Location of the properties file containing the required&lt;br/&gt;
    -	 *            authentication information.&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	public TwitterSource(String authPath) {
    -		this.authPath = authPath;
    -		maxNumberOfTweets = -1;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * Create {@link TwitterSource}
&lt;p&gt; to collect finite number of tweets&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @param authPath&lt;/li&gt;
	&lt;li&gt;*            Location of the properties file containing the required&lt;/li&gt;
	&lt;li&gt;*            authentication information.&lt;/li&gt;
	&lt;li&gt;* @param numberOfTweets&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;public TwitterSource(String authPath, int numberOfTweets) 
{
    -		this.authPath = authPath;
    -		this.maxNumberOfTweets = numberOfTweets;
    -	}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public void open(Configuration parameters) throws Exception 
{
    -		initializeConnection();
    -		currentNumberOfTweets = 0;
    -	}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Initialize Hosebird Client to be able to consume Twitter&apos;s Streaming API&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;private void initializeConnection() {&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (LOG.isInfoEnabled()) 
{
    -			LOG.info(&quot;Initializing Twitter Streaming API connection&quot;);
    -		}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;queue = new LinkedBlockingQueue&amp;lt;String&amp;gt;(queueSize);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;StatusesSampleEndpoint endpoint = new StatusesSampleEndpoint();&lt;/li&gt;
	&lt;li&gt;endpoint.stallWarnings(false);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;Authentication auth = authenticate();&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;initializeClient(endpoint, auth);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (LOG.isInfoEnabled()) 
{
    -			LOG.info(&quot;Twitter Streaming API connection established successfully&quot;);
    -		}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private OAuth1 authenticate() 
{
    -
    -		Properties authenticationProperties = loadAuthenticationProperties();
    -
    -		return new OAuth1(authenticationProperties.getProperty(&quot;consumerKey&quot;),
    -				authenticationProperties.getProperty(&quot;consumerSecret&quot;),
    -				authenticationProperties.getProperty(&quot;token&quot;),
    -				authenticationProperties.getProperty(&quot;secret&quot;));
    -	}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Reads the given properties file for the authentication data.&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @return the authentication data.&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;private Properties loadAuthenticationProperties() {&lt;/li&gt;
	&lt;li&gt;Properties properties = new Properties();&lt;/li&gt;
	&lt;li&gt;try 
{
    -			InputStream input = new FileInputStream(authPath);
    -			properties.load(input);
    -			input.close();
    -		}
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
    -			throw new RuntimeException(&quot;Cannot open .properties file: &quot; + authPath, e);
    -		}&lt;/li&gt;
	&lt;li&gt;return properties;&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private void initializeClient(StatusesSampleEndpoint endpoint, Authentication auth) 
{
    -
    -		client = new ClientBuilder().name(&quot;twitterSourceClient&quot;).hosts(Constants.STREAM_HOST)
    -				.endpoint(endpoint).authentication(auth)
    -				.processor(new StringDelimitedProcessor(queue)).build();
    -
    -		client.connect();
    -	}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Put tweets into output&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @param collector&lt;/li&gt;
	&lt;li&gt;*            Collector in which the tweets are collected.&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;protected void collectFiniteMessages(Collector&amp;lt;String&amp;gt; collector) {&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (LOG.isInfoEnabled()) 
{
    -			LOG.info(&quot;Collecting tweets&quot;);
    -		}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;for (int i = 0; i &amp;lt; maxNumberOfTweets; i++) 
{
    -			collectOneMessage(collector);
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -		if (LOG.isInfoEnabled()) {
    -			LOG.info(&quot;Collecting tweets finished&quot;);
    -		}&lt;br/&gt;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * Put tweets into output&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @param collector&lt;br/&gt;
    -	 *            Collector in which the tweets are collected.&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	protected void collectMessages(Collector&amp;lt;String&amp;gt; collector) {&lt;br/&gt;
    -&lt;br/&gt;
    -		if (LOG.isInfoEnabled()) {
    -			LOG.info(&quot;Tweet-stream begins&quot;);
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -		while (isRunning) {    -			collectOneMessage(collector);    -		}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Put one tweet into the output.&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @param collector&lt;/li&gt;
	&lt;li&gt;*            Collector in which the tweets are collected.&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;protected void collectOneMessage(Collector&amp;lt;String&amp;gt; collector) {&lt;/li&gt;
	&lt;li&gt;if (client.isDone()) {&lt;/li&gt;
	&lt;li&gt;if (LOG.isErrorEnabled()) {&lt;/li&gt;
	&lt;li&gt;LOG.error(&quot;Client connection closed unexpectedly: {}&quot;, client.getExitEvent()&lt;/li&gt;
	&lt;li&gt;.getMessage());&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;try {&lt;/li&gt;
	&lt;li&gt;String msg = queue.poll(waitSec, TimeUnit.SECONDS);&lt;/li&gt;
	&lt;li&gt;if (msg != null) 
{
    -				collector.collect(msg);
    -			}
&lt;p&gt; else {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (LOG.isInfoEnabled()) {&lt;/li&gt;
	&lt;li&gt;LOG.info(&quot;Did not receive a message in {} seconds&quot;, waitSec);&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;} catch (InterruptedException e) 
{
    -			throw new RuntimeException(&quot;&apos;Waiting for tweet&apos; thread is interrupted&quot;, e);
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	private void closeConnection() {&lt;br/&gt;
    -&lt;br/&gt;
    -		if (LOG.isInfoEnabled()) {
    -			LOG.info(&quot;Initiating connection close&quot;);
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -		client.stop();&lt;br/&gt;
    -&lt;br/&gt;
    -		if (LOG.isInfoEnabled()) {
    -			LOG.info(&quot;Connection closed successfully&quot;);
    -		}&lt;br/&gt;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * Get the size of the queue in which the tweets are contained temporarily.&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @return the size of the queue in which the tweets are contained&lt;br/&gt;
    -	 *         temporarily&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	public int getQueueSize() {
    -		return queueSize;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * Set the size of the queue in which the tweets are contained temporarily.&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @param queueSize&lt;br/&gt;
    -	 *            The desired value.&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	public void setQueueSize(int queueSize) {
    -		this.queueSize = queueSize;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * This function tells how long TwitterSource waits for the tweets.&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @return Number of second.&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	public int getWaitSec() {
    -		return waitSec;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * This function sets how long TwitterSource should wait for the tweets.&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @param waitSec&lt;br/&gt;
    -	 *            The desired value.&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	public void setWaitSec(int waitSec) {
    -		this.waitSec = waitSec;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	@Override&lt;br/&gt;
    -	public boolean reachedEnd() throws Exception {&lt;br/&gt;
    -		if (currentNumberOfTweets &amp;gt;= maxNumberOfTweets) {
    -			return false;
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -		if (nextElement != null) {
    -			return true;
    -		}&lt;br/&gt;
    -		if (client.isDone()) {&lt;br/&gt;
    -			if (LOG.isErrorEnabled()) {&lt;br/&gt;
    -				LOG.error(&quot;Client connection closed unexpectedly: {}&quot;, client.getExitEvent()&lt;br/&gt;
    -						.getMessage());&lt;br/&gt;
    -			}&lt;br/&gt;
    -			return false;&lt;br/&gt;
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -		try {&lt;br/&gt;
    -			String msg = queue.poll(waitSec, TimeUnit.SECONDS);&lt;br/&gt;
    -			if (msg != null) {
    -				nextElement = msg;
    -				return true;
    -			} else {&lt;br/&gt;
    -				if (LOG.isInfoEnabled()) {&lt;br/&gt;
    -					LOG.info(&quot;Did not receive a message in {} seconds&quot;, waitSec);&lt;br/&gt;
    -				}&lt;br/&gt;
    -			}&lt;br/&gt;
    -		} catch (InterruptedException e) {    -			throw new RuntimeException(&quot;&apos;Waiting for tweet&apos; thread is interrupted&quot;, e);    -		}&lt;/li&gt;
	&lt;li&gt;return false;&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public String next() throws Exception {&lt;/li&gt;
	&lt;li&gt;if (nextElement != null) 
{
    -			String result = nextElement;
    -			nextElement = null;
    -			return result;
    -		}&lt;br/&gt;
    -		if (reachedEnd()) {
    -			throw new RuntimeException(&quot;Twitter stream end reached.&quot;);
    -		} else {    -			String result = nextElement;    -			nextElement = null;    -			return result;    -		}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -}&lt;br/&gt;
    +///*&lt;br/&gt;
    +// * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
    +// * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
    +// * this work for additional information regarding copyright ownership.&lt;br/&gt;
    +// * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
    +// * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
    +// * the License.  You may obtain a copy of the License at&lt;br/&gt;
    +// *&lt;br/&gt;
    +// *    &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +// *&lt;br/&gt;
    +// * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +// * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +// * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +// * See the License for the specific language governing permissions and&lt;br/&gt;
    +// * limitations under the License.
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Whole file commented out.&lt;/p&gt;</comment>
                            <comment id="14567903" author="githubbot" created="Mon, 1 Jun 2015 19:59:38 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#discussion_r31463699&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#discussion_r31463699&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-staging/flink-streaming/flink-streaming-connectors/flink-connector-twitter/src/main/java/org/apache/flink/streaming/connectors/twitter/TwitterSource.java &amp;#8212;&lt;br/&gt;
    @@ -1,322 +1,322 @@&lt;br/&gt;
    -/*&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Licensed to the Apache Software Foundation (ASF) under one or more&lt;/li&gt;
	&lt;li&gt;* contributor license agreements.  See the NOTICE file distributed with&lt;/li&gt;
	&lt;li&gt;* this work for additional information regarding copyright ownership.&lt;/li&gt;
	&lt;li&gt;* The ASF licenses this file to You under the Apache License, Version 2.0&lt;/li&gt;
	&lt;li&gt;* (the &quot;License&quot;); you may not use this file except in compliance with&lt;/li&gt;
	&lt;li&gt;* the License.  You may obtain a copy of the License at&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;*    &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* Unless required by applicable law or agreed to in writing, software&lt;/li&gt;
	&lt;li&gt;* distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;/li&gt;
	&lt;li&gt;* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;/li&gt;
	&lt;li&gt;* See the License for the specific language governing permissions and&lt;/li&gt;
	&lt;li&gt;* limitations under the License.&lt;/li&gt;
	&lt;li&gt;*/&lt;br/&gt;
    -&lt;br/&gt;
    -package org.apache.flink.streaming.connectors.twitter;&lt;br/&gt;
    -&lt;br/&gt;
    -import java.io.FileInputStream;&lt;br/&gt;
    -import java.io.InputStream;&lt;br/&gt;
    -import java.util.Properties;&lt;br/&gt;
    -import java.util.concurrent.BlockingQueue;&lt;br/&gt;
    -import java.util.concurrent.LinkedBlockingQueue;&lt;br/&gt;
    -import java.util.concurrent.TimeUnit;&lt;br/&gt;
    -&lt;br/&gt;
    -import org.apache.flink.configuration.Configuration;&lt;br/&gt;
    -import org.apache.flink.streaming.api.functions.source.RichParallelSourceFunction;&lt;br/&gt;
    -import org.apache.flink.streaming.api.functions.source.SourceFunction;&lt;br/&gt;
    -import org.apache.flink.util.Collector;&lt;br/&gt;
    -import org.slf4j.Logger;&lt;br/&gt;
    -import org.slf4j.LoggerFactory;&lt;br/&gt;
    -&lt;br/&gt;
    -import com.twitter.hbc.ClientBuilder;&lt;br/&gt;
    -import com.twitter.hbc.core.Constants;&lt;br/&gt;
    -import com.twitter.hbc.core.endpoint.StatusesSampleEndpoint;&lt;br/&gt;
    -import com.twitter.hbc.core.processor.StringDelimitedProcessor;&lt;br/&gt;
    -import com.twitter.hbc.httpclient.BasicClient;&lt;br/&gt;
    -import com.twitter.hbc.httpclient.auth.Authentication;&lt;br/&gt;
    -import com.twitter.hbc.httpclient.auth.OAuth1;&lt;br/&gt;
    -&lt;br/&gt;
    -/**&lt;/li&gt;
	&lt;li&gt;* Implementation of 
{@link SourceFunction}
&lt;p&gt; specialized to emit tweets from&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;* Twitter. It can connect to Twitter Streaming API, collect tweets and&lt;/li&gt;
	&lt;li&gt;*/&lt;br/&gt;
    -public class TwitterSource extends RichParallelSourceFunction&amp;lt;String&amp;gt; {&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private static final Logger LOG = LoggerFactory.getLogger(TwitterSource.class);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private static final long serialVersionUID = 1L;&lt;/li&gt;
	&lt;li&gt;private String authPath;&lt;/li&gt;
	&lt;li&gt;private transient BlockingQueue&amp;lt;String&amp;gt; queue;&lt;/li&gt;
	&lt;li&gt;private int queueSize = 10000;&lt;/li&gt;
	&lt;li&gt;private transient BasicClient client;&lt;/li&gt;
	&lt;li&gt;private int waitSec = 5;&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private int maxNumberOfTweets;&lt;/li&gt;
	&lt;li&gt;private int currentNumberOfTweets;&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private String nextElement = null;&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private volatile boolean isRunning = false;&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Create 
{@link TwitterSource} for streaming&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @param authPath&lt;br/&gt;
    -	 *            Location of the properties file containing the required&lt;br/&gt;
    -	 *            authentication information.&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	public TwitterSource(String authPath) {
    -		this.authPath = authPath;
    -		maxNumberOfTweets = -1;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * Create {@link TwitterSource}
&lt;p&gt; to collect finite number of tweets&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @param authPath&lt;/li&gt;
	&lt;li&gt;*            Location of the properties file containing the required&lt;/li&gt;
	&lt;li&gt;*            authentication information.&lt;/li&gt;
	&lt;li&gt;* @param numberOfTweets&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;public TwitterSource(String authPath, int numberOfTweets) 
{
    -		this.authPath = authPath;
    -		this.maxNumberOfTweets = numberOfTweets;
    -	}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public void open(Configuration parameters) throws Exception 
{
    -		initializeConnection();
    -		currentNumberOfTweets = 0;
    -	}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Initialize Hosebird Client to be able to consume Twitter&apos;s Streaming API&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;private void initializeConnection() {&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (LOG.isInfoEnabled()) 
{
    -			LOG.info(&quot;Initializing Twitter Streaming API connection&quot;);
    -		}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;queue = new LinkedBlockingQueue&amp;lt;String&amp;gt;(queueSize);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;StatusesSampleEndpoint endpoint = new StatusesSampleEndpoint();&lt;/li&gt;
	&lt;li&gt;endpoint.stallWarnings(false);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;Authentication auth = authenticate();&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;initializeClient(endpoint, auth);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (LOG.isInfoEnabled()) 
{
    -			LOG.info(&quot;Twitter Streaming API connection established successfully&quot;);
    -		}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private OAuth1 authenticate() 
{
    -
    -		Properties authenticationProperties = loadAuthenticationProperties();
    -
    -		return new OAuth1(authenticationProperties.getProperty(&quot;consumerKey&quot;),
    -				authenticationProperties.getProperty(&quot;consumerSecret&quot;),
    -				authenticationProperties.getProperty(&quot;token&quot;),
    -				authenticationProperties.getProperty(&quot;secret&quot;));
    -	}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Reads the given properties file for the authentication data.&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @return the authentication data.&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;private Properties loadAuthenticationProperties() {&lt;/li&gt;
	&lt;li&gt;Properties properties = new Properties();&lt;/li&gt;
	&lt;li&gt;try 
{
    -			InputStream input = new FileInputStream(authPath);
    -			properties.load(input);
    -			input.close();
    -		}
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
    -			throw new RuntimeException(&quot;Cannot open .properties file: &quot; + authPath, e);
    -		}&lt;/li&gt;
	&lt;li&gt;return properties;&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;private void initializeClient(StatusesSampleEndpoint endpoint, Authentication auth) 
{
    -
    -		client = new ClientBuilder().name(&quot;twitterSourceClient&quot;).hosts(Constants.STREAM_HOST)
    -				.endpoint(endpoint).authentication(auth)
    -				.processor(new StringDelimitedProcessor(queue)).build();
    -
    -		client.connect();
    -	}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Put tweets into output&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @param collector&lt;/li&gt;
	&lt;li&gt;*            Collector in which the tweets are collected.&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;protected void collectFiniteMessages(Collector&amp;lt;String&amp;gt; collector) {&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (LOG.isInfoEnabled()) 
{
    -			LOG.info(&quot;Collecting tweets&quot;);
    -		}
&lt;p&gt;    -&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;for (int i = 0; i &amp;lt; maxNumberOfTweets; i++) 
{
    -			collectOneMessage(collector);
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -		if (LOG.isInfoEnabled()) {
    -			LOG.info(&quot;Collecting tweets finished&quot;);
    -		}&lt;br/&gt;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * Put tweets into output&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @param collector&lt;br/&gt;
    -	 *            Collector in which the tweets are collected.&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	protected void collectMessages(Collector&amp;lt;String&amp;gt; collector) {&lt;br/&gt;
    -&lt;br/&gt;
    -		if (LOG.isInfoEnabled()) {
    -			LOG.info(&quot;Tweet-stream begins&quot;);
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -		while (isRunning) {    -			collectOneMessage(collector);    -		}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Put one tweet into the output.&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @param collector&lt;/li&gt;
	&lt;li&gt;*            Collector in which the tweets are collected.&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;protected void collectOneMessage(Collector&amp;lt;String&amp;gt; collector) {&lt;/li&gt;
	&lt;li&gt;if (client.isDone()) {&lt;/li&gt;
	&lt;li&gt;if (LOG.isErrorEnabled()) {&lt;/li&gt;
	&lt;li&gt;LOG.error(&quot;Client connection closed unexpectedly: {}&quot;, client.getExitEvent()&lt;/li&gt;
	&lt;li&gt;.getMessage());&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;try {&lt;/li&gt;
	&lt;li&gt;String msg = queue.poll(waitSec, TimeUnit.SECONDS);&lt;/li&gt;
	&lt;li&gt;if (msg != null) 
{
    -				collector.collect(msg);
    -			}
&lt;p&gt; else {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (LOG.isInfoEnabled()) {&lt;/li&gt;
	&lt;li&gt;LOG.info(&quot;Did not receive a message in {} seconds&quot;, waitSec);&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;} catch (InterruptedException e) 
{
    -			throw new RuntimeException(&quot;&apos;Waiting for tweet&apos; thread is interrupted&quot;, e);
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	private void closeConnection() {&lt;br/&gt;
    -&lt;br/&gt;
    -		if (LOG.isInfoEnabled()) {
    -			LOG.info(&quot;Initiating connection close&quot;);
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -		client.stop();&lt;br/&gt;
    -&lt;br/&gt;
    -		if (LOG.isInfoEnabled()) {
    -			LOG.info(&quot;Connection closed successfully&quot;);
    -		}&lt;br/&gt;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * Get the size of the queue in which the tweets are contained temporarily.&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @return the size of the queue in which the tweets are contained&lt;br/&gt;
    -	 *         temporarily&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	public int getQueueSize() {
    -		return queueSize;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * Set the size of the queue in which the tweets are contained temporarily.&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @param queueSize&lt;br/&gt;
    -	 *            The desired value.&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	public void setQueueSize(int queueSize) {
    -		this.queueSize = queueSize;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * This function tells how long TwitterSource waits for the tweets.&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @return Number of second.&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	public int getWaitSec() {
    -		return waitSec;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	/**&lt;br/&gt;
    -	 * This function sets how long TwitterSource should wait for the tweets.&lt;br/&gt;
    -	 * &lt;br/&gt;
    -	 * @param waitSec&lt;br/&gt;
    -	 *            The desired value.&lt;br/&gt;
    -	 */&lt;br/&gt;
    -	public void setWaitSec(int waitSec) {
    -		this.waitSec = waitSec;
    -	}&lt;br/&gt;
    -&lt;br/&gt;
    -	@Override&lt;br/&gt;
    -	public boolean reachedEnd() throws Exception {&lt;br/&gt;
    -		if (currentNumberOfTweets &amp;gt;= maxNumberOfTweets) {
    -			return false;
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -		if (nextElement != null) {
    -			return true;
    -		}&lt;br/&gt;
    -		if (client.isDone()) {&lt;br/&gt;
    -			if (LOG.isErrorEnabled()) {&lt;br/&gt;
    -				LOG.error(&quot;Client connection closed unexpectedly: {}&quot;, client.getExitEvent()&lt;br/&gt;
    -						.getMessage());&lt;br/&gt;
    -			}&lt;br/&gt;
    -			return false;&lt;br/&gt;
    -		}&lt;br/&gt;
    -&lt;br/&gt;
    -		try {&lt;br/&gt;
    -			String msg = queue.poll(waitSec, TimeUnit.SECONDS);&lt;br/&gt;
    -			if (msg != null) {
    -				nextElement = msg;
    -				return true;
    -			} else {&lt;br/&gt;
    -				if (LOG.isInfoEnabled()) {&lt;br/&gt;
    -					LOG.info(&quot;Did not receive a message in {} seconds&quot;, waitSec);&lt;br/&gt;
    -				}&lt;br/&gt;
    -			}&lt;br/&gt;
    -		} catch (InterruptedException e) {    -			throw new RuntimeException(&quot;&apos;Waiting for tweet&apos; thread is interrupted&quot;, e);    -		}&lt;/li&gt;
	&lt;li&gt;return false;&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public String next() throws Exception {&lt;/li&gt;
	&lt;li&gt;if (nextElement != null) 
{
    -			String result = nextElement;
    -			nextElement = null;
    -			return result;
    -		}&lt;br/&gt;
    -		if (reachedEnd()) {
    -			throw new RuntimeException(&quot;Twitter stream end reached.&quot;);
    -		} else {    -			String result = nextElement;    -			nextElement = null;    -			return result;    -		}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -}&lt;br/&gt;
    +///*&lt;br/&gt;
    +// * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
    +// * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
    +// * this work for additional information regarding copyright ownership.&lt;br/&gt;
    +// * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
    +// * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
    +// * the License.  You may obtain a copy of the License at&lt;br/&gt;
    +// *&lt;br/&gt;
    +// *    &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +// *&lt;br/&gt;
    +// * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +// * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +// * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +// * See the License for the specific language governing permissions and&lt;br/&gt;
    +// * limitations under the License.
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This is because I&apos;m waiting since the recent TwitterSource PR is in.&lt;/p&gt;</comment>
                            <comment id="14568279" author="githubbot" created="Tue, 2 Jun 2015 00:19:20 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-107751723&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-107751723&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good all in all. I am preparing a followup pull request that cleans up a few things, adds comments, and addresses Marton&apos;s comments.&lt;/p&gt;

&lt;p&gt;    One thing I noticed is that all the non-checkpointed sources have a checkpoint lock in the signature as well.&lt;/p&gt;

&lt;p&gt;    Should we offer two source interfaces: `SourceFunction` and `CheckpointedSourceFunction` ?&lt;/p&gt;</comment>
                            <comment id="14568362" author="githubbot" created="Tue, 2 Jun 2015 01:38:26 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-107768981&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-107768981&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Some important comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Exceptions should always propagate, and exceptions during cancelling can be thrown. The `Task` class filters out exceptions that come after the transition to the &quot;canceling&quot; state. Don&apos;t try to be super smart there, propagate your exceptions, and the context will decide whether they should be logged.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The RabbitMQ source is not doing any proper failure handling (critical!). I opened a separate JIRA issue for that.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Just commenting out the twitter sources is bad style, in my opinion. There is actually no chance of getting this pull request in, and this one here is a release blocker, while the Twitter Source one is not a release blocker.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;All functions set their `running` flag to true at the beginning of the `run()` method. In the case of races between invoking and canceling the source, it can mean that the flag is set to false in the cancel() method and then to true in the run() method, resulting in a non-canceled source. I fixed some cases in my follow up pull-request, but many are still in. Please make another careful pass with respect to that.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In general, the streaming sources are extremely badly commented. This needs big improvements!&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14568363" author="githubbot" created="Tue, 2 Jun 2015 01:38:41 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-107769045&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-107769045&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Here is my updated code: &lt;a href=&quot;https://github.com/StephanEwen/incubator-flink/tree/stream_sources&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StephanEwen/incubator-flink/tree/stream_sources&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14568366" author="githubbot" created="Tue, 2 Jun 2015 01:40:34 +0000"  >&lt;p&gt;GitHub user StephanEwen opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/755&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/755&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2098&quot; title=&quot;Checkpoint barrier initiation at source is not aligned with snapshotting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2098&quot;&gt;&lt;del&gt;FLINK-2098&lt;/del&gt;&lt;/a&gt; Improvements on checkpoint-aligned sources&lt;/p&gt;

&lt;p&gt;    Based on #742 , include multiple cleanups and fixes on top.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/StephanEwen/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StephanEwen/incubator-flink&lt;/a&gt; stream_sources&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/755.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/755.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #755&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 152f4af6966e8a2e770f20a1f516d1de29c5b13e&lt;br/&gt;
Author: twalthr &amp;lt;twalthr@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-05-27T13:32:11Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; Remove execute() after print() in Table API examples&lt;/p&gt;

&lt;p&gt;    This closes #735&lt;/p&gt;

&lt;p&gt;commit d82942a396777ea6debbf55a91916d4d5c3ecdaa&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-05-28T08:24:37Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2098&quot; title=&quot;Checkpoint barrier initiation at source is not aligned with snapshotting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2098&quot;&gt;&lt;del&gt;FLINK-2098&lt;/del&gt;&lt;/a&gt; Ensure checkpoints and element emission are in order&lt;/p&gt;

&lt;p&gt;    Before, it could happen that a streaming source would keep emitting&lt;br/&gt;
    elements while a checkpoint is being performed. This can lead to&lt;br/&gt;
    inconsistencies in the checkpoints with other operators.&lt;/p&gt;

&lt;p&gt;    This also adds a test that checks whether only one checkpoint is&lt;br/&gt;
    executed at a time and the serial behaviour of checkpointing and&lt;br/&gt;
    emission.&lt;/p&gt;

&lt;p&gt;    This changes the SourceFunction interface to have run()/cancel() methods&lt;br/&gt;
    where the run() method takes a lock object on which it needs to&lt;br/&gt;
    synchronize updates to state and emission of elements.&lt;/p&gt;

&lt;p&gt;commit dad6a0092489fe7a9ef4508dc006d5a6cc42a2ba&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-06-02T01:31:43Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2098&quot; title=&quot;Checkpoint barrier initiation at source is not aligned with snapshotting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2098&quot;&gt;&lt;del&gt;FLINK-2098&lt;/del&gt;&lt;/a&gt; Improvements on checkpoint-aligned sources&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14568542" author="githubbot" created="Tue, 2 Jun 2015 05:20:40 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-107811407&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-107811407&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I will fix the remaining cancel() races. The twitter stuff I just commented out because I assumed that the new TwitterSource could be merged right away and I was waiting for that.&lt;/p&gt;

&lt;p&gt;    As for two Source interfaces. We can certainly do that. The reason I didn&apos;t do it is because there would be a lot of duplication because we have SourceFunction, ParallelSourceFunction, RichSourceFunction and ParallelRichSourceFunction. With the new Source interface this would go up to 8 interfaces for the sources. (That&apos;s also the reason why I didn&apos;t have Kafka derived from the RichParallelSourceFunction, I thought that maybe we could get rid of the special interfaces for parallel sources.)&lt;/p&gt;

&lt;p&gt;    Also, I realize there are many more problems. I just can&apos;t address them all in a single PR. :sweat_smile: &lt;/p&gt;</comment>
                            <comment id="14568766" author="githubbot" created="Tue, 2 Jun 2015 08:28:29 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-107860292&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-107860292&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I addressed the problem with the race conditions and re-enabled the twitter source.&lt;/p&gt;

&lt;p&gt;    Which exceptions are you referring to? I don&apos;t think I touched any of the exception handling or the general way that the steam tasks work.&lt;/p&gt;</comment>
                            <comment id="14570392" author="githubbot" created="Wed, 3 Jun 2015 07:00:20 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/755#issuecomment-108218506&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/755#issuecomment-108218506&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @StephanEwen I took the changes, added them on top of my PR and added some more refinements.&lt;/p&gt;</comment>
                            <comment id="14571638" author="githubbot" created="Wed, 3 Jun 2015 21:04:01 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-108615858&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-108615858&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I thought about what @StephanEwen  said about uncheckpointed sources also having the locking object in the signature of the run() method and also about extensibility.&lt;/p&gt;

&lt;p&gt;    We might have to tweak the source interface a little bit more. What I propose is to have this run method:&lt;br/&gt;
    ```&lt;br/&gt;
    void run(SourceContext context);&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    Then the source context would have methods to retrieve the locking object (for checkpointed sources) and for emitting elements. Part of my motivation for this is that this can be extended in the future without breaking existing sources. If we introduce proper timestamps at some point we can extend the SourceContext with a method for emitting elements with a timestamp. Then, if we want to have watermarks the context can have methods for activating automatically generated watermarks and for emitting watermarks. And so on...&lt;/p&gt;

&lt;p&gt;    I think we should fix this now, before the release. What do you think?&lt;/p&gt;</comment>
                            <comment id="14571661" author="githubbot" created="Wed, 3 Jun 2015 21:15:48 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-108618014&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-108618014&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I generally like that idea. Especially the extensibility with respect to timestamps and watermark generation is a good point.&lt;/p&gt;

&lt;p&gt;    Retrieving the lock object from the context is not very obvious, but then again, someone who implements a fault tolerant exactly-once source should ready the javadocs and have a look at an example.&lt;/p&gt;

</comment>
                            <comment id="14571665" author="githubbot" created="Wed, 3 Jun 2015 21:16:42 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-108618236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-108618236&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    How about we still merge this now, to make sure we have a good version in to start testing? The change you propose is API only, and would not affect internals/timings...&lt;/p&gt;</comment>
                            <comment id="14571672" author="githubbot" created="Wed, 3 Jun 2015 21:22:07 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-108619295&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-108619295&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes, the change can basically be done by a regex so I also propose merging this as early as possible now.&lt;/p&gt;

&lt;p&gt;    By the way, we could ensure that the source is actually holding the monitor lock with `Thread.holdsLock(obj)`. Not sure about the performance impact, though.&lt;/p&gt;</comment>
                            <comment id="14571725" author="githubbot" created="Wed, 3 Jun 2015 22:01:27 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-108627853&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-108627853&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I was thinking the same thing, about `Thread.holdsLock(obj)`. That call probably costs way more than the lock itself, though. Would be nice to have a debug mode, to activate it there.&lt;/p&gt;</comment>
                            <comment id="14572221" author="githubbot" created="Thu, 4 Jun 2015 06:04:31 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-108740723&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-108740723&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I will run some benchmarks, then we can decide about that.&lt;/p&gt;</comment>
                            <comment id="14572312" author="githubbot" created="Thu, 4 Jun 2015 07:30:45 +0000"  >&lt;p&gt;Github user mbalassi commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742#issuecomment-108765546&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742#issuecomment-108765546&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Big +1 for the `run(SourceContext)` interface and experimenting with `Thread.holdslock(obj).`&lt;/p&gt;</comment>
                            <comment id="14573110" author="githubbot" created="Thu, 4 Jun 2015 16:48:12 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/742&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/742&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14573123" author="aljoscha" created="Thu, 4 Jun 2015 16:53:42 +0000"  >&lt;p&gt;Fixed in: &lt;a href=&quot;https://github.com/apache/flink/commit/6685b0bac54b95705426fd78bb819171271004e6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/6685b0bac54b95705426fd78bb819171271004e6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14575233" author="githubbot" created="Fri, 5 Jun 2015 21:11:23 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/755#issuecomment-109442172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/755#issuecomment-109442172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merged as part of #742&lt;/p&gt;</comment>
                            <comment id="14575234" author="githubbot" created="Fri, 5 Jun 2015 21:11:24 +0000"  >&lt;p&gt;Github user StephanEwen closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/755&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/755&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 24 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f92f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>