<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:23:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4079] YARN properties file used for per-job cluster</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4079</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;YARN per job clusters (flink run -m yarn-cluster) rely on the hidden YARN properties file, which defines the container configuration. This can lead to unexpected behaviour, because the per-job-cluster configuration is merged  with the YARN properties file (or used as only configuration source).&lt;/p&gt;

&lt;p&gt;A user ran into this as follows:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Create a long-lived YARN session with HA (creates a hidden YARN properties file)&lt;/li&gt;
	&lt;li&gt;Submits standalone batch jobs with a per job cluster (flink run -m yarn-cluster). The batch jobs get submitted to the long lived HA cluster, because of the properties file.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mxm&quot; class=&quot;user-hover&quot; rel=&quot;mxm&quot;&gt;mxm&lt;/a&gt; Am I correct in assuming that this is only relevant for the 1.0 branch and will be fixed with the client refactoring you are working on?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12979402">FLINK-4079</key>
            <summary>YARN properties file used for per-job cluster</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="uce">Ufuk Celebi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jun 2016 15:54:17 +0000</created>
                <updated>Tue, 21 Jun 2016 12:23:43 +0000</updated>
                            <resolved>Tue, 21 Jun 2016 12:23:43 +0000</resolved>
                                    <version>1.0.3</version>
                                    <fixVersion>1.0.4</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>Command Line Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15331980" author="mxm" created="Wed, 15 Jun 2016 16:09:36 +0000"  >&lt;p&gt;This is a feature &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; The Yarn properties file is supposed to be picked up. We can&apos;t break this behavior because users rely on it.&lt;/p&gt;

&lt;p&gt;My changes will give an appropriate error message if the properties file configuration doesn&apos;t correspond to a running application in the Yarn cluster. &lt;/p&gt;</comment>
                            <comment id="15332002" author="uce" created="Wed, 15 Jun 2016 16:18:21 +0000"  >&lt;p&gt;I understand where you are coming from, but it seems very weird to me that the behaviour I describe can happen (where the first started long running Flink session is actually still running, so the warning you mention would not be shown).&lt;/p&gt;

&lt;p&gt;I always had the mental model of &quot;flink/bin bun -m yarn-cluster&quot; starts a cluster for this job only, which is not the case if we re-use the properties file. I think that the properties file is mainly a concern for the long-lived YARN session, where cluster start and job submission are not tied together.&lt;/p&gt;</comment>
                            <comment id="15332032" author="mxm" created="Wed, 15 Jun 2016 16:30:42 +0000"  >&lt;p&gt;Exactly, the yarn properties file is a means to easily submit jobs against a long-running Flink cluster (so called yarn session). Actually, it is the only proper way at the moment besides figuring out the JobManager location manually and essentially treating the Yarn cluster as a Standalone cluster.&lt;/p&gt;

&lt;p&gt;I would also prefer to get rid of the properties file and only use the yarn application id instead. We could probably do that for one of the next releases but it would be a breaking change for the 1.1 release.&lt;/p&gt;</comment>
                            <comment id="15332100" author="mxm" created="Wed, 15 Jun 2016 17:01:28 +0000"  >&lt;p&gt;I see what you mean now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;The issue is that the Yarn properties file is loaded regardless of whether &quot;-m yarn-cluster&quot; is specified on the command-line. This loads the dynamic properties from the Yarn properties file and applies all configuration of the running (session) cluster cluster to the to-be-created cluster. This is not expected behavior.&lt;/p&gt;</comment>
                            <comment id="15335730" author="mxm" created="Fri, 17 Jun 2016 08:54:24 +0000"  >&lt;p&gt;Fixed for 1.1 with ec6d97528e8b21f191b7922e4810fd60804c8365&lt;/p&gt;

&lt;p&gt;Do we want to do a backport for 1.0.4?&lt;/p&gt;</comment>
                            <comment id="15341327" author="arnaudl" created="Tue, 21 Jun 2016 08:01:15 +0000"  >&lt;p&gt;Personally, I&apos;d like to since it is a blocking problem on one of my environment.&lt;/p&gt;</comment>
                            <comment id="15341397" author="mxm" created="Tue, 21 Jun 2016 08:57:09 +0000"  >&lt;p&gt;Makes sense to fix it then. Let me see.&lt;/p&gt;</comment>
                            <comment id="15341409" author="githubbot" created="Tue, 21 Jun 2016 09:08:54 +0000"  >&lt;p&gt;GitHub user mxm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2140&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4079&quot; title=&quot;YARN properties file used for per-job cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4079&quot;&gt;&lt;del&gt;FLINK-4079&lt;/del&gt;&lt;/a&gt; do not load Yarn properties file for per-job Yarn clusters&lt;/p&gt;

&lt;p&gt;    This is a backported fix for the release-1.0 branch to skip loading of the Yarn properties file for per-job Yarn clusters.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mxm/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mxm/flink&lt;/a&gt; release-1.0&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2140.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2140.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2140&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 81823b99379e223ef5d6020dedc540518c156049&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-06-21T09:03:25Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4079&quot; title=&quot;YARN properties file used for per-job cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4079&quot;&gt;&lt;del&gt;FLINK-4079&lt;/del&gt;&lt;/a&gt; do not load Yarn properties file for per-job Yarn clusters&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15341458" author="mxm" created="Tue, 21 Jun 2016 09:46:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ArnaudL&quot; class=&quot;user-hover&quot; rel=&quot;ArnaudL&quot;&gt;ArnaudL&lt;/a&gt; I&apos;ve prepared a fix for the next release.&lt;/p&gt;</comment>
                            <comment id="15341664" author="githubbot" created="Tue, 21 Jun 2016 12:18:35 +0000"  >&lt;p&gt;Github user mxm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2140&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Travis has passed. Merging.&lt;/p&gt;</comment>
                            <comment id="15341665" author="githubbot" created="Tue, 21 Jun 2016 12:20:39 +0000"  >&lt;p&gt;Github user mxm closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2140&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15341666" author="githubbot" created="Tue, 21 Jun 2016 12:20:39 +0000"  >&lt;p&gt;Github user mxm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2140&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merged with 3163638a61f49dd2df55467615096918bec3a890.&lt;/p&gt;</comment>
                            <comment id="15341670" author="mxm" created="Tue, 21 Jun 2016 12:23:43 +0000"  >&lt;p&gt;master: ec6d97528e8b21f191b7922e4810fd60804c8365&lt;br/&gt;
release-1.0: 3163638a61f49dd2df55467615096918bec3a890&lt;/p&gt;

&lt;p&gt;Fix will be included in the 1.0.4 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12917976">FLINK-3105</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12971172">FLINK-3937</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zi4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>