<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:21:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3067] Kafka source fails during checkpoint notifications with NPE</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3067</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;While running a job with many kafka sources I experienced the following error during the checkpoint notifications:&lt;/p&gt;

&lt;p&gt;java.lang.RuntimeException: Error while confirming checkpoint&lt;br/&gt;
	at org.apache.flink.runtime.taskmanager.Task$2.run(Task.java:935)&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.I0Itec.zkclient.ZkConnection.writeDataReturnStat(ZkConnection.java:115)&lt;br/&gt;
	at org.I0Itec.zkclient.ZkClient$10.call(ZkClient.java:817)&lt;br/&gt;
	at org.I0Itec.zkclient.ZkClient.retryUntilConnected(ZkClient.java:675)&lt;br/&gt;
	at org.I0Itec.zkclient.ZkClient.writeDataReturnStat(ZkClient.java:813)&lt;br/&gt;
	at org.I0Itec.zkclient.ZkClient.writeData(ZkClient.java:808)&lt;br/&gt;
	at org.I0Itec.zkclient.ZkClient.writeData(ZkClient.java:777)&lt;br/&gt;
	at kafka.utils.ZkUtils$.updatePersistentPath(ZkUtils.scala:332)&lt;br/&gt;
	at kafka.utils.ZkUtils.updatePersistentPath(ZkUtils.scala)&lt;br/&gt;
	at org.apache.flink.streaming.connectors.kafka.internals.ZookeeperOffsetHandler.setOffsetInZooKeeper(ZookeeperOffsetHandler.java:112)&lt;br/&gt;
	at org.apache.flink.streaming.connectors.kafka.internals.ZookeeperOffsetHandler.commit(ZookeeperOffsetHandler.java:80)&lt;br/&gt;
	at org.apache.flink.streaming.connectors.kafka.FlinkKafkaConsumer.notifyCheckpointComplete(FlinkKafkaConsumer.java:563)&lt;br/&gt;
	at org.apache.flink.streaming.api.operators.AbstractUdfStreamOperator.notifyOfCompletedCheckpoint(AbstractUdfStreamOperator.java:176)&lt;br/&gt;
	at org.apache.flink.streaming.runtime.tasks.StreamTask.notifyCheckpointComplete(StreamTask.java:478)&lt;br/&gt;
	at org.apache.flink.runtime.taskmanager.Task$2.run(Task.java:931)&lt;br/&gt;
	... 5 more&lt;br/&gt;
06:23:28,373 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Source: Kafka&lt;span class=&quot;error&quot;&gt;&amp;#91;event.rakdos.log&amp;#93;&lt;/span&gt; (1/1) (d79e6b7a25b1ac307d2e0c8&lt;/p&gt;

&lt;p&gt;This resulted in the job crashing and getting stuck during cancelling which subsequently lead to having to restart the cluster.&lt;/p&gt;

&lt;p&gt;This might be a zookeeper issue but we should be able to handle it (catch the exception maybe).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12915726">FLINK-3067</key>
            <summary>Kafka source fails during checkpoint notifications with NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rmetzger">Robert Metzger</assignee>
                                    <reporter username="gyfora">Gyula Fora</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2015 08:57:42 +0000</created>
                <updated>Mon, 18 Jan 2016 12:12:15 +0000</updated>
                            <resolved>Mon, 18 Jan 2016 12:12:15 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.2</fixVersion>
                    <fixVersion>1.0.0</fixVersion>
                                    <component>Connectors / Kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15024036" author="uce" created="Tue, 24 Nov 2015 09:00:11 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3025&quot; title=&quot;Flink Kafka consumer may get stuck due to Kafka/Zookeeper client bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3025&quot;&gt;&lt;del&gt;FLINK-3025&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15024045" author="gyfora" created="Tue, 24 Nov 2015 09:05:06 +0000"  >&lt;p&gt;But it&apos;s still an issue :/&lt;/p&gt;</comment>
                            <comment id="15024047" author="gyfora" created="Tue, 24 Nov 2015 09:05:20 +0000"  >&lt;p&gt;Should I reopen the other one?&lt;/p&gt;</comment>
                            <comment id="15024050" author="uce" created="Tue, 24 Nov 2015 09:07:12 +0000"  >&lt;p&gt;If you are using a version, which has the fix included, I would close this issue and re-open the other one.&lt;/p&gt;

&lt;p&gt;Which version/commit are you running? You can check this in the head of your logs.&lt;/p&gt;</comment>
                            <comment id="15024052" author="gyfora" created="Tue, 24 Nov 2015 09:08:32 +0000"  >&lt;p&gt;We suspect that the problem is that flink cannot handle kafka broker failures. We will try to reproduce it by killing a broker in our kafka cluster later, and then I can give some more feedback.&lt;/p&gt;</comment>
                            <comment id="15024053" author="gyfora" created="Tue, 24 Nov 2015 09:10:16 +0000"  >&lt;p&gt;It says: Version: 1.0-SNAPSHOT, Rev:92644f7, Date:22.11.2015 @ 20:13:54 CET&lt;br/&gt;
But this is a custom built version that I built yesterday&lt;/p&gt;</comment>
                            <comment id="15024061" author="gyfora" created="Tue, 24 Nov 2015 09:13:48 +0000"  >&lt;p&gt;I wouldnt say that these two issues are the same. Getting stuck is one thing and failing on this error like this is a different issue.&lt;/p&gt;</comment>
                            <comment id="15024086" author="rmetzger" created="Tue, 24 Nov 2015 09:28:42 +0000"  >&lt;p&gt;I&apos;ll check if the fix from Stephan is really setting the right zkclient version.&lt;/p&gt;</comment>
                            <comment id="15024098" author="uce" created="Tue, 24 Nov 2015 09:36:38 +0000"  >&lt;p&gt;Correct my if I&apos;m wrong, but it still looks like the same issue to me. On the mailing list you posted the exact same stack trace. And the logs showed the same behaviour (stuck in cancelling). What&apos;s different now? Sorry for the confusion.&lt;/p&gt;</comment>
                            <comment id="15024131" author="rmetzger" created="Tue, 24 Nov 2015 09:54:40 +0000"  >&lt;p&gt;If I&apos;m not mistaken, it seems that we are still using the wrong zookeeper client:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO] +- org.apache.flink:flink-connector-kafka:jar:1.0-SNAPSHOT:compile
[INFO] |  \- org.apache.kafka:kafka_2.10:jar:0.8.2.0:compile
[INFO] |     +- org.apache.kafka:kafka-clients:jar:0.8.2.0:compile
[INFO] |     |  \- net.jpountz.lz4:lz4:jar:1.2.0:compile
[INFO] |     +- com.yammer.metrics:metrics-core:jar:2.2.0:compile
[INFO] |     +- org.apache.zookeeper:zookeeper:jar:3.4.6:compile
[INFO] |     |  +- jline:jline:jar:0.9.94:compile
[INFO] |     |  |  \- junit:junit:jar:3.8.1:compile
[INFO] |     |  \- io.netty:netty:jar:3.7.0.Final:compile
[INFO] |     \- com.101tec:zkclient:jar:0.3:compile
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let me further investigate this...&lt;/p&gt;</comment>
                            <comment id="15024180" author="rmetzger" created="Tue, 24 Nov 2015 10:11:00 +0000"  >&lt;p&gt;With the dependency management, it seems that this affects only the dependency when building Flink, but not when somebody depends on our flink-connector-kafka.&lt;br/&gt;
See also: &lt;a href=&quot;http://stackoverflow.com/questions/28312975/maven-dependencymanagement-version-ignored-in-transitive-dependencies&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/28312975/maven-dependencymanagement-version-ignored-in-transitive-dependencies&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve now added the zkclient as a direct dependency to our connector. This overwrites the dependency (I&apos;ve checked it with an external project).&lt;br/&gt;
I&apos;ll open a PR.&lt;/p&gt;</comment>
                            <comment id="15024181" author="githubbot" created="Tue, 24 Nov 2015 10:11:12 +0000"  >&lt;p&gt;GitHub user rmetzger opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1399&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1399&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3067&quot; title=&quot;Kafka source fails during checkpoint notifications with NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3067&quot;&gt;&lt;del&gt;FLINK-3067&lt;/del&gt;&lt;/a&gt; Enforce zkclient 0.7 for Kafka&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rmetzger/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rmetzger/flink&lt;/a&gt; flink3067&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1399.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1399.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1399&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit af4a553b640e1c3d8f39cfd8b5dc772f718cd794&lt;br/&gt;
Author: Robert Metzger &amp;lt;rmetzger@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-11-24T10:09:28Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3067&quot; title=&quot;Kafka source fails during checkpoint notifications with NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3067&quot;&gt;&lt;del&gt;FLINK-3067&lt;/del&gt;&lt;/a&gt; Enforce zkclient 0.7 for Kafka&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15024185" author="rmetzger" created="Tue, 24 Nov 2015 10:11:54 +0000"  >&lt;p&gt;If this approach doesn&apos;t fix it, we can also think about using a different zookeeper client (curator) with Kafka.&lt;/p&gt;

&lt;p&gt;There is no real need for using this zkclient.&lt;/p&gt;</comment>
                            <comment id="15024199" author="githubbot" created="Tue, 24 Nov 2015 10:19:19 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1399#issuecomment-159219322&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1399#issuecomment-159219322&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Curious, why did the dependency management entry not work?&lt;/p&gt;

&lt;p&gt;    Right now, we have two versions in the dependencies, one by us, one transitive by Kafka. Is it well defined which one is chosen? To my understanding, that is where dependency management entries define which version is chosen. If the dependency management alone did not work, I would assume it should still stay for that reason.&lt;/p&gt;</comment>
                            <comment id="15024221" author="githubbot" created="Tue, 24 Nov 2015 10:33:38 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1399#issuecomment-159224200&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1399#issuecomment-159224200&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It seems that the `dependencyManagement` section is mainly intended to control our versions.&lt;br/&gt;
    So with a dependencyManagement section, you can make sure that we are using the same zkclient across all our submodules (for all our declared zkclient dependencies).&lt;br/&gt;
    Since we didn&apos;t declare a zkclient dependency for the flink-connector-kafka, the `dependencyManagement` doesn&apos;t have any effect for other projects.&lt;/p&gt;

&lt;p&gt;    See also: &lt;a href=&quot;http://stackoverflow.com/questions/28312975/maven-dependencymanagement-version-ignored-in-transitive-dependencies&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/28312975/maven-dependencymanagement-version-ignored-in-transitive-dependencies&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15024261" author="githubbot" created="Tue, 24 Nov 2015 10:57:25 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1399#issuecomment-159229332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1399#issuecomment-159229332&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I added the dependencyManagement section again, just to make sure&lt;/p&gt;</comment>
                            <comment id="15024362" author="githubbot" created="Tue, 24 Nov 2015 12:15:30 +0000"  >&lt;p&gt;Github user gyfora commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1399#issuecomment-159250129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1399#issuecomment-159250129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This seems to solve the dependency issue for our project +1&lt;/p&gt;</comment>
                            <comment id="15026574" author="githubbot" created="Wed, 25 Nov 2015 10:34:11 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1399#issuecomment-159565479&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1399#issuecomment-159565479&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge&lt;/p&gt;</comment>
                            <comment id="15026946" author="githubbot" created="Wed, 25 Nov 2015 15:43:12 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1399#issuecomment-159644979&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1399#issuecomment-159644979&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merging to release-0.10 and master.&lt;/p&gt;</comment>
                            <comment id="15026949" author="githubbot" created="Wed, 25 Nov 2015 15:45:06 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1399&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1399&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15026953" author="rmetzger" created="Wed, 25 Nov 2015 15:47:00 +0000"  >&lt;p&gt;Merged fix for 0.10.2 (or maybe .1) in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/0b6adc4c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/0b6adc4c&lt;/a&gt;&lt;br/&gt;
merged for master 1.0.0 in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/2c507f93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/2c507f93&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15054431" author="rmetzger" created="Sat, 12 Dec 2015 17:18:23 +0000"  >&lt;p&gt;The issue is still not resolved.&lt;/p&gt;

&lt;p&gt;Next approach: We update ZK using Apache Curator.&lt;/p&gt;</comment>
                            <comment id="15054538" author="githubbot" created="Sat, 12 Dec 2015 18:57:32 +0000"  >&lt;p&gt;GitHub user rmetzger opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3067&quot; title=&quot;Kafka source fails during checkpoint notifications with NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3067&quot;&gt;&lt;del&gt;FLINK-3067&lt;/del&gt;&lt;/a&gt; Use curator for committing offsets to ZK from Kafka&lt;/p&gt;

&lt;p&gt;    @aljoscha reported issues with our latest FlinkKafkaConnector: It was still throwing NPE.&lt;br/&gt;
    Therefore, I decided to abandon the &lt;span class=&quot;error&quot;&gt;&amp;#91;zkclient&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/sgroschupf/zkclient&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/sgroschupf/zkclient&lt;/a&gt;) and use Apache Curator instead.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rmetzger/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rmetzger/flink&lt;/a&gt; flink3067-curator&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1451&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 648ce763fa5537b118e02b47b5c0c1547340a6c7&lt;br/&gt;
Author: Robert Metzger &amp;lt;rmetzger@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-12-12T18:44:17Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3067&quot; title=&quot;Kafka source fails during checkpoint notifications with NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3067&quot;&gt;&lt;del&gt;FLINK-3067&lt;/del&gt;&lt;/a&gt; Use curator for committing offsets to ZK from Kafka&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15055750" author="githubbot" created="Mon, 14 Dec 2015 10:14:56 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#discussion_r47480028&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#discussion_r47480028&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/FlinkKafkaConsumer.java &amp;#8212;&lt;br/&gt;
    @@ -632,6 +632,7 @@ public void run() {&lt;br/&gt;
     						//  ------------  commit current offsets ----------------&lt;/p&gt;

&lt;p&gt;     						// create copy of current offsets&lt;br/&gt;
    +						//noinspection unchecked&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Is this this is only suppressing IntellIJ warnings or is this meant to be a replacement for the `@SuppressWarnings` annotation?&lt;/p&gt;</comment>
                            <comment id="15055754" author="githubbot" created="Mon, 14 Dec 2015 10:16:58 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#discussion_r47480218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#discussion_r47480218&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/internals/ZookeeperOffsetHandler.java &amp;#8212;&lt;br/&gt;
    @@ -61,30 +61,29 @@ public ZookeeperOffsetHandler(Properties props) {&lt;br/&gt;
     		if (zkConnect == null) &lt;/p&gt;
{
     			throw new IllegalArgumentException(&quot;Required property &apos;zookeeper.connect&apos; has not been set&quot;);
     		}
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;zkClient = new ZkClient(zkConnect,&lt;/li&gt;
	&lt;li&gt;Integer.valueOf(props.getProperty(&quot;zookeeper.session.timeout.ms&quot;, &quot;6000&quot;)),&lt;/li&gt;
	&lt;li&gt;Integer.valueOf(props.getProperty(&quot;zookeeper.connection.timeout.ms&quot;, &quot;6000&quot;)),&lt;/li&gt;
	&lt;li&gt;new ZooKeeperStringSerializer());&lt;br/&gt;
    +&lt;br/&gt;
    +		RetryPolicy retryPolicy = new ExponentialBackoffRetry(100, 10);&lt;br/&gt;
    +		curatorClient = CuratorFrameworkFactory.newClient(zkConnect, retryPolicy);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Have you checked that the default timeouts of Curator (for session and connection) match the previously configured timeouts?&lt;/p&gt;</comment>
                            <comment id="15055758" author="githubbot" created="Mon, 14 Dec 2015 10:19:30 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#discussion_r47480476&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#discussion_r47480476&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/internals/ZookeeperOffsetHandler.java &amp;#8212;&lt;br/&gt;
    @@ -98,30 +97,42 @@ public void seekFetcherToInitialOffsets(List&amp;lt;KafkaTopicPartitionLeader&amp;gt; partitio&lt;/p&gt;

&lt;p&gt;     	@Override&lt;br/&gt;
     	public void close() throws IOException &lt;/p&gt;
{
    -		zkClient.close();
    +		curatorClient.close();
     	}

&lt;p&gt;     	// ------------------------------------------------------------------------&lt;br/&gt;
     	//  Communication with Zookeeper&lt;br/&gt;
     	// ------------------------------------------------------------------------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static void setOffsetInZooKeeper(ZkClient zkClient, String groupId, String topic, int partition, long offset) {&lt;/li&gt;
	&lt;li&gt;TopicAndPartition tap = new TopicAndPartition(topic, partition);&lt;/li&gt;
	&lt;li&gt;ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, tap.topic());&lt;/li&gt;
	&lt;li&gt;ZkUtils.updatePersistentPath(zkClient, topicDirs.consumerOffsetDir() + &quot;/&quot; + tap.partition(), Long.toString(offset));&lt;br/&gt;
    +	public static void setOffsetInZooKeeper(CuratorFramework curatorClient, String groupId, String topic, int partition, long offset) throws Exception 
{
    +		ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, topic);
    +		String path = topicDirs.consumerOffsetDir() + &quot;/&quot; + partition;
    +		ensureExists(curatorClient, path);
    +		byte[] data = Long.toString(offset).getBytes();
    +		curatorClient.setData().forPath(path, data);
     	}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static long getOffsetFromZooKeeper(ZkClient zkClient, String groupId, String topic, int partition) {&lt;/li&gt;
	&lt;li&gt;TopicAndPartition tap = new TopicAndPartition(topic, partition);&lt;/li&gt;
	&lt;li&gt;ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, tap.topic());&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;scala.Tuple2&amp;lt;Option&amp;lt;String&amp;gt;, Stat&amp;gt; data = ZkUtils.readDataMaybeNull(zkClient,&lt;/li&gt;
	&lt;li&gt;topicDirs.consumerOffsetDir() + &quot;/&quot; + tap.partition());&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (data._1().isEmpty()) {&lt;br/&gt;
    +	public static long getOffsetFromZooKeeper(CuratorFramework curatorClient, String groupId, String topic, int partition) throws Exception {&lt;br/&gt;
    +		ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, topic);&lt;br/&gt;
    +		String path = topicDirs.consumerOffsetDir() + &quot;/&quot; + partition;&lt;br/&gt;
    +		ensureExists(curatorClient, path);&lt;br/&gt;
    +		byte[] data = curatorClient.getData().forPath(path);&lt;br/&gt;
    +		if(data == null) 
{
     			return OFFSET_NOT_SET;
     		}
&lt;p&gt; else {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;return Long.valueOf(data._1().get());&lt;br/&gt;
    +			String asString = new String(data);&lt;br/&gt;
    +			if(asString.length() == 0) 
{
    +				return OFFSET_NOT_SET;
    +			}
&lt;p&gt; else &lt;/p&gt;
{
    +				return Long.valueOf(asString);
    +			}
&lt;p&gt;    +		}&lt;br/&gt;
    +	}&lt;br/&gt;
    +&lt;br/&gt;
    +	private static void ensureExists(CuratorFramework curatorClient, String path) throws Exception {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    There is a ensure method in `CuratorFramework`, which does something similar in a retry loop.&lt;/p&gt;</comment>
                            <comment id="15055764" author="githubbot" created="Mon, 14 Dec 2015 10:22:24 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#discussion_r47480714&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#discussion_r47480714&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/internals/ZookeeperOffsetHandler.java &amp;#8212;&lt;br/&gt;
    @@ -98,30 +97,42 @@ public void seekFetcherToInitialOffsets(List&amp;lt;KafkaTopicPartitionLeader&amp;gt; partitio&lt;/p&gt;

&lt;p&gt;     	@Override&lt;br/&gt;
     	public void close() throws IOException &lt;/p&gt;
{
    -		zkClient.close();
    +		curatorClient.close();
     	}

&lt;p&gt;     	// ------------------------------------------------------------------------&lt;br/&gt;
     	//  Communication with Zookeeper&lt;br/&gt;
     	// ------------------------------------------------------------------------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static void setOffsetInZooKeeper(ZkClient zkClient, String groupId, String topic, int partition, long offset) {&lt;/li&gt;
	&lt;li&gt;TopicAndPartition tap = new TopicAndPartition(topic, partition);&lt;/li&gt;
	&lt;li&gt;ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, tap.topic());&lt;/li&gt;
	&lt;li&gt;ZkUtils.updatePersistentPath(zkClient, topicDirs.consumerOffsetDir() + &quot;/&quot; + tap.partition(), Long.toString(offset));&lt;br/&gt;
    +	public static void setOffsetInZooKeeper(CuratorFramework curatorClient, String groupId, String topic, int partition, long offset) throws Exception 
{
    +		ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, topic);
    +		String path = topicDirs.consumerOffsetDir() + &quot;/&quot; + partition;
    +		ensureExists(curatorClient, path);
    +		byte[] data = Long.toString(offset).getBytes();
    +		curatorClient.setData().forPath(path, data);
     	}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static long getOffsetFromZooKeeper(ZkClient zkClient, String groupId, String topic, int partition) {&lt;/li&gt;
	&lt;li&gt;TopicAndPartition tap = new TopicAndPartition(topic, partition);&lt;/li&gt;
	&lt;li&gt;ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, tap.topic());&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;scala.Tuple2&amp;lt;Option&amp;lt;String&amp;gt;, Stat&amp;gt; data = ZkUtils.readDataMaybeNull(zkClient,&lt;/li&gt;
	&lt;li&gt;topicDirs.consumerOffsetDir() + &quot;/&quot; + tap.partition());&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (data._1().isEmpty()) {&lt;br/&gt;
    +	public static long getOffsetFromZooKeeper(CuratorFramework curatorClient, String groupId, String topic, int partition) throws Exception {&lt;br/&gt;
    +		ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, topic);&lt;br/&gt;
    +		String path = topicDirs.consumerOffsetDir() + &quot;/&quot; + partition;&lt;br/&gt;
    +		ensureExists(curatorClient, path);&lt;br/&gt;
    +		byte[] data = curatorClient.getData().forPath(path);&lt;br/&gt;
    +		if(data == null) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    code style missing space (and line 124 as well)&lt;/p&gt;</comment>
                            <comment id="15055803" author="githubbot" created="Mon, 14 Dec 2015 10:41:22 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#discussion_r47482606&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#discussion_r47482606&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/internals/ZookeeperOffsetHandler.java &amp;#8212;&lt;br/&gt;
    @@ -98,30 +97,42 @@ public void seekFetcherToInitialOffsets(List&amp;lt;KafkaTopicPartitionLeader&amp;gt; partitio&lt;/p&gt;

&lt;p&gt;     	@Override&lt;br/&gt;
     	public void close() throws IOException &lt;/p&gt;
{
    -		zkClient.close();
    +		curatorClient.close();
     	}

&lt;p&gt;     	// ------------------------------------------------------------------------&lt;br/&gt;
     	//  Communication with Zookeeper&lt;br/&gt;
     	// ------------------------------------------------------------------------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static void setOffsetInZooKeeper(ZkClient zkClient, String groupId, String topic, int partition, long offset) {&lt;/li&gt;
	&lt;li&gt;TopicAndPartition tap = new TopicAndPartition(topic, partition);&lt;/li&gt;
	&lt;li&gt;ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, tap.topic());&lt;/li&gt;
	&lt;li&gt;ZkUtils.updatePersistentPath(zkClient, topicDirs.consumerOffsetDir() + &quot;/&quot; + tap.partition(), Long.toString(offset));&lt;br/&gt;
    +	public static void setOffsetInZooKeeper(CuratorFramework curatorClient, String groupId, String topic, int partition, long offset) throws Exception {&lt;br/&gt;
    +		ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, topic);&lt;br/&gt;
    +		String path = topicDirs.consumerOffsetDir() + &quot;/&quot; + partition;&lt;br/&gt;
    +		ensureExists(curatorClient, path);&lt;br/&gt;
    +		byte[] data = Long.toString(offset).getBytes();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Depending on how often this is called, we could replace it with another way of converting it to the original bytes.&lt;/p&gt;</comment>
                            <comment id="15056184" author="githubbot" created="Mon, 14 Dec 2015 16:05:41 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#issuecomment-164477144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#issuecomment-164477144&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I tested the changes on the cluster with a job where I previously saw failures in zkClient. Now it seems to work. So I would give my :+1. Others would probably look at the implementation but that seems to be going on already.&lt;/p&gt;</comment>
                            <comment id="15056374" author="githubbot" created="Mon, 14 Dec 2015 17:55:22 +0000"  >&lt;p&gt;Github user rmetzger commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#discussion_r47531635&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#discussion_r47531635&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/FlinkKafkaConsumer.java &amp;#8212;&lt;br/&gt;
    @@ -632,6 +632,7 @@ public void run() {&lt;br/&gt;
     						//  ------------  commit current offsets ----------------&lt;/p&gt;

&lt;p&gt;     						// create copy of current offsets&lt;br/&gt;
    +						//noinspection unchecked&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Its only supressing IntelliJ warnings I think. I don&apos;t know if we have any policy regarding this. The annotation will also suppress compiler warnings.&lt;/p&gt;</comment>
                            <comment id="15056437" author="githubbot" created="Mon, 14 Dec 2015 18:31:03 +0000"  >&lt;p&gt;Github user rmetzger commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#discussion_r47536514&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#discussion_r47536514&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/internals/ZookeeperOffsetHandler.java &amp;#8212;&lt;br/&gt;
    @@ -61,30 +61,29 @@ public ZookeeperOffsetHandler(Properties props) {&lt;br/&gt;
     		if (zkConnect == null) &lt;/p&gt;
{
     			throw new IllegalArgumentException(&quot;Required property &apos;zookeeper.connect&apos; has not been set&quot;);
     		}
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;zkClient = new ZkClient(zkConnect,&lt;/li&gt;
	&lt;li&gt;Integer.valueOf(props.getProperty(&quot;zookeeper.session.timeout.ms&quot;, &quot;6000&quot;)),&lt;/li&gt;
	&lt;li&gt;Integer.valueOf(props.getProperty(&quot;zookeeper.connection.timeout.ms&quot;, &quot;6000&quot;)),&lt;/li&gt;
	&lt;li&gt;new ZooKeeperStringSerializer());&lt;br/&gt;
    +&lt;br/&gt;
    +		RetryPolicy retryPolicy = new ExponentialBackoffRetry(100, 10);&lt;br/&gt;
    +		curatorClient = CuratorFrameworkFactory.newClient(zkConnect, retryPolicy);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Good point. I&apos;m now allowing users to change the default values. (I chose to use the curator defaults rather than the kafka defaults). The retry policy is also configurable.&lt;/p&gt;</comment>
                            <comment id="15056440" author="githubbot" created="Mon, 14 Dec 2015 18:31:55 +0000"  >&lt;p&gt;Github user rmetzger commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#discussion_r47536647&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#discussion_r47536647&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/internals/ZookeeperOffsetHandler.java &amp;#8212;&lt;br/&gt;
    @@ -98,30 +97,42 @@ public void seekFetcherToInitialOffsets(List&amp;lt;KafkaTopicPartitionLeader&amp;gt; partitio&lt;/p&gt;

&lt;p&gt;     	@Override&lt;br/&gt;
     	public void close() throws IOException &lt;/p&gt;
{
    -		zkClient.close();
    +		curatorClient.close();
     	}

&lt;p&gt;     	// ------------------------------------------------------------------------&lt;br/&gt;
     	//  Communication with Zookeeper&lt;br/&gt;
     	// ------------------------------------------------------------------------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static void setOffsetInZooKeeper(ZkClient zkClient, String groupId, String topic, int partition, long offset) {&lt;/li&gt;
	&lt;li&gt;TopicAndPartition tap = new TopicAndPartition(topic, partition);&lt;/li&gt;
	&lt;li&gt;ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, tap.topic());&lt;/li&gt;
	&lt;li&gt;ZkUtils.updatePersistentPath(zkClient, topicDirs.consumerOffsetDir() + &quot;/&quot; + tap.partition(), Long.toString(offset));&lt;br/&gt;
    +	public static void setOffsetInZooKeeper(CuratorFramework curatorClient, String groupId, String topic, int partition, long offset) throws Exception {&lt;br/&gt;
    +		ZKGroupTopicDirs topicDirs = new ZKGroupTopicDirs(groupId, topic);&lt;br/&gt;
    +		String path = topicDirs.consumerOffsetDir() + &quot;/&quot; + partition;&lt;br/&gt;
    +		ensureExists(curatorClient, path);&lt;br/&gt;
    +		byte[] data = Long.toString(offset).getBytes();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Compared to all the other stuff going on with the Kafka connector, this is probably not an issue (it only happens at the rate of checkpoints).&lt;/p&gt;</comment>
                            <comment id="15059755" author="githubbot" created="Wed, 16 Dec 2015 09:35:51 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#discussion_r47753669&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#discussion_r47753669&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/internals/ZookeeperOffsetHandler.java &amp;#8212;&lt;br/&gt;
    @@ -42,13 +43,12 @@&lt;br/&gt;
     	private static final Logger LOG = LoggerFactory.getLogger(ZookeeperOffsetHandler.class);&lt;/p&gt;

&lt;p&gt;     	private static final long OFFSET_NOT_SET = FlinkKafkaConsumer.OFFSET_NOT_SET;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;private final ZkClient zkClient;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     	private final String groupId;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;    +	private final CuratorFramework curatorClient;&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    empty line&lt;/p&gt;</comment>
                            <comment id="15059756" author="githubbot" created="Wed, 16 Dec 2015 09:36:27 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#discussion_r47753777&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#discussion_r47753777&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/FlinkKafkaConsumer.java &amp;#8212;&lt;br/&gt;
    @@ -632,6 +632,7 @@ public void run() {&lt;br/&gt;
     						//  ------------  commit current offsets ----------------&lt;/p&gt;

&lt;p&gt;     						// create copy of current offsets&lt;br/&gt;
    +						//noinspection unchecked&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I think you can remove the line after the annotation. I don&apos;t think we have a policy about this, but I&apos;ve seen it in many places.&lt;/p&gt;</comment>
                            <comment id="15059757" author="githubbot" created="Wed, 16 Dec 2015 09:36:59 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#issuecomment-165047710&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#issuecomment-165047710&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    With Aljoscha&apos;s test +1 to merge (minus two trivial comments).&lt;/p&gt;</comment>
                            <comment id="15072153" author="githubbot" created="Sun, 27 Dec 2015 13:23:48 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451#issuecomment-167411820&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451#issuecomment-167411820&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good fix, merging this!&lt;/p&gt;</comment>
                            <comment id="15075970" author="githubbot" created="Thu, 31 Dec 2015 14:33:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1451&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1451&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15075973" author="stephanewen" created="Thu, 31 Dec 2015 14:35:33 +0000"  >&lt;p&gt;Fixed in 1.0.0 via 4f8c5e839acbfd67aba112547138a5b0b0d29c9d&lt;/p&gt;</comment>
                            <comment id="15105079" author="rmetzger" created="Mon, 18 Jan 2016 10:34:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gyfora&quot; class=&quot;user-hover&quot; rel=&quot;gyfora&quot;&gt;gyfora&lt;/a&gt;, did you see this issue again or can we close it?&lt;/p&gt;</comment>
                            <comment id="15105163" author="gyfora" created="Mon, 18 Jan 2016 11:18:26 +0000"  >&lt;p&gt;It is running seamlessly so I think we can close it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15105207" author="rmetzger" created="Mon, 18 Jan 2016 12:12:08 +0000"  >&lt;p&gt;Awesome! I&apos;ll close it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12638781">KAFKA-824</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ousf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>