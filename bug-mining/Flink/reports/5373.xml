<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:56:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-22085] KafkaSourceLegacyITCase hangs/fails on azure</title>
                <link>https://issues.apache.org/jira/browse/FLINK-22085</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;1) Observations&lt;/p&gt;

&lt;p&gt;a) The Azure pipeline would occasionally hang without printing any test error information.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=15939&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=8219&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=15939&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=8219&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;b) By running the test KafkaSourceLegacyITCase::testBrokerFailure() with INFO level logging, the the test would hang with the following error message printed repeatedly:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
20451 [New I/O boss #50] ERROR org.apache.flink.networking.NetworkFailureHandler [] - Closing communication channel because of an exception
java.net.ConnectException: Connection refused: localhost/127.0.0.1:50073
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[?:1.8.0_151]
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717) ~[?:1.8.0_151]
        at org.apache.flink.shaded.testutils.org.jboss.netty.channel.socket.nio.NioClientBoss.connect(NioClientBoss.java:152) ~[flink-test-utils_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at org.apache.flink.shaded.testutils.org.jboss.netty.channel.socket.nio.NioClientBoss.processSelectedKeys(NioClientBoss.java:105) [flink-test-utils_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at org.apache.flink.shaded.testutils.org.jboss.netty.channel.socket.nio.NioClientBoss.process(NioClientBoss.java:79) [flink-test-utils_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at org.apache.flink.shaded.testutils.org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337) [flink-test-utils_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at org.apache.flink.shaded.testutils.org.jboss.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:42) [flink-test-utils_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at org.apache.flink.shaded.testutils.org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108) [flink-test-utils_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at org.apache.flink.shaded.testutils.org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42) [flink-test-utils_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_151]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_151]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [?:1.8.0_151]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;2) Root cause explanations&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;The test would hang because it enters the following loop:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;closeOnFlush() is called for a given channel&lt;/li&gt;
	&lt;li&gt;closeOnFlush() calls channel.write(..)&lt;/li&gt;
	&lt;li&gt;channel.write() triggers the exceptionCaught(...) callback&lt;/li&gt;
	&lt;li&gt;closeOnFlush() is called for the same channel again.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;3) Solution&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Update closeOnFlush() so that, if a channel is being closed by this method, then closeOnFlush() would not try to write to this channel if it is called on this channel again.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13369044">FLINK-22085</key>
            <summary>KafkaSourceLegacyITCase hangs/fails on azure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gaoyunhaii">Yun Gao</assignee>
                                    <reporter username="dwysakowicz">Dawid Wysakowicz</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>stale-assigned</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 1 Apr 2021 07:44:34 +0000</created>
                <updated>Thu, 23 Sep 2021 17:27:33 +0000</updated>
                            <resolved>Fri, 27 Aug 2021 03:02:43 +0000</resolved>
                                    <version>1.13.0</version>
                    <version>1.14.0</version>
                                    <fixVersion>1.14.0</fixVersion>
                                    <component>Connectors / Kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17313054" author="dawidwys" created="Thu, 1 Apr 2021 09:49:20 +0000"  >&lt;p&gt;Also a failure: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=15944&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=9071&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=15944&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=9071&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17313056" author="dawidwys" created="Thu, 1 Apr 2021 09:53:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jqin&quot; class=&quot;user-hover&quot; rel=&quot;jqin&quot;&gt;jqin&lt;/a&gt; Could you take a look?&lt;/p&gt;</comment>
                            <comment id="17313589" author="maguowei" created="Fri, 2 Apr 2021 05:50:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=15996&amp;amp;view=logs&amp;amp;j=4be4ed2b-549a-533d-aa33-09e28e360cc8&amp;amp;t=0db94045-2aa0-53fa-f444-0130d6933518&amp;amp;l=10356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=15996&amp;amp;view=logs&amp;amp;j=4be4ed2b-549a-533d-aa33-09e28e360cc8&amp;amp;t=0db94045-2aa0-53fa-f444-0130d6933518&amp;amp;l=10356&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A failure because of creating topic timeout.&lt;/p&gt;</comment>
                            <comment id="17313622" author="maguowei" created="Fri, 2 Apr 2021 06:41:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16005&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=7928&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16005&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=7928&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17317708" author="dawidwys" created="Fri, 9 Apr 2021 06:38:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16232&amp;amp;view=logs&amp;amp;j=4be4ed2b-549a-533d-aa33-09e28e360cc8&amp;amp;t=0db94045-2aa0-53fa-f444-0130d6933518&amp;amp;l=7410&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16232&amp;amp;view=logs&amp;amp;j=4be4ed2b-549a-533d-aa33-09e28e360cc8&amp;amp;t=0db94045-2aa0-53fa-f444-0130d6933518&amp;amp;l=7410&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17317709" author="dawidwys" created="Fri, 9 Apr 2021 06:39:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt; Do you mind taking a look?&lt;/p&gt;</comment>
                            <comment id="17317809" author="dawidwys" created="Fri, 9 Apr 2021 09:14:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16254&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6919&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16254&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6919&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] testAutoOffsetRetrievalAndCommitToKafka(org.apache.flink.connector.kafka.source.KafkaSourceLegacyITCase)  Time elapsed: 30.446 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: expected:&amp;lt;50&amp;gt; but was:&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:144)
	at org.apache.flink.streaming.connectors.kafka.KafkaConsumerTestBase.runAutoOffsetRetrievalAndCommitToKafka(KafkaConsumerTestBase.java:386)
	at org.apache.flink.connector.kafka.source.KafkaSourceLegacyITCase.testAutoOffsetRetrievalAndCommitToKafka(KafkaSourceLegacyITCase.java:155)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17318067" author="dawidwys" created="Fri, 9 Apr 2021 15:15:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16281&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6539&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16281&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6539&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17318658" author="maguowei" created="Sun, 11 Apr 2021 05:48:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16311&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6862&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16311&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6862&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17318958" author="lindong" created="Mon, 12 Apr 2021 01:31:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&#160;Sure, I will take a look.&lt;/p&gt;</comment>
                            <comment id="17319039" author="dawidwys" created="Mon, 12 Apr 2021 06:00:23 +0000"  >&lt;p&gt;Thx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt;&#160; I will assign this to you.&lt;/p&gt;</comment>
                            <comment id="17320738" author="dawidwys" created="Wed, 14 Apr 2021 06:37:44 +0000"  >&lt;p&gt;Any progress &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="17320760" author="roman_khachatryan" created="Wed, 14 Apr 2021 07:15:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16470&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16470&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17321044" author="lindong" created="Wed, 14 Apr 2021 14:18:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&#160;Sorry, I was busy with other work and didn&apos;t realize this is a blocker for 1.13 release until today.&lt;/p&gt;

&lt;p&gt;This looks like a flaky test which didn&apos;t have any useful log information in the Azure pipeline log. I was not able to reproduce this on my Macbook yet.&lt;/p&gt;

&lt;p&gt;Since this is a blocker for 1.13 release and we want to address this asap, I opened&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/15617&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/15617&lt;/a&gt;&#160;to change the test log level to INFO. Could you help approve this PR?&lt;/p&gt;

&lt;p&gt;In the mean time, I will take a deeper look in the test source code and run more tests locally to hopefully reproduce it with INFO level logging.&lt;/p&gt;</comment>
                            <comment id="17321055" author="dawidwys" created="Wed, 14 Apr 2021 14:38:06 +0000"  >&lt;p&gt;I am afraid we should not increase the log level. Could you verify that in your personal azure account? &lt;a href=&quot;https://cwiki.apache.org/confluence/display/FLINK/Azure+Pipelines#AzurePipelines-Tutorial:SettingupAzurePipelinesforaforkoftheFlinkrepository&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/FLINK/Azure+Pipelines#AzurePipelines-Tutorial:SettingupAzurePipelinesforaforkoftheFlinkrepository&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I marked it as a blocker because I&apos;ve seen quite regularly. My intention is to mainly verify if the problem is in the production code or is a flakiness of the test.&lt;/p&gt;</comment>
                            <comment id="17321098" author="dawidwys" created="Wed, 14 Apr 2021 15:37:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16524&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6862&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16524&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6862&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17321105" author="lindong" created="Wed, 14 Apr 2021 15:51:03 +0000"  >&lt;p&gt;Sounds good. I will use my personal azure account.&lt;/p&gt;

&lt;p&gt;I am able to reproduce it on my Macbook with INFO level logging. The following stacktrace is repeated printed in the log. I am looking into this.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
348201 [Checkpoint Timer] WARN  org.apache.flink.runtime.checkpoint.CheckpointCoordinator [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job a9516740f56272d7a3730023fec0bead.)
org.apache.flink.runtime.checkpoint.CheckpointException: some tasks of job a9516740f56272d7a3730023fec0bead has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
        at org.apache.flink.runtime.checkpoint.DefaultCheckpointPlanCalculator.lambda$calculateCheckpointPlan$1(DefaultCheckpointPlanCalculator.java:101) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590) ~[?:1.8.0_151]
        at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRunAsync(AkkaRpcActor.java:440) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcMessage(AkkaRpcActor.java:208) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at org.apache.flink.runtime.rpc.akka.FencedAkkaRpcActor.handleRpcMessage(FencedAkkaRpcActor.java:77) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleMessage(AkkaRpcActor.java:158) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
        at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:26) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:21) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at scala.PartialFunction$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;applyOrElse(PartialFunction.scala:123) ~[scala-library-2.11.12.jar:?]
        at akka.japi.pf.UnitCaseStatement.applyOrElse(CaseStatements.scala:21) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:170) ~[scala-library-2.11.12.jar:?]
        at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171) ~[scala-library-2.11.12.jar:?]
        at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171) ~[scala-library-2.11.12.jar:?]
        at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundReceive(Actor.scala:517) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at akka.actor.AbstractActor.aroundReceive(AbstractActor.scala:225) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at akka.actor.ActorCell.receiveMessage(ActorCell.scala:592) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at akka.actor.ActorCell.invoke(ActorCell.scala:561) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:258) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at akka.dispatch.Mailbox.run(Mailbox.scala:225) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at akka.dispatch.Mailbox.exec(Mailbox.scala:235) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at akka.dispatch.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at akka.dispatch.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at akka.dispatch.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
        at akka.dispatch.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107) ~[akka-actor_2.11-2.5.21.jar:2.5.21]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17321305" author="dawidwys" created="Wed, 14 Apr 2021 20:31:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16544&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6539&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16544&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6539&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17321959" author="dawidwys" created="Thu, 15 Apr 2021 07:13:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16574&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6862&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16574&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6862&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17322228" author="lindong" created="Thu, 15 Apr 2021 14:35:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; I have updated this JIRA with the root cause explanation. Could you help review &lt;a href=&quot;https://github.com/apache/flink/pull/15633?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/15633?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17322455" author="dawidwys" created="Thu, 15 Apr 2021 19:33:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16590&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6539&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16590&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6539&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17322774" author="maguowei" created="Fri, 16 Apr 2021 10:42:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16590&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6539&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16590&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6539&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17324890" author="dawidwys" created="Mon, 19 Apr 2021 09:02:54 +0000"  >&lt;p&gt;Fixed in:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;master
	&lt;ul&gt;
		&lt;li&gt;98424e6383bcce107844cbeecc2e9df4ffb4272a&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;1.13
	&lt;ul&gt;
		&lt;li&gt;766f7175d62f5ef572027331e3fceb31b1b4cc4b&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17325615" author="mapohl" created="Tue, 20 Apr 2021 08:49:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt; &lt;tt&gt;KafkaSourceLegacyITCase&lt;/tt&gt; timed out in &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16789&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6593&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;that build&lt;/a&gt;. The build itself included the fix &lt;a href=&quot;https://github.com/apache/flink/commit/98424e6383bcce107844cbeecc2e9df4ffb4272a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;98424e6&lt;/a&gt; provided by this issue. May you have another look at it to double-check whether it&apos;s related or a completely different issue/&lt;/p&gt;</comment>
                            <comment id="17325643" author="lindong" created="Tue, 20 Apr 2021 09:29:48 +0000"  >&lt;p&gt;Thanks for the information &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt;. Previously I have verified that I can successfully run KafkaSourceLegacyITCase::testBrokerFailure 100 times without issue.&lt;/p&gt;

&lt;p&gt;Let me try to reproduce the issue by running KafkaSourceLegacyITCase.&lt;/p&gt;</comment>
                            <comment id="17325893" author="dawidwys" created="Tue, 20 Apr 2021 15:09:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16858&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16858&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17326196" author="karmagyz" created="Wed, 21 Apr 2021 01:59:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16849&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6916&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16849&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6916&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17326332" author="dawidwys" created="Wed, 21 Apr 2021 07:46:16 +0000"  >&lt;p&gt;Any luck reproducing the issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17326666" author="lindong" created="Wed, 21 Apr 2021 15:56:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&#160;Yeah I am able to reproduce the test hang once. I found the reason why the test hangs (after a test failure) and uploaded&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/15713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/15713&lt;/a&gt;&#160;to fix this this.&lt;/p&gt;

&lt;p&gt;I am still trying to debug the test failure.&lt;/p&gt;</comment>
                            <comment id="17327091" author="maguowei" created="Thu, 22 Apr 2021 04:26:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16996&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=c1d93a6a-ba91-515d-3196-2ee8019fbda7&amp;amp;l=6883&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16996&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=c1d93a6a-ba91-515d-3196-2ee8019fbda7&amp;amp;l=6883&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17327213" author="dawidwys" created="Thu, 22 Apr 2021 09:46:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16996&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=c1d93a6a-ba91-515d-3196-2ee8019fbda7&amp;amp;l=41635&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16996&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=c1d93a6a-ba91-515d-3196-2ee8019fbda7&amp;amp;l=41635&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17327217" author="dawidwys" created="Thu, 22 Apr 2021 09:49:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16996&amp;amp;view=logs&amp;amp;j=ce8f3cc3-c1ea-5281-f5eb-df9ebd24947f&amp;amp;t=f266c805-9429-58ed-2f9e-482e7b82f58b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=16996&amp;amp;view=logs&amp;amp;j=ce8f3cc3-c1ea-5281-f5eb-df9ebd24947f&amp;amp;t=f266c805-9429-58ed-2f9e-482e7b82f58b&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17327224" author="dawidwys" created="Thu, 22 Apr 2021 09:52:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17001&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=42003&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17001&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=42003&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17327228" author="dawidwys" created="Thu, 22 Apr 2021 09:53:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17000&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=41341&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17000&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=41341&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17329271" author="dawidwys" created="Thu, 22 Apr 2021 16:47:20 +0000"  >&lt;p&gt;Merge another fix in:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;1.14 (master)
	&lt;ul&gt;
		&lt;li&gt;58a7c80fa35424608ad44d1d6691d1407be0092a&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;1.13
	&lt;ul&gt;
		&lt;li&gt;28eea07cea69f1d7bf0d2062e65e08f7671b8ebc&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17330815" author="lindong" created="Fri, 23 Apr 2021 14:29:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; FYI, after applying &lt;a href=&quot;https://github.com/apache/flink/pull/15713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/15713&lt;/a&gt;, I am able to run KafkaSourceLegacyITCase 100 times without any failure. &lt;/p&gt;

&lt;p&gt;The bug fixed by &lt;a href=&quot;https://github.com/apache/flink/pull/15713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/15713&lt;/a&gt; would cause test hang only if there is a Flink job that keeps running. After reading through related code, I still could not find a full explanation of why there is such a Flink job in the first place.&lt;/p&gt;

&lt;p&gt;I will stop investigating this bug for now. Let&apos;s see if there is still test failure and if we can find more useful information from the Azure pipeline log.&lt;/p&gt;

</comment>
                            <comment id="17330819" author="dawidwys" created="Fri, 23 Apr 2021 14:31:54 +0000"  >&lt;p&gt;Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt;. Really good job on stabilising the test! Your plan sounds good to me to wait and see if it still occurs.&lt;/p&gt;</comment>
                            <comment id="17332455" author="dawidwys" created="Mon, 26 Apr 2021 14:26:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17206&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6612&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17206&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6612&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17332456" author="dawidwys" created="Mon, 26 Apr 2021 14:27:43 +0000"  >&lt;p&gt;I will remove timeouts on master to possibly get thread dumps.&lt;/p&gt;</comment>
                            <comment id="17332460" author="dawidwys" created="Mon, 26 Apr 2021 14:31:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17212&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=7062&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17212&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=7062&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17332957" author="lindong" created="Tue, 27 Apr 2021 05:52:42 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; for the information.&lt;/p&gt;

&lt;p&gt;For the first test failure &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, it could be because the Azure pipeline is very slow and the it takes more than 60 seconds (due to long GC) to complete that test. Maybe we can see if increasing the timeout to 120 seconds could reduce the failure rate of this test.&lt;/p&gt;

&lt;p&gt;For the second test failure &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;, it appears that the test failed due to &quot;OperatorEvent from an OperatorCoordinator to a task was lost&quot;. This is relate to &lt;a href=&quot;https://github.com/apache/flink/pull/15605&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/15605&lt;/a&gt; which was committed recently. &lt;/p&gt;

&lt;p&gt;Given that KafkaSourceLegacyITCase no longer hangs and the comment history in this JIRA is already very long, I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-22488&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-22488&lt;/a&gt; to track the issue of &quot;OperatorEvent from an OperatorCoordinator to a task was lost&quot;. Maybe we can close this JIRA and continue the discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-22488&quot; title=&quot;KafkaSourceLegacyITCase.testOneToOneSources failed due to &amp;quot;OperatorEvent from an OperatorCoordinator to a task was lost&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-22488&quot;&gt;&lt;del&gt;FLINK-22488&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17206&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6612&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17206&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6612&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17212&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=7062&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17212&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=7062&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17333007" author="dawidwys" created="Tue, 27 Apr 2021 07:38:46 +0000"  >&lt;p&gt;One observation:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;some of the sub-tasks finish right away after starting, which makes it impossible to take any checkpoints/savepoints
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[Source: KafkaSource -&amp;gt; Map -&amp;gt; Map (3/8)#1] INFO  org.apache.flink.connector.base.source.reader.SourceReaderBase [] - Closing Source Reader.
22:02:57,135 [Source: KafkaSource -&amp;gt; Map -&amp;gt; Map (5/8)#1] INFO  org.apache.flink.connector.base.source.reader.SourceReaderBase [] - Reader received NoMoreSplits event.
22:02:57,136 [Source: KafkaSource -&amp;gt; Map -&amp;gt; Map (4/8)#1] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: KafkaSource -&amp;gt; Map -&amp;gt; Map (4/8)#1 (334496a6fd2c371dd842e7ecb61811d9) switched from RUNNING to FINISHED.


22:05:27,161 [FailingIdentityMapper Status Printer] INFO  org.apache.flink.streaming.connectors.kafka.testutils.FailingIdentityMapper [] - ============================&amp;gt; Failing mapper  6: count=1000, totalCount=1000
22:05:27,162 [FailingIdentityMapper Status Printer] INFO  org.apache.flink.streaming.connectors.kafka.testutils.FailingIdentityMapper [] - ============================&amp;gt; Failing mapper  1: count=1000, totalCount=1000
22:05:27,163 [FailingIdentityMapper Status Printer] INFO  org.apache.flink.streaming.connectors.kafka.testutils.FailingIdentityMapper [] - ============================&amp;gt; Failing mapper  7: count=1000, totalCount=1000
22:05:27,163 [FailingIdentityMapper Status Printer] INFO  org.apache.flink.streaming.connectors.kafka.testutils.FailingIdentityMapper [] - ============================&amp;gt; Failing mapper  0: count=1000, totalCount=1000
22:05:27,163 [FailingIdentityMapper Status Printer] INFO  org.apache.flink.streaming.connectors.kafka.testutils.FailingIdentityMapper [] - ============================&amp;gt; Failing mapper  5: count=1000, totalCount=1000
22:05:27,628 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 461c989450b54b7847421b914ddb4f00 since some tasks of job 461c989450b54b7847421b914ddb4f00 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
22:05:28,128 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 461c989450b54b7847421b914ddb4f00 since some tasks of job 461c989450b54b7847421b914ddb4f00 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
22:05:28,628 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 461c989450b54b7847421b914ddb4f00 since some tasks of job 461c989450b54b7847421b914ddb4f00 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
22:05:29,128 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 461c989450b54b7847421b914ddb4f00 since some tasks of job 461c989450b54b7847421b914ddb4f00 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
22:05:29,627 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 461c989450b54b7847421b914ddb4f00 since some tasks of job 461c989450b54b7847421b914ddb4f00 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
22:05:30,128 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 461c989450b54b7847421b914ddb4f00 since some tasks of job 461c989450b54b7847421b914ddb4f00 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
22:05:30,628 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 461c989450b54b7847421b914ddb4f00 since some tasks of job 461c989450b54b7847421b914ddb4f00 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
22:05:31,128 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 461c989450b54b7847421b914ddb4f00 since some tasks of job 461c989450b54b7847421b914ddb4f00 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
22:05:31,628 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 461c989450b54b7847421b914ddb4f00 since some tasks of job 461c989450b54b7847421b914ddb4f00 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
22:05:32,128 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 461c989450b54b7847421b914ddb4f00 since some tasks of job 461c989450b54b7847421b914ddb4f00 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17333062" author="dawidwys" created="Tue, 27 Apr 2021 09:21:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17243&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=41700&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17243&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=41700&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17333085" author="lindong" created="Tue, 27 Apr 2021 09:55:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; I see. Previously the test would be fail with org.junit.runners.model.TestTimedOutException if it does not end within 60 seconds. I suppose the test is hanging now because we have removed timeouts.&lt;/p&gt;

&lt;p&gt;Now that we have verifies that the test would indeed hang if we do not timeout tests, I think we can add back the timeout now to avoid test hang.&lt;/p&gt;

&lt;p&gt;Regarding why that test could not end by itself: I have seen and investigated this before. I didn&apos;t find the root cause as explained in the earlier comment &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. Take testMultipleSourcesOnePartition as example, this test might not end by itself if the ValidatingExactlyOnceSink in the Pipeline could not receive the expected number of messages, which means that some message is lost in the pipeline.&lt;/p&gt;

&lt;p&gt;Previously I have checked the FlinkKafkaConsumer code but could not find any hypothesis of why message could be lost without triggering an exception in this class. But &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-21996&quot; title=&quot;Transient RPC failure without TaskManager failure can lead to split assignment loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-21996&quot;&gt;&lt;del&gt;FLINK-21996&lt;/del&gt;&lt;/a&gt; gives me new hint as it suggests that messages could be lost in the pipeline when any AddSplitEvent is lost. I currently don&apos;t have enough knowledge to prove or disprove this hypothesis. Will need more time to read the code. &lt;/p&gt;

&lt;p&gt;It will be great if other Flink developers could help provide more ideas or debug how a message could be lost in a Flink job.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-22085?focusedCommentId=17330815&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17330815&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-22085?focusedCommentId=17330815&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17330815&lt;/a&gt;&lt;/p&gt;



</comment>
                            <comment id="17333108" author="dawidwys" created="Tue, 27 Apr 2021 10:25:07 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Now that we have verifies that the test would indeed hang if we do not timeout tests, I think we can add back the timeout now to avoid test hang.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s better not to add the timeouts because now we have thread dumps and we know the test actually hangs busy looping. With a timeout it could&apos;ve hanged in a random spot without an informative traces. Therefore we should not add timeouts.&lt;/p&gt;</comment>
                            <comment id="17333172" author="lindong" created="Tue, 27 Apr 2021 12:04:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; Hmm... why would the test hang in a random spot if we add timeouts? Regarding those bugs which we are currently investigating, if we add back the timeout, then the test will just fail fast with TestTimedOutException. Not sure if I missed something here.&lt;/p&gt;

&lt;p&gt;Note that if we don&apos;t add back the timeout, then those bugs will waste Azure pipeline resource. And it also makes developer wait longer for the test result. I personally believe new thread dumps will give us the same information as the thread dump we already get. Just my 2 cents.&lt;/p&gt;</comment>
                            <comment id="17333174" author="dawidwys" created="Tue, 27 Apr 2021 12:07:30 +0000"  >&lt;p&gt;If you have concerns regarding timeouts, please join the discussion at: &lt;a href=&quot;https://lists.apache.org/thread.html/r0710f90f30e230d3f11b459a6edc5afd5b2e990ab9533b1442adfaf5%40%3Cdev.flink.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/r0710f90f30e230d3f11b459a6edc5afd5b2e990ab9533b1442adfaf5%40%3Cdev.flink.apache.org%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17345902" author="dawidwys" created="Mon, 17 May 2021 06:44:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17993&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=c1d93a6a-ba91-515d-3196-2ee8019fbda7&amp;amp;l=6634&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17993&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=c1d93a6a-ba91-515d-3196-2ee8019fbda7&amp;amp;l=6634&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17346653" author="rmetzger" created="Tue, 18 May 2021 07:45:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18055&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18055&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17346656" author="rmetzger" created="Tue, 18 May 2021 07:47:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18052&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18052&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17357008" author="xintongsong" created="Fri, 4 Jun 2021 01:49:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18651&amp;amp;view=logs&amp;amp;j=ce8f3cc3-c1ea-5281-f5eb-df9ebd24947f&amp;amp;t=f266c805-9429-58ed-2f9e-482e7b82f58b&amp;amp;l=6378&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18651&amp;amp;view=logs&amp;amp;j=ce8f3cc3-c1ea-5281-f5eb-df9ebd24947f&amp;amp;t=f266c805-9429-58ed-2f9e-482e7b82f58b&amp;amp;l=6378&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17360509" author="xintongsong" created="Thu, 10 Jun 2021 02:51:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18851&amp;amp;view=logs&amp;amp;j=ce8f3cc3-c1ea-5281-f5eb-df9ebd24947f&amp;amp;t=f266c805-9429-58ed-2f9e-482e7b82f58b&amp;amp;l=6366&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18851&amp;amp;view=logs&amp;amp;j=ce8f3cc3-c1ea-5281-f5eb-df9ebd24947f&amp;amp;t=f266c805-9429-58ed-2f9e-482e7b82f58b&amp;amp;l=6366&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17360510" author="xintongsong" created="Thu, 10 Jun 2021 02:53:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt;, any updates on this one?&lt;/p&gt;</comment>
                            <comment id="17363298" author="lindong" created="Tue, 15 Jun 2021 00:35:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt; No... after spending 2+ hours over the weekend to look into this, I don&apos;t think I will be able to find the answer to this bug any time soon.&lt;/p&gt;

&lt;p&gt;Previously I spent considerable (from 4/11 to 4/26) to investigate this bug and found 2+ issues. I couldn&apos;t not find any more Kafka-related bugs by reading the code and the thread dump. It is not clear from the thread dump where the deadlock comes from.  In order for me to further figure this out, I would need to have deeper understanding of Flink runtime works by reading the source Flink code, which I have not had time to do since I joined the current team.&lt;/p&gt;

&lt;p&gt;If anyone could help read the threadump from the log and give some idea regarding why the test deadlocks, I would be happy to continue the investigation.&lt;/p&gt;
</comment>
                            <comment id="17363319" author="xintongsong" created="Tue, 15 Jun 2021 02:29:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18957&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6632&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18957&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6632&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17363320" author="xintongsong" created="Tue, 15 Jun 2021 02:32:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt;, thanks for the updates. I&apos;ll try to find another pair of eyes to take a look.&lt;/p&gt;

&lt;p&gt;Do you mind if I unassign you for the moment? That helps remind us on the kanban board that this ticket is not being taken care of.&lt;/p&gt;</comment>
                            <comment id="17363324" author="lindong" created="Tue, 15 Jun 2021 02:46:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt; Sure, please feel free to un-assign me. Thanks!&lt;/p&gt;</comment>
                            <comment id="17363414" author="xintongsong" created="Tue, 15 Jun 2021 06:47:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt;, could you help take a look at the stacks from the runtime angles?&lt;/p&gt;</comment>
                            <comment id="17363419" author="gaoyunhaii" created="Tue, 15 Jun 2021 06:52:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt;&#160;OK, I&apos;ll have a look~&lt;/p&gt;</comment>
                            <comment id="17364011" author="xintongsong" created="Wed, 16 Jun 2021 02:14:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19003&amp;amp;view=logs&amp;amp;j=ce8f3cc3-c1ea-5281-f5eb-df9ebd24947f&amp;amp;t=f266c805-9429-58ed-2f9e-482e7b82f58b&amp;amp;l=6601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19003&amp;amp;view=logs&amp;amp;j=ce8f3cc3-c1ea-5281-f5eb-df9ebd24947f&amp;amp;t=f266c805-9429-58ed-2f9e-482e7b82f58b&amp;amp;l=6601&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17364012" author="xintongsong" created="Wed, 16 Jun 2021 02:15:35 +0000"  >&lt;p&gt;Thanks a log, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt;. I&apos;ve assigned you to the ticket.&lt;/p&gt;</comment>
                            <comment id="17364934" author="dawidwys" created="Thu, 17 Jun 2021 13:14:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19048&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19048&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17365198" author="xintongsong" created="Fri, 18 Jun 2021 01:34:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19069&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6632&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19069&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6632&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17366330" author="xintongsong" created="Mon, 21 Jun 2021 02:07:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19124&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6632&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19124&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=6632&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17366331" author="xintongsong" created="Mon, 21 Jun 2021 02:14:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19152&amp;amp;view=logs&amp;amp;j=ce8f3cc3-c1ea-5281-f5eb-df9ebd24947f&amp;amp;t=f266c805-9429-58ed-2f9e-482e7b82f58b&amp;amp;l=6601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19152&amp;amp;view=logs&amp;amp;j=ce8f3cc3-c1ea-5281-f5eb-df9ebd24947f&amp;amp;t=f266c805-9429-58ed-2f9e-482e7b82f58b&amp;amp;l=6601&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17366346" author="xintongsong" created="Mon, 21 Jun 2021 02:48:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19175&amp;amp;view=logs&amp;amp;j=1fc6e7bf-633c-5081-c32a-9dea24b05730&amp;amp;t=80a658d1-f7f6-5d93-2758-53ac19fd5b19&amp;amp;l=6687&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19175&amp;amp;view=logs&amp;amp;j=1fc6e7bf-633c-5081-c32a-9dea24b05730&amp;amp;t=80a658d1-f7f6-5d93-2758-53ac19fd5b19&amp;amp;l=6687&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17366357" author="gaoyunhaii" created="Mon, 21 Jun 2021 03:06:24 +0000"  >&lt;p&gt;I checked the last several cases, it seems they are all hang at&#160;testMultipleSourcesOnePartition(org.apache.flink.connector.kafka.source.KafkaSourceLegacyITCase) with the last log shows&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
01:34:47,793 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job d9229593ea3e8c25751e0b146ba62ee1 since some tasks of job d9229593ea3e8c25751e0b146ba62ee1 has been finished, abort the checkpoint Failure reason: Not all required tasks are currently running.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;ll first focus on this issue.&lt;/p&gt;</comment>
                            <comment id="17366359" author="lindong" created="Mon, 21 Jun 2021 03:32:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt; Thanks for the investigation. Previously I have looked into this particular INFO message. From what I know, it appears to be expected by this test.&lt;/p&gt;

&lt;p&gt;What happens is that some subtask (e.g. 7 out of 8 subtasks) have finished correctly when the checkpoint is triggered. And Flink would not take the checkpoint if any subtask has finished.&lt;/p&gt;

&lt;p&gt;The issue here is that a subtask never finishes. According to the logic of this particular test, this could be because the sink of this subtask never received the expected number of messages, which I could not find any explanation so far.&lt;/p&gt;</comment>
                            <comment id="17366567" author="dawidwys" created="Mon, 21 Jun 2021 12:17:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19202&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19202&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17367027" author="gaoyunhaii" created="Tue, 22 Jun 2021 06:11:32 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lindong&quot; class=&quot;user-hover&quot; rel=&quot;lindong&quot;&gt;lindong&lt;/a&gt;&#160;thanks for the explanation and it indeed helps a lot. &lt;/p&gt;

&lt;p&gt;First sorry that I still have not found the root cause, I further checked the case, and the rough process is&lt;br/&gt;
 &#160;&lt;br/&gt;
1. A generate job starts up and generates 5 partitions, each with 1000 records.&lt;br/&gt;
2. A consumer job starts up, it has two tasks, the first is kafka source -&amp;gt; failing identity map -&amp;gt; validate map with parallelism 8, and the second&#160; task is the validating exactly-once sink, with parallelism 1.&#160;&lt;br/&gt;
3. Since there are only 5 partitions, 3 of the source tasks would finished immediately after startup.&lt;br/&gt;
4. One of the&#160;failing identity map would trigger failover in the middle. &lt;br/&gt;
5. After restarts, the job would re-run. Note that no checkpoint taken in the first run due to finished tasks, the job would run from scratch after failover. And similar to the first run 3 of the 8 source tasks would finish immediately.&lt;br/&gt;
6. The original design is that the sink task would check if 5000 records are received, if so, it would throw a SuccessException() to terminate the job.&lt;/p&gt;

&lt;p&gt;The main problem here is that the debug thread prints that each of the 5 alive failing identity map have processed 1000 records, but the sink still do not throw the exception. I could not see other possible execution path for now. To make it clear how many records the sink has received, I first open &lt;a href=&quot;https://github.com/apache/flink/pull/16233&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a PR to also add debug thread to print the sink status &lt;/a&gt;. Could some one have a look at this PR first? Very thanks~&lt;/p&gt;</comment>
                            <comment id="17367908" author="xintongsong" created="Wed, 23 Jun 2021 06:54:17 +0000"  >&lt;p&gt;Logs added in db73b33538ab8b2d9edc91e6fe9795b48e3a2e4d&lt;/p&gt;</comment>
                            <comment id="17370984" author="xintongsong" created="Tue, 29 Jun 2021 02:11:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19643&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19643&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17370985" author="xintongsong" created="Tue, 29 Jun 2021 02:13:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt;, &lt;br/&gt;
New instance found. Please take another look.&lt;/p&gt;</comment>
                            <comment id="17371822" author="gaoyunhaii" created="Wed, 30 Jun 2021 05:59:03 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt;&#160;for the review and monitoring the tests~ Afterward I tried to repeat this test on Azure:&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/16317&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/16317&lt;/a&gt;, and it seems that the issue could reproduce in Azure for some probability. With all these instances I found that:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The&#160;failing identity map indeed process required (namely 1000) records after failover.&lt;/li&gt;
	&lt;li&gt;The sink might lost all the records from some map tasks, but the number of maps get lost is random. And I have not met with the case that a part of records from a single task get lost.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;As a whole, I think it seems the case is not related to Kafka, but might have some relationship with local network stack. One possible related point is that the test has set buffer timeout to 0. I&apos;ll try to further analyze the causes.&#160;&lt;/p&gt;</comment>
                            <comment id="17372420" author="gaoyunhaii" created="Thu, 1 Jul 2021 06:26:08 +0000"  >&lt;p&gt;Hi all, I should have found the reason: for flush timeout = 0, the flush happens only after the records emitted and there is no standalone flush thread, then after failover:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The (source -&amp;gt; map -&amp;gt; map) task (parallel = 8) started, it first try to restore the partition state, after this it broadcast EndOfChannelStateEvent, this would block the channel.&#160;&lt;/li&gt;
	&lt;li&gt;Then for the following records emitted by the (source -&amp;gt; map -&amp;gt; map) tasks, it would not notifyDataAvailable since isBlocked = true.&lt;/li&gt;
	&lt;li&gt;After the (sink) task (parallel = 1) received all the EndOfChannelStateEvent, it would resume all the subpartitions. After this it would check if the subpartition is available, if so, it would queue the corresponding local input channel&lt;/li&gt;
	&lt;li&gt;However, if before 3, the&#160;(source -&amp;gt; map -&amp;gt; map) task has emitted all the 1000 records, then these record would not be notified during resuming since the subpartition has isBlock = false, but when it check the availability of the subpartition, it would return isAvailable() = false since flush requested = false. Then the data won&apos;t be notified in the future&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The bug could be reproduced locally by add sleep in the UpstreamRecoveryTrackImpl#handleEndOfRecovery to delay the step 3.&#160;&lt;/p&gt;</comment>
                            <comment id="17373128" author="lindong" created="Fri, 2 Jul 2021 01:21:16 +0000"  >&lt;p&gt;Thanks you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt; for the explanation!&lt;/p&gt;

&lt;p&gt;Do you plan to submit a PR to fix this? I will help take a deeper look into this explanation and the PR.&lt;/p&gt;</comment>
                            <comment id="17373449" author="gaoyunhaii" created="Fri, 2 Jul 2021 11:34:41 +0000"  >&lt;p&gt;No problem, I&apos;ll create a new issue and link it to this issue. I&apos;ll also think a bit on the possible fix options~&lt;/p&gt;</comment>
                            <comment id="17373612" author="arvid" created="Fri, 2 Jul 2021 15:42:08 +0000"  >&lt;p&gt;I think having `notifyDataAvailable` at the end of recovery certainly makes sense. Extra `notifyDataAvailable` are rather cheap when not on the hot-path.&lt;/p&gt;</comment>
                            <comment id="17374211" author="gaoyunhaii" created="Sun, 4 Jul 2021 07:16:40 +0000"  >&lt;p&gt;Very thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arvid&quot; class=&quot;user-hover&quot; rel=&quot;arvid&quot;&gt;arvid&lt;/a&gt;, I also agree with we could have one more notifyDataAvailable at the end of recovery and other resume cases. I&apos;ll have a look at the details~&lt;/p&gt;</comment>
                            <comment id="17374488" author="xintongsong" created="Mon, 5 Jul 2021 03:53:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19865&amp;amp;view=logs&amp;amp;j=1fc6e7bf-633c-5081-c32a-9dea24b05730&amp;amp;t=80a658d1-f7f6-5d93-2758-53ac19fd5b19&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19865&amp;amp;view=logs&amp;amp;j=1fc6e7bf-633c-5081-c32a-9dea24b05730&amp;amp;t=80a658d1-f7f6-5d93-2758-53ac19fd5b19&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17374626" author="dawidwys" created="Mon, 5 Jul 2021 07:48:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19884&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=41430&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19884&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&amp;amp;l=41430&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17377758" author="xintongsong" created="Fri, 9 Jul 2021 03:29:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=20195&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=c1d93a6a-ba91-515d-3196-2ee8019fbda7&amp;amp;l=6529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=20195&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=c1d93a6a-ba91-515d-3196-2ee8019fbda7&amp;amp;l=6529&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17395659" author="flink-jira-bot" created="Sun, 8 Aug 2021 22:37:15 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issue is assigned but has not received an update in 30 days, so it has been labeled &quot;stale-assigned&quot;.&lt;br/&gt;
If you are still working on the issue, please remove the label and add a comment updating the community on your progress.  If this issue is waiting on feedback, please consider this a reminder to the committer/reviewer. Flink is a very active project, and so we appreciate your patience.&lt;br/&gt;
If you are no longer working on the issue, please unassign yourself so someone else may work on it.&lt;/p&gt;</comment>
                            <comment id="17405554" author="gaoyunhaii" created="Fri, 27 Aug 2021 03:02:28 +0000"  >&lt;p&gt;Since we have fix this case via&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-23223&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-23223&lt;/a&gt;&#160;and it has not pop up for a long time, I&apos;ll close the issue for now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13387271">FLINK-23223</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13374957">FLINK-22457</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13374419">FLINK-22416</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13375737">FLINK-22520</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pfvs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>