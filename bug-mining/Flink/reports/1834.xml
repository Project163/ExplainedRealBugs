<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:29:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-7161] Fix misusage of Double.MIN_VALUE and Float.MIN_VALUE</title>
                <link>https://issues.apache.org/jira/browse/FLINK-7161</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;In FloatSummaryAggregator and DoubleSummaryAggregator, we used Float.MIN_VALUE and Double.MIN_VALUE to be the initial values when doing max aggregation which is wrong.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13086476">FLINK-7161</key>
            <summary>Fix misusage of Double.MIN_VALUE and Float.MIN_VALUE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ykt836">Kurt Young</assignee>
                                    <reporter username="ykt836">Kurt Young</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Jul 2017 06:01:13 +0000</created>
                <updated>Sat, 15 Jul 2017 00:00:03 +0000</updated>
                            <resolved>Sat, 15 Jul 2017 00:00:03 +0000</resolved>
                                    <version>1.3.1</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Runtime / Configuration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16083493" author="githubbot" created="Wed, 12 Jul 2017 06:07:20 +0000"  >&lt;p&gt;GitHub user KurtYoung opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7161&quot; title=&quot;Fix misusage of Double.MIN_VALUE and Float.MIN_VALUE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7161&quot;&gt;&lt;del&gt;FLINK-7161&lt;/del&gt;&lt;/a&gt; fix misusage of Float.MIN_VALUE and Double.MIN_VALUE&lt;/p&gt;

&lt;p&gt;    I already checked all places using Float.MIN_VALUE and Double.MIN_VALUE and fixed all misusage.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/KurtYoung/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/KurtYoung/flink&lt;/a&gt; flink-7161&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4305&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5c7a2fd4c97eaedba87b0042e337d94f315b4191&lt;br/&gt;
Author: Kurt Young &amp;lt;ykt836@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-07-12T06:02:58Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7161&quot; title=&quot;Fix misusage of Double.MIN_VALUE and Float.MIN_VALUE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7161&quot;&gt;&lt;del&gt;FLINK-7161&lt;/del&gt;&lt;/a&gt; fix misusage of Float.MIN_VALUE and Double.MIN_VALUE&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16083568" author="githubbot" created="Wed, 12 Jul 2017 07:16:24 +0000"  >&lt;p&gt;Github user zhangminglei commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good, as ```Double.MIN_VALUE``` always return a positive number.&lt;/p&gt;</comment>
                            <comment id="16083802" author="githubbot" created="Wed, 12 Jul 2017 10:55:31 +0000"  >&lt;p&gt;Github user greghogan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305#discussion_r126921674&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305#discussion_r126921674&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/configuration/Configuration.java &amp;#8212;&lt;br/&gt;
    @@ -843,7 +843,7 @@ private float convertToFloat(Object o, float defaultValue) {&lt;br/&gt;
     		}&lt;br/&gt;
     		else if (o.getClass() == Double.class) {&lt;br/&gt;
     			double value = ((Double) o);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (value &amp;lt;= Float.MAX_VALUE &amp;amp;&amp;amp; value &amp;gt;= Float.MIN_VALUE) {&lt;br/&gt;
    +			if (value &amp;lt;= Float.MAX_VALUE &amp;amp;&amp;amp; value &amp;gt;= Float.NEGATIVE_INFINITY) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The original looks to be the correct test for underflow but should also test the negative range.&lt;/p&gt;</comment>
                            <comment id="16083876" author="githubbot" created="Wed, 12 Jul 2017 12:02:45 +0000"  >&lt;p&gt;Github user KurtYoung commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @greghogan , thanks for the review, your comments have been addressed.&lt;/p&gt;</comment>
                            <comment id="16083914" author="githubbot" created="Wed, 12 Jul 2017 12:42:23 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good catches, +1 to merge&lt;/p&gt;</comment>
                            <comment id="16083936" author="githubbot" created="Wed, 12 Jul 2017 13:01:34 +0000"  >&lt;p&gt;Github user greghogan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305#discussion_r126946827&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305#discussion_r126946827&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/configuration/Configuration.java &amp;#8212;&lt;br/&gt;
    @@ -843,11 +843,14 @@ private float convertToFloat(Object o, float defaultValue) {&lt;br/&gt;
     		}&lt;br/&gt;
     		else if (o.getClass() == Double.class) {&lt;br/&gt;
     			double value = ((Double) o);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (value &amp;lt;= Float.MAX_VALUE &amp;amp;&amp;amp; value &amp;gt;= Float.MIN_VALUE) 
{
    -				return (float) value;
    -			}
&lt;p&gt; else {&lt;br/&gt;
    +			if (value &amp;lt; -Float.MAX_VALUE&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The current checks around `0` can be combined. Can we simplify this to two ranges, `-max` to `-min` and `min` to `max` (all inclusive), reverting the order of the if-else?&lt;/p&gt;</comment>
                            <comment id="16084993" author="githubbot" created="Thu, 13 Jul 2017 00:55:18 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305#discussion_r127107209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305#discussion_r127107209&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/configuration/Configuration.java &amp;#8212;&lt;br/&gt;
    @@ -843,11 +843,14 @@ private float convertToFloat(Object o, float defaultValue) {&lt;br/&gt;
     		}&lt;br/&gt;
     		else if (o.getClass() == Double.class) {&lt;br/&gt;
     			double value = ((Double) o);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (value &amp;lt;= Float.MAX_VALUE &amp;amp;&amp;amp; value &amp;gt;= Float.MIN_VALUE) 
{
    -				return (float) value;
    -			}
&lt;p&gt; else {&lt;br/&gt;
    +			if (value &amp;lt; -Float.MAX_VALUE&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I&apos;m afraid in that case, 0 can not be treated right, so i add a test case to check.&lt;/p&gt;</comment>
                            <comment id="16085012" author="githubbot" created="Thu, 13 Jul 2017 01:17:47 +0000"  >&lt;p&gt;Github user greghogan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305#discussion_r127109325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305#discussion_r127109325&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/configuration/Configuration.java &amp;#8212;&lt;br/&gt;
    @@ -843,11 +843,14 @@ private float convertToFloat(Object o, float defaultValue) {&lt;br/&gt;
     		}&lt;br/&gt;
     		else if (o.getClass() == Double.class) {&lt;br/&gt;
     			double value = ((Double) o);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (value &amp;lt;= Float.MAX_VALUE &amp;amp;&amp;amp; value &amp;gt;= Float.MIN_VALUE) 
{
    -				return (float) value;
    -			}
&lt;p&gt; else {&lt;br/&gt;
    +			if (value &amp;lt; -Float.MAX_VALUE&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I stand corrected. Why not use three checks instead of four (five comparisons instead of six) with the additional equality check with `0`?&lt;/p&gt;</comment>
                            <comment id="16085041" author="githubbot" created="Thu, 13 Jul 2017 01:58:16 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305#discussion_r127113118&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305#discussion_r127113118&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/configuration/Configuration.java &amp;#8212;&lt;br/&gt;
    @@ -843,11 +843,14 @@ private float convertToFloat(Object o, float defaultValue) {&lt;br/&gt;
     		}&lt;br/&gt;
     		else if (o.getClass() == Double.class) {&lt;br/&gt;
     			double value = ((Double) o);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (value &amp;lt;= Float.MAX_VALUE &amp;amp;&amp;amp; value &amp;gt;= Float.MIN_VALUE) 
{
    -				return (float) value;
    -			}
&lt;p&gt; else {&lt;br/&gt;
    +			if (value &amp;lt; -Float.MAX_VALUE&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I&apos;m ok with both, will write it in your way.&lt;/p&gt;</comment>
                            <comment id="16085477" author="githubbot" created="Thu, 13 Jul 2017 09:54:28 +0000"  >&lt;p&gt;Github user greghogan commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1&lt;/p&gt;</comment>
                            <comment id="16085504" author="githubbot" created="Thu, 13 Jul 2017 10:14:45 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4305&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3her3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>