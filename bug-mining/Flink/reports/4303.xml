<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:47:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-17891]  FlinkYarnSessionCli sets wrong execution.target type</title>
                <link>https://issues.apache.org/jira/browse/FLINK-17891</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I submitted a flink session job at the local YARN cluster, and I found that the &lt;b&gt;execution.target&lt;/b&gt; is of the wrong type, which should be of yarn-session type&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13003777/13003777_image-2020-05-23-00-59-32-702.png&quot; height=&quot;75&quot; width=&quot;545&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13003776/13003776_image-2020-05-23-01-00-19-549.png&quot; height=&quot;94&quot; width=&quot;544&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13306842">FLINK-17891</key>
            <summary> FlinkYarnSessionCli sets wrong execution.target type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkl0u">Kostas Kloudas</assignee>
                                    <reporter username="tangshangwen">Wally Tang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 22 May 2020 17:02:09 +0000</created>
                <updated>Tue, 16 Jun 2020 07:42:37 +0000</updated>
                            <resolved>Tue, 16 Jun 2020 07:42:37 +0000</resolved>
                                    <version>1.11.0</version>
                                    <fixVersion>1.10.2</fixVersion>
                    <fixVersion>1.11.0</fixVersion>
                    <fixVersion>1.12.0</fixVersion>
                                    <component>Command Line Client</component>
                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17114246" author="tangshangwen" created="Fri, 22 May 2020 17:10:43 +0000"  >&lt;p&gt;My idea is that if we start the flink session job with FlinkYarnSessionCli, we should set the &lt;b&gt;execution.target&lt;/b&gt; to be of yarn-session type, not yarn-per-job. and the problem is in this line&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
effectiveConfiguration.setString(DeploymentOptions.TARGET, YarnJobClusterExecutor.NAME);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// FlinkYarnSessionCli.java
&lt;/span&gt;@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Configuration applyCommandLineOptionsToConfiguration(CommandLine commandLine) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FlinkException {
   &lt;span class=&quot;code-comment&quot;&gt;// we ignore the addressOption because it can only contain &lt;span class=&quot;code-quote&quot;&gt;&quot;yarn-cluster&quot;&lt;/span&gt;
&lt;/span&gt;   &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Configuration effectiveConfiguration = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Configuration(configuration);

   applyDescriptorOptionToConfig(commandLine, effectiveConfiguration);

   &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ApplicationId applicationId = getApplicationId(commandLine);
   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (applicationId != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; zooKeeperNamespace;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (commandLine.hasOption(zookeeperNamespace.getOpt())){
         zooKeeperNamespace = commandLine.getOptionValue(zookeeperNamespace.getOpt());
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
         zooKeeperNamespace = effectiveConfiguration.getString(HA_CLUSTER_ID, applicationId.toString());
      }

      effectiveConfiguration.setString(HA_CLUSTER_ID, zooKeeperNamespace);
      effectiveConfiguration.setString(YarnConfigOptions.APPLICATION_ID, ConverterUtils.toString(applicationId));
      effectiveConfiguration.setString(DeploymentOptions.TARGET, YarnSessionClusterExecutor.NAME);
   } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      effectiveConfiguration.setString(DeploymentOptions.TARGET, YarnJobClusterExecutor.NAME);
   }
 ...
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17114251" author="tangshangwen" created="Fri, 22 May 2020 17:17:41 +0000"  >&lt;p&gt;This is a simple fix, assign this issue to me and I can submit the code if possible&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17114622" author="tangshangwen" created="Sat, 23 May 2020 08:58:20 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;, Can you assign this task to me ? I&apos;ll try to fix it. Thanks~&lt;/p&gt;</comment>
                            <comment id="17115624" author="fly_in_gis" created="Mon, 25 May 2020 02:06:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tangshangwen&quot; class=&quot;user-hover&quot; rel=&quot;tangshangwen&quot;&gt;tangshangwen&lt;/a&gt;&#160;Thanks a lot for reporting this issue. Could you share the full command how do you start a Flink session cluster and then submit a job to the existing session? In &lt;tt&gt;FlinkYarnSessionCli&lt;/tt&gt;, only when the applicationId is not specified, we assume that it is a per-job cluster. I think it is the expected behavior.&lt;/p&gt;</comment>
                            <comment id="17115951" author="kkl0u" created="Mon, 25 May 2020 11:42:43 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tangshangwen&quot; class=&quot;user-hover&quot; rel=&quot;tangshangwen&quot;&gt;tangshangwen&lt;/a&gt;, as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt; said, could you describe what exactly is your scenario?&lt;/p&gt;</comment>
                            <comment id="17134301" author="kkl0u" created="Fri, 12 Jun 2020 15:09:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tangshangwen&quot; class=&quot;user-hover&quot; rel=&quot;tangshangwen&quot;&gt;tangshangwen&lt;/a&gt; could you please verify that the PR solves the issue you mention?&lt;/p&gt;</comment>
                            <comment id="17135711" author="fly_in_gis" created="Mon, 15 Jun 2020 10:06:45 +0000"  >&lt;p&gt;I have verified the PR could solve this issue.&lt;/p&gt;</comment>
                            <comment id="17136399" author="kkl0u" created="Tue, 16 Jun 2020 07:42:37 +0000"  >&lt;p&gt;Fixed on master with  cc1f1a47123a05a0f5e935a87e683c00c02c5ba4&lt;br/&gt;
on release-1.11 with 092fdf880b39387917b9f6fd49344fbb240f741e&lt;br/&gt;
and release-1.10 with 2bf5ea26d8eaa931924ab89c0ae7396adda8bc50&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13003777" name="image-2020-05-23-00-59-32-702.png" size="28587" author="tangshangwen" created="Fri, 22 May 2020 16:59:34 +0000"/>
                            <attachment id="13003776" name="image-2020-05-23-01-00-19-549.png" size="51139" author="tangshangwen" created="Fri, 22 May 2020 17:00:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0f2cw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>