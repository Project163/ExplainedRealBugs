<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:49:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-18842] e2e test failed to download &quot;localhost:9999/flink.tgz&quot; in &quot;Wordcount on Docker test&quot;</title>
                <link>https://issues.apache.org/jira/browse/FLINK-18842</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5260&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=2b7514ee-e706-5046-657b-3430666e7bd9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5260&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=2b7514ee-e706-5046-657b-3430666e7bd9&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-08-06T20:51:31.2499580Z �[91m+ wget -nv -O flink.tgz localhost:9999/flink.tgz
2020-08-06T20:51:31.2501498Z �[0m127.0.0.1 - - [06/Aug/2020 20:51:31] &lt;span class=&quot;code-quote&quot;&gt;&quot;GET /flink.tgz HTTP/1.1&quot;&lt;/span&gt; 200 -
2020-08-06T20:51:31.2502214Z �[91mfailed: Connection refused.
2020-08-06T20:51:31.6885068Z �[0m�[91m2020-08-06 20:51:31 URL:http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:9999/flink.tgz [322693675/322693675] -&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;flink.tgz&quot;&lt;/span&gt; [1]
&lt;/span&gt;2020-08-06T20:51:31.6888547Z �[0m�[91m+ [ &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; ]
2020-08-06T20:51:31.6889384Z �[0m�[91m+ tar -xf flink.tgz --strip-components=1
2020-08-06T20:51:34.8125585Z �[0m�[91m+ rm flink.tgz
2020-08-06T20:51:34.8699287Z �[0m�[91m+ chown -R flink:flink .
2020-08-07T00:20:42.7919165Z �[0m
2020-08-07T00:20:43.0365895Z ##[error]The operation was canceled.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13321422">FLINK-18842</key>
            <summary>e2e test failed to download &quot;localhost:9999/flink.tgz&quot; in &quot;Wordcount on Docker test&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mapohl">Matthias Pohl</assignee>
                                    <reporter username="dian.fu">Dian Fu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Fri, 7 Aug 2020 02:01:14 +0000</created>
                <updated>Fri, 19 Feb 2021 07:28:48 +0000</updated>
                            <resolved>Mon, 28 Sep 2020 09:35:58 +0000</resolved>
                                    <version>1.11.0</version>
                                    <fixVersion>1.12.0</fixVersion>
                                    <component>flink-docker</component>
                    <component>Test Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17175752" author="rmetzger" created="Tue, 11 Aug 2020 18:03:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5392&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=2b7514ee-e706-5046-657b-3430666e7bd9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5392&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=2b7514ee-e706-5046-657b-3430666e7bd9&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17176343" author="rmetzger" created="Wed, 12 Aug 2020 13:49:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5446&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=2b7514ee-e706-5046-657b-3430666e7bd9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5446&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=2b7514ee-e706-5046-657b-3430666e7bd9&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17191556" author="rmetzger" created="Mon, 7 Sep 2020 08:06:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; can you look into this test instability and see how we can stabilize it?&lt;/p&gt;</comment>
                            <comment id="17192012" author="mapohl" created="Tue, 8 Sep 2020 07:36:38 +0000"  >&lt;p&gt;All three builds reached the upper limit of 260mins (4 hours 20 minutes). That caused the cancellation of the build. Hence, it&apos;s not related to the test itself. We have to discuss increasing the limit or improving the run-time of our e2e pipeline.&lt;/p&gt;</comment>
                            <comment id="17192040" author="rmetzger" created="Tue, 8 Sep 2020 08:41:03 +0000"  >&lt;p&gt;But the problem is that we are stuck in this test for 3 hours:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-08-06T20:51:34.8699287Z �[0m�[91m+ chown -R flink:flink .
2020-08-07T00:20:42.7919165Z �[0m
2020-08-07T00:20:43.0365895Z ##[error]The operation was canceled.
2020-08-07T00:20:43.0380991Z ##[section]Finishing: Run e2e tests
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I guess this is caused by the download error.&lt;/p&gt;

&lt;p&gt;I would agree with you if the previous tests took much more time.&lt;/p&gt;</comment>
                            <comment id="17193440" author="mapohl" created="Thu, 10 Sep 2020 07:40:42 +0000"  >&lt;p&gt;I discussed the issue with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt;: It is hard to debug since it&apos;s happening within the Docker build. It does not have to be related to the &lt;tt&gt;connection refused&lt;/tt&gt; error that appears since it&apos;s also appearing in succeeding builds.&lt;br/&gt;
I created a new branch which runs this test multiple times trying to reproduce the problem without success: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=38&amp;amp;view=logs&amp;amp;j=aba23331-5614-58a0-ecb7-9c9e540c50fe&amp;amp;t=b30be84f-4d76-59f8-beed-6fd3501240e4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Build #38&lt;/a&gt; - 50 runs without any error&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=39&amp;amp;view=logs&amp;amp;j=1f3ed471-1849-5d3c-a34c-19792af4ad16&amp;amp;t=0d2e35fc-a330-5cf2-a012-7267e2667b1d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Build #39&lt;/a&gt; - 100 runs without any error&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=40&amp;amp;view=logs&amp;amp;j=1f3ed471-1849-5d3c-a34c-19792af4ad16&amp;amp;t=0d2e35fc-a330-5cf2-a012-7267e2667b1d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Build #40&lt;/a&gt; - 100 runs without any error (the failure was caused by another test that tried to download Kafka (cmp. &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-19158&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FLINK-19158&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I propose to wait for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; to have a look at the issue.&lt;/p&gt;</comment>
                            <comment id="17193450" author="rmetzger" created="Thu, 10 Sep 2020 08:12:23 +0000"  >&lt;p&gt;Thanks for looking into this. It really seems to be a rare issue.&lt;/p&gt;</comment>
                            <comment id="17195300" author="zentol" created="Mon, 14 Sep 2020 08:52:26 +0000"  >&lt;p&gt;Maybe we could harden the start of the fileserver; we currently just &lt;em&gt;try&lt;/em&gt; starting it but don&apos;t do any verification that it actually started successfully.&lt;/p&gt;

&lt;p&gt;Alternatively, run &lt;tt&gt;common_docker.sh&lt;/tt&gt; with a timeout + retries.&lt;/p&gt;</comment>
                            <comment id="17197110" author="mapohl" created="Wed, 16 Sep 2020 17:04:41 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Maybe we could harden the start of the fileserver; we currently just try starting it but don&apos;t do any verification that it actually started successfully.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I tried to reproduce it by simulating a not-started file server. ...without luck. But when going through the logs of the failed builds again, I realized that we can exclude a not-running file server as a cause: Each of the failed builds includes &lt;tt&gt;127.0.0.1 - - &lt;span class=&quot;error&quot;&gt;&amp;#91;12/Aug/2020 09:24:06&amp;#93;&lt;/span&gt; &quot;GET /flink.tgz HTTP/1.1&quot; 200 -&lt;/tt&gt;. Hence, the file server was running.&lt;/p&gt;

&lt;p&gt;Next thing to try: timeout + retries.&lt;/p&gt;</comment>
                            <comment id="17203125" author="zentol" created="Mon, 28 Sep 2020 09:35:58 +0000"  >&lt;p&gt;10 minute timeout added (implicitly causing a retry)&lt;br/&gt;
master: 51fe48737398af49ddadb41f9459dfe272c22c93&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hjvk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>