<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:22:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-16686] [State TTL] Make user class loader available in native RocksDB compaction thread</title>
                <link>https://issues.apache.org/jira/browse/FLINK-16686</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The issue is initially reported &lt;a href=&quot;https://stackoverflow.com/questions/60745711/flink-kryo-serializer-because-chill-serializer-couldnt-be-found&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The problem is that the java code of Flink compaction filter is called from RocksDB native C++ code. It is called in the context of the native&#160;compaction thread.&#160;RocksDB has utilities to create java Thread context for the Flink java callback. Presumably, the Java thread context class loader is not set at all and if it is queried then it produces NullPointerException.&lt;/p&gt;

&lt;p&gt;The provided report enabled a list state with TTL. The compaction filter has to deserialise elements to check expiration. The deserialiser relies on Kryo which queries the&#160;thread context class loader which is expected to be the user class loader of the task but turns out to be null.&lt;/p&gt;

&lt;p&gt;We should investigate how to pass the&#160;user class loader to the&#160;compaction thread of the&#160;list state with TTL.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13292783">FLINK-16686</key>
            <summary>[State TTL] Make user class loader available in native RocksDB compaction thread</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10200" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Not a Priority</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zakelly">Zakelly Lan</assignee>
                                    <reporter username="azagrebin">Andrey Zagrebin</reporter>
                        <labels>
                            <label>auto-deprioritized-major</label>
                            <label>auto-deprioritized-minor</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 19 Mar 2020 20:31:33 +0000</created>
                <updated>Fri, 3 Oct 2025 06:46:51 +0000</updated>
                            <resolved>Fri, 3 Oct 2025 05:03:18 +0000</resolved>
                                    <version>1.8.0</version>
                    <version>1.11.3</version>
                    <version>1.13.0</version>
                    <version>1.12.3</version>
                    <version>1.17.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>1.20.4</fixVersion>
                                    <component>Runtime / State Backends</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>33</watches>
                                                                                                                <comments>
                            <comment id="17101018" author="roeyshemtov" created="Wed, 6 May 2020 17:13:42 +0000"  >&lt;p&gt;Just update it is happens on flink 1.10 too (Kubernetes mode).&lt;br/&gt;
 Same exception as mentioned here&#160;&lt;/p&gt;

&lt;p&gt;{{}}&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Falling back to &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; Kryo serializer because Chill serializer couldn&apos;t be found.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Any suggestion of how to solve it?&lt;/p&gt;</comment>
                            <comment id="17101509" author="azagrebin" created="Thu, 7 May 2020 10:15:42 +0000"  >&lt;p&gt;Unfortunately, I cannot suggest more than it is written in the original stackoverflow discussion:&lt;/p&gt;

&lt;p&gt;As a workaround, I would suggest to use a list state with simple elements which type has a fixed byte length when serialized. That would be primitive types and POJOs, maybe implement a custom fixed length serializer if possible. Then the non-fixed length (Kryo or Chill) serializer does not have to be called in the TTL cleanup and the TTL cleanup would not require the user class loader.&lt;/p&gt;</comment>
                            <comment id="17288794" author="lindong" created="Tue, 23 Feb 2021 02:28:44 +0000"  >&lt;p&gt;Discussed with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt; about this bug. This bug is hard to fix partly because a proper solution requires changes to RocksDB and Kryo. It will take more time to agree on a coordinated solution across Flink, RocksDB and Kryo. Given that we have a workaround solution and the impact of this bug seems low (based on the number of comments in this thread), we have not initiated serious discussion in the Flink community to tackle this bug.&lt;/p&gt;

&lt;p&gt;The workaround solution is what Andrey described above, i.e. write a custom serializer. &lt;/p&gt;</comment>
                            <comment id="17327979" author="flink-jira-bot" created="Thu, 22 Apr 2021 11:25:52 +0000"  >&lt;p&gt;This major issue is unassigned and itself and all of its Sub-Tasks have not been updated for 30 days. So, it has been labeled &quot;stale-major&quot;. If this ticket is indeed &quot;major&quot;, please either assign yourself or give an update. Afterwards, please remove the label. In 7 days the issue will be deprioritized.&lt;/p&gt;</comment>
                            <comment id="17336268" author="flink-jira-bot" created="Thu, 29 Apr 2021 23:15:03 +0000"  >&lt;p&gt;This issue was labeled &quot;stale-major&quot; 7 ago and has not received any updates so it is being deprioritized. If this ticket is actually Major, please raise the priority and ask a committer to assign you the issue or revive the public discussion.&lt;/p&gt;</comment>
                            <comment id="17337151" author="alpinegizmo" created="Fri, 30 Apr 2021 07:41:03 +0000"  >&lt;p&gt;Reported again in&#160;&lt;a href=&quot;https://stackoverflow.com/q/67321286/2000823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/q/67321286/2000823&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17348583" author="sjwiesman" created="Thu, 20 May 2021 15:01:28 +0000"  >&lt;p&gt;I can report users running into this again. I realize this is a tough problem to solve. In the interim, what about eagerly banning the use of Kryo serializer for List and Map state ttl&apos;s? As it already does not work, I don&apos;t believe this would be a breaking change but would prevent our users from corrupting their snapshots cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knaufk&quot; class=&quot;user-hover&quot; rel=&quot;knaufk&quot;&gt;knaufk&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liyu&quot; class=&quot;user-hover&quot; rel=&quot;liyu&quot;&gt;liyu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17348602" author="till.rohrmann" created="Thu, 20 May 2021 15:57:46 +0000"  >&lt;p&gt;This could be an option to make the problem more visible to the user and helping him not to shoot himself in the foot until we have fixed the problem properly.&lt;/p&gt;</comment>
                            <comment id="17349018" author="knaufk" created="Fri, 21 May 2021 06:42:23 +0000"  >&lt;p&gt;Failing early sounds like a good option to me. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sjwiesman&quot; class=&quot;user-hover&quot; rel=&quot;sjwiesman&quot;&gt;sjwiesman&lt;/a&gt; do you want to create a separate ticket for that?&lt;/p&gt;</comment>
                            <comment id="17446190" author="flink-jira-bot" created="Thu, 18 Nov 2021 22:38:44 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issues has been marked as Minor but is unassigned and neither itself nor its Sub-Tasks have been updated for 180 days. I have gone ahead and marked it &quot;stale-minor&quot;. If this ticket is still Minor, please either assign yourself or give an update. Afterwards, please remove the label or in 7 days the issue will be deprioritized.&lt;/p&gt;</comment>
                            <comment id="17449684" author="flink-jira-bot" created="Fri, 26 Nov 2021 22:38:21 +0000"  >&lt;p&gt;This issue was labeled &quot;stale-minor&quot; 7 days ago and has not received any updates so it is being deprioritized. If this ticket is actually Minor, please raise the priority and ask a committer to assign you the issue or revive the public discussion.&lt;/p&gt;</comment>
                            <comment id="17499448" author="flink-jira-bot" created="Tue, 1 Mar 2022 10:38:48 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issues has been marked as Major but is unassigned and neither itself nor its Sub-Tasks have been updated for 60 days. I have gone ahead and added a &quot;stale-major&quot; to the issue&quot;. If this ticket is a Major, please either assign yourself or give an update. Afterwards, please remove the label or in 7 days the issue will be deprioritized.&lt;/p&gt;</comment>
                            <comment id="17503479" author="flink-jira-bot" created="Wed, 9 Mar 2022 10:38:53 +0000"  >&lt;p&gt;This issue was labeled &quot;stale-major&quot; 7 days ago and has not received any updates so it is being deprioritized. If this ticket is actually Major, please raise the priority and ask a committer to assign you the issue or revive the public discussion.&lt;/p&gt;</comment>
                            <comment id="17552732" author="asardaes" created="Fri, 10 Jun 2022 12:46:28 +0000"  >&lt;p&gt;The reported problems were falling back on Kryo, but since this ticket mentions &quot;user class loader&quot;, would implementing a custom &lt;tt&gt;TypeInformation&amp;lt;&amp;gt;&lt;/tt&gt; and &lt;tt&gt;TypeSerializer&amp;lt;&amp;gt;&lt;/tt&gt; fail as well? Or could that work if those implementations are added to Flink&apos;s lib folder and thus loaded by the parent class loader?&lt;/p&gt;</comment>
                            <comment id="17554381" author="yunta" created="Wed, 15 Jun 2022 05:39:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asardaes&quot; class=&quot;user-hover&quot; rel=&quot;asardaes&quot;&gt;asardaes&lt;/a&gt; If I remember correctly, the problem would disappear if user switched to a customized serializer instead of the default kryo serializer. Maybe you can also try to reproduce this problem via kryo serializer and then switch the serializer to customized serializer.&lt;/p&gt;</comment>
                            <comment id="17555307" author="asardaes" created="Thu, 16 Jun 2022 21:26:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt; I did some limited testing and it seems a custom serializer works fine even if I provide it with my fat jar, but then I don&apos;t understand why it fails with Kryo, if it can use the custom serializer from the user classloader, can&apos;t it use Kryo as well?&lt;/p&gt;</comment>
                            <comment id="17555357" author="yunta" created="Fri, 17 Jun 2022 02:15:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asardaes&quot; class=&quot;user-hover&quot; rel=&quot;asardaes&quot;&gt;asardaes&lt;/a&gt; To be honest, I am not sure whether a customized serializer could really walk around this problem. And this problem might be related with the implementation of kryo, which needs help from some kryo experts.&lt;/p&gt;</comment>
                            <comment id="17557997" author="asardaes" created="Thu, 23 Jun 2022 10:44:18 +0000"  >&lt;p&gt;The test I did was using Flink 1.13 with a custom job and custom RocksDB configuration. With it, I could reliably get an exception after roughly 30 seconds if I didn&apos;t use a custom serializer. After repeating the test with Flink 1.15, I no longer get the exception, so maybe something changed and TTL-compaction can work with Kryo now?&lt;/p&gt;</comment>
                            <comment id="17558028" author="yunta" created="Thu, 23 Jun 2022 11:46:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asardaes&quot; class=&quot;user-hover&quot; rel=&quot;asardaes&quot;&gt;asardaes&lt;/a&gt; The RocksDB version is different between Flink-1.13 and Flink-1.15, I am not sure whether this could impact the problem.&lt;/p&gt;</comment>
                            <comment id="17558119" author="asardaes" created="Thu, 23 Jun 2022 14:49:14 +0000"  >&lt;p&gt;It seems I spoke to soon, something definitely changed but I still get an exception, it&apos;s just that it&apos;s thrown after approximately 1 hour instead of 30 seconds, not sure why.&lt;/p&gt;</comment>
                            <comment id="17755283" author="flink-jira-bot" created="Wed, 16 Aug 2023 22:35:21 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issues has been marked as Minor but is unassigned and neither itself nor its Sub-Tasks have been updated for 180 days. I have gone ahead and marked it &quot;stale-minor&quot;. If this ticket is still Minor, please either assign yourself or give an update. Afterwards, please remove the label or in 7 days the issue will be deprioritized.&lt;/p&gt;</comment>
                            <comment id="17758759" author="flink-jira-bot" created="Thu, 24 Aug 2023 22:35:09 +0000"  >&lt;p&gt;This issue was labeled &quot;stale-minor&quot; 7 days ago and has not received any updates so it is being deprioritized. If this ticket is actually Minor, please raise the priority and ask a committer to assign you the issue or revive the public discussion.&lt;/p&gt;</comment>
                            <comment id="17761031" author="asardaes" created="Thu, 31 Aug 2023 16:43:37 +0000"  >&lt;p&gt;EDIT: after some more validation, it seems my (de)serialization logic had a bug, after fixing that, I didn&apos;t get any exception after 3.75 hours.&lt;/p&gt;

&lt;p&gt;I wanted to check if this problem occurs with Avro, so I did a similar experiment as the one I did before with Kryo. I only considered &lt;tt&gt;GenericRecord&lt;/tt&gt; serialization for now, &lt;del&gt;but I can confirm this problem also occurs in that case&lt;/del&gt;.&lt;/p&gt;

&lt;p&gt;I basically implemented a custom serializer, similar to what&apos;s described &lt;a href=&quot;https://medium.com/wbaa/evolve-your-data-model-in-flinks-state-using-avro-f26982afa399&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;in this example&lt;/a&gt;, &lt;del&gt;and after running a dummy job for 2 hours I got this exception&lt;/del&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;AvroEmbeddedRocksDBTest &amp;gt; avroSerialization() STANDARD_ERROR
    java.lang.NullPointerException
        at org.apache.avro.Schema.applyAliases(Schema.java:1872)
        at org.apache.avro.generic.GenericDatumReader.getResolver(GenericDatumReader.java:131)
        at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:152)
        at com.avro.flink.GenericRecordTypeSerializer.deserialize(GenericRecordTypeSerializer.kt:56)
        at com.avro.flink.GenericRecordTypeSerializer.deserialize(GenericRecordTypeSerializer.kt:16)
        at org.apache.flink.api.common.typeutils.CompositeSerializer.deserialize(CompositeSerializer.java:156)
        at org.apache.flink.contrib.streaming.state.ttl.RocksDbTtlCompactFiltersManager$ListElementFilter.nextElementLastAccessTimestamp(RocksDbTtlCompactFiltersManager.java:205)
        at org.apache.flink.contrib.streaming.state.ttl.RocksDbTtlCompactFiltersManager$ListElementFilter.nextUnexpiredOffset(RocksDbTtlCompactFiltersManager.java:191)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that this stacktrace does &lt;em&gt;not&lt;/em&gt; mention a classloader. So the original issue could indeed by specific to Kryo.&lt;/p&gt;</comment>
                            <comment id="17817947" author="iemre" created="Fri, 16 Feb 2024 12:31:29 +0000"  >&lt;p&gt;I saw this happen in a Flink 1.15 app today, I believe we should add 1.15 to &quot;Affects Versions&quot; list.&lt;/p&gt;</comment>
                            <comment id="17847467" author="thw" created="Sat, 18 May 2024 00:40:18 +0000"  >&lt;p&gt;Flink 1.17:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14&quot;&lt;/span&gt; java.lang.IllegalArgumentException: classLoader cannot be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.
	at com.esotericsoftware.kryo.Kryo.setClassLoader(Kryo.java:975)
	at org.apache.flink.api.java.typeutils.runtime.kryo.KryoSerializer.checkKryoInitialized(KryoSerializer.java:550)
	at org.apache.flink.api.java.typeutils.runtime.kryo.KryoSerializer.deserialize(KryoSerializer.java:391)
	at org.apache.flink.api.common.typeutils.CompositeSerializer.deserialize(CompositeSerializer.java:156)
	at org.apache.flink.contrib.streaming.state.ttl.RocksDbTtlCompactFiltersManager$ListElementFilter.nextElementLastAccessTimestamp(RocksDbTtlCompactFiltersManager.java:205)
	at org.apache.flink.contrib.streaming.state.ttl.RocksDbTtlCompactFiltersManager$ListElementFilter.nextUnexpiredOffset(RocksDbTtlCompactFiltersManager.java:191) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17901964" author="kkrugler" created="Fri, 29 Nov 2024 17:26:23 +0000"  >&lt;p&gt;Reported again: &lt;a href=&quot;https://stackoverflow.com/questions/79188363/flink-classloader-cannot-be-null-kryo&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/79188363/flink-classloader-cannot-be-null-kryo&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17931382" author="JIRAUSER299612" created="Fri, 28 Feb 2025 07:35:52 +0000"  >&lt;p&gt;it still happens to flink 1.18.1&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;2025-02-28 07:12:43,796 tn=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19&quot;&lt;/span&gt; INFO &#160;org.apache.flink.api.java.typeutils.runtime.kryo.KryoSerializer [] - Kryo serializer scala extensions are not available.
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19&quot;&lt;/span&gt; java.lang.RuntimeException: Cannot instantiate class.
&#160; &#160; at org.apache.flink.api.java.typeutils.runtime.PojoSerializer.createInstance(PojoSerializer.java:200)
&#160; &#160; at org.apache.flink.api.java.typeutils.runtime.PojoSerializer.deserialize(PojoSerializer.java:400)
&#160; &#160; at org.apache.flink.api.common.typeutils.CompositeSerializer.deserialize(CompositeSerializer.java:156)
&#160; &#160; at org.apache.flink.contrib.streaming.state.ttl.RocksDbTtlCompactFiltersManager$ListElementFilter.nextElementLastAccessTimestamp(RocksDbTtlCompactFiltersManager.java:205)
&#160; &#160; at org.apache.flink.contrib.streaming.state.ttl.RocksDbTtlCompactFiltersManager$ListElementFilter.nextUnexpiredOffset(RocksDbTtlCompactFiltersManager.java:191)
Caused by: java.lang.IllegalArgumentException: classLoader cannot be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.
at com.esotericsoftware.kryo.Kryo.setClassLoader(Kryo.java:975)
at org.apache.flink.api.java.typeutils.runtime.kryo.KryoSerializer.checkKryoInitialized(KryoSerializer.java:553)
at org.apache.flink.api.java.typeutils.runtime.kryo.KryoSerializer.createInstance(KryoSerializer.java:286)
at org.apache.flink.api.java.typeutils.runtime.PojoSerializer.initializeFields(PojoSerializer.java:208)
at org.apache.flink.api.java.typeutils.runtime.PojoSerializer.createInstance(PojoSerializer.java:197)
... 4 more

#
# A fatal error has been detected by the Java &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment:
#
# &#160;SIGSEGV (0xb) at pc=0x00007f6c6016a766, pid=1, tid=423
#
# JRE version: OpenJDK &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment Temurin-17.0.12+7 (17.0.12+7) (build 17.0.12+7)
# Java VM: OpenJDK 64-Bit Server VM Temurin-17.0.12+7 (17.0.12+7, mixed mode, sharing, tiered, compressed oops, compressed &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V &#160;[libjvm.so+0x6ba766] &#160;Exceptions::_throw(JavaThread*, &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;*, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, Handle, &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;*)+0x106
#
# Core dump will be written. Default location: Core dumps may be processed with &lt;span class=&quot;code-quote&quot;&gt;&quot;/bin/&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt; (or dumping to /opt/flink/core.1)
#
# An error report file with more information is saved as:
# /opt/flink/hs_err_pid1.log
#
# If you would like to submit a bug report, please visit:
# &#160; https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/adoptium/adoptium-support/issues
&lt;/span&gt;#[error occurred during error reporting (), id 0xb, SIGSEGV (0xb) at pc=0x00007f6c6196b898] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="18021887" author="zakelly" created="Mon, 22 Sep 2025 15:45:51 +0000"  >&lt;p&gt;I&apos;ve submitted a PR to fix this, by capturing the classloader from the thread creating the compaction filter factory, and pass that to the native threads whenever the filter is invoked.&lt;/p&gt;</comment>
                            <comment id="18024392" author="zakelly" created="Fri, 3 Oct 2025 05:04:54 +0000"  >&lt;p&gt;Merge into:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;master: 01735fa853f2c730f78a439f6442d9bff9fb604d&lt;/li&gt;
	&lt;li&gt;1.20: 4a3e60da78b5ba389ab41c71b79d60ddc13fd24e&lt;/li&gt;
	&lt;li&gt;2.0: 4bb999242d06f533868bd3f2e4384b7f642869c1&lt;/li&gt;
	&lt;li&gt;2.1: b8613ec57dd363d302481bcd9b123aef9297e4a2&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="18024401" author="qinjunjerry" created="Fri, 3 Oct 2025 06:46:51 +0000"  >&lt;p&gt;This is finally solved.&#160;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zakelly&quot; class=&quot;user-hover&quot; rel=&quot;zakelly&quot;&gt;zakelly&lt;/a&gt; for great work!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12916634">FLINK-3089</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13188511">FLINK-10471</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0cppk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>