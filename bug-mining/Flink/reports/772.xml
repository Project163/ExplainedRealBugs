<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:22:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3206] Heap size for non-pre-allocated off-heap memory</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3206</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;In &lt;tt&gt;taskmanager.sh&lt;/tt&gt; the heap size is adjusted for off-heap memory only with pre-allocation set to true. In &lt;tt&gt;TaskManager.scala&lt;/tt&gt; the computation is reversed to compute the &lt;tt&gt;directMemorySize&lt;/tt&gt;. The effect is the JVM heap settings are too high and the assumed size of direct memory is also too high.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;taskmanager.memory.fraction: 0.9
taskmanager.memory.off-heap: true
taskmanager.heap.mb: 18000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With &lt;tt&gt;taskmanager.memory.preallocate: false&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;13:44:29,015 INFO  org.apache.flink.runtime.taskmanager.TaskManager              -     -Xms18000M
13:44:29,015 INFO  org.apache.flink.runtime.taskmanager.TaskManager              -     -Xmx18000M
13:44:30,591 INFO  org.apache.flink.runtime.taskmanager.TaskManager              - Limiting managed memory to 0.9 of the maximum memory size (161999 MB), memory will be allocated lazily.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With &lt;tt&gt;taskmanager.memory.preallocate: true&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;13:53:44,127 INFO  org.apache.flink.runtime.taskmanager.TaskManager              -     -Xms1800M
13:53:44,127 INFO  org.apache.flink.runtime.taskmanager.TaskManager              -     -Xmx1800M
13:53:45,743 INFO  org.apache.flink.runtime.taskmanager.TaskManager              - Using 0.9 of the maximum memory size for managed off-heap memory (15524 MB).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12928057">FLINK-3206</key>
            <summary>Heap size for non-pre-allocated off-heap memory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="greghogan">Greg Hogan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Jan 2016 16:27:25 +0000</created>
                <updated>Thu, 21 Jan 2016 17:44:26 +0000</updated>
                            <resolved>Thu, 21 Jan 2016 17:23:36 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>Deployment / Scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15085791" author="stephanewen" created="Wed, 6 Jan 2016 16:39:30 +0000"  >&lt;p&gt;Are you running this on YARN?&lt;/p&gt;

&lt;p&gt;I recently discovered this as a bug in the YARN code. Fixing this as part of my YARN refactoring...&lt;/p&gt;</comment>
                            <comment id="15085839" author="greghogan" created="Wed, 6 Jan 2016 17:05:15 +0000"  >&lt;p&gt;No, running standalone.&lt;/p&gt;</comment>
                            <comment id="15110874" author="mxm" created="Thu, 21 Jan 2016 16:38:50 +0000"  >&lt;p&gt;This seems to be a regression of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3073&quot; title=&quot;Activate streaming mode by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3073&quot;&gt;&lt;del&gt;FLINK-3073&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="15110953" author="mxm" created="Thu, 21 Jan 2016 17:23:22 +0000"  >&lt;p&gt;Fixed in c57111c8587bd32e715243bd92482b91ff8b8651.&lt;/p&gt;</comment>
                            <comment id="15110974" author="greghogan" created="Thu, 21 Jan 2016 17:41:24 +0000"  >&lt;p&gt;Thanks for fixing this!&lt;/p&gt;</comment>
                            <comment id="15110977" author="mxm" created="Thu, 21 Jan 2016 17:44:26 +0000"  >&lt;p&gt;Thanks for reporting &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qxu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>