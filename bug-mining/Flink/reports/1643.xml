<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6059] Reject DataSet&lt;Row&gt; and DataStream&lt;Row&gt; without RowTypeInformation</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6059</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;It is not possible to automatically extract proper type information for &lt;tt&gt;Row&lt;/tt&gt; because it is not typed with generics and holds values in an &lt;tt&gt;Object[]&lt;/tt&gt;.&lt;br/&gt;
Consequently is handled as &lt;tt&gt;GenericType&amp;lt;Row&amp;gt;&lt;/tt&gt; unless a &lt;tt&gt;RowTypeInfo&lt;/tt&gt; is explicitly specified.&lt;/p&gt;

&lt;p&gt;This can lead to unexpected behavior when converting a &lt;tt&gt;DataSet&amp;lt;Row&amp;gt;&lt;/tt&gt; or &lt;tt&gt;DataStream&amp;lt;Row&amp;gt;&lt;/tt&gt; into a Table. If the data set or data stream has a &lt;tt&gt;GenericType&amp;lt;Row&amp;gt;&lt;/tt&gt;, the rows are treated as atomic type and converted into a single field.&lt;/p&gt;

&lt;p&gt;I think we should reject input types of &lt;tt&gt;GenericType&amp;lt;Row&amp;gt;&lt;/tt&gt; when converting data sets and data streams and request a proper &lt;tt&gt;RowTypeInfo&lt;/tt&gt;. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13056242">FLINK-6059</key>
            <summary>Reject DataSet&lt;Row&gt; and DataStream&lt;Row&gt; without RowTypeInformation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fhueske">Fabian Hueske</assignee>
                                    <reporter username="fhueske">Fabian Hueske</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Mar 2017 10:15:06 +0000</created>
                <updated>Fri, 28 Apr 2017 23:42:52 +0000</updated>
                            <resolved>Fri, 28 Apr 2017 23:42:52 +0000</resolved>
                                    <version>1.2.0</version>
                    <version>1.3.0</version>
                                    <fixVersion>1.2.2</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15926053" author="githubbot" created="Wed, 15 Mar 2017 12:29:48 +0000"  >&lt;p&gt;GitHub user fhueske opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3546&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3546&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6059&quot; title=&quot;Reject DataSet&amp;lt;Row&amp;gt; and DataStream&amp;lt;Row&amp;gt; without RowTypeInformation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6059&quot;&gt;&lt;del&gt;FLINK-6059&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reject GenericType&amp;lt;Row&amp;gt; when converting DataSet or DataStream to Table&lt;/p&gt;

&lt;p&gt;    When converting a `DataSet&amp;lt;Row&amp;gt;` or `DataStream&amp;lt;Row&amp;gt;` into a `Table` which has `GenericTypeInfo&amp;lt;Row&amp;gt;` type, the row is treated as atomic type. This is always a non-expected and confusing behavior.&lt;/p&gt;

&lt;p&gt;    With this change converting a `DataSet&amp;lt;Row&amp;gt;` or `DataStream&amp;lt;Row&amp;gt;` with `GenericTypeInfo&amp;lt;Row&amp;gt;` into a `Table` fails. Instead we ask for a `DataSet&amp;lt;Row&amp;gt;` or `DataStream&amp;lt;Row&amp;gt;` with proper `RowTypeInfo`.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/fhueske/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fhueske/flink&lt;/a&gt; tableNoGenericRow&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3546.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3546.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3546&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0064a9ed1270d1e139ff9a6b22df5cc95450ce59&lt;br/&gt;
Author: Fabian Hueske &amp;lt;fhueske@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-03-15T12:24:42Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6059&quot; title=&quot;Reject DataSet&amp;lt;Row&amp;gt; and DataStream&amp;lt;Row&amp;gt; without RowTypeInformation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6059&quot;&gt;&lt;del&gt;FLINK-6059&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reject GenericType&amp;lt;Row&amp;gt; when converting DataSet or DataStream to Table.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15926501" author="githubbot" created="Wed, 15 Mar 2017 16:28:09 +0000"  >&lt;p&gt;Github user sunjincheng121 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3546#discussion_r106214186&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3546#discussion_r106214186&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/api/TableEnvironment.scala &amp;#8212;&lt;br/&gt;
    @@ -498,6 +505,10 @@ abstract class TableEnvironment(val config: TableConfig) {&lt;br/&gt;
         TableEnvironment.validateType(inputType)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Can we do the `GenericTypeInfo` type check in `TableEnvironment.validateType(inputType)` method? If we do so, we can remove the duplicate check. What do you think?&lt;br/&gt;
    Best,&lt;br/&gt;
    SunJincheng&lt;/p&gt;</comment>
                            <comment id="15986934" author="githubbot" created="Thu, 27 Apr 2017 16:19:27 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3546#discussion_r113740954&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3546#discussion_r113740954&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/api/TableEnvironment.scala &amp;#8212;&lt;br/&gt;
    @@ -498,6 +505,10 @@ abstract class TableEnvironment(val config: TableConfig) {&lt;br/&gt;
         TableEnvironment.validateType(inputType)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    The `validateType()` method is also used to check the output type, i.e., the type of a DataSet or DataStream which is created from a Table. I think we should allow `GenericType&amp;lt;Row&amp;gt;` in that case.&lt;br/&gt;
    Hence, I would keep the `validateType()` method as it is.&lt;/p&gt;</comment>
                            <comment id="15986974" author="githubbot" created="Thu, 27 Apr 2017 16:37:11 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3546&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3546&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @sunjincheng121.&lt;br/&gt;
    I will merge this fix tomorrow.&lt;/p&gt;

&lt;p&gt;    Cheers, Fabian&lt;/p&gt;</comment>
                            <comment id="15989564" author="githubbot" created="Fri, 28 Apr 2017 23:07:55 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3546&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3546&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15989589" author="fhueske" created="Fri, 28 Apr 2017 23:42:52 +0000"  >&lt;p&gt;Fixed for 1.3.0 with c8eb55f17d64722bb600c1083a478ab99e53f4ec&lt;br/&gt;
Fixed for 1.2.2 with fdb3f65f2d6595b88edae849ae6c848e5bbfaa2d&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 29 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3canb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>