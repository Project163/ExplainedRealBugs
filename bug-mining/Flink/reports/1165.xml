<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:24:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4486] JobManager not fully running when yarn-session.sh finishes</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4486</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I start a detached yarn-session.sh.&lt;br/&gt;
If the Yarn cluster is very busy then the yarn-session.sh script completes BEFORE all the task slots have been allocated. As a consequence I sometimes have a jobmanager without any task slots. Over time these task slots are assigned by the Yarn cluster but these are not available for the first job that is submitted.&lt;/p&gt;

&lt;p&gt;As a consequence I have found that the first few tasks in my job fail with this error &quot;Not enough free slots available to run the job.&quot;.&lt;/p&gt;

&lt;p&gt;I think the desirable behavior is that yarn-session waits until the jobmanager is fully functional and capable of actually running the jobs.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.flink.runtime.jobmanager.scheduler.NoResourceAvailableException: Not enough free slots available to run the job. You can decrease the &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; parallelism or increase the number of slots per TaskManager in the configuration. Task to schedule: &amp;lt; Attempt #0 (CHAIN DataSource (Read prefix &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;) -&amp;gt; Map (Map prefix &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;) (8/10)) @ (unassigned) - [SCHEDULED] &amp;gt; with groupID &amp;lt; cd6c37df290564e603da908a8783a9bf &amp;gt; in sharing group &amp;lt; SlotSharingGroup [c0b6eff6ce93967182cdb6dfeae9359b, 8b2c3b39f3a55adf9f123243ab03c9c1, 55fb94dd8a3e5f59a10dbbf5c4925db4, 433b2e4a05a5e685b48c517249755a89, 8c74690c35454064e4815ac3756cdca2, 4b4fbd24f3483030fd852b38ff2249c1, 5e36a56ea4dece18fe5ba04352d90dc8, cd6c37df290564e603da908a8783a9bf, 64eafa845087bee70735f7250df9994f, 706a5d6fe48ae57724a00a9fce5dae8a, 7bee4297e0e839e53a153dfcbcca8624, 21b58f7d408d237540ae7b4734f81a1d, b429b1ff338d9d73677f42717cfc0dbc, cc7491db641f557c6aa8c749ebc2de62, f61cbf0ae00331f67aaf60ace78b05aa, 606f02ea9e0f4ad57f0cc0232dd70842] &amp;gt;. Resources available to scheduler: &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of instances=1, total number of slots=7, available slots=0
	at org.apache.flink.runtime.jobmanager.scheduler.Scheduler.scheduleTask(Scheduler.java:256)
	at org.apache.flink.runtime.jobmanager.scheduler.Scheduler.scheduleImmediately(Scheduler.java:131)
	at org.apache.flink.runtime.executiongraph.Execution.scheduleForExecution(Execution.java:306)
	at org.apache.flink.runtime.executiongraph.ExecutionVertex.scheduleForExecution(ExecutionVertex.java:454)
	at org.apache.flink.runtime.executiongraph.ExecutionJobVertex.scheduleAll(ExecutionJobVertex.java:326)
	at org.apache.flink.runtime.executiongraph.ExecutionGraph.scheduleForExecution(ExecutionGraph.java:734)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$org$apache$flink$runtime$jobmanager$JobManager$$submitJob$1.apply$mcV$sp(JobManager.scala:1332)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$org$apache$flink$runtime$jobmanager$JobManager$$submitJob$1.apply(JobManager.scala:1291)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$org$apache$flink$runtime$jobmanager$JobManager$$submitJob$1.apply(JobManager.scala:1291)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)
	at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:41)
	at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(AbstractDispatcher.scala:401)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.pollAndExecAll(ForkJoinPool.java:1253)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1346)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13000013">FLINK-4486</key>
            <summary>JobManager not fully running when yarn-session.sh finishes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="nielsbasjes">Niels Basjes</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Aug 2016 13:31:12 +0000</created>
                <updated>Wed, 2 Oct 2019 17:44:17 +0000</updated>
                            <resolved>Mon, 29 Aug 2016 16:21:05 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.2</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15438661" author="aljoscha" created="Fri, 26 Aug 2016 08:37:53 +0000"  >&lt;p&gt;Or that a &lt;tt&gt;JobManager&lt;/tt&gt; takes the job and blocks and waits until it gets the required resources from Yarn. I think this is already being addressed by the work on FLIP-6, if I&apos;m not mistaken.&lt;/p&gt;

&lt;p&gt;Could &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann@apache.org&quot;&gt;trohrmann@apache.org&lt;/a&gt; chime in on this?&lt;/p&gt;</comment>
                            <comment id="15438685" author="mxm" created="Fri, 26 Aug 2016 09:00:25 +0000"  >&lt;p&gt;The &lt;tt&gt;YarnClusterClient&lt;/tt&gt; delays checking for the startup of the cluster until actual client-side operations are made (e.g job submission). The yarn-session checks for cluster startup when you execute it without the detached &lt;tt&gt;-d&lt;/tt&gt; flag but not in detached mode because there is no cluster interaction afterwards. We should fix that.&lt;/p&gt;</comment>
                            <comment id="15438759" author="githubbot" created="Fri, 26 Aug 2016 10:17:09 +0000"  >&lt;p&gt;GitHub user mxm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2423&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2423&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4486&quot; title=&quot;JobManager not fully running when yarn-session.sh finishes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4486&quot;&gt;&lt;del&gt;FLINK-4486&lt;/del&gt;&lt;/a&gt; detached YarnSession: wait until cluster startup is complete&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mxm/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mxm/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4486&quot; title=&quot;JobManager not fully running when yarn-session.sh finishes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4486&quot;&gt;&lt;del&gt;FLINK-4486&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2423.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2423.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2423&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2ec30c2c25204ff04270db9d072085f85909c8be&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-08-26T10:06:36Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4486&quot; title=&quot;JobManager not fully running when yarn-session.sh finishes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4486&quot;&gt;&lt;del&gt;FLINK-4486&lt;/del&gt;&lt;/a&gt; detached YarnSession: wait until cluster startup is complete&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15445414" author="till.rohrmann" created="Mon, 29 Aug 2016 09:51:19 +0000"  >&lt;p&gt;I think that&apos;s the right way to fix the problem right now. With Flip-6 it will probably no longer be necessary since the &lt;tt&gt;JobManager&lt;/tt&gt; will be able to allocate slots and wait for their allocation which is currently not the case. &lt;/p&gt;</comment>
                            <comment id="15446322" author="githubbot" created="Mon, 29 Aug 2016 16:17:48 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2423&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2423&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15446331" author="mxm" created="Mon, 29 Aug 2016 16:21:05 +0000"  >&lt;p&gt;master: ab1df63c3fd419c23631f3b55b506e6fdf3cb72f&lt;br/&gt;
release-1.1: 4cdeb11854956ac6cf1189d7cfa43628fb3be328&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32s9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>