<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:08:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-25427] SavepointITCase.testTriggerSavepointAndResumeWithNoClaim fails on AZP</title>
                <link>https://issues.apache.org/jira/browse/FLINK-25427</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The test &lt;tt&gt;SavepointITCase.testTriggerSavepointAndResumeWithNoClaim&lt;/tt&gt; fails on AZP with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2021-12-23T03:10:26.4240179Z Dec 23 03:10:26 [ERROR] org.apache.flink.test.checkpointing.SavepointITCase.testTriggerSavepointAndResumeWithNoClaim  Time elapsed: 62.289 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
2021-12-23T03:10:26.4240998Z Dec 23 03:10:26 java.util.concurrent.TimeoutException: Condition was not met in given timeout.
2021-12-23T03:10:26.4241716Z Dec 23 03:10:26 	at org.apache.flink.runtime.testutils.CommonTestUtils.waitUntilCondition(CommonTestUtils.java:166)
2021-12-23T03:10:26.4242643Z Dec 23 03:10:26 	at org.apache.flink.runtime.testutils.CommonTestUtils.waitUntilCondition(CommonTestUtils.java:144)
2021-12-23T03:10:26.4243295Z Dec 23 03:10:26 	at org.apache.flink.runtime.testutils.CommonTestUtils.waitUntilCondition(CommonTestUtils.java:136)
2021-12-23T03:10:26.4244433Z Dec 23 03:10:26 	at org.apache.flink.runtime.testutils.CommonTestUtils.waitForAllTaskRunning(CommonTestUtils.java:210)
2021-12-23T03:10:26.4245166Z Dec 23 03:10:26 	at org.apache.flink.runtime.testutils.CommonTestUtils.waitForAllTaskRunning(CommonTestUtils.java:184)
2021-12-23T03:10:26.4245830Z Dec 23 03:10:26 	at org.apache.flink.runtime.testutils.CommonTestUtils.waitForAllTaskRunning(CommonTestUtils.java:172)
2021-12-23T03:10:26.4246870Z Dec 23 03:10:26 	at org.apache.flink.test.checkpointing.SavepointITCase.testTriggerSavepointAndResumeWithNoClaim(SavepointITCase.java:446)
2021-12-23T03:10:26.4247813Z Dec 23 03:10:26 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2021-12-23T03:10:26.4248808Z Dec 23 03:10:26 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2021-12-23T03:10:26.4249426Z Dec 23 03:10:26 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2021-12-23T03:10:26.4250192Z Dec 23 03:10:26 	at java.lang.reflect.Method.invoke(Method.java:498)
2021-12-23T03:10:26.4251196Z Dec 23 03:10:26 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
2021-12-23T03:10:26.4252160Z Dec 23 03:10:26 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
2021-12-23T03:10:26.4252888Z Dec 23 03:10:26 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
2021-12-23T03:10:26.4253547Z Dec 23 03:10:26 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
2021-12-23T03:10:26.4254142Z Dec 23 03:10:26 	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
2021-12-23T03:10:26.4254932Z Dec 23 03:10:26 	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
2021-12-23T03:10:26.4255513Z Dec 23 03:10:26 	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
2021-12-23T03:10:26.4256091Z Dec 23 03:10:26 	at org.apache.flink.util.TestNameProvider$1.evaluate(TestNameProvider.java:45)
2021-12-23T03:10:26.4256636Z Dec 23 03:10:26 	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:61)
2021-12-23T03:10:26.4257165Z Dec 23 03:10:26 	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
2021-12-23T03:10:26.4257744Z Dec 23 03:10:26 	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
2021-12-23T03:10:26.4258312Z Dec 23 03:10:26 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
2021-12-23T03:10:26.4258884Z Dec 23 03:10:26 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
2021-12-23T03:10:26.4259488Z Dec 23 03:10:26 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
2021-12-23T03:10:26.4260049Z Dec 23 03:10:26 	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
2021-12-23T03:10:26.4260579Z Dec 23 03:10:26 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
2021-12-23T03:10:26.4261108Z Dec 23 03:10:26 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
2021-12-23T03:10:26.4261648Z Dec 23 03:10:26 	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
2021-12-23T03:10:26.4262183Z Dec 23 03:10:26 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
2021-12-23T03:10:26.4262794Z Dec 23 03:10:26 	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
2021-12-23T03:10:26.4263312Z Dec 23 03:10:26 	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
2021-12-23T03:10:26.4263813Z Dec 23 03:10:26 	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
2021-12-23T03:10:26.4264377Z Dec 23 03:10:26 	at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
2021-12-23T03:10:26.4264909Z Dec 23 03:10:26 	at org.junit.vintage.engine.execution.RunnerExecutor.execute(RunnerExecutor.java:42)
2021-12-23T03:10:26.4265529Z Dec 23 03:10:26 	at org.junit.vintage.engine.VintageTestEngine.executeAllChildren(VintageTestEngine.java:80)
2021-12-23T03:10:26.4266171Z Dec 23 03:10:26 	at org.junit.vintage.engine.VintageTestEngine.execute(VintageTestEngine.java:72)
2021-12-23T03:10:26.4266815Z Dec 23 03:10:26 	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
2021-12-23T03:10:26.4267505Z Dec 23 03:10:26 	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
2021-12-23T03:10:26.4268212Z Dec 23 03:10:26 	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
2021-12-23T03:10:26.4268957Z Dec 23 03:10:26 	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
2021-12-23T03:10:26.4269809Z Dec 23 03:10:26 	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
2021-12-23T03:10:26.4270462Z Dec 23 03:10:26 	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
2021-12-23T03:10:26.4271133Z Dec 23 03:10:26 	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
2021-12-23T03:10:26.4271799Z Dec 23 03:10:26 	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
2021-12-23T03:10:26.4272578Z Dec 23 03:10:26 	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
2021-12-23T03:10:26.4273257Z Dec 23 03:10:26 	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
2021-12-23T03:10:26.4273953Z Dec 23 03:10:26 	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
2021-12-23T03:10:26.4274712Z Dec 23 03:10:26 	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
2021-12-23T03:10:26.4275360Z Dec 23 03:10:26 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
2021-12-23T03:10:26.4275973Z Dec 23 03:10:26 	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
2021-12-23T03:10:26.4276552Z Dec 23 03:10:26 	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
2021-12-23T03:10:26.4277106Z Dec 23 03:10:26 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28502&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=9810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28502&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=9810&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13419164">FLINK-25427</key>
            <summary>SavepointITCase.testTriggerSavepointAndResumeWithNoClaim fails on AZP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dmvk">David Mor&#225;vek</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 23 Dec 2021 08:58:20 +0000</created>
                <updated>Fri, 21 Jan 2022 11:07:18 +0000</updated>
                            <resolved>Thu, 20 Jan 2022 13:07:10 +0000</resolved>
                                    <version>1.15.0</version>
                                    <fixVersion>1.15.0</fixVersion>
                                    <component>Runtime / Checkpointing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17464373" author="till.rohrmann" created="Thu, 23 Dec 2021 08:58:32 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17465133" author="gaoyunhaii" created="Sat, 25 Dec 2021 03:35:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28553&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=9806&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28553&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=9806&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17465545" author="gaoyunhaii" created="Mon, 27 Dec 2021 06:37:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28590&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=10205&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28590&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=10205&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17465558" author="gaoyunhaii" created="Mon, 27 Dec 2021 07:02:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28594&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=9806&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28594&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=9806&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17465609" author="till.rohrmann" created="Mon, 27 Dec 2021 09:19:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28603&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28603&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17465963" author="gaoyunhaii" created="Tue, 28 Dec 2021 06:28:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28627&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=9806&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28627&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=9806&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17466017" author="till.rohrmann" created="Tue, 28 Dec 2021 08:55:44 +0000"  >&lt;p&gt;Disabled this test in 1.15.0 via fe3dfbca7ac8bada810726f1568e69fea855b039. Bumping the priority of this ticker to blocker to fix and re-enable this test before the 1.15 release.&lt;/p&gt;</comment>
                            <comment id="17467284" author="akalashnikov" created="Fri, 31 Dec 2021 16:50:46 +0000"  >&lt;p&gt;I actually think that it is the same problem as &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-25426&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-25426&lt;/a&gt;. It started to fail from one commit. It always fails when `UnalignedCheckpointRescaleITCase` fails. When I try to reproduce it locally I see  the same exceptions as for `UnalignedCheckpointRescaleITCase`.&lt;br/&gt;
Unfortunatelly, I can not be fully sure about it since the original problem  `Condition was not met in given timeout.`, doesn&apos;t contain anything in logs. This test just stucks during allocation slot(`Allocated slot for ..`) which on one hand points to the same problem as in `UnalignedCheckpointRescaleITCase`(the problem with resources managment) but on another hand I don&apos;t see explicit OOM exception there(we have problem with logging somewhere?).&lt;br/&gt;
Since the fix for `UnalignedCheckpointRescaleITCase` is almost merged. If nobody mind I can enable `SavepointITCase` there and we will see it helps or not.&lt;/p&gt;</comment>
                            <comment id="17467871" author="till.rohrmann" created="Mon, 3 Jan 2022 09:34:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akalashnikov&quot; class=&quot;user-hover&quot; rel=&quot;akalashnikov&quot;&gt;akalashnikov&lt;/a&gt; if you think that the test failure is related to this change. Then let&apos;s reenable the test after &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-25426&quot; title=&quot;UnalignedCheckpointRescaleITCase.shouldRescaleUnalignedCheckpoint fails on AZP because it cannot allocate enough network buffers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-25426&quot;&gt;&lt;del&gt;FLINK-25426&lt;/del&gt;&lt;/a&gt; has been merged and let&apos;s monitor whether this test has been stabilized by the fix.&lt;/p&gt;</comment>
                            <comment id="17468565" author="till.rohrmann" created="Tue, 4 Jan 2022 10:42:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; re-enabled the test via d6f12989eda1ceb501ddd831a9c1b3098f6a1031. Unfortunately, the test is still unstable: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28883&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=10289&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28883&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=10289&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17468579" author="akalashnikov" created="Tue, 4 Jan 2022 11:22:30 +0000"  >&lt;p&gt;The commit(&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-25085&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-25085&lt;/a&gt;) which was suspected to be the reason for this failure was reverted. But I see that this test continues to fail(&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28883&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=10289&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28883&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=10289&lt;/a&gt;). &lt;br/&gt;
Now I see that this test started to fail a little earlier than &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-25085&quot; title=&quot;Add a scheduled thread pool in Endpoint and close it when the endpoint is stopped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-25085&quot;&gt;&lt;del&gt;FLINK-25085&lt;/del&gt;&lt;/a&gt; was committed so the problem is deeper than I thought. I suppose this is the first fail (&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28362&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=9806&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=28362&amp;amp;view=logs&amp;amp;j=8fd9202e-fd17-5b26-353c-ac1ff76c8f28&amp;amp;t=ea7cf968-e585-52cb-e0fc-f48de023a7ca&amp;amp;l=9806&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Sorry for disturbing but can anybody disable this test again - &lt;a href=&quot;https://github.com/apache/flink/pull/18263&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/18263&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17468602" author="till.rohrmann" created="Tue, 4 Jan 2022 12:16:06 +0000"  >&lt;p&gt;Test has been disabled again via 7b43fd7cd0b36f203efda2a6f006096a59ec689c.&lt;/p&gt;</comment>
                            <comment id="17472307" author="till.rohrmann" created="Mon, 10 Jan 2022 21:11:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akalashnikov&quot; class=&quot;user-hover&quot; rel=&quot;akalashnikov&quot;&gt;akalashnikov&lt;/a&gt; do you have an update for this ticket?&lt;/p&gt;</comment>
                            <comment id="17472511" author="akalashnikov" created="Tue, 11 Jan 2022 07:37:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;, yes, I have a little progress. I successfully isolated `testTriggerSavepointAndResumeWithNoClaim` and right now, I at least have the explicit exception:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;06:54:23,926 [flink-akka.actor.default-dispatcher-17] WARN  org.apache.flink.runtime.resourcemanager.slotmanager.DeclarativeSlotManager [] - Could not fulfill resource requirements of job 0c6696a94a9c5efb3fa74a58f23cbb08. Free slots: 0
06:54:24,627 [flink-akka.actor.default-dispatcher-18] INFO  org.apache.flink.runtime.scheduler.adaptive.AdaptiveScheduler [] - Failed to go from CreatingExecutionGraph to Executing because the ExecutionGraph cre
ation failed.
org.apache.flink.runtime.jobmanager.scheduler.NoResourceAvailableException: Not enough resources available for scheduling.
        at org.apache.flink.runtime.scheduler.adaptive.AdaptiveScheduler.lambda$determineParallelism$21(AdaptiveScheduler.java:743) ~[flink-runtime-1.15-SNAPSHOT.jar:1.15-SNAPSHOT]
        at java.util.Optional.orElseThrow(Optional.java:290) ~[?:1.8.0_292]
        at org.apache.flink.runtime.scheduler.adaptive.AdaptiveScheduler.determineParallelism(AdaptiveScheduler.java:741) ~[flink-runtime-1.15-SNAPSHOT.jar:1.15-SNAPSHOT]
        at org.apache.flink.runtime.scheduler.adaptive.AdaptiveScheduler.createExecutionGraphWithAvailableResourcesAsync(AdaptiveScheduler.java:915) ~[flink-runtime-1.15-SNAPSHOT.jar:1.15-SNAPSHOT]
        at org.apache.flink.runtime.scheduler.adaptive.AdaptiveScheduler.goToCreatingExecutionGraph(AdaptiveScheduler.java:902) ~[flink-runtime-1.15-SNAPSHOT.jar:1.15-SNAPSHOT]
        at org.apache.flink.runtime.scheduler.adaptive.WaitingForResources.createExecutionGraphWithAvailableResources(WaitingForResources.java:178) ~[flink-runtime-1.15-SNAPSHOT.jar:1.15-SNAPSHOT]
        at org.apache.flink.runtime.scheduler.adaptive.WaitingForResources.resourceTimeout(WaitingForResources.java:174) ~[flink-runtime-1.15-SNAPSHOT.jar:1.15-SNAPSHOT]
        at org.apache.flink.runtime.scheduler.adaptive.AdaptiveScheduler.runIfState(AdaptiveScheduler.java:1106) ~[flink-runtime-1.15-SNAPSHOT.jar:1.15-SNAPSHOT]
        at org.apache.flink.runtime.scheduler.adaptive.AdaptiveScheduler.lambda$runIfState$26(AdaptiveScheduler.java:1121) ~[flink-runtime-1.15-SNAPSHOT.jar:1.15-SNAPSHOT]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_292]
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_292]
        at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.lambda$handleRunAsync$4(AkkaRpcActor.java:455) ~[flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at org.apache.flink.runtime.concurrent.akka.ClassLoadingUtils.runWithContextClassLoader(ClassLoadingUtils.java:68) ~[flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRunAsync(AkkaRpcActor.java:455) ~[flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcMessage(AkkaRpcActor.java:213) ~[flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at org.apache.flink.runtime.rpc.akka.FencedAkkaRpcActor.handleRpcMessage(FencedAkkaRpcActor.java:78) ~[flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleMessage(AkkaRpcActor.java:163) ~[flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:24) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:20) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at scala.PartialFunction.applyOrElse(PartialFunction.scala:123) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at scala.PartialFunction.applyOrElse$(PartialFunction.scala:122) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at akka.japi.pf.UnitCaseStatement.applyOrElse(CaseStatements.scala:20) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:172) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:172) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at akka.actor.Actor.aroundReceive(Actor.scala:537) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at akka.actor.Actor.aroundReceive$(Actor.scala:535) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at akka.actor.AbstractActor.aroundReceive(AbstractActor.scala:220) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at akka.actor.ActorCell.receiveMessage(ActorCell.scala:580) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at akka.actor.ActorCell.invoke(ActorCell.scala:548) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:270) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at akka.dispatch.Mailbox.run(Mailbox.scala:231) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at akka.dispatch.Mailbox.exec(Mailbox.scala:243) [flink-rpc-akka_0433dc93-b31b-44d6-8efc-777bd9bd7aa2.jar:1.15-SNAPSHOT]
        at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289) [?:1.8.0_292]
        at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056) [?:1.8.0_292]
        at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692) [?:1.8.0_292]
        at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:175) [?:1.8.0_292]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It happens when we try to submit the second job to the same minicluster after the canceling the first one. As you can see `Free slots: 0`. So right now, I am trying to figure out why it happens.&lt;/p&gt;</comment>
                            <comment id="17472584" author="till.rohrmann" created="Tue, 11 Jan 2022 09:12:56 +0000"  >&lt;p&gt;What are the TMs doing that should provide the slots?&lt;/p&gt;</comment>
                            <comment id="17472585" author="gaoyunhaii" created="Tue, 11 Jan 2022 09:14:03 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmvk&quot; class=&quot;user-hover&quot; rel=&quot;dmvk&quot;&gt;dmvk&lt;/a&gt; could you or someone could also have a look~? Very thanks!&lt;/p&gt;</comment>
                            <comment id="17472597" author="pnowojski" created="Tue, 11 Jan 2022 09:23:58 +0000"  >&lt;blockquote&gt;
&lt;p&gt;What are the TMs doing that should provide the slots?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akalashnikov&quot; class=&quot;user-hover&quot; rel=&quot;akalashnikov&quot;&gt;akalashnikov&lt;/a&gt; has added some extra code to collect thread dumps and AFAIK we are waiting for this issue to happen again (on a test branch?) to try to answer this.&lt;/p&gt;</comment>
                            <comment id="17472639" author="davidmoravek" created="Tue, 11 Jan 2022 10:28:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt; I&apos;ll try to take a look at this later today, at least to provide Anton with some more context&lt;/p&gt;</comment>
                            <comment id="17472659" author="akalashnikov" created="Tue, 11 Jan 2022 11:04:19 +0000"  >&lt;p&gt;Sorry, It was stupid of me but I thought for some reason that this test uses AdaptiveScheduler by default which is not true. So, unfortunately, I have tried to debug the wrong configuration locally. But in fact, if you run this test with AdaptiveScheduler, the test will fail even locally. I think it should help with debugging.&lt;br/&gt;
I am not an expert with StreamGraph so I indeed need to help here. But right now I see the following. The test looks like that:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;streamEnvironment = ...
JobGraph jobGraph = env.getStreamGraph().getJobGraph();
...
jobGraph.setJobID(jobID1);
clusterClient.submitJob(jobGraph).get();
....
clusterClient.cancel(jobGraph).get();
...
jobGraph.setJobID(jobID2);
clusterClient.submitJob(jobGraph).get();
// submitting job will fail because zero slots available
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I honestly don&apos;t know how it is legal to use one jobGraph with a different jobID(I don&apos;t see any restrictions about that). But if we change our logic in such a way it will fix the test:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;streamEnvironment = ...
StreamGraph streamGraph = env.getStreamGraph(); // This is important
JobGraph jobGraph = streamGraph.getJobGraph();
...
jobGraph.setJobID(jobID1);
clusterClient.submitJob(jobGraph).get();
....
clusterClient.cancel(jobGraph).get();
...
jobGraph = streamGraph.getJobGraph(); // get new job graph again
jobGraph.setJobID(jobID2);
clusterClient.submitJob(jobGraph).get();
// now it will work
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So I suppose the problem with the mutability of JobGraph. I can continue with an investigation of the certain reason or perhaps, somebody already understands what is wrong going on here.&lt;/p&gt;</comment>
                            <comment id="17479351" author="dawidwys" created="Thu, 20 Jan 2022 13:07:10 +0000"  >&lt;p&gt;Fixed in 00856d068931a5988347b9bdbdf11bc700258fe1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13423957">FLINK-25750</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13419161">FLINK-25426</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xzj4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>