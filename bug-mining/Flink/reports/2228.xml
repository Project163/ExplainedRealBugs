<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:32:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8425] SpilledSubpartitionView not protected against concurrent release calls</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8425</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;It seems like &lt;tt&gt;SpilledSubpartitionView&lt;/tt&gt; is not protected against concurrently calling &lt;tt&gt;releaseAllResources&lt;/tt&gt; as the other &lt;tt&gt;ResultSubpartitionView&lt;/tt&gt; implementations. These may happen due to failures, e.g. network channels breaking, and will probably only result in some unexpected exceptions being thrown, e.g. from reading from a closed file reader.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13130613">FLINK-8425</key>
            <summary>SpilledSubpartitionView not protected against concurrent release calls</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nkruber">Nico Kruber</assignee>
                                    <reporter username="nkruber">Nico Kruber</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Jan 2018 19:15:53 +0000</created>
                <updated>Tue, 20 Feb 2018 10:13:37 +0000</updated>
                            <resolved>Tue, 20 Feb 2018 10:13:37 +0000</resolved>
                                    <version>1.0.1</version>
                    <version>1.0.2</version>
                    <version>1.0.3</version>
                    <version>1.1.0</version>
                    <version>1.1.1</version>
                    <version>1.1.2</version>
                    <version>1.1.3</version>
                    <version>1.1.4</version>
                    <version>1.2.0</version>
                    <version>1.2.1</version>
                    <version>1.3.0</version>
                    <version>1.3.1</version>
                    <version>1.3.2</version>
                    <version>1.4.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>Runtime / Network</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16331165" author="githubbot" created="Thu, 18 Jan 2018 20:35:17 +0000"  >&lt;p&gt;GitHub user NicoK opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5314&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8425&quot; title=&quot;SpilledSubpartitionView not protected against concurrent release calls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8425&quot;&gt;&lt;del&gt;FLINK-8425&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;network&amp;#93;&lt;/span&gt; fix SpilledSubpartitionView not protected against concurrent release calls&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    It seems like `SpilledSubpartitionView` is not protected against concurrently calling `releaseAllResources()` as the other `ResultSubpartitionView` implementations. These may happen due to failures, e.g. network channels breaking, and will probably only result in some unexpected exceptions being thrown, e.g. from reading from a closed file reader.&lt;/p&gt;

&lt;p&gt;    Please note that this PR is based on #4552 which also touches this code area.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;apply simple synchronization in `SpilledSubpartitionView`&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This change is a trivial rework / code cleanup without any test coverage.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The serializers: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): *&lt;b&gt;no&lt;/b&gt;* (per buffer, but in spilled cases)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? *&lt;b&gt;not applicable&lt;/b&gt;*&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/NicoK/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/NicoK/flink&lt;/a&gt; flink-8425&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5314.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5314.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5314&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c6b1f913b01db5acdd1364063b3998ccecb8317d&lt;br/&gt;
Author: Zhijiang &amp;lt;wangzhijiang999@...&amp;gt;&lt;br/&gt;
Date:   2017-09-30T06:36:19Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7456&quot; title=&quot;Implement Netty sender incoming pipeline for credit-based&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7456&quot;&gt;&lt;del&gt;FLINK-7456&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;network&amp;#93;&lt;/span&gt; Implement Netty sender incoming pipeline for credit-based&lt;/p&gt;

&lt;p&gt;commit 7dd59f25a11b98e896c8a514f409e8ebb3127529&lt;br/&gt;
Author: Zhijiang &amp;lt;wangzhijiang999@...&amp;gt;&lt;br/&gt;
Date:   2018-01-18T15:30:34Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7456&quot; title=&quot;Implement Netty sender incoming pipeline for credit-based&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7456&quot;&gt;&lt;del&gt;FLINK-7456&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;fixup&amp;#93;&lt;/span&gt; Add the related parameters in the document&lt;/p&gt;

&lt;p&gt;commit 62e16f0f0a52b8f831f4438c6ed99b8aa72c0145&lt;br/&gt;
Author: Nico Kruber &amp;lt;nico@...&amp;gt;&lt;br/&gt;
Date:   2018-01-18T19:54:14Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7456&quot; title=&quot;Implement Netty sender incoming pipeline for credit-based&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7456&quot;&gt;&lt;del&gt;FLINK-7456&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;network&amp;#93;&lt;/span&gt; revert integrating initialCredit into unannouncedCredit&lt;/p&gt;

&lt;p&gt;    A PartitionRequest could actually be sent multiple times and each time it must&lt;br/&gt;
    contain the same credit (only one of those messages will actually be used).&lt;/p&gt;

&lt;p&gt;commit 7bdcae31953339c75927b6c1292d164da52915f1&lt;br/&gt;
Author: Zhijiang &amp;lt;wangzhijiang999@...&amp;gt;&lt;br/&gt;
Date:   2018-01-17T06:15:04Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; Add the switch for keeping both the old mode and the new credit-based mode&lt;/p&gt;

&lt;p&gt;commit 2bd12a1d3c6cf51778dec0b043fa8b06fcaf06d8&lt;br/&gt;
Author: Nico Kruber &amp;lt;nico@...&amp;gt;&lt;br/&gt;
Date:   2018-01-18T16:24:59Z&lt;/p&gt;

&lt;p&gt;    fixup! &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; Add the switch for keeping both the old mode and the new credit-based mode&lt;/p&gt;

&lt;p&gt;commit 321221d6b00d72100088a64c57b121e9571d5dc7&lt;br/&gt;
Author: Nico Kruber &amp;lt;nico@...&amp;gt;&lt;br/&gt;
Date:   2018-01-18T20:27:46Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8425&quot; title=&quot;SpilledSubpartitionView not protected against concurrent release calls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8425&quot;&gt;&lt;del&gt;FLINK-8425&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;network&amp;#93;&lt;/span&gt; fix SpilledSubpartitionView not protected against concurrent release calls&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16332553" author="githubbot" created="Fri, 19 Jan 2018 17:07:54 +0000"  >&lt;p&gt;Github user StefanRRichter commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5314&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM &#128077; &lt;/p&gt;</comment>
                            <comment id="16366949" author="githubbot" created="Fri, 16 Feb 2018 12:57:32 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5314&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16369887" author="nicok" created="Tue, 20 Feb 2018 10:13:37 +0000"  >&lt;p&gt;Fixed on master in&lt;/p&gt;

&lt;p&gt;f957fd959c27d9f75f4b506b69122c9c926f235b&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ov9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>