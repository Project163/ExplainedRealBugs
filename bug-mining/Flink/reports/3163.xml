<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:40:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-13504] NoSuchFieldError when executing DDL via tEnv.sqlUpdate in application project</title>
                <link>https://issues.apache.org/jira/browse/FLINK-13504</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When we create a quickstart project to try flink 1.9/1.10, a NoSuchFieldError is thrown.&lt;/p&gt;

&lt;p&gt;The dependencies (the flink 1.0 is installed locally for commit 70fe6aa747ad021bbb8dd8cdc0beecc863f010be, flink 1.9 has the same problem):&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.flink&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;flink-table-api-java&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.10-SNAPSHOT&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.flink&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;flink-table-planner_2.11&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.10-SNAPSHOT&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The program code:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; com.github.wuchong;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.table.api.EnvironmentSettings;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.table.api.TableEnvironment;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DDLTest {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        EnvironmentSettings settings = EnvironmentSettings.newInstance().useOldPlanner().inStreamingMode().build();
        TableEnvironment tEnv = TableEnvironment.create(settings);
        tEnv.sqlUpdate(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE TABLE MyTable (\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;    a &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, \n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;    b bigint, \n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;    c varchar \n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;)\n comment &lt;span class=&quot;code-quote&quot;&gt;&apos;table comment&apos;&lt;/span&gt;\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;partitioned by (b)\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;with (\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;    connector = &lt;span class=&quot;code-quote&quot;&gt;&apos;csv&apos;&lt;/span&gt;, \n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;    csv.path = &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/path&apos;&lt;/span&gt;\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;)&quot;&lt;/span&gt;);

    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The exception:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.NoSuchFieldError: names
	at org.apache.flink.sql.parser.ddl.SqlCreateTable.fullTableName(SqlCreateTable.java:326)
	at org.apache.flink.table.sqlexec.SqlToOperationConverter.convertCreateTable(SqlToOperationConverter.java:140)
	at org.apache.flink.table.sqlexec.SqlToOperationConverter.convert(SqlToOperationConverter.java:86)
	at org.apache.flink.table.planner.StreamPlanner.parse(StreamPlanner.scala:115)
	at org.apache.flink.table.api.internal.TableEnvironmentImpl.sqlUpdate(TableEnvironmentImpl.java:335)
	at com.github.wuchong.DDLTest.main(DDLTest.java:29)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="13248017">FLINK-13504</key>
            <summary>NoSuchFieldError when executing DDL via tEnv.sqlUpdate in application project</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dwysakowicz">Dawid Wysakowicz</assignee>
                                    <reporter username="jark">Jark Wu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 31 Jul 2019 06:50:14 +0000</created>
                <updated>Tue, 1 Oct 2019 15:39:06 +0000</updated>
                            <resolved>Fri, 2 Aug 2019 13:35:44 +0000</resolved>
                                                    <fixVersion>1.9.0</fixVersion>
                                    <component>Table SQL / Legacy Planner</component>
                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="16896823" author="jark" created="Wed, 31 Jul 2019 06:51:56 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danny831&quot; class=&quot;user-hover&quot; rel=&quot;danny831&quot;&gt;danny831&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfreyhe&quot; class=&quot;user-hover&quot; rel=&quot;godfreyhe&quot;&gt;godfreyhe&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16896869" author="godfreyhe" created="Wed, 31 Jul 2019 07:46:59 +0000"  >&lt;p&gt;a more simple way to repeat the NoSuchFieldError: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.sql.parser.ddl.SqlCreateTable;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.table.api.EnvironmentSettings;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.table.api.TableEnvironment;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.calcite.sql.SqlIdentifier;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.calcite.sql.SqlNodeList;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.calcite.sql.parser.SqlParserPos;


&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DDLTest {

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
		SqlIdentifier id = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SqlIdentifier(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, SqlParserPos.QUOTED_ZERO);
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(id.names);

		SqlCreateTable createTable = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SqlCreateTable(
				SqlParserPos.QUOTED_ZERO, id, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SqlNodeList(SqlParserPos.QUOTED_ZERO), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
		&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; exception: java.lang.NoSuchFieldError: names
&lt;/span&gt;		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(createTable.fullTableName());
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16896889" author="dawidwys" created="Wed, 31 Jul 2019 08:04:10 +0000"  >&lt;p&gt;I will have a look at it.&lt;/p&gt;</comment>
                            <comment id="16896893" author="1u0" created="Wed, 31 Jul 2019 08:08:55 +0000"  >&lt;p&gt;I have the same issue on my local build.&lt;br/&gt;
I think this is due to problematic shading:&lt;/p&gt;

&lt;p&gt;in the resulting &lt;tt&gt;flink-table*.jar&lt;/tt&gt; s the &lt;tt&gt;org.apache.calcite.sql.SqlIdentifier&lt;/tt&gt; dependency on &lt;tt&gt;com.google.common.collect.ImmutableList&lt;/tt&gt; is shaded (relocated as &lt;tt&gt;org.apache.flink.calcite.shaded.com.google.common.collect.ImmutableList&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;But the code in &lt;tt&gt;org.apache.flink.sql.parser.ddl.SqlCreateTable&lt;/tt&gt; still has old original type: &lt;tt&gt;SqlIdentifier.names:Lcom/google/common/collect/ImmutableList;&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16897899" author="nicholasjiang" created="Thu, 1 Aug 2019 09:12:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;I removed sql package of calcite of table-planner dependency jar and add calcite-core in pom.xml,this question was solved.So I have some suggestion that calcite-core class is unnecessary to include in table-planner dependency jar.&lt;/p&gt;</comment>
                            <comment id="16898893" author="dawidwys" created="Fri, 2 Aug 2019 13:35:44 +0000"  >&lt;p&gt;Fixed in:&lt;br/&gt;
master via: 3fa4898a4d1b2d69ef64f48b5a5aefafa2e03974&lt;br/&gt;
1.9: 854d9e19a0e8e2b124418f0dfdc9bf7a2e70830c&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 15 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04whg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>