<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6836] Failing YARNSessionCapacitySchedulerITCase.testTaskManagerFailure</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6836</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The master is currently unstable. The &lt;tt&gt;YARNSessionCapacitySchedulerITCase.testTaskManagerFailure&lt;/tt&gt; fails with Hadoop version &lt;tt&gt;2.6.5&lt;/tt&gt;, &lt;tt&gt;2.7.3&lt;/tt&gt; and &lt;tt&gt;2.8.0&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;See this build &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; for example.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://travis-ci.org/apache/flink/builds/238720589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/builds/238720589&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13076892">FLINK-6836</key>
            <summary>Failing YARNSessionCapacitySchedulerITCase.testTaskManagerFailure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>test-stability</label>
                    </labels>
                <created>Fri, 2 Jun 2017 15:39:55 +0000</created>
                <updated>Wed, 21 Jun 2017 03:53:18 +0000</updated>
                            <resolved>Wed, 21 Jun 2017 03:53:18 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Deployment / YARN</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16036176" author="jark" created="Sun, 4 Jun 2017 05:49:44 +0000"  >&lt;p&gt;And also&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Failed tests: 
 YARNSessionCapacitySchedulerITCase&amp;gt;YarnTestBase.checkClusterEmpty:199 There is at least one application on the cluster is not finished.App application_1496510462161_0006 is in state RUNNING
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16048440" author="githubbot" created="Tue, 13 Jun 2017 21:34:55 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4120&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6836&quot; title=&quot;Failing YARNSessionCapacitySchedulerITCase.testTaskManagerFailure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6836&quot;&gt;&lt;del&gt;FLINK-6836&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Fix YARNSessionCapacitySchedulerITCase to work with Hadoop 2.6.5, 2.7.3 and 2.8.0&lt;/p&gt;

&lt;p&gt;    Due to &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-5899&quot; title=&quot;Reactor is no longer using the dependency reduced pom created by maven-shade-plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-5899&quot;&gt;&lt;del&gt;MNG-5899&lt;/del&gt;&lt;/a&gt;, maven cannot resolve dependency reduced poms in a multi project build. Therefore, flink-yarn-tests pulls in a wrong version of org.apache.httpcomponents.httpclient which does not work with Hadoop&apos;s ServletUtils together. As a solution we have to move the dependency management for the httpclient and httpcore version into the parent pom.xml.&lt;/p&gt;

&lt;p&gt;    Another problem is the version of these libraries which has been recently bumped. In 4.4, httpclient changed its behaviour such that URLEncodedUtils#parse(String, Charset) now throws a NPE if the first parameter is null. In 4.2.6, an empty list was returned instead. Due to this incompatibility, we reverted the change and set the version to its previous value.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixYarnSessionTest&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4120.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4120.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4120&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 37d5577cd12454ee3b5aa39206989bb89faf0cf8&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-06-13T21:26:10Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6836&quot; title=&quot;Failing YARNSessionCapacitySchedulerITCase.testTaskManagerFailure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6836&quot;&gt;&lt;del&gt;FLINK-6836&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Fix YARNSessionCapacitySchedulerITCase to work with Hadoop 2.6.5, 2.7.3 and 2.8.0&lt;/p&gt;

&lt;p&gt;    Due to &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-5899&quot; title=&quot;Reactor is no longer using the dependency reduced pom created by maven-shade-plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-5899&quot;&gt;&lt;del&gt;MNG-5899&lt;/del&gt;&lt;/a&gt;, maven cannot resolve dependency reduced poms in a multi project build. Therefore,&lt;br/&gt;
    flink-yarn-tests pulls in a wrong version of org.apache.httpcomponents.httpclient which does not work&lt;br/&gt;
    with Hadoop&apos;s ServletUtils together. As a solution we have to move the dependency management for the&lt;br/&gt;
    httpclient and httpcore version into the parent pom.xml.&lt;/p&gt;

&lt;p&gt;    Another problem is the version of these libraries which has been recently bumped. In 4.4, httpclient&lt;br/&gt;
    changed its behaviour such that URLEncodedUtils#parse(String, Charset) now throws a NPE if the first&lt;br/&gt;
    parameter is null. In 4.2.6, an empty list was returned instead. Due to this incompatibility, we reverted&lt;br/&gt;
    the change and set the version to its previous value.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16049339" author="githubbot" created="Wed, 14 Jun 2017 16:21:11 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4120&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Rebasing onto the latest master&lt;/p&gt;</comment>
                            <comment id="16050134" author="githubbot" created="Thu, 15 Jun 2017 08:12:01 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4120&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The PR descriptions says that you&apos;re downgrading the dependency versions, but with the second commit your actually upgrading them.&lt;/p&gt;

&lt;p&gt;    Also, couldn&apos;t we move the dependency management into `flink-shaded-hadoop`?&lt;/p&gt;</comment>
                            <comment id="16050238" author="githubbot" created="Thu, 15 Jun 2017 09:43:34 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4120&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I first thought I had to downgrade, because of the aforementioned problem. However, Hadoop 2.8.0 needs at least httpclient `4.5.2`. Luckily, they fixed the problem with the `URLEncodedUtils#parse` method in `4.5.3`. Therefore I bumped the version again.&lt;/p&gt;

&lt;p&gt;    Concerning moving the dependency management to `flink-shaded-hadoop`: I think this is unfortunately not possible since due the immutable reactor builds from maven, `flink-yarn-tests` pulls all dependencies from `flink-shaded-hadoop` and `flink-shaded-yarn-tests`. This also means that depending on the classpath order, we either use the shaded Yarn mini-cluster or not. In the latter case we have to make sure that we are using `httpclient` `4.5.3` which is only the case if we define the dependency management in the parent pom.&lt;/p&gt;

&lt;p&gt;    As a side remark, given this situation with maven, I&apos;m not sure whether we actually need the `flink-shaded-yarn-tests` module.&lt;/p&gt;

&lt;p&gt;    A proper solution would be fixing the problem with the immutable builds. For example, everything works properly if we first install the shaded jars and then build the flink-yarn-tests. Then maven will properly resolve all dependencies. In this case, I think it should be possible to move the dependency management into `flink-shaded-hadoop`.&lt;/p&gt;</comment>
                            <comment id="16050495" author="githubbot" created="Thu, 15 Jun 2017 13:40:11 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4120&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge.&lt;/p&gt;</comment>
                            <comment id="16053579" author="githubbot" created="Mon, 19 Jun 2017 08:00:17 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4120&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @zentol. Failing test case is unrelated and fixed via #4139. Merging this PR.&lt;/p&gt;</comment>
                            <comment id="16056949" author="githubbot" created="Wed, 21 Jun 2017 03:52:35 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4120&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16056954" author="till.rohrmann" created="Wed, 21 Jun 2017 03:53:18 +0000"  >&lt;p&gt;Fixed via 6fdeed326ec7221c51e1f2a8f235ed0b8c58c6cc&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ftdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>