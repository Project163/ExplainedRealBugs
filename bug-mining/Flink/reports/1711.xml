<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6574] Support nested catalogs in ExternalCatalog</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6574</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;We found out that the current external catalog requires three layers of references for any tables. For example, the SQL would look like the following when referencing external table:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT * FROM catalog.db.table
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It would be great to support only two layers of indirections which is closer to many of the deployment on Presto / Hive today.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT * FROM db.table
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13071690">FLINK-6574</key>
            <summary>Support nested catalogs in ExternalCatalog</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wheat9">Haohui Mai</assignee>
                                    <reporter username="wheat9">Haohui Mai</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 May 2017 22:26:35 +0000</created>
                <updated>Thu, 8 Nov 2018 20:05:28 +0000</updated>
                            <resolved>Fri, 19 May 2017 12:54:18 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16011516" author="wheat9" created="Mon, 15 May 2017 23:54:27 +0000"  >&lt;p&gt;Raising the priority to critical as it introduces API changes of 1.3.&lt;/p&gt;</comment>
                            <comment id="16011528" author="githubbot" created="Tue, 16 May 2017 00:10:57 +0000"  >&lt;p&gt;GitHub user haohui opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6574&quot; title=&quot;Support nested catalogs in ExternalCatalog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6574&quot;&gt;&lt;del&gt;FLINK-6574&lt;/del&gt;&lt;/a&gt; Support nested catalogs in ExternalCatalog.&lt;/p&gt;

&lt;p&gt;    This PR extends the APIs of the `ExternalCatalog` to support arbitrary nesting within external catalogs.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/haohui/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/haohui/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6574&quot; title=&quot;Support nested catalogs in ExternalCatalog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6574&quot;&gt;&lt;del&gt;FLINK-6574&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3913&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 226aae03a605b3149c48de1154de7efb287334f5&lt;br/&gt;
Author: Haohui Mai &amp;lt;wheat9@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-05-16T00:09:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6574&quot; title=&quot;Support nested catalogs in ExternalCatalog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6574&quot;&gt;&lt;del&gt;FLINK-6574&lt;/del&gt;&lt;/a&gt; Support nested catalogs in ExternalCatalog.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16012228" author="githubbot" created="Tue, 16 May 2017 12:15:28 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r116721391&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r116721391&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/catalog/ExternalCatalog.scala &amp;#8212;&lt;br/&gt;
    @@ -34,41 +34,33 @@ trait ExternalCatalog {&lt;br/&gt;
       /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Get a table from the catalog&lt;br/&gt;
         *&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @param dbName    The name of the table&apos;s database.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;@param tableName The name of the table.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @throws DatabaseNotExistException thrown if the database does not exist in the catalog.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;@throws TableNotExistException    thrown if the table does not exist in the catalog.&lt;/li&gt;
	&lt;li&gt;@return the requested table&lt;br/&gt;
         */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@throws&lt;span class=&quot;error&quot;&gt;&amp;#91;DatabaseNotExistException&amp;#93;&lt;/span&gt;&lt;br/&gt;
       @throws&lt;span class=&quot;error&quot;&gt;&amp;#91;TableNotExistException&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;def getTable(dbName: String, tableName: String): ExternalCatalogTable&lt;br/&gt;
    +  def getTable(tableName: String): ExternalCatalogTable&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Get a list of all table names of a database in the catalog.&lt;br/&gt;
         *&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @param dbName The name of the database.&lt;/li&gt;
	&lt;li&gt;* @throws DatabaseNotExistException thrown if the database does not exist in the catalog&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;@return The list of table names&lt;br/&gt;
         */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@throws&lt;span class=&quot;error&quot;&gt;&amp;#91;DatabaseNotExistException&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;def listTables(dbName: String): JList&lt;span class=&quot;error&quot;&gt;&amp;#91;String&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +  def listTables(): JList&lt;span class=&quot;error&quot;&gt;&amp;#91;String&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Gets a database from the catalog.&lt;br/&gt;
         *&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @param dbName The name of the database.&lt;/li&gt;
	&lt;li&gt;* @throws DatabaseNotExistException thrown if the database does not exist in the catalog&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;@return The requested database&lt;br/&gt;
         */&lt;br/&gt;
       @throws&lt;span class=&quot;error&quot;&gt;&amp;#91;DatabaseNotExistException&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;def getDatabase(dbName: String): ExternalCatalogDatabase&lt;br/&gt;
    +  def getSubCatalog(dbName: String): ExternalCatalog&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Gets a list of all databases in the catalog.&lt;br/&gt;
         *&lt;/li&gt;
	&lt;li&gt;@return The list of database names&lt;br/&gt;
         */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;def listDatabases(): JList&lt;span class=&quot;error&quot;&gt;&amp;#91;String&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +  def listSubCatalog(): JList&lt;span class=&quot;error&quot;&gt;&amp;#91;String&amp;#93;&lt;/span&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +s `listSubCatalogs()`&lt;/p&gt;</comment>
                            <comment id="16012229" author="githubbot" created="Tue, 16 May 2017 12:15:28 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r116724361&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r116724361&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/catalog/InMemoryExternalCatalog.scala &amp;#8212;&lt;br/&gt;
    @@ -18,138 +18,97 @@&lt;/p&gt;

&lt;p&gt;     package org.apache.flink.table.catalog&lt;/p&gt;

&lt;p&gt;    -import org.apache.flink.table.api.&lt;/p&gt;
{DatabaseAlreadyExistException, DatabaseNotExistException, TableAlreadyExistException, TableNotExistException}&lt;br/&gt;
     import java.util.{List =&amp;gt; JList}&lt;br/&gt;
     &lt;br/&gt;
    -import scala.collection.mutable.HashMap&lt;br/&gt;
    +import org.apache.flink.table.api.{DatabaseAlreadyExistException, DatabaseNotExistException, TableAlreadyExistException, TableNotExistException}
&lt;p&gt;    +&lt;br/&gt;
    +import scala.collection.mutable&lt;br/&gt;
     import scala.collection.JavaConverters._&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;This class is an in-memory implementation of [&lt;span class=&quot;error&quot;&gt;&amp;#91;ExternalCatalog&amp;#93;&lt;/span&gt;].&lt;br/&gt;
       *&lt;/li&gt;
	&lt;li&gt;It could be used for testing or developing instead of used in production environment.&lt;br/&gt;
       */&lt;br/&gt;
    -class InMemoryExternalCatalog extends CrudExternalCatalog {&lt;br/&gt;
    +class InMemoryExternalCatalog(name: String) extends CrudExternalCatalog {&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private val databases = new HashMap&lt;span class=&quot;error&quot;&gt;&amp;#91;String, Database&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +  private val databases = new mutable.HashMap&lt;span class=&quot;error&quot;&gt;&amp;#91;String, ExternalCatalog&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +  private val tables = new mutable.HashMap&lt;span class=&quot;error&quot;&gt;&amp;#91;String, ExternalCatalogTable&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@throws&lt;span class=&quot;error&quot;&gt;&amp;#91;DatabaseNotExistException&amp;#93;&lt;/span&gt;&lt;br/&gt;
       @throws&lt;span class=&quot;error&quot;&gt;&amp;#91;TableAlreadyExistException&amp;#93;&lt;/span&gt;&lt;br/&gt;
       override def createTable(&lt;/li&gt;
	&lt;li&gt;table: ExternalCatalogTable,&lt;/li&gt;
	&lt;li&gt;ignoreIfExists: Boolean): Unit = synchronized {&lt;/li&gt;
	&lt;li&gt;val dbName = table.identifier.database&lt;/li&gt;
	&lt;li&gt;val tables = getTables(dbName)&lt;/li&gt;
	&lt;li&gt;val tableName = table.identifier.table&lt;/li&gt;
	&lt;li&gt;if (tables.contains(tableName)) {&lt;/li&gt;
	&lt;li&gt;if (!ignoreIfExists) 
{
    -        throw new TableAlreadyExistException(dbName, tableName)
    -      }&lt;/li&gt;
	&lt;li&gt;} else {&lt;/li&gt;
	&lt;li&gt;tables.put(tableName, table)&lt;br/&gt;
    +    tableName: String,&lt;br/&gt;
    +    table: ExternalCatalogTable,&lt;br/&gt;
    +    ignoreIfExists: Boolean): Unit = synchronized 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {    +    tables.get(tableName) match {
    +      case Some(_) if !ignoreIfExists =&amp;gt; throw new TableAlreadyExistException(name, tableName)
    +      case _ =&amp;gt; tables.put(tableName, table)
         }       }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@throws&lt;span class=&quot;error&quot;&gt;&amp;#91;DatabaseNotExistException&amp;#93;&lt;/span&gt;&lt;br/&gt;
       @throws&lt;span class=&quot;error&quot;&gt;&amp;#91;TableNotExistException&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;override def dropTable(&lt;/li&gt;
	&lt;li&gt;dbName: String,&lt;/li&gt;
	&lt;li&gt;tableName: String,&lt;/li&gt;
	&lt;li&gt;ignoreIfNotExists: Boolean): Unit = synchronized {&lt;/li&gt;
	&lt;li&gt;val tables = getTables(dbName)&lt;br/&gt;
    +  override def dropTable(tableName: String, ignoreIfNotExists: Boolean): Unit = synchronized 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {         if (tables.remove(tableName).isEmpty &amp;amp;&amp;amp; !ignoreIfNotExists) {
    -      throw new TableNotExistException(dbName, tableName)
    +      throw new TableNotExistException(name, tableName)
         }       }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@throws&lt;span class=&quot;error&quot;&gt;&amp;#91;DatabaseNotExistException&amp;#93;&lt;/span&gt;&lt;br/&gt;
       @throws&lt;span class=&quot;error&quot;&gt;&amp;#91;TableNotExistException&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;override def alterTable(&lt;/li&gt;
	&lt;li&gt;table: ExternalCatalogTable,&lt;/li&gt;
	&lt;li&gt;ignoreIfNotExists: Boolean): Unit = synchronized {&lt;/li&gt;
	&lt;li&gt;val dbName = table.identifier.database&lt;/li&gt;
	&lt;li&gt;val tables = getTables(dbName)&lt;/li&gt;
	&lt;li&gt;val tableName = table.identifier.table&lt;br/&gt;
    +  override def alterTable(tableName: String, table: ExternalCatalogTable,
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    please put each parameter into a new line&lt;/p&gt;</comment>
                            <comment id="16012230" author="githubbot" created="Tue, 16 May 2017 12:15:28 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r116721535&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r116721535&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/catalog/CrudExternalCatalog.scala &amp;#8212;&lt;br/&gt;
    @@ -79,7 +76,7 @@ trait CrudExternalCatalog extends ExternalCatalog {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;and ignoreIfExists is false&lt;br/&gt;
         */&lt;br/&gt;
       @throws&lt;span class=&quot;error&quot;&gt;&amp;#91;DatabaseAlreadyExistException&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;def createDatabase(db: ExternalCatalogDatabase, ignoreIfExists: Boolean): Unit&lt;br/&gt;
    +  def createDatabase(dbName: String, db: ExternalCatalog, ignoreIfExists: Boolean): Unit
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    rename to `createSubCatalog()` (or add such an alias method?)&lt;/p&gt;</comment>
                            <comment id="16012231" author="githubbot" created="Tue, 16 May 2017 12:15:28 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r116721601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r116721601&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/catalog/CrudExternalCatalog.scala &amp;#8212;&lt;br/&gt;
    @@ -96,13 +93,14 @@ trait CrudExternalCatalog extends ExternalCatalog {&lt;br/&gt;
       /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Modifies an existing database in the catalog.&lt;br/&gt;
         *&lt;br/&gt;
    +    * @param dbName            Name of the database.&lt;/li&gt;
	&lt;li&gt;@param db                New description of the database to update&lt;/li&gt;
	&lt;li&gt;@param ignoreIfNotExists Flag to specify behavior if the database does not exist:&lt;/li&gt;
	&lt;li&gt;if set to false, throw an exception,&lt;/li&gt;
	&lt;li&gt;if set to true, nothing happens.&lt;/li&gt;
	&lt;li&gt;@throws DatabaseNotExistException thrown if the database does not exist in the catalog&lt;br/&gt;
         */&lt;br/&gt;
       @throws&lt;span class=&quot;error&quot;&gt;&amp;#91;DatabaseNotExistException&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;def alterDatabase(db: ExternalCatalogDatabase, ignoreIfNotExists: Boolean): Unit&lt;br/&gt;
    +  def alterDatabase(dbName: String, db: ExternalCatalog, ignoreIfNotExists: Boolean): Unit
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    rename to `alterSubCatalog()` or add an alias method?&lt;/p&gt;</comment>
                            <comment id="16012232" author="githubbot" created="Tue, 16 May 2017 12:15:28 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r116723435&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r116723435&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/catalog/InMemoryExternalCatalog.scala &amp;#8212;&lt;br/&gt;
    @@ -18,138 +18,97 @@&lt;/p&gt;

&lt;p&gt;     package org.apache.flink.table.catalog&lt;/p&gt;

&lt;p&gt;    -import org.apache.flink.table.api.&lt;/p&gt;
{DatabaseAlreadyExistException, DatabaseNotExistException, TableAlreadyExistException, TableNotExistException}&lt;br/&gt;
     import java.util.{List =&amp;gt; JList}&lt;br/&gt;
     &lt;br/&gt;
    -import scala.collection.mutable.HashMap&lt;br/&gt;
    +import org.apache.flink.table.api.{DatabaseAlreadyExistException, DatabaseNotExistException, TableAlreadyExistException, TableNotExistException}
&lt;p&gt;    +&lt;br/&gt;
    +import scala.collection.mutable&lt;br/&gt;
     import scala.collection.JavaConverters._&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;This class is an in-memory implementation of [&lt;span class=&quot;error&quot;&gt;&amp;#91;ExternalCatalog&amp;#93;&lt;/span&gt;].&lt;br/&gt;
       *&lt;/li&gt;
	&lt;li&gt;It could be used for testing or developing instead of used in production environment.&lt;br/&gt;
       */&lt;br/&gt;
    -class InMemoryExternalCatalog extends CrudExternalCatalog {&lt;br/&gt;
    +class InMemoryExternalCatalog(name: String) extends CrudExternalCatalog {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    add parameter to ScalaDocs&lt;/p&gt;</comment>
                            <comment id="16013608" author="githubbot" created="Wed, 17 May 2017 06:26:34 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r116919169&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r116919169&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/catalog/ExternalCatalogTable.scala &amp;#8212;&lt;br/&gt;
    @@ -37,25 +36,10 @@ import org.apache.flink.table.plan.stats.TableStats&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param lastAccessTime       Timestamp of last access of the table&lt;br/&gt;
       */&lt;br/&gt;
     case class ExternalCatalogTable(&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;identifier: TableIdentifier,
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    If we don&apos;t have table identifier or table name, the `TableSourceConverter` will not work when trying to convert `ExternalCatalogTable` to a real `TableSource`.&lt;/p&gt;

&lt;p&gt;    Even if we keep the table name, i&apos;m not sure it will work for all situations. For example, if we have an outside catalog which have the notion of database, like MySQL. Table in that catalog will named as &quot;db1.table1&quot; or &quot;db2.table2&quot;. In the new design, normally we should add database as the sub catalog of the root catalog. So we can create &quot;table1&quot; from sub-catalog named &quot;db1&quot;. The problem is the table name is assigned as &quot;table1&quot;, we loose the information that this table actually comes from &quot;db1&quot;. This may cause some problems when the TableSource trying to establish connection or trying to get table information from outside catalog. &lt;/p&gt;</comment>
                            <comment id="16013613" author="githubbot" created="Wed, 17 May 2017 06:27:46 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r116919313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r116919313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/api/exceptions.scala &amp;#8212;&lt;br/&gt;
    @@ -114,7 +114,7 @@ case class TableAlreadyExistException(&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param db database name&lt;/li&gt;
	&lt;li&gt;@param cause the cause&lt;br/&gt;
       */&lt;br/&gt;
    -case class DatabaseNotExistException(&lt;br/&gt;
    +case class CatalogNotExistException(
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Please update the comment and parameter name.&lt;/p&gt;</comment>
                            <comment id="16013614" author="githubbot" created="Wed, 17 May 2017 06:27:57 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r116919339&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r116919339&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/api/exceptions.scala &amp;#8212;&lt;br/&gt;
    @@ -128,7 +128,7 @@ case class DatabaseNotExistException(&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param db database name&lt;/li&gt;
	&lt;li&gt;@param cause the cause&lt;br/&gt;
       */&lt;br/&gt;
    -case class DatabaseAlreadyExistException(&lt;br/&gt;
    +case class CatalogAlreadyExistException(
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Same above.&lt;/p&gt;</comment>
                            <comment id="16015488" author="githubbot" created="Thu, 18 May 2017 09:33:58 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r117201965&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r117201965&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/catalog/ExternalCatalogTable.scala &amp;#8212;&lt;br/&gt;
    @@ -37,25 +36,10 @@ import org.apache.flink.table.plan.stats.TableStats&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param lastAccessTime       Timestamp of last access of the table&lt;br/&gt;
       */&lt;br/&gt;
     case class ExternalCatalogTable(&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;identifier: TableIdentifier,
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    We have tested this with our own catalog integration, and keep the table name should work. The sub catalog which representing the database layer can concat the db and table name when creating Table instance. &lt;/p&gt;</comment>
                            <comment id="16016247" author="githubbot" created="Thu, 18 May 2017 18:49:06 +0000"  >&lt;p&gt;Github user haohui commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r117325036&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r117325036&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/catalog/ExternalCatalogTable.scala &amp;#8212;&lt;br/&gt;
    @@ -37,25 +36,10 @@ import org.apache.flink.table.plan.stats.TableStats&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param lastAccessTime       Timestamp of last access of the table&lt;br/&gt;
       */&lt;br/&gt;
     case class ExternalCatalogTable(&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;identifier: TableIdentifier,
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I agree that it requires keeping more than the name of the table. The more general problem is that you will need to keep additional information for other data sources (e.g., the clusters for Kafka topics)&lt;/p&gt;

&lt;p&gt;    I think it might make more sense to put the information at the properties field in `ExternalCatalogTable`. Thoughts?&lt;/p&gt;</comment>
                            <comment id="16016438" author="githubbot" created="Thu, 18 May 2017 20:43:25 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r117349259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r117349259&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/catalog/ExternalCatalogTable.scala &amp;#8212;&lt;br/&gt;
    @@ -37,25 +36,10 @@ import org.apache.flink.table.plan.stats.TableStats&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param lastAccessTime       Timestamp of last access of the table&lt;br/&gt;
       */&lt;br/&gt;
     case class ExternalCatalogTable(&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;identifier: TableIdentifier,
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The properties field is exactly meant to hold configuration parameters such as hostnames, ports, paths, or client configs. &lt;/p&gt;

&lt;p&gt;    I think @haohui is right. Not all external tables require a name to access the data (the name under which the table is registered in the catalog and identified by Calcite is the key in the map). A CSV file table needs a path, a Kafka-based table a Kafka config + topic name, etc. A database table which needs a table name could store the table name (and also the database name and schema name) in the properties map.&lt;/p&gt;

&lt;p&gt;    Would that work for you @KurtYoung?&lt;/p&gt;
</comment>
                            <comment id="16016746" author="githubbot" created="Fri, 19 May 2017 00:57:41 +0000"  >&lt;p&gt;Github user KurtYoung commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913#discussion_r117385333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913#discussion_r117385333&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/catalog/ExternalCatalogTable.scala &amp;#8212;&lt;br/&gt;
    @@ -37,25 +36,10 @@ import org.apache.flink.table.plan.stats.TableStats&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param lastAccessTime       Timestamp of last access of the table&lt;br/&gt;
       */&lt;br/&gt;
     case class ExternalCatalogTable(&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;identifier: TableIdentifier,
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I agree not all the &quot;tables&quot; have a name, sounds good to me then.&lt;/p&gt;</comment>
                            <comment id="16017130" author="githubbot" created="Fri, 19 May 2017 09:41:30 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the update @haohui and the review @KurtYoung.&lt;br/&gt;
    Will merge this PR.&lt;/p&gt;</comment>
                            <comment id="16017321" author="githubbot" created="Fri, 19 May 2017 12:22:21 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3913&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3913&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16017354" author="fhueske" created="Fri, 19 May 2017 12:54:18 +0000"  >&lt;p&gt;Fixed in 1.3.0 with 6d178a9597f5f9b79a0e3a6f4a61a10734188c85&lt;br/&gt;
Fixed in 1.4.0 with acea4cde5f0225db9e00bbef4a47fdb58419022b&lt;/p&gt;</comment>
                            <comment id="16680324" author="xuefuz" created="Thu, 8 Nov 2018 20:05:28 +0000"  >&lt;p&gt;I understand this is an old JIRA, but going retrospective, I think this has a big issue. Since TableEnvironment allows for multiple catalogs, each may have a number of databases. If any of the databases are named the same, say &quot;test_db&quot;, then an ambiguity is created. That is, which &quot;test_db&quot; the following query is referring to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select * from test_db.mytable;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I even believe that Calcite may not allow multiple subschemas with the same name.&lt;/p&gt;

&lt;p&gt;In summary, I think the changes made here need to be revisited at least.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3exbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>