<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:26:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5628] CheckpointStatsTracker implements Serializable but isn&apos;t</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5628</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The CheckpointStatsTracker implements the Serializable interface, even though it no longer is serializable as it contains a List&amp;lt;ExecutionJobVertex&amp;gt;.&lt;/p&gt;

&lt;p&gt;This was introduced in 579bc96446d598a2cfe8237b4ebd62d8c9df3483 which reworked the checkpoint stats tracking,&lt;/p&gt;

&lt;p&gt;This does not affect 1.2 or 1.3 in any way (since these objects aren&apos;t serialized there), but it blocks the implementation of the HistoryServer.&lt;/p&gt;

&lt;p&gt;The AccessExecution*/ArchivedExecution* classes, which are supposed to be a serializable form of the ExecutionGraph, are thus broken as they also make use of the CheckpointStatsTracker.&lt;/p&gt;

&lt;p&gt;(Note: * = Graph/ExecutionJobVertex/ExecutionVertex/Execution) .&lt;/p&gt;

&lt;p&gt;This wasn&apos;t catched in tests since no ExecutionJobVertices were given to the CheckpointStatsTracker in ArchivedExecutionGraphTest#setExecutionGraph.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13037332">FLINK-5628</key>
            <summary>CheckpointStatsTracker implements Serializable but isn&apos;t</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uce">Ufuk Celebi</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jan 2017 11:05:45 +0000</created>
                <updated>Mon, 30 Jan 2017 15:34:49 +0000</updated>
                            <resolved>Mon, 30 Jan 2017 15:34:46 +0000</resolved>
                                    <version>1.2.0</version>
                    <version>1.3.0</version>
                                    <fixVersion>1.2.1</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>Runtime / Task</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15836021" author="zentol" created="Tue, 24 Jan 2017 11:09:37 +0000"  >&lt;p&gt;A simple solution to this would be to store the CheckpintStatsSnapshot in the archived classes instead.&lt;/p&gt;</comment>
                            <comment id="15837883" author="githubbot" created="Wed, 25 Jan 2017 15:14:32 +0000"  >&lt;p&gt;GitHub user uce opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5628&quot; title=&quot;CheckpointStatsTracker implements Serializable but isn&amp;#39;t&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5628&quot;&gt;&lt;del&gt;FLINK-5628&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;webfrontend&amp;#93;&lt;/span&gt; Fix serialization of stats tracker&lt;/p&gt;

&lt;p&gt;    Instead of exposing the stats tracker in `AccessExecutionGraph`, we expose the checkpoint stats snapshot. That way, we don&apos;t have to worry about serializibility in the tracker itself. The archived execution graph simply gets the latest snapshot before archival. With this change, we also prevent illegal use of the tracker after it has been archived.&lt;/p&gt;

&lt;p&gt;    Not strictly necessary for 1.2 but nice to have in order to have an easier time when backporting stuff from 1.3 later.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/uce/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/uce/flink&lt;/a&gt; serialize&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3215.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3215.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3215&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4edc2169d70a90cc8e50462a684c5593ae0b0eb3&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-01-25T14:42:24Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5628&quot; title=&quot;CheckpointStatsTracker implements Serializable but isn&amp;#39;t&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5628&quot;&gt;&lt;del&gt;FLINK-5628&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;webfrontend&amp;#93;&lt;/span&gt; Return snapshot instead of tracker&lt;/p&gt;

&lt;p&gt;commit fc99a5ed096848c9794e8be9928ac5ad3f8027f0&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-01-25T14:43:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5628&quot; title=&quot;CheckpointStatsTracker implements Serializable but isn&amp;#39;t&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5628&quot;&gt;&lt;del&gt;FLINK-5628&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;webfrontend&amp;#93;&lt;/span&gt; Fix serializability of checkpoint stats tracker&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15837891" author="githubbot" created="Wed, 25 Jan 2017 15:19:35 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3215#discussion_r97799769&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3215#discussion_r97799769&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ArchivedExecutionGraph.java &amp;#8212;&lt;br/&gt;
    @@ -105,10 +110,12 @@ public ArchivedExecutionGraph(&lt;br/&gt;
     		this.serializedUserAccumulators = serializedUserAccumulators;&lt;br/&gt;
     		this.archivedExecutionConfig = executionConfig;&lt;br/&gt;
     		this.isStoppable = isStoppable;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this.tracker = tracker;&lt;br/&gt;
    +		this.jobSnapshottingSettings = checkNotNull(jobSnapshottingSettings);&lt;br/&gt;
    +		this.checkpointStatsSnapshot = checkNotNull(checkpointStatsSnapshot);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    so these are not null even when checkpointing is disabled?&lt;/p&gt;</comment>
                            <comment id="15837892" author="githubbot" created="Wed, 25 Jan 2017 15:19:35 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3215#discussion_r97799282&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3215#discussion_r97799282&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/checkpoint/CheckpointStatsTracker.java &amp;#8212;&lt;br/&gt;
    @@ -85,6 +79,9 @@&lt;br/&gt;
     	/** History of checkpoints. */&lt;br/&gt;
     	private final CheckpointStatsHistory history;&lt;/p&gt;

&lt;p&gt;    +	/** The job vertices taking part in the checkpoints. */&lt;br/&gt;
    +	private final transient List&amp;lt;ExecutionJobVertex&amp;gt; jobVertices;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    doesn&apos;t have to be transient anymore.&lt;/p&gt;</comment>
                            <comment id="15837918" author="githubbot" created="Wed, 25 Jan 2017 15:37:24 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think the `CompletedCheckpointStats` class must also implement `Serializable`.&lt;/p&gt;</comment>
                            <comment id="15837921" author="githubbot" created="Wed, 25 Jan 2017 15:39:34 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    as well as the and the `AbstractCheckpointStats` class.&lt;/p&gt;</comment>
                            <comment id="15837928" author="githubbot" created="Wed, 25 Jan 2017 15:41:09 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    add `SubtaskStateStats` to the list.&lt;/p&gt;</comment>
                            <comment id="15838135" author="githubbot" created="Wed, 25 Jan 2017 17:05:03 +0000"  >&lt;p&gt;Github user uce commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for spotting these. I&apos;ll adress your points.&lt;/p&gt;</comment>
                            <comment id="15845232" author="githubbot" created="Mon, 30 Jan 2017 14:06:58 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @uce +1 to merge.&lt;/p&gt;</comment>
                            <comment id="15845321" author="githubbot" created="Mon, 30 Jan 2017 15:31:51 +0000"  >&lt;p&gt;Github user uce commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for review. I&apos;m going to merge this to `release-1.2` as well.&lt;/p&gt;</comment>
                            <comment id="15845324" author="uce" created="Mon, 30 Jan 2017 15:34:46 +0000"  >&lt;p&gt;3e2e49f (release-1.2), dcfa3fb (master).&lt;/p&gt;</comment>
                            <comment id="15845325" author="githubbot" created="Mon, 30 Jan 2017 15:34:49 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3215&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i394hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>