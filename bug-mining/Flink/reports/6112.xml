<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:08:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-25107] GlueSchemaRegistryAvroKinesisITCase&#160;and&#160;GlueSchemaRegistryJsonKinesisITCase are skipped on AzureCI but fail when enabled</title>
                <link>https://issues.apache.org/jira/browse/FLINK-25107</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-end-to-end-tests/flink-glue-schema-registry-avro-test/src/test/java/org/apache/flink/glue/schema/registry/test/GlueSchemaRegistryAvroKinesisITCase.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;GlueSchemaRegistryAvroKinesisITCase&lt;/a&gt;&#160;and&#160;&lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-end-to-end-tests/flink-glue-schema-registry-json-test/src/test/java/org/apache/flink/glue/schema/registry/test/json/GlueSchemaRegistryJsonKinesisITCase.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;GlueSchemaRegistryJsonKinesisITCase&lt;/a&gt;, are not executed on Azure CI runs, because the access key and secret key env variables are not present, see e.g.&#160;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=26986&amp;amp;view=logs&amp;amp;j=af184cdd-c6d8-5084-0b69-7e9c67b35f7a&amp;amp;t=160c9ae5-96fd-516e-1c91-deb81f59292a&amp;amp;l=15852&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this run&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Then, during recent testing on Github Actions, we noticed that the tests don&apos;t work even if the env variables are present because AWS expects different variable names (it expects AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY). See&#160;&lt;a href=&quot;https://github.com/ververica/flink/runs/4301833493?check_suite_focus=true#step:13:17885&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this run&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Nov 23 18:40:46 Caused by: software.amazon.awssdk.core.exception.SdkClientException: Unable to load credentials from any of the providers in the chain AwsCredentialsProviderChain(credentialsProviders=[SystemPropertyCredentialsProvider(), EnvironmentVariableCredentialsProvider(), WebIdentityTokenCredentialsProvider(), ProfileCredentialsProvider(), ContainerCredentialsProvider(), InstanceProfileCredentialsProvider()]) : [SystemPropertyCredentialsProvider(): Unable to load credentials from system settings. Access key must be specified either via environment variable (AWS_ACCESS_KEY_ID) or system property (aws.accessKeyId)., EnvironmentVariableCredentialsProvider(): Unable to load credentials from system settings. Access key must be specified either via environment variable (AWS_ACCESS_KEY_ID) or system property (aws.accessKeyId)., WebIdentityTokenCredentialsProvider(): Either the environment variable AWS_WEB_IDENTITY_TOKEN_FILE or the javaproperty aws.webIdentityTokenFile must be set., ProfileCredentialsProvider(): Profile file contained no credentials &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; profile &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;&lt;/span&gt;: ProfileFile(profiles=[]), ContainerCredentialsProvider(): Cannot fetch credentials from container - neither AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI environment variables are set., InstanceProfileCredentialsProvider(): The requested metadata is not found at http:&lt;span class=&quot;code-comment&quot;&gt;//169.254.169.254/latest/meta-data/iam/security-credentials/]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Finally, even with correct env variable naming, the test still fails because of an assertion error. It looks like only the first record ever makes it to the results. See&#160;&lt;a href=&quot;https://github.com/ververica/flink/runs/4315084463?check_suite_focus=true#step:13:5317&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this run&lt;/a&gt;&#160;for the error, also posted here for convenience:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Nov 24 18:00:55 java.lang.AssertionError: Results received from &lt;span class=&quot;code-quote&quot;&gt;&apos;gsr_json_output_stream&apos;&lt;/span&gt;: [JsonDataWithSchema(schema={&lt;span class=&quot;code-quote&quot;&gt;&quot;$id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//example.com/address.schema.json&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;$schema&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;http://json-schema.org/draft-07/schema#&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;object&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;properties&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;f1&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;},&lt;span class=&quot;code-quote&quot;&gt;&quot;f2&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;integer&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;maximum&quot;&lt;/span&gt;:10000}}}, payload={&lt;span class=&quot;code-quote&quot;&gt;&quot;f1&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;olympic&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;f2&quot;&lt;/span&gt;:2020})] expected:&amp;lt;8&amp;gt; but was:&amp;lt;1&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;FYI: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Nicolaus+Weidner&quot; class=&quot;user-hover&quot; rel=&quot;Nicolaus Weidner&quot;&gt;Nicolaus Weidner&lt;/a&gt;&#160; investigated this issue and provided these details&lt;/p&gt;</description>
                <environment></environment>
        <key id="13414479">FLINK-25107</key>
            <summary>GlueSchemaRegistryAvroKinesisITCase&#160;and&#160;GlueSchemaRegistryJsonKinesisITCase are skipped on AzureCI but fail when enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dannycranmer">Danny Cranmer</assignee>
                                    <reporter username="mapohl">Matthias Pohl</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 30 Nov 2021 08:27:31 +0000</created>
                <updated>Tue, 11 Jan 2022 17:36:10 +0000</updated>
                            <resolved>Tue, 11 Jan 2022 17:36:10 +0000</resolved>
                                    <version>1.15.0</version>
                                    <fixVersion>1.15.0</fixVersion>
                                    <component>Formats (JSON, Avro, Parquet, ORC, SequenceFile)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17450998" author="dannycranmer" created="Tue, 30 Nov 2021 09:48:49 +0000"  >&lt;p&gt;Taking a look&lt;/p&gt;</comment>
                            <comment id="17451060" author="dannycranmer" created="Tue, 30 Nov 2021 11:11:56 +0000"  >&lt;p&gt;This was a miss on the migration from &lt;tt&gt;.sh&lt;/tt&gt; to &lt;tt&gt;java&lt;/tt&gt; e2e tests. Before, we were setting the &lt;tt&gt;AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY&lt;/tt&gt; from &lt;tt&gt;IT_CASE_GLUE_SCHEMA_ACCESS_KEY/IT_CASE_GLUE_SCHEMA_SECRET_KEY&lt;/tt&gt; keys as system variables. I am not inclined to do this for the java suite, since it is more difficult to isolate properties across tests. Currently the GSR format does not have a mechanism to pass AWS keys in the properties map, which is how I would like to resolve this issue. To avoid reinventing the wheel, we are refactoring the way AWS keys are defined in config in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-24227&quot; title=&quot;[FLIP-171] KDS implementation of Async Sink&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-24227&quot;&gt;&lt;del&gt;FLINK-24227&lt;/del&gt;&lt;/a&gt;. We will provide a common mechanism to define AWS keys which will be reused for Kinesis Data Streams, DynamoDB, Kinesis Firehose and Glue Schema Registry. We are working towards a PR for this now, and I will pickup this issue once that is merged.&lt;/p&gt;</comment>
                            <comment id="17451237" author="nicolaus weidner" created="Tue, 30 Nov 2021 16:37:59 +0000"  >&lt;p&gt;Thanks for looking into it, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dannycranmer&quot; class=&quot;user-hover&quot; rel=&quot;dannycranmer&quot;&gt;dannycranmer&lt;/a&gt;, that sounds good! I also stumbled across the issues that you described (system variables in java tests being a pain and no other obvious way to set the key) and having a common mechanism sounds preferrable.&lt;/p&gt;</comment>
                            <comment id="17458955" author="till.rohrmann" created="Tue, 14 Dec 2021 07:34:51 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dannycranmer&quot; class=&quot;user-hover&quot; rel=&quot;dannycranmer&quot;&gt;dannycranmer&lt;/a&gt; can you give a quick update on the status of this ticket?&lt;/p&gt;</comment>
                            <comment id="17458994" author="dannycranmer" created="Tue, 14 Dec 2021 08:54:29 +0000"  >&lt;p&gt;I have opened a PR with tests refactored and passing. I have 2 follow ups to do before I merge:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Update test code to junit 5 + AssertJ&lt;/li&gt;
	&lt;li&gt;Update documentation&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I am planning on getting back to it this week, but have been rather busy over the last week!&lt;/p&gt;</comment>
                            <comment id="17460604" author="till.rohrmann" created="Thu, 16 Dec 2021 10:41:36 +0000"  >&lt;p&gt;Great, thanks for the update and the work &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dannycranmer&quot; class=&quot;user-hover&quot; rel=&quot;dannycranmer&quot;&gt;dannycranmer&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17472303" author="till.rohrmann" created="Mon, 10 Jan 2022 21:09:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dannycranmer&quot; class=&quot;user-hover&quot; rel=&quot;dannycranmer&quot;&gt;dannycranmer&lt;/a&gt; do you think that you can finish the open PR or shall somebody else jump in?&lt;/p&gt;</comment>
                            <comment id="17472314" author="dannycranmer" created="Mon, 10 Jan 2022 21:17:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt; sorry for the delay, I have been oncall for the last week. I finished my rotation today so can get back to this now. Will rebase the PR for now.&lt;/p&gt;</comment>
                            <comment id="17472976" author="dannycranmer" created="Tue, 11 Jan 2022 17:36:02 +0000"  >&lt;p&gt;This is merged. I have verified both tests pass locally when the AWS keys are set, using: &lt;tt&gt;mvn clean install -Prun-end-to-end-tests&lt;/tt&gt; &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13389702">FLINK-23389</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0x75c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>