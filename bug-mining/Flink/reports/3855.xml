<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:44:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-16629] Streaming bucketing end-to-end test output hash mismatch</title>
                <link>https://issues.apache.org/jira/browse/FLINK-16629</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/rmetzger/5bd3ef0a-4359-41af-abca-811b04098d2e/_apis/build/builds/6298/logs/722&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/5bd3ef0a-4359-41af-abca-811b04098d2e/_apis/build/builds/6298/logs/722&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Some of the output mismatch failures were reported in another ticket: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16227&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-16227&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-03-17T02:04:19.9176915Z &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of produced values 30618/60000
2020-03-17T02:04:19.9202731Z Truncating buckets
2020-03-17T02:04:25.0504959Z Truncating buckets
2020-03-17T02:04:30.1731295Z Truncating buckets
2020-03-17T02:04:35.3190114Z Truncating buckets
2020-03-17T02:04:40.4723887Z Truncating buckets
2020-03-17T02:04:45.5984655Z Truncating buckets
2020-03-17T02:04:50.7185356Z Truncating buckets
2020-03-17T02:04:55.8627129Z Truncating buckets
2020-03-17T02:05:01.0715985Z &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of produced values 74008/60000
2020-03-17T02:05:02.3976850Z Cancelling job dba2fdb79579158295db27d0214fc2ff.
2020-03-17T02:05:03.4633541Z Cancelled job dba2fdb79579158295db27d0214fc2ff.
2020-03-17T02:05:03.4738270Z Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job (dba2fdb79579158295db27d0214fc2ff) to reach terminal state CANCELED ...
2020-03-17T02:05:03.5149228Z Job (dba2fdb79579158295db27d0214fc2ff) reached terminal state CANCELED
2020-03-17T02:05:03.5150587Z Job dba2fdb79579158295db27d0214fc2ff was cancelled, time to verify
2020-03-17T02:05:03.5590118Z FAIL Bucketing Sink: Output hash mismatch.  Got c3787e7a52d913675e620837a7531742, expected 01aba5ff77a0ef5e5cf6a727c248bdc3.
2020-03-17T02:05:03.5591888Z head hexdump of actual:
2020-03-17T02:05:03.5989908Z 0000000   (   7   ,   1   0   ,   0   ,   S   o   m   e       p   a   y
2020-03-17T02:05:03.5991252Z 0000010   l   o   a   d   .   .   .   )  \n   (   7   ,   1   0   ,   1
2020-03-17T02:05:03.5991923Z 0000020   ,   S   o   m   e       p   a   y   l   o   a   d   .   .   .
2020-03-17T02:05:03.5993055Z 0000030   )  \n   (   7   ,   1   0   ,   2   ,   S   o   m   e       p
2020-03-17T02:05:03.5993690Z 0000040   a   y   l   o   a   d   .   .   .   )  \n   (   7   ,   1   0
2020-03-17T02:05:03.5994332Z 0000050   ,   3   ,   S   o   m   e       p   a   y   l   o   a   d   .
2020-03-17T02:05:03.5994967Z 0000060   .   .   )  \n   (   7   ,   1   0   ,   4   ,   S   o   m   e
2020-03-17T02:05:03.5995744Z 0000070       p   a   y   l   o   a   d   .   .   .   )  \n   (   7   ,
2020-03-17T02:05:03.5996359Z 0000080   1   0   ,   5   ,   S   o   m   e       p   a   y   l   o   a
2020-03-17T02:05:03.5997133Z 0000090   d   .   .   .   )  \n   (   7   ,   1   0   ,   6   ,   S   o
2020-03-17T02:05:03.5997704Z 00000a0   m   e       p   a   y   l   o   a   d   .   .   .   )  \n   (
2020-03-17T02:05:03.5998295Z 00000b0   7   ,   1   0   ,   7   ,   S   o   m   e       p   a   y   l
2020-03-17T02:05:03.5999087Z 00000c0   o   a   d   .   .   .   )  \n   (   7   ,   1   0   ,   8   ,
2020-03-17T02:05:03.6000243Z 00000d0   S   o   m   e       p   a   y   l   o   a   d   .   .   .   )
2020-03-17T02:05:03.6000880Z 00000e0  \n   (   7   ,   1   0   ,   9   ,   S   o   m   e       p   a
2020-03-17T02:05:03.6001494Z 00000f0   y   l   o   a   d   .   .   .   )  \n                        
2020-03-17T02:05:03.6001999Z 00000fa
2020-03-17T02:05:03.9875220Z Stopping taskexecutor daemon (pid: 49278) on host fv-az668.
2020-03-17T02:05:04.2569285Z Stopping standalonesession daemon (pid: 46323) on host fv-az668.
2020-03-17T02:05:04.7664418Z Stopping taskexecutor daemon (pid: 46615) on host fv-az668.
2020-03-17T02:05:04.7674722Z Skipping taskexecutor daemon (pid: 47009), because it is not running anymore on fv-az668.
2020-03-17T02:05:04.7687383Z Skipping taskexecutor daemon (pid: 47299), because it is not running anymore on fv-az668.
2020-03-17T02:05:04.7689091Z Skipping taskexecutor daemon (pid: 47619), because it is not running anymore on fv-az668.
2020-03-17T02:05:04.7690289Z Stopping taskexecutor daemon (pid: 48538) on host fv-az668.
2020-03-17T02:05:04.7691796Z Stopping taskexecutor daemon (pid: 48988) on host fv-az668.
2020-03-17T02:05:04.7692365Z [FAIL] Test script contains errors.
2020-03-17T02:05:04.7713750Z Checking of logs skipped.
2020-03-17T02:05:04.7714249Z 
2020-03-17T02:05:04.7715316Z [FAIL] &lt;span class=&quot;code-quote&quot;&gt;&apos;Streaming bucketing end-to-end test&apos;&lt;/span&gt; failed after 2 minutes and 43 seconds! Test exited with exit code 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13292119">FLINK-16629</key>
            <summary>Streaming bucketing end-to-end test output hash mismatch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rmetzger">Robert Metzger</assignee>
                                    <reporter username="pnowojski">Piotr Nowojski</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 17 Mar 2020 07:32:38 +0000</created>
                <updated>Wed, 25 Mar 2020 07:54:21 +0000</updated>
                            <resolved>Wed, 25 Mar 2020 07:54:21 +0000</resolved>
                                    <version>1.11.0</version>
                                    <fixVersion>1.11.0</fixVersion>
                                    <component>API / DataStream</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17060771" author="kkl0u" created="Tue, 17 Mar 2020 09:38:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt; I think that based on the discussion &lt;a href=&quot;https://lists.apache.org/list.html?dev@flink.apache.org:lte=1M:drop%20bucketing%20sink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; the plan is to remove the &lt;tt&gt;BucketingSink&lt;/tt&gt; so I am not sure if it is worth spending cycles on fixing this. What do you think?&lt;/p&gt;</comment>
                            <comment id="17060773" author="rmetzger" created="Tue, 17 Mar 2020 09:40:30 +0000"  >&lt;p&gt;How about disabling the bucketing sink test when running in the hadoop 2.4.1 profile? (the test passes with other hadoop versions)&lt;/p&gt;</comment>
                            <comment id="17060808" author="kkl0u" created="Tue, 17 Mar 2020 10:33:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; Only in 2.4.1? This seems to make things even weirder. Can this be that something was fixed in Hadoop and fixes also our instability?&lt;/p&gt;</comment>
                            <comment id="17060875" author="rmetzger" created="Tue, 17 Mar 2020 12:20:00 +0000"  >&lt;p&gt;We could go through old builds to see around which change the error started occurring.&lt;/p&gt;

&lt;p&gt;I suspect the recent work on the file system plugins might have changed something non-deterministic?&lt;/p&gt;</comment>
                            <comment id="17060905" author="kkl0u" created="Tue, 17 Mar 2020 13:14:36 +0000"  >&lt;p&gt;If this is not a big deal for you, then I think that this could make sense even if we are planning to remove the bucketing sink. What do you think?&lt;/p&gt;</comment>
                            <comment id="17061064" author="rmetzger" created="Tue, 17 Mar 2020 17:14:29 +0000"  >&lt;p&gt;Uff, I&apos;m getting the impression that the last few days I&apos;m doing more harm than good :/ &lt;br/&gt;
While checking if the test also fails regularly on Travis, I realized that we are not running the end to end tests with Hadoop 2.4.1 there.&lt;br/&gt;
This issue has probably been in the nightly end to end tests ever since I enabled them in Azure (when I enabled nightly tests, the e2e tests were still failing).&lt;/p&gt;

&lt;p&gt;Maybe the issue is just that in Hadoop 2.4.1 the &lt;tt&gt;truncate()&lt;/tt&gt; call is not available?&lt;/p&gt;

&lt;p&gt;I still vote to disable the test on HD 2.4.1&lt;/p&gt;</comment>
                            <comment id="17062463" author="kkl0u" created="Thu, 19 Mar 2020 11:09:28 +0000"  >&lt;p&gt;Yes, I think that given that we are probably going to deprecate the sink, we can disable the test. &lt;/p&gt;</comment>
                            <comment id="17062507" author="rmetzger" created="Thu, 19 Mar 2020 12:18:27 +0000"  >&lt;p&gt;Okay, I will create a PR&lt;/p&gt;</comment>
                            <comment id="17065340" author="zjwang" created="Tue, 24 Mar 2020 05:51:42 +0000"  >&lt;p&gt;Another instance :&lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6546&amp;amp;view=logs&amp;amp;j=68a897ab-3047-5660-245a-cce8f83859f6&amp;amp;t=375367d9-d72e-5c21-3be0-b45149130f6b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6546&amp;amp;view=logs&amp;amp;j=68a897ab-3047-5660-245a-cce8f83859f6&amp;amp;t=375367d9-d72e-5c21-3be0-b45149130f6b&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;a href=&quot;https://dev.azure.com/rmetzger/5bd3ef0a-4359-41af-abca-811b04098d2e/_apis/build/builds/6546/logs/679&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/5bd3ef0a-4359-41af-abca-811b04098d2e/_apis/build/builds/6546/logs/679&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17066426" author="zjwang" created="Wed, 25 Mar 2020 06:29:42 +0000"  >&lt;p&gt;Another instance&#160;&lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6591&amp;amp;view=logs&amp;amp;s=9fca669f-5c5f-59c7-4118-e31c641064f0&amp;amp;j=68a897ab-3047-5660-245a-cce8f83859f6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6591&amp;amp;view=logs&amp;amp;s=9fca669f-5c5f-59c7-4118-e31c641064f0&amp;amp;j=68a897ab-3047-5660-245a-cce8f83859f6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17066461" author="rmetzger" created="Wed, 25 Mar 2020 07:54:21 +0000"  >&lt;p&gt;Test disabled for Hadoop 2.4.1 profile in 811c3be9beee6fd3d1c2482e70f1f57a67dc769c&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13291947">FLINK-16616</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13286918">FLINK-16227</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0clm0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>