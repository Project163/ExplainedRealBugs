<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:55:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-21416] FileBufferReaderITCase.testSequentialReading fails on azure</title>
                <link>https://issues.apache.org/jira/browse/FLINK-21416</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=13473&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=13473&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.flink.runtime.client.JobExecutionException: Job execution failed.
	at org.apache.flink.runtime.jobmaster.JobResult.toJobExecutionResult(JobResult.java:144)
	at org.apache.flink.runtime.minicluster.MiniCluster.executeJobBlocking(MiniCluster.java:811)
	at org.apache.flink.runtime.io.network.partition.FileBufferReaderITCase.testSequentialReading(FileBufferReaderITCase.java:128)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.flink.util.TestNameProvider$1.evaluate(TestNameProvider.java:45)
	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.apache.flink.runtime.JobException: Recovery is suppressed by NoRestartBackoffTimeStrategy
	at org.apache.flink.runtime.executiongraph.failover.flip1.ExecutionFailureHandler.handleFailure(ExecutionFailureHandler.java:117)
	at org.apache.flink.runtime.executiongraph.failover.flip1.ExecutionFailureHandler.getFailureHandlingResult(ExecutionFailureHandler.java:79)
	at org.apache.flink.runtime.scheduler.DefaultScheduler.handleTaskFailure(DefaultScheduler.java:221)
	at org.apache.flink.runtime.scheduler.DefaultScheduler.maybeHandleTaskFailure(DefaultScheduler.java:212)
	at org.apache.flink.runtime.scheduler.DefaultScheduler.updateTaskExecutionStateInternal(DefaultScheduler.java:203)
	at org.apache.flink.runtime.scheduler.SchedulerBase.updateTaskExecutionState(SchedulerBase.java:650)
	at org.apache.flink.runtime.scheduler.SchedulerNG.updateTaskExecutionState(SchedulerNG.java:81)
	at org.apache.flink.runtime.jobmaster.JobMaster.updateTaskExecutionState(JobMaster.java:435)
	at sun.reflect.GeneratedMethodAccessor17.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at org.apache.flink.shaded.netty4.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at org.apache.flink.shaded.netty4.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Caused by: org.apache.flink.shaded.netty4.io.netty.channel.unix.Errors$NativeIoException: readAddress(..) failed: Connection reset by peer

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13359539">FLINK-21416</key>
            <summary>FileBufferReaderITCase.testSequentialReading fails on azure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gaoyunhaii">Yun Gao</assignee>
                                    <reporter username="dwysakowicz">Dawid Wysakowicz</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Fri, 19 Feb 2021 08:28:10 +0000</created>
                <updated>Fri, 26 Mar 2021 15:39:47 +0000</updated>
                            <resolved>Fri, 26 Mar 2021 15:39:47 +0000</resolved>
                                    <version>1.13.0</version>
                                    <fixVersion>1.13.0</fixVersion>
                                    <component>Runtime / Network</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="17287093" author="pnowojski" created="Fri, 19 Feb 2021 14:17:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt;, could you or someone from your team take a look?&lt;/p&gt;</comment>
                            <comment id="17291606" author="mapohl" created="Fri, 26 Feb 2021 12:12:18 +0000"  >&lt;p&gt;Another build failed due to this issue: &lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=290&amp;amp;view=logs&amp;amp;j=9dc1b5dc-bcfa-5f83-eaa7-0cb181ddc267&amp;amp;t=ab910030-93db-52a7-74a3-34a0addb481b&amp;amp;l=8167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/mapohl/flink/_build/results?buildId=290&amp;amp;view=logs&amp;amp;j=9dc1b5dc-bcfa-5f83-eaa7-0cb181ddc267&amp;amp;t=ab910030-93db-52a7-74a3-34a0addb481b&amp;amp;l=8167&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17297043" author="maguowei" created="Mon, 8 Mar 2021 02:53:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14263&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14263&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17297044" author="kevin.cyj" created="Mon, 8 Mar 2021 02:58:39 +0000"  >&lt;p&gt;Sorry for the late reply, I think it is the same issue with&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-19925&quot; title=&quot;Errors$NativeIoException: readAddress(..) failed: Connection reset by peer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-19925&quot;&gt;&lt;del&gt;FLINK-19925&lt;/del&gt;&lt;/a&gt;. Previously, I spent some time looking into the issue, but no&#160;suspicion was found. I guess the cause is purely unstable network connection. I can speed more time to verify that. But I think it is not a blocker issue.&lt;/p&gt;</comment>
                            <comment id="17298337" author="mapohl" created="Tue, 9 Mar 2021 20:40:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=327&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/mapohl/flink/_build/results?buildId=327&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17298580" author="dawidwys" created="Wed, 10 Mar 2021 07:17:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14362&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14362&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17299518" author="rmetzger" created="Thu, 11 Mar 2021 12:04:31 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.apache.flink.shaded.netty4.io.netty.handler.ssl.SslHandshakeTimeoutException: handshake timed out after 10000ms
	at org.apache.flink.shaded.netty4.io.netty.handler.ssl.SslHandler$5.run(SslHandler.java:2054)
	... 8 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=8966&amp;amp;view=logs&amp;amp;j=9dc1b5dc-bcfa-5f83-eaa7-0cb181ddc267&amp;amp;t=ab910030-93db-52a7-74a3-34a0addb481b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=8966&amp;amp;view=logs&amp;amp;j=9dc1b5dc-bcfa-5f83-eaa7-0cb181ddc267&amp;amp;t=ab910030-93db-52a7-74a3-34a0addb481b&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17300059" author="maguowei" created="Fri, 12 Mar 2021 05:34:30 +0000"  >&lt;p&gt;another case:&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14500&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14500&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17300071" author="yunta" created="Fri, 12 Mar 2021 06:30:24 +0000"  >&lt;p&gt;Another instance but failed with timeout&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://myasuka.visualstudio.com/flink/_build/results?buildId=272&amp;amp;view=logs&amp;amp;j=cc649950-03e9-5fae-832&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://myasuka.visualstudio.com/flink/_build/results?buildId=272&amp;amp;view=logs&amp;amp;j=cc649950-03e9-5fae-832&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17300080" author="mapohl" created="Fri, 12 Mar 2021 06:45:12 +0000"  >&lt;p&gt;Another one:&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=337&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&amp;amp;l=6879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/mapohl/flink/_build/results?buildId=337&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&amp;amp;l=6879&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17300211" author="dawidwys" created="Fri, 12 Mar 2021 10:29:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14500&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&amp;amp;l=6787&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14500&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&amp;amp;l=6787&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17301152" author="maguowei" created="Sun, 14 Mar 2021 12:46:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14599&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&amp;amp;l=6911&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14599&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&amp;amp;l=6911&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17302491" author="dawidwys" created="Tue, 16 Mar 2021 12:57:50 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reswqa&quot; class=&quot;user-hover&quot; rel=&quot;reswqa&quot;&gt;reswqa&lt;/a&gt; any progress on the issue?&lt;/p&gt;</comment>
                            <comment id="17302508" author="pnowojski" created="Tue, 16 Mar 2021 13:12:23 +0000"  >&lt;p&gt;The amount of those failures is a bit suspicious. Has something changed recently either in the tests setup or the blocking partition that could be related?&lt;/p&gt;

&lt;p&gt;I have suspicion, especially after:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: org.apache.flink.shaded.netty4.io.netty.handler.ssl.SslHandshakeTimeoutException: handshake timed out after 10000ms
	at org.apache.flink.shaded.netty4.io.netty.handler.ssl.SslHandler$5.run(SslHandler.java:2054)
	... 8 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;that this might be cause by us doing blocking io in the netty threads when using blocking partition. This handshake time out could be easily explained by that. Also in the 5 reported failures that I checked, &quot;connection reset by peer&quot; happens around 60s into the test. Maybe this is also a problem where server frozen for x seconds, causing the client to timeout (error got lost? maybe it&apos;s in the logs?), and server side detected this and failed with &quot;connection reset by peer&quot;?&lt;/p&gt;

&lt;p&gt;Another pointer, it seems like all of the failures happened with SSL enabled.&lt;/p&gt;

&lt;p&gt;I don&apos;t know why has it started to fail now so frequently. Maybe something changed in the test setup or in the environment. I was always afraid that doing a blocking IO in the netty threads can cause problems, but that&apos;s not something we can easily change (assuming this is causing those issues). Maybe we can speed up the test? Make it lighter? Or maybe we can increase some timeouts (related to ssl?) either in Netty or in tcp stack? What worries me is that apparently this issue is happening not only in the ITCase here, but also on (cluster?) benchmarks?&lt;/p&gt;</comment>
                            <comment id="17303043" author="kevin.cyj" created="Wed, 17 Mar 2021 02:48:31 +0000"  >&lt;p&gt;&amp;gt;&#160;Maybe we can speed up the test? Make it lighter?&lt;/p&gt;

&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;&apos;s suggestion is worth trying. This test blocking shuffle several gigabytes of data with parallelism of 8. Besides, SSL&#160;encryption can also consume lots of CPU time. As mentioned by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;, maybe&#160;something changed in the test&#160;environment and after the change it&apos;s too heavy for the test to run?&lt;/p&gt;</comment>
                            <comment id="17303074" author="maguowei" created="Wed, 17 Mar 2021 04:06:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14845&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&amp;amp;l=6948&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14845&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&amp;amp;l=6948&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17303173" author="till.rohrmann" created="Wed, 17 Mar 2021 07:53:13 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://dev.azure.com/tillrohrmann/flink/_build/results?buildId=525&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/tillrohrmann/flink/_build/results?buildId=525&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17305860" author="maguowei" created="Mon, 22 Mar 2021 03:19:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=15115&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=6999&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=15115&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=6999&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17306094" author="rmetzger" created="Mon, 22 Mar 2021 10:33:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=8998&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=8998&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17306228" author="mapohl" created="Mon, 22 Mar 2021 14:16:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=355&amp;amp;view=logs&amp;amp;j=9dc1b5dc-bcfa-5f83-eaa7-0cb181ddc267&amp;amp;t=ab910030-93db-52a7-74a3-34a0addb481b&amp;amp;l=8354&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/mapohl/flink/_build/results?buildId=355&amp;amp;view=logs&amp;amp;j=9dc1b5dc-bcfa-5f83-eaa7-0cb181ddc267&amp;amp;t=ab910030-93db-52a7-74a3-34a0addb481b&amp;amp;l=8354&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17307543" author="maguowei" created="Wed, 24 Mar 2021 04:02:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=15316&amp;amp;view=logs&amp;amp;j=77a9d8e1-d610-59b3-fc2a-4766541e0e33&amp;amp;t=7c61167f-30b3-5893-cc38-a9e3d057e392&amp;amp;l=8425&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=15316&amp;amp;view=logs&amp;amp;j=77a9d8e1-d610-59b3-fc2a-4766541e0e33&amp;amp;t=7c61167f-30b3-5893-cc38-a9e3d057e392&amp;amp;l=8425&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17307774" author="gaoyunhaii" created="Wed, 24 Mar 2021 12:12:09 +0000"  >&lt;p&gt;Hi all, based on the suggestions in some offline discussion, I tried the case with HDD device and now I mainly suspect it is caused by the handshake timeout of the &lt;em&gt;SSLHandler:&lt;/em&gt; after the sink tasks started, it starts to connect to, send request and read buffers from the upstream taskmanagers (in the minicluster). Each TM only has one Netty thread, but has to serve 7 tasks. Since different tasks might send request in different time and Netty also need to read buffers from disk, so it is possible when one task send request and start SSL handshake, the Netty thread is loaded with disk IO and thus finally cause handshake timeout.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The evidences for the suspicion are that&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;For all the above failed azure tests, the failover happens about 10s after the log &quot;Converting recovered input channels&quot;, which is right before the downstream tasks send requests, and 10s is the default handshake timeout of SSLHandler&lt;/li&gt;
	&lt;li&gt;On my Mac by manually set handshake timeout to 10 milliseconds via explicitly set SecurityOptions.SSL_INTERNAL_HANDSHAKE_TIMEOUT, it could reproduce the &quot;connection reset by peer&quot; case (but since both client and server side will check the timeout, sometime the client first detect timeout and the job failed with &quot;handshake timeout&quot;), and in one ubuntu docker it could reproduce the CloseChannelException of the last case attached by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maguowei&quot; class=&quot;user-hover&quot; rel=&quot;maguowei&quot;&gt;maguowei&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;If we manually add sleep to buffer reader after all the `PartitionRequest` are processed, there would not any failover no matter how long the sleep are set, which indicates that it is unlike due to timeout in data transmission.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;To fix this issue, I think we could first try to increase&#160;SecurityOptions.SSL_INTERNAL_HANDSHAKE_TIMEOUT.&#160;&lt;/p&gt;</comment>
                            <comment id="17309506" author="pnowojski" created="Fri, 26 Mar 2021 15:39:47 +0000"  >&lt;p&gt;I&apos;ve merged SSL timeout bump to master&lt;br/&gt;
&amp;gt; merged commit 6834ecd into apache:master&lt;/p&gt;

&lt;p&gt;let&apos;s see if it solves the problem for this test. Further more let&apos;s document this issue and wait if it will ever becomes a problem for real world users.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13367419">FLINK-21967</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13338387">FLINK-19925</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nu2g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>