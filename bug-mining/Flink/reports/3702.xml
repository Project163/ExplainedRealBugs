<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15658] The same sql run in a streaming environment producing a Exception, but a batch env can run normally.</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15658</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;b&gt;summary:&lt;/b&gt;&lt;br/&gt;
The same sql can run in a batch environment normally,  but in a streaming environment there will be a exception like this:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Could not execute SQL statement. Reason:&lt;br/&gt;
org.apache.flink.table.api.ValidationException: Field names must be unique. Found duplicates: &lt;span class=&quot;error&quot;&gt;&amp;#91;f1&amp;#93;&lt;/span&gt;&lt;/p&gt;





&lt;p&gt;&lt;b&gt;The sql is:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;CREATE TABLE `tenk1` (&lt;br/&gt;
	unique1 int,&lt;br/&gt;
	unique2 int,&lt;br/&gt;
	two int,&lt;br/&gt;
	four int,&lt;br/&gt;
	ten int,&lt;br/&gt;
	twenty int,&lt;br/&gt;
	hundred int,&lt;br/&gt;
	thousand int,&lt;br/&gt;
	twothousand int,&lt;br/&gt;
	fivethous int,&lt;br/&gt;
	tenthous int,&lt;br/&gt;
	odd int,&lt;br/&gt;
	even int,&lt;br/&gt;
	stringu1 varchar,&lt;br/&gt;
	stringu2 varchar,&lt;br/&gt;
	string4 varchar&lt;br/&gt;
) WITH (&lt;br/&gt;
	&apos;connector.path&apos;=&apos;/daily_regression_test_stream_postgres_1.10/test_join/sources/tenk1.csv&apos;,&lt;br/&gt;
	&apos;format.empty-column-as-null&apos;=&apos;true&apos;,&lt;br/&gt;
	&apos;format.field-delimiter&apos;=&apos;|&apos;,&lt;br/&gt;
	&apos;connector.type&apos;=&apos;filesystem&apos;,&lt;br/&gt;
	&apos;format.derive-schema&apos;=&apos;true&apos;,&lt;br/&gt;
	&apos;format.type&apos;=&apos;csv&apos;&lt;br/&gt;
);&lt;/p&gt;

&lt;p&gt;CREATE TABLE `int4_tbl` (&lt;br/&gt;
	f1 INT&lt;br/&gt;
) WITH (&lt;br/&gt;
	&apos;connector.path&apos;=&apos;/daily_regression_test_stream_postgres_1.10/test_join/sources/int4_tbl.csv&apos;,&lt;br/&gt;
	&apos;format.empty-column-as-null&apos;=&apos;true&apos;,&lt;br/&gt;
	&apos;format.field-delimiter&apos;=&apos;|&apos;,&lt;br/&gt;
	&apos;connector.type&apos;=&apos;filesystem&apos;,&lt;br/&gt;
	&apos;format.derive-schema&apos;=&apos;true&apos;,&lt;br/&gt;
	&apos;format.type&apos;=&apos;csv&apos;&lt;br/&gt;
);&lt;/p&gt;

&lt;p&gt;select a.f1, b.f1, t.thousand, t.tenthous from&lt;br/&gt;
  tenk1 t,&lt;br/&gt;
  (select sum(f1)+1 as f1 from int4_tbl i4a) a,&lt;br/&gt;
  (select sum(f1) as f1 from int4_tbl i4b) b&lt;br/&gt;
where b.f1 = t.thousand and a.f1 = b.f1 and (a.f1+b.f1+999) = t.tenthous;&lt;/p&gt;




</description>
                <environment>&lt;p&gt;&lt;b&gt;Input data:&lt;/b&gt;&lt;br/&gt;
tenk1 is:&lt;br/&gt;
4773|9990|1|1|3|13|73|773|773|4773|4773|146|147|PBAAAA|GUOAAA|OOOOxx&lt;br/&gt;
4093|9991|1|1|3|13|93|93|93|4093|4093|186|187|LBAAAA|HUOAAA|VVVVxx&lt;br/&gt;
6587|9992|1|3|7|7|87|587|587|1587|6587|174|175|JTAAAA|IUOAAA|AAAAxx&lt;br/&gt;
6093|9993|1|1|3|13|93|93|93|1093|6093|186|187|JAAAAA|JUOAAA|HHHHxx&lt;br/&gt;
429|9994|1|1|9|9|29|429|429|429|429|58|59|NQAAAA|KUOAAA|OOOOxx&lt;br/&gt;
5780|9995|0|0|0|0|80|780|1780|780|5780|160|161|IOAAAA|LUOAAA|VVVVxx&lt;br/&gt;
1783|9996|1|3|3|3|83|783|1783|1783|1783|166|167|PQAAAA|MUOAAA|AAAAxx&lt;br/&gt;
2992|9997|0|0|2|12|92|992|992|2992|2992|184|185|CLAAAA|NUOAAA|HHHHxx&lt;br/&gt;
0|9998|0|0|0|0|0|0|0|0|0|0|1|AAAAAA|OUOAAA|OOOOxx&lt;br/&gt;
2968|9999|0|0|8|8|68|968|968|2968|2968|136|137|EKAAAA|PUOAAA|VVVVxx&lt;/p&gt;

&lt;p&gt;int4_tbl is:&lt;br/&gt;
0&lt;br/&gt;
123456&lt;br/&gt;
-123456&lt;br/&gt;
2147483647&lt;br/&gt;
-2147483647&lt;/p&gt;

&lt;p&gt;&lt;b&gt;The sql-client configuration is :&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;execution:&lt;br/&gt;
  planner: blink&lt;br/&gt;
  type: batch&lt;/p&gt;</environment>
        <key id="13280358">FLINK-15658</key>
            <summary>The same sql run in a streaming environment producing a Exception, but a batch env can run normally.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jark">Jark Wu</assignee>
                                    <reporter username="xiaojin.wy">xiaojin.wy</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sun, 19 Jan 2020 06:52:21 +0000</created>
                <updated>Tue, 4 Feb 2020 08:43:20 +0000</updated>
                            <resolved>Tue, 4 Feb 2020 08:43:20 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Table SQL / Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17029649" author="jark" created="Tue, 4 Feb 2020 08:43:20 +0000"  >&lt;p&gt;Fixed in 1.11.0: de7440e5b625ef609ce7ad6631abc507b8ca109d&lt;br/&gt;
1.10.0: c84b754b60e62f106adda47e91bfeec5ae5edeb5&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0annc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>