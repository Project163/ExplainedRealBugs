<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:23:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3530] Kafka09ITCase.testBigRecordJob fails on Travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3530</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The test case &lt;tt&gt;Kafka09ITCase.testBigRecordJob&lt;/tt&gt; failed on Travis.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/112049279/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/112049279/log.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12945410">FLINK-3530</key>
            <summary>Kafka09ITCase.testBigRecordJob fails on Travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rmetzger">Robert Metzger</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>test-stability</label>
                    </labels>
                <created>Mon, 29 Feb 2016 10:30:32 +0000</created>
                <updated>Thu, 9 Jun 2016 13:19:13 +0000</updated>
                            <resolved>Thu, 9 Jun 2016 13:18:59 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Connectors / Kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15235602" author="tlisonbee" created="Mon, 11 Apr 2016 17:57:09 +0000"  >&lt;p&gt;This test failed for me too but with a different error,&lt;br/&gt;
&lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/121312995/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/121312995/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;My error:&lt;br/&gt;
Tests run: 15, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 100.796 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.streaming.connectors.kafka.Kafka09ITCase&lt;br/&gt;
testBigRecordJob(org.apache.flink.streaming.connectors.kafka.Kafka09ITCase)  Time elapsed: 4.769 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
java.lang.AssertionError: Test failed: The program execution failed: Job execution failed.&lt;br/&gt;
	at org.junit.Assert.fail(Assert.java:88)&lt;br/&gt;
	at org.apache.flink.test.util.TestUtils.tryExecute(TestUtils.java:41)&lt;br/&gt;
	at org.apache.flink.streaming.connectors.kafka.KafkaConsumerTestBase.runBigRecordTestTopology(KafkaConsumerTestBase.java:927)&lt;br/&gt;
	at org.apache.flink.streaming.connectors.kafka.Kafka09ITCase.testBigRecordJob(Kafka09ITCase.java:96)&lt;/p&gt;

&lt;p&gt;Other error:&lt;br/&gt;
Tests run: 15, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 262.129 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.streaming.connectors.kafka.Kafka09ITCase&lt;br/&gt;
testBigRecordJob(org.apache.flink.streaming.connectors.kafka.Kafka09ITCase)  Time elapsed: 60.169 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.Exception: test timed out after 60000 milliseconds&lt;br/&gt;
	at java.lang.Object.wait(Native Method)&lt;br/&gt;
	at java.lang.Object.wait(Object.java:503)&lt;br/&gt;
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)&lt;br/&gt;
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)&lt;br/&gt;
	at org.I0Itec.zkclient.ZkConnection.create(ZkConnection.java:99)&lt;br/&gt;
	at org.I0Itec.zkclient.ZkClient$3.call(ZkClient.java:529)&lt;br/&gt;
	at org.I0Itec.zkclient.ZkClient$3.call(ZkClient.java:526)&lt;br/&gt;
	at org.I0Itec.zkclient.ZkClient.retryUntilConnected(ZkClient.java:985)&lt;br/&gt;
	at org.I0Itec.zkclient.ZkClient.create(ZkClient.java:526)&lt;br/&gt;
	at org.I0Itec.zkclient.ZkClient.createPersistent(ZkClient.java:403)&lt;br/&gt;
	at kafka.utils.ZkPath$.createPersistent(ZkUtils.scala:911)&lt;br/&gt;
	at kafka.utils.ZkUtils.createPersistentPath(ZkUtils.scala:391)&lt;br/&gt;
	at kafka.admin.AdminUtils$.deleteTopic(AdminUtils.scala:165)&lt;br/&gt;
	at kafka.admin.AdminUtils.deleteTopic(AdminUtils.scala)&lt;br/&gt;
	at org.apache.flink.streaming.connectors.kafka.KafkaTestEnvironmentImpl.deleteTestTopic(KafkaTestEnvironmentImpl.java:274)&lt;br/&gt;
	at org.apache.flink.streaming.connectors.kafka.KafkaTestBase.deleteTestTopic(KafkaTestBase.java:166)&lt;br/&gt;
	at org.apache.flink.streaming.connectors.kafka.KafkaConsumerTestBase.runBigRecordTestTopology(KafkaConsumerTestBase.java:877)&lt;br/&gt;
	at org.apache.flink.streaming.connectors.kafka.Kafka09ITCase.testBigRecordJob(Kafka09ITCase.java:96)&lt;/p&gt;</comment>
                            <comment id="15318631" author="rmetzger" created="Tue, 7 Jun 2016 15:01:24 +0000"  >&lt;p&gt;I have a similar failure like this: &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/134215958/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/134215958/log.txt&lt;/a&gt;&lt;br/&gt;
I&apos;ll look into it now&lt;/p&gt;</comment>
                            <comment id="15318798" author="githubbot" created="Tue, 7 Jun 2016 16:23:53 +0000"  >&lt;p&gt;GitHub user rmetzger opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2080&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3530&quot; title=&quot;Kafka09ITCase.testBigRecordJob fails on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3530&quot;&gt;&lt;del&gt;FLINK-3530&lt;/del&gt;&lt;/a&gt; Fix Kafka08 instability: Avoid restarts from SuccessExce&#8230;&lt;/p&gt;

&lt;p&gt;    This pull request is improving the Kafka tests stability.&lt;/p&gt;

&lt;p&gt;    These tests have one artificial test failure, the code should recover from, then, they throw a SuccessException once a stopping condition has been met.&lt;br/&gt;
    With the number of restarts set to 3, the job was restarting two times due to the SuccessException&apos;s. Sometimes, the task cancellation takes a lot of time, letting the test exceed the timeout of 60 seconds.&lt;/p&gt;

&lt;p&gt;    This pull request sets the number of restarts to one: There will be one artificial test failure, then a success exception, finishing the tests.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rmetzger/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rmetzger/flink&lt;/a&gt; flink3530&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2080.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2080.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2080&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f7033a9e4426a8351a2039bd91db377d8bdc76b0&lt;br/&gt;
Author: Robert Metzger &amp;lt;rmetzger@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-06-07T16:20:17Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3530&quot; title=&quot;Kafka09ITCase.testBigRecordJob fails on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3530&quot;&gt;&lt;del&gt;FLINK-3530&lt;/del&gt;&lt;/a&gt; Fix Kafka08 instability: Avoid restarts from SuccessException&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15319067" author="githubbot" created="Tue, 7 Jun 2016 18:25:50 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2080&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Do you know where the canceling looses the time?&lt;/p&gt;</comment>
                            <comment id="15321245" author="githubbot" created="Wed, 8 Jun 2016 19:05:38 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2080&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    These are the relevant logs of the task:&lt;br/&gt;
    ```&lt;br/&gt;
    20:11:35,397 INFO  org.apache.flink.runtime.taskmanager.Task                     - Attempting to cancel task Source: Custom Source -&amp;gt; Map -&amp;gt; Map (5/8)&lt;br/&gt;
    20:11:35,398 INFO  org.apache.flink.runtime.taskmanager.Task                     - Source: Custom Source -&amp;gt; Map -&amp;gt; Map (5/8) switched to CANCELING&lt;br/&gt;
    20:11:35,398 INFO  org.apache.flink.runtime.taskmanager.Task                     - Triggering cancellation of task code Source: Custom Source -&amp;gt; Map -&amp;gt; Map (5/8) (217f8fe570f1c82eb4ec8191e1a73291).&lt;br/&gt;
    20:12:05,400 WARN  org.apache.flink.runtime.taskmanager.Task                     - Task &apos;Source: Custom Source -&amp;gt; Map -&amp;gt; Map (5/8)&apos; did not react to cancelling signal, but is stuck in method:&lt;br/&gt;
     org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:235)&lt;br/&gt;
    org.apache.flink.runtime.taskmanager.Task.run(Task.java:587)&lt;br/&gt;
    java.lang.Thread.run(Thread.java:745)&lt;/p&gt;

&lt;p&gt;    20:12:05,510 INFO  org.apache.flink.runtime.taskmanager.Task                     - Source: Custom Source -&amp;gt; Map -&amp;gt; Map (5/8) switched to CANCELED&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    And this is the code where its waiting: &lt;a href=&quot;https://github.com/apache/flink/blob/e7586c3b2d995be164100919d7c04db003a71a90/flink-streaming-java/src/main/java/org/apache/flink/streaming/runtime/tasks/StreamTask.java#L235&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/e7586c3b2d995be164100919d7c04db003a71a90/flink-streaming-java/src/main/java/org/apache/flink/streaming/runtime/tasks/StreamTask.java#L235&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I don&apos;t exactly know why the line numbers don&apos;t really match (I would expect the code to block at the synchronized block) . I&apos;ve also checked the lines with the exact commit the error was triggered.&lt;/p&gt;

&lt;p&gt;    I was not able to reproduce this issue locally. I suspect that somebody is not releasing the lock...&lt;/p&gt;</comment>
                            <comment id="15322480" author="rmetzger" created="Thu, 9 Jun 2016 13:18:59 +0000"  >&lt;p&gt;Resolved in Flink 1.1.0 &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/ccc86e9f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/ccc86e9f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15322482" author="githubbot" created="Thu, 9 Jun 2016 13:19:13 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2080&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2twk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>