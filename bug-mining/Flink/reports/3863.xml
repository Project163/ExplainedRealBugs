<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:44:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-16411] Maven central connection timeouts on Azure Pipelines</title>
                <link>https://issues.apache.org/jira/browse/FLINK-16411</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Some test stages invoke maven again, where additional dependencies are downloaded, sometimes failing the build.&lt;/p&gt;

&lt;p&gt;This ticket is about using the Google mirror wherever possible.&lt;/p&gt;

&lt;p&gt;Examples of failing tests:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5882&amp;amp;view=logs&amp;amp;j=636f54dd-dda5-5b4b-f495-2d92ec493b6c&amp;amp;t=6c30efdf-a92a-5da3-9a6a-004c8552b2df&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5882&amp;amp;view=logs&amp;amp;j=636f54dd-dda5-5b4b-f495-2d92ec493b6c&amp;amp;t=6c30efdf-a92a-5da3-9a6a-004c8552b2df&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A failure looks like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failed to execute goal on project flink-hadoop-fs: Could not resolve dependencies &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; project org.apache.flink:flink-hadoop-fs:jar:1.11-SNAPSHOT: Could not transfer artifact org.apache.flink:flink-shaded-hadoop-2:jar:2.8.3-10.0 from/to central (https:&lt;span class=&quot;code-comment&quot;&gt;//repo.maven.apache.org/maven2): GET request of: org/apache/flink/flink-shaded-hadoop-2/2.8.3-10.0/flink-shaded-hadoop-2-2.8.3-10.0.jar from central failed: Connection reset -&amp;gt; [Help 1]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13289338">FLINK-16411</key>
            <summary>Maven central connection timeouts on Azure Pipelines</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rmetzger">Robert Metzger</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 3 Mar 2020 21:31:03 +0000</created>
                <updated>Sat, 18 Apr 2020 05:43:39 +0000</updated>
                            <resolved>Sat, 18 Apr 2020 05:43:39 +0000</resolved>
                                                    <fixVersion>1.11.0</fixVersion>
                                    <component>Build System / Azure Pipelines</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17054344" author="rmetzger" created="Sun, 8 Mar 2020 09:26:49 +0000"  >&lt;p&gt;A similar example: &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6051&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=2b7514ee-e706-5046-657b-3430666e7bd9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6051&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=2b7514ee-e706-5046-657b-3430666e7bd9&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.1:test (end-to-end-tests) on project flink-metrics-availability-test: Unable to generate classpath: org.apache.maven.artifact.resolver.ArtifactResolutionException: Could not transfer artifact org.apache.maven.surefire:surefire-grouper:jar:2.22.1 from/to central (https:&lt;span class=&quot;code-comment&quot;&gt;//repo.maven.apache.org/maven2): Entry [id:41][route:{s}-&amp;gt;https://repo.maven.apache.org:443][state:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;] has not been leased from &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; pool&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17061825" author="pnowojski" created="Wed, 18 Mar 2020 15:38:50 +0000"  >&lt;p&gt;Is this Another example of this issue?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-03-17T10:54:37.1283612Z [ERROR] Failed to execute goal on project flink-s3-fs-presto: Could not resolve dependencies &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; project org.apache.flink:flink-s3-fs-presto:jar:1.11-SNAPSHOT: Could not transfer artifact com.facebook.presto.hadoop:hadoop-apache2:jar:2.7.3-1 from/to central (https:&lt;span class=&quot;code-comment&quot;&gt;//repo.maven.apache.org/maven2): GET request of: com/facebook/presto/hadoop/hadoop-apache2/2.7.3-1/hadoop-apache2-2.7.3-1.jar from central failed: Connection reset -&amp;gt; [Help 1]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; &lt;a href=&quot;https://dev.azure.com/rmetzger/5bd3ef0a-4359-41af-abca-811b04098d2e/_apis/build/builds/6319/logs/65&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/5bd3ef0a-4359-41af-abca-811b04098d2e/_apis/build/builds/6319/logs/65&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and another one?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-03-17T15:56:17.9023372Z [ERROR] Failed to execute goal on project flink-connector-hive_2.11: Could not resolve dependencies &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; project org.apache.flink:flink-connector-hive_2.11:jar:1.11-SNAPSHOT: Could not transfer artifact javax.jms:jms:jar:1.1 from/to datanucleus (http:&lt;span class=&quot;code-comment&quot;&gt;//www.datanucleus.org/downloads/maven2): Connect to www.datanucleus.org:80 [www.datanucleus.org/80.86.85.8] failed: Connection refused (Connection refused) -&amp;gt; [Help 1]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/rmetzger/5bd3ef0a-4359-41af-abca-811b04098d2e/_apis/build/builds/6328/logs/64&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/5bd3ef0a-4359-41af-abca-811b04098d2e/_apis/build/builds/6328/logs/64&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17061833" author="rmetzger" created="Wed, 18 Mar 2020 15:45:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt; The first message belongs to this ticket (we have almost no connection resets from the google mirrors (the apache maven mirror is employing some rate-limiting).&lt;/p&gt;

&lt;p&gt;The second issue is an unresolvable dependency: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16432&quot; title=&quot;Building Hive connector gives problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16432&quot;&gt;&lt;del&gt;FLINK-16432&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17067929" author="rmetzger" created="Thu, 26 Mar 2020 18:18:10 +0000"  >&lt;p&gt;Resolved in 6a0805141088ba5dd2773aa138af7bc43bbfa432&lt;/p&gt;</comment>
                            <comment id="17068512" author="rmetzger" created="Fri, 27 Mar 2020 10:15:33 +0000"  >&lt;p&gt;I reopened this ticket. After adding the change for centrally controlling all mvn invocations, we still have connection timeouts (so far it seems, that maven is not getting stuck anymore, so there is at least some improvement)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; What do you think about the connection reset issues? They mostly occur on the Alibaba-hosted machines. I wonder if there&apos;s some connectivity issues in their DC.&lt;br/&gt;
I see two approaches we could pursue &lt;br/&gt;
1) add caching for maven artifacts for all testing jobs as well (currently we only cache for compile and python)&lt;br/&gt;
2) We use a newer maven version with proper retries for downloading missing dependencies, then we call our old maven version.&lt;/p&gt;</comment>
                            <comment id="17068535" author="zentol" created="Fri, 27 Mar 2020 10:33:52 +0000"  >&lt;p&gt;I&apos;d opt for option 1), god knows what happens if we try to mix different maven versions.&lt;/p&gt;</comment>
                            <comment id="17068793" author="rmetzger" created="Fri, 27 Mar 2020 15:04:23 +0000"  >&lt;p&gt;Thanks. I&apos;ll investigate that.&lt;br/&gt;
Sadly, the situation has actually worsened (at least subjectively).&lt;/p&gt;

&lt;p&gt;I have analyzed some recent build failures, and could not find any correlation between them:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

20200327.2 / misc / AlibabaCI003-agent2

[ERROR] Failed to execute goal on project flink-runtime-web_2.11: Could not resolve dependencies &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; project org.apache.flink:flink-runtime-web_2.11:jar:1.11-SNAPSHOT: Could not transfer artifact org.apache.flink:flink-shaded-jackson-module-jsonSchema:jar:2.10.1-10.0 from/to google-maven-central (https:&lt;span class=&quot;code-comment&quot;&gt;//maven-central-eu.storage-download.googleapis.com/maven2/): GET request of: org/apache/flink/flink-shaded-jackson-module-jsonSchema/2.10.1-10.0/flink-shaded-jackson-module-jsonSchema-2.10.1-10.0.jar from google-maven-central failed: Connection reset -&amp;gt; [Help 1]
&lt;/span&gt;

20200327.6 / connectors / AlibabaCI008-agent2

[ERROR] Failed to execute goal pl.project13.maven:git-commit-id-plugin:2.1.10:revision (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) on project flink-runtime_2.11: Execution &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; of goal pl.project13.maven:git-commit-id-plugin:2.1.10:revision failed: Plugin pl.project13.maven:git-commit-id-plugin:2.1.10 or one of its dependencies could not be resolved: Could not transfer artifact com.fasterxml.jackson.core:jackson-databind:jar:2.2.3 from/to google-maven-central (https:&lt;span class=&quot;code-comment&quot;&gt;//maven-central-eu.storage-download.googleapis.com/maven2/): GET request of: com/fasterxml/jackson/core/jackson-databind/2.2.3/jackson-databind-2.2.3.jar from google-maven-central failed: Connection reset -&amp;gt; [Help 1]
&lt;/span&gt;
20200327.6 / tests / AlibabaCI002-agent2

[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.1:test (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-test) on project flink-parent: Execution &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.22.1:test failed: Plugin org.apache.maven.plugins:maven-surefire-plugin:2.22.1 or one of its dependencies could not be resolved: Could not transfer artifact org.apache.maven.surefire:maven-surefire-common:jar:2.22.1 from/to google-maven-central (https:&lt;span class=&quot;code-comment&quot;&gt;//maven-central-eu.storage-download.googleapis.com/maven2/): GET request of: org/apache/maven/surefire/maven-surefire-common/2.22.1/maven-surefire-common-2.22.1.jar from google-maven-central failed: Connection reset -&amp;gt; [Help 1]
&lt;/span&gt;
20200327.7 / connectors / AlibabaCI002-agent2

[ERROR] Failed to execute goal on project flink-sql-parser: Could not resolve dependencies &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; project org.apache.flink:flink-sql-parser:jar:1.11-SNAPSHOT: Could not transfer artifact org.apache.calcite:calcite-core:jar:1.21.0 from/to google-maven-central (https:&lt;span class=&quot;code-comment&quot;&gt;//maven-central-eu.storage-download.googleapis.com/maven2/): GET request of: org/apache/calcite/calcite-core/1.21.0/calcite-core-1.21.0.jar from google-maven-central failed: Connection reset -&amp;gt; [Help 1]
&lt;/span&gt;
20200327.7 / kafka_gelly / AlibabaCI005-agent1

[ERROR] Failed to execute goal org.scalastyle:scalastyle-maven-plugin:1.0.0:check (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) on project flink-runtime_2.11: Execution &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; of goal org.scalastyle:scalastyle-maven-plugin:1.0.0:check failed: Plugin org.scalastyle:scalastyle-maven-plugin:1.0.0 or one of its dependencies could not be resolved: Could not transfer artifact org.scalastyle:scalastyle_2.11:jar:1.0.0 from/to google-maven-central (https:&lt;span class=&quot;code-comment&quot;&gt;//maven-central-eu.storage-download.googleapis.com/maven2/): GET request of: org/scalastyle/scalastyle_2.11/1.0.0/scalastyle_2.11-1.0.0.jar from google-maven-central failed: Read timed out -&amp;gt; [Help 1]
&lt;/span&gt;

20200327.7 / tests / AlibabaCI004-agent1

[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:2.17:check (validate) on project flink-parent: Execution validate of goal org.apache.maven.plugins:maven-checkstyle-plugin:2.17:check failed: Plugin org.apache.maven.plugins:maven-checkstyle-plugin:2.17 or one of its dependencies could not be resolved: Could not transfer artifact com.puppycrawl.tools:checkstyle:jar:8.14 from/to google-maven-central (https:&lt;span class=&quot;code-comment&quot;&gt;//maven-central-eu.storage-download.googleapis.com/maven2/): GET request of: com/puppycrawl/tools/checkstyle/8.14/checkstyle-8.14.jar from google-maven-central failed: Connection reset -&amp;gt; [Help 1]
&lt;/span&gt;
20200327.7 / legacy_scheduler / AlibabaCI003-agent2

[ERROR] Failed to execute goal org.scalastyle:scalastyle-maven-plugin:1.0.0:check (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) on project flink-runtime_2.11: Execution &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; of goal org.scalastyle:scalastyle-maven-plugin:1.0.0:check failed: Plugin org.scalastyle:scalastyle-maven-plugin:1.0.0 or one of its dependencies could not be resolved: Could not transfer artifact org.scalastyle:scalastyle_2.11:jar:1.0.0 from/to google-maven-central (https:&lt;span class=&quot;code-comment&quot;&gt;//maven-central-eu.storage-download.googleapis.com/maven2/): GET request of: org/scalastyle/scalastyle_2.11/1.0.0/scalastyle_2.11-1.0.0.jar from google-maven-central failed: Connection reset -&amp;gt; [Help 1]
&lt;/span&gt;
20200327.7 / misc / AlibabaCI002-agent2

[ERROR] Failed to execute goal pl.project13.maven:git-commit-id-plugin:2.1.10:revision (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) on project flink-runtime_2.11: Execution &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; of goal pl.project13.maven:git-commit-id-plugin:2.1.10:revision failed: Plugin pl.project13.maven:git-commit-id-plugin:2.1.10 or one of its dependencies could not be resolved: Could not transfer artifact com.fasterxml.jackson.core:jackson-databind:jar:2.2.3 from/to google-maven-central (https:&lt;span class=&quot;code-comment&quot;&gt;//maven-central-eu.storage-download.googleapis.com/maven2/): GET request of: com/fasterxml/jackson/core/jackson-databind/2.2.3/jackson-databind-2.2.3.jar from google-maven-central failed: Connection reset -&amp;gt; [Help 1]
&lt;/span&gt;

20200327.8 / core / AlibabaCI006-agent1

[ERROR] Failed to execute goal on project flink-table-planner_2.11: Could not resolve dependencies &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; project org.apache.flink:flink-table-planner_2.11:jar:1.11-SNAPSHOT: Could not transfer artifact org.codehaus.janino:janino:jar:3.0.9 from/to google-maven-central (https:&lt;span class=&quot;code-comment&quot;&gt;//maven-central-eu.storage-download.googleapis.com/maven2/): GET request of: org/codehaus/janino/janino/3.0.9/janino-3.0.9.jar from google-maven-central failed: Connection reset -&amp;gt; [Help 1]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17068859" author="zentol" created="Fri, 27 Mar 2020 16:35:20 +0000"  >&lt;p&gt;Well, since we spread out or calls to different maven repositories before then maybe this prevented some rate limiting or similar?&lt;/p&gt;</comment>
                            <comment id="17068986" author="rmetzger" created="Fri, 27 Mar 2020 18:58:17 +0000"  >&lt;p&gt;Yes, I was wondering the same. I think I&apos;ll reach out to the Google folks running the mirror.&lt;/p&gt;

&lt;p&gt;I have also experimented with using &lt;tt&gt;-Dhttp.keepAlive=false&lt;/tt&gt; instead of &lt;tt&gt;-Dmaven.wagon.http.pool=false&lt;/tt&gt; (as this was suggested in &lt;a href=&quot;https://issues.apache.org/jira/browse/WAGON-486&quot; title=&quot;Wagon fails to download artifacts if number of dropped pooled connections (by intermediate) are greater than default retry count&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WAGON-486&quot;&gt;&lt;del&gt;WAGON-486&lt;/del&gt;&lt;/a&gt;), but that made the situation even worse.&lt;/p&gt;

&lt;p&gt;My experiments with using caching for all tasks look quite promising. I&apos;ll run 5 builds over night to see what the failure rate is.&lt;/p&gt;
</comment>
                            <comment id="17069378" author="pnowojski" created="Sat, 28 Mar 2020 10:28:56 +0000"  >&lt;p&gt;Can we run our own mvn cache on the AliCloud or sth like that?&lt;/p&gt;</comment>
                            <comment id="17071028" author="rmetzger" created="Mon, 30 Mar 2020 14:32:00 +0000"  >&lt;p&gt;Yes, its very easy to set up a maven cache. I&apos;ve considered this option as well.&lt;/p&gt;

&lt;p&gt;The google guys mentioned there were were some issues (but I don&apos;t believe that this was the cause. We had more cases of the issue today).&lt;/p&gt;

&lt;p&gt;Using Azure caching is very reliable, but it adds another 10 minutes of build time per job (it is only downloading 2GBs of artifacts, but there are quite some retries). These retries are another indicator for the problem being our machines / connectivity.&lt;/p&gt;</comment>
                            <comment id="17071890" author="rmetzger" created="Tue, 31 Mar 2020 15:25:10 +0000"  >&lt;p&gt;Merged a PR in f728eec8c71f57447702840f3e1f8f7aaf2bd16f that enables the cache for all tasks to get the builds green for now.&lt;/p&gt;

&lt;p&gt;I will also run some experiments with a maven cache in the same network as the CI servers.&lt;/p&gt;</comment>
                            <comment id="17073505" author="rmetzger" created="Thu, 2 Apr 2020 08:30:43 +0000"  >&lt;p&gt;I have set up a Maven Cache, my results:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Out of 8 builds (each build has 11 jobs), 0 jobs failed&lt;/li&gt;
	&lt;li&gt;I analyzed the time of one build, it is 22% faster (93 minutes)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I have two concerns against introducing a Maven Cache:&lt;br/&gt;
1. we introduce a single point of failure&lt;br/&gt;
2. Because the cache is only accessible for the CI machines, we will need to add a few conditions to our build logic (disable the cache on ali machines + configure a different maven repository). This will make the build config files more complicated.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; what do you think? I tend to give the maven cache a try, because of the much improved build times.&lt;/p&gt;
</comment>
                            <comment id="17073806" author="rmetzger" created="Thu, 2 Apr 2020 14:57:06 +0000"  >&lt;p&gt;Another case of&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.1:test (end-to-end-tests) on project flink-metrics-availability-test: Unable to generate classpath: org.apache.maven.artifact.resolver.ArtifactResolutionException: Could not transfer artifact org.apache.maven.surefire:surefire-grouper:jar:2.22.1 from/to google-maven-central (https:&lt;span class=&quot;code-comment&quot;&gt;//maven-central-eu.storage-download.googleapis.com/maven2/): Entry [id:13][route:{s}-&amp;gt;https://maven-central-eu.storage-download.googleapis.com:443][state:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;] has not been leased from &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; pool
&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6982&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6982&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Edit: there&apos;s now a separate ticket for this:&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16947&quot; title=&quot;ArtifactResolutionException: Could not transfer artifact.  Entry [...] has not been leased from this pool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16947&quot;&gt;&lt;del&gt;FLINK-16947&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17073808" author="zentol" created="Thu, 2 Apr 2020 15:03:21 +0000"  >&lt;p&gt;There aren&apos;t exactly many other options so +1 to setting up the cache.&lt;/p&gt;</comment>
                            <comment id="17073838" author="rmetzger" created="Thu, 2 Apr 2020 15:46:01 +0000"  >&lt;p&gt;Thanks. I will wait till mid next week for this. I would really like to have a few days of green builds and no experiments.&lt;br/&gt;
It might be a bit slower, but it at least works.&lt;/p&gt;</comment>
                            <comment id="17079486" author="rmetzger" created="Thu, 9 Apr 2020 15:32:36 +0000"  >&lt;p&gt;Another approach would be adding the maven dependencies into the docker image.&lt;/p&gt;

&lt;p&gt;I got the idea from here, and I also posted our problem there: &lt;a href=&quot;https://github.com/microsoft/azure-pipelines-tasks/issues/11864&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/microsoft/azure-pipelines-tasks/issues/11864&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17079502" author="zentol" created="Thu, 9 Apr 2020 15:46:27 +0000"  >&lt;p&gt;Are the docker image downloads not affected by the (apparently) slow connection?&lt;/p&gt;</comment>
                            <comment id="17079648" author="rmetzger" created="Thu, 9 Apr 2020 18:24:45 +0000"  >&lt;p&gt;The connection of the machines is limited, but not to justify more than 1hr for downloading 1gb. You can see that the &quot;pipeline artifacts&quot; from compile to the test stages usually download in ~2m.&lt;br/&gt;
On the Alibaba-hosted machines, the containers are usually already on the machine, so no need to download.&lt;/p&gt;

&lt;p&gt;I will actually experiment with this variant, as it might really speed things up insanely. We just need to regularly update the images, which is a bit shitty.&lt;br/&gt;
But maybe Azure is going to fix the issue in the meantime.&lt;/p&gt;</comment>
                            <comment id="17080313" author="jark" created="Fri, 10 Apr 2020 07:46:40 +0000"  >&lt;p&gt;Another instance:&#160;&lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=7281&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&amp;amp;l=6705&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=7281&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&amp;amp;l=6705&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] No plugin found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; prefix &lt;span class=&quot;code-quote&quot;&gt;&apos;archetype&apos;&lt;/span&gt; in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories [local (/home/vsts/work/1/.m2/repository), google-maven-central (https:&lt;span class=&quot;code-comment&quot;&gt;//maven-central-eu.storage-download.googleapis.com/maven2/)] -&amp;gt; [Help 1]
&lt;/span&gt;[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt;.
[ERROR] Re-run Maven using the -X &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http:&lt;span class=&quot;code-comment&quot;&gt;//cwiki.apache.org/confluence/display/MAVEN/NoPluginFoundForPrefixException&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17086312" author="rmetzger" created="Sat, 18 Apr 2020 05:43:35 +0000"  >&lt;p&gt;For the self-hosted machines in AliCloud, we now use a nexus mirror in ali cloud: &lt;a href=&quot;https://github.com/apache/flink/commit/bdc6693de8928e097d3f785aa1dd5ec586fc1943&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/bdc6693de8928e097d3f785aa1dd5ec586fc1943&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Closing this ticket for now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13293267">FLINK-16720</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 30 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0c4ps:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>