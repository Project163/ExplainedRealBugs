<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:00:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-23833] Cache of ShuffleDescriptors should be individually cleaned up</title>
                <link>https://issues.apache.org/jira/browse/FLINK-23833</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;font color=&quot;#172b4d&quot;&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-23005&quot; title=&quot;Cache the compressed serialized value of ShuffleDescriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-23005&quot;&gt;&lt;del&gt;FLINK-23005&lt;/del&gt;&lt;/a&gt;, we introduce the cache of compressed serialized value for ShuffleDescriptors to improve the performance of deployment. To make sure the cache wouldn&apos;t stay too long and become a burden for GC, the cache would be cleaned up when the partition is released or reset for new execution. In the implementation, the cache of the entire IntermediateResult is cleaned up because a partition is released only when the entire IntermediateResult is released. &lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#172b4d&quot;&gt;However, after &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-22017&quot; title=&quot;Regions may never be scheduled when there are cross-region blocking edges&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-22017&quot;&gt;&lt;del&gt;FLINK-22017&lt;/del&gt;&lt;/a&gt;, the BLOCKING result partition is allowed to be consumable individually. It also means that the result partition doesn&apos;t need to wait for other result partitions and can be released individually. After this change, there may be a scene: when a result partition is finished, the cache of IntermediateResult on the blob is deleted, while other result partitions corresponding to this IntermediateResult is just deployed to the TaskExecutor. Then when TaskExecutors are trying to download TDD from the blob, they will find the blob is deleted and get stuck.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#172b4d&quot;&gt;This bug only happens for jobs with POINTWISE BLOCKING edge. Also, the&#160;&lt;tt&gt;blob.offload.minsize&lt;/tt&gt;&#160;is set to be a extremely small value, since the size of&#160; ShuffleDescriptors of POINTWISE BLOCKING edges is usually small. To solve this issue, we just need to clean up the cache of ShuffleDescriptors individually.&lt;/font&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13395619">FLINK-23833</key>
            <summary>Cache of ShuffleDescriptors should be individually cleaned up</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Thesharing">Zhilong Hong</assignee>
                                    <reporter username="Thesharing">Zhilong Hong</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 17 Aug 2021 06:59:04 +0000</created>
                <updated>Mon, 30 Aug 2021 07:50:19 +0000</updated>
                            <resolved>Mon, 30 Aug 2021 07:50:19 +0000</resolved>
                                    <version>1.14.0</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.15.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17406603" author="zhuzh" created="Mon, 30 Aug 2021 07:50:19 +0000"  >&lt;p&gt;Fixed via:&lt;br/&gt;
master:&lt;br/&gt;
8d3ec4a2fb1c9e07ee386dced15e1f64f359c6a2&lt;br/&gt;
ef6ef809b17b4547194c247975fb4566a19679f0&lt;br/&gt;
eba8f574c550123004ed4f557cef28ff557cd88e&lt;br/&gt;
1b4340a416bb7da39bb194da2faf3fc5e83fc5d9&lt;br/&gt;
1d38803c408fd4f4984913605030394d56bb160e&lt;/p&gt;

&lt;p&gt;release-1.14:&lt;br/&gt;
f1eaf314ef232c1e604a49122857bbd99ad71a97&lt;br/&gt;
d4f8bb18ebe98ab4fd0d08ec24b00794d732cb38&lt;br/&gt;
f7bedb0603c33cb4e25c62c9899edb709b264371&lt;br/&gt;
daf997b7a13a62e251a9275a1b631697dea413bd&lt;br/&gt;
be857d1fdf8853b0315152521e27714ced6b1204&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13384043">FLINK-23005</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13368374">FLINK-22017</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0tyyw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>