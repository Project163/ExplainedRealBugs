<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-14091] Job can not trigger checkpoint forever after zookeeper change leader </title>
                <link>https://issues.apache.org/jira/browse/FLINK-14091</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;when zk change leader, the state of curator is suspended,job manager can not tigger checkpoint.but it doesn&apos;t tigger checkpoint after zk resume.&lt;/p&gt;

&lt;p&gt;we found that the lastState in the class&#160;ZooKeeperCheckpointIDCounter&#160; never change back to normal when it fall into SUSPENDED or LOST.&lt;/p&gt;
&lt;h6&gt;&lt;a name=&quot;%2F&quot;&gt;&lt;/a&gt;&lt;em&gt;/**&lt;/em&gt;&lt;/h6&gt;
&lt;p&gt; _* Connection state listener. In case of {@link ConnectionState#SUSPENDED} or &lt;/p&gt;
{@link_
 _* ConnectionState#LOST} we are not guaranteed to read a current count from ZooKeeper._&lt;br/&gt;
 &lt;em&gt;*/&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;private static class SharedCountConnectionStateListener implements ConnectionStateListener {&lt;/em&gt;&lt;br/&gt;
&lt;br/&gt;
 &lt;em&gt;private volatile ConnectionState lastState;&lt;/em&gt;&lt;br/&gt;
&lt;br/&gt;
 &lt;em&gt;@Override&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;public void stateChanged(CuratorFramework client, ConnectionState newState) {&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;if (newState == ConnectionState.SUSPENDED || newState == ConnectionState.LOST) {&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;lastState = newState;&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;}&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;}&lt;/em&gt;&lt;br/&gt;
&lt;br/&gt;
 &lt;em&gt;private ConnectionState getLastState() {&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;return lastState;&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;}&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;}&lt;/em&gt;&lt;br/&gt;
&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;br/&gt;
we change the state back. after test, solve the problem.&lt;br/&gt;
&lt;br/&gt;
&#160;&lt;br/&gt;
h6. &lt;em&gt;/**&lt;/em&gt;&lt;br/&gt;
 _* Connection state listener. In case of {@link ConnectionState#SUSPENDED} or {@link_
 _* ConnectionState#LOST}
&lt;p&gt; we are not guaranteed to read a current count from ZooKeeper._&lt;br/&gt;
 &lt;em&gt;*/&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;private static class SharedCountConnectionStateListener implements ConnectionStateListener {&lt;/em&gt;&lt;/p&gt;

&lt;p&gt; &lt;em&gt;private volatile ConnectionState lastState;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt; &lt;em&gt;@Override&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;public void stateChanged(CuratorFramework client, ConnectionState newState) {&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;if (newState == ConnectionState.SUSPENDED || newState == ConnectionState.LOST) {&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;lastState = newState;&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;}&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;else{&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;/* if connectionState is not SUSPENDED and LOST, reset lastState. */&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;lastState = null;&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;}&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;}&lt;/em&gt;&lt;/p&gt;

&lt;p&gt; &lt;em&gt;private ConnectionState getLastState() {&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;return lastState;&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;}&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;}&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;log&#65306;&lt;/p&gt;
&lt;h6&gt;&lt;a name=&quot;%7B%7B%7B%7B2019091613%3A38%3A38%2C020INFO%C2%A0org.apache.flink.shaded.zookeeper.org.apache.zookeeper.ClientCnxn%C2%A0Unableto%C2%A0%7D%7D%7B%7Bread%7D%7D%C2%A0%7B%7Badditionaldatafromserversessionid0x26cff6487c2000e%2Clikelyserverhasclosedsocket%2C...&quot;&gt;&lt;/a&gt;{{&lt;tt&gt;2019-09-16 13:38:38,020 INFO&#160; org.apache.flink.shaded.zookeeper.org.apache.zookeeper.ClientCnxn&#160; - Unable to&#160;&lt;/tt&gt;&lt;tt&gt;read&lt;/tt&gt;&#160;&lt;tt&gt;additional data from server sessionid 0x26cff6487c2000e, likely server has closed socket, closing socket connection and attempting reconnect&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,122 INFO&#160; org.apache.flink.shaded.curator.org.apache.curator.framework.state.ConnectionStateManager&#160; - State change: SUSPENDED&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,123 WARN&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper suspended. Can no longer retrieve the leader from ZooKeeper.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,126 WARN&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper suspended. Can no longer retrieve the leader from ZooKeeper.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,126 WARN&#160; org.apache.flink.runtime.jobmanager.ZooKeeperSubmittedJobGraphStore&#160; - ZooKeeper connection SUSPENDING. Changes to the submitted job graphs are not monitored (temporarily).&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,128 WARN&#160; org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionService&#160; - Connection to ZooKeeper suspended. The contender akka.tcp:&lt;/tt&gt;&lt;tt&gt;//flink&lt;/tt&gt;&lt;tt&gt;@node007224:19115&lt;/tt&gt;&lt;tt&gt;/user/dispatcher&lt;/tt&gt;&#160;&lt;tt&gt;no longer participates&#160;&lt;/tt&gt;&lt;tt&gt;in&lt;/tt&gt;&#160;&lt;tt&gt;the leader election.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,128 WARN&#160; org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionService&#160; - Connection to ZooKeeper suspended. The contender akka.tcp:&lt;/tt&gt;&lt;tt&gt;//flink&lt;/tt&gt;&lt;tt&gt;@node007224:19115&lt;/tt&gt;&lt;tt&gt;/user/resourcemanager&lt;/tt&gt;&#160;&lt;tt&gt;no longer participates&#160;&lt;/tt&gt;&lt;tt&gt;in&lt;/tt&gt;&#160;&lt;tt&gt;the leader election.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,128 WARN&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper suspended. Can no longer retrieve the leader from ZooKeeper.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,128 WARN&#160; org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionService&#160; - Connection to ZooKeeper suspended. The contender http:&lt;/tt&gt;&lt;tt&gt;//node007224&lt;/tt&gt;&lt;tt&gt;:8081 no longer participates&#160;&lt;/tt&gt;&lt;tt&gt;in&lt;/tt&gt;&#160;&lt;tt&gt;the leader election.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,128 WARN&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper suspended. Can no longer retrieve the leader from ZooKeeper.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,128 WARN&#160; org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionService&#160; - Connection to ZooKeeper suspended. The contender akka.tcp:&lt;/tt&gt;&lt;tt&gt;//flink&lt;/tt&gt;&lt;tt&gt;@node007224:19115&lt;/tt&gt;&lt;tt&gt;/user/jobmanager_2&lt;/tt&gt;&#160;&lt;tt&gt;no longer participates&#160;&lt;/tt&gt;&lt;tt&gt;in&lt;/tt&gt;&#160;&lt;tt&gt;the leader election.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,128 WARN&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper suspended. Can no longer retrieve the leader from ZooKeeper.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:38,128 WARN&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper suspended. Can no longer retrieve the leader from ZooKeeper.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,109 WARN&#160; org.apache.flink.shaded.zookeeper.org.apache.zookeeper.ClientCnxn&#160; - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named&#160;&lt;/tt&gt;&lt;tt&gt;&apos;Client&apos;&lt;/tt&gt;&#160;&lt;tt&gt;was found&#160;&lt;/tt&gt;&lt;tt&gt;in&lt;/tt&gt;&#160;&lt;tt&gt;specified JAAS configuration&#160;&lt;/tt&gt;&lt;tt&gt;file&lt;/tt&gt;&lt;tt&gt;:&#160;&lt;/tt&gt;&lt;tt&gt;&apos;/tmp/jaas-4823064314619540149.conf&apos;&lt;/tt&gt;&lt;tt&gt;. Will&#160;&lt;/tt&gt;&lt;tt&gt;continue&lt;/tt&gt;&#160;&lt;tt&gt;connection to Zookeeper server without SASL authentication,&#160;&lt;/tt&gt;&lt;tt&gt;if&lt;/tt&gt;&#160;&lt;tt&gt;Zookeeper server allows it.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,109 INFO&#160; org.apache.flink.shaded.zookeeper.org.apache.zookeeper.ClientCnxn&#160; - Opening socket connection to server 192.168.7.231&lt;/tt&gt;&lt;tt&gt;/192&lt;/tt&gt;&lt;tt&gt;.168.7.231:2181&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,109 ERROR org.apache.flink.shaded.curator.org.apache.curator.ConnectionState&#160; - Authentication failed&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,110 INFO&#160; org.apache.flink.shaded.zookeeper.org.apache.zookeeper.ClientCnxn&#160; - Socket connection established to 192.168.7.231&lt;/tt&gt;&lt;tt&gt;/192&lt;/tt&gt;&lt;tt&gt;.168.7.231:2181, initiating session&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,112 INFO&#160; org.apache.flink.shaded.zookeeper.org.apache.zookeeper.ClientCnxn&#160; - Unable to&#160;&lt;/tt&gt;&lt;tt&gt;read&lt;/tt&gt;&#160;&lt;tt&gt;additional data from server sessionid 0x26cff6487c2000e, likely server has closed socket, closing socket connection and attempting reconnect&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,778 WARN&#160; org.apache.flink.shaded.zookeeper.org.apache.zookeeper.ClientCnxn&#160; - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named&#160;&lt;/tt&gt;&lt;tt&gt;&apos;Client&apos;&lt;/tt&gt;&#160;&lt;tt&gt;was found&#160;&lt;/tt&gt;&lt;tt&gt;in&lt;/tt&gt;&#160;&lt;tt&gt;specified JAAS configuration&#160;&lt;/tt&gt;&lt;tt&gt;file&lt;/tt&gt;&lt;tt&gt;:&#160;&lt;/tt&gt;&lt;tt&gt;&apos;/tmp/jaas-4823064314619540149.conf&apos;&lt;/tt&gt;&lt;tt&gt;. Will&#160;&lt;/tt&gt;&lt;tt&gt;continue&lt;/tt&gt;&#160;&lt;tt&gt;connection to Zookeeper server without SASL authentication,&#160;&lt;/tt&gt;&lt;tt&gt;if&lt;/tt&gt;&#160;&lt;tt&gt;Zookeeper server allows it.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,778 INFO&#160; org.apache.flink.shaded.zookeeper.org.apache.zookeeper.ClientCnxn&#160; - Opening socket connection to server 192.168.7.230&lt;/tt&gt;&lt;tt&gt;/192&lt;/tt&gt;&lt;tt&gt;.168.7.230:2181&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,778 ERROR org.apache.flink.shaded.curator.org.apache.curator.ConnectionState&#160; - Authentication failed&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,778 INFO&#160; org.apache.flink.shaded.zookeeper.org.apache.zookeeper.ClientCnxn&#160; - Socket connection established to 192.168.7.230&lt;/tt&gt;&lt;tt&gt;/192&lt;/tt&gt;&lt;tt&gt;.168.7.230:2181, initiating session&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,780 INFO&#160; org.apache.flink.shaded.zookeeper.org.apache.zookeeper.ClientCnxn&#160; - Session establishment complete on server 192.168.7.230&lt;/tt&gt;&lt;tt&gt;/192&lt;/tt&gt;&lt;tt&gt;.168.7.230:2181, sessionid = 0x26cff6487c2000e, negotiated timeout = 60000&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,780 INFO&#160; org.apache.flink.shaded.curator.org.apache.curator.framework.state.ConnectionStateManager&#160; - State change: RECONNECTED&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,780 INFO&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper was reconnected. Leader retrieval can be restarted.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,780 INFO&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper was reconnected. Leader retrieval can be restarted.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,780 INFO&#160; org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionService&#160; - Connection to ZooKeeper was reconnected. Leader election can be restarted.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,780 INFO&#160; org.apache.flink.runtime.jobmanager.ZooKeeperSubmittedJobGraphStore&#160; - ZooKeeper connection RECONNECTED. Changes to the submitted job graphs are monitored again.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,780 INFO&#160; org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionService&#160; - Connection to ZooKeeper was reconnected. Leader election can be restarted.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,781 INFO&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper was reconnected. Leader retrieval can be restarted.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,781 INFO&#160; org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionService&#160; - Connection to ZooKeeper was reconnected. Leader election can be restarted.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,781 INFO&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper was reconnected. Leader retrieval can be restarted.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,781 INFO&#160; org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionService&#160; - Connection to ZooKeeper was reconnected. Leader election can be restarted.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,781 INFO&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper was reconnected. Leader retrieval can be restarted.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:39,781 INFO&#160; org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService&#160; - Connection to ZooKeeper was reconnected. Leader retrieval can be restarted.&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:43,142 INFO&#160; org.apache.flink.runtime.checkpoint.CheckpointCoordinator&#160;&#160;&#160;&#160; - Completed checkpoint 6995&#160;&lt;/tt&gt;&lt;tt&gt;for&lt;/tt&gt;&#160;&lt;tt&gt;job 21b6ef566750f5766443641254e8e1a9 (16841 bytes&#160;&lt;/tt&gt;&lt;tt&gt;in&lt;/tt&gt;&#160;&lt;tt&gt;49 ms).&lt;/tt&gt;}}{{&lt;tt&gt;2019-09-16 13:38:43,144 ERROR org.apache.flink.runtime.checkpoint.CheckpointCoordinator&#160;&#160;&#160;&#160; - Exception&#160;&lt;/tt&gt;&lt;tt&gt;while&lt;/tt&gt;&#160;&lt;tt&gt;triggering checkpoint&#160;&lt;/tt&gt;&lt;tt&gt;for&lt;/tt&gt;&#160;&lt;tt&gt;job 21b6ef566750f5766443641254e8e1a9.&lt;/tt&gt;}}{{&lt;tt&gt;java.lang.IllegalStateException: Connection state: SUSPENDED&lt;/tt&gt;}}{{&lt;tt&gt;&#160;&#160;&#160;&#160;&lt;/tt&gt;&lt;tt&gt;at org.apache.flink.runtime.checkpoint.ZooKeeperCheckpointIDCounter.checkConnectionState(ZooKeeperCheckpointIDCounter.java:159)&lt;/tt&gt;}}{{&lt;tt&gt;&#160;&#160;&#160;&#160;&lt;/tt&gt;&lt;tt&gt;at org.apache.flink.runtime.checkpoint.ZooKeeperCheckpointIDCounter.get(ZooKeeperCheckpointIDCounter.java:133)&lt;/tt&gt;}}{{&lt;tt&gt;&#160;&#160;&#160;&#160;&lt;/tt&gt;&lt;tt&gt;at org.apache.flink.runtime.checkpoint.CheckpointCoordinator.triggerCheckpoint(CheckpointCoordinator.java:448)&lt;/tt&gt;}}{{&lt;tt&gt;&#160;&#160;&#160;&#160;&lt;/tt&gt;&lt;tt&gt;at org.apache.flink.runtime.checkpoint.CheckpointCoordinator$ScheduledTrigger.run(CheckpointCoordinator.java:1323)&lt;/tt&gt;}}{{&lt;tt&gt;&#160;&#160;&#160;&#160;&lt;/tt&gt;&lt;tt&gt;at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)&lt;/tt&gt;}}{{&lt;tt&gt;&#160;&#160;&#160;&#160;&lt;/tt&gt;&lt;tt&gt;at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)&lt;/tt&gt;}}{{&lt;tt&gt;&#160;&#160;&#160;&#160;&lt;/tt&gt;&lt;tt&gt;at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)&lt;/tt&gt;}}{{&lt;tt&gt;&#160;&#160;&#160;&#160;&lt;/tt&gt;&lt;tt&gt;at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)&lt;/tt&gt;}}{{&lt;tt&gt;&#160;&#160;&#160;&#160;&lt;/tt&gt;&lt;tt&gt;at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&lt;/tt&gt;}}{{&lt;tt&gt;&#160;&#160;&#160;&#160;&lt;/tt&gt;&lt;tt&gt;at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&lt;/tt&gt;}}{{&lt;tt&gt;&#160;&#160;&#160;&#160;&lt;/tt&gt;&lt;tt&gt;at java.lang.Thread.run(Thread.java:745)&lt;/tt&gt;}}&lt;/h6&gt;</description>
                <environment></environment>
        <key id="13257010">FLINK-14091</key>
            <summary>Job can not trigger checkpoint forever after zookeeper change leader </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tison">Zili Chen</assignee>
                                    <reporter username="moon_storm">Peng Wang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 17 Sep 2019 02:00:32 +0000</created>
                <updated>Mon, 10 Feb 2020 11:41:06 +0000</updated>
                            <resolved>Wed, 15 Jan 2020 08:36:48 +0000</resolved>
                                    <version>1.9.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Runtime / Checkpointing</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>9</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16931022" author="greeensy" created="Tue, 17 Sep 2019 02:35:44 +0000"  >&lt;p&gt;Same problem&#65281;&lt;/p&gt;</comment>
                            <comment id="16931030" author="yunta" created="Tue, 17 Sep 2019 02:57:47 +0000"  >&lt;p&gt;From the error description, I think &lt;tt&gt;SharedCountConnectionStateListener&lt;/tt&gt; should also handle the connection state after &lt;tt&gt;RECONNECTED&lt;/tt&gt;, CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=uce&quot; class=&quot;user-hover&quot; rel=&quot;uce&quot;&gt;uce&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16931044" author="moon_storm" created="Tue, 17 Sep 2019 03:16:20 +0000"  >&lt;p&gt;&lt;tt&gt;SharedCountConnectionStateListener already handle it(as shown below), but&#160;ZooKeeperCheckpointIDCounter not.&#160;&lt;/tt&gt;&lt;/p&gt;
&lt;h6&gt;&lt;a name=&quot;%40Override&quot;&gt;&lt;/a&gt;@Override&lt;/h6&gt;
&lt;p&gt;public void stateChanged(CuratorFramework client, ConnectionState newState) {&lt;br/&gt;
 if (newState == ConnectionState.SUSPENDED || newState == ConnectionState.LOST) &lt;/p&gt;
{
 lastState = newState;
 }
&lt;p&gt; else&lt;/p&gt;
{
 /* if connectionState is not SUSPENDED and LOST, reset lastState. */
 lastState = null;
 }
&lt;p&gt;}&lt;/p&gt;</comment>
                            <comment id="17007197" author="tison" created="Fri, 3 Jan 2020 03:22:18 +0000"  >&lt;p&gt;It&apos;s a known issue we also faced internally. I have a fix and will push a pull request later today.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17007206" author="tison" created="Fri, 3 Jan 2020 03:40:16 +0000"  >&lt;p&gt;Here is the &lt;a href=&quot;https://github.com/apache/flink/pull/10754&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pull request&lt;/a&gt;. You can review and comment. Also I&apos;m wondering which version(s) will have this fix.&lt;/p&gt;</comment>
                            <comment id="17010654" author="carp84" created="Wed, 8 Jan 2020 12:41:49 +0000"  >&lt;p&gt;Seems to be something we should try to fix in 1.10.0&lt;/p&gt;</comment>
                            <comment id="17015728" author="till.rohrmann" created="Wed, 15 Jan 2020 08:36:48 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;master:&lt;br/&gt;
4b98956f968cb7abf83673e570262f439ca99fe9&lt;br/&gt;
25b169744d348afa9d7deac98fa7ab3592343b32&lt;br/&gt;
7a0fa1e09979f91f6787c63db2af8143faa8e973&lt;br/&gt;
7455a0946ef80ea45f0e79116f99c2812cb6aa5f&lt;/p&gt;

&lt;p&gt;1.10.0:&lt;br/&gt;
7181254cb45be275039b47db14ac8ff1c030577e&lt;br/&gt;
7f27bb6ae139e8628230e5caaaf7b2550c2d4490&lt;br/&gt;
7fcda36fe58a28891c4104ec9926b1bf281e7c49&lt;br/&gt;
4b78a4e41a138820e0a07ccdc056729180aa7dd6&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13267261">FLINK-14685</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06p6w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>