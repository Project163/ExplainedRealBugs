<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:49:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-19264] Jobs with identical graph shapes cannot be run concurrently</title>
                <link>https://issues.apache.org/jira/browse/FLINK-19264</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;While working on &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-19123&quot; title=&quot;TestStreamEnvironment does not use shared MiniCluster for executeAsync()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-19123&quot;&gt;&lt;del&gt;FLINK-19123&lt;/del&gt;&lt;/a&gt; I noticed that jobs often fail on &lt;tt&gt;MiniCluster&lt;/tt&gt; when multiple jobs are running at the same time. &lt;/p&gt;

&lt;p&gt;I created a reproducer here: &lt;a href=&quot;https://github.com/aljoscha/flink/tree/flink-19123-fix-test-stream-env-alternative&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aljoscha/flink/tree/flink-19123-fix-test-stream-env-alternative&lt;/a&gt;. You can run &lt;tt&gt;MiniClusterConcurrencyITCase&lt;/tt&gt; to see the problem in action. Sometimes the test will succeed, sometimes it will fail with&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.util.concurrent.ExecutionException: org.apache.flink.runtime.client.JobExecutionException: Job execution failed.

	at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)
	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1908)
	at org.apache.flink.test.example.MiniClusterConcurrencyITCase.submitConcurrently(MiniClusterConcurrencyITCase.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)
Caused by: org.apache.flink.runtime.client.JobExecutionException: Job execution failed.
	at org.apache.flink.runtime.jobmaster.JobResult.toJobExecutionResult(JobResult.java:147)
	at org.apache.flink.runtime.minicluster.MiniClusterJobClient.lambda$getJobExecutionResult$2(MiniClusterJobClient.java:107)
	at java.util.concurrent.CompletableFuture.uniApply(CompletableFuture.java:616)
	at java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:591)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.apache.flink.runtime.rpc.akka.AkkaInvocationHandler.lambda$invokeRpc$0(AkkaInvocationHandler.java:229)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.apache.flink.runtime.concurrent.FutureUtils$1.onComplete(FutureUtils.java:926)
	at akka.dispatch.OnComplete.internal(Future.scala:264)
	at akka.dispatch.OnComplete.internal(Future.scala:261)
	at akka.dispatch.japi$CallbackBridge.apply(Future.scala:191)
	at akka.dispatch.japi$CallbackBridge.apply(Future.scala:188)
	at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:36)
	at org.apache.flink.runtime.concurrent.Executors$DirectExecutionContext.execute(Executors.java:74)
	at scala.concurrent.impl.CallbackRunnable.executeWithValue(Promise.scala:44)
	at scala.concurrent.impl.Promise$DefaultPromise.tryComplete(Promise.scala:252)
	at akka.pattern.PromiseActorRef.$bang(AskSupport.scala:572)
	at akka.pattern.PipeToSupport$PipeableFuture$$anonfun$pipeTo$1.applyOrElse(PipeToSupport.scala:22)
	at akka.pattern.PipeToSupport$PipeableFuture$$anonfun$pipeTo$1.applyOrElse(PipeToSupport.scala:21)
	at scala.concurrent.Future$$anonfun$andThen$1.apply(Future.scala:436)
	at scala.concurrent.Future$$anonfun$andThen$1.apply(Future.scala:435)
	at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:36)
	at akka.dispatch.BatchingExecutor$AbstractBatch.processBatch(BatchingExecutor.scala:55)
	at akka.dispatch.BatchingExecutor$BlockableBatch$$anonfun$run$1.apply$mcV$sp(BatchingExecutor.scala:91)
	at akka.dispatch.BatchingExecutor$BlockableBatch$$anonfun$run$1.apply(BatchingExecutor.scala:91)
	at akka.dispatch.BatchingExecutor$BlockableBatch$$anonfun$run$1.apply(BatchingExecutor.scala:91)
	at scala.concurrent.BlockContext$.withBlockContext(BlockContext.scala:72)
	at akka.dispatch.BatchingExecutor$BlockableBatch.run(BatchingExecutor.scala:90)
	at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:40)
	at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(ForkJoinExecutorConfigurator.scala:44)
	at akka.dispatch.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at akka.dispatch.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at akka.dispatch.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at akka.dispatch.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
Caused by: org.apache.flink.runtime.JobException: Recovery is suppressed by NoRestartBackoffTimeStrategy
	at org.apache.flink.runtime.executiongraph.failover.flip1.ExecutionFailureHandler.handleFailure(ExecutionFailureHandler.java:116)
	at org.apache.flink.runtime.executiongraph.failover.flip1.ExecutionFailureHandler.getFailureHandlingResult(ExecutionFailureHandler.java:78)
	at org.apache.flink.runtime.scheduler.DefaultScheduler.handleTaskFailure(DefaultScheduler.java:215)
	at org.apache.flink.runtime.scheduler.DefaultScheduler.maybeHandleTaskFailure(DefaultScheduler.java:208)
	at org.apache.flink.runtime.scheduler.DefaultScheduler.updateTaskExecutionStateInternal(DefaultScheduler.java:202)
	at org.apache.flink.runtime.scheduler.SchedulerBase.updateTaskExecutionState(SchedulerBase.java:523)
	at org.apache.flink.runtime.jobmaster.JobMaster$1.onMissingDeploymentsOf(JobMaster.java:237)
	at org.apache.flink.runtime.jobmaster.DefaultExecutionDeploymentReconciler.reconcileExecutionDeployments(DefaultExecutionDeploymentReconciler.java:55)
	at org.apache.flink.runtime.jobmaster.JobMaster$TaskManagerHeartbeatListener.reportPayload(JobMaster.java:1229)
	at org.apache.flink.runtime.jobmaster.JobMaster$TaskManagerHeartbeatListener.reportPayload(JobMaster.java:1216)
	at org.apache.flink.runtime.heartbeat.HeartbeatManagerImpl.receiveHeartbeat(HeartbeatManagerImpl.java:199)
	at org.apache.flink.runtime.jobmaster.JobMaster.heartbeatFromTaskManager(JobMaster.java:674)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcInvocation(AkkaRpcActor.java:279)
	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcMessage(AkkaRpcActor.java:199)
	at org.apache.flink.runtime.rpc.akka.FencedAkkaRpcActor.handleRpcMessage(FencedAkkaRpcActor.java:74)
	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleMessage(AkkaRpcActor.java:152)
	at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:26)
	at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:21)
	at scala.PartialFunction$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;applyOrElse(PartialFunction.scala:123)
	at akka.japi.pf.UnitCaseStatement.applyOrElse(CaseStatements.scala:21)
	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:170)
	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171)
	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171)
	at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundReceive(Actor.scala:517)
	at akka.actor.AbstractActor.aroundReceive(AbstractActor.scala:225)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:592)
	at akka.actor.ActorCell.invoke(ActorCell.scala:561)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:258)
	at akka.dispatch.Mailbox.run(Mailbox.scala:225)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:235)
	... 4 more
Caused by: org.apache.flink.util.FlinkException: Execution cbc357ccb763df2852fee8c4fc7d55f2_0_0 is unexpectedly no longer running on task executor 0a6edd8c-b1f4-48da-a228-c395b2aff92d.
	at org.apache.flink.runtime.jobmaster.JobMaster$1.onMissingDeploymentsOf(JobMaster.java:241)
	... 31 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you reduce the number of submitted jobs the test will always pass.&lt;/p&gt;

&lt;p&gt;Am important piece of the puzzle seems to be this message that you will also find in the log output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
4594 [mini-cluster-io-thread-25] INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor [] - JobManager &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 580f78b9224c2079ebe0c2f6b08fb4ba with leader id b0ca0700de4f8e8a2555bfe7596741ac lost leadership.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems that the JobMasters of the concurrent jobs somehow clash with each other.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13327870">FLINK-19264</key>
            <summary>Jobs with identical graph shapes cannot be run concurrently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guoyangze">Yangze Guo</assignee>
                                    <reporter username="aljoscha">Aljoscha Krettek</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 16 Sep 2020 14:22:17 +0000</created>
                <updated>Tue, 30 Nov 2021 20:38:08 +0000</updated>
                            <resolved>Thu, 1 Oct 2020 13:33:10 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.12.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="17197023" author="kkrugler" created="Wed, 16 Sep 2020 14:52:12 +0000"  >&lt;p&gt;I often ran into this same issue, and eventually had to bail on async job submission with the MiniCluster. But this was with an older version of Flink (1.8/1.9) where I&apos;d hacked up the code to support async submission of jobs, so I thought it was my bug.&lt;/p&gt;</comment>
                            <comment id="17197059" author="zentol" created="Wed, 16 Sep 2020 15:50:50 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17295&quot; title=&quot;Refactor the ExecutionAttemptID to consist of ExecutionVertexID and attemptNumber&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17295&quot;&gt;&lt;del&gt;FLINK-17295&lt;/del&gt;&lt;/a&gt; the &lt;tt&gt;ExecutionAttemptID&lt;/tt&gt; was reworked to be based on the&#160;&lt;tt&gt;VertexID&lt;/tt&gt; and attempt number. Since&#160;&lt;tt&gt;VertexIDs&lt;/tt&gt; are deterministic for a given job graph, this results in &lt;tt&gt;ExecutionAttemptID&lt;/tt&gt; being identical if the same job is submitted multiple times.&lt;/p&gt;

&lt;p&gt;That ExecutionAttemptIDs are unique is a core assumption that is relied upon in multiple places; for example they are the only identifier used by the TaskExecutor to identify tasks. With this assumption being broken the TE can no longer differentiate between these tasks, causing all sorts of failure cases.&lt;/p&gt;</comment>
                            <comment id="17197060" author="zentol" created="Wed, 16 Sep 2020 15:52:49 +0000"  >&lt;p&gt;As such, I&apos;d propose to revert &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17295&quot; title=&quot;Refactor the ExecutionAttemptID to consist of ExecutionVertexID and attemptNumber&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17295&quot;&gt;&lt;del&gt;FLINK-17295&lt;/del&gt;&lt;/a&gt; and go back to random attempt IDs for the time being, while we figure out a way to make this change (or decide to discard the idea) that does not break such assumptions (e.g., by scoping every single affected data structure to a job ID).&lt;/p&gt;</comment>
                            <comment id="17197066" author="stephanewen" created="Wed, 16 Sep 2020 15:58:17 +0000"  >&lt;p&gt;Good point, the execution attempt ID needs to be unique. At the very least, it should include the jobId.&lt;/p&gt;

&lt;p&gt;That should make it unique on all sanely configured setups. If you submit the identical job graph (same Job ID) twice you probably already clash on the JobManager.&lt;/p&gt;</comment>
                            <comment id="17197096" author="kkrugler" created="Wed, 16 Sep 2020 16:34:29 +0000"  >&lt;p&gt;Hmm, since &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17295&quot; title=&quot;Refactor the ExecutionAttemptID to consist of ExecutionVertexID and attemptNumber&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17295&quot;&gt;&lt;del&gt;FLINK-17295&lt;/del&gt;&lt;/a&gt;&#160;was a recent change, either I did have a bug in my async MiniCluster mods, or there are other bugs lurking (at least in 1.8/1.9 code base).&lt;/p&gt;</comment>
                            <comment id="17197326" author="karmagyz" created="Thu, 17 Sep 2020 02:11:48 +0000"  >&lt;p&gt;Thanks for the analysis and suggestion, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt;. I think including the JobID will be good enough. Another solution could be adding a short random suffix to the ExecutionAttemptID, just like what we do in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17579&quot; title=&quot;Set the resource id of taskexecutor according to environment variable if exist in standalone mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17579&quot;&gt;&lt;del&gt;FLINK-17579&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;d like to take this ticket when we figure out there is no other bugs that cause this issue.&lt;/p&gt;</comment>
                            <comment id="17197360" author="zhuzh" created="Thu, 17 Sep 2020 03:56:48 +0000"  >&lt;p&gt;Thanks for reporting and investigating this issue!&lt;br/&gt;
I had wrongly assumed that a &lt;tt&gt;JobVertexID&lt;/tt&gt; is generated randomly. But it is not. Instead, it is generated from the hash of StreamNode, which is always the same in the same topology. That&apos;s why in &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;&apos;s case &lt;tt&gt;JobVertexID&lt;/tt&gt; from different jobs can be the same.&lt;br/&gt;
Including the &lt;tt&gt;JobID&lt;/tt&gt; in &lt;tt&gt;ExecutionAttemptID&lt;/tt&gt; sounds a valid solution to me, given that a Flink cluster will not accept a job with duplicated &lt;tt&gt;JobID&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;m also thinking whether we can further &lt;tt&gt;JobVertexID&lt;/tt&gt; and &lt;tt&gt;IntermediateDataSetID&lt;/tt&gt; to consist of &lt;tt&gt;JobID&lt;/tt&gt; in the future. In this way, the composite &lt;tt&gt;ExecutionAttemptID&lt;/tt&gt; will be naturally unique across jobs.&lt;/p&gt;</comment>
                            <comment id="17197552" author="aljoscha" created="Thu, 17 Sep 2020 09:24:10 +0000"  >&lt;p&gt;Btw, the jobs are only identical in the example I provided. The jobs where I originally found this were not identical but their &quot;shape&quot; was the same, i.e. the same number of vertices, parallelism, etc.&lt;/p&gt;</comment>
                            <comment id="17197572" author="stephanewen" created="Thu, 17 Sep 2020 09:47:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkrugler&quot; class=&quot;user-hover&quot; rel=&quot;kkrugler&quot;&gt;kkrugler&lt;/a&gt; Maybe you are running into &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-19123&quot; title=&quot;TestStreamEnvironment does not use shared MiniCluster for executeAsync()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-19123&quot;&gt;&lt;del&gt;FLINK-19123&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="17198094" author="zhuzh" created="Fri, 18 Sep 2020 03:28:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; yes the &lt;tt&gt;StreamNode&lt;/tt&gt; hash is, if not specified by users, generated in a deterministic way with regard to:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;node id&lt;/li&gt;
	&lt;li&gt;chained output nodes hashes&lt;/li&gt;
	&lt;li&gt;input nodes hashes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So identical stream graph shape will result in the same set of &lt;tt&gt;StreamNode&lt;/tt&gt; hashes, and then {{JobVertexID}}s.&lt;/p&gt;

&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guoyangze&quot; class=&quot;user-hover&quot; rel=&quot;guoyangze&quot;&gt;guoyangze&lt;/a&gt;, I&apos;m still a bit concerned about the size of &lt;tt&gt;TaskDeploymentDescriptor&lt;/tt&gt; if we enlarge each &lt;tt&gt;ExecutionAttemptID&lt;/tt&gt; with a &lt;tt&gt;JobID&lt;/tt&gt;. So before making this change, could you do an experiment on whether there would be a significant TDD size increase? &lt;/p&gt;</comment>
                            <comment id="17199149" author="karmagyz" created="Mon, 21 Sep 2020 04:05:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhuzh&quot; class=&quot;user-hover&quot; rel=&quot;zhuzh&quot;&gt;zhuzh&lt;/a&gt; I think your concern is probably valid. I&apos;ll try to figure out the impact and return here.&lt;/p&gt;</comment>
                            <comment id="17199909" author="karmagyz" created="Tue, 22 Sep 2020 07:56:28 +0000"  >&lt;p&gt;Hi, there. I did a quick experiment, run WordCount with 2000 parallelism. The TDD size after serialization does increase (238.3 KB to 248.3 KB). Since &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17295&quot; title=&quot;Refactor the ExecutionAttemptID to consist of ExecutionVertexID and attemptNumber&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17295&quot;&gt;&lt;del&gt;FLINK-17295&lt;/del&gt;&lt;/a&gt; has decreased the TDD size, I think the overall change might be acceptable. WDYT?&lt;/p&gt;</comment>
                            <comment id="17200020" author="zhuzh" created="Tue, 22 Sep 2020 11:39:51 +0000"  >&lt;p&gt;Thanks for doing the experiment &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guoyangze&quot; class=&quot;user-hover&quot; rel=&quot;guoyangze&quot;&gt;guoyangze&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I checked your previous experiment result &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; in the FLIP discussion and yes &lt;br/&gt;
there was a nice side effect of ~5% decreasing TDD size by reworking the IDs.&lt;br/&gt;
Therefore I think it&apos;s acceptable to add a JobID to &lt;tt&gt;ExecutionAttemptID&lt;/tt&gt; though&lt;br/&gt;
it increases TDD size ~5%.&lt;/p&gt;

&lt;p&gt;I have assigned you this ticket and just go ahead.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://docs.google.com/spreadsheets/d/13lt6J29uikWoux79047lkvbGi2fS4ioWHSbvT1kTL2M/edit#gid=0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.google.com/spreadsheets/d/13lt6J29uikWoux79047lkvbGi2fS4ioWHSbvT1kTL2M/edit#gid=0&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17205513" author="zhuzh" created="Thu, 1 Oct 2020 13:33:10 +0000"  >&lt;p&gt;Fixed via 6e5240f8ac24974826a07b5370908a85bd874ce1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13325706">FLINK-19123</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13299928">FLINK-17295</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0inkw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>