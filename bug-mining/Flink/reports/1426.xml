<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:26:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5150] WebUI metric-related resource leak</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5150</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The WebUI maintains a list of selected metrics for all jobs and vertices. When a metric is selected in the metric screen it is added to this list, and removed if it is unselected.&lt;/p&gt;

&lt;p&gt;The contents of this list are stored in the browser&apos;s localStorage. This allows a user to setup a metric screen, move to another page, and return to the original screen completely intact.&lt;/p&gt;

&lt;p&gt;However, if the metrics are never &lt;b&gt;unselected&lt;/b&gt; by the user they will remain in this list. They will also still be in this list if the WebUI can&apos;t even display the corresponding job page anymore, if for example the history size limit was exceeded. They will even survive a browser restart, since they are not stored in a session-based storage.&lt;/p&gt;

&lt;p&gt;Furthermore, the WebUI still tries to update these metricsd, adding additional overhead to the WebBackend and potentially network.&lt;/p&gt;

&lt;p&gt;In other words, if you &lt;em&gt;ever&lt;/em&gt; checked out metrics tab for some job, chances are that the next time you start the WebInterface it will still try to update the metrics for it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13022892">FLINK-5150</key>
            <summary>WebUI metric-related resource leak</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Nov 2016 15:31:26 +0000</created>
                <updated>Fri, 20 Jan 2017 05:42:15 +0000</updated>
                            <resolved>Fri, 20 Jan 2017 05:42:15 +0000</resolved>
                                    <version>1.2.0</version>
                    <version>1.3.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>Runtime / Web Frontend</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15820872" author="githubbot" created="Thu, 12 Jan 2017 12:18:53 +0000"  >&lt;p&gt;GitHub user zentol opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3104&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5150&quot; title=&quot;WebUI metric-related resource leak&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5150&quot;&gt;&lt;del&gt;FLINK-5150&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;webui&amp;#93;&lt;/span&gt; Store metrics in sessionStorage&lt;/p&gt;

&lt;p&gt;    This PR modifies the webfrontend to no longer store the metrics setup (selected metrics + their values) in localStorage but sessionStorage instead.&lt;/p&gt;

&lt;p&gt;    Using localStorage means that data is never deleted unless explicitly told. It survives moving across pages, but also browser restarts. We currently lack an automatic explicit removal, which was problematic since metrics for previous jobs (that may even have been executed on a completely different cluster) were still being updated. For example, if i ran any job on my local machine it would fire 30+ requests regularly for dead metrics.&lt;/p&gt;

&lt;p&gt;    By moving to sessionStorage this issue is solved since the data is cleared when the page is closed. However, you can still navigate to other pages and the setup will survive. As a bonus you can now have 2 tabs for the same task with different metric setups!&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zentol/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zentol/flink&lt;/a&gt; 5150_webui_rl&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3104.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3104.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3104&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit bb0415c2e879e3a2b5e977484c529d3d6a94c657&lt;br/&gt;
Author: zentol &amp;lt;chesnay@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-01-12T12:12:24Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5150&quot; title=&quot;WebUI metric-related resource leak&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5150&quot;&gt;&lt;del&gt;FLINK-5150&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;webui&amp;#93;&lt;/span&gt; Store metrics in sessionStorage&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15821249" author="githubbot" created="Thu, 12 Jan 2017 15:23:04 +0000"  >&lt;p&gt;Github user uce commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3104&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good catch! &lt;/p&gt;</comment>
                            <comment id="15821538" author="githubbot" created="Fri, 13 Jan 2017 10:07:15 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3104&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This seems crucial, +1 to add it to 1.2 and master&lt;/p&gt;</comment>
                            <comment id="15821561" author="githubbot" created="Fri, 13 Jan 2017 10:20:09 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3104&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merging with the next batch.&lt;/p&gt;</comment>
                            <comment id="15831225" author="githubbot" created="Fri, 20 Jan 2017 05:41:11 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3104&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15831235" author="zentol" created="Fri, 20 Jan 2017 05:42:15 +0000"  >&lt;p&gt;master: cbd933bd1def789d1978be5349005dd7d9de3082&lt;br/&gt;
1.2: 79b68263f52690697ceec0528023d35feed0bd89&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36p7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>