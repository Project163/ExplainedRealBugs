<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1978] POJO serialization NPE</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1978</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;NullPointer on serialization of a Date field:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.RuntimeException: Error obtaining the sorted input: Thread &apos;SortMerger Reading Thread&apos; terminated due to an exception: null&lt;br/&gt;
	at org.apache.flink.runtime.operators.sort.UnilateralSortMerger.getIterator(UnilateralSortMerger.java:607)&lt;br/&gt;
	at org.apache.flink.runtime.operators.RegularPactTask.getInput(RegularPactTask.java:1132)&lt;br/&gt;
	at org.apache.flink.runtime.operators.CoGroupDriver.prepare(CoGroupDriver.java:98)&lt;br/&gt;
	at org.apache.flink.runtime.operators.RegularPactTask.run(RegularPactTask.java:464)&lt;br/&gt;
	... 3 more&lt;br/&gt;
Caused by: java.io.IOException: Thread &apos;SortMerger Reading Thread&apos; terminated due to an exception: null&lt;br/&gt;
	at org.apache.flink.runtime.operators.sort.UnilateralSortMerger$ThreadBase.run(UnilateralSortMerger.java:784)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.flink.api.common.typeutils.base.DateSerializer.deserialize(DateSerializer.java:72)&lt;br/&gt;
	at org.apache.flink.api.common.typeutils.base.DateSerializer.deserialize(DateSerializer.java:1)&lt;br/&gt;
	at org.apache.flink.api.java.typeutils.runtime.PojoSerializer.deserialize(PojoSerializer.java:487)&lt;br/&gt;
	at org.apache.flink.api.java.typeutils.runtime.TupleSerializer.deserialize(TupleSerializer.java:136)&lt;br/&gt;
	at org.apache.flink.api.java.typeutils.runtime.TupleSerializer.deserialize(TupleSerializer.java:30)&lt;br/&gt;
	at org.apache.flink.runtime.plugable.ReusingDeserializationDelegate.read(ReusingDeserializationDelegate.java:57)&lt;br/&gt;
	at org.apache.flink.runtime.io.network.api.serialization.SpillingAdaptiveSpanningRecordDeserializer.getNextRecord(SpillingAdaptiveSpanningRecordDeserializer.java:111)&lt;br/&gt;
	at org.apache.flink.runtime.io.network.api.reader.AbstractRecordReader.getNextRecord(AbstractRecordReader.java:64)&lt;br/&gt;
	at org.apache.flink.runtime.io.network.api.reader.MutableRecordReader.next(MutableRecordReader.java:34)&lt;br/&gt;
	at org.apache.flink.runtime.operators.util.ReaderIterator.next(ReaderIterator.java:59)&lt;br/&gt;
	at org.apache.flink.runtime.operators.sort.UnilateralSortMerger$ReadingThread.go(UnilateralSortMerger.java:958)&lt;br/&gt;
	at org.apache.flink.runtime.operators.sort.UnilateralSortMerger$ThreadBase.run(UnilateralSortMerger.java:781)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12827591">FLINK-1978</key>
            <summary>POJO serialization NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fhueske">Fabian Hueske</assignee>
                                    <reporter username="f.pompermaier">Flavio Pompermaier</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 May 2015 09:08:36 +0000</created>
                <updated>Thu, 28 Feb 2019 13:21:15 +0000</updated>
                            <resolved>Thu, 7 May 2015 10:00:42 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9</fixVersion>
                    <fixVersion>0.8.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14530197" author="f.pompermaier" created="Wed, 6 May 2015 09:10:35 +0000"  >&lt;p&gt;The error can be reproduced with the following code:&lt;/p&gt;

&lt;p&gt;public class PojoDateError {&lt;/p&gt;

&lt;p&gt;		@SuppressWarnings(&quot;unused&quot;)&lt;br/&gt;
		private static final Logger LOG = LoggerFactory.getLogger(PojoDateError.class);&lt;/p&gt;


&lt;p&gt;		// *************************************************************************&lt;br/&gt;
		// PROGRAM&lt;br/&gt;
		// *************************************************************************&lt;/p&gt;

&lt;p&gt;		public static void main(String[] args) throws Exception {&lt;/p&gt;

&lt;p&gt;			// set up the execution environment&lt;br/&gt;
			final ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();&lt;br/&gt;
			Collection&amp;lt;Tuple2&amp;lt;String,Person&amp;gt;&amp;gt; peopleColl = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
			peopleColl.add(new Tuple2&amp;lt;String,Person&amp;gt; (&quot;1&quot;,new Person(&quot;1&quot;,&quot;test-person1&quot;,new Date())));&lt;br/&gt;
			peopleColl.add(new Tuple2&amp;lt;String,Person&amp;gt; (&quot;2&quot;,new Person(&quot;2&quot;,&quot;test-person2&quot;,null)));&lt;br/&gt;
			peopleColl.add(new Tuple2&amp;lt;String,Person&amp;gt; (&quot;3&quot;,new Person(&quot;3&quot;,&quot;test-person3&quot;,new Date())));&lt;br/&gt;
			DataSet&amp;lt;Tuple2&amp;lt;String,Person&amp;gt;&amp;gt; people =  env.fromCollection(peopleColl);&lt;br/&gt;
			DataSet&amp;lt;Tuple2&amp;lt;String, Vehicle&amp;gt;&amp;gt; vehicles =  env.fromCollection(Arrays.asList(new Tuple2&amp;lt;String,Vehicle&amp;gt; (&quot;AA&quot;,new Vehicle(&quot;1&quot;,&quot;test-vehicle&quot;,new Date()))));&lt;/p&gt;

&lt;p&gt;			DataSet&amp;lt;Tuple2&amp;lt;String,String&amp;gt;&amp;gt; vehiclesOwnersRel =  env.fromCollection(Arrays.asList(&lt;br/&gt;
					new Tuple2&amp;lt;String,String&amp;gt;(&quot;AA&quot;,&quot;1&quot;), &lt;br/&gt;
					new Tuple2&amp;lt;String,String&amp;gt;(&quot;AA&quot;,&quot;2&quot;),&lt;br/&gt;
					new Tuple2&amp;lt;String,String&amp;gt;(&quot;AA&quot;,&quot;3&quot;)&lt;br/&gt;
					));&lt;/p&gt;

&lt;p&gt;			DataSet&amp;lt;Tuple2&amp;lt;String,Person&amp;gt;&amp;gt; vehiclesOwners = vehiclesOwnersRel&lt;br/&gt;
					.join(people).where(1).equalTo(0).with(new JoinFunction&amp;lt;Tuple2&amp;lt;String,String&amp;gt;,Tuple2&amp;lt;String, Person&amp;gt;,Tuple2&amp;lt;String,Person&amp;gt;&amp;gt;(){&lt;/p&gt;

&lt;p&gt;						private Tuple2&amp;lt;String, Person&amp;gt; reuse = new Tuple2&amp;lt;&amp;gt;();&lt;br/&gt;
						@Override&lt;br/&gt;
						public Tuple2&amp;lt;String, Person&amp;gt; join(&lt;br/&gt;
								Tuple2&amp;lt;String, String&amp;gt; rel, Tuple2&amp;lt;String, Person&amp;gt; p)&lt;br/&gt;
								throws Exception &lt;/p&gt;
{
							reuse.f0 = rel.f0;
							reuse.f1 = p.f1;
							return reuse;
						}

&lt;p&gt;					});&lt;br/&gt;
			vehicles.coGroup(vehiclesOwners).where(0).equalTo(0).with(new CoGroupFunction&amp;lt;Tuple2&amp;lt;String, Vehicle&amp;gt;,Tuple2&amp;lt;String,Person&amp;gt;,Tuple2&amp;lt;String,Vehicle&amp;gt;&amp;gt;(){&lt;br/&gt;
				private Tuple2&amp;lt;String,Vehicle&amp;gt; reuse = new Tuple2&amp;lt;&amp;gt;();&lt;br/&gt;
				@Override&lt;br/&gt;
				public void coGroup(Iterable&amp;lt;Tuple2&amp;lt;String, Vehicle&amp;gt;&amp;gt; vIt,&lt;br/&gt;
						Iterable&amp;lt;Tuple2&amp;lt;String, Person&amp;gt;&amp;gt; pIt,&lt;br/&gt;
						Collector&amp;lt;Tuple2&amp;lt;String,Vehicle&amp;gt;&amp;gt; out) throws Exception {&lt;br/&gt;
					for (Tuple2&amp;lt;String, Vehicle&amp;gt; off : vIt) {&lt;br/&gt;
						List&amp;lt;Person&amp;gt; owners = off.f1.owners;&lt;br/&gt;
						for (Tuple2&amp;lt;String, Person&amp;gt; e : pIt) {&lt;br/&gt;
							if(owners == null)&lt;/p&gt;
{
								owners = new ArrayList&amp;lt;&amp;gt;();
								off.f1.owners = owners;
							}
&lt;p&gt;							owners.add(e.f1);&lt;br/&gt;
						}&lt;br/&gt;
						reuse.f0 = off.f0;&lt;br/&gt;
						reuse.f1 = off.f1;&lt;br/&gt;
						out.collect(reuse);&lt;br/&gt;
						break;&lt;br/&gt;
					}&lt;br/&gt;
				}&lt;/p&gt;



&lt;p&gt;			}).print();&lt;/p&gt;

&lt;p&gt;			env.execute();&lt;br/&gt;
		}&lt;/p&gt;

&lt;p&gt;      static class Person {&lt;/p&gt;

&lt;p&gt;        public String id;&lt;br/&gt;
	public String name;&lt;br/&gt;
	public Date birthDate;&lt;/p&gt;

&lt;p&gt;	public Person(){}&lt;br/&gt;
	public Person(String id, String name, Date birthDate) &lt;/p&gt;
{
		this.id = id;
		this.name = name;
		this.birthDate = birthDate;
	}
&lt;p&gt;	public Person(String id) &lt;/p&gt;
{
		this.id = id;
	}
&lt;p&gt;	@Override&lt;br/&gt;
	public String toString() &lt;/p&gt;
{
		return this.id;
	}

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;static class Vehicle {&lt;/p&gt;

&lt;p&gt;	    public String id;&lt;br/&gt;
	    public String plate;&lt;br/&gt;
		public List&amp;lt;Person&amp;gt; owners;&lt;br/&gt;
	    public Date registrationDate;&lt;/p&gt;

&lt;p&gt;	    public Vehicle(){}&lt;br/&gt;
	    public Vehicle(String id, String plate, Date registrationDate) &lt;/p&gt;
{
			this.id = id;
			this.plate = plate;
			this.registrationDate = registrationDate;
		}
&lt;p&gt;	    @Override&lt;br/&gt;
		public String toString() &lt;/p&gt;
{
			return this.plate;
		}
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;


</comment>
                            <comment id="14530715" author="fhueske" created="Wed, 6 May 2015 15:31:54 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=f.pompermaier&quot; class=&quot;user-hover&quot; rel=&quot;f.pompermaier&quot;&gt;f.pompermaier&lt;/a&gt;, I reproduced the bug with the provided code and will work on a fix.&lt;br/&gt;
Thanks for reporting!&lt;/p&gt;</comment>
                            <comment id="14530832" author="githubbot" created="Wed, 6 May 2015 16:31:56 +0000"  >&lt;p&gt;GitHub user fhueske opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/655&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/655&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1978&quot; title=&quot;POJO serialization NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1978&quot;&gt;&lt;del&gt;FLINK-1978&lt;/del&gt;&lt;/a&gt; Fix POJO deserialization &amp;amp; copy for reuse objects with NULL fields&lt;/p&gt;

&lt;p&gt;    Pojo `deserialize()` and `copy()` fails if a field of the reuse object is `null`.&lt;/p&gt;

&lt;p&gt;    This PR fixes the bug and extends the corresponding `PojoSerializerTest`.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/fhueske/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fhueske/flink&lt;/a&gt; fix-npe-pojo-ser&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/655.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/655.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #655&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f280f809f241444d698d38df248a56bb82b7620b&lt;br/&gt;
Author: Fabian Hueske &amp;lt;fhueske@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-05-06T15:47:59Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1978&quot; title=&quot;POJO serialization NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1978&quot;&gt;&lt;del&gt;FLINK-1978&lt;/del&gt;&lt;/a&gt; Fix POJO deserialization for reuse objects with NULL fields&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14532189" author="githubbot" created="Thu, 7 May 2015 07:45:34 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/655#issuecomment-99757603&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/655#issuecomment-99757603&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good. Can you go ahead and merge it?&lt;/p&gt;</comment>
                            <comment id="14532345" author="githubbot" created="Thu, 7 May 2015 09:43:33 +0000"  >&lt;p&gt;Github user fhueske commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/655#issuecomment-99796390&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/655#issuecomment-99796390&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    yes, will do it now&lt;/p&gt;</comment>
                            <comment id="14532372" author="githubbot" created="Thu, 7 May 2015 09:59:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/655&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/655&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14532374" author="fhueske" created="Thu, 7 May 2015 10:00:42 +0000"  >&lt;p&gt;Fixed with 0078c44e59a368f5564ef6a151aea2f351a2e2c8&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2eclj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>