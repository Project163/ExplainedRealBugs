<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:23:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3762]  Kryo StackOverflowError due to disabled Kryo Reference tracking</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3762</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;As discussed on the dev list,&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;KryoSerializer.java&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Kryo Reference tracking is disabled by default:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    kryo.setReferences(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This can causes  &lt;tt&gt;StackOverflowError&lt;/tt&gt; Exceptions when serializing many objects that may contain recursive objects:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.StackOverflowError
	at com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:48)
	at com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:495)
	at com.esotericsoftware.kryo.Kryo.writeObject(Kryo.java:523)
	at com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:61)
	at com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:495)
	at com.esotericsoftware.kryo.Kryo.writeObject(Kryo.java:523)
	at com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:61)
	at com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:495)
	at com.esotericsoftware.kryo.Kryo.writeObject(Kryo.java:523)
	at com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:61)
	at com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:495)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;By enabling reference tracking, we can fix this problem.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;https://gist.github.com/andrewpalumbo/40c7422a5187a24cd03d7d81feb2a419&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12958910">FLINK-3762</key>
            <summary> Kryo StackOverflowError due to disabled Kryo Reference tracking</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Andrew_Palumbo">Andrew Palumbo</assignee>
                                    <reporter username="Andrew_Palumbo">Andrew Palumbo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Apr 2016 18:00:06 +0000</created>
                <updated>Thu, 28 Feb 2019 13:20:57 +0000</updated>
                            <resolved>Fri, 15 Apr 2016 18:58:46 +0000</resolved>
                                    <version>1.0.1</version>
                                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15241684" author="githubbot" created="Thu, 14 Apr 2016 18:31:37 +0000"  >&lt;p&gt;GitHub user andrewpalumbo opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1891&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1891&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3762&quot; title=&quot; Kryo StackOverflowError due to disabled Kryo Reference tracking&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3762&quot;&gt;&lt;del&gt;FLINK-3762&lt;/del&gt;&lt;/a&gt;: StackOverflowError due to disabled Kryo Reference tracking&lt;/p&gt;

&lt;p&gt;    cription&lt;/p&gt;

&lt;p&gt;    As discussed on the dev list,&lt;/p&gt;

&lt;p&gt;    In `KryoSerializer.java`&lt;/p&gt;

&lt;p&gt;    Kryo Reference tracking is disabled by default:&lt;br/&gt;
    ```java&lt;br/&gt;
        kryo.setReferences(false);&lt;br/&gt;
    ```&lt;br/&gt;
    This can causes StackOverflowError Exceptions when serializing many objects that may contain recursive objects:&lt;br/&gt;
    ```&lt;br/&gt;
    java.lang.StackOverflowError&lt;br/&gt;
    	at com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:48)&lt;br/&gt;
    	at com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:495)&lt;br/&gt;
    	at com.esotericsoftware.kryo.Kryo.writeObject(Kryo.java:523)&lt;br/&gt;
    	at com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:61)&lt;br/&gt;
    	at com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:495)&lt;br/&gt;
    	at com.esotericsoftware.kryo.Kryo.writeObject(Kryo.java:523)&lt;br/&gt;
    	at com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:61)&lt;br/&gt;
    	at com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:495)&lt;br/&gt;
    	at com.esotericsoftware.kryo.Kryo.writeObject(Kryo.java:523)&lt;br/&gt;
    	at com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:61)&lt;br/&gt;
    	at com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:495)&lt;br/&gt;
    ```&lt;br/&gt;
    By enabling reference tracking, we can fix this problem.&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;https://gist.github.com/andrewpalumbo/40c7422a5187a24cd03d7d81feb2a419&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/andrewpalumbo/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andrewpalumbo/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3762&quot; title=&quot; Kryo StackOverflowError due to disabled Kryo Reference tracking&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3762&quot;&gt;&lt;del&gt;FLINK-3762&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1891.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1891.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1891&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 72f5bad9ebb1e657336e2c3e8ea8eb9ee283f693&lt;br/&gt;
Author: Andrew Palumbo &amp;lt;apalumbo@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-04-14T18:25:46Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3762&quot; title=&quot; Kryo StackOverflowError due to disabled Kryo Reference tracking&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3762&quot;&gt;&lt;del&gt;FLINK-3762&lt;/del&gt;&lt;/a&gt;: enable kryo refrence tracking&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15242161" author="githubbot" created="Thu, 14 Apr 2016 23:54:17 +0000"  >&lt;p&gt;Github user andrewpalumbo commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1891#issuecomment-210208137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1891#issuecomment-210208137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Flipped the `validateReferenceMappingDisabled()` test in `KryoGenericSerializerTest` to assert that Kryo referencing is enabled. &lt;br/&gt;
    ```java&lt;br/&gt;
    public void validateReferenceMappingEnabled() &lt;/p&gt;
{
    		KryoSerializer&amp;lt;String&amp;gt; serializer = new KryoSerializer&amp;lt;&amp;gt;(String.class, new ExecutionConfig());
    		Kryo kryo = serializer.getKryo();
    		assertTrue(kryo.getReferences());
    	}
&lt;p&gt;    ```&lt;/p&gt;</comment>
                            <comment id="15242747" author="githubbot" created="Fri, 15 Apr 2016 10:14:24 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1891#issuecomment-210402401&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1891#issuecomment-210402401&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Changes look good to me. +1 for merging.&lt;/p&gt;</comment>
                            <comment id="15242748" author="githubbot" created="Fri, 15 Apr 2016 10:14:31 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1891#issuecomment-210402429&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1891#issuecomment-210402429&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for your contribution @andrewpalumbo &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15242751" author="githubbot" created="Fri, 15 Apr 2016 10:17:45 +0000"  >&lt;p&gt;Github user fhueske commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1891#issuecomment-210403044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1891#issuecomment-210403044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks, will merge this PR to master and release-1.0 branches&lt;/p&gt;</comment>
                            <comment id="15243283" author="githubbot" created="Fri, 15 Apr 2016 17:40:24 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1891&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1891&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15243362" author="githubbot" created="Fri, 15 Apr 2016 18:25:38 +0000"  >&lt;p&gt;Github user andrewpalumbo commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1891#issuecomment-210576438&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1891#issuecomment-210576438&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thank you guys!&lt;/p&gt;</comment>
                            <comment id="15243413" author="fhueske" created="Fri, 15 Apr 2016 18:58:46 +0000"  >&lt;p&gt;Fixed for 1.0.2 with b4b08ca24f2dc4897565da59361ad71281910619&lt;br/&gt;
Fixed for 1.1.0 with dc78a7470a5da086a08140b200a20d840460ef79&lt;/p&gt;

&lt;p&gt;Thanks for the fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Andrew_Palumbo&quot; class=&quot;user-hover&quot; rel=&quot;Andrew_Palumbo&quot;&gt;Andrew_Palumbo&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w4un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>