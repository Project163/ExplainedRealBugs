<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:51:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-20664] Support setting service account for TaskManager pod</title>
                <link>https://issues.apache.org/jira/browse/FLINK-20664</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently, we only set the service account for JobManager. The TaskManager is using the default service account.&#160;Before the KubernetesHAService is introduced, it works because the TaskManager does not need to access the K8s resource(e.g. ConfigMap) directly. But now the TaskManager needs to watch ConfigMap and retrieve leader address. So if the default service account does not have enough permission, users could not specify a valid service account for TaskManager.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We should introduce a new config option for TaskManager service account.&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;kubernetes.taskmanager.service-account&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13346695">FLINK-20664</key>
            <summary>Support setting service account for TaskManager pod</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lublinsky">Boris Lublinsky</assignee>
                                    <reporter username="wangyang0918">Yang Wang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 18 Dec 2020 02:42:03 +0000</created>
                <updated>Fri, 25 Dec 2020 09:05:45 +0000</updated>
                            <resolved>Fri, 25 Dec 2020 09:05:45 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.12.1</fixVersion>
                    <fixVersion>1.13.0</fixVersion>
                                    <component>Deployment / Kubernetes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17251475" author="lublinsky" created="Fri, 18 Dec 2020 03:33:26 +0000"  >&lt;p&gt;Do you mean:&lt;/p&gt;

&lt;p&gt;kubernetes.taskmanager.service-account ?&lt;/p&gt;

&lt;p&gt;I think a better solution is to use the same service account as job manager. In this case one role and one binding is sufficient. If you make them different, then a user will have to create two bindings&#160;&lt;/p&gt;</comment>
                            <comment id="17251489" author="fly_in_gis" created="Fri, 18 Dec 2020 03:56:38 +0000"  >&lt;p&gt;Since the user code is executing on the TaskManager, I am afraid some users do not want to give TaskManager pods a service account with too many permissions. Currently, only for ConfigMap is enough.&lt;/p&gt;

&lt;p&gt;Why do we need to create two binding? I think the &lt;tt&gt;kubernetes.taskmanager.service-account&lt;/tt&gt; could be set same as &lt;tt&gt;kubernetes.jobmanager.service-account&lt;/tt&gt; if users want. Two config options are more flexible. Right?&lt;/p&gt;</comment>
                            <comment id="17251848" author="fly_in_gis" created="Fri, 18 Dec 2020 16:22:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lublinsky&quot; class=&quot;user-hover&quot; rel=&quot;lublinsky&quot;&gt;lublinsky&lt;/a&gt;&#160;Do you think adding a new config option &lt;tt&gt;kubernetes.taskmanager.service-account&lt;/tt&gt; makes sense to you?&lt;/p&gt;</comment>
                            <comment id="17251863" author="lublinsky" created="Fri, 18 Dec 2020 16:47:54 +0000"  >&lt;p&gt;I think so. This gives me the flexibility. I can decide to make it the same as job manager or different&lt;/p&gt;</comment>
                            <comment id="17252561" author="lublinsky" created="Mon, 21 Dec 2020 01:52:00 +0000"  >&lt;p&gt;PR is created - &lt;a href=&quot;https://github.com/apache/flink/pull/14447&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/14447&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17252582" author="fly_in_gis" created="Mon, 21 Dec 2020 02:46:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lublinsky&quot; class=&quot;user-hover&quot; rel=&quot;lublinsky&quot;&gt;lublinsky&lt;/a&gt;&#160;Thanks for this PR. Actually, I am already working on this. Since you are interested in the fixing, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt;&#160;could you please re-assign this ticket to Boris. I could help with reviewing.&lt;/p&gt;</comment>
                            <comment id="17253362" author="till.rohrmann" created="Tue, 22 Dec 2020 09:29:28 +0000"  >&lt;p&gt;Thanks for driving this effort. What in a situation like this always worked best is to introduce a common configuration option like &lt;tt&gt;kubernetes.service-account&lt;/tt&gt; which is used for both JM and TM unless a more specific configuration option &lt;tt&gt;kubernetes.service-account.jobmanager&lt;/tt&gt; or &lt;tt&gt;kubernetes.service-account.taskmanager&lt;/tt&gt; has been configured. That way you don&apos;t force people to configure two options if they are ok with using a single service account for both processes.&lt;/p&gt;</comment>
                            <comment id="17253386" author="fly_in_gis" created="Tue, 22 Dec 2020 10:06:31 +0000"  >&lt;p&gt;Thanks for the nice suggestion. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lublinsky&quot; class=&quot;user-hover&quot; rel=&quot;lublinsky&quot;&gt;lublinsky&lt;/a&gt;&#160;would you like to integrate the comments in the PR via introducing a common config option key &lt;tt&gt;kubernetes.service-account&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="17254786" author="xintongsong" created="Fri, 25 Dec 2020 09:05:45 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;master (1.13):&#160;4e5448cc332090d7bd2664f60278534d945e1211&lt;/li&gt;
	&lt;li&gt;release-1.12:&#160;d3ec48b3cdc7aaf6cef8978bf7c0545be7ce43e6&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lmo0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>