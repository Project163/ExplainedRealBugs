<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:10:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-26882] Unaligned checkpoint with 0s timeout would fail RescaleCheckpointManuallyITCase</title>
                <link>https://issues.apache.org/jira/browse/FLINK-26882</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Once we make &lt;tt&gt;execution.checkpointing.unaligned: true&lt;/tt&gt; and &lt;tt&gt;execution.checkpointing.alignment-timeout: PT0S&lt;/tt&gt;, the RescaleCheckpointManuallyITCase.testCheckpointRescalingInKeyedState would fail then.&lt;/p&gt;

&lt;p&gt;Borken instances:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33776&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33776&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5623&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33787&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33787&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5626&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33787&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=2ef0effc-1da1-50e5-c2bd-aab434b1c5b7&amp;amp;l=12409&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33787&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=2ef0effc-1da1-50e5-c2bd-aab434b1c5b7&amp;amp;l=12409&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13436114">FLINK-26882</key>
            <summary>Unaligned checkpoint with 0s timeout would fail RescaleCheckpointManuallyITCase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yunta">Yun Tang</assignee>
                                    <reporter username="yunta">Yun Tang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 28 Mar 2022 08:52:50 +0000</created>
                <updated>Thu, 31 Mar 2022 07:40:03 +0000</updated>
                            <resolved>Wed, 30 Mar 2022 09:34:07 +0000</resolved>
                                    <version>1.16.0</version>
                                    <fixVersion>1.16.0</fixVersion>
                                    <component>Runtime / Checkpointing</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17513458" author="JIRAUSER281719" created="Mon, 28 Mar 2022 15:37:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33748&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33748&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17513860" author="gaoyunhaii" created="Tue, 29 Mar 2022 07:18:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33795&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5685&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33795&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5685&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33795&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=2ef0effc-1da1-50e5-c2bd-aab434b1c5b7&amp;amp;l=12412&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33795&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=2ef0effc-1da1-50e5-c2bd-aab434b1c5b7&amp;amp;l=12412&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And some other tests in the same build&lt;/p&gt;</comment>
                            <comment id="17513867" author="gaoyunhaii" created="Tue, 29 Mar 2022 07:27:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33810&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5685&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33810&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5685&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33810&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=2ef0effc-1da1-50e5-c2bd-aab434b1c5b7&amp;amp;l=12414&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33810&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=2ef0effc-1da1-50e5-c2bd-aab434b1c5b7&amp;amp;l=12414&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17513875" author="gaoyunhaii" created="Tue, 29 Mar 2022 07:34:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33854&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5762&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33854&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5762&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17514214" author="akalashnikov" created="Tue, 29 Mar 2022 17:24:52 +0000"  >&lt;p&gt;Some conclusions:&lt;/p&gt;

&lt;p&gt;First of all, this test didn&apos;t start to fail, this test has never worked at all(it didn&apos;t work before &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-26789&quot; title=&quot;RescaleCheckpointManuallyITCase.testCheckpointRescalingInKeyedState failed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-26789&quot;&gt;&lt;del&gt;FLINK-26789&lt;/del&gt;&lt;/a&gt; and after &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-26789&quot; title=&quot;RescaleCheckpointManuallyITCase.testCheckpointRescalingInKeyedState failed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-26789&quot;&gt;&lt;del&gt;FLINK-26789&lt;/del&gt;&lt;/a&gt; as well). So since it is not a degradation we can easily revert commits or ignore tests([https://github.com/apache/flink/pull/19271). &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;Secondly, this test doesn&apos;t work because it validates the state incorrectly. More precisely, the static variable &lt;b&gt;CollectionSink#elements&lt;/b&gt; collects all values and the test assumes that all these values would be in the checkpoint and when we restore we don&apos;t see any of these values again. But it is not true since the test doesn&apos;t provide any guarantees that all values &lt;b&gt;CollectionSink#elements&lt;/b&gt;  are checkpointed. So if the flink was canceled during the last checkpoint, we take the previous one for recovery which contains in-flight data for unaligned checkpoint and as result, several last records will be repeated.&lt;/p&gt;

&lt;p&gt;The last one, in general, I am concerned about the correctness of this test. I don&apos;t really understand what we try to check there since the job doesn&apos;t use any state from recovery. So for me, the test looks like that: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;wait until all data processed&lt;/li&gt;
	&lt;li&gt;the checkpoint store nothing(because all data were processed)&lt;/li&gt;
	&lt;li&gt;restore from empty checkpoint to different parallelism&lt;/li&gt;
	&lt;li&gt;check that we can process new(totally independent of the first case) data&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Does it really make sense?&lt;/p&gt;

&lt;p&gt;Since I don&apos;t fully understand the purpose of this test. I would like to ask &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Yanfei+Lei&quot; class=&quot;user-hover&quot; rel=&quot;Yanfei Lei&quot;&gt;Yanfei Lei&lt;/a&gt; to think about how to fix it or give me more details about the purpose of this test. I recently created this test &lt;b&gt;RestoreUpgradedJobITCase&lt;/b&gt; which also checks the correctness of different states after the restoring from different snapshots. So maybe we somehow can adapt my test to different parallelism.(if the idea of checking is same)&lt;/p&gt;</comment>
                            <comment id="17514452" author="yunta" created="Wed, 30 Mar 2022 06:01:51 +0000"  >&lt;p&gt;First of all, thanks very much for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akalashnikov&quot; class=&quot;user-hover&quot; rel=&quot;akalashnikov&quot;&gt;akalashnikov&lt;/a&gt;&apos;s great work. It&apos;s my bad to not make the &lt;tt&gt;RescaleCheckpointManuallyITCase&lt;/tt&gt; stable.&lt;/p&gt;

&lt;p&gt;I agree that the root cause of the unstable case is due to the current test case doesn&apos;t provide any guarantees that all content of state are checkpointed. &lt;br/&gt;
However, I still need to give my two cents here to reveal the truth. If you can take a look at the comments of the &lt;tt&gt;RescaleCheckpointManuallyITCase&lt;/tt&gt;, you can find that the test refers to &lt;tt&gt;RescalingITCase&lt;/tt&gt;, and the main logic is almost the same as &lt;tt&gt;RescalingITCase#testSavepointRescalingKeyedState&lt;/tt&gt;. &lt;br/&gt;
Actually, current &lt;tt&gt;RescaleCheckpointManuallyITCase&lt;/tt&gt; could verify the keyed state had been correctly restored with rescaling, and you can refer to the class &lt;tt&gt;#SubtaskIndexFlatMapper&lt;/tt&gt; to see that there exit two value-states named &lt;tt&gt;counter&lt;/tt&gt; and &lt;tt&gt;sum&lt;/tt&gt;. These two value-states are the main targets to verify. Once restored, previous &lt;tt&gt;counter&lt;/tt&gt; and &lt;tt&gt;sum&lt;/tt&gt; would be picked up again, and that&apos;s why we think the expected elements in the 2nd rescale would be &lt;a href=&quot;https://github.com/apache/flink/blob/4c8995917885e301ca11023fb5e4eb3d0b7a0c7e/flink-tests/src/test/java/org/apache/flink/test/checkpointing/RescaleCheckpointManuallyITCase.java#L152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;numberElements + numberElements2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In other words, the 2nd run does not restore from an empty checkpoint. And we indeed leverage states within class &lt;tt&gt;#SubtaskIndexFlatMapper&lt;/tt&gt; to verify checkpoint restored as expected.&lt;/p&gt;

&lt;p&gt;So the next question is how to make guarantees that all states within &lt;tt&gt;#SubtaskIndexFlatMapper&lt;/tt&gt; could be included in the next checkpoints. If the 2nd job could restore from a checkpoint which triggers after we call &lt;tt&gt;CollectionSink#getElementsSet()&lt;/tt&gt;, then we can say that checkpoint could be a safe one. And thanks for &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-24280&quot; title=&quot;Support manual checkpoints triggering from a MiniCluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-24280&quot;&gt;&lt;del&gt;FLINK-24280&lt;/del&gt;&lt;/a&gt;, we can now trigger manual checkpoint in a mini cluster.&lt;/p&gt;

&lt;p&gt;The last question is whther we can adopt &lt;b&gt;RestoreUpgradedJobITCase&lt;/b&gt; to check the correctness of different snapshots. Unfortunatly, it cannot satisify our request as we want to verify the correctness of RocksDB keyed state rescale while &lt;tt&gt;RestoreUpgradedJobITCase&lt;/tt&gt; only includes operator state. The reason why we introduce &lt;tt&gt;RescaleCheckpointManuallyITCase&lt;/tt&gt; is that we improved the performance of RocksDB rescale via leveraging its &lt;tt&gt;deleteRange&lt;/tt&gt; API (in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-21321&quot; title=&quot;Change RocksDB incremental checkpoint re-scaling to use deleteRange&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-21321&quot;&gt;&lt;del&gt;FLINK-21321&lt;/del&gt;&lt;/a&gt;), which could help much on reactive mode during rescaling, and current Flink lacks of an IT case to verify checkpoint rescale.&lt;/p&gt;

&lt;p&gt;I noticed that Anto had created a &lt;a href=&quot;https://github.com/apache/flink/pull/19271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt; to ignore this test. I feel very sorry for this unstable test and could &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akalashnikov&quot; class=&quot;user-hover&quot; rel=&quot;akalashnikov&quot;&gt;akalashnikov&lt;/a&gt; also just spend some time to take a look at &lt;a href=&quot;https://github.com/apache/flink/pull/19276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;my fix solution&lt;/a&gt;? It&apos;s very easy to understand and could also be verified in local environment.&lt;/p&gt;

&lt;p&gt;Finally, I just want to thank for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akalashnikov&quot; class=&quot;user-hover&quot; rel=&quot;akalashnikov&quot;&gt;akalashnikov&lt;/a&gt;&apos;s great work to figure out the unstable reason once again.&lt;/p&gt;

</comment>
                            <comment id="17514513" author="akalashnikov" created="Wed, 30 Mar 2022 07:57:04 +0000"  >&lt;p&gt;My bad. You are right about states in &lt;b&gt;SubtaskIndexFlatMapper&lt;/b&gt; I saw it but I didn&apos;t realize that we take into account these states during verification. I think your fix is correct. It is actually was the difference between &lt;b&gt;RescalingITCase&lt;/b&gt; and the new &lt;b&gt;RescaleCheckpointManuallyITCase&lt;/b&gt; because &lt;b&gt;RescalingITCase&lt;/b&gt; triggers savepoint before the cancel.&lt;/p&gt;

&lt;p&gt;Since this ticket is a blocker I propose to merge your fix ASAP but I actually want to discuss somewhere(here or maybe in another ticket) a couple more questions:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Why do we have two test classes &lt;b&gt;RescalingITCase&lt;/b&gt; and &lt;b&gt;RescaleCheckpointManuallyITCase&lt;/b&gt;? Won&apos;t it be better to add one more parameter &lt;b&gt;INCREMENTAL_CHECKPOINTS&lt;/b&gt; to &lt;b&gt;RescalingITCase&lt;/b&gt; and keep only one class(since test logic in both classes is the same)?&lt;/li&gt;
	&lt;li&gt;Right now, we have several tests(&lt;b&gt;RescalingITCase&lt;/b&gt;, &lt;b&gt;RescaleCheckpointManuallyITCase&lt;/b&gt;, &lt;b&gt;RestoreUpgradedJobITCase&lt;/b&gt;, I think even more than that) that contains the same logic : fill different type of states - do checkpoint/savepoint - restore with different configuration - validate correcntes. In my opinion, it makes sense to think about the unification of all of these tests(of course, in a separate ticket). Does it make sense to think about it or do I understand something wrong and do these tests have more differences than I think?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17514562" author="yunta" created="Wed, 30 Mar 2022 09:32:16 +0000"  >&lt;p&gt;Since my local CI &lt;a href=&quot;https://dev.azure.com/myasuka/flink/_build/results?buildId=415&amp;amp;view=results&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/myasuka/flink/_build/results?buildId=415&amp;amp;view=results&lt;/a&gt; had turned green. I have already merged the fix.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The reason why we create another &lt;b&gt;RescaleCheckpointManuallyITCase&lt;/b&gt; is due to &lt;b&gt;RescalingITCase&lt;/b&gt; only targets for savepoint rescale. This has some historical reason for the mechanism of Flink rescale. If you take a look at current Flink official document about &lt;a href=&quot;https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/ops/state/checkpoints/#difference-to-savepoints&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;checkpoints difference to savepoints&lt;/a&gt; : &lt;tt&gt;&quot;Checkpoints have a few differences from savepoints. They do not support Flink specific features like rescaling.&quot;&lt;/tt&gt;&lt;br/&gt;
From my point of view, this means Flink community wants to hold some space to explain and does not promise checkpoint could support rescale at any time. That&apos;s why &lt;tt&gt;RescalingITCase&lt;/tt&gt; only focus on savepoint rescale. On the other hand, RocksDB incremental checkpoint is the factual choice for many companies in production environment, and they heavily depend on the incremenatl checkpoint rescaling feature. In &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-21321&quot; title=&quot;Change RocksDB incremental checkpoint re-scaling to use deleteRange&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-21321&quot;&gt;&lt;del&gt;FLINK-21321&lt;/del&gt;&lt;/a&gt;, we tried to improve the RocksDB rescale performance. Since we did not want to touch the existing scope of &lt;tt&gt;RescalingITCase&lt;/tt&gt;, not to mentition that case has some other unrelated test parameters, we then introduce another IT case targets for RocksDB rescale due to we changed the RocksDB rescale implementation. &lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;For current RestoreUpgradedJobITCase, I feel a bit weird about that case as it  just used operator state, which means there is no difference with native savepoint and canonical savepoint.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akalashnikov&quot; class=&quot;user-hover&quot; rel=&quot;akalashnikov&quot;&gt;akalashnikov&lt;/a&gt; I noticed that your PR of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-26134&quot; title=&quot;Document checkpoint/savepoint guarantees&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-26134&quot;&gt;&lt;del&gt;FLINK-26134&lt;/del&gt;&lt;/a&gt; had dropped the limit of checkpoint rescaling, and I think it&apos;s okay to unify them together in one IT case if we follow the direction of FLIP-203. However, that test must include verifing on keyed state and all kinds of state-backends.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="17514563" author="yunta" created="Wed, 30 Mar 2022 09:33:13 +0000"  >&lt;p&gt;Merged in master: 317ba3318a8398087defb1e335e3a89f9fd8d920&lt;/p&gt;</comment>
                            <comment id="17514576" author="akalashnikov" created="Wed, 30 Mar 2022 10:09:23 +0000"  >&lt;p&gt;Thanks for the feedback, as a result, I think I will create a new ticket where we investigate the existing tests with similar ideas and then we can decide what to do.&lt;/p&gt;</comment>
                            <comment id="17514734" author="JIRAUSER281719" created="Wed, 30 Mar 2022 14:19:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33858&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33858&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17515042" author="yunta" created="Thu, 31 Mar 2022 03:05:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nsemmler&quot; class=&quot;user-hover&quot; rel=&quot;nsemmler&quot;&gt;nsemmler&lt;/a&gt;, the broken instance &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33858&amp;amp;view=results&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=33858&amp;amp;view=results&lt;/a&gt; does not include the fix of &lt;a href=&quot;https://github.com/apache/flink/commit/317ba3318a8398087defb1e335e3a89f9fd8d920&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/317ba3318a8398087defb1e335e3a89f9fd8d920&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="17515134" author="JIRAUSER281719" created="Thu, 31 Mar 2022 07:40:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt; ok fair&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13434968">FLINK-26789</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10vnc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>