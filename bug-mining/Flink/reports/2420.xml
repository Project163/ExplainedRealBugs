<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:33:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9194] Finished jobs are not archived to HistoryServer</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9194</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;In flip6 mode, jobs are not archived to the HistoryServer. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Flink 2af481a&lt;/p&gt;</environment>
        <key id="13153029">FLINK-9194</key>
            <summary>Finished jobs are not archived to HistoryServer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="gjy">Gary Yao</reporter>
                        <labels>
                            <label>flip-6</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 17 Apr 2018 14:45:38 +0000</created>
                <updated>Thu, 28 Feb 2019 14:10:15 +0000</updated>
                            <resolved>Tue, 15 May 2018 07:55:30 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16441846" author="yuqi" created="Wed, 18 Apr 2018 03:36:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; Could not reproduce this problem with the environment you provide, more detail about it?&lt;/p&gt;</comment>
                            <comment id="16441927" author="gjy" created="Wed, 18 Apr 2018 05:37:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuqi&quot; class=&quot;user-hover&quot; rel=&quot;yuqi&quot;&gt;yuqi&lt;/a&gt; I configured &lt;tt&gt;jobmanager.archive.fs.dir&lt;/tt&gt;, and started the History Server as described here: &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-master/monitoring/historyserver.html#overview&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.apache.org/projects/flink/flink-docs-master/monitoring/historyserver.html#overview&lt;/a&gt;&lt;br/&gt;
It cannot work because the code is not there.&lt;/p&gt;</comment>
                            <comment id="16443357" author="jstehler" created="Wed, 18 Apr 2018 23:52:40 +0000"  >&lt;p&gt;Could this issue possibly link with &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9030&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-9030&lt;/a&gt;&#160;?&lt;/p&gt;</comment>
                            <comment id="16443640" author="zentol" created="Thu, 19 Apr 2018 07:20:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jstehler&quot; class=&quot;user-hover&quot; rel=&quot;jstehler&quot;&gt;jstehler&lt;/a&gt; That issue should be unrelated as it is about 1.4.&lt;/p&gt;</comment>
                            <comment id="16445807" author="aljoscha" created="Fri, 20 Apr 2018 14:32:43 +0000"  >&lt;p&gt;Moved this to 1.6.0 to unblock the release, please discuss if this is urgent for you.&lt;/p&gt;</comment>
                            <comment id="16446852" author="githubbot" created="Sat, 21 Apr 2018 15:16:26 +0000"  >&lt;p&gt;GitHub user yuqi1129 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9194&quot; title=&quot;Finished jobs are not archived to HistoryServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9194&quot;&gt;&lt;del&gt;FLINK-9194&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;histroyserver&amp;#93;&lt;/span&gt; Finished jobs are not archived to Histor&#8230;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This is to solve the problem that history server can only show only one completed job even though there exists several completed jobs in the archive dir. &lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Change the class `HistoryServerArchiveFetcher.JobArchiveFetcherTask`  and the main change is to place the overview of each job in the folder of its&apos; jobId. Final, traverse all the overviews and place them together.&lt;/li&gt;
&lt;/ul&gt;



&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;




&lt;p&gt;    This change is already covered by existing tests, such as `HistoryServerTest` and we add some test case in this test class.&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/yuqi1129/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/yuqi1129/flink&lt;/a&gt; historyserver1&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5888&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit bdbf6c6cba537887ace49b28caf66896722cc0bc&lt;br/&gt;
Author: hzyuqi1 &amp;lt;hzyuqi1@...&amp;gt;&lt;br/&gt;
Date:   2018-04-20T16:03:54Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9194&quot; title=&quot;Finished jobs are not archived to HistoryServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9194&quot;&gt;&lt;del&gt;FLINK-9194&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;histroyserver&amp;#93;&lt;/span&gt; Finished jobs are not archived to HistoryServer&lt;/p&gt;

&lt;p&gt;    This closes #9194&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16447970" author="githubbot" created="Mon, 23 Apr 2018 11:12:51 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888#discussion_r183356514&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888#discussion_r183356514&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -231,18 +243,20 @@ public void run() {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;For the display in the HistoryServer WebFrontend we have to combine these overviews.&lt;br/&gt;
     	 */&lt;br/&gt;
     	private static void updateJobOverview(File webDir) {&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;File webOverviewDir = new File(webDir, &quot;overviews&quot;);&lt;/li&gt;
	&lt;li&gt;try (JsonGenerator gen = jacksonFactory.createGenerator(HistoryServer.createOrGetFile(webDir, &quot;joboverview&quot;))) {&lt;br/&gt;
    +		File webOverviewDir = new File(webDir, &quot;/jobs/&quot;);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    the slashes are unnecessary, and the directory should be explicitly created here&lt;/p&gt;</comment>
                            <comment id="16447971" author="githubbot" created="Mon, 23 Apr 2018 11:12:51 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888#discussion_r183355554&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888#discussion_r183355554&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -180,10 +180,22 @@ public void run() {&lt;/p&gt;

&lt;p&gt;     									// We overwrite existing files since this may be another attempt at fetching this archive.&lt;br/&gt;
     									// Existing files may be incomplete/corrupt.&lt;br/&gt;
    +&lt;br/&gt;
    +									//this is to save a job overview information, we put it in the ${path}/jobId folder&lt;br/&gt;
    +									//because if put it in ${path}, new job inforamtion will override it and the web&lt;br/&gt;
    +									//will show only one job all the same.&lt;br/&gt;
    +									if (!target.toURI().toURL().getPath().contains(jobID)) &lt;/p&gt;
{
    +										Files.deleteIfExists(targetPath);
    +										targetPath = new File(target.getParent() + &quot;/&quot; + jobID + &quot;/&quot; + target.getName()).toPath();
    +									}
&lt;p&gt;     									Files.deleteIfExists(targetPath);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Files.createFile(target.toPath());&lt;/li&gt;
	&lt;li&gt;try (FileWriter fw = new FileWriter(target)) {&lt;br/&gt;
    +									if (!targetPath.toFile().getParentFile().exists()) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    this change is unnecessary if the above change is reverted, since directories are already created at Line 174.&lt;/p&gt;</comment>
                            <comment id="16447972" author="githubbot" created="Mon, 23 Apr 2018 11:12:51 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888#discussion_r183355953&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888#discussion_r183355953&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -180,10 +180,22 @@ public void run() {&lt;/p&gt;

&lt;p&gt;     									// We overwrite existing files since this may be another attempt at fetching this archive.&lt;br/&gt;
     									// Existing files may be incomplete/corrupt.&lt;br/&gt;
    +&lt;br/&gt;
    +									//this is to save a job overview information, we put it in the ${path}/jobId folder&lt;br/&gt;
    +									//because if put it in ${path}, new job inforamtion will override it and the web&lt;br/&gt;
    +									//will show only one job all the same.&lt;br/&gt;
    +									if (!target.toURI().toURL().getPath().contains(jobID)) &lt;/p&gt;
{
    +										Files.deleteIfExists(targetPath);
    +										targetPath = new File(target.getParent() + &quot;/&quot; + jobID + &quot;/&quot; + target.getName()).toPath();
    +									}
&lt;p&gt;     									Files.deleteIfExists(targetPath);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Files.createFile(target.toPath());&lt;/li&gt;
	&lt;li&gt;try (FileWriter fw = new FileWriter(target)) {&lt;br/&gt;
    +									if (!targetPath.toFile().getParentFile().exists()) 
{
    +										Files.createDirectory(targetPath.getParent());
    +									}
&lt;p&gt;    +&lt;br/&gt;
    +									Files.createFile(targetPath);&lt;br/&gt;
    +									try (FileWriter fw = new FileWriter(targetPath.toFile())) {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    this change is unnecessary if the above change is reverted&lt;/p&gt;</comment>
                            <comment id="16447973" author="githubbot" created="Mon, 23 Apr 2018 11:12:51 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888#discussion_r183356809&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888#discussion_r183356809&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -231,18 +243,20 @@ public void run() {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;For the display in the HistoryServer WebFrontend we have to combine these overviews.&lt;br/&gt;
     	 */&lt;br/&gt;
     	private static void updateJobOverview(File webDir) {&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;File webOverviewDir = new File(webDir, &quot;overviews&quot;);&lt;/li&gt;
	&lt;li&gt;try (JsonGenerator gen = jacksonFactory.createGenerator(HistoryServer.createOrGetFile(webDir, &quot;joboverview&quot;))) {&lt;br/&gt;
    +		File webOverviewDir = new File(webDir, &quot;/jobs/&quot;);&lt;br/&gt;
    +		try (JsonGenerator gen = jacksonFactory.createGenerator(HistoryServer.createOrGetFile(webDir, &quot;/jobs/overview&quot;))) {&lt;br/&gt;
     			gen.writeStartObject();&lt;/li&gt;
	&lt;li&gt;gen.writeArrayFieldStart(&quot;running&quot;);&lt;/li&gt;
	&lt;li&gt;gen.writeEndArray();&lt;/li&gt;
	&lt;li&gt;gen.writeArrayFieldStart(&quot;finished&quot;);&lt;br/&gt;
    +			gen.writeArrayFieldStart(&quot;jobs&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     			File[] overviews = new File(webOverviewDir.getPath()).listFiles();&lt;br/&gt;
     			if (overviews != null) {&lt;br/&gt;
     				for (File overview : overviews) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;JsonNode root = mapper.readTree(overview);&lt;/li&gt;
	&lt;li&gt;JsonNode finished = root.get(&quot;finished&quot;);&lt;br/&gt;
    +					if (overview.isFile()) 
{
    +						continue;
    +					}
&lt;p&gt;    +					File file = new File(overview.getAbsolutePath() + &quot;/overview.json&quot;);&lt;br/&gt;
    +					JsonNode root = mapper.readTree(file);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    A much safer implementation would be to parse these into `MultipleJobsDetails`, merge them and write them back out.&lt;/p&gt;</comment>
                            <comment id="16447974" author="githubbot" created="Mon, 23 Apr 2018 11:12:51 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888#discussion_r183356576&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888#discussion_r183356576&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -231,18 +243,20 @@ public void run() {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;For the display in the HistoryServer WebFrontend we have to combine these overviews.&lt;br/&gt;
     	 */&lt;br/&gt;
     	private static void updateJobOverview(File webDir) {&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;File webOverviewDir = new File(webDir, &quot;overviews&quot;);&lt;/li&gt;
	&lt;li&gt;try (JsonGenerator gen = jacksonFactory.createGenerator(HistoryServer.createOrGetFile(webDir, &quot;joboverview&quot;))) {&lt;br/&gt;
    +		File webOverviewDir = new File(webDir, &quot;/jobs/&quot;);&lt;br/&gt;
    +		try (JsonGenerator gen = jacksonFactory.createGenerator(HistoryServer.createOrGetFile(webDir, &quot;/jobs/overview&quot;))) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    replace webDir with webOverviewDir and adjust the child path accordingly&lt;/p&gt;</comment>
                            <comment id="16447975" author="githubbot" created="Mon, 23 Apr 2018 11:12:52 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888#discussion_r183357018&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888#discussion_r183357018&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/test/java/org/apache/flink/runtime/webmonitor/history/HistoryServerTest.java &amp;#8212;&lt;br/&gt;
    @@ -96,9 +108,26 @@ public void testFullArchiveLifecycle() throws Exception {&lt;br/&gt;
     			String response = getFromHTTP(baseUrl + JobsOverviewHeaders.URL);&lt;br/&gt;
     			JsonNode overview = mapper.readTree(response);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String jobID = overview.get(&quot;jobs&quot;).get(0).get(&quot;jid&quot;).asText();&lt;/li&gt;
	&lt;li&gt;JsonNode jobDetails = mapper.readTree(getFromHTTP(baseUrl + &quot;/jobs/&quot; + jobID));&lt;/li&gt;
	&lt;li&gt;Assert.assertNotNull(jobDetails.get(&quot;jid&quot;));&lt;br/&gt;
    +			JsonNode allJobs = overview.get(&quot;jobs&quot;);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    safer implementation is now possible by reading this as a `MultipleJobsDetails`.&lt;/p&gt;</comment>
                            <comment id="16447976" author="githubbot" created="Mon, 23 Apr 2018 11:12:52 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888#discussion_r183355330&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888#discussion_r183355330&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -180,10 +180,22 @@ public void run() {&lt;/p&gt;

&lt;p&gt;     									// We overwrite existing files since this may be another attempt at fetching this archive.&lt;br/&gt;
     									// Existing files may be incomplete/corrupt.&lt;br/&gt;
    +&lt;br/&gt;
    +									//this is to save a job overview information, we put it in the ${path}/jobId folder&lt;br/&gt;
    +									//because if put it in ${path}, new job inforamtion will override it and the web&lt;br/&gt;
    +									//will show only one job all the same.&lt;br/&gt;
    +									if (!target.toURI().toURL().getPath().contains(jobID)) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    this isn&apos;t the right fix. This case &lt;em&gt;was&lt;/em&gt; handled at Line 165, but was rendered ineffective since the URL was changed.&lt;/p&gt;</comment>
                            <comment id="16448092" author="githubbot" created="Mon, 23 Apr 2018 12:50:25 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m currently preparing a PR for adding HistoryServer support to Flip6 and will integrate this PR into that one.&lt;/p&gt;</comment>
                            <comment id="16449153" author="githubbot" created="Tue, 24 Apr 2018 01:35:57 +0000"  >&lt;p&gt;Github user yuqi1129 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888#discussion_r183392156&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888#discussion_r183392156&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -180,10 +180,22 @@ public void run() {&lt;/p&gt;

&lt;p&gt;     									// We overwrite existing files since this may be another attempt at fetching this archive.&lt;br/&gt;
     									// Existing files may be incomplete/corrupt.&lt;br/&gt;
    +&lt;br/&gt;
    +									//this is to save a job overview information, we put it in the ${path}/jobId folder&lt;br/&gt;
    +									//because if put it in ${path}, new job inforamtion will override it and the web&lt;br/&gt;
    +									//will show only one job all the same.&lt;br/&gt;
    +									if (!target.toURI().toURL().getPath().contains(jobID)) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Yes, Indeed  change Line 165 will make things more simple&lt;/p&gt;</comment>
                            <comment id="16449491" author="githubbot" created="Tue, 24 Apr 2018 08:47:36 +0000"  >&lt;p&gt;GitHub user zentol opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5902&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5902&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9194&quot; title=&quot;Finished jobs are not archived to HistoryServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9194&quot;&gt;&lt;del&gt;FLINK-9194&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;history&amp;#93;&lt;/span&gt; Add HistoryServer support to flip6&lt;/p&gt;

&lt;p&gt;    This PR subsumes #5888.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This PR adds HistoryServer support to Flip6, i.e. allows the Dispatcher to archive finished jobs. Additionally the HistoryServer was updated to reflect the latest changes to the job overview page.&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;fix job overview merging of the HistoryServer (#5888)&lt;/li&gt;
	&lt;li&gt;replace some manual JSON reading/writing with mappings to/from `MultipleJobDetails`&lt;/li&gt;
	&lt;li&gt;add a convenience `ArchivedJson` constructor that accepts a `ResponseBody`&lt;/li&gt;
	&lt;li&gt;add `JsonArchivist` argument to `Dispatcher` constructor&lt;/li&gt;
	&lt;li&gt;the archivist creates a `Collection&amp;lt;ArchivedJson&amp;gt;` which is passed to `FsJobArchivist` for writing to disk&lt;/li&gt;
	&lt;li&gt;`WebMonitorEndpoint` now implements `JsonArchivist`&lt;/li&gt;
	&lt;li&gt;Modify relevant handlers to implement `JsonArchivist`&lt;/li&gt;
	&lt;li&gt;this is different to the existing implementation of using static factories&lt;/li&gt;
	&lt;li&gt;archiving handlers are detected by the `WebMonitorEndpoint` which is significantly less brittle as the existing approach of separately listing archivers&lt;/li&gt;
	&lt;li&gt;rework the `HistoryServerTest` to run multiple small jobs against a `MiniClusterResource`&lt;/li&gt;
	&lt;li&gt;this better reflects the actual behavior and ensures we don&apos;t break things again&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;run `HistoryServerTest`&lt;/li&gt;
	&lt;li&gt;manually verify that Flip6 clusters can archive jobs, and ensure that HistoryServer can read them.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zentol/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zentol/flink&lt;/a&gt; 9194&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5902.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5902.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5902&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit aaf02376a0b4c16e454d0f3b733cee9edd20ef54&lt;br/&gt;
Author: hzyuqi1 &amp;lt;hzyuqi1@...&amp;gt;&lt;br/&gt;
Date:   2018-04-24T08:25:10Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9246&quot; title=&quot;HistoryServer job overview broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9246&quot;&gt;&lt;del&gt;FLINK-9246&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;HS&amp;#93;&lt;/span&gt; Adjust HistoryServer for job overview changes&lt;/p&gt;

&lt;p&gt;commit 722590fa784f36051d8aab0ed01d3cae0c8f8200&lt;br/&gt;
Author: zentol &amp;lt;chesnay@...&amp;gt;&lt;br/&gt;
Date:   2018-04-24T08:26:32Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;history&amp;#93;&lt;/span&gt; Read/Write MultipleJobsDetails instead of manual JSON&lt;/p&gt;

&lt;p&gt;commit 45bca6b3f996852ca85827903b5a9e90fa2793c1&lt;br/&gt;
Author: zentol &amp;lt;chesnay@...&amp;gt;&lt;br/&gt;
Date:   2018-04-18T12:33:04Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9194&quot; title=&quot;Finished jobs are not archived to HistoryServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9194&quot;&gt;&lt;del&gt;FLINK-9194&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;history&amp;#93;&lt;/span&gt; Add archiving routine to Dispatcher&lt;/p&gt;

&lt;p&gt;commit de0684c548e5c9e966954082dd963358567997cc&lt;br/&gt;
Author: zentol &amp;lt;chesnay@...&amp;gt;&lt;br/&gt;
Date:   2018-04-18T12:33:16Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9194&quot; title=&quot;Finished jobs are not archived to HistoryServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9194&quot;&gt;&lt;del&gt;FLINK-9194&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;history&amp;#93;&lt;/span&gt; Add convenience ArchivedJson constructor&lt;/p&gt;

&lt;p&gt;commit 8a0e9e28d429b2cb804dcef485adcd83c58e3b07&lt;br/&gt;
Author: zentol &amp;lt;chesnay@...&amp;gt;&lt;br/&gt;
Date:   2018-04-18T12:34:25Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9194&quot; title=&quot;Finished jobs are not archived to HistoryServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9194&quot;&gt;&lt;del&gt;FLINK-9194&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;history&amp;#93;&lt;/span&gt; Adjust handlers&lt;/p&gt;

&lt;p&gt;commit 21d0bc0e5fc21d8e03a6c0b92014f0d49b62b0cb&lt;br/&gt;
Author: zentol &amp;lt;chesnay@...&amp;gt;&lt;br/&gt;
Date:   2018-04-23T13:13:41Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9194&quot; title=&quot;Finished jobs are not archived to HistoryServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9194&quot;&gt;&lt;del&gt;FLINK-9194&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;history&amp;#93;&lt;/span&gt; Rework and extend the HistoryServer test&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16449492" author="githubbot" created="Tue, 24 Apr 2018 08:47:46 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    see #5902.&lt;/p&gt;</comment>
                            <comment id="16449724" author="githubbot" created="Tue, 24 Apr 2018 12:14:33 +0000"  >&lt;p&gt;Github user yuqi1129 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5902#discussion_r183697720&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5902#discussion_r183697720&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/job/JobVertexTaskManagersHandler.java &amp;#8212;&lt;br/&gt;
    @@ -83,6 +90,24 @@ protected JobVertexTaskManagersInfo handleRequest(&lt;br/&gt;
     			throw new NotFoundException(String.format(&quot;JobVertex %s not found&quot;, jobVertexID));&lt;br/&gt;
     		}&lt;/p&gt;

&lt;p&gt;    +		return createJobVertexTaskManagersInfo(jobVertex, jobID, metricFetcher);&lt;br/&gt;
    +	}&lt;br/&gt;
    +&lt;br/&gt;
    +	@Override&lt;br/&gt;
    +	public Collection&amp;lt;ArchivedJson&amp;gt; archiveJsonWithPath(AccessExecutionGraph graph) throws IOException {&lt;br/&gt;
    +		Collection&amp;lt;? extends AccessExecutionJobVertex&amp;gt; vertices = graph.getAllVertices().values();&lt;br/&gt;
    +		List&amp;lt;ArchivedJson&amp;gt; archive = new ArrayList&amp;lt;&amp;gt;(vertices.size());&lt;br/&gt;
    +		for (AccessExecutionJobVertex task : vertices) {&lt;br/&gt;
    +			ResponseBody json = createJobVertexTaskManagersInfo(task, graph.getJobID(), null);&lt;br/&gt;
    +			String path = getMessageHeaders().getTargetRestEndpointURL()&lt;br/&gt;
    +				.replace(&apos;:&apos; + JobIDPathParameter.KEY, graph.getJobID().toString())&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    &apos;:&apos; + JobIDPathParameter.KEY&lt;br/&gt;
    &apos;:&apos; + JobVertexIdPathParameter.KEY&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    We can make them constant values&lt;/p&gt;</comment>
                            <comment id="16449725" author="githubbot" created="Tue, 24 Apr 2018 12:14:33 +0000"  >&lt;p&gt;Github user yuqi1129 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5902#discussion_r183702452&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5902#discussion_r183702452&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -211,7 +215,7 @@ public void run() {&lt;br/&gt;
     						}&lt;br/&gt;
     					}&lt;br/&gt;
     					if (updateOverview) &lt;/p&gt;
{
    -						updateJobOverview(webDir);
    +						updateJobOverview(webOverviewDir, webDir);
     					}
&lt;p&gt;    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Could not figure out the function of `numFinishedPolls.countDown();`in line 224, seems that `numFinishedPolls`   is useless as it was initialized 0&lt;/p&gt;</comment>
                            <comment id="16449736" author="githubbot" created="Tue, 24 Apr 2018 12:19:34 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5902#discussion_r183707159&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5902#discussion_r183707159&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -211,7 +215,7 @@ public void run() {&lt;br/&gt;
     						}&lt;br/&gt;
     					}&lt;br/&gt;
     					if (updateOverview) &lt;/p&gt;
{
    -						updateJobOverview(webDir);
    +						updateJobOverview(webOverviewDir, webDir);
     					}
&lt;p&gt;    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    We allow passing in a countdown latch for testing purposes. Since the fetching happen asynchronously we needed a way to wait until the HS has polled the directories.&lt;/p&gt;

&lt;p&gt;    The `CountdownLatch` is initialized with `1` in `HistoryServerTest`.&lt;/p&gt;</comment>
                            <comment id="16449741" author="githubbot" created="Tue, 24 Apr 2018 12:27:04 +0000"  >&lt;p&gt;Github user yuqi1129 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5902#discussion_r183709218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5902#discussion_r183709218&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -211,7 +215,7 @@ public void run() {&lt;br/&gt;
     						}&lt;br/&gt;
     					}&lt;br/&gt;
     					if (updateOverview) &lt;/p&gt;
{
    -						updateJobOverview(webDir);
    +						updateJobOverview(webOverviewDir, webDir);
     					}
&lt;p&gt;    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    In test case, it&apos;s quite clear this is make the HS has polled file before read, That is to say adding `numFinishedPolls` is just for test purpose, am i right &#65311;&lt;/p&gt;</comment>
                            <comment id="16449809" author="githubbot" created="Tue, 24 Apr 2018 13:04:35 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5902#discussion_r183720759&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5902#discussion_r183720759&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -211,7 +215,7 @@ public void run() {&lt;br/&gt;
     						}&lt;br/&gt;
     					}&lt;br/&gt;
     					if (updateOverview) &lt;/p&gt;
{
    -						updateJobOverview(webDir);
    +						updateJobOverview(webOverviewDir, webDir);
     					}
&lt;p&gt;    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    yes.&lt;/p&gt;</comment>
                            <comment id="16465691" author="githubbot" created="Mon, 7 May 2018 09:44:59 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5902#discussion_r186376796&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5902#discussion_r186376796&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -162,7 +166,7 @@ public void run() {&lt;br/&gt;
     									String json = archive.getJson();&lt;/p&gt;

&lt;p&gt;     									File target;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (path.equals(&quot;/joboverview&quot;)) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    this change effectively kills backwards compatibility; i.e. a 1.4 HS cannot properly handle 1.5 archives, and a 1.5 HS cannot properly handle 1.4 archives. What is missing is a compatibility check for the old URL.&lt;/p&gt;</comment>
                            <comment id="16466736" author="githubbot" created="Tue, 8 May 2018 01:58:39 +0000"  >&lt;p&gt;Github user yuqi1129 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5902#discussion_r186599431&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5902#discussion_r186599431&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java &amp;#8212;&lt;br/&gt;
    @@ -162,7 +166,7 @@ public void run() {&lt;br/&gt;
     									String json = archive.getJson();&lt;/p&gt;

&lt;p&gt;     									File target;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (path.equals(&quot;/joboverview&quot;)) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Agree&lt;/p&gt;</comment>
                            <comment id="16475441" author="githubbot" created="Tue, 15 May 2018 07:54:15 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5902&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5902&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16475445" author="till.rohrmann" created="Tue, 15 May 2018 07:55:30 +0000"  >&lt;p&gt;Fixed via&lt;br/&gt;
master:&lt;br/&gt;
d734032ee3&lt;br/&gt;
6958380038&lt;br/&gt;
6d8cc733d4&lt;br/&gt;
bb06ba954b&lt;br/&gt;
5753b746c1&lt;br/&gt;
fd374b832f&lt;br/&gt;
1.5.0:&lt;br/&gt;
d5bcecd77c&lt;br/&gt;
8d8b3ec888&lt;br/&gt;
7ba41bcda2&lt;br/&gt;
0d56793102&lt;br/&gt;
4d5b00ec5b&lt;br/&gt;
c2e3d23924&lt;/p&gt;</comment>
                            <comment id="16531148" author="githubbot" created="Tue, 3 Jul 2018 10:02:05 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5888&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5888&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sngv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>