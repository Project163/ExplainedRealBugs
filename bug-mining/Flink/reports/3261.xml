<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:41:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-12501] AvroTypeSerializer does not work with types generated by avrohugger</title>
                <link>https://issues.apache.org/jira/browse/FLINK-12501</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The main problem is that the code in &lt;tt&gt;SpecificData.createSchema()&lt;/tt&gt; tries to reflectively read the &lt;tt&gt;SCHEMA$&lt;/tt&gt; field, that is normally there in Avro generated classes. However, avrohugger generates this field in a companion object, which the reflective Java code will therefore not find.&lt;/p&gt;

&lt;p&gt;This is also described in these ML threads:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://lists.apache.org/thread.html/5db58c7d15e4e9aaa515f935be3b342fe036e97d32e1fb0f0d1797ee@%3Cuser.flink.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/5db58c7d15e4e9aaa515f935be3b342fe036e97d32e1fb0f0d1797ee@%3Cuser.flink.apache.org%3E&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://lists.apache.org/thread.html/cf1c5b8fa7f095739438807de9f2497e04ffe55237c5dea83355112d@%3Cuser.flink.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/cf1c5b8fa7f095739438807de9f2497e04ffe55237c5dea83355112d@%3Cuser.flink.apache.org%3E&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13232993">FLINK-12501</key>
            <summary>AvroTypeSerializer does not work with types generated by avrohugger</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="aljoscha">Aljoscha Krettek</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 13 May 2019 14:06:27 +0000</created>
                <updated>Thu, 9 Jul 2020 14:50:57 +0000</updated>
                            <resolved>Fri, 6 Sep 2019 11:22:00 +0000</resolved>
                                                    <fixVersion>1.9.1</fixVersion>
                    <fixVersion>1.10.0</fixVersion>
                                    <component>Formats (JSON, Avro, Parquet, ORC, SequenceFile)</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="16839191" author="tzulitai" created="Tue, 14 May 2019 08:09:43 +0000"  >&lt;p&gt;+1 to fix this.&lt;br/&gt;
This was also reported elsewhere by this blog post: &lt;a href=&quot;https://medium.com/wbaa/making-sense-of-apache-flink-state-migration-with-scala-and-avro-69091c232646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://medium.com/wbaa/making-sense-of-apache-flink-state-migration-with-scala-and-avro-69091c232646&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16839211" author="tzulitai" created="Tue, 14 May 2019 08:46:24 +0000"  >&lt;p&gt;This is really a problem with how avrohugger is implemented.&lt;/p&gt;

&lt;p&gt;Either this gets fixed in avrohugger, Avro&apos;s SpecificData class, or we workaround this specifically for avrohugger in &lt;tt&gt;AvroSerializerSnapshot#tryExtractAvroSchema&lt;/tt&gt; and &lt;tt&gt;AvroSerializer#intializeAvro&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The problem with working around this on our side is that we don&apos;t really know what other popular non-Avro official libraries there are out there. Avrohugger seems to be a popular one for Scala + Avro, though.&lt;/p&gt;</comment>
                            <comment id="16840441" author="aljoscha" created="Wed, 15 May 2019 14:11:47 +0000"  >&lt;p&gt;By the way, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=igalshilman&quot; class=&quot;user-hover&quot; rel=&quot;igalshilman&quot;&gt;igalshilman&lt;/a&gt; pointed out to me how Scio solves this: &lt;a href=&quot;https://github.com/spotify/scio/blob/master/scio-macros/src/main/scala/com/spotify/scio/coders/AvroCoderMacros.scala&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/spotify/scio/blob/master/scio-macros/src/main/scala/com/spotify/scio/coders/AvroCoderMacros.scala&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;They create an instance of the Avro type (using the zero-argument constructor) and then call &lt;tt&gt;getSchema()&lt;/tt&gt; on that, which should work for all avro-generated types, I think.&lt;/p&gt;</comment>
                            <comment id="16924155" author="aljoscha" created="Fri, 6 Sep 2019 11:20:33 +0000"  >&lt;p&gt;Fixed on master in&lt;br/&gt;
f43138e0fe52a66f23225cbf5f72eae110bd3841&lt;/p&gt;</comment>
                            <comment id="16925549" author="ykt836" created="Mon, 9 Sep 2019 10:04:45 +0000"  >&lt;p&gt;Should we also fix it in 1.9 branch?&lt;/p&gt;</comment>
                            <comment id="16925582" author="debasishg" created="Mon, 9 Sep 2019 10:43:26 +0000"  >&lt;p&gt;That would be very helpful Kurt&lt;/p&gt;</comment>
                            <comment id="16927297" author="gjy" created="Wed, 11 Sep 2019 06:56:03 +0000"  >&lt;p&gt;What&apos;s the state here with respect to 1.9?&lt;/p&gt;</comment>
                            <comment id="16927463" author="aljoscha" created="Wed, 11 Sep 2019 10:17:46 +0000"  >&lt;p&gt;I was sceptical about merging this on the 1.9 branch because it&apos;s technically a new feature. Though it could be viewed as fixing a bug, i.e. it was crashing before with Avrohugger-generated types.&lt;/p&gt;

&lt;p&gt;I wouldn&apos;t be against it if someone wants to cherry-pick this on the 1.9 branch.&lt;/p&gt;</comment>
                            <comment id="16936446" author="jark" created="Tue, 24 Sep 2019 06:26:27 +0000"  >&lt;p&gt;I&apos;m fine to cherry-pick it to 1.9 as this is a minor fix and some users can benefit from this. What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16940286" author="jark" created="Sun, 29 Sep 2019 08:04:18 +0000"  >&lt;p&gt;As there are some users requesting this fixup. I cherry-picked it to 1.9 branch. &lt;/p&gt;

&lt;p&gt;Fixed in 1.9.1:&lt;br/&gt;
1196887407c9ef3fad7901f1c592c022b890b227&lt;/p&gt;</comment>
                            <comment id="17019541" author="gjy" created="Mon, 20 Jan 2020 14:59:12 +0000"  >&lt;p&gt;I removed &lt;em&gt;&quot;The `AvroTypeSerializer` now works with types that are generated from Avrohugger, an Avro plugin for Scala.&quot;&lt;/em&gt; from the release notes. We do not include all bug fixes in the release notes, and I do not see how this one differs from other bug fixes.&lt;/p&gt;</comment>
                            <comment id="17148125" author="georg.kf.heiler@gmail.com" created="Mon, 29 Jun 2020 20:47:53 +0000"  >&lt;p&gt;I am new to flink, but using 1.10.1 - I would assume this problem is fixed. However &lt;a href=&quot;https://stackoverflow.com/questions/62637009/flink-use-confluent-schema-registry-for-avro-serde&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/62637009/flink-use-confluent-schema-registry-for-avro-serde&lt;/a&gt; I still stumble upon the same problem of:&#160; `&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;AvroRuntimeException: Not a Specific class&lt;/tt&gt;`. What is still wrong?&lt;/p&gt;</comment>
                            <comment id="17150531" author="aljoscha" created="Thu, 2 Jul 2020 18:56:02 +0000"  >&lt;p&gt;Thanks for noticing this, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=georg.kf.heiler%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;georg.kf.heiler@gmail.com&quot;&gt;georg.kf.heiler@gmail.com&lt;/a&gt;! I created &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-18478&quot; title=&quot;AvroDeserializationSchema does not work with types generated by avrohugger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-18478&quot;&gt;FLINK-18478&lt;/a&gt; to track this. Are you interested in contributing the quick fix for this or should I do it?&lt;/p&gt;</comment>
                            <comment id="17151921" author="georg.kf.heiler@gmail.com" created="Mon, 6 Jul 2020 10:02:26 +0000"  >&lt;p&gt;I am very new to Flink so if you already know what needs to be changed and do not want to offer quite some guidance it would be awesome if you could provide the fix.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As I am lookint at the code now: Why is only the already fixed AvroSerializer using `AvroFactory`?&lt;/p&gt;</comment>
                            <comment id="17154309" author="aljoscha" created="Thu, 9 Jul 2020 08:00:51 +0000"  >&lt;p&gt;I don&apos;t actually know, that&apos;s what I was also wondering about while writing the fix. I&apos;ll talk to some people.&lt;/p&gt;</comment>
                            <comment id="17154643" author="aljoscha" created="Thu, 9 Jul 2020 14:50:57 +0000"  >&lt;p&gt;I fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-18478&quot; title=&quot;AvroDeserializationSchema does not work with types generated by avrohugger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-18478&quot;&gt;FLINK-18478&lt;/a&gt;. &#128076;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13314764">FLINK-18478</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02mqw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>