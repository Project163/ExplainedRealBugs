<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:50:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-19780] FlinkRelMdDistinctRowCount#getDistinctRowCount(Calc) will always return 0 when number of rows are large</title>
                <link>https://issues.apache.org/jira/browse/FLINK-19780</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Due to &lt;a href=&quot;https://issues.apache.org/jira/browse/CALCITE-4351&quot; title=&quot;RelMdUtil#numDistinctVals always returns 0 for large inputs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CALCITE-4351&quot;&gt;&lt;del&gt;CALCITE-4351&lt;/del&gt;&lt;/a&gt; &lt;tt&gt;FlinkRelMdDistinctRowCount#getDistinctRowCount(Calc)&lt;/tt&gt; will always return 0 when number of rows are large.&lt;/p&gt;

&lt;p&gt;What I would suggest is to introduce our own &lt;tt&gt;FlinkRelMdUtil#numDistinctVals&lt;/tt&gt; to treat small and large inputs in different ways. For small inputs we use the more precise &lt;tt&gt;RelMdUtil#numDistinctVals&lt;/tt&gt; and for large inputs we copy the old, approximated implementation of &lt;tt&gt;RelMdUtil#numDistinctVals&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;This is a temporary solution. When &lt;a href=&quot;https://issues.apache.org/jira/browse/CALCITE-4351&quot; title=&quot;RelMdUtil#numDistinctVals always returns 0 for large inputs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CALCITE-4351&quot;&gt;&lt;del&gt;CALCITE-4351&lt;/del&gt;&lt;/a&gt; is fixed we should revert this commit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13336872">FLINK-19780</key>
            <summary>FlinkRelMdDistinctRowCount#getDistinctRowCount(Calc) will always return 0 when number of rows are large</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10">Implemented</resolution>
                                        <assignee username="TsReaper">Caizhi Weng</assignee>
                                    <reporter username="TsReaper">Caizhi Weng</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 23 Oct 2020 08:06:40 +0000</created>
                <updated>Tue, 27 Oct 2020 02:21:44 +0000</updated>
                            <resolved>Tue, 27 Oct 2020 02:21:44 +0000</resolved>
                                                    <fixVersion>1.12.0</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17221075" author="godfreyhe" created="Tue, 27 Oct 2020 02:21:44 +0000"  >&lt;p&gt;master: 54cd73d33facf7e4053076100e3d826428557196&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13336871">CALCITE-4351</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13291478">FLINK-16579</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0jy4g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>