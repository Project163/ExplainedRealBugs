<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:26:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5419] Taskmanager metrics not accessible via REST</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5419</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;There is currently a URL clash between the TaskManagersHandler and TaskManagerMetricsHandler, with both being routed to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/taskmanagers/:taskmanagerid/metrics
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As a result it is not possible to query the full set of metrics for a taskmanager, but only the hard-coded subset that is displayed on the metrics tab on the taskmanager page.&lt;/p&gt;

&lt;p&gt;This is a side-effect of 6d53bbc4b92e651786ecc8c2c6dfeb8e450a16a3 making the URL&apos;s more consistent. The TaskManager page in the web-interface has 3 tabs: Metrics, Log and Stdout.&lt;/p&gt;

&lt;p&gt;The URLs for these tabs are&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/taskmanager/&amp;lt;tmid&amp;gt;/metrics
/taskmanager/&amp;lt;tmid&amp;gt;/log
/taskmanager/&amp;lt;tmid&amp;gt;/stdout
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which correspond to the REST URL&apos;s used. Previously, the metrics tab used &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/taskmanager/&amp;lt;tmid&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, 70704de0c82cbb7b143dd696221e11999feb3600 then exposed the metrics gathered by the metrics system through the REST API. The assumption was that general information for the taskmanagers are retrieved via /taskmanager/&amp;lt;tmid&amp;gt;, similar to how the job-related URL&apos;s are structured, which sadly isn&apos;t the case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13032543">FLINK-5419</key>
            <summary>Taskmanager metrics not accessible via REST</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jan 2017 13:01:33 +0000</created>
                <updated>Fri, 20 Jan 2017 05:46:38 +0000</updated>
                            <resolved>Fri, 20 Jan 2017 05:46:38 +0000</resolved>
                                    <version>1.2.0</version>
                    <version>1.3.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>Runtime / Metrics</component>
                    <component>Runtime / Web Frontend</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15818318" author="githubbot" created="Wed, 11 Jan 2017 13:23:15 +0000"  >&lt;p&gt;GitHub user zentol opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3092&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3092&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5419&quot; title=&quot;Taskmanager metrics not accessible via REST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5419&quot;&gt;&lt;del&gt;FLINK-5419&lt;/del&gt;&lt;/a&gt; Make full TM metrics available through REST API&lt;/p&gt;

&lt;p&gt;    This PR fixes the full set of TaskManager metrics not being available through the REST API. The issue was that multiple handlers were registered for the same URL (&quot;/taskmanagers/:taskmanagerid/metrics&quot;).&lt;br/&gt;
    The relevant handlers are the ```TaskManagersHandler``` which provides a subset of metrics to the WebInterface (basically what is displayed in the metrics tab in the TM page) and the ```TaskManagerMetricsHandler``` which provides full access to metrics.&lt;/p&gt;

&lt;p&gt;    The issue was fixed by making the metrics tab use the following URL: &quot;/taskmanagers/:taskmanagerid&quot;. This is in fact a reversal of a previous change, which technically changed a public API.&lt;/p&gt;

&lt;p&gt;    While fixing this i found a bug in the ```TaskManagerMetricsHandler```; it used the wrong constant to extract the TaskManagerID from the path (&quot;tmid&quot; instead of &quot;taskmanagerid&quot;)&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zentol/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zentol/flink&lt;/a&gt; 5419_tm_rest&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3092.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3092.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3092&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d88dc84100d6d53626c3cb13c5caff5a7bfacc55&lt;br/&gt;
Author: zentol &amp;lt;chesnay@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-01-11T13:07:03Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5419&quot; title=&quot;Taskmanager metrics not accessible via REST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5419&quot;&gt;&lt;del&gt;FLINK-5419&lt;/del&gt;&lt;/a&gt; Make full TM metrics available through REST API&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15823912" author="githubbot" created="Mon, 16 Jan 2017 12:49:02 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3092&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3092&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge this&lt;/p&gt;

&lt;p&gt;    Looks like the web UI files need to be rebuilt when merging this...&lt;/p&gt;</comment>
                            <comment id="15823929" author="githubbot" created="Mon, 16 Jan 2017 13:00:25 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3092&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3092&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    yes, I will rebuild the files while merging. I have other commits pending that require rebuilding, and figured i could do it in one swoop &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15831229" author="githubbot" created="Fri, 20 Jan 2017 05:41:12 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3092&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3092&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15831244" author="zentol" created="Fri, 20 Jan 2017 05:46:38 +0000"  >&lt;p&gt;master: c93e04c16a7865dbbc90d89799b46f91831e0a55&lt;br/&gt;
1.2: f90edc483000db42caaff0de650c1f5bca11bf47&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38cqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>