<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:22:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-38131] Repartition BroadcastState with finished operators</title>
                <link>https://issues.apache.org/jira/browse/FLINK-38131</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-23475&quot; title=&quot;Handle BroadcastState with finished operators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-23475&quot;&gt;&lt;del&gt;FLINK-23475&lt;/del&gt;&lt;/a&gt; proposes how to distribute Broadcast state to new operator instances to avoid new instances getting empty Broadcast state when there are some finished operator in the DAG, and the task is restarted without changing the parallelism. However, the current implementation seems to have some problems in determining whether there is a finished operator.&lt;/p&gt;

&lt;p&gt;As the pic shown below, `isPartiallyReported` compares the value between BitSet&apos;s&#160;&lt;br/&gt;
`cardinality` and `size`, where `cardinality` represents the number of operators that contain the Broadcast state, but `size` just returns the number of bits of space actually in use by this BitSet. It makes no sense to compare these two parameters, which causes the Broadcast state of operators without finished status to be redistributed when the parallelism does not change, which is unnecessary. I think we should use the `parallelism` in the constructor instead of `reportedSubtaskIndices.size()`&lt;br/&gt;
&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13077679/13077679_image-2025-07-22-17-34-22-479.png&quot; height=&quot;334&quot; width=&quot;528&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13624243">FLINK-38131</key>
            <summary>Repartition BroadcastState with finished operators</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhourenxiang">Renxiang Zhou</assignee>
                                    <reporter username="zhourenxiang">Renxiang Zhou</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 22 Jul 2025 09:43:04 +0000</created>
                <updated>Mon, 25 Aug 2025 02:28:56 +0000</updated>
                            <resolved>Mon, 25 Aug 2025 02:28:56 +0000</resolved>
                                    <version>1.14.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Runtime / Checkpointing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18010106" author="JIRAUSER295459" created="Sat, 26 Jul 2025 07:53:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Zakelly&quot; class=&quot;user-hover&quot; rel=&quot;zakelly&quot;&gt;Zakelly&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=masteryhx&quot; class=&quot;user-hover&quot; rel=&quot;masteryhx&quot;&gt;masteryhx&lt;/a&gt; please take a look at this issue, thx~&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="18010242" author="zakelly" created="Mon, 28 Jul 2025 03:43:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhourenxiang&quot; class=&quot;user-hover&quot; rel=&quot;zhourenxiang&quot;&gt;zhourenxiang&lt;/a&gt; This seems valid, would you please fix this?&lt;/p&gt;</comment>
                            <comment id="18010585" author="JIRAUSER295459" created="Tue, 29 Jul 2025 06:30:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zakelly&quot; class=&quot;user-hover&quot; rel=&quot;zakelly&quot;&gt;zakelly&lt;/a&gt; I&apos;m very glad to, could you plz assign this issue to me? I&apos;ll create a merge request to fix this&lt;/p&gt;</comment>
                            <comment id="18012276" author="zakelly" created="Wed, 6 Aug 2025 04:32:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhourenxiang&quot; class=&quot;user-hover&quot; rel=&quot;zhourenxiang&quot;&gt;zhourenxiang&lt;/a&gt; Assigned, please go ahead.&lt;/p&gt;</comment>
                            <comment id="18014812" author="JIRAUSER295459" created="Tue, 19 Aug 2025 06:30:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zakelly&quot; class=&quot;user-hover&quot; rel=&quot;zakelly&quot;&gt;zakelly&lt;/a&gt; Thx, here is the fix, PTAL when you are free, many thanks~&lt;a href=&quot;https://github.com/apache/flink/pull/26925&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/26925&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="18015867" author="zakelly" created="Mon, 25 Aug 2025 02:28:46 +0000"  >&lt;p&gt;Merge 831f3ab into master&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13077679" name="image-2025-07-22-17-34-22-479.png" size="238809" author="zhourenxiang" created="Tue, 22 Jul 2025 09:34:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ww3c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>