<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:22:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3261] Tasks should eagerly report back when they cannot start a checkpoint</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3261</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;With very fast checkpoint intervals (few 100 msecs), it can happen that a Task is not ready to start a checkpoint by the time it gets the first checkpoint trigger message.&lt;/p&gt;

&lt;p&gt;If some other tasks are ready already and commence a checkpoint, the stream alignment will make the non-participating task wait until the checkpoint expires (default: 10 minutes).&lt;/p&gt;

&lt;p&gt;A simple way to fix this is that tasks report back when they could not start a checkpoint. The checkpoint coordinator can then abort that checkpoint and unblock the streams by starting new checkpoint (where all tasks will participate).&lt;/p&gt;

&lt;p&gt;An optimization would be to send a special &quot;abort checkpoints barrier&quot; that tells the barrier buffers for stream alignment to unblock a checkpoint.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12932421">FLINK-3261</key>
            <summary>Tasks should eagerly report back when they cannot start a checkpoint</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="sewen">Stephan Ewen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jan 2016 14:21:53 +0000</created>
                <updated>Mon, 25 Jan 2016 14:55:56 +0000</updated>
                            <resolved>Mon, 25 Jan 2016 10:40:29 +0000</resolved>
                                    <version>0.10.1</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15110934" author="githubbot" created="Thu, 21 Jan 2016 17:15:00 +0000"  >&lt;p&gt;GitHub user aljoscha opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3261&quot; title=&quot;Tasks should eagerly report back when they cannot start a checkpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3261&quot;&gt;&lt;del&gt;FLINK-3261&lt;/del&gt;&lt;/a&gt; Allow Task to decline checkpoint request if not ready&lt;/p&gt;

&lt;p&gt;    Before, it could happen that a StreamingTask receives a Checkpoint&lt;br/&gt;
    Trigger message while internally not being ready. The checkpoint&lt;br/&gt;
    coordinator would then wait the specified timeout interval before&lt;br/&gt;
    continuing. Now, tasks can signal that they are not ready and the&lt;br/&gt;
    checkpoint coordinator will dicard a checkpoint for which is this the&lt;br/&gt;
    case and trigger new checkpoints if necessary.&lt;/p&gt;

&lt;p&gt;    The newly triggered checkpoints will also release alignment locks in&lt;br/&gt;
    streaming tasks that are still waiting for barriers from failed&lt;br/&gt;
    checkpoints.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/aljoscha/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aljoscha/flink&lt;/a&gt; checkpoint-coordinator-decline&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1537&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c759e2a0a2a1310467c25d84912544abaf5ab29e&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-01-21T16:21:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3261&quot; title=&quot;Tasks should eagerly report back when they cannot start a checkpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3261&quot;&gt;&lt;del&gt;FLINK-3261&lt;/del&gt;&lt;/a&gt; Allow Task to decline checkpoint request if not ready&lt;/p&gt;

&lt;p&gt;    Before, it could happen that a StreamingTask receives a Checkpoint&lt;br/&gt;
    Trigger message while internally not being ready. The checkpoint&lt;br/&gt;
    coordinator would then wait the specified timeout interval before&lt;br/&gt;
    continuing. Now, tasks can signal that they are not ready and the&lt;br/&gt;
    checkpoint coordinator will dicard a checkpoint for which is this the&lt;br/&gt;
    case and trigger new checkpoints if necessary.&lt;/p&gt;

&lt;p&gt;    The newly triggered checkpoints will also release alignment locks in&lt;br/&gt;
    streaming tasks that are still waiting for barriers from failed&lt;br/&gt;
    checkpoints.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15114903" author="githubbot" created="Mon, 25 Jan 2016 08:44:25 +0000"  >&lt;p&gt;Github user gyfora commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#issuecomment-174438711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#issuecomment-174438711&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good to me!&lt;br/&gt;
    This is a critical fix :+1: &lt;/p&gt;</comment>
                            <comment id="15114936" author="githubbot" created="Mon, 25 Jan 2016 09:23:55 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#issuecomment-174446152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#issuecomment-174446152&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I tested this as well. A Kafka test was previously failing, now its passing.&lt;/p&gt;</comment>
                            <comment id="15114939" author="githubbot" created="Mon, 25 Jan 2016 09:25:21 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#discussion_r50669803&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#discussion_r50669803&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/checkpoint/CheckpointCoordinator.java &amp;#8212;&lt;br/&gt;
    @@ -505,6 +506,88 @@ else if (pendingCheckpoints.size() &amp;gt;= maxConcurrentCheckpointAttempts) {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;br/&gt;
    +	 * Receives a &lt;/p&gt;
{@link DeclineCheckpoint}
&lt;p&gt; message and returns whether the&lt;br/&gt;
    +	 * message was associated with a pending checkpoint.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param message Checkpoint decline from the task manager&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @return Flag indicating whether the declined checkpoint was associated&lt;br/&gt;
    +	 * with a pending checkpoint.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    empty line&lt;/p&gt;</comment>
                            <comment id="15114940" author="githubbot" created="Mon, 25 Jan 2016 09:26:26 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#discussion_r50669903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#discussion_r50669903&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/checkpoint/CheckpointCoordinator.java &amp;#8212;&lt;br/&gt;
    @@ -505,6 +506,88 @@ else if (pendingCheckpoints.size() &amp;gt;= maxConcurrentCheckpointAttempts) {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;br/&gt;
    +	 * Receives a &lt;/p&gt;
{@link DeclineCheckpoint}
&lt;p&gt; message and returns whether the&lt;br/&gt;
    +	 * message was associated with a pending checkpoint.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param message Checkpoint decline from the task manager&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @return Flag indicating whether the declined checkpoint was associated&lt;br/&gt;
    +	 * with a pending checkpoint.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +&lt;br/&gt;
    +	public boolean receiveDeclineMessage(DeclineCheckpoint message) throws Exception {&lt;br/&gt;
    +		if (shutdown || message == null) &lt;/p&gt;
{
    +			return false;
    +		}
&lt;p&gt;    +		if (!job.equals(message.getJob())) {&lt;br/&gt;
    +			LOG.error(&quot;Received DeclineCheckpoint message for wrong job: {}&quot;, message);&lt;br/&gt;
    +			return false;&lt;br/&gt;
    +		}&lt;br/&gt;
    +&lt;br/&gt;
    +		final long checkpointId = message.getCheckpointId();&lt;br/&gt;
    +&lt;br/&gt;
    +		CompletedCheckpoint completed = null;&lt;br/&gt;
    +		PendingCheckpoint checkpoint;&lt;br/&gt;
    +&lt;br/&gt;
    +		// Flag indicating whether the ack message was for a known pending&lt;br/&gt;
    +		// checkpoint.&lt;br/&gt;
    +		boolean isPendingCheckpoint;&lt;br/&gt;
    +&lt;br/&gt;
    +		synchronized (lock) {&lt;br/&gt;
    +			// we need to check inside the lock for being shutdown as well, otherwise we&lt;br/&gt;
    +			// get races and invalid error log messages&lt;br/&gt;
    +			if (shutdown) &lt;/p&gt;
{
    +				return false;
    +			}
&lt;p&gt;    +&lt;br/&gt;
    +			checkpoint = pendingCheckpoints.get(checkpointId);&lt;br/&gt;
    +&lt;br/&gt;
    +			if (checkpoint != null &amp;amp;&amp;amp; !checkpoint.isDiscarded()) {&lt;br/&gt;
    +				isPendingCheckpoint = true;&lt;br/&gt;
    +&lt;br/&gt;
    +				LOG.info(&quot;Discarding checkpoint &quot; + checkpointId&lt;br/&gt;
    +					+ &quot; because of checkpoint decline from task &quot; + message.getTaskExecutionId());&lt;br/&gt;
    +&lt;br/&gt;
    +				pendingCheckpoints.remove(checkpointId);&lt;br/&gt;
    +				checkpoint.discard(userClassLoader);&lt;br/&gt;
    +				rememberRecentCheckpointId(checkpointId);&lt;br/&gt;
    +&lt;br/&gt;
    +				boolean haveMoreRecentPending = false;&lt;br/&gt;
    +				Iterator&amp;lt;Map.Entry&amp;lt;Long, PendingCheckpoint&amp;gt;&amp;gt; entries = pendingCheckpoints.entrySet().iterator();&lt;br/&gt;
    +				while (entries.hasNext()) {&lt;br/&gt;
    +					PendingCheckpoint p = entries.next().getValue();&lt;br/&gt;
    +					if (!p.isDiscarded() &amp;amp;&amp;amp; p.getCheckpointTimestamp() &amp;gt;= checkpoint.getCheckpointTimestamp()) &lt;/p&gt;
{
    +						haveMoreRecentPending = true;
    +						break;
    +					}
&lt;p&gt;    +				}&lt;br/&gt;
    +				if (!haveMoreRecentPending &amp;amp;&amp;amp; !triggerRequestQueued) &lt;/p&gt;
{
    +					LOG.info(&quot;Triggering new checkpoint because of discarded checkpoint &quot; + checkpointId);
    +					triggerCheckpoint(System.currentTimeMillis());
    +				}
&lt;p&gt; else if (!haveMoreRecentPending) &lt;/p&gt;
{
    +					LOG.info(&quot;Promoting queued checkpoint request because of discarded checkpoint &quot; + checkpointId);
    +					triggerQueuedRequests();
    +				}
&lt;p&gt;    +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    empty line&lt;/p&gt;</comment>
                            <comment id="15114945" author="githubbot" created="Mon, 25 Jan 2016 09:28:01 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#discussion_r50670074&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#discussion_r50670074&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/messages/checkpoint/DeclineCheckpoint.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,74 @@&lt;br/&gt;
    +/*&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + * distributed with this work for additional information&lt;br/&gt;
    + * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    + * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    + * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    + * with the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +&lt;br/&gt;
    +package org.apache.flink.runtime.messages.checkpoint;&lt;br/&gt;
    +&lt;br/&gt;
    +import org.apache.flink.api.common.JobID;&lt;br/&gt;
    +import org.apache.flink.runtime.executiongraph.ExecutionAttemptID;&lt;br/&gt;
    +&lt;br/&gt;
    +/**&lt;br/&gt;
    + * This message is sent from the &lt;/p&gt;
{@link org.apache.flink.runtime.taskmanager.TaskManager}
&lt;p&gt; to the&lt;br/&gt;
    + * &lt;/p&gt;
{@link org.apache.flink.runtime.jobmanager.JobManager}
&lt;p&gt; to tell the checkpoint coordinator&lt;br/&gt;
    + * that a checkpoint request could not be heeded. This can happen if a Task is already in&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I had to look up `heeded` :stuck_out_tongue_winking_eye: &lt;/p&gt;</comment>
                            <comment id="15114946" author="githubbot" created="Mon, 25 Jan 2016 09:28:26 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#discussion_r50670120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#discussion_r50670120&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/taskmanager/Task.java &amp;#8212;&lt;br/&gt;
    @@ -854,7 +855,8 @@ private void notifyObservers(ExecutionState newState, Throwable error) {&lt;br/&gt;
     	// ------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Calls the invokable to trigger a checkpoint, if the invokable implements the interface&lt;br/&gt;
    +	 * Calls the invokable to trigger a checkpoint, i&lt;br/&gt;
    +	 * f the invokable implements the interface
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    line break&lt;/p&gt;</comment>
                            <comment id="15114950" author="githubbot" created="Mon, 25 Jan 2016 09:32:40 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#issuecomment-174448455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#issuecomment-174448455&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ok, I&apos;m addressing the comments about code-style and merging.&lt;/p&gt;</comment>
                            <comment id="15115021" author="githubbot" created="Mon, 25 Jan 2016 10:39:56 +0000"  >&lt;p&gt;Github user aljoscha closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15115023" author="aljoscha" created="Mon, 25 Jan 2016 10:40:29 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/flink/commit/893a62f5428b7088a1111ecc5a32ea5bd92df379&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/893a62f5428b7088a1111ecc5a32ea5bd92df379&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15115129" author="githubbot" created="Mon, 25 Jan 2016 12:31:06 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#issuecomment-174491828&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#issuecomment-174491828&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good fix.&lt;/p&gt;

&lt;p&gt;    I think if we want to be on the super safe side, actually all tasks should always report back to the JobManager that they received the &quot;TriggerCheckpoint&quot; message (either Ack or Decline).&lt;/p&gt;

&lt;p&gt;    The CheckpointCoordinator would then &quot;ask&quot; the TaskManagers and would cancel the checkpoint if some of the asks time out (3-5 secs or so). That way, lost messages are properly accounted for.&lt;/p&gt;</comment>
                            <comment id="15115155" author="githubbot" created="Mon, 25 Jan 2016 12:51:55 +0000"  >&lt;p&gt;Github user senorcarbone commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#issuecomment-174500162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#issuecomment-174500162&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks cool. &lt;br/&gt;
    Just so I understand exactly, what is wrong again if the Coordinator simply aborts expired checkpoint attempts? Wouldn&apos;t the protocol be the same, with less messages? If a task is not ready it can simply discard the checkpoint request which will eventually time out at the Coordinator. The Coordinator attempts might potentially keep timing out but there will be a complete snapshot eventually when all tasks are ready. &lt;/p&gt;</comment>
                            <comment id="15115176" author="githubbot" created="Mon, 25 Jan 2016 13:16:58 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#issuecomment-174505573&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#issuecomment-174505573&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @senorcarbone Yes, it works correctly with the timeouts, the job can just hang for a long time, especially in tests this occurred several times.&lt;/p&gt;</comment>
                            <comment id="15115258" author="githubbot" created="Mon, 25 Jan 2016 14:20:07 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#issuecomment-174521106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#issuecomment-174521106&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The default timeout is 10 minutes. That is too long time to recognize that a checkpoint was started pre-maturely &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15115265" author="githubbot" created="Mon, 25 Jan 2016 14:23:00 +0000"  >&lt;p&gt;Github user senorcarbone commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#issuecomment-174521693&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#issuecomment-174521693&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Wow, I see your point. Then a single abort message back to the Coordinator is enough in this case. Why 10 min btw?&lt;/p&gt;</comment>
                            <comment id="15115280" author="githubbot" created="Mon, 25 Jan 2016 14:28:30 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#issuecomment-174523012&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#issuecomment-174523012&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Normally (except in this kind of situation), checkpoints progress and need no aggressive timeout as a guard. On the other hand, full checkpoints with huge state (for example when re-running a streaming job on historic data) may once in a while take long (when the network is congested or so) and we did not want to overaggressively kill the pending checkpoints in that case.&lt;/p&gt;</comment>
                            <comment id="15115324" author="githubbot" created="Mon, 25 Jan 2016 14:55:56 +0000"  >&lt;p&gt;Github user senorcarbone commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1537#issuecomment-174531587&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1537#issuecomment-174531587&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I see. Thanks for clarifying @StephanEwen @aljoscha  !&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 43 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2roqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>