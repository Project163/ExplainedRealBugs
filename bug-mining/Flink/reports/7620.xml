<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:21:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-34702] Rank should not convert to StreamExecDuplicate when the input is not insert only</title>
                <link>https://issues.apache.org/jira/browse/FLINK-34702</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
def testSimpleFirstRowOnBuiltinProctime1(): Unit = {
  val sqlQuery =
    &quot;&quot;&quot;
      |SELECT *
      |FROM (
      |  SELECT *,
      |    ROW_NUMBER() OVER (PARTITION BY a ORDER BY PROCTIME() ASC) as rowNum
      |  FROM (select a, count(b) as b from MyTable group by a)
      |)
      |WHERE rowNum = 1
    &quot;&quot;&quot;.stripMargin

  util.verifyExecPlan(sqlQuery)
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Exception:&lt;/p&gt;

&lt;p&gt;org.apache.flink.table.api.TableException: StreamPhysicalDeduplicate doesn&apos;t support consuming update changes which is produced by node GroupAggregate(groupBy=&lt;span class=&quot;error&quot;&gt;&amp;#91;a&amp;#93;&lt;/span&gt;, select=&lt;span class=&quot;error&quot;&gt;&amp;#91;a, COUNT(b) AS b&amp;#93;&lt;/span&gt;)&lt;/p&gt;

&lt;p&gt;because the StreamPhysicalDeduplicate can not consuming update changes now while StreamExecRank can.&lt;/p&gt;

&lt;p&gt;so we should not convert the FlinkLogicalRank to StreamPhysicalDeduplicate in this case. and we can defer whether input contains update change in the &quot;optimize the physical plan&quot; phase.&#160;&lt;/p&gt;

&lt;p&gt;so we can add an option to solve it. and when the StreamPhysicalDeduplicate can support consuming update changes , we can deprecate it&lt;/p&gt;</description>
                <environment></environment>
        <key id="13572137">FLINK-34702</key>
            <summary>Rank should not convert to StreamExecDuplicate when the input is not insert only</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lincoln.86xy">lincoln lee</assignee>
                                    <reporter username="jackylau">Jacky Lau</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sun, 17 Mar 2024 06:32:35 +0000</created>
                <updated>Fri, 27 Sep 2024 20:21:54 +0000</updated>
                            <resolved>Wed, 25 Sep 2024 15:41:59 +0000</resolved>
                                    <version>1.20.0</version>
                                    <fixVersion>2.0-preview</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17827843" author="lincoln.86xy" created="Mon, 18 Mar 2024 05:33:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jackylau&quot; class=&quot;user-hover&quot; rel=&quot;jackylau&quot;&gt;jackylau&lt;/a&gt; Thank you for reporting this!&#160;&lt;br/&gt;
This should be an improvement but not a bug. Currently, some operators do not support processing changelog input, and `StreamPhysicalDeduplicate` is one of them.&lt;br/&gt;
For the solution, can we consider taking a step forward, allowing `StreamPhysicalDeduplicate` to support changelog input (let the physical operator support this input, just like we added support changelog input for Window TVF Aggregation in 1.19), instead of patching with a switch during the optimization phase to bypass it, WDYT?&lt;/p&gt;</comment>
                            <comment id="17828590" author="jackylau" created="Wed, 20 Mar 2024 03:47:54 +0000"  >&lt;p&gt;&#160;we have three proposed solutions :&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solution 1&lt;/b&gt;: Add a switch parameter, enabled by default. When a compilation error occurs, the switch is turned off based on the error message. However, this is noticeable by the user.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solution 2&lt;/b&gt;: Make the deduplication operator support changelog messages. Currently, the deduplication operator is divided into eight combinations: processing time / event time, first row / last row, mini-batch / non-mini-batch. Supporting changelog would effectively double these combinations to sixteen, significantly complicating the code logic. Furthermore, taking processing time&apos;s first row as an example, if changelog is supported, it would require recording all historical data, which could severely degrade performance. Additionally, the deduplication operator is essentially a special case of the Rank operator, but simply adapting the logic to use Rank isn&apos;t feasible either, as the Rank operator currently does not support mini-batch. This change would be imperceptible to users.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solution 3&lt;/b&gt;: An improvement over Solution 1, since the logical to physical stage cannot detect whether there are changelog, the transformation could be done during the physical rewrite phase. This phase comes after the FlinkChangelogModeInferenceProgram.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;After discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lincoln.86xy&quot; class=&quot;user-hover&quot; rel=&quot;lincoln.86xy&quot;&gt;lincoln.86xy&lt;/a&gt; offline, we agree with &lt;b&gt;Solution 3&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="17829374" author="jackylau" created="Thu, 21 Mar 2024 04:30:36 +0000"  >&lt;p&gt;When adopting Solution 3 it was found to be unviable for two main reasons:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The rule cannot be placed within the physical rewrite phase. This approach is somewhat tricky, as noted in my poc. The reason is that the MiniBatchAssigner operator is whether the proctime / eventime&#160; is related to the downstream operators. The current Rank operator does not require watermarks, whereas the Deduplicate operator for rowtime does. This can be observed in the return value of requireWatermark. See the plan change in the test &lt;tt&gt;testMiniBatchInferFirstRowOnRowtime&lt;/tt&gt;.&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;The RelTraitSet produced by the Deduplicate operator differs from that of the Rank operator. Although we can modify the RelTrait of the deduplication operator using the code below, there is no way to change the RelTraits of other downstream operators belonging to the deduplication operator, unless we run the logic of the FlinkChangelogModeInferenceProgram again. The local-global two-phase rule can be dealt with within the physical rewrite phase because the RelTraitSet of the local aggregate is same with the upstream node. See the plan change in the test&lt;br/&gt;
testUpdatableRankWithDeduplicate
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ModifyKindSetTrait modifyKindSetTrait;
UpdateKindTrait updateKindTrait;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isLastRow &amp;amp;&amp;amp; !isRowtime) {
    &lt;span class=&quot;code-comment&quot;&gt;// only proctime first row deduplicate does not produce UPDATE changes
&lt;/span&gt;    modifyKindSetTrait = ModifyKindSetTrait.INSERT_ONLY();
    updateKindTrait = UpdateKindTrait.NONE();
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
    &lt;span class=&quot;code-comment&quot;&gt;// other deduplicate produce update changes
&lt;/span&gt;    modifyKindSetTrait = ModifyKindSetTrait.ALL_CHANGES();
    updateKindTrait = rank.getTraitSet()
            .getTrait(UpdateKindTraitDef.INSTANCE());
}

RelTraitSet duplicateTraitSet = rank.getTraitSet()
        .replace(modifyKindSetTrait)
        .replace(updateKindTrait); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17879983" author="JIRAUSER284726" created="Fri, 6 Sep 2024 22:16:10 +0000"  >&lt;p&gt;As a suggestion building on &lt;b&gt;Solution 1&lt;/b&gt;, we could put a ThreadLocal variable in the `FlinkChangelogModeInferenceProgram`.  When a query fails to be optimized, we could set that variable and then re-try the optimization step.  &lt;/p&gt;

&lt;p&gt;Admittedly, this is a bit hacky, but it does provide a direct solution to this particular issue.  Maybe we can discuss how to expand that into a complete solution?&lt;/p&gt;</comment>
                            <comment id="17883560" author="sergey nuyanzin" created="Sun, 22 Sep 2024 00:08:05 +0000"  >&lt;p&gt;I had a look here a bit.&lt;/p&gt;

&lt;p&gt;I noticed that there is a number of similar cases where this&lt;br/&gt;
&lt;blockquote&gt;&lt;p&gt;StreamPhysicalDeduplicate doesn&apos;t support consuming update changes which is produced by node&lt;/p&gt;&lt;/blockquote&gt; is happening and node could be also a join node like left/right/full outer join, semijoin, antijoin. Look at the end to see examples.&lt;/p&gt;

&lt;p&gt;Since there are some difficulties mentioned above with also 3 aforementioned solutions, how about going from a bit different direction?&lt;br/&gt;
What if we in &lt;tt&gt;StreamPhysicalRankRule#convert&lt;/tt&gt; do not convert to deduplicate &lt;tt&gt;RelNode&lt;/tt&gt;&apos;s if they in input contains &lt;tt&gt;GroupAggregate&lt;/tt&gt;&apos;s, &lt;tt&gt;LeftOuterJoin&lt;/tt&gt;, &lt;tt&gt;RightOuterJoin&lt;/tt&gt;, &lt;tt&gt;FullOuterJoin&lt;/tt&gt;, &lt;tt&gt;SemiJoin&lt;/tt&gt;, &lt;tt&gt;AntiJoin&lt;/tt&gt;, may be smth else ?&lt;/p&gt;

&lt;p&gt;I submitted a draft PR with this proposal (first to make sure that it passes existing ci tests)  &lt;/p&gt;

&lt;p&gt;More examples of failing queries&lt;/p&gt;

&lt;p&gt;FullOuterJoin (Left/RightOuterJoin are similar)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; *
&lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; (
  &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; *,
    &lt;span class=&quot;code-keyword&quot;&gt;ROW_NUMBER&lt;/span&gt;() &lt;span class=&quot;code-keyword&quot;&gt;OVER&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; PROCTIME() &lt;span class=&quot;code-keyword&quot;&gt;ASC&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;rowNum&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;m&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;m&lt;/span&gt;.b &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; MyTable &lt;span class=&quot;code-keyword&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;FULL&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;OUTER&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;JOIN&lt;/span&gt; MyTable2 m2 &lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;m&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt; = m2.&lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;)
)
&lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;rowNum&lt;/span&gt; = 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;SemiJoin&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; *
&lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; (
  &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; *,
    &lt;span class=&quot;code-keyword&quot;&gt;ROW_NUMBER&lt;/span&gt;() &lt;span class=&quot;code-keyword&quot;&gt;OVER&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; PROCTIME() &lt;span class=&quot;code-keyword&quot;&gt;ASC&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;rowNum&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;, b &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; MyTable
        &lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;EXISTS&lt;/span&gt; (
        &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;, b &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; MyTable2))
)
&lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;rowNum&lt;/span&gt; = 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;AntiJoin&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; *
&lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; (
  &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; *,
    &lt;span class=&quot;code-keyword&quot;&gt;ROW_NUMBER&lt;/span&gt;() &lt;span class=&quot;code-keyword&quot;&gt;OVER&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; PROCTIME() &lt;span class=&quot;code-keyword&quot;&gt;ASC&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;rowNum&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;, b &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; MyTable
        &lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;EXISTS&lt;/span&gt; (
        &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;, b &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; MyTable2))
)
&lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;rowNum&lt;/span&gt; = 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17883868" author="JIRAUSER284726" created="Mon, 23 Sep 2024 12:53:18 +0000"  >&lt;p&gt;Sergey, correct me if I&apos;m wrong, but this approach could be categorized as:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Option 4:&lt;/b&gt; Deny situations where the optimizer chooses `StreamExecDuplicate`.  &lt;/p&gt;

&lt;p&gt;You&apos;ve covered a number of situations in your draft PR.  I doubt it is exhaustive.  Even if it is complete today, in the future, things could drift.  (If I&apos;m missing something, let me know.)&lt;/p&gt;

&lt;p&gt;Inverting the idea, we could have:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Option 5:&lt;/b&gt; Create an allow list of when the optimizer can choose `StreamExecDuplicate`.  With this approach, any failures in coverage result in a optimization gap rather than SQL which cannot be planned.&lt;/p&gt;

&lt;p&gt;Sergey and I were talking about this bug offline some.  My initial idea was:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Option 6&lt;/b&gt;: Add a try-catch at the beginning of optimization, and re-try optimization with a ThreadLocal set indicating how/that we failed the last time.  This allows the optimizer to pick a Rank operator instead of the Deduplicate one.&lt;/p&gt;

&lt;p&gt;After thinking about this, I have another idea:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Option 7&lt;/b&gt;: Roll the logic for Rank and Deduplicate into one operator.  Have the FlinkChangelogModeInferenceProgram configure the changelog mode for the operator and have it choose which &quot;function&quot; to bind.  (I don&apos;t like this option since it&apos;d involve rewriting the operators.)&lt;/p&gt;</comment>
                            <comment id="17883877" author="sergey nuyanzin" created="Mon, 23 Sep 2024 13:14:22 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Even if it is complete today, in the future, things could drift. (If I&apos;m missing something, let me know.)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yep, you are right, thanks for highlighting this&lt;/p&gt;

&lt;p&gt;agree having a list of what could be converted to deduplicated is a safer way&lt;/p&gt;</comment>
                            <comment id="17883911" author="lincoln.86xy" created="Mon, 23 Sep 2024 15:13:35 +0000"  >&lt;p&gt;Thank you guys bringing this up again!&lt;/p&gt;

&lt;p&gt;First of all, I think we can all agree that deduplicate is a special case of rank&lt;br/&gt;
2nd, the options we&apos;ve discussed so far are not ideal(whether it&apos;s physicaldedup -&amp;gt; exec or logical -&amp;gt; physical dedup, to do something special to change the conversion)&lt;/p&gt;

&lt;p&gt;Going back to the problem itself, something new come to my mind: maybe we should consider removing the physical dedup node, and instead just keep the physical rank node(because dedup is just one specialized execution/operator which satisfies several conditions, the input changelog mode, rank range, sort spec and other traits)&lt;/p&gt;

&lt;p&gt;I&apos;m preparing a draft pr based on this idea, maybe take some time(probably a day or two) but I think it can completely solve the problems.&lt;/p&gt;</comment>
                            <comment id="17884048" author="JIRAUSER296040" created="Mon, 23 Sep 2024 20:47:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lincoln.86xy&quot; class=&quot;user-hover&quot; rel=&quot;lincoln.86xy&quot;&gt;lincoln.86xy&lt;/a&gt; &#8211; do you have ideas if we&apos;d lose any perf optimizations done for the special case if we just remove the physical dedup node?&lt;/p&gt;</comment>
                            <comment id="17884084" author="lincoln.86xy" created="Tue, 24 Sep 2024 02:32:39 +0000"  >&lt;p&gt;A draft pr was created: #25380. If we agree this solution, I&apos;ll finish the work (including some cleanup work for the useless node `StreamPhysicalDeduplicate`).&lt;/p&gt;</comment>
                            <comment id="17884085" author="lincoln.86xy" created="Tue, 24 Sep 2024 02:37:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AlexeyLV&quot; class=&quot;user-hover&quot; rel=&quot;AlexeyLV&quot;&gt;AlexeyLV&lt;/a&gt; Don&apos;t worry about losing any performance optimizations, because we&apos;re just removing a physical deduplication node that doesn&apos;t seem to be necessary right now, and we&apos;re still retaining the deduplication execution node &apos;StreamExecDeduplicate&apos;.&lt;/p&gt;</comment>
                            <comment id="17884184" author="jackylau" created="Tue, 24 Sep 2024 08:31:19 +0000"  >&lt;p&gt;i agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lincoln.86xy&quot; class=&quot;user-hover&quot; rel=&quot;lincoln.86xy&quot;&gt;lincoln.86xy&lt;/a&gt;&#160; +1&lt;/p&gt;

&lt;p&gt;Delay the rank/dedup transformation to physical -&amp;gt; exec phase&lt;/p&gt;

&lt;p&gt;and we will not come in &quot;StreamPhysicalDeduplicate can not consuming update changes now while StreamExecRank can.&quot;&lt;/p&gt;</comment>
                            <comment id="17884646" author="lincoln.86xy" created="Wed, 25 Sep 2024 15:41:59 +0000"  >&lt;p&gt;fixed in master: 2f8b2d81a97a681d67964ef17932ea0abf35730f&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1o0hs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>