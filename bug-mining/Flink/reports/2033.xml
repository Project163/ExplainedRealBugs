<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:30:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6226] ScalarFunction and TableFunction do not support parameters of byte, short and float</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6226</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;It seems to be a problem that ScalarFunction and TableFunction do not support types of byte, short or float.&lt;/p&gt;

&lt;p&gt;It will throw some exceptions like following;&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;org.apache.flink.table.api.ValidationException: Given parameters of function &apos;org$apache$flink$table$expressions$utils$Func18$$98a126fbdab73f43d640516da603291a&apos; do not match any signature. &lt;br/&gt;
Actual: (java.lang.String, java.lang.Integer, java.lang.Integer, java.lang.Integer, java.lang.Long) &lt;br/&gt;
Expected: (java.lang.String, byte, short, int, long)&lt;/p&gt;

&lt;p&gt;	at org.apache.flink.table.functions.utils.ScalarSqlFunction$$anon$1.inferReturnType(ScalarSqlFunction.scala:82)&lt;br/&gt;
	at org.apache.calcite.sql.SqlOperator.inferReturnType(SqlOperator.java:469)&lt;br/&gt;
	at org.apache.calcite.rex.RexBuilder.deriveReturnType(RexBuilder.java:271)&lt;br/&gt;
	at org.apache.calcite.tools.RelBuilder.call(RelBuilder.java:518)&lt;br/&gt;
	at org.apache.flink.table.expressions.ScalarFunctionCall.toRexNode(call.scala:68)&lt;br/&gt;
	at org.apache.flink.table.expressions.Alias.toRexNode(fieldExpression.scala:76)&lt;br/&gt;
	at org.apache.flink.table.plan.logical.Project$$anonfun$construct$1.apply(operators.scala:95)&lt;br/&gt;
	at org.apache.flink.table.plan.logical.Project$$anonfun$construct$1.apply(operators.scala:95)&lt;br/&gt;
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244)&lt;br/&gt;
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244)&lt;br/&gt;
	at scala.collection.immutable.List.foreach(List.scala:318)&lt;br/&gt;
	at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:32)&lt;br/&gt;
	at scala.collection.mutable.ListBuffer.foreach(ListBuffer.scala:45)&lt;br/&gt;
	at scala.collection.TraversableLike$class.map(TraversableLike.scala:244)&lt;br/&gt;
	at scala.collection.AbstractTraversable.map(Traversable.scala:105)&lt;br/&gt;
	at org.apache.flink.table.plan.logical.Project.construct(operators.scala:95)&lt;br/&gt;
	at org.apache.flink.table.plan.logical.LogicalNode.toRelNode(LogicalNode.scala:77)&lt;br/&gt;
	at org.apache.flink.table.api.Table.getRelNode(table.scala:72)&lt;br/&gt;
	at org.apache.flink.table.expressions.utils.ExpressionTestBase.addTableApiTestExpr(ExpressionTestBase.scala:215)&lt;br/&gt;
	at org.apache.flink.table.expressions.utils.ExpressionTestBase.testAllApis(ExpressionTestBase.scala:241)&lt;br/&gt;
	at org.apache.flink.table.expressions.UserDefinedScalarFunctionTest.testVariableArgs(UserDefinedScalarFunctionTest.scala:240)&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Testing code looks like following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;object Func18 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ScalarFunction {

  def eval(a: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, b: &lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;, c: &lt;span class=&quot;code-object&quot;&gt;Short&lt;/span&gt;, d: Int, e: &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;): &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; = {
    a + &lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; + b + &lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; + c + &lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; + d + &lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; + e
  }
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TableFunc4 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt;  TableFunction[Row] {

  def eval(data: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, tinyInt: &lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;, smallInt: &lt;span class=&quot;code-object&quot;&gt;Short&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;: Int, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;: &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;): Unit = {
    val row = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Row(5)
    row.setField(0, data)
    row.setField(1, tinyInt)
    row.setField(2, smallInt)
    row.setField(3, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)
    row.setField(4, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)
    collect(row)
  }

  override def getResultType: TypeInformation[Row] = {
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RowTypeInfo(
      BasicTypeInfo.STRING_TYPE_INFO,
      BasicTypeInfo.BYTE_TYPE_INFO,
      BasicTypeInfo.SHORT_TYPE_INFO,
      BasicTypeInfo.INT_TYPE_INFO,
      BasicTypeInfo.LONG_TYPE_INFO
    )
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13060599">FLINK-6226</key>
            <summary>ScalarFunction and TableFunction do not support parameters of byte, short and float</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fhueske">Fabian Hueske</assignee>
                                    <reporter username="clarkyzl">Zhuoluo Yang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Mar 2017 07:56:55 +0000</created>
                <updated>Mon, 12 Mar 2018 15:34:19 +0000</updated>
                            <resolved>Mon, 12 Mar 2018 15:34:19 +0000</resolved>
                                                    <fixVersion>1.3.4</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15950509" author="clarkyzl" created="Fri, 31 Mar 2017 08:17:14 +0000"  >&lt;p&gt;I have tested the different types of parameters.&lt;br/&gt;
Byte, Short will be translated to Integer to match an eval() method.&lt;br/&gt;
Float will be translated to Double to match an eval() method.&lt;br/&gt;
However, the declarations of the eval() methods are still Byte, Short or Float. So it will throw exceptions of failure matching the method.&lt;/p&gt;</comment>
                            <comment id="16236297" author="fhueske" created="Thu, 2 Nov 2017 18:10:22 +0000"  >&lt;p&gt;I tried to reproduce the issue but the provided UDFs work on the current master branch.&lt;br/&gt;
Seems like the issue was fixed in the mean time.&lt;/p&gt;

&lt;p&gt;I&apos;d suggest to modify two existing test cases to use UDFs with &lt;tt&gt;byte&lt;/tt&gt;, &lt;tt&gt;short&lt;/tt&gt;, and &lt;tt&gt;float&lt;/tt&gt; types.&lt;/p&gt;</comment>
                            <comment id="16237372" author="fhueske" created="Fri, 3 Nov 2017 09:47:01 +0000"  >&lt;p&gt;Could not reproduce in 1.3.3 and 1.4.0&lt;/p&gt;

&lt;p&gt;Added tests to 1.3.3 with 310817035fef1d843b37e00ccd4a32efffaad3dc&lt;br/&gt;
Added tests to 1.4.0 with 6e118d1dc97b3a8c0b013d2002fad80219751253&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3d1j3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>