<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:36:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10857] Conflict between JMX and Prometheus Metrics reporter</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10857</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When registering both JMX and Prometheus metrics reporter, the Prometheus reporter will fail with many exceptions, such as.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
o.a.f.r.m.MetricRegistryImpl Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; registering metric.
java.lang.IllegalArgumentException: Invalid metric name: flink_jobmanager.Status.JVM.Memory.Mapped_Count
	at org.apache.flink.shaded.io.prometheus.client.Collector.checkMetricName(Collector.java:182)
	at org.apache.flink.shaded.io.prometheus.client.SimpleCollector.&amp;lt;init&amp;gt;(SimpleCollector.java:164)
	at org.apache.flink.shaded.io.prometheus.client.Gauge.&amp;lt;init&amp;gt;(Gauge.java:68)
	at org.apache.flink.shaded.io.prometheus.client.Gauge$Builder.create(Gauge.java:74)
	at org.apache.flink.metrics.prometheus.AbstractPrometheusReporter.createCollector(AbstractPrometheusReporter.java:130)
	at org.apache.flink.metrics.prometheus.AbstractPrometheusReporter.notifyOfAddedMetric(AbstractPrometheusReporter.java:106)
	at org.apache.flink.runtime.metrics.MetricRegistryImpl.register(MetricRegistryImpl.java:329)
	at org.apache.flink.runtime.metrics.groups.AbstractMetricGroup.addMetric(AbstractMetricGroup.java:379)
	at org.apache.flink.runtime.metrics.groups.AbstractMetricGroup.gauge(AbstractMetricGroup.java:323)
	at org.apache.flink.runtime.metrics.util.MetricUtils.instantiateMemoryMetrics(MetricUtils.java:231)
	at org.apache.flink.runtime.metrics.util.MetricUtils.instantiateStatusMetrics(MetricUtils.java:100)
	at org.apache.flink.runtime.metrics.util.MetricUtils.instantiateJobManagerMetricGroup(MetricUtils.java:68)
	at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.startClusterComponents(ClusterEntrypoint.java:342)
	at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.runCluster(ClusterEntrypoint.java:233)
	at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.lambda$startCluster$0(ClusterEntrypoint.java:191)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1869)
	at org.apache.flink.runtime.security.HadoopSecurityContext.runSecured(HadoopSecurityContext.java:41)
	at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.startCluster(ClusterEntrypoint.java:190)
	at org.apache.flink.yarn.entrypoint.YarnJobClusterEntrypoint.main(YarnJobClusterEntrypoint.java:176)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This is a small program to reproduce the problem:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/dikei/flink-metrics-conflict-test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dikei/flink-metrics-conflict-test&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&lt;/p&gt;</description>
                <environment></environment>
        <key id="13197979">FLINK-10857</key>
            <summary>Conflict between JMX and Prometheus Metrics reporter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="kien_truong">Truong Duc Kien</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 13 Nov 2018 07:17:32 +0000</created>
                <updated>Wed, 2 Jan 2019 10:33:12 +0000</updated>
                            <resolved>Thu, 15 Nov 2018 12:09:10 +0000</resolved>
                                    <version>1.5.5</version>
                    <version>1.6.2</version>
                    <version>1.7.0</version>
                                    <fixVersion>1.5.6</fixVersion>
                    <fixVersion>1.6.3</fixVersion>
                    <fixVersion>1.7.0</fixVersion>
                                    <component>Runtime / Metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16686246" author="zentol" created="Wed, 14 Nov 2018 09:27:35 +0000"  >&lt;p&gt;Your test is broken since your &lt;tt&gt;FrontMetricGroup&lt;/tt&gt; uses the same &lt;tt&gt;reporterIndex&lt;/tt&gt; (first constructor argument). The index as to match the internal index in the registry for caching to work properly.&lt;/p&gt;</comment>
                            <comment id="16686264" author="kien_truong" created="Wed, 14 Nov 2018 09:41:30 +0000"  >&lt;p&gt;I&apos;ve updated my code, even when &lt;tt&gt;FrontMetricGroup&lt;/tt&gt; is not shared, you can still get the exception if the underlying metric group is shared.&lt;/p&gt;</comment>
                            <comment id="16686275" author="kien_truong" created="Wed, 14 Nov 2018 09:52:42 +0000"  >&lt;p&gt;This is due to `AbstractMetricGroup.logicalScopeString` is shared between all reporters, unlike `AbstractMetricGroup.scopeStrings`. Because only JMX and Prometheus use `logicalScopeString`, they conflict when both are used at the same time.&lt;/p&gt;</comment>
                            <comment id="16686283" author="zentol" created="Wed, 14 Nov 2018 10:00:52 +0000"  >&lt;p&gt;Correct, i can confirm the issue. Looks like this is &lt;em&gt;really&lt;/em&gt; old one, working on a fix.&lt;/p&gt;</comment>
                            <comment id="16687753" author="githubbot" created="Thu, 15 Nov 2018 10:21:40 +0000"  >&lt;p&gt;kl0u commented on a change in pull request #7095: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10857&quot; title=&quot;Conflict between JMX and Prometheus Metrics reporter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10857&quot;&gt;&lt;del&gt;FLINK-10857&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;metrics&amp;#93;&lt;/span&gt; Cache logical scopes separately for each reporter&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7095#discussion_r233781547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7095#discussion_r233781547&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroup.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -152,14 +153,35 @@ public String getLogicalScope(CharacterFilter filter) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@return logical scope&lt;br/&gt;
 	 */&lt;br/&gt;
 	public String getLogicalScope(CharacterFilter filter, char delimiter) {&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (logicalScopeString == null) 
{
+		return getLogicalScope(filter, delimiter, -1);
+	}
&lt;p&gt;+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Returns the logical scope of this group, for example&lt;br/&gt;
+	 * &lt;/p&gt;
{@code &quot;taskmanager.job.task&quot;}
&lt;p&gt;.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @param filter character filter which is applied to the scope components&lt;br/&gt;
+	 * @param delimiter delimiter to use for concatenating scope components&lt;br/&gt;
+	 * @param reporterIndex index of the reporter&lt;br/&gt;
+	 * @return logical scope&lt;br/&gt;
+	 */&lt;br/&gt;
+	public String getLogicalScope(CharacterFilter filter, char delimiter, int reporterIndex) {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   This method could become package private and if I did not mess up, it could become something like:&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   String getLogicalScope(CharacterFilter filter, char delimiter, int reporterIndex) {&lt;br/&gt;
   		if (logicalScopeStrings.length == 0 || (reporterIndex &amp;lt; 0 || reporterIndex &amp;gt;= logicalScopeStrings.length)) &lt;/p&gt;
{
   			return getChildLogicalScope(filter, delimiter);
   		}

&lt;p&gt;   		if (logicalScopeStrings&lt;span class=&quot;error&quot;&gt;&amp;#91;reporterIndex&amp;#93;&lt;/span&gt; == null) &lt;/p&gt;
{
   			logicalScopeStrings[reporterIndex] = getChildLogicalScope(filter, delimiter);
   		}
&lt;p&gt;   		return logicalScopeStrings&lt;span class=&quot;error&quot;&gt;&amp;#91;reporterIndex&amp;#93;&lt;/span&gt;;&lt;br/&gt;
   	}&lt;/p&gt;

&lt;p&gt;   	private String getChildLogicalScope(CharacterFilter filter, char delimiter) &lt;/p&gt;
{
   		final String groupName = getGroupName(filter);
   		return parent == null
   				? groupName
   				: parent.getLogicalScope(filter, delimiter) + delimiter + groupName;
   	}
&lt;p&gt;   ```&lt;/p&gt;

&lt;p&gt;   I find this more readable and with less `return`s.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16687925" author="githubbot" created="Thu, 15 Nov 2018 12:05:10 +0000"  >&lt;p&gt;zentol closed pull request #7095: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10857&quot; title=&quot;Conflict between JMX and Prometheus Metrics reporter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10857&quot;&gt;&lt;del&gt;FLINK-10857&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;metrics&amp;#93;&lt;/span&gt; Cache logical scopes separately for each reporter&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7095&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7095&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroup.java b/flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroup.java&lt;br/&gt;
index 909915f216e..4400b14a10d 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroup.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroup.java&lt;br/&gt;
@@ -90,9 +90,9 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;For example: &quot;host-7.taskmanager-2.window_word_count.my-mapper&quot; */&lt;br/&gt;
 	private final String[] scopeStrings;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/** The logical metrics scope represented by this group, as a concatenated string, lazily computed.&lt;br/&gt;
+	/** The logical metrics scope represented by this group for each reporter, as a concatenated string, lazily computed.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;For example: &quot;taskmanager.job.task&quot; */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private String logicalScopeString;&lt;br/&gt;
+	private String[] logicalScopeStrings;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 	/** The metrics query service scope represented by this group, lazily computed. */&lt;br/&gt;
 	protected QueryScopeInfo queryServiceScopeInfo;&lt;br/&gt;
@@ -107,6 +107,7 @@ public AbstractMetricGroup(MetricRegistry registry, String[] scope, A parent) &lt;/p&gt;
{
 		this.scopeComponents = checkNotNull(scope);
 		this.parent = parent;
 		this.scopeStrings = new String[registry.getNumberReporters()];
+		this.logicalScopeStrings = new String[registry.getNumberReporters()];
 	}

&lt;p&gt; 	public Map&amp;lt;String, String&amp;gt; getAllVariables() {&lt;br/&gt;
@@ -152,14 +153,34 @@ public String getLogicalScope(CharacterFilter filter) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@return logical scope&lt;br/&gt;
 	 */&lt;br/&gt;
 	public String getLogicalScope(CharacterFilter filter, char delimiter) {&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (logicalScopeString == null) {&lt;/li&gt;
	&lt;li&gt;if (parent == null) 
{
-				logicalScopeString = getGroupName(filter);
-			}
&lt;p&gt; else &lt;/p&gt;
{
-				logicalScopeString = parent.getLogicalScope(filter, delimiter) + delimiter + getGroupName(filter);
+		return getLogicalScope(filter, delimiter, -1);
+	}
&lt;p&gt;+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Returns the logical scope of this group, for example&lt;br/&gt;
+	 * &lt;/p&gt;
{@code &quot;taskmanager.job.task&quot;}
&lt;p&gt;.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @param filter character filter which is applied to the scope components&lt;br/&gt;
+	 * @param delimiter delimiter to use for concatenating scope components&lt;br/&gt;
+	 * @param reporterIndex index of the reporter&lt;br/&gt;
+	 * @return logical scope&lt;br/&gt;
+	 */&lt;br/&gt;
+	String getLogicalScope(CharacterFilter filter, char delimiter, int reporterIndex) {&lt;br/&gt;
+		if (logicalScopeStrings.length == 0 || (reporterIndex &amp;lt; 0 || reporterIndex &amp;gt;= logicalScopeStrings.length)) &lt;/p&gt;
{
+			return createLogicalScope(filter, delimiter);
+		}
&lt;p&gt; else &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+			if (logicalScopeStrings[reporterIndex] == null) {
+				logicalScopeStrings[reporterIndex] = createLogicalScope(filter, delimiter);
 			}+			return logicalScopeStrings[reporterIndex]; 		}&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;return logicalScopeString;&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private String createLogicalScope(CharacterFilter filter, char delimiter) 
{
+		final String groupName = getGroupName(filter);
+		return parent == null
+			? groupName
+			: parent.getLogicalScope(filter, delimiter) + delimiter + groupName;
 	}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 	/**&lt;br/&gt;
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/FrontMetricGroup.java b/flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/FrontMetricGroup.java&lt;br/&gt;
index 63842fef9d6..64397d33db6 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/FrontMetricGroup.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/metrics/groups/FrontMetricGroup.java&lt;br/&gt;
@@ -52,6 +52,6 @@ public String getLogicalScope(CharacterFilter filter) {&lt;br/&gt;
 	}&lt;/p&gt;

&lt;p&gt; 	public String getLogicalScope(CharacterFilter filter, char delimiter) &lt;/p&gt;
{
-		return parentMetricGroup.getLogicalScope(filter, delimiter);
+		return parentMetricGroup.getLogicalScope(filter, delimiter, this.reporterIndex);
 	}
&lt;p&gt; }&lt;br/&gt;
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroupTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroupTest.java&lt;br/&gt;
index f8ed3c6a6d8..f3f8b42b851 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/test/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroupTest.java&lt;br/&gt;
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/metrics/groups/AbstractMetricGroupTest.java&lt;br/&gt;
@@ -105,6 +105,30 @@ public void testScopeCachingForMultipleReporters() throws Exception {&lt;br/&gt;
 		}&lt;br/&gt;
 	}&lt;/p&gt;

&lt;p&gt;+	@Test&lt;br/&gt;
+	public void testLogicalScopeCachingForMultipleReporters() throws Exception {&lt;br/&gt;
+		Configuration config = new Configuration();&lt;br/&gt;
+		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test1.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, LogicalScopeReporter1.class.getName());&lt;br/&gt;
+		config.setString(ConfigConstants.METRICS_REPORTER_PREFIX + &quot;test2.&quot; + ConfigConstants.METRICS_REPORTER_CLASS_SUFFIX, LogicalScopeReporter2.class.getName());&lt;br/&gt;
+&lt;br/&gt;
+		MetricRegistryImpl testRegistry = new MetricRegistryImpl(MetricRegistryConfiguration.fromConfiguration(config));&lt;br/&gt;
+		try {&lt;br/&gt;
+			MetricGroup tmGroup = new TaskManagerMetricGroup(testRegistry, &quot;host&quot;, &quot;id&quot;)&lt;br/&gt;
+				.addGroup(&quot;B&quot;)&lt;br/&gt;
+				.addGroup(&quot;C&quot;);&lt;br/&gt;
+			tmGroup.counter(&quot;1&quot;);&lt;br/&gt;
+			assertEquals(&quot;Reporters were not properly instantiated&quot;, 2, testRegistry.getReporters().size());&lt;br/&gt;
+			for (MetricReporter reporter : testRegistry.getReporters()) {&lt;br/&gt;
+				ScopeCheckingTestReporter typedReporter = (ScopeCheckingTestReporter) reporter;&lt;br/&gt;
+				if (typedReporter.failureCause != null) &lt;/p&gt;
{
+					throw typedReporter.failureCause;
+				}
&lt;p&gt;+			}&lt;br/&gt;
+		} finally &lt;/p&gt;
{
+			testRegistry.shutdown().get();
+		}
&lt;p&gt;+	}&lt;br/&gt;
+&lt;br/&gt;
 	private abstract static class ScopeCheckingTestReporter extends TestReporter {&lt;br/&gt;
 		protected Exception failureCause;&lt;/p&gt;

&lt;p&gt;@@ -175,6 +199,38 @@ public String filterCharacters(String input) {&lt;br/&gt;
 		}&lt;br/&gt;
 	}&lt;/p&gt;

&lt;p&gt;+	/**&lt;br/&gt;
+	 * Reporter that verifies the logical-scope caching behavior.&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static final class LogicalScopeReporter1 extends ScopeCheckingTestReporter {&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public String filterCharacters(String input) &lt;/p&gt;
{
+			return FILTER_B.filterCharacters(input);
+		}
&lt;p&gt;+&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public void checkScopes(Metric metric, String metricName, MetricGroup group) &lt;/p&gt;
{
+			final String logicalScope = ((FrontMetricGroup&amp;lt;AbstractMetricGroup&amp;lt;?&amp;gt;&amp;gt;) group).getLogicalScope(this, &apos;-&apos;);
+			assertEquals(&quot;taskmanager-X-C&quot;, logicalScope);
+		}
&lt;p&gt;+	}&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Reporter that verifies the logical-scope caching behavior.&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static final class LogicalScopeReporter2 extends ScopeCheckingTestReporter {&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public String filterCharacters(String input) &lt;/p&gt;
{
+			return FILTER_C.filterCharacters(input);
+		}
&lt;p&gt;+&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public void checkScopes(Metric metric, String metricName, MetricGroup group) &lt;/p&gt;
{
+			final String logicalScope = ((FrontMetricGroup&amp;lt;AbstractMetricGroup&amp;lt;?&amp;gt;&amp;gt;) group).getLogicalScope(this, &apos;,&apos;);
+			assertEquals(&quot;taskmanager,B,X&quot;, logicalScope);
+		}
&lt;p&gt;+	}&lt;br/&gt;
+&lt;br/&gt;
 	@Test&lt;br/&gt;
 	public void testScopeGenerationWithoutReporters() throws Exception {&lt;br/&gt;
 		Configuration config = new Configuration();&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16687928" author="zentol" created="Thu, 15 Nov 2018 12:09:10 +0000"  >&lt;p&gt;master: ac356d70ebb0c867d260c9448645fa285a59fe46&lt;br/&gt;
1.7: 16925c20dde883de37f1de65c7a9224d51a6254f&lt;br/&gt;
1.6: c4d66c53d8e5d4de4ebcb47f816aa11988c8bb99&lt;br/&gt;
1.5: c7f8a21161f03e6ccad239c6664375169ccb095c&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00f7c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>