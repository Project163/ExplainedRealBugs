<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10819] JobManagerHAProcessFailureRecoveryITCase.testDispatcherProcessFailure is unstable</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10819</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Found the following error in the process of CI&#65306;&lt;/p&gt;

&lt;p&gt;Results :&lt;br/&gt;
Tests in error: &lt;br/&gt;
 JobManagerHAProcessFailureRecoveryITCase.testDispatcherProcessFailure:331 &#187; IllegalArgument&lt;br/&gt;
Tests run: 1463, Failures: 0, Errors: 1, Skipped: 29&lt;br/&gt;
18:40:55.828 &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
18:40:55.829 &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD FAILURE&lt;br/&gt;
18:40:55.829 &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
18:40:55.830 &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time: 30:19 min&lt;br/&gt;
18:40:55.830 &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: 2018-11-07T18:40:55+00:00&lt;br/&gt;
18:40:56.294 &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Final Memory: 92M/678M&lt;br/&gt;
18:40:56.294 &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
18:40:56.294 &lt;span class=&quot;error&quot;&gt;&amp;#91;WARNING&amp;#93;&lt;/span&gt; The requested profile &quot;include-kinesis&quot; could not be activated because it does not exist.&lt;br/&gt;
18:40:56.295 &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.18.1:test (integration-tests) on project flink-tests_2.11: There are test failures.&lt;br/&gt;
18:40:56.295 &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
18:40:56.295 &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Please refer to /home/travis/build/sunjincheng121/flink/flink-tests/target/surefire-reports for the individual test results.&lt;br/&gt;
18:40:56.295 &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
18:40:56.295 &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
18:40:56.295 &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
18:40:56.295 &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
18:40:56.295 &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
18:40:56.295 &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
18:40:56.295 &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&lt;/a&gt;&lt;br/&gt;
MVN exited with EXIT CODE: 1.&lt;br/&gt;
Trying to KILL watchdog (11329).&lt;br/&gt;
./tools/travis_mvn_watchdog.sh: line 269: 11329 Terminated watchdog&lt;br/&gt;
PRODUCED build artifacts.&lt;/p&gt;

&lt;p&gt;But after the rerun, the error disappeared.&#160;&lt;/p&gt;

&lt;p&gt;Currently&#65292;no specific reasons are found, and will continue to pay attention.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13196999">FLINK-10819</key>
            <summary>JobManagerHAProcessFailureRecoveryITCase.testDispatcherProcessFailure is unstable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="maguowei">Guowei Ma</assignee>
                                    <reporter username="sunjincheng121">sunjincheng</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 8 Nov 2018 03:34:58 +0000</created>
                <updated>Mon, 27 Jan 2020 01:49:33 +0000</updated>
                            <resolved>Sat, 25 Jan 2020 17:33:03 +0000</resolved>
                                    <version>1.7.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16679498" author="till.rohrmann" created="Thu, 8 Nov 2018 09:31:47 +0000"  >&lt;p&gt;Thanks for reporting this issue. Could you maybe share the surefire report or the snippet of the log where we see the stack trace of the &lt;tt&gt;IllegalArgumentException&lt;/tt&gt;?&lt;/p&gt;

&lt;p&gt;To me it looks as if the test simply exceeded the maximum timeout. Could you check when the test was started? Maybe we need to increase &lt;tt&gt;JobManagerHAProcessFailureRecoveryITCase#TestTimeOut&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16681469" author="sunjincheng121" created="Fri, 9 Nov 2018 14:03:56 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt;&#65292;&#160;I am sorry that I did not keep the exception information before re-run the CI. When I started CI again, the problem has disappeared. I will continue to pay attention to this issue. I will keep the log when it happens again.&lt;/p&gt;</comment>
                            <comment id="16716637" author="till.rohrmann" created="Tue, 11 Dec 2018 09:27:30 +0000"  >&lt;p&gt;It happened again: &lt;a href=&quot;https://api.travis-ci.org/v3/job/466030847/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/466030847/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16748563" author="gjy" created="Tue, 22 Jan 2019 09:51:40 +0000"  >&lt;p&gt;It happened again: &lt;a href=&quot;https://api.travis-ci.org/v3/job/482518482/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/482518482/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16756275" author="pnowojski" created="Wed, 30 Jan 2019 16:17:52 +0000"  >&lt;p&gt;And again: &lt;a href=&quot;https://api.travis-ci.org/v3/job/486399109/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/486399109/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16756979" author="till.rohrmann" created="Thu, 31 Jan 2019 07:43:22 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/486563876/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/486563876/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16761709" author="zentol" created="Wed, 6 Feb 2019 12:41:38 +0000"  >&lt;p&gt;Effectively this is a timeout issue.&lt;/p&gt;

&lt;p&gt;Our own and scalas &lt;tt&gt;Deadline&lt;/tt&gt; implementation have a frustrating behavior where &lt;tt&gt;timeLeft()&lt;/tt&gt; can return a  &lt;em&gt;negative&lt;/em&gt; value if the time has exceeded. Passing this as a timeout for wait() methods throws an IllegalArgumentException.&lt;/p&gt;

&lt;p&gt;Working around this is a bit stupid; you obviously can&apos;t rely on &lt;tt&gt;hasTImeLeft&lt;/tt&gt;, but instead have to do something like below every time you use a deadline:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; timeleft = Deadline.timeLeft().toMillis();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (timeleft &amp;gt; 0) {
  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; some operation that uses timeleft
&lt;/span&gt;} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
  abort or something
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16764728" author="aljoscha" created="Mon, 11 Feb 2019 08:01:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sunjincheng121&quot; class=&quot;user-hover&quot; rel=&quot;sunjincheng121&quot;&gt;sunjincheng121&lt;/a&gt; Do you want to fix this, or can I take a shot? I have another two instances of this:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://travis-ci.org/aljoscha/flink/jobs/490527351&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/aljoscha/flink/jobs/490527351&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://travis-ci.org/aljoscha/flink/jobs/490468682&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/aljoscha/flink/jobs/490468682&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Which is getting slightly annoying &#128517;&lt;/p&gt;</comment>
                            <comment id="16769016" author="klion26" created="Fri, 15 Feb 2019 07:12:17 +0000"  >&lt;p&gt;Another instance:&#160; &lt;a href=&quot;https://travis-ci.org/klion26/flink/jobs/493604011&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/klion26/flink/jobs/493604011&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16796890" author="gjy" created="Wed, 20 Mar 2019 07:58:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://api.travis-ci.org/v3/job/508500560/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/508500560/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.AssertionError: The program did not finish in time
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.junit.Assert.assertFalse(Assert.java:64)
	at org.apache.flink.test.recovery.JobManagerHAProcessFailureRecoveryITCase.testDispatcherProcessFailure(JobManagerHAProcessFailureRecoveryITCase.java:339)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16806091" author="carp84" created="Sun, 31 Mar 2019 09:18:07 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/513408208/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/513408208/log.txt&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IllegalArgumentException: timeout value is negative
	at java.lang.Thread.join(Thread.java:1247)
	at org.apache.flink.test.recovery.JobManagerHAProcessFailureRecoveryITCase.testDispatcherProcessFailure(JobManagerHAProcessFailureRecoveryITCase.java:331)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16806094" author="carp84" created="Sun, 31 Mar 2019 09:32:38 +0000"  >&lt;p&gt;Two questions about issue here:&lt;br/&gt;
1. Why are we using scala &lt;tt&gt;FiniteDuration&lt;/tt&gt; rather than the junit&apos;s &lt;tt&gt;timeout&lt;/tt&gt; mechanism (&lt;tt&gt;@Test(timeout = 300000)&lt;/tt&gt;)?&lt;br/&gt;
2. Although it&apos;s a negative timeout thus &lt;tt&gt;IllegalArgumentException&lt;/tt&gt; issue at surface, timeout itself indicates that something is wrong, either design of the test case needs improvements or some potential bug here?&lt;br/&gt;
Will get back and dig more on this later when time allows.&lt;/p&gt;
</comment>
                            <comment id="16888015" author="azagrebin" created="Thu, 18 Jul 2019 14:13:26 +0000"  >&lt;p&gt;Tried it on my travis for 100 times but it did not fail with this failure:&lt;br/&gt;
&lt;a href=&quot;https://travis-ci.org/azagrebin/flink/builds/557353649&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/azagrebin/flink/builds/557353649&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We also should at least assert that the all expected files are created to fail fast. Now we are&#160;just waiting for them w/o any check after the timeout (AbstractTaskManagerProcessFailureRecoveryTest.waitForMarkerFiles). See also:&lt;br/&gt;
&lt;a href=&quot;https://github.com/azagrebin/flink/commit/90e076438912c851537c3289bd939171776c165b#diff-6d88384ea3bf19e70a0c2b8927b635e2R325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/azagrebin/flink/commit/90e076438912c851537c3289bd939171776c165b#diff-6d88384ea3bf19e70a0c2b8927b635e2R325&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16889486" author="maguowei" created="Sat, 20 Jul 2019 11:54:58 +0000"  >&lt;p&gt;It might be a bug according to &lt;a href=&quot;https://api.travis-ci.org/v3/job/508500560/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/508500560/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1. The test is time out because two &quot;READY_MARKER_FILE_PREFIX&quot; files are missing.&lt;/p&gt;

&lt;p&gt;2. Two tasks, which response for creating the two files can&apos;t be deployed because the resource is not available.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12975233/12975233_image-2019-07-19-17-01-19-758.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;3. However, the reason why RM has not allocated resources to the two tasks is still uncertain. Because two task executors have been registered at the first time; there must be 4 free slots.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12975232/12975232_image-2019-07-19-17-00-17-194.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I have read a few logs, and all have the following three characteristics.&lt;/p&gt;

&lt;p&gt;1. Always have a TM registered twice;&lt;br/&gt;
2. The taskexecutor, which registers twice uses the old RegistrationID in the heartbeat. I already open a Jira &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13426&quot; title=&quot;TaskExecutor uses the wrong Registrationid in the heartbeat with RM.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-13426&quot;&gt;FLINK-13426&lt;/a&gt;&lt;br/&gt;
3. When the job starts, it applies for 4 slots at the beginning. However, only one TM is available. During the execution of the Source, the SlotPool cancels the two Slot requests that have not come. In the next execution, the Scheduler issues two SlotRequests, but the two SlotRequests don&apos;t return until timeout.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16892620" author="maguowei" created="Thu, 25 Jul 2019 10:10:50 +0000"  >&lt;p&gt;I think we could add some status log in SlotManager like slot pool. It will help to find why RM can not fulfill the slot requests and slot status.&lt;/p&gt;</comment>
                            <comment id="16907107" author="till.rohrmann" created="Wed, 14 Aug 2019 09:48:19 +0000"  >&lt;p&gt;Has the problem with Flink&apos;s &lt;tt&gt;Deadline&lt;/tt&gt; implementation been fixed &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17022070" author="till.rohrmann" created="Thu, 23 Jan 2020 13:07:40 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17022202" author="aljoscha" created="Thu, 23 Jan 2020 15:49:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; added a different variant of &lt;tt&gt;timeLeft()&lt;/tt&gt; that could be used, I think.&lt;/p&gt;</comment>
                            <comment id="17023396" author="maguowei" created="Sat, 25 Jan 2020 02:44:37 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I could replace the scala version Deadline with Flink version Deadline. But I think this is not the root cause after I analyze the log &lt;a href=&quot;https://api.travis-ci.org/v3/job/508500560/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/508500560/log.txt&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;However, I could not reproduce this bug in 1.9 version. Currently, no user reports this situation now. Maybe there is some change which fixes this bug or decreases the possibility.&lt;/p&gt;

&lt;p&gt;I want to know what the usual way approach for this not reproducing bug.&lt;/p&gt;

&lt;p&gt;Close it and reopen it when it happens again. Or keep it open.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</comment>
                            <comment id="17023605" author="till.rohrmann" created="Sat, 25 Jan 2020 17:30:18 +0000"  >&lt;p&gt;Usually we close the ticket if we are unable to reproduce the problem. If the problem reoccurs, then we reopen the issue again. Getting rid of Scala&apos;s &lt;tt&gt;Deadline&lt;/tt&gt; is a nice side effect, though.&lt;/p&gt;</comment>
                            <comment id="17023607" author="till.rohrmann" created="Sat, 25 Jan 2020 17:33:03 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;master: 53f956fb57dd5601d2e3ca9289207d21796cdc4d&lt;br/&gt;
1.10.0: 51665b8e1fcd6b139d3c21d661b92fa425b7944e&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13201313">FLINK-11027</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12975231" name="image-2019-07-19-16-59-10-178.png" size="173704" author="maguowei" created="Fri, 19 Jul 2019 08:59:12 +0000"/>
                            <attachment id="12975232" name="image-2019-07-19-17-00-17-194.png" size="33916" author="maguowei" created="Fri, 19 Jul 2019 09:00:19 +0000"/>
                            <attachment id="12975233" name="image-2019-07-19-17-01-19-758.png" size="268017" author="maguowei" created="Fri, 19 Jul 2019 09:01:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00960:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>