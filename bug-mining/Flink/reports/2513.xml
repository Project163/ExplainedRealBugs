<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:34:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9743] PackagedProgram.extractContainedLibraries fails on Windows</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9743</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Submitting a jar that contains other jars on Windows fails with an exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.flink.client.program.ProgramInvocationException: Unknown I/O error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; extracting contained jar files.
        at org.apache.flink.client.program.PackagedProgram.extractContainedLibraries(PackagedProgram.java:752)
        at org.apache.flink.client.program.PackagedProgram.&amp;lt;init&amp;gt;(PackagedProgram.java:194)
        at org.apache.flink.client.cli.CliFrontend.buildProgram(CliFrontend.java:833)
        at org.apache.flink.client.cli.CliFrontend.run(CliFrontend.java:201)
        at org.apache.flink.client.cli.CliFrontend.parseParameters(CliFrontend.java:1020)
        at org.apache.flink.client.cli.CliFrontend.lambda$main$9(CliFrontend.java:1096)
        at org.apache.flink.runtime.security.NoOpSecurityContext.runSecured(NoOpSecurityContext.java:30)
        at org.apache.flink.client.cli.CliFrontend.main(CliFrontend.java:1096)
Caused by: org.apache.flink.client.program.ProgramInvocationException: An I/O error occurred &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; creating temporary file to extract nested library &lt;span class=&quot;code-quote&quot;&gt;&apos;lib/antrunner.jar&apos;&lt;/span&gt;.
        at org.apache.flink.client.program.PackagedProgram.extractContainedLibraries(PackagedProgram.java:708)
        ... 7 more
Caused by: java.io.IOException: Unable to create temporary file, C:\Users\XXX\AppData\Local\Temp\1751416743_6922010711856647205lib\antrunner.jar
        at java.io.File$TempDirectory.generateFile(Unknown Source)
        at java.io.File.createTempFile(Unknown Source)
        at java.io.File.createTempFile(Unknown Source)
        at org.apache.flink.client.program.PackagedProgram.extractContainedLibraries(PackagedProgram.java:702)
        ... 7 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;PackagedProgram.extractContainedLibraries&lt;/tt&gt; tries to replace all path separators using the platform-dependent &lt;tt&gt;File.separateChar&lt;/tt&gt;, however the path separator for jars (and zips for that matter) is always &lt;tt&gt;/&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JarEntry entry = containedJarFileEntries.get(i);
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = entry.getName();
name = name.replace(File.separatorChar, &lt;span class=&quot;code-quote&quot;&gt;&apos;_&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13170099">FLINK-9743</key>
            <summary>PackagedProgram.extractContainedLibraries fails on Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Sergey Nuyanzin">Sergey Nuyanzin</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 4 Jul 2018 14:37:50 +0000</created>
                <updated>Thu, 28 Feb 2019 13:30:02 +0000</updated>
                            <resolved>Wed, 11 Jul 2018 10:06:50 +0000</resolved>
                                    <version>1.4.2</version>
                    <version>1.5.0</version>
                    <version>1.6.0</version>
                                    <fixVersion>1.4.3</fixVersion>
                    <fixVersion>1.5.2</fixVersion>
                    <fixVersion>1.6.0</fixVersion>
                                    <component>Command Line Client</component>
                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16533480" author="githubbot" created="Thu, 5 Jul 2018 10:23:58 +0000"  >&lt;p&gt;GitHub user snuyanzin opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9743&quot; title=&quot;PackagedProgram.extractContainedLibraries fails on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9743&quot;&gt;&lt;del&gt;FLINK-9743&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Client&amp;#93;&lt;/span&gt; Use correct zip/jar path separator&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    &lt;b&gt;This PR resolves libraries extraction issue from jars&lt;/b&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Always in case of zip/jar use &apos;/&apos; path separator&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Test with generated jar emulating the real case&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Added test generates fake jar with a structure&lt;br/&gt;
            test.jar
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;lib&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;#8211;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;internalTest.jar&lt;br/&gt;
        and then calls for `PackagedProgram#extractContainedLibraries` to check if it extracts internalTest.jar correctly&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/snuyanzin/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/snuyanzin/flink&lt;/a&gt; FLINK_9743&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #6263&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 649b9f1a0893aea32bd2dc3cfa1702bfb77ab29f&lt;br/&gt;
Author: snuyanzin &amp;lt;snuyanzin@...&amp;gt;&lt;br/&gt;
Date:   2018-07-05T08:58:33Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9743&quot; title=&quot;PackagedProgram.extractContainedLibraries fails on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9743&quot;&gt;&lt;del&gt;FLINK-9743&lt;/del&gt;&lt;/a&gt; use correct zip path separator,&lt;br/&gt;
    PackagedProgramTest#testExtractContainedLibraries to check PackagedProgram#extractContainedLibraries&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16538361" author="githubbot" created="Tue, 10 Jul 2018 10:24:39 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263#discussion_r201291316&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263#discussion_r201291316&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-clients/src/test/java/org/apache/flink/client/program/PackagedProgramTest.java &amp;#8212;&lt;br/&gt;
    @@ -56,6 +63,54 @@ public void testGetPreviewPlan() {&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * The test for &lt;/p&gt;
{@link PackagedProgram#extractContainedLibraries}
&lt;p&gt;.&lt;br/&gt;
    +	 * As a prerequisite the test generates a jar file with the following structure&lt;br/&gt;
    +	 * test.jar&lt;br/&gt;
    +	 * |- lib&lt;br/&gt;
    +	 * |-&lt;del&gt;|&lt;/del&gt; internalTest.jar&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testExtractContainedLibraries() {&lt;br/&gt;
    +		String s = &quot;testExtractContainedLibraries&quot;;&lt;br/&gt;
    +		Path workDir = null;&lt;br/&gt;
    +		Path fakeJar = null;&lt;br/&gt;
    +		try {&lt;br/&gt;
    +			workDir = Files.createTempDirectory(PackagedProgram.class.getSimpleName() + &quot;_&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    derive from `TemporaryFolder`&lt;/p&gt;</comment>
                            <comment id="16538362" author="githubbot" created="Tue, 10 Jul 2018 10:24:39 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263#discussion_r201291273&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263#discussion_r201291273&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-clients/src/test/java/org/apache/flink/client/program/PackagedProgramTest.java &amp;#8212;&lt;br/&gt;
    @@ -56,6 +63,54 @@ public void testGetPreviewPlan() {&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * The test for &lt;/p&gt;
{@link PackagedProgram#extractContainedLibraries}
&lt;p&gt;.&lt;br/&gt;
    +	 * As a prerequisite the test generates a jar file with the following structure&lt;br/&gt;
    +	 * test.jar&lt;br/&gt;
    +	 * |- lib&lt;br/&gt;
    +	 * |-&lt;del&gt;|&lt;/del&gt; internalTest.jar&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testExtractContainedLibraries() {&lt;br/&gt;
    +		String s = &quot;testExtractContainedLibraries&quot;;&lt;br/&gt;
    +		Path workDir = null;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    use junit `TemporaryFolder` instead&lt;/p&gt;</comment>
                            <comment id="16538363" author="githubbot" created="Tue, 10 Jul 2018 10:24:39 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263#discussion_r201291489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263#discussion_r201291489&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-clients/src/test/java/org/apache/flink/client/program/PackagedProgramTest.java &amp;#8212;&lt;br/&gt;
    @@ -56,6 +63,54 @@ public void testGetPreviewPlan() {&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * The test for &lt;/p&gt;
{@link PackagedProgram#extractContainedLibraries}
&lt;p&gt;.&lt;br/&gt;
    +	 * As a prerequisite the test generates a jar file with the following structure&lt;br/&gt;
    +	 * test.jar&lt;br/&gt;
    +	 * |- lib&lt;br/&gt;
    +	 * |-&lt;del&gt;|&lt;/del&gt; internalTest.jar&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testExtractContainedLibraries() {&lt;br/&gt;
    +		String s = &quot;testExtractContainedLibraries&quot;;&lt;br/&gt;
    +		Path workDir = null;&lt;br/&gt;
    +		Path fakeJar = null;&lt;br/&gt;
    +		try {&lt;br/&gt;
    +			workDir = Files.createTempDirectory(PackagedProgram.class.getSimpleName() + &quot;_&quot;);&lt;br/&gt;
    +			fakeJar = Paths.get(workDir.toAbsolutePath().toString(), &quot;test.jar&quot;);&lt;br/&gt;
    +			FileOutputStream fos = new FileOutputStream(fakeJar.toFile());&lt;br/&gt;
    +			try (ZipOutputStream zos = new ZipOutputStream(fos)) &lt;/p&gt;
{
    +				ZipEntry entry = new ZipEntry(&quot;lib/internalTest.jar&quot;);
    +				zos.putNextEntry(entry);
    +				zos.write(s.getBytes());
    +				zos.closeEntry();
    +			}
&lt;p&gt; catch (IOException e) &lt;/p&gt;
{
    +				System.err.println(e.getMessage());
    +				e.printStackTrace();
    +				Assert.fail(&quot;Test is erroneous: &quot; + e.getMessage());
    +			}
&lt;p&gt;    +			PackagedProgram.extractContainedLibraries(fakeJar.toUri().toURL());&lt;br/&gt;
    +		}&lt;br/&gt;
    +		catch (Exception e) &lt;/p&gt;
{
    +			System.err.println(e.getMessage());
    +			e.printStackTrace();
    +			Assert.fail(&quot;Test is erroneous: &quot; + e.getMessage());
    +		}
&lt;p&gt; finally {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    this block will be unnecessary with the usage of `TemporaryFolder`&lt;/p&gt;</comment>
                            <comment id="16538364" author="githubbot" created="Tue, 10 Jul 2018 10:24:39 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263#discussion_r201291422&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263#discussion_r201291422&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-clients/src/test/java/org/apache/flink/client/program/PackagedProgramTest.java &amp;#8212;&lt;br/&gt;
    @@ -56,6 +63,54 @@ public void testGetPreviewPlan() {&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * The test for &lt;/p&gt;
{@link PackagedProgram#extractContainedLibraries}
&lt;p&gt;.&lt;br/&gt;
    +	 * As a prerequisite the test generates a jar file with the following structure&lt;br/&gt;
    +	 * test.jar&lt;br/&gt;
    +	 * |- lib&lt;br/&gt;
    +	 * |-&lt;del&gt;|&lt;/del&gt; internalTest.jar&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testExtractContainedLibraries() {&lt;br/&gt;
    +		String s = &quot;testExtractContainedLibraries&quot;;&lt;br/&gt;
    +		Path workDir = null;&lt;br/&gt;
    +		Path fakeJar = null;&lt;br/&gt;
    +		try {&lt;br/&gt;
    +			workDir = Files.createTempDirectory(PackagedProgram.class.getSimpleName() + &quot;_&quot;);&lt;br/&gt;
    +			fakeJar = Paths.get(workDir.toAbsolutePath().toString(), &quot;test.jar&quot;);&lt;br/&gt;
    +			FileOutputStream fos = new FileOutputStream(fakeJar.toFile());&lt;br/&gt;
    +			try (ZipOutputStream zos = new ZipOutputStream(fos)) &lt;/p&gt;
{
    +				ZipEntry entry = new ZipEntry(&quot;lib/internalTest.jar&quot;);
    +				zos.putNextEntry(entry);
    +				zos.write(s.getBytes());
    +				zos.closeEntry();
    +			}
&lt;p&gt; catch (IOException e) &lt;/p&gt;
{
    +				System.err.println(e.getMessage());
    +				e.printStackTrace();
    +				Assert.fail(&quot;Test is erroneous: &quot; + e.getMessage());
    +			}
&lt;p&gt;    +			PackagedProgram.extractContainedLibraries(fakeJar.toUri().toURL());&lt;br/&gt;
    +		}&lt;br/&gt;
    +		catch (Exception e) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    no need to catch them, just let them bubble up&lt;/p&gt;</comment>
                            <comment id="16538365" author="githubbot" created="Tue, 10 Jul 2018 10:24:39 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263#discussion_r201291704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263#discussion_r201291704&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-clients/src/test/java/org/apache/flink/client/program/PackagedProgramTest.java &amp;#8212;&lt;br/&gt;
    @@ -56,6 +63,54 @@ public void testGetPreviewPlan() {&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * The test for &lt;/p&gt;
{@link PackagedProgram#extractContainedLibraries}
&lt;p&gt;.&lt;br/&gt;
    +	 * As a prerequisite the test generates a jar file with the following structure&lt;br/&gt;
    +	 * test.jar&lt;br/&gt;
    +	 * |- lib&lt;br/&gt;
    +	 * |-&lt;del&gt;|&lt;/del&gt; internalTest.jar&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testExtractContainedLibraries() {&lt;br/&gt;
    +		String s = &quot;testExtractContainedLibraries&quot;;&lt;br/&gt;
    +		Path workDir = null;&lt;br/&gt;
    +		Path fakeJar = null;&lt;br/&gt;
    +		try {&lt;br/&gt;
    +			workDir = Files.createTempDirectory(PackagedProgram.class.getSimpleName() + &quot;_&quot;);&lt;br/&gt;
    +			fakeJar = Paths.get(workDir.toAbsolutePath().toString(), &quot;test.jar&quot;);&lt;br/&gt;
    +			FileOutputStream fos = new FileOutputStream(fakeJar.toFile());&lt;br/&gt;
    +			try (ZipOutputStream zos = new ZipOutputStream(fos)) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    inline `FileOutputStream` creation, i.e. `new ZipOutputStream(new FileOutputStream(...))`&lt;/p&gt;</comment>
                            <comment id="16538366" author="githubbot" created="Tue, 10 Jul 2018 10:24:39 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263#discussion_r201291547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263#discussion_r201291547&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-clients/src/test/java/org/apache/flink/client/program/PackagedProgramTest.java &amp;#8212;&lt;br/&gt;
    @@ -56,6 +63,54 @@ public void testGetPreviewPlan() {&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * The test for &lt;/p&gt;
{@link PackagedProgram#extractContainedLibraries}
&lt;p&gt;.&lt;br/&gt;
    +	 * As a prerequisite the test generates a jar file with the following structure&lt;br/&gt;
    +	 * test.jar&lt;br/&gt;
    +	 * |- lib&lt;br/&gt;
    +	 * |-&lt;del&gt;|&lt;/del&gt; internalTest.jar&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testExtractContainedLibraries() {&lt;br/&gt;
    +		String s = &quot;testExtractContainedLibraries&quot;;&lt;br/&gt;
    +		Path workDir = null;&lt;br/&gt;
    +		Path fakeJar = null;&lt;br/&gt;
    +		try {&lt;br/&gt;
    +			workDir = Files.createTempDirectory(PackagedProgram.class.getSimpleName() + &quot;_&quot;);&lt;br/&gt;
    +			fakeJar = Paths.get(workDir.toAbsolutePath().toString(), &quot;test.jar&quot;);&lt;br/&gt;
    +			FileOutputStream fos = new FileOutputStream(fakeJar.toFile());&lt;br/&gt;
    +			try (ZipOutputStream zos = new ZipOutputStream(fos)) &lt;/p&gt;
{
    +				ZipEntry entry = new ZipEntry(&quot;lib/internalTest.jar&quot;);
    +				zos.putNextEntry(entry);
    +				zos.write(s.getBytes());
    +				zos.closeEntry();
    +			}
&lt;p&gt; catch (IOException e) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    again, just let hte exception bubble up.&lt;/p&gt;</comment>
                            <comment id="16538499" author="githubbot" created="Tue, 10 Jul 2018 12:29:26 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263#discussion_r201322209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263#discussion_r201322209&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-clients/src/test/java/org/apache/flink/client/program/PackagedProgramTest.java &amp;#8212;&lt;br/&gt;
    @@ -21,16 +21,24 @@&lt;br/&gt;
     import org.apache.flink.client.cli.CliFrontendTestUtils;&lt;/p&gt;

&lt;p&gt;     import org.junit.Assert;&lt;br/&gt;
    +import org.junit.Rule;&lt;br/&gt;
     import org.junit.Test;&lt;br/&gt;
    +import org.junit.rules.TemporaryFolder;&lt;/p&gt;

&lt;p&gt;     import java.io.File;&lt;br/&gt;
    +import java.io.FileOutputStream;&lt;br/&gt;
     import java.io.PrintStream;&lt;br/&gt;
    +import java.util.zip.ZipEntry;&lt;br/&gt;
    +import java.util.zip.ZipOutputStream;&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Tests for the 
{@link PackagedProgramTest}
&lt;p&gt;.&lt;br/&gt;
      */&lt;br/&gt;
     public class PackagedProgramTest {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +	@Rule&lt;br/&gt;
    +	public TemporaryFolder temporaryFolder = new TemporaryFolder();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    can be final&lt;/p&gt;</comment>
                            <comment id="16538500" author="githubbot" created="Tue, 10 Jul 2018 12:30:01 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    If it work I&apos;ll fix the issue I found and merge it afterwards.&lt;/p&gt;</comment>
                            <comment id="16538570" author="githubbot" created="Tue, 10 Jul 2018 13:15:57 +0000"  >&lt;p&gt;Github user snuyanzin commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    ok, thank you for review&lt;br/&gt;
    about `public TemporaryFolder temporaryFolder = new TemporaryFolder();` could be final - agree. &lt;br/&gt;
    However while searching for usages I realized that in most cases it is not final but not changed.&lt;br/&gt;
    Am I right that in spite of existing code at least for newly created test classes it is better to use temporaryFolder as final?&lt;/p&gt;</comment>
                            <comment id="16538608" author="githubbot" created="Tue, 10 Jul 2018 13:41:48 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    yes, `TemporaryFolders` should always be final, regardless of what existing code does.&lt;/p&gt;</comment>
                            <comment id="16539824" author="zentol" created="Wed, 11 Jul 2018 10:06:50 +0000"  >&lt;p&gt;master: 2fbe562d4db93ecef8b5cf4a3f477148d43208f6&lt;br/&gt;
1.5: 434bf57c96c74e5f87b7bc2ec7635392f3a512cb&lt;br/&gt;
1.4: 1a852ecfeb077a5bee6ccb4f7af7ac1303421742&lt;/p&gt;</comment>
                            <comment id="16539826" author="githubbot" created="Wed, 11 Jul 2018 10:07:19 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6263&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6263&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12977769">FLINK-4058</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vjpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>