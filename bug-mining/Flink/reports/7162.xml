<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:17:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-32680] Job vertex names get messed up once there is a source vertex chained with a MultipleInput vertex in job graph</title>
                <link>https://issues.apache.org/jira/browse/FLINK-32680</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Take the following test(put it to &lt;tt&gt;MultipleInputITCase&lt;/tt&gt;) as example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testMultipleInputDoesNotChainedWithSource() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        testJobVertexName(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
    }
    
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testMultipleInputChainedWithSource() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        testJobVertexName(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testJobVertexName(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; chain) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();
        env.setParallelism(1);

        TestListResultSink&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; resultSink = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TestListResultSink&amp;lt;&amp;gt;();

        DataStream&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; source1 = env.fromSequence(0L, 3L).name(&lt;span class=&quot;code-quote&quot;&gt;&quot;source1&quot;&lt;/span&gt;);
        DataStream&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; source2 = env.fromElements(4L, 6L).name(&lt;span class=&quot;code-quote&quot;&gt;&quot;source2&quot;&lt;/span&gt;);
        DataStream&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; source3 = env.fromElements(7L, 9L).name(&lt;span class=&quot;code-quote&quot;&gt;&quot;source3&quot;&lt;/span&gt;);

        KeyedMultipleInputTransformation&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; transform =
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; KeyedMultipleInputTransformation&amp;lt;&amp;gt;(
                        &lt;span class=&quot;code-quote&quot;&gt;&quot;MultipleInput&quot;&lt;/span&gt;,
                        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; KeyedSumMultipleInputOperatorFactory(),
                        BasicTypeInfo.LONG_TYPE_INFO,
                        1,
                        BasicTypeInfo.LONG_TYPE_INFO);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (chain) {
            transform.setChainingStrategy(ChainingStrategy.HEAD_WITH_SOURCES);
        }
        KeySelector&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; keySelector = (KeySelector&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt;) value -&amp;gt; value % 3;

        env.addOperator(
                transform
                        .addInput(source1.getTransformation(), keySelector)
                        .addInput(source2.getTransformation(), keySelector)
                        .addInput(source3.getTransformation(), keySelector));

        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MultipleConnectedStreams(env).transform(transform).rebalance().addSink(resultSink).name(&lt;span class=&quot;code-quote&quot;&gt;&quot;sink&quot;&lt;/span&gt;);

        env.execute();
    }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;When we run &lt;tt&gt;testMultipleInputDoesNotChainedWithSource&lt;/tt&gt; , all job vertex names are normal:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13061636/13061636_image-2023-07-26-15-24-24-077.png&quot; height=&quot;246&quot; width=&quot;494&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;When we run &lt;tt&gt;testMultipleInputChainedWithSource&lt;/tt&gt; (the MultipleInput chained with source1), job vertex names get messed up (all job vertex names contain &lt;tt&gt;Source: source1&lt;/tt&gt;):&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13061637/13061637_image-2023-07-26-15-23-29-551.png&quot; height=&quot;182&quot; width=&quot;515&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think it&apos;s a bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13544918">FLINK-32680</key>
            <summary>Job vertex names get messed up once there is a source vertex chained with a MultipleInput vertex in job graph</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="JunRuiLi">Junrui Li</assignee>
                                    <reporter username="wanglijie">Lijie Wang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 26 Jul 2023 07:34:51 +0000</created>
                <updated>Tue, 1 Aug 2023 14:08:13 +0000</updated>
                            <resolved>Tue, 1 Aug 2023 14:08:13 +0000</resolved>
                                    <version>1.16.2</version>
                    <version>1.18.0</version>
                    <version>1.17.1</version>
                                    <fixVersion>1.18.0</fixVersion>
                    <fixVersion>1.16.3</fixVersion>
                    <fixVersion>1.17.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17747409" author="JIRAUSER293716" created="Wed, 26 Jul 2023 09:27:22 +0000"  >&lt;p&gt;This bug is because the global ChainedSources are used when generating the JobVertex name (&lt;a href=&quot;https://github.com/apache/flink/blob/c8ae39d4ac73f81873e1d8ac37e17c29ae330b23/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/graph/StreamingJobGraphGenerator.java#L903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;). But in fact, it should be filtered according to the id of the current node. An example can refer to is &lt;a href=&quot;https://github.com/apache/flink/blob/c8ae39d4ac73f81873e1d8ac37e17c29ae330b23/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/graph/StreamingJobGraphGenerator.java#L1052&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If the idea is correct, I will prepare a PR to fix this issue.&lt;/p&gt;</comment>
                            <comment id="17747411" author="wanglijie95" created="Wed, 26 Jul 2023 09:28:53 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JunRuiLi&quot; class=&quot;user-hover&quot; rel=&quot;JunRuiLi&quot;&gt;JunRuiLi&lt;/a&gt; , assiged to you.&lt;/p&gt;</comment>
                            <comment id="17749791" author="wanglijie95" created="Tue, 1 Aug 2023 14:07:57 +0000"  >&lt;p&gt;Fixed via:&lt;br/&gt;
master(1.18): 9e6f8e8e127e8dd81ded4a2214fd710c8ff8180a&lt;br/&gt;
release-1.17: 5a87cfac875feabf29c0f001e5591ca48a9e5e94&lt;br/&gt;
release-1.16: 3c46ffb1e27d4a369c7016b631fb8d5f944c3e50&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13061637" name="image-2023-07-26-15-23-29-551.png" size="213837" author="wanglijie" created="Wed, 26 Jul 2023 07:23:31 +0000"/>
                            <attachment id="13061636" name="image-2023-07-26-15-24-24-077.png" size="202016" author="wanglijie" created="Wed, 26 Jul 2023 07:24:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jds0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>