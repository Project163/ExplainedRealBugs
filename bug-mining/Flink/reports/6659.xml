<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:13:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-27611] ConcurrentModificationException during Flink-Pulsar checkpoint notification</title>
                <link>https://issues.apache.org/jira/browse/FLINK-27611</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When attempting to run a job that was working in 1.12.7, but upgraded to 1.15.0, the following exception is occurring outside of the control of my own code:&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
java.util.ConcurrentModificationException&lt;br/&gt;
&#160; &#160; at java.base/java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1208)&lt;br/&gt;
&#160; &#160; at java.base/java.util.TreeMap$EntryIterator.next(TreeMap.java:1244)&lt;br/&gt;
&#160; &#160; at java.base/java.util.TreeMap$EntryIterator.next(TreeMap.java:1239)&lt;br/&gt;
&#160; &#160; at org.apache.flink.connector.pulsar.source.reader.source.PulsarUnorderedSourceReader.notifyCheckpointComplete(PulsarUnorderedSourceReader.java:129)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.api.operators.SourceOperator.notifyCheckpointComplete(SourceOperator.java:511)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.StreamOperatorWrapper.notifyCheckpointComplete(StreamOperatorWrapper.java:104)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.RegularOperatorChain.notifyCheckpointComplete(RegularOperatorChain.java:145)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.SubtaskCheckpointCoordinatorImpl.notifyCheckpoint(SubtaskCheckpointCoordinatorImpl.java:409)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.SubtaskCheckpointCoordinatorImpl.notifyCheckpointComplete(SubtaskCheckpointCoordinatorImpl.java:343)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.StreamTask.notifyCheckpointComplete(StreamTask.java:1384)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.StreamTask.lambda$notifyCheckpointCompleteAsync$14(StreamTask.java:1325)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.StreamTask.lambda$notifyCheckpointOperation$17(StreamTask.java:1364)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.StreamTaskActionExecutor$1.runThrowing(StreamTaskActionExecutor.java:50)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.mailbox.Mail.run(Mail.java:90)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.mailbox.MailboxProcessor.processMailsWhenDefaultActionUnavailable(MailboxProcessor.java:338)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.mailbox.MailboxProcessor.processMail(MailboxProcessor.java:324)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.mailbox.MailboxProcessor.runMailboxLoop(MailboxProcessor.java:201)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.StreamTask.runMailboxLoop(StreamTask.java:804)&lt;br/&gt;
&#160; &#160; at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:753)&lt;br/&gt;
&#160; &#160; at org.apache.flink.runtime.taskmanager.Task.runWithSystemExitMonitoring(Task.java:948)&lt;br/&gt;
&#160; &#160; at org.apache.flink.runtime.taskmanager.Task.restoreAndInvoke(Task.java:927)&lt;br/&gt;
&#160; &#160; at org.apache.flink.runtime.taskmanager.Task.doRun(Task.java:741)&lt;br/&gt;
&#160; &#160; at org.apache.flink.runtime.taskmanager.Task.run(Task.java:563)&lt;br/&gt;
&#160; &#160; at java.base/java.lang.Thread.run(Thread.java:829)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13444936">FLINK-27611</key>
            <summary>ConcurrentModificationException during Flink-Pulsar checkpoint notification</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="syhily">Yufan Sheng</assignee>
                                    <reporter username="longtimer">Jason Kania</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sat, 14 May 2022 04:38:59 +0000</created>
                <updated>Fri, 16 Sep 2022 01:36:40 +0000</updated>
                            <resolved>Fri, 16 Sep 2022 01:36:35 +0000</resolved>
                                    <version>1.15.0</version>
                                    <fixVersion>1.16.0</fixVersion>
                    <fixVersion>1.14.6</fixVersion>
                    <fixVersion>1.15.3</fixVersion>
                                    <component>Connectors / Pulsar</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17537484" author="martijnvisser" created="Mon, 16 May 2022 11:26:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=syhily&quot; class=&quot;user-hover&quot; rel=&quot;syhily&quot;&gt;syhily&lt;/a&gt; Can you take a look?&lt;/p&gt;</comment>
                            <comment id="17537814" author="syhily" created="Mon, 16 May 2022 21:42:10 +0000"  >&lt;p&gt;I can. This should be a bug on the Pulsar connector. It affects all the available releases.&lt;/p&gt;</comment>
                            <comment id="17541478" author="longtimer" created="Tue, 24 May 2022 14:00:04 +0000"  >&lt;p&gt;Does the most recent comment mean that it should go to the Pulsar project or is the issue with code in the Flink project?&lt;/p&gt;</comment>
                            <comment id="17541485" author="zentol" created="Tue, 24 May 2022 14:17:44 +0000"  >&lt;p&gt;It is an issue on the Flink side.&lt;/p&gt;</comment>
                            <comment id="17541490" author="zentol" created="Tue, 24 May 2022 14:20:47 +0000"  >&lt;p&gt;This looks a bit like a basic modify-collection-within-a-loop issue. May be trivial to fix by working against an &lt;tt&gt;Iterator&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17558211" author="longtimer" created="Thu, 23 Jun 2022 19:44:56 +0000"  >&lt;p&gt;Is there a possibility of this getting into the 1.15.1 patch release? I do know the process for inclusion but since this affects all available releases, it really blocks usage with Pulsar.&lt;/p&gt;</comment>
                            <comment id="17558346" author="martijnvisser" created="Fri, 24 Jun 2022 06:39:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=longtimer&quot; class=&quot;user-hover&quot; rel=&quot;longtimer&quot;&gt;longtimer&lt;/a&gt; The voting on Flink 1.15.1 is already happening, so that won&apos;t be possible. This can potentially go in Flink 1.15.2 but that also depends on the overall Pulsar stability (which is currently not in the state where it should be)&lt;/p&gt;</comment>
                            <comment id="17581330" author="longtimer" created="Thu, 18 Aug 2022 12:36:25 +0000"  >&lt;p&gt;May I ask why this fix was not included in the 1.15.2 release? It really blocks usage of 1.15 for us.&lt;/p&gt;</comment>
                            <comment id="17597038" author="syhily" created="Mon, 29 Aug 2022 08:28:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=longtimer&quot; class=&quot;user-hover&quot; rel=&quot;longtimer&quot;&gt;longtimer&lt;/a&gt; Sorry. we are working on the test stable. This would be included in next release.&lt;/p&gt;</comment>
                            <comment id="17597177" author="martijnvisser" created="Mon, 29 Aug 2022 12:21:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=longtimer&quot; class=&quot;user-hover&quot; rel=&quot;longtimer&quot;&gt;longtimer&lt;/a&gt; Most simply said because it wasn&apos;t completed yet. It&apos;s being worked on as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=syhily&quot; class=&quot;user-hover&quot; rel=&quot;syhily&quot;&gt;syhily&lt;/a&gt; mentioned, but releases are not bound to open tickets unless they are considered Blockers (which this ticket isn&apos;t). &lt;/p&gt;</comment>
                            <comment id="17598045" author="longtimer" created="Tue, 30 Aug 2022 20:15:12 +0000"  >&lt;p&gt;Understood, unfortunately, it is a blocker for us, just not one for the larger Flink ecosystem.&lt;/p&gt;</comment>
                            <comment id="17605568" author="tison" created="Fri, 16 Sep 2022 01:36:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/pull/20725&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/20725&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13476406">FLINK-28934</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12cyw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>