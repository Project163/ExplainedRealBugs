<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6217] ContaineredTaskManagerParameters sets off heap memory size incorrectly</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6217</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bill.liu8904&quot; class=&quot;user-hover&quot; rel=&quot;bill.liu8904&quot;&gt;bill.liu8904&lt;/a&gt; for triaging the issue.&lt;/p&gt;

&lt;p&gt;When &lt;tt&gt;taskmanager.memory.off-heap&lt;/tt&gt; is disabled, we observed that the total memory that Flink allocates exceed the total memory of the container:&lt;/p&gt;

&lt;p&gt;For a 8G container the JobManager starts the container with the following parameter:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$JAVA_HOME/bin/java -Xms6072m -Xmx6072m -XX:MaxDirectMemorySize=6072m ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The total amount of heap memory plus the off-heap memory exceeds the total amount of memory of the container. As a result YARN occasionally kills the container.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13060196">FLINK-6217</key>
            <summary>ContaineredTaskManagerParameters sets off heap memory size incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wheat9">Haohui Mai</assignee>
                                    <reporter username="wheat9">Haohui Mai</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Mar 2017 23:21:24 +0000</created>
                <updated>Fri, 5 May 2017 11:49:21 +0000</updated>
                            <resolved>Fri, 5 May 2017 11:49:12 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15948128" author="githubbot" created="Wed, 29 Mar 2017 23:58:38 +0000"  >&lt;p&gt;GitHub user haohui opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3648&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6217&quot; title=&quot;ContaineredTaskManagerParameters sets off heap memory size incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6217&quot;&gt;&lt;del&gt;FLINK-6217&lt;/del&gt;&lt;/a&gt; ContaineredTaskManagerParameters sets off-heap memory size incorrectly&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/haohui/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/haohui/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6217&quot; title=&quot;ContaineredTaskManagerParameters sets off heap memory size incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6217&quot;&gt;&lt;del&gt;FLINK-6217&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3648.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3648.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3648&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6da863509775d6f371acdecd706db5f3a7181bf2&lt;br/&gt;
Author: Haohui Mai &amp;lt;wheat9@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-03-29T23:57:52Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6217&quot; title=&quot;ContaineredTaskManagerParameters sets off heap memory size incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6217&quot;&gt;&lt;del&gt;FLINK-6217&lt;/del&gt;&lt;/a&gt; ContaineredTaskManagerParameters sets off-heap memory size incorrectly.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15950414" author="githubbot" created="Fri, 31 Mar 2017 06:50:40 +0000"  >&lt;p&gt;Github user haohui commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3648&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The failed tests are being addressed in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6175&quot; title=&quot;HistoryServerTest.testFullArchiveLifecycle fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6175&quot;&gt;&lt;del&gt;FLINK-6175&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15953865" author="githubbot" created="Mon, 3 Apr 2017 17:22:57 +0000"  >&lt;p&gt;Github user haohui commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3648&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The test failure seems unrelated. Cannot reproduce locally.&lt;/p&gt;</comment>
                            <comment id="15978276" author="githubbot" created="Fri, 21 Apr 2017 08:13:55 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3648&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good fix, thanks @haohui &lt;/p&gt;

&lt;p&gt;    I was wondering - I am a trying to advocate fewer dependencies in Flink (there is always the problem of shading and conflicts) so if there is a way to do this without Guava, that&apos;d be great. I think `commons-lang3` has a joiner as well, or we might just add a joiner to Flink...&lt;/p&gt;</comment>
                            <comment id="15979671" author="githubbot" created="Sat, 22 Apr 2017 01:16:45 +0000"  >&lt;p&gt;Github user haohui commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3648&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Totally Agree &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; @StephanEwen please take another look.&lt;/p&gt;</comment>
                            <comment id="15981078" author="githubbot" created="Mon, 24 Apr 2017 12:20:46 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3648&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge this&lt;/p&gt;</comment>
                            <comment id="15995087" author="githubbot" created="Wed, 3 May 2017 15:35:05 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3648&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for your contribution @haohui and the review @StephanEwen. Changes look good to me. Merging this PR.&lt;/p&gt;</comment>
                            <comment id="15998213" author="till.rohrmann" created="Fri, 5 May 2017 11:49:12 +0000"  >&lt;p&gt;Fixed via b1f186425c3a15de9d7c0f66e3d3d4d3a7e6b259&lt;/p&gt;</comment>
                            <comment id="15998217" author="githubbot" created="Fri, 5 May 2017 11:49:21 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3648&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cz1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>