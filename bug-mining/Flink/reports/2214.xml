<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:31:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8522] DefaultOperatorStateBackend writes data in checkpoint that is never read.</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8522</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;In the DefaultOperatorStateBackend at line 283 we write in the checkpoint an int declaring the number of the operator states that we include in the checkpoint.&#160;&lt;/p&gt;

&lt;p&gt;This number is never read when restoring and this can lead to confusion and problems with backwards compatibility and/or extension of the types of state we&#160;support (e.g. broadcast state).&lt;/p&gt;

&lt;p&gt;There are two easy solutions, either remove the line and do not&#160;write the size, or make sure that we also read this number when restoring and simply ignore it.&lt;/p&gt;

&lt;p&gt;I would go for the first one, i.e. remove the line. What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=richtesn&quot; class=&quot;user-hover&quot; rel=&quot;richtesn&quot;&gt;richtesn&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt; ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13134482">FLINK-8522</key>
            <summary>DefaultOperatorStateBackend writes data in checkpoint that is never read.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkl0u">Kostas Kloudas</assignee>
                                    <reporter username="kkl0u">Kostas Kloudas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jan 2018 16:12:37 +0000</created>
                <updated>Wed, 7 Feb 2018 13:26:57 +0000</updated>
                            <resolved>Wed, 7 Feb 2018 13:26:57 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.4.1</fixVersion>
                                    <component>Runtime / State Backends</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16343580" author="srichter" created="Mon, 29 Jan 2018 16:23:13 +0000"  >&lt;p&gt;Option 1 looks good for me.&lt;/p&gt;</comment>
                            <comment id="16343584" author="tzulitai" created="Mon, 29 Jan 2018 16:26:05 +0000"  >&lt;p&gt;Don&apos;t we need to do both options?&lt;br/&gt;
 i.e.,&lt;br/&gt;
 1. We don&apos;t want to write that int anymore.&lt;br/&gt;
 2. Also, for compatibility reasons and for safeguarding ourselves, for previous savepoint versions, we want to make sure to read (but ignore) that int, so that additions we add elsewhere is not affected by it.&lt;/p&gt;

&lt;p&gt;Also separate question:&lt;br/&gt;
Does only 1.4.0 savepoints contain that extra un-used int?&lt;/p&gt;</comment>
                            <comment id="16343622" author="srichter" created="Mon, 29 Jan 2018 16:51:30 +0000"  >&lt;p&gt;I don&apos;t think that we ever need to read the int, it was never read as far as I can see because&#160;the code already starts seeking to read positions. That is why the int never had any effect, even if it was there but not consumed. But you should double check.&lt;/p&gt;</comment>
                            <comment id="16344764" author="kkl0u" created="Tue, 30 Jan 2018 09:47:39 +0000"  >&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt;&#160;: I think that if the person that extends the code in future versions by adding data after the MetaInfo, also implements the migration policy correctly (i.e. bump the VERSION), then we will have no problem, as when he restores from the savepoint, the correct `restore()` method will be called, and it will not try to read the newly added data.&lt;/p&gt;

&lt;p&gt;Given this, I will go on and simply remove the line.&lt;/p&gt;</comment>
                            <comment id="16345395" author="kkl0u" created="Tue, 30 Jan 2018 17:15:17 +0000"  >&lt;p&gt;There is a commit for this here: &lt;a href=&quot;https://github.com/apache/flink/pull/5230&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5230&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It is the first commit of that PR.&lt;/p&gt;</comment>
                            <comment id="16355429" author="kkl0u" created="Wed, 7 Feb 2018 13:26:57 +0000"  >&lt;p&gt;Merged with&#160;44211e346f43c931b6eb7106314a1686e25585d9&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3phr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>