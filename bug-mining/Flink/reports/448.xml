<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2294] Keyed State does not work with DOP=1</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2294</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When changing the DOP from 3 to 1 in StatefulOperatorTest.apiTest() the test fails. The reason seems to be that the element is not properly set when chaining is happening.&lt;/p&gt;

&lt;p&gt;Also, requiring this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;headContext.setNextInput(nextRecord);
streamOperator.processElement(nextRecord);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to be called seems rather fragile. Why not set the element in &lt;tt&gt;processElement()&lt;/tt&gt;. This would also make for cleaner encapsulation, since now all outside code must assume that operators have a &lt;tt&gt;StreamingRuntimeContext&lt;/tt&gt; on which they set the next element.&lt;/p&gt;

&lt;p&gt;The state/keyed state machinery seems dangerously undertested.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12841649">FLINK-2294</key>
            <summary>Keyed State does not work with DOP=1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gyfora">Gyula Fora</assignee>
                                    <reporter username="aljoscha">Aljoscha Krettek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jun 2015 10:32:47 +0000</created>
                <updated>Thu, 28 Feb 2019 11:15:23 +0000</updated>
                            <resolved>Tue, 30 Jun 2015 12:40:26 +0000</resolved>
                                    <version>0.10.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14608100" author="gyfora" created="Tue, 30 Jun 2015 10:41:20 +0000"  >&lt;p&gt;I don&apos;t understand what you mean by setting it in the processElement().&lt;/p&gt;

&lt;p&gt;That method is a part of an interface that the user implements.&lt;/p&gt;</comment>
                            <comment id="14608160" author="gyfora" created="Tue, 30 Jun 2015 11:41:20 +0000"  >&lt;p&gt;The issue was caused by having two output collectors in the output handles for copy/non-copy. And I forgot to set it in the second one. Code duplication = evil&lt;/p&gt;

&lt;p&gt;Im pushing a fix soon.&lt;/p&gt;</comment>
                            <comment id="14608178" author="aljoscha" created="Tue, 30 Jun 2015 12:04:28 +0000"  >&lt;p&gt;&lt;tt&gt;processElement&lt;/tt&gt; gets the element. That is the entry point into the operator. Why not set it inside the operator where the element is received?&lt;/p&gt;</comment>
                            <comment id="14608195" author="gyfora" created="Tue, 30 Jun 2015 12:13:27 +0000"  >&lt;p&gt;Every stream operator has a context and since the call to processElement happens outside of the operator implementation (inside the streamtask or collector) we can set it there. (thats 2 places)&lt;/p&gt;

&lt;p&gt;Setting it inside the processElement means that we need to set it in each operator implementation (Map, Filter etc) and the user needs to be aware of setting it in custom operator implementations (infinite places). &lt;/p&gt;

&lt;p&gt;So I will probably stick with the current solution.&lt;/p&gt;</comment>
                            <comment id="14608222" author="gyfora" created="Tue, 30 Jun 2015 12:40:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/commit/fef9f115838b3ba3d3769f8669ee251c2cd403c6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/fef9f115838b3ba3d3769f8669ee251c2cd403c6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14608236" author="rmetzger" created="Tue, 30 Jun 2015 12:52:21 +0000"  >&lt;p&gt;It would have been nice if you waited until you reached agreement with Aljoscha on the implementation, instead of just committing it to master, without a pull request.&lt;/p&gt;

&lt;p&gt;From my understanding, I agree with Guyla, that it is easier to set the nextInput outside the operator, instead of inside all operators.&lt;/p&gt;</comment>
                            <comment id="14608238" author="gyfora" created="Tue, 30 Jun 2015 12:54:54 +0000"  >&lt;p&gt;This was a trivial fix for the current implementation thats why I pushed it. Changing the implementation would mean that we need to add additional tests for the operators, which we can do afterwards if we decide that way.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gogf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>