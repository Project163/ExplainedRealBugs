<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:18:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1193] InvalidTypesException for Array[Array[Tuple2[Int, Double]]]</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1193</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The TypeExtractor cannot handle nested arrays with non-trivial element types. For example, the following code cannot be run&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;val input = env.fromCollection(List(1,2,3,4))
val mapped = input.map{
  id =&amp;gt; {
    val pair = (1,1.0)
    val a = Array(pair)
    val b = Array(a)
    b
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The resulting type Array[Array[Tuple2&lt;span class=&quot;error&quot;&gt;&amp;#91;Int, Double&amp;#93;&lt;/span&gt;]] cannot be extracted. It would be nice, if Flink supported these types.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12750749">FLINK-1193</key>
            <summary>InvalidTypesException for Array[Array[Tuple2[Int, Double]]]</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twalthr">Timo Walther</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Oct 2014 13:38:06 +0000</created>
                <updated>Tue, 3 Feb 2015 12:26:00 +0000</updated>
                            <resolved>Tue, 3 Feb 2015 12:25:59 +0000</resolved>
                                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14296788" author="githubbot" created="Thu, 29 Jan 2015 12:57:21 +0000"  >&lt;p&gt;GitHub user twalthr opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/348&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/348&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1193&quot; title=&quot;InvalidTypesException for Array[Array[Tuple2[Int, Double]]]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1193&quot;&gt;&lt;del&gt;FLINK-1193&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;java-api&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;scala-api&amp;#93;&lt;/span&gt; Complete support for multidimensional arrays&lt;/p&gt;

&lt;p&gt;    This PR introduces official support for multidimensional arrays. &lt;/p&gt;

&lt;p&gt;    It contains bug fixes for TypeExtractor and Serializer (see &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1193&quot; title=&quot;InvalidTypesException for Array[Array[Tuple2[Int, Double]]]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1193&quot;&gt;&lt;del&gt;FLINK-1193&lt;/del&gt;&lt;/a&gt;) as well as adds tests for Java and Scala API.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/twalthr/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/twalthr/flink&lt;/a&gt; MultidimensionalArrays&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/348.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/348.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #348&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9b66b6a56ceeb948f1cb6b6045dd9063ad33016f&lt;br/&gt;
Author: twalthr &amp;lt;twalthr@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-01-27T13:07:12Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1193&quot; title=&quot;InvalidTypesException for Array[Array[Tuple2[Int, Double]]]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1193&quot;&gt;&lt;del&gt;FLINK-1193&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;java-api&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;scala-api&amp;#93;&lt;/span&gt; Complete support for multidimensional arrays&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14296972" author="githubbot" created="Thu, 29 Jan 2015 15:05:42 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/348#discussion_r23773125&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/348#discussion_r23773125&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-tests/src/test/scala/org/apache/flink/api/scala/types/TypeInformationGenTest.scala &amp;#8212;&lt;br/&gt;
    @@ -255,6 +255,53 @@ class TypeInformationGenTest &lt;/p&gt;
{
         Assert.assertEquals(BasicTypeInfo.STRING_TYPE_INFO, tti.getTypeAt(0))
         Assert.assertEquals(BasicTypeInfo.STRING_TYPE_INFO, tti.getTypeAt(1))
       }
&lt;p&gt;    +  &lt;br/&gt;
    +  @Test&lt;br/&gt;
    +  def testMultidimensionalArrays(): Unit = {&lt;br/&gt;
    +    // Tuple&lt;br/&gt;
    +    &lt;/p&gt;
{
    +      val ti = createTypeInformation[Array[Array[(String, String)]]]
    +    
    +      Assert.assertTrue(ti.isInstanceOf[ObjectArrayTypeInfo[_, _]])
    +      val oati = ti.asInstanceOf[ObjectArrayTypeInfo[_, _]]
    +      Assert.assertTrue(oati.getComponentInfo.isInstanceOf[ObjectArrayTypeInfo[_, _]])
    +      val oati2 = oati.getComponentInfo.asInstanceOf[ObjectArrayTypeInfo[_, _]]
    +      Assert.assertTrue(oati2.getComponentInfo.isTupleType)
    +      val tti = oati2.getComponentInfo.asInstanceOf[TupleTypeInfoBase[_]]
    +      Assert.assertEquals(BasicTypeInfo.STRING_TYPE_INFO, tti.getTypeAt(0))
    +      Assert.assertEquals(BasicTypeInfo.STRING_TYPE_INFO, tti.getTypeAt(1))
    +    }
&lt;p&gt;    +    &lt;br/&gt;
    +    // primitives&lt;br/&gt;
    +    {&lt;br/&gt;
    +      val ti = createTypeInformation[Array[Array&lt;span class=&quot;error&quot;&gt;&amp;#91;Int&amp;#93;&lt;/span&gt;]]&lt;br/&gt;
    +    &lt;br/&gt;
    +      Assert.assertTrue(ti.isInstanceOf[ObjectArrayTypeInfo&lt;span class=&quot;error&quot;&gt;&amp;#91;_, _&amp;#93;&lt;/span&gt;])&lt;br/&gt;
    +      val oati = ti.asInstanceOf[ObjectArrayTypeInfo&lt;span class=&quot;error&quot;&gt;&amp;#91;_, _&amp;#93;&lt;/span&gt;]&lt;br/&gt;
    +      Assert.assertEquals(oati.getComponentInfo, PrimitiveArrayTypeInfo.INT_PRIMITIVE_ARRAY_TYPE_INFO)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This line is too long. That&apos;s why mvn verify fails.&lt;/p&gt;</comment>
                            <comment id="14303060" author="githubbot" created="Tue, 3 Feb 2015 10:41:48 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/348#discussion_r23995382&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/348#discussion_r23995382&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/typeutils/base/GenericArraySerializer.java &amp;#8212;&lt;br/&gt;
    @@ -72,7 +72,9 @@ public boolean isStateful() {&lt;br/&gt;
     		C[] copy = create(from.length);&lt;/p&gt;

&lt;p&gt;     		for (int i = 0; i &amp;lt; copy.length; i++) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;copy&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; = this.componentSerializer.copy(from&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;, this.componentSerializer.createInstance());&lt;br/&gt;
    +			if (from&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; != null) {&lt;br/&gt;
    +				copy&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; = this.componentSerializer.copy(from&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;, this.componentSerializer.createInstance());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This should not use the method with re-usable instance.&lt;/p&gt;</comment>
                            <comment id="14303064" author="githubbot" created="Tue, 3 Feb 2015 10:46:52 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/348#issuecomment-72630115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/348#issuecomment-72630115&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I will merge this, fixing the comment...&lt;/p&gt;</comment>
                            <comment id="14303176" author="githubbot" created="Tue, 3 Feb 2015 12:23:58 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/348&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/348&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14303183" author="stephanewen" created="Tue, 3 Feb 2015 12:26:00 +0000"  >&lt;p&gt;Fixed via 57b3e9f9e50705033200dcca0762a5a65d1aba60&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21m1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>