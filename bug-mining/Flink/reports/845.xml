<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:22:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3438] ExternalProcessRunner fails to detect ClassNotFound exception because of locale settings</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3438</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;ExternalProcessRunner tries to detect a ClassNotFoundException in the run process by comparing its output with a fixed string of test; this means that localized text reporting said exception is not interpreted as such.&lt;/p&gt;

&lt;p&gt;To reproduce:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;test the `ExternalProcessRunnerTest.testClassNotFound` setting the following system properties on the JVM: &lt;tt&gt;-Duser.country=IT -Duser.language=it&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12939869">FLINK-3438</key>
            <summary>ExternalProcessRunner fails to detect ClassNotFound exception because of locale settings</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanobaghino">Stefano Baghino</assignee>
                                    <reporter username="stefanobaghino">Stefano Baghino</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Feb 2016 16:59:55 +0000</created>
                <updated>Thu, 28 Feb 2019 13:21:00 +0000</updated>
                            <resolved>Tue, 23 Feb 2016 14:25:33 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15150782" author="stefanobaghino" created="Wed, 17 Feb 2016 17:01:05 +0000"  >&lt;p&gt;This is my temporary fix to make the tests work: &lt;a href=&quot;https://github.com/radicalbit/flink/commit/23183d27de3368342bfe570bc37513dd4bbf5424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/radicalbit/flink/commit/23183d27de3368342bfe570bc37513dd4bbf5424&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If this solution is acceptable (but honestly I doubt it), I can open a PR.&lt;/p&gt;</comment>
                            <comment id="15150823" author="aljoscha" created="Wed, 17 Feb 2016 17:26:20 +0000"  >&lt;p&gt;It&apos;s good we have people running stuff with different locales... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I could not yet come up with a good solution. The problem is that the ClassNotFoundException is thrown before our own code even runs in the external process. So maybe there&apos;s nothing we can do about it except setting the locale like you did in your workaround.&lt;/p&gt;</comment>
                            <comment id="15151976" author="githubbot" created="Thu, 18 Feb 2016 08:59:46 +0000"  >&lt;p&gt;GitHub user stefanobaghino opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1665&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1665&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3438&quot; title=&quot;ExternalProcessRunner fails to detect ClassNotFound exception because of locale settings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3438&quot;&gt;&lt;del&gt;FLINK-3438&lt;/del&gt;&lt;/a&gt; ExternalProcessRunner fails to detect ClassNotFound exception because of locale settings&lt;/p&gt;

&lt;p&gt;    This should be regarded as a temporary solution to this issue in particular. See the discussion going on at [&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3438&quot; title=&quot;ExternalProcessRunner fails to detect ClassNotFound exception because of locale settings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3438&quot;&gt;&lt;del&gt;FLINK-3438&lt;/del&gt;&lt;/a&gt;].&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3438&quot; title=&quot;ExternalProcessRunner fails to detect ClassNotFound exception because of locale settings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3438&quot;&gt;&lt;del&gt;FLINK-3438&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3438&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-3438&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/radicalbit/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/radicalbit/flink&lt;/a&gt; 3438&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1665.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1665.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1665&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 12b6659542c7deafc05ef36cfcd9d7ac99681164&lt;br/&gt;
Author: Stefano Baghino &amp;lt;stefano@baghino.me&amp;gt;&lt;br/&gt;
Date:   2016-02-17T16:58:53Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3438&quot; title=&quot;ExternalProcessRunner fails to detect ClassNotFound exception because of locale settings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3438&quot;&gt;&lt;del&gt;FLINK-3438&lt;/del&gt;&lt;/a&gt; ExternalProcessRunner fails to detect ClassNotFound exception because of locale settings&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15152071" author="githubbot" created="Thu, 18 Feb 2016 10:07:17 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1665#issuecomment-185636882&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1665#issuecomment-185636882&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Anyone against merging this as a (maybe temporary) solution?&lt;/p&gt;
</comment>
                            <comment id="15152330" author="githubbot" created="Thu, 18 Feb 2016 13:50:36 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1665#issuecomment-185732111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1665#issuecomment-185732111&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Should be okay for the tests.&lt;/p&gt;

&lt;p&gt;    Just make sure you don&apos;t try to parse the returned stderr stream, but simply take non-empty stream as an exception with a copy of the stderr data.&lt;/p&gt;</comment>
                            <comment id="15152413" author="githubbot" created="Thu, 18 Feb 2016 14:59:00 +0000"  >&lt;p&gt;Github user stefanobaghino commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1665#issuecomment-185756748&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1665#issuecomment-185756748&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m going into the direction proposed by @StephanEwen, the change looks trivial.&lt;/p&gt;</comment>
                            <comment id="15155701" author="xazax" created="Sat, 20 Feb 2016 17:50:27 +0000"  >&lt;p&gt;I had similar problems due to the following check: &lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-runtime/src/test/java/org/apache/flink/runtime/jobmanager/JobManagerStartupTest.java#L92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/master/flink-runtime/src/test/java/org/apache/flink/runtime/jobmanager/JobManagerStartupTest.java#L92&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The local workaround in my case was to use LANG=en_us when I was running the test suite.&lt;/p&gt;</comment>
                            <comment id="15157212" author="githubbot" created="Mon, 22 Feb 2016 16:13:49 +0000"  >&lt;p&gt;Github user stefanobaghino commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1665#issuecomment-187248829&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1665#issuecomment-187248829&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Running the test locally with the same `PROFILE` as the failing tests do not yield the same results (i.e. all tests pass). Is there a way to determine if this was just a hiccup in the CI environment? Meanwhile, I&apos;m rerunning the tests on our fork.&lt;/p&gt;</comment>
                            <comment id="15157221" author="githubbot" created="Mon, 22 Feb 2016 16:18:24 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1665#issuecomment-187250281&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1665#issuecomment-187250281&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The test failure looks unrelated to this fix.&lt;/p&gt;

&lt;p&gt;    +1 to merge this&lt;/p&gt;</comment>
                            <comment id="15158585" author="githubbot" created="Tue, 23 Feb 2016 09:04:19 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1665#issuecomment-187608866&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1665#issuecomment-187608866&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for your contribution @stefanobaghino. Will merge it.&lt;/p&gt;</comment>
                            <comment id="15158844" author="stefanobaghino" created="Tue, 23 Feb 2016 13:12:14 +0000"  >&lt;p&gt;I&apos;m starting to think it would be better to make a search for all the calls to &lt;tt&gt;contains&lt;/tt&gt; in the code. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15158938" author="githubbot" created="Tue, 23 Feb 2016 14:22:19 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1665&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1665&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15158951" author="till.rohrmann" created="Tue, 23 Feb 2016 14:25:33 +0000"  >&lt;p&gt;Fixed via 8b29c14325e90f575dc360caed9111d6218924ad&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sycv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>