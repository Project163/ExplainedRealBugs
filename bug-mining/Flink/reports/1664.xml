<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5070] Unable to use Scala&apos;s BeanProperty with classes</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5070</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When using Scala class with with property (both var and val) annotated as BeanProperty, throws an exception &lt;tt&gt;java.lang.IllegalStateException: Detected more than one getter&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The simple code which follows throws that exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SomeClass(@BeanProperty &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; prop: Int)

object SampleBeanProperty {
    def main(args: Array[&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;]): Unit = {
        val env = StreamExecutionEnvironment.createLocalEnvironment()

        &lt;span class=&quot;code-comment&quot;&gt;// Create a DataSet from a list of elements
&lt;/span&gt;        env.fromElements(1,2)
            .map(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SomeClass(_))
            .print

        env.execute()
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Full exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.IllegalStateException: Detected more than one setter
	at org.apache.flink.api.java.typeutils.TypeExtractor.isValidPojoField(TypeExtractor.java:1646)
	at org.apache.flink.api.java.typeutils.TypeExtractor.analyzePojo(TypeExtractor.java:1692)
	at org.apache.flink.api.java.typeutils.TypeExtractor.privateGetForClass(TypeExtractor.java:1580)
	at org.apache.flink.api.java.typeutils.TypeExtractor.privateGetForClass(TypeExtractor.java:1479)
	at org.apache.flink.api.java.typeutils.TypeExtractor.createTypeInfoWithTypeHierarchy(TypeExtractor.java:737)
	at org.apache.flink.api.java.typeutils.TypeExtractor.privateCreateTypeInfo(TypeExtractor.java:543)
	at org.apache.flink.api.java.typeutils.TypeExtractor.createTypeInfo(TypeExtractor.java:497)
	at org.apache.flink.api.java.typeutils.TypeExtractor.createTypeInfo(TypeExtractor.java:493)
	at SampleBeanProperty$.main(SampleBeanProperty.scala:18)
	at SampleBeanProperty.main(SampleBeanProperty.scala)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the class is changed into case class, code with BeanProperty works fine.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13020773">FLINK-5070</key>
            <summary>Unable to use Scala&apos;s BeanProperty with classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twalthr">Timo Walther</assignee>
                                    <reporter username="jsnowacki">Jakub Nowacki</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Nov 2016 11:39:32 +0000</created>
                <updated>Thu, 28 Feb 2019 13:21:35 +0000</updated>
                            <resolved>Tue, 9 May 2017 18:53:09 +0000</resolved>
                                    <version>1.1.3</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>API / Scala</component>
                    <component>API / Type Serialization System</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15867581" author="githubbot" created="Wed, 15 Feb 2017 10:08:26 +0000"  >&lt;p&gt;GitHub user twalthr opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3318&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5070&quot; title=&quot;Unable to use Scala&amp;#39;s BeanProperty with classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5070&quot;&gt;&lt;del&gt;FLINK-5070&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;types&amp;#93;&lt;/span&gt; Unable to use Scala&apos;s BeanProperty with classes&lt;/p&gt;

&lt;p&gt;    This PR fixes issues with `@BeanProperty` annotation. The problem is that `var` generates Scala-style getters/setters and the annotation generates Java-style getters/setters. Right now Flink only supports one style in a POJO. I don&apos;t know why we have this restriction. I removed them.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/twalthr/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/twalthr/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5070&quot; title=&quot;Unable to use Scala&amp;#39;s BeanProperty with classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5070&quot;&gt;&lt;del&gt;FLINK-5070&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3318.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3318.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3318&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 552e708a713df6ed9fe65f508771e56b0dbcd50b&lt;br/&gt;
Author: twalthr &amp;lt;twalthr@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-02-15T10:05:38Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5070&quot; title=&quot;Unable to use Scala&amp;#39;s BeanProperty with classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5070&quot;&gt;&lt;del&gt;FLINK-5070&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;types&amp;#93;&lt;/span&gt; Unable to use Scala&apos;s BeanProperty with classes&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15867879" author="githubbot" created="Wed, 15 Feb 2017 14:03:44 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3318#discussion_r101282565&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3318#discussion_r101282565&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/java/typeutils/TypeExtractor.java &amp;#8212;&lt;br/&gt;
    @@ -1723,20 +1720,17 @@ private boolean isValidPojoField(Field f, Class&amp;lt;?&amp;gt; clazz, ArrayList&amp;lt;Type&amp;gt; typeHi&lt;br/&gt;
     					// return type is void.&lt;br/&gt;
     					m.getReturnType().equals(Void.TYPE)&lt;br/&gt;
     				) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if(hasSetter) 
{
    -						throw new IllegalStateException(&quot;Detected more than one setter&quot;);
    -					}
&lt;p&gt;     					hasSetter = true;&lt;br/&gt;
     				}&lt;br/&gt;
     			}&lt;br/&gt;
     			if(hasGetter &amp;amp;&amp;amp; hasSetter) &lt;/p&gt;
{
     				return true;
     			}
&lt;p&gt; else {&lt;br/&gt;
     				if(!hasGetter) {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;LOG.debug(clazz+&quot; does not contain a getter for field &quot;+f.getName() );&lt;br/&gt;
    +					LOG.info(clazz+&quot; does not contain a getter for field &quot;+f.getName() );
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Does it make sense to log this on `info`? That can be a lot of log output for programs with many types...&lt;/p&gt;</comment>
                            <comment id="15867881" author="githubbot" created="Wed, 15 Feb 2017 14:04:14 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3318&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I cannot recall a reason why we allow only one getter/setter.&lt;/p&gt;

&lt;p&gt;    I have a comment on the logging, though...&lt;/p&gt;</comment>
                            <comment id="15867991" author="githubbot" created="Wed, 15 Feb 2017 15:14:00 +0000"  >&lt;p&gt;Github user twalthr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3318#discussion_r101299257&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3318#discussion_r101299257&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/java/typeutils/TypeExtractor.java &amp;#8212;&lt;br/&gt;
    @@ -1723,20 +1720,17 @@ private boolean isValidPojoField(Field f, Class&amp;lt;?&amp;gt; clazz, ArrayList&amp;lt;Type&amp;gt; typeHi&lt;br/&gt;
     					// return type is void.&lt;br/&gt;
     					m.getReturnType().equals(Void.TYPE)&lt;br/&gt;
     				) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if(hasSetter) 
{
    -						throw new IllegalStateException(&quot;Detected more than one setter&quot;);
    -					}
&lt;p&gt;     					hasSetter = true;&lt;br/&gt;
     				}&lt;br/&gt;
     			}&lt;br/&gt;
     			if(hasGetter &amp;amp;&amp;amp; hasSetter) &lt;/p&gt;
{
     				return true;
     			}
&lt;p&gt; else {&lt;br/&gt;
     				if(!hasGetter) {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;LOG.debug(clazz+&quot; does not contain a getter for field &quot;+f.getName() );&lt;br/&gt;
    +					LOG.info(clazz+&quot; does not contain a getter for field &quot;+f.getName() );
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I would say yes. It is very hard for users to figure out why a object is not a POJO. Information about the problematic field is helpful. This message will occur as often as `clazz is not a valid POJO.`, so one output per non-POJO.&lt;/p&gt;</comment>
                            <comment id="16003282" author="githubbot" created="Tue, 9 May 2017 18:49:06 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3318&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16003295" author="greghogan" created="Tue, 9 May 2017 18:53:09 +0000"  >&lt;p&gt;master: c90b6da5ff845e55c52150a3c6f0b7192959a40e&lt;br/&gt;
release-1.3: 949d16e8a00656fa1ee1b235c8ca704331b09f55&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36c4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>