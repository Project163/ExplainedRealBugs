<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:29:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-7137] Flink table API defaults top level fields as nullable and all nested fields within CompositeType as non-nullable</title>
                <link>https://issues.apache.org/jira/browse/FLINK-7137</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Right now FlinkTypeFactory does conversion between Flink TypeInformation to Calcite RelDataType by assuming the following: &lt;/p&gt;

&lt;p&gt;All top level fields will be set to nullable and all nested fields within CompositeRelDataType and GenericRelDataType will be set to Calcite default (which is non-nullable). &lt;/p&gt;

&lt;p&gt;This triggers Calcite SQL optimization engine drop all `IS NOT NULL` clause on nested fields, and would not be able to optimize when top level fields were actually non-nullable.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13085629">FLINK-7137</key>
            <summary>Flink table API defaults top level fields as nullable and all nested fields within CompositeType as non-nullable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rongr">Rong Rong</assignee>
                                    <reporter username="rongr">Rong Rong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Jul 2017 23:50:37 +0000</created>
                <updated>Thu, 19 Sep 2019 19:16:15 +0000</updated>
                            <resolved>Mon, 24 Jul 2017 12:35:23 +0000</resolved>
                                    <version>1.3.1</version>
                                    <fixVersion>1.3.2</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16083048" author="fhueske" created="Tue, 11 Jul 2017 21:43:58 +0000"  >&lt;p&gt;Thanks for reporting this issue.&lt;br/&gt;
I don&apos;t think this behavior is intended and should be fixed by setting nested fields to nullable as well.&lt;/p&gt;

&lt;p&gt;What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16083502" author="twalthr" created="Wed, 12 Jul 2017 06:17:51 +0000"  >&lt;p&gt;Yes, this should be fixed. Everything should be nullable for now.&lt;/p&gt;</comment>
                            <comment id="16085179" author="githubbot" created="Thu, 13 Jul 2017 04:52:14 +0000"  >&lt;p&gt;GitHub user walterddr opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4314&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7137&quot; title=&quot;Flink table API defaults top level fields as nullable and all nested fields within CompositeType as non-nullable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7137&quot;&gt;&lt;del&gt;FLINK-7137&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Flink TableAPI supports nested CompositeType mapped to nullable calcite RelDataType by default&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/walterddr/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/walterddr/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7137&quot; title=&quot;Flink table API defaults top level fields as nullable and all nested fields within CompositeType as non-nullable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7137&quot;&gt;&lt;del&gt;FLINK-7137&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4314.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4314.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4314&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 93c475b7da114a3022eb2b6fb8b46ffe8a1a6997&lt;br/&gt;
Author: Rong Rong &amp;lt;rongr@uber.com&amp;gt;&lt;br/&gt;
Date:   2017-07-13T04:29:16Z&lt;/p&gt;

&lt;p&gt;    Fixing nested fields not mapped to nullable calcite RelDataType by default&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16087038" author="githubbot" created="Fri, 14 Jul 2017 08:38:47 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4314&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the PR @walterddr.&lt;br/&gt;
    This looks good to me. &lt;br/&gt;
    What do you think @twalthr?&lt;/p&gt;</comment>
                            <comment id="16093188" author="githubbot" created="Wed, 19 Jul 2017 14:43:18 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4314&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I tried to improve the stability regarding nullable types. This should fix &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7177&quot; title=&quot;DataSetAggregateWithNullValuesRule fails creating null literal for non-nullable type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7177&quot;&gt;&lt;del&gt;FLINK-7177&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7137&quot; title=&quot;Flink table API defaults top level fields as nullable and all nested fields within CompositeType as non-nullable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7137&quot;&gt;&lt;del&gt;FLINK-7137&lt;/del&gt;&lt;/a&gt;. It ensures that all types have the correct nullability. By default, types are always nullable. If they are not nullable, than we know it for sure.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/compare/master...twalthr:FLINK-7137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/compare/master...twalthr:FLINK-7137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    What do you think? @walterddr @fhueske &lt;/p&gt;</comment>
                            <comment id="16093789" author="githubbot" created="Wed, 19 Jul 2017 21:10:54 +0000"  >&lt;p&gt;Github user walterddr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4314&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @twalthr Thank you for the suggestion, yeah I think this nullable default to false issue will pop up soon somewhere else, might as well just resolve them all together. I incorporated your suggestions and also add some tests so that the problem could be captured during unitest instead of ITCases. Let me know what your thoughts on this are @fhueske @twalthr &lt;/p&gt;</comment>
                            <comment id="16098184" author="githubbot" created="Mon, 24 Jul 2017 10:30:16 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4314&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the tests @walterddr. I will merge this now...&lt;/p&gt;</comment>
                            <comment id="16098260" author="githubbot" created="Mon, 24 Jul 2017 12:08:04 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4314&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16098298" author="twalthr" created="Mon, 24 Jul 2017 12:35:23 +0000"  >&lt;p&gt;Fixed in 1.4.0: 2d1e08a02d84f8d7cb2734e09741eae72bf63b7d, 7aa115658b23c19fbcc8e3d1d83113608ebd7ce7, c0bad3b80d6fe67e43bc1a5d3bebbd98479e3d76&lt;/p&gt;

&lt;p&gt;Fixed in 1.3.2: be8ca8a384604a2fb2bd74886f452e4a61ce9cfb, 8c87c44692bc27fb8018adf587715a9488947799&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3h9jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>