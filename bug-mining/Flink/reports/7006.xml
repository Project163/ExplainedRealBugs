<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:16:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-31652] Flink should handle the delete event if the pod was deleted while pending</title>
                <link>https://issues.apache.org/jira/browse/FLINK-31652</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I found that in kubernetes deployment, if the taskmanager pod is deleted in &apos;Pending&apos; phase, the flink job will get stuck and keep waiting for the pod scheduled. We can reproduce this issue with the &apos;kubectl delete pod&apos; command to delete the pod when it is in the pending phase.&lt;br/&gt;
&#160;&lt;br/&gt;
The cause reason is that the pod status will not be updated in time in this case, so the KubernetesResourceManagerDriver won&apos;t detect the pod is terminated, and I also verified this by logging the pod status in KubernetesPod#isTerminated(), and it shows as follows.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isTerminated() {
    log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;pod status: &quot;&lt;/span&gt; + getInternalResource().getStatus());
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getInternalResource().getStatus() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; podFailed =
                PodPhase.Failed.name().equals(getInternalResource().getStatus().getPhase());
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; containersFailed =
                getInternalResource().getStatus().getContainerStatuses().stream()
                        .anyMatch(
                                e -&amp;gt;
                                        e.getState() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
                                                &amp;amp;&amp;amp; e.getState().getTerminated() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; containersFailed || podFailed;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the case, this function will return false because `containersFailed` and `podFailed` are both false.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
PodStatus(conditions=[PodCondition(lastProbeTime=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, lastTransitionTime=2023-03-28T12:35:10Z, reason=Unschedulable, status=False, type=PodScheduled, additionalProperties={})], containerStatuses=[], ephemeralContainerStatuses=[], hostIP=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, initContainerStatuses=[], message=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, nominatedNodeName=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, phase=Pending, podIP=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, podIPs=[], qosClass=Guaranteed, reason=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, startTime=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, additionalProperties={})&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13530560">FLINK-31652</key>
            <summary>Flink should handle the delete event if the pod was deleted while pending</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xiasun">xingbe</assignee>
                                    <reporter username="xiasun">xingbe</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 29 Mar 2023 06:57:52 +0000</created>
                <updated>Mon, 3 Apr 2023 08:05:32 +0000</updated>
                            <resolved>Mon, 3 Apr 2023 08:05:32 +0000</resolved>
                                    <version>1.17.0</version>
                    <version>1.16.1</version>
                                    <fixVersion>1.16.2</fixVersion>
                    <fixVersion>1.18.0</fixVersion>
                    <fixVersion>1.17.1</fixVersion>
                                    <component>Deployment / Kubernetes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17706247" author="xiasun" created="Wed, 29 Mar 2023 07:10:35 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xtsong&quot; class=&quot;user-hover&quot; rel=&quot;xtsong&quot;&gt;xtsong&lt;/a&gt; , could you please help to take a look at this ticket in your free time, thanks!&lt;/p&gt;</comment>
                            <comment id="17706356" author="xintongsong" created="Wed, 29 Mar 2023 11:24:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiasun&quot; class=&quot;user-hover&quot; rel=&quot;xiasun&quot;&gt;xiasun&lt;/a&gt;, thanks for reporting this. I think this is a valid issue.&lt;/p&gt;

&lt;p&gt;Would you like to open a pull request to fix this?&lt;/p&gt;</comment>
                            <comment id="17706374" author="xiasun" created="Wed, 29 Mar 2023 12:23:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xtsong&quot; class=&quot;user-hover&quot; rel=&quot;xtsong&quot;&gt;xtsong&lt;/a&gt; Thanks for the reply! I am glad to take this ticket.&lt;/p&gt;</comment>
                            <comment id="17706651" author="xintongsong" created="Thu, 30 Mar 2023 01:10:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiasun&quot; class=&quot;user-hover&quot; rel=&quot;xiasun&quot;&gt;xiasun&lt;/a&gt; You are assigned. Please go ahead.&lt;/p&gt;</comment>
                            <comment id="17707806" author="xintongsong" created="Mon, 3 Apr 2023 08:05:32 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;master (1.18): 9e83858c7dc309f272a03c62b1e295d192acaf89&lt;/li&gt;
	&lt;li&gt;release-1.17: 98d8e2712feb5077c4b35698cea5ecbdd72e4c06&lt;/li&gt;
	&lt;li&gt;release-1.16: 99c025b438a99eb8ddcf8214aba5f285972106ca&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1gxn4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>