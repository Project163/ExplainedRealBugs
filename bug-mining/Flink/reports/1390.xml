<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:26:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4890] FileInputFormatTest#testExcludeFiles fails on Windows OS</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4890</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Running the mentioned test leads to an exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Illegal &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; &amp;lt;:&amp;gt; at index 2: /C:/dev/cygwin64/tmp/junit3838395086498044255/another_file.bin
java.nio.file.InvalidPathException: Illegal &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; &amp;lt;:&amp;gt; at index 2: /C:/dev/cygwin64/tmp/junit3838395086498044255/anot                                                                                                                     her_file.bin
        at sun.nio.fs.WindowsPathParser.normalize(WindowsPathParser.java:182)
        at sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:153)
        at sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:77)
        at sun.nio.fs.WindowsPath.parse(WindowsPath.java:94)
        at sun.nio.fs.WindowsFileSystem.getPath(WindowsFileSystem.java:255)
        at java.nio.file.Paths.get(Paths.java:84)
        at org.apache.flink.api.common.io.GlobFilePathFilter.filterPath(GlobFilePathFilter.java:95)
        at org.apache.flink.api.common.io.FileInputFormat.acceptFile(FileInputFormat.java:644)
        at org.apache.flink.api.common.io.FileInputFormat.addFilesInDir(FileInputFormat.java:600)
        at org.apache.flink.api.common.io.FileInputFormat.createInputSplits(FileInputFormat.java:476)
        at org.apache.flink.api.common.io.FileInputFormatTest.testReadMultiplePatterns(FileInputFormatTest.java:362)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is that we are given a flink Path, which is then converted to a String and given to the nio FIleSystem. The passed path is thus /C:/..., which nio can&apos;t work with.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10&lt;/p&gt;</environment>
        <key id="13014655">FLINK-4890</key>
            <summary>FileInputFormatTest#testExcludeFiles fails on Windows OS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Oct 2016 08:32:08 +0000</created>
                <updated>Thu, 28 Feb 2019 13:46:07 +0000</updated>
                            <resolved>Fri, 6 Jan 2017 09:57:34 +0000</resolved>
                                    <version>1.1.3</version>
                                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>API / DataSet</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15644449" author="boris_osipov" created="Mon, 7 Nov 2016 15:18:33 +0000"  >&lt;p&gt;I&apos;ve reproduced this issue on my environment.&lt;br/&gt;
Also, I found that AvroOutputFormatTest#testCompression fails on Windows by the same reason.&lt;/p&gt;

&lt;p&gt;I&apos;d like to fix both problems. There are two ways to do it:&lt;br/&gt;
1) Expand Flink Path with a new method for converting windows path to nio path(just remove the leading slash)&lt;br/&gt;
2) Handle and convert windows path&apos;s in GlobFilePathFilter and in other places&lt;/p&gt;

&lt;p&gt;What should I do? Could you please assign issue to me?&lt;/p&gt;</comment>
                            <comment id="15644457" author="boris_osipov" created="Mon, 7 Nov 2016 15:20:55 +0000"  >&lt;p&gt;It&apos;s related to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3677&quot; title=&quot;FileInputFormat: Allow to specify include/exclude file name patterns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3677&quot;&gt;&lt;del&gt;FLINK-3677&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15801124" author="stephanewen" created="Thu, 5 Jan 2017 11:32:51 +0000"  >&lt;p&gt;Aside from the issues on local windows machines:&lt;/p&gt;

&lt;p&gt;I am wondering if the complete approach of the &lt;tt&gt;GlobFilePathFilter&lt;/tt&gt; is not fundamentally flawed.&lt;br/&gt;
It always works based what the machine&apos;s standard OS FileSystem type is. So, a windows machine running a Flink JobManager trying to filter HDFS files (HDFS being more unix like) can simply not work.&lt;/p&gt;

&lt;p&gt;What do others think?&lt;/p&gt;</comment>
                            <comment id="15801205" author="zentol" created="Thu, 5 Jan 2017 12:12:21 +0000"  >&lt;p&gt;It does kind of work.&lt;/p&gt;

&lt;p&gt;When matching paths we ignore the schema of the path; so given an include pattern &quot;/*/text&quot; a path like &quot;hdfs:/my/text&quot; would be accepted. (since it is reduced to &quot;/my/text&quot; which matches the pattern)&lt;/p&gt;

&lt;p&gt;However, if the pattern would be &quot;hdfs:/*/text&quot; then the matching would fail; but not just on windows but on every OS.&lt;/p&gt;

&lt;p&gt;If we were to fix this however, and include the schema in the matching process, then it would indeed fail by default on Windows for anything but local paths.&lt;/p&gt;</comment>
                            <comment id="15801410" author="githubbot" created="Thu, 5 Jan 2017 13:59:37 +0000"  >&lt;p&gt;GitHub user StephanEwen opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3064&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3064&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4890&quot; title=&quot;FileInputFormatTest#testExcludeFiles fails on Windows OS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4890&quot;&gt;&lt;del&gt;FLINK-4890&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;core&amp;#93;&lt;/span&gt; Make GlobFilePathFilter work on Windows&lt;/p&gt;

&lt;p&gt;    When extracting the file path from the Flink `Path` object, this de-slashifies the path, if it is a slashed windows path.&lt;/p&gt;

&lt;p&gt;    This is analogous to the logic in `Path.toString()`.&lt;/p&gt;

&lt;p&gt;    The commit contains a minor cleanup in `FilePathFilter` to improve comments and fix serializability warnings.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/StephanEwen/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StephanEwen/incubator-flink&lt;/a&gt; glob_win&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3064.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3064.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3064&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2d099cc2f3e18b081ba59ca863a562be636cab7a&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-01-05T13:44:00Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4890&quot; title=&quot;FileInputFormatTest#testExcludeFiles fails on Windows OS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4890&quot;&gt;&lt;del&gt;FLINK-4890&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;core&amp;#93;&lt;/span&gt; Make GlobFilePathFilter work on Windows&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15801430" author="githubbot" created="Thu, 5 Jan 2017 14:08:14 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3064&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3064&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I can confirm that the test no longer fails on Windows.&lt;/p&gt;</comment>
                            <comment id="15801447" author="githubbot" created="Thu, 5 Jan 2017 14:15:17 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3064&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3064&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Okay, will merge this then.&lt;/p&gt;

&lt;p&gt;    BTW: I think the include/exclude logic is faulty. If a path matches no include pattern, it is still accepted.&lt;/p&gt;</comment>
                            <comment id="15801473" author="githubbot" created="Thu, 5 Jan 2017 14:23:42 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3064&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3064&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    If no include filter matches then filterPath should return true, in which case it is excluded.&lt;/p&gt;</comment>
                            <comment id="15801653" author="githubbot" created="Thu, 5 Jan 2017 15:32:18 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3064#discussion_r94788199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3064#discussion_r94788199&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/core/fs/Path.java &amp;#8212;&lt;br/&gt;
    @@ -274,24 +274,6 @@ private String normalizePath(String path) {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Checks if the provided path string contains a windows drive letter.&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @param path&lt;/li&gt;
	&lt;li&gt;*        the path to check&lt;/li&gt;
	&lt;li&gt;* @param slashed&lt;/li&gt;
	&lt;li&gt;*        &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt; to indicate the first character of the string is a slash, &amp;lt;code&amp;gt;false&amp;lt;/code&amp;gt; otherwise&lt;/li&gt;
	&lt;li&gt;* @return &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt; if the path string contains a windows drive letter, &amp;lt;code&amp;gt;false&amp;lt;/code&amp;gt; otherwise&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;private boolean hasWindowsDrive(String path, boolean slashed) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    apparently this breaks binary compatibility.&lt;/p&gt;</comment>
                            <comment id="15801690" author="githubbot" created="Thu, 5 Jan 2017 15:45:59 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3064&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3064&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    You are right, the logic is the other way around than a predicate like in `FilterFunction`.&lt;/p&gt;</comment>
                            <comment id="15801696" author="githubbot" created="Thu, 5 Jan 2017 15:47:48 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3064#discussion_r94791293&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3064#discussion_r94791293&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/core/fs/Path.java &amp;#8212;&lt;br/&gt;
    @@ -274,24 +274,6 @@ private String normalizePath(String path) {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Checks if the provided path string contains a windows drive letter.&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @param path&lt;/li&gt;
	&lt;li&gt;*        the path to check&lt;/li&gt;
	&lt;li&gt;* @param slashed&lt;/li&gt;
	&lt;li&gt;*        &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt; to indicate the first character of the string is a slash, &amp;lt;code&amp;gt;false&amp;lt;/code&amp;gt; otherwise&lt;/li&gt;
	&lt;li&gt;* @return &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt; if the path string contains a windows drive letter, &amp;lt;code&amp;gt;false&amp;lt;/code&amp;gt; otherwise&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;private boolean hasWindowsDrive(String path, boolean slashed) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    It does not really break it (previously private methods should not be considered), but the plugin complains anyways.&lt;br/&gt;
    Will slightly rewrite this to make the plugin happy.&lt;/p&gt;</comment>
                            <comment id="15801713" author="githubbot" created="Thu, 5 Jan 2017 15:57:09 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3064&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3064&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Manually merging...&lt;/p&gt;</comment>
                            <comment id="15801714" author="githubbot" created="Thu, 5 Jan 2017 15:57:09 +0000"  >&lt;p&gt;Github user StephanEwen closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3064&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3064&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15804160" author="stephanewen" created="Fri, 6 Jan 2017 09:57:34 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;1.2.0 via fb48c3b4cbc5a186cb7b812c8d05833c5852b385&lt;/li&gt;
	&lt;li&gt;1.3.0 via 15bd1f128f3d2ae1cad68e89355f9c5045b8e830&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12954339">FLINK-3677</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 45 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35ae7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>