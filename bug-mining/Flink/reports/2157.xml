<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:31:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6951] Incompatible versions of httpcomponents jars for Flink kinesis connector</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6951</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;In the following thread, Bowen reported incompatible versions of httpcomponents jars for Flink kinesis connector :&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://search-hadoop.com/m/Flink/VkLeQN2m5EySpb1?subj=Re+Incompatible+Apache+Http+lib+in+Flink+kinesis+connector&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://search-hadoop.com/m/Flink/VkLeQN2m5EySpb1?subj=Re+Incompatible+Apache+Http+lib+in+Flink+kinesis+connector&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We should find a solution such that users don&apos;t have to change dependency version(s) themselves when building Flink kinesis connector.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13081000">FLINK-6951</key>
            <summary>Incompatible versions of httpcomponents jars for Flink kinesis connector</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="phoenixjiangnan">Bowen Li</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Jun 2017 04:13:36 +0000</created>
                <updated>Mon, 12 Mar 2018 15:28:41 +0000</updated>
                            <resolved>Mon, 12 Mar 2018 15:28:41 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.3.4</fixVersion>
                    <fixVersion>1.4.1</fixVersion>
                    <fixVersion>1.5.0</fixVersion>
                                    <component>Connectors / Kinesis</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16055136" author="tzulitai" created="Tue, 20 Jun 2017 04:49:11 +0000"  >&lt;p&gt;I&apos;ve replied to the thread. The problem is that the httpcomponents dependency in Flink may have not been shaded properly. It should be shaded, unless it was incorrectly built by the user, or the binary distribution simply wasn&apos;t built correctly by us.&lt;/p&gt;

&lt;p&gt;Also, please remember to set the &quot;Components&quot; / &quot;Affects Versions&quot; field appropriately. That would help when doing JIRA searches.&lt;/p&gt;</comment>
                            <comment id="16056442" author="phoenixjiangnan" created="Tue, 20 Jun 2017 20:58:17 +0000"  >&lt;p&gt;Original email thread: &lt;a href=&quot;http://apache-flink-mailing-list-archive.1008284.n3.nabble.com/Incompatible-Apache-Http-lib-in-Flink-kinesis-connector-td18202.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-flink-mailing-list-archive.1008284.n3.nabble.com/Incompatible-Apache-Http-lib-in-Flink-kinesis-connector-td18202.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16056446" author="githubbot" created="Tue, 20 Jun 2017 21:01:45 +0000"  >&lt;p&gt;GitHub user bowenli86 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6951&quot; title=&quot;Incompatible versions of httpcomponents jars for Flink kinesis connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6951&quot;&gt;&lt;del&gt;FLINK-6951&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;docs&amp;#93;&lt;/span&gt; Incompatible versions of httpcomponents jars for Flink kinesis connector&lt;/p&gt;

&lt;p&gt;    The root cause being that Flink documentation is outdated on dependency versions. I updated Flink doc.&lt;/p&gt;

&lt;p&gt;    Since I run Flink on hadoop 2.7, I only tested for hadoop 2.7 on EMR, not hadoop 2.6. &lt;/p&gt;

&lt;p&gt;    We can probably open an jira ticket for hadoop 2.6.&lt;/p&gt;



&lt;p&gt;    Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.&lt;br/&gt;
    If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the &lt;span class=&quot;error&quot;&gt;&amp;#91;How To Contribute guide&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://flink.apache.org/how-to-contribute.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://flink.apache.org/how-to-contribute.html&lt;/a&gt;).&lt;br/&gt;
    In addition to going through the list, please provide a meaningful description of your changes.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; General&lt;/li&gt;
	&lt;li&gt;The pull request references the related JIRA issue (&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;FLINK-XXX&amp;#93;&lt;/span&gt; Jira title text&quot;)&lt;/li&gt;
	&lt;li&gt;The pull request addresses only one issue&lt;/li&gt;
	&lt;li&gt;Each commit in the PR has a meaningful commit message (including the JIRA id)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Documentation&lt;/li&gt;
	&lt;li&gt;Documentation has been added for new functionality&lt;/li&gt;
	&lt;li&gt;Old documentation affected by the pull request has been updated&lt;/li&gt;
	&lt;li&gt;JavaDoc for public methods has been added&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Tests &amp;amp; Build&lt;/li&gt;
	&lt;li&gt;Functionality added by the pull request is covered by tests&lt;/li&gt;
	&lt;li&gt;`mvn clean verify` has been executed successfully locally or a Travis build has passed&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/bowenli86/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bowenli86/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6951&quot; title=&quot;Incompatible versions of httpcomponents jars for Flink kinesis connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6951&quot;&gt;&lt;del&gt;FLINK-6951&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4150&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit cb0bc2b86ae5604bf2e919098179d0dc26a983ae&lt;br/&gt;
Author: Bowen Li &amp;lt;bowenli86@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-06-20T20:58:38Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6951&quot; title=&quot;Incompatible versions of httpcomponents jars for Flink kinesis connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6951&quot;&gt;&lt;del&gt;FLINK-6951&lt;/del&gt;&lt;/a&gt; Incompatible versions of httpcomponents jars for Flink kinesis connector&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16056451" author="githubbot" created="Tue, 20 Jun 2017 21:02:53 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tedyu @tzulitai &lt;/p&gt;</comment>
                            <comment id="16056911" author="githubbot" created="Wed, 21 Jun 2017 03:18:29 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the PR @bowenli86.&lt;br/&gt;
    However, I&apos;m not entirely sure the original version in the doc count as &quot;outdated&quot;.&lt;br/&gt;
    For example, would the original versions work if you&apos;re not using the Kinesis connector?&lt;br/&gt;
    Or, if we decide to bump the `aws-java-sdk` version in the Kinesis connector, would these httpcomponent versions need to correspond to?&lt;/p&gt;

&lt;p&gt;    I&apos;m wondering if it actually makes sense to shade the httpcomponent dependencies in the Kinesis connector, so that it doesn&apos;t incorrectly pick up other versions in the classpath?&lt;/p&gt;</comment>
                            <comment id="16056927" author="githubbot" created="Wed, 21 Jun 2017 03:33:59 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai shading httpclient/core sounder like a more sound fix.&lt;/p&gt;

&lt;p&gt;    I&apos;ll see if I have time to shade them and resubmit the PR.&lt;/p&gt;</comment>
                            <comment id="16056930" author="githubbot" created="Wed, 21 Jun 2017 03:35:23 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @bowenli86 for trying that out. Please keep my updated on this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16078723" author="githubbot" created="Fri, 7 Jul 2017 21:28:00 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai I shaded httpcomponents. Does it look good?&lt;/p&gt;</comment>
                            <comment id="16078944" author="githubbot" created="Sat, 8 Jul 2017 04:15:07 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150#discussion_r126274141&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150#discussion_r126274141&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: docs/setup/aws.md &amp;#8212;&lt;br/&gt;
    @@ -224,8 +224,6 @@ Depending on which file system you use, please add the following dependencies. Y&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;`S3AFileSystem`:&lt;/li&gt;
	&lt;li&gt;`hadoop-aws-2.7.2.jar`&lt;/li&gt;
	&lt;li&gt;`aws-java-sdk-1.7.4.jar`&lt;/li&gt;
	&lt;li&gt;- `httpcore-4.2.5.jar`&lt;/li&gt;
	&lt;li&gt;- `httpclient-4.2.5.jar`
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I&apos;m not sure that these instructions can be removed. Could you describe a bit? Especially in the case if the user is not using the Flink Kinesis connector.&lt;/p&gt;</comment>
                            <comment id="16078945" author="githubbot" created="Sat, 8 Jul 2017 04:15:07 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150#discussion_r126274129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150#discussion_r126274129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -36,6 +36,8 @@ under the License.&lt;br/&gt;
     		&amp;lt;aws.sdk.version&amp;gt;1.10.71&amp;lt;/aws.sdk.version&amp;gt;&lt;br/&gt;
     		&amp;lt;aws.kinesis-kcl.version&amp;gt;1.6.2&amp;lt;/aws.kinesis-kcl.version&amp;gt;&lt;br/&gt;
     		&amp;lt;aws.kinesis-kpl.version&amp;gt;0.10.2&amp;lt;/aws.kinesis-kpl.version&amp;gt;&lt;br/&gt;
    +		&amp;lt;apache.httpclient.version&amp;gt;4.3.6&amp;lt;/apache.httpclient.version&amp;gt;&lt;br/&gt;
    +		&amp;lt;apache.httpcore.version&amp;gt;4.3.3&amp;lt;/apache.httpcore.version&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I assume these versions correspond to what the AWS SDK is using, correct?&lt;/p&gt;</comment>
                            <comment id="16080898" author="githubbot" created="Mon, 10 Jul 2017 19:07:39 +0000"  >&lt;p&gt;Github user bowenli86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150#discussion_r126509865&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150#discussion_r126509865&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: docs/setup/aws.md &amp;#8212;&lt;br/&gt;
    @@ -224,8 +224,6 @@ Depending on which file system you use, please add the following dependencies. Y&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;`S3AFileSystem`:&lt;/li&gt;
	&lt;li&gt;`hadoop-aws-2.7.2.jar`&lt;/li&gt;
	&lt;li&gt;`aws-java-sdk-1.7.4.jar`&lt;/li&gt;
	&lt;li&gt;- `httpcore-4.2.5.jar`&lt;/li&gt;
	&lt;li&gt;- `httpclient-4.2.5.jar`
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I see your point. Yeah, users run on AWS EMR don&apos;t necessarily use Kinesis. I&apos;ll revert this part.&lt;/p&gt;</comment>
                            <comment id="16080907" author="githubbot" created="Mon, 10 Jul 2017 19:12:52 +0000"  >&lt;p&gt;Github user bowenli86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150#discussion_r126511039&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150#discussion_r126511039&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -36,6 +36,8 @@ under the License.&lt;br/&gt;
     		&amp;lt;aws.sdk.version&amp;gt;1.10.71&amp;lt;/aws.sdk.version&amp;gt;&lt;br/&gt;
     		&amp;lt;aws.kinesis-kcl.version&amp;gt;1.6.2&amp;lt;/aws.kinesis-kcl.version&amp;gt;&lt;br/&gt;
     		&amp;lt;aws.kinesis-kpl.version&amp;gt;0.10.2&amp;lt;/aws.kinesis-kpl.version&amp;gt;&lt;br/&gt;
    +		&amp;lt;apache.httpclient.version&amp;gt;4.3.6&amp;lt;/apache.httpclient.version&amp;gt;&lt;br/&gt;
    +		&amp;lt;apache.httpcore.version&amp;gt;4.3.3&amp;lt;/apache.httpcore.version&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    yes.&lt;br/&gt;
    Here&apos;s the dependency tree:&lt;/p&gt;

&lt;p&gt;    aws-java-sdk-kinesis 1.10.71&lt;br/&gt;
    aws-java-sdk-core 1.10.71&lt;br/&gt;
    httpclient 4.3.6&lt;br/&gt;
    httpcore 4.3.3&lt;/p&gt;</comment>
                            <comment id="16080911" author="githubbot" created="Mon, 10 Jul 2017 19:14:42 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai @tedyu &lt;/p&gt;

&lt;p&gt;    Hi guys, I&apos;m also wondering how much percentage of Flink users are using Flink with Kinesis? Kinesis has so many limitations that we are considering to move from Kinesis to Kafka. Knowing general preference of Flink users will make us more confident in this move. I guess not a lot people are using Flink + Kinesis, otherwise I won&apos;t be the first one running into this dependency conflict bug. Do you guys have any numbers in mind?&lt;/p&gt;</comment>
                            <comment id="16084060" author="githubbot" created="Wed, 12 Jul 2017 14:28:47 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @bowenli86 I think Kinesis is quite popular. The conflict only arises in combination with certain Hadoop versions, that may be the cause why not everybody experiences it.&lt;/p&gt;</comment>
                            <comment id="16084065" author="githubbot" created="Wed, 12 Jul 2017 14:31:07 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @bowenli86 To you have to actually explicitly add the http component dependencies to the pom.xml file, or does the &quot;promoteTransitiveDependencies&quot; config in the shading already cover that?&lt;/p&gt;</comment>
                            <comment id="16084258" author="githubbot" created="Wed, 12 Jul 2017 16:29:23 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I added http components to dependencies because Hadoop-aws 2.7 depends on http components 4.2.&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    $ jar -tf flink-connector-kinesis_2.11-1.4-SNAPSHOT.jar | grep apache/http&lt;br/&gt;
    org/apache/flink/kinesis/shaded/org/apache/http/&lt;br/&gt;
    org/apache/flink/kinesis/shaded/org/apache/http/impl/&lt;br/&gt;
    org/apache/flink/kinesis/shaded/org/apache/http/impl/cookie/&lt;br/&gt;
    org/apache/flink/kinesis/shaded/org/apache/http/impl/cookie/BestMatchSpec.class&lt;br/&gt;
    org/apache/flink/kinesis/shaded/org/apache/http/impl/cookie/RFC2965PortAttributeHandler.class&lt;br/&gt;
    ...&lt;br/&gt;
    ```&lt;/p&gt;</comment>
                            <comment id="16085242" author="githubbot" created="Thu, 13 Jul 2017 06:15:12 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150#discussion_r127135589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150#discussion_r127135589&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -56,6 +58,18 @@ under the License.&lt;br/&gt;
     		&amp;lt;/dependency&amp;gt;&lt;/p&gt;

&lt;p&gt;     		&amp;lt;dependency&amp;gt;&lt;br/&gt;
    +		    &amp;lt;groupId&amp;gt;org.apache.httpcomponents&amp;lt;/groupId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;artifactId&amp;gt;httpclient&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;version&amp;gt;${apache.httpclient.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
    +		&amp;lt;/dependency&amp;gt;&lt;br/&gt;
    +&lt;br/&gt;
    +		&amp;lt;dependency&amp;gt;&lt;br/&gt;
    +		    &amp;lt;groupId&amp;gt;org.apache.httpcomponents&amp;lt;/groupId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;artifactId&amp;gt;httpcore&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;version&amp;gt;${apache.httpcore.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
    +		&amp;lt;/dependency&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    As Stephan mentioned, these shouldn&apos;t be needed to be declared. They&apos;ll already be pulled in due to the `promoteTransitiveDependencies` property in the shade config.&lt;/p&gt;

&lt;p&gt;    Adding them for the sake of hadoop-aws dependency doesn&apos;t make sense, for the same reason as before; we shouldn&apos;t assume that the Kinesis connector user will also use AWS S3.&lt;/p&gt;</comment>
                            <comment id="16085268" author="githubbot" created="Thu, 13 Jul 2017 06:44:15 +0000"  >&lt;p&gt;Github user bowenli86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150#discussion_r127138994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150#discussion_r127138994&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -56,6 +58,18 @@ under the License.&lt;br/&gt;
     		&amp;lt;/dependency&amp;gt;&lt;/p&gt;

&lt;p&gt;     		&amp;lt;dependency&amp;gt;&lt;br/&gt;
    +		    &amp;lt;groupId&amp;gt;org.apache.httpcomponents&amp;lt;/groupId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;artifactId&amp;gt;httpclient&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;version&amp;gt;${apache.httpclient.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
    +		&amp;lt;/dependency&amp;gt;&lt;br/&gt;
    +&lt;br/&gt;
    +		&amp;lt;dependency&amp;gt;&lt;br/&gt;
    +		    &amp;lt;groupId&amp;gt;org.apache.httpcomponents&amp;lt;/groupId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;artifactId&amp;gt;httpcore&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;version&amp;gt;${apache.httpcore.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
    +		&amp;lt;/dependency&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    For `promoteTransitiveDependencies`, what does it really mean? &lt;a href=&quot;https://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html#promoteTransitiveDependencies&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html#promoteTransitiveDependencies&lt;/a&gt; is kind of very confusing to understand.&lt;/p&gt;

&lt;p&gt;    To your second point, my intention is neither adding http-components 4.3.x for hadoop-aws, nor for AWS s3. It is actually for aws-java-sdk-kinesis used by flink-connector-kinesis. This way, users won&apos;t worry about versions of http-components depended by aws-java-sdk-kinesis anymore. Does it make sense?&lt;/p&gt;</comment>
                            <comment id="16085277" author="githubbot" created="Thu, 13 Jul 2017 06:51:34 +0000"  >&lt;p&gt;Github user bowenli86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150#discussion_r127139879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150#discussion_r127139879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-connectors/flink-connector-kinesis/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -56,6 +58,18 @@ under the License.&lt;br/&gt;
     		&amp;lt;/dependency&amp;gt;&lt;/p&gt;

&lt;p&gt;     		&amp;lt;dependency&amp;gt;&lt;br/&gt;
    +		    &amp;lt;groupId&amp;gt;org.apache.httpcomponents&amp;lt;/groupId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;artifactId&amp;gt;httpclient&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;version&amp;gt;${apache.httpclient.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
    +		&amp;lt;/dependency&amp;gt;&lt;br/&gt;
    +&lt;br/&gt;
    +		&amp;lt;dependency&amp;gt;&lt;br/&gt;
    +		    &amp;lt;groupId&amp;gt;org.apache.httpcomponents&amp;lt;/groupId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;artifactId&amp;gt;httpcore&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
    +		    &amp;lt;version&amp;gt;${apache.httpcore.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
    +		&amp;lt;/dependency&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    To clarify a bit more:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;hadoop-aws 2.7 depends on http-components 4.2.x&lt;/li&gt;
	&lt;li&gt;aws-java-sdk-kinesis 1.10.71, a core dependency of flink-kinesis-connector, depends on http-components 4.3.x.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Thus, we should include http-components 4.3 into flink-kinesis-connector so that users won&apos;t worry about deciding http-components version if they use hadoop-aws and flink-kinesis-connector at the same time.&lt;/p&gt;</comment>
                            <comment id="16085284" author="githubbot" created="Thu, 13 Jul 2017 06:58:59 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    ok, I kind of figured out what `promoteTransitiveDependencies` means. &lt;/p&gt;

&lt;p&gt;    I removed explicit dependencies of httpclient and httpcore from `pom.xml`, and made sure http-components are shaded to `org/apache/flink/kinesis/shaded/orsg/apache/http/*` in flink-connector-kinesis_2.11-1.4-SNAPSHOT.jar&lt;/p&gt;</comment>
                            <comment id="16085313" author="githubbot" created="Thu, 13 Jul 2017 07:46:08 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks! Just for double check: have you on your side already verified that this works when you&apos;re using the connector with S3 (which caused the issue for you before)?&lt;/p&gt;</comment>
                            <comment id="16086341" author="githubbot" created="Thu, 13 Jul 2017 20:24:26 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    During testing, I saw the following exception:&lt;/p&gt;

&lt;p&gt;    ```java&lt;br/&gt;
    java.lang.IllegalStateException: Socket not created by this factory&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.org.apache.http.util.Asserts.check(Asserts.java:34)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.org.apache.http.conn.ssl.SSLSocketFactory.isSecure(SSLSocketFactory.java:435)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:186)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:326)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:837)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:607)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.http.AmazonHttpClient.doExecute(AmazonHttpClient.java:376)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.http.AmazonHttpClient.executeWithTimer(AmazonHttpClient.java:338)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:287)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.services.kinesis.AmazonKinesisClient.doInvoke(AmazonKinesisClient.java:1940)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.services.kinesis.AmazonKinesisClient.invoke(AmazonKinesisClient.java:1910)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.services.kinesis.AmazonKinesisClient.describeStream(AmazonKinesisClient.java:656)&lt;br/&gt;
    	at org.apache.flink.streaming.connectors.kinesis.proxy.KinesisProxy.describeStream(KinesisProxy.java:363)&lt;br/&gt;
    	at org.apache.flink.streaming.connectors.kinesis.proxy.KinesisProxy.getShardsOfStream(KinesisProxy.java:325)&lt;br/&gt;
    	at org.apache.flink.streaming.connectors.kinesis.proxy.KinesisProxy.getShardList(KinesisProxy.java:233)&lt;br/&gt;
    	at org.apache.flink.streaming.connectors.kinesis.internals.KinesisDataFetcher.discoverNewShardsToSubscribe(KinesisDataFetcher.java:430)&lt;br/&gt;
    	at org.apache.flink.streaming.connectors.kinesis.FlinkKinesisConsumer.run(FlinkKinesisConsumer.java:203)&lt;br/&gt;
    	at org.apache.flink.streaming.api.operators.StreamSource.run(StreamSource.java:87)&lt;br/&gt;
    	at org.apache.flink.streaming.api.operators.StreamSource.run(StreamSource.java:55)&lt;br/&gt;
    	at org.apache.flink.streaming.runtime.tasks.SourceStreamTask.run(SourceStreamTask.java:95)&lt;br/&gt;
    	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:262)&lt;br/&gt;
    	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:702)&lt;br/&gt;
    	at java.lang.Thread.run(Thread.java:748)&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    According to &lt;a href=&quot;https://github.com/Jean-Emile/org.apache.httpclient/blob/master/src/main/java/org/apache/http/conn/ssl/SSLSocketFactory.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Jean-Emile/org.apache.httpclient/blob/master/src/main/java/org/apache/http/conn/ssl/SSLSocketFactory.java&lt;/a&gt;, it seems a different kind of socket is passed around when shading httpcomponents. I&apos;ll see if I have time to dig deeper. Any insight is highly appreciated.&lt;/p&gt;</comment>
                            <comment id="16087339" author="githubbot" created="Fri, 14 Jul 2017 13:54:05 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hmmm, tricky one. Do parts of the code use different configuration (one instantiates non SSL sockets, the other one assumes SSL sockets)?&lt;/p&gt;</comment>
                            <comment id="16092661" author="phoenixjiangnan" created="Wed, 19 Jul 2017 06:36:58 +0000"  >&lt;p&gt;This is similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6125&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-6125&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16098086" author="aljoscha" created="Mon, 24 Jul 2017 08:44:23 +0000"  >&lt;p&gt;Moving to 1.3.3 to unblock the 1.3.2 release because &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt; told me there is a workaround.&lt;/p&gt;</comment>
                            <comment id="16099488" author="githubbot" created="Tue, 25 Jul 2017 04:54:23 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    My Flink job checkpoints to S3, I&apos;m configuring S3AFileSystem shown in &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-release-1.3/setup/aws.html#flink-for-hadoop-27&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.apache.org/projects/flink/flink-docs-release-1.3/setup/aws.html#flink-for-hadoop-27&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;    I doubt if this error is due to S3AFileSystem uses httpcomponents 4.2, since httpcomponents 4.3.x &lt;span class=&quot;error&quot;&gt;&amp;#91;has deprecated SSLSocketFactory&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://hc.apache.org/httpcomponents-client-4.3.x/httpclient/apidocs/org/apache/http/conn/ssl/SSLSocketFactory.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hc.apache.org/httpcomponents-client-4.3.x/httpclient/apidocs/org/apache/http/conn/ssl/SSLSocketFactory.html&lt;/a&gt;) &lt;/p&gt;</comment>
                            <comment id="16099521" author="githubbot" created="Tue, 25 Jul 2017 05:27:22 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @bowenli86 but isn&apos;t the shading of httpcomponents in the Kinesis consumer supposed to avoid conflicts with whatever version you&apos;re using for S3AFileSystem?&lt;/p&gt;</comment>
                            <comment id="16099524" author="githubbot" created="Tue, 25 Jul 2017 05:32:03 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    From the looks of &lt;a href=&quot;https://github.com/druid-io/druid/issues/4456&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/druid-io/druid/issues/4456&lt;/a&gt;, could it be that we need to update our AWS Java SDK version?&lt;/p&gt;
</comment>
                            <comment id="16107343" author="githubbot" created="Mon, 31 Jul 2017 14:03:35 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai Do we shade the `aws-sdk-java` in the Kinesis connector? We should probably, and shade it in Hadoop as well. If not, this could be a cause of the conflict...&lt;/p&gt;</comment>
                            <comment id="16110405" author="githubbot" created="Wed, 2 Aug 2017 06:40:16 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes, we do shade the `com.amazonaws.*` packages. It was fixed before to address problems with running the Kinesis connector on older EMR versions. So I guess that my assumption of that there are conflicting `aws-java-sdk` versions shouldn&apos;t hold, given that the dependency is properly shaded ..&lt;/p&gt;</comment>
                            <comment id="16200762" author="aljoscha" created="Wed, 11 Oct 2017 18:57:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phoenixjiangnan&quot; class=&quot;user-hover&quot; rel=&quot;phoenixjiangnan&quot;&gt;phoenixjiangnan&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt; Is this still an issue?&lt;/p&gt;</comment>
                            <comment id="16201258" author="phoenixjiangnan" created="Thu, 12 Oct 2017 00:13:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; I believe so as I&apos;ve seen a couple email threads complaining about the same problem. What do you think, Gordon? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;On my side, I have made a hacky workaround so this problem hasn&apos;t blocked me.&lt;/p&gt;

&lt;p&gt;I&apos;m traveling now. I can re-take a closer look at it in about three weeks.&lt;/p&gt;</comment>
                            <comment id="16209048" author="till.rohrmann" created="Wed, 18 Oct 2017 09:22:39 +0000"  >&lt;p&gt;Not sure whether we have this much time if this is a true 1.4 blocker. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt; could you help Bowen here with the issue? We should first decide whether this is a blocker and if yes, then address it.&lt;/p&gt;</comment>
                            <comment id="16212384" author="tzulitai" created="Fri, 20 Oct 2017 09:00:26 +0000"  >&lt;p&gt;I&apos;ll try to reproduce the issue on my side first. Will report back on whether or not we should make this a blocker.&lt;/p&gt;</comment>
                            <comment id="16216727" author="tzulitai" created="Tue, 24 Oct 2017 11:27:08 +0000"  >&lt;p&gt;I&apos;ll downgrade this from a blocker to critical now. The documented setup somehow works on my side. Would suggest not to block the feature freeze on this issue.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phoenixjiangnan&quot; class=&quot;user-hover&quot; rel=&quot;phoenixjiangnan&quot;&gt;phoenixjiangnan&lt;/a&gt; could you briefly describe the &quot;hacky workaround&quot; you mentioned? Perhaps that could help me in reproducing this issue.&lt;/p&gt;</comment>
                            <comment id="16222891" author="phoenixjiangnan" created="Fri, 27 Oct 2017 21:44:54 +0000"  >&lt;p&gt;The workaround is: rather than using httpclient-4.2.5 and httpcore-4.2.5 described &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-release-1.4/ops/deployment/aws.html#flink-for-hadoop-27&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, I used httpclient-4.3.6 and httpcore-4.3.3.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure why it&apos;s working now. May be because we upgraded KPL and KCL, and they don&apos;t the old httpcomponent APIs anymore? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16318500" author="githubbot" created="Tue, 9 Jan 2018 14:34:49 +0000"  >&lt;p&gt;Github user casidiablo commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This actually worked for me. I ran it on EMR 5.10, compiling the kinesis connector from the release-1.3 branch (since EMR provides Flink 1.3)&lt;/p&gt;</comment>
                            <comment id="16319021" author="githubbot" created="Tue, 9 Jan 2018 19:42:42 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for confirming. I&apos;ll close this ticket and PR&lt;/p&gt;</comment>
                            <comment id="16319022" author="phoenixjiangnan" created="Tue, 9 Jan 2018 19:43:19 +0000"  >&lt;p&gt;Not a problem anymore&lt;/p&gt;</comment>
                            <comment id="16319441" author="githubbot" created="Wed, 10 Jan 2018 00:15:29 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @casidiablo did you mean that without applying this PR&apos;s patch, the current master worked for you? Or you had to apply this patch in order for it to work?&lt;/p&gt;</comment>
                            <comment id="16319445" author="githubbot" created="Wed, 10 Jan 2018 00:20:27 +0000"  >&lt;p&gt;Github user casidiablo commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Since EMR only supports Flink 1.3 I had to checkout release-1.3 and compile the connector from there. Then I was getting this `Socket not created by this factory` error.&lt;/p&gt;

&lt;p&gt;    I then patched 1.3 to include these changes, and that fixed it.&lt;/p&gt;

&lt;p&gt;    The current master version can&apos;t be used because so many things have changed since then, and it does not seem to be compatible with EMR right now.&lt;/p&gt;</comment>
                            <comment id="16319690" author="githubbot" created="Wed, 10 Jan 2018 04:45:33 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @casidiablo thanks for the info!&lt;br/&gt;
    I&apos;ll merge this for `release-1.3` then, and will keep an extra eye on whether the problem still occurs for 1.4 / 1.5.&lt;/p&gt;</comment>
                            <comment id="16319691" author="githubbot" created="Wed, 10 Jan 2018 04:45:41 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merging to `release-1.3` ..&lt;/p&gt;</comment>
                            <comment id="16319889" author="githubbot" created="Wed, 10 Jan 2018 08:29:42 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    On second thought, the change is actually a general improvement to the packaging of the connector, so it would make sense to merge this to `master` and `release-1.4` also.&lt;/p&gt;</comment>
                            <comment id="16321104" author="githubbot" created="Wed, 10 Jan 2018 21:01:50 +0000"  >&lt;p&gt;Github user xiatao123 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I ran into a similar issue in EMR. Any suggestion on how to fix it?&lt;/p&gt;

&lt;p&gt;    `Release label:emr-5.11.0&lt;br/&gt;
    Hadoop distribution:Amazon 2.7.3&lt;br/&gt;
    Applications:Flink 1.3.2`&lt;/p&gt;

&lt;p&gt;    `java.lang.IllegalStateException: Socket not created by this factory&lt;br/&gt;
    	at org.apache.http.util.Asserts.check(Asserts.java:34)&lt;br/&gt;
    	at org.apache.http.conn.ssl.SSLSocketFactory.isSecure(SSLSocketFactory.java:435)&lt;br/&gt;
    	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:186)&lt;br/&gt;
    	at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:326)&lt;br/&gt;
    	at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610)&lt;br/&gt;
    	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445)&lt;br/&gt;
    	at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)&lt;br/&gt;
    	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)&lt;br/&gt;
    	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:837)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:607)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.http.AmazonHttpClient.doExecute(AmazonHttpClient.java:376)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.http.AmazonHttpClient.executeWithTimer(AmazonHttpClient.java:338)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:287)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.services.kinesis.AmazonKinesisClient.doInvoke(AmazonKinesisClient.java:1940)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.services.kinesis.AmazonKinesisClient.invoke(AmazonKinesisClient.java:1910)&lt;br/&gt;
    	at org.apache.flink.kinesis.shaded.com.amazonaws.services.kinesis.AmazonKinesisClient.describeStream(AmazonKinesisClient.java:656)&lt;br/&gt;
    	at org.apache.flink.streaming.connectors.kinesis.proxy.KinesisProxy.describeStream(KinesisProxy.java:361)&lt;br/&gt;
    	at org.apache.flink.streaming.connectors.kinesis.proxy.KinesisProxy.getShardsOfStream(KinesisProxy.java:323)&lt;br/&gt;
    	at org.apache.flink.streaming.connectors.kinesis.proxy.KinesisProxy.getShardList(KinesisProxy.java:231)&lt;br/&gt;
    	at org.apache.flink.streaming.connectors.kinesis.internals.KinesisDataFetcher.discoverNewShardsToSubscribe(KinesisDataFetcher.java:430)&lt;br/&gt;
    	at org.apache.flink.streaming.connectors.kinesis.FlinkKinesisConsumer.run(FlinkKinesisConsumer.java:202)&lt;br/&gt;
    	at org.apache.flink.streaming.api.operators.StreamSource.run(StreamSource.java:87)&lt;br/&gt;
    	at org.apache.flink.streaming.api.operators.StreamSource.run(StreamSource.java:55)&lt;br/&gt;
    	at org.apache.flink.streaming.runtime.tasks.SourceStreamTask.run(SourceStreamTask.java:95)&lt;br/&gt;
    	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:263)&lt;br/&gt;
    	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:702)&lt;br/&gt;
    	at java.lang.Thread.run(Thread.java:748)&lt;br/&gt;
    `&lt;/p&gt;</comment>
                            <comment id="16321159" author="githubbot" created="Wed, 10 Jan 2018 21:45:19 +0000"  >&lt;p&gt;Github user xiatao123 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Got the issue fixed after apply this patch in &lt;br/&gt;
    Release label:emr-5.11.0&lt;br/&gt;
    Hadoop distribution:Amazon 2.7.3&lt;br/&gt;
    Applications:Flink 1.3.2&lt;/p&gt;
</comment>
                            <comment id="16321616" author="githubbot" created="Thu, 11 Jan 2018 02:53:54 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @casidiablo @tzulitai sorry, I had a long day yesterday and misunderstood what you mean.&lt;/p&gt;

&lt;p&gt;    And thank you @casidiablo @xiatao123 both for confirming it works.&lt;/p&gt;</comment>
                            <comment id="16323952" author="githubbot" created="Fri, 12 Jan 2018 13:32:51 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4150&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16325027" author="tzulitai" created="Sat, 13 Jan 2018 08:08:06 +0000"  >&lt;p&gt;Merged.&lt;/p&gt;

&lt;p&gt;1.3: e10fec8236af98709ec4e2345dc64bc0ed6f0d76&lt;br/&gt;
1.4: b607a8b95d11d80f68cdd167289a52d1f4c49d24&lt;br/&gt;
1.5: 77e63e6a76937c81c2641a5c46a9a53c0b57b309&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phoenixjiangnan&quot; class=&quot;user-hover&quot; rel=&quot;phoenixjiangnan&quot;&gt;phoenixjiangnan&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13057469">FLINK-6125</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13042178">FLINK-5783</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 44 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gh2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>