<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:19:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-33947] Fix bugs about prefix in DelegatingConfiguration </title>
                <link>https://issues.apache.org/jira/browse/FLINK-33947</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;It was resulted from &lt;a href=&quot;https://github.com/apache/flink/pull/23994#issuecomment-1869905090&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/23994#issuecomment-1869905090&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;-&#160; Check and confirm other potential bug points&lt;/p&gt;

&lt;p&gt;-&#160; Fix the bugs about prefix key mapping when operating.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13562977">FLINK-33947</key>
            <summary>Fix bugs about prefix in DelegatingConfiguration </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="RocMarshal">RocMarshal</assignee>
                                    <reporter username="RocMarshal">RocMarshal</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 27 Dec 2023 03:35:35 +0000</created>
                <updated>Fri, 29 Dec 2023 15:19:48 +0000</updated>
                            <resolved>Fri, 29 Dec 2023 15:19:47 +0000</resolved>
                                                    <fixVersion>1.19.0</fixVersion>
                    <fixVersion>1.17.3</fixVersion>
                    <fixVersion>1.18.2</fixVersion>
                                    <component>API / Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17800774" author="rocmarshal" created="Wed, 27 Dec 2023 14:07:09 +0000"  >&lt;p&gt;Before officially starting the repair, there are two issues worth discussing:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;First:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Is the &lt;b&gt;&lt;em&gt;prefix&lt;/em&gt;&lt;/b&gt; attribute allowed to be &lt;b&gt;&lt;em&gt;null&lt;/em&gt;&lt;/b&gt;?&lt;/p&gt;

&lt;p&gt;What are the risks in using &lt;b&gt;&lt;em&gt;prefix&lt;/em&gt;&lt;/b&gt; if it is not allowed to be &lt;b&gt;&lt;em&gt;null&lt;/em&gt;&lt;/b&gt;? Or will there be any defects?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;From the current effect, if the &lt;b&gt;&lt;em&gt;prefix&lt;/em&gt;&lt;/b&gt; is &lt;b&gt;&lt;em&gt;null&lt;/em&gt;&lt;/b&gt;, methods such as &lt;b&gt;&lt;em&gt;hashCode()&lt;/em&gt;&lt;/b&gt; will result in &lt;b&gt;&lt;em&gt;NPE&lt;/em&gt;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Based on the feedback from the current community regarding the use of this class, there should be no instances of using a &lt;b&gt;&lt;em&gt;null&lt;/em&gt;&lt;/b&gt; &lt;em&gt;&lt;b&gt;prefix&lt;/b&gt;&lt;/em&gt;, unless there are no calls to methods that may result in &lt;em&gt;&lt;b&gt;NPE&lt;/b&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;There are two corresponding alternative solutions here:&lt;/p&gt;

&lt;p&gt;1. It is not allowed for &lt;em&gt;&lt;b&gt;prefix&lt;/b&gt;&lt;/em&gt; to be a &lt;b&gt;&lt;em&gt;null&lt;/em&gt;&lt;/b&gt; object, so there will be no corresponding method to cause &lt;em&gt;&lt;b&gt;NPE&lt;/b&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;2. Alternatively, allow the &lt;em&gt;&lt;b&gt;prefix&lt;/b&gt;&lt;/em&gt; to be a &lt;em&gt;&lt;b&gt;null&lt;/b&gt;&lt;/em&gt; object, but we need to design logic to handle &lt;em&gt;&lt;b&gt;null&lt;/b&gt;&lt;/em&gt; situations for methods that may cause &lt;em&gt;&lt;b&gt;NPE&lt;/b&gt;&lt;/em&gt; to avoid the occurrence of &lt;em&gt;&lt;b&gt;NPE&lt;/b&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Secondly:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Regarding the mapping bug of &lt;em&gt;&lt;b&gt;prefix&lt;/b&gt;&lt;/em&gt; values in various methods,&lt;/p&gt;

&lt;p&gt;Only exists in the &lt;em&gt;&lt;b&gt;removeKey&lt;/b&gt; &lt;b&gt;removeConfiguration&lt;/b&gt;&lt;/em&gt; methods. We just need to fix and add tests&lt;/p&gt;</comment>
                            <comment id="17800785" author="fanrui" created="Wed, 27 Dec 2023 14:26:09 +0000"  >&lt;p&gt;I&#160; don&apos;t think prefix can be null. If it&apos;s null or empty, why don&apos;t use Configuration directly?&lt;/p&gt;</comment>
                            <comment id="17800794" author="rocmarshal" created="Wed, 27 Dec 2023 14:44:35 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fanrui&quot; class=&quot;user-hover&quot; rel=&quot;fanrui&quot;&gt;fanrui&lt;/a&gt; thanks for your attention.&lt;/p&gt;

&lt;p&gt;I want to set the prefix attribute as Nonnull (@Nonnull)&lt;br/&gt;
There are two benefits to this:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ensure that potential &lt;em&gt;&lt;b&gt;NPE&lt;/b&gt;&lt;/em&gt; risks can be addressed&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Maintain minimal changes (in my limited read, since the initial design allowed prefixes to default to empty strings, I tend to maintain this default strategy to ensure some backward compatibility space is left. Of course, if it is necessary not to allow prefixes to be empty strings, I am happy to make corresponding changes)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please let me know what&apos;s your opinion~&lt;/p&gt;</comment>
                            <comment id="17800795" author="fanrui" created="Wed, 27 Dec 2023 14:47:25 +0000"  >&lt;p&gt;Mark the prefix as @Nonnull makes sense. And how about allow prefix is empty?&lt;/p&gt;</comment>
                            <comment id="17800805" author="rocmarshal" created="Wed, 27 Dec 2023 15:04:19 +0000"  >&lt;p&gt;&amp;gt; And how about allow prefix is empty?&lt;/p&gt;

&lt;p&gt;SGTM +1.&lt;/p&gt;</comment>
                            <comment id="17801114" author="fanrui" created="Fri, 29 Dec 2023 07:40:37 +0000"  >&lt;p&gt;Merged to&lt;/p&gt;

&lt;p&gt;master(1.19) via : 145b99e388550f582c8ee577689f651acf2b6321&lt;/p&gt;

&lt;p&gt;1.18 via&#160; : 9bb6fd3228795e45d80e7850823d0e29a0725e11&lt;/p&gt;

&lt;p&gt;1.17 via: 78dfe14b5c9ff495fd38beb7c2d7f88b341f8c20&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 45 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1mgg8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>