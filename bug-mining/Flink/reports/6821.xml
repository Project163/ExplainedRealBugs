<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:15:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-30213] The edge is wrong when the vertex parallelism is changed</title>
                <link>https://issues.apache.org/jira/browse/FLINK-30213</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-29501&quot; title=&quot;Allow overriding JobVertex parallelisms during job submission&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-29501&quot;&gt;&lt;del&gt;FLINK-29501&lt;/del&gt;&lt;/a&gt;, flink allows overriding JobVertex parallelisms during job submission.&lt;/p&gt;

&lt;p&gt;However, the edge should be changed as well. For example, the job has 4 vertex, and all shipStrategyName of all tasks are forward.&lt;/p&gt;

&lt;p&gt;After the parallelism of the third task is changed to 1, the second and third edge should be changed from forward to rebalance. But they are still forward.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;And from the second picture, the subtask_1 of sink cannot receive any data.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13053114/13053114_image-2022-11-25-17-02-12-492.png&quot; height=&quot;356&quot; width=&quot;1318&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13053113/13053113_image-2022-11-25-17-06-53-466.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13505895">FLINK-30213</key>
            <summary>The edge is wrong when the vertex parallelism is changed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="fanrui">Rui Fan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 25 Nov 2022 09:08:15 +0000</created>
                <updated>Wed, 17 Jan 2024 13:26:43 +0000</updated>
                            <resolved>Mon, 2 Jan 2023 13:07:17 +0000</resolved>
                                    <version>1.17.0</version>
                                    <fixVersion>1.17.0</fixVersion>
                                    <component>Runtime / Configuration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17638589" author="fanrui" created="Fri, 25 Nov 2022 09:13:27 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gyfora&quot; class=&quot;user-hover&quot; rel=&quot;gyfora&quot;&gt;gyfora&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mxm&quot; class=&quot;user-hover&quot; rel=&quot;mxm&quot;&gt;mxm&lt;/a&gt; , please help take a look, and I can fix this bug.&#160;&lt;/p&gt;

&lt;p&gt;BTW, I am very interested in AutoScaling and hope to participate due to it&apos;s a very useful feature for our company.&lt;/p&gt;</comment>
                            <comment id="17638673" author="mxm" created="Fri, 25 Nov 2022 14:24:10 +0000"  >&lt;p&gt;Thanks for reporting this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fanrui&quot; class=&quot;user-hover&quot; rel=&quot;fanrui&quot;&gt;fanrui&lt;/a&gt;! I think we&apos;ll have to patch the forward partitioner in this scenario. All other partitioners should continue to work with new parallelisms. I&apos;ll have a look.&lt;/p&gt;</comment>
                            <comment id="17638774" author="gyfora" created="Fri, 25 Nov 2022 20:59:12 +0000"  >&lt;p&gt;The same issue already existed Flink with the reactive scaling logic.&#160;&lt;br/&gt;
Take the following pipeline as an example:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;RescaleTest {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; env = StreamExecutionEnvironment.getExecutionEnvironment();
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; source = env.fromSequence(0, 100000000L).setParallelism(1);
        source.getTransformation().setMaxParallelism(1);

        source.disableChaining()
                .filter(
                        val -&amp;gt; {
                            &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
                            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
                        })
                .print();

        env.execute();
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you start this on a cluster with 1 taskslot (parallelism = 1), that will create forward partitioning between the source and the filter.&lt;br/&gt;
Scaling it up by adding one more taskmanager will increase the parallelism of the filter but not the source (due to the forced max parallelism 1)&lt;br/&gt;
leading to the same problem:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13053154/13053154_image-2022-11-25-21-58-48-968.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;br/&gt;
Furthermore the UI reports incorrect parallelism numbers but thats just cosmetics &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17653597" author="gyfora" created="Mon, 2 Jan 2023 13:07:17 +0000"  >&lt;p&gt;Merged to main:&lt;br/&gt;
ded2df542fd5d585842e77d021fb84a92a5bea76..1c2f4eb4ba1d1b5ad403d7991170ca16cb71df56&lt;/p&gt;

&lt;p&gt;I am sorry I accidentally rebased the PR instead of squashing the commits. This was a mistake from my side.&lt;/p&gt;</comment>
                            <comment id="17676136" author="gyfora" created="Thu, 12 Jan 2023 15:24:12 +0000"  >&lt;p&gt;Added a fix for this: fb482fe39844efda33a4c05858903f5b64e158a3&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13551349">FLINK-33123</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13484451">FLINK-29501</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13053114" name="image-2022-11-25-17-02-12-492.png" size="56144" author="fanrui" created="Fri, 25 Nov 2022 09:02:13 +0000"/>
                            <attachment id="13053113" name="image-2022-11-25-17-06-53-466.png" size="126772" author="fanrui" created="Fri, 25 Nov 2022 09:06:55 +0000"/>
                            <attachment id="13053154" name="image-2022-11-25-21-58-48-968.png" size="146430" author="gyfora" created="Fri, 25 Nov 2022 20:58:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1cq00:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>