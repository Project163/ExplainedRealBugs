<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:48:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-18965] ExecutionContextTest.testCatalogs failed with &quot;ClassNotFoundException: org.apache.hadoop.fs.BlockStoragePolicySpi&quot;</title>
                <link>https://issues.apache.org/jira/browse/FLINK-18965</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5541&amp;amp;view=logs&amp;amp;j=a8bc9173-2af6-5ba8-775c-12063b4f1d54&amp;amp;t=46a16c18-c679-5905-432b-9be5d8e27bc6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5541&amp;amp;view=logs&amp;amp;j=a8bc9173-2af6-5ba8-775c-12063b4f1d54&amp;amp;t=46a16c18-c679-5905-432b-9be5d8e27bc6&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-08-14T21:10:09.3503802Z [ERROR] testCatalogs(org.apache.flink.table.client.gateway.local.ExecutionContextTest)  Time elapsed: 0.148 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
2020-08-14T21:10:09.3505006Z org.apache.flink.table.client.gateway.SqlExecutionException: Could not create execution context.
2020-08-14T21:10:09.3505856Z 	at org.apache.flink.table.client.gateway.local.ExecutionContext$Builder.build(ExecutionContext.java:870)
2020-08-14T21:10:09.3506790Z 	at org.apache.flink.table.client.gateway.local.ExecutionContextTest.createExecutionContext(ExecutionContextTest.java:324)
2020-08-14T21:10:09.3508011Z 	at org.apache.flink.table.client.gateway.local.ExecutionContextTest.createCatalogExecutionContext(ExecutionContextTest.java:360)
2020-08-14T21:10:09.3509273Z 	at org.apache.flink.table.client.gateway.local.ExecutionContextTest.testCatalogs(ExecutionContextTest.java:133)
2020-08-14T21:10:09.3510548Z 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2020-08-14T21:10:09.3511496Z 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2020-08-14T21:10:09.3512417Z 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2020-08-14T21:10:09.3513883Z 	at java.lang.reflect.Method.invoke(Method.java:498)
2020-08-14T21:10:09.3514563Z 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
2020-08-14T21:10:09.3515604Z 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
2020-08-14T21:10:09.3516643Z 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
2020-08-14T21:10:09.3517498Z 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
2020-08-14T21:10:09.3518189Z 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
2020-08-14T21:10:09.3519625Z 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
2020-08-14T21:10:09.3520621Z 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
2020-08-14T21:10:09.3521328Z 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
2020-08-14T21:10:09.3521978Z 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
2020-08-14T21:10:09.3522787Z 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
2020-08-14T21:10:09.3523469Z 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
2020-08-14T21:10:09.3524045Z 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
2020-08-14T21:10:09.3524652Z 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
2020-08-14T21:10:09.3525307Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
2020-08-14T21:10:09.3526086Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
2020-08-14T21:10:09.3526996Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
2020-08-14T21:10:09.3527737Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
2020-08-14T21:10:09.3528564Z 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
2020-08-14T21:10:09.3529381Z 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
2020-08-14T21:10:09.3530153Z 	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
2020-08-14T21:10:09.3530883Z 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-08-14T21:10:09.3531641Z Caused by: org.apache.flink.table.catalog.exceptions.CatalogException: Failed to create Hive Metastore client
2020-08-14T21:10:09.3532669Z 	at org.apache.flink.table.catalog.hive.client.HiveShimV230.getHiveMetastoreClient(HiveShimV230.java:52)
2020-08-14T21:10:09.3533609Z 	at org.apache.flink.table.catalog.hive.client.HiveMetastoreClientWrapper.createMetastoreClient(HiveMetastoreClientWrapper.java:240)
2020-08-14T21:10:09.3534606Z 	at org.apache.flink.table.catalog.hive.client.HiveMetastoreClientWrapper.&amp;lt;init&amp;gt;(HiveMetastoreClientWrapper.java:71)
2020-08-14T21:10:09.3535549Z 	at org.apache.flink.table.catalog.hive.client.HiveMetastoreClientFactory.create(HiveMetastoreClientFactory.java:35)
2020-08-14T21:10:09.3536359Z 	at org.apache.flink.table.catalog.hive.HiveCatalog.open(HiveCatalog.java:224)
2020-08-14T21:10:09.3537715Z 	at org.apache.flink.table.client.gateway.local.DependencyTest$TestHiveCatalogFactory.createCatalog(DependencyTest.java:276)
2020-08-14T21:10:09.3538628Z 	at org.apache.flink.table.client.gateway.local.ExecutionContext.createCatalog(ExecutionContext.java:378)
2020-08-14T21:10:09.3539739Z 	at org.apache.flink.table.client.gateway.local.ExecutionContext.lambda$&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;$5(ExecutionContext.java:626)
2020-08-14T21:10:09.3540476Z 	at java.util.HashMap.forEach(HashMap.java:1289)
2020-08-14T21:10:09.3541368Z 	at org.apache.flink.table.client.gateway.local.ExecutionContext.lambda$initializeCatalogs$6(ExecutionContext.java:625)
2020-08-14T21:10:09.3542770Z 	at org.apache.flink.table.client.gateway.local.ExecutionContext.wrapClassLoader(ExecutionContext.java:264)
2020-08-14T21:10:09.3544224Z 	at org.apache.flink.table.client.gateway.local.ExecutionContext.initializeCatalogs(ExecutionContext.java:624)
2020-08-14T21:10:09.3545180Z 	at org.apache.flink.table.client.gateway.local.ExecutionContext.initializeTableEnvironment(ExecutionContext.java:523)
2020-08-14T21:10:09.3546096Z 	at org.apache.flink.table.client.gateway.local.ExecutionContext.&amp;lt;init&amp;gt;(ExecutionContext.java:183)
2020-08-14T21:10:09.3547025Z 	at org.apache.flink.table.client.gateway.local.ExecutionContext.&amp;lt;init&amp;gt;(ExecutionContext.java:136)
2020-08-14T21:10:09.3547910Z 	at org.apache.flink.table.client.gateway.local.ExecutionContext$Builder.build(ExecutionContext.java:859)
2020-08-14T21:10:09.3548486Z 	... 28 more
2020-08-14T21:10:09.3548911Z Caused by: java.lang.reflect.InvocationTargetException
2020-08-14T21:10:09.3549464Z 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2020-08-14T21:10:09.3550087Z 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2020-08-14T21:10:09.3550860Z 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2020-08-14T21:10:09.3551523Z 	at java.lang.reflect.Method.invoke(Method.java:498)
2020-08-14T21:10:09.3552430Z 	at org.apache.flink.table.catalog.hive.client.HiveShimV230.getHiveMetastoreClient(HiveShimV230.java:50)
2020-08-14T21:10:09.3553356Z 	... 43 more
2020-08-14T21:10:09.3553943Z Caused by: java.lang.RuntimeException: Unable to instantiate org.apache.hadoop.hive.metastore.HiveMetaStoreClient
2020-08-14T21:10:09.3554764Z 	at org.apache.hadoop.hive.metastore.MetaStoreUtils.newInstance(MetaStoreUtils.java:1708)
2020-08-14T21:10:09.3555577Z 	at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.&amp;lt;init&amp;gt;(RetryingMetaStoreClient.java:83)
2020-08-14T21:10:09.3556451Z 	at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.getProxy(RetryingMetaStoreClient.java:133)
2020-08-14T21:10:09.3557374Z 	at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.getProxy(RetryingMetaStoreClient.java:89)
2020-08-14T21:10:09.3557975Z 	... 48 more
2020-08-14T21:10:09.3558396Z Caused by: java.lang.reflect.InvocationTargetException
2020-08-14T21:10:09.3558941Z 	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
2020-08-14T21:10:09.3559664Z 	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
2020-08-14T21:10:09.3560509Z 	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
2020-08-14T21:10:09.3561281Z 	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
2020-08-14T21:10:09.3561995Z 	at org.apache.hadoop.hive.metastore.MetaStoreUtils.newInstance(MetaStoreUtils.java:1706)
2020-08-14T21:10:09.3564984Z 	... 51 more
2020-08-14T21:10:09.3565646Z Caused by: MetaException(message:java.lang.NoClassDefFoundError: org/apache/hadoop/fs/BlockStoragePolicySpi)
2020-08-14T21:10:09.3566467Z 	at org.apache.hadoop.hive.metastore.RetryingHMSHandler.&amp;lt;init&amp;gt;(RetryingHMSHandler.java:83)
2020-08-14T21:10:09.3567399Z 	at org.apache.hadoop.hive.metastore.RetryingHMSHandler.getProxy(RetryingHMSHandler.java:92)
2020-08-14T21:10:09.3568474Z 	at org.apache.hadoop.hive.metastore.HiveMetaStore.newRetryingHMSHandler(HiveMetaStore.java:6891)
2020-08-14T21:10:09.3569795Z 	at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.&amp;lt;init&amp;gt;(HiveMetaStoreClient.java:164)
2020-08-14T21:10:09.3570366Z 	... 56 more
2020-08-14T21:10:09.3570953Z Caused by: java.lang.RuntimeException: java.lang.NoClassDefFoundError: org/apache/hadoop/fs/BlockStoragePolicySpi
2020-08-14T21:10:09.3572567Z 	at org.apache.hadoop.hive.shims.ShimLoader.getHadoopShims(ShimLoader.java:91)
2020-08-14T21:10:09.3573320Z 	at org.apache.hadoop.hive.metastore.ObjectStore.getDataSourceProps(ObjectStore.java:480)
2020-08-14T21:10:09.3574237Z 	at org.apache.hadoop.hive.metastore.ObjectStore.setConf(ObjectStore.java:279)
2020-08-14T21:10:09.3574929Z 	at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:76)
2020-08-14T21:10:09.3575654Z 	at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:136)
2020-08-14T21:10:09.3576395Z 	at org.apache.hadoop.hive.metastore.RawStoreProxy.&amp;lt;init&amp;gt;(RawStoreProxy.java:58)
2020-08-14T21:10:09.3577207Z 	at org.apache.hadoop.hive.metastore.RawStoreProxy.getProxy(RawStoreProxy.java:67)
2020-08-14T21:10:09.3578029Z 	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.newRawStoreForConf(HiveMetaStore.java:628)
2020-08-14T21:10:09.3578863Z 	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMSForConf(HiveMetaStore.java:594)
2020-08-14T21:10:09.3579708Z 	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMS(HiveMetaStore.java:588)
2020-08-14T21:10:09.3580543Z 	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.createDefaultDB(HiveMetaStore.java:655)
2020-08-14T21:10:09.3581365Z 	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.init(HiveMetaStore.java:431)
2020-08-14T21:10:09.3582048Z 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2020-08-14T21:10:09.3582783Z 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2020-08-14T21:10:09.3583560Z 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2020-08-14T21:10:09.3584236Z 	at java.lang.reflect.Method.invoke(Method.java:498)
2020-08-14T21:10:09.3584931Z 	at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invokeInternal(RetryingHMSHandler.java:148)
2020-08-14T21:10:09.3585749Z 	at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:107)
2020-08-14T21:10:09.3586543Z 	at org.apache.hadoop.hive.metastore.RetryingHMSHandler.&amp;lt;init&amp;gt;(RetryingHMSHandler.java:79)
2020-08-14T21:10:09.3587215Z 	... 59 more
2020-08-14T21:10:09.3587710Z Caused by: java.lang.NoClassDefFoundError: org/apache/hadoop/fs/BlockStoragePolicySpi
2020-08-14T21:10:09.3588331Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.defineClass1(Native Method)
2020-08-14T21:10:09.3588892Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.defineClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:757)
2020-08-14T21:10:09.3589529Z 	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
2020-08-14T21:10:09.3590215Z 	at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)
2020-08-14T21:10:09.3590838Z 	at java.net.URLClassLoader.access$100(URLClassLoader.java:74)
2020-08-14T21:10:09.3591457Z 	at java.net.URLClassLoader$1.run(URLClassLoader.java:369)
2020-08-14T21:10:09.3592015Z 	at java.net.URLClassLoader$1.run(URLClassLoader.java:363)
2020-08-14T21:10:09.3592677Z 	at java.security.AccessController.doPrivileged(Native Method)
2020-08-14T21:10:09.3593215Z 	at java.net.URLClassLoader.findClass(URLClassLoader.java:362)
2020-08-14T21:10:09.3593778Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:419)
2020-08-14T21:10:09.3594353Z 	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)
2020-08-14T21:10:09.3594945Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:352)
2020-08-14T21:10:09.3595460Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName0(Native Method)
2020-08-14T21:10:09.3595914Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:348)
2020-08-14T21:10:09.3597121Z 	at org.apache.hadoop.hive.shims.Hadoop23Shims.&amp;lt;init&amp;gt;(Hadoop23Shims.java:113)
2020-08-14T21:10:09.3597790Z 	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
2020-08-14T21:10:09.3598487Z 	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
2020-08-14T21:10:09.3599362Z 	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
2020-08-14T21:10:09.3600126Z 	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
2020-08-14T21:10:09.3600971Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.newInstance(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:442)
2020-08-14T21:10:09.3601577Z 	at org.apache.hadoop.hive.shims.ShimLoader.createShim(ShimLoader.java:130)
2020-08-14T21:10:09.3602593Z 	at org.apache.hadoop.hive.shims.ShimLoader.loadShims(ShimLoader.java:124)
2020-08-14T21:10:09.3603611Z 	at org.apache.hadoop.hive.shims.ShimLoader.getHadoopShims(ShimLoader.java:88)
2020-08-14T21:10:09.3604096Z 	... 77 more
2020-08-14T21:10:09.3604616Z Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.fs.BlockStoragePolicySpi
2020-08-14T21:10:09.3605271Z 	at java.net.URLClassLoader.findClass(URLClassLoader.java:382)
2020-08-14T21:10:09.3605867Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:419)
2020-08-14T21:10:09.3606454Z 	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)
2020-08-14T21:10:09.3607164Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:352)
2020-08-14T21:10:09.3608030Z 	... 100 more
2020-08-14T21:10:09.3608257Z 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13322842">FLINK-18965</key>
            <summary>ExecutionContextTest.testCatalogs failed with &quot;ClassNotFoundException: org.apache.hadoop.fs.BlockStoragePolicySpi&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lirui">Rui Li</assignee>
                                    <reporter username="dian.fu">Dian Fu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Sat, 15 Aug 2020 02:10:22 +0000</created>
                <updated>Tue, 18 Aug 2020 06:38:09 +0000</updated>
                            <resolved>Tue, 18 Aug 2020 06:38:08 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.12.0</fixVersion>
                                    <component>Connectors / Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17178450" author="dian.fu" created="Sun, 16 Aug 2020 09:54:53 +0000"  >&lt;p&gt;Another instance:&#160;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5555&amp;amp;view=logs&amp;amp;j=a8bc9173-2af6-5ba8-775c-12063b4f1d54&amp;amp;t=46a16c18-c679-5905-432b-9be5d8e27bc6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5555&amp;amp;view=logs&amp;amp;j=a8bc9173-2af6-5ba8-775c-12063b4f1d54&amp;amp;t=46a16c18-c679-5905-432b-9be5d8e27bc6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17178451" author="dian.fu" created="Sun, 16 Aug 2020 10:01:13 +0000"  >&lt;p&gt;Upgrade to &quot;blocker&quot; as the nightly &quot;test_cron_scala212 libraries&quot; will always fail if this issue is not fixed.&lt;/p&gt;</comment>
                            <comment id="17178671" author="dian.fu" created="Mon, 17 Aug 2020 01:22:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5570&amp;amp;view=logs&amp;amp;j=a8bc9173-2af6-5ba8-775c-12063b4f1d54&amp;amp;t=46a16c18-c679-5905-432b-9be5d8e27bc6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=5570&amp;amp;view=logs&amp;amp;j=a8bc9173-2af6-5ba8-775c-12063b4f1d54&amp;amp;t=46a16c18-c679-5905-432b-9be5d8e27bc6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17178781" author="lirui" created="Mon, 17 Aug 2020 07:05:54 +0000"  >&lt;p&gt;The failure is because we have a new &lt;tt&gt;hadoop-hdfs&lt;/tt&gt; (2.8.3) and an old &lt;tt&gt;hadoop-common&lt;/tt&gt; (2.7.5) in classpath. Hive tries to load class &lt;tt&gt;BlockStoragePolicy&lt;/tt&gt; from &lt;tt&gt;hadoop-hdfs&lt;/tt&gt; which in turn tries to load &lt;tt&gt;BlockStoragePolicySpi&lt;/tt&gt;. &lt;tt&gt;BlockStoragePolicySpi&lt;/tt&gt; doesn&apos;t exist in the old &lt;tt&gt;hadoop-common&lt;/tt&gt; and thus the error.&lt;/p&gt;

&lt;p&gt;I checked the dependency tree and found &lt;tt&gt;hadoop-hdfs&lt;/tt&gt; is introduced as a transitive dep of &lt;tt&gt;orc-core&lt;/tt&gt;. And the version is managed by our dependency management (&lt;tt&gt;orc-core&lt;/tt&gt; depends on &lt;tt&gt;hadoop-hdfs-2.2.0&lt;/tt&gt;). That&apos;s why only nightly build fails because nightly build specifies &lt;tt&gt;-Dhadoop.version=2.8.3&lt;/tt&gt;, while by default hadoop version is 2.4.1.&lt;/p&gt;

&lt;p&gt;The failure is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-18659&quot; title=&quot;FileNotFoundException when writing Hive orc tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-18659&quot;&gt;&lt;del&gt;FLINK-18659&lt;/del&gt;&lt;/a&gt; which upgraded the orc version of hive connector (it seems previous orc-core doesn&apos;t depend on &lt;tt&gt;hadoop-hdfs&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="17178782" author="lirui" created="Mon, 17 Aug 2020 07:08:12 +0000"  >&lt;p&gt;I don&apos;t think sql-client tests need the hadoop-hdfs dependency so I&apos;ll try excluding it.&lt;/p&gt;</comment>
                            <comment id="17178791" author="dian.fu" created="Mon, 17 Aug 2020 07:14:54 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt;&#160;for the analysis and fixing this issue.&lt;/p&gt;</comment>
                            <comment id="17179398" author="lzljs3620320" created="Tue, 18 Aug 2020 06:38:09 +0000"  >&lt;p&gt;master:&#160;0c9a13184883bcfa1822b821b8fc9fa48b131e5b&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13318437">FLINK-18659</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hslk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>