<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:44:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-16400] HdfsKindTest.testS3Kind fails in Hadoop 2.4.1 nightly test</title>
                <link>https://issues.apache.org/jira/browse/FLINK-16400</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Log: &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5843&amp;amp;view=logs&amp;amp;j=f8cdcc9b-111a-5332-0026-209cb3eb5d15&amp;amp;t=57d35dc9-027e-5d4a-fbeb-1c24315e6ffb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5843&amp;amp;view=logs&amp;amp;j=f8cdcc9b-111a-5332-0026-209cb3eb5d15&amp;amp;t=57d35dc9-027e-5d4a-fbeb-1c24315e6ffb&lt;/a&gt;&#160;and:&#160;&lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/657296261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/657296261&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
15:57:21.539 [ERROR] Tests run: 6, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.291 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.runtime.fs.hdfs.HdfsKindTest
15:57:21.552 [ERROR] testS3Kind(org.apache.flink.runtime.fs.hdfs.HdfsKindTest)  Time elapsed: 0.032 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.flink.core.fs.UnsupportedFileSystemSchemeException: Could not find a file system implementation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; scheme &lt;span class=&quot;code-quote&quot;&gt;&apos;s3&apos;&lt;/span&gt;. The scheme is directly supported by Flink through the following plugins: flink-s3-fs-hadoop, flink-s3-fs-presto. Please ensure that each plugin resides within its own subfolder within the plugins directory. See https:&lt;span class=&quot;code-comment&quot;&gt;//ci.apache.org/projects/flink/flink-docs-stable/ops/plugins.html &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more information. If you want to use a Hadoop file system &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; that scheme, please add the scheme to the configuration fs.allowed-fallback-filesystems. For a full list of supported file systems, please see https://ci.apache.org/projects/flink/flink-docs-stable/ops/filesystems/.
&lt;/span&gt;	at org.apache.flink.runtime.fs.hdfs.HdfsKindTest.testS3Kind(HdfsKindTest.java:57)

15:57:21.574 [INFO] Running org.apache.flink.runtime.fs.hdfs.HadoopRecoverableWriterOldHadoopWithNoTruncateSupportTest &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13289156">FLINK-16400</key>
            <summary>HdfsKindTest.testS3Kind fails in Hadoop 2.4.1 nightly test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="arvid">Arvid Heise</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 3 Mar 2020 09:08:48 +0000</created>
                <updated>Tue, 22 Jun 2021 14:05:18 +0000</updated>
                            <resolved>Thu, 5 Mar 2020 11:34:09 +0000</resolved>
                                                    <fixVersion>1.11.0</fixVersion>
                                    <component>FileSystems</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17050298" author="rmetzger" created="Tue, 3 Mar 2020 15:12:22 +0000"  >&lt;p&gt;The same error also occurs in the &lt;tt&gt;YarnFileStageTestS3ITCase&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
17:16:23.508 [INFO] Running org.apache.flink.yarn.YarnFileStageTestS3ITCase
17:16:29.337 [ERROR] Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 5.826 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.yarn.YarnFileStageTestS3ITCase
17:16:29.337 [ERROR] testRecursiveUploadForYarnS3a(org.apache.flink.yarn.YarnFileStageTestS3ITCase)  Time elapsed: 0.071 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.flink.core.fs.UnsupportedFileSystemSchemeException: Could not find a file system implementation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; scheme &lt;span class=&quot;code-quote&quot;&gt;&apos;s3a&apos;&lt;/span&gt;. The scheme is directly supported by Flink through the following plugin: flink-s3-fs-hadoop. Please ensure that each plugin resides within its own subfolder within the plugins directory. See https:&lt;span class=&quot;code-comment&quot;&gt;//ci.apache.org/projects/flink/flink-docs-stable/ops/plugins.html &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more information. If you want to use a Hadoop file system &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; that scheme, please add the scheme to the configuration fs.allowed-fallback-filesystems. For a full list of supported file systems, please see https://ci.apache.org/projects/flink/flink-docs-stable/ops/filesystems/.
&lt;/span&gt;	at org.apache.flink.yarn.YarnFileStageTestS3ITCase.testRecursiveUploadForYarn(YarnFileStageTestS3ITCase.java:157)
	at org.apache.flink.yarn.YarnFileStageTestS3ITCase.testRecursiveUploadForYarnS3a(YarnFileStageTestS3ITCase.java:197)
17:16:29.368 [INFO] 
17:16:29.368 [INFO] Results:
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this run: &lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/657296271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/657296271&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;Interestingly, it does not surface on the same run on AZP: &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5843&amp;amp;view=logs&amp;amp;j=c2f345e3-6738-50c0-333e-11265e9cd7e4&amp;amp;t=bfc49226-e770-5168-1d5a-8fe08e0d5386&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5843&amp;amp;view=logs&amp;amp;j=c2f345e3-6738-50c0-333e-11265e9cd7e4&amp;amp;t=bfc49226-e770-5168-1d5a-8fe08e0d5386&lt;/a&gt;&lt;br/&gt;
It logs &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-03-03T01:32:52.8933937Z [INFO]  T E S T S
2020-03-03T01:32:52.8934558Z [INFO] -------------------------------------------------------
2020-03-03T01:32:53.1954466Z [INFO] Running org.apache.flink.yarn.YarnFileStageTestS3ITCase
2020-03-03T01:32:53.6854001Z [WARNING] Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.488 s - in org.apache.flink.yarn.YarnFileStageTestS3ITCase
2020-03-03T01:32:54.0205161Z [INFO] 
2020-03-03T01:32:54.0206010Z [INFO] Results:
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;... so it seems the test was skipped because the &lt;tt&gt;NativeS3FileSystem&lt;/tt&gt; was not in the classpath.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; Do you have an idea why this is happening?&lt;br/&gt;
The only difference I can see between these two tests is that on Travis, we are using &lt;tt&gt;PROFILE=&quot;-Dhadoop.version=2.8.3 -Dinclude_hadoop_aws -Dscala-2.12 -Phive-1.2.1&quot;&lt;/tt&gt;, while on azure, it is &lt;tt&gt;PROFILE=&quot;-Dinclude-hadoop -Dhadoop.version=2.8.3 -Dinclude_hadoop_aws -Dscala-2.12 -Phive-1.2.1&quot;&lt;/tt&gt; (-Dinclude-hadoop is set on AZP). &lt;/p&gt;</comment>
                            <comment id="17050301" author="arvid" created="Tue, 3 Mar 2020 15:19:11 +0000"  >&lt;p&gt;That is most likely caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16015&quot; title=&quot;Refine fallback filesystems to only handle specific filesystems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16015&quot;&gt;&lt;del&gt;FLINK-16015&lt;/del&gt;&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;We could either remove these tests or use a workaround similar to &lt;a href=&quot;https://github.com/apache/flink/blob/91399fe2cd23850ba59b9d157863188cc194962c/flink-core/src/test/java/org/apache/flink/core/fs/FileSystemTest.java#L91-L106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/91399fe2cd23850ba59b9d157863188cc194962c/flink-core/src/test/java/org/apache/flink/core/fs/FileSystemTest.java#L91-L106&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="17051027" author="pnowojski" created="Wed, 4 Mar 2020 09:20:23 +0000"  >&lt;p&gt;What is the purpose of those tests? Should they be using fallback filesystem in the first place? I think we shouldn&apos;t remove them unless we know what are they testing and that we have the test coverage for the same thing somewhere else.&lt;/p&gt;</comment>
                            <comment id="17051047" author="stephanewen" created="Wed, 4 Mar 2020 09:37:21 +0000"  >&lt;p&gt;We added the &quot;kind&quot; at some point to differentiate between file systems with proper directory semantics and object stores. To avoid doing some &quot;create parent directory&quot; and &quot;delete directory&quot; calls, which are very expensive (metadata operations).&lt;/p&gt;

&lt;p&gt;I think this is not important any more, with new changes in the checkpointing abstraction and the streaming file sink. We do this better now, having proper initialization phases. We can probably remove this, the &quot;getFsKind()&quot; method seems also unused outside tests.&lt;/p&gt;</comment>
                            <comment id="17051263" author="zentol" created="Wed, 4 Mar 2020 14:21:49 +0000"  >&lt;p&gt;Can we just revert the commit for now? Multiple tests were broken.&lt;/p&gt;</comment>
                            <comment id="17051271" author="zentol" created="Wed, 4 Mar 2020 14:30:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; S3 tests are skipped on AZP because credentials aren&apos;t set.&lt;/p&gt;</comment>
                            <comment id="17052037" author="pnowojski" created="Thu, 5 Mar 2020 11:34:09 +0000"  >&lt;p&gt;Merged as be0eb54777 3e66fcfd25&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0c41c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>`org.apache.flink.core.fs.FileSystem#getKind` method has been formally deprecated, as it was not used by Flink.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>