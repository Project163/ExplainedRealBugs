<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:57:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-22795] Throw better exception when executing remote SQL file in SQL Client</title>
                <link>https://issues.apache.org/jira/browse/FLINK-22795</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;hi, all&lt;/p&gt;

&lt;p&gt;When I executed following command in Flink 1.13&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bin/sql-client.sh -f hdfs:/user/test.sql
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The exception is unclear to me:&lt;br/&gt;
 &#160;&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.flink.table.client.SqlClientException: Unexpected exception. This is a bug. Please consider filing an issue.&lt;br/&gt;
 &#160;at org.apache.flink.table.client.SqlClient.startClient(SqlClient.java:201)&lt;br/&gt;
 &#160;at org.apache.flink.table.client.SqlClient.main(SqlClient.java:161)&lt;br/&gt;
 &#160;Caused by: org.apache.flink.table.client.gateway.SqlExecutionException: Fail to read content from the /opt/flink-1.13.0/hdfs:/user/test.sql.&lt;br/&gt;
 &#160;at org.apache.flink.table.client.SqlClient.readFromURL(SqlClient.java:250)&lt;br/&gt;
 &#160;at org.apache.flink.table.client.SqlClient.readExecutionContent(SqlClient.java:239)&lt;br/&gt;
 &#160;at org.apache.flink.table.client.SqlClient.openCli(SqlClient.java:153)&lt;br/&gt;
 &#160;at org.apache.flink.table.client.SqlClient.start(SqlClient.java:95)&lt;br/&gt;
 &#160;at org.apache.flink.table.client.SqlClient.startClient(SqlClient.java:187)&lt;br/&gt;
 &#160;... 1 more&lt;br/&gt;
 &lt;font color=&quot;#de350b&quot;&gt; &#160;Caused by: java.io.FileNotFoundException: /opt/flink-1.13.0/hdfs:/user/test.sql (No such file or directory)&lt;/font&gt; &#160;at java.io.FileInputStream.open0(Native Method)&lt;br/&gt;
 &#160;at java.io.FileInputStream.open(FileInputStream.java:195)&lt;br/&gt;
 &#160;at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:138)&lt;br/&gt;
 &#160;at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:93)&lt;br/&gt;
 &#160;at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:90)&lt;br/&gt;
 &#160;at sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:188)&lt;br/&gt;
 &#160;at java.net.URL.openStream(URL.java:1045)&lt;br/&gt;
 &#160;at org.apache.commons.io.IOUtils.toString(IOUtils.java:2764)&lt;br/&gt;
 &#160;at org.apache.flink.table.client.SqlClient.readFromURL(SqlClient.java:247)&lt;br/&gt;
 &#160;... 5 more&lt;/p&gt;

&lt;p&gt;&#160;Shutting down the session...&lt;br/&gt;
 &#160;done.&lt;/p&gt;

&lt;p&gt;I think we should improve the exception message at first, and then it&apos;s great if we can support load file from HDFS.&lt;/p&gt;</description>
                <environment>&lt;p&gt;flink 1.13&lt;/p&gt;

&lt;p&gt;hadoop2.6.0&lt;/p&gt;</environment>
        <key id="13380918">FLINK-22795</key>
            <summary>Throw better exception when executing remote SQL file in SQL Client</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="JasonLee">JasonLee</assignee>
                                    <reporter username="mangguozhi">gtk96</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 28 May 2021 07:03:32 +0000</created>
                <updated>Thu, 23 Sep 2021 17:22:05 +0000</updated>
                            <resolved>Thu, 3 Jun 2021 03:55:20 +0000</resolved>
                                    <version>1.13.0</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.13.2</fixVersion>
                                    <component>Table SQL / Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17353010" author="dawidwys" created="Fri, 28 May 2021 07:05:54 +0000"  >&lt;p&gt;Please use English in the JIRA. Feel free to reopen once you translate the ticket.&lt;/p&gt;</comment>
                            <comment id="17353015" author="leonard xu" created="Fri, 28 May 2021 07:17:07 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mangguozhi&quot; class=&quot;user-hover&quot; rel=&quot;mangguozhi&quot;&gt;mangguozhi&lt;/a&gt;&#160;for report this.&lt;/p&gt;

&lt;p&gt;Currently both sql file and sql jars in sql client loaded by `-f`, `-j` command option only support local file, and does not support remote file system files.&lt;/p&gt;

&lt;p&gt;I think we can check file path and throw better exception message.&lt;/p&gt;

&lt;p&gt;For support loading remote files, it should be another topic we can also discuss here.&lt;/p&gt;</comment>
                            <comment id="17353020" author="jark" created="Fri, 28 May 2021 07:37:04 +0000"  >&lt;p&gt;+1 to improve exception messages. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fsk119&quot; class=&quot;user-hover&quot; rel=&quot;fsk119&quot;&gt;fsk119&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17353745" author="jasonlee" created="Sat, 29 May 2021 12:21:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;Hi Jark, I want to help solve this problem. I think we just need to add a parameter check in the startClient method and throw a clearer exception. Please assign it to me Thanks.&lt;/p&gt;</comment>
                            <comment id="17353766" author="jark" created="Sat, 29 May 2021 14:22:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JasonLee&quot; class=&quot;user-hover&quot; rel=&quot;JasonLee&quot;&gt;JasonLee&lt;/a&gt;, yes. You can learn how to check from this code: &lt;a href=&quot;https://github.com/apache/flink/blob/34ff7537d3746ca6c6e14742eab0982ebde733b0/flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/gateway/context/SessionContext.java#L350&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/34ff7537d3746ca6c6e14742eab0982ebde733b0/flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/gateway/context/SessionContext.java#L350&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17353915" author="jasonlee" created="Sun, 30 May 2021 02:32:33 +0000"  >&lt;p&gt;After reading the above code, I think we should put the sqlexecutionexception under the client package so that embedded and gateway modes can share the sqlexecutionexception. What do you think&lt;/p&gt;</comment>
                            <comment id="17354001" author="mangguozhi" created="Sun, 30 May 2021 12:59:44 +0000"  >&lt;p&gt;It would be better if remote files can be supported in subsequent versions&lt;/p&gt;</comment>
                            <comment id="17354179" author="fsk119" created="Mon, 31 May 2021 02:19:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JasonLee&quot; class=&quot;user-hover&quot; rel=&quot;JasonLee&quot;&gt;JasonLee&lt;/a&gt; You can just submit a code patch and we can understand more clearly. &lt;/p&gt;</comment>
                            <comment id="17356144" author="jark" created="Thu, 3 Jun 2021 03:55:20 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;master: b9d60216435af9e0e3c5c0b3bfaa2c193e89280e&lt;/li&gt;
	&lt;li&gt;release-1.13: 43da9f5394e1054a984f56a416566d140b752412&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rgeo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>