<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:40:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-13491] AsyncWaitOperator doesn&apos;t handle endInput call properly</title>
                <link>https://issues.apache.org/jira/browse/FLINK-13491</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;This is the same issue as for &lt;tt&gt;ContinousFileReaderOperator&lt;/tt&gt; in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13376&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-13376&lt;/a&gt;. &lt;tt&gt;AsyncWaitOperator&lt;/tt&gt; will propagate &lt;tt&gt;endInput&lt;/tt&gt; notification immediately, even if it has some records buffered.&lt;/p&gt;

&lt;p&gt;Side note, this also shows that the current &lt;tt&gt;BoundedOneInput#endInput&lt;/tt&gt; API is easy to mishandle if an operator buffers some records internally. Maybe we could redesign this API somehow &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sunhaibotb&quot; class=&quot;user-hover&quot; rel=&quot;sunhaibotb&quot;&gt;sunhaibotb&lt;/a&gt;?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13247797">FLINK-13491</key>
            <summary>AsyncWaitOperator doesn&apos;t handle endInput call properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="SleePy">Biao Liu</assignee>
                                    <reporter username="pnowojski">Piotr Nowojski</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 30 Jul 2019 08:20:00 +0000</created>
                <updated>Thu, 1 Aug 2019 10:17:45 +0000</updated>
                            <resolved>Thu, 1 Aug 2019 10:17:45 +0000</resolved>
                                    <version>1.9.0</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16895920" author="aljoscha" created="Tue, 30 Jul 2019 08:41:04 +0000"  >&lt;p&gt;I feel it&apos;s the same problem as &lt;tt&gt;cancel()&lt;/tt&gt; and &lt;tt&gt;prepareSnapshotPreBarrier()&lt;/tt&gt;, i.e. users have to make sure to flush data and wait. I don&apos;t know if there is a way around that actually.&lt;/p&gt;</comment>
                            <comment id="16895922" author="sleepy" created="Tue, 30 Jul 2019 08:46:17 +0000"  >&lt;p&gt;Oops! Is there any more operators buffering data? &lt;/p&gt;

&lt;p&gt;+1 to rethink the &lt;tt&gt;endInput&lt;/tt&gt; API. But I guess there is no enough time to do it in 1.9.&lt;/p&gt;</comment>
                            <comment id="16895937" author="maguowei" created="Tue, 30 Jul 2019 09:08:22 +0000"  >&lt;p&gt;Currently, Operatorchain calls all operator&apos;s &quot;endInput&quot; together.&lt;/p&gt;

&lt;p&gt;An alternative way likes&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
operator1.endInput()
operator1.close()
operator2.endInput
operator2.close()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
 this could flush the buffer data in the operator.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16895958" author="sunhaibotb" created="Tue, 30 Jul 2019 09:36:13 +0000"  >&lt;p&gt;So for one-input operator, &lt;tt&gt;endInput()&lt;/tt&gt;&#160;repeats &lt;tt&gt;close()&lt;/tt&gt;&#160;semantically. Maybe we don&apos;t need &lt;tt&gt;BoundedOneInput&lt;/tt&gt;, but we need to call &lt;tt&gt;close()&lt;/tt&gt;&#160;immediately when the input is finished?&lt;/p&gt;</comment>
                            <comment id="16895973" author="sunhaibotb" created="Tue, 30 Jul 2019 09:51:13 +0000"  >&lt;p&gt;For two-input operator, &lt;tt&gt;endInput(int inputId)&lt;/tt&gt; is semantically different from &lt;tt&gt;close()&lt;/tt&gt;, but should we call &lt;tt&gt;close()&lt;/tt&gt; immediately after the last input is finished?&lt;/p&gt;</comment>
                            <comment id="16895977" author="pnowojski" created="Tue, 30 Jul 2019 09:54:03 +0000"  >&lt;p&gt;Re API changes, I was afraid of such answer.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SleePy&quot; class=&quot;user-hover&quot; rel=&quot;SleePy&quot;&gt;SleePy&lt;/a&gt;, I&apos;m not aware of more of such operators. &lt;/p&gt;

&lt;p&gt;However there is also one more potential issue. Processing time timers, they can be still firing after &lt;tt&gt;endInput()&lt;/tt&gt; was called, which might mean that more records will be produced. I briefly discussed this with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; and we think that at least for now, we can say that &lt;tt&gt;endInput&lt;/tt&gt; combined with processing time timers have undefined behaviour. Probably we should document this undefined behaviour in the java doc of &lt;tt&gt;BoundedOneInput&lt;/tt&gt; and &lt;tt&gt;BoundedMultiInput&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16896084" author="sleepy" created="Tue, 30 Jul 2019 12:35:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;, I guess the next step is keeping the interface &lt;tt&gt;endInput&lt;/tt&gt; and fixing &lt;tt&gt;AsyncWaitOperator&lt;/tt&gt;. Am I right?&lt;/p&gt;</comment>
                            <comment id="16896094" author="pnowojski" created="Tue, 30 Jul 2019 12:40:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SleePy&quot; class=&quot;user-hover&quot; rel=&quot;SleePy&quot;&gt;SleePy&lt;/a&gt; at least for 1.9 release: yes we should keep the current interfaces. Will you be able to work on this issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SleePy&quot; class=&quot;user-hover&quot; rel=&quot;SleePy&quot;&gt;SleePy&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;For the future, we might want to re-think the API and/or revisit &lt;tt&gt;BoundedOneInput&lt;/tt&gt; case as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sunhaibotb&quot; class=&quot;user-hover&quot; rel=&quot;sunhaibotb&quot;&gt;sunhaibotb&lt;/a&gt; suggested, but that&apos;s a separate topic.&lt;/p&gt;
</comment>
                            <comment id="16896101" author="sleepy" created="Tue, 30 Jul 2019 12:44:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;, I agree we should keep it at least for 1.9.&lt;br/&gt;
I will fix it. Could you assign this ticket to me?&lt;/p&gt;</comment>
                            <comment id="16897944" author="pnowojski" created="Thu, 1 Aug 2019 10:17:45 +0000"  >&lt;p&gt;Merged as cf763d51a8941f48733c08e924c340573d537f3f to master&lt;br/&gt;
Merged as bd4328dbcea908191b669e53b57b790a4e627ecd to release-1.9&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13247776">FLINK-13486</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z055cw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>