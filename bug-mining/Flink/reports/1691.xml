<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6580] Flink on YARN doesnt start with default parameters</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6580</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Just doing &lt;tt&gt;./bin/yarn-session.sh -n 1&lt;/tt&gt; fails with &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; deploying YARN cluster: Couldn&apos;t deploy Yarn cluster
java.lang.RuntimeException: Couldn&apos;t deploy Yarn cluster
	at org.apache.flink.yarn.AbstractYarnClusterDescriptor.deploy(AbstractYarnClusterDescriptor.java:436)
	at org.apache.flink.yarn.cli.FlinkYarnSessionCli.run(FlinkYarnSessionCli.java:626)
	at org.apache.flink.yarn.cli.FlinkYarnSessionCli$1.call(FlinkYarnSessionCli.java:482)
	at org.apache.flink.yarn.cli.FlinkYarnSessionCli$1.call(FlinkYarnSessionCli.java:479)
	at org.apache.flink.runtime.security.HadoopSecurityContext$1.run(HadoopSecurityContext.java:43)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:415)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1671)
	at org.apache.flink.runtime.security.HadoopSecurityContext.runSecured(HadoopSecurityContext.java:40)
	at org.apache.flink.yarn.cli.FlinkYarnSessionCli.main(FlinkYarnSessionCli.java:479)
Caused by: java.lang.IllegalArgumentException: The configuration value &lt;span class=&quot;code-quote&quot;&gt;&apos;containerized.heap-cutoff-min&apos;&lt;/span&gt; is higher (600) than the requested amount of memory 256
	at org.apache.flink.yarn.Utils.calculateHeapSize(Utils.java:100)
	at org.apache.flink.yarn.AbstractYarnClusterDescriptor.setupApplicationMasterContainer(AbstractYarnClusterDescriptor.java:1263)
	at org.apache.flink.yarn.AbstractYarnClusterDescriptor.startAppMaster(AbstractYarnClusterDescriptor.java:803)
	at org.apache.flink.yarn.AbstractYarnClusterDescriptor.deployInternal(AbstractYarnClusterDescriptor.java:568)
	at org.apache.flink.yarn.AbstractYarnClusterDescriptor.deploy(AbstractYarnClusterDescriptor.java:434)
	... 9 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think this issue has been introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5904&quot; title=&quot;jobmanager.heap.mb and taskmanager.heap.mb not work in YARN mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5904&quot;&gt;&lt;del&gt;FLINK-5904&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Flink on YARN is now using the configuration parameters from the configuration file.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13071930">FLINK-6580</key>
            <summary>Flink on YARN doesnt start with default parameters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rmetzger">Robert Metzger</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 May 2017 09:13:45 +0000</created>
                <updated>Mon, 15 May 2017 14:06:26 +0000</updated>
                            <resolved>Mon, 15 May 2017 14:05:39 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16010203" author="rmetzger" created="Mon, 15 May 2017 09:14:19 +0000"  >&lt;p&gt;To fix the issue, I propose to sync with defaults in &lt;tt&gt;flink-conf.yaml&lt;/tt&gt; with &lt;tt&gt;JobManagerOptions&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16010210" author="githubbot" created="Mon, 15 May 2017 09:18:54 +0000"  >&lt;p&gt;GitHub user rmetzger opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3900&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3900&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6580&quot; title=&quot;Flink on YARN doesnt start with default parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6580&quot;&gt;&lt;del&gt;FLINK-6580&lt;/del&gt;&lt;/a&gt; Sync default heap sizes from code with config file&lt;/p&gt;

&lt;p&gt;    Flink didn&apos;t start on YARN anymore without explicit configuration of JM and TM heap because the default heap sizes in the yaml file were set too low.&lt;br/&gt;
    This PR increases the default heap sizes according to the `TaskManagerOptions` and `JobManagerOptions` classes.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rmetzger/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rmetzger/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6580&quot; title=&quot;Flink on YARN doesnt start with default parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6580&quot;&gt;&lt;del&gt;FLINK-6580&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3900.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3900.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3900&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d115416613313f5d01a47e92c33e87b3075008e8&lt;br/&gt;
Author: Robert Metzger &amp;lt;rmetzger@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-05-15T09:15:48Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6580&quot; title=&quot;Flink on YARN doesnt start with default parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6580&quot;&gt;&lt;del&gt;FLINK-6580&lt;/del&gt;&lt;/a&gt; Sync default heap sizes from code with config file&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16010486" author="githubbot" created="Mon, 15 May 2017 13:16:48 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3900&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3900&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Do we know the underlying reason that is causing YARN to fail now? None of the config values seem to have changed in a long time.&lt;/p&gt;</comment>
                            <comment id="16010490" author="githubbot" created="Mon, 15 May 2017 13:18:26 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3900&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3900&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    nvm, found the reference to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5904&quot; title=&quot;jobmanager.heap.mb and taskmanager.heap.mb not work in YARN mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5904&quot;&gt;&lt;del&gt;FLINK-5904&lt;/del&gt;&lt;/a&gt; in the JIRA.&lt;/p&gt;</comment>
                            <comment id="16010494" author="githubbot" created="Mon, 15 May 2017 13:19:13 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3900#discussion_r116487520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3900#discussion_r116487520&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/configuration/JobManagerOptions.java &amp;#8212;&lt;br/&gt;
    @@ -62,7 +62,7 @@&lt;br/&gt;
     	 */&lt;br/&gt;
     	public static final ConfigOption&amp;lt;Integer&amp;gt; JOB_MANAGER_HEAP_MEMORY =&lt;br/&gt;
     		key(&quot;jobmanager.heap.mb&quot;)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;.defaultValue(1024);&lt;br/&gt;
    +		.defaultValue(768);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Why not 1024?&lt;/p&gt;</comment>
                            <comment id="16010522" author="githubbot" created="Mon, 15 May 2017 13:38:48 +0000"  >&lt;p&gt;Github user rmetzger commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3900#discussion_r116492253&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3900#discussion_r116492253&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/configuration/JobManagerOptions.java &amp;#8212;&lt;br/&gt;
    @@ -62,7 +62,7 @@&lt;br/&gt;
     	 */&lt;br/&gt;
     	public static final ConfigOption&amp;lt;Integer&amp;gt; JOB_MANAGER_HEAP_MEMORY =&lt;br/&gt;
     		key(&quot;jobmanager.heap.mb&quot;)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;.defaultValue(1024);&lt;br/&gt;
    +		.defaultValue(768);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Yeah, I&apos;ll go back to 1024.&lt;/p&gt;</comment>
                            <comment id="16010524" author="githubbot" created="Mon, 15 May 2017 13:39:10 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3900&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3900&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @zentol do you agree to merge this now. Its the last thing I would like to get into RC1.&lt;/p&gt;</comment>
                            <comment id="16010554" author="githubbot" created="Mon, 15 May 2017 13:57:52 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3900&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3900&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge after you&apos;ve changed it back to 1024.&lt;/p&gt;</comment>
                            <comment id="16010570" author="rmetzger" created="Mon, 15 May 2017 14:05:39 +0000"  >&lt;p&gt;Resolved for 1.3 in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/89e90f31&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/89e90f31&lt;/a&gt;&lt;br/&gt;
For 1.4 in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/55010d0b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/55010d0b&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16010575" author="githubbot" created="Mon, 15 May 2017 14:06:26 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3900&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3900&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3eysv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>