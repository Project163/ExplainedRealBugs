<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:59:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-23183] Lost ACKs for redelivered messages in RMQSource </title>
                <link>https://issues.apache.org/jira/browse/FLINK-23183</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;As described in the&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-20244&quot; title=&quot;RMQSource does not ACK duplicated messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-20244&quot;&gt;&lt;del&gt;FLINK-20244&lt;/del&gt;&lt;/a&gt;, the redelivered messages are not acknowledged properly (only applicable when autoAck is disabled). When used with a prefetch count in the consumer it may even lead to stop the source to consume any more messages.&lt;/p&gt;


&lt;p&gt; The solution (proposed in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-20244&quot; title=&quot;RMQSource does not ACK duplicated messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-20244&quot;&gt;&lt;del&gt;FLINK-20244&lt;/del&gt;&lt;/a&gt;) should resolve the issue. All successfully consumed RMQ messages should be acknowledged, regardless of whether the message is ignored or processed further in the pipeline. The &lt;tt&gt;sessionIds.add(deliveryTag)&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-connectors/flink-connector-rabbitmq/src/main/java/org/apache/flink/streaming/connectors/rabbitmq/RMQSource.java#L423&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;RMQSource.java#L423&lt;/a&gt;) should be called before checking if the message has already been processed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13386513">FLINK-23183</key>
            <summary>Lost ACKs for redelivered messages in RMQSource </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cmick">Micha&#322; Ciesielczyk</assignee>
                                    <reporter username="cmick">Micha&#322; Ciesielczyk</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 29 Jun 2021 11:58:53 +0000</created>
                <updated>Wed, 15 Dec 2021 01:40:25 +0000</updated>
                            <resolved>Wed, 4 Aug 2021 08:20:18 +0000</resolved>
                                    <version>1.13.1</version>
                    <version>1.12.4</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.13.3</fixVersion>
                    <fixVersion>1.12.8</fixVersion>
                                    <component>Connectors/ RabbitMQ</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17379313" author="cmick" created="Mon, 12 Jul 2021 18:14:17 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpaul&quot; class=&quot;user-hover&quot; rel=&quot;fpaul&quot;&gt;fpaul&lt;/a&gt;, I&apos;ve prepared a PR that fixes the issue: &lt;a href=&quot;https://github.com/apache/flink/pull/16472&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/16472&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The proposed fix is similar to the one discussed, but instead of &lt;tt&gt;basic.ack&lt;/tt&gt;,&#160; &lt;tt&gt;basic.reject&lt;/tt&gt; is sent on redelivered but not processed messages. It seems to be more appropriate here (though the difference is just semantics, not the actual behavior). As the RabbitMQ documentation (&lt;a href=&quot;https://www.rabbitmq.com/confirms.html#acknowledgement-modes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.rabbitmq.com/confirms.html#acknowledgement-modes&lt;/a&gt;) states:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Positive acknowledgements simply instruct RabbitMQ to record a message as delivered and can be discarded. Negative acknowledgements with basic.reject have the same effect. The difference is primarily in the semantics: positive acknowledgements assume a message was successfully processed while their negative counterpart suggests that a delivery wasn&apos;t processed but still should be deleted.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, when a message that was previously received, processed, and successfully check-pointed, is redelivered again (e.g. due to previous acknowledgment process failure), it will be acknowledged immediately using &lt;tt&gt;basic.reject&lt;/tt&gt; method.&lt;/p&gt;</comment>
                            <comment id="17392843" author="arvid" created="Wed, 4 Aug 2021 08:19:50 +0000"  >&lt;p&gt;Merged into master as 900af3e43eb34f8899a4509a8f6c8e43d72f1cc8, into 1.13 as 0ecb730e569de59b2e60a96405d8b138634b29b2, and into 1.12 as 7e17c1d19da0e2330c508928cd3f1fc1e9494d03. Thank you very much!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13341575">FLINK-20244</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0seuw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>