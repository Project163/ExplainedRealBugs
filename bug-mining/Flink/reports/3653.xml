<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15489] WebUI log refresh not working</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15489</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;There is no way to query the latest state of logs of jobmanager/taskmanager.&lt;/p&gt;

&lt;p&gt;The Web UI show only the first version that was ever displayed.&lt;/p&gt;

&lt;p&gt;How to reproduce:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(not sure if necessary) configure logback as described here: &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-stable/dev/best_practices.html#use-logback-when-running-flink-on-a-cluster&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.apache.org/projects/flink/flink-docs-stable/dev/best_practices.html#use-logback-when-running-flink-on-a-cluster&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;start a cluster&lt;/li&gt;
	&lt;li&gt;show jobmanager logs in the Web UI&lt;/li&gt;
	&lt;li&gt;run example job&lt;/li&gt;
	&lt;li&gt;check again the jobmanager logs, there is no trace of the job. Clicking the refresh button does not help&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13277700">FLINK-15489</key>
            <summary>WebUI log refresh not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vthinkxie">Yadong Xie</assignee>
                                    <reporter username="dwysakowicz">Dawid Wysakowicz</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 6 Jan 2020 13:02:51 +0000</created>
                <updated>Wed, 29 Jan 2020 08:55:37 +0000</updated>
                            <resolved>Thu, 16 Jan 2020 11:45:03 +0000</resolved>
                                    <version>1.9.1</version>
                    <version>1.10.0</version>
                                    <fixVersion>1.9.2</fixVersion>
                    <fixVersion>1.10.0</fixVersion>
                                    <component>Runtime / Web Frontend</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17008955" author="gjy" created="Mon, 6 Jan 2020 15:44:36 +0000"  >&lt;p&gt;I promoted this to Blocker.&lt;/p&gt;</comment>
                            <comment id="17008962" author="dawidwys" created="Mon, 6 Jan 2020 15:58:08 +0000"  >&lt;p&gt;I did not mark it as a blocker, because I suspect it was present also in the previous versions. I have not checked it though.&lt;/p&gt;</comment>
                            <comment id="17008967" author="gjy" created="Mon, 6 Jan 2020 16:03:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vthinkxie&quot; class=&quot;user-hover&quot; rel=&quot;vthinkxie&quot;&gt;vthinkxie&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lining&quot; class=&quot;user-hover&quot; rel=&quot;lining&quot;&gt;lining&lt;/a&gt; Do you want to take a look?&lt;/p&gt;</comment>
                            <comment id="17009307" author="vthinkxie" created="Tue, 7 Jan 2020 02:26:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;could you find the log file in the log folder? if the log file is in the folder, the problem may caused by the design of the previous version.&lt;/p&gt;

&lt;p&gt;we are working to change it in FLIP-75&#160;&lt;a href=&quot;https://docs.google.com/document/d/1tIa8yN2prWWKJI_fa1u0t6h1r6RJpp56m48pXEyh6iI/edit#heading=h.fqhp0akm21zi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.google.com/document/d/1tIa8yN2prWWKJI_fa1u0t6h1r6RJpp56m48pXEyh6iI/edit#heading=h.fqhp0akm21zi&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and the related Jira is here&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13987&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-13987&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17010879" author="gjy" created="Wed, 8 Jan 2020 18:01:10 +0000"  >&lt;p&gt;I just tested this in 1.9.1. Indeed, the JM log refresh does not work as expected. In the Firefox inspector I can see that most of the XHR requests are hitting the browser cache when I press the refresh button (see attached screenshot).&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12990237/12990237_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;I think this is because we set the &lt;tt&gt;Cache-Control&lt;/tt&gt; HTTP header in Flink&apos;s &lt;tt&gt;StaticFileServerHandler&lt;/tt&gt; to 300 seconds &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. Using &lt;tt&gt;curl&lt;/tt&gt;, I can confirm that the header is set &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl -vvv -s http://localhost:8081/jobmanager/log 1&amp;gt; /dev/null
*   Trying ::1...
* TCP_NODELAY set
* Connected to localhost (::1) port 8081 (#0)
&amp;gt; GET /jobmanager/log HTTP/1.1
&amp;gt; Host: localhost:8081
&amp;gt; User-Agent: curl/7.54.0
&amp;gt; Accept: */*
&amp;gt;
&amp;lt; HTTP/1.1 200 OK
&amp;lt; Content-Type: text/plain
&amp;lt; Date: Wed, 08 Jan 2020 17:54:17 GMT
&amp;lt; Expires: Wed, 08 Jan 2020 17:59:17 GMT
&amp;lt; Cache-Control: private, max-age=300
&amp;lt; Last-Modified: Wed, 08 Jan 2020 17:54:17 GMT
&amp;lt; Connection: keep-alive
&amp;lt; content-length: 641263
&amp;lt;
{ [16384 bytes data]
* Connection #0 to host localhost left intact
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/flink/blob/bd56224c3063fd23d508a4250e5698d4840fa488/flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/legacy/files/StaticFileServerHandler.java#L361&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/bd56224c3063fd23d508a4250e5698d4840fa488/flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/legacy/files/StaticFileServerHandler.java#L361&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17011617" author="vthinkxie" created="Thu, 9 Jan 2020 09:40:31 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lining&quot; class=&quot;user-hover&quot; rel=&quot;lining&quot;&gt;lining&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17011624" author="gjy" created="Thu, 9 Jan 2020 09:49:15 +0000"  >&lt;p&gt;An easy but maybe hacky fix would be to add a random query parameter to the GET request.&lt;/p&gt;</comment>
                            <comment id="17011627" author="vthinkxie" created="Thu, 9 Jan 2020 09:52:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think&#160;the HTTP_CACHE_SECONDS is a trade-off, decrease the cache time could help&#160;users to get more real-time logs, but it would also increase the pressure of the rest API.&lt;/p&gt;

&lt;p&gt;The&#160;HTTP_CACHE_SECONDS was set to 300 seconds since 5 years ago&#160;&lt;a href=&quot;https://github.com/apache/flink/blame/6f2e9abffb0b1ef68e4f2cf058a24524b61e88a1/flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/legacy/files/StaticFileServerHandler.java#L104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blame/6f2e9abffb0b1ef68e4f2cf058a24524b61e88a1/flink-runtime/src/main/java/org/apache/flink/runtime/rest/handler/legacy/files/StaticFileServerHandler.java#L104&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17011664" author="till.rohrmann" created="Thu, 9 Jan 2020 10:22:52 +0000"  >&lt;p&gt;The strange thing is that the logs are being refreshed if I access &lt;a href=&quot;http://localhost:8081/jobmanager/log&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8081/jobmanager/log&lt;/a&gt; instead of &lt;a href=&quot;http://localhost:8081/#/job-manager/logs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8081/#/job-manager/logs&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vthinkxie&quot; class=&quot;user-hover&quot; rel=&quot;vthinkxie&quot;&gt;vthinkxie&lt;/a&gt;. Hence, I believe there is a problem with how we issue the REST calls from Javascript. Moreover, I believe that this is actually quite an annoying bug for our users. Consequently, we should fix it for the &lt;tt&gt;1.10.0&lt;/tt&gt; release.&lt;/p&gt;</comment>
                            <comment id="17011699" author="vthinkxie" created="Thu, 9 Jan 2020 11:01:10 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I just check the frontend again and can not reproduce the problem&lt;/p&gt;

&lt;p&gt;when clicking the refresh button, you may need to wait some seconds(maybe quite a long time if the log file is very big) before the API response all data and refresh the frontend data, the log won&apos;t refresh immediately.&lt;/p&gt;

&lt;p&gt;could you open the dev tools to double-check the response text and response text?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12990411/12990411_7A1CF604-032D-46D8-AC70-FBB884E868B9.png&quot; height=&quot;349&quot; width=&quot;536&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17011703" author="gjy" created="Thu, 9 Jan 2020 11:09:16 +0000"  >&lt;p&gt;Mac OS X 10.14.6, Firefox 72.0.1 (64-bit)&lt;br/&gt;
Flink 1.9.1&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12990413/12990413_screenshot-2.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17011729" author="vthinkxie" created="Thu, 9 Jan 2020 11:33:29 +0000"  >&lt;p&gt;I can add a &quot;Cache-control: no-store&quot; HTTP header to the log rest API in frontend, but not sure if it could resolve this issue since I can not reproduce it.&lt;/p&gt;

&lt;p&gt;The&#160;new frontend keeps the same HTTP header with the old one&lt;/p&gt;

&lt;p&gt;new:&#160;&lt;a href=&quot;https://github.com/apache/flink/blob/57912987e3c58b68b584bc15cf547329802d626e/flink-runtime-web/web-dashboard/src/app/services/job-manager.service.ts#L38&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/57912987e3c58b68b584bc15cf547329802d626e/flink-runtime-web/web-dashboard/src/app/services/job-manager.service.ts#L38&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;old: &lt;a href=&quot;https://github.com/apache/flink/blob/release-1.8.0/flink-runtime-web/web-dashboard/app/scripts/modules/jobmanager/jobmanager.svc.coffee#L42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/release-1.8.0/flink-runtime-web/web-dashboard/app/scripts/modules/jobmanager/jobmanager.svc.coffee#L42&lt;/a&gt;&lt;br/&gt;
 &#160;&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17011821" author="gjy" created="Thu, 9 Jan 2020 13:40:15 +0000"  >&lt;p&gt;What browser/OS are you using?&lt;/p&gt;</comment>
                            <comment id="17014249" author="vthinkxie" created="Mon, 13 Jan 2020 11:55:11 +0000"  >&lt;p&gt;Hi everyone&lt;/p&gt;

&lt;p&gt;I have created a PR&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/10842&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/10842&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;anyone who met this issue could have a try since I still can not reproduce it in my computer&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17016827" author="gjy" created="Thu, 16 Jan 2020 11:45:03 +0000"  >&lt;p&gt;1.9: 6a124f8be8b73f686033a1b89d934ec7b334bb9f&lt;br/&gt;
1.10: ff79be8adaf0570f3c309a6cfdeee0ad30cdebca&lt;br/&gt;
master: 871266781814066d4a81fd0a4c30b877cbcc11a2&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12990412" name="6E9A4D72-6664-4B00-B02F-57EB2695D967.png" size="1867700" author="vthinkxie" created="Thu, 9 Jan 2020 11:00:08 +0000"/>
                            <attachment id="12990411" name="7A1CF604-032D-46D8-AC70-FBB884E868B9.png" size="1414362" author="vthinkxie" created="Thu, 9 Jan 2020 10:58:37 +0000"/>
                            <attachment id="12990237" name="screenshot-1.png" size="34961" author="gjy" created="Wed, 8 Jan 2020 17:57:51 +0000"/>
                            <attachment id="12990413" name="screenshot-2.png" size="539887" author="gjy" created="Thu, 9 Jan 2020 11:08:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0a7yo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>