<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:09:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-26105] Rolling log filenames cause end-to-end test to fail (example test failure &quot;Running HA (hashmap, async)&quot;)</title>
                <link>https://issues.apache.org/jira/browse/FLINK-26105</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Feb 14 01:31:29 Killed TM @ 255483
Feb 14 01:31:29 Starting &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TM.
Feb 14 01:31:42 Killed TM @ 258722
Feb 14 01:31:42 Starting &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TM.
Feb 14 01:32:00 Checking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; non-empty .out files...
Feb 14 01:32:00 No non-empty .out files.
Feb 14 01:32:00 FAILURE: A JM did not take over.
Feb 14 01:32:00 One or more tests FAILED.
Feb 14 01:32:00 Stopping job timeout watchdog (with pid=250820)
Feb 14 01:32:00 Killing JM watchdog @ 252644
Feb 14 01:32:00 Killing TM watchdog @ 253262
Feb 14 01:32:00 [FAIL] Test script contains errors.
Feb 14 01:32:00 Checking of logs skipped.
Feb 14 01:32:00 
Feb 14 01:32:00 [FAIL] &lt;span class=&quot;code-quote&quot;&gt;&apos;Running HA (hashmap, async) end-to-end test&apos;&lt;/span&gt; failed after 2 minutes and 51 seconds! Test exited with exit code 1
Feb 14 01:32:00 
01:32:00 ##[group]Environment Information
Feb 14 01:32:01 Searching &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; .dump, .dumpstream and related files in &lt;span class=&quot;code-quote&quot;&gt;&apos;/home/vsts/work/1/s&apos;&lt;/span&gt;
dmesg: read kernel buffer failed: Operation not permitted
Feb 14 01:32:06 Stopping taskexecutor daemon (pid: 259377) on host fv-az313-602.
Feb 14 01:32:07 Stopping standalonesession daemon (pid: 256528) on host fv-az313-602.
Feb 14 01:32:08 Stopping zookeeper...
Feb 14 01:32:08 Stopping zookeeper daemon (pid: 251023) on host fv-az313-602.
Feb 14 01:32:09 Skipping taskexecutor daemon (pid: 251636), because it is not running anymore on fv-az313-602.
Feb 14 01:32:09 Skipping taskexecutor daemon (pid: 255483), because it is not running anymore on fv-az313-602.
Feb 14 01:32:09 Skipping taskexecutor daemon (pid: 258722), because it is not running anymore on fv-az313-602.
The STDIO streams did not close within 10 seconds of the exit event from process &lt;span class=&quot;code-quote&quot;&gt;&apos;/usr/bin/bash&apos;&lt;/span&gt;. This may indicate a child process inherited the STDIO streams and has not yet exited.
##[error]Bash exited with code &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;.
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=31347&amp;amp;view=logs&amp;amp;j=e9d3d34f-3d15-59f4-0e3e-35067d100dfe&amp;amp;t=f8a6d3eb-38cf-5cca-9a99-d0badeb5fe62&amp;amp;l=8020&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=31347&amp;amp;view=logs&amp;amp;j=e9d3d34f-3d15-59f4-0e3e-35067d100dfe&amp;amp;t=f8a6d3eb-38cf-5cca-9a99-d0badeb5fe62&amp;amp;l=8020&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13428247">FLINK-26105</key>
            <summary>Rolling log filenames cause end-to-end test to fail (example test failure &quot;Running HA (hashmap, async)&quot;)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mapohl">Matthias Pohl</assignee>
                                    <reporter username="gaoyunhaii">Yun Gao</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Mon, 14 Feb 2022 07:16:58 +0000</created>
                <updated>Fri, 18 Feb 2022 08:51:44 +0000</updated>
                            <resolved>Fri, 18 Feb 2022 08:51:44 +0000</resolved>
                                    <version>1.13.6</version>
                    <version>1.14.3</version>
                    <version>1.15.0</version>
                                    <fixVersion>1.14.4</fixVersion>
                    <fixVersion>1.15.0</fixVersion>
                    <fixVersion>1.13.7</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17491823" author="gaoyunhaii" created="Mon, 14 Feb 2022 07:21:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=31347&amp;amp;view=logs&amp;amp;j=e9d3d34f-3d15-59f4-0e3e-35067d100dfe&amp;amp;t=f8a6d3eb-38cf-5cca-9a99-d0badeb5fe62&amp;amp;l=8020&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=31347&amp;amp;view=logs&amp;amp;j=e9d3d34f-3d15-59f4-0e3e-35067d100dfe&amp;amp;t=f8a6d3eb-38cf-5cca-9a99-d0badeb5fe62&amp;amp;l=8020&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17493219" author="mapohl" created="Wed, 16 Feb 2022 12:56:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=31347&amp;amp;view=logs&amp;amp;j=e9d3d34f-3d15-59f4-0e3e-35067d100dfe&amp;amp;t=f8a6d3eb-38cf-5cca-9a99-d0badeb5fe62&amp;amp;l=8020&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=31347&amp;amp;view=logs&amp;amp;j=e9d3d34f-3d15-59f4-0e3e-35067d100dfe&amp;amp;t=f8a6d3eb-38cf-5cca-9a99-d0badeb5fe62&amp;amp;l=8020&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;FYI: the link from the comment is the same as the one in the issue description, i.e. we only have one error&lt;/p&gt;</comment>
                            <comment id="17493257" author="mapohl" created="Wed, 16 Feb 2022 14:31:46 +0000"  >&lt;p&gt;The failing assert checks the log files for the &quot;Recovered JobGraph&quot; (see &lt;a href=&quot;https://github.com/apache/flink/blob/badce69548a30e77b1964fb570110c241e7703d5/flink-end-to-end-tests/test-scripts/common_ha.sh#L68&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;common_ha.sh:68&lt;/a&gt;) and counts the number of files that contain this substring. 2 log files are expected to contain this substring due to two JM failovers.&lt;/p&gt;

&lt;p&gt;The JM logs reveal that there is a TM connection issue which makes the TM to failover. In the meantime, the JM logs are polluted with &lt;tt&gt;RecipientUnreachableException: Could not send message&lt;/tt&gt; error messages which result in the log rollover strategy to kick in. The older logs (including the JM initialization) move into a &lt;tt&gt;*.log.1&lt;/tt&gt; file which is not considered by the assert in &lt;tt&gt;common_ha.sh&lt;/tt&gt; resulting in the failover.&lt;/p&gt;</comment>
                            <comment id="17493260" author="mapohl" created="Wed, 16 Feb 2022 14:37:02 +0000"  >&lt;p&gt;The issue is caused by us enabling rolling log file names which  is not necessarily considered in the test code. I&apos;m linking &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17166&quot; title=&quot;Modify the log4j-console.properties to also output logs into the files for WebUI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17166&quot;&gt;&lt;del&gt;FLINK-17166&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8357&quot; title=&quot;enable rolling in default log settings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8357&quot;&gt;&lt;del&gt;FLINK-8357&lt;/del&gt;&lt;/a&gt; as causes to reflect that.&lt;/p&gt;</comment>
                            <comment id="17493772" author="mapohl" created="Thu, 17 Feb 2022 08:45:26 +0000"  >&lt;p&gt;I updated the title and added additional affected versions because this issue is also present in older versions of Flink.&lt;/p&gt;</comment>
                            <comment id="17494470" author="mapohl" created="Fri, 18 Feb 2022 08:51:44 +0000"  >&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;master&lt;/tt&gt;:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/commit/a8700ddd0674989d2bb918b56994b4f3405eea41&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a8700ddd0674989d2bb918b56994b4f3405eea41&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/commit/aee12bc412559a50a419907fff51df5f91fc6b52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;aee12bc412559a50a419907fff51df5f91fc6b52&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;release-1.14&lt;/tt&gt;:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/commit/075c65da9813e2302f5dda63e0e738583e3f3ce2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;075c65da9813e2302f5dda63e0e738583e3f3ce2&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/commit/7cebc6cfe1b16a49e67841263b61039f094099a7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;7cebc6cfe1b16a49e67841263b61039f094099a7&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;release-1.13&lt;/tt&gt;:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/commit/f44513693d6a93af60584fa10f9fd6fb5b088869&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;f44513693d6a93af60584fa10f9fd6fb5b088869&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/commit/b3e520dee26c2bc82a6e80f5b22dc22361f4d65e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;b3e520dee26c2bc82a6e80f5b22dc22361f4d65e&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13298561">FLINK-17166</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13128367">FLINK-8357</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0zjco:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>