<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:25:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4833] Unstable test OperatorStatsAccumulatorTest.testAccumulatorHeavyHitterCountMinSketch</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4833</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Some instances:&lt;/p&gt;

&lt;p&gt;view-source:&lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/167801187/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/167801187/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;view-source:&lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/167801191/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/167801191/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;view-source:&lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/167801193/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/167801193/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;view-source:&lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/167801195/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/167801195/log.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13012552">FLINK-4833</key>
            <summary>Unstable test OperatorStatsAccumulatorTest.testAccumulatorHeavyHitterCountMinSketch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10">Implemented</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kkl0u">Kostas Kloudas</reporter>
                        <labels>
                            <label>test-stability</label>
                    </labels>
                <created>Sat, 15 Oct 2016 08:19:41 +0000</created>
                <updated>Mon, 24 Oct 2016 09:10:09 +0000</updated>
                            <resolved>Mon, 24 Oct 2016 09:10:07 +0000</resolved>
                                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15581816" author="mxm" created="Mon, 17 Oct 2016 10:17:33 +0000"  >&lt;p&gt;This can also be tracked down to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4829&quot; title=&quot;Accumulators are not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4829&quot;&gt;&lt;del&gt;FLINK-4829&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15581841" author="rmetzger" created="Mon, 17 Oct 2016 10:28:51 +0000"  >&lt;p&gt;More of this: &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/167840958/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/167840958/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.flink.runtime.client.JobExecutionException: Failed to retrieve accumulator results.
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$7.apply$mcV$sp(JobManager.scala:877)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$7.apply(JobManager.scala:845)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$7.apply(JobManager.scala:845)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)
	at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:41)
	at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(AbstractDispatcher.scala:401)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.pollAndExecAll(ForkJoinPool.java:1253)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1346)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
Caused by: java.lang.RuntimeException: Failed to clone OperatorStatistics!
	at org.apache.flink.contrib.operatorstatistics.OperatorStatistics.clone(OperatorStatistics.java:219)
	at org.apache.flink.contrib.operatorstatistics.OperatorStatisticsAccumulator.clone(OperatorStatisticsAccumulator.java:62)
	at org.apache.flink.api.common.accumulators.AccumulatorHelper.mergeInto(AccumulatorHelper.java:49)
	at org.apache.flink.runtime.executiongraph.ExecutionGraph.aggregateUserAccumulators(ExecutionGraph.java:625)
	at org.apache.flink.runtime.executiongraph.ExecutionGraph.getAccumulatorsSerialized(ExecutionGraph.java:640)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$7.apply$mcV$sp(JobManager.scala:866)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$7.apply(JobManager.scala:845)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$7.apply(JobManager.scala:845)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)
	at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:41)
	at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(AbstractDispatcher.scala:401)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.pollAndExecAll(ForkJoinPool.java:1253)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1346)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)


Results :

Tests in error: 
  OperatorStatsAccumulatorTest.testAccumulatorHeavyHitterCountMinSketch &#194;&#187; JobExecution
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tmendt&quot; class=&quot;user-hover&quot; rel=&quot;tmendt&quot;&gt;tmendt&lt;/a&gt; can you look into the issue?&lt;/p&gt;</comment>
                            <comment id="15581973" author="mxm" created="Mon, 17 Oct 2016 11:36:41 +0000"  >&lt;p&gt;I think this occurs when the TaskManager snapshots the state of the operator statistics operator concurrently with values being added.&lt;/p&gt;

&lt;p&gt;The underlying exception in &lt;tt&gt;CountMinHeavyHitter.merge(..)&lt;/tt&gt; is not properly forwarded. This could be improved in the code operator statistics code. The concurrent modification of snapshotting / accumulator modification can only be solved by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4829&quot; title=&quot;Accumulators are not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4829&quot;&gt;&lt;del&gt;FLINK-4829&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15585028" author="rmetzger" created="Tue, 18 Oct 2016 09:43:56 +0000"  >&lt;p&gt;But why is the error now happening to frequently? Did we change something in the accumulator implementation?&lt;/p&gt;

&lt;p&gt;I got two more cases today:&lt;br/&gt;
&lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/168509703/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/168509703/log.txt&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/168509705/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/168509705/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15588827" author="githubbot" created="Wed, 19 Oct 2016 13:52:40 +0000"  >&lt;p&gt;GitHub user mxm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2660&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2660&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4833&quot; title=&quot;Unstable test OperatorStatsAccumulatorTest.testAccumulatorHeavyHitterCountMinSketch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4833&quot;&gt;&lt;del&gt;FLINK-4833&lt;/del&gt;&lt;/a&gt; properly log exceptions in CountMinHeavyHitter&lt;/p&gt;

&lt;p&gt;    This logs the underlying exception properly which could help us to find the exact cause of the reported problems.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mxm/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mxm/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4833&quot; title=&quot;Unstable test OperatorStatsAccumulatorTest.testAccumulatorHeavyHitterCountMinSketch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4833&quot;&gt;&lt;del&gt;FLINK-4833&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2660.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2660.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2660&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d117c59e704e9faad8d5001cb9b2164cd4aa7b9a&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-10-19T13:50:15Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4833&quot; title=&quot;Unstable test OperatorStatsAccumulatorTest.testAccumulatorHeavyHitterCountMinSketch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4833&quot;&gt;&lt;del&gt;FLINK-4833&lt;/del&gt;&lt;/a&gt; properly log exceptions in CountMinHeavyHitter&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15594717" author="githubbot" created="Fri, 21 Oct 2016 10:16:55 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2660&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2660&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge.&lt;/p&gt;</comment>
                            <comment id="15595040" author="githubbot" created="Fri, 21 Oct 2016 13:18:06 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2660&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2660&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15601413" author="uce" created="Mon, 24 Oct 2016 09:10:08 +0000"  >&lt;p&gt;Fixed in d5b97b0 (master) via removal of the module&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13014662">FLINK-4891</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34xjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>