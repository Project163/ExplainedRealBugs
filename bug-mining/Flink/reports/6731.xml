<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:14:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-29613] Wrong message size assertion in Pulsar&apos;s batch message</title>
                <link>https://issues.apache.org/jira/browse/FLINK-29613</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;java.lang.RuntimeException:&#160;One&#160;or&#160;more&#160;fetchers&#160;have&#160;encountered&#160;exception&lt;br/&gt;
at&#160;nextMessageIdorg.apache.flink.connector.base.source.reader.fetcher.SplitFetcherManager.checkErrors(SplitFetcherManager.java:225)&lt;br/&gt;
at&#160;org.apache.flink.connector.base.source.reader.SourceReaderBase.getNextFetch(SourceReaderBase.java:169)&lt;br/&gt;
at&#160;org.apache.flink.connector.base.source.reader.SourceReaderBase.pollNext(SourceReaderBase.java:130)&lt;br/&gt;
at&#160;org.apache.flink.connector.pulsar.source.reader.source.PulsarOrderedSourceReader.pollNext(PulsarOrderedSourceReader.java:109)&lt;br/&gt;
at&#160;org.apache.flink.streaming.api.operators.SourceOperator.emitNext(SourceOperator.java:385)&lt;br/&gt;
at&#160;org.apache.flink.streaming.runtime.io.StreamTaskSourceInput.emitNext(StreamTaskSourceInput.java:68)&lt;br/&gt;
at&#160;org.apache.flink.streaming.runtime.io.StreamOneInputProcessor.processInput(StreamOneInputProcessor.java:65)&lt;br/&gt;
at&#160;org.apache.flink.streaming.runtime.tasks.StreamTask.processInput(StreamTask.java:519)&lt;br/&gt;
at&#160;org.apache.flink.streaming.runtime.tasks.mailbox.MailboxProcessor.runMailboxLoop(MailboxProcessor.java:203)&lt;br/&gt;
at&#160;org.apache.flink.streaming.runtime.tasks.StreamTask.runMailboxLoop(StreamTask.java:804)&lt;br/&gt;
at&#160;org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:753)&lt;br/&gt;
at&#160;org.apache.flink.runtime.taskmanager.Task.runWithSystemExitMonitoring(Task.java:948)&lt;br/&gt;
at&#160;org.apache.flink.runtime.taskmanager.Task.restoreAndInvoke(Task.java:927)&lt;br/&gt;
at&#160;org.apache.flink.runtime.taskmanager.Task.doRun(Task.java:741)&lt;br/&gt;
at&#160;org.apache.flink.runtime.taskmanager.Task.run(Task.java:563)&lt;br/&gt;
at&#160;java.lang.Thread.run(Thread.java:750)&lt;br/&gt;
Caused&#160;by:&#160;java.lang.RuntimeException:&#160;SplitFetcher&#160;thread&#160;1&#160;received&#160;unexpected&#160;exception&#160;while&#160;polling&#160;the&#160;records&lt;br/&gt;
at&#160;org.apache.flink.connector.base.source.reader.fetcher.SplitFetcher.runOnce(SplitFetcher.java:150)&lt;br/&gt;
at&#160;org.apache.flink.connector.base.source.reader.fetcher.SplitFetcher.run(SplitFetcher.java:105)&lt;br/&gt;
at&#160;java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)&lt;br/&gt;
at&#160;java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
at&#160;java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)&lt;br/&gt;
at&#160;java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
...&#160;1&#160;more&lt;br/&gt;
Suppressed:&#160;java.lang.RuntimeException:&#160;SplitFetcher&#160;thread&#160;0&#160;received&#160;unexpected&#160;exception&#160;while&#160;polling&#160;the&#160;records&lt;br/&gt;
...&#160;7&#160;more&lt;br/&gt;
Caused&#160;by:&#160;java.lang.IllegalArgumentException:&#160;We&#160;only&#160;support&#160;normal&#160;message&#160;id&#160;currently.&lt;br/&gt;
at&#160;org.apache.flink.util.Preconditions.checkArgument(Preconditions.java:138)&lt;br/&gt;
at&#160;org.apache.flink.connector.pulsar.source.enumerator.cursor.MessageIdUtils.unwrapMessageId(MessageIdUtils.java:61)&lt;br/&gt;
at&#160;org.apache.flink.connector.pulsar.source.enumerator.cursor.MessageIdUtils.nextMessageId(MessageIdUtils.java:43)&lt;br/&gt;
at&#160;org.apache.flink.connector.pulsar.source.reader.split.PulsarOrderedPartitionSplitReader.beforeCreatingConsumer(PulsarOrderedPartitionSplitReader.java:94)&lt;br/&gt;
at&#160;org.apache.flink.connector.pulsar.source.reader.split.PulsarPartitionSplitReaderBase.handleSplitsChanges(PulsarPartitionSplitReaderBase.java:160)&lt;br/&gt;
at&#160;org.apache.flink.connector.pulsar.source.reader.split.PulsarOrderedPartitionSplitReader.handleSplitsChanges(PulsarOrderedPartitionSplitReader.java:52)&lt;br/&gt;
at&#160;org.apache.flink.connector.base.source.reader.fetcher.AddSplitsTask.run(AddSplitsTask.java:51)&lt;br/&gt;
at&#160;org.apache.flink.connector.base.source.reader.fetcher.SplitFetcher.runOnce(SplitFetcher.java:142)&lt;br/&gt;
...&#160;6&#160;more&lt;br/&gt;
Caused&#160;by:&#160;java.lang.IllegalArgumentException:&#160;We&#160;only&#160;support&#160;normal&#160;message&#160;id&#160;currently.&lt;br/&gt;
at&#160;org.apache.flink.util.Preconditions.checkArgument(Preconditions.java:138)&lt;br/&gt;
at&#160;org.apache.flink.connector.pulsar.source.enumerator.cursor.MessageIdUtils.unwrapMessageId(MessageIdUtils.java:61)&lt;br/&gt;
at&#160;org.apache.flink.connector.pulsar.source.enumerator.cursor.MessageIdUtils.nextMessageId(MessageIdUtils.java:43)&lt;br/&gt;
at&#160;org.apache.flink.connector.pulsar.source.reader.split.PulsarOrderedPartitionSplitReader.beforeCreatingConsumer(PulsarOrderedPartitionSplitReader.java:94)&lt;br/&gt;
at&#160;org.apache.flink.connector.pulsar.source.reader.split.PulsarPartitionSplitReaderBase.handleSplitsChanges(PulsarPartitionSplitReaderBase.java:160)&lt;br/&gt;
at&#160;org.apache.flink.connector.pulsar.source.reader.split.PulsarOrderedPartitionSplitReader.handleSplitsChanges(PulsarOrderedPartitionSplitReader.java:52)&lt;br/&gt;
at&#160;org.apache.flink.connector.base.source.reader.fetcher.AddSplitsTask.run(AddSplitsTask.java:51)&lt;br/&gt;
at&#160;org.apache.flink.connector.base.source.reader.fetcher.SplitFetcher.runOnce(SplitFetcher.java:142)&lt;br/&gt;
...&#160;6&#160;more&lt;/p&gt;</description>
                <environment></environment>
        <key id="13486037">FLINK-29613</key>
            <summary>Wrong message size assertion in Pulsar&apos;s batch message</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="syhily">Yufan Sheng</assignee>
                                    <reporter username="qiaomengnan">qiaomengnan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 13 Oct 2022 06:29:13 +0000</created>
                <updated>Thu, 20 Oct 2022 02:37:39 +0000</updated>
                            <resolved>Wed, 19 Oct 2022 03:45:21 +0000</resolved>
                                    <version>1.16.0</version>
                    <version>1.17.0</version>
                    <version>1.15.2</version>
                                    <fixVersion>1.16.0</fixVersion>
                    <fixVersion>1.17.0</fixVersion>
                    <fixVersion>1.15.3</fixVersion>
                                    <component>Connectors / Pulsar</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17616859" author="martijnvisser" created="Thu, 13 Oct 2022 08:03:30 +0000"  >&lt;p&gt;I don&apos;t think this is a bug, like the error message says this is currently not supported so it would be a new feature request&lt;/p&gt;

&lt;p&gt;Please explain how this can be reproduced. &lt;/p&gt;</comment>
                            <comment id="17616991" author="syhily" created="Thu, 13 Oct 2022 11:56:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijnvisser&quot; class=&quot;user-hover&quot; rel=&quot;martijnvisser&quot;&gt;martijnvisser&lt;/a&gt; This should be a bug. Because we just accidentally use a wrong assertion for judging if this is a batch message. &lt;/p&gt;</comment>
                            <comment id="17617008" author="martijnvisser" created="Thu, 13 Oct 2022 12:18:33 +0000"  >&lt;p&gt;Thanks for clarifying &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=syhily&quot; class=&quot;user-hover&quot; rel=&quot;syhily&quot;&gt;syhily&lt;/a&gt; - What would be a descriptive title for this ticket? &lt;/p&gt;</comment>
                            <comment id="17617021" author="syhily" created="Thu, 13 Oct 2022 12:42:15 +0000"  >&lt;p&gt;I think it should be &quot;Wrong message size assertion in Pulsar&apos;s batch message&quot;&lt;/p&gt;</comment>
                            <comment id="17619919" author="tison" created="Wed, 19 Oct 2022 01:20:19 +0000"  >&lt;p&gt;master via 8cb0297c2f092f42f989b4811aa438b6810aef8d&lt;br/&gt;
1.15 via f44ffe5a62ebb8992cfcbce0841a0062b6e3cb4d&lt;/p&gt;</comment>
                            <comment id="17619967" author="tison" created="Wed, 19 Oct 2022 03:45:21 +0000"  >&lt;p&gt;1.16 via f625a3244ca2c704eda04bdf3b009ffac1735978&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z19bo0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>