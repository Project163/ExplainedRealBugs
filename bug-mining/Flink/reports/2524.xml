<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:34:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9091] Failure while enforcing releasability in building flink-json module</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9091</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Got the following when building flink-json module:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[WARNING] Rule 0: org.apache.maven.plugins.enforcer.DependencyConvergence failed with message:
Failed &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; enforcing releasability. See above detailed error message.
...
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.0.0-M1:enforce (dependency-convergence) on project flink-json: Some Enforcer rules have failed.   Look above &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; specific messages explaining why the rule failed. -&amp;gt; [Help 1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13148074">FLINK-9091</key>
            <summary>Failure while enforcing releasability in building flink-json module</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yew1eb">Thomas</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 26 Mar 2018 23:28:29 +0000</created>
                <updated>Wed, 2 Oct 2019 17:49:38 +0000</updated>
                            <resolved>Fri, 13 Jul 2018 07:24:30 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.6.0</version>
                                    <fixVersion>1.5.2</fixVersion>
                    <fixVersion>1.6.0</fixVersion>
                                    <component>Build System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16414776" author="yuzhihong@gmail.com" created="Mon, 26 Mar 2018 23:29:25 +0000"  >&lt;p&gt;Here is the environment:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=812M; support was removed in 8.0
Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T07:58:13Z)
Maven home: /a/apache-maven-3.5.2
Java version: 1.8.0_161, vendor: Oracle Corporation
Java home: /a/jdk1.8.0_161/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &lt;span class=&quot;code-quote&quot;&gt;&quot;linux&quot;&lt;/span&gt;, version: &lt;span class=&quot;code-quote&quot;&gt;&quot;3.10.0-327.28.3.el7.x86_64&quot;&lt;/span&gt;, arch: &lt;span class=&quot;code-quote&quot;&gt;&quot;amd64&quot;&lt;/span&gt;, family: &lt;span class=&quot;code-quote&quot;&gt;&quot;unix&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16443652" author="zentol" created="Thu, 19 Apr 2018 07:34:09 +0000"  >&lt;p&gt;Which command did you run? We recently had the same issues when building the documentation, but we couldn&apos;t reproduce it locally.&lt;/p&gt;</comment>
                            <comment id="16447205" author="yew1eb" created="Sun, 22 Apr 2018 11:08:18 +0000"  >&lt;p&gt;+1.&lt;/p&gt;</comment>
                            <comment id="16469496" author="yuzhihong@gmail.com" created="Wed, 9 May 2018 21:05:28 +0000"  >&lt;p&gt;I think I was running &apos;mvn package -DskipTests&apos;&lt;/p&gt;</comment>
                            <comment id="16475809" author="twalthr" created="Tue, 15 May 2018 13:12:56 +0000"  >&lt;p&gt;Does this issue also happen with Maven 3.5.3 on your machine?&lt;/p&gt;</comment>
                            <comment id="16476106" author="yuzhihong@gmail.com" created="Tue, 15 May 2018 16:39:11 +0000"  >&lt;p&gt;Tried the above command on 1.5 RC2.&lt;/p&gt;

&lt;p&gt;No error this time.&lt;/p&gt;

&lt;p&gt;I used Apache Maven 3.5.2&lt;/p&gt;</comment>
                            <comment id="16476972" author="twalthr" created="Wed, 16 May 2018 07:33:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yew1eb&quot; class=&quot;user-hover&quot; rel=&quot;yew1eb&quot;&gt;yew1eb&lt;/a&gt; can we close this issue or do you still get this error?&lt;/p&gt;</comment>
                            <comment id="16479263" author="till.rohrmann" created="Thu, 17 May 2018 15:59:00 +0000"  >&lt;p&gt;The same happened for the &lt;tt&gt;flink-sql-client&lt;/tt&gt; module&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[WARNING]
Dependency convergence error &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; com.google.guava:guava:16.0.1 paths to dependency are:
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-clients_2.11:1.5-SNAPSHOT
    +-org.apache.flink:flink-runtime_2.11:1.5-SNAPSHOT
      +-org.apache.flink:flink-shaded-curator:1.5-SNAPSHOT
        +-org.apache.curator:curator-recipes:2.12.0
          +-org.apache.curator:curator-framework:2.12.0
            +-org.apache.curator:curator-client:2.12.0
              +-com.google.guava:guava:16.0.1
and
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-table_2.11:1.5-SNAPSHOT
    +-org.apache.calcite:calcite-core:1.16.0
      +-org.apache.calcite:calcite-linq4j:1.16.0
        +-com.google.guava:guava:19.0
and
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-table_2.11:1.5-SNAPSHOT
    +-org.apache.calcite:calcite-core:1.16.0
      +-com.google.guava:guava:19.0
and
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-test-utils_2.11:1.5-SNAPSHOT
    +-org.apache.curator:curator-test:2.12.0
      +-com.google.guava:guava:16.0.1

[WARNING]
Dependency convergence error &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; commons-beanutils:commons-beanutils:1.8.0 paths to dependency are:
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-table_2.11:1.5-SNAPSHOT
    +-commons-configuration:commons-configuration:1.7
      +-commons-digester:commons-digester:1.8.1
        +-commons-beanutils:commons-beanutils:1.8.0
and
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-table_2.11:1.5-SNAPSHOT
    +-commons-configuration:commons-configuration:1.7
      +-commons-beanutils:commons-beanutils:1.8.3

[WARNING]
Dependency convergence error &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; org.codehaus.janino:commons-compiler:3.0.7 paths to dependency are:
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-table_2.11:1.5-SNAPSHOT
    +-org.codehaus.janino:janino:3.0.7
      +-org.codehaus.janino:commons-compiler:3.0.7
and
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-table_2.11:1.5-SNAPSHOT
    +-org.apache.calcite:calcite-core:1.16.0
      +-org.codehaus.janino:commons-compiler:2.7.6

[WARNING]
Dependency convergence error &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; commons-lang:commons-lang:2.6 paths to dependency are:
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-table_2.11:1.5-SNAPSHOT
    +-commons-configuration:commons-configuration:1.7
      +-commons-lang:commons-lang:2.6
and
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-table_2.11:1.5-SNAPSHOT
    +-org.apache.calcite:calcite-core:1.16.0
      +-net.hydromatic:aggdesigner-algorithm:6.0
        +-commons-lang:commons-lang:2.4

[WARNING]
Dependency convergence error &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; org.codehaus.janino:janino:3.0.7 paths to dependency are:
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-table_2.11:1.5-SNAPSHOT
    +-org.codehaus.janino:janino:3.0.7
and
+-org.apache.flink:flink-sql-client:1.5-SNAPSHOT
  +-org.apache.flink:flink-table_2.11:1.5-SNAPSHOT
    +-org.apache.calcite:calcite-core:1.16.0
      +-org.codehaus.janino:janino:2.7.6

[WARNING] Rule 0: org.apache.maven.plugins.enforcer.DependencyConvergence failed with message:
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16480463" author="twalthr" created="Fri, 18 May 2018 10:20:40 +0000"  >&lt;p&gt;It seems that the versions declared in the &lt;tt&gt;dependencyManagement&lt;/tt&gt; sections have no impact in other modules from time to time. Maybe it is a bug in the enforcer plugin, I don&apos;t know. I could not reproduce this error so far. But I think we can fix it. I have a branch where I use exclusions instead of the &lt;tt&gt;dependencyManagement&lt;/tt&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; what do you think about these changes? Together with &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8511&quot; title=&quot;Remove legacy code for the TableType annotation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8511&quot;&gt;&lt;del&gt;FLINK-8511&lt;/del&gt;&lt;/a&gt; we should be good.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/flink/compare/master...twalthr:FLINK-9091&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/compare/master...twalthr:FLINK-9091&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16480842" author="yuzhihong@gmail.com" created="Fri, 18 May 2018 16:04:06 +0000"  >&lt;p&gt;Hit the above error when running tests for 1.5.0 RC.&lt;/p&gt;</comment>
                            <comment id="16482755" author="zentol" created="Mon, 21 May 2018 17:26:15 +0000"  >&lt;p&gt;I dislike exclusions as they can actually break stuff when you modify the set of dependencies (you got 2 versions of a transitive library, you exclude, at some point we no longer depend on the other version, whoops now we&apos;re missing a dependency). I&apos;d rather not setup things such that this can actually happen.&lt;/p&gt;

&lt;p&gt;@ &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;yuzhihong@gmail.com&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt;&lt;br/&gt;
Can either of you reproduce this reliably?&lt;br/&gt;
Did you only build the single module, or all of Flink?&lt;/p&gt;</comment>
                            <comment id="16487170" author="zentol" created="Wed, 23 May 2018 12:31:57 +0000"  >&lt;p&gt;Alright, I finally understand &lt;em&gt;what&lt;/em&gt; is happening.&lt;/p&gt;

&lt;p&gt;The problem has to do with what information the enforcer plugin relies on when determining the dependency versions.&lt;/p&gt;

&lt;p&gt;Let&apos;s use &lt;tt&gt;flink-orc&lt;/tt&gt; as an example, which depends on &lt;tt&gt;flink-table&lt;/tt&gt;, which depends on 2 different janino versions.&lt;/p&gt;

&lt;p&gt;If a cached artifact for flink-table exists in the local repository then the enforcer will use this artifacts&apos; pom to determine the dependencies.&lt;br/&gt;
Since this is a properly deployed artifact it uses the dependency-reduced pom (i.e. the pom after removing shaded dependencies), which in the case of flink-table means that it doesn&apos;t contain janino anymore. &lt;br/&gt;
Since the janino dependency is thus not visible the dependency convergence will succeed.&lt;/p&gt;

&lt;p&gt;On the other hand, if no cached artifact exists in the local repository when executing &lt;tt&gt;mvn package/install&lt;/tt&gt; the enforcer uses the dependency information gathered during the current build, which is &lt;b&gt;not&lt;/b&gt; dependency-reduced. This is due to the immutability of the reactor build; all dependencies are fixed from the start as far as maven is concerned (which is why one has to build flink-dist separately with maven 3.3+).&lt;br/&gt;
This causes Janino to still be visible, causing the dependency convergence to fail.&lt;/p&gt;

&lt;p&gt;We observed the convergence failures on the website buildbot since it always starts with a fresh repository.&lt;br/&gt;
The same applies when building an RC for the first time; since the version changed no artifact exists in the local repository.&lt;/p&gt;

&lt;p&gt;We could not reliably reproduce it locally since our caches are usually populated with various SNAPSHOT artifacts.&lt;/p&gt;

&lt;p&gt;You may be wondering how the dependency convergence can succeed for &lt;tt&gt;flink-table&lt;/tt&gt;, but fail for &lt;tt&gt;flink-orc&lt;/tt&gt; due to dependencies of &lt;tt&gt;flink-table&lt;/tt&gt;.&lt;br/&gt;
The answer is &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-5761&quot; title=&quot;Dependency management is not transitive.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-5761&quot;&gt;&lt;del&gt;MNG-5761&lt;/del&gt;&lt;/a&gt;. Essentially, the dependency management entries in &lt;tt&gt;flink-table&lt;/tt&gt; are ignored when the enforcer looks at &lt;tt&gt;flink-orc&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Unfortunately this &lt;em&gt;massive&lt;/em&gt; limitation is incredibly tedious to work around.&lt;br/&gt;
We can partially cover this by moving dependency management entries to the root &lt;tt&gt;pom.xml&lt;/tt&gt; since these are never ignored. These cannot cover all dependencies though, primarily shaded dependencies which frequently have a different version than the rest of the project / other dependencies.&lt;br/&gt;
For the remaining dependencies we will have to resort to gratuitous use of exclusions, which is the tedious part.&lt;/p&gt;</comment>
                            <comment id="16487204" author="twalthr" created="Wed, 23 May 2018 12:56:45 +0000"  >&lt;p&gt;Thanks for the investigation &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt;. I will review and merge the PR for &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8511&quot; title=&quot;Remove legacy code for the TableType annotation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8511&quot;&gt;&lt;del&gt;FLINK-8511&lt;/del&gt;&lt;/a&gt;. Afterwards I can open a PR with some of the exclusions mentioned in my branch above that we can discuss. What do you think?&lt;/p&gt;</comment>
                            <comment id="16487242" author="zentol" created="Wed, 23 May 2018 13:26:14 +0000"  >&lt;p&gt;I&apos;m currently working on enabling dependency convergence for the entire project, i could include your commit in that one.&lt;/p&gt;</comment>
                            <comment id="16488431" author="zentol" created="Thu, 24 May 2018 05:17:16 +0000"  >&lt;p&gt;Another option would be to disable the enforcer by default, and setup things on travis so that we&apos;re always checking against the dependency-reduced poms. This is what we&apos;re interested in anyway.&lt;/p&gt;

&lt;p&gt;With this we would resolve convergence errors for shaded dependencies with dependency management entries in the respective module, and for other dependencies in the root pom.&lt;/p&gt;</comment>
                            <comment id="16489101" author="githubbot" created="Thu, 24 May 2018 14:23:24 +0000"  >&lt;p&gt;GitHub user twalthr opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9091&quot; title=&quot;Failure while enforcing releasability in building flink-json module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9091&quot;&gt;&lt;del&gt;FLINK-9091&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Fix dependency convergence for flink-table&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Since &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8511&quot; title=&quot;Remove legacy code for the TableType annotation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8511&quot;&gt;&lt;del&gt;FLINK-8511&lt;/del&gt;&lt;/a&gt; solved most of the dependency convergence issues that were described in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9091&quot; title=&quot;Failure while enforcing releasability in building flink-json module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9091&quot;&gt;&lt;del&gt;FLINK-9091&lt;/del&gt;&lt;/a&gt;. This PR solves the remaining ones by replacing the `dependencyManagement` section by exclusions.&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    `flink-table/pom.xml` modified&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Manually verified by e2e tests and SQL Client query execution.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): yes&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: no&lt;/li&gt;
	&lt;li&gt;The serializers: no&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): no&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: no&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: no&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? no&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? not applicable&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/twalthr/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/twalthr/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9091&quot; title=&quot;Failure while enforcing releasability in building flink-json module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9091&quot;&gt;&lt;del&gt;FLINK-9091&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #6073&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 639df7cd3e690c2dcfaf35fb43d6b02ec48451f4&lt;br/&gt;
Author: Timo Walther &amp;lt;twalthr@...&amp;gt;&lt;br/&gt;
Date:   2018-05-18T10:10:14Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9091&quot; title=&quot;Failure while enforcing releasability in building flink-json module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9091&quot;&gt;&lt;del&gt;FLINK-9091&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Fix dependency convergence for flink-table&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16489102" author="githubbot" created="Thu, 24 May 2018 14:24:56 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @zentol After &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8511&quot; title=&quot;Remove legacy code for the TableType annotation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8511&quot;&gt;&lt;del&gt;FLINK-8511&lt;/del&gt;&lt;/a&gt; the number of exclusions seem acceptable to me. What do you think? &lt;/p&gt;</comment>
                            <comment id="16489117" author="githubbot" created="Thu, 24 May 2018 14:38:06 +0000"  >&lt;p&gt;Github user pnowojski commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Does this fix or just improves dependency convergence? I&apos;m asking because dependencies of `flink-table` (like `flink-runtime`) still have convergence errors.&lt;/p&gt;</comment>
                            <comment id="16489136" author="githubbot" created="Thu, 24 May 2018 14:49:48 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It only fixes the issues discussed in the corresponding JIRA. Dependency convergence issues with `flink-runtime` are a different topic.&lt;/p&gt;</comment>
                            <comment id="16489213" author="githubbot" created="Thu, 24 May 2018 15:28:29 +0000"  >&lt;p&gt;Github user pnowojski commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ok, I see it now. This pull request&apos;s title is just a tad misleading (it doesn&apos;t fix all of the convergence for this module, just some selection of them)&lt;/p&gt;</comment>
                            <comment id="16490279" author="githubbot" created="Fri, 25 May 2018 06:05:18 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I still don&apos;t know whether this is the way to go. The exclusion pattern can be icky when dealing with a single dependency A that pulls in 2 different versions of a dependency B. When excluding B you are excluding both versions, and have to add a separate dependency on B to *&lt;b&gt;our&lt;/b&gt;*  module. This not only obfuscates the dependency tree, but also directly blocks other efforts to forbid usages of unused dependencies.&lt;/p&gt;</comment>
                            <comment id="16490335" author="githubbot" created="Fri, 25 May 2018 07:14:53 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    We had a dependency on Janino before so this adds no additional dependency to our module. The only special case is about guava (as always). I think you have the bigger picture about Flink&apos;s dependency management, I&apos;m open for other solutions (like disabling the enforcer plugin etc.).&lt;/p&gt;</comment>
                            <comment id="16490449" author="githubbot" created="Fri, 25 May 2018 09:17:01 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @pnowojski just pointed out that we can replace the Janino exclusion by a `dependencyManagement` entry in the root pom. I&apos;m fine with this. But how should we deal with guava?&lt;/p&gt;</comment>
                            <comment id="16490456" author="githubbot" created="Fri, 25 May 2018 09:21:16 +0000"  >&lt;p&gt;Github user pnowojski commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Converging dependencies by enforcing their versions in root&apos;s pom `dependencyManagement` section is the way that we have chosen previously, so it would be more consistent. &lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7765&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-7765&lt;/a&gt;&lt;br/&gt;
    &lt;a href=&quot;https://github.com/apache/flink/pull/4777&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4777&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thus I would put `janino`&apos;s entries in root pom. Open question is what to do with `guava` since I do not know if this comment in root pom is still valid after 3 years and what was it all about:&lt;br/&gt;
    ```&lt;br/&gt;
    	&amp;lt;dependencyManagement&amp;gt;&lt;br/&gt;
    		&amp;lt;!-- WARN:&lt;br/&gt;
    			DO NOT put 	guava,&lt;br/&gt;
    						protobuf,&lt;br/&gt;
    						asm,&lt;br/&gt;
    						netty&lt;br/&gt;
    					here. It will overwrite Hadoop&apos;s guava dependency (even though we handle it&lt;br/&gt;
    			separatly in the flink-shaded-hadoop module).&lt;br/&gt;
    		--&amp;gt;&lt;br/&gt;
    ```&lt;/p&gt;</comment>
                            <comment id="16490541" author="githubbot" created="Fri, 25 May 2018 10:38:56 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073#discussion_r190855869&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073#discussion_r190855869&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -146,6 +147,12 @@ under the License.&lt;br/&gt;
     			&amp;lt;artifactId&amp;gt;flink-test-utils_${scala.binary.version}&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
     			&amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
     			&amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
    +			&amp;lt;exclusions&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Why does `flink-test-utils` even have a Guava dependency? Can we fix that?&lt;/p&gt;</comment>
                            <comment id="16490544" author="githubbot" created="Fri, 25 May 2018 10:41:19 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    DependencyManagement in the root pom should cover dependencies that we share and expose across modules.&lt;/p&gt;

&lt;p&gt;    Enforcing convergence with one module (`flink-table`) for a dependency that is hidden (shaded) should be handled in that module, not clutter the project-global configuration.&lt;/p&gt;</comment>
                            <comment id="16492673" author="githubbot" created="Mon, 28 May 2018 13:30:37 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073#discussion_r191207284&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073#discussion_r191207284&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -146,6 +147,12 @@ under the License.&lt;br/&gt;
     			&amp;lt;artifactId&amp;gt;flink-test-utils_${scala.binary.version}&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
     			&amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
     			&amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
    +			&amp;lt;exclusions&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    flink-test-utils depends on curator-test which depends on guava.&lt;/p&gt;</comment>
                            <comment id="16495039" author="githubbot" created="Wed, 30 May 2018 11:19:29 +0000"  >&lt;p&gt;GitHub user zentol opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9091&quot; title=&quot;Failure while enforcing releasability in building flink-json module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9091&quot;&gt;&lt;del&gt;FLINK-9091&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;build&amp;#93;&lt;/span&gt; Dependency convergence run against dependency-red&#8230;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    As outlined in the JIRA the enforcer-plugin may not always work against dependency-reduced poms leading to convergence failures. This heavily conflicts with our approach to shading dependencies. &lt;/p&gt;

&lt;p&gt;    This PR ensures that the dependency-convergence , at least on travis, is run against dependency-reduced poms.&lt;/p&gt;

&lt;p&gt;    The easiest way to achieve this is to run the enforcer plugin separately for each leaf module, for which maven works against the local repository, and thus dependency-reduced poms.&lt;br/&gt;
    Naturally this cannot be nicely modeled into the maven life-cycle, hence we rely on a bash script to iterate over all modules.&lt;/p&gt;

&lt;p&gt;    To prevent other devs from running into this problem the enforcer plugin is now disabled by default. It must be explicitly enabled with a profile. To check the convergence locally one may use `tools/check_dependency_convergence.sh`.&lt;/p&gt;

&lt;p&gt;    This PR subsumes #6073.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;disable enforcer by default&lt;/li&gt;
	&lt;li&gt;add profile to enable enforcer&lt;/li&gt;
	&lt;li&gt;add `tools/check_dependency_convergence.sh` script to run convergence check against dependency-reduced poms&lt;/li&gt;
	&lt;li&gt;modify travis scripts to run convergence check after compilation&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;add a dependency-convergence violation and run on travis; optionally run script locally&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zentol/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zentol/flink&lt;/a&gt; 9091&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #6102&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6f2eb68d785b88de36d7eb6e0d48d487e8a7a811&lt;br/&gt;
Author: zentol &amp;lt;chesnay@...&amp;gt;&lt;br/&gt;
Date:   2018-05-28T13:10:53Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9091&quot; title=&quot;Failure while enforcing releasability in building flink-json module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9091&quot;&gt;&lt;del&gt;FLINK-9091&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;build&amp;#93;&lt;/span&gt; Dependency convergence run against dependency-reduced poms&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16527513" author="githubbot" created="Fri, 29 Jun 2018 11:54:05 +0000"  >&lt;p&gt;Github user twalthr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102#discussion_r199125903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102#discussion_r199125903&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: tools/check_dependency_convergence.sh &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,67 @@&lt;br/&gt;
    +#!/usr/bin/env bash&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +#  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +#  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +#  distributed with this work for additional information&lt;br/&gt;
    +#  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +#  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +#  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +#  with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#      &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +#  Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +#  See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +HERE=&quot;`dirname \&quot;$0\&quot;`&quot;				# relative&lt;br/&gt;
    +HERE=&quot;`( cd \&quot;$HERE\&quot; &amp;amp;&amp;amp; pwd )`&quot; 	# absolutized and normalized&lt;br/&gt;
    +if [ -z &quot;$HERE&quot; ] ; then&lt;br/&gt;
    +	# error; for some reason, the path is not accessible&lt;br/&gt;
    +	# to the script (e.g. permissions re-evaled after suid)&lt;br/&gt;
    +	exit 1  # fail&lt;br/&gt;
    +fi&lt;br/&gt;
    +&lt;br/&gt;
    +FLINK_DIR=HERE&lt;br/&gt;
    +&lt;br/&gt;
    +if [[ $(basename ${HERE}) == &quot;tools&quot; ]] ; then&lt;br/&gt;
    +  FLINK_DIR=&quot;${HERE}/..&quot;&lt;br/&gt;
    +fi&lt;br/&gt;
    +&lt;br/&gt;
    +FLINK_DIR=&quot;`( cd \&quot;${FLINK_DIR}\&quot; &amp;amp;&amp;amp; pwd )`&quot; &lt;br/&gt;
    +&lt;br/&gt;
    +echo ${FLINK_DIR}&lt;br/&gt;
    +&lt;br/&gt;
    +# get list of all flink modules&lt;br/&gt;
    +# searches for directories containing a pom.xml file&lt;br/&gt;
    +# sorts the list alphabetically&lt;br/&gt;
    +# only accepts directories starting with &quot;flink&quot; to filter force-shading&lt;br/&gt;
    +modules=$(find -maxdepth 3 -name &apos;pom.xml&apos; -printf &apos;%h\n&apos; | sort -u | grep &quot;flink&quot;)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Specify the path otherwise is not runnable in every environment.&lt;/p&gt;

&lt;p&gt;    `printf` is also not available in MacOs:&lt;br/&gt;
    &lt;a href=&quot;https://stackoverflow.com/questions/752818/find-lacks-the-option-printf-now-what&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/752818/find-lacks-the-option-printf-now-what&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16527514" author="githubbot" created="Fri, 29 Jun 2018 11:54:05 +0000"  >&lt;p&gt;Github user twalthr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102#discussion_r199123464&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102#discussion_r199123464&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: tools/travis_mvn_watchdog.sh &amp;#8212;&lt;br/&gt;
    @@ -533,6 +537,12 @@ esac&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Run tests if compilation was successful&lt;br/&gt;
     if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    +    # Start watching $MVN_OUT&lt;br/&gt;
    +    watchdog &amp;amp;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    By the way: Should we automate the lists for `MODULES_CONNECTORS` and `MODULES_LIBRARIES`? They are not up-to-date e.g. `flink-json`, `flink-sql-client`, `flink-orc` are missing.&lt;/p&gt;</comment>
                            <comment id="16527515" author="githubbot" created="Fri, 29 Jun 2018 11:54:05 +0000"  >&lt;p&gt;Github user twalthr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102#discussion_r199135922&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102#discussion_r199135922&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: tools/check_dependency_convergence.sh &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,67 @@&lt;br/&gt;
    +#!/usr/bin/env bash&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +#  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +#  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +#  distributed with this work for additional information&lt;br/&gt;
    +#  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +#  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +#  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +#  with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#      &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +#  Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +#  See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +HERE=&quot;`dirname \&quot;$0\&quot;`&quot;				# relative&lt;br/&gt;
    +HERE=&quot;`( cd \&quot;$HERE\&quot; &amp;amp;&amp;amp; pwd )`&quot; 	# absolutized and normalized&lt;br/&gt;
    +if [ -z &quot;$HERE&quot; ] ; then&lt;br/&gt;
    +	# error; for some reason, the path is not accessible&lt;br/&gt;
    +	# to the script (e.g. permissions re-evaled after suid)&lt;br/&gt;
    +	exit 1  # fail&lt;br/&gt;
    +fi&lt;br/&gt;
    +&lt;br/&gt;
    +FLINK_DIR=HERE&lt;br/&gt;
    +&lt;br/&gt;
    +if [[ $(basename ${HERE}) == &quot;tools&quot; ]] ; then&lt;br/&gt;
    +  FLINK_DIR=&quot;${HERE}/..&quot;&lt;br/&gt;
    +fi&lt;br/&gt;
    +&lt;br/&gt;
    +FLINK_DIR=&quot;`( cd \&quot;${FLINK_DIR}\&quot; &amp;amp;&amp;amp; pwd )`&quot; &lt;br/&gt;
    +&lt;br/&gt;
    +echo ${FLINK_DIR}&lt;br/&gt;
    +&lt;br/&gt;
    +# get list of all flink modules&lt;br/&gt;
    +# searches for directories containing a pom.xml file&lt;br/&gt;
    +# sorts the list alphabetically&lt;br/&gt;
    +# only accepts directories starting with &quot;flink&quot; to filter force-shading&lt;br/&gt;
    +modules=$(find -maxdepth 3 -name &apos;pom.xml&apos; -printf &apos;%h\n&apos; | sort -u | grep &quot;flink&quot;)&lt;br/&gt;
    +&lt;br/&gt;
    +for module in ${modules}&lt;br/&gt;
    +do&lt;br/&gt;
    +    # we are only interested in child modules&lt;br/&gt;
    +    for other_module in ${modules}&lt;br/&gt;
    +    do &lt;br/&gt;
    +        if [[ &quot;${other_module}&quot; != &quot;${module}&quot; &amp;amp;&amp;amp; &quot;${other_module}&quot; = &quot;${module}&quot;/* ]]; then&lt;br/&gt;
    +        echo &quot;excluding ${module} since it is not a leaf module&quot;&lt;br/&gt;
    +            continue 2&lt;br/&gt;
    +        fi&lt;br/&gt;
    +    done&lt;br/&gt;
    +    &lt;br/&gt;
    +    cd &quot;${module}&quot;&lt;br/&gt;
    +    echo &quot;checking ${module}&quot;&lt;br/&gt;
    +    output=$(mvn validate -nsu -Dcheckstyle.skip=true -Dcheck-convergence)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Do we need to skip scala style and the rat plugin for speed up here?&lt;/p&gt;</comment>
                            <comment id="16527516" author="githubbot" created="Fri, 29 Jun 2018 11:54:05 +0000"  >&lt;p&gt;Github user twalthr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102#discussion_r199122374&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102#discussion_r199122374&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: tools/travis_mvn_watchdog.sh &amp;#8212;&lt;br/&gt;
    @@ -533,6 +537,12 @@ esac&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Run tests if compilation was successful&lt;br/&gt;
     if [ $EXIT_CODE == 0 ]; then&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    +    # Start watching $MVN_OUT&lt;br/&gt;
    +    watchdog &amp;amp;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Wrong indention used in this file. &lt;/p&gt;</comment>
                            <comment id="16531239" author="githubbot" created="Tue, 3 Jul 2018 11:45:24 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102#discussion_r199776329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102#discussion_r199776329&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: tools/check_dependency_convergence.sh &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,67 @@&lt;br/&gt;
    +#!/usr/bin/env bash&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +#  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +#  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +#  distributed with this work for additional information&lt;br/&gt;
    +#  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +#  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +#  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +#  with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#      &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +#  Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +#  See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +HERE=&quot;`dirname \&quot;$0\&quot;`&quot;				# relative&lt;br/&gt;
    +HERE=&quot;`( cd \&quot;$HERE\&quot; &amp;amp;&amp;amp; pwd )`&quot; 	# absolutized and normalized&lt;br/&gt;
    +if [ -z &quot;$HERE&quot; ] ; then&lt;br/&gt;
    +	# error; for some reason, the path is not accessible&lt;br/&gt;
    +	# to the script (e.g. permissions re-evaled after suid)&lt;br/&gt;
    +	exit 1  # fail&lt;br/&gt;
    +fi&lt;br/&gt;
    +&lt;br/&gt;
    +FLINK_DIR=HERE&lt;br/&gt;
    +&lt;br/&gt;
    +if [[ $(basename ${HERE}) == &quot;tools&quot; ]] ; then&lt;br/&gt;
    +  FLINK_DIR=&quot;${HERE}/..&quot;&lt;br/&gt;
    +fi&lt;br/&gt;
    +&lt;br/&gt;
    +FLINK_DIR=&quot;`( cd \&quot;${FLINK_DIR}\&quot; &amp;amp;&amp;amp; pwd )`&quot; &lt;br/&gt;
    +&lt;br/&gt;
    +echo ${FLINK_DIR}&lt;br/&gt;
    +&lt;br/&gt;
    +# get list of all flink modules&lt;br/&gt;
    +# searches for directories containing a pom.xml file&lt;br/&gt;
    +# sorts the list alphabetically&lt;br/&gt;
    +# only accepts directories starting with &quot;flink&quot; to filter force-shading&lt;br/&gt;
    +modules=$(find -maxdepth 3 -name &apos;pom.xml&apos; -printf &apos;%h\n&apos; | sort -u | grep &quot;flink&quot;)&lt;br/&gt;
    +&lt;br/&gt;
    +for module in ${modules}&lt;br/&gt;
    +do&lt;br/&gt;
    +    # we are only interested in child modules&lt;br/&gt;
    +    for other_module in ${modules}&lt;br/&gt;
    +    do &lt;br/&gt;
    +        if [[ &quot;${other_module}&quot; != &quot;${module}&quot; &amp;amp;&amp;amp; &quot;${other_module}&quot; = &quot;${module}&quot;/* ]]; then&lt;br/&gt;
    +        echo &quot;excluding ${module} since it is not a leaf module&quot;&lt;br/&gt;
    +            continue 2&lt;br/&gt;
    +        fi&lt;br/&gt;
    +    done&lt;br/&gt;
    +    &lt;br/&gt;
    +    cd &quot;${module}&quot;&lt;br/&gt;
    +    echo &quot;checking ${module}&quot;&lt;br/&gt;
    +    output=$(mvn validate -nsu -Dcheckstyle.skip=true -Dcheck-convergence)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    both plugins are not executed in the `validate` phase.&lt;/p&gt;</comment>
                            <comment id="16531242" author="githubbot" created="Tue, 3 Jul 2018 11:47:29 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102#discussion_r199776816&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102#discussion_r199776816&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: tools/check_dependency_convergence.sh &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,67 @@&lt;br/&gt;
    +#!/usr/bin/env bash&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +#  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +#  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +#  distributed with this work for additional information&lt;br/&gt;
    +#  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +#  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +#  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +#  with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#      &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +#  Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +#  See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +################################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +HERE=&quot;`dirname \&quot;$0\&quot;`&quot;				# relative&lt;br/&gt;
    +HERE=&quot;`( cd \&quot;$HERE\&quot; &amp;amp;&amp;amp; pwd )`&quot; 	# absolutized and normalized&lt;br/&gt;
    +if [ -z &quot;$HERE&quot; ] ; then&lt;br/&gt;
    +	# error; for some reason, the path is not accessible&lt;br/&gt;
    +	# to the script (e.g. permissions re-evaled after suid)&lt;br/&gt;
    +	exit 1  # fail&lt;br/&gt;
    +fi&lt;br/&gt;
    +&lt;br/&gt;
    +FLINK_DIR=HERE&lt;br/&gt;
    +&lt;br/&gt;
    +if [[ $(basename ${HERE}) == &quot;tools&quot; ]] ; then&lt;br/&gt;
    +  FLINK_DIR=&quot;${HERE}/..&quot;&lt;br/&gt;
    +fi&lt;br/&gt;
    +&lt;br/&gt;
    +FLINK_DIR=&quot;`( cd \&quot;${FLINK_DIR}\&quot; &amp;amp;&amp;amp; pwd )`&quot; &lt;br/&gt;
    +&lt;br/&gt;
    +echo ${FLINK_DIR}&lt;br/&gt;
    +&lt;br/&gt;
    +# get list of all flink modules&lt;br/&gt;
    +# searches for directories containing a pom.xml file&lt;br/&gt;
    +# sorts the list alphabetically&lt;br/&gt;
    +# only accepts directories starting with &quot;flink&quot; to filter force-shading&lt;br/&gt;
    +modules=$(find -maxdepth 3 -name &apos;pom.xml&apos; -printf &apos;%h\n&apos; | sort -u | grep &quot;flink&quot;)&lt;br/&gt;
    +&lt;br/&gt;
    +for module in ${modules}&lt;br/&gt;
    +do&lt;br/&gt;
    +    # we are only interested in child modules&lt;br/&gt;
    +    for other_module in ${modules}&lt;br/&gt;
    +    do &lt;br/&gt;
    +        if [[ &quot;${other_module}&quot; != &quot;${module}&quot; &amp;amp;&amp;amp; &quot;${other_module}&quot; = &quot;${module}&quot;/* ]]; then&lt;br/&gt;
    +        echo &quot;excluding ${module} since it is not a leaf module&quot;&lt;br/&gt;
    +            continue 2&lt;br/&gt;
    +        fi&lt;br/&gt;
    +    done&lt;br/&gt;
    +    &lt;br/&gt;
    +    cd &quot;${module}&quot;&lt;br/&gt;
    +    echo &quot;checking ${module}&quot;&lt;br/&gt;
    +    output=$(mvn validate -nsu -Dcheckstyle.skip=true -Dcheck-convergence)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    We explicitly run `rat` in the `verify`, which is also the one `scalastyle` runs in by default. &lt;/p&gt;</comment>
                            <comment id="16534586" author="githubbot" created="Fri, 6 Jul 2018 08:47:00 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the update @zentol. So do we want to support this script also on MacOS or not? Otherwise it is good to merge. What is your opinion about the static `MODULES_CONNECTORS` and `MODULES_LIBRARIES` should we create a separate issue for it?&lt;/p&gt;</comment>
                            <comment id="16534588" author="githubbot" created="Fri, 6 Jul 2018 08:54:29 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    We should make sure it runs on mac, I just haven&apos;t had the time to search for a cross-platform solution.&lt;br/&gt;
    I also wouldn&apos;t be able to verify that it actually runs on mac, so someone else may have to do that.&lt;/p&gt;

&lt;p&gt;    I&apos;m rather hesitant about generating the lists automatically. We could only generate part of them anyway (since contrib is split among them) and partially generating them is messy. What I would prefer is failing the build if a library/connector doesn&apos;t show up in the list to create more awareness for the whole thing.&lt;/p&gt;</comment>
                            <comment id="16541732" author="githubbot" created="Thu, 12 Jul 2018 14:26:44 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ll merge it as is and create a follow-up for making the `check-convergence` script run on mac.&lt;/p&gt;</comment>
                            <comment id="16542592" author="githubbot" created="Fri, 13 Jul 2018 06:19:12 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6102&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16542646" author="zentol" created="Fri, 13 Jul 2018 07:24:30 +0000"  >&lt;p&gt;master: ca3081beaca6da3e5def93c8f4d20ed263f2f544&lt;br/&gt;
1.5: 2685d0b78f3475f0b46e6347f2e4e8a727ce26d9&lt;/p&gt;</comment>
                            <comment id="16554027" author="githubbot" created="Tue, 24 Jul 2018 09:55:45 +0000"  >&lt;p&gt;Github user twalthr closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6073&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12796388">MNG-5761</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12916303" name="f-json.out" size="11240" author="yuzhihong@gmail.com" created="Mon, 26 Mar 2018 23:28:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rt1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>