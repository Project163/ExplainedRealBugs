<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:27:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5749]     unset HADOOP_HOME and HADOOP_CONF_DIR to avoid env in build machine failing the UT and IT</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5749</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently when we are trying to build flink on a machine with HADOOP_HOME environment variable set, Test data will be written to HDFS, instead of local tmp dir which is expected. This will cause tests failed. &lt;br/&gt;
I suggest unset HADOOP_HOME and HADOOP_CONF_DIR environment variable in pom, to make sure maven run the test cases in the exactly way we want.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041578">FLINK-5749</key>
            <summary>    unset HADOOP_HOME and HADOOP_CONF_DIR to avoid env in build machine failing the UT and IT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wenlong.lwl">Wenlong Lyu</assignee>
                                    <reporter username="wenlong.lwl">Wenlong Lyu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 03:19:58 +0000</created>
                <updated>Mon, 20 Feb 2017 13:30:10 +0000</updated>
                            <resolved>Mon, 20 Feb 2017 13:30:05 +0000</resolved>
                                                    <fixVersion>1.2.1</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15859101" author="githubbot" created="Thu, 9 Feb 2017 06:30:35 +0000"  >&lt;p&gt;GitHub user wenlong88 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3288&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5749&quot; title=&quot;    unset HADOOP_HOME and HADOOP_CONF_DIR to avoid env in build machine failing the UT and IT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5749&quot;&gt;&lt;del&gt;FLINK-5749&lt;/del&gt;&lt;/a&gt;unset HADOOP_HOME and HADOOP_CONF_DIR to avoid env in build machine failing the UT and IT&lt;/p&gt;

&lt;p&gt;    Currently when we are trying to build flink on a machine with HADOOP_HOME environment variable set, Test data will be written to HDFS, instead of local tmp dir which is expected. This will cause tests failed. &lt;br/&gt;
    This PR unsets HADOOP_HOME and HADOOP_CONF_DIR environment variable in pom, to make sure maven run the test cases in the exactly way we want.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/wenlong88/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/wenlong88/flink&lt;/a&gt; jira-5749&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3288.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3288.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3288&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d0e6464f37e2057c508a0e7858d3b42778610637&lt;br/&gt;
Author: wenlong.lwl &amp;lt;wenlong.lwl@alibaba-inc.com&amp;gt;&lt;br/&gt;
Date:   2017-01-13T06:12:17Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;#9896513&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;to #9896513&lt;/a&gt; Unset HADOOP_HOME and HADOOP_CONF_DIR in pom&lt;/p&gt;

&lt;p&gt;    Summary:&lt;br/&gt;
    unset HADOOP_HOME and HADOOP_CONF_DIR to avoid env in build machine failing the UT and IT&lt;/p&gt;

&lt;p&gt;    fix T9896513&lt;/p&gt;

&lt;p&gt;    Test Plan: UT/IT&lt;/p&gt;

&lt;p&gt;    Reviewers: &#40654;&#38050;&lt;/p&gt;

&lt;p&gt;    Reviewed By: &#40654;&#38050;&lt;/p&gt;

&lt;p&gt;    Subscribers: P577102&lt;/p&gt;

&lt;p&gt;    Differential Revision: &lt;a href=&quot;https://aone.alibaba-inc.com/code/D96861&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://aone.alibaba-inc.com/code/D96861&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15859540" author="githubbot" created="Thu, 9 Feb 2017 13:53:27 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3288&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think this is a good addition.&lt;/p&gt;

&lt;p&gt;    We could try and make this change more targeted to the Maven project that has the affected tests. That would help us keeping the root pom.xml more compact. For example if this affects only tests in `flink-fs-tests` then we can for example make this change in `flink-fs-tests`.&lt;/p&gt;

&lt;p&gt;    Can you share what tests are affected by this?&lt;/p&gt;</comment>
                            <comment id="15860563" author="githubbot" created="Fri, 10 Feb 2017 02:25:47 +0000"  >&lt;p&gt;Github user wenlong88 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3288&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    hi @StephanEwen, the cases in flink-filesystem-connector will fail first in our building machine. I have go through the cases in flink-fs-tests, I think they will fail too if I remove the change from the root pom. I think it is better to set in the root pom, because the HadoopUtils is in the package flink-java, and many modules have dependency on flink-java and users of the utils may have no idea that the HadoopUtils have dependency on the environment variables that will cause wired failures and it is hard to trace.&lt;/p&gt;</comment>
                            <comment id="15860937" author="githubbot" created="Fri, 10 Feb 2017 08:51:23 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3288&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    For the `HadoopUtils` in `flink-java` - I think those need to depend on the variables and are also not in the test scope.&lt;/p&gt;

&lt;p&gt;    The reason why I am asking also do make the change more to `filesystem-connector` and `fs-tests` is that we want to gradually make Flink depend less and less on Hadoop, so to move all Hadoop dependencies into separate optional modules. More targeted environment variable exclusion would fit that design better.&lt;/p&gt;</comment>
                            <comment id="15860970" author="githubbot" created="Fri, 10 Feb 2017 09:27:48 +0000"  >&lt;p&gt;Github user wenlong88 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3288&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    ok, I will move the changes to filesystem-connector and fs-tests poms.&lt;/p&gt;</comment>
                            <comment id="15874216" author="githubbot" created="Mon, 20 Feb 2017 08:44:22 +0000"  >&lt;p&gt;Github user wenlong88 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3288&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    hi @StephanEwen , I have move the changes to child module pom,  `flink-tests` and `flink-hadoop-compatibility` need to be changed too, because the mapreduce related cases will load output compaction setting from the cluster configuration.&lt;/p&gt;</comment>
                            <comment id="15874425" author="githubbot" created="Mon, 20 Feb 2017 11:52:45 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3288&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good, thank you!&lt;br/&gt;
    Merging this...&lt;/p&gt;</comment>
                            <comment id="15874531" author="githubbot" created="Mon, 20 Feb 2017 13:29:39 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3288&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15874532" author="stephanewen" created="Mon, 20 Feb 2017 13:30:05 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;1.2.1 via 24aff09ce51a6e90cd6c39d89a3f2c5b7d6f4423&lt;/li&gt;
	&lt;li&gt;1.3.0 via 48109378bc337736c7469de0fe08ec12f7a8f76f&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39tqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>