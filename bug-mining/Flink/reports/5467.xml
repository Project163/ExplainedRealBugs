<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:57:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-22786] sql-client can not create .flink-sql-history file</title>
                <link>https://issues.apache.org/jira/browse/FLINK-22786</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When I run sql-client.sh&#65292; I find a warning&#160;&lt;/p&gt;

&lt;p&gt;Unable to create history file: /home/www/.flink-sql-history&#160;&lt;/p&gt;

&lt;p&gt;In fact, the user I used have permission to write&#160;/home/www/.&lt;/p&gt;

&lt;p&gt;After debug sql-client.sh. I think this is a bug in&#160;org.apache.flink.table.client.cli.CliUtils#createFile&lt;/p&gt;

&lt;p&gt;Files.notExists(parent) should be run before Files.createDirectories(parent) .&lt;/p&gt;</description>
                <environment></environment>
        <key id="13380682">FLINK-22786</key>
            <summary>sql-client can not create .flink-sql-history file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pensz">Zhiwen Sun</assignee>
                                    <reporter username="pensz">Zhiwen Sun</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 27 May 2021 06:51:25 +0000</created>
                <updated>Sat, 28 Aug 2021 12:14:48 +0000</updated>
                            <resolved>Thu, 3 Jun 2021 03:46:27 +0000</resolved>
                                    <version>1.12.2</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.13.2</fixVersion>
                                    <component>Table SQL / Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17352351" author="jark" created="Thu, 27 May 2021 09:20:52 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fsk119&quot; class=&quot;user-hover&quot; rel=&quot;fsk119&quot;&gt;fsk119&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17352354" author="pensz" created="Thu, 27 May 2021 09:38:42 +0000"  >&lt;p&gt;Add : /home/www/ is a symbolic link of directory.&lt;/p&gt;

&lt;p&gt;Nature of the bug is we should deal with&#160;symbolic link.&lt;/p&gt;

&lt;p&gt;Many classes have similar problem.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Can I fix the bug? &#160; It doesn&apos;t look complicated.&lt;/p&gt;</comment>
                            <comment id="17352982" author="fsk119" created="Fri, 28 May 2021 06:12:48 +0000"  >&lt;p&gt;Thanks for your report! But I think the main problem is we try to build a directory that already exists.&#160;&lt;/p&gt;

&lt;p&gt;I write a test in my local branch to reproduce this problem.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;/** Test {@link CliUtils}. */&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CliUtilsTest {

    @Rule &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TemporaryFolder realFolder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TemporaryFolder();

    @Rule &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TemporaryFolder linkFolder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TemporaryFolder();

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testCreate() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        Path link = Paths.get(linkFolder.getRoot().getAbsolutePath(), &lt;span class=&quot;code-quote&quot;&gt;&quot;link&quot;&lt;/span&gt;);
        Files.createSymbolicLink(link, realFolder.getRoot().toPath());

        Path historyFile = Paths.get(link.toAbsolutePath().toString(), &lt;span class=&quot;code-quote&quot;&gt;&quot;test.file&quot;&lt;/span&gt;);
        CliUtils.createFile(historyFile);

        assertTrue(Files.exists(historyFile));
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17354178" author="fsk119" created="Mon, 31 May 2021 02:16:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pensz&quot; class=&quot;user-hover&quot; rel=&quot;pensz&quot;&gt;pensz&lt;/a&gt; Are you still willing to contribute? I think it will not take too much time.&lt;/p&gt;</comment>
                            <comment id="17354186" author="pensz" created="Mon, 31 May 2021 02:48:44 +0000"  >&lt;p&gt;Yes, I will create a PR about this bug.&lt;/p&gt;

&lt;p&gt;Similar problem in following classes:&lt;br/&gt;
 &#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/CliUtils.java 
./flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServer.java 
./flink-runtime-web/src/main/java/org/apache/flink/runtime/webmonitor/history/HistoryServerArchiveFetcher.java 
./flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBStateDownloader.java 
./flink-runtime/src/main/java/org/apache/flink/runtime/security/modules/JaasModule.java no 
./flink-runtime/src/main/java/org/apache/flink/runtime/state/SnapshotDirectory.java 
./flink-runtime/src/main/java/org/apache/flink/runtime/blob/BlobUtils.java 
./flink-runtime/src/main/java/org/apache/flink/runtime/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/FileUploadHandler.java 
./flink-runtime/src/main/java/org/apache/flink/runtime/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/RestServerEndpoint.java no 

./flink-python/src/main/java/org/apache/flink/client/python/PythonEnvUtils.java 
./flink-core/src/main/java/org/apache/flink/util/FileUtils.java no 
./flink-clients/src/main/java/org/apache/flink/client/program/PackagedProgramUtils.java 
./flink-yarn/src/main/java/org/apache/flink/yarn/YarnApplicationFileUploader.java 
./flink-runtime/src/main/java/org/apache/flink/runtime/clusterframework/overlays/AbstractContainerOverlay.java 
./flink-runtime/src/main/java/org/apache/flink/runtime/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/handler/FileUploads.java no&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
 &#160;&lt;/p&gt;

&lt;p&gt;I setup my IDEA recently&#160;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17354190" author="jark" created="Mon, 31 May 2021 02:59:30 +0000"  >&lt;p&gt;Please only fix SQL Client. I&apos;m not sure if other places are also the problem and they should be disucssed separately. &lt;/p&gt;</comment>
                            <comment id="17354198" author="pensz" created="Mon, 31 May 2021 03:31:09 +0000"  >&lt;p&gt;OK.&lt;/p&gt;</comment>
                            <comment id="17356139" author="jark" created="Thu, 3 Jun 2021 03:46:27 +0000"  >&lt;p&gt;Fixed in &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;master: bf56611cd19be57b9dbd3c66e7e30b97d0f77632&lt;/li&gt;
	&lt;li&gt;release-1.13: df0ae16bbd3ecb59203d30fe88571ead598788b4&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0reyg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>