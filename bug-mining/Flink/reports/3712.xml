<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15868] Kinesis consumer fails due to jackson-dataformat-cbor conflict in 1.10 RC1</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15868</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;There appears to be an issue with incompatible dependencies being shaded in the connector. This only happens when running against the actual Kinesis service (i.e. when CBOR isn&apos;t disabled).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13283034">FLINK-15868</key>
            <summary>Kinesis consumer fails due to jackson-dataformat-cbor conflict in 1.10 RC1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="thw">Thomas Weise</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 3 Feb 2020 18:54:20 +0000</created>
                <updated>Wed, 5 Feb 2020 14:53:23 +0000</updated>
                            <resolved>Wed, 5 Feb 2020 14:53:23 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Connectors / Kinesis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17029198" author="thw" created="Mon, 3 Feb 2020 18:54:46 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.flink.client.program.PackagedProgram.callMainMethod(PackagedProgram.java:321)\n\t... 10 more\nCaused by: java.lang.RuntimeException: Jackson jackson-core/jackson-dataformat-cbor incompatible library version detected.\nYou have two possible resolutions:\n\t\t1) Ensure the com.fasterxml.jackson.core:jackson-core &amp;amp; com.fasterxml.jackson.dataformat:jackson-dataformat-cbor libraries on your classpath have the same version number\n\t\t2) Disable CBOR wire-protocol by passing the -Dcom.amazonaws.sdk.disableCbor property or setting the AWS_CBOR_DISABLE environment variable (warning &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; may affect performance)\n\tat org.apache.flink.kinesis.shaded.com.amazonaws.protocol.json.SdkCborGenerator.getBytes(SdkCborGenerator.java:69)\n\tat org.apache.flink.kinesis.shaded.com.amazonaws.protocol.json.internal.JsonProtocolMarshaller.finishMarshalling(JsonProtocolMarshaller.java:190)\n\tat org.apache.flink.kinesis.shaded.com.amazonaws.protocol.json.internal.NullAsEmptyBodyProtocolRequestMarshaller.finishMarshalling(NullAsEmptyBodyProtocolRequestMarshaller.java:53)\n\tat org.apache.flink.kinesis.shaded.com.amazonaws.services.kinesis.model.transform.ListShardsRequestProtocolMarshaller.marshall(ListShardsRequestProtocolMarshaller.java:57)\n\t... 26 more\nCaused by: java.lang.NoSuchMethodError: shaded.spkinesis.com.fasterxml.jackson.dataformat.cbor.CBORGenerator.getOutputContext()Lshaded/spkinesis/com/fasterxml/jackson/core/json/JsonWriteContext;\n\tat shaded.spkinesis.com.fasterxml.jackson.dataformat.cbor.CBORGenerator.close(CBORGenerator.java:903)\n\tat org.apache.flink.kinesis.shaded.com.amazonaws.protocol.json.SdkJsonGenerator.close(SdkJsonGenerator.java:267)\n\tat org.apache.flink.kinesis.shaded.com.amazonaws.protocol.json.SdkJsonGenerator.getBytes(SdkJsonGenerator.java:282)\n\tat org.apache.flink.kinesis.shaded.com.amazonaws.protocol.json.SdkCborGenerator.getBytes(SdkCborGenerator.java:67)\n\t... 29 more\n\nEnd of exception on server side&amp;gt;&quot;]}&apos;
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17029203" author="gjy" created="Mon, 3 Feb 2020 19:05:53 +0000"  >&lt;p&gt;Is there any way to enable CBOR in the E2E tests?&lt;/p&gt;</comment>
                            <comment id="17029220" author="thw" created="Mon, 3 Feb 2020 19:45:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; I&apos;m not sure if kinesalite works with CBOR, you would have to try it.&lt;/p&gt;</comment>
                            <comment id="17029245" author="zentol" created="Mon, 3 Feb 2020 20:33:51 +0000"  >&lt;p&gt;When we pinned jackson to 2.10.1 we did not bump all jackson dependencies; I assumed that the formats are less dependent on the main releases; guess I was wrong on that one.&lt;/p&gt;</comment>
                            <comment id="17029248" author="zentol" created="Mon, 3 Feb 2020 20:39:00 +0000"  >&lt;p&gt;Note that the connector itself isn&apos;t shading jackson; this must be done by the user-jar.&lt;/p&gt;

&lt;p&gt;Actually, can you show me the pom of the application? Dependency management entries in our project shouldn&apos;t affect user applications; unless they use flink-parent as a parent module.&lt;/p&gt;</comment>
                            <comment id="17029255" author="thw" created="Mon, 3 Feb 2020 20:45:37 +0000"  >&lt;p&gt;I&apos;m working on this and should have an update soon.&lt;/p&gt;</comment>
                            <comment id="17029674" author="zentol" created="Tue, 4 Feb 2020 09:22:55 +0000"  >&lt;p&gt;Shading strikes again; for the kinesis connector the shade-plugin is configured to promote transitive dependencies, which then actively puts jackson as an actual dependency into the pom, with the version being governed by the dependency management.&lt;br/&gt;
The promotion is somewhat-ish required since we shade the kinesis sdk but not all of its transitive dependencies, and otherwise these dependencies would just be lost.&lt;/p&gt;</comment>
                            <comment id="17030713" author="till.rohrmann" created="Wed, 5 Feb 2020 14:53:23 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;master:&lt;br/&gt;
e51ad132d2&lt;br/&gt;
264ccf6e2e&lt;br/&gt;
3a7edb36ee&lt;br/&gt;
02c9c0920a&lt;br/&gt;
652e979767&lt;br/&gt;
cf126ffbe1&lt;/p&gt;

&lt;p&gt;1.10.0:&lt;br/&gt;
3ed189c815&lt;br/&gt;
ec5c9c6ab1&lt;br/&gt;
f42c0d3d8c&lt;br/&gt;
ccd390562e&lt;br/&gt;
f6be5679c8&lt;br/&gt;
81cf2f9e59&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0b45s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>