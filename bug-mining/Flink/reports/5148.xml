<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:54:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-21725] DataTypeExtractor extracts wrong fields ordering for Tuple12</title>
                <link>https://issues.apache.org/jira/browse/FLINK-21725</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The following test can reproduce the problem:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-comment&quot;&gt;/** Emit Tuple12 result. */&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JavaTableFuncTuple12
            &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; TableFunction&amp;lt;
                    Tuple12&amp;lt;
                            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,
                            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,
                            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,
                            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,
                            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,
                            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,
                            &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;,
                            &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;,
                            &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;,
                            &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;,
                            &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;,
                            &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; serialVersionUID = -8258882510989374448L;

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void eval(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; str) {
            collect(
                    Tuple12.of(
                            str + &lt;span class=&quot;code-quote&quot;&gt;&quot;_a&quot;&lt;/span&gt;,
                            str + &lt;span class=&quot;code-quote&quot;&gt;&quot;_b&quot;&lt;/span&gt;,
                            str + &lt;span class=&quot;code-quote&quot;&gt;&quot;_c&quot;&lt;/span&gt;,
                            str + &lt;span class=&quot;code-quote&quot;&gt;&quot;_d&quot;&lt;/span&gt;,
                            str + &lt;span class=&quot;code-quote&quot;&gt;&quot;_e&quot;&lt;/span&gt;,
                            str + &lt;span class=&quot;code-quote&quot;&gt;&quot;_f&quot;&lt;/span&gt;,
                            str.length(),
                            str.length() + 1,
                            str.length() + 2,
                            str.length() + 3,
                            str.length() + 4,
                            str.length() + 5));
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-scala&quot;&gt;
@Test
  &lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; testCorrelateTuple12(): Unit = {
    &lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; util = streamTestUtil()
    util.addTableSource[(Int, Long, String)](&lt;span class=&quot;code-quote&quot;&gt;&quot;MyTable&quot;&lt;/span&gt;, &apos;a, &apos;b, &apos;c)
    &lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; function = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JavaTableFuncTuple12
    util.addTemporarySystemFunction(&lt;span class=&quot;code-quote&quot;&gt;&quot;func1&quot;&lt;/span&gt;, function)
    &lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; sql =
      &quot;&quot;&quot;
        |SELECT *
        |FROM MyTable, LATERAL TABLE(func1(c)) AS T
        |&quot;&quot;&quot;.stripMargin

    util.verifyExecPlan(sql)
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// output plan
&lt;/span&gt;Correlate(invocation=[func1($cor0.c)], correlate=[table(func1($cor0.c))], select=[a,b,c,f0,f1,f10,f11,f2,f3,f4,f5,f6,f7,f8,f9], rowType=[RecordType(INTEGER a, BIGINT b, VARCHAR(2147483647) c, VARCHAR(2147483647) f0, VARCHAR(2147483647) f1, INTEGER f10, INTEGER f11, VARCHAR(2147483647) f2, VARCHAR(2147483647) f3, VARCHAR(2147483647) f4, VARCHAR(2147483647) f5, INTEGER f6, INTEGER f7, INTEGER f8, INTEGER f9)], joinType=[INNER])
+- LegacyTableSourceScan(table=[[default_catalog, default_database, MyTable, source: [TestTableSource(a, b, c)]]], fields=[a, b, c])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that there is no problem if using the legacy &lt;tt&gt;tEnv.registerFunction&lt;/tt&gt; to register function, becuase it uses &lt;tt&gt;TypeInformation&lt;/tt&gt;. However, it has problem if using  &lt;tt&gt;tEnv.createTemporaryFunction&lt;/tt&gt; or &lt;tt&gt;CREATE FUNCTION&lt;/tt&gt; syntax, because it uses &lt;tt&gt;TypeInference&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Note this problem exists in latest 1.11, 1.12, and master branch. &lt;/p&gt;

&lt;p&gt;I think the problem might lay in this line: &lt;a href=&quot;https://github.com/apache/flink/blob/c6997c97c575d334679915c328792b8a3067cfb5/flink-table/flink-table-common/src/main/java/org/apache/flink/table/types/extraction/DataTypeExtractor.java#L562&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/c6997c97c575d334679915c328792b8a3067cfb5/flink-table/flink-table-common/src/main/java/org/apache/flink/table/types/extraction/DataTypeExtractor.java#L562&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;because it orders field names by alphabetical.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13363717">FLINK-21725</key>
            <summary>DataTypeExtractor extracts wrong fields ordering for Tuple12</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twalthr">Timo Walther</assignee>
                                    <reporter username="jark">Jark Wu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 11 Mar 2021 03:56:18 +0000</created>
                <updated>Mon, 15 Mar 2021 12:48:25 +0000</updated>
                            <resolved>Mon, 15 Mar 2021 07:57:13 +0000</resolved>
                                    <version>1.11.3</version>
                    <version>1.12.2</version>
                    <version>1.13.0</version>
                                    <fixVersion>1.11.4</fixVersion>
                    <fixVersion>1.13.0</fixVersion>
                    <fixVersion>1.12.3</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17299294" author="jark" created="Thu, 11 Mar 2021 03:56:48 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17301464" author="twalthr" created="Mon, 15 Mar 2021 07:57:13 +0000"  >&lt;p&gt;Fixed in 1.13.0:&#160;2434ad544c1a21b780e5fc08bfa6bff9b7b0bc23 90c297db503b3da5f6496db7068c58c748b20845 bebf3b5a105dd4bc21882116570c6d71299269a6&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Fixed in 1.12.3:&#160;9051df378ebf1d217cbbeed8f66ba458bf024b4c 0df64fb27f216e4cca5f55371a4f5b887dae45bd 7383416dfaf59f0aeebc77450b6c3dc9b495789a&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Fixed in 1.11.4:&#160;085a0f3441c939257ab706868dc1f229cff2bda8 d5dd1d777ce947f45afb8b2e63b53b0e01756023 90c70e183440c6278ea31f7315cf718f339f6f59&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0oj68:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>