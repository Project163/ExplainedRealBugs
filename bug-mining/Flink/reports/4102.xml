<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:46:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-17725] FileUploadHandlerTest.testUploadCleanupOnFailure fails with &quot;SocketTimeout timeout&quot;</title>
                <link>https://issues.apache.org/jira/browse/FLINK-17725</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;CI: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=1392&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=4ed44b66-cdd6-5dcf-5f6a-88b07dda665d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=1392&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=4ed44b66-cdd6-5dcf-5f6a-88b07dda665d&lt;/a&gt; ( select 1st attempt)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-05-15T09:01:40.0547958Z [ERROR] testUploadCleanupOnFailure(org.apache.flink.runtime.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.FileUploadHandlerTest)  Time elapsed: 10.415 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
2020-05-15T09:01:40.0548716Z java.net.SocketTimeoutException: timeout
2020-05-15T09:01:40.0549048Z 	at okio.Okio$4.newTimeoutException(Okio.java:227)
2020-05-15T09:01:40.0549361Z 	at okio.AsyncTimeout.exit(AsyncTimeout.java:284)
2020-05-15T09:01:40.0549688Z 	at okio.AsyncTimeout$2.read(AsyncTimeout.java:240)
2020-05-15T09:01:40.0552454Z 	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:344)
2020-05-15T09:01:40.0554987Z 	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:216)
2020-05-15T09:01:40.0555636Z 	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:210)
2020-05-15T09:01:40.0556307Z 	at okhttp3.internal.http1.Http1Codec.readResponseHeaders(Http1Codec.java:189)
2020-05-15T09:01:40.0556856Z 	at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.java:75)
2020-05-15T09:01:40.0557505Z 	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:92)
2020-05-15T09:01:40.0558021Z 	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:45)
2020-05-15T09:01:40.0558498Z 	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:92)
2020-05-15T09:01:40.0558932Z 	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:67)
2020-05-15T09:01:40.0559381Z 	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:93)
2020-05-15T09:01:40.0559803Z 	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:92)
2020-05-15T09:01:40.0560262Z 	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:67)
2020-05-15T09:01:40.0561022Z 	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
2020-05-15T09:01:40.0561701Z 	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:92)
2020-05-15T09:01:40.0562439Z 	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:120)
2020-05-15T09:01:40.0563170Z 	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:92)
2020-05-15T09:01:40.0565934Z 	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:67)
2020-05-15T09:01:40.0566781Z 	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:185)
2020-05-15T09:01:40.0575046Z 	at okhttp3.RealCall.execute(RealCall.java:69)
2020-05-15T09:01:40.0575858Z 	at org.apache.flink.runtime.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.FileUploadHandlerTest.testUploadCleanupOnFailure(FileUploadHandlerTest.java:250)
2020-05-15T09:01:40.0576567Z 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2020-05-15T09:01:40.0577242Z 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2020-05-15T09:01:40.0577979Z 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2020-05-15T09:01:40.0578594Z 	at java.lang.reflect.Method.invoke(Method.java:498)
2020-05-15T09:01:40.0579234Z 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
2020-05-15T09:01:40.0580279Z 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
2020-05-15T09:01:40.0581129Z 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
2020-05-15T09:01:40.0581862Z 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
2020-05-15T09:01:40.0582538Z 	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
2020-05-15T09:01:40.0583174Z 	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
2020-05-15T09:01:40.0583934Z 	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
2020-05-15T09:01:40.0584501Z 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
2020-05-15T09:01:40.0585282Z 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
2020-05-15T09:01:40.0586005Z 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
2020-05-15T09:01:40.0586666Z 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
2020-05-15T09:01:40.0587257Z 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
2020-05-15T09:01:40.0587879Z 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
2020-05-15T09:01:40.0588486Z 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
2020-05-15T09:01:40.0589101Z 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
2020-05-15T09:01:40.0589724Z 	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
2020-05-15T09:01:40.0590407Z 	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
2020-05-15T09:01:40.0591102Z 	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
2020-05-15T09:01:40.0591621Z 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
2020-05-15T09:01:40.0592245Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
2020-05-15T09:01:40.0592978Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
2020-05-15T09:01:40.0593784Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
2020-05-15T09:01:40.0594692Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
2020-05-15T09:01:40.0595445Z 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
2020-05-15T09:01:40.0596220Z 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
2020-05-15T09:01:40.0596947Z 	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
2020-05-15T09:01:40.0597646Z 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-05-15T09:01:40.0598221Z Caused by: java.net.SocketException: Socket closed
2020-05-15T09:01:40.0598774Z 	at java.net.SocketInputStream.read(SocketInputStream.java:204)
2020-05-15T09:01:40.0599375Z 	at java.net.SocketInputStream.read(SocketInputStream.java:141)
2020-05-15T09:01:40.0599864Z 	at okio.Okio$2.read(Okio.java:138)
2020-05-15T09:01:40.0600350Z 	at okio.AsyncTimeout$2.read(AsyncTimeout.java:236)
2020-05-15T09:01:40.0600804Z 	... 51 more
2020-05-15T09:01:40.0601098Z 
2020-05-15T09:01:40.4326691Z [INFO] Running org.apache.flink.runtime.metrics.groups.TaskIOMetricGroupTest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13305165">FLINK-17725</key>
            <summary>FileUploadHandlerTest.testUploadCleanupOnFailure fails with &quot;SocketTimeout timeout&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Fri, 15 May 2020 10:05:01 +0000</created>
                <updated>Fri, 16 Oct 2020 10:52:09 +0000</updated>
                            <resolved>Wed, 20 May 2020 09:27:00 +0000</resolved>
                                    <version>1.11.0</version>
                                    <fixVersion>1.11.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17110987" author="till.rohrmann" created="Tue, 19 May 2020 09:05:42 +0000"  >&lt;p&gt;What do you mean with select 1st attempt &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt;? In the linked build, I can only see some e2e test failures and a failure of the log upload.&lt;/p&gt;</comment>
                            <comment id="17110989" author="till.rohrmann" created="Tue, 19 May 2020 09:07:05 +0000"  >&lt;p&gt;Stupid me found the attempts button on AZP. &lt;/p&gt;</comment>
                            <comment id="17111039" author="till.rohrmann" created="Tue, 19 May 2020 10:08:47 +0000"  >&lt;p&gt;Looking at the logs, the problem seems to be that we do not respond to the file upload request within the write timeout of 10s. Interestingly, we do respond to it after it so my suspicion is that something takes very long on AZP and I don&apos;t think that there is a problem with the logic. My best suggestion would be to disable the timeouts for the &lt;tt&gt;OkHttpClient&lt;/tt&gt; in the &lt;tt&gt;FileUploadHandlerTest&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17111042" author="zentol" created="Tue, 19 May 2020 10:10:33 +0000"  >&lt;p&gt;Sounds very similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15503&quot; title=&quot;FileUploadHandlerTest.testMixedMultipart and FileUploadHandlerTest. testUploadCleanupOnUnknownAttribute failed on Azure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15503&quot;&gt;&lt;del&gt;FLINK-15503&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17111219" author="rmetzger" created="Tue, 19 May 2020 14:25:30 +0000"  >&lt;p&gt;Thanks for the pointer to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15503&quot; title=&quot;FileUploadHandlerTest.testMixedMultipart and FileUploadHandlerTest. testUploadCleanupOnUnknownAttribute failed on Azure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15503&quot;&gt;&lt;del&gt;FLINK-15503&lt;/del&gt;&lt;/a&gt; Chesnay. We are seeing all kinds of weird network issues on the Alibaba-hosted CI machines.&lt;br/&gt;
I was not yet able to figure out the problem yet ... but this is the first well-documented case of local network issues.&lt;br/&gt;
I will take a closer look at &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15503&quot; title=&quot;FileUploadHandlerTest.testMixedMultipart and FileUploadHandlerTest. testUploadCleanupOnUnknownAttribute failed on Azure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15503&quot;&gt;&lt;del&gt;FLINK-15503&lt;/del&gt;&lt;/a&gt; (comparing test runtimes on the CI machines with and without docker)&lt;/p&gt;</comment>
                            <comment id="17111978" author="till.rohrmann" created="Wed, 20 May 2020 09:27:00 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;master: e991de19337591cde444fbede010cb8bdc7f118f&lt;br/&gt;
1.11.0: 1b0d7fddfb5e948fe9c6fa8b17f6c00569addd02&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0es00:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>