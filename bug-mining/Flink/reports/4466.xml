<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:48:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15728] JDBCUpsertOutputFormat does not set bind parameter keyFields in updateStatement</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15728</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When using&#160;JDBCUpsertOutputFormat custom dialect e.g. H2/Oracle which uses&#160;UpsertWriterUsingInsertUpdateStatement, code fails with below error.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.h2.jdbc.JdbcSQLDataException: Parameter &lt;span class=&quot;code-quote&quot;&gt;&quot;#6&quot;&lt;/span&gt; is not set [90012-200] 
at org.h2.message.DbException.getJdbcSQLException(DbException.java:590) 
at org.h2.message.DbException.getJdbcSQLException(DbException.java:429) 
at org.h2.message.DbException.get(DbException.java:205) 
at org.h2.message.DbException.get(DbException.java:181) 
at org.h2.expression.Parameter.checkSet(Parameter.java:83) 
at org.h2.jdbc.JdbcPreparedStatement.addBatch(JdbcPreparedStatement.java:1275) 
at org.apache.flink.api.java.io.jdbc.writer.UpsertWriter$UpsertWriterUsingInsertUpdateStatement.processOneRowInBatch(UpsertWriter.java:233) 
at org.apache.flink.api.java.io.jdbc.writer.UpsertWriter.executeBatch(UpsertWriter.java:111) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is due to UpsertWriterUsingInsertUpdateStatement#processOneRowInBatch does not set all bind paramters in case of Update.&lt;/p&gt;

&lt;p&gt;This bug does get surfaced while using Derby DB. &lt;br/&gt;
 In JDBCUpsertOutputFormatTest if we replace Derby with H2 we can reproduce the bug.&lt;/p&gt;

&lt;p&gt;The fix is trivial. Happy to raise PR.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; update &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; replace below
&lt;/span&gt;setRecordToStatement(updateStatement, fieldTypes, row); 
&lt;span class=&quot;code-comment&quot;&gt;//with
&lt;/span&gt;setRecordToStatement(updateStatement, fieldTypes + pkTypes, row  + pkRow);
&lt;span class=&quot;code-comment&quot;&gt;//NOTE:  as prepared updateStatement contains additional where clause we need pass additional bind values and its sql Types
&lt;/span&gt;


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13280817">FLINK-15728</key>
            <summary>JDBCUpsertOutputFormat does not set bind parameter keyFields in updateStatement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jark">Jark Wu</assignee>
                                    <reporter username="dasbh">Bhagavan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 21 Jan 2020 18:16:22 +0000</created>
                <updated>Thu, 30 Jul 2020 07:11:43 +0000</updated>
                            <resolved>Thu, 30 Jul 2020 07:11:43 +0000</resolved>
                                    <version>1.9.1</version>
                                    <fixVersion>1.12.0</fixVersion>
                                    <component>Connectors / JDBC</component>
                    <component>Table SQL / Ecosystem</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17020494" author="dasbh" created="Tue, 21 Jan 2020 19:02:49 +0000"  >&lt;p&gt;+ added&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;as original work was reviewed&#160;&lt;/p&gt;</comment>
                            <comment id="17020735" author="jark" created="Wed, 22 Jan 2020 03:02:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dasbh&quot; class=&quot;user-hover&quot; rel=&quot;dasbh&quot;&gt;dasbh&lt;/a&gt;, I guess you are right, we didn&apos;t cover it in tests. Assigned issue to you.&lt;/p&gt;</comment>
                            <comment id="17020745" author="lzljs3620320" created="Wed, 22 Jan 2020 03:28:13 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dasbh&quot; class=&quot;user-hover&quot; rel=&quot;dasbh&quot;&gt;dasbh&lt;/a&gt;, thanks for reporting.&lt;/p&gt;

&lt;p&gt;But I don&apos;t think this is a bug or I didn&apos;t get what are you mean. If you want to support H2/Oracle,&#160;Shouldn&apos;t H2Dialect be provided? The default implementation of &lt;tt&gt;JDBCDialect&lt;/tt&gt; can not work to every DBs. Then, if H2/Oracle need new&#160;mechanism to implement upsert, we should improve &lt;tt&gt;JDBCDialect&lt;/tt&gt; interface.&#160;&lt;/p&gt;

&lt;p&gt;So I think this ticket is support H2Dialect and OracleDialect?&lt;/p&gt;</comment>
                            <comment id="17020761" author="lzljs3620320" created="Wed, 22 Jan 2020 04:16:29 +0000"  >&lt;p&gt;And I tried Oracle 11g:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
create table T (i &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, j &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
insert into T values(1, 2);
update T set i = 2 where j = 2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It works.&lt;/p&gt;</comment>
                            <comment id="17020991" author="dasbh" created="Wed, 22 Jan 2020 12:01:41 +0000"  >&lt;p&gt;Sorry, should have added more context.&lt;/p&gt;

&lt;p&gt;Added, H2Dialect as below (i.e. no support for UPSERT) which similar to Derby other than driver name URL&lt;br/&gt;
Note:  not overriding method * &lt;em&gt;getUpsertStatement&lt;/em&gt;* from JDBCDialect similar to derby. So this would use &lt;b&gt;UpsertWriterUsingInsertUpdateStatement&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;H2Dialect &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; JDBCDialect {

   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; serialVersionUID = 1L;

   @Override
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; canHandle(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; url) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; url.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;jdbc:h2:&quot;&lt;/span&gt;);
   }

   @Override
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Optional&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; defaultDriverName() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Optional.of(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.h2.Driver&quot;&lt;/span&gt;);
   }

   @Override
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; quoteIdentifier(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; identifier) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; identifier;
   }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;With this, if you run the test JDBCUpsertOutputFormatTest. You will get &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.h2.jdbc.JdbcSQLDataException: Parameter &lt;span class=&quot;code-quote&quot;&gt;&quot;#&amp;lt;index&amp;gt;&quot;&lt;/span&gt; is not set [90012-200] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, with current &lt;b&gt;UpsertWriter&lt;/b&gt; implementation Dialect upsert statement can only have  bind parameters (&apos;?&apos;) same length as Row and in the same order&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;

//MySql uses &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; so &lt;span class=&quot;code-keyword&quot;&gt;each&lt;/span&gt; num &lt;span class=&quot;code-keyword&quot;&gt;of&lt;/span&gt; ? &lt;span class=&quot;code-keyword&quot;&gt;is&lt;/span&gt; same &lt;span class=&quot;code-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;Row&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;length&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; `TAB`(`id`, `msg`) &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (?, ?) 
&lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; DUPLICATE &lt;span class=&quot;code-keyword&quot;&gt;KEY&lt;/span&gt; 
&lt;span class=&quot;code-keyword&quot;&gt;UPDATE&lt;/span&gt; `id`=&lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt;(`id`), `msg`=&lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt;(`msg`)

//postgres uses EXCLUDED so &lt;span class=&quot;code-keyword&quot;&gt;each&lt;/span&gt; num &lt;span class=&quot;code-keyword&quot;&gt;of&lt;/span&gt; ? &lt;span class=&quot;code-keyword&quot;&gt;is&lt;/span&gt; same &lt;span class=&quot;code-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;Row&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;length&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; TAB(id, msg) &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (?, ?) 
&lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; CONFLICT (id) 
&lt;span class=&quot;code-keyword&quot;&gt;DO&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;SET&lt;/span&gt; id=EXCLUDED.id, msg=EXCLUDED.msg

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But if I write oracle upsert as below, setRecordToStatement in UpsertWriter.. will not work&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;MERGE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; TAB &lt;span class=&quot;code-keyword&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;dual&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; ( &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;=? )
&lt;span class=&quot;code-keyword&quot;&gt;WHEN&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;MATCHED&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;THEN&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;msg&quot;&lt;/span&gt;=?
&lt;span class=&quot;code-keyword&quot;&gt;WHEN&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;MATCHED&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;THEN&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;msg&quot;&lt;/span&gt;) 
    &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; ( ?, ? )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hope, I have clarified the issue.&lt;/p&gt;</comment>
                            <comment id="17021004" author="lzljs3620320" created="Wed, 22 Jan 2020 12:17:50 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dasbh&quot; class=&quot;user-hover&quot; rel=&quot;dasbh&quot;&gt;dasbh&lt;/a&gt;&#160;for explanation. It is clear.&lt;/p&gt;

&lt;p&gt;I think it may not be a small change. We may need to modify the interface of JDBCDialect.&lt;/p&gt;

&lt;p&gt;Before dialect, there was an interface call QueryExecutor, which can customize the process of upsert. When JDBCDialect was introduced to replace QueryExecutor, it was assumed that each dialect had the same requirements for set fields.&lt;/p&gt;

&lt;p&gt;But seems that the ability to customize the upsert is needed.&lt;/p&gt;</comment>
                            <comment id="17021042" author="jark" created="Wed, 22 Jan 2020 13:15:57 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dasbh&quot; class=&quot;user-hover&quot; rel=&quot;dasbh&quot;&gt;dasbh&lt;/a&gt;, thanks for reporting this. &lt;/p&gt;

&lt;p&gt;First of all, I think this is a bug. The default implemenation of &lt;tt&gt;JDBCDialect#getUpdateStatement&lt;/tt&gt; is problematic. If we add a &lt;tt&gt;&apos;connector.write.flush.max-rows&apos;=&apos;1&apos;&lt;/tt&gt; property to &lt;tt&gt;JDBCUpsertTableSinkITCase#testUpsert&lt;/tt&gt;, the result is incorrect.&lt;/p&gt;

&lt;p&gt;Regarding to the fixing, I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;, it&apos;s not a small change. The root problem is that the current statement is based on index, not on name. We have a similar discussion to improve this issue in this &lt;a href=&quot;https://github.com/apache/flink/pull/9335#discussion_r311845039&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;. An solution would be &lt;a href=&quot;https://www.javaworld.com/article/2077706/named-parameters-for-preparedstatement.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;named-statement&lt;/a&gt; and I think it&apos;s the time to do it now. &lt;/p&gt;</comment>
                            <comment id="17021157" author="lzljs3620320" created="Wed, 22 Jan 2020 15:03:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dasbh&quot; class=&quot;user-hover&quot; rel=&quot;dasbh&quot;&gt;dasbh&lt;/a&gt;&#160;Your&#160;trivial fix is good to me too. I think we can do a little more to exclude pks from set fields.&lt;/p&gt;</comment>
                            <comment id="17021232" author="dasbh" created="Wed, 22 Jan 2020 16:08:46 +0000"  >&lt;p&gt;Raised PR &lt;a href=&quot;https://github.com/apache/flink/pull/10926&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/10926&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17021482" author="dasbh" created="Wed, 22 Jan 2020 20:36:09 +0000"  >&lt;p&gt;Also, I have found how to achieve upsert in Oracle and H2. I can add the dialect to this PR.&lt;/p&gt;

&lt;p&gt;SQL&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;MERGE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; TAB t 
   &lt;span class=&quot;code-keyword&quot;&gt;USING&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; ? &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;, ? &lt;span class=&quot;code-quote&quot;&gt;&quot;msg&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;DUAL&lt;/span&gt;) v 
   &lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; ( t.&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;=v.&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;WHEN&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;MATCHED&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;THEN&lt;/span&gt; 
   &lt;span class=&quot;code-keyword&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;SET&lt;/span&gt; t.&lt;span class=&quot;code-quote&quot;&gt;&quot;msg&quot;&lt;/span&gt;=v.&lt;span class=&quot;code-quote&quot;&gt;&quot;msg&quot;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;WHEN&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;MATCHED&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;THEN&lt;/span&gt; 
    &lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;msg&quot;&lt;/span&gt;) 
    &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; ( v.&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;, v.&lt;span class=&quot;code-quote&quot;&gt;&quot;msg&quot;&lt;/span&gt; )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17031421" author="lzljs3620320" created="Thu, 6 Feb 2020 09:54:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dasbh&quot; class=&quot;user-hover&quot; rel=&quot;dasbh&quot;&gt;dasbh&lt;/a&gt; You can take&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-14100&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-14100&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17150770" author="jark" created="Fri, 3 Jul 2020 06:43:22 +0000"  >&lt;p&gt;The current implementation of &quot;JdbcDialect#getUpdateStatement&quot; is broken. As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dasbh&quot; class=&quot;user-hover&quot; rel=&quot;dasbh&quot;&gt;dasbh&lt;/a&gt; said, the key fields are not binded into the statement, thus all the update statements do not change any rows. This can be reproduced when we set &lt;tt&gt;&apos;sink.buffer-flush.max-rows&apos; = &apos;1&apos;&lt;/tt&gt;  for &lt;tt&gt;JdbcDynamicTableSinkITCase#testUpsert&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17150771" author="jark" created="Fri, 3 Jul 2020 06:45:19 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dasbh&quot; class=&quot;user-hover&quot; rel=&quot;dasbh&quot;&gt;dasbh&lt;/a&gt;, are you still insterest in this issue? If you don&apos;t have time, I can help to fix this.&lt;/p&gt;</comment>
                            <comment id="17156592" author="jark" created="Mon, 13 Jul 2020 09:22:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dasbh&quot; class=&quot;user-hover&quot; rel=&quot;dasbh&quot;&gt;dasbh&lt;/a&gt;, I will continue this work based on the &lt;tt&gt;NamedPrepareStatement&lt;/tt&gt; solution. &lt;/p&gt;</comment>
                            <comment id="17167688" author="jark" created="Thu, 30 Jul 2020 07:11:43 +0000"  >&lt;p&gt;Fixed in master: bdaf1dbd80c57ac23e2d5530d845e483261f7518&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0aqhc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>