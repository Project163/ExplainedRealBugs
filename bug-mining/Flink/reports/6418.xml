<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:10:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-27223] State access doesn&apos;t work as expected when cache size is set to 0</title>
                <link>https://issues.apache.org/jira/browse/FLINK-27223</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;For the following job:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; json
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; logging
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; sys

from pyflink.common &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; Types, Configuration
from pyflink.datastream &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; StreamExecutionEnvironment
from pyflink.util.java_utils &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; get_j_env_configuration

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; __name__ == &lt;span class=&quot;code-quote&quot;&gt;&apos;__main__&apos;&lt;/span&gt;:
    logging.basicConfig(stream=sys.stdout, level=logging.INFO, format=&lt;span class=&quot;code-quote&quot;&gt;&quot;%(message)s&quot;&lt;/span&gt;)

    env = StreamExecutionEnvironment.get_execution_environment()
    config = Configuration(
        j_configuration=get_j_env_configuration(env._j_stream_execution_environment))
    config.set_integer(&lt;span class=&quot;code-quote&quot;&gt;&quot;python.state.cache-size&quot;&lt;/span&gt;, 0)
    env.set_parallelism(1)

    # define the source
    ds = env.from_collection(
        collection=[
            (1, &lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Flink&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;tel&quot;&lt;/span&gt;: 123, &lt;span class=&quot;code-quote&quot;&gt;&quot;addr&quot;&lt;/span&gt;: {&lt;span class=&quot;code-quote&quot;&gt;&quot;country&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Germany&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Berlin&quot;&lt;/span&gt;}}&apos;&lt;/span&gt;),
            (2, &lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;tel&quot;&lt;/span&gt;: 135, &lt;span class=&quot;code-quote&quot;&gt;&quot;addr&quot;&lt;/span&gt;: {&lt;span class=&quot;code-quote&quot;&gt;&quot;country&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;China&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Shanghai&quot;&lt;/span&gt;}}&apos;&lt;/span&gt;),
            (3, &lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;world&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;tel&quot;&lt;/span&gt;: 124, &lt;span class=&quot;code-quote&quot;&gt;&quot;addr&quot;&lt;/span&gt;: {&lt;span class=&quot;code-quote&quot;&gt;&quot;country&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;USA&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;NewYork&quot;&lt;/span&gt;}}&apos;&lt;/span&gt;),
            (4, &lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;PyFlink&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;tel&quot;&lt;/span&gt;: 32, &lt;span class=&quot;code-quote&quot;&gt;&quot;addr&quot;&lt;/span&gt;: {&lt;span class=&quot;code-quote&quot;&gt;&quot;country&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;China&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Hangzhou&quot;&lt;/span&gt;}}&apos;&lt;/span&gt;)
        ],
        type_info=Types.ROW_NAMED([&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;info&quot;&lt;/span&gt;], [Types.INT(), Types.STRING()])
    )

    # key by
    ds = ds.map(lambda data: (json.loads(data.info)[&lt;span class=&quot;code-quote&quot;&gt;&apos;addr&apos;&lt;/span&gt;][&lt;span class=&quot;code-quote&quot;&gt;&apos;country&apos;&lt;/span&gt;],
                              json.loads(data.info)[&lt;span class=&quot;code-quote&quot;&gt;&apos;tel&apos;&lt;/span&gt;])) \
           .key_by(lambda data: data[0]).sum(1)
    ds.print()
    env.execute()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The expected result should be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(&lt;span class=&quot;code-quote&quot;&gt;&apos;Germany&apos;&lt;/span&gt;, 123)
(&lt;span class=&quot;code-quote&quot;&gt;&apos;China&apos;&lt;/span&gt;, 135)
(&lt;span class=&quot;code-quote&quot;&gt;&apos;USA&apos;&lt;/span&gt;, 124)
(&lt;span class=&quot;code-quote&quot;&gt;&apos;China&apos;&lt;/span&gt;, 167)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, the actual result is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(&lt;span class=&quot;code-quote&quot;&gt;&apos;Germany&apos;&lt;/span&gt;, 123)
(&lt;span class=&quot;code-quote&quot;&gt;&apos;China&apos;&lt;/span&gt;, 135)
(&lt;span class=&quot;code-quote&quot;&gt;&apos;USA&apos;&lt;/span&gt;, 124)
(&lt;span class=&quot;code-quote&quot;&gt;&apos;China&apos;&lt;/span&gt;, 32)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13439418">FLINK-27223</key>
            <summary>State access doesn&apos;t work as expected when cache size is set to 0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dianfu">Dian Fu</assignee>
                                    <reporter username="dianfu">Dian Fu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 13 Apr 2022 10:58:03 +0000</created>
                <updated>Thu, 14 Apr 2022 04:11:57 +0000</updated>
                            <resolved>Thu, 14 Apr 2022 04:11:24 +0000</resolved>
                                    <version>1.14.0</version>
                                    <fixVersion>1.14.5</fixVersion>
                    <fixVersion>1.15.1</fixVersion>
                                    <component>API / Python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17522047" author="dianfu" created="Thu, 14 Apr 2022 04:11:24 +0000"  >&lt;p&gt;Fixed in:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;master via eee8804bb8db97864ecff6b27853570e75b15807&lt;/li&gt;
	&lt;li&gt;release-1.15 via b070a7bb424da40ce0839a1151b110701de48a2c&lt;/li&gt;
	&lt;li&gt;release-1.14 via d4de83b4dc66d18acc4355d1edafa95fd1adca7a&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z11fhc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>