<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:21:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2651] Failing NettyServerLowAndHighWatermarkTest</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2651</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/aljoscha/flink/jobs/79610050&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/aljoscha/flink/jobs/79610050&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12862981">FLINK-2651</key>
            <summary>Failing NettyServerLowAndHighWatermarkTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uce">Ufuk Celebi</assignee>
                                    <reporter username="uce">Ufuk Celebi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Sep 2015 08:19:33 +0000</created>
                <updated>Tue, 20 Oct 2015 13:05:07 +0000</updated>
                            <resolved>Tue, 20 Oct 2015 13:05:07 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14738379" author="uce" created="Thu, 10 Sep 2015 08:20:14 +0000"  >&lt;p&gt;mvn -Dhadoop.version=2.7.0 clean verify&lt;/p&gt;</comment>
                            <comment id="14904549" author="uce" created="Wed, 23 Sep 2015 14:02:25 +0000"  >&lt;p&gt;Hadoop 2.7.0 has a dependency to &lt;tt&gt;io.netty:netty-all:jar:4.0.23&lt;/tt&gt;. Older Hadoop versions don&apos;t have this and I think this results in the problem.&lt;/p&gt;
</comment>
                            <comment id="14904773" author="githubbot" created="Wed, 23 Sep 2015 16:37:51 +0000"  >&lt;p&gt;GitHub user uce opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2651&quot; title=&quot;Failing NettyServerLowAndHighWatermarkTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2651&quot;&gt;&lt;del&gt;FLINK-2651&lt;/del&gt;&lt;/a&gt; Add Netty to dependency management&lt;/p&gt;

&lt;p&gt;    Hadoop 2.7.0 pulls in an older Netty version, which clashes with our version. This makes sure to only pull in our version.&lt;/p&gt;

&lt;p&gt;    To test this, you have to build it with `-Dhadoop.version=2.7.0` set.&lt;/p&gt;

&lt;p&gt;    I&apos;ve checked that this is respected in the fat jar.&lt;/p&gt;

&lt;p&gt;    Additionally, I&apos;ve bumped the Netty version to the most recent 4.0.31 (from 4.0.27). There is no particular reason for this, but the release notes mention many improvements and fixes. In general, I think it&apos;s a good idea to have the most recent version.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/uce/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/uce/flink&lt;/a&gt; netty-dep&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1174&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f96cc13f2ef3336c87de0cd34bcbf3036b6c17e8&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-09-23T14:13:50Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2651&quot; title=&quot;Failing NettyServerLowAndHighWatermarkTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2651&quot;&gt;&lt;del&gt;FLINK-2651&lt;/del&gt;&lt;/a&gt; Add Netty to dependency management&lt;/p&gt;

&lt;p&gt;    Hadoop 2.7.0 pulls in an older Netty version, which clashes with our version.&lt;br/&gt;
    This makes sure to only pull in our version.&lt;/p&gt;

&lt;p&gt;commit 371817101848fbb993c02e14a705b5399f754444&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-09-23T15:20:30Z&lt;/p&gt;

&lt;p&gt;    Bump Netty version to 4.0.31.Final&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14904829" author="githubbot" created="Wed, 23 Sep 2015 17:06:34 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142664975&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142664975&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good fix.&lt;/p&gt;

&lt;p&gt;    I think it is a bit overkill to define a Maven variable for a dependency used only in one place, so why not directly state the version in the dependency management section?&lt;/p&gt;</comment>
                            <comment id="14904840" author="githubbot" created="Wed, 23 Sep 2015 17:12:19 +0000"  >&lt;p&gt;Github user hsaputra commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142667072&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142667072&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1&lt;/p&gt;</comment>
                            <comment id="14904892" author="githubbot" created="Wed, 23 Sep 2015 17:44:59 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142676424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142676424&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    OK, I will merge this then. Thanks for the reviews. I will remove the variable.&lt;/p&gt;</comment>
                            <comment id="14904933" author="githubbot" created="Wed, 23 Sep 2015 18:00:32 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14905055" author="githubbot" created="Wed, 23 Sep 2015 19:12:22 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142700908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142700908&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Let me check the implications tomorrow: I&apos;ve put a comment there which explicitly says that putting netty there is dangerous &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;    ```xml&lt;/p&gt;

&lt;p&gt;    	&amp;lt;!-- this section defines the module versions that are used if nothing else is specified. --&amp;gt;&lt;br/&gt;
    	&amp;lt;dependencyManagement&amp;gt;&lt;br/&gt;
    		&amp;lt;!-- WARN: &lt;br/&gt;
    			DO NOT put 	guava, &lt;br/&gt;
    						protobuf, &lt;br/&gt;
    						asm,&lt;br/&gt;
    						netty&lt;br/&gt;
    					here. It will overwrite Hadoop&apos;s guava dependency (even though we handle it&lt;br/&gt;
    			separatly in the flink-shaded-hadoop module).&lt;br/&gt;
    			We can use all guava versions everywhere by adding it directly as a dependency to each project.&lt;br/&gt;
    		--&amp;gt;&lt;br/&gt;
    		&amp;lt;dependencies&amp;gt;&lt;br/&gt;
    ```&lt;/p&gt;</comment>
                            <comment id="14905061" author="githubbot" created="Wed, 23 Sep 2015 19:13:49 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142701270&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142701270&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think the comments is wrong (I stumbled across it a while back as well). It came from the time when we were discussing to shade netty as well (which we don&apos;t do)...&lt;/p&gt;</comment>
                            <comment id="14905084" author="githubbot" created="Wed, 23 Sep 2015 19:26:30 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142704120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142704120&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I agree. The build is working, for all hadoop versions, so I seems to work.&lt;/p&gt;</comment>
                            <comment id="14905113" author="githubbot" created="Wed, 23 Sep 2015 19:42:03 +0000"  >&lt;p&gt;Github user hsaputra commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142707617&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142707617&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    But we do shade netty in the flink-shaded-hadoop module &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, don&apos;t we?&lt;br/&gt;
    By explicit pulling specific Netty version I think it would just mean it will shade that particular version of Netty instead of the one from Hadoop. Or maybe I am wrong.&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://cwiki.apache.org/confluence/display/FLINK/Hadoop+Versions+and+Dependency+Shading&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/FLINK/Hadoop+Versions+and+Dependency+Shading&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14905116" author="githubbot" created="Wed, 23 Sep 2015 19:43:17 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142707891&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142707891&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Please update the license file in flink-dist accordingly.&lt;br/&gt;
    On Sep 23, 2015 9:26 PM, &quot;Robert Metzger&quot; &amp;lt;notifications@github.com&amp;gt; wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; I agree. The build is working, for all hadoop versions, so I seems to work.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; Reply to this email directly or view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142704120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142704120&lt;/a&gt;&amp;gt;.&lt;br/&gt;
    &amp;gt;&lt;/p&gt;
</comment>
                            <comment id="14905157" author="githubbot" created="Wed, 23 Sep 2015 20:07:31 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142714383&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142714383&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Adjusted LICENSE in bc21de2.&lt;/p&gt;</comment>
                            <comment id="14905445" author="githubbot" created="Wed, 23 Sep 2015 22:49:09 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142753142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142753142&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hsaputra I think the wiki page is not correct any more. Netty was discussed to be shaded, but was never added to the relocated artifacts.&lt;/p&gt;

&lt;p&gt;    That was a good decision, IMHO. Dependencies that upgrade well-behaved need not (and in most cases should not) be shaded. Netty behaved well so far: When the changed API and behavior, they used a different namespace. Same is true for the Apache Commons libraries, for example the switch from commons lang version 2 (in the old namespace) to commons lang version 3 (new package name and artifact id).&lt;/p&gt;

&lt;p&gt;    Unfortunately, same is not true for Guava, Joda Time, ASM, Protobuf, ...&lt;/p&gt;</comment>
                            <comment id="14905464" author="githubbot" created="Wed, 23 Sep 2015 22:59:58 +0000"  >&lt;p&gt;Github user hsaputra commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1174#issuecomment-142755444&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1174#issuecomment-142755444&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    That is good to know because I did similar thing in other project to make sure we have the right Netty version. But no shading involve either.&lt;/p&gt;

&lt;p&gt;    Agree about Guava for sure =(&lt;/p&gt;

</comment>
                            <comment id="14965066" author="uce" created="Tue, 20 Oct 2015 13:05:07 +0000"  >&lt;p&gt;Fixed in 371817101848fbb993c02e14a705b5399f754444&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jzg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>