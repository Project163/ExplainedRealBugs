<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:17:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-32495] SourceCoordinatorAlignmentTest.testWatermarkAlignmentWithTwoGroups fails</title>
                <link>https://issues.apache.org/jira/browse/FLINK-32495</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;SourceCoordinatorAlignmentTest.testWatermarkAlignmentWithTwoGroups fails.&lt;/p&gt;

&lt;p&gt;I analyzed this CI : &#160;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=50668&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=2ef0effc-1da1-50e5-c2bd-aab434b1c5b7&amp;amp;l=9089&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=50668&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=2ef0effc-1da1-50e5-c2bd-aab434b1c5b7&amp;amp;l=9089&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;&lt;a name=&quot;Rootcause%3A&quot;&gt;&lt;/a&gt;Root cause:&lt;/h1&gt;
&lt;ul&gt;
	&lt;li&gt;The CoordinatorExecutorThreadFactory cannot new multiple threads. And too many callers will check `coordinatorThreadFactory.isCurrentThreadCoordinatorThread()`, such as: SourceCoordinatorContext.attemptReady.&lt;/li&gt;
	&lt;li&gt;The CoordinatorExecutorThreadFactory is shared at &lt;a href=&quot;https://github.com/apache/flink/blob/21eba4ca4cb235a2189c94cdbf3abcec5cde1e6e/flink-runtime/src/test/java/org/apache/flink/runtime/source/coordinator/SourceCoordinatorTestBase.java#L68&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SourceCoordinatorTestBase&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;It will be used at multiple source coordinator, and the second source coordinator will overwrite the CoordinatorExecutorThreadFactory#t, so the check will fail for the first source.&lt;/li&gt;
&lt;/ul&gt;


&lt;h1&gt;&lt;a name=&quot;Solution%3A&quot;&gt;&lt;/a&gt;Solution:&lt;/h1&gt;

&lt;p&gt;Don&apos;t share the CoordinatorExecutorThreadFactory.&lt;/p&gt;
&lt;h1&gt;&lt;a name=&quot;log%3A&quot;&gt;&lt;/a&gt;log:&lt;/h1&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13060986/13060986_image-2023-06-30-10-53-50-280.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13542025">FLINK-32495</key>
            <summary>SourceCoordinatorAlignmentTest.testWatermarkAlignmentWithTwoGroups fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fanrui">Rui Fan</assignee>
                                    <reporter username="fanrui">Rui Fan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 30 Jun 2023 02:57:44 +0000</created>
                <updated>Fri, 30 Jun 2023 12:15:29 +0000</updated>
                            <resolved>Fri, 30 Jun 2023 12:15:01 +0000</resolved>
                                                    <fixVersion>1.18.0</fixVersion>
                    <fixVersion>1.16.3</fixVersion>
                    <fixVersion>1.17.2</fixVersion>
                                    <component>Connectors / Common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17738873" author="fanrui" created="Fri, 30 Jun 2023 05:02:50 +0000"  >&lt;p&gt;Add a RepeatedTest(500) annotation for &#160;SourceCoordinatorAlignmentTest#testWatermarkAlignmentWithTwoGroups on my Local.&lt;/p&gt;

&lt;p&gt;Master branch: Tests failed: 234, passed 266 of 500 test.&lt;/p&gt;

&lt;p&gt;Master with this fix: Tests passed 500 of 500 test.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13060987/13060987_image-2023-06-30-13-01-26-519.png&quot; height=&quot;256&quot; width=&quot;1139&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13060988/13060988_image-2023-06-30-13-02-32-803.png&quot; height=&quot;245&quot; width=&quot;1111&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17739026" author="fanrui" created="Fri, 30 Jun 2023 10:55:38 +0000"  >&lt;p&gt;Merged&lt;/p&gt;

&lt;p&gt;&amp;lt;master:1.18&amp;gt; 24e479571facd07ff129c57cda86c7e34d4637bd to 9d7b1663296ef6f85572314a2b26a716981d8bff&lt;/p&gt;

&lt;p&gt;1.17 b4e02ab2a27ed8621f0fa0c759b2f58f14d770d4&lt;/p&gt;

&lt;p&gt;1.16 403c74d1de01c075aafe824e8f7f8428e477992f&lt;/p&gt;</comment>
                            <comment id="17739060" author="martijnvisser" created="Fri, 30 Jun 2023 12:15:29 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fanrui&quot; class=&quot;user-hover&quot; rel=&quot;fanrui&quot;&gt;fanrui&lt;/a&gt; - Also closing &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-32478&quot; title=&quot;SourceCoordinatorAlignmentTest.testAnnounceCombinedWatermarkWithoutStart fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-32478&quot;&gt;&lt;del&gt;FLINK-32478&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13541888">FLINK-32478</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13060986" name="image-2023-06-30-10-53-50-280.png" size="250652" author="fanrui" created="Fri, 30 Jun 2023 02:53:52 +0000"/>
                            <attachment id="13060987" name="image-2023-06-30-13-01-26-519.png" size="252385" author="fanrui" created="Fri, 30 Jun 2023 05:01:28 +0000"/>
                            <attachment id="13060988" name="image-2023-06-30-13-02-32-803.png" size="213948" author="fanrui" created="Fri, 30 Jun 2023 05:02:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ivzc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>