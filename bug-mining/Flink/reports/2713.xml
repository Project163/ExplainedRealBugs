<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:35:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10711] flink-end-to-end-tests can fail silently</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10711</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Because they are written in bash and they are not setting&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
set -e
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;at the beginning, errors can be swallowed silently.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13194801">FLINK-10711</key>
            <summary>flink-end-to-end-tests can fail silently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twalthr">Timo Walther</assignee>
                                    <reporter username="pnowojski">Piotr Nowojski</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 29 Oct 2018 10:54:46 +0000</created>
                <updated>Tue, 1 Oct 2019 15:38:46 +0000</updated>
                            <resolved>Wed, 7 Nov 2018 13:47:21 +0000</resolved>
                                    <version>1.7.0</version>
                                    <fixVersion>1.7.0</fixVersion>
                                    <component>Test Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16666998" author="pnowojski" created="Mon, 29 Oct 2018 10:57:06 +0000"  >&lt;p&gt;If we really must write those tests in bash, we should by default start all of the scripts with `set -e`.&lt;/p&gt;</comment>
                            <comment id="16668796" author="hequn8128" created="Tue, 30 Oct 2018 14:39:16 +0000"  >&lt;p&gt;How about start scripts with `set -eo pipefail`. Errors can also be swallowed if `set -e` with pipeline, such as `a=$&lt;span class=&quot;error&quot;&gt;&amp;#91;1/0&amp;#93;&lt;/span&gt;|b=2`.&lt;/p&gt;</comment>
                            <comment id="16668835" author="pnowojski" created="Tue, 30 Oct 2018 15:01:38 +0000"  >&lt;p&gt;Yes, that&apos;s a good point. Probably &lt;tt&gt;set -euo pipefail&lt;/tt&gt; is even better.&lt;/p&gt;</comment>
                            <comment id="16668852" author="hequn8128" created="Tue, 30 Oct 2018 15:13:46 +0000"  >&lt;p&gt;Agree, `set -euo pipefail` is better.&lt;/p&gt;</comment>
                            <comment id="16671824" author="dawidwys" created="Thu, 1 Nov 2018 16:24:17 +0000"  >&lt;p&gt;I am afraid it is not always as easy as setting those flags in every single bash script. Sometimes commands can fail, but subsequent commands use this value to validate that outcome/state of the test. To give you an example to check if container is running I&apos;ve used command &lt;tt&gt;docker inspect -f &apos;{{.State.Running&lt;/tt&gt;&apos; master}} which ends with an error if there is no container called master, but this is checked in subsequent commands. With the &lt;tt&gt;set -e&lt;/tt&gt; this test would end up immediately. &lt;/p&gt;

&lt;p&gt;My point here is that, if we want to add this, we would have to analyze each script carefully how adding this flag would affect the script.&lt;/p&gt;</comment>
                            <comment id="16671863" author="twalthr" created="Thu, 1 Nov 2018 16:55:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hequn8128&quot; class=&quot;user-hover&quot; rel=&quot;hequn8128&quot;&gt;hequn8128&lt;/a&gt; have you started already? I would take a look at this. I might enable it on a per-test basis for now.&lt;/p&gt;</comment>
                            <comment id="16672495" author="hequn8128" created="Fri, 2 Nov 2018 02:14:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; Hi, I haven&apos;t started yet. Take it as you wish. Feel free to let me know if there is anything I can help.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; Agree with you. Enable it on a per-test basis is a good idea.&lt;/p&gt;</comment>
                            <comment id="16675081" author="githubbot" created="Mon, 5 Nov 2018 12:40:13 +0000"  >&lt;p&gt;twalthr opened a new pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This commit modifies the test infrastructure to allow bash&apos;s basic&lt;br/&gt;
   error handling mechanism with `set -e`. Many tests are not&lt;br/&gt;
   ready for a globally defined strict error handling. For now, at&lt;br/&gt;
   least newly developed tests should consider this flag. If a test&lt;br/&gt;
   causes an error, a test fails with `&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;FAIL&amp;#93;&lt;/span&gt; Test script contains errors&quot;`.&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make it possible to enable `set -e`&lt;/li&gt;
&lt;/ul&gt;



&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Run `./run-single-test.sh ./test-scripts/test_batch_allround.sh` as an example with the `set` command uncommented.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): no&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: no&lt;/li&gt;
	&lt;li&gt;The serializers: no&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): no&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: no&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: no&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? no&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? not applicable&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675089" author="githubbot" created="Mon, 5 Nov 2018 12:45:07 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230736264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230736264&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -17,8 +17,6 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-set -o pipefail&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   are we assuming that every script should always include `test-scripts/common.sh` before anything else? &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675181" author="githubbot" created="Mon, 5 Nov 2018 13:57:05 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230757232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230757232&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -17,8 +17,6 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-set -o pipefail&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   If you take a look at two lines below: &quot;Must run common.sh before elasticsearch-common.sh.&quot;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675190" author="githubbot" created="Mon, 5 Nov 2018 14:02:36 +0000"  >&lt;p&gt;zentol commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230756420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230756420&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -320,15 +323,18 @@ function check_logs_for_errors {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;org.apache.flink.fs.shaded.hadoop3.org.apache.commons.beanutils.FluentPropertyBeanIntrospector  - Error when creating PropertyDescriptor for public final void org.apache.flink.fs.shaded.hadoop3.org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.String,java.lang.Object)! Ignoring this property.&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot;)&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot; &lt;/td&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; true)&lt;/th&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   I take it this prevents the script from exiting?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675191" author="githubbot" created="Mon, 5 Nov 2018 14:02:36 +0000"  >&lt;p&gt;zentol commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230758636&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230758636&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -347,19 +353,24 @@ function check_logs_for_exceptions {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.Exception: Execution was suspended&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.io.InvalidClassException: org.apache.flink.formats.avro.typeutils.AvroSerializer&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;Caused by: java.lang.Exception: JobManager is shutting down&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;exception&quot;)&lt;br/&gt;
+   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;exception&quot; &lt;/td&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; true)&lt;/th&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   will this not &lt;em&gt;always&lt;/em&gt; return true?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675192" author="githubbot" created="Mon, 5 Nov 2018 14:02:36 +0000"  >&lt;p&gt;zentol commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230758215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230758215&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -373,7 +384,9 @@ function stop_cluster {&lt;br/&gt;
   &quot;$FLINK_DIR&quot;/bin/stop-cluster.sh&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;stop zookeeper only if there are processes running&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if ! [ &quot;`jps | grep &apos;FlinkZooKeeperQuorumPeer&apos; | wc -l`&quot; = &quot;0&quot; ]; then&lt;br/&gt;
+  zookeeper_process_count=$(jps | grep -c &apos;FlinkZooKeeperQuorumPeer&apos; || true)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   according to &lt;span class=&quot;error&quot;&gt;&amp;#91;this document&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.gnu.org/software/bash/manual/bashref.html#The-Set-Builtin&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.gnu.org/software/bash/manual/bashref.html#The-Set-Builtin&lt;/a&gt;) conditions may return non-zero exit codes without causing the script to exit.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675193" author="githubbot" created="Mon, 5 Nov 2018 14:02:36 +0000"  >&lt;p&gt;zentol commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230758958&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230758958&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -17,8 +17,6 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-set -o pipefail&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   yes, but I believe that to be a reasonable assumption. alternatively, could we include it in the runner scripts instead?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675201" author="githubbot" created="Mon, 5 Nov 2018 14:08:09 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230761025&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230761025&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -320,15 +323,18 @@ function check_logs_for_errors {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;org.apache.flink.fs.shaded.hadoop3.org.apache.commons.beanutils.FluentPropertyBeanIntrospector  - Error when creating PropertyDescriptor for public final void org.apache.flink.fs.shaded.hadoop3.org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.String,java.lang.Object)! Ignoring this property.&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot;)&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot; &lt;/td&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; true)&lt;/th&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Yes, we could do it even more cryptic using `|| :` as discussed here: &lt;a href=&quot;https://stackoverflow.com/questions/41078968/why-is-grep-c-with-0-count-exits-program-with-status-code-1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/41078968/why-is-grep-c-with-0-count-exits-program-with-status-code-1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675207" author="githubbot" created="Mon, 5 Nov 2018 14:11:10 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230762043&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230762043&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -17,8 +17,6 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-set -o pipefail&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   So you mean to move the one and only `set` command to `test-runner-common.sh`?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675215" author="githubbot" created="Mon, 5 Nov 2018 14:17:18 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230764365&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230764365&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -373,7 +384,9 @@ function stop_cluster {&lt;br/&gt;
   &quot;$FLINK_DIR&quot;/bin/stop-cluster.sh&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;stop zookeeper only if there are processes running&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if ! [ &quot;`jps | grep &apos;FlinkZooKeeperQuorumPeer&apos; | wc -l`&quot; = &quot;0&quot; ]; then&lt;br/&gt;
+  zookeeper_process_count=$(jps | grep -c &apos;FlinkZooKeeperQuorumPeer&apos; || true)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   As far as I remember, this caused an error in my setup. I can verify it again.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675217" author="githubbot" created="Mon, 5 Nov 2018 14:20:16 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230765425&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230765425&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -347,19 +353,24 @@ function check_logs_for_exceptions {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.Exception: Execution was suspended&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.io.InvalidClassException: org.apache.flink.formats.avro.typeutils.AvroSerializer&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;Caused by: java.lang.Exception: JobManager is shutting down&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;exception&quot;)&lt;br/&gt;
+   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;exception&quot; &lt;/td&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; true)&lt;/th&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   no, it only changes the exit code&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675227" author="githubbot" created="Mon, 5 Nov 2018 14:25:07 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230767200&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230767200&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -17,8 +17,6 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-set -o pipefail&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   My comment was not targeted to `elasticsearch-common.sh` alone, but to all of the scripts. Do we want to assume that `test-scripts/common.sh` is included before anything else anywhere? I mean we could, but that can be quite fragile convention. &lt;/p&gt;

&lt;p&gt;   On the other hand, I don&apos;t want to overthink this, since we would like to start replacing those bash scripts after 1.7 release anyway.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675282" author="githubbot" created="Mon, 5 Nov 2018 15:02:34 +0000"  >&lt;p&gt;zentol commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r230781779&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r230781779&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -17,8 +17,6 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-set -o pipefail&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   &amp;gt; So you mean to move the one and only set command to test-runner-common.sh&lt;/p&gt;

&lt;p&gt;   yes that was my thinking. Every test has to include it anyway.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16677970" author="githubbot" created="Wed, 7 Nov 2018 10:13:48 +0000"  >&lt;p&gt;twalthr commented on issue #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#issuecomment-436573867&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#issuecomment-436573867&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @zentol I updated the PR and rebased it to the current master.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678140" author="githubbot" created="Wed, 7 Nov 2018 12:19:45 +0000"  >&lt;p&gt;zentol commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r231482850&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r231482850&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test-runner-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -39,32 +43,51 @@ function run_test {&lt;br/&gt;
     export TEST_DATA_DIR=$TEST_INFRA_DIR/temp-test-directory-$(date +%S%N)&lt;br/&gt;
     echo &quot;TEST_DATA_DIR: $TEST_DATA_DIR&quot;&lt;/p&gt;

&lt;p&gt;+    export DESCRIPTION=&quot;$description&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   we could explicitly pass these to `post_test_validation` as we did before.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678150" author="githubbot" created="Wed, 7 Nov 2018 12:34:56 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023#discussion_r231486831&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023#discussion_r231486831&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test-runner-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -39,32 +43,51 @@ function run_test {&lt;br/&gt;
     export TEST_DATA_DIR=$TEST_INFRA_DIR/temp-test-directory-$(date +%S%N)&lt;br/&gt;
     echo &quot;TEST_DATA_DIR: $TEST_DATA_DIR&quot;&lt;/p&gt;

&lt;p&gt;+    export DESCRIPTION=&quot;$description&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Thanks, I thought it was not working before. Will undo `description` and `check exception` then.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678208" author="githubbot" created="Wed, 7 Nov 2018 13:14:11 +0000"  >&lt;p&gt;asfgit closed pull request #7023: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10711&quot; title=&quot;flink-end-to-end-tests can fail silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10711&quot;&gt;&lt;del&gt;FLINK-10711&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;e2e&amp;#93;&lt;/span&gt; Allow basic error handling with bash&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7023&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7023&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-end-to-end-tests/README.md b/flink-end-to-end-tests/README.md&lt;br/&gt;
index 257298e3cce..025d927492f 100644&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/README.md&lt;br/&gt;
+++ b/flink-end-to-end-tests/README.md&lt;br/&gt;
@@ -47,6 +47,8 @@ In order to add a new test case you need add it to either `test-scripts/run-nigh&lt;/p&gt;

&lt;p&gt; &lt;em&gt;Note: If you want to parameterize your tests please do so by adding multiple test cases with parameters as arguments to the nightly / pre-commit test suites. This allows the test runner to do a cleanup in between each individual test and also to fail those tests individually.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;+&lt;em&gt;Note: While developing a new test case make sure to enable bash&apos;s error handling in `test-scripts/test-runner-common.sh` by uncommenting `set -Eexuo pipefail` and commenting the current default `set` call. If your test is implemented properly, add `set -Eeuo pipefail` on the very top of your test script (before any `common` script).&lt;/em&gt;&lt;br/&gt;
+&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Passing your test&lt;br/&gt;
 A test is considered to have passed if it:&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;has exit code 0&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/common.sh b/flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
index 4f628fc6d12..670090c2c41 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
@@ -17,8 +17,6 @@&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-set -o pipefail&lt;br/&gt;
-&lt;br/&gt;
 if [[ -z $FLINK_DIR ]]; then&lt;br/&gt;
     echo &quot;FLINK_DIR needs to point to a Flink distribution directory&quot;&lt;br/&gt;
     exit 1&lt;br/&gt;
@@ -304,6 +302,7 @@ function start_and_wait_for_tm {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; function check_logs_for_errors {&lt;br/&gt;
+  echo &quot;Checking for errors...&quot;&lt;br/&gt;
   error_count=$(grep -rv &quot;GroupCoordinatorNotAvailableException&quot; $FLINK_DIR/log \&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;RetriableCommitFailedException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;NoAvailableBrokersException&quot; \&lt;br/&gt;
@@ -320,15 +319,18 @@ function check_logs_for_errors {&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;org.apache.flink.fs.shaded.hadoop3.org.apache.commons.beanutils.FluentPropertyBeanIntrospector  - Error when creating PropertyDescriptor for public final void org.apache.flink.fs.shaded.hadoop3.org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.String,java.lang.Object)! Ignoring this property.&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot;)&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot; &lt;/td&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; true)&lt;br/&gt;
   if [[ ${error_count} -gt 0 ]]; then&lt;br/&gt;
     echo &quot;Found error in log files:&quot;&lt;br/&gt;
     cat $FLINK_DIR/log/*&lt;br/&gt;
     EXIT_CODE=1&lt;br/&gt;
+  else&lt;br/&gt;
+    echo &quot;No errors in log files.&quot;&lt;br/&gt;
   fi&lt;br/&gt;
 }&lt;/th&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; function check_logs_for_exceptions {&lt;br/&gt;
+  echo &quot;Checking for exceptions...&quot;&lt;br/&gt;
   exception_count=$(grep -rv &quot;GroupCoordinatorNotAvailableException&quot; $FLINK_DIR/log \&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;RetriableCommitFailedException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;NoAvailableBrokersException&quot; \&lt;br/&gt;
@@ -348,19 +350,24 @@ function check_logs_for_exceptions {&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.io.InvalidClassException: org.apache.flink.formats.avro.typeutils.AvroSerializer&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;Caused by: java.lang.Exception: JobManager is shutting down&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.Exception: Artificial failure&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;exception&quot;)&lt;br/&gt;
+   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;exception&quot; &lt;/td&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; true)&lt;br/&gt;
   if [[ ${exception_count} -gt 0 ]]; then&lt;br/&gt;
     echo &quot;Found exception in log files:&quot;&lt;br/&gt;
     cat $FLINK_DIR/log/*&lt;br/&gt;
     EXIT_CODE=1&lt;br/&gt;
+  else&lt;br/&gt;
+    echo &quot;No exceptions in log files.&quot;&lt;br/&gt;
   fi&lt;br/&gt;
 }&lt;/th&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; function check_logs_for_non_empty_out_files &lt;/p&gt;
{
+  echo &quot;Checking for non-empty .out files...&quot;
   if grep -ri &quot;.&quot; $FLINK_DIR/log/*.out &amp;gt; /dev/null; then
     echo &quot;Found non-empty .out files:&quot;
     cat $FLINK_DIR/log/*.out
     EXIT_CODE=1
+  else
+    echo &quot;No non-empty .out files.&quot;
   fi
 }

&lt;p&gt;@@ -374,7 +381,9 @@ function stop_cluster {&lt;br/&gt;
   &quot;$FLINK_DIR&quot;/bin/stop-cluster.sh&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;stop zookeeper only if there are processes running&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if ! [ &quot;`jps | grep &apos;FlinkZooKeeperQuorumPeer&apos; | wc -l`&quot; = &quot;0&quot; ]; then&lt;br/&gt;
+  zookeeper_process_count=$(jps | grep -c &apos;FlinkZooKeeperQuorumPeer&apos; || true)&lt;br/&gt;
+  if [[ ${zookeeper_process_count} -gt 0 ]]; then&lt;br/&gt;
+    echo &quot;Stopping zookeeper...&quot;&lt;br/&gt;
     &quot;$FLINK_DIR&quot;/bin/zookeeper.sh stop&lt;br/&gt;
   fi&lt;br/&gt;
 }&lt;br/&gt;
@@ -489,9 +498,9 @@ function tm_kill_all {&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;Kills all processes that match the given name.&lt;br/&gt;
 function kill_all {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local pid=`jps | grep -E &quot;${1}&quot; | cut -d &quot; &quot; -f 1`&lt;/li&gt;
	&lt;li&gt;kill ${pid} 2&amp;gt; /dev/null&lt;/li&gt;
	&lt;li&gt;wait ${pid} 2&amp;gt; /dev/null&lt;br/&gt;
+  local pid=`jps | grep -E &quot;${1}&quot; | cut -d &quot; &quot; -f 1 || true`&lt;br/&gt;
+  kill ${pid} 2&amp;gt; /dev/null || true&lt;br/&gt;
+  wait ${pid} 2&amp;gt; /dev/null || true&lt;br/&gt;
 }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; function kill_random_taskmanager {&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/elasticsearch-common.sh b/flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
index 834e84528b3..3d64b31b897 100644&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
@@ -17,8 +17,6 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-set -o pipefail&lt;br/&gt;
-&lt;br/&gt;
 if [[ -z $TEST_DATA_DIR ]]; then&lt;br/&gt;
   echo &quot;Must run common.sh before elasticsearch-common.sh.&quot;&lt;br/&gt;
   exit 1&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/kafka-common.sh b/flink-end-to-end-tests/test-scripts/kafka-common.sh&lt;br/&gt;
index dedfe5208b1..5f8f65ec251 100644&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/kafka-common.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/kafka-common.sh&lt;br/&gt;
@@ -17,10 +17,6 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-set -e&lt;br/&gt;
-set -u&lt;br/&gt;
-set -o pipefail&lt;br/&gt;
-&lt;br/&gt;
 if [[ -z $TEST_DATA_DIR ]]; then&lt;br/&gt;
   echo &quot;Must run common.sh before kafka-common.sh.&quot;&lt;br/&gt;
   exit 1&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/test-runner-common.sh b/flink-end-to-end-tests/test-scripts/test-runner-common.sh&lt;br/&gt;
index 0e56d2ac250..9d6bd972f09 100644&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/test-runner-common.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test-runner-common.sh&lt;br/&gt;
@@ -17,6 +17,10 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;+# Enable this line when developing a new end-to-end test&lt;br/&gt;
+#set -Eexuo pipefail&lt;br/&gt;
+set -o pipefail&lt;br/&gt;
+&lt;br/&gt;
 source &quot;${END_TO_END_DIR}&quot;/test-scripts/common.sh&lt;/p&gt;

&lt;p&gt; #######################################&lt;br/&gt;
@@ -29,7 +33,7 @@ source &quot;${END_TO_END_DIR}&quot;/test-scripts/common.sh&lt;br/&gt;
 function run_test {&lt;br/&gt;
     local description=&quot;$1&quot;&lt;br/&gt;
     local command=&quot;$2&quot;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local skip_check_exceptions=&quot;$3&quot;&lt;br/&gt;
+    local skip_check_exceptions=${3:-}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     printf &quot;\n==============================================================================\n&quot;&lt;br/&gt;
     printf &quot;Running &apos;${description}&apos;\n&quot;&lt;br/&gt;
@@ -39,32 +43,51 @@ function run_test {&lt;br/&gt;
     export TEST_DATA_DIR=$TEST_INFRA_DIR/temp-test-directory-$(date +%S%N)&lt;br/&gt;
     echo &quot;TEST_DATA_DIR: $TEST_DATA_DIR&quot;&lt;/p&gt;

&lt;p&gt;+    export DESCRIPTION=&quot;$description&quot;&lt;br/&gt;
+    export SKIP_CHECK_EXCEPTIONS=&quot;$skip_check_exceptions&quot;&lt;br/&gt;
+&lt;br/&gt;
     backup_config&lt;br/&gt;
     start_timer&lt;br/&gt;
+&lt;br/&gt;
+    function test_error() &lt;/p&gt;
{
+      echo &quot;[FAIL] Test script contains errors.&quot;
+      post_test_validation 1
+    }
&lt;p&gt;+    trap &apos;test_error&apos; ERR&lt;br/&gt;
+&lt;br/&gt;
     ${command}&lt;br/&gt;
     exit_code=&quot;$?&quot;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;time_elapsed=$(end_timer)&lt;br/&gt;
+    post_test_validation ${exit_code}&lt;br/&gt;
+}&lt;br/&gt;
+&lt;br/&gt;
+# Validates the test result and exit code after its execution.&lt;br/&gt;
+function post_test_validation {&lt;br/&gt;
+    local exit_code=&quot;$1&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ &quot;${skip_check_exceptions}&quot; != &quot;skip_check_exceptions&quot; ]]; then&lt;br/&gt;
+    local time_elapsed=$(end_timer)&lt;br/&gt;
+&lt;br/&gt;
+    if [[ &quot;${SKIP_CHECK_EXCEPTIONS}&quot; != &quot;skip_check_exceptions&quot; ]]; then&lt;br/&gt;
         check_logs_for_errors&lt;br/&gt;
         check_logs_for_exceptions&lt;br/&gt;
         check_logs_for_non_empty_out_files&lt;br/&gt;
+    else&lt;br/&gt;
+        echo &quot;Checking of logs skipped.&quot;&lt;br/&gt;
     fi&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;Investigate exit_code for failures of test executable as well as EXIT_CODE for failures of the test.&lt;/li&gt;
	&lt;li&gt;Do not clean up if either fails.&lt;br/&gt;
     if [[ ${exit_code} == 0 ]]; then&lt;br/&gt;
         if [[ ${EXIT_CODE} != 0 ]]; then&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;printf &quot;\n&lt;span class=&quot;error&quot;&gt;&amp;#91;FAIL&amp;#93;&lt;/span&gt; &apos;${description}&apos; failed after ${time_elapsed}! Test exited with exit code 0 but the logs contained errors, exceptions or non-empty .out files\n\n&quot;&lt;br/&gt;
+            printf &quot;\n&lt;span class=&quot;error&quot;&gt;&amp;#91;FAIL&amp;#93;&lt;/span&gt; &apos;${DESCRIPTION}&apos; failed after ${time_elapsed}! Test exited with exit code 0 but the logs contained errors, exceptions or non-empty .out files\n\n&quot;&lt;br/&gt;
             exit_code=1&lt;br/&gt;
         else&lt;/li&gt;
	&lt;li&gt;printf &quot;\n&lt;span class=&quot;error&quot;&gt;&amp;#91;PASS&amp;#93;&lt;/span&gt; &apos;${description}&apos; passed after ${time_elapsed}! Test exited with exit code 0.\n\n&quot;&lt;br/&gt;
+            printf &quot;\n&lt;span class=&quot;error&quot;&gt;&amp;#91;PASS&amp;#93;&lt;/span&gt; &apos;${DESCRIPTION}&apos; passed after ${time_elapsed}! Test exited with exit code 0.\n\n&quot;&lt;br/&gt;
         fi&lt;br/&gt;
     else&lt;br/&gt;
         if [[ ${EXIT_CODE} != 0 ]]; then&lt;/li&gt;
	&lt;li&gt;printf &quot;\n&lt;span class=&quot;error&quot;&gt;&amp;#91;FAIL&amp;#93;&lt;/span&gt; &apos;${description}&apos; failed after ${time_elapsed}! Test exited with exit code ${exit_code} and the logs contained errors, exceptions or non-empty .out files\n\n&quot;&lt;br/&gt;
+            printf &quot;\n&lt;span class=&quot;error&quot;&gt;&amp;#91;FAIL&amp;#93;&lt;/span&gt; &apos;${DESCRIPTION}&apos; failed after ${time_elapsed}! Test exited with exit code ${exit_code} and the logs contained errors, exceptions or non-empty .out files\n\n&quot;&lt;br/&gt;
         else&lt;/li&gt;
	&lt;li&gt;printf &quot;\n&lt;span class=&quot;error&quot;&gt;&amp;#91;FAIL&amp;#93;&lt;/span&gt; &apos;${description}&apos; failed after ${time_elapsed}! Test exited with exit code ${exit_code}\n\n&quot;&lt;br/&gt;
+            printf &quot;\n&lt;span class=&quot;error&quot;&gt;&amp;#91;FAIL&amp;#93;&lt;/span&gt; &apos;${DESCRIPTION}&apos; failed after ${time_elapsed}! Test exited with exit code ${exit_code}\n\n&quot;&lt;br/&gt;
         fi&lt;br/&gt;
     fi&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;diff --git a/flink-end-to-end-tests/test-scripts/test_streaming_kafka.sh b/flink-end-to-end-tests/test-scripts/test_streaming_kafka.sh&lt;br/&gt;
index c5cdfde3dc0..044d2237988 100755&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/test_streaming_kafka.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test_streaming_kafka.sh&lt;br/&gt;
@@ -17,9 +17,7 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-set -e&lt;br/&gt;
-set -u&lt;br/&gt;
-set -o pipefail&lt;br/&gt;
+set -Eeuo pipefail&lt;/p&gt;

&lt;p&gt; source &quot;$(dirname &quot;$0&quot;)&quot;/common.sh&lt;br/&gt;
 source &quot;$(dirname &quot;$0&quot;)&quot;/kafka-common.sh 2.0.0 5.0.0 5.0&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/test_streaming_kafka010.sh b/flink-end-to-end-tests/test-scripts/test_streaming_kafka010.sh&lt;br/&gt;
index ecd651448a9..a55b0bc33c6 100755&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/test_streaming_kafka010.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test_streaming_kafka010.sh&lt;br/&gt;
@@ -17,6 +17,8 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;+set -Eeuo pipefail&lt;br/&gt;
+&lt;br/&gt;
 source &quot;$(dirname &quot;$0&quot;)&quot;/common.sh&lt;br/&gt;
 source &quot;$(dirname &quot;$0&quot;)&quot;/kafka-common.sh 0.10.2.0 3.2.0 3.2&lt;/p&gt;

&lt;p&gt;diff --git a/flink-end-to-end-tests/test-scripts/test_streaming_kafka_common.sh b/flink-end-to-end-tests/test-scripts/test_streaming_kafka_common.sh&lt;br/&gt;
index ff3adc158c7..0583638b3bc 100644&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/test_streaming_kafka_common.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test_streaming_kafka_common.sh&lt;br/&gt;
@@ -17,10 +17,6 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 ################################################################################&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-set -e&lt;br/&gt;
-set -u&lt;br/&gt;
-set -o pipefail&lt;br/&gt;
-&lt;br/&gt;
 KAFKA_EXAMPLE_JAR=&quot;$1&quot;&lt;/p&gt;

&lt;p&gt; setup_kafka_dist&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678239" author="twalthr" created="Wed, 7 Nov 2018 13:47:22 +0000"  >&lt;p&gt;Fixed in 1.8: d61421bf41c52490fcd38653210ce5748d76155d&lt;br/&gt;
Fixed in 1.7: 7d980fdb6f126f7bd46904c610c0da3dc232e657&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zqw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>