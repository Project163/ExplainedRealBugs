<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:46:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-17657] Fix reading BIGINT UNSIGNED type field not work in JDBC</title>
                <link>https://issues.apache.org/jira/browse/FLINK-17657</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I use sql client read mysql table, but I found I can&apos;t read a table contain `BIGINT UNSIGNED` field. It will&#160;&lt;br/&gt;
 Caused by: java.lang.ClassCastException: java.math.BigInteger cannot be cast to java.lang.Long&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;MySQL table:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;create table tb&lt;br/&gt;
 (&lt;br/&gt;
 id BIGINT UNSIGNED auto_increment&#160;&lt;br/&gt;
 primary key,&lt;br/&gt;
 cooper BIGINT(19) null ,&lt;/p&gt;

&lt;p&gt;user_sex VARCHAR(2) null&#160;&lt;/p&gt;

&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;my env yaml is env.yaml .&lt;/p&gt;</description>
                <environment></environment>
        <key id="13304586">FLINK-17657</key>
            <summary>Fix reading BIGINT UNSIGNED type field not work in JDBC</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="leonard">Leonard Xu</assignee>
                                    <reporter username="zhanglun">lun zhang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 13 May 2020 09:18:49 +0000</created>
                <updated>Thu, 28 May 2020 06:13:49 +0000</updated>
                            <resolved>Thu, 28 May 2020 06:13:49 +0000</resolved>
                                    <version>1.10.0</version>
                    <version>1.10.1</version>
                                    <fixVersion>1.11.0</fixVersion>
                                    <component>Connectors / JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17106782" author="jinxintang" created="Thu, 14 May 2020 01:56:31 +0000"  >&lt;p&gt;BigInt in mysql has a bigger range than Long in java, you could use Decimal instead in java to parse.&lt;/p&gt;</comment>
                            <comment id="17107084" author="zhanglun" created="Thu, 14 May 2020 08:38:17 +0000"  >&lt;p&gt;Thank for your replay. It seem not ok.I try and get the follow exception.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Could not execute SQL statement. Reason:&lt;br/&gt;
 java.lang.ClassCastException: java.math.BigInteger cannot be cast to java.math.BigDecimal&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It&apos;s seem the jdbc read the id fielf as&#160;java.math.BigInteger.And Sql DataType not support&#160;java.math.BigInteger only support (Long)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17107228" author="jinxintang" created="Thu, 14 May 2020 11:41:20 +0000"  >&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhanglun&quot; class=&quot;user-hover&quot; rel=&quot;zhanglun&quot;&gt;zhanglun&lt;/a&gt;, Could you please provide code detail to reproduce this issus, it seems ok in my side, here is my code piece:&#160;&lt;a href=&quot;https://github.com/TJX2014/flink/blob/master-flink17657-jdbc-bigint/flink-examples/flink-examples-batch/src/main/java/org/apache/flink/examples/java/jdbc/JdbcReader.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;code piece&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17111920" author="danny0405" created="Wed, 20 May 2020 08:26:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhanglun&quot; class=&quot;user-hover&quot; rel=&quot;zhanglun&quot;&gt;zhanglun&lt;/a&gt;, would you plan to fix this in release 1.11.0 ?&lt;/p&gt;</comment>
                            <comment id="17112697" author="zhanglun" created="Thu, 21 May 2020 01:17:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danny0405&quot; class=&quot;user-hover&quot; rel=&quot;danny0405&quot;&gt;danny0405&lt;/a&gt;&#160;, I don&apos;t know how to fix it.It&apos;s&#160; need change flink sql support data type.&lt;/p&gt;</comment>
                            <comment id="17112698" author="zhanglun" created="Thu, 21 May 2020 01:19:23 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JinxinTang&quot; class=&quot;user-hover&quot; rel=&quot;JinxinTang&quot;&gt;JinxinTang&lt;/a&gt;. Sorry I only can reproduce this in sql client.&lt;/p&gt;</comment>
                            <comment id="17112897" author="leonard xu" created="Thu, 21 May 2020 07:53:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhanglun&quot; class=&quot;user-hover&quot; rel=&quot;zhanglun&quot;&gt;zhanglun&lt;/a&gt;&#160;Thanks for the report, it&apos;s a bug from type mapping between&#160; mysql and flink sql type exists in JDBC connector.&lt;/p&gt;

&lt;p&gt;the root cause is that bigint unsigned range is&#160;&lt;tt&gt;0&lt;/tt&gt;&#160;to&#160;&lt;tt&gt;18446744073709551615,&#160;&lt;/tt&gt;&lt;tt&gt;bigint rang is&#160;&lt;/tt&gt;&lt;tt&gt;-9223372036854775808&lt;/tt&gt;&lt;tt&gt;&#160;to&#160;&lt;/tt&gt;&lt;tt&gt;9223372036854775807&lt;/tt&gt;&lt;tt&gt;. so we cannot map a&#160;bigint unsigned to bigint(flink bigint has same range with mysql bigint)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JinxinTang&quot; class=&quot;user-hover&quot; rel=&quot;JinxinTang&quot;&gt;JinxinTang&lt;/a&gt;&#160;&apos;s work around&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; is read String&#160; rather read the original BigInteger(jdbc treats bigint unsigned as java.math.BigInteger).&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://github.com/TJX2014/flink/blob/master-flink17657-jdbc-bigint/flink-examples/flink-examples-batch/src/main/java/org/apache/flink/examples/java/jdbc/JdbcReader.java#L49&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/TJX2014/flink/blob/master-flink17657-jdbc-bigint/flink-examples/flink-examples-batch/src/main/java/org/apache/flink/examples/java/jdbc/JdbcReader.java#L49&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17115886" author="zhanglun" created="Mon, 25 May 2020 09:30:55 +0000"  >&lt;p&gt;Awesome job!!!&lt;/p&gt;</comment>
                            <comment id="17118354" author="jark" created="Thu, 28 May 2020 06:13:49 +0000"  >&lt;p&gt;master (1.12.0): 8bc76955b527b6905049346eb1eaa9ce1ab03409&lt;br/&gt;
1.11.0: beb0c1c5bab09feb525f2bd8c1352617072dd118&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13002804" name="env.yaml" size="511" author="zhanglun" created="Wed, 13 May 2020 09:28:23 +0000"/>
                            <attachment id="13002801" name="excetion.txt" size="4691" author="zhanglun" created="Wed, 13 May 2020 09:20:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0eofc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>