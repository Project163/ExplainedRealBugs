<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:34:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5363] Fire timers when window state is currently empty</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5363</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently, when a &lt;tt&gt;Trigger&lt;/tt&gt; sets a timer and that timer fires in the future at a point when there is currently no data in the window state, then that timer is being ignored.&lt;/p&gt;

&lt;p&gt;This is a problem for some users because they manually set cleanup timers and they need to be called because the trigger needs to cleanup some state. (For normal time windows this is not a problem, but for special cases built on top of &lt;tt&gt;GlobalWindows&lt;/tt&gt; the current behaviour leads to problems.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13028986">FLINK-5363</key>
            <summary>Fire timers when window state is currently empty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aitozi">WenJun Min</assignee>
                                    <reporter username="aljoscha">Aljoscha Krettek</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sun, 18 Dec 2016 17:31:41 +0000</created>
                <updated>Wed, 11 Jul 2018 14:39:26 +0000</updated>
                            <resolved>Wed, 11 Jul 2018 11:39:46 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15764548" author="githubbot" created="Tue, 20 Dec 2016 16:15:31 +0000"  >&lt;p&gt;GitHub user aljoscha opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3034&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5363&quot; title=&quot;Fire timers when window state is currently empty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5363&quot;&gt;&lt;del&gt;FLINK-5363&lt;/del&gt;&lt;/a&gt; Fire timers when window state is currently empty&lt;/p&gt;

&lt;p&gt;    Before this change, when a Trigger sets a timer and that timer fires in&lt;br/&gt;
    the future at a point when there is currently no data in the window&lt;br/&gt;
    state, then that timer is being ignored.&lt;/p&gt;

&lt;p&gt;    This was a problem for some users because they manually set cleanup&lt;br/&gt;
    timers and they need to be called because the trigger needs to cleanup&lt;br/&gt;
    some state. (For normal time windows this is not a problem, but for&lt;br/&gt;
    special cases built on top of GlobalWindows the old behaviour was&lt;br/&gt;
    leading to problems.)&lt;/p&gt;

&lt;p&gt;    Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.&lt;br/&gt;
    If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the &lt;span class=&quot;error&quot;&gt;&amp;#91;How To Contribute guide&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://flink.apache.org/how-to-contribute.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://flink.apache.org/how-to-contribute.html&lt;/a&gt;).&lt;br/&gt;
    In addition to going through the list, please provide a meaningful description of your changes.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] General&lt;/li&gt;
	&lt;li&gt;The pull request references the related JIRA issue (&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;FLINK-XXX&amp;#93;&lt;/span&gt; Jira title text&quot;)&lt;/li&gt;
	&lt;li&gt;The pull request addresses only one issue&lt;/li&gt;
	&lt;li&gt;Each commit in the PR has a meaningful commit message (including the JIRA id)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Documentation&lt;/li&gt;
	&lt;li&gt;Documentation has been added for new functionality&lt;/li&gt;
	&lt;li&gt;Old documentation affected by the pull request has been updated&lt;/li&gt;
	&lt;li&gt;JavaDoc for public methods has been added&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Tests &amp;amp; Build&lt;/li&gt;
	&lt;li&gt;Functionality added by the pull request is covered by tests&lt;/li&gt;
	&lt;li&gt;`mvn clean verify` has been executed successfully locally or a Travis build has passed&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/aljoscha/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aljoscha/flink&lt;/a&gt; fire-trigger-with-empty-state&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3034.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3034.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3034&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b8bfdf05ae9bfb546a223c5f638016a3e18f41bb&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-12-18T17:33:13Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5363&quot; title=&quot;Fire timers when window state is currently empty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5363&quot;&gt;&lt;del&gt;FLINK-5363&lt;/del&gt;&lt;/a&gt; Fire timers when window state is currently empty&lt;/p&gt;

&lt;p&gt;    Before this change, when a Trigger sets a timer and that timer fires in&lt;br/&gt;
    the future at a point when there is currently no data in the window&lt;br/&gt;
    state, then that timer is being ignored.&lt;/p&gt;

&lt;p&gt;    This was a problem for some users because they manually set cleanup&lt;br/&gt;
    timers and they need to be called because the trigger needs to cleanup&lt;br/&gt;
    some state. (For normal time windows this is not a problem, but for&lt;br/&gt;
    special cases built on top of GlobalWindows the old behaviour was&lt;br/&gt;
    leading to problems.)&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15764555" author="githubbot" created="Tue, 20 Dec 2016 16:17:59 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3034&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    R: @klou and @StephanEwen for review, please. (Or anyone who&apos;s interested, of course)&lt;/p&gt;</comment>
                            <comment id="16008264" author="githubbot" created="Fri, 12 May 2017 15:09:01 +0000"  >&lt;p&gt;Github user greghogan commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3034&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @aljoscha can the new behavior be demonstrated by a test?&lt;/p&gt;</comment>
                            <comment id="16009590" author="githubbot" created="Sun, 14 May 2017 04:56:02 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3034&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It could, but I think we don&apos;t want to do this change right now.&lt;/p&gt;</comment>
                            <comment id="16009591" author="githubbot" created="Sun, 14 May 2017 04:56:03 +0000"  >&lt;p&gt;Github user aljoscha closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3034&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16511015" author="githubbot" created="Wed, 13 Jun 2018 12:05:54 +0000"  >&lt;p&gt;Github user cjolif commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3034&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;gt; It could, but I think we don&apos;t want to do this change right now.&lt;/p&gt;

&lt;p&gt;    we are getting into cases where this feature would be useful. Do you have any insights on why you finally don&apos;t want to make this feasible?&lt;/p&gt;</comment>
                            <comment id="16536711" author="githubbot" created="Mon, 9 Jul 2018 09:00:16 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/commit/8c89f3c6b5ebd0334176d9e7e57b38b4d39a594a#commitcomment-29638369&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/8c89f3c6b5ebd0334176d9e7e57b38b4d39a594a#commitcomment-29638369&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Strange, it seems to be this one: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-5363&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16536988" author="githubbot" created="Mon, 9 Jul 2018 14:42:52 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3034&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    hi @cjolif what are the cases where you would need this?&lt;/p&gt;</comment>
                            <comment id="16539946" author="aljoscha" created="Wed, 11 Jul 2018 11:39:46 +0000"  >&lt;p&gt;Implemented on master in&lt;br/&gt;
fdce4b2ee0b4127c296f2d1e27fe9ecbbedc1676&lt;/p&gt;</comment>
                            <comment id="16540178" author="githubbot" created="Wed, 11 Jul 2018 14:39:26 +0000"  >&lt;p&gt;Github user cjolif commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3034&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @aljoscha &lt;/p&gt;

&lt;p&gt;    We regularly empty the window because we can get lengthy windows with a lot of elements, so it is good get rid of elements we already managed. But then if we have no more elements and the window event time is triggered it does fire the window function.&lt;/p&gt;

&lt;p&gt;    When we will get some spare cycle we are going to give a try to it as you seem to have fix that according to the JIRA issue?&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13168548">FLINK-9668</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37qtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>