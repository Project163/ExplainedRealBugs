<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:06:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-24303] SourceCoordinator exception may fail Session Cluster</title>
                <link>https://issues.apache.org/jira/browse/FLINK-24303</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The SourceCoordinator currently forwards all exceptions from `Source#createEnumerator` up the stack triggering a JobMaster failover. However, JobMaster failover only works if HA is enabled&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. If HA is not enabled the fatal error handler will simply exit the JM process killing the entire cluster. This is problematic in the case of a session cluster where there may be multiple jobs running. It also does not play well with external tooling that does not expect job failure to cause a full cluster failure.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It would be preferable if failure to create an enumerator did not take down the entire cluster, but instead failed that particular job.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://github.com/apache/flink/blob/7f69331294ab2ab73f77b40a4320cdda53246afe/flink-runtime/src/main/java/org/apache/flink/runtime/dispatcher/Dispatcher.java#L898-L903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/7f69331294ab2ab73f77b40a4320cdda53246afe/flink-runtime/src/main/java/org/apache/flink/runtime/dispatcher/Dispatcher.java#L898-L903&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13401464">FLINK-24303</key>
            <summary>SourceCoordinator exception may fail Session Cluster</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="sjwiesman">Seth Wiesman</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 15 Sep 2021 20:34:25 +0000</created>
                <updated>Thu, 23 Sep 2021 09:55:14 +0000</updated>
                            <resolved>Tue, 21 Sep 2021 10:15:18 +0000</resolved>
                                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.13.3</fixVersion>
                                    <component>Connectors / Common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                                                                <comments>
                            <comment id="17417578" author="stephanewen" created="Mon, 20 Sep 2021 11:01:38 +0000"  >&lt;p&gt;The issue is relatively easy to fix on the level of the &lt;tt&gt;SourceCoordinator&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Why not fix it for all &lt;tt&gt;OperatorCoordinators&lt;/tt&gt; on the generic level? Meaning, trigger failover when the start method of &lt;tt&gt;OperatorCoordinator&lt;/tt&gt; produces an exception? I was looking to do that initially, but the scheduler is not prepared to handle global failures in cases where the starting procedure wasn&apos;t completed.&lt;/p&gt;

&lt;p&gt;I investigated whether re-instantiating the source enumerator when restoring from a checkpoint has the same problem. It behaves already correctly, resulting in a global failover rather than a JM crash. I am adding a test to guard this behavior.&lt;/p&gt;</comment>
                            <comment id="17417603" author="stephanewen" created="Mon, 20 Sep 2021 11:48:16 +0000"  >&lt;p&gt;In the longer term, I would like to change the Source Coordinator code such that all enumerator creation and restore happens actually in the enumerator thread. That makes the failure handling cleaner (no exceptions can happen during the startup phase) and also solves the issue what we move expensive enumerator initialization out of the JobManager startup phase.&lt;/p&gt;</comment>
                            <comment id="17418020" author="stephanewen" created="Tue, 21 Sep 2021 10:15:18 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;master (1.15.0) via d18d1f4b7acd683dfdfc8a5218892c17b42b6701&lt;/li&gt;
	&lt;li&gt;release-1.14 (1.14.1) via 36c1b5bd76140aa6c54e4da0af97d69c57397072&lt;/li&gt;
	&lt;li&gt;release-1.13 (1.13.2) via 600cde46a72bd78ac3aefffde7ae936e57624131&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17418021" author="stephanewen" created="Tue, 21 Sep 2021 10:16:00 +0000"  >&lt;p&gt;This issue here tracks a potentially different long-term approach: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-24343&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-24343&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17418440" author="airblader" created="Wed, 22 Sep 2021 06:38:11 +0000"  >&lt;p&gt;Since this canceled the 1.14.0 RC, shouldn&apos;t the fix version be 1.14.0 instead of 1.14.1?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13402901">FLINK-24363</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13402410">FLINK-24343</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13402410">FLINK-24343</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0uz0w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>