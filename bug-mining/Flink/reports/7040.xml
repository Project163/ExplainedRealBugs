<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:17:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-31588] The unaligned checkpoint type is wrong at subtask level</title>
                <link>https://issues.apache.org/jira/browse/FLINK-31588</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-20488&quot; title=&quot;Show checkpoint type in the UI (AC/UC) for each subtask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-20488&quot;&gt;&lt;del&gt;FLINK-20488&lt;/del&gt;&lt;/a&gt; supported show checkpoint type for each subtask, and it based on received `CheckpointOptions` and it&apos;s right.&lt;/p&gt;

&lt;p&gt;However, &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-27251&quot; title=&quot;Timeout aligned to unaligned checkpoint barrier in the output buffers of an upstream subtask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-27251&quot;&gt;&lt;del&gt;FLINK-27251&lt;/del&gt;&lt;/a&gt; supported timeout aligned to unaligned checkpoint barrier in the output buffers. It means the received `CheckpointOptions` can be converted from aligned checkpoint to unaligned checkpoint.&lt;/p&gt;

&lt;p&gt;So, the unaligned checkpoint type may be wrong at subtask level. For example, as shown in the figure below, Unaligned checkpoint type is false, but it is actually Unaligned checkpoint (persisted data &amp;gt; 0).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13056617/13056617_image-2023-03-23-18-45-01-535.png&quot; height=&quot;797&quot; width=&quot;1879&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13529747">FLINK-31588</key>
            <summary>The unaligned checkpoint type is wrong at subtask level</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fanrui">Rui Fan</assignee>
                                    <reporter username="fanrui">Rui Fan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 23 Mar 2023 10:45:32 +0000</created>
                <updated>Tue, 25 Apr 2023 02:23:41 +0000</updated>
                            <resolved>Tue, 25 Apr 2023 02:23:41 +0000</resolved>
                                    <version>1.16.0</version>
                    <version>1.17.0</version>
                                    <fixVersion>1.16.2</fixVersion>
                    <fixVersion>1.18.0</fixVersion>
                    <fixVersion>1.17.1</fixVersion>
                                    <component>Runtime / Checkpointing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17704072" author="fanrui" created="Thu, 23 Mar 2023 11:02:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuanmei&quot; class=&quot;user-hover&quot; rel=&quot;yuanmei&quot;&gt;yuanmei&lt;/a&gt; , please help take a look this ticket in your free time, thanks!&lt;/p&gt;

&lt;p&gt;I prefer generate unaligned checkpoint type based on persisted data. If it is switched to an unaligned checkpoint and no data is persisted, it is still considered an aligned checkpoint for flink users. WDYT?&lt;/p&gt;</comment>
                            <comment id="17709783" author="pnowojski" created="Fri, 7 Apr 2023 20:21:27 +0000"  >&lt;p&gt;Sorry for late response, I&apos;ve just found an old tab with WIP comment that I wanted to write, but somehow didn&apos;t send as something must have interrupted me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks for reporting the issue. I see the problem. I think ideally we should try to keep the semantic of that flag in sync with what &lt;tt&gt;StreamTask&lt;/tt&gt; was actually doing. If checkpoint was unaligned, as it arrived unaligned, it should be reported as such, even if that particular subtask didn&apos;t persist any data. Can we still achieve that? &lt;/p&gt;</comment>
                            <comment id="17709823" author="fanrui" created="Sat, 8 Apr 2023 02:11:25 +0000"  >&lt;p&gt;Thanks for your feedback.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&#160;If checkpoint was unaligned, as it arrived unaligned, it should be reported as such, even if that particular subtask didn&apos;t persist any data.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sounds make sense. I will prepare this PR next week.&lt;/p&gt;</comment>
                            <comment id="17715340" author="fanrui" created="Sun, 23 Apr 2023 02:15:51 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt; for the review and discussion.&lt;/p&gt;

&lt;p&gt;Merged master commit: d46d8d0f6b590f185608b23fbe8b2fcbded111de&lt;/p&gt;

&lt;p&gt;Merged 1.17-release commit : a3c00eed371f8a2c9bfe557fa07dc7bc8a04f14e&lt;/p&gt;

&lt;p&gt;Merged 1.16-release commit : 60cadec7c1f3beb3c9eb7e45cbd7ab9d99062e48&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13439666">FLINK-27251</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13533372">FLINK-31864</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13439666">FLINK-27251</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13056617" name="image-2023-03-23-18-45-01-535.png" size="300051" author="fanrui" created="Thu, 23 Mar 2023 10:45:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 29 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1gsmo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>