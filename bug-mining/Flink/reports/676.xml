<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:21:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2987] Flink 0.10 fails to start on YARN 2.6.0</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2987</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;While testing Flink for the release, I noticed that it does not start on YARN due to classloading issues.&lt;/p&gt;

&lt;p&gt;The error message is the following&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;robert@hn0-apache:~/flink-0.10.0$ ./bin/yarn-session.sh  -n 2
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.RuntimeException: Could not instantiate type &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.flink.yarn.FlinkYarnClient&apos;&lt;/span&gt; Most likely the constructor (or a member variable initialization) threw an exception: com/sun/jersey/api/client/config/ClientConfig
	at org.apache.flink.util.InstantiationUtil.instantiate(InstantiationUtil.java:152)
	at org.apache.flink.util.InstantiationUtil.instantiate(InstantiationUtil.java:118)
	at org.apache.flink.client.FlinkYarnSessionCli.getFlinkYarnClient(FlinkYarnSessionCli.java:262)
	at org.apache.flink.client.FlinkYarnSessionCli.createFlinkYarnClient(FlinkYarnSessionCli.java:107)
	at org.apache.flink.client.FlinkYarnSessionCli.run(FlinkYarnSessionCli.java:400)
	at org.apache.flink.client.FlinkYarnSessionCli.main(FlinkYarnSessionCli.java:351)
Caused by: java.lang.NoClassDefFoundError: com/sun/jersey/api/client/config/ClientConfig
	at org.apache.hadoop.yarn.client.api.TimelineClient.createTimelineClient(TimelineClient.java:45)
	at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.serviceInit(YarnClientImpl.java:163)
	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
	at org.apache.flink.yarn.FlinkYarnClientBase.&amp;lt;init&amp;gt;(FlinkYarnClientBase.java:157)
	at org.apache.flink.yarn.FlinkYarnClient.&amp;lt;init&amp;gt;(FlinkYarnClient.java:23)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:526)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.newInstance(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:379)
	at org.apache.flink.util.InstantiationUtil.instantiate(InstantiationUtil.java:139)
	... 5 more
Caused by: java.lang.ClassNotFoundException: com.sun.jersey.api.client.config.ClientConfig
	at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:425)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:358)
	... 16 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The issue occurs with the following versions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;flink-0.10.0-bin-hadoop26-scala_2.11.tgz&lt;/li&gt;
	&lt;li&gt;flink-0.10.0-bin-hadoop26-scala_2.10.tgz&lt;/li&gt;
	&lt;li&gt;flink-0.10.0-bin-hadoop27-scala_2.10.tgz&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It works for:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;flink-0.10.0-bin-hadoop24-scala_2.10.tgz&lt;/li&gt;
	&lt;li&gt;flink-0.9.1-bin-hadoop26.tgz&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Interestingly, the issue only occurs, when &lt;tt&gt;HADOOP_CONF_DIR&lt;/tt&gt; is set. Otherwise, the YARN client is starting until its unable to connect to the RM.&lt;/p&gt;


&lt;p&gt;The missing class is in the jersey-client dependency, which we exclude from Hadoop, in &lt;tt&gt;flink-shaded-hadoop2&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Microsoft Azure HDInsight on Linux: 3.2.1000.0&lt;/p&gt;</environment>
        <key id="12911528">FLINK-2987</key>
            <summary>Flink 0.10 fails to start on YARN 2.6.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rmetzger">Robert Metzger</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Nov 2015 13:16:53 +0000</created>
                <updated>Mon, 19 Dec 2016 12:47:07 +0000</updated>
                            <resolved>Mon, 9 Nov 2015 18:13:46 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.1</fixVersion>
                    <fixVersion>1.0.0</fixVersion>
                                    <component>Build System</component>
                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14996592" author="githubbot" created="Mon, 9 Nov 2015 14:32:40 +0000"  >&lt;p&gt;GitHub user rmetzger opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1340&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2987&quot; title=&quot;Flink 0.10 fails to start on YARN 2.6.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2987&quot;&gt;&lt;del&gt;FLINK-2987&lt;/del&gt;&lt;/a&gt; Remove jersey-core and jersey-client dependency exclusions&lt;/p&gt;

&lt;p&gt;    &#8230; to make Flink on Hadoop 2.6.0+ work again.&lt;/p&gt;

&lt;p&gt;    This PR is for the 0.10 release branch.&lt;br/&gt;
    Please review this quickly. I&apos;d like to get it into the next RC.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rmetzger/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rmetzger/flink&lt;/a&gt; flink2987&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1340.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1340.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1340&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 996a183da4bfaf327975ece79d32767c62d9ad42&lt;br/&gt;
Author: Robert Metzger &amp;lt;rmetzger@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-11-09T14:30:19Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2987&quot; title=&quot;Flink 0.10 fails to start on YARN 2.6.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2987&quot;&gt;&lt;del&gt;FLINK-2987&lt;/del&gt;&lt;/a&gt; Remove jersey-core and jersey-client dependency exclusion to make Flink on Hadoop 2.6.0+ work&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14996619" author="githubbot" created="Mon, 9 Nov 2015 14:42:22 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1340#issuecomment-155081857&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1340#issuecomment-155081857&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The change per se looks good. Jersey core and client have no big transitive dependencies they pull, so it should be fine.&lt;/p&gt;

&lt;p&gt;    +1 to merge&lt;/p&gt;</comment>
                            <comment id="14996663" author="githubbot" created="Mon, 9 Nov 2015 14:57:15 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1340#issuecomment-155086171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1340#issuecomment-155086171&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I just verified the fix on the Azure cluster with Hadoop 2.6.0 and it&apos;s working now.&lt;/p&gt;</comment>
                            <comment id="14996754" author="githubbot" created="Mon, 9 Nov 2015 15:55:06 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1340#issuecomment-155103312&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1340#issuecomment-155103312&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I also tested the patch on a Hadoop 2.4 machine, using the default Hadoop 2.3 build.&lt;/p&gt;

&lt;p&gt;    +1 to merge for the 0.10 release&lt;/p&gt;</comment>
                            <comment id="14996782" author="rmetzger" created="Mon, 9 Nov 2015 16:09:55 +0000"  >&lt;p&gt;Fixed for 0.10 in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/66b124b4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/66b124b4&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14996803" author="githubbot" created="Mon, 9 Nov 2015 16:20:45 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1340#issuecomment-155112495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1340#issuecomment-155112495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ve merged it to the `release-0.10` branch.&lt;br/&gt;
    Once travis has passed for master, I&apos;ll merge it there as well and close the issue.&lt;/p&gt;</comment>
                            <comment id="14996807" author="githubbot" created="Mon, 9 Nov 2015 16:25:21 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1340#issuecomment-155113703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1340#issuecomment-155113703&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 for merging.&lt;/p&gt;</comment>
                            <comment id="14997037" author="githubbot" created="Mon, 9 Nov 2015 18:13:35 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1340&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14997038" author="rmetzger" created="Mon, 9 Nov 2015 18:13:46 +0000"  >&lt;p&gt;Fixed in master for 1.0: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/a684e237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/a684e237&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o4yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>