<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:35:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10400] Return failed JobResult if job terminates in state FAILED or CANCELED</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10400</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;If the job reaches the globally terminal state &lt;tt&gt;FAILED&lt;/tt&gt; or &lt;tt&gt;CANCELED&lt;/tt&gt;, the &lt;tt&gt;JobResult&lt;/tt&gt; must return a non-successful result. At the moment, it can happen that in the &lt;tt&gt;CANCELED&lt;/tt&gt; state where we don&apos;t find a failure cause that we return a successful &lt;tt&gt;JobResult&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In order to change this I propose to always return a &lt;tt&gt;JobResult&lt;/tt&gt; with a &lt;tt&gt;JobCancellationException&lt;/tt&gt; in case of &lt;tt&gt;CANCELED&lt;/tt&gt; and a &lt;tt&gt;JobExecutionException&lt;/tt&gt; in case of &lt;tt&gt;FAILED&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13186870">FLINK-10400</key>
            <summary>Return failed JobResult if job terminates in state FAILED or CANCELED</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sun, 23 Sep 2018 08:30:55 +0000</created>
                <updated>Thu, 27 Sep 2018 09:57:20 +0000</updated>
                            <resolved>Thu, 27 Sep 2018 09:57:20 +0000</resolved>
                                    <version>1.5.4</version>
                    <version>1.6.1</version>
                    <version>1.7.0</version>
                                    <fixVersion>1.5.5</fixVersion>
                    <fixVersion>1.6.2</fixVersion>
                    <fixVersion>1.7.0</fixVersion>
                                    <component>Command Line Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16625030" author="tison" created="Sun, 23 Sep 2018 08:39:58 +0000"  >&lt;p&gt;Agree. It is a code wart that should be fixed.&lt;br/&gt;
To be more clear, return a &lt;tt&gt;JobResult&lt;/tt&gt; with &lt;tt&gt;Exception&lt;/tt&gt; as described, &lt;tt&gt;addSuppressed&lt;/tt&gt; if there is a failure cause.&lt;/p&gt;</comment>
                            <comment id="16625902" author="githubbot" created="Mon, 24 Sep 2018 14:34:33 +0000"  >&lt;p&gt;tillrohrmann opened a new pull request #6742: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10400&quot; title=&quot;Return failed JobResult if job terminates in state FAILED or CANCELED&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10400&quot;&gt;&lt;del&gt;FLINK-10400&lt;/del&gt;&lt;/a&gt; Fail JobResult if application finished in CANCELED or FAILED state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6742&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6742&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   When generating a `JobExecutionResult` from a `JobResult`, we fail the conversion if the application status was not `SUCCEEDED`.&lt;/p&gt;

&lt;p&gt;   In case of the CANCELED state, the client will throw an JobCancellationException.&lt;br/&gt;
   In case of the FAILED state, the client will throw an JobExecutionException.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add `ApplicationStatus` field to `JobResult`&lt;/li&gt;
	&lt;li&gt;Throw `JobCancellationException` if `ApplicationStatus` was `CANCELED`&lt;/li&gt;
	&lt;li&gt;Throw `JobExecutionException` if `ApplicationStatus` was `FAILED`&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Added `JobResultTest#testCancelledJobIsFailureResult`, `#testFailedJobIsFailureResult`, `#testCancelledJobThrowsJobCancellationException` and `#testFailedJobThrowsJobExecutionException`.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16625942" author="githubbot" created="Mon, 24 Sep 2018 15:04:23 +0000"  >&lt;p&gt;TisonKun commented on a change in pull request #6742: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10400&quot; title=&quot;Return failed JobResult if job terminates in state FAILED or CANCELED&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10400&quot;&gt;&lt;del&gt;FLINK-10400&lt;/del&gt;&lt;/a&gt; Fail JobResult if application finished in CANCELED or FAILED state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6742#discussion_r219871333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6742#discussion_r219871333&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobResult.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -108,22 +118,39 @@ public long getNetRuntime() {&lt;br/&gt;
 	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param classLoader to use for deserialization&lt;/li&gt;
	&lt;li&gt;@return JobExecutionResult&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @throws WrappedJobException if the JobResult contains a serialized exception&lt;br/&gt;
+	 * @throws JobExecutionException if the job execution did not succeed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   this method might throws `JobCancellationException` if the job is cancelled, should be documented.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16628923" author="githubbot" created="Wed, 26 Sep 2018 15:10:55 +0000"  >&lt;p&gt;tillrohrmann commented on a change in pull request #6742: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10400&quot; title=&quot;Return failed JobResult if job terminates in state FAILED or CANCELED&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10400&quot;&gt;&lt;del&gt;FLINK-10400&lt;/del&gt;&lt;/a&gt; Fail JobResult if application finished in CANCELED or FAILED state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6742#discussion_r220605439&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6742#discussion_r220605439&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobResult.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -108,22 +118,39 @@ public long getNetRuntime() {&lt;br/&gt;
 	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param classLoader to use for deserialization&lt;/li&gt;
	&lt;li&gt;@return JobExecutionResult&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @throws WrappedJobException if the JobResult contains a serialized exception&lt;br/&gt;
+	 * @throws JobExecutionException if the job execution did not succeed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Good point @TisonKun. Will add it.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16628927" author="githubbot" created="Wed, 26 Sep 2018 15:16:45 +0000"  >&lt;p&gt;tillrohrmann commented on issue #6742: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10400&quot; title=&quot;Return failed JobResult if job terminates in state FAILED or CANCELED&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10400&quot;&gt;&lt;del&gt;FLINK-10400&lt;/del&gt;&lt;/a&gt; Fail JobResult if application finished in CANCELED or FAILED state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6742#issuecomment-424755066&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6742#issuecomment-424755066&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the review @TisonKun and @zentol. Merging this PR once Travis gives green light (after rebasing).&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16630088" author="githubbot" created="Thu, 27 Sep 2018 09:57:00 +0000"  >&lt;p&gt;asfgit closed pull request #6742: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10400&quot; title=&quot;Return failed JobResult if job terminates in state FAILED or CANCELED&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10400&quot;&gt;&lt;del&gt;FLINK-10400&lt;/del&gt;&lt;/a&gt; Fail JobResult if application finished in CANCELED or FAILED state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6742&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6742&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-clients/src/main/java/org/apache/flink/client/program/MiniClusterClient.java b/flink-clients/src/main/java/org/apache/flink/client/program/MiniClusterClient.java&lt;br/&gt;
index 81cf784441d..3077f183acb 100644&lt;br/&gt;
&amp;#8212; a/flink-clients/src/main/java/org/apache/flink/client/program/MiniClusterClient.java&lt;br/&gt;
+++ b/flink-clients/src/main/java/org/apache/flink/client/program/MiniClusterClient.java&lt;br/&gt;
@@ -21,6 +21,7 @@&lt;br/&gt;
 import org.apache.flink.api.common.JobID;&lt;br/&gt;
 import org.apache.flink.api.common.JobSubmissionResult;&lt;br/&gt;
 import org.apache.flink.configuration.Configuration;&lt;br/&gt;
+import org.apache.flink.runtime.client.JobExecutionException;&lt;br/&gt;
 import org.apache.flink.runtime.client.JobStatusMessage;&lt;br/&gt;
 import org.apache.flink.runtime.clusterframework.messages.GetClusterStatusResponse;&lt;br/&gt;
 import org.apache.flink.runtime.executiongraph.AccessExecutionGraph;&lt;br/&gt;
@@ -94,8 +95,8 @@ public JobSubmissionResult submitJob(JobGraph jobGraph, ClassLoader classLoader)&lt;/p&gt;

&lt;p&gt; 			try &lt;/p&gt;
{
 				return jobResult.toJobExecutionResult(classLoader);
-			}
&lt;p&gt; catch (JobResult.WrappedJobException e) &lt;/p&gt;
{
-				throw new ProgramInvocationException(&quot;Job failed&quot;, jobGraph.getJobID(), e.getCause());
+			}
&lt;p&gt; catch (JobExecutionException e) &lt;/p&gt;
{
+				throw new ProgramInvocationException(&quot;Job failed&quot;, jobGraph.getJobID(), e);
 			}
&lt;p&gt; catch (IOException | ClassNotFoundException e) &lt;/p&gt;
{
 				throw new ProgramInvocationException(&quot;Job failed&quot;, jobGraph.getJobID(), e);
 			}
&lt;p&gt;diff --git a/flink-clients/src/main/java/org/apache/flink/client/program/rest/RestClusterClient.java b/flink-clients/src/main/java/org/apache/flink/client/program/rest/RestClusterClient.java&lt;br/&gt;
index 935a07faf89..86cc52da3b2 100644&lt;br/&gt;
&amp;#8212; a/flink-clients/src/main/java/org/apache/flink/client/program/rest/RestClusterClient.java&lt;br/&gt;
+++ b/flink-clients/src/main/java/org/apache/flink/client/program/rest/RestClusterClient.java&lt;br/&gt;
@@ -32,6 +32,7 @@&lt;br/&gt;
 import org.apache.flink.client.program.rest.retry.WaitStrategy;&lt;br/&gt;
 import org.apache.flink.configuration.Configuration;&lt;br/&gt;
 import org.apache.flink.core.fs.Path;&lt;br/&gt;
+import org.apache.flink.runtime.client.JobExecutionException;&lt;br/&gt;
 import org.apache.flink.runtime.client.JobStatusMessage;&lt;br/&gt;
 import org.apache.flink.runtime.client.JobSubmissionException;&lt;br/&gt;
 import org.apache.flink.runtime.clusterframework.messages.GetClusterStatusResponse;&lt;br/&gt;
@@ -263,8 +264,8 @@ public JobSubmissionResult submitJob(JobGraph jobGraph, ClassLoader classLoader)&lt;br/&gt;
 			try &lt;/p&gt;
{
 				this.lastJobExecutionResult = jobResult.toJobExecutionResult(classLoader);
 				return lastJobExecutionResult;
-			}
&lt;p&gt; catch (JobResult.WrappedJobException we) &lt;/p&gt;
{
-				throw new ProgramInvocationException(&quot;Job failed.&quot;, jobGraph.getJobID(), we.getCause());
+			}
&lt;p&gt; catch (JobExecutionException e) &lt;/p&gt;
{
+				throw new ProgramInvocationException(&quot;Job failed.&quot;, jobGraph.getJobID(), e);
 			}
&lt;p&gt; catch (IOException | ClassNotFoundException e) &lt;/p&gt;
{
 				throw new ProgramInvocationException(&quot;Job failed.&quot;, jobGraph.getJobID(), e);
 			}
&lt;p&gt;diff --git a/flink-clients/src/test/java/org/apache/flink/client/program/rest/RestClusterClientTest.java b/flink-clients/src/test/java/org/apache/flink/client/program/rest/RestClusterClientTest.java&lt;br/&gt;
index 75f16c03330..abe59d38bb6 100644&lt;br/&gt;
&amp;#8212; a/flink-clients/src/test/java/org/apache/flink/client/program/rest/RestClusterClientTest.java&lt;br/&gt;
+++ b/flink-clients/src/test/java/org/apache/flink/client/program/rest/RestClusterClientTest.java&lt;br/&gt;
@@ -31,6 +31,7 @@&lt;br/&gt;
 import org.apache.flink.configuration.JobManagerOptions;&lt;br/&gt;
 import org.apache.flink.configuration.RestOptions;&lt;br/&gt;
 import org.apache.flink.runtime.client.JobStatusMessage;&lt;br/&gt;
+import org.apache.flink.runtime.clusterframework.ApplicationStatus;&lt;br/&gt;
 import org.apache.flink.runtime.concurrent.FutureUtils;&lt;br/&gt;
 import org.apache.flink.runtime.dispatcher.Dispatcher;&lt;br/&gt;
 import org.apache.flink.runtime.dispatcher.DispatcherGateway;&lt;br/&gt;
@@ -122,6 +123,7 @@&lt;br/&gt;
 import java.util.List;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
 import java.util.Objects;&lt;br/&gt;
+import java.util.Optional;&lt;br/&gt;
 import java.util.Queue;&lt;br/&gt;
 import java.util.concurrent.CompletableFuture;&lt;br/&gt;
 import java.util.concurrent.ExecutionException;&lt;br/&gt;
@@ -229,6 +231,7 @@ public void testJobSubmitCancelStop() throws Exception {&lt;br/&gt;
 		TestJobExecutionResultHandler testJobExecutionResultHandler =&lt;br/&gt;
 			new TestJobExecutionResultHandler(&lt;br/&gt;
 				JobExecutionResultResponseBody.created(new JobResult.Builder()&lt;br/&gt;
+					.applicationStatus(ApplicationStatus.SUCCEEDED)&lt;br/&gt;
 					.jobId(jobId)&lt;br/&gt;
 					.netRuntime(Long.MAX_VALUE)&lt;br/&gt;
 					.build()));&lt;br/&gt;
@@ -351,11 +354,13 @@ public void testSubmitJobAndWaitForExecutionResult() throws Exception {&lt;br/&gt;
 				new RestHandlerException(&quot;should trigger retry&quot;, HttpResponseStatus.SERVICE_UNAVAILABLE),&lt;br/&gt;
 				JobExecutionResultResponseBody.inProgress(),&lt;br/&gt;
 				JobExecutionResultResponseBody.created(new JobResult.Builder()&lt;br/&gt;
+					.applicationStatus(ApplicationStatus.SUCCEEDED)&lt;br/&gt;
 					.jobId(jobId)&lt;br/&gt;
 					.netRuntime(Long.MAX_VALUE)&lt;br/&gt;
 					.accumulatorResults(Collections.singletonMap(&quot;testName&quot;, new SerializedValue&amp;lt;&amp;gt;(OptionalFailure.of(1.0))))&lt;br/&gt;
 					.build()),&lt;br/&gt;
 				JobExecutionResultResponseBody.created(new JobResult.Builder()&lt;br/&gt;
+					.applicationStatus(ApplicationStatus.FAILED)&lt;br/&gt;
 					.jobId(jobId)&lt;br/&gt;
 					.netRuntime(Long.MAX_VALUE)&lt;br/&gt;
 					.serializedThrowable(new SerializedThrowable(new RuntimeException(&quot;expected&quot;)))&lt;br/&gt;
@@ -385,8 +390,10 @@ public void testSubmitJobAndWaitForExecutionResult() throws Exception &lt;/p&gt;
{
 				restClusterClient.submitJob(jobGraph, ClassLoader.getSystemClassLoader());
 				fail(&quot;Expected exception not thrown.&quot;);
 			}
&lt;p&gt; catch (final ProgramInvocationException e) &lt;/p&gt;
{
-				assertThat(e.getCause(), instanceOf(RuntimeException.class));
-				assertThat(e.getCause().getMessage(), equalTo(&quot;expected&quot;));
+				final Optional&amp;lt;RuntimeException&amp;gt; cause = ExceptionUtils.findThrowable(e, RuntimeException.class);
+
+				assertThat(cause.isPresent(), is(true));
+				assertThat(cause.get().getMessage(), equalTo(&quot;expected&quot;));
 			}
&lt;p&gt; 		}&lt;br/&gt;
 	}&lt;br/&gt;
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobResult.java b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobResult.java&lt;br/&gt;
index 60ddbe3e475..eb7c4734f1d 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobResult.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobResult.java&lt;br/&gt;
@@ -22,11 +22,13 @@&lt;br/&gt;
 import org.apache.flink.api.common.JobExecutionResult;&lt;br/&gt;
 import org.apache.flink.api.common.JobID;&lt;br/&gt;
 import org.apache.flink.api.common.accumulators.AccumulatorHelper;&lt;br/&gt;
+import org.apache.flink.runtime.client.JobCancellationException;&lt;br/&gt;
+import org.apache.flink.runtime.client.JobExecutionException;&lt;br/&gt;
+import org.apache.flink.runtime.clusterframework.ApplicationStatus;&lt;br/&gt;
 import org.apache.flink.runtime.dispatcher.Dispatcher;&lt;br/&gt;
 import org.apache.flink.runtime.executiongraph.AccessExecutionGraph;&lt;br/&gt;
 import org.apache.flink.runtime.executiongraph.ErrorInfo;&lt;br/&gt;
 import org.apache.flink.runtime.jobgraph.JobStatus;&lt;br/&gt;
-import org.apache.flink.util.FlinkException;&lt;br/&gt;
 import org.apache.flink.util.OptionalFailure;&lt;br/&gt;
 import org.apache.flink.util.SerializedThrowable;&lt;br/&gt;
 import org.apache.flink.util.SerializedValue;&lt;br/&gt;
@@ -54,6 +56,8 @@&lt;/p&gt;

&lt;p&gt; 	private final JobID jobId;&lt;/p&gt;

&lt;p&gt;+	private final ApplicationStatus applicationStatus;&lt;br/&gt;
+&lt;br/&gt;
 	private final Map&amp;lt;String, SerializedValue&amp;lt;OptionalFailure&amp;lt;Object&amp;gt;&amp;gt;&amp;gt; accumulatorResults;&lt;/p&gt;

&lt;p&gt; 	private final long netRuntime;&lt;br/&gt;
@@ -64,6 +68,7 @@&lt;/p&gt;

&lt;p&gt; 	private JobResult(&lt;br/&gt;
 			final JobID jobId,&lt;br/&gt;
+			final ApplicationStatus applicationStatus,&lt;br/&gt;
 			final Map&amp;lt;String, SerializedValue&amp;lt;OptionalFailure&amp;lt;Object&amp;gt;&amp;gt;&amp;gt; accumulatorResults,&lt;br/&gt;
 			final long netRuntime,&lt;br/&gt;
 			@Nullable final SerializedThrowable serializedThrowable) {&lt;br/&gt;
@@ -71,6 +76,7 @@ private JobResult(&lt;br/&gt;
 		checkArgument(netRuntime &amp;gt;= 0, &quot;netRuntime must be greater than or equals 0&quot;);&lt;/p&gt;

&lt;p&gt; 		this.jobId = requireNonNull(jobId);&lt;br/&gt;
+		this.applicationStatus = requireNonNull(applicationStatus);&lt;br/&gt;
 		this.accumulatorResults = requireNonNull(accumulatorResults);&lt;br/&gt;
 		this.netRuntime = netRuntime;&lt;br/&gt;
 		this.serializedThrowable = serializedThrowable;&lt;br/&gt;
@@ -80,13 +86,17 @@ private JobResult(&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Returns 
{@code true}
&lt;p&gt; if the job finished successfully.&lt;br/&gt;
 	 */&lt;br/&gt;
 	public boolean isSuccess() &lt;/p&gt;
{
-		return serializedThrowable == null;
+		return applicationStatus == ApplicationStatus.SUCCEEDED || (applicationStatus == ApplicationStatus.UNKNOWN &amp;amp;&amp;amp; serializedThrowable == null);
 	}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 	public JobID getJobId() &lt;/p&gt;
{
 		return jobId;
 	}

&lt;p&gt;+	public ApplicationStatus getApplicationStatus() &lt;/p&gt;
{
+		return applicationStatus;
+	}
&lt;p&gt;+&lt;br/&gt;
 	public Map&amp;lt;String, SerializedValue&amp;lt;OptionalFailure&amp;lt;Object&amp;gt;&amp;gt;&amp;gt; getAccumulatorResults() &lt;/p&gt;
{
 		return accumulatorResults;
 	}
&lt;p&gt;@@ -108,22 +118,40 @@ public long getNetRuntime() {&lt;br/&gt;
 	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param classLoader to use for deserialization&lt;/li&gt;
	&lt;li&gt;@return JobExecutionResult&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @throws WrappedJobException if the JobResult contains a serialized exception&lt;br/&gt;
+	 * @throws JobCancellationException if the job was cancelled&lt;br/&gt;
+	 * @throws JobExecutionException if the job execution did not succeed&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;@throws IOException if the accumulator could not be deserialized&lt;/li&gt;
	&lt;li&gt;@throws ClassNotFoundException if the accumulator could not deserialized&lt;br/&gt;
 	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public JobExecutionResult toJobExecutionResult(ClassLoader classLoader) throws WrappedJobException, IOException, ClassNotFoundException {&lt;/li&gt;
	&lt;li&gt;if (serializedThrowable != null) 
{
-			final Throwable throwable = serializedThrowable.deserializeError(classLoader);
-			throw new WrappedJobException(throwable);
-		}
&lt;p&gt;+	public JobExecutionResult toJobExecutionResult(ClassLoader classLoader) throws JobExecutionException, IOException, ClassNotFoundException {&lt;br/&gt;
+		if (applicationStatus == ApplicationStatus.SUCCEEDED) &lt;/p&gt;
{
+			return new JobExecutionResult(
+				jobId,
+				netRuntime,
+				AccumulatorHelper.deserializeAccumulators(
+					accumulatorResults,
+					classLoader));
+		}
&lt;p&gt; else {&lt;br/&gt;
+			final Throwable cause;&lt;br/&gt;
+&lt;br/&gt;
+			if (serializedThrowable == null) &lt;/p&gt;
{
+				cause = null;
+			}
&lt;p&gt; else &lt;/p&gt;
{
+				cause = serializedThrowable.deserializeError(classLoader);
+			}
&lt;p&gt;+&lt;br/&gt;
+			final JobExecutionException exception;&lt;br/&gt;
+&lt;br/&gt;
+			if (applicationStatus == ApplicationStatus.FAILED) &lt;/p&gt;
{
+				exception = new JobExecutionException(jobId, &quot;Job execution failed.&quot;, cause);
+			}
&lt;p&gt; else if (applicationStatus == ApplicationStatus.CANCELED) &lt;/p&gt;
{
+				exception = new JobCancellationException(jobId, &quot;Job was cancelled.&quot;, cause);
+			}
&lt;p&gt; else &lt;/p&gt;
{
+				exception = new JobExecutionException(jobId, &quot;Job completed with illegal application status: &quot; + applicationStatus + &apos;.&apos;, cause);
+			}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return new JobExecutionResult(&lt;/li&gt;
	&lt;li&gt;jobId,&lt;/li&gt;
	&lt;li&gt;netRuntime,&lt;/li&gt;
	&lt;li&gt;AccumulatorHelper.deserializeAccumulators(&lt;/li&gt;
	&lt;li&gt;accumulatorResults,&lt;/li&gt;
	&lt;li&gt;classLoader));&lt;br/&gt;
+			throw exception;&lt;br/&gt;
+		}&lt;br/&gt;
 	}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 	/**&lt;br/&gt;
@@ -134,6 +162,8 @@ public JobExecutionResult toJobExecutionResult(ClassLoader classLoader) throws W&lt;/p&gt;

&lt;p&gt; 		private JobID jobId;&lt;/p&gt;

&lt;p&gt;+		private ApplicationStatus applicationStatus = ApplicationStatus.UNKNOWN;&lt;br/&gt;
+&lt;br/&gt;
 		private Map&amp;lt;String, SerializedValue&amp;lt;OptionalFailure&amp;lt;Object&amp;gt;&amp;gt;&amp;gt; accumulatorResults;&lt;/p&gt;

&lt;p&gt; 		private long netRuntime = -1;&lt;br/&gt;
@@ -145,6 +175,11 @@ public Builder jobId(final JobID jobId) &lt;/p&gt;
{
 			return this;
 		}

&lt;p&gt;+		public Builder applicationStatus(final ApplicationStatus applicationStatus) &lt;/p&gt;
{
+			this.applicationStatus = applicationStatus;
+			return this;
+		}
&lt;p&gt;+&lt;br/&gt;
 		public Builder accumulatorResults(final Map&amp;lt;String, SerializedValue&amp;lt;OptionalFailure&amp;lt;Object&amp;gt;&amp;gt;&amp;gt; accumulatorResults) {&lt;br/&gt;
 			this.accumulatorResults = accumulatorResults;&lt;br/&gt;
 			return this;&lt;br/&gt;
@@ -163,6 +198,7 @@ public Builder serializedThrowable(final SerializedThrowable serializedThrowable&lt;br/&gt;
 		public JobResult build() {&lt;br/&gt;
 			return new JobResult(&lt;br/&gt;
 				jobId,&lt;br/&gt;
+				applicationStatus,&lt;br/&gt;
 				accumulatorResults == null ? Collections.emptyMap() : accumulatorResults,&lt;br/&gt;
 				netRuntime,&lt;br/&gt;
 				serializedThrowable);&lt;br/&gt;
@@ -188,6 +224,8 @@ public static JobResult createFrom(AccessExecutionGraph accessExecutionGraph) {&lt;br/&gt;
 		final JobResult.Builder builder = new JobResult.Builder();&lt;br/&gt;
 		builder.jobId(jobId);&lt;/p&gt;

&lt;p&gt;+		builder.applicationStatus(ApplicationStatus.fromJobStatus(accessExecutionGraph.getState()));&lt;br/&gt;
+&lt;br/&gt;
 		final long netRuntime = accessExecutionGraph.getStatusTimestamp(jobStatus) - accessExecutionGraph.getStatusTimestamp(JobStatus.CREATED);&lt;br/&gt;
 		// guard against clock changes&lt;br/&gt;
 		final long guardedNetRuntime = Math.max(netRuntime, 0L);&lt;br/&gt;
@@ -204,17 +242,4 @@ public static JobResult createFrom(AccessExecutionGraph accessExecutionGraph) &lt;/p&gt;
{
 
 		return builder.build();
 	}
&lt;p&gt;-&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Exception which indicates that the job has finished with an 
{@link Exception}
&lt;p&gt;.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;public static final class WrappedJobException extends FlinkException {&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;private static final long serialVersionUID = 6535061898650156019L;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;public WrappedJobException(Throwable cause) 
{
-			super(cause);
-		}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
-&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/minicluster/MiniCluster.java b/flink-runtime/src/main/java/org/apache/flink/runtime/minicluster/MiniCluster.java&lt;br/&gt;
index 8054a383739..bbdb099ae0a 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-runtime/src/main/java/org/apache/flink/runtime/minicluster/MiniCluster.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/minicluster/MiniCluster.java&lt;br/&gt;
@@ -623,8 +623,6 @@ public JobExecutionResult executeJobBlocking(JobGraph job) throws JobExecutionEx&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		try &lt;/p&gt;
{
 			return jobResult.toJobExecutionResult(Thread.currentThread().getContextClassLoader());
-		}
&lt;p&gt; catch (JobResult.WrappedJobException e) &lt;/p&gt;
{
-			throw new JobExecutionException(job.getJobID(), e.getCause());
 		}
&lt;p&gt; catch (IOException | ClassNotFoundException e) &lt;/p&gt;
{
 			throw new JobExecutionException(job.getJobID(), e);
 		}
&lt;p&gt;diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/json/JobResultDeserializer.java b/flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/json/JobResultDeserializer.java&lt;br/&gt;
index e568f476c7e..8342eb374a2 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/json/JobResultDeserializer.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/json/JobResultDeserializer.java&lt;br/&gt;
@@ -19,6 +19,7 @@&lt;br/&gt;
 package org.apache.flink.runtime.rest.messages.json;&lt;/p&gt;

&lt;p&gt; import org.apache.flink.api.common.JobID;&lt;br/&gt;
+import org.apache.flink.runtime.clusterframework.ApplicationStatus;&lt;br/&gt;
 import org.apache.flink.runtime.jobmaster.JobResult;&lt;br/&gt;
 import org.apache.flink.util.OptionalFailure;&lt;br/&gt;
 import org.apache.flink.util.SerializedThrowable;&lt;br/&gt;
@@ -68,6 +69,7 @@ public JobResultDeserializer() {&lt;br/&gt;
 	@Override&lt;br/&gt;
 	public JobResult deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {&lt;br/&gt;
 		JobID jobId = null;&lt;br/&gt;
+		ApplicationStatus applicationStatus = ApplicationStatus.UNKNOWN;&lt;br/&gt;
 		long netRuntime = -1;&lt;br/&gt;
 		SerializedThrowable serializedThrowable = null;&lt;br/&gt;
 		Map&amp;lt;String, SerializedValue&amp;lt;OptionalFailure&amp;lt;Object&amp;gt;&amp;gt;&amp;gt; accumulatorResults = null;&lt;br/&gt;
@@ -85,6 +87,10 @@ public JobResult deserialize(final JsonParser p, final DeserializationContext ct&lt;br/&gt;
 					assertNextToken(p, JsonToken.VALUE_STRING);&lt;br/&gt;
 					jobId = jobIdDeserializer.deserialize(p, ctxt);&lt;br/&gt;
 					break;&lt;br/&gt;
+				case JobResultSerializer.FIELD_NAME_APPLICATION_STATUS:&lt;br/&gt;
+					assertNextToken(p, JsonToken.VALUE_STRING);&lt;br/&gt;
+					applicationStatus = ApplicationStatus.valueOf(p.getValueAsString().toUpperCase());&lt;br/&gt;
+					break;&lt;br/&gt;
 				case JobResultSerializer.FIELD_NAME_NET_RUNTIME:&lt;br/&gt;
 					assertNextToken(p, JsonToken.VALUE_NUMBER_INT);&lt;br/&gt;
 					netRuntime = p.getLongValue();&lt;br/&gt;
@@ -105,6 +111,7 @@ public JobResult deserialize(final JsonParser p, final DeserializationContext ct&lt;br/&gt;
 		try {&lt;br/&gt;
 			return new JobResult.Builder()&lt;br/&gt;
 				.jobId(jobId)&lt;br/&gt;
+				.applicationStatus(applicationStatus)&lt;br/&gt;
 				.netRuntime(netRuntime)&lt;br/&gt;
 				.accumulatorResults(accumulatorResults)&lt;br/&gt;
 				.serializedThrowable(serializedThrowable)&lt;br/&gt;
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/json/JobResultSerializer.java b/flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/json/JobResultSerializer.java&lt;br/&gt;
index 694fa2f529b..cdf3541fe3a 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/json/JobResultSerializer.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/rest/messages/json/JobResultSerializer.java&lt;br/&gt;
@@ -44,6 +44,8 @@&lt;/p&gt;

&lt;p&gt; 	static final String FIELD_NAME_JOB_ID = &quot;id&quot;;&lt;/p&gt;

&lt;p&gt;+	static final String FIELD_NAME_APPLICATION_STATUS = &quot;application-status&quot;;&lt;br/&gt;
+&lt;br/&gt;
 	static final String FIELD_NAME_NET_RUNTIME = &quot;net-runtime&quot;;&lt;/p&gt;

&lt;p&gt; 	static final String FIELD_NAME_ACCUMULATOR_RESULTS = &quot;accumulator-results&quot;;&lt;br/&gt;
@@ -76,6 +78,9 @@ public void serialize(&lt;br/&gt;
 		gen.writeFieldName(FIELD_NAME_JOB_ID);&lt;br/&gt;
 		jobIdSerializer.serialize(result.getJobId(), gen, provider);&lt;/p&gt;

&lt;p&gt;+		gen.writeFieldName(FIELD_NAME_APPLICATION_STATUS);&lt;br/&gt;
+		gen.writeString(result.getApplicationStatus().name());&lt;br/&gt;
+&lt;br/&gt;
 		gen.writeFieldName(FIELD_NAME_ACCUMULATOR_RESULTS);&lt;br/&gt;
 		gen.writeStartObject();&lt;br/&gt;
 		final Map&amp;lt;String, SerializedValue&amp;lt;OptionalFailure&amp;lt;Object&amp;gt;&amp;gt;&amp;gt; accumulatorResults = result.getAccumulatorResults();&lt;br/&gt;
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobResultTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobResultTest.java&lt;br/&gt;
index 84c9da5e7de..6543fa24b1d 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobResultTest.java&lt;br/&gt;
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobResultTest.java&lt;br/&gt;
@@ -19,12 +19,19 @@&lt;br/&gt;
 package org.apache.flink.runtime.jobmaster;&lt;/p&gt;

&lt;p&gt; import org.apache.flink.api.common.JobID;&lt;br/&gt;
+import org.apache.flink.runtime.client.JobCancellationException;&lt;br/&gt;
+import org.apache.flink.runtime.client.JobExecutionException;&lt;br/&gt;
+import org.apache.flink.runtime.executiongraph.ErrorInfo;&lt;br/&gt;
+import org.apache.flink.runtime.jobgraph.JobStatus;&lt;br/&gt;
+import org.apache.flink.runtime.rest.handler.legacy.utils.ArchivedExecutionGraphBuilder;&lt;br/&gt;
+import org.apache.flink.util.FlinkException;&lt;br/&gt;
 import org.apache.flink.util.SerializedThrowable;&lt;br/&gt;
 import org.apache.flink.util.TestLogger;&lt;/p&gt;

&lt;p&gt; import org.junit.Test;&lt;/p&gt;

&lt;p&gt; import static org.hamcrest.Matchers.equalTo;&lt;br/&gt;
+import static org.hamcrest.Matchers.is;&lt;br/&gt;
 import static org.junit.Assert.assertThat;&lt;br/&gt;
 import static org.junit.Assert.fail;&lt;/p&gt;

&lt;p&gt;@@ -66,4 +73,62 @@ public void testIsSuccess() throws Exception &lt;/p&gt;
{
 		assertThat(jobResult.isSuccess(), equalTo(true));
 	}

&lt;p&gt;+	@Test&lt;br/&gt;
+	public void testCancelledJobIsFailureResult() &lt;/p&gt;
{
+		final JobResult jobResult = JobResult.createFrom(
+			new ArchivedExecutionGraphBuilder()
+				.setJobID(new JobID())
+				.setState(JobStatus.CANCELED)
+				.build());
+
+		assertThat(jobResult.isSuccess(), is(false));
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testFailedJobIsFailureResult() &lt;/p&gt;
{
+		final JobResult jobResult = JobResult.createFrom(
+			new ArchivedExecutionGraphBuilder()
+				.setJobID(new JobID())
+				.setState(JobStatus.FAILED)
+				.setFailureCause(new ErrorInfo(new FlinkException(&quot;Test exception&quot;), 42L))
+				.build());
+
+		assertThat(jobResult.isSuccess(), is(false));
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testCancelledJobThrowsJobCancellationException() throws Exception {&lt;br/&gt;
+		final FlinkException cause = new FlinkException(&quot;Test exception&quot;);&lt;br/&gt;
+		final JobResult jobResult = JobResult.createFrom(&lt;br/&gt;
+			new ArchivedExecutionGraphBuilder()&lt;br/&gt;
+				.setJobID(new JobID())&lt;br/&gt;
+				.setState(JobStatus.CANCELED)&lt;br/&gt;
+				.setFailureCause(new ErrorInfo(cause, 42L))&lt;br/&gt;
+				.build());&lt;br/&gt;
+&lt;br/&gt;
+		try &lt;/p&gt;
{
+			jobResult.toJobExecutionResult(getClass().getClassLoader());
+			fail(&quot;Job should fail with an JobCancellationException.&quot;);
+		}
&lt;p&gt; catch (JobCancellationException expected) &lt;/p&gt;
{
+			assertThat(expected.getCause(), is(equalTo(cause)));
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testFailedJobThrowsJobExecutionException() throws Exception {&lt;br/&gt;
+		final FlinkException cause = new FlinkException(&quot;Test exception&quot;);&lt;br/&gt;
+		final JobResult jobResult = JobResult.createFrom(&lt;br/&gt;
+			new ArchivedExecutionGraphBuilder()&lt;br/&gt;
+				.setJobID(new JobID())&lt;br/&gt;
+				.setState(JobStatus.FAILED)&lt;br/&gt;
+				.setFailureCause(new ErrorInfo(cause, 42L))&lt;br/&gt;
+				.build());&lt;br/&gt;
+&lt;br/&gt;
+		try {
+			jobResult.toJobExecutionResult(getClass().getClassLoader());
+			fail(&quot;Job should fail with JobExecutionException.&quot;);
+		} catch (JobExecutionException expected) {+			assertThat(expected.getCause(), is(equalTo(cause)));+		}
&lt;p&gt;+	}&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/job/JobExecutionResultResponseBodyTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/job/JobExecutionResultResponseBodyTest.java&lt;br/&gt;
index 9534d2bca7c..c8cc7f3e7c4 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/job/JobExecutionResultResponseBodyTest.java&lt;br/&gt;
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/rest/messages/job/JobExecutionResultResponseBodyTest.java&lt;br/&gt;
@@ -19,6 +19,7 @@&lt;br/&gt;
 package org.apache.flink.runtime.rest.messages.job;&lt;/p&gt;

&lt;p&gt; import org.apache.flink.api.common.JobID;&lt;br/&gt;
+import org.apache.flink.runtime.clusterframework.ApplicationStatus;&lt;br/&gt;
 import org.apache.flink.runtime.jobmaster.JobResult;&lt;br/&gt;
 import org.apache.flink.runtime.rest.messages.RestResponseMarshallingTestBase;&lt;br/&gt;
 import org.apache.flink.util.OptionalFailure;&lt;br/&gt;
@@ -64,12 +65,14 @@&lt;br/&gt;
 		return Arrays.asList(new Object[][] {&lt;br/&gt;
 			&lt;/p&gt;
{JobExecutionResultResponseBody.created(new JobResult.Builder()
 				.jobId(TEST_JOB_ID)
+				.applicationStatus(ApplicationStatus.SUCCEEDED)
 				.netRuntime(TEST_NET_RUNTIME)
 				.accumulatorResults(TEST_ACCUMULATORS)
 				.serializedThrowable(new SerializedThrowable(new RuntimeException(&quot;expected&quot;)))
 				.build())}
&lt;p&gt;,&lt;br/&gt;
 			&lt;/p&gt;
{JobExecutionResultResponseBody.created(new JobResult.Builder()
 				.jobId(TEST_JOB_ID)
+				.applicationStatus(ApplicationStatus.FAILED)
 				.netRuntime(TEST_NET_RUNTIME)
 				.accumulatorResults(TEST_ACCUMULATORS)
 				.build())}
&lt;p&gt;,&lt;br/&gt;
@@ -108,6 +111,7 @@ protected void assertOriginalEqualsToUnmarshalled(&lt;br/&gt;
 			assertNotNull(actualJobExecutionResult);&lt;/p&gt;

&lt;p&gt; 			assertThat(actualJobExecutionResult.getJobId(), equalTo(expectedJobExecutionResult.getJobId()));&lt;br/&gt;
+			assertThat(actualJobExecutionResult.getApplicationStatus(), equalTo(expectedJobExecutionResult.getApplicationStatus()));&lt;br/&gt;
 			assertThat(actualJobExecutionResult.getNetRuntime(), equalTo(expectedJobExecutionResult.getNetRuntime()));&lt;br/&gt;
 			assertThat(actualJobExecutionResult.getAccumulatorResults(), equalTo(expectedJobExecutionResult.getAccumulatorResults()));&lt;/p&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16630089" author="till.rohrmann" created="Thu, 27 Sep 2018 09:57:20 +0000"  >&lt;p&gt;Fixed via&lt;br/&gt;
1.7.0: 2f88d428e43bdea5240aced63fb130fce6aa80c4&lt;br/&gt;
1.6.2: 7606ccf56b8c0943cfa43888af5bb51c13018441&lt;br/&gt;
1.5.5: 1c97ac1cf4fad18604d3e9b9b4dbcc876d245d89&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ye7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>