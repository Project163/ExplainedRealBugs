<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-14572] BlobsCleanupITCase failed on Travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-14572</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.AssertionError: 

Expected: is &amp;lt;true&amp;gt;
     but: was &amp;lt;false&amp;gt;
	at org.apache.flink.runtime.jobmanager.BlobsCleanupITCase.testBlobServerCleanup(BlobsCleanupITCase.java:220)
	at org.apache.flink.runtime.jobmanager.BlobsCleanupITCase.testBlobServerCleanupFinishedJob(BlobsCleanupITCase.java:133)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://api.travis-ci.com/v3/job/250445874/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.com/v3/job/250445874/log.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13265248">FLINK-14572</key>
            <summary>BlobsCleanupITCase failed on Travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="gaoyunhaii">Yun Gao</assignee>
                                    <reporter username="gjy">Gary Yao</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Wed, 30 Oct 2019 09:44:40 +0000</created>
                <updated>Mon, 6 Jan 2020 12:03:17 +0000</updated>
                            <resolved>Mon, 6 Jan 2020 12:03:17 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16967225" author="zhuzh" created="Tue, 5 Nov 2019 04:08:30 +0000"  >&lt;p&gt;From the root cause, the case fails when trying to get jar files from blob server, but the file does not exist.&lt;br/&gt;
This seems not to be related to NG scheduler since the scheduler is not created yet.&lt;/p&gt;

&lt;p&gt;From the logics of &lt;tt&gt;BlobsCleanupITCase#testBlobServerCleanup()&lt;/tt&gt;, a job will only be submitted if the jar uploading succeeded with &lt;tt&gt;BlobClient.uploadFiles&lt;/tt&gt;. So it&apos;s high likely that the uploaded jar was removed unexpectedly before the job is submitted.&lt;br/&gt;
But I&apos;ve no idea why the file can be removed. &lt;br/&gt;
And I cannot produce this problem locally with hundreds of re-runs either.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; Does you have good ideas for it?&lt;/p&gt;

&lt;p&gt;Root cause:&lt;br/&gt;
07:47:47,787 ERROR org.apache.flink.runtime.dispatcher.StandaloneDispatcher      - Failed to submit job 15838a6ef77eb89697d3def42c1a58b0.&lt;br/&gt;
java.lang.RuntimeException: org.apache.flink.runtime.client.JobExecutionException: Could not set up JobManager&lt;br/&gt;
       at org.apache.flink.util.function.CheckedSupplier.lambda$unchecked$0(CheckedSupplier.java:36)&lt;br/&gt;
       at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)&lt;br/&gt;
       at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:40)&lt;br/&gt;
       at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(ForkJoinExecutorConfigurator.scala:44)&lt;br/&gt;
       at akka.dispatch.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)&lt;br/&gt;
       at akka.dispatch.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)&lt;br/&gt;
       at akka.dispatch.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)&lt;br/&gt;
       at akka.dispatch.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)&lt;br/&gt;
Caused by: org.apache.flink.runtime.client.JobExecutionException: Could not set up JobManager&lt;br/&gt;
       at org.apache.flink.runtime.jobmaster.JobManagerRunnerImpl.&amp;lt;init&amp;gt;(JobManagerRunnerImpl.java:152)&lt;br/&gt;
       at org.apache.flink.runtime.dispatcher.DefaultJobManagerRunnerFactory.createJobManagerRunner(DefaultJobManagerRunnerFactory.java:84)&lt;br/&gt;
       at org.apache.flink.runtime.dispatcher.Dispatcher.lambda$createJobManagerRunner$6(Dispatcher.java:381)&lt;br/&gt;
       at org.apache.flink.util.function.CheckedSupplier.lambda$unchecked$0(CheckedSupplier.java:34)&lt;br/&gt;
       ... 7 more&lt;br/&gt;
Caused by: java.lang.Exception: Cannot set up the user code libraries: /tmp/junit6489941706970935338/junit9210755917417967354/blobStore-1474738d-89f8-4ab0-88b2-9df867ba4cc1/incoming/temp-00000001&lt;br/&gt;
       at org.apache.flink.runtime.jobmaster.JobManagerRunnerImpl.&amp;lt;init&amp;gt;(JobManagerRunnerImpl.java:131)&lt;br/&gt;
       ... 10 more&lt;br/&gt;
Caused by: java.nio.file.NoSuchFileException: /tmp/junit6489941706970935338/junit9210755917417967354/blobStore-1474738d-89f8-4ab0-88b2-9df867ba4cc1/incoming/temp-00000001&lt;br/&gt;
       at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)&lt;br/&gt;
       at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)&lt;br/&gt;
       at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)&lt;br/&gt;
       at sun.nio.fs.UnixCopyFile.move(UnixCopyFile.java:409)&lt;br/&gt;
       at sun.nio.fs.UnixFileSystemProvider.move(UnixFileSystemProvider.java:262)&lt;br/&gt;
       at java.nio.file.Files.move(Files.java:1395)&lt;br/&gt;
       at org.apache.flink.runtime.blob.BlobUtils.moveTempFileToStore(BlobUtils.java:410)&lt;br/&gt;
       at org.apache.flink.runtime.blob.BlobServer.getFileInternal(BlobServer.java:497)&lt;br/&gt;
       at org.apache.flink.runtime.blob.BlobServer.getFileInternal(BlobServer.java:444)&lt;br/&gt;
       at org.apache.flink.runtime.blob.BlobServer.getFile(BlobServer.java:417)&lt;br/&gt;
       at org.apache.flink.runtime.execution.librarycache.BlobLibraryCacheManager.registerTask(BlobLibraryCacheManager.java:120)&lt;br/&gt;
       at org.apache.flink.runtime.execution.librarycache.BlobLibraryCacheManager.registerJob(BlobLibraryCacheManager.java:91)&lt;br/&gt;
       at org.apache.flink.runtime.jobmaster.JobManagerRunnerImpl.&amp;lt;init&amp;gt;(JobManagerRunnerImpl.java:128)&lt;br/&gt;
       ... 10 more&lt;/p&gt;</comment>
                            <comment id="16967402" author="gjy" created="Tue, 5 Nov 2019 09:59:53 +0000"  >&lt;p&gt;Maybe we got unlucky and &lt;tt&gt;/tmp&lt;/tt&gt; was cleaned in that moment.&lt;/p&gt;</comment>
                            <comment id="16967403" author="gjy" created="Tue, 5 Nov 2019 10:00:48 +0000"  >&lt;p&gt;Removed the &quot;scheduler ng&quot; label and changed the title.&lt;/p&gt;</comment>
                            <comment id="16970354" author="till.rohrmann" created="Fri, 8 Nov 2019 16:05:44 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.com/v3/job/254095188/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.com/v3/job/254095188/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16987642" author="gaoyunhaii" created="Wed, 4 Dec 2019 08:20:01 +0000"  >&lt;p&gt;Hi all &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhuzh&quot; class=&quot;user-hover&quot; rel=&quot;zhuzh&quot;&gt;zhuzh&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt; Could you still find the detail logs for this issue in the local computer ? Because one instance uploaded to transfer.sh with&#160;&#160;&lt;a href=&quot;https://transfer.sh/BQgBm/3709.9.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://transfer.sh/BQgBm/3709.9.tar.gz&lt;/a&gt;&#160;has expired and the other one failed to upload.&#160;&lt;/p&gt;</comment>
                            <comment id="16987647" author="zhuzh" created="Wed, 4 Dec 2019 08:25:57 +0000"  >&lt;p&gt;Unfortunately, the detailed logs downloaded are removed already from my local machine. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16987660" author="gjy" created="Wed, 4 Dec 2019 08:50:09 +0000"  >&lt;p&gt;Unfortunately I don&apos;t have any either.&lt;/p&gt;</comment>
                            <comment id="16997416" author="gaoyunhaii" created="Mon, 16 Dec 2019 16:09:22 +0000"  >&lt;p&gt;Hi all, for this issue, I slightly doubt that the attach exception might not be the one that cause &lt;em&gt;testBlobServerCleanupFinishedJob&lt;/em&gt; failed, since this test is the fourth test of the test suite, all the four tests shares the same blob server which increase the temp file id after creating each temp file. It can be seen from the successful executions that the temp file id should be temp-00000005 for &lt;em&gt;testBlobServerCleanupFinishedJob&lt;/em&gt; to receive the user jar. Instead, it seems that the attached exception should be the one produced in test &lt;em&gt;testBlobServerCleanupFailedSubmission&lt;/em&gt;, which is thrown intentionally to cause job submission fails.&lt;/p&gt;

&lt;p&gt;Therefore, it seems no detailed logs still existed to analyze the reason that the test fails. To further track this issue, I modified the travis scripts to run only the BlobsCleanupITCase multiple times and submit the test to travis periodically (&lt;a href=&quot;https://travis-ci.org/gaoyunhaii/flink/branches&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/gaoyunhaii/flink/branches&lt;/a&gt;, branch &lt;em&gt;fix_blobs_2&lt;/em&gt;). However, the failure is still not reproduced after running the tests for several days.&#160;&lt;/p&gt;</comment>
                            <comment id="16998373" author="till.rohrmann" created="Tue, 17 Dec 2019 16:35:00 +0000"  >&lt;p&gt;If we cannot reproduce the problem, then we can close this issue for the time being &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16998765" author="gaoyunhaii" created="Wed, 18 Dec 2019 03:02:34 +0000"  >&lt;p&gt;Agree with that we could close the issue for now. I will continue tracking this issue if it occurs again.&#160;&lt;/p&gt;</comment>
                            <comment id="16998767" author="gaoyunhaii" created="Wed, 18 Dec 2019 03:03:49 +0000"  >&lt;p&gt;Then I closed it for now, and will reopen it and continue tracking if it occurs again.&lt;/p&gt;</comment>
                            <comment id="17008494" author="xintongsong" created="Mon, 6 Jan 2020 02:36:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt; &lt;br/&gt;
This problem appears again in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15480&quot; title=&quot;BlobsCleanupITCase is unstable on travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15480&quot;&gt;&lt;del&gt;FLINK-15480&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17008502" author="tison" created="Mon, 6 Jan 2020 02:53:42 +0000"  >&lt;p&gt;I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt; that the share blobs is possibly the cause.&lt;/p&gt;</comment>
                            <comment id="17008505" author="gaoyunhaii" created="Mon, 6 Jan 2020 02:59:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt;, very thanks for the reporting, but it seems the tests have been re-run and the original logs are not kept.&#160;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;I will modify the tests to print the error log out when the job fails.&#160;&lt;/p&gt;</comment>
                            <comment id="17008577" author="gaoyunhaii" created="Mon, 6 Jan 2020 06:46:01 +0000"  >&lt;p&gt;Hi all, I have opened the PR to print the root cause of job failure if the job is detected to be not successful. I did not use&#160;&lt;em&gt;toJobExecutionResult&lt;/em&gt;&#160;to throw exception directly since it seems not be able to print the full stack trace.&#160;&lt;/p&gt;</comment>
                            <comment id="17008773" author="zhuzh" created="Mon, 6 Jan 2020 12:03:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt; added some detailed logs when the case fails. Close this ticket for now. Let&apos;s re-open it if it happens again.&lt;/p&gt;

&lt;p&gt;master:&lt;br/&gt;
0fd8f3970a417758ca32efce718399c0f8c222e0&lt;/p&gt;

&lt;p&gt;release-1.10:&lt;br/&gt;
e73494b751be3a1c4c3e53901e42cca8f0741200&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13277608">FLINK-15480</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0834w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>