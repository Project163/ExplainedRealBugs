<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2026] Error message in count() only jobs</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2026</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;If I run a job that only calls count() on a dataset (which is a valid data flow IMHO), Flink executes the job but complains that no sinks are defined.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12830277">FLINK-2026</key>
            <summary>Error message in count() only jobs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="ssc">Sebastian Schelter</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 May 2015 19:32:36 +0000</created>
                <updated>Thu, 28 Feb 2019 13:21:14 +0000</updated>
                            <resolved>Wed, 20 May 2015 10:30:34 +0000</resolved>
                                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14546572" author="aljoscha" created="Sat, 16 May 2015 05:46:18 +0000"  >&lt;p&gt;You are calling execute() on the environment, correct? This is a problem with the documentation, since some methods, such as count() and collect() call execute() internally. &lt;/p&gt;</comment>
                            <comment id="14547835" author="mxm" created="Mon, 18 May 2015 10:29:51 +0000"  >&lt;p&gt;This is an issue many people run into, so let&apos;s see if we can do something about that. How about a flag in the &lt;tt&gt;ExecutionEnvironment&lt;/tt&gt; which indicates whether &lt;tt&gt;execute()&lt;/tt&gt; has been called before? This was also proposed in this discussion: &lt;a href=&quot;https://www.mail-archive.com/dev@flink.apache.org/msg02145.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/dev@flink.apache.org/msg02145.html&lt;/a&gt; alongside with a better error message in case of previous executions: &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The Flink job didn&apos;t contain any sinks. This may be because the sinks were already executed. If you executed the print() method on a DataSet before, the job would have already been executed. In this case, remove the call of execute() until you have defined further sinks.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14547859" author="githubbot" created="Mon, 18 May 2015 10:53:29 +0000"  >&lt;p&gt;GitHub user mxm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/686&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/686&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2026&quot; title=&quot;Error message in count() only jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2026&quot;&gt;&lt;del&gt;FLINK-2026&lt;/del&gt;&lt;/a&gt; add a flag to indicate previous executions&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mxm/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mxm/flink&lt;/a&gt; count-collect-execute&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/686.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/686.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #686&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b58c15b8619ed6f31c54dc3542f9e97845037d98&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-05-18T10:43:21Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2026&quot; title=&quot;Error message in count() only jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2026&quot;&gt;&lt;del&gt;FLINK-2026&lt;/del&gt;&lt;/a&gt; add a flag to indicate previous executions&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14547962" author="githubbot" created="Mon, 18 May 2015 13:08:56 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/686#issuecomment-103053538&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/686#issuecomment-103053538&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    That makes sense. Can we rename the flag to `wasExecuted` or so?&lt;/p&gt;

&lt;p&gt;    How about a slight modification of the error message:&lt;/p&gt;

&lt;p&gt;    &quot;No new data sinks have been defined since the last execution. The last execution refers to the latest call to &apos;execute()&apos;, &apos;count()&apos; &apos;collect()&apos; or &apos;print()&apos;.&quot;&lt;/p&gt;

&lt;p&gt;    I added `print()` to that message as well, because it will become eager with a pending pull request.&lt;/p&gt;</comment>
                            <comment id="14548228" author="githubbot" created="Mon, 18 May 2015 16:19:40 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/686#issuecomment-103117477&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/686#issuecomment-103117477&lt;/a&gt;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Yes, we can rename the variable to `wasExecuted`.&lt;/li&gt;
	&lt;li&gt;I already added `print()` to the message because I anticipated it to become eager &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;I like your error message, it&apos;s more concise.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14550017" author="ssc" created="Tue, 19 May 2015 08:14:52 +0000"  >&lt;p&gt;Wouldn&apos;t it be best to simply ignore the call to execute() if there is no more work to do? I as user don&apos;t want to think about all the internals to be honest. For me its common to do add a env.execute() call at the end of my flink code. Always having to remove that if I use a count or print call somewhere seems tedious.&lt;/p&gt;</comment>
                            <comment id="14550040" author="fhueske" created="Tue, 19 May 2015 08:33:20 +0000"  >&lt;p&gt;That might be counter-intuitive for users who forget to add a data sink to their program and wonder why nothing happens when they call &lt;tt&gt;execute()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;IMO, a good error message is the way to go. &lt;/p&gt;</comment>
                            <comment id="14550056" author="stephanewen" created="Tue, 19 May 2015 08:46:24 +0000"  >&lt;p&gt;+1 for a good error message.&lt;/p&gt;

&lt;p&gt;I agree with Fabian, people would forget the execute() call right away otherwise...&lt;/p&gt;</comment>
                            <comment id="14550337" author="githubbot" created="Tue, 19 May 2015 12:13:33 +0000"  >&lt;p&gt;Github user mxm commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/686#issuecomment-103463683&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/686#issuecomment-103463683&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Pull request updated.&lt;/p&gt;</comment>
                            <comment id="14550340" author="githubbot" created="Tue, 19 May 2015 12:16:43 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/686#discussion_r30592879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/686#discussion_r30592879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-java/src/main/java/org/apache/flink/api/java/ExecutionEnvironment.java &amp;#8212;&lt;br/&gt;
    @@ -914,7 +917,15 @@ public JavaPlan createProgramPlan(String jobName) {&lt;br/&gt;
     	 */&lt;br/&gt;
     	public JavaPlan createProgramPlan(String jobName, boolean clearSinks) {&lt;br/&gt;
     		if (this.sinks.isEmpty()) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throw new RuntimeException(&quot;No data sinks have been created yet. A program needs at least one sink that consumes data. Examples are writing the data set or printing it.&quot;);&lt;br/&gt;
    +			if (wasExecuted) {&lt;br/&gt;
    +				throw new RuntimeException(&quot;No new data sinks have been defined since the &quot; +&lt;br/&gt;
    +						&quot;last execution. The last execution refers to the latest call to &quot; +&lt;br/&gt;
    +						&quot;&apos;execute()&apos;, &apos;count()&apos; &apos;collect()&apos; or &apos;print()&apos;.&quot;);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    missing commas&lt;/p&gt;</comment>
                            <comment id="14550359" author="githubbot" created="Tue, 19 May 2015 12:34:53 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/686#issuecomment-103470201&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/686#issuecomment-103470201&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good, modulo the commas.&lt;/p&gt;

&lt;p&gt;    +1 to merge after fixing this.&lt;/p&gt;</comment>
                            <comment id="14550585" author="ssc" created="Tue, 19 May 2015 15:16:13 +0000"  >&lt;p&gt;In that case, it should be fine to show an error message, as there are pending operations. In my case there are none, so there is no need for an error message.&lt;/p&gt;</comment>
                            <comment id="14552107" author="githubbot" created="Wed, 20 May 2015 10:28:44 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/686&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/686&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12839114">FLINK-2249</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2esvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>