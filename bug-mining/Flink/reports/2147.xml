<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:31:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8383] flink-mesos build failing: duplicate Jackson relocation in shaded jar </title>
                <link>https://issues.apache.org/jira/browse/FLINK-8383</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Example: &lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/325604587&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/325604587&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The build for &lt;tt&gt;flink-mesos&lt;/tt&gt; is failing with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-shade-plugin:3.0.0:shade (shade-flink) on project flink-mesos_2.11: Error creating shaded jar: duplicate entry: META-INF/services/org.apache.flink.mesos.shaded.com.fasterxml.jackson.core.JsonFactory -&amp;gt; [Help 1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Seems to be caused by &lt;a href=&quot;https://github.com/apache/flink/commit/9ae4c5447a2f5aae2b65d5860f822d452a9d5af1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/9ae4c5447a2f5aae2b65d5860f822d452a9d5af1&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13128982">FLINK-8383</key>
            <summary>flink-mesos build failing: duplicate Jackson relocation in shaded jar </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="tzulitai">Tzu-Li (Gordon) Tai</reporter>
                        <labels>
                    </labels>
                <created>Sat, 6 Jan 2018 05:59:34 +0000</created>
                <updated>Mon, 19 Feb 2018 10:41:03 +0000</updated>
                            <resolved>Mon, 19 Feb 2018 10:41:03 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>Build System</component>
                    <component>Deployment / Mesos</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16314892" author="eronwright" created="Sat, 6 Jan 2018 20:23:13 +0000"  >&lt;p&gt;Odd since the travis build passed on the PR.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/flink/pull/5208&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5208&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll try to spot the difference between those builds...&lt;/p&gt;</comment>
                            <comment id="16314897" author="tzulitai" created="Sat, 6 Jan 2018 20:31:29 +0000"  >&lt;p&gt;Thanks Eron.&lt;br/&gt;
Yes, the build seems to be failing for &lt;tt&gt;master&lt;/tt&gt; but not for &lt;tt&gt;release-1.4&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16316259" author="zentol" created="Mon, 8 Jan 2018 12:58:10 +0000"  >&lt;p&gt;The difference is probably the maven-shade-plugin version, 1.4 uses 2.4.1 and 1.5 uses 3.0.0.&lt;/p&gt;

&lt;p&gt;Maybe on master the shade plugin tries to relocate the service thingie from flink-shaded-jackson as well causing the duplicate.&lt;/p&gt;</comment>
                            <comment id="16316283" author="zentol" created="Mon, 8 Jan 2018 13:16:29 +0000"  >&lt;p&gt;Surprisingly enough the compilation actually succeeds on travis, it is during the test build phase that things go wrong...&lt;/p&gt;</comment>
                            <comment id="16316327" author="zentol" created="Mon, 8 Jan 2018 13:48:07 +0000"  >&lt;p&gt;as a hotfix we can disable the shading of the test jar.&lt;/p&gt;</comment>
                            <comment id="16316343" author="zentol" created="Mon, 8 Jan 2018 13:53:06 +0000"  >&lt;p&gt;It also only failed when running &lt;tt&gt;mvn verify&lt;/tt&gt; without &lt;tt&gt;clean&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16316344" author="githubbot" created="Mon, 8 Jan 2018 13:54:24 +0000"  >&lt;p&gt;GitHub user zentol opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5258&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5258&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8383&quot; title=&quot;flink-mesos build failing: duplicate Jackson relocation in shaded jar &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8383&quot;&gt;&lt;del&gt;FLINK-8383&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;mesos&amp;#93;&lt;/span&gt; Disable test-jar shading&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This PR disables the shading of the flink-mesos test jar, which resolves the build-failure we currently see on master.&lt;/p&gt;

&lt;p&gt;    Note that this is just a bandaid; I don&apos;t know why this fails in the first place.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Check travis build.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zentol/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zentol/flink&lt;/a&gt; 8383&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5258.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5258.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5258&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f0758ab883bd8dcaa5d0d5ee3f8b675523907236&lt;br/&gt;
Author: zentol &amp;lt;chesnay@...&amp;gt;&lt;br/&gt;
Date:   2018-01-08T13:49:37Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8383&quot; title=&quot;flink-mesos build failing: duplicate Jackson relocation in shaded jar &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8383&quot;&gt;&lt;del&gt;FLINK-8383&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;mesos&amp;#93;&lt;/span&gt; Disable test-jar shading&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16316352" author="stephanewen" created="Mon, 8 Jan 2018 13:57:48 +0000"  >&lt;p&gt;Is it possible that shaded test jars have a problem with detecting whether re-packaging is needed? And then a resource gathered by the shade plugin is copied again, despite being already there?&lt;/p&gt;</comment>
                            <comment id="16316355" author="githubbot" created="Mon, 8 Jan 2018 13:58:30 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5258&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5258&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge for now to fix the build.&lt;/p&gt;

</comment>
                            <comment id="16316549" author="githubbot" created="Mon, 8 Jan 2018 16:20:41 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5258&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5258&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merging.&lt;/p&gt;</comment>
                            <comment id="16316833" author="githubbot" created="Mon, 8 Jan 2018 19:23:47 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5258&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5258&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16316840" author="zentol" created="Mon, 8 Jan 2018 19:24:47 +0000"  >&lt;p&gt;Band-aid merged to master in 7c2a32c2863e83d075dde05cd35e93f3e08306c0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3olbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>