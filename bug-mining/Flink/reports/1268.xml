<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:25:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4824] CliFrontend shows misleading error message when main() method returns before env.execute()</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4824</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;While testing Flink by running the &lt;tt&gt;./examples/streaming/SocketWindowWordCount.jar&lt;/tt&gt; example, I got the following error message:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./bin/flink run ./examples/streaming/SocketWindowWordCount.jar 
Cluster configuration: Standalone cluster with JobManager at /127.0.0.1:6123
Using address 127.0.0.1:6123 to connect to JobManager.
JobManager web &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; address http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:8081
&lt;/span&gt;Starting execution of program
No port specified. Please run &lt;span class=&quot;code-quote&quot;&gt;&apos;SocketWindowWordCount --port &amp;lt;port&amp;gt;&apos;&lt;/span&gt;, where port is the address of the text server
To start a simple text server, run &lt;span class=&quot;code-quote&quot;&gt;&apos;netcat -l &amp;lt;port&amp;gt;&apos;&lt;/span&gt; and type the input text into the command line

------------------------------------------------------------
 The program finished with the following exception:

org.apache.flink.client.program.ProgramInvocationException: The program didn&apos;t contain Flink jobs. Perhaps you forgot to call execute() on the execution environment.
	at org.apache.flink.client.program.ClusterClient.run(ClusterClient.java:324)
	at org.apache.flink.client.CliFrontend.executeProgram(CliFrontend.java:774)
	at org.apache.flink.client.CliFrontend.run(CliFrontend.java:250)
	at org.apache.flink.client.CliFrontend.parseParameters(CliFrontend.java:985)
	at org.apache.flink.client.CliFrontend$2.run(CliFrontend.java:1032)
	at org.apache.flink.client.CliFrontend$2.run(CliFrontend.java:1029)
	at org.apache.flink.runtime.security.SecurityContext$1.run(SecurityContext.java:82)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1548)
	at org.apache.flink.runtime.security.SecurityContext.runSecured(SecurityContext.java:79)
	at org.apache.flink.client.CliFrontend.main(CliFrontend.java:1029)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think the error message is misleading, because I tried executing a valid Flink job.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13011967">FLINK-4824</key>
            <summary>CliFrontend shows misleading error message when main() method returns before env.execute()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="greghogan">Greg Hogan</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Oct 2016 12:21:00 +0000</created>
                <updated>Mon, 24 Oct 2016 15:21:03 +0000</updated>
                            <resolved>Mon, 24 Oct 2016 15:21:01 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Command Line Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15571879" author="mxm" created="Thu, 13 Oct 2016 13:15:18 +0000"  >&lt;p&gt;That was recently changed (before we would simply get a NullPointerException due to missing plan information). See &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4677&quot; title=&quot;Jars with no job executions produces NullPointerException in ClusterClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4677&quot;&gt;&lt;del&gt;FLINK-4677&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I think the error message is misleading, because I tried executing a valid Flink job.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Actually your jar did not generate a valid Flink job. It is capable of creating one but how should the CliFrontend know? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="15572151" author="greghogan" created="Thu, 13 Oct 2016 14:52:55 +0000"  >&lt;p&gt;&lt;tt&gt;WordCount&lt;/tt&gt; should be able to convey to &lt;tt&gt;ClusterClient&lt;/tt&gt; that the user has been notified of the error and proper usage. This is a common case, and we could define and catch a new exception rather than displaying the stack trace.&lt;/p&gt;</comment>
                            <comment id="15572274" author="mxm" created="Thu, 13 Oct 2016 15:37:18 +0000"  >&lt;p&gt;I agree that we should differentiate here and print something that is easier to read for the user.&lt;/p&gt;

&lt;p&gt;+1 for throwing and catching a &lt;tt&gt;JobNotFoundException&lt;/tt&gt; exception instead. &lt;/p&gt;</comment>
                            <comment id="15589415" author="githubbot" created="Wed, 19 Oct 2016 18:05:19 +0000"  >&lt;p&gt;GitHub user greghogan opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2662&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4824&quot; title=&quot;CliFrontend shows misleading error message when main() method returns before env.execute()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4824&quot;&gt;&lt;del&gt;FLINK-4824&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;client&amp;#93;&lt;/span&gt; CliFrontend shows misleading error message&lt;/p&gt;

&lt;p&gt;    When a Flink program throws `ProgramParametrizationException` the optional message is printed to stderr and the stacktrace is ignored.&lt;/p&gt;

&lt;p&gt;    I modified Gelly&apos;s `JaccardIndex` driver to use this functionality as an example.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/greghogan/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/greghogan/flink&lt;/a&gt; 4824_clifrontend_shows_misleading_error_message_when_main_method_returns_before_env_execute&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2662.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2662.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2662&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit af0b2223a4fe03016f223e2605e12d00e177999c&lt;br/&gt;
Author: Greg Hogan &amp;lt;code@greghogan.com&amp;gt;&lt;br/&gt;
Date:   2016-10-13T16:40:53Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4824&quot; title=&quot;CliFrontend shows misleading error message when main() method returns before env.execute()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4824&quot;&gt;&lt;del&gt;FLINK-4824&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;client&amp;#93;&lt;/span&gt; CliFrontend shows misleading error message&lt;/p&gt;

&lt;p&gt;    When a Flink program throws ProgramParametrizationException the&lt;br/&gt;
    optional message is printed to stderr and the stacktrace is ignored.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15591288" author="githubbot" created="Thu, 20 Oct 2016 09:10:37 +0000"  >&lt;p&gt;Github user mxm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2662&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the PR @greghogan! Having a custom exception for missing arguments to a user program is a good approach. However, it requires the author of the program to use the custom exception. At least, we would have to adapt all the included examples. Additionally, it would be nice to throw another custom exception when no Flink job was generated during execution of the jar (which might be because of missing arguments). Currently, we simply throw a `ProgramInvocationException` which could look like a serious error to the user when merely arguments are missing. &lt;/p&gt;

&lt;p&gt;    So +1 but we might do some follow-ups to fully solve the issue.&lt;/p&gt;</comment>
                            <comment id="15592027" author="githubbot" created="Thu, 20 Oct 2016 14:51:19 +0000"  >&lt;p&gt;Github user greghogan commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2662&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @mxm thanks for the review. I added a second commit which I think satisfies your request. When no job is executed then the message is printed to stderr without a stacktrace.&lt;/p&gt;</comment>
                            <comment id="15594650" author="githubbot" created="Fri, 21 Oct 2016 09:41:16 +0000"  >&lt;p&gt;Github user mxm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2662#discussion_r84448442&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2662#discussion_r84448442&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-clients/src/main/java/org/apache/flink/client/program/ProgramParametrizationException.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,46 @@&lt;br/&gt;
    +/*&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + * distributed with this work for additional information&lt;br/&gt;
    + * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    + * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    + * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    + * with the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +&lt;br/&gt;
    +package org.apache.flink.client.program;&lt;br/&gt;
    +&lt;br/&gt;
    +/**&lt;br/&gt;
    + * Exception used to indicate that there is an error in the parametrization of a Flink program.&lt;br/&gt;
    + */&lt;br/&gt;
    +public class ProgramParametrizationException extends RuntimeException {&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Serial version UID for serialization interoperability.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private static final long serialVersionUID = 909054589029890262L;&lt;br/&gt;
    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Creates a &amp;lt;tt&amp;gt;ProgramParametrizationException&amp;lt;/tt&amp;gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	public ProgramParametrizationException() {&lt;br/&gt;
    +		super();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I think we should not even allow to skip the message here. This will simplify the code further and display some message for the user.&lt;/p&gt;</comment>
                            <comment id="15594649" author="githubbot" created="Fri, 21 Oct 2016 09:41:16 +0000"  >&lt;p&gt;Github user mxm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2662#discussion_r84448541&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2662#discussion_r84448541&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-clients/src/main/java/org/apache/flink/client/CliFrontend.java &amp;#8212;&lt;br/&gt;
    @@ -975,6 +981,32 @@ private int handleArgException(Exception e) {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;br/&gt;
    +	 * Displays an optional exception message for incorrect program parametrization.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param e The exception to display.&lt;br/&gt;
    +	 * @return The return code for the process.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private int handleParametrizationException(ProgramParametrizationException e) {&lt;br/&gt;
    +		String message = e.getMessage();&lt;br/&gt;
    +		if (message != null) &lt;/p&gt;
{
    +			System.err.println(message);
    +		}
&lt;p&gt;    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This block could be removed if we got rid of the zero-args constructor in `ProgramParametrizationException`.&lt;/p&gt;</comment>
                            <comment id="15602286" author="githubbot" created="Mon, 24 Oct 2016 15:19:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2662&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15602291" author="greghogan" created="Mon, 24 Oct 2016 15:21:03 +0000"  >&lt;p&gt;Fixed in c4783c856a8ea71271d411fa8c4dc9c484f29ff0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34tx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>