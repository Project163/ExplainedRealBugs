<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:42:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15169] Errors happen in the scheduling of DefaultScheduler are not shown in WebUI</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15169</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;WebUI relies on &lt;tt&gt;ExecutionGraph#failureInfo&lt;/tt&gt; and &lt;tt&gt;Execution#failureCause&lt;/tt&gt; to generate error info (via &lt;tt&gt;JobExceptionsHandler#createJobExceptionsInfo&lt;/tt&gt;). &lt;br/&gt;
Errors happen in the scheduling of DefaultScheduler are not recorded into those fields, thus cannot be shown to users in WebUI (nor via REST queries).&lt;/p&gt;

&lt;p&gt;To solve it, &lt;br/&gt;
1. global failures should be recorded into &lt;tt&gt;ExecutionGraph#failureInfo&lt;/tt&gt;, via &lt;tt&gt;ExecutionGraph#initFailureCause&lt;/tt&gt; which can be exposed as &lt;tt&gt;SchedulerBase#initFailureCause&lt;/tt&gt;.&lt;br/&gt;
2. for task failures, one solution I can think of is to avoid invoking &lt;tt&gt;DefaultScheduler#handleTaskFailure&lt;/tt&gt; directly on scheduler&apos;s internal failures. Instead, we can introduce &lt;tt&gt;ExecutionVertexOperations#fail(ExecutionVertex)&lt;/tt&gt; to hand the error to &lt;tt&gt;ExecutionVertex&lt;/tt&gt; as a common failure.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13273539">FLINK-15169</key>
            <summary>Errors happen in the scheduling of DefaultScheduler are not shown in WebUI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhuzh">Zhu Zhu</assignee>
                                    <reporter username="zhuzh">Zhu Zhu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 10 Dec 2019 07:23:11 +0000</created>
                <updated>Tue, 17 Dec 2019 12:51:18 +0000</updated>
                            <resolved>Tue, 17 Dec 2019 12:51:18 +0000</resolved>
                                    <version>1.10.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16992449" author="gjy" created="Tue, 10 Dec 2019 11:13:04 +0000"  >&lt;p&gt;How come task failures are not visible? We initialize the failure cause in Execution#processFail&lt;/p&gt;</comment>
                            <comment id="16992455" author="zhuzh" created="Tue, 10 Dec 2019 11:18:50 +0000"  >&lt;p&gt;Execution#processFail is not invoked on DefaultScheduler internal task errors (e.g. slot allocation timeout), #handleTaskFailure is directly invoked and it directly cancels all related tasks (in legacy scheduler it fails the error task and cancels other tasks).&lt;/p&gt;</comment>
                            <comment id="16992533" author="gjy" created="Tue, 10 Dec 2019 13:20:28 +0000"  >&lt;p&gt;IIRC handling the failure outside of &lt;tt&gt;DefaultScheduler&lt;/tt&gt;, is not easy. I don&apos;t remember details but at least one needs a reference to &lt;tt&gt;ExecutionVertexVersioner&lt;/tt&gt;. What is the issue with setting the failure cause in &lt;tt&gt;DefaultScheduler#handleTaskFailure&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="16992602" author="zhuzh" created="Tue, 10 Dec 2019 14:29:33 +0000"  >&lt;p&gt;If we can have an interface &lt;tt&gt;ExecutionVertexOperations#fail&lt;/tt&gt; which helps to notify failures to ExecutionGraph, then the failure will finally come to &lt;tt&gt;DefaulScheduler&lt;/tt&gt;, and the version updating will happen as if it is a normal failure. However, we may need to change &lt;tt&gt;Execution#processFail&lt;/tt&gt; to enable to invoke &lt;tt&gt;maybeReleasePartitionsAndSendCancelRpcCall&lt;/tt&gt; in this case.&lt;/p&gt;

&lt;p&gt;Setting the failure cause directly to Execution, as you mentioned, can be an alternative. However, I think we may also need to set FAILED state timestamp (used by &lt;tt&gt;JobExceptionsHandler#createJobExceptionsInfo&lt;/tt&gt;  to create error infos), and ExecutionState (so that in the WebUI it is really exhibited as FAILED rather than CANCELED)&lt;/p&gt;</comment>
                            <comment id="16998177" author="gjy" created="Tue, 17 Dec 2019 12:51:18 +0000"  >&lt;p&gt;1.10:&lt;br/&gt;
bb8971e9d699249e835e0373009e27251c6a7dd0&lt;br/&gt;
1bf8e89aff64c930b4df0ec99bdcb4e698305465&lt;/p&gt;

&lt;p&gt;master:&lt;br/&gt;
6ed64abab3c3a041fc65ae954ddb35e026c1e94f&lt;br/&gt;
0186e1059db0e7829d6fb57d8b681686bf9b0e43&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09iao:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>