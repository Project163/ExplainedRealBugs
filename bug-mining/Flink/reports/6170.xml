<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:08:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-25564] TaskManagerProcessFailureStreamingRecoveryITCase&gt;AbstractTaskManagerProcessFailureRecoveryTest.testTaskManagerProcessFailure fails on AZP</title>
                <link>https://issues.apache.org/jira/browse/FLINK-25564</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The test &lt;tt&gt;TaskManagerProcessFailureStreamingRecoveryITCase&amp;gt;AbstractTaskManagerProcessFailureRecoveryTest.testTaskManagerProcessFailure&lt;/tt&gt; fails on AZP with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Jan 07 05:07:22 [ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 31.057 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.test.recovery.TaskManagerProcessFailureStreamingRecoveryITCase
Jan 07 05:07:22 [ERROR] org.apache.flink.test.recovery.TaskManagerProcessFailureStreamingRecoveryITCase.testTaskManagerProcessFailure  Time elapsed: 31.012 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
Jan 07 05:07:22 java.lang.AssertionError: The program encountered a IOExceptionList : /tmp/junit2133275241637829858/junit7793757951823298127
Jan 07 05:07:22 	at org.junit.Assert.fail(Assert.java:89)
Jan 07 05:07:22 	at org.apache.flink.test.recovery.AbstractTaskManagerProcessFailureRecoveryTest.testTaskManagerProcessFailure(AbstractTaskManagerProcessFailureRecoveryTest.java:205)
Jan 07 05:07:22 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
Jan 07 05:07:22 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
Jan 07 05:07:22 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
Jan 07 05:07:22 	at java.lang.reflect.Method.invoke(Method.java:498)
Jan 07 05:07:22 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
Jan 07 05:07:22 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
Jan 07 05:07:22 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
Jan 07 05:07:22 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
Jan 07 05:07:22 	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
Jan 07 05:07:22 	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
Jan 07 05:07:22 	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
Jan 07 05:07:22 	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
Jan 07 05:07:22 	at org.apache.flink.util.TestNameProvider$1.evaluate(TestNameProvider.java:45)
Jan 07 05:07:22 	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:61)
Jan 07 05:07:22 	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
Jan 07 05:07:22 	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
Jan 07 05:07:22 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
Jan 07 05:07:22 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
Jan 07 05:07:22 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
Jan 07 05:07:22 	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
Jan 07 05:07:22 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
Jan 07 05:07:22 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
Jan 07 05:07:22 	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
Jan 07 05:07:22 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
Jan 07 05:07:22 	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
Jan 07 05:07:22 	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
Jan 07 05:07:22 	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
Jan 07 05:07:22 	at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
Jan 07 05:07:22 	at org.junit.vintage.engine.execution.RunnerExecutor.execute(RunnerExecutor.java:42)
Jan 07 05:07:22 	at org.junit.vintage.engine.VintageTestEngine.executeAllChildren(VintageTestEngine.java:80)
Jan 07 05:07:22 	at org.junit.vintage.engine.VintageTestEngine.execute(VintageTestEngine.java:72)
Jan 07 05:07:22 	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
Jan 07 05:07:22 	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
Jan 07 05:07:22 	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
Jan 07 05:07:22 	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
Jan 07 05:07:22 	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
Jan 07 05:07:22 	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
Jan 07 05:07:22 	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
Jan 07 05:07:22 	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
Jan 07 05:07:22 	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
Jan 07 05:07:22 	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
Jan 07 05:07:22 	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
Jan 07 05:07:22 	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
Jan 07 05:07:22 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
Jan 07 05:07:22 	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
Jan 07 05:07:22 	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=29069&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=7b25afdf-cc6c-566f-5459-359dc2585798&amp;amp;l=16224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=29069&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=7b25afdf-cc6c-566f-5459-359dc2585798&amp;amp;l=16224&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13421245">FLINK-25564</key>
            <summary>TaskManagerProcessFailureStreamingRecoveryITCase&gt;AbstractTaskManagerProcessFailureRecoveryTest.testTaskManagerProcessFailure fails on AZP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nsemmler">Niklas Semmler</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Fri, 7 Jan 2022 08:31:54 +0000</created>
                <updated>Wed, 2 Feb 2022 08:21:48 +0000</updated>
                            <resolved>Wed, 2 Feb 2022 08:21:48 +0000</resolved>
                                    <version>1.15.0</version>
                                    <fixVersion>1.15.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17470741" author="zuston" created="Fri, 7 Jan 2022 16:38:33 +0000"  >&lt;p&gt;I can&apos;t reproduce this in my local machine, and you? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17471791" author="till.rohrmann" created="Mon, 10 Jan 2022 09:27:45 +0000"  >&lt;p&gt;I didn&apos;t try to reproduce it yet. Maybe a good step could be to take a look at the logs in &lt;a href=&quot;https://artprodsu6weu.artifacts.visualstudio.com/A2d3c0ac8-fecf-45be-8407-6d87302181a9/98463496-1af2-4620-8eab-a2ecc1a2e6fe/_apis/artifact/cGlwZWxpbmVhcnRpZmFjdDovL2FwYWNoZS1mbGluay9wcm9qZWN0SWQvOTg0NjM0OTYtMWFmMi00NjIwLThlYWItYTJlY2MxYTJlNmZlL2J1aWxkSWQvMjkwNjkvYXJ0aWZhY3ROYW1lL2xvZ3MtY3Jvbl9henVyZS10ZXN0X2Nyb25fYXp1cmVfZmluZWdyYWluZWRfcmVzb3VyY2VfbWFuYWdlbWVudC0xNjQxNTI3ODgz0/content?format=zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://artprodsu6weu.artifacts.visualstudio.com/A2d3c0ac8-fecf-45be-8407-6d87302181a9/98463496-1af2-4620-8eab-a2ecc1a2e6fe/_apis/artifact/cGlwZWxpbmVhcnRpZmFjdDovL2FwYWNoZS1mbGluay9wcm9qZWN0SWQvOTg0NjM0OTYtMWFmMi00NjIwLThlYWItYTJlY2MxYTJlNmZlL2J1aWxkSWQvMjkwNjkvYXJ0aWZhY3ROYW1lL2xvZ3MtY3Jvbl9henVyZS10ZXN0X2Nyb25fYXp1cmVfZmluZWdyYWluZWRfcmVzb3VyY2VfbWFuYWdlbWVudC0xNjQxNTI3ODgz0/content?format=zip&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17483165" author="JIRAUSER281719" created="Thu, 27 Jan 2022 14:15:47 +0000"  >&lt;p&gt;The error is caused by an exception while &lt;a href=&quot;#L105&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;cleaning up the checkpoint directory&lt;/a&gt;. The &quot;_metadata&quot; file is removed during the clean up process. (To be exact while the process is trying to ensure that the file is not read-only).&lt;/p&gt;

&lt;p&gt;I am not sure, why the file disappears. I&apos;d guess that the Flink Cluster does a separate clean-up. Possibly &lt;a href=&quot;https://github.com/apache/flink/blob/08794a6b2188268c3de6b134f399228415c7fc8f/flink-runtime/src/main/java/org/apache/flink/runtime/checkpoint/CompletedCheckpoint.java#L252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; and deletes the &quot;_metadata&quot; file at the same time. The likelihood of the two clean-ups to interlock is small, so this could be a reason why this doesn&apos;t come up often.&lt;/p&gt;

&lt;p&gt;Two options to solve this would be to:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Wait for a signal that cleanup is done&lt;/li&gt;
	&lt;li&gt;Wait till the directory is empty&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17483362" author="JIRAUSER281719" created="Thu, 27 Jan 2022 18:19:47 +0000"  >&lt;p&gt;Option 1: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;We may have this option in the future with the JobResultStore. Currently this is not possible.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Optiion 2:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The Checkpoint Coordinator does not clean up the &quot;taskowned&quot; and &quot;shared&quot; subfolders of the checkpoint directory. We could use a partial scan for files, but then it becomes very quickly very complicated.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;New Option3:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Maybe, the easiest solution is to just not leave the directory intact. Yes, this is a leak of files, but from what I see locally, the files are cleaned up anyway.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17483700" author="JIRAUSER281719" created="Fri, 28 Jan 2022 10:29:23 +0000"  >&lt;p&gt;Let&apos;s go with option 3 and leave the cleanup to the Rule.&lt;/p&gt;</comment>
                            <comment id="17485627" author="zentol" created="Wed, 2 Feb 2022 08:21:48 +0000"  >&lt;p&gt;master: 18db2f2a8aa7ff2bd423489ece12d0c5488bd2da&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ycc8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>