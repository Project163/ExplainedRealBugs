<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:24:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3729] Several SQL tests fail on Windows OS</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3729</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The Table API SqlExplain(Test/ITCase) fail categorically on Windows due to different line-endings. These tests generate an string representation of an abstract syntax tree; problem is there is a difference in line-endings.&lt;/p&gt;

&lt;p&gt;The expected ones contain LF, the actual one CRLF.&lt;/p&gt;

&lt;p&gt;The tests should be either changed to either&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;include CRLF line-endings in the expected string when run on windows&lt;/li&gt;
	&lt;li&gt;always use LF line-endings regardless of OS&lt;/li&gt;
	&lt;li&gt;use a compare method that is aware of this issue.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12957746">FLINK-3729</key>
            <summary>Several SQL tests fail on Windows OS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Apr 2016 16:07:58 +0000</created>
                <updated>Wed, 20 Jul 2016 14:32:35 +0000</updated>
                            <resolved>Wed, 20 Jul 2016 14:32:34 +0000</resolved>
                                    <version>1.0.1</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15235391" author="stefanobaghino" created="Mon, 11 Apr 2016 16:18:59 +0000"  >&lt;p&gt;Perhaps the &lt;tt&gt;Table.explain(boolean)&lt;/tt&gt; method could use &lt;tt&gt;System.lineSeparator()&lt;/tt&gt; instead of hard-coded UNIX newlines (&lt;tt&gt;\n&lt;/tt&gt;) when building the explain string (&lt;tt&gt;org.apache.flink.api.table.Table.scala:286&lt;/tt&gt;). Would that work?&lt;/p&gt;</comment>
                            <comment id="15235432" author="zentol" created="Mon, 11 Apr 2016 16:34:16 +0000"  >&lt;p&gt;no. the explain() method is already using different line-endings dependent on the OS. But the strings that we compare that result to are hard-coded into files with UNIX line endings.&lt;/p&gt;</comment>
                            <comment id="15237523" author="gallenvara_bg" created="Tue, 12 Apr 2016 16:48:24 +0000"  >&lt;p&gt;The problem is the &lt;tt&gt;ast&lt;/tt&gt; would use \r\n in Windows environment. The &lt;tt&gt;ast&lt;/tt&gt; is created by &lt;tt&gt;RelOptUtil.toString(relNode)&lt;/tt&gt; which would use different line-endings depend on the OS. And we can solve this issue as you mentioned:&lt;br/&gt;
1: modify the ast &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;val ast = RelOptUtil.toString(relNode).replaceAll(&lt;span class=&quot;code-quote&quot;&gt;&quot;\r\n&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;2: For every test file, add another one with Windows version.&lt;/p&gt;</comment>
                            <comment id="15374889" author="githubbot" created="Wed, 13 Jul 2016 12:06:26 +0000"  >&lt;p&gt;GitHub user zentol opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2238&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2238&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3729&quot; title=&quot;Several SQL tests fail on Windows OS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3729&quot;&gt;&lt;del&gt;FLINK-3729&lt;/del&gt;&lt;/a&gt; Fix Several SQL tests on Windows OS &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fixed ExplainTest by replacing all occurrences of `\r\n` with `\n` before comparing the output&lt;/li&gt;
	&lt;li&gt;replaced usages of `\n` in BatchTableEnvironment#explain() with System.lineSeparator&lt;/li&gt;
	&lt;li&gt;fixed TableSinkITCase by generating the qualidifed path using `File#toUri()` and `URI#toString()`&lt;/li&gt;
	&lt;li&gt;removed a lot of unused imports in TableSinkITCase&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zentol/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zentol/flink&lt;/a&gt; 3729_sql_tests_windows&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2238.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2238.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2238&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0694fde595289b4ae145544fb39598fee63e8bf5&lt;br/&gt;
Author: zentol &amp;lt;chesnay@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-07-13T11:51:05Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3729&quot; title=&quot;Several SQL tests fail on Windows OS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3729&quot;&gt;&lt;del&gt;FLINK-3729&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Fix ExplainTest on Windows OS&lt;/p&gt;

&lt;p&gt;commit d79866a78b30d6794c6c96431ac53d6a5119890d&lt;br/&gt;
Author: zentol &amp;lt;chesnay@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-07-13T11:51:34Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3729&quot; title=&quot;Several SQL tests fail on Windows OS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3729&quot;&gt;&lt;del&gt;FLINK-3729&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Fix TableSinkITCase on Windows OS&lt;/p&gt;

&lt;p&gt;commit 31c121c25cae70262c0187e43b41a144a326ab33&lt;br/&gt;
Author: zentol &amp;lt;chesnay@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-07-13T11:51:53Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Remove unused imports in TableSinkITCase&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15385915" author="githubbot" created="Wed, 20 Jul 2016 14:13:06 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2238&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2238&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM. I will merge it. Thanks!&lt;/p&gt;</comment>
                            <comment id="15385946" author="githubbot" created="Wed, 20 Jul 2016 14:29:06 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2238&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2238&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15385953" author="twalthr" created="Wed, 20 Jul 2016 14:32:35 +0000"  >&lt;p&gt;Fixed in 6ab96a7bbe5a65db1e0aa683380fbde55883607f.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vxof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>