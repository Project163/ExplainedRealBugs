<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:33:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8841] Duplicate MapSerializer and HashMapSerializer.</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8841</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently there are two class MapSerializer and HashMapSerializer whose code is the same with the only difference being that one includes elements of type Map and the other HashMap.&#160;&lt;/p&gt;

&lt;p&gt;In addition, these two were merged on the same commit.&#160;&lt;/p&gt;

&lt;p&gt;I would like to remove the HashMapSerializer.&#160;I already created a branch without the HashMapSerialzer and nothing seems to be failing on Travis. The reasons why I hesitate to do it, is because I am not sure if this may create problems with Backwards Compatibility.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiaogang.sxg&quot; class=&quot;user-hover&quot; rel=&quot;xiaogang.sxg&quot;&gt;xiaogang.sxg&lt;/a&gt; could you elaborate a bit on why they were both added and if there is any danger&#160;in removing the HashMapSerializer?&lt;/p&gt;

&lt;p&gt;Also&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=StephanEwen&quot; class=&quot;user-hover&quot; rel=&quot;StephanEwen&quot;&gt;StephanEwen&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanrichter83%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;stefanrichter83@gmail.com&quot;&gt;stefanrichter83@gmail.com&lt;/a&gt;&#160;it is worth having a look and if you are ok, I can remove the redundant serializer.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13142143">FLINK-8841</key>
            <summary>Duplicate MapSerializer and HashMapSerializer.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkl0u">Kostas Kloudas</assignee>
                                    <reporter username="kkl0u">Kostas Kloudas</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Mar 2018 17:52:09 +0000</created>
                <updated>Thu, 26 Apr 2018 16:33:39 +0000</updated>
                            <resolved>Thu, 26 Apr 2018 16:33:39 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>API / Type Serialization System</component>
                    <component>Runtime / State Backends</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16392735" author="kkl0u" created="Fri, 9 Mar 2018 11:23:09 +0000"  >&lt;p&gt;Can someone comment on this issue?&lt;/p&gt;

&lt;p&gt;I think it is important to keep a clean codebase as much as we can.&lt;/p&gt;

&lt;p&gt;Keeping both serializers&#160;means that issues like&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8908&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-8908&lt;/a&gt;&#160;should be&#160;fixed on&#160;both of them.&lt;/p&gt;</comment>
                            <comment id="16452115" author="githubbot" created="Wed, 25 Apr 2018 11:57:40 +0000"  >&lt;p&gt;GitHub user kl0u opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5910&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5910&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8841&quot; title=&quot;Duplicate MapSerializer and HashMapSerializer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8841&quot;&gt;&lt;del&gt;FLINK-8841&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;state&amp;#93;&lt;/span&gt; Remove HashMapSerializer and use MapSerializer instead.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    So far we had the `MapSerializer` and the `HashMapSerializer`. The two had almost identical code and the second was only used on the `HeapStateBackend`/`FSStateBackend` when creating a `MapState`. This PR removes the `HashMapSerializer` and replaces its uses with the `MapSerializer`. It also guarantees backwards compatibility.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    It introduces the `MigrationUtil` as an inner class of the `InstantiationUtil`. This class contains mapping between deprecated/deleted serializers and their replacements.&lt;/p&gt;

&lt;p&gt;    Also the removal of the `HashMapSerializer` uniformizes a bit the `HeapMapState` and the `RocksDBMapState`.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Added the `HeapKeyedStateBackendSnapshotMigrationTest#testMapStateMigrationAfterHashMapSerRemoval()`.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): no&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: no&lt;/li&gt;
	&lt;li&gt;The serializers: yes&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): no&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: no&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: no&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? no&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? not applicable&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    R @StefanRRichter or @aljoscha &lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kl0u/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kl0u/flink&lt;/a&gt; map-serializer-inv&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5910.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5910.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5910&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7de83de4765384080cea6d94b64a81e1584ce82e&lt;br/&gt;
Author: kkloudas &amp;lt;kkloudas@...&amp;gt;&lt;br/&gt;
Date:   2018-04-24T12:48:34Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8841&quot; title=&quot;Duplicate MapSerializer and HashMapSerializer.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8841&quot;&gt;&lt;del&gt;FLINK-8841&lt;/del&gt;&lt;/a&gt; Remove HashMapSerializer and use MapSerializer instead.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16452192" author="githubbot" created="Wed, 25 Apr 2018 12:47:03 +0000"  >&lt;p&gt;Github user yuqi1129 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5910#discussion_r184044453&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5910#discussion_r184044453&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/util/InstantiationUtil.java &amp;#8212;&lt;br/&gt;
    @@ -221,6 +226,52 @@ protected ObjectStreamClass readClassDescriptor() throws IOException, ClassNotFo&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * A mapping between the full path of a deprecated serializer and its equivalent.&lt;br/&gt;
    +	 * These mappings are hardcoded and fixed.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;IMPORTANT: mappings can be removed after 1 release as there will be a &quot;migration path&quot;.&lt;br/&gt;
    +	 * As an example, a serializer is removed in 1.5-SNAPSHOT, then the mapping should be added for 1.5,&lt;br/&gt;
    +	 * and it can be removed in 1.6, as the path would be Flink-&lt;/p&gt;
{&amp;lt; 1.5}
&lt;p&gt; &lt;del&gt;&amp;gt; Flink-1.5 -&amp;gt; Flink&lt;/del&gt;&lt;/p&gt;
{&amp;gt;= 1.6}
&lt;p&gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private enum MigrationUtil {&lt;br/&gt;
    +&lt;br/&gt;
    +		// To add a new mapping just pick a name and add an entry as the following:&lt;br/&gt;
    +&lt;br/&gt;
    +		GENERIC_DATA_ARRAY_SERIALIZER(&lt;br/&gt;
    +				&quot;org.apache.avro.generic.GenericData$Array&quot;,&lt;br/&gt;
    +				ObjectStreamClass.lookup(KryoRegistrationSerializerConfigSnapshot.DummyRegisteredClass.class)),&lt;br/&gt;
    +		HASH_MAP_SERIALIZER(&lt;br/&gt;
    +				&quot;org.apache.flink.runtime.state.HashMapSerializer&quot;,&lt;br/&gt;
    +				ObjectStreamClass.lookup(MapSerializer.class)); // added in 1.5&lt;br/&gt;
    +&lt;br/&gt;
    +		/** An internal unmoddifiable map containing the mappings between deprecated and new serialzers. */&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    `unmoddifiable`, `serialzers ` &lt;br/&gt;
    spelling mistake&lt;/p&gt;
</comment>
                            <comment id="16453099" author="githubbot" created="Wed, 25 Apr 2018 21:16:09 +0000"  >&lt;p&gt;Github user bowenli86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5910&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5910&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1&lt;/p&gt;</comment>
                            <comment id="16453669" author="githubbot" created="Thu, 26 Apr 2018 08:14:59 +0000"  >&lt;p&gt;Github user StefanRRichter commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5910#discussion_r184304412&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5910#discussion_r184304412&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/util/InstantiationUtil.java &amp;#8212;&lt;br/&gt;
    @@ -221,6 +226,52 @@ protected ObjectStreamClass readClassDescriptor() throws IOException, ClassNotFo&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * A mapping between the full path of a deprecated serializer and its equivalent.&lt;br/&gt;
    +	 * These mappings are hardcoded and fixed.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;IMPORTANT: mappings can be removed after 1 release as there will be a &quot;migration path&quot;.&lt;br/&gt;
    +	 * As an example, a serializer is removed in 1.5-SNAPSHOT, then the mapping should be added for 1.5,&lt;br/&gt;
    +	 * and it can be removed in 1.6, as the path would be Flink-&lt;/p&gt;
{&amp;lt; 1.5}
&lt;p&gt; &lt;del&gt;&amp;gt; Flink-1.5 -&amp;gt; Flink&lt;/del&gt;&lt;/p&gt;
{&amp;gt;= 1.6}
&lt;p&gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private enum MigrationUtil {&lt;br/&gt;
    +&lt;br/&gt;
    +		// To add a new mapping just pick a name and add an entry as the following:&lt;br/&gt;
    +&lt;br/&gt;
    +		GENERIC_DATA_ARRAY_SERIALIZER(&lt;br/&gt;
    +				&quot;org.apache.avro.generic.GenericData$Array&quot;,&lt;br/&gt;
    +				ObjectStreamClass.lookup(KryoRegistrationSerializerConfigSnapshot.DummyRegisteredClass.class)),&lt;br/&gt;
    +		HASH_MAP_SERIALIZER(&lt;br/&gt;
    +				&quot;org.apache.flink.runtime.state.HashMapSerializer&quot;,&lt;br/&gt;
    +				ObjectStreamClass.lookup(MapSerializer.class)); // added in 1.5&lt;br/&gt;
    +&lt;br/&gt;
    +		/** An internal unmoddifiable map containing the mappings between deprecated and new serialzers. */&lt;br/&gt;
    +		private static final Map&amp;lt;String, ObjectStreamClass&amp;gt; equivalenceMap = Collections.unmodifiableMap(initMap());&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    If it is static final, I suggest to use capital letter and underscores for the variable name.&lt;/p&gt;</comment>
                            <comment id="16453671" author="githubbot" created="Thu, 26 Apr 2018 08:15:33 +0000"  >&lt;p&gt;Github user StefanRRichter commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5910#discussion_r184304555&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5910#discussion_r184304555&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/util/InstantiationUtil.java &amp;#8212;&lt;br/&gt;
    @@ -221,6 +226,52 @@ protected ObjectStreamClass readClassDescriptor() throws IOException, ClassNotFo&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * A mapping between the full path of a deprecated serializer and its equivalent.&lt;br/&gt;
    +	 * These mappings are hardcoded and fixed.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;IMPORTANT: mappings can be removed after 1 release as there will be a &quot;migration path&quot;.&lt;br/&gt;
    +	 * As an example, a serializer is removed in 1.5-SNAPSHOT, then the mapping should be added for 1.5,&lt;br/&gt;
    +	 * and it can be removed in 1.6, as the path would be Flink-&lt;/p&gt;
{&amp;lt; 1.5}
&lt;p&gt; &lt;del&gt;&amp;gt; Flink-1.5 -&amp;gt; Flink&lt;/del&gt;&lt;/p&gt;
{&amp;gt;= 1.6}
&lt;p&gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private enum MigrationUtil {&lt;br/&gt;
    +&lt;br/&gt;
    +		// To add a new mapping just pick a name and add an entry as the following:&lt;br/&gt;
    +&lt;br/&gt;
    +		GENERIC_DATA_ARRAY_SERIALIZER(&lt;br/&gt;
    +				&quot;org.apache.avro.generic.GenericData$Array&quot;,&lt;br/&gt;
    +				ObjectStreamClass.lookup(KryoRegistrationSerializerConfigSnapshot.DummyRegisteredClass.class)),&lt;br/&gt;
    +		HASH_MAP_SERIALIZER(&lt;br/&gt;
    +				&quot;org.apache.flink.runtime.state.HashMapSerializer&quot;,&lt;br/&gt;
    +				ObjectStreamClass.lookup(MapSerializer.class)); // added in 1.5&lt;br/&gt;
    +&lt;br/&gt;
    +		/** An internal unmoddifiable map containing the mappings between deprecated and new serialzers. */&lt;br/&gt;
    +		private static final Map&amp;lt;String, ObjectStreamClass&amp;gt; equivalenceMap = Collections.unmodifiableMap(initMap());&lt;br/&gt;
    +&lt;br/&gt;
    +		/** The full name of the class of the old serializer. */&lt;br/&gt;
    +		private final String oldSerializer;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    mabye add `name` to the variable name to show it is a string, not a serializer.&lt;/p&gt;</comment>
                            <comment id="16453672" author="githubbot" created="Thu, 26 Apr 2018 08:15:58 +0000"  >&lt;p&gt;Github user StefanRRichter commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5910#discussion_r184304664&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5910#discussion_r184304664&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/util/InstantiationUtil.java &amp;#8212;&lt;br/&gt;
    @@ -221,6 +226,52 @@ protected ObjectStreamClass readClassDescriptor() throws IOException, ClassNotFo&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * A mapping between the full path of a deprecated serializer and its equivalent.&lt;br/&gt;
    +	 * These mappings are hardcoded and fixed.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;IMPORTANT: mappings can be removed after 1 release as there will be a &quot;migration path&quot;.&lt;br/&gt;
    +	 * As an example, a serializer is removed in 1.5-SNAPSHOT, then the mapping should be added for 1.5,&lt;br/&gt;
    +	 * and it can be removed in 1.6, as the path would be Flink-&lt;/p&gt;
{&amp;lt; 1.5}
&lt;p&gt; &lt;del&gt;&amp;gt; Flink-1.5 -&amp;gt; Flink&lt;/del&gt;&lt;/p&gt;
{&amp;gt;= 1.6}
&lt;p&gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private enum MigrationUtil {&lt;br/&gt;
    +&lt;br/&gt;
    +		// To add a new mapping just pick a name and add an entry as the following:&lt;br/&gt;
    +&lt;br/&gt;
    +		GENERIC_DATA_ARRAY_SERIALIZER(&lt;br/&gt;
    +				&quot;org.apache.avro.generic.GenericData$Array&quot;,&lt;br/&gt;
    +				ObjectStreamClass.lookup(KryoRegistrationSerializerConfigSnapshot.DummyRegisteredClass.class)),&lt;br/&gt;
    +		HASH_MAP_SERIALIZER(&lt;br/&gt;
    +				&quot;org.apache.flink.runtime.state.HashMapSerializer&quot;,&lt;br/&gt;
    +				ObjectStreamClass.lookup(MapSerializer.class)); // added in 1.5&lt;br/&gt;
    +&lt;br/&gt;
    +		/** An internal unmoddifiable map containing the mappings between deprecated and new serialzers. */&lt;br/&gt;
    +		private static final Map&amp;lt;String, ObjectStreamClass&amp;gt; equivalenceMap = Collections.unmodifiableMap(initMap());&lt;br/&gt;
    +&lt;br/&gt;
    +		/** The full name of the class of the old serializer. */&lt;br/&gt;
    +		private final String oldSerializer;&lt;br/&gt;
    +&lt;br/&gt;
    +		/** The serialization descriptor of the class of the new serializer. */&lt;br/&gt;
    +		private final ObjectStreamClass newSerializer;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Here I suggest to add `StreamClass` to the name.&lt;/p&gt;</comment>
                            <comment id="16453673" author="githubbot" created="Thu, 26 Apr 2018 08:16:30 +0000"  >&lt;p&gt;Github user StefanRRichter commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5910#discussion_r184304800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5910#discussion_r184304800&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/util/InstantiationUtil.java &amp;#8212;&lt;br/&gt;
    @@ -221,6 +226,52 @@ protected ObjectStreamClass readClassDescriptor() throws IOException, ClassNotFo&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * A mapping between the full path of a deprecated serializer and its equivalent.&lt;br/&gt;
    +	 * These mappings are hardcoded and fixed.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;IMPORTANT: mappings can be removed after 1 release as there will be a &quot;migration path&quot;.&lt;br/&gt;
    +	 * As an example, a serializer is removed in 1.5-SNAPSHOT, then the mapping should be added for 1.5,&lt;br/&gt;
    +	 * and it can be removed in 1.6, as the path would be Flink-&lt;/p&gt;
{&amp;lt; 1.5}
&lt;p&gt; &lt;del&gt;&amp;gt; Flink-1.5 -&amp;gt; Flink&lt;/del&gt;&lt;/p&gt;
{&amp;gt;= 1.6}
&lt;p&gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private enum MigrationUtil {&lt;br/&gt;
    +&lt;br/&gt;
    +		// To add a new mapping just pick a name and add an entry as the following:&lt;br/&gt;
    +&lt;br/&gt;
    +		GENERIC_DATA_ARRAY_SERIALIZER(&lt;br/&gt;
    +				&quot;org.apache.avro.generic.GenericData$Array&quot;,&lt;br/&gt;
    +				ObjectStreamClass.lookup(KryoRegistrationSerializerConfigSnapshot.DummyRegisteredClass.class)),&lt;br/&gt;
    +		HASH_MAP_SERIALIZER(&lt;br/&gt;
    +				&quot;org.apache.flink.runtime.state.HashMapSerializer&quot;,&lt;br/&gt;
    +				ObjectStreamClass.lookup(MapSerializer.class)); // added in 1.5&lt;br/&gt;
    +&lt;br/&gt;
    +		/** An internal unmoddifiable map containing the mappings between deprecated and new serialzers. */&lt;br/&gt;
    +		private static final Map&amp;lt;String, ObjectStreamClass&amp;gt; equivalenceMap = Collections.unmodifiableMap(initMap());&lt;br/&gt;
    +&lt;br/&gt;
    +		/** The full name of the class of the old serializer. */&lt;br/&gt;
    +		private final String oldSerializer;&lt;br/&gt;
    +&lt;br/&gt;
    +		/** The serialization descriptor of the class of the new serializer. */&lt;br/&gt;
    +		private final ObjectStreamClass newSerializer;&lt;br/&gt;
    +&lt;br/&gt;
    +		MigrationUtil(final String oldSerializer, final ObjectStreamClass newSerializer) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    the `final` in on these parameters is just noise&lt;/p&gt;</comment>
                            <comment id="16453701" author="githubbot" created="Thu, 26 Apr 2018 08:41:22 +0000"  >&lt;p&gt;Github user kl0u commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5910&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5910&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @yuqi1129, @bowenli86 and @StefanRRichter for the reviews. I integrated your comments. If you are done with reviewing, I will merge it as soon as Travis gives the green light.&lt;/p&gt;</comment>
                            <comment id="16453721" author="githubbot" created="Thu, 26 Apr 2018 09:01:51 +0000"  >&lt;p&gt;Github user StefanRRichter commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5910&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5910&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM &#128077; &lt;/p&gt;</comment>
                            <comment id="16454490" author="githubbot" created="Thu, 26 Apr 2018 16:30:19 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5910&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5910&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16454496" author="kkl0u" created="Thu, 26 Apr 2018 16:33:39 +0000"  >&lt;p&gt;Merged on master with&#160;3ac282322a3940da9d69f81b9bc189b6d0c0463f&lt;/p&gt;

&lt;p&gt;and on release-1.5 with&#160;93b75c7674446020efcaa53e6a1a4759d3435312&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 29 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qsxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>