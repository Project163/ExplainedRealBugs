<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:50:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-20068] KafkaSubscriberTest.testTopicPatternSubscriber failed with unexpected results</title>
                <link>https://issues.apache.org/jira/browse/FLINK-20068</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9365&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9365&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-11-10T00:14:22.7658242Z [ERROR] testTopicPatternSubscriber(org.apache.flink.connector.kafka.source.enumerator.subscriber.KafkaSubscriberTest)  Time elapsed: 0.012 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
2020-11-10T00:14:22.7659838Z java.lang.AssertionError: expected:&amp;lt;[pattern-topic-5, pattern-topic-4, pattern-topic-7, pattern-topic-6, pattern-topic-9, pattern-topic-8, pattern-topic-1, pattern-topic-0, pattern-topic-3]&amp;gt; but was:&amp;lt;[]&amp;gt;
2020-11-10T00:14:22.7660740Z 	at org.junit.Assert.fail(Assert.java:88)
2020-11-10T00:14:22.7661245Z 	at org.junit.Assert.failNotEquals(Assert.java:834)
2020-11-10T00:14:22.7661788Z 	at org.junit.Assert.assertEquals(Assert.java:118)
2020-11-10T00:14:22.7662312Z 	at org.junit.Assert.assertEquals(Assert.java:144)
2020-11-10T00:14:22.7663051Z 	at org.apache.flink.connector.kafka.source.enumerator.subscriber.KafkaSubscriberTest.testTopicPatternSubscriber(KafkaSubscriberTest.java:94)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13339659">FLINK-20068</key>
            <summary>KafkaSubscriberTest.testTopicPatternSubscriber failed with unexpected results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="becket_qin">Jiangjie Qin</assignee>
                                    <reporter username="dian.fu">Dian Fu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 10 Nov 2020 05:18:09 +0000</created>
                <updated>Fri, 18 Oct 2024 19:38:12 +0000</updated>
                            <resolved>Wed, 11 Nov 2020 07:16:14 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.11.3</fixVersion>
                    <fixVersion>1.12.0</fixVersion>
                                    <component>Connectors / Kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17229079" author="JIRAUSER306704" created="Tue, 10 Nov 2020 09:16:48 +0000"  >&lt;p&gt;Another instance&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9388&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9388&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17229095" author="dian.fu" created="Tue, 10 Nov 2020 09:54:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9371&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9371&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17229142" author="rmetzger" created="Tue, 10 Nov 2020 11:26:34 +0000"  >&lt;p&gt;Can you take a look &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17229205" author="rmetzger" created="Tue, 10 Nov 2020 13:13:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9384&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9384&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17229245" author="becket_qin" created="Tue, 10 Nov 2020 14:19:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt;&#160;Checking...&lt;/p&gt;</comment>
                            <comment id="17229637" author="dian.fu" created="Wed, 11 Nov 2020 01:45:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9422&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9422&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=1fb1a56f-e8b5-5a82-00a0-a2db7757b4f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17229644" author="dian.fu" created="Wed, 11 Nov 2020 01:54:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9425&amp;amp;view=logs&amp;amp;j=1fc6e7bf-633c-5081-c32a-9dea24b05730&amp;amp;t=80a658d1-f7f6-5d93-2758-53ac19fd5b19&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9425&amp;amp;view=logs&amp;amp;j=1fc6e7bf-633c-5081-c32a-9dea24b05730&amp;amp;t=80a658d1-f7f6-5d93-2758-53ac19fd5b19&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17229763" author="becket_qin" created="Wed, 11 Nov 2020 06:09:33 +0000"  >&lt;p&gt;This is a legacy issue caused by asynchronous topic creation in Kafka.&lt;/p&gt;

&lt;p&gt;The problems is that we have 3 Kafka brokers. When a topic is created, the &lt;tt&gt;CreateTopicsRequest&lt;/tt&gt;&#160;will be sent to one of the brokers and block waiting until that broker receives a metadata cache update. However, this does not guarantee that the other two brokers have also received the metadata cache update. When a subsequent TopicMetadataRequest goes to the other two brokers, it is still possible that the topic being created is not returned in the topic metadata.&lt;/p&gt;

&lt;p&gt;The patch fixes this by letting the &lt;tt&gt;KafkaTestEnvironmentImpl&lt;/tt&gt;&#160;to look into each of the brokers and wait until all the brokers have got the newly created topic in their metadata cache before it returns from &lt;tt&gt;createTestTopic()&lt;/tt&gt; call.&lt;/p&gt;

&lt;p&gt;This should help fix a few other intermittent test failures.&lt;/p&gt;</comment>
                            <comment id="17229802" author="becket_qin" created="Wed, 11 Nov 2020 07:16:14 +0000"  >&lt;p&gt;Merged to master.&lt;br/&gt;
cacb4c1fb1d6123d0aeb93d550ffcafa6ad4a8fb&lt;/p&gt;

&lt;p&gt;Cherry-picked to 1.11&#65306;&lt;br/&gt;
18e4c1ba5b66c704b3ea7e5ba8fb7f3499207903&lt;/p&gt;</comment>
                            <comment id="17229803" author="rmetzger" created="Wed, 11 Nov 2020 07:17:11 +0000"  >&lt;p&gt;Thanks a lot for the explanation and fix!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kfb4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>