<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:36:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10856] Harden resume from externalized checkpoint E2E test</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10856</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The resume from externalized checkpoints E2E test can fail due to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10855&quot; title=&quot;CheckpointCoordinator does not delete checkpoint directory of late/failed checkpoints&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10855&quot;&gt;FLINK-10855&lt;/a&gt;. We should harden the test script to not expect a single checkpoint directory being present but to take the checkpoint with the highest checkpoint counter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13197847">FLINK-10856</key>
            <summary>Harden resume from externalized checkpoint E2E test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 12 Nov 2018 16:05:17 +0000</created>
                <updated>Fri, 16 Nov 2018 08:19:45 +0000</updated>
                            <resolved>Fri, 16 Nov 2018 08:19:45 +0000</resolved>
                                    <version>1.5.5</version>
                    <version>1.6.2</version>
                    <version>1.7.0</version>
                                    <fixVersion>1.5.6</fixVersion>
                    <fixVersion>1.6.3</fixVersion>
                    <fixVersion>1.7.0</fixVersion>
                                    <component>Runtime / State Backends</component>
                    <component>Test Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16685262" author="githubbot" created="Tue, 13 Nov 2018 14:11:41 +0000"  >&lt;p&gt;tillrohrmann opened a new pull request #7088: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10856&quot; title=&quot;Harden resume from externalized checkpoint E2E test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10856&quot;&gt;&lt;del&gt;FLINK-10856&lt;/del&gt;&lt;/a&gt; Take latest checkpoint to resume from in resume from externalized checkpoint e2e test&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7088&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7088&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Since it can happen that some empty checkpoint directories are left, we have to take the latest&lt;br/&gt;
   checkpoint directory in order to resume from an externalized checkpoint. This commit changes the&lt;br/&gt;
   test_resume_externalized_checkpoint.sh to sort the checkpoint directories in descending order and&lt;br/&gt;
   then takes the head checkpoint directory.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Manually tested.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686288" author="githubbot" created="Wed, 14 Nov 2018 10:04:03 +0000"  >&lt;p&gt;tillrohrmann commented on issue #7088: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10856&quot; title=&quot;Harden resume from externalized checkpoint E2E test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10856&quot;&gt;&lt;del&gt;FLINK-10856&lt;/del&gt;&lt;/a&gt; Take latest checkpoint to resume from in resume from externalized checkpoint e2e test&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7088#issuecomment-438606795&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7088#issuecomment-438606795&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the review. Merging this PR.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686289" author="githubbot" created="Wed, 14 Nov 2018 10:04:18 +0000"  >&lt;p&gt;tillrohrmann edited a comment on issue #7088: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10856&quot; title=&quot;Harden resume from externalized checkpoint E2E test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10856&quot;&gt;&lt;del&gt;FLINK-10856&lt;/del&gt;&lt;/a&gt; Take latest checkpoint to resume from in resume from externalized checkpoint e2e test&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7088#issuecomment-438606795&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7088#issuecomment-438606795&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the review @twalthr. Merging this PR.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686290" author="githubbot" created="Wed, 14 Nov 2018 10:04:38 +0000"  >&lt;p&gt;tillrohrmann closed pull request #7088: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10856&quot; title=&quot;Harden resume from externalized checkpoint E2E test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10856&quot;&gt;&lt;del&gt;FLINK-10856&lt;/del&gt;&lt;/a&gt; Take latest checkpoint to resume from in resume from externalized checkpoint e2e test&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7088&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7088&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-end-to-end-tests/test-scripts/test_resume_externalized_checkpoints.sh b/flink-end-to-end-tests/test-scripts/test_resume_externalized_checkpoints.sh&lt;br/&gt;
index fe2319063b5..c1477574d5d 100755&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/test_resume_externalized_checkpoints.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test_resume_externalized_checkpoints.sh&lt;br/&gt;
@@ -111,19 +111,14 @@ else&lt;br/&gt;
   cancel_job $DATASTREAM_JOB&lt;br/&gt;
 fi&lt;/p&gt;

&lt;p&gt;&lt;del&gt;CHECKPOINT_PATH=$(ls -d $CHECKPOINT_DIR/$DATASTREAM_JOB/chk&lt;/del&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1-9&amp;#93;&lt;/span&gt;*)&lt;br/&gt;
+# take the latest checkpoint&lt;br/&gt;
+CHECKPOINT_PATH=$(ls &lt;del&gt;d $CHECKPOINT_DIR/$DATASTREAM_JOB/chk&lt;/del&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1-9&amp;#93;&lt;/span&gt;* | sort -Vr | head -n1)&lt;/p&gt;

&lt;p&gt; if [ -z $CHECKPOINT_PATH ]; then&lt;br/&gt;
   echo &quot;Expected an externalized checkpoint to be present, but none exists.&quot;&lt;br/&gt;
   exit 1&lt;br/&gt;
 fi&lt;/p&gt;

&lt;p&gt;-NUM_CHECKPOINTS=$(echo $CHECKPOINT_PATH | wc -l | tr -d &apos; &apos;)&lt;br/&gt;
-if (( $NUM_CHECKPOINTS &amp;gt; 1 )); then&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo &quot;Expected only exactly 1 externalized checkpoint to be present, but $NUM_CHECKPOINTS exists.&quot;&lt;/li&gt;
	&lt;li&gt;exit 1&lt;br/&gt;
-fi&lt;br/&gt;
-&lt;br/&gt;
 echo &quot;Restoring job with externalized checkpoint at $CHECKPOINT_PATH ...&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; BASE_JOB_CMD=`buildBaseJobCmd $NEW_DOP &quot;-s &lt;a href=&quot;file://$&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://$&lt;/a&gt;{CHECKPOINT_PATH}&quot;`&lt;br/&gt;
@@ -141,6 +136,11 @@ fi&lt;/p&gt;

&lt;p&gt; DATASTREAM_JOB=$($JOB_CMD | grep &quot;Job has been submitted with JobID&quot; | sed &apos;s/.* //g&apos;)&lt;/p&gt;

&lt;p&gt;+if [ -z $DATASTREAM_JOB ]; then&lt;br/&gt;
+    echo &quot;Resuming from externalized checkpoint job could not be started.&quot;&lt;br/&gt;
+    exit 1&lt;br/&gt;
+fi&lt;br/&gt;
+&lt;br/&gt;
 wait_job_running $DATASTREAM_JOB&lt;br/&gt;
 wait_oper_metric_num_in_records SemanticsCheckMapper.0 200&lt;/p&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686295" author="till.rohrmann" created="Wed, 14 Nov 2018 10:10:36 +0000"  >&lt;p&gt;Fixed via&lt;br/&gt;
master: &lt;a href=&quot;https://github.com/apache/flink/commit/6f15c1729156f23d69c870eff894d1cbd18d868f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/6f15c1729156f23d69c870eff894d1cbd18d868f&lt;/a&gt;&lt;br/&gt;
1.7.0: &lt;a href=&quot;https://github.com/apache/flink/commit/6c84103cbd2a7fa67e00e548b5df7161b6bd1ec7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/6c84103cbd2a7fa67e00e548b5df7161b6bd1ec7&lt;/a&gt;&lt;br/&gt;
1.6.3: &lt;a href=&quot;https://github.com/apache/flink/commit/3b6177cc9ff83f4b994d3ce7d82c2cbe3493eda2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/3b6177cc9ff83f4b994d3ce7d82c2cbe3493eda2&lt;/a&gt;&lt;br/&gt;
1.5.6: &lt;a href=&quot;https://github.com/apache/flink/commit/2c63feecd5c6c5e6cc70c6449c8d4b551f0753e2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/2c63feecd5c6c5e6cc70c6449c8d4b551f0753e2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16686453" author="zentol" created="Wed, 14 Nov 2018 12:31:32 +0000"  >&lt;p&gt;The latest fix introduced a new instability where we attempt to resume from an incomplete checkpoint (i.e. one that has no &lt;tt&gt;&lt;em&gt;metadata&lt;/em&gt;&lt;/tt&gt; file).&lt;/p&gt;

&lt;p&gt;We have to double-check that the checkpoint was actually completed.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/zentol/flink/jobs/454943554&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/zentol/flink/jobs/454943554&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2018-11-14 12:11:45,071 ERROR org.apache.flink.runtime.dispatcher.StandaloneDispatcher      - Failed to submit job 9e7876f96c583177d183ce18b52bbd18.

java.lang.RuntimeException: org.apache.flink.runtime.client.JobExecutionException: Could not set up JobManager

    at org.apache.flink.util.function.CheckedSupplier.lambda$unchecked$0(CheckedSupplier.java:36)

    at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)

    at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:39)

    at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(AbstractDispatcher.scala:415)

    at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)

    at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)

    at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)

    at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)

Caused by: org.apache.flink.runtime.client.JobExecutionException: Could not set up JobManager

    at org.apache.flink.runtime.jobmaster.JobManagerRunner.&amp;lt;init&amp;gt;(JobManagerRunner.java:176)

    at org.apache.flink.runtime.dispatcher.Dispatcher$DefaultJobManagerRunnerFactory.createJobManagerRunner(Dispatcher.java:1058)

    at org.apache.flink.runtime.dispatcher.Dispatcher.lambda$createJobManagerRunner$5(Dispatcher.java:308)

    at org.apache.flink.util.function.CheckedSupplier.lambda$unchecked$0(CheckedSupplier.java:34)

    ... 7 more

Caused by: java.io.FileNotFoundException: Cannot find meta data file &lt;span class=&quot;code-quote&quot;&gt;&apos;_metadata&apos;&lt;/span&gt; in directory &lt;span class=&quot;code-quote&quot;&gt;&apos;file:/home/travis/build/zentol/flink/flink/flink-end-to-end-tests/test-scripts/temp-test-directory-14313753102/externalized-chckpt-e2e-backend-dir/dfcac75e697394900e5088f962130d57/chk-10&apos;&lt;/span&gt;. Please &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to load the checkpoint/savepoint directly from the metadata file instead of the directory.

    at org.apache.flink.runtime.state.filesystem.AbstractFsCheckpointStorage.resolveCheckpointPointer(AbstractFsCheckpointStorage.java:256)

    at org.apache.flink.runtime.state.filesystem.AbstractFsCheckpointStorage.resolveCheckpoint(AbstractFsCheckpointStorage.java:109)

    at org.apache.flink.runtime.checkpoint.CheckpointCoordinator.restoreSavepoint(CheckpointCoordinator.java:1100)

    at org.apache.flink.runtime.jobmaster.JobMaster.tryRestoreExecutionGraphFromSavepoint(JobMaster.java:1234)

    at org.apache.flink.runtime.jobmaster.JobMaster.createAndRestoreExecutionGraph(JobMaster.java:1158)

    at org.apache.flink.runtime.jobmaster.JobMaster.&amp;lt;init&amp;gt;(JobMaster.java:296)

    at org.apache.flink.runtime.jobmaster.JobManagerRunner.&amp;lt;init&amp;gt;(JobManagerRunner.java:157)

    ... 10 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16688181" author="githubbot" created="Thu, 15 Nov 2018 15:08:03 +0000"  >&lt;p&gt;tillrohrmann opened a new pull request #7111: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10856&quot; title=&quot;Harden resume from externalized checkpoint E2E test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10856&quot;&gt;&lt;del&gt;FLINK-10856&lt;/del&gt;&lt;/a&gt; Find latest completed checkpoint for resume from externalized checkpoint e2e test&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7111&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Find latest completed checkpoint for resume from externalized checkpoint e2e test by only considering checkpoint directories which contain the `_metadata` file.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Tested manually&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16688197" author="githubbot" created="Thu, 15 Nov 2018 15:15:47 +0000"  >&lt;p&gt;tillrohrmann opened a new pull request #7114: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10856&quot; title=&quot;Harden resume from externalized checkpoint E2E test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10856&quot;&gt;&lt;del&gt;FLINK-10856&lt;/del&gt;&lt;/a&gt; Find latest completed checkpoint for resume from externalized checkpoint e2e test&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7114&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7114&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Backport of #7111 to `release-1.5`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16689148" author="githubbot" created="Fri, 16 Nov 2018 08:18:15 +0000"  >&lt;p&gt;tillrohrmann commented on issue #7111: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10856&quot; title=&quot;Harden resume from externalized checkpoint E2E test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10856&quot;&gt;&lt;del&gt;FLINK-10856&lt;/del&gt;&lt;/a&gt; Find latest completed checkpoint for resume from externalized checkpoint e2e test&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7111#issuecomment-439315975&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7111#issuecomment-439315975&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the review @zentol. Merging.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16689149" author="githubbot" created="Fri, 16 Nov 2018 08:18:31 +0000"  >&lt;p&gt;tillrohrmann closed pull request #7111: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10856&quot; title=&quot;Harden resume from externalized checkpoint E2E test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10856&quot;&gt;&lt;del&gt;FLINK-10856&lt;/del&gt;&lt;/a&gt; Find latest completed checkpoint for resume from externalized checkpoint e2e test&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7111&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-end-to-end-tests/test-scripts/common.sh b/flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
index ea267538639..4e6254864c1 100644&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
@@ -656,3 +656,10 @@ function wait_for_restart_to_complete &lt;/p&gt;
{
         fi
     done
 }
&lt;p&gt;+&lt;br/&gt;
+function find_latest_completed_checkpoint {&lt;br/&gt;
+    local checkpoint_root_directory=$1&lt;br/&gt;
+    # a completed checkpoint must contain the _metadata file&lt;br/&gt;
+    local checkpoint_meta_file=$(ls &lt;del&gt;d ${checkpoint_root_directory}/chk&lt;/del&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1-9&amp;#93;&lt;/span&gt;*/_metadata | sort -Vr | head -n1)&lt;br/&gt;
+    echo &quot;$(dirname &quot;${checkpoint_meta_file}&quot;)&quot;&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/test_resume_externalized_checkpoints.sh b/flink-end-to-end-tests/test-scripts/test_resume_externalized_checkpoints.sh&lt;br/&gt;
index c1477574d5d..35fe30b6b25 100755&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/test_resume_externalized_checkpoints.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test_resume_externalized_checkpoints.sh&lt;br/&gt;
@@ -112,7 +112,7 @@ else&lt;br/&gt;
 fi&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;take the latest checkpoint&lt;br/&gt;
&lt;del&gt;CHECKPOINT_PATH=$(ls -d $CHECKPOINT_DIR/$DATASTREAM_JOB/chk&lt;/del&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1-9&amp;#93;&lt;/span&gt;* | sort -Vr | head -n1)&lt;br/&gt;
+CHECKPOINT_PATH=$(find_latest_completed_checkpoint ${CHECKPOINT_DIR}/${DATASTREAM_JOB})&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt; if [ -z $CHECKPOINT_PATH ]; then&lt;br/&gt;
   echo &quot;Expected an externalized checkpoint to be present, but none exists.&quot;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16689150" author="till.rohrmann" created="Fri, 16 Nov 2018 08:19:45 +0000"  >&lt;p&gt;Fixed via&lt;br/&gt;
master: &lt;a href=&quot;https://github.com/apache/flink/commit/bddfe23d7df18099982958d21f7bcd01039909b9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/bddfe23d7df18099982958d21f7bcd01039909b9&lt;/a&gt;&lt;br/&gt;
1.7.0: &lt;a href=&quot;https://github.com/apache/flink/commit/6c21335004ce487e104bc85bd3aae211e1319a20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/6c21335004ce487e104bc85bd3aae211e1319a20&lt;/a&gt;&lt;br/&gt;
1.6.3: &lt;a href=&quot;https://github.com/apache/flink/commit/b4e6d9b03facaf572caddaed5a70afcbffd083a2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/b4e6d9b03facaf572caddaed5a70afcbffd083a2&lt;/a&gt;&lt;br/&gt;
1.5.6: &lt;a href=&quot;https://github.com/apache/flink/commit/0c27eda46ccf88ca794bb7831a788df303a5967e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/0c27eda46ccf88ca794bb7831a788df303a5967e&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13198550">FLINK-10894</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00ee8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>