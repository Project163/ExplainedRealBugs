<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:22:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3271] Using webhdfs in a flink topology throws classnotfound exception</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3271</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I was just trying to run a storm topology on flink using flink-storm. I got this exception - &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.NoClassDefFoundError: org/mortbay/util/ajax/JSON
	at org.apache.hadoop.hdfs.web.WebHdfsFileSystem.jsonParse(WebHdfsFileSystem.java:325)
	at org.apache.hadoop.hdfs.web.WebHdfsFileSystem$FsPathResponseRunner.getResponse(WebHdfsFileSystem.java:727)
	at org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner.runWithRetry(WebHdfsFileSystem.java:610)
	at org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner.access$100(WebHdfsFileSystem.java:458)
	at org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner$1.run(WebHdfsFileSystem.java:487)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1628)
	at org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner.run(WebHdfsFileSystem.java:483)
	at org.apache.hadoop.hdfs.web.WebHdfsFileSystem.listStatus(WebHdfsFileSystem.java:1277)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My topology list some files on hdfs using webhdfs API. org.mortbay.util.ajax.JSON was included in the application uber jar. I noticed that flink loads the application jar in a child classloader. This is what most likely happened - &lt;/p&gt;

&lt;p&gt;1. WebHdfsFileSystem class was loaded through parent class loader since it is included in flink-dist.jar.&lt;br/&gt;
2. WebHdfsFileSystem has reference to the org.mortbay.util.ajax.JSON but since it is loaded through parent class loader, WebHdfsFileSystem can&apos;t read a class in child class loader. &lt;/p&gt;

&lt;p&gt;Ideally all the referenced classes should be available in the distribution jar so that these sort of issues may not occur. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12933135">FLINK-3271</key>
            <summary>Using webhdfs in a flink topology throws classnotfound exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="abhishek.agarwal">Abhishek Agarwal</assignee>
                                    <reporter username="abhishek.agarwal">Abhishek Agarwal</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jan 2016 18:52:20 +0000</created>
                <updated>Thu, 28 Feb 2019 13:21:01 +0000</updated>
                            <resolved>Thu, 11 Feb 2016 21:02:35 +0000</resolved>
                                    <version>0.10.1</version>
                                    <fixVersion>1.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15111086" author="abhishek.agarwal" created="Thu, 21 Jan 2016 18:54:18 +0000"  >&lt;p&gt;I can give a fix for this. Feel free to assign to me. I don&apos;t have the permission&lt;/p&gt;</comment>
                            <comment id="15111105" author="rmetzger" created="Thu, 21 Jan 2016 19:01:33 +0000"  >&lt;p&gt;Hey Abhishek, I gave you contributor permissions: You can now assign Flink issues to yourself.&lt;/p&gt;</comment>
                            <comment id="15114332" author="githubbot" created="Sun, 24 Jan 2016 14:53:51 +0000"  >&lt;p&gt;GitHub user abhishekagarwal87 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3271&quot; title=&quot;Using webhdfs in a flink topology throws classnotfound exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3271&quot;&gt;&lt;del&gt;FLINK-3271&lt;/del&gt;&lt;/a&gt;: Include jetty-util in the dist jar&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/abhishekagarwal87/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/abhishekagarwal87/flink&lt;/a&gt; work&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1543&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 679318fef7ea8f63f7744c522e3ded7c68983615&lt;br/&gt;
Author: Abhishek Agarwal &amp;lt;abhishek.agarwal@inmobi.com&amp;gt;&lt;br/&gt;
Date:   2016-01-24T14:52:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3271&quot; title=&quot;Using webhdfs in a flink topology throws classnotfound exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3271&quot;&gt;&lt;del&gt;FLINK-3271&lt;/del&gt;&lt;/a&gt;: Include jetty-util in the dist jar&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15114334" author="githubbot" created="Sun, 24 Jan 2016 14:57:05 +0000"  >&lt;p&gt;Github user abhishekagarwal87 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#issuecomment-174306148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#issuecomment-174306148&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    There were duplicate exclusions in the pom.xml. This fixes the webhdfs API issue but it doesn&apos;t solve the problem entirely. Not every class references by classes in the parent classloader may be available. Is it possible to relocate hadoop classes as well and let users pack-in the hadoop jars in the application itself?&lt;/p&gt;</comment>
                            <comment id="15115245" author="githubbot" created="Mon, 25 Jan 2016 14:14:52 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#issuecomment-174519860&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#issuecomment-174519860&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The idea sounds very good. The `lib` folder should not pack the Hadoop classes into the same uberjar as Flink, but have separate fat jars for Flink and the Hadoop dependency.&lt;/p&gt;

&lt;p&gt;    Should be doable by changing the uberjar packaging in the `flink-dist` project...&lt;/p&gt;</comment>
                            <comment id="15115250" author="githubbot" created="Mon, 25 Jan 2016 14:15:41 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#issuecomment-174520036&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#issuecomment-174520036&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    If this is the approach you suggest to go for, please open a JIRA for this...&lt;/p&gt;</comment>
                            <comment id="15115290" author="githubbot" created="Mon, 25 Jan 2016 14:34:01 +0000"  >&lt;p&gt;Github user abhishekagarwal87 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#issuecomment-174524448&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#issuecomment-174524448&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Sure. Let me try this out locally and I will get back to you. &lt;/p&gt;</comment>
                            <comment id="15126432" author="githubbot" created="Mon, 1 Feb 2016 15:52:25 +0000"  >&lt;p&gt;Github user abhishekagarwal87 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#issuecomment-178038559&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#issuecomment-178038559&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @StephanEwen &lt;br/&gt;
    how does separating out hadoop classes solve the classloader problem? Since even if the jars are different, they will be loaded in parent classloader and application jar is in child classloader. &lt;/p&gt;</comment>
                            <comment id="15126452" author="githubbot" created="Mon, 1 Feb 2016 16:04:21 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#issuecomment-178044858&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#issuecomment-178044858&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    If I understood your suggestion at the beginning correctly, you wanted to allow users to delete the &quot;Hadoop jar&quot; in the lib folder and replace it with their own custom Hadoop jar.&lt;/p&gt;</comment>
                            <comment id="15126469" author="githubbot" created="Mon, 1 Feb 2016 16:14:37 +0000"  >&lt;p&gt;Github user abhishekagarwal87 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#issuecomment-178048690&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#issuecomment-178048690&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    seems to be some misunderstanding. That was not the intention. I suggested relocating hadoop classes so that any hadoop classes in the application are loaded through application classloader itself. I have put up more details in the ticket which explains the uber issue. &lt;/p&gt;</comment>
                            <comment id="15126475" author="githubbot" created="Mon, 1 Feb 2016 16:15:44 +0000"  >&lt;p&gt;Github user abhishekagarwal87 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#issuecomment-178049275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#issuecomment-178049275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    webhdfs api works with this commit but there could be similar classNotFound problems in future.&lt;/p&gt;</comment>
                            <comment id="15139082" author="githubbot" created="Tue, 9 Feb 2016 15:40:34 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#discussion_r52324384&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#discussion_r52324384&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-shaded-hadoop/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -111,6 +111,7 @@ under the License.&lt;br/&gt;
     									&amp;lt;include&amp;gt;io.netty:netty:*&amp;lt;/include&amp;gt;&lt;br/&gt;
     									&amp;lt;include&amp;gt;org.apache.curator:*&amp;lt;/include&amp;gt;&lt;br/&gt;
     									&amp;lt;include&amp;gt;org.apache.hadoop:*&amp;lt;/include&amp;gt;&lt;br/&gt;
    +									&amp;lt;include&amp;gt;org.mortbay.jetty:*&amp;lt;/include&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I think it is not necessary to include the dependency in the fat jar. We only include those where the classes should be relocated to &quot;hide&quot; the dependency. We probably do not want to &quot;hide&quot; jetty.&lt;/p&gt;</comment>
                            <comment id="15139085" author="githubbot" created="Tue, 9 Feb 2016 15:44:02 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#discussion_r52324939&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#discussion_r52324939&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-shaded-hadoop/flink-shaded-hadoop2/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -184,10 +184,10 @@ under the License.&lt;br/&gt;
     					&amp;lt;groupId&amp;gt;org.mortbay.jetty&amp;lt;/groupId&amp;gt;&lt;br/&gt;
     					&amp;lt;artifactId&amp;gt;jsp-2.1&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
     				&amp;lt;/exclusion&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;exclusion&amp;gt;&lt;br/&gt;
    +				&amp;lt;!--exclusion&amp;gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Can you remove this entry (rather than commenting it out)?&lt;/p&gt;</comment>
                            <comment id="15139086" author="githubbot" created="Tue, 9 Feb 2016 15:44:42 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#discussion_r52325053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#discussion_r52325053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-shaded-hadoop/flink-shaded-hadoop1/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -68,10 +68,10 @@ under the License.&lt;br/&gt;
     					&amp;lt;groupId&amp;gt;org.mortbay.jetty&amp;lt;/groupId&amp;gt;&lt;br/&gt;
     					&amp;lt;artifactId&amp;gt;jsp-2.1&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
     				&amp;lt;/exclusion&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;exclusion&amp;gt;&lt;br/&gt;
    +				&amp;lt;!--exclusion&amp;gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Can you remove this entry (rather than commenting it out)?&lt;/p&gt;</comment>
                            <comment id="15139089" author="githubbot" created="Tue, 9 Feb 2016 15:45:45 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#issuecomment-181920795&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#issuecomment-181920795&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think we can merge this, with the changes suggested in the inline comments...&lt;/p&gt;
</comment>
                            <comment id="15139108" author="githubbot" created="Tue, 9 Feb 2016 15:59:22 +0000"  >&lt;p&gt;Github user abhishekagarwal87 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#discussion_r52327591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#discussion_r52327591&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-shaded-hadoop/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -111,6 +111,7 @@ under the License.&lt;br/&gt;
     									&amp;lt;include&amp;gt;io.netty:netty:*&amp;lt;/include&amp;gt;&lt;br/&gt;
     									&amp;lt;include&amp;gt;org.apache.curator:*&amp;lt;/include&amp;gt;&lt;br/&gt;
     									&amp;lt;include&amp;gt;org.apache.hadoop:*&amp;lt;/include&amp;gt;&lt;br/&gt;
    +									&amp;lt;include&amp;gt;org.mortbay.jetty:*&amp;lt;/include&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Hadoop classes are being included in the fat jar but are not being hidden. That leads to the error scenario, this PR intends to solve. &lt;/p&gt;</comment>
                            <comment id="15139114" author="githubbot" created="Tue, 9 Feb 2016 16:06:23 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#discussion_r52328751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#discussion_r52328751&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-shaded-hadoop/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -111,6 +111,7 @@ under the License.&lt;br/&gt;
     									&amp;lt;include&amp;gt;io.netty:netty:*&amp;lt;/include&amp;gt;&lt;br/&gt;
     									&amp;lt;include&amp;gt;org.apache.curator:*&amp;lt;/include&amp;gt;&lt;br/&gt;
     									&amp;lt;include&amp;gt;org.apache.hadoop:*&amp;lt;/include&amp;gt;&lt;br/&gt;
    +									&amp;lt;include&amp;gt;org.mortbay.jetty:*&amp;lt;/include&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This PR does not change that the classes are not hidden. It only puts them into the prepared Hadoop dependency for Flink (which later goes into the Flink fat jar).&lt;/p&gt;</comment>
                            <comment id="15139131" author="githubbot" created="Tue, 9 Feb 2016 16:16:07 +0000"  >&lt;p&gt;Github user abhishekagarwal87 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#discussion_r52330359&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#discussion_r52330359&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-shaded-hadoop/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -111,6 +111,7 @@ under the License.&lt;br/&gt;
     									&amp;lt;include&amp;gt;io.netty:netty:*&amp;lt;/include&amp;gt;&lt;br/&gt;
     									&amp;lt;include&amp;gt;org.apache.curator:*&amp;lt;/include&amp;gt;&lt;br/&gt;
     									&amp;lt;include&amp;gt;org.apache.hadoop:*&amp;lt;/include&amp;gt;&lt;br/&gt;
    +									&amp;lt;include&amp;gt;org.mortbay.jetty:*&amp;lt;/include&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    It is a point solution only for webhdfs API. In code path of webhdfs API, hadoop classes call jetty-util classes. Since jetty-utils classes are not available in &quot;flink class loader&quot;, call fails. Even if I pack jetty-util classes in my application jar, call still fails since application jar is in &quot;different classloader&quot;. There are two ways to solve -&lt;br/&gt;
    1. Relocate hadoop classes in flink fat jar. Now the webhdfs call will go through hadoop classes packed in application jar, and not the flink jar.&lt;br/&gt;
    2. Include jetty-util classes in flink fat jar. This is what I am doing in this PR. &lt;/p&gt;

&lt;p&gt;    Hope I have clarified the problem&lt;/p&gt;</comment>
                            <comment id="15139132" author="githubbot" created="Tue, 9 Feb 2016 16:16:11 +0000"  >&lt;p&gt;Github user abhishekagarwal87 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#discussion_r52330385&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#discussion_r52330385&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-shaded-hadoop/flink-shaded-hadoop2/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -184,10 +184,10 @@ under the License.&lt;br/&gt;
     					&amp;lt;groupId&amp;gt;org.mortbay.jetty&amp;lt;/groupId&amp;gt;&lt;br/&gt;
     					&amp;lt;artifactId&amp;gt;jsp-2.1&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
     				&amp;lt;/exclusion&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;exclusion&amp;gt;&lt;br/&gt;
    +				&amp;lt;!--exclusion&amp;gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    will do&lt;/p&gt;</comment>
                            <comment id="15139192" author="githubbot" created="Tue, 9 Feb 2016 16:51:22 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#discussion_r52336491&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#discussion_r52336491&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-shaded-hadoop/pom.xml &amp;#8212;&lt;br/&gt;
    @@ -111,6 +111,7 @@ under the License.&lt;br/&gt;
     									&amp;lt;include&amp;gt;io.netty:netty:*&amp;lt;/include&amp;gt;&lt;br/&gt;
     									&amp;lt;include&amp;gt;org.apache.curator:*&amp;lt;/include&amp;gt;&lt;br/&gt;
     									&amp;lt;include&amp;gt;org.apache.hadoop:*&amp;lt;/include&amp;gt;&lt;br/&gt;
    +									&amp;lt;include&amp;gt;org.mortbay.jetty:*&amp;lt;/include&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    The `jetty-util` will actually be included in the Flink fat jar without this line. This line simply adds the `jetty-util` jar in addition into the `flink-shaded-hadoop1.jar` which is an intermediate artifact, but also deployed to maven. I would like to keep the dependency out of the intermediate artifact.&lt;/p&gt;</comment>
                            <comment id="15142626" author="githubbot" created="Thu, 11 Feb 2016 11:42:31 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543#issuecomment-182821560&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543#issuecomment-182821560&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Adjusting and merging this...&lt;/p&gt;</comment>
                            <comment id="15143497" author="githubbot" created="Thu, 11 Feb 2016 21:01:48 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1543&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1543&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15143498" author="stephanewen" created="Thu, 11 Feb 2016 21:02:35 +0000"  >&lt;p&gt;Fixed via 82c7383a67a8349d05dc98780667b3a47ab3cc54&lt;/p&gt;

&lt;p&gt;Thank you for the contribution!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rt5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>