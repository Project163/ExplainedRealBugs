<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:25:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4932] Don&apos;t let ExecutionGraph fail when in state Restarting</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4932</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When in state &lt;tt&gt;RESTARTING&lt;/tt&gt; it is possible to fail the &lt;tt&gt;ExecutionGraph&lt;/tt&gt;. This should not be possible, since in state &lt;tt&gt;RESTARTING&lt;/tt&gt; there should be no action performed which can fail the &lt;tt&gt;ExecutionGraph&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015393">FLINK-4932</key>
            <summary>Don&apos;t let ExecutionGraph fail when in state Restarting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 12:01:21 +0000</created>
                <updated>Tue, 1 Nov 2016 13:08:26 +0000</updated>
                            <resolved>Mon, 31 Oct 2016 18:26:48 +0000</resolved>
                                    <version>1.1.4</version>
                    <version>1.2.0</version>
                                    <fixVersion>1.1.4</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15614981" author="githubbot" created="Fri, 28 Oct 2016 10:04:48 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2710&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2710&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4932&quot; title=&quot;Don&amp;#39;t let ExecutionGraph fail when in state Restarting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4932&quot;&gt;&lt;del&gt;FLINK-4932&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;exec graph&amp;#93;&lt;/span&gt; Failing in state RESTARTING only fails the EG if no more restarts are possible&lt;/p&gt;

&lt;p&gt;    If in state RESTARTING a failure occurs (`ExecutionGraph.fail` is called), then a new restart attempt is started. Only if the restart strategy no longer allows further restarts or if the thrown exception is of type `SuppressRestartsException` a job can go from RESTARTING into FAILED.&lt;/p&gt;

&lt;p&gt;    @StephanEwen would be great if you could review this PR.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixRestartingState&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2710.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2710.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2710&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9d96a799ee4e0f6b77cf5ae97d270021242a5462&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-10-27T16:32:08Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4932&quot; title=&quot;Don&amp;#39;t let ExecutionGraph fail when in state Restarting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4932&quot;&gt;&lt;del&gt;FLINK-4932&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;exec graph&amp;#93;&lt;/span&gt; Failing in state RESTARTING only fails the EG if no more restarts are possible&lt;/p&gt;

&lt;p&gt;    If in state RESTARTING a failure occurs, then a new restart attempt is started. Only if the&lt;br/&gt;
    restart strategy no longer allows further restarts or if the thrown exception is of type&lt;br/&gt;
    SuppressRestartsException a job can go from RESTARTING into FAILED.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15614985" author="githubbot" created="Fri, 28 Oct 2016 10:06:21 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2711&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;backport&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4932&quot; title=&quot;Don&amp;#39;t let ExecutionGraph fail when in state Restarting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4932&quot;&gt;&lt;del&gt;FLINK-4932&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;exec graph&amp;#93;&lt;/span&gt; Failing in state RESTARTING only fails the EG if no more restarts are possible&lt;/p&gt;

&lt;p&gt;    This PR is a backport of #2710 for the release-1.1 branch.&lt;/p&gt;

&lt;p&gt;    If in state RESTARTING a failure occurs (`ExecutionGraph.fail` is called), then a new restart attempt is started. Only if the restart strategy no longer allows further restarts or if the thrown exception is of type SuppressRestartsException a job can go from RESTARTING into FAILED.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; backportFixRestartingState&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2711.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2711.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2711&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 920dbe6ac5969c63d9725f0999c3cd1adfa70fad&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-10-27T16:32:08Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4932&quot; title=&quot;Don&amp;#39;t let ExecutionGraph fail when in state Restarting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4932&quot;&gt;&lt;del&gt;FLINK-4932&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;exec graph&amp;#93;&lt;/span&gt; Failing in state RESTARTING only fails the EG if no more restarts are possible&lt;/p&gt;

&lt;p&gt;    If in state RESTARTING a failure occurs, then a new restart attempt is started. Only if the&lt;br/&gt;
    restart strategy no longer allows further restarts or if the thrown exception is of type&lt;br/&gt;
    SuppressRestartsException a job can go from RESTARTING into FAILED.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15615441" author="githubbot" created="Fri, 28 Oct 2016 13:40:36 +0000"  >&lt;p&gt;Github user uce commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2711&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Code changes and updated figure look good to me. +1 to merge after Travis passes. It makes sense that for instance a job with infinite restarts will only be failed if the job is explicitly suspended or forced to suppress restarts. I was curious how you noticed this issue? Did a user run into this? &lt;/p&gt;</comment>
                            <comment id="15621555" author="githubbot" created="Mon, 31 Oct 2016 08:00:30 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2711&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @uce. @StephanEwen actually discovered this problem. The problem was related to #2700. When the scheduleOrUpdateConsumers call was triggered when in state restarting due to a late rpc, it would fail the complete `ExecutionGraph`, because it could not find the respective `Execution`.&lt;/p&gt;

&lt;p&gt;    Will rebase the PR, because release-1.1 contained a problem which prevented it from building.&lt;/p&gt;</comment>
                            <comment id="15622290" author="githubbot" created="Mon, 31 Oct 2016 14:21:53 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2710&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2710&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good fix! Merging this...&lt;/p&gt;</comment>
                            <comment id="15622304" author="githubbot" created="Mon, 31 Oct 2016 14:27:01 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2711&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the fix!&lt;br/&gt;
    Looks good, merging this...&lt;/p&gt;</comment>
                            <comment id="15622928" author="githubbot" created="Mon, 31 Oct 2016 18:18:27 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2710&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2710&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15622951" author="stephanewen" created="Mon, 31 Oct 2016 18:26:49 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;1.2.0 via 18507de3c068795c93c5c689388a22857f2f817c&lt;/li&gt;
	&lt;li&gt;1.1.4 via ac82e3d05e895f74ecf41da489068a2997415d3d&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15625389" author="githubbot" created="Tue, 1 Nov 2016 13:08:25 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2711&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Closing this because it has been merged into the release 1.1 branch.&lt;/p&gt;</comment>
                            <comment id="15625390" author="githubbot" created="Tue, 1 Nov 2016 13:08:26 +0000"  >&lt;p&gt;Github user tillrohrmann closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2711&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35ey7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>