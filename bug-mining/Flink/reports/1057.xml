<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:24:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3675] YARN ship folder incosistent behavior</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3675</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;http://apache-flink-user-mailing-list-archive.2336050.n4.nabble.com/Flink-and-YARN-ship-folder-td5458.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;some discussion on the user mailing list&lt;/a&gt; it came up that the &lt;tt&gt;flink/lib&lt;/tt&gt; folder is always supposed to be shipped to the YARN cluster so that all the nodes have access to its contents.&lt;/p&gt;

&lt;p&gt;Currently however, the Flink long-running YARN session actually ships the folder because it&apos;s explicitly specified in the &lt;tt&gt;yarn-session.sh&lt;/tt&gt; script, while running a single job on YARN does not automatically ship it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12954283">FLINK-3675</key>
            <summary>YARN ship folder incosistent behavior</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="stefanobaghino">Stefano Baghino</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Mar 2016 13:23:36 +0000</created>
                <updated>Mon, 19 Dec 2016 12:47:01 +0000</updated>
                            <resolved>Fri, 1 Jul 2016 13:28:09 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15350951" author="mxm" created="Mon, 27 Jun 2016 13:03:16 +0000"  >&lt;p&gt;Do we want 1) to ship the /lib folder even if the user specifies a ship folder manually (via `-yt`)? Or do we want 2) to overwrite the default lib folder with the user location (as it is now for &lt;tt&gt;yarn-session.sh&lt;/tt&gt;)?&lt;/p&gt;</comment>
                            <comment id="15350953" author="mxm" created="Mon, 27 Jun 2016 13:04:37 +0000"  >&lt;p&gt;Option 2 is easiest but might be unexpected to the user. I&apos;d rather choose option 1.&lt;/p&gt;</comment>
                            <comment id="15350970" author="stefanobaghino" created="Mon, 27 Jun 2016 13:16:47 +0000"  >&lt;p&gt;The &lt;tt&gt;lib&lt;/tt&gt; folder includes important JARs, like the Flink assembly and the logging libraries, I would make optional folders to add up to the default one, so that this (or these) can be used to ship additional libraries while the default ones are shipped by default.&lt;/p&gt;</comment>
                            <comment id="15350974" author="mxm" created="Mon, 27 Jun 2016 13:20:09 +0000"  >&lt;p&gt;So that would be option 2 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Actually, the Flink assembly (fat jar) is always shipped, regardless of the ship files specified.&lt;/p&gt;</comment>
                            <comment id="15350992" author="stefanobaghino" created="Mon, 27 Jun 2016 13:33:43 +0000"  >&lt;p&gt;I must have misread something, I thought adding shipping folders while also shipping &lt;tt&gt;lib&lt;/tt&gt; was option 1. However, that was the behavior I was suggesting. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks for specifying that the Flink assembly is always shipped, I thought it had to be included in the &lt;tt&gt;lib&lt;/tt&gt; folder for it to be found.&lt;/p&gt;</comment>
                            <comment id="15351013" author="mxm" created="Mon, 27 Jun 2016 13:46:07 +0000"  >&lt;p&gt;Woops. Not enough coffee today &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Yes, I meant option 1!&lt;/p&gt;

&lt;p&gt;The Flink assembly has to be in the /lib folder (or specified via &lt;tt&gt;-yj&lt;/tt&gt;) but it is still shipped even if the lib folder is not shipped. Otherwise, we wouldn&apos;t be able to run any Flink clusters using &lt;tt&gt;./flink -m yarn-cluster&lt;/tt&gt; because the /lib folder is currently not shipped there.&lt;/p&gt;</comment>
                            <comment id="15351055" author="stefanobaghino" created="Mon, 27 Jun 2016 14:00:38 +0000"  >&lt;p&gt;Of course, thanks for clarifying this to me. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15355580" author="githubbot" created="Wed, 29 Jun 2016 18:30:24 +0000"  >&lt;p&gt;GitHub user mxm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2187&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2187&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3675&quot; title=&quot;YARN ship folder incosistent behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3675&quot;&gt;&lt;del&gt;FLINK-3675&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;yarn&amp;#93;&lt;/span&gt; improvements to library shipping&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;always ship the lib folder&lt;/li&gt;
	&lt;li&gt;properly setup the classpath from the supplied ship files&lt;/li&gt;
	&lt;li&gt;cleanup deploy() method of YarnClusterDescriptor&lt;/li&gt;
	&lt;li&gt;add test case&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mxm/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mxm/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3675&quot; title=&quot;YARN ship folder incosistent behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3675&quot;&gt;&lt;del&gt;FLINK-3675&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2187.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2187.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2187&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1dbaa5a91ae8ae3f50ed26d4a51ec57bb28bc77e&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-06-27T13:13:56Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3675&quot; title=&quot;YARN ship folder incosistent behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3675&quot;&gt;&lt;del&gt;FLINK-3675&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;yarn&amp;#93;&lt;/span&gt; improvements to library shipping&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;always ship the lib folder&lt;/li&gt;
	&lt;li&gt;properly setup the classpath from the supplied ship files&lt;/li&gt;
	&lt;li&gt;cleanup deploy() method of YarnClusterDescriptor&lt;/li&gt;
	&lt;li&gt;add test case&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15356640" author="githubbot" created="Thu, 30 Jun 2016 06:59:00 +0000"  >&lt;p&gt;Github user stefanobaghino commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2187&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2187&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Awesome, thanks for addressing the issue&#160;@mxm! I noticed you added a couple of environment variables, could it make sense to document them?&lt;/p&gt;</comment>
                            <comment id="15356784" author="githubbot" created="Thu, 30 Jun 2016 09:08:35 +0000"  >&lt;p&gt;Github user mxm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2187&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2187&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I moved one existing environment variable `FLINK_CONF_DIR` to `ConfigConstants`. I added the `FLINK_LIB_DIR` environment variable to load a library folder (optional). I&apos;m not sure whether we should add them to the documentation since they are set by the bash scripts and shouldn&apos;t be exposed to the user.&lt;/p&gt;</comment>
                            <comment id="15356791" author="githubbot" created="Thu, 30 Jun 2016 09:14:57 +0000"  >&lt;p&gt;Github user mxm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2187&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2187&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    All builds are passing in my branch: &lt;a href=&quot;https://travis-ci.org/mxm/flink/builds/141155293&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/mxm/flink/builds/141155293&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    CC @rmetzger &lt;/p&gt;</comment>
                            <comment id="15356849" author="githubbot" created="Thu, 30 Jun 2016 10:05:29 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2187&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2187&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Change looks good! +1 to merge&lt;/p&gt;</comment>
                            <comment id="15358952" author="githubbot" created="Fri, 1 Jul 2016 13:22:53 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2187&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2187&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15358967" author="mxm" created="Fri, 1 Jul 2016 13:28:10 +0000"  >&lt;p&gt;Fixed via 0483ba583c7790d13b8035c2916318a2b58c67d6&lt;/p&gt;</comment>
                            <comment id="15359399" author="mxm" created="Fri, 1 Jul 2016 18:12:49 +0000"  >&lt;p&gt;Additional fix with 16cdb61225d78c822566e33013162fa3e40fa279&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vcbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>