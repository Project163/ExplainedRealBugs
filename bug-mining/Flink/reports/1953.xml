<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:29:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-7700] State merging in RocksDB backend leaves old state</title>
                <link>https://issues.apache.org/jira/browse/FLINK-7700</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;tt&gt;RocksDBAggregatingState.mergeNamespaces(...)&lt;/tt&gt;, &lt;tt&gt;RocksDBReducingState.mergeNamespaces(...)&lt;/tt&gt;, and &lt;tt&gt;RocksDBListState.mergeNamespaces(...)&lt;/tt&gt; don&apos;t remove state from the old location when merging. This means that merged state will never be cleaned up and will accumulate.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13105384">FLINK-7700</key>
            <summary>State merging in RocksDB backend leaves old state</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="aljoscha">Aljoscha Krettek</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Sep 2017 11:06:23 +0000</created>
                <updated>Mon, 12 Mar 2018 15:23:44 +0000</updated>
                            <resolved>Mon, 12 Mar 2018 15:23:44 +0000</resolved>
                                    <version>1.3.2</version>
                    <version>1.4.0</version>
                                    <fixVersion>1.3.4</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Runtime / State Backends</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16182394" author="githubbot" created="Wed, 27 Sep 2017 11:16:55 +0000"  >&lt;p&gt;GitHub user aljoscha opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4731&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4731&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7700&quot; title=&quot;State merging in RocksDB backend leaves old state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7700&quot;&gt;&lt;del&gt;FLINK-7700&lt;/del&gt;&lt;/a&gt; Fix RocksDB state merging&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    See title&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This fixes state merging in the respective classes and also consolidates the different state tests into `StateBackendTestBase` (this helped discover the bug in the first place).&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    See newly added tests that also verify that the backend is empty at the end of the test.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): no&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: no&lt;/li&gt;
	&lt;li&gt;The serializers: no&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): yes, when merging windows&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: no&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? no&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    R: @StefanRRichter could you please review this?&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/aljoscha/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aljoscha/flink&lt;/a&gt; consolidate-state-tests&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4731.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4731.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4731&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 910848fe2f7ada07283414adc4cbd7d86c3d1c2c&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-11-04T09:17:55Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5619&quot; title=&quot;Consolidate State tests &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5619&quot;&gt;&lt;del&gt;FLINK-5619&lt;/del&gt;&lt;/a&gt; Add numStateEntries() method for all keyed backends&lt;/p&gt;

&lt;p&gt;    This also adds a test for this in StateBackendTestBase&lt;/p&gt;

&lt;p&gt;commit 6a29449b5a5bf71dc835d6640890a42951b7b75c&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T09:37:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7700&quot; title=&quot;State merging in RocksDB backend leaves old state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7700&quot;&gt;&lt;del&gt;FLINK-7700&lt;/del&gt;&lt;/a&gt; Fix RocksDB ListState merging&lt;/p&gt;

&lt;p&gt;    Before, the merged state was not cleared.&lt;/p&gt;

&lt;p&gt;commit 1e80aeda0660249dfab9f2131781906ab3c23cbe&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T09:38:13Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5619&quot; title=&quot;Consolidate State tests &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5619&quot;&gt;&lt;del&gt;FLINK-5619&lt;/del&gt;&lt;/a&gt; Consolidate ListState Tests in StateBackendTestBase&lt;/p&gt;

&lt;p&gt;commit a1b2d87218df739ecd3fed3981c59b5cc207fc5f&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T10:53:08Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7700&quot; title=&quot;State merging in RocksDB backend leaves old state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7700&quot;&gt;&lt;del&gt;FLINK-7700&lt;/del&gt;&lt;/a&gt; Fix RocksDB ReducingState merging&lt;/p&gt;

&lt;p&gt;    Before, the merged state was not cleared.&lt;/p&gt;

&lt;p&gt;commit b0715950d18f7139802597b2a9b0b2b8ec728910&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T10:54:19Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5619&quot; title=&quot;Consolidate State tests &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5619&quot;&gt;&lt;del&gt;FLINK-5619&lt;/del&gt;&lt;/a&gt; Consolidate ReducingState Tests in StateBackendTestBase&lt;/p&gt;

&lt;p&gt;commit f82994af15620bdb5239d44c721aa20b95771639&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T11:01:55Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7700&quot; title=&quot;State merging in RocksDB backend leaves old state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7700&quot;&gt;&lt;del&gt;FLINK-7700&lt;/del&gt;&lt;/a&gt; Fix RocksDB ReducingState merging&lt;/p&gt;

&lt;p&gt;    Before, the merged state was not cleared.&lt;/p&gt;

&lt;p&gt;commit f9c361ef16538b60446af9dc010d5cf4d5ab8fea&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T11:02:57Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5619&quot; title=&quot;Consolidate State tests &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5619&quot;&gt;&lt;del&gt;FLINK-5619&lt;/del&gt;&lt;/a&gt; Consolidate AggregatingState Tests in StateBackendTestBase&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16182550" author="githubbot" created="Wed, 27 Sep 2017 13:24:26 +0000"  >&lt;p&gt;Github user StefanRRichter commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4731#discussion_r141340929&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4731#discussion_r141340929&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-contrib/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java &amp;#8212;&lt;br/&gt;
    @@ -1978,4 +1979,25 @@ public File getInstanceBasePath() {&lt;br/&gt;
     	public boolean supportsAsynchronousSnapshots() &lt;/p&gt;
{
     		return true;
     	}
&lt;p&gt;    +&lt;br/&gt;
    +	@VisibleForTesting&lt;br/&gt;
    +	@SuppressWarnings(&quot;unchecked&quot;)&lt;br/&gt;
    +	@Override&lt;br/&gt;
    +	public int numStateEntries() {&lt;br/&gt;
    +		int count = 0;&lt;br/&gt;
    +&lt;br/&gt;
    +		for (Tuple2&amp;lt;ColumnFamilyHandle, RegisteredKeyedBackendStateMetaInfo&amp;lt;?, ?&amp;gt;&amp;gt; column : kvStateInformation.values()) {&lt;br/&gt;
    +			RocksIterator rocksIterator = db.newIterator(column.f0);&lt;br/&gt;
    +			rocksIterator.seekToFirst();&lt;br/&gt;
    +&lt;br/&gt;
    +			while (rocksIterator.isValid()) &lt;/p&gt;
{
    +				count++;
    +				rocksIterator.next();
    +			}
&lt;p&gt;    +			rocksIterator.close();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Could use try-with-resource here.&lt;/p&gt;</comment>
                            <comment id="16184276" author="githubbot" created="Thu, 28 Sep 2017 14:47:23 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4731#discussion_r141639769&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4731#discussion_r141639769&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-contrib/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java &amp;#8212;&lt;br/&gt;
    @@ -1978,4 +1979,25 @@ public File getInstanceBasePath() {&lt;br/&gt;
     	public boolean supportsAsynchronousSnapshots() &lt;/p&gt;
{
     		return true;
     	}
&lt;p&gt;    +&lt;br/&gt;
    +	@VisibleForTesting&lt;br/&gt;
    +	@SuppressWarnings(&quot;unchecked&quot;)&lt;br/&gt;
    +	@Override&lt;br/&gt;
    +	public int numStateEntries() {&lt;br/&gt;
    +		int count = 0;&lt;br/&gt;
    +&lt;br/&gt;
    +		for (Tuple2&amp;lt;ColumnFamilyHandle, RegisteredKeyedBackendStateMetaInfo&amp;lt;?, ?&amp;gt;&amp;gt; column : kvStateInformation.values()) {&lt;br/&gt;
    +			RocksIterator rocksIterator = db.newIterator(column.f0);&lt;br/&gt;
    +			rocksIterator.seekToFirst();&lt;br/&gt;
    +&lt;br/&gt;
    +			while (rocksIterator.isValid()) &lt;/p&gt;
{
    +				count++;
    +				rocksIterator.next();
    +			}
&lt;p&gt;    +			rocksIterator.close();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    changing&lt;/p&gt;
</comment>
                            <comment id="16184279" author="githubbot" created="Thu, 28 Sep 2017 14:47:49 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4731&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4731&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think it would be good to have an abstraction for that, yes.&lt;/p&gt;</comment>
                            <comment id="16185950" author="githubbot" created="Fri, 29 Sep 2017 15:06:37 +0000"  >&lt;p&gt;GitHub user aljoscha opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4752&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4752&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7700&quot; title=&quot;State merging in RocksDB backend leaves old state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7700&quot;&gt;&lt;del&gt;FLINK-7700&lt;/del&gt;&lt;/a&gt; Fix RocksDB state merging on release-1.3&lt;/p&gt;

&lt;p&gt;    This is only for running the tests, which I can&apos;t do on my own Travis since tests time out.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/aljoscha/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aljoscha/flink&lt;/a&gt; release-1.3&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4752.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4752.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4752&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 64858a7881d22fb665099e1b2cd8363e447ed572&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-11-04T09:17:55Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5619&quot; title=&quot;Consolidate State tests &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5619&quot;&gt;&lt;del&gt;FLINK-5619&lt;/del&gt;&lt;/a&gt; Add numStateEntries() method for all keyed backends&lt;/p&gt;

&lt;p&gt;    This also adds a test for this in StateBackendTestBase&lt;/p&gt;

&lt;p&gt;commit 31cd6db6a7d2f7d78aa05f6ff5fc82abbc79d042&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T09:37:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7700&quot; title=&quot;State merging in RocksDB backend leaves old state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7700&quot;&gt;&lt;del&gt;FLINK-7700&lt;/del&gt;&lt;/a&gt; Fix RocksDB ListState merging&lt;/p&gt;

&lt;p&gt;    Before, the merged state was not cleared.&lt;/p&gt;

&lt;p&gt;commit 5e3d49cc05591bf396bfcf9e578f8e30ce436114&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T09:38:13Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5619&quot; title=&quot;Consolidate State tests &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5619&quot;&gt;&lt;del&gt;FLINK-5619&lt;/del&gt;&lt;/a&gt; Consolidate ListState Tests in StateBackendTestBase&lt;/p&gt;

&lt;p&gt;commit e0bd8c060da01e5defe528964bf638868cbc13d5&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T10:53:08Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7700&quot; title=&quot;State merging in RocksDB backend leaves old state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7700&quot;&gt;&lt;del&gt;FLINK-7700&lt;/del&gt;&lt;/a&gt; Fix RocksDB ReducingState merging&lt;/p&gt;

&lt;p&gt;    Before, the merged state was not cleared.&lt;/p&gt;

&lt;p&gt;commit 0ffca863a4b189675d2f15ee61f9d20fe49e85f0&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T10:54:19Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5619&quot; title=&quot;Consolidate State tests &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5619&quot;&gt;&lt;del&gt;FLINK-5619&lt;/del&gt;&lt;/a&gt; Consolidate ReducingState Tests in StateBackendTestBase&lt;/p&gt;

&lt;p&gt;commit b0a7c091856aa2a99715a9fddcc801f660414cfd&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T11:01:55Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7700&quot; title=&quot;State merging in RocksDB backend leaves old state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7700&quot;&gt;&lt;del&gt;FLINK-7700&lt;/del&gt;&lt;/a&gt; Fix RocksDB AggregatingState merging&lt;/p&gt;

&lt;p&gt;    Before, the merged state was not cleared.&lt;/p&gt;

&lt;p&gt;commit 835de46b5f63ffeee8e89a89d3f2e6a9af06efc4&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-27T11:02:57Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5619&quot; title=&quot;Consolidate State tests &quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5619&quot;&gt;&lt;del&gt;FLINK-5619&lt;/del&gt;&lt;/a&gt; Consolidate AggregatingState Tests in StateBackendTestBase&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16187749" author="githubbot" created="Mon, 2 Oct 2017 08:19:26 +0000"  >&lt;p&gt;Github user aljoscha closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4752&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4752&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16187753" author="aljoscha" created="Mon, 2 Oct 2017 08:22:41 +0000"  >&lt;p&gt;Fixed on release-1.3 in&lt;br/&gt;
31cd6db6a7d2f7d78aa05f6ff5fc82abbc79d042&lt;br/&gt;
e0bd8c060da01e5defe528964bf638868cbc13d5&lt;br/&gt;
b0a7c091856aa2a99715a9fddcc801f660414cfd&lt;/p&gt;

&lt;p&gt;Fixed on master in&lt;br/&gt;
93456ff7c51a7184c385ce0326a8e190ecc9348b&lt;br/&gt;
c6918564f7c40730791b9d35d3703e3ba9fee385&lt;br/&gt;
ce0f83e20ace522441b293f8bd82062d1adeee0e&lt;/p&gt;</comment>
                            <comment id="16187754" author="githubbot" created="Mon, 2 Oct 2017 08:22:56 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4731&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4731&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merged, Thanks for the reviews!&lt;/p&gt;</comment>
                            <comment id="16187755" author="githubbot" created="Mon, 2 Oct 2017 08:22:56 +0000"  >&lt;p&gt;Github user aljoscha closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4731&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4731&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3klov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>