<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:35:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10357] Streaming File Sink end-to-end test failed with mismatch</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10357</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The &lt;tt&gt;Streaming File Sink end-to-end test&lt;/tt&gt; failed on an Amazon instance with the following result: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FAIL File Streaming Sink: Output hash mismatch.  Got f2000bbc18a889dc8ec4b6f2b47bf9f5, expected 6727342fdd3aae2129e61fc8f433fb6f.
head hexdump of actual:
0000000   0  \n   1  \n   2  \n   3  \n   4  \n   5  \n   6  \n   7  \n
0000010   8  \n   9  \n
0000014
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13185546">FLINK-10357</key>
            <summary>Streaming File Sink end-to-end test failed with mismatch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gjy">Gary Yao</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Mon, 17 Sep 2018 14:55:20 +0000</created>
                <updated>Sun, 4 Nov 2018 16:49:41 +0000</updated>
                            <resolved>Sun, 4 Nov 2018 16:49:41 +0000</resolved>
                                    <version>1.6.0</version>
                    <version>1.7.0</version>
                                    <fixVersion>1.6.3</fixVersion>
                    <fixVersion>1.7.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16619186" author="till.rohrmann" created="Tue, 18 Sep 2018 14:25:51 +0000"  >&lt;p&gt;The test failed again because the logs contained some exceptions. I think we need to harden this test a bit more. &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12940235/12940235_flink-streaming-file-sink-logs.tgz&quot; title=&quot;flink-streaming-file-sink-logs.tgz attached to FLINK-10357&quot;&gt;flink-streaming-file-sink-logs.tgz&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="16660719" author="gjy" created="Tue, 23 Oct 2018 14:16:15 +0000"  >&lt;p&gt;Here are some problems with the tests that I found:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;We rely on checkpoint statistics to decide when to check the number of files. However, side effects are triggered asynchronously, i.e., it can happen that statistics are updated before side effects are triggered. The hashes do not match because some data is not finalized in time.&lt;/li&gt;
	&lt;li&gt;We will likely have to exclude additional exceptions from &lt;tt&gt;check_logs_for_exceptions&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;Testing job uses fixed delay restart with 3 restart attempts. I suspect that sometimes this is not enough but I cannot yet explain why.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="16660734" author="githubbot" created="Tue, 23 Oct 2018 14:29:49 +0000"  >&lt;p&gt;GJL opened a new pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   &lt;b&gt;Previously, we relied on checkpoint statistics to decide when to re-check the number of files written by the sink under test. However, side effects are triggered asynchronously, i.e., it can happen that statistics are updated before side effects are triggered (rolling of files). This can lead to test failures due to hash mismatches. We now wait until the number of expected lines were written to the file system.&lt;/b&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;It is fairly obvious. Also see the commits.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This change added tests and can be verified as follows:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;I am changing a test. I ran the test, and it passes more often now.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (*&lt;b&gt;not applicable&lt;/b&gt;* / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16663907" author="githubbot" created="Thu, 25 Oct 2018 15:26:28 +0000"  >&lt;p&gt;azagrebin commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r228218936&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r228218936&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   any reason to have it differently from the same action below:&lt;br/&gt;
   ```&lt;br/&gt;
   number_of_values=$(get_complete_result | wc -l | tr -d &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;:space:&amp;#93;&lt;/span&gt;&apos;)&lt;br/&gt;
   ```&lt;br/&gt;
   in particular:&lt;br/&gt;
   `tail -1` vs `wc -l | tr -d &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;:space:&amp;#93;&lt;/span&gt;&apos;`&lt;br/&gt;
   `wc -l | tr -d &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;:space:&amp;#93;&lt;/span&gt;&apos;` should be more reliable&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16663908" author="githubbot" created="Thu, 25 Oct 2018 15:26:28 +0000"  >&lt;p&gt;azagrebin commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r228220548&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r228220548&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;br/&gt;
+    local previous_number_of_values=-1&lt;br/&gt;
+&lt;br/&gt;
+    while [[ ${number_of_values} -lt ${expected_number_of_values} ]]; do&lt;br/&gt;
+        if [[ ${seconds_elapsed} -ge ${polling_timeout} ]]; then&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   `seconds_elapsed  = system end - start time` &lt;br/&gt;
   would be more precise but probably does not matter here&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16663919" author="githubbot" created="Thu, 25 Oct 2018 15:36:11 +0000"  >&lt;p&gt;GJL commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r228225734&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r228225734&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Good catch. I have forgotten about it. `$(get_complete_result | tail -1)` is even wrong because we start at `0`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16663923" author="githubbot" created="Thu, 25 Oct 2018 15:38:19 +0000"  >&lt;p&gt;GJL commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r228226695&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r228226695&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;br/&gt;
+    local previous_number_of_values=-1&lt;br/&gt;
+&lt;br/&gt;
+    while [[ ${number_of_values} -lt ${expected_number_of_values} ]]; do&lt;br/&gt;
+        if [[ ${seconds_elapsed} -ge ${polling_timeout} ]]; then&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Using wall-clock time has other drawbacks, such as DST clock shifts.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16663928" author="githubbot" created="Thu, 25 Oct 2018 15:43:13 +0000"  >&lt;p&gt;azagrebin commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r228228728&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r228228728&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;br/&gt;
+    local previous_number_of_values=-1&lt;br/&gt;
+&lt;br/&gt;
+    while [[ ${number_of_values} -lt ${expected_number_of_values} ]]; do&lt;br/&gt;
+        if [[ ${seconds_elapsed} -ge ${polling_timeout} ]]; then&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   I meant unix epoch time in seconds:&lt;br/&gt;
   `date +%s`&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668338" author="githubbot" created="Tue, 30 Oct 2018 08:32:17 +0000"  >&lt;p&gt;GJL commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r229213214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r229213214&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;br/&gt;
+    local previous_number_of_values=-1&lt;br/&gt;
+&lt;br/&gt;
+    while [[ ${number_of_values} -lt ${expected_number_of_values} ]]; do&lt;br/&gt;
+        if [[ ${seconds_elapsed} -ge ${polling_timeout} ]]; then&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Sorry, I was mistaken; DST clock shifts are not a problem. However, changing the system time changes the value of `date +%s`, which can be problematic. It is unlikely that the system time is adjusted while the tests runs but not impossible. In the current solution we would only risk overcounting. Also, in our test suite this is a common pattern to measure elapsed time:&lt;br/&gt;
   &lt;a href=&quot;https://github.com/apache/flink/blob/f2b549fea8c831b60368796ac323109967b8062e/flink-end-to-end-tests/test-scripts/common.sh#L653-L660&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/f2b549fea8c831b60368796ac323109967b8062e/flink-end-to-end-tests/test-scripts/common.sh#L653-L660&lt;/a&gt;&lt;br/&gt;
   &lt;a href=&quot;https://github.com/apache/flink/blob/f2b549fea8c831b60368796ac323109967b8062e/flink-end-to-end-tests/test-scripts/test_queryable_state_restart_tm.sh#L146-L158&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/f2b549fea8c831b60368796ac323109967b8062e/flink-end-to-end-tests/test-scripts/test_queryable_state_restart_tm.sh#L146-L158&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   I&apos;ll leave it as it is.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668340" author="githubbot" created="Tue, 30 Oct 2018 08:32:41 +0000"  >&lt;p&gt;GJL commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r229213320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r229213320&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   I will just initialize `number_of_values` with `0`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668343" author="githubbot" created="Tue, 30 Oct 2018 08:33:40 +0000"  >&lt;p&gt;GJL commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r229213320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r229213320&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   I will just initialize `number_of_values` with `0`. The loop will run at least once, we we will see the output of `echo &quot;Number of produced values ${number_of_values}/${expected_number_of_values}&quot;`&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668344" author="githubbot" created="Tue, 30 Oct 2018 08:33:48 +0000"  >&lt;p&gt;GJL commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r229213320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r229213320&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   I will just initialize `number_of_values` with `0`. The loop will run at least once, we we will see the output of ```echo &quot;Number of produced values ${number_of_values}/${expected_number_of_values}&quot;```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668345" author="githubbot" created="Tue, 30 Oct 2018 08:33:56 +0000"  >&lt;p&gt;GJL commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r229213320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r229213320&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   I will just initialize `number_of_values` with `0`. The loop will run at least once, we we will see the output of &lt;/p&gt;

&lt;p&gt;   ```echo &quot;Number of produced values ${number_of_values}/${expected_number_of_values}&quot;```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668346" author="githubbot" created="Tue, 30 Oct 2018 08:34:05 +0000"  >&lt;p&gt;GJL commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r229213320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r229213320&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   I will just initialize `number_of_values` with `0`. The loop will run at least once, we we will see the output of &lt;br/&gt;
   ```&lt;br/&gt;
   echo &quot;Number of produced values ${number_of_values}/${expected_number_of_values}&quot;&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668375" author="githubbot" created="Tue, 30 Oct 2018 08:57:38 +0000"  >&lt;p&gt;GJL commented on issue #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#issuecomment-434220428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#issuecomment-434220428&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for reviewing @azagrebin. Merging as soon as build is green.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668376" author="githubbot" created="Tue, 30 Oct 2018 08:58:59 +0000"  >&lt;p&gt;azagrebin commented on a change in pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907#discussion_r229220979&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907#discussion_r229220979&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=$(get_complete_result | tail -1)&lt;br/&gt;
+    local previous_number_of_values=-1&lt;br/&gt;
+&lt;br/&gt;
+    while [[ ${number_of_values} -lt ${expected_number_of_values} ]]; do&lt;br/&gt;
+        if [[ ${seconds_elapsed} -ge ${polling_timeout} ]]; then&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Ok, I see your point. My concern was that although here it does not really matter because `get_complete_result` is very quick but in general counting number of lines can take longer, e.g. in coming test with s3 as output (#6957). Then timeout will be prolonged. I believe, we can discuss it in #6957.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668760" author="githubbot" created="Tue, 30 Oct 2018 14:12:13 +0000"  >&lt;p&gt;GJL closed pull request #6907: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10357&quot; title=&quot;Streaming File Sink end-to-end test failed with mismatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10357&quot;&gt;&lt;del&gt;FLINK-10357&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Improve StreamingFileSink E2E test stability.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6907&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh b/flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
index 8652d72bfe5..17389ad6f4e 100755&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test_streaming_file_sink.sh&lt;br/&gt;
@@ -23,11 +23,6 @@ TEST_PROGRAM_JAR=&quot;${END_TO_END_DIR}/flink-streaming-file-sink-test/target/Stream&lt;/p&gt;

&lt;p&gt; OUTPUT_PATH=&quot;$TEST_DATA_DIR/out&quot;&lt;/p&gt;

&lt;p&gt;-function get_num_output_files {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local num_files=$(find ${OUTPUT_PATH} -type f | wc -l)&lt;/li&gt;
	&lt;li&gt;echo ${num_files}&lt;br/&gt;
-}&lt;br/&gt;
-&lt;br/&gt;
 function wait_for_restart {&lt;br/&gt;
     local base_num_restarts=$1&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -45,47 +40,55 @@ function wait_for_restart {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; ###################################&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Wait a specific number of successful checkpoints&lt;/li&gt;
		&lt;li&gt;to have happened&lt;br/&gt;
+# Get all lines in part files and sort them numerically.&lt;br/&gt;
 #&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Globals:
	&lt;ol&gt;
		&lt;li&gt;None&lt;br/&gt;
+#   OUTPUT_PATH&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Arguments:
	&lt;ol&gt;
		&lt;li&gt;$1: the job id&lt;/li&gt;
		&lt;li&gt;$2: the number of expected successful checkpoints&lt;/li&gt;
		&lt;li&gt;$3: timeout in seconds&lt;br/&gt;
+#   None&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Returns:&lt;/li&gt;
	&lt;li&gt;None&lt;br/&gt;
 ###################################&lt;br/&gt;
-function wait_for_number_of_checkpoints {&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local expected_num_checkpoints=$2&lt;/li&gt;
	&lt;li&gt;local timeout=$3&lt;/li&gt;
	&lt;li&gt;local count=0&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;echo &quot;Starting to wait for completion of ${expected_num_checkpoints} checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;while (($(get_completed_number_of_checkpoints ${job_id}) &amp;lt; ${expected_num_checkpoints})); do&lt;br/&gt;
+function get_complete_result {&lt;br/&gt;
+    find &quot;${OUTPUT_PATH}&quot; &lt;del&gt;type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g&lt;br/&gt;
+}&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ ${count} -gt ${timeout} ]]; then&lt;/li&gt;
	&lt;li&gt;echo &quot;A timeout occurred waiting for successful checkpoints&quot;&lt;br/&gt;
+###################################&lt;br/&gt;
+# Waits until a number of values have been written within a timeout.&lt;br/&gt;
+# If the timeout expires, exit with return code 1.&lt;br/&gt;
+#&lt;br/&gt;
+# Globals:&lt;br/&gt;
+#   None&lt;br/&gt;
+# Arguments:&lt;br/&gt;
+#   $1: the number of expected values&lt;br/&gt;
+#   $2: timeout in seconds&lt;br/&gt;
+# Returns:&lt;br/&gt;
+#   None&lt;br/&gt;
+###################################&lt;br/&gt;
+function wait_for_complete_result {&lt;br/&gt;
+    local expected_number_of_values=$1&lt;br/&gt;
+    local polling_timeout=$2&lt;br/&gt;
+    local polling_interval=1&lt;br/&gt;
+    local seconds_elapsed=0&lt;br/&gt;
+&lt;br/&gt;
+    local number_of_values=0&lt;br/&gt;
+    local previous_number_of_values=-1&lt;br/&gt;
+&lt;br/&gt;
+    while [[ ${number_of_values} -lt ${expected_number_of_values} ]]; do&lt;br/&gt;
+        if [[ ${seconds_elapsed} -ge ${polling_timeout} ]]; then&lt;br/&gt;
+            echo &quot;Did not produce expected number of values within ${polling_timeout}s&quot;&lt;br/&gt;
             exit 1&lt;/li&gt;
	&lt;li&gt;else&lt;/li&gt;
	&lt;li&gt;((count+=2))&lt;br/&gt;
         fi&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;local current_num_checkpoints=$(get_completed_number_of_checkpoints ${job_id})&lt;/li&gt;
	&lt;li&gt;echo &quot;${current_num_checkpoints}/${expected_num_checkpoints} completed checkpoints&quot;&lt;/li&gt;
	&lt;li&gt;sleep 2&lt;/li&gt;
	&lt;li&gt;done&lt;br/&gt;
-}&lt;br/&gt;
-&lt;br/&gt;
-function get_completed_number_of_checkpoints {&lt;/li&gt;
	&lt;li&gt;local job_id=$1&lt;/li&gt;
	&lt;li&gt;local json_res=$(curl -s &lt;a href=&quot;http://localhost:8081/jobs/$&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8081/jobs/$&lt;/a&gt;{job_id}/checkpoints)&lt;br/&gt;
+        sleep ${polling_interval}&lt;br/&gt;
+        ((seconds_elapsed += ${polling_interval}))&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo ${json_res}    | # {&quot;counts&quot;:
{&quot;restored&quot;:0,&quot;total&quot;:25,&quot;in_progress&quot;:1,&quot;completed&quot;:24,&quot;failed&quot;:0}
&lt;p&gt; ...&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;cut -d &quot;:&quot; -f 6 | # 24,&quot;failed&quot;&lt;/li&gt;
	&lt;li&gt;sed &apos;s/,.*//&apos;     # 24&lt;br/&gt;
+        number_of_values=$(get_complete_result | wc -l | tr -d &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;:space:&amp;#93;&lt;/span&gt;&apos;)&lt;br/&gt;
+        if [[ ${previous_number_of_values} -ne ${number_of_values} ]]; then&lt;br/&gt;
+            echo &quot;Number of produced values ${number_of_values}/${expected_number_of_values}&quot;&lt;br/&gt;
+            previous_number_of_values=${number_of_values}&lt;br/&gt;
+        fi&lt;br/&gt;
+    done&lt;br/&gt;
 }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; start_cluster&lt;br/&gt;
@@ -126,25 +129,13 @@ echo &quot;Starting 2 TMs&quot;&lt;/p&gt;

&lt;p&gt; wait_for_restart 1&lt;/p&gt;

&lt;p&gt;-echo &quot;Waiting until no new files are being created&quot;&lt;br/&gt;
-OLD_COUNT=0&lt;br/&gt;
-NEW_COUNT=$(get_num_output_files)&lt;br/&gt;
-while ! [[ ${OLD_COUNT} -eq ${NEW_COUNT} ]]; do&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo &quot;More output files were created. previous=${OLD_COUNT} now=${NEW_COUNT}&quot;&lt;/li&gt;
	&lt;li&gt;# so long as there is data to process new files should be created for each checkpoint&lt;/li&gt;
	&lt;li&gt;CURRENT_NUM_CHECKPOINTS=$(get_completed_number_of_checkpoints ${JOB_ID})&lt;/li&gt;
	&lt;li&gt;EXPECTED_NUM_CHECKPOINTS=$((CURRENT_NUM_CHECKPOINTS + 1))&lt;/li&gt;
	&lt;li&gt;wait_for_number_of_checkpoints ${JOB_ID} ${EXPECTED_NUM_CHECKPOINTS} 60&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;OLD_COUNT=${NEW_COUNT}&lt;/li&gt;
	&lt;li&gt;NEW_COUNT=$(get_num_output_files)&lt;br/&gt;
-done&lt;br/&gt;
+echo &quot;Waiting until all values have been produced&quot;&lt;br/&gt;
+wait_for_complete_result 60000 300&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; cancel_job &quot;${JOB_ID}&quot;&lt;/p&gt;

&lt;p&gt; wait_job_terminal_state &quot;${JOB_ID}&quot; &quot;CANCELED&quot;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;get all lines in part files and sort them numerically&lt;br/&gt;
&lt;del&gt;find &quot;${OUTPUT_PATH}&quot; -type f &amp;#40; -iname &quot;part&lt;/del&gt;*&quot; &amp;#41; -exec cat {} + | sort -g &amp;gt; &quot;${TEST_DATA_DIR}/complete_result&quot;&lt;br/&gt;
+get_complete_result &amp;gt; &quot;${TEST_DATA_DIR}/complete_result&quot;&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; check_result_hash &quot;File Streaming Sink&quot; &quot;$TEST_DATA_DIR/complete_result&quot; &quot;6727342fdd3aae2129e61fc8f433fb6f&quot;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668762" author="gjy" created="Tue, 30 Oct 2018 14:14:00 +0000"  >&lt;p&gt;1.6: 0fbc8a367362c5865ca1c84740e4525837e325d9&lt;br/&gt;
1.7: fddc52de3d8ce5ecbbf012441cb71a7b75ba2595&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13193785">FLINK-10663</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13193853">FLINK-10668</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12939998" name="flink-logs.tgz" size="25064" author="trohrmann" created="Mon, 17 Sep 2018 14:54:58 +0000"/>
                            <attachment id="12940235" name="flink-streaming-file-sink-logs.tgz" size="27985" author="trohrmann" created="Tue, 18 Sep 2018 14:25:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y627:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>