<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:54:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-21740]  CliTableauResultViewTest.testCancelBatchResult fails</title>
                <link>https://issues.apache.org/jira/browse/FLINK-21740</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14500&amp;amp;view=logs&amp;amp;j=51fed01c-4eb0-5511-d479-ed5e8b9a7820&amp;amp;t=e5682198-9e22-5770-69f6-7551182edea8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14500&amp;amp;view=logs&amp;amp;j=51fed01c-4eb0-5511-d479-ed5e8b9a7820&amp;amp;t=e5682198-9e22-5770-69f6-7551182edea8&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR]   CliTableauResultViewTest.testCancelBatchResult:236 expected:&amp;lt;...-03-01 18:39:14.1 |
[|    &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; |  2147483647 |               (NULL) |              abcdefg |     1234567890 |     2020-03-01 18:39:14.12 |
|   &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; | -2147483648 |  9223372036854775807 |               (NULL) |    12345.06789 |    2020-03-01 18:39:14.123 |
Query terminated, received a total of 4 rows]
&amp;gt; but was:&amp;lt;...-03-01 18:39:14.1 |
[Query terminated, received a total of 1 rows
|    &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; |  2147483647 |               (NULL) |              abcdefg |     1234567890 |     2020-03-01 18:39:14.12 |
|   &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; | -2147483648 |  9223372036854775807 |               (NULL) |    12345.06789 |    2020-03-01 18:39:14.123 |]
&amp;gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13364012">FLINK-21740</key>
            <summary> CliTableauResultViewTest.testCancelBatchResult fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fsk119">Shengkai Fang</assignee>
                                    <reporter username="maguowei">Guowei Ma</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Fri, 12 Mar 2021 05:38:32 +0000</created>
                <updated>Mon, 15 Mar 2021 15:30:14 +0000</updated>
                            <resolved>Mon, 15 Mar 2021 15:30:14 +0000</resolved>
                                    <version>1.13.0</version>
                                    <fixVersion>1.13.0</fixVersion>
                                    <component>Table SQL / Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17300212" author="dawidwys" created="Fri, 12 Mar 2021 10:30:31 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfreyhe&quot; class=&quot;user-hover&quot; rel=&quot;godfreyhe&quot;&gt;godfreyhe&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17300361" author="jark" created="Fri, 12 Mar 2021 14:48:52 +0000"  >&lt;p&gt;It seems this is introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-18550&quot; title=&quot;use TableResult#collect to get select result for sql client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-18550&quot;&gt;&lt;del&gt;FLINK-18550&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="17300362" author="jark" created="Fri, 12 Mar 2021 14:49:31 +0000"  >&lt;p&gt;We can temporary disable this test if see more failed builds. &lt;/p&gt;</comment>
                            <comment id="17301367" author="fsk119" created="Mon, 15 Mar 2021 03:51:09 +0000"  >&lt;p&gt;Hi, all.&lt;/p&gt;

&lt;p&gt;Before explain the reason why test fails, I will just describe the logic in the test. There are 3 parts in the test: &lt;tt&gt;TestingExecutor&lt;/tt&gt;, &lt;tt&gt;Terminal&lt;/tt&gt; and &lt;tt&gt;CliTableauResultView&lt;/tt&gt;. The &lt;tt&gt;CliTableauResultView&lt;/tt&gt; will requst the data from the &lt;tt&gt;TestingExecutor&lt;/tt&gt; and send the data to &lt;tt&gt;Terminal&lt;/tt&gt; to print. When &lt;tt&gt;CliTableauResultView&lt;/tt&gt; request data from &lt;tt&gt;TestingExecutor&lt;/tt&gt;, the &lt;tt&gt;TestingExecutor&lt;/tt&gt; will memorize how many times &lt;tt&gt;CliTableauResultView&lt;/tt&gt; reads. For simplicty, we call this variable as &lt;tt&gt;numRetrieveResultChancesCalls.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;In the test, if &lt;tt&gt;numRetrieveResultChancesCalls&lt;/tt&gt; is larger than 0, we will cancel the &lt;tt&gt;CliTableauResultView&lt;/tt&gt;. It&apos;s possible &lt;tt&gt;CliTableauResultView&lt;/tt&gt; read the data from the &lt;tt&gt;TestingExecutor&lt;/tt&gt; but the terminal haven&apos;t printed.&lt;/p&gt;

&lt;p&gt;Therefore, we just need to modify the logic to wait the terminal finish its job and then cancel the job.&lt;/p&gt;

&lt;p&gt;I am willing to fix this problem. Please assign it to me.&lt;/p&gt;</comment>
                            <comment id="17301709" author="jark" created="Mon, 15 Mar 2021 15:30:14 +0000"  >&lt;p&gt;Fixed in master: f6d6fa5eff02dcba8c3d9c38a5632ded1886814e&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0okzs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>