<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:23:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3908] FieldParsers error state is not reset correctly to NONE</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3908</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;If during the parse of a csv there&apos;s a parse error (for example when in a integer column there are non-int values) the errorState is not reset correctly in the next parseField call. A simple fix would be to add as a first statement of the &lt;tt&gt;parseField()&lt;/tt&gt; function a call to &lt;tt&gt;setErrorState(ParseErrorState.NONE)&lt;/tt&gt; but it is something that should be handled better (by default) for every subclass of &lt;tt&gt;FieldParser&amp;lt;T&amp;gt;&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12969560">FLINK-3908</key>
            <summary>FieldParsers error state is not reset correctly to NONE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="f.pompermaier">Flavio Pompermaier</assignee>
                                    <reporter username="f.pompermaier">Flavio Pompermaier</reporter>
                        <labels>
                            <label>parser</label>
                    </labels>
                <created>Fri, 13 May 2016 15:17:40 +0000</created>
                <updated>Thu, 28 Feb 2019 13:20:55 +0000</updated>
                            <resolved>Thu, 16 Jun 2016 07:43:24 +0000</resolved>
                                    <version>1.0.2</version>
                                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15290824" author="f.pompermaier" created="Thu, 19 May 2016 09:52:21 +0000"  >&lt;p&gt;In order to make &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3901&quot; title=&quot;Create a RowCsvInputFormat to use as default CSV IF in Table API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3901&quot;&gt;&lt;del&gt;FLINK-3901&lt;/del&gt;&lt;/a&gt; work properly this issue should be merged&lt;/p&gt;</comment>
                            <comment id="15302011" author="githubbot" created="Thu, 26 May 2016 12:35:25 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007#issuecomment-221858427&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007#issuecomment-221858427&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for addressing this bug!&lt;/p&gt;

&lt;p&gt;    How about slightly changing the names of the methods:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The method that resets the error state and parses would be called `resetErrorStateAndParse(...)`. That would make it clear what happens.&lt;/li&gt;
	&lt;li&gt;The `parseFieldImpl(...)` could be kept as `parseField(...)`&lt;/li&gt;
	&lt;li&gt;The `GenericCsvInputCormat` would call the `resetErrorStateAndParse(...)` method.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Other than that, solution looks good!&lt;/p&gt;</comment>
                            <comment id="15302031" author="githubbot" created="Thu, 26 May 2016 12:55:21 +0000"  >&lt;p&gt;Github user fpompermaier commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007#issuecomment-221862570&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007#issuecomment-221862570&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi Stephan, thanks for reviewing this PR.&lt;br/&gt;
    These are my reasons to not apply your suggestions to my PR, and I&apos;d like to hear your opinion (anyone interested by this discussion is also welcome) before reissuing the PR with such modifications:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;rename `reset` to `resetErrorStateAndParse`: for almost all parsers this doesn&apos;t do anything more than those 2 operations but what if for a further parserImpl you need to do anything else before parsing?&lt;/li&gt;
	&lt;li&gt;resetting the error state is something that must always be done, by all parser implementations. The `parseFieldImpl` is a way to force this thing, otherwise you should rely on classes using such parser to remember this thing (as you suggested with &quot;GenericCsvInputCormat would call the resetErrorStateAndParse&quot;) or ensure that every parser call it at the very beginning of the `parseField()`.&lt;br/&gt;
    I&apos;m really concerned about this. In this way, my PR doesn&apos;t break the current APIs&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Does it makes sense?&lt;/p&gt;
</comment>
                            <comment id="15302081" author="githubbot" created="Thu, 26 May 2016 13:49:38 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007#issuecomment-221876052&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007#issuecomment-221876052&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think I meant it a bit differently than I guess you understood it.&lt;/p&gt;

&lt;p&gt;    It is basically the exact same implementation you have now, only with different method names.&lt;/p&gt;</comment>
                            <comment id="15302107" author="githubbot" created="Thu, 26 May 2016 14:04:43 +0000"  >&lt;p&gt;Github user fpompermaier commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007#issuecomment-221880071&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007#issuecomment-221880071&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I don&apos;t understand &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
    Assuming that `reset` could be renamed as `resetErrorStateAndParse`, the other 2 suggestions cannot be applied to my current implementation: if I want to rename `parseFieldImpl` to `parseField` I should overload somehow the method otherwise that&apos;s not possible because there&apos;s already an abstract method called parseField with the same sign..&lt;br/&gt;
    Wrt leaving the responsibility to reset the state of the parsers to the classes calling the parseField is quite dangerous IMHo (as you said in &quot;GenericCsvInputCormat would call the resetErrorStateAndParse&quot;). &lt;/p&gt;

&lt;p&gt;    Am I misunderstanding something?&lt;/p&gt;</comment>
                            <comment id="15310227" author="githubbot" created="Wed, 1 Jun 2016 12:34:28 +0000"  >&lt;p&gt;Github user fpompermaier commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    How should I proceed here?&lt;/p&gt;</comment>
                            <comment id="15310383" author="githubbot" created="Wed, 1 Jun 2016 14:27:01 +0000"  >&lt;p&gt;Github user zentol commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    i believe what Stephan meant was the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;keep the abstract parseField method in FieldParser&lt;/li&gt;
	&lt;li&gt;add a new method to FieldParser called resetErrorStateAndParse, which calls resetParserState and parseField&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This would require reverting all changes you made to specific parsers (like LongValueParser), and modifiying each call to parseField from outside the parser, like the GenericCsvInputFormat.&lt;/p&gt;</comment>
                            <comment id="15310486" author="githubbot" created="Wed, 1 Jun 2016 15:33:56 +0000"  >&lt;p&gt;Github user fpompermaier commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think that leaving the responsibility of calling resetErrorStateAndParse() to &quot;consumers&quot; of FieldParser is really a bad idea. Isn&apos;t safer to force its call using the strategy adopted in this PR (i.e. keep the real implementation in parseFieldImpl and use parseField to call resetErrorStateAndParse before it)?&lt;/p&gt;</comment>
                            <comment id="15310646" author="githubbot" created="Wed, 1 Jun 2016 17:01:54 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    then make parseField protected so users MUST call resetErrorStateAndParse.&lt;/p&gt;

&lt;p&gt;    there, problem solved.&lt;/p&gt;</comment>
                            <comment id="15313864" author="githubbot" created="Fri, 3 Jun 2016 08:43:48 +0000"  >&lt;p&gt;Github user fpompermaier commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Now it should be ok, according to your suggestions. I misunderstood what @StephanEwen was trying to say, thanks @zentol  for the clarification!&lt;br/&gt;
    Just another thing: the method GenericCsvInputFormat.checkAndCoSort() is never used in the code. Do you want to keep it?&lt;/p&gt;</comment>
                            <comment id="15313872" author="githubbot" created="Fri, 3 Jun 2016 08:56:34 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m not sure; in any case it should not be removed as part of this PR.&lt;/p&gt;

&lt;p&gt;    You can open a separate JIRA or ask on the mailing list.&lt;/p&gt;</comment>
                            <comment id="15332516" author="githubbot" created="Wed, 15 Jun 2016 20:43:13 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good to merge.&lt;/p&gt;</comment>
                            <comment id="15332545" author="githubbot" created="Wed, 15 Jun 2016 20:57:40 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merging&lt;/p&gt;</comment>
                            <comment id="15333299" author="githubbot" created="Thu, 16 Jun 2016 07:41:35 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2007&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15333300" author="fhueske" created="Thu, 16 Jun 2016 07:43:24 +0000"  >&lt;p&gt;Fixed with d8747978386c0aacce1dc2631e1c5602ec9b2a00&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12969069">FLINK-3901</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xxuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>