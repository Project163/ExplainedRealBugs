<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:35:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10166] Dependency problems when executing SQL query in sql-client</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10166</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When tried to run query:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select count(distinct name) from (Values (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;), (&lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;)) AS NameTable(name)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;in &lt;tt&gt;sql-client.sh&lt;/tt&gt; I got:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Could not execute SQL statement. Reason:
org.codehaus.commons.compiler.CompileException: Line 43, Column 10: Unknown variable or type &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.commons.codec.binary.Base64&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13179545">FLINK-10166</key>
            <summary>Dependency problems when executing SQL query in sql-client</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twalthr">Timo Walther</assignee>
                                    <reporter username="dwysakowicz">Dawid Wysakowicz</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 17 Aug 2018 09:44:16 +0000</created>
                <updated>Wed, 2 Oct 2019 17:43:58 +0000</updated>
                            <resolved>Wed, 31 Oct 2018 09:43:23 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.5.6</fixVersion>
                    <fixVersion>1.6.3</fixVersion>
                    <fixVersion>1.7.0</fixVersion>
                                    <component>Table SQL / API</component>
                    <component>Table SQL / Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16583794" author="dawidwys" created="Fri, 17 Aug 2018 11:19:04 +0000"  >&lt;p&gt;I found out it happens only for the hadoopless binary. For others the &lt;tt&gt;commons-codec&lt;/tt&gt; dependency is shipped with hadoop shaded uber jar.&lt;/p&gt;</comment>
                            <comment id="16585706" author="stephanewen" created="Mon, 20 Aug 2018 09:42:59 +0000"  >&lt;p&gt;Looks like an dependency that is used, but not declared (only implicitly inherited in some cases).&lt;/p&gt;

&lt;p&gt;To guard against that in the future, there is an enforcer rule to prevent referencing transitive dependencies: &lt;a href=&quot;https://maven.apache.org/enforcer/enforcer-rules/banTransitiveDependencies.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/enforcer/enforcer-rules/banTransitiveDependencies.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In this specific case, can we avoid using commons.codec and have a Base64 coder in Flink? Seems like a very small piece of functionality, and avoiding too many dependencies makes life easier for users of systems like Flink.&lt;/p&gt;</comment>
                            <comment id="16613136" author="dangdangdang" created="Thu, 13 Sep 2018 07:33:29 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt;, I think a more elegant way to solve this problem is to not relocate commons-codec. What do you think?&lt;/p&gt;</comment>
                            <comment id="16613151" author="twalthr" created="Thu, 13 Sep 2018 07:52:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dangdangdang&quot; class=&quot;user-hover&quot; rel=&quot;dangdangdang&quot;&gt;dangdangdang&lt;/a&gt; can you check where and how many time &lt;tt&gt;commons-codec&lt;/tt&gt; is used? I think we use much more than just base64 functionality. If it is not too much effort, we should try to get rid of this dependency. Otherwise we should relocate it to avoid dependency conflicts.&lt;/p&gt;</comment>
                            <comment id="16613318" author="dangdangdang" created="Thu, 13 Sep 2018 10:55:36 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt;. Well, not many times. Maybe we&#160;could add some hint in the log instead of just throwing a exception with message&#160;&quot;Table program cannot be compiled. This is a bug. Please file an issue.&quot;.&lt;/p&gt;</comment>
                            <comment id="16613326" author="twalthr" created="Thu, 13 Sep 2018 11:05:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dangdangdang&quot; class=&quot;user-hover&quot; rel=&quot;dangdangdang&quot;&gt;dangdangdang&lt;/a&gt;&#160;Throwing a hard&#160;exception is valid here. This is a bug in our dependency management that needs to be fixed.&lt;/p&gt;</comment>
                            <comment id="16653022" author="githubbot" created="Wed, 17 Oct 2018 06:14:56 +0000"  >&lt;p&gt;leanken opened a new pull request #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; skip relocation of commons-codes and commons-lang3 from flink-table&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   See. &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-10166&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;   Fix sqlClient *&lt;b&gt;org.apache.commons.codec.binary.Base64&lt;/b&gt;* classNotFound issue on hadoopless binary.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Diagnose&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   The Exception stacktrace is quite straight-forward.&lt;/p&gt;

&lt;p&gt;   ```&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Exception Message&lt;br/&gt;
   execute SQL statement. Reason:&lt;br/&gt;
   org.codehaus.commons.compiler.CompileException: Line 43, Column 10: Unknown variable or type &quot;org.apache.commons.codec.binary.Base64&quot;&lt;br/&gt;
   ```&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   As I mentioned above, this error only happens at hadoopless binary because the *&lt;b&gt;TaskManagerRunner&lt;/b&gt;* start without *&lt;b&gt;flink-shaded-hadoop2-uber-1.6.0.jar&lt;/b&gt;&lt;b&gt;, and as for the **flink-table&lt;/b&gt;* component has a shaded relocation on org.apache.commons prefix. so in this case, neither the TaskManagerRunner nor the FlinkUserJar supply valid class definition for *&lt;b&gt;org.apache.commons.codec.binary.Base64&lt;/b&gt;*&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   &amp;lt;!-- commons-codec, commons-lang3, and commons-lang (from Calcite) --&amp;gt;&lt;br/&gt;
   &amp;lt;relocation&amp;gt;&lt;br/&gt;
   	&amp;lt;pattern&amp;gt;org.apache.commons&amp;lt;/pattern&amp;gt;&lt;br/&gt;
   	&amp;lt;shadedPattern&amp;gt;org.apache.flink.table.shaded.org.apache.commons&amp;lt;/shadedPattern&amp;gt;&lt;br/&gt;
   &amp;lt;/relocation&amp;gt;&lt;br/&gt;
   ``` &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Proposal&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   I&apos;ve went through the history code of the flink-table relocation. Supposed the purpose of the origin author is that, to avoid version conflict that Calcite might bring.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;org.apache.commons.codec&lt;/li&gt;
	&lt;li&gt;org.apache.commons.lang&lt;/li&gt;
	&lt;li&gt;org.apache.commons.lang3&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   But, i have double check on the sub-dependency of calcite-core, only *&lt;b&gt;org.apache.commons.lang&lt;/b&gt;* is sub-dependency of calcite-core, *&lt;b&gt;org.apache.commons.codec&lt;/b&gt;* and *&lt;b&gt;org.apache.commons.lang3&lt;/b&gt;* in fact are inherited from flink-parent, so i think these two namespace no need to relocation.&lt;/p&gt;

&lt;p&gt;   In genernal, my proposal is to not relocation *&lt;b&gt;org.apache.commons.codec&lt;/b&gt;* and *&lt;b&gt;org.apache.commons.lang3&lt;/b&gt;*&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;not relocation *&lt;b&gt;org.apache.commons.codec&lt;/b&gt;* and *&lt;b&gt;org.apache.commons.lang3&lt;/b&gt;*&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Since i have change the relocation behavior of *&lt;b&gt;flink-table&lt;/b&gt;* component, its relative dependency are:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;flink-sql-client&lt;/li&gt;
	&lt;li&gt;flink-examples-table&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   I&apos;ve also ran the example case under these two component to make sure the change did works.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;sqlClient with hadoopless binary on `select count(distinct name) from (Values (&apos;a&apos;), (&apos;b&apos;)) AS NameTable(name)` &lt;span class=&quot;error&quot;&gt;&amp;#91;SUCCESS&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;org.apache.flink.table.examples.scala.WordCountTable &lt;span class=&quot;error&quot;&gt;&amp;#91;SUCCESS&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;org.apache.flink.table.examples.scala.WordCountSQL &lt;span class=&quot;error&quot;&gt;&amp;#91;SUCCESS&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;org.apache.flink.table.examples.scala.StreamTableExample &lt;span class=&quot;error&quot;&gt;&amp;#91;SUCCESS&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;org.apache.flink.table.examples.scala.StreamSQLExample &lt;span class=&quot;error&quot;&gt;&amp;#91;SUCCESS&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16653023" author="githubbot" created="Wed, 17 Oct 2018 06:16:19 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; skip relocation of commons-codes and commons-lang3 from flink-table&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-430502926&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-430502926&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   cc @StefanRRichter @tillrohrmann . Plz help review on the fix of hadoopless sqlClient classNotFound issue. thanks&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16653113" author="githubbot" created="Wed, 17 Oct 2018 07:23:14 +0000"  >&lt;p&gt;dawidwys commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; skip relocation of commons-codes and commons-lang3 from flink-table&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-430518728&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-430518728&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hi @leanken . Thank you for your contribution. I am afraid though it is not the right way to proceed with this bug. I think we should rather cut off usage of `Base64` (replace with our own implementation) than add hard external dependencies.&lt;/p&gt;

&lt;p&gt;   Also just to clarify why we relocate dependencies. The reason is not just so they do not clash with other dependencies of ours (e.g. from calcite as you said), but also so that Flink&apos;s users can use any arbitrary version of popular libraries.&lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16653123" author="githubbot" created="Wed, 17 Oct 2018 07:31:56 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; skip relocation of commons-codec and commons-lang3 from flink-table&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-430521113&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-430521113&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; Hi @leanken . Thank you for your contribution. I am afraid though it is not the right way to proceed with this bug. I think we should rather cut off usage of `Base64` (replace with our own implementation) than add hard external dependencies.&lt;br/&gt;
   &quot;reply: for Base64 replacement. I think it&apos;s ok for just this single case, what if there are even more cases like Base64, in future, we might need to do the replacement case by case&quot;&lt;br/&gt;
   &amp;gt; &lt;br/&gt;
   &amp;gt; Also just to clarify why we relocate dependencies. The reason is not just so they do not clash with other dependencies of ours (e.g. from calcite as you said), but also so that Flink&apos;s users can use any arbitrary version of popular libraries.&lt;br/&gt;
   &quot;reply: the reason that you mentioned, user can use any version of org.apache.commons prefix library, I dont think it is now working, because in flink-binary-with-hadoop common-codec library already included in classpath, even if FlinkUserJar contains its own common-codec jar, it might be conflict during runtime&quot;&lt;/p&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16653125" author="githubbot" created="Wed, 17 Oct 2018 07:32:15 +0000"  >&lt;p&gt;leanken edited a comment on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; skip relocation of commons-codec and commons-lang3 from flink-table&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-430521113&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-430521113&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; Hi @leanken . Thank you for your contribution. I am afraid though it is not the right way to proceed with this bug. I think we should rather cut off usage of `Base64` (replace with our own implementation) than add hard external dependencies.&lt;br/&gt;
   ---- &quot;reply: for Base64 replacement. I think it&apos;s ok for just this single case, what if there are even more cases like Base64, in future, we might need to do the replacement case by case&quot;&lt;br/&gt;
   &amp;gt; &lt;br/&gt;
   &amp;gt; Also just to clarify why we relocate dependencies. The reason is not just so they do not clash with other dependencies of ours (e.g. from calcite as you said), but also so that Flink&apos;s users can use any arbitrary version of popular libraries.&lt;br/&gt;
   ---- &quot;reply: the reason that you mentioned, user can use any version of org.apache.commons prefix library, I dont think it is now working, because in flink-binary-with-hadoop common-codec library already included in classpath, even if FlinkUserJar contains its own common-codec jar, it might be conflict during runtime&quot;&lt;/p&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16653128" author="githubbot" created="Wed, 17 Oct 2018 07:34:57 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; skip relocation of commons-codec and commons-lang3 from flink-table&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-430521953&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-430521953&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @dawidwys I will first have a look at the candidate replacement for &amp;lt;org.apache.commons.codec.Base64&amp;gt; for further discussion.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16653129" author="githubbot" created="Wed, 17 Oct 2018 07:35:08 +0000"  >&lt;p&gt;dawidwys commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; skip relocation of commons-codec and commons-lang3 from flink-table&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-430522013&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-430522013&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   1) As far as I know `Base64` is the only class from those packages used, and therefore cutting it should be the preferred way in this case, as it simplifies our dependencies.&lt;/p&gt;

&lt;p&gt;   2) I agree, but I would say this is a bug of `flink-binary-with-hadoop`, rather than something that we should follow.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16653134" author="githubbot" created="Wed, 17 Oct 2018 07:37:41 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; skip relocation of commons-codec and commons-lang3 from flink-table&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-430522770&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-430522770&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; 1. As far as I know `Base64` is the only class from those packages used, and therefore cutting it should be the preferred way in this case, as it simplifies our dependencies.&lt;br/&gt;
   &amp;gt; 2. I agree, but I would say this is a bug of `flink-binary-with-hadoop`, rather than something that we should follow.&lt;/p&gt;

&lt;p&gt;   ok. I see your point.  I will update in the next commit for Base64 replacement. thanks.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16653400" author="githubbot" created="Wed, 17 Oct 2018 11:38:50 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-430594457&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-430594457&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   cc @dawidwys Updated commit. Replaced commons.codec.binary.Base64 with java.util.Base64, and basically I&apos;ve search all reference of commons.codec.binary.Base64, all of them have been replaced with java.util.Base64. &lt;/p&gt;

&lt;p&gt;   And the origin encodeBase64URLSafeString should use Base64.getUrlEncode as replace candidate.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16653401" author="githubbot" created="Wed, 17 Oct 2018 11:40:36 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-430594978&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-430594978&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Just to confirm that the change did works. I catch the GeneratedCode from debugging.&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   function_org$apache$flink$table$functions$aggfunctions$CountAggFunction$f4346869d1df07833c4f2ba55982f5ce.open(new org.apache.flink.table.functions.FunctionContext(ctx));&lt;/p&gt;



&lt;p&gt;       org.apache.flink.api.common.state.StateDescriptor acc0_distinctValueMap_dataview_desc = (org.apache.flink.api.common.state.StateDescriptor)&lt;br/&gt;
         org.apache.flink.util.InstantiationUtil.deserializeObject(&lt;br/&gt;
         java.util.Base64.getUrlDecoder().decode(&quot;rO0ABXNyADRvcmcuYXBhY2hlLmZsaW5rLmFwaS5jb21tb24uc3RhdGUuTWFwU3RhdGVEZXNjcmlwdG9yAAAAAAAAAAECAAB4cgAxb3JnLmFwYWNoZS5mbGluay5hcGkuY29tbW9uLnN0YXRlLlN0YXRlRGVzY3JpcHRvcgAAAAAAAAABAwAFTAAEbmFtZXQAEkxqYXZhL2xhbmcvU3RyaW5nO0wAEnF1ZXJ5YWJsZVN0YXRlTmFtZXEAfgACTAAKc2VyaWFsaXplcnQANkxvcmcvYXBhY2hlL2ZsaW5rL2FwaS9jb21tb24vdHlwZXV0aWxzL1R5cGVTZXJpYWxpe&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   the origin *&lt;b&gt;org.apache.commons.codec.binary.Base64.decodeBase64&lt;/b&gt;* did switch into *&lt;b&gt;java.util.Base64.getUrlDecoder().decode&lt;/b&gt;*&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16656183" author="githubbot" created="Fri, 19 Oct 2018 02:19:33 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431223615&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431223615&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   let me fix TestCase build break first.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16656537" author="githubbot" created="Fri, 19 Oct 2018 09:49:03 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431308873&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431308873&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Kindly remind. @dawidwys &lt;br/&gt;
   Build turned green, ready to go.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16658816" author="githubbot" created="Mon, 22 Oct 2018 10:14:09 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431778789&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431778789&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys &lt;br/&gt;
   &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16658819" author="githubbot" created="Mon, 22 Oct 2018 10:14:53 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431778970&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431778970&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys &lt;br/&gt;
   &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16658820" author="githubbot" created="Mon, 22 Oct 2018 10:15:20 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431779068&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431779068&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys &lt;br/&gt;
   &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16658822" author="githubbot" created="Mon, 22 Oct 2018 10:15:48 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431779188&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431779188&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys . &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16658824" author="githubbot" created="Mon, 22 Oct 2018 10:16:08 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431779272&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431779272&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys . &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16658828" author="githubbot" created="Mon, 22 Oct 2018 10:17:31 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431779580&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431779580&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys for review. &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16658829" author="githubbot" created="Mon, 22 Oct 2018 10:18:05 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431779714&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431779714&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys for review. &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16658830" author="githubbot" created="Mon, 22 Oct 2018 10:18:47 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431779913&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431779913&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; Kindly remind. @dawidwys&lt;br/&gt;
   &amp;gt; Build turned green, ready to go.&lt;/p&gt;

&lt;p&gt;   Calling @dawidwys for review. &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16658851" author="githubbot" created="Mon, 22 Oct 2018 10:28:39 +0000"  >&lt;p&gt;leanken commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431782634&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431782634&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   CALLING @dawidwys for review. &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16659266" author="githubbot" created="Mon, 22 Oct 2018 18:18:30 +0000"  >&lt;p&gt;leanken removed a comment on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431782634&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431782634&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   CALLING @dawidwys for review. &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16659267" author="githubbot" created="Mon, 22 Oct 2018 18:18:31 +0000"  >&lt;p&gt;leanken removed a comment on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431779913&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431779913&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; Kindly remind. @dawidwys&lt;br/&gt;
   &amp;gt; Build turned green, ready to go.&lt;/p&gt;

&lt;p&gt;   Calling @dawidwys for review. &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16659268" author="githubbot" created="Mon, 22 Oct 2018 18:18:35 +0000"  >&lt;p&gt;leanken removed a comment on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431779580&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431779580&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys for review. &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16659269" author="githubbot" created="Mon, 22 Oct 2018 18:18:38 +0000"  >&lt;p&gt;leanken removed a comment on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431779272&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431779272&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys . &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16659270" author="githubbot" created="Mon, 22 Oct 2018 18:18:41 +0000"  >&lt;p&gt;leanken removed a comment on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431779714&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431779714&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys for review. &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16659271" author="githubbot" created="Mon, 22 Oct 2018 18:18:44 +0000"  >&lt;p&gt;leanken removed a comment on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431779068&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431779068&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys &lt;br/&gt;
   &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16659272" author="githubbot" created="Mon, 22 Oct 2018 18:18:47 +0000"  >&lt;p&gt;leanken removed a comment on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-431778970&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-431778970&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Calling @dawidwys &lt;br/&gt;
   &lt;sup&gt;_&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669014" author="githubbot" created="Tue, 30 Oct 2018 16:39:01 +0000"  >&lt;p&gt;twalthr opened a new pull request #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This PR removes all dependencies to `org.apache.commons` libraries. In the past we only used a couple of methods that were partially pulled in from Hadoop causing the issues mentioned in the JIRA ticket.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add more utility method to the Flink code base in order to reduce external dependencies&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This change is already covered by existing tests.&lt;br/&gt;
   I added additional test such as `EncodingUtilsTest` and `TypeCheckUtilsTest`.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): yes&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: no&lt;/li&gt;
	&lt;li&gt;The serializers: no&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): no&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: no&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: no&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? no&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? not applicable&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669363" author="githubbot" created="Tue, 30 Oct 2018 21:34:05 +0000"  >&lt;p&gt;igalshilman commented on a change in pull request #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966#discussion_r229481767&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966#discussion_r229481767&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -87,10 +95,145 @@ public static String encodeObjectToString(Serializable obj) &lt;/p&gt;
{
 		return loadClass(qualifiedName, Thread.currentThread().getContextClassLoader());
 	}

&lt;p&gt;+	public static String encodeStringToBase64(String string) &lt;/p&gt;
{
+		return new String(java.util.Base64.getEncoder().encode(string.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String decodeBase64ToString(String base64) &lt;/p&gt;
{
+		return new String(java.util.Base64.getDecoder().decode(base64.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static byte[] md5(String string) {&lt;br/&gt;
+		if (MD5_MESSAGE_DIGEST == null) &lt;/p&gt;
{
+			throw new TableException(&quot;Unsupported MD5 algorithm.&quot;);
+		}
&lt;p&gt;+		return MD5_MESSAGE_DIGEST.digest(string.getBytes(UTF_8));&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	public static String hex(String string) &lt;/p&gt;
{
+		return hex(string.getBytes(UTF_8));
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String hex(byte[] bytes) {&lt;br/&gt;
+		// adopted from &lt;a href=&quot;https://stackoverflow.com/a/9855338&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/9855338&lt;/a&gt;&lt;br/&gt;
+		final char[] hexChars = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;bytes.length * 2&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+		for (int j = 0; j &amp;lt; bytes.length; j++) &lt;/p&gt;
{
+			final int v = bytes[j] &amp;amp; 0xFF;
+			hexChars[j * 2] = HEX_CHARS[v &amp;gt;&amp;gt;&amp;gt; 4];
+			hexChars[j * 2 + 1] = HEX_CHARS[v &amp;amp; 0x0F];
+		}
&lt;p&gt;+		return new String(hexChars);&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private static MessageDigest getMd5MessageDigest() {&lt;br/&gt;
+		try &lt;/p&gt;
{
+			return MessageDigest.getInstance(&quot;MD5&quot;);
+		}
&lt;p&gt; catch (NoSuchAlgorithmException e) &lt;/p&gt;
{
+			return null;
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+	// Java String Repetition&lt;br/&gt;
+	//&lt;br/&gt;
+	// copied from o.a.commons.lang3.StringUtils (commons-lang3:3.3.2)&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+&lt;br/&gt;
+	private static final String EMPTY = &quot;&quot;;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * The maximum size to which the padding constant(s) can expand.&lt;br/&gt;
+	 */&lt;br/&gt;
+	private static final int PAD_LIMIT = 8192;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Repeat a String {@code repeat} times to form a new String.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * &amp;lt;pre&amp;gt;&lt;br/&gt;
+	 * StringUtils.repeat(null, 2) = null&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 0)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 2)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, 3)  = &quot;aaa&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;ab&quot;, 2) = &quot;abab&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, -2) = &quot;&quot;&lt;br/&gt;
+	 * &amp;lt;/pre&amp;gt;&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @param str    the String to repeat, may be null&lt;br/&gt;
+	 * @param repeat number of times to repeat str, negative treated as zero&lt;br/&gt;
+	 * @return a new String consisting of the original String repeated, {@code null} if null String input&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static String repeat(final String str, final int repeat) {&lt;br/&gt;
+		// Performance tuned for 2.0 (JDK1.4)&lt;br/&gt;
+&lt;br/&gt;
+		if (str == null) {+			return null;+		}
&lt;p&gt;+		if (repeat &amp;lt;= 0) &lt;/p&gt;
{
+			return EMPTY;
+		}
&lt;p&gt;+		final int inputLength = str.length();&lt;br/&gt;
+		if (repeat == 1 || inputLength == 0) &lt;/p&gt;
{
+			return str;
+		}
&lt;p&gt;+		if (inputLength == 1 &amp;amp;&amp;amp; repeat &amp;lt;= PAD_LIMIT) &lt;/p&gt;
{
+			return repeat(str.charAt(0), repeat);
+		}
&lt;p&gt;+&lt;br/&gt;
+		final int outputLength = inputLength * repeat;&lt;br/&gt;
+		switch (inputLength) {&lt;br/&gt;
+			case 1:&lt;br/&gt;
+				return repeat(str.charAt(0), repeat);&lt;br/&gt;
+			case 2:&lt;br/&gt;
+				final char ch0 = str.charAt(0);&lt;br/&gt;
+				final char ch1 = str.charAt(1);&lt;br/&gt;
+				final char[] output2 = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;outputLength&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+				for (int i = repeat * 2 - 2; i &amp;gt;= 0; i-&lt;del&gt;, i&lt;/del&gt;-) &lt;/p&gt;
{
+					output2[i] = ch0;
+					output2[i + 1] = ch1;
+				}
&lt;p&gt;+				return new String(output2);&lt;br/&gt;
+			default:&lt;br/&gt;
+				final StringBuilder buf = new StringBuilder(outputLength);&lt;br/&gt;
+				for (int i = 0; i &amp;lt; repeat; i++) &lt;/p&gt;
{
+					buf.append(str);
+				}
&lt;p&gt;+				return buf.toString();&lt;br/&gt;
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Returns padding using the specified delimiter repeated to a given length.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * &amp;lt;pre&amp;gt;&lt;br/&gt;
+	 * StringUtils.repeat(&apos;e&apos;, 0)  = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&apos;e&apos;, 3)  = &quot;eee&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&apos;e&apos;, -2) = &quot;&quot;&lt;br/&gt;
+	 * &amp;lt;/pre&amp;gt;&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * &amp;lt;p&amp;gt;Note: this method doesn&apos;t not support padding with&lt;br/&gt;
+	 * &amp;lt;a href=&quot;http://www.unicode.org/glossary/#supplementary_character&quot;&amp;gt;Unicode Supplementary Characters&amp;lt;/a&amp;gt;&lt;br/&gt;
+	 * as they require a pair of &lt;/p&gt;
{@code char}
&lt;p&gt;s to be represented.&lt;br/&gt;
+	 * If you are needing to support full I18N of your applications&lt;br/&gt;
+	 * consider using &lt;/p&gt;
{@link #repeat(String, int)}
&lt;p&gt; instead.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @param ch     character to repeat&lt;br/&gt;
+	 * @param repeat number of times to repeat char, negative treated as zero&lt;br/&gt;
+	 * @return String with repeated character&lt;br/&gt;
+	 * @see #repeat(String, int)&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static String repeat(final char ch, final int repeat) {&lt;br/&gt;
+		final char[] buf = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;repeat&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+		for (int i = repeat - 1; i &amp;gt;= 0; i--) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   I wonder why the original author has decided to loop backwards &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669364" author="githubbot" created="Tue, 30 Oct 2018 21:34:05 +0000"  >&lt;p&gt;igalshilman commented on a change in pull request #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966#discussion_r229487810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966#discussion_r229487810&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -87,10 +95,145 @@ public static String encodeObjectToString(Serializable obj) &lt;/p&gt;
{
 		return loadClass(qualifiedName, Thread.currentThread().getContextClassLoader());
 	}

&lt;p&gt;+	public static String encodeStringToBase64(String string) &lt;/p&gt;
{
+		return new String(java.util.Base64.getEncoder().encode(string.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String decodeBase64ToString(String base64) &lt;/p&gt;
{
+		return new String(java.util.Base64.getDecoder().decode(base64.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static byte[] md5(String string) {&lt;br/&gt;
+		if (MD5_MESSAGE_DIGEST == null) &lt;/p&gt;
{
+			throw new TableException(&quot;Unsupported MD5 algorithm.&quot;);
+		}
&lt;p&gt;+		return MD5_MESSAGE_DIGEST.digest(string.getBytes(UTF_8));&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	public static String hex(String string) &lt;/p&gt;
{
+		return hex(string.getBytes(UTF_8));
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String hex(byte[] bytes) {&lt;br/&gt;
+		// adopted from &lt;a href=&quot;https://stackoverflow.com/a/9855338&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/9855338&lt;/a&gt;&lt;br/&gt;
+		final char[] hexChars = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;bytes.length * 2&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+		for (int j = 0; j &amp;lt; bytes.length; j++) &lt;/p&gt;
{
+			final int v = bytes[j] &amp;amp; 0xFF;
+			hexChars[j * 2] = HEX_CHARS[v &amp;gt;&amp;gt;&amp;gt; 4];
+			hexChars[j * 2 + 1] = HEX_CHARS[v &amp;amp; 0x0F];
+		}
&lt;p&gt;+		return new String(hexChars);&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private static MessageDigest getMd5MessageDigest() {&lt;br/&gt;
+		try &lt;/p&gt;
{
+			return MessageDigest.getInstance(&quot;MD5&quot;);
+		}
&lt;p&gt; catch (NoSuchAlgorithmException e) &lt;/p&gt;
{
+			return null;
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+	// Java String Repetition&lt;br/&gt;
+	//&lt;br/&gt;
+	// copied from o.a.commons.lang3.StringUtils (commons-lang3:3.3.2)&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+&lt;br/&gt;
+	private static final String EMPTY = &quot;&quot;;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * The maximum size to which the padding constant(s) can expand.&lt;br/&gt;
+	 */&lt;br/&gt;
+	private static final int PAD_LIMIT = 8192;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Repeat a String {@code repeat} times to form a new String.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * &amp;lt;pre&amp;gt;&lt;br/&gt;
+	 * StringUtils.repeat(null, 2) = null&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 0)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 2)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, 3)  = &quot;aaa&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;ab&quot;, 2) = &quot;abab&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, -2) = &quot;&quot;&lt;br/&gt;
+	 * &amp;lt;/pre&amp;gt;&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @param str    the String to repeat, may be null&lt;br/&gt;
+	 * @param repeat number of times to repeat str, negative treated as zero&lt;br/&gt;
+	 * @return a new String consisting of the original String repeated, {@code null} if null String input&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static String repeat(final String str, final int repeat) {&lt;br/&gt;
+		// Performance tuned for 2.0 (JDK1.4)&lt;br/&gt;
+&lt;br/&gt;
+		if (str == null) {+			return null;+		}
&lt;p&gt;+		if (repeat &amp;lt;= 0) &lt;/p&gt;
{
+			return EMPTY;
+		}
&lt;p&gt;+		final int inputLength = str.length();&lt;br/&gt;
+		if (repeat == 1 || inputLength == 0) &lt;/p&gt;
{
+			return str;
+		}
&lt;p&gt;+		if (inputLength == 1 &amp;amp;&amp;amp; repeat &amp;lt;= PAD_LIMIT) &lt;/p&gt;
{
+			return repeat(str.charAt(0), repeat);
+		}
&lt;p&gt;+&lt;br/&gt;
+		final int outputLength = inputLength * repeat;&lt;br/&gt;
+		switch (inputLength) {&lt;br/&gt;
+			case 1:&lt;br/&gt;
+				return repeat(str.charAt(0), repeat);&lt;br/&gt;
+			case 2:&lt;br/&gt;
+				final char ch0 = str.charAt(0);&lt;br/&gt;
+				final char ch1 = str.charAt(1);&lt;br/&gt;
+				final char[] output2 = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;outputLength&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+				for (int i = repeat * 2 - 2; i &amp;gt;= 0; i-&lt;del&gt;, i&lt;/del&gt;-) &lt;/p&gt;
{
+					output2[i] = ch0;
+					output2[i + 1] = ch1;
+				}
&lt;p&gt;+				return new String(output2);&lt;br/&gt;
+			default:&lt;br/&gt;
+				final StringBuilder buf = new StringBuilder(outputLength);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   I know that you&apos;ve just copied it, but honestly, I think that the default case is the only one that makes senes and all the complication in that method is a bit wired (as the comment above states - it is optimized for jdk1.4) &lt;br/&gt;
   Feel free to ignore my comment, if you feel that fixing this, is out side of the scope of this PR &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669365" author="githubbot" created="Tue, 30 Oct 2018 21:34:05 +0000"  >&lt;p&gt;igalshilman commented on a change in pull request #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966#discussion_r229473954&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966#discussion_r229473954&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -40,14 +44,18 @@&lt;/p&gt;

&lt;p&gt; 	private static final Base64.Decoder BASE64_DECODER = java.util.Base64.getUrlDecoder();&lt;/p&gt;

&lt;p&gt;+	private static final MessageDigest MD5_MESSAGE_DIGEST = getMd5MessageDigest();&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Would MD5_MESSAGE_DIGEST be accessed concurrently? afaik this is not thread safe.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669738" author="githubbot" created="Wed, 31 Oct 2018 08:25:32 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966#discussion_r229598889&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966#discussion_r229598889&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -40,14 +44,18 @@&lt;/p&gt;

&lt;p&gt; 	private static final Base64.Decoder BASE64_DECODER = java.util.Base64.getUrlDecoder();&lt;/p&gt;

&lt;p&gt;+	private static final MessageDigest MD5_MESSAGE_DIGEST = getMd5MessageDigest();&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Usually this doesn&apos;t matter for translation (which is single threaded) but we are on the safer side if this method is thread-safe in the future.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669740" author="githubbot" created="Wed, 31 Oct 2018 08:28:42 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966#discussion_r229599636&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966#discussion_r229599636&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -87,10 +95,145 @@ public static String encodeObjectToString(Serializable obj) &lt;/p&gt;
{
 		return loadClass(qualifiedName, Thread.currentThread().getContextClassLoader());
 	}

&lt;p&gt;+	public static String encodeStringToBase64(String string) &lt;/p&gt;
{
+		return new String(java.util.Base64.getEncoder().encode(string.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String decodeBase64ToString(String base64) &lt;/p&gt;
{
+		return new String(java.util.Base64.getDecoder().decode(base64.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static byte[] md5(String string) {&lt;br/&gt;
+		if (MD5_MESSAGE_DIGEST == null) &lt;/p&gt;
{
+			throw new TableException(&quot;Unsupported MD5 algorithm.&quot;);
+		}
&lt;p&gt;+		return MD5_MESSAGE_DIGEST.digest(string.getBytes(UTF_8));&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	public static String hex(String string) &lt;/p&gt;
{
+		return hex(string.getBytes(UTF_8));
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String hex(byte[] bytes) {&lt;br/&gt;
+		// adopted from &lt;a href=&quot;https://stackoverflow.com/a/9855338&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/9855338&lt;/a&gt;&lt;br/&gt;
+		final char[] hexChars = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;bytes.length * 2&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+		for (int j = 0; j &amp;lt; bytes.length; j++) &lt;/p&gt;
{
+			final int v = bytes[j] &amp;amp; 0xFF;
+			hexChars[j * 2] = HEX_CHARS[v &amp;gt;&amp;gt;&amp;gt; 4];
+			hexChars[j * 2 + 1] = HEX_CHARS[v &amp;amp; 0x0F];
+		}
&lt;p&gt;+		return new String(hexChars);&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private static MessageDigest getMd5MessageDigest() {&lt;br/&gt;
+		try &lt;/p&gt;
{
+			return MessageDigest.getInstance(&quot;MD5&quot;);
+		}
&lt;p&gt; catch (NoSuchAlgorithmException e) &lt;/p&gt;
{
+			return null;
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+	// Java String Repetition&lt;br/&gt;
+	//&lt;br/&gt;
+	// copied from o.a.commons.lang3.StringUtils (commons-lang3:3.3.2)&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+&lt;br/&gt;
+	private static final String EMPTY = &quot;&quot;;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * The maximum size to which the padding constant(s) can expand.&lt;br/&gt;
+	 */&lt;br/&gt;
+	private static final int PAD_LIMIT = 8192;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Repeat a String {@code repeat} times to form a new String.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * &amp;lt;pre&amp;gt;&lt;br/&gt;
+	 * StringUtils.repeat(null, 2) = null&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 0)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 2)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, 3)  = &quot;aaa&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;ab&quot;, 2) = &quot;abab&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, -2) = &quot;&quot;&lt;br/&gt;
+	 * &amp;lt;/pre&amp;gt;&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @param str    the String to repeat, may be null&lt;br/&gt;
+	 * @param repeat number of times to repeat str, negative treated as zero&lt;br/&gt;
+	 * @return a new String consisting of the original String repeated, {@code null} if null String input&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static String repeat(final String str, final int repeat) {&lt;br/&gt;
+		// Performance tuned for 2.0 (JDK1.4)&lt;br/&gt;
+&lt;br/&gt;
+		if (str == null) {+			return null;+		}
&lt;p&gt;+		if (repeat &amp;lt;= 0) &lt;/p&gt;
{
+			return EMPTY;
+		}
&lt;p&gt;+		final int inputLength = str.length();&lt;br/&gt;
+		if (repeat == 1 || inputLength == 0) &lt;/p&gt;
{
+			return str;
+		}
&lt;p&gt;+		if (inputLength == 1 &amp;amp;&amp;amp; repeat &amp;lt;= PAD_LIMIT) &lt;/p&gt;
{
+			return repeat(str.charAt(0), repeat);
+		}
&lt;p&gt;+&lt;br/&gt;
+		final int outputLength = inputLength * repeat;&lt;br/&gt;
+		switch (inputLength) {&lt;br/&gt;
+			case 1:&lt;br/&gt;
+				return repeat(str.charAt(0), repeat);&lt;br/&gt;
+			case 2:&lt;br/&gt;
+				final char ch0 = str.charAt(0);&lt;br/&gt;
+				final char ch1 = str.charAt(1);&lt;br/&gt;
+				final char[] output2 = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;outputLength&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+				for (int i = repeat * 2 - 2; i &amp;gt;= 0; i-&lt;del&gt;, i&lt;/del&gt;-) &lt;/p&gt;
{
+					output2[i] = ch0;
+					output2[i + 1] = ch1;
+				}
&lt;p&gt;+				return new String(output2);&lt;br/&gt;
+			default:&lt;br/&gt;
+				final StringBuilder buf = new StringBuilder(outputLength);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   If I change this method, I would also need to introduce more extensive tests in order to verify that I did not introduce new bugs. This method can be remove soon anyway as Java 11 has a `String.repeat` method.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669741" author="githubbot" created="Wed, 31 Oct 2018 08:29:34 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966#discussion_r229599636&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966#discussion_r229599636&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -87,10 +95,145 @@ public static String encodeObjectToString(Serializable obj) &lt;/p&gt;
{
 		return loadClass(qualifiedName, Thread.currentThread().getContextClassLoader());
 	}

&lt;p&gt;+	public static String encodeStringToBase64(String string) &lt;/p&gt;
{
+		return new String(java.util.Base64.getEncoder().encode(string.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String decodeBase64ToString(String base64) &lt;/p&gt;
{
+		return new String(java.util.Base64.getDecoder().decode(base64.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static byte[] md5(String string) {&lt;br/&gt;
+		if (MD5_MESSAGE_DIGEST == null) &lt;/p&gt;
{
+			throw new TableException(&quot;Unsupported MD5 algorithm.&quot;);
+		}
&lt;p&gt;+		return MD5_MESSAGE_DIGEST.digest(string.getBytes(UTF_8));&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	public static String hex(String string) &lt;/p&gt;
{
+		return hex(string.getBytes(UTF_8));
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String hex(byte[] bytes) {&lt;br/&gt;
+		// adopted from &lt;a href=&quot;https://stackoverflow.com/a/9855338&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/9855338&lt;/a&gt;&lt;br/&gt;
+		final char[] hexChars = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;bytes.length * 2&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+		for (int j = 0; j &amp;lt; bytes.length; j++) &lt;/p&gt;
{
+			final int v = bytes[j] &amp;amp; 0xFF;
+			hexChars[j * 2] = HEX_CHARS[v &amp;gt;&amp;gt;&amp;gt; 4];
+			hexChars[j * 2 + 1] = HEX_CHARS[v &amp;amp; 0x0F];
+		}
&lt;p&gt;+		return new String(hexChars);&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private static MessageDigest getMd5MessageDigest() {&lt;br/&gt;
+		try &lt;/p&gt;
{
+			return MessageDigest.getInstance(&quot;MD5&quot;);
+		}
&lt;p&gt; catch (NoSuchAlgorithmException e) &lt;/p&gt;
{
+			return null;
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+	// Java String Repetition&lt;br/&gt;
+	//&lt;br/&gt;
+	// copied from o.a.commons.lang3.StringUtils (commons-lang3:3.3.2)&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+&lt;br/&gt;
+	private static final String EMPTY = &quot;&quot;;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * The maximum size to which the padding constant(s) can expand.&lt;br/&gt;
+	 */&lt;br/&gt;
+	private static final int PAD_LIMIT = 8192;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Repeat a String {@code repeat} times to form a new String.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * &amp;lt;pre&amp;gt;&lt;br/&gt;
+	 * StringUtils.repeat(null, 2) = null&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 0)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 2)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, 3)  = &quot;aaa&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;ab&quot;, 2) = &quot;abab&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, -2) = &quot;&quot;&lt;br/&gt;
+	 * &amp;lt;/pre&amp;gt;&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @param str    the String to repeat, may be null&lt;br/&gt;
+	 * @param repeat number of times to repeat str, negative treated as zero&lt;br/&gt;
+	 * @return a new String consisting of the original String repeated, {@code null} if null String input&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static String repeat(final String str, final int repeat) {&lt;br/&gt;
+		// Performance tuned for 2.0 (JDK1.4)&lt;br/&gt;
+&lt;br/&gt;
+		if (str == null) {+			return null;+		}
&lt;p&gt;+		if (repeat &amp;lt;= 0) &lt;/p&gt;
{
+			return EMPTY;
+		}
&lt;p&gt;+		final int inputLength = str.length();&lt;br/&gt;
+		if (repeat == 1 || inputLength == 0) &lt;/p&gt;
{
+			return str;
+		}
&lt;p&gt;+		if (inputLength == 1 &amp;amp;&amp;amp; repeat &amp;lt;= PAD_LIMIT) &lt;/p&gt;
{
+			return repeat(str.charAt(0), repeat);
+		}
&lt;p&gt;+&lt;br/&gt;
+		final int outputLength = inputLength * repeat;&lt;br/&gt;
+		switch (inputLength) {&lt;br/&gt;
+			case 1:&lt;br/&gt;
+				return repeat(str.charAt(0), repeat);&lt;br/&gt;
+			case 2:&lt;br/&gt;
+				final char ch0 = str.charAt(0);&lt;br/&gt;
+				final char ch1 = str.charAt(1);&lt;br/&gt;
+				final char[] output2 = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;outputLength&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+				for (int i = repeat * 2 - 2; i &amp;gt;= 0; i-&lt;del&gt;, i&lt;/del&gt;-) &lt;/p&gt;
{
+					output2[i] = ch0;
+					output2[i + 1] = ch1;
+				}
&lt;p&gt;+				return new String(output2);&lt;br/&gt;
+			default:&lt;br/&gt;
+				final StringBuilder buf = new StringBuilder(outputLength);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   If I change this method, I would also need to introduce more extensive tests in order to verify that I did not introduce new bugs. This method can be removed soon anyway as Java 11 has a `String.repeat` method.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669764" author="githubbot" created="Wed, 31 Oct 2018 08:41:04 +0000"  >&lt;p&gt;igalshilman commented on a change in pull request #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966#discussion_r229603056&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966#discussion_r229603056&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -87,10 +95,145 @@ public static String encodeObjectToString(Serializable obj) &lt;/p&gt;
{
 		return loadClass(qualifiedName, Thread.currentThread().getContextClassLoader());
 	}

&lt;p&gt;+	public static String encodeStringToBase64(String string) &lt;/p&gt;
{
+		return new String(java.util.Base64.getEncoder().encode(string.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String decodeBase64ToString(String base64) &lt;/p&gt;
{
+		return new String(java.util.Base64.getDecoder().decode(base64.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static byte[] md5(String string) {&lt;br/&gt;
+		if (MD5_MESSAGE_DIGEST == null) &lt;/p&gt;
{
+			throw new TableException(&quot;Unsupported MD5 algorithm.&quot;);
+		}
&lt;p&gt;+		return MD5_MESSAGE_DIGEST.digest(string.getBytes(UTF_8));&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	public static String hex(String string) &lt;/p&gt;
{
+		return hex(string.getBytes(UTF_8));
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String hex(byte[] bytes) {&lt;br/&gt;
+		// adopted from &lt;a href=&quot;https://stackoverflow.com/a/9855338&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/9855338&lt;/a&gt;&lt;br/&gt;
+		final char[] hexChars = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;bytes.length * 2&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+		for (int j = 0; j &amp;lt; bytes.length; j++) &lt;/p&gt;
{
+			final int v = bytes[j] &amp;amp; 0xFF;
+			hexChars[j * 2] = HEX_CHARS[v &amp;gt;&amp;gt;&amp;gt; 4];
+			hexChars[j * 2 + 1] = HEX_CHARS[v &amp;amp; 0x0F];
+		}
&lt;p&gt;+		return new String(hexChars);&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	private static MessageDigest getMd5MessageDigest() {&lt;br/&gt;
+		try &lt;/p&gt;
{
+			return MessageDigest.getInstance(&quot;MD5&quot;);
+		}
&lt;p&gt; catch (NoSuchAlgorithmException e) &lt;/p&gt;
{
+			return null;
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+	// Java String Repetition&lt;br/&gt;
+	//&lt;br/&gt;
+	// copied from o.a.commons.lang3.StringUtils (commons-lang3:3.3.2)&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+&lt;br/&gt;
+	private static final String EMPTY = &quot;&quot;;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * The maximum size to which the padding constant(s) can expand.&lt;br/&gt;
+	 */&lt;br/&gt;
+	private static final int PAD_LIMIT = 8192;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Repeat a String {@code repeat} times to form a new String.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * &amp;lt;pre&amp;gt;&lt;br/&gt;
+	 * StringUtils.repeat(null, 2) = null&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 0)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 2)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, 3)  = &quot;aaa&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;ab&quot;, 2) = &quot;abab&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, -2) = &quot;&quot;&lt;br/&gt;
+	 * &amp;lt;/pre&amp;gt;&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @param str    the String to repeat, may be null&lt;br/&gt;
+	 * @param repeat number of times to repeat str, negative treated as zero&lt;br/&gt;
+	 * @return a new String consisting of the original String repeated, {@code null} if null String input&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static String repeat(final String str, final int repeat) {&lt;br/&gt;
+		// Performance tuned for 2.0 (JDK1.4)&lt;br/&gt;
+&lt;br/&gt;
+		if (str == null) {+			return null;+		}
&lt;p&gt;+		if (repeat &amp;lt;= 0) &lt;/p&gt;
{
+			return EMPTY;
+		}
&lt;p&gt;+		final int inputLength = str.length();&lt;br/&gt;
+		if (repeat == 1 || inputLength == 0) &lt;/p&gt;
{
+			return str;
+		}
&lt;p&gt;+		if (inputLength == 1 &amp;amp;&amp;amp; repeat &amp;lt;= PAD_LIMIT) &lt;/p&gt;
{
+			return repeat(str.charAt(0), repeat);
+		}
&lt;p&gt;+&lt;br/&gt;
+		final int outputLength = inputLength * repeat;&lt;br/&gt;
+		switch (inputLength) {&lt;br/&gt;
+			case 1:&lt;br/&gt;
+				return repeat(str.charAt(0), repeat);&lt;br/&gt;
+			case 2:&lt;br/&gt;
+				final char ch0 = str.charAt(0);&lt;br/&gt;
+				final char ch1 = str.charAt(1);&lt;br/&gt;
+				final char[] output2 = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;outputLength&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+				for (int i = repeat * 2 - 2; i &amp;gt;= 0; i-&lt;del&gt;, i&lt;/del&gt;-) &lt;/p&gt;
{
+					output2[i] = ch0;
+					output2[i + 1] = ch1;
+				}
&lt;p&gt;+				return new String(output2);&lt;br/&gt;
+			default:&lt;br/&gt;
+				final StringBuilder buf = new StringBuilder(outputLength);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Got it. makes senes.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669765" author="githubbot" created="Wed, 31 Oct 2018 08:41:25 +0000"  >&lt;p&gt;igalshilman commented on a change in pull request #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966#discussion_r229603180&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966#discussion_r229603180&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -40,14 +44,18 @@&lt;/p&gt;

&lt;p&gt; 	private static final Base64.Decoder BASE64_DECODER = java.util.Base64.getUrlDecoder();&lt;/p&gt;

&lt;p&gt;+	private static final MessageDigest MD5_MESSAGE_DIGEST = getMd5MessageDigest();&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Thanks for addressing this.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669766" author="githubbot" created="Wed, 31 Oct 2018 08:41:29 +0000"  >&lt;p&gt;igalshilman commented on issue #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966#issuecomment-434604624&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966#issuecomment-434604624&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   LGTM &#128077; &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669767" author="githubbot" created="Wed, 31 Oct 2018 08:45:22 +0000"  >&lt;p&gt;twalthr commented on issue #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966#issuecomment-434605691&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966#issuecomment-434605691&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thank you @igalshilman. I will merge this...&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669786" author="twalthr" created="Wed, 31 Oct 2018 09:04:48 +0000"  >&lt;p&gt;Fixed in 1.7.0: 08d875eadec779f68baa1cc7003dab7bdd51640a&lt;/p&gt;</comment>
                            <comment id="16669790" author="githubbot" created="Wed, 31 Oct 2018 09:06:08 +0000"  >&lt;p&gt;asfgit closed pull request #6966: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Reduce dependencies by removing org.apache.commons&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6966&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6966&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/descriptors/DescriptorProperties.java b/flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/descriptors/DescriptorProperties.java&lt;br/&gt;
index 0d2f835958f..c4769814728 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/descriptors/DescriptorProperties.java&lt;br/&gt;
+++ b/flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/descriptors/DescriptorProperties.java&lt;br/&gt;
@@ -1326,7 +1326,7 @@ private int extractMaxIndex(String key, String suffixPattern) {&lt;br/&gt;
 	}&lt;/p&gt;

&lt;p&gt; 	public static String toString(String str) &lt;/p&gt;
{
-		return EncodingUtils.escapeJava(str).replace(&quot;\\/&quot;, &quot;/&quot;); // &apos;/&apos; must not be escaped
+		return EncodingUtils.escapeJava(str);
 	}

&lt;p&gt; 	public static String toString(String key, String value) {&lt;br/&gt;
diff --git a/flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java b/flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java&lt;br/&gt;
index 41fa58ef055..47aac25e897 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java&lt;br/&gt;
+++ b/flink-libraries/flink-table-common/src/main/java/org/apache/flink/table/utils/EncodingUtils.java&lt;br/&gt;
@@ -19,6 +19,7 @@&lt;br/&gt;
 package org.apache.flink.table.utils;&lt;/p&gt;

&lt;p&gt; import org.apache.flink.annotation.Internal;&lt;br/&gt;
+import org.apache.flink.table.api.TableException;&lt;br/&gt;
 import org.apache.flink.table.api.ValidationException;&lt;br/&gt;
 import org.apache.flink.util.InstantiationUtil;&lt;/p&gt;

&lt;p&gt;@@ -26,9 +27,12 @@&lt;br/&gt;
 import java.io.Serializable;&lt;br/&gt;
 import java.io.StringWriter;&lt;br/&gt;
 import java.io.Writer;&lt;br/&gt;
-import java.nio.charset.StandardCharsets;&lt;br/&gt;
+import java.security.MessageDigest;&lt;br/&gt;
+import java.security.NoSuchAlgorithmException;&lt;br/&gt;
 import java.util.Base64;&lt;/p&gt;

&lt;p&gt;+import static java.nio.charset.StandardCharsets.UTF_8;&lt;br/&gt;
+&lt;br/&gt;
 /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;General utilities for string-encoding. This class is used to avoid additional dependencies&lt;/li&gt;
	&lt;li&gt;to other projects.&lt;br/&gt;
@@ -40,6 +44,8 @@&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 	private static final Base64.Decoder BASE64_DECODER = java.util.Base64.getUrlDecoder();&lt;/p&gt;

&lt;p&gt;+	private static final char[] HEX_CHARS = &quot;0123456789abcdef&quot;.toCharArray();&lt;br/&gt;
+&lt;br/&gt;
 	private EncodingUtils() &lt;/p&gt;
{
 		// do not instantiate
 	}
&lt;p&gt;@@ -47,7 +53,7 @@ private EncodingUtils() {&lt;br/&gt;
 	public static String encodeObjectToString(Serializable obj) {&lt;br/&gt;
 		try &lt;/p&gt;
{
 			final byte[] bytes = InstantiationUtil.serializeObject(obj);
-			return new String(BASE64_ENCODER.encode(bytes), StandardCharsets.UTF_8);
+			return new String(BASE64_ENCODER.encode(bytes), UTF_8);
 		}
&lt;p&gt; catch (Exception e) {&lt;br/&gt;
 			throw new ValidationException(&lt;br/&gt;
 				&quot;Unable to serialize object &apos;&quot; + obj.toString() + &quot;&apos; of class &apos;&quot; + obj.getClass().getName() + &quot;&apos;.&quot;);&lt;br/&gt;
@@ -60,7 +66,7 @@ public static String encodeObjectToString(Serializable obj) {&lt;/p&gt;

&lt;p&gt; 	public static &amp;lt;T extends Serializable&amp;gt; T decodeStringToObject(String base64String, Class&amp;lt;T&amp;gt; baseClass, ClassLoader classLoader) {&lt;br/&gt;
 		try {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final byte[] bytes = BASE64_DECODER.decode(base64String.getBytes(StandardCharsets.UTF_8));&lt;br/&gt;
+			final byte[] bytes = BASE64_DECODER.decode(base64String.getBytes(UTF_8));&lt;br/&gt;
 			final T instance = InstantiationUtil.deserializeObject(bytes, classLoader);&lt;br/&gt;
 			if (instance != null &amp;amp;&amp;amp; !baseClass.isAssignableFrom(instance.getClass())) {&lt;br/&gt;
 				throw new ValidationException(&lt;br/&gt;
@@ -87,10 +93,138 @@ public static String encodeObjectToString(Serializable obj) 
{
 		return loadClass(qualifiedName, Thread.currentThread().getContextClassLoader());
 	}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+	public static String encodeStringToBase64(String string) &lt;/p&gt;
{
+		return new String(java.util.Base64.getEncoder().encode(string.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String decodeBase64ToString(String base64) &lt;/p&gt;
{
+		return new String(java.util.Base64.getDecoder().decode(base64.getBytes(UTF_8)), UTF_8);
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static byte[] md5(String string) {&lt;br/&gt;
+		try &lt;/p&gt;
{
+			return MessageDigest.getInstance(&quot;MD5&quot;).digest(string.getBytes(UTF_8));
+		}
&lt;p&gt; catch (NoSuchAlgorithmException e) &lt;/p&gt;
{
+			throw new TableException(&quot;Unsupported MD5 algorithm.&quot;, e);
+		}
&lt;p&gt;+	}&lt;br/&gt;
+&lt;br/&gt;
+	public static String hex(String string) &lt;/p&gt;
{
+		return hex(string.getBytes(UTF_8));
+	}
&lt;p&gt;+&lt;br/&gt;
+	public static String hex(byte[] bytes) {&lt;br/&gt;
+		// adopted from &lt;a href=&quot;https://stackoverflow.com/a/9855338&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/9855338&lt;/a&gt;&lt;br/&gt;
+		final char[] hexChars = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;bytes.length * 2&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+		for (int j = 0; j &amp;lt; bytes.length; j++) &lt;/p&gt;
{
+			final int v = bytes[j] &amp;amp; 0xFF;
+			hexChars[j * 2] = HEX_CHARS[v &amp;gt;&amp;gt;&amp;gt; 4];
+			hexChars[j * 2 + 1] = HEX_CHARS[v &amp;amp; 0x0F];
+		}
&lt;p&gt;+		return new String(hexChars);&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+	// Java String Repetition&lt;br/&gt;
+	//&lt;br/&gt;
+	// copied from o.a.commons.lang3.StringUtils (commons-lang3:3.3.2)&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+&lt;br/&gt;
+	private static final String EMPTY = &quot;&quot;;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * The maximum size to which the padding constant(s) can expand.&lt;br/&gt;
+	 */&lt;br/&gt;
+	private static final int PAD_LIMIT = 8192;&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Repeat a String &lt;/p&gt;
{@code repeat}
&lt;p&gt; times to form a new String.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * &amp;lt;pre&amp;gt;&lt;br/&gt;
+	 * StringUtils.repeat(null, 2) = null&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 0)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;&quot;, 2)   = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, 3)  = &quot;aaa&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;ab&quot;, 2) = &quot;abab&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&quot;a&quot;, -2) = &quot;&quot;&lt;br/&gt;
+	 * &amp;lt;/pre&amp;gt;&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @param str    the String to repeat, may be null&lt;br/&gt;
+	 * @param repeat number of times to repeat str, negative treated as zero&lt;br/&gt;
+	 * @return a new String consisting of the original String repeated, &lt;/p&gt;
{@code null}
&lt;p&gt; if null String input&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static String repeat(final String str, final int repeat) {&lt;br/&gt;
+		// Performance tuned for 2.0 (JDK1.4)&lt;br/&gt;
+&lt;br/&gt;
+		if (str == null) &lt;/p&gt;
{
+			return null;
+		}
&lt;p&gt;+		if (repeat &amp;lt;= 0) &lt;/p&gt;
{
+			return EMPTY;
+		}
&lt;p&gt;+		final int inputLength = str.length();&lt;br/&gt;
+		if (repeat == 1 || inputLength == 0) &lt;/p&gt;
{
+			return str;
+		}
&lt;p&gt;+		if (inputLength == 1 &amp;amp;&amp;amp; repeat &amp;lt;= PAD_LIMIT) &lt;/p&gt;
{
+			return repeat(str.charAt(0), repeat);
+		}
&lt;p&gt;+&lt;br/&gt;
+		final int outputLength = inputLength * repeat;&lt;br/&gt;
+		switch (inputLength) {&lt;br/&gt;
+			case 1:&lt;br/&gt;
+				return repeat(str.charAt(0), repeat);&lt;br/&gt;
+			case 2:&lt;br/&gt;
+				final char ch0 = str.charAt(0);&lt;br/&gt;
+				final char ch1 = str.charAt(1);&lt;br/&gt;
+				final char[] output2 = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;outputLength&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+				for (int i = repeat * 2 - 2; i &amp;gt;= 0; i-&lt;del&gt;, i&lt;/del&gt;-) &lt;/p&gt;
{
+					output2[i] = ch0;
+					output2[i + 1] = ch1;
+				}
&lt;p&gt;+				return new String(output2);&lt;br/&gt;
+			default:&lt;br/&gt;
+				final StringBuilder buf = new StringBuilder(outputLength);&lt;br/&gt;
+				for (int i = 0; i &amp;lt; repeat; i++) &lt;/p&gt;
{
+					buf.append(str);
+				}
&lt;p&gt;+				return buf.toString();&lt;br/&gt;
+		}&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Returns padding using the specified delimiter repeated to a given length.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * &amp;lt;pre&amp;gt;&lt;br/&gt;
+	 * StringUtils.repeat(&apos;e&apos;, 0)  = &quot;&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&apos;e&apos;, 3)  = &quot;eee&quot;&lt;br/&gt;
+	 * StringUtils.repeat(&apos;e&apos;, -2) = &quot;&quot;&lt;br/&gt;
+	 * &amp;lt;/pre&amp;gt;&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * &amp;lt;p&amp;gt;Note: this method doesn&apos;t not support padding with&lt;br/&gt;
+	 * &amp;lt;a href=&quot;http://www.unicode.org/glossary/#supplementary_character&quot;&amp;gt;Unicode Supplementary Characters&amp;lt;/a&amp;gt;&lt;br/&gt;
+	 * as they require a pair of &lt;/p&gt;
{@code char}
&lt;p&gt;s to be represented.&lt;br/&gt;
+	 * If you are needing to support full I18N of your applications&lt;br/&gt;
+	 * consider using &lt;/p&gt;
{@link #repeat(String, int)}
&lt;p&gt; instead.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @param ch     character to repeat&lt;br/&gt;
+	 * @param repeat number of times to repeat char, negative treated as zero&lt;br/&gt;
+	 * @return String with repeated character&lt;br/&gt;
+	 * @see #repeat(String, int)&lt;br/&gt;
+	 */&lt;br/&gt;
+	public static String repeat(final char ch, final int repeat) {&lt;br/&gt;
+		final char[] buf = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;repeat&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+		for (int i = repeat - 1; i &amp;gt;= 0; i--) &lt;/p&gt;
{
+			buf[i] = ch;
+		}
&lt;p&gt;+		return new String(buf);&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
 	// --------------------------------------------------------------------------------------------&lt;br/&gt;
 	// Java String Escaping&lt;br/&gt;
 	//&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// copied from o.a.commons.lang.StringEscapeUtils (commons-lang:commons-lang:2.4)&lt;br/&gt;
+	// copied from o.a.commons.lang.StringEscapeUtils (commons-lang:2.4)&lt;br/&gt;
+	// but without escaping forward slashes.&lt;br/&gt;
 	// --------------------------------------------------------------------------------------------&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 	/**&lt;br/&gt;
@@ -197,10 +331,11 @@ private static void escapeJavaStyleString(Writer out, String str, boolean escape&lt;br/&gt;
 						out.write(&apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;);&lt;br/&gt;
 						out.write(&apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;);&lt;br/&gt;
 						break;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;case &apos;/&apos;:&lt;/li&gt;
	&lt;li&gt;out.write(&apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;);&lt;/li&gt;
	&lt;li&gt;out.write(&apos;/&apos;);&lt;/li&gt;
	&lt;li&gt;break;&lt;br/&gt;
+					// MODIFICATION: Flink removes invalid escaping of forward slashes!&lt;br/&gt;
+					// case &apos;/&apos;:&lt;br/&gt;
+					//	out.write(&apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;);&lt;br/&gt;
+					//	out.write(&apos;/&apos;);&lt;br/&gt;
+					//	break;&lt;br/&gt;
 					default:&lt;br/&gt;
 						out.write(ch);&lt;br/&gt;
 						break;&lt;br/&gt;
diff --git a/flink-libraries/flink-table-common/src/test/java/org/apache/flink/table/utils/EncodingUtilsTest.java b/flink-libraries/flink-table-common/src/test/java/org/apache/flink/table/utils/EncodingUtilsTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..3bc53d828d4
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;/dev/null&lt;br/&gt;
+++ b/flink-libraries/flink-table-common/src/test/java/org/apache/flink/table/utils/EncodingUtilsTest.java&lt;br/&gt;
@@ -0,0 +1,93 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.table.utils;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.Serializable;&lt;br/&gt;
+import java.util.Objects;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertEquals;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Tests for 
{@link org.apache.flink.table.utils.EncodingUtils}
&lt;p&gt;.&lt;br/&gt;
+ */&lt;br/&gt;
+public class EncodingUtilsTest {&lt;br/&gt;
+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testObjectStringEncoding() &lt;/p&gt;
{
+		final MyPojo pojo = new MyPojo(33, &quot;Hello&quot;);
+		final String base64 = EncodingUtils.encodeObjectToString(pojo);
+		assertEquals(pojo, EncodingUtils.decodeStringToObject(base64, Serializable.class));
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testStringBase64Encoding() &lt;/p&gt;
{
+		final String string = &quot;Hello, this is apache flink.&quot;;
+		final String base64 = EncodingUtils.encodeStringToBase64(string);
+		assertEquals(&quot;SGVsbG8sIHRoaXMgaXMgYXBhY2hlIGZsaW5rLg==&quot;, base64);
+		assertEquals(string, EncodingUtils.decodeBase64ToString(base64));
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testMd5Hex() &lt;/p&gt;
{
+		final String string = &quot;Hello, world! How are you? &#39640;&#31934;&#30830;&quot;;
+		assertEquals(&quot;983abac84e994b4ba73be177e5cc298b&quot;, EncodingUtils.hex(EncodingUtils.md5(string)));
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testJavaEscaping() &lt;/p&gt;
{
+		assertEquals(&quot;\\\\hello\\\&quot;world&apos;space/&quot;, EncodingUtils.escapeJava(&quot;\\hello\&quot;world&apos;space/&quot;));
+	}
&lt;p&gt;+&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testRepetition() &lt;/p&gt;
{
+		assertEquals(&quot;wewewe&quot;, EncodingUtils.repeat(&quot;we&quot;, 3));
+	}
&lt;p&gt;+&lt;br/&gt;
+	// --------------------------------------------------------------------------------------------&lt;br/&gt;
+&lt;br/&gt;
+	private static class MyPojo implements Serializable {&lt;br/&gt;
+&lt;br/&gt;
+		private int number;&lt;br/&gt;
+		private String string;&lt;br/&gt;
+&lt;br/&gt;
+		public MyPojo(int number, String string) &lt;/p&gt;
{
+			this.number = number;
+			this.string = string;
+		}
&lt;p&gt;+&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public boolean equals(Object o) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+			if (this == o) {
+				return true;
+			}+			if (o == null || getClass() != o.getClass()) {
+				return false;
+			}+			MyPojo myPojo = (MyPojo) o;+			return number == myPojo.number &amp;amp;&amp;amp; Objects.equals(string, myPojo.string);+		}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+&lt;br/&gt;
+		@Override&lt;br/&gt;
+		public int hashCode() &lt;/p&gt;
{
+			return Objects.hash(number, string);
+		}
&lt;p&gt;+	}&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/flink-libraries/flink-table/pom.xml b/flink-libraries/flink-table/pom.xml&lt;br/&gt;
index 14653710b4e..6b2fe8c9af7 100644&lt;/p&gt;&lt;/li&gt;
			&lt;li&gt;a/flink-libraries/flink-table/pom.xml&lt;br/&gt;
+++ b/flink-libraries/flink-table/pom.xml&lt;br/&gt;
@@ -78,18 +78,6 @@ under the License.&lt;br/&gt;
 			&amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;&lt;br/&gt;
 		&amp;lt;/dependency&amp;gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;!-- Used for base64 encoding of UDFs --&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;dependency&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;groupId&amp;gt;commons-codec&amp;lt;/groupId&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;artifactId&amp;gt;commons-codec&amp;lt;/artifactId&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;/dependency&amp;gt;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;&amp;lt;!-- Used for code generation --&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;dependency&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;groupId&amp;gt;org.apache.commons&amp;lt;/groupId&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;artifactId&amp;gt;commons-lang3&amp;lt;/artifactId&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;/dependency&amp;gt;&lt;br/&gt;
-&lt;br/&gt;
 		&amp;lt;!-- Used for code generation --&amp;gt;&lt;br/&gt;
 		&amp;lt;dependency&amp;gt;&lt;br/&gt;
 			&amp;lt;groupId&amp;gt;org.apache.flink&amp;lt;/groupId&amp;gt;&lt;br/&gt;
@@ -279,12 +267,9 @@ under the License.&lt;br/&gt;
 									&amp;lt;include&amp;gt;com.google.guava:guava&amp;lt;/include&amp;gt;&lt;br/&gt;
 									&amp;lt;include&amp;gt;net.hydromatic:*&amp;lt;/include&amp;gt;&lt;br/&gt;
 									&amp;lt;include&amp;gt;com.esri.geometry:*&amp;lt;/include&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;include&amp;gt;commons-lang:*&amp;lt;/include&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 									&amp;lt;!-- flink-table dependencies --&amp;gt;&lt;br/&gt;
 									&amp;lt;include&amp;gt;org.apache.flink:flink-table-common&amp;lt;/include&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;include&amp;gt;commons-codec:*&amp;lt;/include&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;include&amp;gt;org.apache.commons:commons-lang3&amp;lt;/include&amp;gt;&lt;br/&gt;
 									&amp;lt;include&amp;gt;org.codehaus.janino:*&amp;lt;/include&amp;gt;&lt;br/&gt;
 									&amp;lt;include&amp;gt;joda-time:*&amp;lt;/include&amp;gt;&lt;br/&gt;
 								&amp;lt;/includes&amp;gt;&lt;br/&gt;
@@ -320,12 +305,6 @@ under the License.&lt;br/&gt;
 									&amp;lt;pattern&amp;gt;org.codehaus&amp;lt;/pattern&amp;gt;&lt;br/&gt;
 									&amp;lt;shadedPattern&amp;gt;org.apache.flink.table.shaded.org.codehaus&amp;lt;/shadedPattern&amp;gt;&lt;br/&gt;
 								&amp;lt;/relocation&amp;gt;--&amp;gt;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;&amp;lt;!-- commons-codec, commons-lang3, and commons-lang (from Calcite) --&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;relocation&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;pattern&amp;gt;org.apache.commons&amp;lt;/pattern&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;shadedPattern&amp;gt;org.apache.flink.table.shaded.org.apache.commons&amp;lt;/shadedPattern&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;/relocation&amp;gt;&lt;br/&gt;
 							&amp;lt;/relocations&amp;gt;&lt;br/&gt;
 						&amp;lt;/configuration&amp;gt;&lt;br/&gt;
 					&amp;lt;/execution&amp;gt;&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/AggregationCodeGenerator.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/AggregationCodeGenerator.scala&lt;br/&gt;
index 11c00080329..566e3d7cbc5 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/AggregationCodeGenerator.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/AggregationCodeGenerator.scala&lt;br/&gt;
@@ -21,7 +21,6 @@ import java.lang.reflect.Modifier&lt;br/&gt;
 import java.lang.
{Iterable =&amp;gt; JIterable}&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import org.apache.calcite.rex.RexLiteral&lt;br/&gt;
-import org.apache.commons.codec.binary.Base64&lt;br/&gt;
 import org.apache.flink.api.common.state.&lt;/p&gt;
{ListStateDescriptor, MapStateDescriptor, State, StateDescriptor}
&lt;p&gt; import org.apache.flink.api.common.typeinfo.&lt;/p&gt;
{BasicTypeInfo, TypeInformation}
&lt;p&gt; import org.apache.flink.api.java.typeutils.RowTypeInfo&lt;br/&gt;
@@ -36,8 +35,8 @@ import org.apache.flink.table.functions.aggfunctions.DistinctAccumulator&lt;br/&gt;
 import org.apache.flink.table.functions.utils.UserDefinedFunctionUtils&lt;br/&gt;
 import org.apache.flink.table.functions.utils.UserDefinedFunctionUtils.&lt;/p&gt;
{getUserDefinedMethod, signatureToString}
&lt;p&gt; import org.apache.flink.table.runtime.aggregate.&lt;/p&gt;
{GeneratedAggregations, SingleElementIterable}
&lt;p&gt;+import org.apache.flink.table.utils.EncodingUtils&lt;br/&gt;
 import org.apache.flink.types.Row&lt;br/&gt;
-import org.apache.flink.util.InstantiationUtil&lt;/p&gt;

&lt;p&gt; import scala.collection.mutable&lt;/p&gt;

&lt;p&gt;@@ -315,7 +314,7 @@ class AggregationCodeGenerator(&lt;br/&gt;
       val dataViewTypeTerm = dataViewField.getType.getCanonicalName&lt;/p&gt;

&lt;p&gt;       // define the DataView variables&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;val serializedData = serializeStateDescriptor(desc)&lt;br/&gt;
+      val serializedData = EncodingUtils.encodeObjectToString(desc)&lt;br/&gt;
       val dataViewFieldTerm = createDataViewTerm(aggIndex, dataViewField.getName)&lt;br/&gt;
       val field =&lt;br/&gt;
         s&quot;&quot;&quot;&lt;br/&gt;
@@ -329,9 +328,10 @@ class AggregationCodeGenerator(&lt;br/&gt;
       val descDeserializeCode =&lt;br/&gt;
         s&quot;&quot;&quot;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    $descClassQualifier $descFieldTerm = ($descClassQualifier)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
	&lt;li&gt;&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      org.apache.flink.util.InstantiationUtil.deserializeObject(&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
	&lt;li&gt;&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      org.apache.commons.codec.binary.Base64.decodeBase64(&quot;$serializedData&quot;),&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
	&lt;li&gt;&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      $contextTerm.getUserCodeClassLoader());&lt;br/&gt;
+           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      ${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;EncodingUtils&amp;#93;&lt;/span&gt;.getCanonicalName}.decodeStringToObject(&lt;br/&gt;
+           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        &quot;$serializedData&quot;,&lt;br/&gt;
+           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        $descClassQualifier.class,&lt;br/&gt;
+           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        $contextTerm.getUserCodeClassLoader());&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;&quot;&quot;.stripMargin&lt;br/&gt;
       val createDataView = if (dataViewField.getType == classOf[MapView&lt;span class=&quot;error&quot;&gt;&amp;#91;_, _&amp;#93;&lt;/span&gt;]) 
{
         s&quot;&quot;&quot;
@@ -770,10 +770,4 @@ class AggregationCodeGenerator(
 
     GeneratedAggregationsFunction(funcName, funcCode)
   }
&lt;p&gt;-&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
	&lt;li&gt;@throws&lt;span class=&quot;error&quot;&gt;&amp;#91;Exception&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;def serializeStateDescriptor(stateDescriptor: StateDescriptor&lt;span class=&quot;error&quot;&gt;&amp;#91;_, _&amp;#93;&lt;/span&gt;): String = 
{
-    val byteArray = InstantiationUtil.serializeObject(stateDescriptor)
-    Base64.encodeBase64URLSafeString(byteArray)
-  }
&lt;p&gt; }&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/CodeGenerator.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/CodeGenerator.scala&lt;br/&gt;
index 5d047adbc76..13bf50a5ef2 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/CodeGenerator.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/CodeGenerator.scala&lt;br/&gt;
@@ -26,7 +26,6 @@ import org.apache.calcite.sql.SqlOperator&lt;br/&gt;
 import org.apache.calcite.sql.`type`.SqlTypeName._&lt;br/&gt;
 import org.apache.calcite.sql.`type`.
{ReturnTypes, SqlTypeName}
&lt;p&gt; import org.apache.calcite.sql.fun.SqlStdOperatorTable.&lt;/p&gt;
{ROW, _}
&lt;p&gt;-import org.apache.commons.lang3.StringEscapeUtils&lt;br/&gt;
 import org.apache.flink.api.common.functions._&lt;br/&gt;
 import org.apache.flink.api.common.typeinfo._&lt;br/&gt;
 import org.apache.flink.api.common.typeutils.CompositeType&lt;br/&gt;
@@ -40,10 +39,10 @@ import org.apache.flink.table.codegen.GeneratedExpression.{ALWAYS_NULL, NEVER_NU&lt;br/&gt;
 import org.apache.flink.table.codegen.calls.ScalarOperators._&lt;br/&gt;
 import org.apache.flink.table.codegen.calls.&lt;/p&gt;
{CurrentTimePointCallGen, FunctionGenerator}
&lt;p&gt; import org.apache.flink.table.functions.sql.&lt;/p&gt;
{ProctimeSqlFunction, ScalarSqlFunctions, StreamRecordTimestampSqlFunction}
&lt;p&gt;-import org.apache.flink.table.functions.utils.UserDefinedFunctionUtils&lt;br/&gt;
 import org.apache.flink.table.functions.&lt;/p&gt;
{FunctionContext, UserDefinedFunction}
&lt;p&gt; import org.apache.flink.table.typeutils.TimeIndicatorTypeInfo&lt;br/&gt;
 import org.apache.flink.table.typeutils.TypeCheckUtils._&lt;br/&gt;
+import org.apache.flink.table.utils.EncodingUtils&lt;br/&gt;
 import org.joda.time.format.DateTimeFormatter&lt;/p&gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import scala.collection.JavaConversions._&lt;br/&gt;
@@ -681,7 +680,7 @@ abstract class CodeGenerator(&lt;br/&gt;
         generateNonNullLiteral(resultType, decimalField)&lt;/p&gt;

&lt;p&gt;       case VARCHAR | CHAR =&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;val escapedValue = StringEscapeUtils.ESCAPE_JAVA.translate(value.toString)&lt;br/&gt;
+        val escapedValue = EncodingUtils.escapeJava(value.toString)&lt;br/&gt;
         generateNonNullLiteral(resultType, &quot;\&quot;&quot; + escapedValue + &quot;\&quot;&quot;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       case SYMBOL =&amp;gt;&lt;br/&gt;
@@ -1610,7 +1609,7 @@ abstract class CodeGenerator(&lt;br/&gt;
     */&lt;br/&gt;
   def addReusableFunction(function: UserDefinedFunction, contextTerm: String = null): String = {&lt;br/&gt;
     val classQualifier = function.getClass.getCanonicalName&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;val functionSerializedData = UserDefinedFunctionUtils.serialize(function)&lt;br/&gt;
+    val functionSerializedData = EncodingUtils.encodeObjectToString(function)&lt;br/&gt;
     val fieldTerm = s&quot;function_${function.functionIdentifier}&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     val fieldFunction =&lt;br/&gt;
@@ -1622,8 +1621,9 @@ abstract class CodeGenerator(&lt;br/&gt;
     val functionDeserialization =&lt;br/&gt;
       s&quot;&quot;&quot;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;$fieldTerm = ($classQualifier)
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;${UserDefinedFunctionUtils.getClass.getName.stripSuffix(&quot;$&quot;)}
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;.deserialize(&quot;$functionSerializedData&quot;);&lt;br/&gt;
+         &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;EncodingUtils&amp;#93;&lt;/span&gt;.getCanonicalName}.decodeStringToObject(&lt;br/&gt;
+         &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  &quot;$functionSerializedData&quot;,&lt;br/&gt;
+         &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  ${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;UserDefinedFunction&amp;#93;&lt;/span&gt;.getCanonicalName}.class);&lt;br/&gt;
        &quot;&quot;&quot;.stripMargin&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;     reusableInitStatements.add(functionDeserialization)&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/MatchCodeGenerator.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/MatchCodeGenerator.scala&lt;br/&gt;
index a68bf8e87cf..791d3883f80 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/MatchCodeGenerator.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/MatchCodeGenerator.scala&lt;br/&gt;
@@ -23,7 +23,6 @@ import java.util&lt;/p&gt;

&lt;p&gt; import org.apache.calcite.rex._&lt;br/&gt;
 import org.apache.calcite.sql.fun.SqlStdOperatorTable._&lt;br/&gt;
-import org.apache.commons.lang3.StringEscapeUtils.escapeJava&lt;br/&gt;
 import org.apache.flink.api.common.functions._&lt;br/&gt;
 import org.apache.flink.api.common.typeinfo.&lt;/p&gt;
{SqlTimeTypeInfo, TypeInformation}
&lt;p&gt; import org.apache.flink.cep.pattern.conditions.IterativeCondition&lt;br/&gt;
@@ -33,6 +32,7 @@ import org.apache.flink.table.codegen.CodeGenUtils.{boxedTypeTermForTypeInfo, ne&lt;br/&gt;
 import org.apache.flink.table.codegen.GeneratedExpression.&lt;/p&gt;
{NEVER_NULL, NO_CODE}
&lt;p&gt; import org.apache.flink.table.codegen.Indenter.toISC&lt;br/&gt;
 import org.apache.flink.table.plan.schema.RowSchema&lt;br/&gt;
+import org.apache.flink.table.utils.EncodingUtils&lt;br/&gt;
 import org.apache.flink.util.Collector&lt;br/&gt;
 import org.apache.flink.util.MathUtils.checkedDownCast&lt;/p&gt;

&lt;p&gt;@@ -102,7 +102,7 @@ class MatchCodeGenerator(&lt;br/&gt;
   private def addReusablePatternNames() : Unit = {&lt;br/&gt;
     reusableMemberStatements&lt;br/&gt;
       .add(s&quot;private String[] $patternNamesTerm = new String[] { ${&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;patternNames.map(p =&amp;gt; s&quot;&quot;&quot;&quot;${escapeJava(p)}&quot;&quot;&quot;&quot;).mkString(&quot;, &quot;)&lt;br/&gt;
+        patternNames.map(p =&amp;gt; s&quot;&quot;&quot;&quot;${EncodingUtils.escapeJava(p)}&quot;&quot;&quot;&quot;).mkString(&quot;, &quot;)&lt;br/&gt;
       } };&quot;)&lt;br/&gt;
   }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -336,7 +336,7 @@ class MatchCodeGenerator(&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;}&lt;br/&gt;
          &quot;&quot;&quot;.stripMargin&lt;br/&gt;
     } else 
{
-      val escapedPatternName = escapeJava(patternName)
+      val escapedPatternName = EncodingUtils.escapeJava(patternName)
       j&quot;&quot;&quot;
          |java.util.List $listName = new java.util.ArrayList();
          |for ($eventTypeTerm $eventNameTerm :
@@ -373,7 +373,7 @@ class MatchCodeGenerator(
          |}
&lt;p&gt;          &quot;&quot;&quot;.stripMargin&lt;br/&gt;
     } else {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;val escapedPatternName = escapeJava(patternName)&lt;br/&gt;
+      val escapedPatternName = EncodingUtils.escapeJava(patternName)&lt;br/&gt;
       j&quot;&quot;&quot;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;java.util.List $listName = (java.util.List) $input1Term.get(&quot;$escapedPatternName&quot;);&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;if ($listName == null) 
{
@@ -427,7 +427,7 @@ class MatchCodeGenerator(
   }&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;   private def generatePatternFieldRef(fieldRef: RexPatternFieldRef): GeneratedExpression = {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;val escapedAlpha = escapeJava(fieldRef.getAlpha)&lt;br/&gt;
+    val escapedAlpha = EncodingUtils.escapeJava(fieldRef.getAlpha)&lt;br/&gt;
     val patternVariableRef = reusableInputUnboxingExprs&lt;br/&gt;
       .get((s&quot;$escapedAlpha#$first&quot;, offset)) match {&lt;br/&gt;
       // input access and unboxing has already been generated&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/HashCalcCallGen.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/HashCalcCallGen.scala&lt;br/&gt;
index d3be6e1b852..1ce8af8c528 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/HashCalcCallGen.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/HashCalcCallGen.scala&lt;br/&gt;
@@ -18,12 +18,13 @@&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; package org.apache.flink.table.codegen.calls&lt;/p&gt;

&lt;p&gt;-import org.apache.commons.codec.Charsets&lt;br/&gt;
-import org.apache.commons.codec.binary.Hex&lt;br/&gt;
+import java.nio.charset.StandardCharsets&lt;br/&gt;
+&lt;br/&gt;
 import org.apache.flink.api.common.typeinfo.BasicTypeInfo._&lt;br/&gt;
 import org.apache.flink.table.codegen.CodeGenUtils.newName&lt;br/&gt;
 import org.apache.flink.table.codegen.calls.CallGenerator.generateCallWithStmtIfArgsNotNull&lt;br/&gt;
 import org.apache.flink.table.codegen.&lt;/p&gt;
{CodeGenerator, GeneratedExpression}
&lt;p&gt;+import org.apache.flink.table.utils.EncodingUtils&lt;/p&gt;

&lt;p&gt; class HashCalcCallGen(algName: String) extends CallGenerator {&lt;/p&gt;

&lt;p&gt;@@ -68,9 +69,10 @@ class HashCalcCallGen(algName: String) extends CallGenerator {&lt;br/&gt;
         val auxiliaryStmt =&lt;br/&gt;
           s&quot;&quot;&quot;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;${initStmt.getOrElse(&quot;&quot;)}
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;$md.update(${terms.head}.getBytes(${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;Charsets&amp;#93;&lt;/span&gt;.getCanonicalName}.UTF_8));&lt;br/&gt;
+            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;$md.update(${terms.head}&lt;br/&gt;
+            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  .getBytes(${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;StandardCharsets&amp;#93;&lt;/span&gt;.getCanonicalName}.UTF_8));&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;&quot;&quot;.stripMargin
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;val result = s&quot;${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;Hex&amp;#93;&lt;/span&gt;.getCanonicalName}.encodeHexString($md.digest())&quot;&lt;br/&gt;
+        val result = s&quot;${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;EncodingUtils&amp;#93;&lt;/span&gt;.getCanonicalName}.hex($md.digest())&quot;&lt;br/&gt;
         (Some(auxiliaryStmt), result)&lt;br/&gt;
     }&lt;br/&gt;
   }&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/ScalarFunctionCallGen.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/ScalarFunctionCallGen.scala&lt;br/&gt;
index df206de6cad..b91ab5ad77f 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/ScalarFunctionCallGen.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/ScalarFunctionCallGen.scala&lt;br/&gt;
@@ -18,7 +18,6 @@&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; package org.apache.flink.table.codegen.calls&lt;/p&gt;

&lt;p&gt;-import org.apache.commons.lang3.ClassUtils&lt;br/&gt;
 import org.apache.flink.api.common.typeinfo.TypeInformation&lt;br/&gt;
 import org.apache.flink.table.codegen.CodeGenUtils._&lt;br/&gt;
 import org.apache.flink.table.codegen.&lt;/p&gt;
{CodeGenException, CodeGenerator, GeneratedExpression}
&lt;p&gt;@@ -68,7 +67,7 @@ class ScalarFunctionCallGen(&lt;br/&gt;
     val parameters = paramClasses.zip(operands).map { case (paramClass, operandExpr) =&amp;gt;&lt;br/&gt;
           if (paramClass.isPrimitive) &lt;/p&gt;
{
             operandExpr
-          } else if (ClassUtils.isPrimitiveWrapper(paramClass)&lt;br/&gt;
+          } else if (TypeCheckUtils.isPrimitiveWrapper(paramClass)&lt;br/&gt;
               &amp;amp;&amp;amp; TypeCheckUtils.isTemporal(operandExpr.resultType)) {&lt;br/&gt;
             // we use primitives to represent temporal types internally, so no casting needed here&lt;br/&gt;
             val exprOrNull: String = if (codeGenerator.nullCheck) {&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/TableFunctionCallGen.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/TableFunctionCallGen.scala&lt;br/&gt;
index e1ad18f988f..6bcfc6e2d61 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/TableFunctionCallGen.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/calls/TableFunctionCallGen.scala&lt;br/&gt;
@@ -18,7 +18,6 @@&lt;br/&gt;
 &lt;br/&gt;
 package org.apache.flink.table.codegen.calls&lt;br/&gt;
 &lt;br/&gt;
-import org.apache.commons.lang3.ClassUtils&lt;br/&gt;
 import org.apache.flink.api.common.typeinfo.TypeInformation&lt;br/&gt;
 import org.apache.flink.table.codegen.CodeGenUtils._&lt;br/&gt;
 import org.apache.flink.table.codegen.GeneratedExpression.NEVER_NULL&lt;br/&gt;
@@ -68,7 +67,7 @@ class TableFunctionCallGen(&lt;br/&gt;
     val parameters = paramClasses.zip(operands).map { case (paramClass, operandExpr) =&amp;gt;&lt;br/&gt;
           if (paramClass.isPrimitive) {             operandExpr-          }
&lt;p&gt; else if (ClassUtils.isPrimitiveWrapper(paramClass)&lt;br/&gt;
+          } else if (TypeCheckUtils.isPrimitiveWrapper(paramClass)&lt;br/&gt;
               &amp;amp;&amp;amp; TypeCheckUtils.isTemporal(operandExpr.resultType)) {&lt;br/&gt;
             // we use primitives to represent temporal types internally, so no casting needed here&lt;br/&gt;
             val exprOrNull: String = if (codeGenerator.nullCheck) {&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/expressions/literals.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/expressions/literals.scala&lt;br/&gt;
index 419c12567f1..24bae90fa10 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/expressions/literals.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/expressions/literals.scala&lt;br/&gt;
@@ -17,6 +17,9 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.flink.table.expressions&lt;/p&gt;

&lt;p&gt;+import java.sql.&lt;/p&gt;
{Date, Time, Timestamp}&lt;br/&gt;
+import java.util.{Calendar, TimeZone}&lt;br/&gt;
+&lt;br/&gt;
 import org.apache.calcite.avatica.util.TimeUnit&lt;br/&gt;
 import org.apache.calcite.rex.RexNode&lt;br/&gt;
 import org.apache.calcite.sql.SqlIntervalQualifier&lt;br/&gt;
@@ -27,10 +30,6 @@ import org.apache.calcite.util.{DateString, TimeString, TimestampString}&lt;br/&gt;
 import org.apache.flink.api.common.typeinfo.{BasicTypeInfo, SqlTimeTypeInfo, TypeInformation}&lt;br/&gt;
 import org.apache.flink.table.calcite.FlinkTypeFactory&lt;br/&gt;
 import org.apache.flink.table.typeutils.{RowIntervalTypeInfo, TimeIntervalTypeInfo}&lt;br/&gt;
-import java.sql.{Date, Time, Timestamp}
&lt;p&gt;-import java.util.&lt;/p&gt;
{Calendar, TimeZone}
&lt;p&gt;-&lt;br/&gt;
-import org.apache.commons.lang3.StringEscapeUtils&lt;/p&gt;

&lt;p&gt; object Literal {&lt;br/&gt;
   private&lt;span class=&quot;error&quot;&gt;&amp;#91;flink&amp;#93;&lt;/span&gt; val UTC = TimeZone.getTimeZone(&quot;UTC&quot;)&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/UserDefinedFunction.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/UserDefinedFunction.scala&lt;br/&gt;
index 15bcb171a1f..89ba0d4f364 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/UserDefinedFunction.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/UserDefinedFunction.scala&lt;br/&gt;
@@ -17,8 +17,8 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.flink.table.functions&lt;/p&gt;

&lt;p&gt;-import org.apache.commons.codec.digest.DigestUtils&lt;br/&gt;
-import org.apache.flink.table.functions.utils.UserDefinedFunctionUtils.serialize&lt;br/&gt;
+import org.apache.flink.table.utils.EncodingUtils&lt;br/&gt;
+&lt;br/&gt;
 /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Base class for all user-defined functions such as scalar functions, table functions,&lt;/li&gt;
	&lt;li&gt;or aggregation functions.&lt;br/&gt;
@@ -49,7 +49,7 @@ abstract class UserDefinedFunction extends Serializable {&lt;br/&gt;
   def isDeterministic: Boolean = true&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   final def functionIdentifier: String = &lt;/p&gt;
{
-    val md5 = DigestUtils.md5Hex(serialize(this))
+    val md5 = EncodingUtils.hex(EncodingUtils.md5(EncodingUtils.encodeObjectToString(this)))
     getClass.getCanonicalName.replace(&apos;.&apos;, &apos;$&apos;).concat(&quot;$&quot;).concat(md5)
   }

&lt;p&gt;diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/utils/UserDefinedFunctionUtils.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/utils/UserDefinedFunctionUtils.scala&lt;br/&gt;
index 9799e4d9f7f..c9a27036797 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/utils/UserDefinedFunctionUtils.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/utils/UserDefinedFunctionUtils.scala&lt;br/&gt;
@@ -19,28 +19,27 @@&lt;/p&gt;

&lt;p&gt; package org.apache.flink.table.functions.utils&lt;/p&gt;

&lt;p&gt;-import java.util&lt;br/&gt;
-import java.lang.&lt;/p&gt;
{Integer =&amp;gt; JInt, Long =&amp;gt; JLong}&lt;br/&gt;
 import java.lang.reflect.{Method, Modifier}&lt;br/&gt;
+import java.lang.{Integer =&amp;gt; JInt, Long =&amp;gt; JLong}
&lt;p&gt; import java.sql.&lt;/p&gt;
{Date, Time, Timestamp}
&lt;p&gt;+import java.util&lt;/p&gt;

&lt;p&gt;-import org.apache.commons.codec.binary.Base64&lt;br/&gt;
 import com.google.common.primitives.Primitives&lt;br/&gt;
 import org.apache.calcite.rel.`type`.RelDataType&lt;br/&gt;
 import org.apache.calcite.sql.`type`.SqlOperandTypeChecker.Consistency&lt;br/&gt;
 import org.apache.calcite.sql.`type`._&lt;br/&gt;
-import org.apache.calcite.sql.&lt;/p&gt;
{SqlCallBinding, SqlFunction, SqlOperandCountRange, SqlOperator, SqlOperatorBinding}
&lt;p&gt;+import org.apache.calcite.sql.&lt;/p&gt;
{SqlCallBinding, SqlFunction, SqlOperandCountRange, SqlOperator}
&lt;p&gt; import org.apache.flink.api.common.functions.InvalidTypesException&lt;br/&gt;
 import org.apache.flink.api.common.typeinfo.TypeInformation&lt;br/&gt;
 import org.apache.flink.api.common.typeutils.CompositeType&lt;br/&gt;
 import org.apache.flink.api.java.typeutils.&lt;/p&gt;
{PojoField, PojoTypeInfo, TypeExtractor}
&lt;p&gt; import org.apache.flink.table.api.dataview._&lt;br/&gt;
-import org.apache.flink.table.dataview._&lt;br/&gt;
-import org.apache.flink.table.calcite.FlinkTypeFactory&lt;br/&gt;
 import org.apache.flink.table.api.&lt;/p&gt;
{TableEnvironment, TableException, ValidationException}
&lt;p&gt;+import org.apache.flink.table.calcite.FlinkTypeFactory&lt;br/&gt;
+import org.apache.flink.table.dataview._&lt;br/&gt;
 import org.apache.flink.table.expressions._&lt;br/&gt;
-import org.apache.flink.table.plan.logical._&lt;br/&gt;
 import org.apache.flink.table.functions.&lt;/p&gt;
{AggregateFunction, ScalarFunction, TableFunction, UserDefinedFunction}
&lt;p&gt;+import org.apache.flink.table.plan.logical._&lt;br/&gt;
 import org.apache.flink.table.plan.schema.FlinkTableFunctionImpl&lt;br/&gt;
 import org.apache.flink.util.InstantiationUtil&lt;/p&gt;

&lt;p&gt;@@ -734,19 +733,6 @@ object UserDefinedFunctionUtils {&lt;br/&gt;
       (candidate.getComponentType == expected.getComponentType ||&lt;br/&gt;
         expected.getComponentType == classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;Object&amp;#93;&lt;/span&gt;))&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@throws&lt;span class=&quot;error&quot;&gt;&amp;#91;Exception&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;def serialize(function: UserDefinedFunction): String = 
{
-    val byteArray = InstantiationUtil.serializeObject(function)
-    Base64.encodeBase64URLSafeString(byteArray)
-  }
&lt;p&gt;-&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@throws&lt;span class=&quot;error&quot;&gt;&amp;#91;Exception&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;def deserialize(data: String): UserDefinedFunction = 
{
-    val byteData = Base64.decodeBase64(data)
-    InstantiationUtil
-      .deserializeObject[UserDefinedFunction](byteData, Thread.currentThread.getContextClassLoader)
-  }
&lt;p&gt;-&lt;br/&gt;
   /**&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;Creates a [&lt;span class=&quot;error&quot;&gt;&amp;#91;LogicalTableFunctionCall&amp;#93;&lt;/span&gt;] by parsing a String expression.&lt;br/&gt;
     *&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/TreeNode.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/TreeNode.scala&lt;br/&gt;
index fdf45e79af5..097346ab613 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/TreeNode.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/TreeNode.scala&lt;br/&gt;
@@ -17,7 +17,7 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.flink.table.plan&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-import org.apache.commons.lang.ClassUtils&lt;br/&gt;
+import org.apache.flink.table.typeutils.TypeCheckUtils&lt;/p&gt;

&lt;p&gt; /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Generic base class for trees that can be transformed and traversed.&lt;br/&gt;
@@ -88,28 +88,28 @@ abstract class TreeNode[A &amp;lt;: TreeNode&lt;span class=&quot;error&quot;&gt;&amp;#91;A&amp;#93;&lt;/span&gt;] extends Product { self: A =&amp;gt;&lt;/li&gt;
	&lt;li&gt;if children change.&lt;br/&gt;
    */&lt;br/&gt;
   private&lt;span class=&quot;error&quot;&gt;&amp;#91;flink&amp;#93;&lt;/span&gt; def makeCopy(newArgs: Array&lt;span class=&quot;error&quot;&gt;&amp;#91;AnyRef&amp;#93;&lt;/span&gt;): A = {&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;val ctors = getClass.getConstructors.filter(_.getParameterTypes.size &amp;gt; 0)&lt;br/&gt;
+    val ctors = getClass.getConstructors.filter(_.getParameterTypes.length &amp;gt; 0)&lt;br/&gt;
     if (ctors.isEmpty) {&lt;br/&gt;
       throw new RuntimeException(s&quot;No valid constructor for ${getClass.getSimpleName}&quot;)&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     val defaultCtor = ctors.find { ctor =&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (ctor.getParameterTypes.size != newArgs.length) {&lt;br/&gt;
+      if (ctor.getParameterTypes.length != newArgs.length) 
{
         false
       } else if (newArgs.contains(null)) {         false       }
&lt;p&gt; else &lt;/p&gt;
{
         val argsClasses: Array[Class[_]] = newArgs.map(_.getClass)
-        ClassUtils.isAssignable(argsClasses, ctor.getParameterTypes)
+        TypeCheckUtils.isAssignable(argsClasses, ctor.getParameterTypes)
       }&lt;/li&gt;
	&lt;li&gt;}.getOrElse(ctors.maxBy(_.getParameterTypes.size))&lt;br/&gt;
+    }.getOrElse(ctors.maxBy(_.getParameterTypes.length))&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     try &lt;/p&gt;
{
       defaultCtor.newInstance(newArgs: _*).asInstanceOf[A]
     }
&lt;p&gt; catch {&lt;br/&gt;
       case e: Throwable =&amp;gt;&lt;br/&gt;
         throw new RuntimeException(&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;s&quot;Fail to copy treeNode ${getClass.getName}: ${e.getStackTraceString}&quot;)&lt;br/&gt;
+          s&quot;Fail to copy tree node ${getClass.getName}.&quot;, e)&lt;br/&gt;
     }&lt;br/&gt;
   }&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/runtime/functions/ScalarFunctions.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/runtime/functions/ScalarFunctions.scala&lt;br/&gt;
index da7cf64b13e..a2acb0cecc7 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/runtime/functions/ScalarFunctions.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/runtime/functions/ScalarFunctions.scala&lt;br/&gt;
@@ -19,12 +19,9 @@ package org.apache.flink.table.runtime.functions&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import java.lang.&lt;/p&gt;
{StringBuilder, Long =&amp;gt; JLong}
&lt;p&gt; import java.math.&lt;/p&gt;
{BigDecimal =&amp;gt; JBigDecimal}
&lt;p&gt;-import java.nio.charset.StandardCharsets&lt;br/&gt;
-import java.util.regex.Matcher&lt;br/&gt;
-import java.util.regex.Pattern&lt;br/&gt;
+import java.util.regex.&lt;/p&gt;
{Matcher, Pattern}

&lt;p&gt;-import org.apache.commons.codec.binary.&lt;/p&gt;
{Base64, Hex}
&lt;p&gt;-import org.apache.commons.lang3.StringUtils&lt;br/&gt;
+import org.apache.flink.table.utils.EncodingUtils&lt;/p&gt;

&lt;p&gt; import scala.annotation.varargs&lt;/p&gt;

&lt;p&gt;@@ -269,25 +266,25 @@ object ScalarFunctions {&lt;br/&gt;
   /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Returns the base string decoded with base64.&lt;br/&gt;
     */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;def fromBase64(str: String): String =&lt;/li&gt;
	&lt;li&gt;new String(Base64.decodeBase64(str), StandardCharsets.UTF_8)&lt;br/&gt;
+  def fromBase64(base64: String): String =&lt;br/&gt;
+    EncodingUtils.decodeBase64ToString(base64)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Returns the base64-encoded result of the input string.&lt;br/&gt;
     */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;def toBase64(base: String): String =&lt;/li&gt;
	&lt;li&gt;Base64.encodeBase64String(base.getBytes(StandardCharsets.UTF_8))&lt;br/&gt;
+  def toBase64(string: String): String =&lt;br/&gt;
+    EncodingUtils.encodeStringToBase64(string)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Returns the hex string of a long argument.&lt;br/&gt;
     */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;def hex(x: Long): String = JLong.toHexString&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.toUpperCase()&lt;br/&gt;
+  def hex(string: Long): String = JLong.toHexString(string).toUpperCase()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Returns the hex string of a string argument.&lt;br/&gt;
     */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;def hex(x: String): String =&lt;/li&gt;
	&lt;li&gt;Hex.encodeHexString(x.getBytes(StandardCharsets.UTF_8)).toUpperCase()&lt;br/&gt;
+  def hex(string: String): String =&lt;br/&gt;
+    EncodingUtils.hex(string).toUpperCase()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Returns an UUID string using Java utilities.&lt;br/&gt;
@@ -297,6 +294,6 @@ object ScalarFunctions 
{
   /**
     * Returns a string that repeats the base string n times.
     */
-  def repeat(base: String, n: Int): String = StringUtils.repeat(base, n)
+  def repeat(base: String, n: Int): String = EncodingUtils.repeat(base, n)
 
 }
&lt;p&gt;diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/typeutils/TypeCheckUtils.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/typeutils/TypeCheckUtils.scala&lt;br/&gt;
index 02af79843a4..25367ad4dd8 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/typeutils/TypeCheckUtils.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/typeutils/TypeCheckUtils.scala&lt;br/&gt;
@@ -183,4 +183,95 @@ object TypeCheckUtils {&lt;br/&gt;
       }&lt;br/&gt;
     }&lt;br/&gt;
   }&lt;br/&gt;
+&lt;br/&gt;
+  /**&lt;br/&gt;
+    * Checks if a class is a Java primitive wrapper.&lt;br/&gt;
+    */&lt;br/&gt;
+  def isPrimitiveWrapper(clazz: Class&lt;span class=&quot;error&quot;&gt;&amp;#91;_&amp;#93;&lt;/span&gt;): Boolean = 
{
+    clazz == classOf[java.lang.Boolean] ||
+    clazz == classOf[java.lang.Byte] ||
+    clazz == classOf[java.lang.Character] ||
+    clazz == classOf[java.lang.Short] ||
+    clazz == classOf[java.lang.Integer] ||
+    clazz == classOf[java.lang.Long] ||
+    clazz == classOf[java.lang.Double] ||
+    clazz == classOf[java.lang.Float]
+  }
&lt;p&gt;+&lt;br/&gt;
+  /**&lt;br/&gt;
+    * Checks if one class can be assigned to a variable of another class.&lt;br/&gt;
+    *&lt;br/&gt;
+    * Adopted from o.a.commons.lang.ClassUtils#isAssignable(java.lang.Class[], java.lang.Class[])&lt;br/&gt;
+    * but without null checks.&lt;br/&gt;
+    */&lt;br/&gt;
+  def isAssignable(classArray: Array[Class&lt;span class=&quot;error&quot;&gt;&amp;#91;_&amp;#93;&lt;/span&gt;], toClassArray: Array[Class&lt;span class=&quot;error&quot;&gt;&amp;#91;_&amp;#93;&lt;/span&gt;]): Boolean = {&lt;br/&gt;
+    if (classArray.length != toClassArray.length) &lt;/p&gt;
{
+      return false
+    }
&lt;p&gt;+    var i = 0&lt;br/&gt;
+    while (i &amp;lt; classArray.length) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+      if (!isAssignable(classArray(i), toClassArray(i))) {
+        return false
+      }&lt;br/&gt;
+      i += 1&lt;br/&gt;
+    }&lt;br/&gt;
+    true&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  /**&lt;br/&gt;
+    * Checks if one class can be assigned to a variable of another class.&lt;br/&gt;
+    *&lt;br/&gt;
+    * Adopted from o.a.commons.lang.ClassUtils#isAssignable(java.lang.Class, java.lang.Class) but&lt;br/&gt;
+    * without null checks.&lt;br/&gt;
+    */&lt;br/&gt;
+  def isAssignable(cls: Class&lt;span class=&quot;error&quot;&gt;&amp;#91;_&amp;#93;&lt;/span&gt;, toClass: Class&lt;span class=&quot;error&quot;&gt;&amp;#91;_&amp;#93;&lt;/span&gt;): Boolean = {&lt;br/&gt;
+    if (cls.equals(toClass)) {
+      return true
+    }&lt;br/&gt;
+    if (cls.isPrimitive) {&lt;br/&gt;
+      if (!toClass.isPrimitive) {+        return false+      }+      if (java.lang.Integer.TYPE.equals(cls)) {
+        return java.lang.Long.TYPE.equals(toClass) ||
+          java.lang.Float.TYPE.equals(toClass) ||
+          java.lang.Double.TYPE.equals(toClass)
+      }+      if (java.lang.Long.TYPE.equals(cls)) {
+        return java.lang.Float.TYPE.equals(toClass) ||
+          java.lang.Double.TYPE.equals(toClass)
+      }+      if (java.lang.Boolean.TYPE.equals(cls)) {
+        return false
+      }&lt;br/&gt;
+      if (java.lang.Double.TYPE.equals(cls)) {+        return false+      }+      if (java.lang.Float.TYPE.equals(cls)) {
+          return java.lang.Double.TYPE.equals(toClass)
+      }+      if (java.lang.Character.TYPE.equals(cls)) {
+          return java.lang.Integer.TYPE.equals(toClass) ||
+            java.lang.Long.TYPE.equals(toClass) ||
+            java.lang.Float.TYPE.equals(toClass) ||
+            java.lang.Double.TYPE.equals(toClass)
+      }&lt;br/&gt;
+      if (java.lang.Short.TYPE.equals(cls)) {+          return java.lang.Integer.TYPE.equals(toClass) ||+            java.lang.Long.TYPE.equals(toClass) ||+            java.lang.Float.TYPE.equals(toClass) ||+            java.lang.Double.TYPE.equals(toClass)+      }+      if (java.lang.Byte.TYPE.equals(cls)) {
+          return java.lang.Short.TYPE.equals(toClass) ||
+            java.lang.Integer.TYPE.equals(toClass) ||
+            java.lang.Long.TYPE.equals(toClass) ||
+            java.lang.Float.TYPE.equals(toClass) ||
+            java.lang.Double.TYPE.equals(toClass)
+      }+      // should never get here+      return false+    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+    toClass.isAssignableFrom(cls)&lt;br/&gt;
+  }&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/test/scala/org/apache/flink/table/runtime/harness/HarnessTestBase.scala b/flink-libraries/flink-table/src/test/scala/org/apache/flink/table/runtime/harness/HarnessTestBase.scala&lt;br/&gt;
index 28b7d14ac33..f70d991e50b 100644&lt;/p&gt;&lt;/li&gt;
			&lt;li&gt;a/flink-libraries/flink-table/src/test/scala/org/apache/flink/table/runtime/harness/HarnessTestBase.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/test/scala/org/apache/flink/table/runtime/harness/HarnessTestBase.scala&lt;br/&gt;
@@ -30,12 +30,12 @@ import org.apache.flink.streaming.runtime.streamrecord.StreamRecord&lt;br/&gt;
 import org.apache.flink.streaming.util.
{KeyedOneInputStreamOperatorTestHarness, TestHarnessUtil}
&lt;p&gt; import org.apache.flink.table.api.StreamQueryConfig&lt;br/&gt;
 import org.apache.flink.table.codegen.GeneratedAggregationsFunction&lt;br/&gt;
-import org.apache.flink.table.functions.AggregateFunction&lt;br/&gt;
-import org.apache.flink.table.functions.utils.UserDefinedFunctionUtils&lt;br/&gt;
+import org.apache.flink.table.functions.&lt;/p&gt;
{AggregateFunction, UserDefinedFunction}
&lt;p&gt; import org.apache.flink.table.functions.aggfunctions.&lt;/p&gt;
{IntSumWithRetractAggFunction, LongMaxWithRetractAggFunction, LongMinWithRetractAggFunction}
&lt;p&gt; import org.apache.flink.table.functions.utils.UserDefinedFunctionUtils.getAccumulatorTypeOfAggregateFunction&lt;br/&gt;
 import org.apache.flink.table.runtime.harness.HarnessTestBase.&lt;/p&gt;
{RowResultSortComparator, RowResultSortComparatorWithWatermarks}
&lt;p&gt; import org.apache.flink.table.runtime.types.&lt;/p&gt;
{CRow, CRowTypeInfo}
&lt;p&gt;+import org.apache.flink.table.utils.EncodingUtils&lt;br/&gt;
 import org.junit.Rule&lt;br/&gt;
 import org.junit.rules.ExpectedException&lt;/p&gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -47,13 +47,13 @@ class HarnessTestBase {&lt;br/&gt;
   def thrown = expectedException&lt;/p&gt;

&lt;p&gt;   val longMinWithRetractAggFunction: String =&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;UserDefinedFunctionUtils.serialize(new LongMinWithRetractAggFunction)&lt;br/&gt;
+    EncodingUtils.encodeObjectToString(new LongMinWithRetractAggFunction)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   val longMaxWithRetractAggFunction: String =&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;UserDefinedFunctionUtils.serialize(new LongMaxWithRetractAggFunction)&lt;br/&gt;
+    EncodingUtils.encodeObjectToString(new LongMaxWithRetractAggFunction)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   val intSumWithRetractAggFunction: String =&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;UserDefinedFunctionUtils.serialize(new IntSumWithRetractAggFunction)&lt;br/&gt;
+    EncodingUtils.encodeObjectToString(new IntSumWithRetractAggFunction)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   protected val MinMaxRowType = new RowTypeInfo(Array[TypeInformation&lt;span class=&quot;error&quot;&gt;&amp;#91;_&amp;#93;&lt;/span&gt;](&lt;br/&gt;
     LONG_TYPE_INFO,&lt;br/&gt;
@@ -97,12 +97,14 @@ class HarnessTestBase {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  public MinMaxAggregateHelper() throws Exception {&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    fmin = (org.apache.flink.table.functions.aggfunctions.LongMinWithRetractAggFunction)
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    org.apache.flink.table.functions.utils.UserDefinedFunctionUtils
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    .deserialize(&quot;$longMinWithRetractAggFunction&quot;);&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    ${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;EncodingUtils&amp;#93;&lt;/span&gt;.getCanonicalName}.decodeStringToObject(&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      &quot;$longMinWithRetractAggFunction&quot;,&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      ${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;UserDefinedFunction&amp;#93;&lt;/span&gt;.getCanonicalName}.class);&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    fmax = (org.apache.flink.table.functions.aggfunctions.LongMaxWithRetractAggFunction)
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    org.apache.flink.table.functions.utils.UserDefinedFunctionUtils
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    .deserialize(&quot;$longMaxWithRetractAggFunction&quot;);&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    ${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;EncodingUtils&amp;#93;&lt;/span&gt;.getCanonicalName}.decodeStringToObject(&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      &quot;$longMaxWithRetractAggFunction&quot;,&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      ${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;UserDefinedFunction&amp;#93;&lt;/span&gt;.getCanonicalName}.class);&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  }&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  public void setAggregationResults(&lt;br/&gt;
@@ -220,8 +222,9 @@ class HarnessTestBase {&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  public SumAggregationHelper() throws Exception {&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;sum = (org.apache.flink.table.functions.aggfunctions.IntSumWithRetractAggFunction)
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;org.apache.flink.table.functions.utils.UserDefinedFunctionUtils
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;.deserialize(&quot;$intSumWithRetractAggFunction&quot;);&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;EncodingUtils&amp;#93;&lt;/span&gt;.getCanonicalName}.decodeStringToObject(&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  &quot;$intSumWithRetractAggFunction&quot;,&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  ${classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;UserDefinedFunction&amp;#93;&lt;/span&gt;.getCanonicalName}.class);&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;}&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  public final void setAggregationResults(&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/test/scala/org/apache/flink/table/typeutils/TypeCheckUtilsTest.scala b/flink-libraries/flink-table/src/test/scala/org/apache/flink/table/typeutils/TypeCheckUtilsTest.scala&lt;br/&gt;
index 645e6089bd0..8f5ff545e88 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table/src/test/scala/org/apache/flink/table/typeutils/TypeCheckUtilsTest.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/test/scala/org/apache/flink/table/typeutils/TypeCheckUtilsTest.scala&lt;br/&gt;
@@ -22,6 +22,7 @@ import org.apache.flink.api.scala._&lt;br/&gt;
 import org.apache.flink.api.scala.typeutils.
{Types =&amp;gt; ScalaTypes}
&lt;p&gt; import org.apache.flink.table.api.&lt;/p&gt;
{Types, ValidationException}
&lt;p&gt; import org.apache.flink.table.typeutils.TypeCheckUtils.validateEqualsHashCode&lt;br/&gt;
+import org.junit.Assert.&lt;/p&gt;
{assertFalse, assertTrue}
&lt;p&gt; import org.junit.Test&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; class TypeCheckUtilsTest {&lt;br/&gt;
@@ -51,4 +52,24 @@ class TypeCheckUtilsTest {&lt;br/&gt;
   def testInvalidType3(): Unit = &lt;/p&gt;
{
     validateEqualsHashCode(&quot;&quot;, Types.OBJECT_ARRAY[Nothing](ScalaTypes.NOTHING))
   }
&lt;p&gt;+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  def testPrimitiveWrapper (): Unit = &lt;/p&gt;
{
+    assertTrue(TypeCheckUtils.isPrimitiveWrapper(classOf[java.lang.Double]))
+    assertFalse(TypeCheckUtils.isPrimitiveWrapper(classOf[Double]))
+  }
&lt;p&gt;+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  def testAssignability(): Unit = &lt;/p&gt;
{
+    assertTrue(TypeCheckUtils.isAssignable(classOf[Double], classOf[Double]))
+    assertFalse(TypeCheckUtils.isAssignable(classOf[Boolean], classOf[Double]))
+    assertTrue(TypeCheckUtils.isAssignable(
+      classOf[java.util.HashMap[_, _]], classOf[java.util.Map[_, _]]))
+    assertFalse(TypeCheckUtils.isAssignable(
+      classOf[java.util.Map[_, _]], classOf[java.util.HashMap[_, _]]))
+
+    assertTrue(TypeCheckUtils.isAssignable(
+      Array[Class[_]](classOf[Double], classOf[Double]),
+      Array[Class[_]](classOf[Double], classOf[Double])))
+  }
&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669805" author="githubbot" created="Wed, 31 Oct 2018 09:15:00 +0000"  >&lt;p&gt;twalthr commented on issue #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863#issuecomment-434614175&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863#issuecomment-434614175&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I tried to fix this issue once and for all in #6966. This PR had to be rebased to the new `flink-table-common` module anyway. I will close this PR. Sorry, for the inconvenience.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669806" author="githubbot" created="Wed, 31 Oct 2018 09:15:00 +0000"  >&lt;p&gt;twalthr closed pull request #6863: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10166&quot; title=&quot;Dependency problems when executing SQL query in sql-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10166&quot;&gt;&lt;del&gt;FLINK-10166&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Replace commons.codec.binary.Base64 with java.util.Base64&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6863&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6863&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/AggregationCodeGenerator.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/AggregationCodeGenerator.scala&lt;br/&gt;
index 11c00080329..c7a6a64ab94 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/AggregationCodeGenerator.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/codegen/AggregationCodeGenerator.scala&lt;br/&gt;
@@ -21,7 +21,6 @@ import java.lang.reflect.Modifier&lt;br/&gt;
 import java.lang.&lt;/p&gt;
{Iterable =&amp;gt; JIterable}

&lt;p&gt; import org.apache.calcite.rex.RexLiteral&lt;br/&gt;
-import org.apache.commons.codec.binary.Base64&lt;br/&gt;
 import org.apache.flink.api.common.state.&lt;/p&gt;
{ListStateDescriptor, MapStateDescriptor, State, StateDescriptor}
&lt;p&gt; import org.apache.flink.api.common.typeinfo.&lt;/p&gt;
{BasicTypeInfo, TypeInformation}
&lt;p&gt; import org.apache.flink.api.java.typeutils.RowTypeInfo&lt;br/&gt;
@@ -330,7 +329,7 @@ class AggregationCodeGenerator(&lt;br/&gt;
         s&quot;&quot;&quot;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    $descClassQualifier $descFieldTerm = ($descClassQualifier)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      org.apache.flink.util.InstantiationUtil.deserializeObject(
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      org.apache.commons.codec.binary.Base64.decodeBase64(&quot;$serializedData&quot;),&lt;br/&gt;
+           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      java.util.Base64.getUrlDecoder().decode(&quot;$serializedData&quot;.getBytes(&quot;UTF-8&quot;)),&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;      $contextTerm.getUserCodeClassLoader());&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;&quot;&quot;.stripMargin&lt;br/&gt;
       val createDataView = if (dataViewField.getType == classOf[MapView&lt;span class=&quot;error&quot;&gt;&amp;#91;_, _&amp;#93;&lt;/span&gt;]) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {@@ -774,6 +773,6 @@ class AggregationCodeGenerator(   @throws&lt;span class=&quot;error&quot;&gt;&amp;#91;Exception&amp;#93;&lt;/span&gt;   def serializeStateDescriptor(stateDescriptor}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/descriptors/DescriptorProperties.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/descriptors/DescriptorProperties.scala&lt;br/&gt;
index 9328c806913..4177c3a1620 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/descriptors/DescriptorProperties.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/descriptors/DescriptorProperties.scala&lt;br/&gt;
@@ -26,7 +26,6 @@ import java.util.function.&lt;/p&gt;
{Consumer, Supplier}
&lt;p&gt; import java.util.regex.Pattern&lt;br/&gt;
 import java.util.&lt;/p&gt;
{Optional, List =&amp;gt; JList, Map =&amp;gt; JMap}&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;-import org.apache.commons.codec.binary.Base64&lt;br/&gt;
 import org.apache.commons.lang.StringEscapeUtils&lt;br/&gt;
 import org.apache.flink.api.common.typeinfo.TypeInformation&lt;br/&gt;
 import org.apache.flink.api.java.tuple.&lt;/p&gt;
{Tuple2 =&amp;gt; JTuple2}
&lt;p&gt;@@ -1356,7 +1355,7 @@ object DescriptorProperties {&lt;br/&gt;
     }&lt;br/&gt;
     try &lt;/p&gt;
{
       val byteArray = InstantiationUtil.serializeObject(obj)
-      Base64.encodeBase64URLSafeString(byteArray)
+      new String(java.util.Base64.getUrlEncoder.withoutPadding().encode(byteArray), &quot;UTF-8&quot;)
     } catch {&lt;br/&gt;
       case e: Exception =&amp;gt;&lt;br/&gt;
         throw new ValidationException(&lt;br/&gt;
@@ -1366,7 +1365,7 @@ object DescriptorProperties {&lt;br/&gt;
 &lt;br/&gt;
   def deserialize&lt;span class=&quot;error&quot;&gt;&amp;#91;T&amp;#93;&lt;/span&gt;(data: String, expected: Class&lt;span class=&quot;error&quot;&gt;&amp;#91;T&amp;#93;&lt;/span&gt;): T = {&lt;br/&gt;
     try {&lt;br/&gt;
-      val byteData = Base64.decodeBase64(data)&lt;br/&gt;
+      val byteData = java.util.Base64.getUrlDecoder.decode(data.getBytes(&quot;UTF-8&quot;))&lt;br/&gt;
       val obj = InstantiationUtil.deserializeObject&lt;span class=&quot;error&quot;&gt;&amp;#91;T&amp;#93;&lt;/span&gt;(&lt;br/&gt;
         byteData,&lt;br/&gt;
         Thread.currentThread.getContextClassLoader)&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/utils/UserDefinedFunctionUtils.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/utils/UserDefinedFunctionUtils.scala&lt;br/&gt;
index 2c08001d20c..7e5128cf939 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/utils/UserDefinedFunctionUtils.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/functions/utils/UserDefinedFunctionUtils.scala&lt;br/&gt;
@@ -24,7 +24,6 @@ import java.lang.{Integer =&amp;gt; JInt, Long =&amp;gt; JLong}&lt;br/&gt;
 import java.lang.reflect.{Method, Modifier}&lt;br/&gt;
 import java.sql.{Date, Time, Timestamp}&lt;br/&gt;
 &lt;br/&gt;
-import org.apache.commons.codec.binary.Base64&lt;br/&gt;
 import com.google.common.primitives.Primitives&lt;br/&gt;
 import org.apache.calcite.rel.`type`.RelDataType&lt;br/&gt;
 import org.apache.calcite.sql.`type`.SqlOperandTypeChecker.Consistency&lt;br/&gt;
@@ -736,12 +735,12 @@ object UserDefinedFunctionUtils {&lt;br/&gt;
   @throws&lt;span class=&quot;error&quot;&gt;&amp;#91;Exception&amp;#93;&lt;/span&gt;&lt;br/&gt;
   def serialize(function: UserDefinedFunction): String = {
     val byteArray = InstantiationUtil.serializeObject(function)
-    Base64.encodeBase64URLSafeString(byteArray)
+    new String(java.util.Base64.getUrlEncoder.withoutPadding().encode(byteArray), &quot;UTF-8&quot;)
   }&lt;br/&gt;
 &lt;br/&gt;
   @throws&lt;span class=&quot;error&quot;&gt;&amp;#91;Exception&amp;#93;&lt;/span&gt;&lt;br/&gt;
   def deserialize(data: String): UserDefinedFunction = {
-    val byteData = Base64.decodeBase64(data)
+    val byteData = java.util.Base64.getUrlDecoder.decode(data.getBytes(&quot;UTF-8&quot;))
     InstantiationUtil
       .deserializeObject[UserDefinedFunction](byteData, Thread.currentThread.getContextClassLoader)
   }&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/runtime/functions/ScalarFunctions.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/runtime/functions/ScalarFunctions.scala&lt;br/&gt;
index 1db4da2f899..c1fe846f8c0 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/runtime/functions/ScalarFunctions.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/runtime/functions/ScalarFunctions.scala&lt;br/&gt;
@@ -23,7 +23,7 @@ import java.nio.charset.StandardCharsets&lt;br/&gt;
 import java.util.regex.Matcher&lt;br/&gt;
 import java.util.regex.Pattern&lt;br/&gt;
 &lt;br/&gt;
-import org.apache.commons.codec.binary.{Base64, Hex}&lt;br/&gt;
+import org.apache.commons.codec.binary.Hex&lt;br/&gt;
 import org.apache.commons.lang3.StringUtils&lt;br/&gt;
 &lt;br/&gt;
 import scala.annotation.varargs&lt;br/&gt;
@@ -256,13 +256,15 @@ object ScalarFunctions {&lt;br/&gt;
     * Returns the base string decoded with base64.&lt;br/&gt;
     */&lt;br/&gt;
   def fromBase64(str: String): String =&lt;br/&gt;
-    new String(Base64.decodeBase64(str), StandardCharsets.UTF_8)&lt;br/&gt;
+    new String(java.util.Base64.getDecoder.decode(str.getBytes(&quot;UTF-8&quot;)), &quot;UTF-8&quot;)&lt;br/&gt;
 &lt;br/&gt;
   /**&lt;br/&gt;
     * Returns the base64-encoded result of the input string.&lt;br/&gt;
     */&lt;br/&gt;
   def toBase64(base: String): String =&lt;br/&gt;
-    Base64.encodeBase64String(base.getBytes(StandardCharsets.UTF_8))&lt;br/&gt;
+    new String(&lt;br/&gt;
+      java.util.Base64.getEncoder.encode(base.getBytes(&quot;UTF-8&quot;)),&lt;br/&gt;
+      &quot;UTF-8&quot;)&lt;br/&gt;
 &lt;br/&gt;
   /**&lt;br/&gt;
     * Returns the hex string of a long argument.&lt;br/&gt;
diff --git a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/typeutils/TypeStringUtils.scala b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/typeutils/TypeStringUtils.scala&lt;br/&gt;
index 9e5f075cd4b..264ab4ee77e 100644&lt;br/&gt;
&amp;#8212; a/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/typeutils/TypeStringUtils.scala&lt;br/&gt;
+++ b/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/typeutils/TypeStringUtils.scala&lt;br/&gt;
@@ -20,7 +20,6 @@ package org.apache.flink.table.typeutils&lt;br/&gt;
 &lt;br/&gt;
 import java.io.Serializable&lt;br/&gt;
 &lt;br/&gt;
-import org.apache.commons.codec.binary.Base64&lt;br/&gt;
 import org.apache.commons.lang3.StringEscapeUtils&lt;br/&gt;
 import org.apache.flink.api.common.functions.InvalidTypesException&lt;br/&gt;
 import org.apache.flink.api.common.typeinfo.{PrimitiveArrayTypeInfo, TypeInformation}&lt;br/&gt;
@@ -267,7 +266,7 @@ object TypeStringUtils extends JavaTokenParsers with PackratParsers {&lt;br/&gt;
   private def serialize(obj: Serializable): String = {&lt;br/&gt;
     try {       val byteArray = InstantiationUtil.serializeObject(obj)-      Base64.encodeBase64URLSafeString(byteArray)+      new String(java.util.Base64.getUrlEncoder.withoutPadding().encode(byteArray), &quot;UTF-8&quot;)     }
&lt;p&gt; catch {&lt;br/&gt;
       case e: Exception =&amp;gt;&lt;br/&gt;
         throw new ValidationException(s&quot;Unable to serialize type information &apos;$obj&apos; with &quot; +&lt;br/&gt;
@@ -276,7 +275,7 @@ object TypeStringUtils extends JavaTokenParsers with PackratParsers {&lt;br/&gt;
   }&lt;/p&gt;

&lt;p&gt;   private def deserialize(data: String): TypeInformation&lt;span class=&quot;error&quot;&gt;&amp;#91;_&amp;#93;&lt;/span&gt; = &lt;/p&gt;
{
-    val byteData = Base64.decodeBase64(data)
+    val byteData = java.util.Base64.getUrlDecoder.decode(data.getBytes(&quot;UTF-8&quot;))
     InstantiationUtil
       .deserializeObject[TypeInformation[_]](byteData, Thread.currentThread.getContextClassLoader)
   }
&lt;p&gt;diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/util/Base64CompatibleTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/util/Base64CompatibleTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..c437028cb84&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/util/Base64CompatibleTest.java&lt;br/&gt;
@@ -0,0 +1,98 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.flink.runtime.util;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertEquals;&lt;br/&gt;
+import static org.junit.Assert.assertTrue;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Base64 Library switch from org.apache.commons.codec.binary.Base64 to java.util.Base64.&lt;br/&gt;
+ * Test cases provided to make sure Base64 content compatible.&lt;br/&gt;
+ */&lt;br/&gt;
+public class Base64CompatibleTest&lt;br/&gt;
+{&lt;br/&gt;
+	@Test&lt;br/&gt;
+	public void testCommonsBase64ToJavaUtilBase64() throws Exception&lt;br/&gt;
+	&lt;/p&gt;
{
+		String inputString = &quot;Hello, this is apache flink.&quot;;
+		String encodeString =
+			org.apache.commons.codec.binary.Base64.encodeBase64URLSafeString(
+				inputString.getBytes(&quot;UTF-8&quot;)
+			);
+
+		String decodeString =
+			new String(
+				java.util.Base64.getUrlDecoder().decode(encodeString),
+				&quot;UTF-8&quot;
+			);
+
+		assertEquals(inputString, decodeString);
+	}
&lt;p&gt;+&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * encodeBase64URLSafeString with inputString will have char &apos;_&apos; in decodeString.&lt;br/&gt;
+	 * must use RFC4648_URLSAFE to decode.&lt;br/&gt;
+	 * @throws Exception&lt;br/&gt;
+	 */&lt;br/&gt;
+	@Test(expected = IllegalArgumentException.class)&lt;br/&gt;
+	public void testCommonsBase64ToJavaUtilBase64UsingWrongDecoder1() throws Exception&lt;br/&gt;
+	&lt;/p&gt;
{
+		String inputString = &quot;special base64 char &amp;lt;_&amp;gt; 00?&quot;;
+		String encodeString =
+			org.apache.commons.codec.binary.Base64.encodeBase64URLSafeString(
+				inputString.getBytes(&quot;UTF-8&quot;)
+			);
+
+		assertTrue(encodeString.contains(&quot;_&quot;));
+
+		String decodeString =
+			new String(
+				java.util.Base64.getDecoder().decode(encodeString),
+				&quot;UTF-8&quot;
+			);
+
+	}
&lt;p&gt;+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * encodeBase64URLSafeString with inputString will have char &apos;-&apos; in decodeString.&lt;br/&gt;
+	 * must use RFC4648_URLSAFE to decode.&lt;br/&gt;
+	 * @throws Exception&lt;br/&gt;
+	 */&lt;br/&gt;
+	@Test(expected = IllegalArgumentException.class)&lt;br/&gt;
+	public void testCommonsBase64ToJavaUtilBase64UsingWrongDecoder2() throws Exception&lt;br/&gt;
+	&lt;/p&gt;
{
+		String inputString = &quot;special base64 char &amp;lt;-&amp;gt; 00&amp;gt;&quot;;
+		String encodeString =
+			org.apache.commons.codec.binary.Base64.encodeBase64URLSafeString(
+				inputString.getBytes(&quot;UTF-8&quot;)
+			);
+
+		assertTrue(encodeString.contains(&quot;-&quot;));
+
+		String decodeString =
+			new String(
+				java.util.Base64.getDecoder().decode(encodeString),
+				&quot;UTF-8&quot;
+			);
+
+	}
&lt;p&gt;+}&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669836" author="twalthr" created="Wed, 31 Oct 2018 09:43:07 +0000"  >&lt;p&gt;Fixed in 1.6.3: 2657868eb704f148d5f3f1a24eaa07ad2243b189&lt;br/&gt;
Fixed in 1.5.6: 78525bfb2b9524a6ba02ad0b1fe09a6b0a328bdd&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13184806">FLINK-10330</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x5dj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>