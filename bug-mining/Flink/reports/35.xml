<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:17:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-909] Pitfall due to additional superstep after the iteration has stopped</title>
                <link>https://issues.apache.org/jira/browse/FLINK-909</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently, after an iteration has exceeded the maximum number of iterations, all tasks are started again for an additional superstep during which they are stopped. This works if a tasks only waits for dynamic input. However, in the case where one has a task, e.g. a coGroup operation, which gets dynamic and static input the execution is not blocked. This can then lead to erroneous behaviour which the user is not aware of.&lt;/p&gt;

&lt;p&gt;I had this problem implementing ALS. Here one has a loop which gets as dynamic input matrix columns and as static input matrix entries. The columns and the entries are used to construct a matrix which represents a system of linear equations. If the set of columns are empty, then the matrix is singular and thus not solvable. During the additional superstep the task won&apos;t receive any columns but would still try to solve the now singular matrix.&lt;/p&gt;

&lt;p&gt;It would be good to finish the iteration without initiating this additional superstep.&lt;/p&gt;

&lt;p&gt;---------------- Imported from GitHub ----------------&lt;br/&gt;
Url: &lt;a href=&quot;https://github.com/stratosphere/stratosphere/issues/909&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/stratosphere/stratosphere/issues/909&lt;/a&gt;&lt;br/&gt;
Created by: &lt;a href=&quot;https://github.com/tillrohrmann&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;tillrohrmann&lt;/a&gt;&lt;br/&gt;
Labels: &lt;br/&gt;
Created at: Thu Jun 05 17:50:17 CEST 2014&lt;br/&gt;
State: open&lt;/p&gt;</description>
                <environment></environment>
        <key id="12720091">FLINK-909</key>
            <summary>Pitfall due to additional superstep after the iteration has stopped</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mholzemer">Markus Holzemer</assignee>
                                    <reporter username="github-import">GitHub Import</reporter>
                        <labels>
                            <label>github-import</label>
                    </labels>
                <created>Mon, 9 Jun 2014 13:07:49 +0000</created>
                <updated>Tue, 2 Sep 2014 17:18:10 +0000</updated>
                            <resolved>Fri, 8 Aug 2014 13:32:00 +0000</resolved>
                                                    <fixVersion>pre-apache</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14040602" author="mholzemer" created="Mon, 23 Jun 2014 10:30:24 +0000"  >&lt;p&gt;I also stumbled over this issue a few times. Since I am currently in the process of refactoring the iterations runtime I will have a look at this issue.&lt;br/&gt;
It should be possible to add a barrier at the start of each superstep and wait for an explicit OK message from the iteration head task (that is managing a single iteration instance at one taskmanager) before the next superstep can start.&lt;/p&gt;
</comment>
                            <comment id="14048778" author="mholzemer" created="Tue, 1 Jul 2014 11:47:57 +0000"  >&lt;p&gt;I started working on this issue but it seems to be more complicated then I thought. When I wait on a barrier before calling super.run() (that is also calling the open method) inside of the IterationPactTasks I do not receive any channel events.&lt;br/&gt;
Has somebody with more experience in the runtime a suggestion why this is the case and what I can do about it?&lt;/p&gt;</comment>
                            <comment id="14061970" author="githubbot" created="Tue, 15 Jul 2014 11:46:10 +0000"  >&lt;p&gt;GitHub user markus-h opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/69&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-909&quot; title=&quot;Pitfall due to additional superstep after the iteration has stopped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-909&quot;&gt;&lt;del&gt;FLINK-909&lt;/del&gt;&lt;/a&gt; Additional superstep barrier&lt;/p&gt;

&lt;p&gt;    This change introduces a new additional barrier at the end of a superstep in iterations. It prevents the execution of an extra iteration at termination and therby fixes&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-909&quot; title=&quot;Pitfall due to additional superstep after the iteration has stopped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-909&quot;&gt;&lt;del&gt;FLINK-909&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;    This pull request depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-951&quot; title=&quot;Reworking of Iteration Synchronization, Accumulators and Aggregators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-951&quot;&gt;&lt;del&gt;FLINK-951&lt;/del&gt;&lt;/a&gt; and uses the old package names, because &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-951&quot; title=&quot;Reworking of Iteration Synchronization, Accumulators and Aggregators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-951&quot;&gt;&lt;del&gt;FLINK-951&lt;/del&gt;&lt;/a&gt; was not merged yet.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/markus-h/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/markus-h/incubator-flink&lt;/a&gt; aggregatorsReworkToAccumulatorsRebase4_sync2-pr&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/69.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/69.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #69&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9da8aa6442861be17c7658c1dd2c2d9a6943d507&lt;br/&gt;
Author: Markus Holzemer &amp;lt;markus.holzemer@gmx.de&amp;gt;&lt;br/&gt;
Date:   2014-06-16T12:56:36Z&lt;/p&gt;

&lt;p&gt;    Iteration superstep synchronization through RPC and JobManager&lt;br/&gt;
    Unification of Accumulators and Aggregators (removal of former Aggregators)&lt;br/&gt;
    Adjusted Testcases accordingly&lt;/p&gt;

&lt;p&gt;commit f41bf163203621b7dddd5a3073e654f40cb6143b&lt;br/&gt;
Author: Markus Holzemer &amp;lt;markus.holzemer@gmx.de&amp;gt;&lt;br/&gt;
Date:   2014-07-14T13:59:50Z&lt;/p&gt;

&lt;p&gt;    Additional superstep barrier for iterations to prevent execution of an extra superstep at termination&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14089784" author="githubbot" created="Thu, 7 Aug 2014 20:32:09 +0000"  >&lt;p&gt;GitHub user StephanEwen opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-909&quot; title=&quot;Pitfall due to additional superstep after the iteration has stopped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-909&quot;&gt;&lt;del&gt;FLINK-909&lt;/del&gt;&lt;/a&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;FLINK945&amp;#93;&lt;/span&gt; Remove additional superstep at the end of iterrations&lt;/p&gt;

&lt;p&gt;    Fixes simultaneously the pitfall reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-909&quot; title=&quot;Pitfall due to additional superstep after the iteration has stopped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-909&quot;&gt;&lt;del&gt;FLINK-909&lt;/del&gt;&lt;/a&gt; and the memory release bug reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-945&quot; title=&quot;Iterations sometimes release memory prematurely&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-945&quot;&gt;&lt;del&gt;FLINK-945&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/StephanEwen/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StephanEwen/incubator-flink&lt;/a&gt; iterbug&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #91&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 76a48df00f0fc202bdedefb33d576fd9a18a92c0&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@apache.org&amp;gt;&lt;br/&gt;
Date:   2014-08-07T20:00:51Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-909&quot; title=&quot;Pitfall due to additional superstep after the iteration has stopped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-909&quot;&gt;&lt;del&gt;FLINK-909&lt;/del&gt;&lt;/a&gt;  Remove additional empty (and non empty for iterative broadcast variables) superstep.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-945&quot; title=&quot;Iterations sometimes release memory prematurely&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-945&quot;&gt;&lt;del&gt;FLINK-945&lt;/del&gt;&lt;/a&gt;  Fix early memory release in iterations&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14090464" author="githubbot" created="Fri, 8 Aug 2014 08:19:45 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91#discussion_r15982053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91#discussion_r15982053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/iterative/concurrent/SuperstepKickoffLatch.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,65 @@&lt;br/&gt;
    +/**&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + * distributed with this work for additional information&lt;br/&gt;
    + * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    + * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    + * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    + * with the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +&lt;br/&gt;
    +package org.apache.flink.runtime.iterative.concurrent;&lt;br/&gt;
    +&lt;br/&gt;
    +public class SuperstepKickoffLatch {&lt;br/&gt;
    +	&lt;br/&gt;
    +	private final Object monitor = new Object();&lt;br/&gt;
    +	&lt;br/&gt;
    +	private int superstepNumber = 1;&lt;br/&gt;
    +	&lt;br/&gt;
    +	private boolean terminated;&lt;br/&gt;
    +	&lt;br/&gt;
    +	public void triggerNextSuperstep() {&lt;br/&gt;
    +		synchronized (monitor) {&lt;br/&gt;
    +			if (terminated) {&lt;br/&gt;
    +				throw new IllegalStateException(&quot;Already teriminated.&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    typo: terminated&lt;/p&gt;</comment>
                            <comment id="14090465" author="githubbot" created="Fri, 8 Aug 2014 08:19:57 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91#discussion_r15982060&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91#discussion_r15982060&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/iterative/concurrent/SuperstepKickoffLatchBroker.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,32 @@&lt;br/&gt;
    +/**&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + * distributed with this work for additional information&lt;br/&gt;
    + * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    + * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    + * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    + * with the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    blank line&lt;/p&gt;</comment>
                            <comment id="14090466" author="githubbot" created="Fri, 8 Aug 2014 08:20:11 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91#discussion_r15982062&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91#discussion_r15982062&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/iterative/concurrent/SuperstepKickoffLatchBroker.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,32 @@&lt;br/&gt;
    +/**&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + * distributed with this work for additional information&lt;br/&gt;
    + * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    + * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    + * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    + * with the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +package org.apache.flink.runtime.iterative.concurrent;&lt;br/&gt;
    +&lt;br/&gt;
    +public class SuperstepKickoffLatchBroker extends Broker&amp;lt;SuperstepKickoffLatch&amp;gt; {&lt;br/&gt;
    +&lt;br/&gt;
    +	private static final SuperstepKickoffLatchBroker INSTANCE = new SuperstepKickoffLatchBroker();&lt;br/&gt;
    +&lt;br/&gt;
    +	private SuperstepKickoffLatchBroker() {}&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    blank line&lt;/p&gt;</comment>
                            <comment id="14090467" author="githubbot" created="Fri, 8 Aug 2014 08:22:49 +0000"  >&lt;p&gt;Github user uce commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91#discussion_r15982153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91#discussion_r15982153&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/iterative/task/AbstractIterativePactTask.java &amp;#8212;&lt;br/&gt;
    @@ -210,28 +210,17 @@ public RuntimeAggregatorRegistry getIterationAggregators() &lt;/p&gt;
{
     		return this.iterationAggregators;
     	}

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;protected void checkForTerminationAndResetEndOfSuperstepState() throws IOException {&lt;br/&gt;
    +	protected void verifyEndOfSuperstepState() throws IOException {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    You removed the sanity check at the end of this method, because it does not/should not happen, right?&lt;/p&gt;</comment>
                            <comment id="14090472" author="githubbot" created="Fri, 8 Aug 2014 08:27:07 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91#issuecomment-51575648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91#issuecomment-51575648&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Nice addition to get rid of the empty last iteration. Looks good to me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;ve posted minor comments inline. After @rmetzger tested it, I think it&apos;s good to merge.&lt;/p&gt;

&lt;p&gt;    Could you reproduce the memory issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-945&quot; title=&quot;Iterations sometimes release memory prematurely&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-945&quot;&gt;&lt;del&gt;FLINK-945&lt;/del&gt;&lt;/a&gt;) locally? If yes, can you explain what was the exact problem? I am wondering, because in theory the last iteration should not cause any problems, right?&lt;/p&gt;
</comment>
                            <comment id="14090711" author="githubbot" created="Fri, 8 Aug 2014 12:34:39 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91#issuecomment-51594740&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91#issuecomment-51594740&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I just saw one test seems to be consistently in error with this patch. I&apos;ll have a look at it.&lt;/p&gt;</comment>
                            <comment id="14090714" author="githubbot" created="Fri, 8 Aug 2014 12:35:59 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91#discussion_r15990179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91#discussion_r15990179&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/iterative/task/AbstractIterativePactTask.java &amp;#8212;&lt;br/&gt;
    @@ -210,28 +210,17 @@ public RuntimeAggregatorRegistry getIterationAggregators() &lt;/p&gt;
{
     		return this.iterationAggregators;
     	}

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;protected void checkForTerminationAndResetEndOfSuperstepState() throws IOException {&lt;br/&gt;
    +	protected void verifyEndOfSuperstepState() throws IOException {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The is still a sanity check, but the distinction between end-of-superstep and termination comes no longer from the readers, but from the specific shared sync.&lt;/p&gt;</comment>
                            <comment id="14090725" author="githubbot" created="Fri, 8 Aug 2014 12:50:32 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91#issuecomment-51596005&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91#issuecomment-51596005&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The code was correct, but the test assumed the additional empty superstep.&lt;/p&gt;

&lt;p&gt;    I adjusted the test and addressed Ufuk&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="14090726" author="githubbot" created="Fri, 8 Aug 2014 12:52:01 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91#issuecomment-51596116&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91#issuecomment-51596116&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;    I will merge it in the next batch in order to include it the next RC.&lt;/p&gt;

&lt;p&gt;    On 08 Aug 2014, at 14:49, Stephan Ewen &amp;lt;notifications@github.com&amp;gt; wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; The code was correct, but the test assumed the additional empty superstep.&lt;br/&gt;
    &amp;gt; &lt;br/&gt;
    &amp;gt; I adjusted the test and addressed Ufuk&apos;s comments.&lt;br/&gt;
    &amp;gt; &lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; Reply to this email directly or view it on GitHub.&lt;br/&gt;
    &amp;gt; &lt;/p&gt;</comment>
                            <comment id="14090748" author="githubbot" created="Fri, 8 Aug 2014 13:26:10 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/91&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14090753" author="uce" created="Fri, 8 Aug 2014 13:32:00 +0000"  >&lt;p&gt;Fixed in b6ae1ef3d2f95db69c91203b138baf43bd030d93 and 76a48df00f0fc202bdedefb33d576fd9a18a92c0.&lt;/p&gt;</comment>
                            <comment id="14117531" author="githubbot" created="Mon, 1 Sep 2014 16:16:24 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/69#issuecomment-54076052&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/69#issuecomment-54076052&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I have taken the delta of this patch to the pull request #36 and put it into 38cbf0b915dea175f287d7c2a627467a02d28474&lt;/p&gt;

&lt;p&gt;    Thank you for the patch!&lt;/p&gt;</comment>
                            <comment id="14118380" author="githubbot" created="Tue, 2 Sep 2014 17:18:09 +0000"  >&lt;p&gt;Github user markus-h commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/69#issuecomment-54185839&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/69#issuecomment-54185839&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for mergin!&lt;/p&gt;</comment>
                            <comment id="14118381" author="githubbot" created="Tue, 2 Sep 2014 17:18:10 +0000"  >&lt;p&gt;Github user markus-h closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/69&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398290</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wkkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398417</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>