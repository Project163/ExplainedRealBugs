<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:59:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-23487] IRSA doesn&apos;t work with S3</title>
                <link>https://issues.apache.org/jira/browse/FLINK-23487</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Using IRSA (IAM Role for Service Account) currently doesn&apos;t work with s3 (both presto and hadoop) and fails with Access Denied. This has been brought up previously in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-18676&quot; title=&quot;Update version of aws to support use of default constructor of &amp;quot;WebIdentityTokenCredentialsProvider&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-18676&quot;&gt;&lt;del&gt;FLINK-18676&lt;/del&gt;&lt;/a&gt;, but seems to be broken still or again.&lt;/p&gt;

&lt;p&gt;We have tested a patch which updates the version for AWS and presto-hive in Flink, and doing so we successfully verified that it works with s3-presto. However, this didn&apos;t yet fix s3-hadoop. The patch will be posted in the comments.&lt;/p&gt;

&lt;p&gt;Another curious finding was &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17859&quot; title=&quot;[flink-s3-fs-presto] Upgrade the dependent presto-hive jar to latest version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17859&quot;&gt;&lt;del&gt;FLINK-17859&lt;/del&gt;&lt;/a&gt; which states that presto-hive had been updated. However, this seems to be the case neither in the posted Flink 1.8 link nor current master.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13391564">FLINK-23487</key>
            <summary>IRSA doesn&apos;t work with S3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="airblader">Ingo B&#252;rk</assignee>
                                    <reporter username="airblader">Ingo B&#252;rk</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 23 Jul 2021 12:07:38 +0000</created>
                <updated>Thu, 14 Jul 2022 05:44:43 +0000</updated>
                            <resolved>Fri, 6 Aug 2021 05:25:04 +0000</resolved>
                                    <version>1.13.1</version>
                                    <fixVersion>1.14.0</fixVersion>
                                    <component>FileSystems</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17386201" author="airblader" created="Fri, 23 Jul 2021 12:09:57 +0000"  >&lt;p&gt;Patch which works at least for s3-presto. Note that we exclude aws-java-sdk-sts which is now a direct dependency of presto-hive as well, so we need to make sure to use our own version.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
From 85a0c88e2bc81ee18e2fc6b06b760009aa723d60 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ingo=20B=C3=BCrk?= &amp;lt;ingo.buerk@tngtech.com&amp;gt;
Date: Fri, 23 Jul 2021 08:48:12 +0200
Subject: [PATCH] Test---
 flink-filesystems/flink-s3-fs-base/pom.xml                  | 2 +-
 flink-filesystems/flink-s3-fs-presto/pom.xml                | 6 +++++-
 .../apache/flink/fs/s3presto/PrestoS3FileSystemITCase.java  | 3 ++-
 3 files changed, 8 insertions(+), 3 deletions(-)diff --git a/flink-filesystems/flink-s3-fs-base/pom.xml b/flink-filesystems/flink-s3-fs-base/pom.xml
index eb2b5b76582..78588c6bb18 100644
--- a/flink-filesystems/flink-s3-fs-base/pom.xml
+++ b/flink-filesystems/flink-s3-fs-base/pom.xml
@@ -31,7 +31,7 @@ under the License.
 	&amp;lt;packaging&amp;gt;jar&amp;lt;/packaging&amp;gt;
 
 	&amp;lt;properties&amp;gt;
-		&amp;lt;fs.s3.aws.version&amp;gt;1.11.788&amp;lt;/fs.s3.aws.version&amp;gt;
+		&amp;lt;fs.s3.aws.version&amp;gt;1.11.951&amp;lt;/fs.s3.aws.version&amp;gt;
 	&amp;lt;/properties&amp;gt;
 
 	&amp;lt;dependencies&amp;gt;
diff --git a/flink-filesystems/flink-s3-fs-presto/pom.xml b/flink-filesystems/flink-s3-fs-presto/pom.xml
index 4048ce59d22..11d4446cf8a 100644
--- a/flink-filesystems/flink-s3-fs-presto/pom.xml
+++ b/flink-filesystems/flink-s3-fs-presto/pom.xml
@@ -32,7 +32,7 @@ under the License.
 	&amp;lt;packaging&amp;gt;jar&amp;lt;/packaging&amp;gt;
 
 	&amp;lt;properties&amp;gt;
-		&amp;lt;presto.version&amp;gt;0.187&amp;lt;/presto.version&amp;gt;
+		&amp;lt;presto.version&amp;gt;0.257&amp;lt;/presto.version&amp;gt;
 	&amp;lt;/properties&amp;gt;
 
 	&amp;lt;dependencies&amp;gt;
@@ -67,6 +67,10 @@ under the License.
 					&amp;lt;groupId&amp;gt;com.amazonaws&amp;lt;/groupId&amp;gt;
 					&amp;lt;artifactId&amp;gt;aws-java-sdk-s3&amp;lt;/artifactId&amp;gt;
 				&amp;lt;/exclusion&amp;gt;
+				&amp;lt;exclusion&amp;gt;
+					&amp;lt;groupId&amp;gt;com.amazonaws&amp;lt;/groupId&amp;gt;
+					&amp;lt;artifactId&amp;gt;aws-java-sdk-sts&amp;lt;/artifactId&amp;gt;
+				&amp;lt;/exclusion&amp;gt;
 
 				&amp;lt;!-- lot&apos;s of unneeded stuff &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the S3 file system --&amp;gt;
 				&amp;lt;exclusion&amp;gt;
diff --git a/flink-filesystems/flink-s3-fs-presto/src/test/java/org/apache/flink/fs/s3presto/PrestoS3FileSystemITCase.java b/flink-filesystems/flink-s3-fs-presto/src/test/java/org/apache/flink/fs/s3presto/PrestoS3FileSystemITCase.java
index 82ba609c0d0..49cc2166ea5 100644
--- a/flink-filesystems/flink-s3-fs-presto/src/test/java/org/apache/flink/fs/s3presto/PrestoS3FileSystemITCase.java
+++ b/flink-filesystems/flink-s3-fs-presto/src/test/java/org/apache/flink/fs/s3presto/PrestoS3FileSystemITCase.java
@@ -34,7 +34,6 @@ &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Arrays;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.UUID;
 
-&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; com.facebook.presto.hive.s3.PrestoS3FileSystem.S3_USE_INSTANCE_CREDENTIALS;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.junit.Assert.assertFalse;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.junit.Assert.fail;
 
@@ -49,6 +48,8 @@ &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.junit.Assert.fail;
 @RunWith(Parameterized.class)
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PrestoS3FileSystemITCase &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; AbstractHadoopFileSystemITTest {
 
+    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; S3_USE_INSTANCE_CREDENTIALS = &lt;span class=&quot;code-quote&quot;&gt;&quot;presto.s3.use-instance-credentials&quot;&lt;/span&gt;;
+
     @Parameterized.Parameter &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; scheme;
 
     @Parameterized.Parameters(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;Scheme = {0}&quot;&lt;/span&gt;)
-- 
2.32.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17393108" author="twalthr" created="Wed, 4 Aug 2021 12:42:21 +0000"  >&lt;p&gt;Fixed in 1.14.0: 48526e43bdbd4e837be863e4ac002ec7d8b03c64&lt;/p&gt;</comment>
                            <comment id="17393109" author="twalthr" created="Wed, 4 Aug 2021 12:43:58 +0000"  >&lt;p&gt;This is quite a big change in dependencies which is why we haven&apos;t merged it to 1.13 yet. We might reconsider this based on user feedback.&lt;/p&gt;</comment>
                            <comment id="17393679" author="twalthr" created="Thu, 5 Aug 2021 07:19:18 +0000"  >&lt;p&gt;Temporarily reverted in 452fb6774521eec112941549dae679cf9df1a7b6.&lt;/p&gt;</comment>
                            <comment id="17394527" author="twalthr" created="Fri, 6 Aug 2021 05:25:04 +0000"  >&lt;p&gt;Hopefully fixed this time in 1.14.0: e8325ccc767740bcbe6505e2b2c64babb7714518&lt;/p&gt;</comment>
                            <comment id="17566648" author="JIRAUSER292782" created="Thu, 14 Jul 2022 05:44:43 +0000"  >&lt;p&gt;Hey, when will the hadoop fix be available? Since the FileSink doesn&apos;t support presto, this issue doesn&apos;t get resolved for FileSink.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13393608">FLINK-23635</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13306380">FLINK-17859</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13318752">FLINK-18676</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0t9y8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>