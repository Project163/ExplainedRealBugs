<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:36:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10843] Make Kafka version definition more flexible for new Kafka table factory</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10843</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently, a user has to specify a specific version for a Kafka connector like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
connector:
  type: kafka
  version: &lt;span class=&quot;code-quote&quot;&gt;&quot;0.11&quot;&lt;/span&gt;     # required: valid connector versions are &lt;span class=&quot;code-quote&quot;&gt;&quot;0.8&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;0.9&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;0.10&quot;&lt;/span&gt;, and &lt;span class=&quot;code-quote&quot;&gt;&quot;0.11&quot;&lt;/span&gt;
  topic: ...          # required: topic name from which the table is read
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, the new Kafka connector aims to be universal, thus, at least for 1.x and 2.x versions which we should support those as parameters as well. Currently, &lt;tt&gt;2.0&lt;/tt&gt; is the only accepted string for the factory.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13197412">FLINK-10843</key>
            <summary>Make Kafka version definition more flexible for new Kafka table factory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twalthr">Timo Walther</assignee>
                                    <reporter username="twalthr">Timo Walther</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 9 Nov 2018 13:51:54 +0000</created>
                <updated>Fri, 16 Nov 2018 15:59:08 +0000</updated>
                            <resolved>Fri, 16 Nov 2018 15:59:08 +0000</resolved>
                                    <version>1.7.0</version>
                                    <fixVersion>1.7.0</fixVersion>
                                    <component>Connectors / Kafka</component>
                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16685165" author="githubbot" created="Tue, 13 Nov 2018 13:06:43 +0000"  >&lt;p&gt;twalthr opened a new pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This PR makes the versioning of a Kafka table factory more flexible. It still forces a Kafka version for future backwards compatibility cases. It allows for `1.&lt;b&gt;` and `2.&lt;/b&gt;` versioning for the modern Kafka connector. However, a user can always fallback to a `universal` version wildcard.&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Extended Kafka validator&lt;/li&gt;
	&lt;li&gt;Extended Kafka table factory&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Existing tests are still correct.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): no&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: no&lt;/li&gt;
	&lt;li&gt;The serializers: no&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): no&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: no&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: no&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? no&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? docs&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16685412" author="githubbot" created="Tue, 13 Nov 2018 16:01:32 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233089061&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233089061&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryBase.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -104,6 +106,7 @@&lt;br/&gt;
 		List&amp;lt;String&amp;gt; properties = new ArrayList&amp;lt;&amp;gt;();&lt;/p&gt;

&lt;p&gt; 		// kafka&lt;br/&gt;
+		properties.add(CONNECTOR_VERSION);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Is this line relevant or is it a separate bug fix?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16685413" author="githubbot" created="Tue, 13 Nov 2018 16:01:32 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233097356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233097356&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryBase.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -249,7 +264,7 @@ private DescriptorProperties getValidatedProperties(Map&amp;lt;String, String&amp;gt; properti&lt;/p&gt;

&lt;p&gt; 		// allow Kafka timestamps to be used, watermarks can not be received from source&lt;br/&gt;
 		new SchemaValidator(true, supportsKafkaTimestamps(), false).validate(descriptorProperties);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;new KafkaValidator().validate(descriptorProperties);&lt;br/&gt;
+		new KafkaValidator(kafkaVersionPattern()).validate(descriptorProperties);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   It&apos;s kind of strange that we validate the kafka version after the fact that we have already selected some kafka version (after all `this` instance has already a known Kafka version). This seems like either a duplicated logic or a kind of unit test that is perform during the runtime. Maybe it could be avoided/removed?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16685414" author="githubbot" created="Tue, 13 Nov 2018 16:01:33 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233103572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233103572&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: docs/dev/table/connect.md&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -524,7 +525,8 @@ The Kafka connector allows for reading and writing from and to an Apache Kafka t&lt;/p&gt;
 {% highlight java %}
&lt;p&gt; .connect(&lt;br/&gt;
   new Kafka()&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;.version(&quot;0.11&quot;)    // required: valid connector versions are &quot;0.8&quot;, &quot;0.9&quot;, &quot;0.10&quot;, and &quot;0.11&quot;&lt;br/&gt;
+    .version(&quot;0.11&quot;)    // required: connector major version&lt;br/&gt;
+                        //   such as &quot;0.8&quot;, &quot;0.9&quot;, &quot;0.10&quot;, &quot;0.11&quot;, or &quot;2.0&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   this kind of suggests that `1.0` or `1.1` is not supported. Maybe we should change it to&lt;br/&gt;
   ```&lt;br/&gt;
   //   such as &quot;0.8&quot;, &quot;0.9&quot;, &quot;0.10&quot;, &quot;0.11&quot; ...&lt;br/&gt;
   ```&lt;br/&gt;
   or add a separate table with list of supported major versions, including a caveat that even future versions should be supported by &quot;universal&quot; connector?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16685415" author="githubbot" created="Tue, 13 Nov 2018 16:01:33 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233090756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233090756&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryBase.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -187,9 +190,21 @@&lt;br/&gt;
 	// --------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt; 	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Returns the Kafka version.&lt;br/&gt;
+	 * Returns a hard-coded Kafka version.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @deprecated This method can be dropped once we only maintain the universal Kafka connector.&lt;br/&gt;
 	 */&lt;/li&gt;
	&lt;li&gt;protected abstract String kafkaVersion();&lt;br/&gt;
+	@Deprecated&lt;br/&gt;
+	protected abstract Optional&amp;lt;String&amp;gt; kafkaVersion();&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Returns the pattern that a validator should accept as Kafka version.&lt;br/&gt;
+	 */&lt;br/&gt;
+	protected Pattern[] kafkaVersionPattern() {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Do we need two separate methods for that? Why can not we use just the more general one `kafkaVersionPattern`? Or maybe even better:&lt;br/&gt;
   ```&lt;br/&gt;
   protected abstract boolean isCompatible(String kafkaVersionString);&lt;br/&gt;
   ```&lt;br/&gt;
   which can be implemented either as `kafkaVersionString.equals(&quot;0.11&quot;)` or  by patterns, without exposing the `Pattern` dependency and also being even more flexible?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16685416" author="githubbot" created="Tue, 13 Nov 2018 16:01:33 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233098151&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233098151&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/table/descriptors/KafkaValidator.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -40,7 +41,9 @@&lt;br/&gt;
 	public static final String CONNECTOR_VERSION_VALUE_09 = &quot;0.9&quot;;&lt;br/&gt;
 	public static final String CONNECTOR_VERSION_VALUE_010 = &quot;0.10&quot;;&lt;br/&gt;
 	public static final String CONNECTOR_VERSION_VALUE_011 = &quot;0.11&quot;;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String CONNECTOR_VERSION_VALUE_20 = &quot;2.0&quot;;&lt;br/&gt;
+	public static final String CONNECTOR_VERSION_VALUE_UNIVERSAL = &quot;universal&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Shouldn&apos;t those constant be moved to specific kafka connectors? They are not used anywhere else (as it is now, this is one extra place which needs to be modified when adding new Kafka connector).&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16685417" author="githubbot" created="Tue, 13 Nov 2018 16:01:33 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233101708&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233101708&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: docs/dev/table/connect.md&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -583,7 +586,9 @@ connector:&lt;/p&gt;

&lt;p&gt; *&lt;b&gt;Consistency guarantees:&lt;/b&gt;* By default, a Kafka sink ingests data with at-least-once guarantees into a Kafka topic if the query is executed with &lt;span class=&quot;error&quot;&gt;&amp;#91;checkpointing enabled&amp;#93;&lt;/span&gt;({{ site.baseurl }}/dev/stream/state/checkpointing.html#enabling-and-configuring-checkpointing).&lt;/p&gt;

&lt;p&gt;-*&lt;b&gt;Kafka 0.10+ Timestamps:&lt;/b&gt;* Since Kafka 0.10, Kafka messages have a timestamp as metadata that specifies when the record was written into the Kafka topic. These timestamps can be used for a &lt;span class=&quot;error&quot;&gt;&amp;#91;rowtime attribute&amp;#93;&lt;/span&gt;(connect.html#defining-the-schema) by selecting `timestamps: from-source` in YAML and `timestampsFromSource()` in Java/Scala respectively. &lt;br/&gt;
&lt;ins&gt;*&lt;b&gt;Kafka 0.10&lt;/ins&gt; Timestamps:&lt;/b&gt;* Since Kafka 0.10, Kafka messages have a timestamp as metadata that specifies when the record was written into the Kafka topic. These timestamps can be used for a &lt;span class=&quot;error&quot;&gt;&amp;#91;rowtime attribute&amp;#93;&lt;/span&gt;(connect.html#defining-the-schema) by selecting `timestamps: from-source` in YAML and `timestampsFromSource()` in Java/Scala respectively.&lt;br/&gt;
+&lt;br/&gt;
&lt;ins&gt;*&lt;b&gt;Kafka 0.11&lt;/ins&gt; Versioning:&lt;/b&gt;* If the Kafka connector definition should be independent of a hard-coded Kafka version, use the connector version `universal` as a wildcard for Flink&apos;s modern Kafka connector.&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Do not use `modern` - at some point of time it will not be modern anymore. `universal`? `for Flink&apos;s Kafka connector that is compatible with all Kafka versions starting from 0.11`.?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16685468" author="githubbot" created="Tue, 13 Nov 2018 16:49:39 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233129481&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233129481&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryBase.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -104,6 +106,7 @@&lt;br/&gt;
 		List&amp;lt;String&amp;gt; properties = new ArrayList&amp;lt;&amp;gt;();&lt;/p&gt;

&lt;p&gt; 		// kafka&lt;br/&gt;
+		properties.add(CONNECTOR_VERSION);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   This line is relevant. If it is not defined in the context, it must be added to the supported properties.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686187" author="githubbot" created="Wed, 14 Nov 2018 08:15:53 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233347043&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233347043&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: docs/dev/table/connect.md&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -524,7 +525,8 @@ The Kafka connector allows for reading and writing from and to an Apache Kafka t&lt;/p&gt;
 {% highlight java %}
&lt;p&gt; .connect(&lt;br/&gt;
   new Kafka()&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;.version(&quot;0.11&quot;)    // required: valid connector versions are &quot;0.8&quot;, &quot;0.9&quot;, &quot;0.10&quot;, and &quot;0.11&quot;&lt;br/&gt;
+    .version(&quot;0.11&quot;)    // required: connector major version&lt;br/&gt;
+                        //   such as &quot;0.8&quot;, &quot;0.9&quot;, &quot;0.10&quot;, &quot;0.11&quot;, or &quot;2.0&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   The &quot;such as&quot; indicates that these are just examples. The list of supported major version can be found in the dependency section. I added 1.0 as an additional example.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686197" author="githubbot" created="Wed, 14 Nov 2018 08:30:10 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233350930&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233350930&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryBase.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -187,9 +190,21 @@&lt;br/&gt;
 	// --------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt; 	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Returns the Kafka version.&lt;br/&gt;
+	 * Returns a hard-coded Kafka version.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @deprecated This method can be dropped once we only maintain the universal Kafka connector.&lt;br/&gt;
 	 */&lt;/li&gt;
	&lt;li&gt;protected abstract String kafkaVersion();&lt;br/&gt;
+	@Deprecated&lt;br/&gt;
+	protected abstract Optional&amp;lt;String&amp;gt; kafkaVersion();&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Returns the pattern that a validator should accept as Kafka version.&lt;br/&gt;
+	 */&lt;br/&gt;
+	protected Pattern[] kafkaVersionPattern() {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   The reason for two separate methods was that the previous factories explicitly matched only if the version was correct. But I agree that the logic might have been unnecessarily complicated. I removed the `kafkaVersion()` method. I think `Pattern` is still fine because is not a dependency and also not exposed as factories are a pure Flink internal thing. Once we drop the old Kafka connectors we don&apos;t need to &quot;expose&quot; the pattern anymore.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686199" author="githubbot" created="Wed, 14 Nov 2018 08:33:50 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233351993&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233351993&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryBase.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -187,9 +190,21 @@&lt;br/&gt;
 	// --------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt; 	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Returns the Kafka version.&lt;br/&gt;
+	 * Returns a hard-coded Kafka version.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @deprecated This method can be dropped once we only maintain the universal Kafka connector.&lt;br/&gt;
 	 */&lt;/li&gt;
	&lt;li&gt;protected abstract String kafkaVersion();&lt;br/&gt;
+	@Deprecated&lt;br/&gt;
+	protected abstract Optional&amp;lt;String&amp;gt; kafkaVersion();&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Returns the pattern that a validator should accept as Kafka version.&lt;br/&gt;
+	 */&lt;br/&gt;
+	protected Pattern[] kafkaVersionPattern() {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   I revert my comment from a above. The explicit version is still necessary since version `10` depends on version `9`, thus both factories are present in a Kafka 0.10 module. The two factories would interfere with each other if a hard-coded version is not part of the context.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686200" author="githubbot" created="Wed, 14 Nov 2018 08:33:58 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233351993&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233351993&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryBase.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -187,9 +190,21 @@&lt;br/&gt;
 	// --------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt; 	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Returns the Kafka version.&lt;br/&gt;
+	 * Returns a hard-coded Kafka version.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @deprecated This method can be dropped once we only maintain the universal Kafka connector.&lt;br/&gt;
 	 */&lt;/li&gt;
	&lt;li&gt;protected abstract String kafkaVersion();&lt;br/&gt;
+	@Deprecated&lt;br/&gt;
+	protected abstract Optional&amp;lt;String&amp;gt; kafkaVersion();&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Returns the pattern that a validator should accept as Kafka version.&lt;br/&gt;
+	 */&lt;br/&gt;
+	protected Pattern[] kafkaVersionPattern() {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   I revert my comment from above. The explicit version is still necessary since version `10` depends on version `9`, thus both factories are present in a Kafka 0.10 module. The two factories would interfere with each other if a hard-coded version is not part of the context.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686201" author="githubbot" created="Wed, 14 Nov 2018 08:34:17 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233351993&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233351993&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryBase.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -187,9 +190,21 @@&lt;br/&gt;
 	// --------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt; 	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Returns the Kafka version.&lt;br/&gt;
+	 * Returns a hard-coded Kafka version.&lt;br/&gt;
+	 *&lt;br/&gt;
+	 * @deprecated This method can be dropped once we only maintain the universal Kafka connector.&lt;br/&gt;
 	 */&lt;/li&gt;
	&lt;li&gt;protected abstract String kafkaVersion();&lt;br/&gt;
+	@Deprecated&lt;br/&gt;
+	protected abstract Optional&amp;lt;String&amp;gt; kafkaVersion();&lt;br/&gt;
+&lt;br/&gt;
+	/**&lt;br/&gt;
+	 * Returns the pattern that a validator should accept as Kafka version.&lt;br/&gt;
+	 */&lt;br/&gt;
+	protected Pattern[] kafkaVersionPattern() {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   I revert my comment from above. The explicit version is still necessary since Kafka module `10` depends on module `9`, thus both factories are present in a Kafka 0.10 module. The two factories would interfere with each other if a hard-coded version is not part of the context.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686205" author="githubbot" created="Wed, 14 Nov 2018 08:38:26 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r233353227&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r233353227&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/table/descriptors/KafkaValidator.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -40,7 +41,9 @@&lt;br/&gt;
 	public static final String CONNECTOR_VERSION_VALUE_09 = &quot;0.9&quot;;&lt;br/&gt;
 	public static final String CONNECTOR_VERSION_VALUE_010 = &quot;0.10&quot;;&lt;br/&gt;
 	public static final String CONNECTOR_VERSION_VALUE_011 = &quot;0.11&quot;;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String CONNECTOR_VERSION_VALUE_20 = &quot;2.0&quot;;&lt;br/&gt;
+	public static final String CONNECTOR_VERSION_VALUE_UNIVERSAL = &quot;universal&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   This is the one and only place that should be touched when modifying properties. The goal is to have all properties and potential values in one central place. In a version-agnostic manner.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16689159" author="githubbot" created="Fri, 16 Nov 2018 08:25:33 +0000"  >&lt;p&gt;twalthr commented on issue #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#issuecomment-439317653&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#issuecomment-439317653&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @pnowojski I updated the PR. Now we just matched against the version `universal`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16689534" author="githubbot" created="Fri, 16 Nov 2018 15:07:54 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#discussion_r234237406&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#discussion_r234237406&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/test_sql_client_kafka010.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -19,4 +19,4 @@&lt;/p&gt;

&lt;p&gt; set -Eeuo pipefail&lt;/p&gt;

&lt;p&gt;-source &quot;$(dirname &quot;$0&quot;)&quot;/test_sql_client_kafka_common.sh 0.10 0.10.2.0 3.2.0 3.2 &quot;kafka-0.10&quot;&lt;br/&gt;
+source &quot;$(dirname &quot;$0&quot;)&quot;/test_sql_client_kafka_common.sh 0.10 0.10.2.0 3.2.0 3.2 &quot;kafka-0.10&quot; &quot;0.10&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   This starts getting ridiculous:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;`0.10`&lt;/li&gt;
	&lt;li&gt;`0.10.2.0`&lt;/li&gt;
	&lt;li&gt;`&quot;0.10&quot;`&lt;/li&gt;
	&lt;li&gt;`&quot;kafka-0.10&quot;`&lt;br/&gt;
   or&lt;/li&gt;
	&lt;li&gt;`3.2`&lt;/li&gt;
	&lt;li&gt;`3.2.0`&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &#128580; &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16689586" author="githubbot" created="Fri, 16 Nov 2018 15:53:39 +0000"  >&lt;p&gt;twalthr commented on issue #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087#issuecomment-439437076&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087#issuecomment-439437076&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks @pnowojski. Will merge this.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16689587" author="githubbot" created="Fri, 16 Nov 2018 15:57:56 +0000"  >&lt;p&gt;asfgit closed pull request #7087: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10843&quot; title=&quot;Make Kafka version definition more flexible for new Kafka table factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10843&quot;&gt;&lt;del&gt;FLINK-10843&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;connectors&amp;#93;&lt;/span&gt; Make Kafka table factory versioning more flexible&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7087&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7087&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/docs/dev/table/connect.md b/docs/dev/table/connect.md&lt;br/&gt;
index 5f1112706ce..effd913707e 100644&lt;br/&gt;
&amp;#8212; a/docs/dev/table/connect.md&lt;br/&gt;
+++ b/docs/dev/table/connect.md&lt;br/&gt;
@@ -40,14 +40,15 @@ The following table list all available connectors and formats. Their mutual comp&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Connectors&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-| Name              | Version       | Maven dependency             | SQL Client JAR         |&lt;br/&gt;
&lt;del&gt;| :&lt;/del&gt;--------------- | :------------ | :--------------------------- | :----------------------|&lt;br/&gt;
-| Filesystem        |               | Built-in                     | Built-in               |&lt;br/&gt;
&lt;del&gt;| Elasticsearch     | 6             | `flink-connector-elasticsearch6` | &lt;span class=&quot;error&quot;&gt;&amp;#91;Download&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://central.maven.org/maven2/org/apache/flink/flink-connector-elasticsearch6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/flink/flink-connector-elasticsearch6&lt;/a&gt;&lt;tt&gt;site.scala_version_suffix&lt;/tt&gt;/&lt;tt&gt;site.version&lt;/tt&gt;/flink-connector-elasticsearch6{{site.scala_version_suffix}}&lt;/del&gt;&lt;tt&gt;site.version&lt;/tt&gt;-sql-jar.jar) |&lt;br/&gt;
-| Apache Kafka      | 0.8           | `flink-connector-kafka-0.8`  | Not available          |&lt;br/&gt;
&lt;del&gt;| Apache Kafka      | 0.9           | `flink-connector-kafka-0.9`  | &lt;span class=&quot;error&quot;&gt;&amp;#91;Download&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.9&lt;/a&gt;&lt;tt&gt;site.scala_version_suffix&lt;/tt&gt;/&lt;tt&gt;site.version&lt;/tt&gt;/flink-connector-kafka-0.9{{site.scala_version_suffix}}&lt;/del&gt;&lt;tt&gt;site.version&lt;/tt&gt;-sql-jar.jar) |&lt;br/&gt;
&lt;del&gt;| Apache Kafka      | 0.10          | `flink-connector-kafka-0.10` | &lt;span class=&quot;error&quot;&gt;&amp;#91;Download&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.10&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.10&lt;/a&gt;&lt;tt&gt;site.scala_version_suffix&lt;/tt&gt;/&lt;tt&gt;site.version&lt;/tt&gt;/flink-connector-kafka-0.10{{site.scala_version_suffix}}&lt;/del&gt;&lt;tt&gt;site.version&lt;/tt&gt;-sql-jar.jar) |&lt;br/&gt;
&lt;del&gt;| Apache Kafka      | 0.11          | `flink-connector-kafka-0.11` | &lt;span class=&quot;error&quot;&gt;&amp;#91;Download&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.11&lt;/a&gt;&lt;tt&gt;site.scala_version_suffix&lt;/tt&gt;/&lt;tt&gt;site.version&lt;/tt&gt;/flink-connector-kafka-0.11{{site.scala_version_suffix}}&lt;/del&gt;&lt;tt&gt;site.version&lt;/tt&gt;-sql-jar.jar) |&lt;br/&gt;
+| Name              | Version             | Maven dependency             | SQL Client JAR         |&lt;br/&gt;
+| :---------------- | :------------------ | :--------------------------- | :----------------------|&lt;br/&gt;
+| Filesystem        |                     | Built-in                     | Built-in               |&lt;br/&gt;
+| Elasticsearch     | 6                   | `flink-connector-elasticsearch6` | &lt;span class=&quot;error&quot;&gt;&amp;#91;Download&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://central.maven.org/maven2/org/apache/flink/flink-connector-elasticsearch6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/flink/flink-connector-elasticsearch6&lt;/a&gt;&lt;tt&gt;site.scala_version_suffix&lt;/tt&gt;/&lt;tt&gt;site.version&lt;/tt&gt;/flink-connector-elasticsearch6{{site.scala_version_suffix}}-&lt;tt&gt;site.version&lt;/tt&gt;-sql-jar.jar) |&lt;br/&gt;
+| Apache Kafka      | 0.8                 | `flink-connector-kafka-0.8`  | Not available          |&lt;br/&gt;
+| Apache Kafka      | 0.9                 | `flink-connector-kafka-0.9`  | &lt;span class=&quot;error&quot;&gt;&amp;#91;Download&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.9&lt;/a&gt;&lt;tt&gt;site.scala_version_suffix&lt;/tt&gt;/&lt;tt&gt;site.version&lt;/tt&gt;/flink-connector-kafka-0.9{{site.scala_version_suffix}}-&lt;tt&gt;site.version&lt;/tt&gt;-sql-jar.jar) |&lt;br/&gt;
+| Apache Kafka      | 0.10                | `flink-connector-kafka-0.10` | &lt;span class=&quot;error&quot;&gt;&amp;#91;Download&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.10&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.10&lt;/a&gt;&lt;tt&gt;site.scala_version_suffix&lt;/tt&gt;/&lt;tt&gt;site.version&lt;/tt&gt;/flink-connector-kafka-0.10{{site.scala_version_suffix}}-&lt;tt&gt;site.version&lt;/tt&gt;-sql-jar.jar) |&lt;br/&gt;
+| Apache Kafka      | 0.11                | `flink-connector-kafka-0.11` | &lt;span class=&quot;error&quot;&gt;&amp;#91;Download&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka-0.11&lt;/a&gt;&lt;tt&gt;site.scala_version_suffix&lt;/tt&gt;/&lt;tt&gt;site.version&lt;/tt&gt;/flink-connector-kafka-0.11{{site.scala_version_suffix}}-&lt;tt&gt;site.version&lt;/tt&gt;-sql-jar.jar) |&lt;br/&gt;
&lt;ins&gt;| Apache Kafka      | 0.11&lt;/ins&gt; (`universal`) | `flink-connector-kafka`      | &lt;span class=&quot;error&quot;&gt;&amp;#91;Download&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/flink/flink-connector-kafka&lt;/a&gt;&lt;tt&gt;site.scala_version_suffix&lt;/tt&gt;/&lt;tt&gt;site.version&lt;/tt&gt;/flink-connector-kafka{{site.scala_version_suffix}}-&lt;tt&gt;site.version&lt;/tt&gt;-sql-jar.jar) |&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Formats&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;@@ -524,7 +525,8 @@ The Kafka connector allows for reading and writing from and to an Apache Kafka t&lt;/p&gt;
 {% highlight java %}
&lt;p&gt; .connect(&lt;br/&gt;
   new Kafka()&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;.version(&quot;0.11&quot;)    // required: valid connector versions are &quot;0.8&quot;, &quot;0.9&quot;, &quot;0.10&quot;, and &quot;0.11&quot;&lt;br/&gt;
+    .version(&quot;0.11&quot;)    // required: valid connector versions are&lt;br/&gt;
+                        //   &quot;0.8&quot;, &quot;0.9&quot;, &quot;0.10&quot;, &quot;0.11&quot;, and &quot;universal&quot;&lt;br/&gt;
     .topic(&quot;...&quot;)       // required: topic name from which the table is read&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     // optional: connector specific properties&lt;br/&gt;
@@ -549,7 +551,8 @@ The Kafka connector allows for reading and writing from and to an Apache Kafka t&lt;/p&gt;
 {% highlight yaml %}
&lt;p&gt; connector:&lt;br/&gt;
   type: kafka&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;version: &quot;0.11&quot;     # required: valid connector versions are &quot;0.8&quot;, &quot;0.9&quot;, &quot;0.10&quot;, and &quot;0.11&quot;&lt;br/&gt;
+  version: &quot;0.11&quot;     # required: valid connector versions are&lt;br/&gt;
+                      #   &quot;0.8&quot;, &quot;0.9&quot;, &quot;0.10&quot;, &quot;0.11&quot;, and &quot;universal&quot;&lt;br/&gt;
   topic: ...          # required: topic name from which the table is read&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   properties:         # optional: connector specific properties&lt;br/&gt;
@@ -583,7 +586,9 @@ connector:&lt;/p&gt;

&lt;p&gt; *&lt;b&gt;Consistency guarantees:&lt;/b&gt;* By default, a Kafka sink ingests data with at-least-once guarantees into a Kafka topic if the query is executed with &lt;span class=&quot;error&quot;&gt;&amp;#91;checkpointing enabled&amp;#93;&lt;/span&gt;({{ site.baseurl }}/dev/stream/state/checkpointing.html#enabling-and-configuring-checkpointing).&lt;/p&gt;

&lt;p&gt;-*&lt;b&gt;Kafka 0.10+ Timestamps:&lt;/b&gt;* Since Kafka 0.10, Kafka messages have a timestamp as metadata that specifies when the record was written into the Kafka topic. These timestamps can be used for a &lt;span class=&quot;error&quot;&gt;&amp;#91;rowtime attribute&amp;#93;&lt;/span&gt;(connect.html#defining-the-schema) by selecting `timestamps: from-source` in YAML and `timestampsFromSource()` in Java/Scala respectively. &lt;br/&gt;
&lt;ins&gt;*&lt;b&gt;Kafka 0.10&lt;/ins&gt; Timestamps:&lt;/b&gt;* Since Kafka 0.10, Kafka messages have a timestamp as metadata that specifies when the record was written into the Kafka topic. These timestamps can be used for a &lt;span class=&quot;error&quot;&gt;&amp;#91;rowtime attribute&amp;#93;&lt;/span&gt;(connect.html#defining-the-schema) by selecting `timestamps: from-source` in YAML and `timestampsFromSource()` in Java/Scala respectively.&lt;br/&gt;
+&lt;br/&gt;
&lt;ins&gt;*&lt;b&gt;Kafka 0.11&lt;/ins&gt; Versioning:&lt;/b&gt;* Since Flink 1.7, the Kafka connector definition should be independent of a hard-coded Kafka version. Use the connector version `universal` as a wildcard for Flink&apos;s Kafka connector that is compatible with all Kafka versions starting from 0.11.&lt;/p&gt;

&lt;p&gt; Make sure to add the version-specific Kafka dependency. In addition, a corresponding format needs to be specified for reading and writing rows from and to Kafka.&lt;/p&gt;

&lt;p&gt;diff --git a/flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/table/descriptors/KafkaValidator.java b/flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/table/descriptors/KafkaValidator.java&lt;br/&gt;
index 86d7ef6d35b..0dbbbeb348a 100644&lt;br/&gt;
&amp;#8212; a/flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/table/descriptors/KafkaValidator.java&lt;br/&gt;
+++ b/flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/table/descriptors/KafkaValidator.java&lt;br/&gt;
@@ -21,9 +21,7 @@&lt;br/&gt;
 import org.apache.flink.annotation.Internal;&lt;br/&gt;
 import org.apache.flink.streaming.connectors.kafka.config.StartupMode;&lt;/p&gt;

&lt;p&gt;-import java.util.Arrays;&lt;br/&gt;
 import java.util.HashMap;&lt;br/&gt;
-import java.util.List;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
 import java.util.function.Consumer;&lt;/p&gt;

&lt;p&gt;@@ -40,7 +38,7 @@&lt;br/&gt;
 	public static final String CONNECTOR_VERSION_VALUE_09 = &quot;0.9&quot;;&lt;br/&gt;
 	public static final String CONNECTOR_VERSION_VALUE_010 = &quot;0.10&quot;;&lt;br/&gt;
 	public static final String CONNECTOR_VERSION_VALUE_011 = &quot;0.11&quot;;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String CONNECTOR_VERSION_VALUE_20 = &quot;2.0&quot;;&lt;br/&gt;
+	public static final String CONNECTOR_VERSION_VALUE_UNIVERSAL = &quot;universal&quot;;&lt;br/&gt;
 	public static final String CONNECTOR_TOPIC = &quot;connector.topic&quot;;&lt;br/&gt;
 	public static final String CONNECTOR_STARTUP_MODE = &quot;connector.startup-mode&quot;;&lt;br/&gt;
 	public static final String CONNECTOR_STARTUP_MODE_VALUE_EARLIEST = &quot;earliest-offset&quot;;&lt;br/&gt;
@@ -64,7 +62,7 @@ public void validate(DescriptorProperties properties) {&lt;br/&gt;
 		super.validate(properties);&lt;br/&gt;
 		properties.validateValue(CONNECTOR_TYPE, CONNECTOR_TYPE_VALUE_KAFKA, false);&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;validateVersion(properties);&lt;br/&gt;
+		properties.validateString(CONNECTOR_TOPIC, false, 1, Integer.MAX_VALUE);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		validateStartupMode(properties);&lt;/p&gt;

&lt;p&gt;@@ -73,17 +71,6 @@ public void validate(DescriptorProperties properties) &lt;/p&gt;
{
 		validateSinkPartitioner(properties);
 	}

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private void validateVersion(DescriptorProperties properties) 
{
-		final List&amp;lt;String&amp;gt; versions = Arrays.asList(
-			CONNECTOR_VERSION_VALUE_08,
-			CONNECTOR_VERSION_VALUE_09,
-			CONNECTOR_VERSION_VALUE_010,
-			CONNECTOR_VERSION_VALUE_011,
-			CONNECTOR_VERSION_VALUE_20);
-		properties.validateEnumValues(CONNECTOR_VERSION, false, versions);
-		properties.validateString(CONNECTOR_TOPIC, false, 1, Integer.MAX_VALUE);
-	}
&lt;p&gt;-&lt;br/&gt;
 	private void validateStartupMode(DescriptorProperties properties) {&lt;br/&gt;
 		final Map&amp;lt;String, Consumer&amp;lt;String&amp;gt;&amp;gt; specificOffsetValidators = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
 		specificOffsetValidators.put(&lt;br/&gt;
diff --git a/flink-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactory.java b/flink-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactory.java&lt;br/&gt;
index b0dfc54e671..2b498674a89 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactory.java&lt;br/&gt;
+++ b/flink-connectors/flink-connector-kafka/src/main/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactory.java&lt;br/&gt;
@@ -39,7 +39,7 @@&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 	@Override&lt;br/&gt;
 	protected String kafkaVersion() &lt;/p&gt;
{
-		return KafkaValidator.CONNECTOR_VERSION_VALUE_20;
+		return KafkaValidator.CONNECTOR_VERSION_VALUE_UNIVERSAL;
 	}&lt;br/&gt;
 &lt;br/&gt;
 	@Override&lt;br/&gt;
diff --git a/flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryTest.java b/flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryTest.java&lt;br/&gt;
index 5043880b21e..4d843bcd82e 100644&lt;br/&gt;
&amp;#8212; a/flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryTest.java&lt;br/&gt;
+++ b/flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/streaming/connectors/kafka/KafkaTableSourceSinkFactoryTest.java&lt;br/&gt;
@@ -40,7 +40,7 @@&lt;br/&gt;
 &lt;br/&gt;
 	@Override&lt;br/&gt;
 	protected String getKafkaVersion() {-		return KafkaValidator.CONNECTOR_VERSION_VALUE_20;+		return KafkaValidator.CONNECTOR_VERSION_VALUE_UNIVERSAL; 	}

&lt;p&gt; 	@Override&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/kafka_sql_common.sh b/flink-end-to-end-tests/test-scripts/kafka_sql_common.sh&lt;br/&gt;
index 3e95b405b10..468f0587db7 100644&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/kafka_sql_common.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/kafka_sql_common.sh&lt;br/&gt;
@@ -21,6 +21,7 @@ KAFKA_CONNECTOR_VERSION=&quot;$1&quot;&lt;br/&gt;
 KAFKA_VERSION=&quot;$2&quot;&lt;br/&gt;
 CONFLUENT_VERSION=&quot;$3&quot;&lt;br/&gt;
 CONFLUENT_MAJOR_VERSION=&quot;$4&quot;&lt;br/&gt;
+KAFKA_SQL_VERSION=&quot;$5&quot;&lt;/p&gt;

&lt;p&gt; source &quot;$(dirname &quot;$0&quot;)&quot;/kafka-common.sh $2 $3 $4&lt;/p&gt;

&lt;p&gt;@@ -64,7 +65,7 @@ function get_kafka_json_source_schema {&lt;br/&gt;
         type: ROW&amp;lt;type VARCHAR, message VARCHAR&amp;gt;&lt;br/&gt;
     connector:&lt;br/&gt;
       type: kafka&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;version: &quot;$KAFKA_CONNECTOR_VERSION&quot;&lt;br/&gt;
+      version: &quot;$KAFKA_SQL_VERSION&quot;&lt;br/&gt;
       topic: $topicName&lt;br/&gt;
       startup-mode: earliest-offset&lt;br/&gt;
       properties:&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/test_sql_client.sh b/flink-end-to-end-tests/test-scripts/test_sql_client.sh&lt;br/&gt;
index 74192b40dfb..5dd68838ba7 100755
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-end-to-end-tests/test-scripts/test_sql_client.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test_sql_client.sh&lt;br/&gt;
@@ -23,9 +23,15 @@ KAFKA_CONNECTOR_VERSION=&quot;2.0&quot;&lt;br/&gt;
 KAFKA_VERSION=&quot;2.0.0&quot;&lt;br/&gt;
 CONFLUENT_VERSION=&quot;5.0.0&quot;&lt;br/&gt;
 CONFLUENT_MAJOR_VERSION=&quot;5.0&quot;&lt;br/&gt;
+KAFKA_SQL_VERSION=&quot;universal&quot;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; source &quot;$(dirname &quot;$0&quot;)&quot;/common.sh&lt;br/&gt;
-source &quot;$(dirname &quot;$0&quot;)&quot;/kafka_sql_common.sh $KAFKA_CONNECTOR_VERSION $KAFKA_VERSION $CONFLUENT_VERSION $CONFLUENT_MAJOR_VERSION&lt;br/&gt;
+source &quot;$(dirname &quot;$0&quot;)&quot;/kafka_sql_common.sh \&lt;br/&gt;
+  $KAFKA_CONNECTOR_VERSION \&lt;br/&gt;
+  $KAFKA_VERSION \&lt;br/&gt;
+  $CONFLUENT_VERSION \&lt;br/&gt;
+  $CONFLUENT_MAJOR_VERSION \&lt;br/&gt;
+  $KAFKA_SQL_VERSION&lt;br/&gt;
 source &quot;$(dirname &quot;$0&quot;)&quot;/elasticsearch-common.sh&lt;/p&gt;

&lt;p&gt; SQL_TOOLBOX_JAR=$END_TO_END_DIR/flink-sql-client-test/target/SqlToolbox.jar&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/test_sql_client_kafka.sh b/flink-end-to-end-tests/test-scripts/test_sql_client_kafka.sh&lt;br/&gt;
index a05dc050a60..94e89a2b1e8 100755&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/test_sql_client_kafka.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test_sql_client_kafka.sh&lt;br/&gt;
@@ -19,4 +19,4 @@&lt;/p&gt;

&lt;p&gt; set -Eeuo pipefail&lt;/p&gt;

&lt;p&gt;-source &quot;$(dirname &quot;$0&quot;)&quot;/test_sql_client_kafka_common.sh 2.0 2.0.0 5.0.0 5.0 &quot;kafka&quot;&lt;br/&gt;
+source &quot;$(dirname &quot;$0&quot;)&quot;/test_sql_client_kafka_common.sh 2.0 2.0.0 5.0.0 5.0 &quot;kafka&quot; &quot;universal&quot;&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/test_sql_client_kafka010.sh b/flink-end-to-end-tests/test-scripts/test_sql_client_kafka010.sh&lt;br/&gt;
index c710abc72bc..66bef6623a1 100755&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/test_sql_client_kafka010.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test_sql_client_kafka010.sh&lt;br/&gt;
@@ -19,4 +19,4 @@&lt;/p&gt;

&lt;p&gt; set -Eeuo pipefail&lt;/p&gt;

&lt;p&gt;-source &quot;$(dirname &quot;$0&quot;)&quot;/test_sql_client_kafka_common.sh 0.10 0.10.2.0 3.2.0 3.2 &quot;kafka-0.10&quot;&lt;br/&gt;
+source &quot;$(dirname &quot;$0&quot;)&quot;/test_sql_client_kafka_common.sh 0.10 0.10.2.0 3.2.0 3.2 &quot;kafka-0.10&quot; &quot;0.10&quot;&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/test_sql_client_kafka_common.sh b/flink-end-to-end-tests/test-scripts/test_sql_client_kafka_common.sh&lt;br/&gt;
index 149c86f570e..08ed59b419c 100755&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/test_sql_client_kafka_common.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/test_sql_client_kafka_common.sh&lt;br/&gt;
@@ -22,9 +22,15 @@ KAFKA_VERSION=&quot;$2&quot;&lt;br/&gt;
 CONFLUENT_VERSION=&quot;$3&quot;&lt;br/&gt;
 CONFLUENT_MAJOR_VERSION=&quot;$4&quot;&lt;br/&gt;
 KAFKA_SQL_JAR=&quot;$5&quot;&lt;br/&gt;
+KAFKA_SQL_VERSION=&quot;$6&quot;&lt;/p&gt;

&lt;p&gt; source &quot;$(dirname &quot;$0&quot;)&quot;/common.sh&lt;br/&gt;
-source &quot;$(dirname &quot;$0&quot;)&quot;/kafka_sql_common.sh $KAFKA_CONNECTOR_VERSION $KAFKA_VERSION $CONFLUENT_VERSION $CONFLUENT_MAJOR_VERSION&lt;br/&gt;
+source &quot;$(dirname &quot;$0&quot;)&quot;/kafka_sql_common.sh \&lt;br/&gt;
+  $KAFKA_CONNECTOR_VERSION \&lt;br/&gt;
+  $KAFKA_VERSION \&lt;br/&gt;
+  $CONFLUENT_VERSION \&lt;br/&gt;
+  $CONFLUENT_MAJOR_VERSION \&lt;br/&gt;
+  $KAFKA_SQL_VERSION&lt;/p&gt;

&lt;p&gt; ################################################################################&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Prepare connectors&lt;br/&gt;
@@ -98,7 +104,7 @@ cat &amp;gt;&amp;gt; $SQL_CONF &amp;lt;&amp;lt; EOF&lt;br/&gt;
         type: BIGINT&lt;br/&gt;
     connector:&lt;br/&gt;
       type: kafka&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;version: &quot;$KAFKA_CONNECTOR_VERSION&quot;&lt;br/&gt;
+      version: &quot;$KAFKA_SQL_VERSION&quot;&lt;br/&gt;
       topic: test-avro&lt;br/&gt;
       startup-mode: earliest-offset&lt;br/&gt;
       properties:&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16689589" author="twalthr" created="Fri, 16 Nov 2018 15:59:08 +0000"  >&lt;p&gt;Fixed in master: ad7e81ae3642f7d1f695a6f2474c59a81bb83949&lt;br/&gt;
Fixed in 1.7.0: d2c2773972fa0b4c5a348d2f885b6c9956432c18&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13193025">FLINK-10620</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00bps:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>