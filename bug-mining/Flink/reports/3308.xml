<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:41:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-12979] Sending data to kafka with CsvRowSerializationSchema always adding a &quot;\n&quot;, &quot;\r&quot;,&quot;\r\n&quot; at the end of the message</title>
                <link>https://issues.apache.org/jira/browse/FLINK-12979</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When sending data to kafka using CsvRowSerializationSchema, the CsvRowSerializationSchema#serialize method helps generating value for KafkaRecord,  which will call  CsvEncoder#endRow and in which  a _cfgLineSeparator will be added at the end of KafkaRecord.value.&lt;/p&gt;

&lt;p&gt;But For  CsvRowSerializationSchema#Builder , when you calling the mothod setLineDelimiter only &quot;\n&quot;,&quot;\r&quot;,&quot;\r\n&quot; could be used as the parameter.  &lt;/p&gt;

&lt;p&gt;It&apos;s not friendly when you want to send a message &quot;123,pingpong,21:00&quot; to kafka but kafka receives a message  &quot;123,pingpong,21:00\r\n&quot;.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure about the reason for limitting the lineDelimiter to &quot;\n&quot;,&quot;\r&quot;,&quot;\r\n&quot; &#65311; In previous version and jackson-databind, there&apos;s no limits on lineDelimiter. &lt;/p&gt;

&lt;p&gt;But at least it should let the application developer to set LineDelimiter with &quot;&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13241435">FLINK-12979</key>
            <summary>Sending data to kafka with CsvRowSerializationSchema always adding a &quot;\n&quot;, &quot;\r&quot;,&quot;\r\n&quot; at the end of the message</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hmclouro">Hugo Da Cruz Louro</assignee>
                                    <reporter username="chaiyq">chaiyongqiang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 25 Jun 2019 09:41:34 +0000</created>
                <updated>Wed, 16 Oct 2019 14:46:11 +0000</updated>
                            <resolved>Wed, 16 Oct 2019 14:46:11 +0000</resolved>
                                    <version>1.8.0</version>
                    <version>1.8.1</version>
                    <version>1.8.2</version>
                    <version>1.9.0</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>API / Type Serialization System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16874769" author="twalthr" created="Fri, 28 Jun 2019 08:22:17 +0000"  >&lt;p&gt;The implementation is according to the RFC standard. But we could allow setting a custom property to disable the new line at the end.&lt;/p&gt;</comment>
                            <comment id="16876735" author="chaiyq" created="Tue, 2 Jul 2019 07:00:52 +0000"  >&lt;p&gt;When i check  com.fasterxml.jackson.dataformat.csv.CsvSchema, there&apos;s no limit for setLineSeparator.  The default is &apos;\n&apos;, So, For flink, we need set the LineSeparator to &apos;&apos;.&lt;/p&gt;


&lt;p&gt; Even we set a custom property, we also need set  the LineSeparator to &apos;&apos; when we handle the custom property.  So  just  make &apos;&apos; as an available charactor is a simple but effective way to solve this. &lt;/p&gt;

&lt;p&gt;Just like following check. we could allow user set  an &apos;&apos;.  It has the same result. &lt;/p&gt;

&lt;p&gt; if (!delimiter.equals(&quot;\n&quot;) &amp;amp;&amp;amp; !delimiter.equals(&quot;\r&quot;) &amp;amp;&amp;amp; !delimiter.equals(&quot;\r\n&quot;)) &lt;/p&gt;
{
				throw new IllegalArgumentException(
					&quot;Unsupported new line delimiter. Only \\n, \\r, or \\r\\n are supported.&quot;);
			}

&lt;p&gt;Do you think  the way of  opening the limit of setting &apos;&apos; is ok ? &lt;/p&gt;</comment>
                            <comment id="16888608" author="twalthr" created="Fri, 19 Jul 2019 07:31:35 +0000"  >&lt;p&gt;Yes, I think that is ok. Given that the tests pass. Feel free to open a PR that updates docs, descriptor, factory, and tests.&lt;/p&gt;</comment>
                            <comment id="16915176" author="chaiyq" created="Sun, 25 Aug 2019 07:15:22 +0000"  >&lt;p&gt;#9529&lt;/p&gt;</comment>
                            <comment id="16952901" author="twalthr" created="Wed, 16 Oct 2019 14:46:11 +0000"  >&lt;p&gt;Fixed in 1.10.0: ff249bce3dd4ef61518fb1e647e31e8f85640b61&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z042pc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>