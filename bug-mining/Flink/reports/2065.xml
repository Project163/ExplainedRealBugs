<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:30:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-7845] Netty Exception when submitting batch job repeatedly</title>
                <link>https://issues.apache.org/jira/browse/FLINK-7845</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;We had some problems with Flink and Netty so we wrote a small unit test to reproduce the memory issues we have in production. It happens that we have to restart the Flink cluster because the memory is always increasing from job to job. &lt;br/&gt;
The github project is &lt;a href=&quot;https://github.com/okkam-it/flink-memory-leak&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/okkam-it/flink-memory-leak&lt;/a&gt; and the JUnit test is contained in the MemoryLeakTest class (within src/main/test).&lt;br/&gt;
I don&apos;t know if this is the root of our problems but at some point, usually around the 28th loop, the job fails with the following exception (actually we never faced that in production but maybe is related to the memory issue somehow...):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.IllegalAccessError: org/apache/flink/runtime/io/network/netty/NettyMessage
	at io.netty.util.internal.__matchers__.org.apache.flink.runtime.io.network.netty.NettyMessageMatcher.match(NoOpTypeParameterMatcher.java)
	at io.netty.channel.SimpleChannelInboundHandler.acceptInboundMessage(SimpleChannelInboundHandler.java:95)
	at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:102)
	... 16 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13109651">FLINK-7845</key>
            <summary>Netty Exception when submitting batch job repeatedly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pnowojski">Piotr Nowojski</assignee>
                                    <reporter username="f.pompermaier">Flavio Pompermaier</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Oct 2017 08:43:41 +0000</created>
                <updated>Thu, 28 Feb 2019 13:21:31 +0000</updated>
                            <resolved>Tue, 14 Nov 2017 14:17:14 +0000</resolved>
                                    <version>1.3.2</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Runtime / Network</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16247785" author="pnowojski" created="Fri, 10 Nov 2017 17:12:20 +0000"  >&lt;p&gt;Could you strip down your example to some minimal code showing the problem? &lt;/p&gt;

&lt;p&gt;This IllegalAccessError is almost for sure unrelated. Probably it&apos;s caused by dependency convergence error on between Netty 3.8 and 4.0 which should be fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7013&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-7013&lt;/a&gt;. You can try it out with Flink 1.4-SNAPSHOT or wait until the release of 1.4.&lt;/p&gt;</comment>
                            <comment id="16248737" author="f.pompermaier" created="Sun, 12 Nov 2017 00:04:19 +0000"  >&lt;p&gt;Same error also using flink 1.4-SNAPSHOT:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.IllegalAccessError: org/apache/flink/runtime/io/network/netty/NettyMessage
	at org.apache.flink.shaded.netty4.io.netty.util.internal.__matchers__.org.apache.flink.runtime.io.network.netty.NettyMessageMatcher.match(NoOpTypeParameterMatcher.java)
	at org.apache.flink.shaded.netty4.io.netty.channel.SimpleChannelInboundHandler.acceptInboundMessage(SimpleChannelInboundHandler.java:95)
	at org.apache.flink.shaded.netty4.io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:102)
	... 16 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16249223" author="pnowojski" created="Mon, 13 Nov 2017 08:15:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=f.pompermaier&quot; class=&quot;user-hover&quot; rel=&quot;f.pompermaier&quot;&gt;f.pompermaier&lt;/a&gt; could you push a code for your test using &lt;tt&gt;1.4-SNAPSHOT&lt;/tt&gt; to some branch?&lt;/p&gt;</comment>
                            <comment id="16249256" author="f.pompermaier" created="Mon, 13 Nov 2017 08:52:18 +0000"  >&lt;p&gt;Done. &lt;a href=&quot;https://github.com/okkam-it/flink-memory-leak/tree/flink-1.4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/okkam-it/flink-memory-leak/tree/flink-1.4&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16249321" author="pnowojski" created="Mon, 13 Nov 2017 09:55:24 +0000"  >&lt;p&gt;Thanks, however it doesn&apos;t work for me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; When I try to run tests with scala 2.10, they are failing. Scala 2.10 version is not supported in &lt;tt&gt;1.4-SNAPSHOT&lt;/tt&gt; (the 2.10 artefacts are old/outdated). With scala 2.11 example do not compile. &lt;/p&gt;

&lt;p&gt;Again, could you strip down this example to minimal version showing the problem?&lt;/p&gt;</comment>
                            <comment id="16249366" author="f.pompermaier" created="Mon, 13 Nov 2017 10:40:48 +0000"  >&lt;p&gt;Updated scala to 2.11.&lt;br/&gt;
Maybe it could be a good idea to remove 2.10 jars from snapshots repo to avoid such errors..the compilation problem was caused by the fact that now jackson classes are shaded and should be imported with  org.apache.flink.shaded.jackson2.*.&lt;/p&gt;

&lt;p&gt;From my point of view, this example is already stripped down (from my original code) to a minimal version..from now on I don&apos;t know what I can further remove&lt;/p&gt;</comment>
                            <comment id="16249367" author="zentol" created="Mon, 13 Nov 2017 10:41:34 +0000"  >&lt;p&gt;To get the IllegalAccessError out of the way, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=f.pompermaier&quot; class=&quot;user-hover&quot; rel=&quot;f.pompermaier&quot;&gt;f.pompermaier&lt;/a&gt; could you modify the &lt;tt&gt;NettyMessage&lt;/tt&gt; class to be public and see what happens?&lt;/p&gt;

&lt;p&gt;The generated NettyMessageMatcher tries to access a package-private class (NettyMessage), but it&apos;s package declaration is different (and would apparently fail for all non-public methods).&lt;br/&gt;
The matcher is generated by nettys &lt;tt&gt;JavassistTypeParameterMatcherGenerator&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Why this only happens after the Xth loop is still a mystery though.&lt;/p&gt;</comment>
                            <comment id="16249385" author="pnowojski" created="Mon, 13 Nov 2017 10:58:18 +0000"  >&lt;p&gt;After changing it to public &lt;tt&gt;IllegaltAccessError&lt;/tt&gt; indeed goes away. It&apos;s strange, previously I suspected dependency convergence error, but in 1.4-SNAPSHOT I do not see a netty conflict.&lt;/p&gt;

&lt;p&gt;Btw, I&apos;m looping this test now and so far I have not seen any memory leak/increasing memory consumption.&lt;/p&gt;</comment>
                            <comment id="16249435" author="pnowojski" created="Mon, 13 Nov 2017 11:42:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=f.pompermaier&quot; class=&quot;user-hover&quot; rel=&quot;f.pompermaier&quot;&gt;f.pompermaier&lt;/a&gt; your loop seems to extending the job over and over again instead of creating new environment. Every next job is bigger then the previous one. &lt;/p&gt;

&lt;p&gt;Regarding stripping down. You could remove derby and jdbc source. You could simplify your jobs graph (unions...), remove operators until a bare minimum. There are some weird parameters/flags like: exploitParallelism, etc. At some point if problem disappears you at least narrows down the suspects.&lt;/p&gt;</comment>
                            <comment id="16249545" author="f.pompermaier" created="Mon, 13 Nov 2017 13:25:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt; now I&apos;ve pushed a version of the job without the JDBC source. Now it takes a lot more to fail (about 200/300 jobs) but it still fails (eventually).&lt;br/&gt;
My opinion about this is that there&apos;s still some memory leak somewhere that is less visible if using an in-memory source (less objects to remove during GC).&lt;/p&gt;

&lt;p&gt;Due to this fact I&apos;d avoid to reduce the number of transformations/complexity of the job..&lt;/p&gt;</comment>
                            <comment id="16249564" author="pnowojski" created="Mon, 13 Nov 2017 13:43:42 +0000"  >&lt;p&gt;Why are you suspecting a memory leak? How is this test failing for you? &lt;/p&gt;

&lt;p&gt;If your job is larger and larger on each iteration it is expected that at some point something will fail.&lt;/p&gt;</comment>
                            <comment id="16249571" author="f.pompermaier" created="Mon, 13 Nov 2017 13:52:00 +0000"  >&lt;p&gt;The job always fails with the same error &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.IllegalAccessError: org/apache/flink/runtime/io/network/netty/NettyMessage)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I suspect a memory leak because if you look at the output of the program the free memory continuously drops.&lt;/p&gt;

&lt;p&gt;Shouldn&apos;t the call to env.execute() clear the current execution plan?&lt;br/&gt;
Because in all my experience when you call execute() only the plan between&lt;br/&gt;
the 2 execute() is effectively executed, isn&apos;t it?&lt;/p&gt;

</comment>
                            <comment id="16249627" author="pnowojski" created="Mon, 13 Nov 2017 14:05:38 +0000"  >&lt;p&gt;IllegalAccessError is irrelevant to any memory leak for 99.9% and I&apos;m investigating it right now.&lt;/p&gt;

&lt;p&gt;Memory usage of your test is stable for me (please check the attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12897321/12897321_Screen+Shot+2017-11-13+at+14.54.38.png&quot; title=&quot;Screen Shot 2017-11-13 at 14.54.38.png attached to FLINK-7845&quot;&gt;Screen Shot 2017-11-13 at 14.54.38.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; to the issue). The only issue that I have seen is that after lots of iteration I got this error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.io.IOException: Insufficient number of network buffers: required 8, but only 4 available. The total number of network buffers is currently set to 11519 of 32768 bytes each. You can increase &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; number by setting the configuration keys &lt;span class=&quot;code-quote&quot;&gt;&apos;taskmanager.network.memory.fraction&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;taskmanager.network.memory.min&apos;&lt;/span&gt;, and &lt;span class=&quot;code-quote&quot;&gt;&apos;taskmanager.network.memory.max&apos;&lt;/span&gt;.
    at org.apache.flink.runtime.io.network.buffer.NetworkBufferPool.createBufferPool(NetworkBufferPool.java:257)
    at org.apache.flink.runtime.io.network.NetworkEnvironment.registerTask(NetworkEnvironment.java:199)
    at org.apache.flink.runtime.taskmanager.Task.run(Task.java:618)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but it is almost for sure caused because of ever increasing job size. Each subsequent iteration has more and more tasks, which is clearly visible in the logs.  I&apos;m not sure if only the plan between two execute() calls is executed (you can easily test it), however look at the following lines in your code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
			&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entitonTuples == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
				entitonTuples = dsQuads;
			} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
				entitonTuples = entitonTuples.union(dsQuads);
			}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;after first iteration you are always making a union with previous iterations. I bet this is the reason for growing job graph.&lt;/p&gt;</comment>
                            <comment id="16249653" author="f.pompermaier" created="Mon, 13 Nov 2017 14:22:10 +0000"  >&lt;p&gt;Also looking at the Flink code it seems that only the code between 2 execute() is actually executed.&lt;/p&gt;

&lt;p&gt;However you&apos;re right, in this case the job plan is continuously increasing...I didn&apos;t notice that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Now I&apos;ve pushed the fixed version (without any union).  Right now I am still running the test: ~800 loops and the memory is very stable.&lt;br/&gt;
If no error is thrown before the end of the test (10 k rounds) I&apos;ll close the JIRA issue.&lt;/p&gt;

&lt;p&gt;I was hoping this test was able to reproduce the memory problems we have in production, where we need to restart the Flink cluster after a few jobs (otherwise the memory continuously decrease and we have OOM). Thanks for the support anyway &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16249685" author="f.pompermaier" created="Mon, 13 Nov 2017 15:00:49 +0000"  >&lt;p&gt;The problem was in the test program&lt;/p&gt;</comment>
                            <comment id="16249688" author="pnowojski" created="Mon, 13 Nov 2017 15:02:07 +0000"  >&lt;p&gt;Please do not close this ticket, since &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalAccessError: org/apache/flink/runtime/io/network/netty/NettyMessage
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is indeed a bug in Flink. It was showing up only after 20-60 iterations because only at that point JIT was deciding to compile this method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 106188 15451       3       org.apache.flink.shaded.netty4.io.netty.util.internal.__matchers__.org.apache.flink.runtime.io.network.netty.NettyMessageMatcher::match (5 bytes)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Before compilation, for some strange reasons interpreted version of this method is working fine. Apparently interpreted and compiled code were slightly different. It might have something to do with &lt;tt&gt;NoOpTypeParameterMatcher&lt;/tt&gt; being super simple and always returning &lt;tt&gt;true&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=f.pompermaier&quot; class=&quot;user-hover&quot; rel=&quot;f.pompermaier&quot;&gt;f.pompermaier&lt;/a&gt; if you will be able to find something new regarding this suspected memory leak please open new ticket or write on the user mailing list. However keep in mind that in use cases were you are submitting indefinitely multiple jobs to the stand alone Flink cluster, that it&apos;s important that your job should always clean up after themselves. Especially pay attention at the 3rd party libraries, if they are not initialising some static contexts that are never deinitialised. Sometimes it might be helpful to make sure that number of threads is not increasing overtime. If it is, find out to whom those threads belong.&lt;/p&gt;</comment>
                            <comment id="16249765" author="pnowojski" created="Mon, 13 Nov 2017 16:01:40 +0000"  >&lt;p&gt;This is not a bug in Flink after all. According to discussion in this issue: &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/JAVA-1337&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://datastax-oss.atlassian.net/browse/JAVA-1337&lt;/a&gt;  this is strange behaviour that should go away after removing javaassist from the class path or after upgrading Netty at least to 4.0.45. Since we can not upgrade Netty at the moment, I have create a PR making &lt;tt&gt;NettyMessage&lt;/tt&gt; class public.&lt;/p&gt;</comment>
                            <comment id="16249767" author="githubbot" created="Mon, 13 Nov 2017 16:04:21 +0000"  >&lt;p&gt;GitHub user pnowojski opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7845&quot; title=&quot;Netty Exception when submitting batch job repeatedly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7845&quot;&gt;&lt;del&gt;FLINK-7845&lt;/del&gt;&lt;/a&gt; Make NettyMessage public&lt;/p&gt;

&lt;p&gt;    This a walkaround strange javaassist bug. The issue should go away&lt;br/&gt;
    once we upgrade netty dependency.&lt;/p&gt;

&lt;p&gt;    Please check the &lt;span class=&quot;error&quot;&gt;&amp;#91;ticket&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7845&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-7845&lt;/a&gt;) for more information.&lt;/p&gt;

&lt;p&gt;    This change was manually tested on this example: &lt;a href=&quot;https://github.com/okkam-it/flink-memory-leak&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/okkam-it/flink-memory-leak&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (*&lt;b&gt;not applicable&lt;/b&gt;* / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/pnowojski/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/pnowojski/flink&lt;/a&gt; f7845&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5007.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5007.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5007&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 99b88881bd240e16f6c461893f2cc93a0e5e3db3&lt;br/&gt;
Author: Piotr Nowojski &amp;lt;piotr.nowojski@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-11-13T15:51:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7845&quot; title=&quot;Netty Exception when submitting batch job repeatedly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7845&quot;&gt;&lt;del&gt;FLINK-7845&lt;/del&gt;&lt;/a&gt; Make NettyMessage public&lt;/p&gt;

&lt;p&gt;    This a walkaround strange javaassist bug. The issue should go away&lt;br/&gt;
    once we upgrade netty dependency.&lt;/p&gt;

&lt;p&gt;    Please check the ticket for more information.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16249881" author="githubbot" created="Mon, 13 Nov 2017 17:52:23 +0000"  >&lt;p&gt;Github user NicoK commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5007#discussion_r150615019&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5007#discussion_r150615019&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/io/network/netty/NettyMessage.java &amp;#8212;&lt;br/&gt;
    @@ -52,8 +52,10 @@&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A simple and generic interface to serialize messages to Netty&apos;s buffer space.&lt;br/&gt;
    + *&lt;br/&gt;
    + * &amp;lt;p&amp;gt;This class must be public as long as we are using Netty 4.0.x. Please check &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7845&quot; title=&quot;Netty Exception when submitting batch job repeatedly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7845&quot;&gt;&lt;del&gt;FLINK-7845&lt;/del&gt;&lt;/a&gt; for more information.
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    actually, Netty 4.0.45 seemed to fix this already&lt;/p&gt;</comment>
                            <comment id="16251030" author="githubbot" created="Tue, 14 Nov 2017 07:34:12 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5007#discussion_r150755017&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5007#discussion_r150755017&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/io/network/netty/NettyMessage.java &amp;#8212;&lt;br/&gt;
    @@ -52,8 +52,10 @@&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A simple and generic interface to serialize messages to Netty&apos;s buffer space.&lt;br/&gt;
    + *&lt;br/&gt;
    + * &amp;lt;p&amp;gt;This class must be public as long as we are using Netty 4.0.x. Please check &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7845&quot; title=&quot;Netty Exception when submitting batch job repeatedly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7845&quot;&gt;&lt;del&gt;FLINK-7845&lt;/del&gt;&lt;/a&gt; for more information.
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    yes that&apos;s true, according to the cassandra JIRA.&lt;/p&gt;</comment>
                            <comment id="16251053" author="githubbot" created="Tue, 14 Nov 2017 08:05:41 +0000"  >&lt;p&gt;Github user pnowojski commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5007#discussion_r150759972&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5007#discussion_r150759972&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/io/network/netty/NettyMessage.java &amp;#8212;&lt;br/&gt;
    @@ -52,8 +52,10 @@&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A simple and generic interface to serialize messages to Netty&apos;s buffer space.&lt;br/&gt;
    + *&lt;br/&gt;
    + * &amp;lt;p&amp;gt;This class must be public as long as we are using Netty 4.0.x. Please check &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7845&quot; title=&quot;Netty Exception when submitting batch job repeatedly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7845&quot;&gt;&lt;del&gt;FLINK-7845&lt;/del&gt;&lt;/a&gt; for more information.
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    added specific Netty version.&lt;/p&gt;</comment>
                            <comment id="16251125" author="githubbot" created="Tue, 14 Nov 2017 09:19:11 +0000"  >&lt;p&gt;Github user NicoK commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5007#discussion_r150775237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5007#discussion_r150775237&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/io/network/netty/NettyMessage.java &amp;#8212;&lt;br/&gt;
    @@ -52,8 +52,10 @@&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A simple and generic interface to serialize messages to Netty&apos;s buffer space.&lt;br/&gt;
    + *&lt;br/&gt;
    + * &amp;lt;p&amp;gt;This class must be public as long as we are using Netty 4.0.x. Please check &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7845&quot; title=&quot;Netty Exception when submitting batch job repeatedly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7845&quot;&gt;&lt;del&gt;FLINK-7845&lt;/del&gt;&lt;/a&gt; for more information.
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    @zentol: not only according to the cassandra ticket... yesterday we checked ourselves, before we found that&lt;/p&gt;</comment>
                            <comment id="16251183" author="githubbot" created="Tue, 14 Nov 2017 10:02:43 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merging.&lt;/p&gt;</comment>
                            <comment id="16251432" author="zentol" created="Tue, 14 Nov 2017 14:17:14 +0000"  >&lt;p&gt;1.4: 6f9ab7217266f5458263fdd976214c1b4c552576&lt;br/&gt;
1.5: 16107cf67416391ccf1493bda747a108bbbb3a20&lt;/p&gt;</comment>
                            <comment id="16251433" author="githubbot" created="Tue, 14 Nov 2017 14:17:23 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5007&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16251503" author="githubbot" created="Tue, 14 Nov 2017 15:03:55 +0000"  >&lt;p&gt;Github user pnowojski commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12897321" name="Screen Shot 2017-11-13 at 14.54.38.png" size="181542" author="pnowojski" created="Mon, 13 Nov 2017 14:00:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3laun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>