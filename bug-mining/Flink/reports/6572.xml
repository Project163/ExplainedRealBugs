<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:11:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-28767] SqlGatewayServiceITCase.testCancelOperation failed with AssertionFailedError</title>
                <link>https://issues.apache.org/jira/browse/FLINK-28767</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2022-07-31T03:32:09.3148584Z Jul 31 03:32:09 [ERROR] Tests run: 16, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 7.268 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.table.gateway.service.SqlGatewayServiceITCase
2022-07-31T03:32:09.3205977Z Jul 31 03:32:09 [ERROR] org.apache.flink.table.gateway.service.SqlGatewayServiceITCase.testCancelOperation  Time elapsed: 0.008 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
2022-07-31T03:32:09.3207151Z Jul 31 03:32:09 org.opentest4j.AssertionFailedError: expected: &amp;lt;org.apache.flink.table.gateway.api.results.OperationInfo@ab4fed9f&amp;gt; but was: &amp;lt;org.apache.flink.table.gateway.api.results.OperationInfo@ea9e78d5&amp;gt;
2022-07-31T03:32:09.3207956Z Jul 31 03:32:09 	at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55)
2022-07-31T03:32:09.3211582Z Jul 31 03:32:09 	at org.junit.jupiter.api.AssertionUtils.failNotEqual(AssertionUtils.java:62)
2022-07-31T03:32:09.3212267Z Jul 31 03:32:09 	at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)
2022-07-31T03:32:09.3212945Z Jul 31 03:32:09 	at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)
2022-07-31T03:32:09.3213607Z Jul 31 03:32:09 	at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1141)
2022-07-31T03:32:09.3216761Z Jul 31 03:32:09 	at org.apache.flink.table.gateway.service.SqlGatewayServiceITCase.testCancelOperation(SqlGatewayServiceITCase.java:245)
2022-07-31T03:32:09.3217645Z Jul 31 03:32:09 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2022-07-31T03:32:09.3218243Z Jul 31 03:32:09 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2022-07-31T03:32:09.3218971Z Jul 31 03:32:09 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2022-07-31T03:32:09.3219622Z Jul 31 03:32:09 	at java.lang.reflect.Method.invoke(Method.java:498)
2022-07-31T03:32:09.3227901Z Jul 31 03:32:09 	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)
2022-07-31T03:32:09.3228714Z Jul 31 03:32:09 	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
2022-07-31T03:32:09.3229561Z Jul 31 03:32:09 	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
2022-07-31T03:32:09.3230353Z Jul 31 03:32:09 	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
2022-07-31T03:32:09.3231409Z Jul 31 03:32:09 	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)
2022-07-31T03:32:09.3235059Z Jul 31 03:32:09 	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)
2022-07-31T03:32:09.3236100Z Jul 31 03:32:09 	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
2022-07-31T03:32:09.3236978Z Jul 31 03:32:09 	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
2022-07-31T03:32:09.3237841Z Jul 31 03:32:09 	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
2022-07-31T03:32:09.3241384Z Jul 31 03:32:09 	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
2022-07-31T03:32:09.3242557Z Jul 31 03:32:09 	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
2022-07-31T03:32:09.3243372Z Jul 31 03:32:09 	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
2022-07-31T03:32:09.3244155Z Jul 31 03:32:09 	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
2022-07-31T03:32:09.3244899Z Jul 31 03:32:09 	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
2022-07-31T03:32:09.3249715Z Jul 31 03:32:09 	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)
2022-07-31T03:32:09.3250594Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
2022-07-31T03:32:09.3251432Z Jul 31 03:32:09 	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)
2022-07-31T03:32:09.3252291Z Jul 31 03:32:09 	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)
2022-07-31T03:32:09.3253055Z Jul 31 03:32:09 	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)
2022-07-31T03:32:09.3256625Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
2022-07-31T03:32:09.3257465Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
2022-07-31T03:32:09.3258297Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
2022-07-31T03:32:09.3259062Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
2022-07-31T03:32:09.3262851Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
2022-07-31T03:32:09.3263723Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
2022-07-31T03:32:09.3264528Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
2022-07-31T03:32:09.3265259Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
2022-07-31T03:32:09.3266191Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)
2022-07-31T03:32:09.3270216Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService.executeNonConcurrentTasks(ForkJoinPoolHierarchicalTestExecutorService.java:155)
2022-07-31T03:32:09.3271316Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService.invokeAll(ForkJoinPoolHierarchicalTestExecutorService.java:135)
2022-07-31T03:32:09.3272431Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
2022-07-31T03:32:09.3273258Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
2022-07-31T03:32:09.3277605Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
2022-07-31T03:32:09.3278454Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
2022-07-31T03:32:09.3279180Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
2022-07-31T03:32:09.3280019Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
2022-07-31T03:32:09.3280980Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
2022-07-31T03:32:09.3287071Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
2022-07-31T03:32:09.3288036Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)
2022-07-31T03:32:09.3289128Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService.invokeAll(ForkJoinPoolHierarchicalTestExecutorService.java:129)
2022-07-31T03:32:09.3290078Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
2022-07-31T03:32:09.3294254Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
2022-07-31T03:32:09.3295128Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
2022-07-31T03:32:09.3295912Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
2022-07-31T03:32:09.3296679Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
2022-07-31T03:32:09.3297504Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
2022-07-31T03:32:09.3305416Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
2022-07-31T03:32:09.3306251Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
2022-07-31T03:32:09.3307191Z Jul 31 03:32:09 	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:185)
2022-07-31T03:32:09.3308099Z Jul 31 03:32:09 	at java.util.concurrent.RecursiveAction.exec(RecursiveAction.java:189)
2022-07-31T03:32:09.3308702Z Jul 31 03:32:09 	at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)
2022-07-31T03:32:09.3315595Z Jul 31 03:32:09 	at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)
2022-07-31T03:32:09.3316450Z Jul 31 03:32:09 	at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)
2022-07-31T03:32:09.3317133Z Jul 31 03:32:09 	at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:175)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=38962&amp;amp;view=logs&amp;amp;j=a9db68b9-a7e0-54b6-0f98-010e0aff39e2&amp;amp;t=cdd32e0b-6047-565b-c58f-14054472f1be&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=38962&amp;amp;view=logs&amp;amp;j=a9db68b9-a7e0-54b6-0f98-010e0aff39e2&amp;amp;t=cdd32e0b-6047-565b-c58f-14054472f1be&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13474509">FLINK-28767</key>
            <summary>SqlGatewayServiceITCase.testCancelOperation failed with AssertionFailedError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fsk119">Shengkai Fang</assignee>
                                    <reporter username="hxbks2ks">Huang Xingbo</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Mon, 1 Aug 2022 11:45:37 +0000</created>
                <updated>Fri, 12 Aug 2022 02:43:22 +0000</updated>
                            <resolved>Fri, 12 Aug 2022 02:43:22 +0000</resolved>
                                    <version>1.16.0</version>
                                    <fixVersion>1.16.0</fixVersion>
                                    <component>Table SQL / Gateway</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17573716" author="hxbks2ks" created="Mon, 1 Aug 2022 11:45:57 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fsk119&quot; class=&quot;user-hover&quot; rel=&quot;fsk119&quot;&gt;fsk119&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17575049" author="hxbks2ks" created="Thu, 4 Aug 2022 06:13:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=39229&amp;amp;view=logs&amp;amp;j=a9db68b9-a7e0-54b6-0f98-010e0aff39e2&amp;amp;t=cdd32e0b-6047-565b-c58f-14054472f1be&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=39229&amp;amp;view=logs&amp;amp;j=a9db68b9-a7e0-54b6-0f98-010e0aff39e2&amp;amp;t=cdd32e0b-6047-565b-c58f-14054472f1be&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17576625" author="hxbks2ks" created="Mon, 8 Aug 2022 08:16:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/hxbks2ks/FLINK-TEST/_build/results?buildId=1963&amp;amp;view=logs&amp;amp;j=43a593e7-535d-554b-08cc-244368da36b4&amp;amp;t=82d122c0-8bbf-56f3-4c0d-8e3d69630d0f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/hxbks2ks/FLINK-TEST/_build/results?buildId=1963&amp;amp;view=logs&amp;amp;j=43a593e7-535d-554b-08cc-244368da36b4&amp;amp;t=82d122c0-8bbf-56f3-4c0d-8e3d69630d0f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17577765" author="luoyuxia" created="Wed, 10 Aug 2022 05:20:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/leonardBang/Azure_CI/_build/results?buildId=719&amp;amp;view=logs&amp;amp;j=43a593e7-535d-554b-08cc-244368da36b4&amp;amp;t=82d122c0-8bbf-56f3-4c0d-8e3d69630d0f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/leonardBang/Azure_CI/_build/results?buildId=719&amp;amp;view=logs&amp;amp;j=43a593e7-535d-554b-08cc-244368da36b4&amp;amp;t=82d122c0-8bbf-56f3-4c0d-8e3d69630d0f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17577843" author="fsk119" created="Wed, 10 Aug 2022 07:52:12 +0000"  >&lt;p&gt;After investigation, I find the main cause is when the test thread cancel the execution, the SqlGatewayService doesn&apos;t wait for the execution thread exits. When the execution thread is interrupted, it will record the error. Here the test cancels the operation and then fetch the OperationStatus. It means it&apos;s possible to get the InterruptedException or not.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think we don&apos;t need to record the exception if the execution is interrupted by the users. Users knows what happens.&#160;&lt;/p&gt;</comment>
                            <comment id="17578757" author="fsk119" created="Fri, 12 Aug 2022 02:43:15 +0000"  >&lt;p&gt;Merged into master: 8813a5ac914835ce76eeeeb39f9e0bf0e1760af3&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z17d40:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>