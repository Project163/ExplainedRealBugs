<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:23:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3697] keyBy() with nested POJO computes invalid field position indexes</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3697</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Using named keys in keyBy() for nested POJO types results in failure. The iindexes for named key fields are used inconsistently with nested POJO types. In particular, &lt;tt&gt;PojoTypeInfo.getFlatFields()&lt;/tt&gt; returns the field&apos;s position after (apparently) flattening the structure but is referenced in the unflattened version of the POJO type by &lt;tt&gt;PojoTypeInfo.getTypeAt()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In the example below, getFlatFields() returns positions 0, 1, and 14. These positions appear correct in the flattened structure of the Data class. However, in &lt;tt&gt;KeySelector&amp;lt;X, Tuple&amp;gt; getSelectorForKeys(Keys&amp;lt;X&amp;gt; keys, TypeInformation&amp;lt;X&amp;gt; typeInfo, ExecutionConfig executionConfig)&lt;/tt&gt;, a call to &lt;tt&gt;compositeType.getTypeAt(logicalKeyPositions&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;)&lt;/tt&gt; for the third key results &lt;tt&gt;PojoTypeInfo.getTypeAt()&lt;/tt&gt; declaring it out of range, as it compares the length of the directly named fields of the object vs the length of flattened version of that type.&lt;/p&gt;

&lt;p&gt;Concrete Example:&lt;br/&gt;
Consider this graph:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;DataStream&amp;lt;TimesliceData&amp;gt; dataStream = see.addSource(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FlinkKafkaConsumer08&amp;lt;&amp;gt;(timesliceConstants.topic, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataDeserialzer(), kafkaConsumerProperties));

dataStream
      .flatMap(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataMapper())
      .keyBy(&lt;span class=&quot;code-quote&quot;&gt;&quot;aaa&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;abc&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;wxyz&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;DataDeserialzer&lt;/tt&gt; returns a &quot;NativeDataFormat&quot; object; &lt;tt&gt;DataMapper&lt;/tt&gt; takes this NativeDataFormat object and extracts individual Data objects: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Data {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; aaa;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; abc;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; wxyz;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; t1;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; t2;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Policy policy;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Stats stats;

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Data() {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A &lt;tt&gt;Policy&lt;/tt&gt; object is an instance of this class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Policy {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; a;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; b;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; c;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; d;

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Policy() {}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A &lt;tt&gt;Stats&lt;/tt&gt; object is an instance of this class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Stats {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; count;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; a;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; b;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; c;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; d;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; e;

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Stats() {}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;MacOS X 10.10&lt;/p&gt;</environment>
        <key id="12955874">FLINK-3697</key>
            <summary>keyBy() with nested POJO computes invalid field position indexes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10003">Resolved</resolution>
                                        <assignee username="rmetzger">Robert Metzger</assignee>
                                    <reporter username="rcrocker@newrelic.com">Ron Crocker</reporter>
                        <labels>
                            <label>pojo</label>
                    </labels>
                <created>Mon, 4 Apr 2016 19:11:03 +0000</created>
                <updated>Fri, 8 Apr 2016 08:41:28 +0000</updated>
                            <resolved>Thu, 7 Apr 2016 14:04:16 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15225979" author="rmetzger" created="Tue, 5 Apr 2016 09:40:08 +0000"  >&lt;p&gt;Thank you for reporting the issue. I&apos;ll look into it.&lt;/p&gt;</comment>
                            <comment id="15226011" author="kokonuts" created="Tue, 5 Apr 2016 10:05:21 +0000"  >&lt;p&gt;It took my few hours to find out that it is flink bug and not my doing. I am getting:&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.IndexOutOfBoundsException&lt;br/&gt;
	at org.apache.flink.api.java.typeutils.PojoTypeInfo.getTypeAt(PojoTypeInfo.java:259)&lt;br/&gt;
	at org.apache.flink.streaming.util.keys.KeySelectorUtil.getSelectorForKeys(KeySelectorUtil.java:62)&lt;br/&gt;
	at org.apache.flink.streaming.api.datastream.DataStream.keyBy(DataStream.java:276)&lt;/p&gt;

&lt;p&gt;when using the following nested pojo:&lt;br/&gt;
public class RawEvent {&lt;br/&gt;
    public long timeStamp;&lt;br/&gt;
    public String[] message;&lt;br/&gt;
    public String type;&lt;br/&gt;
    public int count=1;&lt;br/&gt;
    public String productId;&lt;br/&gt;
    public RawEvent() {&lt;br/&gt;
    }&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;using this keyby :&lt;br/&gt;
                .keyBy(&quot;rawEvent.productId&quot;)&lt;/p&gt;

&lt;p&gt;however, it works fine if I rename &quot;productId&quot; to &quot;c&quot;.&lt;br/&gt;
                .keyBy(&quot;rawEvent.c&quot;)&lt;/p&gt;

&lt;p&gt;This sound like the same issue described here. I think it is should be major bug instead of minor. I am having hard time to explain to my team members that we can&apos;t name the pojo variable to what it needs to be.&lt;/p&gt;

</comment>
                            <comment id="15226020" author="rmetzger" created="Tue, 5 Apr 2016 10:09:40 +0000"  >&lt;p&gt;Thank you for the report. I marked the issue as &quot;Critical&quot;.&lt;/p&gt;

&lt;p&gt;As a workaround, you can implement a KeySelector function.&lt;/p&gt;

&lt;p&gt;I was also able to reproduce the issue. I hope to find a good fix soon.&lt;/p&gt;</comment>
                            <comment id="15226186" author="githubbot" created="Tue, 5 Apr 2016 12:51:21 +0000"  >&lt;p&gt;GitHub user rmetzger opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1851&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1851&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3697&quot; title=&quot;keyBy() with nested POJO computes invalid field position indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3697&quot;&gt;&lt;del&gt;FLINK-3697&lt;/del&gt;&lt;/a&gt; Properly access type information for nested POJO key selection&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rmetzger/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rmetzger/flink&lt;/a&gt; flink3697&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1851.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1851.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1851&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 614e59f619ed64e20c7970640e8a22f7883a50af&lt;br/&gt;
Author: Robert Metzger &amp;lt;rmetzger@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-04-05T12:48:40Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3697&quot; title=&quot;keyBy() with nested POJO computes invalid field position indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3697&quot;&gt;&lt;del&gt;FLINK-3697&lt;/del&gt;&lt;/a&gt; Properly access type information for nested POJO key selection&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15226188" author="rmetzger" created="Tue, 5 Apr 2016 12:52:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rcrocker%40newrelic.com&quot; class=&quot;user-hover&quot; rel=&quot;rcrocker@newrelic.com&quot;&gt;rcrocker@newrelic.com&lt;/a&gt; are you okay with using the code you&apos;ve provided for my test case?&lt;/p&gt;</comment>
                            <comment id="15226504" author="rcrocker@newrelic.com" created="Tue, 5 Apr 2016 15:50:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; This code is fine to use for your test case. &lt;/p&gt;

&lt;p&gt;The key aspect to include is a key field is lexicographically &quot;greater than&quot; a field that holds a nested POJO. This is what causes the index of the key field (in the flattened representation of the POJO) to be beyond the natural (unflattened) fields of the outer POJO.&lt;/p&gt;

&lt;p&gt;I would have provided a shorter example but I didn&apos;t have the time to do so.&lt;/p&gt;</comment>
                            <comment id="15226507" author="githubbot" created="Tue, 5 Apr 2016 15:53:09 +0000"  >&lt;p&gt;Github user RonCrocker commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1851#discussion_r58564095&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1851#discussion_r58564095&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/util/FieldAccessor.java &amp;#8212;&lt;br/&gt;
    @@ -182,11 +182,14 @@ public R set(R record, F fieldValue) {&lt;br/&gt;
     			@SuppressWarnings(&quot;unchecked&quot;)&lt;br/&gt;
     			CompositeType&amp;lt;R&amp;gt; cType = (CompositeType&amp;lt;R&amp;gt;) type;&lt;/p&gt;

&lt;p&gt;    +			if(field.contains(&quot;.&quot;)) {&lt;br/&gt;
    +				throw new IllegalArgumentException(&quot;The Pojo field accessor currently doesn&apos;t support nested POJOs&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Note that the problem reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3697&quot; title=&quot;keyBy() with nested POJO computes invalid field position indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3697&quot;&gt;&lt;del&gt;FLINK-3697&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3697&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-3697&lt;/a&gt;) was not related to accessing a nested field.. Perhaps there should be a subsequent JIRA ticket to support nested POJO accessors.&lt;/p&gt;</comment>
                            <comment id="15226511" author="githubbot" created="Tue, 5 Apr 2016 15:55:03 +0000"  >&lt;p&gt;Github user rmetzger commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1851#discussion_r58564424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1851#discussion_r58564424&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/util/FieldAccessor.java &amp;#8212;&lt;br/&gt;
    @@ -182,11 +182,14 @@ public R set(R record, F fieldValue) {&lt;br/&gt;
     			@SuppressWarnings(&quot;unchecked&quot;)&lt;br/&gt;
     			CompositeType&amp;lt;R&amp;gt; cType = (CompositeType&amp;lt;R&amp;gt;) type;&lt;/p&gt;

&lt;p&gt;    +			if(field.contains(&quot;.&quot;)) {&lt;br/&gt;
    +				throw new IllegalArgumentException(&quot;The Pojo field accessor currently doesn&apos;t support nested POJOs&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Thank you for reviewing my pull request. I&apos;ve opened &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3702&quot; title=&quot;DataStream API PojoFieldAccessor doesn&amp;#39;t support nested POJOs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3702&quot;&gt;&lt;del&gt;FLINK-3702&lt;/del&gt;&lt;/a&gt; for that.&lt;/p&gt;

&lt;p&gt;    See also here: &lt;a href=&quot;https://github.com/apache/flink/pull/1851/files#diff-e5e091a2c1e4bf850ef93e2010fe4c81R132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1851/files#diff-e5e091a2c1e4bf850ef93e2010fe4c81R132&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15226513" author="githubbot" created="Tue, 5 Apr 2016 15:55:37 +0000"  >&lt;p&gt;Github user RonCrocker commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1851#issuecomment-205868281&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1851#issuecomment-205868281&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    :+1:&lt;/p&gt;
</comment>
                            <comment id="15228041" author="githubbot" created="Wed, 6 Apr 2016 09:45:21 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1851#discussion_r58678493&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1851#discussion_r58678493&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/test/java/org/apache/flink/streaming/api/DataStreamPojoITCase.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,211 @@&lt;br/&gt;
    +/*&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
    + * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
    + * this work for additional information regarding copyright ownership.&lt;br/&gt;
    + * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
    + * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
    + * the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + *    &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +&lt;br/&gt;
    +package org.apache.flink.streaming.api;&lt;br/&gt;
    +&lt;br/&gt;
    +import org.apache.flink.api.common.functions.FlatMapFunction;&lt;br/&gt;
    +import org.apache.flink.streaming.api.datastream.DataStream;&lt;br/&gt;
    +import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;&lt;br/&gt;
    +import org.apache.flink.streaming.api.functions.source.SourceFunction;&lt;br/&gt;
    +import org.apache.flink.streaming.util.StreamingMultipleProgramsTestBase;&lt;br/&gt;
    +import org.apache.flink.util.Collector;&lt;br/&gt;
    +import org.junit.Test;&lt;br/&gt;
    +&lt;br/&gt;
    +/**&lt;br/&gt;
    + * Integration test for streaming programs using POJOs and key selectors&lt;br/&gt;
    + *&lt;br/&gt;
    + * See &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3697&quot; title=&quot;keyBy() with nested POJO computes invalid field position indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3697&quot;&gt;&lt;del&gt;FLINK-3697&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
    + */&lt;br/&gt;
    +public class DataStreamPojoITCase extends StreamingMultipleProgramsTestBase {&lt;br/&gt;
    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Test composite key on the Data POJO (with nested fields)&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testCompositeKeyOnNestedPojo() throws Exception {&lt;br/&gt;
    +		StreamExecutionEnvironment see = StreamExecutionEnvironment.getExecutionEnvironment();&lt;br/&gt;
    +		see.getConfig().disableObjectReuse();&lt;br/&gt;
    +		see.setParallelism(3);&lt;br/&gt;
    +&lt;br/&gt;
    +		DataStream&amp;lt;Data&amp;gt; dataStream = see.addSource(new DataGenerator());&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Why not use &quot;fromCollection()&quot; here and have a prepared list of sample data...&lt;/p&gt;</comment>
                            <comment id="15230257" author="githubbot" created="Thu, 7 Apr 2016 13:51:59 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1851#issuecomment-206915028&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1851#issuecomment-206915028&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ll address Stephan&apos;s comment and merge the change&lt;/p&gt;</comment>
                            <comment id="15230270" author="githubbot" created="Thu, 7 Apr 2016 14:01:05 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1851&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1851&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15230277" author="rmetzger" created="Thu, 7 Apr 2016 14:04:16 +0000"  >&lt;p&gt;Fixed for 1.1.0 in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/9f524223&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/9f524223&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m merging it to the &quot;release-1.0&quot; branch for 1.0.2 as well ...&lt;/p&gt;</comment>
                            <comment id="15231878" author="rmetzger" created="Fri, 8 Apr 2016 08:41:28 +0000"  >&lt;p&gt;Merged for 1.0.2: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/43093e3b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/43093e3b&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vm5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>