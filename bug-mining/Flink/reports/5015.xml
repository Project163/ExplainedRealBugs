<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:52:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-21024] Dynamic properties get exposed to job&apos;s main method if user parameters are passed</title>
                <link>https://issues.apache.org/jira/browse/FLINK-21024</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;A bug was identified in the &lt;a href=&quot;http://apache-flink-user-mailing-list-archive.2336050.n4.nabble.com/Flink-Application-cluster-standalone-job-some-JVM-Options-added-to-Program-Arguments-td40719.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;user ML&lt;/a&gt; by Alexey exposing&#160;dynamic properties into the job user code.&lt;/p&gt;

&lt;p&gt;I was able to reproduce this issue by slightly adapting the WordCount example (&lt;tt&gt;org.apache.flink.streaming.examples.wordcount.WordCount2&lt;/tt&gt; in attached  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13018992/13018992_WordCount.jar&quot; title=&quot;WordCount.jar attached to FLINK-21024&quot;&gt;WordCount.jar&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; ).&lt;/p&gt;

&lt;p&gt;Initiating a standalone job without using the &lt;tt&gt;--input&lt;/tt&gt; parameter will result in printing an empty array:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./bin/standalone-job.sh start --job-classname org.apache.flink.streaming.examples.wordcount.WordCount2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The corresponding &lt;tt&gt;*.out&lt;/tt&gt; file looks like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[]
Executing WordCount2 example with &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; input data set.
Use --input to specify file input.
Printing result to stdout. Use --output to specify output path.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In contrast, initiating the standalone job using the &lt;tt&gt;--input&lt;/tt&gt; parameter will expose the dynamic properties:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./bin/standalone-job.sh start --job-classname org.apache.flink.streaming.examples.wordcount.WordCount2 --input /opt/flink/config/flink-conf.yaml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Resulting in the following output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[--input, /opt/flink/config/flink-conf.yaml, -D, jobmanager.memory.off-heap.size=134217728b, -D, jobmanager.memory.jvm-overhead.min=201326592b, -D, jobmanager.memory.jvm-metaspace.size=268435456b, -D, jobmanager.memory.heap.size=1073741824b, -D, jobmanager.memory.jvm-overhead.max=201326592b]
Printing result to stdout. Use --output to specify output path.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Interestingly, this cannot be reproduced on a local standalone session cluster.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13353222">FLINK-21024</key>
            <summary>Dynamic properties get exposed to job&apos;s main method if user parameters are passed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xtsong">Xintong Song</assignee>
                                    <reporter username="mapohl">Matthias Pohl</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>starter</label>
                    </labels>
                <created>Tue, 19 Jan 2021 08:42:49 +0000</created>
                <updated>Fri, 28 May 2021 07:12:13 +0000</updated>
                            <resolved>Thu, 21 Jan 2021 10:53:04 +0000</resolved>
                                    <version>1.12.1</version>
                                    <fixVersion>1.12.2</fixVersion>
                    <fixVersion>1.13.0</fixVersion>
                                    <component>Runtime / Configuration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17267780" author="xintongsong" created="Tue, 19 Jan 2021 09:36:21 +0000"  >&lt;p&gt;I think the problem is that, `standalone-job.sh` failed to make sure all flink options come before the job arguments.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;ClusterEntrypoint&lt;/tt&gt; reads flink options from the beginning of the JVM process argument list. It stops at the first unrecognized option, and treat the rest as the job arguments.&lt;/p&gt;

&lt;p&gt;This is not reproduced on a standalone session cluster because job arguments are provided at submitting the job rather than at starting the cluster.&lt;/p&gt;

&lt;p&gt;I can try to provide a quick fix.&lt;/p&gt;</comment>
                            <comment id="17267817" author="mapohl" created="Tue, 19 Jan 2021 10:38:11 +0000"  >&lt;p&gt;Interesting finding. Thanks for looking into that, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt;. &lt;a href=&quot;https://github.com/apache/flink/blob/0a51d85255b9c7480eb5e939d88e9ccc5e98af69/flink-dist/src/main/flink-bin/mesos-bin/mesos-jobmanager.sh#L32&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;bin/mesos-jobmanager.sh&lt;/a&gt;&#160;needs to be adapted accordingly.&lt;/p&gt;</comment>
                            <comment id="17269220" author="xintongsong" created="Thu, 21 Jan 2021 10:53:04 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;master (1.13): 1678b607ec16d58c595b40758192ed1d555b37d8&lt;/li&gt;
	&lt;li&gt;release-1.12: b95cf42ccc78bc22394537370dfabd778cff2f03&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="13018992" name="WordCount.jar" size="15267" author="mapohl" created="Tue, 19 Jan 2021 08:44:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mr3k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>