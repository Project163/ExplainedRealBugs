<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:47:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-17753] watermark defined in ddl does not work in Table api</title>
                <link>https://issues.apache.org/jira/browse/FLINK-17753</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;the following code will get &lt;tt&gt;org.apache.flink.table.api.ValidationException: A group window expects a time attribute for grouping in a stream environment.&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
  def testRowTimeTableSourceGroupWindow(): Unit = {
    val ddl =
      s&quot;&quot;&quot;
         |CREATE TABLE rowTimeT (
         |  id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
         |  rowtime timestamp(3),
         |  val bigint,
         |  name varchar(32),
         |  watermark &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; rowtime as rowtime
         |) WITH (
         |  &lt;span class=&quot;code-quote&quot;&gt;&apos;connector&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;projectable-values&apos;&lt;/span&gt;,
         |  &lt;span class=&quot;code-quote&quot;&gt;&apos;bounded&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;&lt;/span&gt;
         |)
       &quot;&quot;&quot;.stripMargin
    util.tableEnv.executeSql(ddl)

    val t = util.tableEnv.from(&lt;span class=&quot;code-quote&quot;&gt;&quot;rowTimeT&quot;&lt;/span&gt;)
      .where($&lt;span class=&quot;code-quote&quot;&gt;&quot;val&quot;&lt;/span&gt; &amp;gt; 100)
      .window(Tumble over 10.minutes on &lt;span class=&quot;code-quote&quot;&gt;&apos;rowtime as &apos;&lt;/span&gt;w)
      .groupBy(&lt;span class=&quot;code-quote&quot;&gt;&apos;name, &apos;&lt;/span&gt;w)
      .select(&lt;span class=&quot;code-quote&quot;&gt;&apos;name, &apos;&lt;/span&gt;w.end, &apos;val.avg)
    util.verifyPlan(t)
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The reason is planner does not convert &lt;tt&gt;watermarkSpecs&lt;/tt&gt; in &lt;tt&gt;TableSchema&lt;/tt&gt; to correct type when calling &lt;tt&gt;tableEnv.from&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13305367">FLINK-17753</key>
            <summary>watermark defined in ddl does not work in Table api</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="godfreyhe">godfrey he</assignee>
                                    <reporter username="godfreyhe">godfrey he</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sat, 16 May 2020 09:27:09 +0000</created>
                <updated>Tue, 9 Jun 2020 16:10:32 +0000</updated>
                            <resolved>Tue, 9 Jun 2020 13:53:09 +0000</resolved>
                                                    <fixVersion>1.11.0</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17129294" author="dawidwys" created="Tue, 9 Jun 2020 13:53:09 +0000"  >&lt;p&gt;Fixed:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;master
	&lt;ul&gt;
		&lt;li&gt;8a8d8a95d0ead424d0ab61105b57fcabf6878e2e&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;1.11
	&lt;ul&gt;
		&lt;li&gt;655545472d87e7c7d19bbc910cee45870d2b3888&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0et8w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>