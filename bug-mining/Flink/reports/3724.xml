<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-15918] Uptime Metric not reset on Job Restart</title>
                <link>https://issues.apache.org/jira/browse/FLINK-15918</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;b&gt;Description&lt;/b&gt;&lt;br/&gt;
The &lt;tt&gt;uptime&lt;/tt&gt; metric is not reset when the job restarts, which is a change in behavior compared to Flink 1.8.&lt;br/&gt;
This change of behavior exists since 1.9.0 if &lt;tt&gt;jobmanager.execution.failover-strategy: region&lt;/tt&gt; is configured,&lt;br/&gt;
which we do in the default flink-conf.yaml.&lt;/p&gt;


&lt;p&gt;&lt;b&gt;Workarounds&lt;/b&gt;&lt;br/&gt;
Users that find this behavior problematic can set &lt;tt&gt;jobmanager.scheduler: legacy&lt;/tt&gt; and unset &lt;tt&gt;jobmanager.execution.failover-strategy: region&lt;/tt&gt; in their &lt;tt&gt;flink-conf.yaml&lt;/tt&gt;&lt;/p&gt;


&lt;p&gt;&lt;b&gt;How to reproduce&lt;/b&gt;&lt;br/&gt;
trivial&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Expected behavior&lt;/b&gt;&lt;br/&gt;
&lt;tt&gt;uptime&lt;/tt&gt; should be reset on any vertex restart.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13283445">FLINK-15918</key>
            <summary>Uptime Metric not reset on Job Restart</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gjy">Gary Yao</assignee>
                                    <reporter username="gjy">Gary Yao</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 5 Feb 2020 11:14:17 +0000</created>
                <updated>Mon, 10 Feb 2020 15:17:02 +0000</updated>
                            <resolved>Mon, 10 Feb 2020 15:17:02 +0000</resolved>
                                    <version>1.9.2</version>
                    <version>1.10.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17030776" author="till.rohrmann" created="Wed, 5 Feb 2020 16:20:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevenz3wu&quot; class=&quot;user-hover&quot; rel=&quot;stevenz3wu&quot;&gt;stevenz3wu&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thw&quot; class=&quot;user-hover&quot; rel=&quot;thw&quot;&gt;thw&lt;/a&gt; do you use the &lt;tt&gt;uptime&lt;/tt&gt; metric to monitor Flink jobs? If yes, then it would be helpful to understand how exactly you use it.&lt;/p&gt;</comment>
                            <comment id="17030857" author="thw" created="Wed, 5 Feb 2020 17:37:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&#160;our users rely on the metric to monitor their jobs. Continuously increasing uptime is interpreted as necessary for a healthy job. This assumption is broken with the recent change.&lt;/p&gt;

&lt;p&gt;&amp;gt;&#160;This change of behavior exists since 1.9.0 if&#160;&lt;tt&gt;jobmanager.execution.failover-strategy: region&lt;/tt&gt;&#160;is configured, which we do in the default flink-conf.yaml. &#160;&lt;/p&gt;

&lt;p&gt;And the change in behavior is not present in 1.9 when the above setting is not present in flink-conf.yaml. It is, therefore, a regression for 1.10.&lt;/p&gt;</comment>
                            <comment id="17030901" author="stevenz3wu" created="Wed, 5 Feb 2020 18:25:24 +0000"  >&lt;p&gt;quote an answer from our user, which is similar to what Thomas said.&lt;/p&gt;

&lt;blockquote&gt;

&lt;p&gt;to detect a job that is not running. the reason to use uptime is to catch the case where the job is continually restarting, so it is mostly &#8220;up&#8221;, but never for a long time&lt;/p&gt;
&lt;/blockquote&gt;</comment>
                            <comment id="17030960" author="shriya_a" created="Wed, 5 Feb 2020 19:36:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&#160;We have, in the past, experienced failure scenarios where a job crashed silently and abruptly, what I mean by that is that it did not exhibit other unhealthy symptoms like failing checkpoints, frequent restarts etc, and in that case uptime is an important metric to rely to know if the job is actually running.&#160;&lt;/p&gt;</comment>
                            <comment id="17031002" author="glaksh100" created="Wed, 5 Feb 2020 20:26:22 +0000"  >&lt;p&gt;Just adding to what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thw&quot; class=&quot;user-hover&quot; rel=&quot;thw&quot;&gt;thw&lt;/a&gt;&#160; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shriya_a&quot; class=&quot;user-hover&quot; rel=&quot;shriya_a&quot;&gt;shriya_a&lt;/a&gt; mentioned, our users today get alerted on the uptime metric being zero. If the metric is not reset (which would mean we don&apos;t have time periods of it being zero when the job is not running), then it may mean that our users don&apos;t get alerts for when their job is down.&#160;&lt;/p&gt;</comment>
                            <comment id="17032672" author="gjy" created="Fri, 7 Feb 2020 21:32:37 +0000"  >&lt;p&gt;1.10: 1268a7b9a3a3d07f76ea1fe78a0b1a6a7d0ef7eb&lt;br/&gt;
master: b902ed507e2586c322f33e5612ace4222b3d9d26&lt;/p&gt;</comment>
                            <comment id="17033427" author="carp84" created="Mon, 10 Feb 2020 08:13:20 +0000"  >&lt;p&gt;Are we leaving this JIRA open to cherry-pick the changes to master branch? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt; Thanks.&lt;/p&gt;</comment>
                            <comment id="17033428" author="gjy" created="Mon, 10 Feb 2020 08:16:55 +0000"  >&lt;p&gt;Yes, ticket is left open because I need to cherry-pick the changes to master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0b6eg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>