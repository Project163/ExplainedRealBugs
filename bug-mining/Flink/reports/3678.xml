<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-13758] Failed to submit JobGraph when registered hdfs file in DistributedCache </title>
                <link>https://issues.apache.org/jira/browse/FLINK-13758</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;when using HDFS files for DistributedCache, it would failed to submit jobGraph, we can see exceptions stack traces in log file after a while, but if DistributedCache file is a local file, every thing goes fine.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13251380">FLINK-13758</key>
            <summary>Failed to submit JobGraph when registered hdfs file in DistributedCache </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wangyang0918">Yang Wang</assignee>
                                    <reporter username="luoguohao">luoguohao</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sat, 17 Aug 2019 08:55:12 +0000</created>
                <updated>Tue, 22 Jun 2021 13:55:13 +0000</updated>
                            <resolved>Wed, 22 Jan 2020 10:34:55 +0000</resolved>
                                    <version>1.6.3</version>
                    <version>1.6.4</version>
                    <version>1.7.2</version>
                    <version>1.8.0</version>
                    <version>1.8.1</version>
                    <version>1.9.0</version>
                    <version>1.9.1</version>
                    <version>1.10.0</version>
                                    <fixVersion>1.9.2</fixVersion>
                    <fixVersion>1.10.0</fixVersion>
                                    <component>Command Line Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="16909628" author="luoguohao" created="Sat, 17 Aug 2019 09:09:09 +0000"  >&lt;p&gt;after reading the code, i found that every files registered in the distributedCache will uploaded to the jobManager, but in fact, only local file should be uploaded to add the file into the blobServer, other file types such as hdfs, is not needed, which only stores the file path in jobManager. When Task inits in TaskManager,&#160; the hdfs file in distributedCache would be retrieved directly from HDFS,but not the blobServer.&lt;/p&gt;</comment>
                            <comment id="16910139" author="fly_in_gis" created="Mon, 19 Aug 2019 02:29:55 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=luoguohao&quot; class=&quot;user-hover&quot; rel=&quot;luoguohao&quot;&gt;luoguohao&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Do you mean to register a cached file located on the hdfs? Just like the code below.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
env.registerCachedFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//myhdfs/path/of/file&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;test_data&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think it could works.&lt;/p&gt;</comment>
                            <comment id="16910185" author="luoguohao" created="Mon, 19 Aug 2019 06:01:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt; yes. this works in local mode, because the different code path. but if you deploy the application on the cluster, it would failed after a while (default would be 100 minutes).&#160;&lt;/p&gt;</comment>
                            <comment id="16917616" author="zentol" created="Wed, 28 Aug 2019 09:55:30 +0000"  >&lt;p&gt;It isn&apos;t necessarily true that files from hdfs (or generally, from any DFS) should not be uploated to the distributed cache. A basic example is a client-accessible DFS, which isn&apos;t accessible from the cluster.&lt;/p&gt;</comment>
                            <comment id="16917639" author="luoguohao" created="Wed, 28 Aug 2019 10:21:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; Thanks for reply, in the current implementation, HDFS files will not stored in the BlobServer, and HDFS files is retrieved directly from HDFS when the Task initialized in TaskManager, so if we want to store all the files into BlobServer,&#160;the scope of code adjustment is wider. And in my opinion, as long as the user choose the HDFS file as a DistributeCache file, the user should make sure that the file is accessible from the cluster, but not the cluster itself.&lt;/p&gt;</comment>
                            <comment id="16924291" author="zentol" created="Fri, 6 Sep 2019 14:36:37 +0000"  >&lt;p&gt;ahhhh I may have remembered wrong; it is true that files from a DFS are never downloaded on the client. They are also never added to the blobstore, but only cached locally on the TaskExecutor when a task requests it.&lt;/p&gt;

&lt;p&gt;Please expand on how exactly your job is failing; at this time I&apos;m a bit unsure on what this issue is about.&lt;/p&gt;</comment>
                            <comment id="16924706" author="luoguohao" created="Sat, 7 Sep 2019 02:56:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt;&#160;ok, the key problem is that when i try to register a hdfs file into DistributedCache:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
env.registerCachedFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//myhdfs/path/of/file&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;test_data&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it will fail to execute job on cluster mode, but local mode is ok. by the way, the hdfs path is accessible from the cluster.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16970051" author="zentol" created="Fri, 8 Nov 2019 10:37:59 +0000"  >&lt;p&gt;Can you provide us with the actual error you are getting, and/or log files of the task executor / job master?&lt;/p&gt;</comment>
                            <comment id="16981342" author="arvid" created="Mon, 25 Nov 2019 07:37:24 +0000"  >&lt;p&gt;If &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-14908&quot; title=&quot;Distributing CacheFiles through DFS does not work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-14908&quot;&gt;&lt;del&gt;FLINK-14908&lt;/del&gt;&lt;/a&gt; is indeed a duplicate, then this is also affecting Flink 1.9 and most likely 1.10 .&lt;/p&gt;</comment>
                            <comment id="16981367" author="dawidwys" created="Mon, 25 Nov 2019 08:08:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arvid+heise&quot; class=&quot;user-hover&quot; rel=&quot;arvid heise&quot;&gt;arvid heise&lt;/a&gt;Yes, I am pretty sure it affects all versions that use RestClusterClient for job submission&lt;/p&gt;</comment>
                            <comment id="16981411" author="fly_in_gis" created="Mon, 25 Nov 2019 09:33:14 +0000"  >&lt;p&gt;I go over the current code base and find that it is&#160;actually a bug. Because `StreamExecutionEnvironment#registerCachedFile` allows a remote distributed path(for example, hdfs://host:port/and/path). However, the remote path could not properly be processed by `RestClusterClient#submitJob`. It does not&#160;differentiate the local and remote path.&lt;/p&gt;

&lt;p&gt;I think we need to check whether the&#160;artifacts is a remote path and skip to upload in `RestClusterClient#submitJob`.&#160;&lt;/p&gt;

&lt;p&gt;This bug has been introduced since RestClusterClient is used to submit job.&lt;/p&gt;</comment>
                            <comment id="17015615" author="fly_in_gis" created="Wed, 15 Jan 2020 04:12:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=luoguohao&quot; class=&quot;user-hover&quot; rel=&quot;luoguohao&quot;&gt;luoguohao&lt;/a&gt;&#160;Are you still working on this? I am pretty sure it is a bug and it will be better if we could fix this in release 1.10.&lt;/p&gt;

&lt;p&gt;Currently, the public API &lt;tt&gt;StreamExecutionEnvironment#registerCachedFile&lt;/tt&gt; has been broken.&#160; We could not register remote cached files for all session deployments(standalone, Yarn, Kubernetes, Mesos). Since they are using &lt;tt&gt;RestClusterClient&lt;/tt&gt; to submit job.&lt;/p&gt;</comment>
                            <comment id="17016718" author="fly_in_gis" created="Thu, 16 Jan 2020 09:01:08 +0000"  >&lt;p&gt;After offline discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;, we hope this ticket could be fix in 1.10.&lt;/p&gt;

&lt;p&gt;Even this bug has already existed there for so long time, we should definitely fix it since &lt;tt&gt;StreamExecutionEnvironment#registerCachedFile&lt;/tt&gt; is a&#160;public&#160;Api for users.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=luoguohao&quot; class=&quot;user-hover&quot; rel=&quot;luoguohao&quot;&gt;luoguohao&lt;/a&gt;&#160;Thanks a lot for creating this ticket. If you do not have time to work on this, i will take over.&lt;/p&gt;</comment>
                            <comment id="17018534" author="luoguohao" created="Sat, 18 Jan 2020 08:33:00 +0000"  >&lt;p&gt;Yes,it really took long time to fix this issue,I already made a pull request for this issue,but it have not so much progress on it .after all, thanks,@Yang Wang&lt;/p&gt;



&lt;p&gt;&amp;#8211;&lt;br/&gt;
&#21457;&#33258;&#25105;&#30340;&#32593;&#26131;&#37038;&#31665;&#25163;&#26426;&#26234;&#33021;&#29256;&lt;/p&gt;



&lt;p&gt;&#22312; 2020-01-16 16:50:00&#65292;&quot;Yang Wang (Jira)&quot; &amp;lt;jira@apache.org&amp;gt; &#20889;&#36947;&#65306;&lt;/p&gt;


&lt;p&gt;Currently, the public API &lt;tt&gt;StreamExecutionEnvironment#registerCachedFile&lt;/tt&gt; has been broken.  We could not register remote cached files for all session deployments(standalone, Yarn, Kubernetes, Mesos). Since they are using &lt;tt&gt;RestClusterClient&lt;/tt&gt; to submit job.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liyu&quot; class=&quot;user-hover&quot; rel=&quot;liyu&quot;&gt;liyu&lt;/a&gt; Do you think this ticket should be a blocker for 1.10? |&lt;/p&gt;</comment>
                            <comment id="17018783" author="fly_in_gis" created="Sun, 19 Jan 2020 03:35:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=luoguohao&quot; class=&quot;user-hover&quot; rel=&quot;luoguohao&quot;&gt;luoguohao&lt;/a&gt; Thanks for your reply. Yes, you are right. There&apos;s no much progress on the current PR and it is outdated. I will take over this ticket. Feel free to let me know if you still want to work on this.&lt;/p&gt;</comment>
                            <comment id="17018798" author="luoguohao" created="Sun, 19 Jan 2020 04:59:03 +0000"  >&lt;p&gt;i&apos;m ok to transfer this ticket to you if you have much more time to handle it.&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17020082" author="gjy" created="Tue, 21 Jan 2020 09:40:39 +0000"  >&lt;p&gt;It would be nice to get the bug fix in. However, considering that the bug has existed since at least 1.6.3, I would not block the 1.10 release on it.&lt;/p&gt;</comment>
                            <comment id="17020093" author="fly_in_gis" created="Tue, 21 Jan 2020 09:51:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gjy&quot; class=&quot;user-hover&quot; rel=&quot;gjy&quot;&gt;gjy&lt;/a&gt;&#160;Yeah, it will not block the 1.10 release. And i will fix it asap.&lt;/p&gt;</comment>
                            <comment id="17020322" author="kkl0u" created="Tue, 21 Jan 2020 15:55:19 +0000"  >&lt;p&gt;Merged on master with 8bb83c7fed2142aba5e7f3188a69c32ee04f2761&lt;br/&gt;
1.10 with 2f91a24325b52fa224ef7ed1c560e44cdf4e84a3&lt;br/&gt;
1.9 with 0ea00eabaa0eca30dc457eff85f7f1a0c0c7d09c&lt;/p&gt;</comment>
                            <comment id="17020683" author="fly_in_gis" created="Wed, 22 Jan 2020 00:29:45 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkl0u&quot; class=&quot;user-hover&quot; rel=&quot;kkl0u&quot;&gt;kkl0u&lt;/a&gt;, the building of branch release-1.9 is broken.&#160;The commit&#160;&lt;a href=&quot;https://github.com/apache/flink/commit/0ea00eabaa0eca30dc457eff85f7f1a0c0c7d09c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;0ea00ea&lt;/a&gt;&#160;causes the compile error. Because the code base of release-1.9 is different with master. So it can not be picked directly.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://api.travis-ci.org/v3/job/640208939/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/640208939/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17020948" author="fly_in_gis" created="Wed, 22 Jan 2020 10:34:40 +0000"  >&lt;p&gt;The release-1.9 compile error has been fixed via&#160;&lt;a href=&quot;https://github.com/apache/flink/commit/6061372e8c8b54b759ed3cccc4015cc4edb21757&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;6061372&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/wangyang0918/flink/builds/640336837&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/wangyang0918/flink/builds/640336837&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13269891">FLINK-14908</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05rg0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>