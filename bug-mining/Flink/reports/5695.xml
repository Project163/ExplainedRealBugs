<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:59:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-23785] SinkITCase.testMetrics fails with ConcurrentModification on Azure</title>
                <link>https://issues.apache.org/jira/browse/FLINK-23785</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The &lt;tt&gt;SinkITCase.testMetrics&lt;/tt&gt; fails with a ConcurrentModification&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Aug 15 14:26:40 java.util.ConcurrentModificationException
Aug 15 14:26:40 	at java.util.HashMap$HashIterator.nextNode(HashMap.java:1445)
Aug 15 14:26:40 	at java.util.HashMap$KeyIterator.next(HashMap.java:1469)
Aug 15 14:26:40 	at java.util.AbstractSet.removeAll(AbstractSet.java:174)
Aug 15 14:26:40 	at org.apache.flink.runtime.testutils.InMemoryReporter.applyRemovals(InMemoryReporter.java:78)
Aug 15 14:26:40 	at org.apache.flink.runtime.testutils.InMemoryReporterRule.afterTestSuccess(InMemoryReporterRule.java:61)
Aug 15 14:26:40 	at org.apache.flink.util.ExternalResource$1.evaluate(ExternalResource.java:57)
Aug 15 14:26:40 	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
Aug 15 14:26:40 	at org.apache.flink.util.TestNameProvider$1.evaluate(TestNameProvider.java:45)
Aug 15 14:26:40 	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:61)
Aug 15 14:26:40 	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
Aug 15 14:26:40 	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
Aug 15 14:26:40 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
Aug 15 14:26:40 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
Aug 15 14:26:40 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
Aug 15 14:26:40 	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
Aug 15 14:26:40 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
Aug 15 14:26:40 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
Aug 15 14:26:40 	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
Aug 15 14:26:40 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=22215&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=22215&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5225&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13395339">FLINK-23785</key>
            <summary>SinkITCase.testMetrics fails with ConcurrentModification on Azure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="arvid">Arvid Heise</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Sun, 15 Aug 2021 14:57:07 +0000</created>
                <updated>Mon, 16 Aug 2021 12:37:51 +0000</updated>
                            <resolved>Mon, 16 Aug 2021 12:37:51 +0000</resolved>
                                    <version>1.14.0</version>
                                    <fixVersion>1.14.0</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17399360" author="till.rohrmann" created="Sun, 15 Aug 2021 14:57:43 +0000"  >&lt;p&gt;Probably introduced recently with &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-23652&quot; title=&quot;Implement FLIP-179: Expose Standardized Operator Metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-23652&quot;&gt;&lt;del&gt;FLINK-23652&lt;/del&gt;&lt;/a&gt;. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arvid&quot; class=&quot;user-hover&quot; rel=&quot;arvid&quot;&gt;arvid&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17399385" author="arvid" created="Sun, 15 Aug 2021 18:31:50 +0000"  >&lt;p&gt;Synchronizing access to the reporter unfortunately only solves the symptom and not the root cause. The main issue is that apparently some metrics are only unregistered after the test case has already finished.&lt;br/&gt;
That means that metrics from test case A can spill into test case B using the same mini cluster.&lt;/p&gt;

&lt;p&gt;That means that &lt;tt&gt;env.execute&lt;/tt&gt; returned while metric system has not converged to a stable state. It&apos;s similar to &lt;tt&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-23647&quot; title=&quot;UnalignedCheckpointStressITCase crashed on azure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-23647&quot;&gt;&lt;del&gt;FLINK-23647&lt;/del&gt;&lt;/a&gt;&lt;/tt&gt;. So maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roman_khachatryan&quot; class=&quot;user-hover&quot; rel=&quot;roman_khachatryan&quot;&gt;roman_khachatryan&lt;/a&gt; is right that we should find a general solution and not workaround it in each and every test case.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to come up with a workaround for now.&lt;/p&gt;</comment>
                            <comment id="17399541" author="xintongsong" created="Mon, 16 Aug 2021 06:28:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=22233&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5270&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=22233&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=86f654fa-ab48-5c1a-25f4-7e7f6afb9bba&amp;amp;l=5270&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17399729" author="arvid" created="Mon, 16 Aug 2021 12:37:51 +0000"  >&lt;p&gt;Merged into master as 236bd652c9f2080c490935e3e0f2381fb7850b4a..cab4a9875b9ab5cd4c7da3a7e83ec77cb2a4838f.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13395381">FLINK-23793</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13393764">FLINK-23652</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0tx8o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>