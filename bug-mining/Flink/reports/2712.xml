<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:35:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10704] Fix sql client end to end test failure</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10704</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The log file contains the following sentence:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2018-10-29 03:27:39,209 WARN org.apache.flink.kafka010.shaded.org.apache.kafka.common.utils.AppInfoParser - Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; loading kafka-version.properties :&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The reason for this log is that we explicitly exclude the version description file of the kafka client when packaging the connector:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;filters&amp;gt;
   &amp;lt;filter&amp;gt;
      &amp;lt;artifact&amp;gt;*:*&amp;lt;/artifact&amp;gt;
      &amp;lt;excludes&amp;gt;
         &amp;lt;exclude&amp;gt;kafka/kafka-version.properties&amp;lt;/exclude&amp;gt;
      &amp;lt;/excludes&amp;gt;
   &amp;lt;/filter&amp;gt;
&amp;lt;/filters&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When the shell&#160;scan the &quot;error&quot; keyword with grep, it will hit, so the test will fail.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
function check_logs_for_errors {
  error_count=$(grep -rv &lt;span class=&quot;code-quote&quot;&gt;&quot;GroupCoordinatorNotAvailableException&quot;&lt;/span&gt; $FLINK_DIR/log \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;RetriableCommitFailedException&quot;&lt;/span&gt; \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;NoAvailableBrokersException&quot;&lt;/span&gt; \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;Async Kafka commit failed&quot;&lt;/span&gt; \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;DisconnectException&quot;&lt;/span&gt; \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;AskTimeoutException&quot;&lt;/span&gt; \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;WARN  akka.remote.transport.netty.NettyTransport&quot;&lt;/span&gt; \
      | grep -v  &lt;span class=&quot;code-quote&quot;&gt;&quot;WARN  org.apache.flink.shaded.akka.org.jboss.netty.channel.DefaultChannelPipeline&quot;&lt;/span&gt; \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;jvm-exit-on-fatal-error&quot;&lt;/span&gt; \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&apos;^INFO:.*AWSErrorCode=\[400 Bad Request\].*ServiceEndpoint=\[https:&lt;span class=&quot;code-comment&quot;&gt;//.*\.s3\.amazonaws\.com\].*RequestType=\[HeadBucketRequest\]&apos;&lt;/span&gt; \
&lt;/span&gt;      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;RejectedExecutionException&quot;&lt;/span&gt; \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;An exception was thrown by an exception handler&quot;&lt;/span&gt; \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException&quot;&lt;/span&gt; \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration&quot;&lt;/span&gt; \
      | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.flink.fs.shaded.hadoop3.org.apache.commons.beanutils.FluentPropertyBeanIntrospector  - Error when creating PropertyDescriptor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; void org.apache.flink.fs.shaded.hadoop3.org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)! Ignoring &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; property.&quot;&lt;/span&gt; \
      | grep -ic &lt;span class=&quot;code-quote&quot;&gt;&quot;error&quot;&lt;/span&gt;)    &lt;span class=&quot;code-comment&quot;&gt;//here
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [[ ${error_count} -gt 0 ]]; then
    echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Found error in log files:&quot;&lt;/span&gt;
    cat $FLINK_DIR/log/*
    EXIT_CODE=1
  fi
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13194749">FLINK-10704</key>
            <summary>Fix sql client end to end test failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yanghua">vinoyang</assignee>
                                    <reporter username="yanghua">vinoyang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 29 Oct 2018 06:08:00 +0000</created>
                <updated>Wed, 7 Nov 2018 10:57:31 +0000</updated>
                            <resolved>Wed, 7 Nov 2018 10:57:31 +0000</resolved>
                                                    <fixVersion>1.7.0</fixVersion>
                                    <component>Connectors / Kafka</component>
                    <component>Test Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16666779" author="yanghua" created="Mon, 29 Oct 2018 06:12:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;&#160; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Why do we explicitly exclude the version description file of the kafka client when packaging the connector?&lt;/p&gt;</comment>
                            <comment id="16667332" author="pnowojski" created="Mon, 29 Oct 2018 15:10:05 +0000"  >&lt;p&gt;I asked &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; about that (he added it), and there is no particular reason, except of that it would probably collide in our connectors that pull in multiple Kafka versions ( which is an issue on it&apos;s own ).&lt;/p&gt;

&lt;p&gt;Maybe we can relocate the resource file and rename access patterns to it somehow? I don&apos;t know if that&apos;s possible. Quick google search didn&apos;t bring me answers. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; do you have any ideas?&lt;/p&gt;</comment>
                            <comment id="16667345" author="twalthr" created="Mon, 29 Oct 2018 15:23:22 +0000"  >&lt;p&gt;I thought maybe Maven resource transformers could do it but apparently no. If there is no way of relocating it, I guess we need to add it to the SQL jar which requires an exclusion in the jar checking logic that we added to the SQL Client end-to-end test.&lt;/p&gt;

&lt;p&gt;Why are we actually checking for every &quot;error&quot; (case insensitive) string? Actually, this is only a warning. Shouldn&apos;t we check for &quot;ERROR&quot; instead?&lt;/p&gt;</comment>
                            <comment id="16668025" author="yanghua" created="Tue, 30 Oct 2018 02:33:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt;&#160;Yes, I am just curious about why we ruled it out. In fact, Timo&apos;s idea is right. It is not good to check &quot;error&quot; in the shell (and ignore case). I will modify it slightly to have it check for &quot;ERROR&quot; (log level) and not ignore case. Later, we found that some specific log keywords indicate that it caused a test error, and we added to this list.&lt;/p&gt;</comment>
                            <comment id="16668310" author="githubbot" created="Tue, 30 Oct 2018 08:03:58 +0000"  >&lt;p&gt;yanghua opened a new pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   &lt;b&gt;This pull request fixes sql client end to end test failure&lt;/b&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Fix sql client end to end test failure&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This change is a trivial rework / code cleanup without any test coverage.&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable / docs / JavaDocs / *&lt;b&gt;not documented&lt;/b&gt;*)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16668758" author="pnowojski" created="Tue, 30 Oct 2018 14:09:48 +0000"  >&lt;p&gt;I&apos;m not sure if we should catch only case sensitive `ERROR`. Maybe it was intentional to catch stack traces etc? Maybe it would be better to filter out `WARN` lines?&lt;/p&gt;</comment>
                            <comment id="16668909" author="yanghua" created="Tue, 30 Oct 2018 15:48:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt; The keyword `ERROR` means an error log message which matches the original implementation. I do not agree to filter out `WARN` lines because of warning logs cannot be used as a measure of failure.&#160;&lt;/p&gt;

&lt;p&gt;The bug here is the erroneous report caused by filtering the keywords of error. In addition, the existence of an&#160;exception stack trace does not mean that our test should fail.&lt;/p&gt;

&lt;p&gt;I recommend keeping the changes to a minimum, and our goal is to fix the error detection logic so that the test passes. In the future, if we find that there are other exceptions that cause test failure, we can add it to the grep filter list.&lt;/p&gt;</comment>
                            <comment id="16669683" author="yanghua" created="Wed, 31 Oct 2018 06:55:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; another test error is :&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FAIL SQL Client Elasticsearch Upsert: Output hash mismatch. Got 6187222e109ee9222e6b2f117742070c, expected 982cb32908def9801e781381c1b8a8db.
head hexdump of actual:
0000000 { \n &lt;span class=&quot;code-quote&quot;&gt;&quot; h i t s &quot;&lt;/span&gt; : { \n 
0000010 &lt;span class=&quot;code-quote&quot;&gt;&quot; t o t a l &quot;&lt;/span&gt; : 3 , \n
0000020 &lt;span class=&quot;code-quote&quot;&gt;&quot; m a x _ s c o r e &quot;&lt;/span&gt; 
0000030 : 1 . 0 , \n &quot; h i t s
0000040 &quot; : [ \n { \n 
0000050 &lt;span class=&quot;code-quote&quot;&gt;&quot; _ i n d e x &quot;&lt;/span&gt; :
0000060 &lt;span class=&quot;code-quote&quot;&gt;&quot; m y _ u s e r s &quot;&lt;/span&gt; , \n 
0000070 &lt;span class=&quot;code-quote&quot;&gt;&quot; _ t y p e &quot;&lt;/span&gt; : &quot;
0000080 u s e r &lt;span class=&quot;code-quote&quot;&gt;&quot; , \n &quot;&lt;/span&gt;
0000090 _ i d &lt;span class=&quot;code-quote&quot;&gt;&quot; : &quot;&lt;/span&gt; 1 _ B o b &quot;
00000a0 , \n &quot; _ s c o r
00000b0 e &quot; : 1 . 0 , \n 
00000ba
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The original hash code is a hard-coded value: 982cb32908def9801e781381c1b8a8db. Can I know what the original string is? Otherwise, I don&apos;t know why the hash code will be different.&lt;/p&gt;

&lt;p&gt;Fixing the current sql client end to end test is the basis for testing the modern kafka connector, so I hope to push it faster. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16669791" author="pnowojski" created="Wed, 31 Oct 2018 09:06:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yanghua&quot; class=&quot;user-hover&quot; rel=&quot;yanghua&quot;&gt;yanghua&lt;/a&gt; I don&apos;t understand this:&lt;/p&gt;

&lt;p&gt;&amp;gt; I do not agree to filter out `WARN` lines because of warning logs cannot be used as a measure of failure&lt;/p&gt;

&lt;p&gt;what do you mean? If as you say, &quot;warning logs cannot be used as a measure of failure&quot;, then why not filter them out as I proposed?&lt;/p&gt;

&lt;p&gt;Btw, this global `check_logs_for_errors ` is broken design. We might want to have some limited global list of exclusions, but adding more entries to ever growing list is unmaintainable. I think we should filter out this one specific warning in kafka tests and do not mess with changing global rules for all of the tests.&lt;/p&gt;</comment>
                            <comment id="16669794" author="githubbot" created="Wed, 31 Oct 2018 09:08:13 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r229610938&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r229610938&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -316,7 +316,7 @@ function check_logs_for_errors {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;org.apache.flink.fs.shaded.hadoop3.org.apache.commons.beanutils.FluentPropertyBeanIntrospector  - Error when creating PropertyDescriptor for public final void org.apache.flink.fs.shaded.hadoop3.org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.String,java.lang.Object)! Ignoring this property.&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot;)&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -c &quot;ERROR&quot;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   As I have written in the ticket:&lt;/p&gt;

&lt;p&gt;   &amp;gt; This global `check_logs_for_errors ` is broken design. We might want to have some limited global list of exclusions, but adding more entries to ever growing list is unmaintainable. I think we should filter out this one specific warning in kafka tests and do not mess with changing global rules for all of the tests.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669810" author="githubbot" created="Wed, 31 Oct 2018 09:21:50 +0000"  >&lt;p&gt;yanghua commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r229615215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r229615215&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -316,7 +316,7 @@ function check_logs_for_errors {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;org.apache.flink.fs.shaded.hadoop3.org.apache.commons.beanutils.FluentPropertyBeanIntrospector  - Error when creating PropertyDescriptor for public final void org.apache.flink.fs.shaded.hadoop3.org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.String,java.lang.Object)! Ignoring this property.&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot;)&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -c &quot;ERROR&quot;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Agree. I thought that you want to filter the warning log globally. Sorry, I misunderstood what you mean.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669851" author="githubbot" created="Wed, 31 Oct 2018 09:58:27 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r229627265&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r229627265&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -316,7 +316,7 @@ function check_logs_for_errors {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;org.apache.flink.fs.shaded.hadoop3.org.apache.commons.beanutils.FluentPropertyBeanIntrospector  - Error when creating PropertyDescriptor for public final void org.apache.flink.fs.shaded.hadoop3.org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.String,java.lang.Object)! Ignoring this property.&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot;)&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -c &quot;ERROR&quot;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Initially I though about ignoring all warnings, since it seemed to me as a better solution compared to changing the behaviour of case sensitiveness globally. But Then I realised that there are already way too many exclusions hardcoded in this file.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669993" author="githubbot" created="Wed, 31 Oct 2018 11:46:54 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r229661015&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r229661015&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -316,7 +316,7 @@ function check_logs_for_errors {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;org.apache.flink.fs.shaded.hadoop3.org.apache.commons.beanutils.FluentPropertyBeanIntrospector  - Error when creating PropertyDescriptor for public final void org.apache.flink.fs.shaded.hadoop3.org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.String,java.lang.Object)! Ignoring this property.&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot;)&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -c &quot;ERROR&quot;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   @dawidwys I think you are also working on improving the e2e tests here. What is your opinion?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16670036" author="githubbot" created="Wed, 31 Oct 2018 12:38:11 +0000"  >&lt;p&gt;dawidwys commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r229675258&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r229675258&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -316,7 +316,7 @@ function check_logs_for_errors {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;org.apache.flink.fs.shaded.hadoop3.org.apache.commons.beanutils.FluentPropertyBeanIntrospector  - Error when creating PropertyDescriptor for public final void org.apache.flink.fs.shaded.hadoop3.org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.String,java.lang.Object)! Ignoring this property.&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot;)&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -c &quot;ERROR&quot;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   First of all I agree this is a bit of a broken design, but the current version is that we do not want to introduce a major rework in the bash scripts. The idea right now is that if test requires some custom validation it should disable the default checking and do it in the test itself, so that this decision is a conscious one.&lt;/p&gt;

&lt;p&gt;   Having that in mind:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I would definitely leave the case sensitivity as it is&lt;/li&gt;
	&lt;li&gt;If you don&apos;t want to extend the global list, in other words if you don&apos;t want to rely on the default behavior I would disable the log checking via #6959 and add a custom check in the test itself that verifies logs with your extended whitelist (preferably in a trap invoked on exit).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16670343" author="yanghua" created="Wed, 31 Oct 2018 16:27:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; About &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704?focusedCommentId=16669683&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-16669683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;another error&lt;/a&gt;, can you give an answer or suggestion?&lt;/p&gt;</comment>
                            <comment id="16670348" author="githubbot" created="Wed, 31 Oct 2018 16:30:20 +0000"  >&lt;p&gt;yanghua commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r229771519&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r229771519&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -316,7 +316,7 @@ function check_logs_for_errors {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;org.apache.flink.fs.shaded.hadoop3.org.apache.commons.beanutils.FluentPropertyBeanIntrospector  - Error when creating PropertyDescriptor for public final void org.apache.flink.fs.shaded.hadoop3.org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.String,java.lang.Object)! Ignoring this property.&quot; \
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot;)&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -c &quot;ERROR&quot;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Thanks for your discussion, will try to change the implementation tomorrow.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16670350" author="twalthr" created="Wed, 31 Oct 2018 16:31:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yanghua&quot; class=&quot;user-hover&quot; rel=&quot;yanghua&quot;&gt;yanghua&lt;/a&gt; you can simply print the original string before hashing to see what changed in the output?&lt;/p&gt;</comment>
                            <comment id="16671329" author="yanghua" created="Thu, 1 Nov 2018 09:21:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; A strange exception :&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.flink.table.client.SqlClientException: The configured environment is invalid. Please check your environment files again.
 at org.apache.flink.table.client.SqlClient.validateEnvironment(SqlClient.java:140)
 at org.apache.flink.table.client.SqlClient.start(SqlClient.java:99)
 at org.apache.flink.table.client.SqlClient.main(SqlClient.java:187)
Caused by: org.apache.flink.table.client.gateway.SqlExecutionException: Could not create execution context.
 at org.apache.flink.table.client.gateway.local.LocalExecutor.getOrCreateExecutionContext(LocalExecutor.java:485)
 at org.apache.flink.table.client.gateway.local.LocalExecutor.validateSession(LocalExecutor.java:313)
 at org.apache.flink.table.client.SqlClient.validateEnvironment(SqlClient.java:137)
 ... 2 more
Caused by: java.lang.NoClassDefFoundError: org/apache/flink/table/factories/TableFormatFactoryBase
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.defineClass1(Native Method)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.defineClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:763)
 at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
 at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)
 at java.net.URLClassLoader.access$100(URLClassLoader.java:73)
 at java.net.URLClassLoader$1.run(URLClassLoader.java:368)
 at java.net.URLClassLoader$1.run(URLClassLoader.java:362)
 at java.security.AccessController.doPrivileged(Native Method)
 at java.net.URLClassLoader.findClass(URLClassLoader.java:361)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:424)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:357)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName0(Native Method)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:348)
 at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:370)
 at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404)
 at java.util.ServiceLoader$1.next(ServiceLoader.java:480)
 at scala.collection.convert.Wrappers$JIteratorWrapper.next(Wrappers.scala:43)
 at scala.collection.Iterator$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;toStream(Iterator.scala:1320)
 at scala.collection.AbstractIterator.toStream(Iterator.scala:1334)
 at scala.collection.Iterator$$anonfun$toStream$1.apply(Iterator.scala:1320)
 at scala.collection.Iterator$$anonfun$toStream$1.apply(Iterator.scala:1320)
 at scala.collection.immutable.Stream$Cons.tail(Stream.scala:1233)
 at scala.collection.immutable.Stream$Cons.tail(Stream.scala:1223)
 at scala.collection.immutable.Stream.filter(Stream.scala:519)
 at scala.collection.immutable.Stream$$anonfun$filteredTail$1.apply(Stream.scala:1299)
 at scala.collection.immutable.Stream$$anonfun$filteredTail$1.apply(Stream.scala:1299)
 at scala.collection.immutable.Stream$Cons.tail(Stream.scala:1233)
 at scala.collection.immutable.Stream$Cons.tail(Stream.scala:1223)
 at scala.collection.immutable.Stream.filter(Stream.scala:519)
 at scala.collection.immutable.Stream.filter(Stream.scala:202)
 at org.apache.flink.table.factories.TableFactoryService$.filterByContext(TableFactoryService.scala:197)
 at org.apache.flink.table.factories.TableFactoryService$.findInternal(TableFactoryService.scala:130)
 at org.apache.flink.table.factories.TableFactoryService$.find(TableFactoryService.scala:100)
 at org.apache.flink.table.factories.TableFactoryService.find(TableFactoryService.scala)
 at org.apache.flink.table.client.gateway.local.ExecutionContext.createTableSource(ExecutionContext.java:236)
 at org.apache.flink.table.client.gateway.local.ExecutionContext.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$0(ExecutionContext.java:121)
 at java.util.LinkedHashMap.forEach(LinkedHashMap.java:684)
 at org.apache.flink.table.client.gateway.local.ExecutionContext.&amp;lt;init&amp;gt;(ExecutionContext.java:119)
 at org.apache.flink.table.client.gateway.local.LocalExecutor.getOrCreateExecutionContext(LocalExecutor.java:481)
 ... 4 more
Caused by: java.lang.ClassNotFoundException: org.apache.flink.table.factories.TableFormatFactoryBase
 at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:424)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:357)
 ... 43 more
Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; CSV results...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I did not find the usage of&#160;TableFormatFactoryBase anywhere. What&apos;s the reason&#160;for this exception? I have updated specific client and table jar and&#160;sql-client-defaults.yaml&#160;in &lt;b&gt;build-target&lt;/b&gt; dir. But it still reports this exception.&lt;/p&gt;</comment>
                            <comment id="16671336" author="twalthr" created="Thu, 1 Nov 2018 09:28:25 +0000"  >&lt;p&gt;Have you rebased your branch to the current master? I merged a fix yesterday because &lt;tt&gt;flink-table-common&lt;/tt&gt; was not part of the &lt;tt&gt;flink-table&lt;/tt&gt; jar.&lt;/p&gt;</comment>
                            <comment id="16671342" author="yanghua" created="Thu, 1 Nov 2018 09:31:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; Oh, I did not. I will try it.&lt;/p&gt;</comment>
                            <comment id="16671486" author="yanghua" created="Thu, 1 Nov 2018 11:28:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt;&#160;You are right, I have fixed the exception. And about the previous problem of hash value, the actual content is :&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;hits&quot;&lt;/span&gt; : {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;total&quot;&lt;/span&gt; : 3,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;max_score&quot;&lt;/span&gt; : 1.0,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;hits&quot;&lt;/span&gt; : [
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_index&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;my_users&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_id&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;1_Bob  &quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_score&quot;&lt;/span&gt; : 1.0,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_source&quot;&lt;/span&gt; : {
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_id&quot;&lt;/span&gt; : 1,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Bob  &quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_count&quot;&lt;/span&gt; : 1
        }
      },
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_index&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;my_users&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_id&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;22_Alice&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_score&quot;&lt;/span&gt; : 1.0,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_source&quot;&lt;/span&gt; : {
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_id&quot;&lt;/span&gt; : 22,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Alice&quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_count&quot;&lt;/span&gt; : 1
        }
      },
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_index&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;my_users&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_id&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;42_Greg &quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_score&quot;&lt;/span&gt; : 1.0,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_source&quot;&lt;/span&gt; : {
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_id&quot;&lt;/span&gt; : 42,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Greg &quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_count&quot;&lt;/span&gt; : 3
        }
      }
    ]
  }
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But I do not know what the &quot;&lt;b&gt;982cb32908def9801e781381c1b8a8db&lt;/b&gt;&quot; mean.&#160; So I can not compare them. Can you tell me the expected value?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16671499" author="twalthr" created="Thu, 1 Nov 2018 11:52:45 +0000"  >&lt;p&gt;So you cannot run the e2e test successfully before your changes? This sounds like a bug in the e2e test to me then.&lt;/p&gt;</comment>
                            <comment id="16671502" author="yanghua" created="Thu, 1 Nov 2018 11:54:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; Now it reports this error :&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FAIL SQL Client Elasticsearch Upsert: Output hash mismatch.&#160; Got 6187222e109ee9222e6b2f117742070c, expected 982cb32908def9801e781381c1b8a8db.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The end-to-end tests will fail.&lt;/p&gt;

&lt;p&gt;I think it may have an exception before, just because sql-client-test is not placed in run-pre-commit-tests.sh.&lt;/p&gt;

&lt;p&gt;Currently, I have not modified its logic.&lt;/p&gt;</comment>
                            <comment id="16671507" author="twalthr" created="Thu, 1 Nov 2018 11:57:42 +0000"  >&lt;p&gt;It&apos;s strange that you are the only one reporting this. The e2e test is running on Travis nightly and is runnable on my machine. I can post my expected content later.&lt;/p&gt;</comment>
                            <comment id="16671513" author="yanghua" created="Thu, 1 Nov 2018 12:01:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; This is the &lt;a href=&quot;https://api.travis-ci.org/v3/job/448202296/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;previous Travis log&lt;/a&gt;, and the error is the same. Initially, it was caused by a match &quot;Error&quot; and none of them was found. The specific PR URL is: &lt;a href=&quot;https://github.com/apache/flink/pull/6963/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963/files&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16671712" author="twalthr" created="Thu, 1 Nov 2018 15:00:13 +0000"  >&lt;p&gt;This is the output of the hash:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;hits&quot;&lt;/span&gt; : {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;total&quot;&lt;/span&gt; : 3,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;max_score&quot;&lt;/span&gt; : 1.0,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;hits&quot;&lt;/span&gt; : [
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_index&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;my_users&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_id&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;1_Bob  &quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_score&quot;&lt;/span&gt; : 1.0,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_source&quot;&lt;/span&gt; : {
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_id&quot;&lt;/span&gt; : 1,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Bob  &quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_count&quot;&lt;/span&gt; : 2
        }
      },
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_index&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;my_users&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_id&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;22_Alice&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_score&quot;&lt;/span&gt; : 1.0,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_source&quot;&lt;/span&gt; : {
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_id&quot;&lt;/span&gt; : 22,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Alice&quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_count&quot;&lt;/span&gt; : 1
        }
      },
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_index&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;my_users&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_id&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;42_Greg &quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_score&quot;&lt;/span&gt; : 1.0,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;_source&quot;&lt;/span&gt; : {
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_id&quot;&lt;/span&gt; : 42,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Greg &quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;user_count&quot;&lt;/span&gt; : 3
        }
      }
    ]
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16671716" author="twalthr" created="Thu, 1 Nov 2018 15:01:30 +0000"  >&lt;p&gt;It seems that the user count for &quot;Bob&quot; is off by 1?&lt;/p&gt;</comment>
                            <comment id="16671760" author="yanghua" created="Thu, 1 Nov 2018 15:30:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; Do you mean that you can run this E2E test normally?&lt;/p&gt;</comment>
                            <comment id="16671771" author="twalthr" created="Thu, 1 Nov 2018 15:38:27 +0000"  >&lt;p&gt;Yes, except for some error logs at the end that cause the overall test to fail.&lt;/p&gt;</comment>
                            <comment id="16671786" author="yanghua" created="Thu, 1 Nov 2018 15:49:45 +0000"  >&lt;p&gt;That&apos;s very strange. I&apos;ve rebased my local code, and I haven&apos;t changed the logic, and Travis shows the same error. Can&apos;t I put it into `run-pre-commit-tests.sh` script to run?&lt;/p&gt;</comment>
                            <comment id="16671794" author="twalthr" created="Thu, 1 Nov 2018 15:58:07 +0000"  >&lt;p&gt;I never tried it, usually I do &lt;tt&gt;./run-single-test.sh ./test-scripts/test_sql_client.sh&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16671809" author="yanghua" created="Thu, 1 Nov 2018 16:05:07 +0000"  >&lt;p&gt;But it is just the different way to trigger the test script. Logically, the output of the test I ran was incorrect, but I did not modify the logic. All the changes (two lines of code) were in this PR. Can you pull my PR to your local area, rebase it, and run it (you can comment out the other tests and keep the only test_sql_client)? &lt;/p&gt;</comment>
                            <comment id="16674726" author="yanghua" created="Mon, 5 Nov 2018 06:36:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; After our last communication, my local test has been successful several times. But then in my Travis, it failed again and never succeeded. Therefore, the results returned by elasticsearch are sometimes accurate and sometimes inaccurate, and it is not stable.&lt;/p&gt;</comment>
                            <comment id="16674843" author="githubbot" created="Mon, 5 Nov 2018 09:04:56 +0000"  >&lt;p&gt;yanghua commented on issue #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#issuecomment-435801869&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#issuecomment-435801869&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @pnowojski @twalthr I refer to other end-to-end tests and skip the check.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675122" author="githubbot" created="Mon, 5 Nov 2018 13:13:28 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r230741876&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r230741876&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/run-nightly-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -125,7 +125,7 @@ run_test &quot;State TTL RocksDb backend end-to-end test&quot; &quot;$END_TO_END_DIR/test-scrip&lt;/p&gt;

&lt;p&gt; run_test &quot;Running Kerberized YARN on Docker test &quot; &quot;$END_TO_END_DIR/test-scripts/test_yarn_kerberos_docker.sh&quot;&lt;/p&gt;

&lt;p&gt;-run_test &quot;SQL Client end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_sql_client.sh&quot;&lt;br/&gt;
+run_test &quot;SQL Client end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_sql_client.sh&quot; &quot;skip_check_exceptions&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Why have you added this test to `run-pre-commit-tests.sh`? If there is some reason behind it, do it in separate commit and remove the runs from `run-nightly-tests.sh`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675123" author="githubbot" created="Mon, 5 Nov 2018 13:13:28 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r230740562&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r230740562&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/run-pre-commit-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -48,6 +48,7 @@ echo &quot;Flink distribution directory: $FLINK_DIR&quot;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;those checks are disabled, one should take care that a proper checks are performed in the tests itself that ensure that the test finished&lt;/li&gt;
	&lt;li&gt;in an expected state.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;+run_test &quot;SQL Client end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_sql_client.sh&quot; &quot;skip_check_exceptions&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Quoting @dawidwys:&lt;br/&gt;
   &amp;gt; If you don&apos;t want to extend the global list, (...) I would disable the log checking** via #6959 *&lt;b&gt;&lt;em&gt;AND&lt;/em&gt; add a custom check in the test itself that verifies logs with your extended whitelist&lt;/b&gt;* (preferably in a trap invoked on exit).&lt;/p&gt;

&lt;p&gt;   and look two lines above&lt;br/&gt;
   ```&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;IMPORTANT:&lt;/li&gt;
	&lt;li&gt;(...) Whenever&lt;/li&gt;
	&lt;li&gt;those checks are disabled, one should take care that a proper checks are performed in the tests itself that ensure that the test finished&lt;/li&gt;
	&lt;li&gt;in an expected state.&lt;br/&gt;
   ```&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   tbh in this case I would just prefer adding `Error while loading kafka-version.properties :null` to a global exclusion list, instead of copying whole exclusion list to the kafka test.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675125" author="githubbot" created="Mon, 5 Nov 2018 13:14:49 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r230740562&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r230740562&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/run-pre-commit-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -48,6 +48,7 @@ echo &quot;Flink distribution directory: $FLINK_DIR&quot;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;those checks are disabled, one should take care that a proper checks are performed in the tests itself that ensure that the test finished&lt;/li&gt;
	&lt;li&gt;in an expected state.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;+run_test &quot;SQL Client end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_sql_client.sh&quot; &quot;skip_check_exceptions&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Quoting @dawidwys:&lt;br/&gt;
   &amp;gt; If you don&apos;t want to extend the global list, (...) I would disable the log checking** via #6959 *&lt;b&gt;&lt;em&gt;AND&lt;/em&gt; add a custom check in the test itself that verifies logs with your extended whitelist&lt;/b&gt;* (preferably in a trap invoked on exit).&lt;/p&gt;

&lt;p&gt;   and look two lines above&lt;br/&gt;
   ```&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;IMPORTANT:&lt;/li&gt;
	&lt;li&gt;(...) Whenever&lt;/li&gt;
	&lt;li&gt;those checks are disabled, one should take care that a proper checks are performed in the tests itself that ensure that the test finished&lt;/li&gt;
	&lt;li&gt;in an expected state.&lt;br/&gt;
   ```&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   So either add this custom checks in your test or add filtering out `Error while loading kafka-version.properties :null` to a global exclusion list, instead of copying whole exclusion list to the kafka test.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675126" author="githubbot" created="Mon, 5 Nov 2018 13:15:24 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r230741876&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r230741876&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/run-nightly-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -125,7 +125,7 @@ run_test &quot;State TTL RocksDb backend end-to-end test&quot; &quot;$END_TO_END_DIR/test-scrip&lt;/p&gt;

&lt;p&gt; run_test &quot;Running Kerberized YARN on Docker test &quot; &quot;$END_TO_END_DIR/test-scripts/test_yarn_kerberos_docker.sh&quot;&lt;/p&gt;

&lt;p&gt;-run_test &quot;SQL Client end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_sql_client.sh&quot;&lt;br/&gt;
+run_test &quot;SQL Client end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_sql_client.sh&quot; &quot;skip_check_exceptions&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Why have you added this test to `run-pre-commit-tests.sh`? If there is some reason behind it, do it in separate commit and remove the runs from `run-nightly-tests.sh`. Don&apos;t add the same test in both of them.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675174" author="githubbot" created="Mon, 5 Nov 2018 13:54:44 +0000"  >&lt;p&gt;yanghua commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r230756495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r230756495&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/run-nightly-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -125,7 +125,7 @@ run_test &quot;State TTL RocksDb backend end-to-end test&quot; &quot;$END_TO_END_DIR/test-scrip&lt;/p&gt;

&lt;p&gt; run_test &quot;Running Kerberized YARN on Docker test &quot; &quot;$END_TO_END_DIR/test-scripts/test_yarn_kerberos_docker.sh&quot;&lt;/p&gt;

&lt;p&gt;-run_test &quot;SQL Client end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_sql_client.sh&quot;&lt;br/&gt;
+run_test &quot;SQL Client end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_sql_client.sh&quot; &quot;skip_check_exceptions&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @pnowojski The reason for this is to validate the effect of the change in Travis, because if placed in `run-nightly-tests.sh&apos;, it will not be routinely executed. I was going to wait until the PR was approved to withdraw the change, but your suggestion may be more reasonable. I can split it into a separate commit.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675186" author="githubbot" created="Mon, 5 Nov 2018 14:01:26 +0000"  >&lt;p&gt;yanghua commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r230758661&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r230758661&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/run-pre-commit-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -48,6 +48,7 @@ echo &quot;Flink distribution directory: $FLINK_DIR&quot;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;those checks are disabled, one should take care that a proper checks are performed in the tests itself that ensure that the test finished&lt;/li&gt;
	&lt;li&gt;in an expected state.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;+run_test &quot;SQL Client end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_sql_client.sh&quot; &quot;skip_check_exceptions&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   On this point, I think a more reasonable approach is that we can add ignore list or whitelist to the global check method, which may be more scalable. I think this change should be universal and the refactoring should be independent of any specific test. And I saw some tests that skipped the error detection and did not add custom detection. So I chose to skip detection temporarily and reconstruct the global detection method on an independent PR. Finally, we can add this special log to ignore list. What do you think of this idea?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675305" author="githubbot" created="Mon, 5 Nov 2018 15:30:14 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r230793009&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r230793009&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/run-pre-commit-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -48,6 +48,7 @@ echo &quot;Flink distribution directory: $FLINK_DIR&quot;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;those checks are disabled, one should take care that a proper checks are performed in the tests itself that ensure that the test finished&lt;/li&gt;
	&lt;li&gt;in an expected state.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;+run_test &quot;SQL Client end-to-end test&quot; &quot;$END_TO_END_DIR/test-scripts/test_sql_client.sh&quot; &quot;skip_check_exceptions&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Please add `Error while loading kafka-version.properties :null` to global ignore list in this PR, to make it fully complete and working. If you want to clean it up later, by moving this `Error while loading kafka-version.properties :null` from global ignore list to a local ignore list, it can be done in separate PR/issue. Merging this with completely disabled exceptions checking is asking for troubles.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16675377" author="githubbot" created="Mon, 5 Nov 2018 16:10:53 +0000"  >&lt;p&gt;yanghua commented on issue #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#issuecomment-435932622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#issuecomment-435932622&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @pnowojski updated.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16676313" author="githubbot" created="Tue, 6 Nov 2018 07:57:29 +0000"  >&lt;p&gt;yanghua commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r231025059&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r231025059&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -87,6 +87,8 @@ function verify_result_hash {&lt;br/&gt;
   local numRecords=$3&lt;br/&gt;
   local hash=$4&lt;/p&gt;

&lt;p&gt;+  sleep 20s&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @twalthr After many local and Travis tests, I determined that &quot;Executing SQL: Values -&amp;gt; Elasticsearch (upsert)&quot; is very unstable (statistics count results). I think it&apos;s because of the prematurely getting results from Elasticsearch. Here I feel that waiting for a while before getting results from Elasticsearch will reduce the chances of failure. cc @pnowojski &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16676334" author="githubbot" created="Tue, 6 Nov 2018 08:25:02 +0000"  >&lt;p&gt;twalthr commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r231031761&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r231031761&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -87,6 +87,8 @@ function verify_result_hash {&lt;br/&gt;
   local numRecords=$3&lt;br/&gt;
   local hash=$4&lt;/p&gt;

&lt;p&gt;+  sleep 20s&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Reducing the chances is not a proper solution in general. We should do continuous polling instead and return as early as possible. If every test would insert big sleeps our nightly tests would exceed the night. This bug should be covered in a separate issue.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16676343" author="githubbot" created="Tue, 6 Nov 2018 08:38:57 +0000"  >&lt;p&gt;yanghua commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r231035515&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r231035515&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -87,6 +87,8 @@ function verify_result_hash {&lt;br/&gt;
   local numRecords=$3&lt;br/&gt;
   local hash=$4&lt;/p&gt;

&lt;p&gt;+  sleep 20s&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   OK, I will create a new issue.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16676433" author="githubbot" created="Tue, 6 Nov 2018 09:39:17 +0000"  >&lt;p&gt;yanghua commented on issue #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#issuecomment-436190068&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#issuecomment-436190068&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @pnowojski OK, Shall I also remove the commit about &quot;Clearly sleep for a while to wait for the correctness of the elasticsearch statistics.&quot; and fix it in a sperate PR?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16676482" author="githubbot" created="Tue, 6 Nov 2018 10:00:29 +0000"  >&lt;p&gt;pnowojski commented on issue #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#issuecomment-436196552&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#issuecomment-436196552&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   You don&apos;t have, it can be in this PR - just rename the commit message.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16676658" author="githubbot" created="Tue, 6 Nov 2018 11:35:46 +0000"  >&lt;p&gt;yanghua commented on issue #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#issuecomment-436222922&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#issuecomment-436222922&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @pnowojski I have updated this commits. Now, &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10604&quot; title=&quot;Add REMAINDER math function supported in Table API and SQL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10604&quot;&gt;FLINK-10604&lt;/a&gt; is only blocked by this PR, I hope it can be merged as soon as possible.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16676659" author="githubbot" created="Tue, 6 Nov 2018 11:35:58 +0000"  >&lt;p&gt;yanghua edited a comment on issue #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#issuecomment-436222922&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#issuecomment-436222922&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @pnowojski I have updated the commits. Now, &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10604&quot; title=&quot;Add REMAINDER math function supported in Table API and SQL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10604&quot;&gt;FLINK-10604&lt;/a&gt; is only blocked by this PR, I hope it can be merged as soon as possible.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16676665" author="githubbot" created="Tue, 6 Nov 2018 11:41:50 +0000"  >&lt;p&gt;yanghua edited a comment on issue #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#issuecomment-436222922&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#issuecomment-436222922&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @pnowojski I have updated the commits. Now, &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10624&quot; title=&quot;Extend SQL client end-to-end to test new KafkaTableSink&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10624&quot;&gt;&lt;del&gt;FLINK-10624&lt;/del&gt;&lt;/a&gt; is only blocked by this PR, I hope it can be merged as soon as possible.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16677912" author="githubbot" created="Wed, 7 Nov 2018 09:31:56 +0000"  >&lt;p&gt;yanghua commented on issue #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#issuecomment-436561330&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#issuecomment-436561330&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @pnowojski Can we merge this PR?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678031" author="githubbot" created="Wed, 7 Nov 2018 10:52:51 +0000"  >&lt;p&gt;pnowojski commented on a change in pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#discussion_r231460134&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#discussion_r231460134&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -87,6 +87,8 @@ function verify_result_hash {&lt;br/&gt;
   local numRecords=$3&lt;br/&gt;
   local hash=$4&lt;/p&gt;

&lt;p&gt;+  sleep 20s&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Ops, sorry. I misunderstood @twalthr comment. I agree with him that we shouldn&apos;t be merging this `sleep 20s` fix, especially that the proper fix should easy (test for the results in a loop). I will look into it.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678033" author="githubbot" created="Wed, 7 Nov 2018 10:54:04 +0000"  >&lt;p&gt;pnowojski commented on issue #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#issuecomment-436585076&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#issuecomment-436585076&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I will look into &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10801&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-10801&lt;/a&gt; but in the meantime I will just merge &lt;br/&gt;
   &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; fix alone. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678039" author="githubbot" created="Wed, 7 Nov 2018 10:56:46 +0000"  >&lt;p&gt;pnowojski commented on issue #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963#issuecomment-436585835&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963#issuecomment-436585835&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Merged without &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10801&quot; title=&quot;Fix sql client integrate elasticsearch connector test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10801&quot;&gt;&lt;del&gt;FLINK-10801&lt;/del&gt;&lt;/a&gt; fix&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;as `af90555fb4` into master&lt;/li&gt;
	&lt;li&gt;as `193faaa007` into release-1.7&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678040" author="githubbot" created="Wed, 7 Nov 2018 10:56:46 +0000"  >&lt;p&gt;pnowojski closed pull request #6963: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10704&quot; title=&quot;Fix sql client end to end test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10704&quot;&gt;&lt;del&gt;FLINK-10704&lt;/del&gt;&lt;/a&gt; Fix sql client end to end test failure&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6963&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6963&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-end-to-end-tests/test-scripts/common.sh b/flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
index 4f628fc6d12..ce1407450be 100644&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/common.sh&lt;br/&gt;
@@ -320,6 +320,7 @@ function check_logs_for_errors {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;org.apache.flink.fs.shaded.hadoop3.org.apache.commons.beanutils.FluentPropertyBeanIntrospector  - Error when creating PropertyDescriptor for public final void org.apache.flink.fs.shaded.hadoop3.org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.String,java.lang.Object)! Ignoring this property.&quot; \&lt;br/&gt;
+      &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -v &quot;Error while loading kafka-version.properties :null&quot; \&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; grep -ic &quot;error&quot;)&lt;br/&gt;
   if [[ ${error_count} -gt 0 ]]; then&lt;br/&gt;
     echo &quot;Found error in log files:&quot;&lt;br/&gt;
diff --git a/flink-end-to-end-tests/test-scripts/elasticsearch-common.sh b/flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
index 834e84528b3..77671cb4a2a 100644&lt;br/&gt;
&amp;#8212; a/flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
+++ b/flink-end-to-end-tests/test-scripts/elasticsearch-common.sh&lt;br/&gt;
@@ -87,6 +87,8 @@ function verify_result_hash {&lt;br/&gt;
   local numRecords=$3&lt;br/&gt;
   local hash=$4&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;+  sleep 20s&lt;br/&gt;
+&lt;br/&gt;
   while : ; do&lt;br/&gt;
     curl &quot;localhost:9200/${index}/_search?q=*&amp;amp;pretty&quot; &amp;gt; $TEST_DATA_DIR/es_output&lt;/p&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678042" author="pnowojski" created="Wed, 7 Nov 2018 10:57:31 +0000"  >&lt;p&gt;Merged&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;as `af90555fb4` into master&lt;/li&gt;
	&lt;li&gt;as `193faaa007` into release-1.7&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zqkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>