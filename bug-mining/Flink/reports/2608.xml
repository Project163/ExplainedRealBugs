<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:34:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10189] FindBugs warnings: Inefficient use of keySet iterator instead of entrySet iterator</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10189</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;FindBugs-3.0.1 (&lt;a href=&quot;http://findbugs.sourceforge.net/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://findbugs.sourceforge.net/&lt;/a&gt;) reported two WMI_WRONG_MAP_ITERATOR warnings on master:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
M P WMI: org.apache.flink.runtime.state.ttl.TtlMapState.putAll(Map) makes inefficient use of keySet iterator instead of entrySet iterator  At TtlMapState.java:[line 72]
M P WMI: org.apache.flink.addons.hbase.HBaseTableSource.projectFields(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[]) makes inefficient use of keySet iterator instead of entrySet iterator  At HBaseTableSource.java:[line 19] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The description of the bug is as follows:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;b&gt;WMI: Inefficient use of keySet iterator instead of entrySet iterator (WMI_WRONG_MAP_ITERATOR)&lt;/b&gt;&lt;br/&gt;
This method accesses the value of a Map entry, using a key that was retrieved from a keySet iterator. It is more efficient to use an iterator on the entrySet of the map, to avoid the Map.get(key) lookup.&lt;br/&gt;
&lt;a href=&quot;http://findbugs.sourceforge.net/bugDescriptions.html#WMI_WRONG_MAP_ITERATOR&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://findbugs.sourceforge.net/bugDescriptions.html#WMI_WRONG_MAP_ITERATOR&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13180188">FLINK-10189</key>
            <summary>FindBugs warnings: Inefficient use of keySet iterator instead of entrySet iterator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hiroakiyoshida">Hiroaki Yoshida</assignee>
                                    <reporter username="hiroakiyoshida">Hiroaki Yoshida</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 21 Aug 2018 11:19:04 +0000</created>
                <updated>Thu, 28 Feb 2019 10:46:10 +0000</updated>
                            <resolved>Wed, 29 Aug 2018 15:15:33 +0000</resolved>
                                    <version>1.7.0</version>
                                    <fixVersion>1.7.0</fixVersion>
                                    <component>Connectors / Common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16587305" author="githubbot" created="Tue, 21 Aug 2018 11:24:26 +0000"  >&lt;p&gt;hiroakiy opened a new pull request #6596: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10189&quot; title=&quot;FindBugs warnings: Inefficient use of keySet iterator instead of entrySet iterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10189&quot;&gt;&lt;del&gt;FLINK-10189&lt;/del&gt;&lt;/a&gt; Fix FindBugs warnings: Inefficient use of keySet iterat&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6596&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6596&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This PR fixes two WMI_WRONG_MAP_ITERATOR warnings reported by FindBugs-3.0.1 (&lt;a href=&quot;http://findbugs.sourceforge.net/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://findbugs.sourceforge.net/&lt;/a&gt;(&lt;a href=&quot;http://findbugs.sourceforge.net/)):&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://findbugs.sourceforge.net/)):&lt;/a&gt;&lt;br/&gt;
   ```&lt;br/&gt;
   M P WMI: org.apache.flink.runtime.state.ttl.TtlMapState.putAll(Map) makes inefficient use of keySet iterator instead of entrySet iterator  At TtlMapState.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;line 72&amp;#93;&lt;/span&gt;&lt;br/&gt;
   M P WMI: org.apache.flink.addons.hbase.HBaseTableSource.projectFields(int[]) makes inefficient use of keySet iterator instead of entrySet iterator  At HBaseTableSource.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;line 19&amp;#93;&lt;/span&gt;&lt;br/&gt;
   ```&lt;br/&gt;
   The description of the bug is as follows:&lt;br/&gt;
   &amp;gt; *&lt;b&gt;WMI: Inefficient use of keySet iterator instead of entrySet iterator (WMI_WRONG_MAP_ITERATOR)&lt;/b&gt;*&lt;br/&gt;
   &amp;gt; This method accesses the value of a Map entry, using a key that was retrieved from keySet iterator. It is more efficient to use an iterator on the entrySet of the map, to avoid the Map.get(key) lookup.&lt;br/&gt;
   &amp;gt; &lt;a href=&quot;http://findbugs.sourceforge.net/bugDescriptions.html#WMI_WRONG_MAP_ITERATOR&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://findbugs.sourceforge.net/bugDescriptions.html#WMI_WRONG_MAP_ITERATOR&lt;/a&gt;(&lt;a href=&quot;http://findbugs.sourceforge.net/bugDescriptions.html#WMI_WRONG_MAP_ITERATOR&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://findbugs.sourceforge.net/bugDescriptions.html#WMI_WRONG_MAP_ITERATOR&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16587608" author="githubbot" created="Tue, 21 Aug 2018 15:42:26 +0000"  >&lt;p&gt;yanghua commented on issue #6596: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10189&quot; title=&quot;FindBugs warnings: Inefficient use of keySet iterator instead of entrySet iterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10189&quot;&gt;&lt;del&gt;FLINK-10189&lt;/del&gt;&lt;/a&gt; Fix FindBugs warnings: Inefficient use of keySet iterat&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6596#issuecomment-414721125&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6596#issuecomment-414721125&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @hiroakiy Thanks for your contribution. The change looks good to me. I just give a suggestion : change the PR&apos;s description like other PRs (Flink has its PR template) to give more details (such as test coverage).&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16596450" author="githubbot" created="Wed, 29 Aug 2018 15:13:45 +0000"  >&lt;p&gt;zentol closed pull request #6596: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10189&quot; title=&quot;FindBugs warnings: Inefficient use of keySet iterator instead of entrySet iterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10189&quot;&gt;&lt;del&gt;FLINK-10189&lt;/del&gt;&lt;/a&gt; Fix FindBugs warnings: Inefficient use of keySet iterat&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6596&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6596&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-connectors/flink-hbase/src/main/java/org/apache/flink/addons/hbase/HBaseTableSource.java b/flink-connectors/flink-hbase/src/main/java/org/apache/flink/addons/hbase/HBaseTableSource.java&lt;br/&gt;
index 1e090d42589..27b75d49ac9 100644&lt;br/&gt;
&amp;#8212; a/flink-connectors/flink-hbase/src/main/java/org/apache/flink/addons/hbase/HBaseTableSource.java&lt;br/&gt;
+++ b/flink-connectors/flink-hbase/src/main/java/org/apache/flink/addons/hbase/HBaseTableSource.java&lt;br/&gt;
@@ -144,9 +144,10 @@ public HBaseTableSource projectFields(int[] fields) {&lt;br/&gt;
 		for (int field : fields) {&lt;br/&gt;
 			String family = famNames&lt;span class=&quot;error&quot;&gt;&amp;#91;field&amp;#93;&lt;/span&gt;;&lt;br/&gt;
 			Map&amp;lt;String, TypeInformation&amp;lt;?&amp;gt;&amp;gt; familyInfo = hBaseSchema.getFamilyInfo(family);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for (String qualifier : familyInfo.keySet()) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+			for (Map.Entry&amp;lt;String, TypeInformation&amp;lt;?&amp;gt;&amp;gt; entry }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; 		return newTableSource;&lt;br/&gt;
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/state/ttl/TtlMapState.java b/flink-runtime/src/main/java/org/apache/flink/runtime/state/ttl/TtlMapState.java&lt;br/&gt;
index f6f81ffc940..f92e8e4d95c 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/flink-runtime/src/main/java/org/apache/flink/runtime/state/ttl/TtlMapState.java&lt;br/&gt;
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/state/ttl/TtlMapState.java&lt;br/&gt;
@@ -68,8 +68,9 @@ public void putAll(Map&amp;lt;UK, UV&amp;gt; map) throws Exception 
{
 			return;
 		}
&lt;p&gt; 		Map&amp;lt;UK, TtlValue&amp;lt;UV&amp;gt;&amp;gt; ttlMap = new HashMap&amp;lt;&amp;gt;(map.size());&lt;/p&gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;for (UK key : map.keySet()) {&lt;/li&gt;
	&lt;li&gt;ttlMap.put(key, wrapWithTs(map.get(key)));&lt;br/&gt;
+		for (Map.Entry&amp;lt;UK, UV&amp;gt; entry : map.entrySet()) 
{
+			UK key = entry.getKey();
+			ttlMap.put(key, wrapWithTs(entry.getValue()));
 		}
&lt;p&gt; 		original.putAll(ttlMap);&lt;br/&gt;
 	}&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16596455" author="zentol" created="Wed, 29 Aug 2018 15:15:33 +0000"  >&lt;p&gt;master: 8a5271e29f664dac27c95eb8e7df2ae9be76b592&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x9bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>