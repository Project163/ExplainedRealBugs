<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:39:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-11971] Fix `Command: start_kubernetes_if_not_ruunning failed` error</title>
                <link>https://issues.apache.org/jira/browse/FLINK-11971</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When I did the end-to-end test under Mac OS, I found the following two problems:&lt;br/&gt;
 1. The verification returned for different `minikube status` is not enough for the robustness. The strings returned by different versions of different platforms are different. the following misjudgment is caused:&lt;br/&gt;
 When the `Command: start_kubernetes_if_not_ruunning failed` error occurs, the `minikube` has actually started successfully. The core reason is that there is a bug in the `test_kubernetes_embedded_job.sh` script.&#160; The error message as follows:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12963077/12963077_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Current check logic: echo&#160;${status}&#160;|&#160;grep -q&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;minikube: Running cluster: Running kubectl: Correctly Configured&quot;&lt;/span&gt;

==== My local info====
jinchengsunjcs-iMac:flink-1.8.0 jincheng$ minikube status

host: Running

kubelet: Running

apiserver: Running

kubectl: Correctly Configured: pointing to minikube-vm at 192.168.99.101&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, I think we should improve the check logic of `minikube status`, What do you think?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13222737">FLINK-11971</key>
            <summary>Fix `Command: start_kubernetes_if_not_ruunning failed` error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hequn8128">Hequn Cheng</assignee>
                                    <reporter username="sunjincheng121">sunjincheng</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 20 Mar 2019 05:56:06 +0000</created>
                <updated>Thu, 21 Mar 2019 10:45:57 +0000</updated>
                            <resolved>Wed, 20 Mar 2019 20:22:14 +0000</resolved>
                                    <version>1.8.0</version>
                    <version>1.9.0</version>
                                    <fixVersion>1.8.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16797275" author="hequn8128" created="Wed, 20 Mar 2019 15:41:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sunjincheng121&quot; class=&quot;user-hover&quot; rel=&quot;sunjincheng121&quot;&gt;sunjincheng121&lt;/a&gt;&#160;Thanks for looking into the problem and providing valuable information. I see two options to solve the problem:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Making the match condition looser. For example, we can only match `Running` keyword. However, this way we would also make the checking very fragile.&lt;/li&gt;
	&lt;li&gt;Add another match condition for the new status message. For example, we can change the original&#160;match logic(in test_kubernetes_embedded_job.sh) from
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    echo ${status} | grep -q &lt;span class=&quot;code-quote&quot;&gt;&quot;minikube: Running cluster: Running kubectl: Correctly Configured&quot;&lt;/span&gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    echo ${status} | grep -q &lt;span class=&quot;code-quote&quot;&gt;&quot;minikube: Running cluster: Running kubectl: Correctly Configured&quot;&lt;/span&gt; \
        || echo ${status} | grep -q &lt;span class=&quot;code-quote&quot;&gt;&quot;host: Running kubelet: Running apiserver: Running kubectl: Correctly Configured&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Use `||` to connect the two conditions so that either one success can lead to success.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Personally, I prefer the second option.&lt;br/&gt;
 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sunjincheng121&quot; class=&quot;user-hover&quot; rel=&quot;sunjincheng121&quot;&gt;sunjincheng121&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; What do you think?&lt;/p&gt;</comment>
                            <comment id="16797516" author="sunjincheng121" created="Wed, 20 Mar 2019 20:21:12 +0000"  >&lt;p&gt;Thanks for taking this JIRA. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hequn8128&quot; class=&quot;user-hover&quot; rel=&quot;hequn8128&quot;&gt;hequn8128&lt;/a&gt;!&lt;br/&gt;
Due to the release-1.8 new RC should be coming ASAP. So &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; open the PR. I will merge it.&lt;br/&gt;
Anyway, Thanks for your efforts. &lt;/p&gt;

&lt;p&gt;Best,&lt;br/&gt;
Jincheng.&lt;/p&gt;</comment>
                            <comment id="16797517" author="sunjincheng121" created="Wed, 20 Mar 2019 20:22:14 +0000"  >&lt;p&gt;Fixed in master: 56d81e0dcadd07d634f92ac464a49d3313f56621&lt;br/&gt;
Fixed in release-1.8: eb571567ccbf5cb663e91cbbe3d9d8685b6b52fa&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12963077" name="screenshot-1.png" size="93289" author="sunjincheng121" created="Wed, 20 Mar 2019 06:22:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z00w1c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fix kubernetes check in end-to-end test.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>