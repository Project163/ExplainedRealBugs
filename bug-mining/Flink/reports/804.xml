<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:22:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3337] mvn test fails on flink-runtime because curator classes not found</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3337</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;This has been reported before. I am running &lt;tt&gt;mvn test&lt;/tt&gt; on an AWS c4.2xlarge, Flink HEAD (version 69f7f6d9...) and seeing the missing curator classes. For example,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;testMultipleLeaders(org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionTest)  Time elapsed: 1.042 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.NoClassDefFoundError: org/apache/curator/RetryPolicy
	at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:424)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:357)
	at org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionTest.testMultipleLeaders(ZooKeeperLeaderElectionTest.java:291)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Tests in error: 
  JobManagerLeaderElectionTest.testLeaderElection:99-&amp;gt;createJobManagerProps:166 NoClassDefFound
  JobManagerLeaderElectionTest.testLeaderReelection:130-&amp;gt;createJobManagerProps:166 NoClassDefFound
  ZooKeeperLeaderElectionTest.testEphemeralZooKeeperNodes:444 NoClassDefFound or...
  ZooKeeperLeaderElectionTest.testExceptionForwarding:372 NoClassDefFound org/ap...
  ZooKeeperLeaderElectionTest.testMultipleLeaders:291 NoClassDefFound org/apache...
  ZooKeeperLeaderElectionTest.testZooKeeperLeaderElectionRetrieval:94 NoClassDefFound
  ZooKeeperLeaderElectionTest.testZooKeeperReelection:137 &#187; NoClassDefFound org/...
  ZooKeeperLeaderElectionTest.testZooKeeperReelectionWithReplacement:207 NoClassDefFound
  ZooKeeperLeaderRetrievalTest.testConnectingAddressRetrievalWithDelayedLeaderElection:96 NoClassDefFound
  ZooKeeperLeaderRetrievalTest.testTimeoutOfFindConnectingAddress:187 &#187; NoClassDefFound
  ZooKeeperUtilTest.testZooKeeperEnsembleConnectStringConfiguration:40 NoClassDefFound
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The issue is resolved when removing the curator excludes from &lt;tt&gt;flink-runtime/pom.xml&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                                        &amp;lt;classpathDependencyExcludes&amp;gt;
                                                &amp;lt;classpathDependencyExclude&amp;gt;org.apache.curator:curator-recipes&amp;lt;/classpathDependencyExclude&amp;gt;
                                                &amp;lt;classpathDependencyExclude&amp;gt;org.apache.curator:curator-client&amp;lt;/classpathDependencyExclude&amp;gt;
                                                &amp;lt;classpathDependencyExclude&amp;gt;org.apache.curator:curator-framework&amp;lt;/classpathDependencyExclude&amp;gt;
                                        &amp;lt;/classpathDependencyExcludes&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12936799">FLINK-3337</key>
            <summary>mvn test fails on flink-runtime because curator classes not found</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="greghogan">Greg Hogan</assignee>
                                    <reporter username="greghogan">Greg Hogan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2016 17:38:51 +0000</created>
                <updated>Mon, 8 Feb 2016 23:11:19 +0000</updated>
                            <resolved>Mon, 8 Feb 2016 23:11:12 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15134328" author="rmetzger" created="Fri, 5 Feb 2016 15:33:51 +0000"  >&lt;p&gt;I wonder if this commit caused the issue: &lt;a href=&quot;https://github.com/apache/flink/commit/7378f014bbb3f99dbe73697926aff485d399be5a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/7378f014bbb3f99dbe73697926aff485d399be5a&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Did you rebuild the entire flink project before?&lt;/p&gt;

&lt;p&gt;Our tests on travis are passing, so I guess its just a local mixup&lt;/p&gt;</comment>
                            <comment id="15134362" author="greghogan" created="Fri, 5 Feb 2016 15:56:18 +0000"  >&lt;p&gt;It&apos;s not a local mixup but I was only running test.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;git clone https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/apache/flink
&lt;/span&gt;
wget http:&lt;span class=&quot;code-comment&quot;&gt;//mirror.tcpdiag.net/apache/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.tar.gz
&lt;/span&gt;tar xzf apache-maven-3.3.9-bin.tar.gz

cd flink
~/apache-maven-3.3.9/bin/mvn test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15134371" author="stephanewen" created="Fri, 5 Feb 2016 16:01:38 +0000"  >&lt;p&gt;Just tried that, worked on my machine.&lt;/p&gt;

&lt;p&gt;Can you try to clear the local maven cache? &lt;tt&gt;rm -r ~/.m2/repository/org/apache/flink&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15134405" author="greghogan" created="Fri, 5 Feb 2016 16:23:17 +0000"  >&lt;p&gt;This is on a fresh AWS instance, Linux AMI.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;sudo yum -y localinstall jdk-8u72-linux-x64.rpm
export JAVA_HOME=/usr/java/jdk1.8.0_72

sudo yum -y install git
git clone https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/apache/flink
&lt;/span&gt;
wget http:&lt;span class=&quot;code-comment&quot;&gt;//mirror.tcpdiag.net/apache/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.tar.gz
&lt;/span&gt;tar xzf apache-maven-3.3.9-bin.tar.gz

cd flink
~/apache-maven-3.3.9/bin/mvn test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15134448" author="stephanewen" created="Fri, 5 Feb 2016 16:52:06 +0000"  >&lt;p&gt;You have a newer Maven version, maybe some behavior changed.&lt;/p&gt;

&lt;p&gt;Can you open a pull request that removes the excludes? If it works on Travis, we can update the POM file...&lt;/p&gt;</comment>
                            <comment id="15135087" author="greghogan" created="Fri, 5 Feb 2016 21:53:20 +0000"  >&lt;p&gt;The excludes were added in &lt;tt&gt;e31a4d8a&lt;/tt&gt;. &lt;tt&gt;mvn test&lt;/tt&gt; succeeds for &lt;tt&gt;e31a4d8a^&lt;/tt&gt; and fails for &lt;tt&gt;e31a4d8a&lt;/tt&gt;, which was fixing a different issue with curator dependencies. Perhaps I can hail &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; to have another look.&lt;/p&gt;</comment>
                            <comment id="15135088" author="githubbot" created="Fri, 5 Feb 2016 21:53:47 +0000"  >&lt;p&gt;GitHub user greghogan opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1596&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1596&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3337&quot; title=&quot;mvn test fails on flink-runtime because curator classes not found&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3337&quot;&gt;&lt;del&gt;FLINK-3337&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; mvn test fails on flink-runtime because curator classes not found&lt;/p&gt;

&lt;p&gt;    Removes curator dependency exclusions from flink-runtime. This resolves&lt;br/&gt;
    NoClassDefFoundError exceptions when running `mvn test`.&lt;/p&gt;

&lt;p&gt;    This partialy reverts e31a4d8.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/greghogan/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/greghogan/flink&lt;/a&gt; 3337_mvn_test_fails_on_flink_runtime_because_curator_classes_not_found&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1596.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1596.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1596&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 84e9e0d98692620bca874d0a13e1bc327a8bc78d&lt;br/&gt;
Author: Greg Hogan &amp;lt;code@greghogan.com&amp;gt;&lt;br/&gt;
Date:   2016-02-05T21:41:24Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3337&quot; title=&quot;mvn test fails on flink-runtime because curator classes not found&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3337&quot;&gt;&lt;del&gt;FLINK-3337&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; mvn test fails on flink-runtime because curator classes not found&lt;/p&gt;

&lt;p&gt;    Removes curator dependency exclusions from flink-runtime. This resolves&lt;br/&gt;
    NoClassDefFoundError exceptions when running `mvn test`.&lt;/p&gt;

&lt;p&gt;    This partialy reverts e31a4d8.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15135792" author="githubbot" created="Sat, 6 Feb 2016 14:35:18 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1596#issuecomment-180775810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1596#issuecomment-180775810&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Seems to work. The test failures are unreleated.&lt;/p&gt;</comment>
                            <comment id="15136722" author="githubbot" created="Mon, 8 Feb 2016 08:57:14 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1596#issuecomment-181259860&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1596#issuecomment-181259860&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merging this...&lt;/p&gt;</comment>
                            <comment id="15137947" author="githubbot" created="Mon, 8 Feb 2016 23:06:32 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1596&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1596&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15137965" author="stephanewen" created="Mon, 8 Feb 2016 23:11:12 +0000"  >&lt;p&gt;Fixed via 4cc4f6022c5935dffc52a37de7ebd5b272e95487&lt;/p&gt;

&lt;p&gt;Thank you for the contribution!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12920249">FLINK-3149</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12786497" name="mvn.txt" size="316813" author="greghogan" created="Fri, 5 Feb 2016 16:19:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sfov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>