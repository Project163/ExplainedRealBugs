<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6586] InputGateMetrics#refreshAndGetMin returns Integer.MAX_VALUE for local channels</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6586</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The &lt;tt&gt;InputGateMetrics#refreshAndGetMin&lt;/tt&gt; returns &lt;tt&gt;Integer.MAX_VALUE&lt;/tt&gt; when working with &lt;tt&gt;LocalChannels&lt;/tt&gt;. In this case it should return 0 instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13071969">FLINK-6586</key>
            <summary>InputGateMetrics#refreshAndGetMin returns Integer.MAX_VALUE for local channels</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 May 2017 11:54:50 +0000</created>
                <updated>Tue, 13 Apr 2021 20:39:39 +0000</updated>
                            <resolved>Fri, 19 May 2017 22:31:33 +0000</resolved>
                                    <version>1.3.0</version>
                    <version>1.4.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Runtime / Metrics</component>
                    <component>Runtime / Network</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16010383" author="githubbot" created="Mon, 15 May 2017 11:57:11 +0000"  >&lt;p&gt;GitHub user zentol opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6586&quot; title=&quot;InputGateMetrics#refreshAndGetMin returns Integer.MAX_VALUE for local channels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6586&quot;&gt;&lt;del&gt;FLINK-6586&lt;/del&gt;&lt;/a&gt; InputGateMetrics return 0 as minimum for local channels&lt;/p&gt;

&lt;p&gt;    Should be merged for 1.3 and 1.4.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zentol/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zentol/flink&lt;/a&gt; 6586_network_min&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3907.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3907.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3907&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c74701c17718e1260b5d2b3e96ab09c01f9d3000&lt;br/&gt;
Author: zentol &amp;lt;chesnay@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-05-15T11:56:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6586&quot; title=&quot;InputGateMetrics#refreshAndGetMin returns Integer.MAX_VALUE for local channels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6586&quot;&gt;&lt;del&gt;FLINK-6586&lt;/del&gt;&lt;/a&gt; InputGateMetrics return 0 as min for local channels&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16016156" author="githubbot" created="Thu, 18 May 2017 17:53:16 +0000"  >&lt;p&gt;Github user greghogan commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Does an `InputGate` contain both local and remote `InputChannel` such that the minimum positive value might be more desirable in that case?&lt;/p&gt;</comment>
                            <comment id="16016225" author="githubbot" created="Thu, 18 May 2017 18:38:15 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    That&apos;s a great point, haven&apos;t considered that. It may be easier to just compare the final result with `Integer.MAX_VALUE` and return `0` if the match.&lt;/p&gt;</comment>
                            <comment id="16017155" author="githubbot" created="Fri, 19 May 2017 09:53:09 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Updated the PR.&lt;/p&gt;</comment>
                            <comment id="16017384" author="githubbot" created="Fri, 19 May 2017 13:24:11 +0000"  >&lt;p&gt;Github user greghogan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3907#discussion_r117479119&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3907#discussion_r117479119&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/io/network/partition/consumer/InputGateMetrics.java &amp;#8212;&lt;br/&gt;
    @@ -86,6 +86,9 @@ int refreshAndGetMin() {&lt;br/&gt;
     			}&lt;br/&gt;
     		}&lt;/p&gt;

&lt;p&gt;    +		if (min == Integer.MAX_VALUE) { // in case all channels are local&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Is it worth removing the earlier check for `channels.isEmpty()` and merging the comments?&lt;/p&gt;</comment>
                            <comment id="16017391" author="githubbot" created="Fri, 19 May 2017 13:36:38 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3907#discussion_r117481827&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3907#discussion_r117481827&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/io/network/partition/consumer/InputGateMetrics.java &amp;#8212;&lt;br/&gt;
    @@ -86,6 +86,9 @@ int refreshAndGetMin() {&lt;br/&gt;
     			}&lt;br/&gt;
     		}&lt;/p&gt;

&lt;p&gt;    +		if (min == Integer.MAX_VALUE) { // in case all channels are local&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    yes.&lt;/p&gt;</comment>
                            <comment id="16017396" author="githubbot" created="Fri, 19 May 2017 13:38:04 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    updated.&lt;/p&gt;</comment>
                            <comment id="16017572" author="githubbot" created="Fri, 19 May 2017 15:45:51 +0000"  >&lt;p&gt;Github user greghogan commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1&lt;/p&gt;</comment>
                            <comment id="16017580" author="githubbot" created="Fri, 19 May 2017 15:52:22 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merging.&lt;/p&gt;</comment>
                            <comment id="16018020" author="githubbot" created="Fri, 19 May 2017 21:11:03 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3907&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16018130" author="zentol" created="Fri, 19 May 2017 22:31:33 +0000"  >&lt;p&gt;1.3: c3ab5c8253b32bddc3fb9bf0c1085813e7f97e2f&lt;br/&gt;
1.4: 17ec6f020b779efe9152456f4ef33f6f802e4f67&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ez1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>