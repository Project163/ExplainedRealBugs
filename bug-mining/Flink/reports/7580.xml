<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:20:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-35887] Null Pointer Exception in TypeExtractor.isRecord when trying to provide type info for interface</title>
                <link>https://issues.apache.org/jira/browse/FLINK-35887</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The following code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.api.common.typeinfo.TypeInfo;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.api.common.typeinfo.TypeInfoFactory;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.api.common.typeinfo.TypeInformation;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.api.common.typeinfo.Types;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.types.PojoTestUtils;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.jupiter.api.Test;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.reflect.Type;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Map;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DebugTest {
    @TypeInfo(FooFactory.class)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Foo{}

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FooFactory &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; TypeInfoFactory&amp;lt;Foo&amp;gt; {
       @Override
       &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TypeInformation&amp;lt;Foo&amp;gt; createTypeInfo(Type type, Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, TypeInformation&amp;lt;?&amp;gt;&amp;gt; map) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Types.POJO(Foo.class, Map.of());
       }
    }

    @Test
    void test() {
       PojoTestUtils.assertSerializedAsPojo(Foo.class);
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;throws this exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException: Cannot invoke &lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getName()&quot;&lt;/span&gt; because the &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value of &lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getSuperclass()&quot;&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.flink.api.java.typeutils.TypeExtractor.isRecord(TypeExtractor.java:2227)	at org.apache.flink.api.java.typeutils.runtime.PojoSerializer.&amp;lt;init&amp;gt;(PojoSerializer.java:125)	at org.apache.flink.api.java.typeutils.PojoTypeInfo.createPojoSerializer(PojoTypeInfo.java:359)	at org.apache.flink.api.java.typeutils.PojoTypeInfo.createSerializer(PojoTypeInfo.java:347)	at org.apache.flink.types.PojoTestUtils.assertSerializedAsPojo(PojoTestUtils.java:48) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13586700">FLINK-35887</key>
            <summary>Null Pointer Exception in TypeExtractor.isRecord when trying to provide type info for interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dylanhz">dylanhz</assignee>
                                    <reporter username="jjf0">Jacob Jona Fahlenkamp</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 23 Jul 2024 16:20:34 +0000</created>
                <updated>Mon, 16 Dec 2024 14:24:59 +0000</updated>
                            <resolved>Thu, 8 Aug 2024 09:17:14 +0000</resolved>
                                    <version>1.19.1</version>
                                    <fixVersion>1.19.2</fixVersion>
                    <fixVersion>1.20.1</fixVersion>
                    <fixVersion>2.0-preview</fixVersion>
                                    <component>API / Type Serialization System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17868246" author="JIRAUSER305836" created="Wed, 24 Jul 2024 04:04:03 +0000"  >&lt;p&gt;I have solved the problem, but what is the practical purpose of adding TypeInfo to an interface? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjf0&quot; class=&quot;user-hover&quot; rel=&quot;jjf0&quot;&gt;jjf0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17868333" author="JIRAUSER303600" created="Wed, 24 Jul 2024 11:16:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dylanhz&quot; class=&quot;user-hover&quot; rel=&quot;dylanhz&quot;&gt;dylanhz&lt;/a&gt; Thanks. Without the TypeInfo the following exception is thrown:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.UnsupportedOperationException: Generic types have been disabled in the ExecutionConfig and type DebugTest$Foo is treated as a &lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt; type.
&#160;
at org.apache.flink.api.java.typeutils.GenericTypeInfo.createSerializer(GenericTypeInfo.java:88)
at org.apache.flink.api.java.typeutils.PojoTypeInfo.createPojoSerializer(PojoTypeInfo.java:355)
at org.apache.flink.api.java.typeutils.PojoTypeInfo.createSerializer(PojoTypeInfo.java:347)
at org.apache.flink.connector.datagen.functions.FromElementsGeneratorFunction.&amp;lt;init&amp;gt;(FromElementsGeneratorFunction.java:85)
at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.fromData(StreamExecutionEnvironment.java:1208)
at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.fromData(StreamExecutionEnvironment.java:1163)
at DebugTest.test(DebugTest.java:50) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;for example for this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; lombok.AllArgsConstructor;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; lombok.Data;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; lombok.NoArgsConstructor;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.api.common.typeinfo.TypeInfoFactory;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.api.common.typeinfo.TypeInformation;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.api.common.typeinfo.Types;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.configuration.Configuration;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.configuration.PipelineOptions;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.jupiter.api.Assertions;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.jupiter.api.Test;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.reflect.Type;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Map;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DebugTest {
    &lt;span class=&quot;code-comment&quot;&gt;//@TypeInfo(FooFactory.class) &amp;lt;- with &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; uncommented it works in version 1.17.2
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Foo{}

    @Data
    @NoArgsConstructor
    @AllArgsConstructor
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FooImpl &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Foo{
       &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i;
    }

    @Data
    @NoArgsConstructor
    @AllArgsConstructor
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Bar{
       Foo f;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FooFactory &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; TypeInfoFactory&amp;lt;Foo&amp;gt; {
       @Override
       &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TypeInformation&amp;lt;Foo&amp;gt; createTypeInfo(Type type, Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, TypeInformation&amp;lt;?&amp;gt;&amp;gt; map) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Types.POJO(Foo.class, Map.of());
       }
    }

    @Test
    void test() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
       &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; env = StreamExecutionEnvironment.getExecutionEnvironment(
             &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Configuration().set(PipelineOptions.GENERIC_TYPES, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
             &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ^&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;^ is removed it will work but still write a warning:
&lt;/span&gt;             &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-quote&quot;&gt;&quot;Field Bar#f will be processed as GenericType. Please read the Flink documentation on &quot;&lt;/span&gt;Data Types &amp;amp;
&lt;/span&gt;             &lt;span class=&quot;code-comment&quot;&gt;// Serialization&lt;span class=&quot;code-quote&quot;&gt;&quot; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details of the effect on performance and schema evolution.&quot;&lt;/span&gt;
&lt;/span&gt;       );
       &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; iterator = env.fromData(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Bar(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FooImpl(7))).executeAndCollect();
       Assertions.assertEquals(7, ((FooImpl) iterator.next().getF()).getI());
    }
}  &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17868530" author="JIRAUSER305836" created="Thu, 25 Jul 2024 03:24:40 +0000"  >&lt;p&gt;Actually my understanding is that the TypeInfo extracted from the interface class in createTypeInfo() appears to contain nothing, because interfaces do not contain any fields. Could you clarify the practical objective behind attempting to extract TypeInfo for an interface?&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gyfora&quot; class=&quot;user-hover&quot; rel=&quot;gyfora&quot;&gt;gyfora&lt;/a&gt; Do you have any ideas&#65311;Because I actually don&apos;t know much about TypeInformation.&lt;/p&gt;</comment>
                            <comment id="17868615" author="JIRAUSER303600" created="Thu, 25 Jul 2024 09:29:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dylanhz&quot; class=&quot;user-hover&quot; rel=&quot;dylanhz&quot;&gt;dylanhz&lt;/a&gt; Correct, the type info contains nothing, as an interface itself cannot contain any fields. It&apos;s just there to avoid Flink from throwing exceptions when disabling generic types, like in the example I have&#160; provided in my previous comment.&lt;/p&gt;</comment>
                            <comment id="17871915" author="lincoln.86xy" created="Thu, 8 Aug 2024 09:17:14 +0000"  >&lt;p&gt;fixed in master: 9457ae8c07b1a0dc036aa88735d36420009a7eb9&lt;/p&gt;</comment>
                            <comment id="17871916" author="lincoln.86xy" created="Thu, 8 Aug 2024 09:24:28 +0000"  >&lt;p&gt;I just merged this fix because it makes sense to prevent NPE.&lt;/p&gt;

&lt;p&gt;For &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dylanhz&quot; class=&quot;user-hover&quot; rel=&quot;dylanhz&quot;&gt;dylanhz&lt;/a&gt; &apos;s question about the reasoning of extracting TypeInfo from an interface, we can continue the discussion here or open a new thread.&lt;/p&gt;</comment>
                            <comment id="17905096" author="lincoln.86xy" created="Thu, 12 Dec 2024 10:27:44 +0000"  >&lt;p&gt;Because the need to port to lower versions is mentioned in &lt;a href=&quot;https://github.com/apache/flink/pull/25138&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#25138&lt;/a&gt;, and the fix involves changes to the flink-core, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Weijie+Guo&quot; class=&quot;user-hover&quot; rel=&quot;Weijie Guo&quot;&gt;Weijie Guo&lt;/a&gt; can you help see if it&apos;s suitable to port it to both 1.19 &amp;amp; 1.20 branches?&lt;/p&gt;</comment>
                            <comment id="17905947" author="JIRAUSER298934" created="Mon, 16 Dec 2024 09:04:48 +0000"  >&lt;p&gt;&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Weijie+Guo&quot; class=&quot;user-hover&quot; rel=&quot;Weijie Guo&quot;&gt;Weijie Guo&lt;/a&gt;&#160;can you help see if it&apos;s suitable to port it to both 1.19 &amp;amp; 1.20 branches?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;IIUC, this should be argued as a bug(NPE) introduced in 1.19. It make sense to backport this patch to 1.19 &amp;amp; 1.20.&lt;/p&gt;</comment>
                            <comment id="17905951" author="lincoln.86xy" created="Mon, 16 Dec 2024 09:19:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=guoweijie&quot; class=&quot;user-hover&quot; rel=&quot;guoweijie&quot;&gt;guoweijie&lt;/a&gt; Thanks for looking into this!&lt;/p&gt;

&lt;p&gt;I&apos;ve added 1.19.2 &amp;amp; 1.20.1 into the fix versions. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dylanhz&quot; class=&quot;user-hover&quot; rel=&quot;dylanhz&quot;&gt;dylanhz&lt;/a&gt; Could you also create a backport pr to 1.20 branch?&lt;/p&gt;</comment>
                            <comment id="17906068" author="lincoln.86xy" created="Mon, 16 Dec 2024 14:24:59 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;

&lt;p&gt;1.19: 5c9c45c45d77e3b609108cc69eac15240db8818b&lt;/p&gt;

&lt;p&gt;1.20: 51c37cad7464afc23fce10a9a19a04d44b13ad79&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1qhrs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>