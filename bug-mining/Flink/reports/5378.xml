<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:56:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-22438] add numRecordsOut metric for Async IO</title>
                <link>https://issues.apache.org/jira/browse/FLINK-22438</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;In Flink WebUI,there is no&#160;numRecordsOut metric,and the class AsyncWaitOperator did&apos;t have this metric in fact.Other operators have this metric, which makes it difficult to monitor Async IO operator and can cause confusion for users.&lt;/p&gt;

&lt;p&gt;I think we can directly&#160; use the wrapping output class&#160;CountingOutput to update&#160;numRecordsOut metric.CountingOutput is used in super class of&#160;AsyncWaitOperator(AbstractStreamOperator).&lt;/p&gt;

&lt;p&gt;Here is my commit,And I have run a test, it work.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/onyourhead/flink/commit/58a8ac27b292280696639caa2e311637cd631a00&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;my&#160; commit&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13374707">FLINK-22438</key>
            <summary>add numRecordsOut metric for Async IO</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Tony Giao">Zhengqi Zhang</assignee>
                                    <reporter username="Tony Giao">Zhengqi Zhang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 23 Apr 2021 17:07:30 +0000</created>
                <updated>Fri, 28 May 2021 11:06:52 +0000</updated>
                            <resolved>Thu, 29 Apr 2021 09:29:43 +0000</resolved>
                                    <version>1.11.3</version>
                    <version>1.12.2</version>
                    <version>1.13.0</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.13.1</fixVersion>
                    <fixVersion>1.12.4</fixVersion>
                                    <component>Runtime / Metrics</component>
                    <component>Runtime / Task</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="17331911" author="knaufk" created="Mon, 26 Apr 2021 08:59:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Tony+Giao&quot; class=&quot;user-hover&quot; rel=&quot;Tony Giao&quot;&gt;Tony Giao&lt;/a&gt; Thank you for opening this ticket. I would actually consider this is bug. You&apos;re solution looks good at first glance, but I am not too familiar with the code. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; Could you quickly confirm that it is indeed such an easy?&lt;/p&gt;</comment>
                            <comment id="17332080" author="tony giao" created="Mon, 26 Apr 2021 12:22:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knaufk&quot; class=&quot;user-hover&quot; rel=&quot;knaufk&quot;&gt;knaufk&lt;/a&gt;&#160;In Flink 1.9,there is no problem with AsyncIO&apos;s&#160;numRecordsOut metric, and it&#160;use the wrapping output class&#160;CountingOutput.After Flink 1.10,because the new code is submitted, the class AsyncWaitOperator directly uses the output parameter passed in the Setup method to construct a TimestampedCollector instance, but the original output field does not manage the NumRecordsOut Metric.&lt;/p&gt;

&lt;p&gt;The output field is only used in the TimestampedCollector. CountingOutput proxies the output field and adds the NumRecordsOut metric, A call to output in a TimestampedCollector will take effect through a method with the same name as countingOutput.&lt;/p&gt;

&lt;p&gt;So it seems that our use of CountingOutput to construct a TimestampedCollector will not affect the existing code.&lt;/p&gt;</comment>
                            <comment id="17333355" author="till.rohrmann" created="Tue, 27 Apr 2021 16:11:30 +0000"  >&lt;p&gt;Thanks for reporting this issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Tony+Giao&quot; class=&quot;user-hover&quot; rel=&quot;Tony Giao&quot;&gt;Tony Giao&lt;/a&gt;. I think your analysis is correct and it is a bug in the &lt;tt&gt;AsyncWaitOperator&lt;/tt&gt;. Do you want to open a PR against Flink&apos;s repository?&lt;/p&gt;</comment>
                            <comment id="17334412" author="tony giao" created="Wed, 28 Apr 2021 02:40:00 +0000"  >&lt;p&gt;Yes,I&apos;ll submit a PR later&lt;/p&gt;</comment>
                            <comment id="17335290" author="till.rohrmann" created="Thu, 29 Apr 2021 09:29:43 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;1.14.0: 56c61dd58b26596331575cac85812d36b3c4a383&lt;br/&gt;
1.13.1: 87b1831df9135382057b887f58d3f6ebf6e05f6b&lt;br/&gt;
1.12.4: 67d4ea659622c50f6d150e2d023cbf029d5be6b2&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13255912">FLINK-14044</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13024533" name="QQ&#25130;&#22270;20210424004201.png" size="42561" author="Tony Giao" created="Fri, 23 Apr 2021 17:07:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qe4w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>