<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:39:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-12297] Make ClosureCleaner recursive</title>
                <link>https://issues.apache.org/jira/browse/FLINK-12297</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Right now we do not invoke closure cleaner on output tags. Therefore such code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testFlatSelectSerialization() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();
		DataStreamSource&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; elements = env.fromElements(1, 2, 3);
		OutputTag&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; outputTag = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OutputTag&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;AAA&quot;&lt;/span&gt;) {};
		CEP.pattern(elements, Pattern.begin(&lt;span class=&quot;code-quote&quot;&gt;&quot;A&quot;&lt;/span&gt;)).flatSelect(
			outputTag,
			&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PatternFlatTimeoutFunction&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;() {
				@Override
				&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void timeout(
					Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; pattern,
					&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; timeoutTimestamp,
					Collector&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; out) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

				}
			},
			&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PatternFlatSelectFunction&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;() {
				@Override
				&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void flatSelect(Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; pattern, Collector&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; out) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

				}
			}
		);

		env.execute();
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will fail with {{The implementation of the PatternFlatSelectAdapter is not serializable. }} exception&lt;/p&gt;</description>
                <environment></environment>
        <key id="13229519">FLINK-12297</key>
            <summary>Make ClosureCleaner recursive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aitozi">WenJun Min</assignee>
                                    <reporter username="dwysakowicz">Dawid Wysakowicz</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 23 Apr 2019 06:54:39 +0000</created>
                <updated>Tue, 1 Oct 2019 15:39:12 +0000</updated>
                            <resolved>Sat, 15 Jun 2019 06:57:49 +0000</resolved>
                                    <version>1.8.0</version>
                                    <fixVersion>1.8.1</fixVersion>
                    <fixVersion>1.9.0</fixVersion>
                                    <component>API / DataSet</component>
                    <component>API / DataStream</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="16823816" author="sleepy" created="Tue, 23 Apr 2019 08:25:02 +0000"  >&lt;p&gt;It seems that there are a lot of non-cleaned components passed, another issue,&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-12113&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FLINK-12113&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We can easily fix these issues case by case. However I&apos;m not sure is there any clean way to solve these problems.&lt;/p&gt;</comment>
                            <comment id="16823870" author="sleepy" created="Tue, 23 Apr 2019 09:11:57 +0000"  >&lt;p&gt;BTW, the &lt;tt&gt;OutputTag&lt;/tt&gt; is not an interface, in this case, I can&apos;t find the reason why extends it.&lt;br/&gt;
Is there any possible that the original author thought &lt;tt&gt;OutputTag&lt;/tt&gt; should not be extended?&lt;/p&gt;</comment>
                            <comment id="16824899" author="aitozi" created="Wed, 24 Apr 2019 08:13:29 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SleePy&quot; class=&quot;user-hover&quot; rel=&quot;SleePy&quot;&gt;SleePy&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&lt;br/&gt;
As I mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-12113&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FLINK-12113&lt;/a&gt; .  &lt;em&gt;Can we enable the recursive clean in ClosureCleaner#clean by check the class fields recursively. In this way we don&apos;t have to take care of all the wrapper functions, we just have to clean up to all userfunction register entrance.&lt;/em&gt;&lt;/p&gt;</comment>
                            <comment id="16847590" author="aljoscha" created="Fri, 24 May 2019 14:26:01 +0000"  >&lt;p&gt;&lt;tt&gt;OutputTag&lt;/tt&gt; needs to be an anonymous inner class (or a concrete subclass, at least) so that the Java compiler will put the information about the generic parameters in the generated code. Thats why you see &lt;tt&gt;new OutputTag&amp;lt;T&amp;gt;()&lt;/tt&gt;, notice the {&lt;tt&gt;}&lt;/tt&gt;. &lt;/p&gt;</comment>
                            <comment id="16848002" author="aitozi" created="Sat, 25 May 2019 01:37:12 +0000"  >&lt;p&gt;Hi&#65292;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;&lt;br/&gt;
Since you have noticed this issue, can you take a look on this PR to give me some suggestion since you are the author for the ClosureCleaner . 3Q.&lt;/p&gt;</comment>
                            <comment id="16864617" author="aljoscha" created="Sat, 15 Jun 2019 06:48:01 +0000"  >&lt;p&gt;Merged on master in 68cc21e4af71505efa142110e35a1f8b1c25fe6e&lt;/p&gt;</comment>
                            <comment id="16864624" author="aljoscha" created="Sat, 15 Jun 2019 06:57:40 +0000"  >&lt;p&gt;Merge on release-1.8 in 159c52769045853bc95a0efaae8ab2c7675e1d42&lt;/p&gt;</comment>
                            <comment id="16880249" author="windpicker" created="Mon, 8 Jul 2019 11:56:53 +0000"  >&lt;p&gt;Did this recursive closure cleaner import a bug when cleaning an object with recursive references? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aitozi&quot; class=&quot;user-hover&quot; rel=&quot;aitozi&quot;&gt;aitozi&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I got an stackoverflow exception when clean a function with a JsonRowDeserializationSchema object. It seems the&#160;&lt;/p&gt;

&lt;p&gt;objectMapper field has recursive references. So I added a set to avoid this. Is this right?&lt;/p&gt;

&lt;p&gt;&#160; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12973921/12973921_image-2019-07-08-19-54-04-416.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16880366" author="aljoscha" created="Mon, 8 Jul 2019 13:48:06 +0000"  >&lt;p&gt;That seems like a good approach. Could you create a new Jira issue for that and open a PR, along with a test?&lt;/p&gt;</comment>
                            <comment id="16882000" author="windpicker" created="Wed, 10 Jul 2019 12:30:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;&#160;Sure,&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/9069&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/9069&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13248889">FLINK-13586</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12973921" name="image-2019-07-08-19-54-04-416.png" size="306299" author="windpicker" created="Mon, 8 Jul 2019 11:54:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z021cw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>