<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6284] Incorrect sorting of completed checkpoints in ZooKeeperCompletedCheckpointStore</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6284</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Now all completed checkpoints are sorted in their paths when they are recovered in &lt;tt&gt;ZooKeeperCompletedCheckpointStore&lt;/tt&gt; . In the cases where the latest checkpoint&apos;s id is not the largest in lexical order (e.g., &quot;100&quot; is smaller than &quot;99&quot; in lexical order), Flink will not recover from the latest completed checkpoint.&lt;/p&gt;

&lt;p&gt;The problem can be easily observed by setting the checkpoint ids in &lt;tt&gt;ZooKeeperCompletedCheckpointStoreITCase#testRecover()&lt;/tt&gt; to be 99, 100 and 101. &lt;/p&gt;

&lt;p&gt;To fix the problem, we should explicitly sort found checkpoints in their checkpoint ids, without the usage of &lt;tt&gt;ZooKeeperStateHandleStore#getAllSortedByName()&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13062769">FLINK-6284</key>
            <summary>Incorrect sorting of completed checkpoints in ZooKeeperCompletedCheckpointStore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="shixg">Xiaogang Shi</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Apr 2017 04:03:28 +0000</created>
                <updated>Wed, 17 May 2017 06:23:28 +0000</updated>
                            <resolved>Wed, 17 May 2017 06:22:44 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Runtime / State Backends</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15996520" author="stephanewen" created="Thu, 4 May 2017 10:33:04 +0000"  >&lt;p&gt;Thanks for opening that issue. That is critical indeed.&lt;br/&gt;
Adding &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt; to this conversation.&lt;/p&gt;</comment>
                            <comment id="15997009" author="till.rohrmann" created="Thu, 4 May 2017 16:17:28 +0000"  >&lt;p&gt;+1 for sorting wrt checkpoint ids or Znode version number.&lt;/p&gt;</comment>
                            <comment id="16004090" author="ram_krish" created="Wed, 10 May 2017 05:24:52 +0000"  >&lt;p&gt;Can I take this up, if some one is not already working on this?&lt;/p&gt;</comment>
                            <comment id="16007119" author="rmetzger" created="Thu, 11 May 2017 20:21:02 +0000"  >&lt;p&gt;I think nobody is working on the issue right now.&lt;br/&gt;
How fast would you be able to provide a pull request to fix this?&lt;br/&gt;
I&apos;m asking because this is one of the last blockers of the 1.3.0 release, and I would like to create the next release candidate on Monday morning (CET).&lt;/p&gt;</comment>
                            <comment id="16007657" author="ram_krish" created="Fri, 12 May 2017 05:34:29 +0000"  >&lt;p&gt;I can try to do this by end of today IST.&lt;/p&gt;</comment>
                            <comment id="16007787" author="githubbot" created="Fri, 12 May 2017 08:21:18 +0000"  >&lt;p&gt;GitHub user ramkrish86 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6284&quot; title=&quot;Incorrect sorting of completed checkpoints in ZooKeeperCompletedCheckpointStore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6284&quot;&gt;&lt;del&gt;FLINK-6284&lt;/del&gt;&lt;/a&gt; Incorrect sorting of completed checkpoints in ZooKeeperCompletedCheckpointStore&lt;/p&gt;

&lt;p&gt;    ZooKeeperCompletedCheckpointStore&lt;/p&gt;

&lt;p&gt;    Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.&lt;br/&gt;
    If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the &lt;span class=&quot;error&quot;&gt;&amp;#91;How To Contribute guide&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://flink.apache.org/how-to-contribute.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://flink.apache.org/how-to-contribute.html&lt;/a&gt;).&lt;br/&gt;
    In addition to going through the list, please provide a meaningful description of your changes.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] General&lt;/li&gt;
	&lt;li&gt;The pull request references the related JIRA issue (&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;FLINK-XXX&amp;#93;&lt;/span&gt; Jira title text&quot;)&lt;/li&gt;
	&lt;li&gt;The pull request addresses only one issue&lt;/li&gt;
	&lt;li&gt;Each commit in the PR has a meaningful commit message (including the JIRA id)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Documentation&lt;/li&gt;
	&lt;li&gt;Documentation has been added for new functionality&lt;/li&gt;
	&lt;li&gt;Old documentation affected by the pull request has been updated&lt;/li&gt;
	&lt;li&gt;JavaDoc for public methods has been added&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Tests &amp;amp; Build&lt;/li&gt;
	&lt;li&gt;Functionality added by the pull request is covered by tests&lt;/li&gt;
	&lt;li&gt;`mvn clean verify` has been executed successfully locally or a Travis build has passed&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;    Making use of the Zookeeper&apos;s getChildren() API directly so that it just creates a list in the sequence order. If we go with the ZKPaths API then we need to do some sorting by converting the List&amp;lt;STring&amp;gt; to List&amp;lt;Long&amp;gt;.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ramkrish86/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ramkrish86/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6284&quot; title=&quot;Incorrect sorting of completed checkpoints in ZooKeeperCompletedCheckpointStore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6284&quot;&gt;&lt;del&gt;FLINK-6284&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3881&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 33bf37a2d706af6c8eb6cbe9d58aa3ac9d1f03e0&lt;br/&gt;
Author: Ramkrishna &amp;lt;ramkrishna.s.vasudevan@intel.com&amp;gt;&lt;br/&gt;
Date:   2017-05-12T08:18:16Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6284&quot; title=&quot;Incorrect sorting of completed checkpoints in ZooKeeperCompletedCheckpointStore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6284&quot;&gt;&lt;del&gt;FLINK-6284&lt;/del&gt;&lt;/a&gt; Incorrect sorting of completed checkpoints in&lt;br/&gt;
    ZooKeeperCompletedCheckpointStore&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16007843" author="githubbot" created="Fri, 12 May 2017 09:20:32 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881#discussion_r116185935&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881#discussion_r116185935&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/zookeeper/ZooKeeperStateHandleStore.java &amp;#8212;&lt;br/&gt;
    @@ -346,11 +346,7 @@ public int exists(String pathInZooKeeper) throws Exception {&lt;br/&gt;
     			} else {&lt;br/&gt;
     				// Initial cVersion (number of changes to the children of this node)&lt;br/&gt;
     				int initialCVersion = stat.getCversion();&lt;br/&gt;
    -&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;List&amp;lt;String&amp;gt; children = ZKPaths.getSortedChildren(&lt;/li&gt;
	&lt;li&gt;client.getZookeeperClient().getZooKeeper(),&lt;/li&gt;
	&lt;li&gt;ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;));&lt;br/&gt;
    -&lt;br/&gt;
    +				List&amp;lt;String&amp;gt; children = client.getZookeeperClient().getZooKeeper().getChildren(ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;), false);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think this alone does not work: The JavaDocs of `ZooKeeper#getChildren` say&lt;/p&gt;

&lt;p&gt;    &amp;gt; The list of children returned is not sorted and no guarantee is provided as to its natural or lexical order.&lt;/p&gt;

&lt;p&gt;    Thus, I assume that it is not safe to simply return the list of children without any further processing.&lt;/p&gt;</comment>
                            <comment id="16007863" author="githubbot" created="Fri, 12 May 2017 09:31:23 +0000"  >&lt;p&gt;Github user ramkrish86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881#discussion_r116188234&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881#discussion_r116188234&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/zookeeper/ZooKeeperStateHandleStore.java &amp;#8212;&lt;br/&gt;
    @@ -346,11 +346,7 @@ public int exists(String pathInZooKeeper) throws Exception {&lt;br/&gt;
     			} else {&lt;br/&gt;
     				// Initial cVersion (number of changes to the children of this node)&lt;br/&gt;
     				int initialCVersion = stat.getCversion();&lt;br/&gt;
    -&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;List&amp;lt;String&amp;gt; children = ZKPaths.getSortedChildren(&lt;/li&gt;
	&lt;li&gt;client.getZookeeperClient().getZooKeeper(),&lt;/li&gt;
	&lt;li&gt;ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;));&lt;br/&gt;
    -&lt;br/&gt;
    +				List&amp;lt;String&amp;gt; children = client.getZookeeperClient().getZooKeeper().getChildren(ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;), false);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Let me do it my older way. I had a patch but I thought this is better. I checked the javadoc of the ZKPaths only. I will push my initial version of the patch only then, where convert the List&amp;lt;String&amp;gt; to List&amp;lt;Long&amp;gt; and then use that as the sorted one.&lt;/p&gt;</comment>
                            <comment id="16007998" author="githubbot" created="Fri, 12 May 2017 11:44:39 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881#discussion_r116207779&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881#discussion_r116207779&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/zookeeper/ZooKeeperStateHandleStore.java &amp;#8212;&lt;br/&gt;
    @@ -346,17 +346,20 @@ public int exists(String pathInZooKeeper) throws Exception {&lt;br/&gt;
     			} else {&lt;br/&gt;
     				// Initial cVersion (number of changes to the children of this node)&lt;br/&gt;
     				int initialCVersion = stat.getCversion();&lt;br/&gt;
    -&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;List&amp;lt;String&amp;gt; children = ZKPaths.getSortedChildren(&lt;/li&gt;
	&lt;li&gt;client.getZookeeperClient().getZooKeeper(),&lt;/li&gt;
	&lt;li&gt;ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;));&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;for (String path : children) {&lt;/li&gt;
	&lt;li&gt;path = &quot;/&quot; + path;&lt;br/&gt;
    +				List&amp;lt;String&amp;gt; childrenInStr =&lt;br/&gt;
    +					client.getZookeeperClient().getZooKeeper().&lt;br/&gt;
    +						getChildren(ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;), false);&lt;br/&gt;
    +				List&amp;lt;Long&amp;gt; children = new ArrayList&amp;lt;Long&amp;gt;(childrenInStr.size());&lt;br/&gt;
    +				for(String childNode : childrenInStr) 
{
    +					children.add(new Long(childNode));
    +				}
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Where are the children sorted? Again, I think this only works because `ZooKeeper#getChildren` returns the nodes in the right order in the test case.&lt;/p&gt;</comment>
                            <comment id="16007999" author="githubbot" created="Fri, 12 May 2017 11:44:39 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881#discussion_r116207072&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881#discussion_r116207072&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: pom.xml &amp;#8212;&lt;br/&gt;
    @@ -101,7 +101,8 @@ under the License.&lt;br/&gt;
     		&amp;lt;chill.version&amp;gt;0.7.4&amp;lt;/chill.version&amp;gt;&lt;br/&gt;
     		&amp;lt;asm.version&amp;gt;5.0.4&amp;lt;/asm.version&amp;gt;&lt;br/&gt;
     		&amp;lt;zookeeper.version&amp;gt;3.4.6&amp;lt;/zookeeper.version&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;curator.version&amp;gt;2.12.0&amp;lt;/curator.version&amp;gt;&lt;br/&gt;
    +		&amp;lt;curator.version&amp;gt;2.11.0&amp;lt;/curator.version&amp;gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Why are you downgrading the curator version?&lt;/p&gt;</comment>
                            <comment id="16008000" author="githubbot" created="Fri, 12 May 2017 11:44:40 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881#discussion_r116208844&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881#discussion_r116208844&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/zookeeper/ZooKeeperStateHandleStore.java &amp;#8212;&lt;br/&gt;
    @@ -346,17 +346,20 @@ public int exists(String pathInZooKeeper) throws Exception {&lt;br/&gt;
     			} else {&lt;br/&gt;
     				// Initial cVersion (number of changes to the children of this node)&lt;br/&gt;
     				int initialCVersion = stat.getCversion();&lt;br/&gt;
    -&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;List&amp;lt;String&amp;gt; children = ZKPaths.getSortedChildren(&lt;/li&gt;
	&lt;li&gt;client.getZookeeperClient().getZooKeeper(),&lt;/li&gt;
	&lt;li&gt;ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;));&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;for (String path : children) {&lt;/li&gt;
	&lt;li&gt;path = &quot;/&quot; + path;&lt;br/&gt;
    +				List&amp;lt;String&amp;gt; childrenInStr =&lt;br/&gt;
    +					client.getZookeeperClient().getZooKeeper().&lt;br/&gt;
    +						getChildren(ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;), false);&lt;br/&gt;
    +				List&amp;lt;Long&amp;gt; children = new ArrayList&amp;lt;Long&amp;gt;(childrenInStr.size());&lt;br/&gt;
    +				for(String childNode : childrenInStr) {&lt;br/&gt;
    +					children.add(new Long(childNode));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I&apos;m not sure whether we can assume that the children paths are always longs. In the general case this is not true (see `ZooKeeperMesosWorkerStore`).&lt;/p&gt;</comment>
                            <comment id="16008013" author="githubbot" created="Fri, 12 May 2017 11:58:11 +0000"  >&lt;p&gt;Github user ramkrish86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881#discussion_r116211032&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881#discussion_r116211032&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: pom.xml &amp;#8212;&lt;br/&gt;
    @@ -101,7 +101,8 @@ under the License.&lt;br/&gt;
     		&amp;lt;chill.version&amp;gt;0.7.4&amp;lt;/chill.version&amp;gt;&lt;br/&gt;
     		&amp;lt;asm.version&amp;gt;5.0.4&amp;lt;/asm.version&amp;gt;&lt;br/&gt;
     		&amp;lt;zookeeper.version&amp;gt;3.4.6&amp;lt;/zookeeper.version&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;curator.version&amp;gt;2.12.0&amp;lt;/curator.version&amp;gt;&lt;br/&gt;
    +		&amp;lt;curator.version&amp;gt;2.11.0&amp;lt;/curator.version&amp;gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Oh..My environment was not able to get 2.12.0. So to make things compile I included this change. Will revert it.&lt;/p&gt;</comment>
                            <comment id="16008014" author="githubbot" created="Fri, 12 May 2017 11:58:52 +0000"  >&lt;p&gt;Github user ramkrish86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881#discussion_r116211132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881#discussion_r116211132&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/zookeeper/ZooKeeperStateHandleStore.java &amp;#8212;&lt;br/&gt;
    @@ -346,17 +346,20 @@ public int exists(String pathInZooKeeper) throws Exception {&lt;br/&gt;
     			} else {&lt;br/&gt;
     				// Initial cVersion (number of changes to the children of this node)&lt;br/&gt;
     				int initialCVersion = stat.getCversion();&lt;br/&gt;
    -&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;List&amp;lt;String&amp;gt; children = ZKPaths.getSortedChildren(&lt;/li&gt;
	&lt;li&gt;client.getZookeeperClient().getZooKeeper(),&lt;/li&gt;
	&lt;li&gt;ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;));&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;for (String path : children) {&lt;/li&gt;
	&lt;li&gt;path = &quot;/&quot; + path;&lt;br/&gt;
    +				List&amp;lt;String&amp;gt; childrenInStr =&lt;br/&gt;
    +					client.getZookeeperClient().getZooKeeper().&lt;br/&gt;
    +						getChildren(ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;), false);&lt;br/&gt;
    +				List&amp;lt;Long&amp;gt; children = new ArrayList&amp;lt;Long&amp;gt;(childrenInStr.size());&lt;br/&gt;
    +				for(String childNode : childrenInStr) 
{
    +					children.add(new Long(childNode));
    +				}
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Here again. It is my bad. I lost my previous changes becauseo f the compile issue. So lost this. I have made a new push already for this sort thing.&lt;/p&gt;</comment>
                            <comment id="16008015" author="githubbot" created="Fri, 12 May 2017 11:59:39 +0000"  >&lt;p&gt;Github user ramkrish86 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881#discussion_r116211254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881#discussion_r116211254&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/zookeeper/ZooKeeperStateHandleStore.java &amp;#8212;&lt;br/&gt;
    @@ -346,17 +346,20 @@ public int exists(String pathInZooKeeper) throws Exception {&lt;br/&gt;
     			} else {&lt;br/&gt;
     				// Initial cVersion (number of changes to the children of this node)&lt;br/&gt;
     				int initialCVersion = stat.getCversion();&lt;br/&gt;
    -&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;List&amp;lt;String&amp;gt; children = ZKPaths.getSortedChildren(&lt;/li&gt;
	&lt;li&gt;client.getZookeeperClient().getZooKeeper(),&lt;/li&gt;
	&lt;li&gt;ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;));&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;for (String path : children) {&lt;/li&gt;
	&lt;li&gt;path = &quot;/&quot; + path;&lt;br/&gt;
    +				List&amp;lt;String&amp;gt; childrenInStr =&lt;br/&gt;
    +					client.getZookeeperClient().getZooKeeper().&lt;br/&gt;
    +						getChildren(ZKPaths.fixForNamespace(client.getNamespace(), &quot;/&quot;), false);&lt;br/&gt;
    +				List&amp;lt;Long&amp;gt; children = new ArrayList&amp;lt;Long&amp;gt;(childrenInStr.size());&lt;br/&gt;
    +				for(String childNode : childrenInStr) {&lt;br/&gt;
    +					children.add(new Long(childNode));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Ok. I see. I am not sure on this MesosWorker. Using cxid am not sure if we have an API. If so we can direclty use it. Will be back.&lt;/p&gt;</comment>
                            <comment id="16008043" author="githubbot" created="Fri, 12 May 2017 12:28:40 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @ramkrish86, I might have found an easy way to solve the problem. Take a look at &lt;a href=&quot;https://github.com/tillrohrmann/flink/commit/5bd499329d68c6f3236b4e89ba25fdb9acb7e422&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink/commit/5bd499329d68c6f3236b4e89ba25fdb9acb7e422&lt;/a&gt;. If this solves the problem, then I would open a PR with it.&lt;/p&gt;</comment>
                            <comment id="16008047" author="githubbot" created="Fri, 12 May 2017 12:30:25 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3884&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3884&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6284&quot; title=&quot;Incorrect sorting of completed checkpoints in ZooKeeperCompletedCheckpointStore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6284&quot;&gt;&lt;del&gt;FLINK-6284&lt;/del&gt;&lt;/a&gt; Correct sorting of completed checkpoints in ZooKeeperStateHandleStore&lt;/p&gt;

&lt;p&gt;    In order to store completed checkpoints in an increasing order in ZooKeeper,&lt;br/&gt;
    the paths for the completed checkpoint is no generated by&lt;br/&gt;
    `String.format(&quot;/%019d&quot;, checkpointId)` instead of `String.format(&quot;/%s&quot;, checkpointId)`.&lt;br/&gt;
    This makes sure that the converted long will always have the same length with&lt;br/&gt;
    leading 0s.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixZooKeeperSorting&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3884.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3884.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3884&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5bd499329d68c6f3236b4e89ba25fdb9acb7e422&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-05-12T12:23:37Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6284&quot; title=&quot;Incorrect sorting of completed checkpoints in ZooKeeperCompletedCheckpointStore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6284&quot;&gt;&lt;del&gt;FLINK-6284&lt;/del&gt;&lt;/a&gt; Correct sorting of completed checkpoints in ZooKeeperStateHandleStore&lt;/p&gt;

&lt;p&gt;    In order to store completed checkpoints in an increasing order in ZooKeeper,&lt;br/&gt;
    the paths for the completed checkpoint is no generated by&lt;br/&gt;
    String.format(&quot;/%019d&quot;, checkpointId) instead of String.format(&quot;/%s&quot;, checkpointId).&lt;br/&gt;
    This makes sure that the converted long will always have the same length with&lt;br/&gt;
    leading 0s.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16008095" author="githubbot" created="Fri, 12 May 2017 13:05:16 +0000"  >&lt;p&gt;Github user ramkrish86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tillrohrmann &lt;br/&gt;
    Thanks for the new PR. I just executed your change with 101, 99 , 100 as the checkpoint order. In this case 100 should be the latest one though the actual ids are not sorted. But with your change and my earlier commit it will always sort 99, 100, 101.&lt;br/&gt;
    Can you take a look at my latest commit, that is based on czxid (as per your suggestion) and I think that makes sense. What ever be the actual id, in the zookeeper what was created recently will be the latest checkpoint. But am not very sure if the checkpointId will really be added in a  non-sorted way and can 100 be the latest one (though 101 was also there). &lt;/p&gt;
</comment>
                            <comment id="16008097" author="githubbot" created="Fri, 12 May 2017 13:06:59 +0000"  >&lt;p&gt;Github user ramkrish86 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I won&apos;t be available for next 2 to 3 hours. So feel free to decide based on  your convenience in case you need to make the RC candidate for 1.3 release. I am sorry that I could not make an initial commit that took care of things properly, should have been more careful.  Thanks for the opportunity.&lt;/p&gt;</comment>
                            <comment id="16010173" author="githubbot" created="Mon, 15 May 2017 08:42:33 +0000"  >&lt;p&gt;Github user StefanRRichter commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3884&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3884&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM +1&lt;/p&gt;</comment>
                            <comment id="16010287" author="githubbot" created="Mon, 15 May 2017 10:22:49 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3884&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3884&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @StefanRRichter. Merging this PR once Travis gives green light.&lt;/p&gt;</comment>
                            <comment id="16010292" author="githubbot" created="Mon, 15 May 2017 10:26:55 +0000"  >&lt;p&gt;Github user ramkrish86 closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3881&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3881&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16013596" author="githubbot" created="Wed, 17 May 2017 06:20:57 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3884&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3884&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16013601" author="till.rohrmann" created="Wed, 17 May 2017 06:22:44 +0000"  >&lt;p&gt;1.4.0: ebc13688c9441adf61075707f40b361ee02597f3&lt;br/&gt;
1.3.0: 827d74e69386cff87576972c1b69a16b92b730ae&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3dex3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>