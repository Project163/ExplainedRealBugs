<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:23:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3651] Fix faulty RollingSink Restore</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3651</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The RollingSink restore logic has a bug where the sink for subtask index 1 also removes files for subtask index 11 because the regex that checks for the file name also matches that one. Adding the suffix to the regex should solve the problem because then the regex for 1 will only match files for subtask index 1.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12952480">FLINK-3651</key>
            <summary>Fix faulty RollingSink Restore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="aljoscha">Aljoscha Krettek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Mar 2016 15:21:41 +0000</created>
                <updated>Thu, 28 Feb 2019 11:14:45 +0000</updated>
                            <resolved>Tue, 29 Mar 2016 17:15:45 +0000</resolved>
                                                    <fixVersion>1.0.1</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15208158" author="githubbot" created="Wed, 23 Mar 2016 10:02:19 +0000"  >&lt;p&gt;GitHub user aljoscha opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1830&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1830&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3651&quot; title=&quot;Fix faulty RollingSink Restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3651&quot;&gt;&lt;del&gt;FLINK-3651&lt;/del&gt;&lt;/a&gt; Fix faulty RollingSink Restore&lt;/p&gt;

&lt;p&gt;    On restore the sink for subtask index i has to cleanup leftover files&lt;br/&gt;
    for subtask i. The pattern used for checking this was not properly&lt;br/&gt;
    terminated so the sink for subtask 1 would, for example, delete some&lt;br/&gt;
    files for sink i=11. This would lead to data loss.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/aljoscha/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aljoscha/flink&lt;/a&gt; rolling-sink-fix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1830.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1830.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1830&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a78d88f01a3d0da3bcfaad07c9abf419061a8025&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-03-07T16:15:20Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3651&quot; title=&quot;Fix faulty RollingSink Restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3651&quot;&gt;&lt;del&gt;FLINK-3651&lt;/del&gt;&lt;/a&gt; Fix faulty RollingSink Restore&lt;/p&gt;

&lt;p&gt;    On restore the sink for subtask index i has to cleanup leftover files&lt;br/&gt;
    for subtask i. The pattern used for checking this was not properly&lt;br/&gt;
    terminated so the sink for subtask 1 would, for example, delete some&lt;br/&gt;
    files for sink i=11. This would lead to data loss.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15210096" author="githubbot" created="Thu, 24 Mar 2016 11:23:18 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1830#issuecomment-200795802&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1830#issuecomment-200795802&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good catch! The changes look good to me.&lt;/p&gt;

&lt;p&gt;    I tried running the adjusted `RollingSinkFaultToleranceITCase` and `RollingSinkFaultTolerance2ITCase` w/o the fix in `RollingSink` and they still succeeded.&lt;/p&gt;

&lt;p&gt;    If this expected? Is there a way we can test this differently?&lt;/p&gt;</comment>
                            <comment id="15210100" author="githubbot" created="Thu, 24 Mar 2016 11:28:45 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1830#issuecomment-200796710&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1830#issuecomment-200796710&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think the test fails only sporadically, depending on the speed at which tasks are deleting the files.&lt;br/&gt;
    If you are lucky, everything is correct.&lt;/p&gt;</comment>
                            <comment id="15210309" author="githubbot" created="Thu, 24 Mar 2016 14:31:19 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1830#issuecomment-200863307&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1830#issuecomment-200863307&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes, what @rmetzger  said is correct. Without the fix and the increase of parallelism it will be a flaky test that still succeeds sometimes.&lt;/p&gt;</comment>
                            <comment id="15215721" author="githubbot" created="Tue, 29 Mar 2016 09:15:59 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1830#issuecomment-202794232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1830#issuecomment-202794232&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    OK, depending on whether it is feasible to test this separately, I would go ahead and merge it as is or add a test and merge then. :+1:&lt;/p&gt;</comment>
                            <comment id="15216351" author="githubbot" created="Tue, 29 Mar 2016 17:12:57 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1830#issuecomment-203004909&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1830#issuecomment-203004909&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m going to merge this to `master` and `release-1.0`.&lt;/p&gt;</comment>
                            <comment id="15216361" author="githubbot" created="Tue, 29 Mar 2016 17:15:31 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1830&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1830&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15216362" author="uce" created="Tue, 29 Mar 2016 17:15:45 +0000"  >&lt;p&gt;Fixed in 580a177 (master), 2089029 (release-1.0)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v17j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>