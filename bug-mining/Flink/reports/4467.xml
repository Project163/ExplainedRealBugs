<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:48:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-12175] TypeExtractor.getMapReturnTypes produces different TypeInformation than createTypeInformation for classes with parameterized ancestors</title>
                <link>https://issues.apache.org/jira/browse/FLINK-12175</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I expect that the &lt;tt&gt;TypeMapper&lt;/tt&gt; &lt;tt&gt;createTypeInformation&lt;/tt&gt; and &lt;tt&gt;getMapReturnTypes&lt;/tt&gt; would produce equivalent type information for the same type. But when there is a parameterized superclass, this does not appear to be the case.&lt;/p&gt;

&lt;p&gt;Here&apos;s a test case that could be added to &lt;tt&gt;PojoTypeExtractorTest.java&lt;/tt&gt; that demonstrates the issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Pojo &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Serializable {
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; digits;
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; letters;
}

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ParameterizedParent&amp;lt;T &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Serializable&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Serializable {
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; T pojoField;
}

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ConcreteImpl &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ParameterizedParent&amp;lt;Pojo&amp;gt; {
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; precise;
}

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ConcreteMapFunction &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; MapFunction&amp;lt;ConcreteImpl, ConcreteImpl&amp;gt; {
	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ConcreteImpl map(ConcreteImpl value) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
	}
}

@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testMapReturnType() {
	&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; TypeInformation&amp;lt;ConcreteImpl&amp;gt; directTypeInfo = TypeExtractor.createTypeInfo(ConcreteImpl.class);

	Assert.assertTrue(directTypeInfo &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; PojoTypeInfo);
	TypeInformation&amp;lt;?&amp;gt; directPojoFieldTypeInfo = ((PojoTypeInfo) directTypeInfo).getPojoFieldAt(0).getTypeInformation();
	Assert.assertTrue(directPojoFieldTypeInfo &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; PojoTypeInfo);

	&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; TypeInformation&amp;lt;ConcreteImpl&amp;gt; mapReturnTypeInfo
		= TypeExtractor.getMapReturnTypes(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConcreteMapFunction(), directTypeInfo);
	Assert.assertTrue(mapReturnTypeInfo &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; PojoTypeInfo);
	TypeInformation&amp;lt;?&amp;gt; mapReturnPojoFieldTypeInfo = ((PojoTypeInfo) mapReturnTypeInfo).getPojoFieldAt(0).getTypeInformation();
	Assert.assertTrue(mapReturnPojoFieldTypeInfo &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; PojoTypeInfo);

	Assert.assertEquals(directTypeInfo, mapReturnTypeInfo);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This test case will fail on the last two asserts because &lt;tt&gt;getMapReturnTypes&lt;/tt&gt; produces a &lt;tt&gt;TypeInformation&lt;/tt&gt; for &lt;tt&gt;ConcreteImpl&lt;/tt&gt; with a &lt;tt&gt;GenericTypeInfo&lt;/tt&gt; for the &lt;tt&gt;pojoField&lt;/tt&gt;, whereas &lt;tt&gt;createTypeInformation&lt;/tt&gt; correctly produces a &lt;tt&gt;PojoTypeInfo&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13227781">FLINK-12175</key>
            <summary>TypeExtractor.getMapReturnTypes produces different TypeInformation than createTypeInformation for classes with parameterized ancestors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dadams">Daniel Adams</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 12 Apr 2019 19:14:32 +0000</created>
                <updated>Thu, 30 Jul 2020 14:13:08 +0000</updated>
                            <resolved>Thu, 30 Jul 2020 14:12:32 +0000</resolved>
                                    <version>1.7.2</version>
                    <version>1.9.0</version>
                                    <fixVersion>1.12.0</fixVersion>
                                    <component>API / Type Serialization System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="16818946" author="andbul" created="Tue, 16 Apr 2019 12:17:24 +0000"  >&lt;p&gt;Can I work on this ticket?&lt;/p&gt;</comment>
                            <comment id="16819120" author="dadams" created="Tue, 16 Apr 2019 14:56:28 +0000"  >&lt;p&gt;It&apos;s fine with me, I&apos;m not working on a fix.&lt;/p&gt;</comment>
                            <comment id="16827895" author="yangfei" created="Sun, 28 Apr 2019 10:04:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andbul&quot; class=&quot;user-hover&quot; rel=&quot;andbul&quot;&gt;andbul&lt;/a&gt; are you working on this fix?&#160;Can I work on this ticket?&lt;/p&gt;</comment>
                            <comment id="16828822" author="andbul" created="Sun, 28 Apr 2019 19:19:56 +0000"  >&lt;p&gt;Yes I am working on this. I have found a solution and working on pull request.&lt;/p&gt;</comment>
                            <comment id="16833732" author="yangfei" created="Mon, 6 May 2019 11:51:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andbul&quot; class=&quot;user-hover&quot; rel=&quot;andbul&quot;&gt;andbul&lt;/a&gt; can you show your PR to me? thanks ,I want to learn how you solve this issue&lt;/p&gt;</comment>
                            <comment id="16834601" author="andbul" created="Tue, 7 May 2019 10:04:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yangfei&quot; class=&quot;user-hover&quot; rel=&quot;yangfei&quot;&gt;yangfei&lt;/a&gt; you can find it&#160;&lt;a href=&quot;http://example.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here &lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17167949" author="dawidwys" created="Thu, 30 Jul 2020 14:12:32 +0000"  >&lt;p&gt;Fixed in a8847061c40bf8ca17e22e6e412a378f53b8b82d&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01qow:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>