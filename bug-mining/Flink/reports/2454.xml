<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:33:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9215] TaskManager Releasing  - org.apache.flink.util.FlinkException</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9215</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The exception stack is as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;//&#20195;&#30721;&#21344;&#20301;&#31526;
&lt;/span&gt;
{&lt;span class=&quot;code-quote&quot;&gt;&quot;root-exception&quot;&lt;/span&gt;:&quot;
org.apache.flink.util.FlinkException: Releasing TaskManager 0d87aa6fa99a6c12e36775b1d6bceb19.
at org.apache.flink.runtime.jobmaster.slotpool.SlotPool.releaseTaskManagerInternal(SlotPool.java:1067)
at org.apache.flink.runtime.jobmaster.slotpool.SlotPool.releaseTaskManager(SlotPool.java:1050)
at sun.reflect.GeneratedMethodAccessor110.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcInvocation(AkkaRpcActor.java:210)
at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleMessage(AkkaRpcActor.java:154)
at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.lambda$onReceive$1(AkkaRpcActor.java:132)
at akka.actor.ActorCell$$anonfun$become$1.applyOrElse(ActorCell.scala:544)
at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundReceive(Actor.scala:502)
at akka.actor.UntypedActor.aroundReceive(UntypedActor.scala:95)
at akka.actor.ActorCell.receiveMessage(ActorCell.scala:526)
at akka.actor.ActorCell.invoke(ActorCell.scala:495)
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:257)
at akka.dispatch.Mailbox.run(Mailbox.scala:224)
at akka.dispatch.Mailbox.exec(Mailbox.scala:234)
at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;timestamp&quot;:1524106438997,
&lt;span class=&quot;code-quote&quot;&gt;&quot;all-exceptions&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;exception&quot;&lt;/span&gt;:&quot;
org.apache.flink.util.FlinkException: Releasing TaskManager 0d87aa6fa99a6c12e36775b1d6bceb19.
at org.apache.flink.runtime.jobmaster.slotpool.SlotPool.releaseTaskManagerInternal(SlotPool.java:1067)
at org.apache.flink.runtime.jobmaster.slotpool.SlotPool.releaseTaskManager(SlotPool.java:1050)
at sun.reflect.GeneratedMethodAccessor110.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcInvocation(AkkaRpcActor.java:210)
at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleMessage(AkkaRpcActor.java:154)
at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.lambda$onReceive$1(AkkaRpcActor.java:132)
at akka.actor.ActorCell$$anonfun$become$1.applyOrElse(ActorCell.scala:544)
at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundReceive(Actor.scala:502)
at akka.actor.UntypedActor.aroundReceive(UntypedActor.scala:95)
at akka.actor.ActorCell.receiveMessage(ActorCell.scala:526)
at akka.actor.ActorCell.invoke(ActorCell.scala:495)
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:257)
at akka.dispatch.Mailbox.run(Mailbox.scala:224)
at akka.dispatch.Mailbox.exec(Mailbox.scala:234)
at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;task&lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt;async wait &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; (14/20)&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;location&lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt;slave1:60199&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;timestamp&quot;:1524106438996
}],&lt;span class=&quot;code-quote&quot;&gt;&quot;truncated&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13153571">FLINK-9215</key>
            <summary>TaskManager Releasing  - org.apache.flink.util.FlinkException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sihuazhou">Sihua Zhou</assignee>
                                    <reporter username="bob365">Bob Lau</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Apr 2018 03:24:17 +0000</created>
                <updated>Fri, 25 Oct 2019 09:35:10 +0000</updated>
                            <resolved>Wed, 30 May 2018 13:56:12 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.1</fixVersion>
                    <fixVersion>1.6.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16443651" author="sihuazhou" created="Thu, 19 Apr 2018 07:31:29 +0000"  >&lt;p&gt;I think this is because the log info is confusing when log level is DEBUG, it seems to output the exception info at DEBUG level, maybe it should do that at level TRACE.&lt;/p&gt;</comment>
                            <comment id="16443732" author="githubbot" created="Thu, 19 Apr 2018 08:30:27 +0000"  >&lt;p&gt;GitHub user sihuazhou opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9215&quot; title=&quot;TaskManager Releasing  - org.apache.flink.util.FlinkException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9215&quot;&gt;&lt;del&gt;FLINK-9215&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;resoucemanager&amp;#93;&lt;/span&gt; Only log the exception when log level is TRACE to avoid confusing&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This PR fix the log in `SlotPool#releaseSlot()` to avoid confusing.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Only log the exception when the log level is TRACE in SlothPool#releaseSlot()&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;dd double check in ZooKeeperLeaderRetrievalService#start() to avoid race condition&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This change is a trivial rework / code cleanup without any test coverage.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    no&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    no&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sihuazhou/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/sihuazhou/flink&lt;/a&gt; fixLogForTaskManagerReleasing&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5879&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7afe861ce5161b1157e1889861aeaeeec2456181&lt;br/&gt;
Author: sihuazhou &amp;lt;summerleafs@...&amp;gt;&lt;br/&gt;
Date:   2018-04-19T08:13:58Z&lt;/p&gt;

&lt;p&gt;    Only log the exception when the log level is TRACE in SlothPool#releaseSlot() to avoid confusing.&lt;/p&gt;

&lt;p&gt;commit 06a6ece54b2720abd79d5c0673b12ff5e2e83054&lt;br/&gt;
Author: sihuazhou &amp;lt;summerleafs@...&amp;gt;&lt;br/&gt;
Date:   2018-04-19T08:16:33Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; Add double check in ZooKeeperLeaderRetrievalService#start() to avoid race condition.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16448160" author="githubbot" created="Mon, 23 Apr 2018 13:38:07 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think it is fine that exceptions are logged under debug, it&apos;s just that we use exceptions in the normal life-cycle. I&apos;m wondering if we could replace these kind of exceptions with a special `ExpectedLifecycleException?`  or similar that overrides `printStackTrace` to only contain the message.&lt;/p&gt;</comment>
                            <comment id="16448172" author="githubbot" created="Mon, 23 Apr 2018 13:46:22 +0000"  >&lt;p&gt;Github user sihuazhou commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @zentol Thanks for you reply, I prefer the way to introduce a `ExpectedLifecycleException`, I think maybe it could be used in some other places in the future. Addressing this...&lt;/p&gt;</comment>
                            <comment id="16448212" author="githubbot" created="Mon, 23 Apr 2018 14:24:32 +0000"  >&lt;p&gt;Github user sihuazhou commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @zentol I updated the PR, it&apos;s already for another review.&lt;/p&gt;</comment>
                            <comment id="16451867" author="githubbot" created="Wed, 25 Apr 2018 08:31:23 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879#discussion_r183978047&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879#discussion_r183978047&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/leaderretrieval/ZooKeeperLeaderRetrievalService.java &amp;#8212;&lt;br/&gt;
    @@ -100,6 +100,12 @@ public void start(LeaderRetrievalListener listener) throws Exception {&lt;br/&gt;
     		LOG.info(&quot;Starting ZooKeeperLeaderRetrievalService {}.&quot;, retrievalPath);&lt;/p&gt;

&lt;p&gt;     		synchronized (lock) {&lt;br/&gt;
    +			// A double check for the race condition that multi invocation on this method&lt;br/&gt;
    +			// could pass the first checkState() and wait on the lock, then they can all reset&lt;br/&gt;
    +			// the leaderListener.&lt;br/&gt;
    +			Preconditions.checkState(leaderListener == null, &quot;ZooKeeperLeaderRetrievalService can &quot; +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This change is unrelated?&lt;/p&gt;</comment>
                            <comment id="16451873" author="githubbot" created="Wed, 25 Apr 2018 08:35:35 +0000"  >&lt;p&gt;Github user sihuazhou commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879#discussion_r183979668&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879#discussion_r183979668&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/leaderretrieval/ZooKeeperLeaderRetrievalService.java &amp;#8212;&lt;br/&gt;
    @@ -100,6 +100,12 @@ public void start(LeaderRetrievalListener listener) throws Exception {&lt;br/&gt;
     		LOG.info(&quot;Starting ZooKeeperLeaderRetrievalService {}.&quot;, retrievalPath);&lt;/p&gt;

&lt;p&gt;     		synchronized (lock) {&lt;br/&gt;
    +			// A double check for the race condition that multi invocation on this method&lt;br/&gt;
    +			// could pass the first checkState() and wait on the lock, then they can all reset&lt;br/&gt;
    +			// the leaderListener.&lt;br/&gt;
    +			Preconditions.checkState(leaderListener == null, &quot;ZooKeeperLeaderRetrievalService can &quot; +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Ah, this is a hotfix...I would like to pull it out into another new PR if you object it here...&lt;/p&gt;</comment>
                            <comment id="16451875" author="githubbot" created="Wed, 25 Apr 2018 08:37:07 +0000"  >&lt;p&gt;Github user sihuazhou commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879#discussion_r183980094&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879#discussion_r183980094&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/leaderretrieval/ZooKeeperLeaderRetrievalService.java &amp;#8212;&lt;br/&gt;
    @@ -100,6 +100,12 @@ public void start(LeaderRetrievalListener listener) throws Exception {&lt;br/&gt;
     		LOG.info(&quot;Starting ZooKeeperLeaderRetrievalService {}.&quot;, retrievalPath);&lt;/p&gt;

&lt;p&gt;     		synchronized (lock) {&lt;br/&gt;
    +			// A double check for the race condition that multi invocation on this method&lt;br/&gt;
    +			// could pass the first checkState() and wait on the lock, then they can all reset&lt;br/&gt;
    +			// the leaderListener.&lt;br/&gt;
    +			Preconditions.checkState(leaderListener == null, &quot;ZooKeeperLeaderRetrievalService can &quot; +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    @zentol what do you think?&lt;/p&gt;</comment>
                            <comment id="16451881" author="githubbot" created="Wed, 25 Apr 2018 08:41:04 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879#discussion_r183981216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879#discussion_r183981216&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/leaderretrieval/ZooKeeperLeaderRetrievalService.java &amp;#8212;&lt;br/&gt;
    @@ -100,6 +100,12 @@ public void start(LeaderRetrievalListener listener) throws Exception {&lt;br/&gt;
     		LOG.info(&quot;Starting ZooKeeperLeaderRetrievalService {}.&quot;, retrievalPath);&lt;/p&gt;

&lt;p&gt;     		synchronized (lock) {&lt;br/&gt;
    +			// A double check for the race condition that multi invocation on this method&lt;br/&gt;
    +			// could pass the first checkState() and wait on the lock, then they can all reset&lt;br/&gt;
    +			// the leaderListener.&lt;br/&gt;
    +			Preconditions.checkState(leaderListener == null, &quot;ZooKeeperLeaderRetrievalService can &quot; +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    eh it&apos;s fine. I missed that it was in a separate commit.&lt;/p&gt;</comment>
                            <comment id="16467181" author="githubbot" created="Tue, 8 May 2018 10:01:11 +0000"  >&lt;p&gt;Github user sihuazhou commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @zentol , will this PR go into 1.5? I think the log seems to be a bit noise currently when we diagnosing the job.&lt;/p&gt;</comment>
                            <comment id="16469036" author="githubbot" created="Wed, 9 May 2018 16:27:04 +0000"  >&lt;p&gt;Github user sihuazhou commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    cc @tillrohrmann &lt;/p&gt;</comment>
                            <comment id="16473488" author="githubbot" created="Sun, 13 May 2018 13:44:30 +0000"  >&lt;p&gt;Github user sihuazhou commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    cc @StephanEwen &lt;/p&gt;</comment>
                            <comment id="16473624" author="githubbot" created="Sun, 13 May 2018 20:21:41 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the contribution @sihuazhou. You&apos;re right that the log output of the `SlotPool` component is a bit too noisy and should not log the full stack trace in the happy case. What about not logging the stack traces at all and simply logging the exception messages instead?&lt;/p&gt;</comment>
                            <comment id="16473757" author="githubbot" created="Mon, 14 May 2018 04:17:16 +0000"  >&lt;p&gt;Github user sihuazhou commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @tillrohrmann , thanks for your reply, @zentol proposed to introduce a `normal-life-cycle exception` in his previous review, the `normal-left-cycle exception` would only log the exception messages when we try to log it. In that way, we could only log the exception message for happy case and log the stack trace for unhappy case, the changes has been covered in this PR, what do you think of that way? Or do you think I should revert it and just simply logging the exception message?&lt;/p&gt;</comment>
                            <comment id="16474023" author="githubbot" created="Mon, 14 May 2018 10:32:08 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @sihuazhou I&apos;m actually no longer sure whether sending exceptions as causes along with the RPC messages was the best decision. Exceptions signal an exceptional situation and should not occur in the happy case.&lt;/p&gt;

&lt;p&gt;    Therefore, I&apos;m a bit hesitant to introduce this special `normal-life-cycle-exception` because they should not exist in the first place since it is the normal life cycle. Instead, I think we should log the exception where they occur and send a `String reason` which can be logged on the remote component. That way we should get rid of most of the exceptions being printed on `DEBUG`.&lt;/p&gt;

&lt;p&gt;    As a first step to get there, I think it would be enough to simply print the exception message in the log statement. That way we would get rid of the stack traces and don&apos;t have to introduce a special exception type. As a second step, we can refactor the RPC interfaces which have the `Exception cause` parameters. What do you think?&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9277&quot; title=&quot;Reduce noisiness of SlotPool logging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9277&quot;&gt;&lt;del&gt;FLINK-9277&lt;/del&gt;&lt;/a&gt; is related but not directly the same. The scope of this issue is to decrease the redundant messages which occur when releasing a shared slot starting from the leafs.&lt;/p&gt;</comment>
                            <comment id="16474158" author="githubbot" created="Mon, 14 May 2018 13:03:00 +0000"  >&lt;p&gt;Github user sihuazhou commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tillrohrmann I think would be enough to simply print the exception message in the log, if we will refactor the PRC as a second step. Will update the PR.&lt;/p&gt;</comment>
                            <comment id="16474182" author="githubbot" created="Mon, 14 May 2018 13:17:15 +0000"  >&lt;p&gt;Github user sihuazhou commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tillrohrmann I updated the PR, could you please have a look again?&lt;/p&gt;</comment>
                            <comment id="16476040" author="githubbot" created="Tue, 15 May 2018 15:45:46 +0000"  >&lt;p&gt;Github user sihuazhou commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Could anyone have a look at this? A minor change that would only effects the log...absolutely won&apos;t cause any regression problem, but would be helpful when user diagnosing the job according to the log...&lt;/p&gt;</comment>
                            <comment id="16495143" author="githubbot" created="Wed, 30 May 2018 13:21:28 +0000"  >&lt;p&gt;Github user dawidwys commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879#discussion_r191764153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879#discussion_r191764153&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/jobgraph/JobVertex.java &amp;#8212;&lt;br/&gt;
    @@ -304,7 +305,8 @@ public int getMaxParallelism() {&lt;br/&gt;
     	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Sets the maximum parallelism for the task.&lt;br/&gt;
     	 *&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @param maxParallelism The maximum parallelism to be set. must be between 1 and Short.MAX_VALUE.&lt;br/&gt;
    +	 * @param maxParallelism The maximum parallelism to be set.&lt;br/&gt;
    +	 *                       Must be between 1 and 
{@link KeyGroupRangeAssignment#UPPER_BOUND_MAX_PARALLELISM}
&lt;p&gt;.&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Unrelated change. Will remove while merging, if you are ok with it @sihuazhou .&lt;/p&gt;</comment>
                            <comment id="16495146" author="githubbot" created="Wed, 30 May 2018 13:22:46 +0000"  >&lt;p&gt;Github user dawidwys commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @sihuazhou for the contribution. LGTM for me though I would remove the unrelated change if it is ok with you.&lt;/p&gt;</comment>
                            <comment id="16495150" author="githubbot" created="Wed, 30 May 2018 13:25:03 +0000"  >&lt;p&gt;Github user sihuazhou commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @dawidwys It&apos;s ok with me, the unrelated change should be a minor java doc hot fix.&lt;/p&gt;</comment>
                            <comment id="16495183" author="githubbot" created="Wed, 30 May 2018 13:46:09 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5879&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16495193" author="dawidwys" created="Wed, 30 May 2018 13:55:54 +0000"  >&lt;p&gt;Closed in 1.5.1 via: e1cce3634e09726d7cadd81bab25da288dc0ba49&lt;/p&gt;

&lt;p&gt;Closed in 1.6 via: 69135e933f6ac575ff12ef0390b9754a87c5bca2&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13156159">FLINK-9277</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sqt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>