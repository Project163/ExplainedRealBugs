<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:40:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-13378] Fix SINGLE_VALUE is not correctly supported in blink planner</title>
                <link>https://issues.apache.org/jira/browse/FLINK-13378</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;There some problem in SingleValueAggFunction:&lt;/p&gt;

&lt;p&gt;1.The comment in the method is &quot;value = count == 0 ? exception : operand(0)&quot;, but actually it need to be &quot;value = count &amp;gt; 0 ? exception : operand(0)&quot; according to the code and logic.&lt;/p&gt;

&lt;p&gt;2.The throwException expression should&#160;call(THROW_EXCEPTION, literal(msg), typeLiteral(type)).&lt;/p&gt;

&lt;p&gt;And there are some bugs to support it in blink-planner:&lt;/p&gt;

&lt;p&gt;1.RexNodeConverter lack converter for THROW_EXCEPTION&lt;/p&gt;

&lt;p&gt;2.PlannerExpressions lack expr to support type inference for&#160;THROW_EXCEPTION&lt;/p&gt;</description>
                <environment></environment>
        <key id="13246504">FLINK-13378</key>
            <summary>Fix SINGLE_VALUE is not correctly supported in blink planner</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lzljs3620320">Jingsong Lee</assignee>
                                    <reporter username="LouisXu777">Louis Xu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 23 Jul 2019 07:42:05 +0000</created>
                <updated>Thu, 1 Aug 2019 10:57:49 +0000</updated>
                            <resolved>Wed, 24 Jul 2019 12:26:32 +0000</resolved>
                                    <version>1.9.0</version>
                    <version>1.10.0</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16890745" author="louisxu777" created="Tue, 23 Jul 2019 07:43:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt; What do you think? Can you post some material describe this?&lt;/p&gt;</comment>
                            <comment id="16890781" author="lzljs3620320" created="Tue, 23 Jul 2019 08:28:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=LouisXu777&quot; class=&quot;user-hover&quot; rel=&quot;LouisXu777&quot;&gt;LouisXu777&lt;/a&gt;&#160;Thanks for your nice catch. There are bugs now in blink-planner.&lt;/p&gt;

&lt;p&gt;I agree point 1 and point 3. About point 3, you can see SqlThrowExceptionFunction. It should be two args.&lt;/p&gt;

&lt;p&gt;The singleValue Agg is for sql: select * from A where A.f0 &amp;lt; (select B.f0 from B); But there is no cases now.&lt;/p&gt;

&lt;p&gt;If we want to support it, we need solve bugs in&#160;RexNodeConverter and PlannerExpressions. Do you want solve them before 1.9 release?&lt;/p&gt;</comment>
                            <comment id="16890810" author="louisxu777" created="Tue, 23 Jul 2019 09:09:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&#160;I looked at the related code&#65292;found it may be relating to code generation. But now I had not readed the code about code generation. So, if you don&apos;t mind, how about delay it to 1.10?&lt;/p&gt;</comment>
                            <comment id="16890843" author="lzljs3620320" created="Tue, 23 Jul 2019 09:36:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=LouisXu777&quot; class=&quot;user-hover&quot; rel=&quot;LouisXu777&quot;&gt;LouisXu777&lt;/a&gt;&#160;TPCH also have these sql pattern, I think it is a bug that we must solve it in 1.9.0. If you don&apos;t mind, I&apos;ll handle it?&lt;/p&gt;</comment>
                            <comment id="16890908" author="louisxu777" created="Tue, 23 Jul 2019 11:31:37 +0000"  >&lt;p&gt;OK&#65292;it&apos;s good that you will resolve it.&lt;/p&gt;</comment>
                            <comment id="16890935" author="aljoscha" created="Tue, 23 Jul 2019 12:09:15 +0000"  >&lt;p&gt;Could you please change the title of the Issue to reflect what it is actually about? This is not about a wrong comment now, is it?&lt;/p&gt;</comment>
                            <comment id="16890957" author="louisxu777" created="Tue, 23 Jul 2019 12:38:26 +0000"  >&lt;p&gt;Yeah&#65292;would you please help to change the title as you are more familiar about it.&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16890964" author="lzljs3620320" created="Tue, 23 Jul 2019 12:48:52 +0000"  >&lt;p&gt;OK, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=LouisXu777&quot; class=&quot;user-hover&quot; rel=&quot;LouisXu777&quot;&gt;LouisXu777&lt;/a&gt;&#160;Thank you again for your attentiveness.&lt;/p&gt;</comment>
                            <comment id="16890991" author="lzljs3620320" created="Tue, 23 Jul 2019 13:23:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; Can you assign this one to me?&lt;/p&gt;</comment>
                            <comment id="16891809" author="jark" created="Wed, 24 Jul 2019 12:26:32 +0000"  >&lt;p&gt;Fixed in 1.10.0: 759b1d4bcde5d22761caee120f74054c6a4e2325&lt;br/&gt;
Fixed in 1.9.0: 353dd8d8087f12fe155537acc8887831cc776c9b&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04xe0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>