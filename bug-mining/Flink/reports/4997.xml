<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:52:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-19635] HBaseConnectorITCase.testTableSourceSinkWithDDL is unstable with a result mismatch</title>
                <link>https://issues.apache.org/jira/browse/FLINK-19635</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=7562&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=03dca39c-73e8-5aaf-601d-328ae5c35f20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=7562&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=03dca39c-73e8-5aaf-601d-328ae5c35f20&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-10-14T04:35:36.9268975Z testTableSourceSinkWithDDL[planner = BLINK_PLANNER, legacy = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;](org.apache.flink.connector.hbase2.HBaseConnectorITCase)  Time elapsed: 3.131 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
2020-10-14T04:35:36.9276246Z java.lang.AssertionError: expected:&amp;lt;[1,10,Hello-1,100,1.01,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,Welt-1,2019-08-18T19:00,2019-08-18,19:00,12345678.0001, 2,20,Hello-2,200,2.02,&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,Welt-2,2019-08-18T19:01,2019-08-18,19:01,12345678.0002, 3,30,Hello-3,300,3.03,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,Welt-3,2019-08-18T19:02,2019-08-18,19:02,12345678.0003, 4,40,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,400,4.04,&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,Welt-4,2019-08-18T19:03,2019-08-18,19:03,12345678.0004, 5,50,Hello-5,500,5.05,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,Welt-5,2019-08-19T19:10,2019-08-19,19:10,12345678.0005, 6,60,Hello-6,600,6.06,&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,Welt-6,2019-08-19T19:20,2019-08-19,19:20,12345678.0006, 7,70,Hello-7,700,7.07,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,Welt-7,2019-08-19T19:30,2019-08-19,19:30,12345678.0007, 8,80,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,800,8.08,&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,Welt-8,2019-08-19T19:40,2019-08-19,19:40,12345678.0008]&amp;gt; but was:&amp;lt;[1,10,Hello-1,100,1.01,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,Welt-1,2019-08-18T19:00,2019-08-18,19:00,12345678.0001, 2,20,Hello-2,200,2.02,&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,Welt-2,2019-08-18T19:01,2019-08-18,19:01,12345678.0002, 3,30,Hello-3,300,3.03,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,Welt-3,2019-08-18T19:02,2019-08-18,19:02,12345678.0003]&amp;gt;
2020-10-14T04:35:36.9281340Z 	at org.junit.Assert.fail(Assert.java:88)
2020-10-14T04:35:36.9282023Z 	at org.junit.Assert.failNotEquals(Assert.java:834)
2020-10-14T04:35:36.9328385Z 	at org.junit.Assert.assertEquals(Assert.java:118)
2020-10-14T04:35:36.9338939Z 	at org.junit.Assert.assertEquals(Assert.java:144)
2020-10-14T04:35:36.9339880Z 	at org.apache.flink.connector.hbase2.HBaseConnectorITCase.testTableSourceSinkWithDDL(HBaseConnectorITCase.java:449)
2020-10-14T04:35:36.9341003Z 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13335349">FLINK-19635</key>
            <summary>HBaseConnectorITCase.testTableSourceSinkWithDDL is unstable with a result mismatch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="leonard">Leonard Xu</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Wed, 14 Oct 2020 06:21:24 +0000</created>
                <updated>Fri, 28 May 2021 07:08:23 +0000</updated>
                            <resolved>Fri, 15 Jan 2021 02:12:29 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.12.0</fixVersion>
                    <fixVersion>1.13.0</fixVersion>
                                    <component>Connectors / HBase</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17215518" author="rmetzger" created="Fri, 16 Oct 2020 17:08:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=7743&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=03dca39c-73e8-5aaf-601d-328ae5c35f20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=7743&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=03dca39c-73e8-5aaf-601d-328ae5c35f20&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17217353" author="rmetzger" created="Tue, 20 Oct 2020 06:55:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Leonard+Xu&quot; class=&quot;user-hover&quot; rel=&quot;Leonard Xu&quot;&gt;Leonard Xu&lt;/a&gt; can you take a look at this test failure?&lt;/p&gt;</comment>
                            <comment id="17217355" author="rmetzger" created="Tue, 20 Oct 2020 06:55:59 +0000"  >&lt;p&gt;This could be related: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-19615&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-19615&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17217367" author="leonard xu" created="Tue, 20 Oct 2020 07:08:08 +0000"  >&lt;p&gt;Sure, I&apos;ll have a look&lt;/p&gt;</comment>
                            <comment id="17228379" author="leonard xu" created="Mon, 9 Nov 2020 07:20:03 +0000"  >&lt;p&gt;I checked the failed tests in this ticket and&#160; &#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-19615&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-19615&lt;/a&gt;,&lt;br/&gt;
both them happened in &lt;b&gt;hbase2&lt;/b&gt; connector&#65292;thus I doubt the unstable tests may relate to hbase2 testing cluster(HBaseTestingClusterAutoStarter).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgergely&quot; class=&quot;user-hover&quot; rel=&quot;mgergely&quot;&gt;mgergely&lt;/a&gt; Do you have any insight?&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="17233629" author="leonard xu" created="Tue, 17 Nov 2020 14:35:15 +0000"  >
&lt;p&gt;04:35:14,975 &lt;span class=&quot;error&quot;&gt;&amp;#91;hbase-upsert-sink-flusher-thread-1&amp;#93;&lt;/span&gt; ERROR org.apache.hadoop.hbase.client.AsyncProcess [] - Failed to get region location org.apache.hadoop.hbase.DoNotRetryIOException: hconnection-0x932344b closed at org.apache.hadoop.hbase.client.ConnectionImplementation.checkClosed(ConnectionImplementation.java:591) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hbase-client-2.2.3.jar:2.2.3&amp;#93;&lt;/span&gt; at org.apache.hadoop.hbase.client.ConnectionImplementation.locateRegion(ConnectionImplementation.java:776) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hbase-client-2.2.3.jar:2.2.3&amp;#93;&lt;/span&gt; at org.apache.hadoop.hbase.client.AsyncProcess.submit(AsyncProcess.java:273) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hbase-client-2.2.3.jar:2.2.3&amp;#93;&lt;/span&gt; at org.apache.hadoop.hbase.client.AsyncProcess.submit(AsyncProcess.java:228) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hbase-client-2.2.3.jar:2.2.3&amp;#93;&lt;/span&gt; at org.apache.hadoop.hbase.client.BufferedMutatorImpl.doFlush(BufferedMutatorImpl.java:303) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hbase-client-2.2.3.jar:2.2.3&amp;#93;&lt;/span&gt; at org.apache.hadoop.hbase.client.BufferedMutatorImpl.flush(BufferedMutatorImpl.java:280) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hbase-client-2.2.3.jar:2.2.3&amp;#93;&lt;/span&gt; at org.apache.flink.connector.hbase.sink.HBaseSinkFunction.flush(HBaseSinkFunction.java:189) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;flink-connector-hbase-base_2.11-1.12-SNAPSHOT.jar:1.12-SNAPSHOT&amp;#93;&lt;/span&gt; at org.apache.flink.connector.hbase.sink.HBaseSinkFunction.lambda$open$0(HBaseSinkFunction.java:134) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;flink-connector-hbase-base_2.11-1.12-SNAPSHOT.jar:1.12-SNAPSHOT&amp;#93;&lt;/span&gt; at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) &lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_242&amp;#93;&lt;/span&gt; at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) &lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_242&amp;#93;&lt;/span&gt; at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) &lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_242&amp;#93;&lt;/span&gt; at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) &lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_242&amp;#93;&lt;/span&gt; at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) &lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_242&amp;#93;&lt;/span&gt; at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) &lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_242&amp;#93;&lt;/span&gt; at java.lang.Thread.run(Thread.java:748) &lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_242&amp;#93;&lt;/span&gt;04:35:14,975 &lt;span class=&quot;error&quot;&gt;&amp;#91;flink-akka.actor.default-dispatcher-4&amp;#93;&lt;/span&gt; INFO org.apache.flink.runtime.taskexecutor.TaskExecutor [] - Un-registering task and sending final execution state FINISHED to JobManager for task Source: TableSourceScan(table=[&lt;span class=&quot;error&quot;&gt;&amp;#91;default_catalog, default_database, testTable1&amp;#93;&lt;/span&gt;], fields=&lt;span class=&quot;error&quot;&gt;&amp;#91;rowkey, family1, family2, family3, family4&amp;#93;&lt;/span&gt;) -&amp;gt; Sink: Sink(table=&lt;span class=&quot;error&quot;&gt;&amp;#91;default_catalog.default_database.testTable3&amp;#93;&lt;/span&gt;, fields=&lt;span class=&quot;error&quot;&gt;&amp;#91;rowkey, family1, family2, family3, family4&amp;#93;&lt;/span&gt;) (1/32) 65f7b61a1994ee9b341a2a7f5c6cca3a_cbc357ccb763df2852fee8c4fc7d55f2_0_0.04:35:14,976 &lt;span class=&quot;error&quot;&gt;&amp;#91;flink-akka.actor.default-dispatcher-4&amp;#93;&lt;/span&gt; INFO org.apache.flink.runtime.executiongraph.ExecutionGraph [] - Source: TableSourceScan(table=[&lt;span class=&quot;error&quot;&gt;&amp;#91;default_catalog, default_database, testTable1&amp;#93;&lt;/span&gt;], fields=&lt;span class=&quot;error&quot;&gt;&amp;#91;rowkey, family1, family2, family3, family4&amp;#93;&lt;/span&gt;) -&amp;gt; Sink: Sink(table=&lt;span class=&quot;error&quot;&gt;&amp;#91;default_catalog.default_database.testTable3&amp;#93;&lt;/span&gt;, fields=&lt;span class=&quot;error&quot;&gt;&amp;#91;rowkey, family1, family2, family3, family4&amp;#93;&lt;/span&gt;) (1/32) (65f7b61a1994ee9b341a2a7f5c6cca3a_cbc357ccb763df2852fee8c4fc7d55f2_0_0) switched from RUNNING to FINISHED.04:35:14,986 &lt;span class=&quot;error&quot;&gt;&amp;#91;RS-EventLoopGroup-3-54&amp;#93;&lt;/span&gt; INFO SecurityLogger.org.apache.hadoop.hbase.Server &lt;br/&gt;
 [] - Connection from 192.168.192.2:49496, version=2.2.3, sasl=false, ugi=agent01_azpcontainer (auth:SIMPLE), service=ClientService04:35:15,016 [ htable-pool146-t1] WARN org.apache.hadoop.hbase.client.AsyncRequestFutureImpl [] - id=175, table=testTable3, attempt=1/16, failureCount=1ops, last exception=org.apache.hadoop.hbase.DoNotRetryIOException: hconnection-0x932344b closed on 295934f72d17,36709,1602650080067, tracking started Wed Oct 14 04:35:14 UTC 2020; &lt;b&gt;NOT retrying, failed=1 &#8211; final attempt!&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;from the failed log, I think the mismatch result is because one of the sink task failed to scan the data, we set the&#160;&lt;b&gt;hbase.client.retries.number&lt;/b&gt; to &quot;&lt;b&gt;1&lt;/b&gt;&quot; which means do not retry, but the default value in hbase-1.4 is &quot;&lt;b&gt;35&lt;/b&gt;&quot; and in hbase-2.2 is &quot;&lt;b&gt;15&lt;/b&gt;&quot;, so we should at least allow the hbase client do retry.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17234372" author="jark" created="Wed, 18 Nov 2020 08:48:43 +0000"  >&lt;p&gt;Fixed in master (1.12.0): 7ae2be5167b4b143d3aaef2b9bc58faadc2d3a26&lt;/p&gt;</comment>
                            <comment id="17256282" author="hxbks2ks" created="Wed, 30 Dec 2020 04:41:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11476&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=03dca39c-73e8-5aaf-601d-328ae5c35f20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11476&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=03dca39c-73e8-5aaf-601d-328ae5c35f20&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The failed case happened again. Do we reopen this issue?&lt;/p&gt;</comment>
                            <comment id="17256332" author="leonard xu" created="Wed, 30 Dec 2020 06:54:29 +0000"  >&lt;p&gt;oops, let me reopen this&lt;/p&gt;</comment>
                            <comment id="17260379" author="hxbks2ks" created="Thu, 7 Jan 2021 10:23:08 +0000"  >&lt;p&gt;another instance&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11714&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=03dca39c-73e8-5aaf-601d-328ae5c35f20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11714&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=03dca39c-73e8-5aaf-601d-328ae5c35f20&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17265624" author="jark" created="Fri, 15 Jan 2021 02:12:30 +0000"  >&lt;p&gt;Fixed in master: 8a8e769228176d90678f58eac66bef63ec82fc7f&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0joqw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>