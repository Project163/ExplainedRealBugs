<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:58:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-18685] JobClient.getAccumulators() blocks until streaming job has finished in local environment</title>
                <link>https://issues.apache.org/jira/browse/FLINK-18685</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;b&gt;Steps to reproduce:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JobClient client = env.executeAsync(&lt;span class=&quot;code-quote&quot;&gt;&quot;Test&quot;&lt;/span&gt;);

CompletableFuture&amp;lt;JobStatus&amp;gt; status = client.getJobStatus();
LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;status = &quot;&lt;/span&gt; + status.get());

CompletableFuture&amp;lt;Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;&amp;gt; accumulators = client.getAccumulators(StreamingJob.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getClassLoader());
LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;accus = &quot;&lt;/span&gt; + accumulators.get(5, TimeUnit.SECONDS));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Actual behavior&lt;/b&gt;&lt;br/&gt;
The accumulators future will never complete for a streaming job when calling this just in your main() method from the IDE.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Expected behavior&lt;/b&gt;&lt;br/&gt;
Receive the accumulators of the running streaming job.&lt;br/&gt;
The JavaDocs of the method state the following: &quot;Accumulators can be requested while it is running or after it has finished.&quot;. &lt;br/&gt;
While it is technically true that I can request accumulators, I was expecting as a user that I can access the accumulators of a running job.&lt;br/&gt;
Also, I can request accumulators if I submit the job to a cluster.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13318912">FLINK-18685</key>
            <summary>JobClient.getAccumulators() blocks until streaming job has finished in local environment</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="echauchot">Etienne Chauchot</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>starter</label>
                    </labels>
                <created>Thu, 23 Jul 2020 11:43:18 +0000</created>
                <updated>Fri, 28 May 2021 08:14:37 +0000</updated>
                            <resolved>Wed, 27 Jan 2021 15:11:16 +0000</resolved>
                                    <version>1.11.0</version>
                                    <fixVersion>1.13.0</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17163468" author="rmetzger" created="Thu, 23 Jul 2020 11:44:26 +0000"  >&lt;p&gt;I see two solutions&lt;br/&gt;
a) change the Javadocs&lt;br/&gt;
b) Change the &lt;tt&gt;PerJobMiniClusterJobClient&lt;/tt&gt; to allow accessing the accumulators before the job has finished.&lt;/p&gt;</comment>
                            <comment id="17163560" author="aljoscha" created="Thu, 23 Jul 2020 13:16:20 +0000"  >&lt;p&gt;For me the only option would be to fix the behaviour of the minicluster client. The API is clearly meant for asynchronous use.&lt;/p&gt;</comment>
                            <comment id="17163654" author="rmetzger" created="Thu, 23 Jul 2020 14:53:24 +0000"  >&lt;p&gt;Okay, thanks for confirming the issue. I won&apos;t have time to work on this in the near future.&lt;/p&gt;</comment>
                            <comment id="17177731" author="zhushang" created="Fri, 14 Aug 2020 12:16:45 +0000"  >&lt;p&gt;hi,&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; &lt;br/&gt;
i&apos;m interested in this issue,can you assign to me? thanks&lt;/p&gt;</comment>
                            <comment id="17177732" author="rmetzger" created="Fri, 14 Aug 2020 12:18:14 +0000"  >&lt;p&gt;Thanks. I assigned you.&lt;/p&gt;</comment>
                            <comment id="17178883" author="zhushang" created="Mon, 17 Aug 2020 09:54:56 +0000"  >&lt;p&gt;hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt;, you didn&apos;t assign this to me and have a code review when it is convenient for you.Thanks&lt;/p&gt;</comment>
                            <comment id="17179173" author="rmetzger" created="Mon, 17 Aug 2020 18:50:43 +0000"  >&lt;p&gt;Sorry, I fixed the assignment.&lt;/p&gt;</comment>
                            <comment id="17183813" author="rmetzger" created="Tue, 25 Aug 2020 07:37:14 +0000"  >&lt;p&gt;Just for the record: Some discussion on this ticket has happened here as well: &lt;a href=&quot;https://github.com/apache/flink/pull/13162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/13162&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17240568" author="echauchot" created="Mon, 30 Nov 2020 08:51:00 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; I&apos;d like to take this ticket. I saw that after your change requests in the PR , the author closed the PR. I&apos;d like to get this ticket fixed. Can you assign the ticket to me ?&lt;/p&gt;</comment>
                            <comment id="17242108" author="rmetzger" created="Wed, 2 Dec 2020 07:28:20 +0000"  >&lt;p&gt;Thanks a lot! I assigned you.&lt;/p&gt;</comment>
                            <comment id="17242238" author="echauchot" created="Wed, 2 Dec 2020 10:41:43 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; for the assignment. I&apos;m always glad to help !&lt;/p&gt;</comment>
                            <comment id="17272922" author="rmetzger" created="Wed, 27 Jan 2021 15:11:08 +0000"  >&lt;p&gt;Resolved in &lt;a href=&quot;https://github.com/apache/flink/commit/beae8e7a20dfa915ce02fd3e5186d4b5e71fbbef&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/beae8e7a20dfa915ce02fd3e5186d4b5e71fbbef&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Thanks a lot for the fix Etienne!&lt;/p&gt;</comment>
                            <comment id="17272982" author="echauchot" created="Wed, 27 Jan 2021 16:38:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; my pleasure ! thanks for reviewing/merging&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0h4gw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>