<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:17:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-31763] Convert requested buffers to overdraft  buffers when pool size is decreased</title>
                <link>https://issues.apache.org/jira/browse/FLINK-31763</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;As we discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-31610&quot; title=&quot;Refactoring of LocalBufferPool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-31610&quot;&gt;FLINK-31610&lt;/a&gt;, new buffers can be requested only when &quot;&lt;em&gt;numOfRequestedMemorySegments + numberOfRequestedOverdraftMemorySegments &amp;lt; poolSize + maxOverdraftBuffersPerGate&quot;&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Consider such a scenario, the&#160;&lt;tt&gt;CurrentPoolSize = 5&lt;/tt&gt;,&#160;&lt;tt&gt;numOfRequestedMemorySegments = 7&lt;/tt&gt;,&#160;&lt;tt&gt;maxOverdraftBuffersPerGate = 2&lt;/tt&gt;. If&#160;&lt;tt&gt;numberOfRequestedOverdraftMemorySegments = 0&lt;/tt&gt;, then 2 buffers can be requested now.&#160;&lt;/p&gt;

&lt;p&gt;We should convert &lt;tt&gt;numberOfRequestedMemorySegments&lt;/tt&gt;&#160;to&#160;&lt;tt&gt;numberOfRequestedOverdraftMemorySegments&lt;/tt&gt; when poolSize is decreased. Further more, we can changes the definition of overdraft buffer from static to dynamic:&#160;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;When&#160;&lt;em&gt;numberOfRequestedMemorySegments &amp;lt;= poolSize,&lt;/em&gt;&#160;all buffers are ordinary buffer&lt;/li&gt;
	&lt;li&gt;When&#160;&lt;em&gt;numberOfRequestedMemorySegments &amp;gt; poolSize,&lt;/em&gt;&#160;the `&lt;em&gt;ordinary buffer size = poolSize`&lt;/em&gt;, and `&lt;em&gt;the overdraft buffer size = numberOfRequestedMemorySegments - poolSize`&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This allows us to remove &lt;tt&gt;numberOfRequestedOverdraftMemorySegments&lt;/tt&gt;, which helps us simplify logic and maintain consistency.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13532124">FLINK-31763</key>
            <summary>Convert requested buffers to overdraft  buffers when pool size is decreased</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Weijie Guo">Weijie Guo</assignee>
                                    <reporter username="Weijie Guo">Weijie Guo</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 11 Apr 2023 05:38:29 +0000</created>
                <updated>Mon, 17 Apr 2023 09:29:15 +0000</updated>
                            <resolved>Mon, 17 Apr 2023 09:29:07 +0000</resolved>
                                    <version>1.16.1</version>
                                    <fixVersion>1.16.2</fixVersion>
                    <fixVersion>1.18.0</fixVersion>
                    <fixVersion>1.17.1</fixVersion>
                                    <component>Runtime / Network</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17712986" author="weijie guo" created="Mon, 17 Apr 2023 09:29:07 +0000"  >&lt;p&gt;master(1.18) via ffc6f3bfabd22b49b08f027400c194a8e7c9c51a.&lt;br/&gt;
release-1.17 via be0f9293c2ce00465154ef03f7cef29dd3116b8e.&lt;br/&gt;
release-1.16 via ab2ba9612a6a7f27c2921c7c329b3077ea4c33b2.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13529980">FLINK-31610</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1h79k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>