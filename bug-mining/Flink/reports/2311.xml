<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:32:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8903] Built-in agg functions VAR_POP, VAR_SAMP, STDEV_POP, STDEV_SAMP are broken in Group Windows</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8903</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The built-in aggregation functions VAR_POP, VAR_SAMP, STDEV_POP, STDEV_SAMP are translated into regular AVG functions if they are applied in the context of a Group Window aggregation (&lt;tt&gt;GROUP BY TUMBLE/HOP/SESSION&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;The reason is that these functions are internally represented as &lt;tt&gt;SqlAvgAggFunction&lt;/tt&gt; but with different &lt;tt&gt;SqlKind&lt;/tt&gt;. When translating Calcite aggregation functions to Flink Table agg functions, we only look at the type of the class, not at the value of the &lt;tt&gt;kind&lt;/tt&gt; field. We did not notice that before, because in all other cases (regular &lt;tt&gt;GROUP BY&lt;/tt&gt; without windows or &lt;tt&gt;OVER&lt;/tt&gt; windows, we have a translation rule &lt;tt&gt;AggregateReduceFunctionsRule&lt;/tt&gt; that decomposes the more complex functions into expressions of &lt;tt&gt;COUNT&lt;/tt&gt; and &lt;tt&gt;SUM&lt;/tt&gt; functions such that we never execute an &lt;tt&gt;AVG&lt;/tt&gt; Flink function. That rule can only be applied on &lt;tt&gt;LogicalAggregate&lt;/tt&gt;, however, we represent group windows as &lt;tt&gt;LogicalWindowAggregate&lt;/tt&gt;, so the rule does not match.&lt;/p&gt;

&lt;p&gt;We should fix this by:&lt;br/&gt;
1. restrict the translation to Flink avg functions in &lt;tt&gt;AggregateUtil&lt;/tt&gt; to &lt;tt&gt;SqlKind.AVG&lt;/tt&gt;. &lt;br/&gt;
2. implement a rule (hopefully based on &lt;tt&gt;AggregateReduceFunctionsRule&lt;/tt&gt;) that decomposes the complex agg functions into the &lt;tt&gt;SUM&lt;/tt&gt; and &lt;tt&gt;COUNT&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Step 1. is easy and a quick fix but we would get an exception &quot;Unsupported Function&quot; if &lt;tt&gt;VAR_POP&lt;/tt&gt; is used in a &lt;tt&gt;GROUP BY&lt;/tt&gt; window.&lt;br/&gt;
Step 2. might be more involved, depending on how difficult it is to port the rule.&lt;/p&gt;


&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13143845">FLINK-8903</key>
            <summary>Built-in agg functions VAR_POP, VAR_SAMP, STDEV_POP, STDEV_SAMP are broken in Group Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fhueske">Fabian Hueske</assignee>
                                    <reporter username="lilizhao">lilizhao</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Mar 2018 09:25:39 +0000</created>
                <updated>Thu, 22 Mar 2018 14:27:19 +0000</updated>
                            <resolved>Thu, 22 Mar 2018 14:27:19 +0000</resolved>
                                    <version>1.3.2</version>
                    <version>1.4.2</version>
                    <version>1.5.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16393244" author="fhueske" created="Fri, 9 Mar 2018 17:36:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lilizhao&quot; class=&quot;user-hover&quot; rel=&quot;lilizhao&quot;&gt;lilizhao&lt;/a&gt;, processing time is inherently non-deterministic, i.e., different executions produce different results. You have to use event time if you want more accurate results.&lt;/p&gt;

&lt;p&gt;Closing this issue as &quot;Not a Problem&quot;&lt;/p&gt;</comment>
                            <comment id="16394986" author="lilizhao" created="Mon, 12 Mar 2018 09:27:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhueske&quot; class=&quot;user-hover&quot; rel=&quot;fhueske&quot;&gt;fhueske&lt;/a&gt;&#160;But why the calculated variance is the same as that of the average. I made some examples here. The variance and standard deviation output of processing time and Event Time based on rolling window and sliding window in Table API and SQL API are all the same as average value.&lt;/p&gt;</comment>
                            <comment id="16395009" author="lilizhao" created="Mon, 12 Mar 2018 10:02:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhueske&quot; class=&quot;user-hover&quot; rel=&quot;fhueske&quot;&gt;fhueske&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;A new example:&lt;/p&gt;

&lt;p&gt;SQL = &quot;SELECT VAR_POP (CCNT), COLLECT (CCNT), name, TUMBLE_START (proctime, INTERVAL&apos;1&apos;MINUTE)&quot; +&lt;/p&gt;

&lt;p&gt;&quot;FROM AggTable GROUP BY TUMBLE (proctime, INTERVAL&apos;1&apos;MINUTE), name&quot;;&lt;/p&gt;

&lt;p&gt;Return all values with COLLECT (FieldName) and return the variance with VAR_POP (FieldName).&lt;/p&gt;

&lt;p&gt;The results returned are as follows:&lt;/p&gt;

&lt;p&gt;50.5, {1.0=1, 100.0=1}, Li, 2018-03-12 09:48:00.0&lt;/p&gt;

&lt;p&gt;The input data is 1 and 100, and the calculated variance is 50.5. It is still wrong.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12913989/12913989_QQ%E5%9B%BE%E7%89%8720180312180143.jpg&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16400654" author="fhueske" created="Thu, 15 Mar 2018 16:18:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lilizhao&quot; class=&quot;user-hover&quot; rel=&quot;lilizhao&quot;&gt;lilizhao&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Sorry for being too eager when closing the issue!&lt;br/&gt;
You are right, this is a bug. I reproduced the issue and also found the cause of the bug.&lt;/p&gt;

&lt;p&gt;Let me see, if there&apos;s an easy way to fix it.&lt;br/&gt;
In worst case, we need to disable some of the aggregation functions.&lt;/p&gt;

&lt;p&gt;Best, Fabian&lt;/p&gt;</comment>
                            <comment id="16400925" author="suez1224" created="Thu, 15 Mar 2018 18:36:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhueske&quot; class=&quot;user-hover&quot; rel=&quot;fhueske&quot;&gt;fhueske&lt;/a&gt;, I can help take a look at this issue.&lt;/p&gt;</comment>
                            <comment id="16400963" author="fhueske" created="Thu, 15 Mar 2018 18:59:00 +0000"  >&lt;p&gt;Thanks Shuyi!&lt;/p&gt;

&lt;p&gt;In fact, I was curious how hard it would be to implement a rule and started working on this issue. It was quite easy and the rule seems to work, however, the correct plan is not used. I need to dig deeper into Calcite to figure out what&apos;s going on.&lt;/p&gt;

&lt;p&gt;If you&apos;d like to do that, I can also share my branch and you can finish what I started. Just let me know...&lt;/p&gt;</comment>
                            <comment id="16400990" author="suez1224" created="Thu, 15 Mar 2018 19:22:48 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhueske&quot; class=&quot;user-hover&quot; rel=&quot;fhueske&quot;&gt;fhueske&lt;/a&gt;, please work on it if you are already in the middle. I am just interested as well, and thought you might be busy. The way how the VolcanoPlanner pick the plan might be tricky AFAIR. Let me know if I can help.&lt;/p&gt;</comment>
                            <comment id="16401160" author="githubbot" created="Thu, 15 Mar 2018 21:55:07 +0000"  >&lt;p&gt;GitHub user fhueske opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8903&quot; title=&quot;Built-in agg functions VAR_POP, VAR_SAMP, STDEV_POP, STDEV_SAMP are broken in Group Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8903&quot;&gt;&lt;del&gt;FLINK-8903&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Fix VAR_SAMP, VAR_POP, STDEV_SAMP, STDEV_POP functions on GROUP BY windows.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;Fixes the computation of `VAR_SAMP`, `VAR_POP`, `STDDEV_SAMP`, `STDDEV_POP` aggregations in the context of `GROUP BY` windows (`TUMBLE`, `HOP`, `SESSION`). Right now, these methods are computed as `AVG`.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;copy Calcite&apos;s `AggregateReduceFunctionsRule` to Flink and improve its extensibility&lt;/li&gt;
	&lt;li&gt;add a `WindowAggregateReduceFunctionsRule` based on the copied `AggregateReduceFunctionsRule` to decompose the faulty aggregation functions into `COUNT` and `SUM` functions.&lt;/li&gt;
	&lt;li&gt;add restriction to `FlinkLogicalWindowAggregateConverter` to prevent translation of group window aggregates with failing aggregation functions&lt;/li&gt;
	&lt;li&gt;prevent translation of `VAR_SAMP`, `VAR_POP`, `STDDEV_SAMP`, `STDDEV_POP` in `AggregateUtil`&lt;/li&gt;
	&lt;li&gt;add unit tests (plan validation) for batch (SQL, Table API) and stream (SQL, Table API)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;run the added plan tests&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The serializers: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? *&lt;b&gt;no&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? *&lt;b&gt;n/a&lt;/b&gt;*&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/fhueske/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fhueske/flink&lt;/a&gt; tableVarStddevAggFix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5706&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 517567348b0ec0c23ef0c1dcc05c54a91d5c5671&lt;br/&gt;
Author: Fabian Hueske &amp;lt;fhueske@...&amp;gt;&lt;br/&gt;
Date:   2018-03-15T20:04:00Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8903&quot; title=&quot;Built-in agg functions VAR_POP, VAR_SAMP, STDEV_POP, STDEV_SAMP are broken in Group Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8903&quot;&gt;&lt;del&gt;FLINK-8903&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;table&amp;#93;&lt;/span&gt; Fix VAR_SAMP, VAR_POP, STDEV_SAMP, STDEV_POP functions on GROUP BY windows.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16401280" author="githubbot" created="Thu, 15 Mar 2018 23:54:39 +0000"  >&lt;p&gt;Github user suez1224 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706#discussion_r174965171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706#discussion_r174965171&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/nodes/logical/FlinkLogicalWindowAggregate.scala &amp;#8212;&lt;br/&gt;
    @@ -103,6 +106,19 @@ class FlinkLogicalWindowAggregateConverter&lt;br/&gt;
         FlinkConventions.LOGICAL,&lt;br/&gt;
         &quot;FlinkLogicalWindowAggregateConverter&quot;) {&lt;/p&gt;

&lt;p&gt;    +  override def matches(call: RelOptRuleCall): Boolean = {&lt;br/&gt;
    +    val agg = call.rel(0).asInstanceOf&lt;span class=&quot;error&quot;&gt;&amp;#91;LogicalWindowAggregate&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +&lt;br/&gt;
    +    // we do not support these functions natively&lt;br/&gt;
    +    // they have to be converted using the WindowAggregateReduceFunctionsRule&lt;br/&gt;
    +    val supported = agg.getAggCallList.asScala.map(_.getAggregation.getKind).forall {&lt;br/&gt;
    +      case SqlKind.STDDEV_POP | SqlKind.STDDEV_SAMP | SqlKind.VAR_POP | SqlKind.VAR_SAMP =&amp;gt; false&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    How about AVG and SUM? they are also in AggregateReduceFunctionsRule. Also, I think it&apos;s better to use SqlKind.AVG_AGG_FUNCTIONS.contains() or AggregateReduceFunctionsRule.isReducible() (it&apos;s private now though) here in the case statement. So it will keep consistent if calcite changes.&lt;/p&gt;</comment>
                            <comment id="16401281" author="githubbot" created="Thu, 15 Mar 2018 23:54:39 +0000"  >&lt;p&gt;Github user suez1224 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706#discussion_r174962566&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706#discussion_r174962566&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/java/org/apache/calcite/rel/rules/AggregateReduceFunctionsRule.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,590 @@&lt;br/&gt;
    +/*&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
    + * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
    + * this work for additional information regarding copyright ownership.&lt;br/&gt;
    + * The ASF licenses this file to you under the Apache License, Version 2.0&lt;br/&gt;
    + * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
    + * the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +package org.apache.calcite.rel.rules;&lt;br/&gt;
    +&lt;br/&gt;
    +import org.apache.calcite.plan.RelOptCluster;&lt;br/&gt;
    +import org.apache.calcite.plan.RelOptRule;&lt;br/&gt;
    +import org.apache.calcite.plan.RelOptRuleCall;&lt;br/&gt;
    +import org.apache.calcite.plan.RelOptRuleOperand;&lt;br/&gt;
    +import org.apache.calcite.rel.RelNode;&lt;br/&gt;
    +import org.apache.calcite.rel.core.Aggregate;&lt;br/&gt;
    +import org.apache.calcite.rel.core.AggregateCall;&lt;br/&gt;
    +import org.apache.calcite.rel.core.RelFactories;&lt;br/&gt;
    +import org.apache.calcite.rel.logical.LogicalAggregate;&lt;br/&gt;
    +import org.apache.calcite.rel.type.RelDataType;&lt;br/&gt;
    +import org.apache.calcite.rel.type.RelDataTypeFactory;&lt;br/&gt;
    +import org.apache.calcite.rel.type.RelDataTypeField;&lt;br/&gt;
    +import org.apache.calcite.rex.RexBuilder;&lt;br/&gt;
    +import org.apache.calcite.rex.RexLiteral;&lt;br/&gt;
    +import org.apache.calcite.rex.RexNode;&lt;br/&gt;
    +import org.apache.calcite.sql.SqlAggFunction;&lt;br/&gt;
    +import org.apache.calcite.sql.SqlKind;&lt;br/&gt;
    +import org.apache.calcite.sql.fun.SqlStdOperatorTable;&lt;br/&gt;
    +import org.apache.calcite.sql.type.SqlTypeUtil;&lt;br/&gt;
    +import org.apache.calcite.tools.RelBuilder;&lt;br/&gt;
    +import org.apache.calcite.tools.RelBuilderFactory;&lt;br/&gt;
    +import org.apache.calcite.util.CompositeList;&lt;br/&gt;
    +import org.apache.calcite.util.ImmutableIntList;&lt;br/&gt;
    +import org.apache.calcite.util.Util;&lt;br/&gt;
    +&lt;br/&gt;
    +import com.google.common.collect.ImmutableList;&lt;br/&gt;
    +import com.google.common.collect.Lists;&lt;br/&gt;
    +import com.google.common.collect.Maps;&lt;br/&gt;
    +&lt;br/&gt;
    +import java.math.BigDecimal;&lt;br/&gt;
    +import java.util.ArrayList;&lt;br/&gt;
    +import java.util.Collections;&lt;br/&gt;
    +import java.util.List;&lt;br/&gt;
    +import java.util.Map;&lt;br/&gt;
    +&lt;br/&gt;
    +/*&lt;br/&gt;
    + * THIS FILE HAS BEEN COPIED FROM THE APACHE CALCITE PROJECT TO MAKE IT MORE EXTENSIBLE.&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I think we should create a Calcite JIRA to allow AggregateReduceFunctionsRule in Calcite to support this extension, document the JIRA ticket here. And remove this overwrite once Calcite is upgraded. What do you think?&lt;/p&gt;</comment>
                            <comment id="16401737" author="githubbot" created="Fri, 16 Mar 2018 10:58:45 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706#discussion_r175055646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706#discussion_r175055646&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/java/org/apache/calcite/rel/rules/AggregateReduceFunctionsRule.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,590 @@&lt;br/&gt;
    +/*&lt;br/&gt;
    + * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
    + * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
    + * this work for additional information regarding copyright ownership.&lt;br/&gt;
    + * The ASF licenses this file to you under the Apache License, Version 2.0&lt;br/&gt;
    + * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
    + * the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    + * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    + * See the License for the specific language governing permissions and&lt;br/&gt;
    + * limitations under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +package org.apache.calcite.rel.rules;&lt;br/&gt;
    +&lt;br/&gt;
    +import org.apache.calcite.plan.RelOptCluster;&lt;br/&gt;
    +import org.apache.calcite.plan.RelOptRule;&lt;br/&gt;
    +import org.apache.calcite.plan.RelOptRuleCall;&lt;br/&gt;
    +import org.apache.calcite.plan.RelOptRuleOperand;&lt;br/&gt;
    +import org.apache.calcite.rel.RelNode;&lt;br/&gt;
    +import org.apache.calcite.rel.core.Aggregate;&lt;br/&gt;
    +import org.apache.calcite.rel.core.AggregateCall;&lt;br/&gt;
    +import org.apache.calcite.rel.core.RelFactories;&lt;br/&gt;
    +import org.apache.calcite.rel.logical.LogicalAggregate;&lt;br/&gt;
    +import org.apache.calcite.rel.type.RelDataType;&lt;br/&gt;
    +import org.apache.calcite.rel.type.RelDataTypeFactory;&lt;br/&gt;
    +import org.apache.calcite.rel.type.RelDataTypeField;&lt;br/&gt;
    +import org.apache.calcite.rex.RexBuilder;&lt;br/&gt;
    +import org.apache.calcite.rex.RexLiteral;&lt;br/&gt;
    +import org.apache.calcite.rex.RexNode;&lt;br/&gt;
    +import org.apache.calcite.sql.SqlAggFunction;&lt;br/&gt;
    +import org.apache.calcite.sql.SqlKind;&lt;br/&gt;
    +import org.apache.calcite.sql.fun.SqlStdOperatorTable;&lt;br/&gt;
    +import org.apache.calcite.sql.type.SqlTypeUtil;&lt;br/&gt;
    +import org.apache.calcite.tools.RelBuilder;&lt;br/&gt;
    +import org.apache.calcite.tools.RelBuilderFactory;&lt;br/&gt;
    +import org.apache.calcite.util.CompositeList;&lt;br/&gt;
    +import org.apache.calcite.util.ImmutableIntList;&lt;br/&gt;
    +import org.apache.calcite.util.Util;&lt;br/&gt;
    +&lt;br/&gt;
    +import com.google.common.collect.ImmutableList;&lt;br/&gt;
    +import com.google.common.collect.Lists;&lt;br/&gt;
    +import com.google.common.collect.Maps;&lt;br/&gt;
    +&lt;br/&gt;
    +import java.math.BigDecimal;&lt;br/&gt;
    +import java.util.ArrayList;&lt;br/&gt;
    +import java.util.Collections;&lt;br/&gt;
    +import java.util.List;&lt;br/&gt;
    +import java.util.Map;&lt;br/&gt;
    +&lt;br/&gt;
    +/*&lt;br/&gt;
    + * THIS FILE HAS BEEN COPIED FROM THE APACHE CALCITE PROJECT TO MAKE IT MORE EXTENSIBLE.&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Yes, I agree. I would be much better to have this in code in Calcite. &lt;br/&gt;
    However, the changes are very Flink specific (we need to add a few fields to the projection).&lt;br/&gt;
    OTOH its just moving some code in a protected function, so no change in functionality and only few lines touched.&lt;/p&gt;

&lt;p&gt;    I&apos;ll create a JIRA in Calcite and reference the issue. In case, Calcite does not want the change, we can keep the class in Flink.&lt;/p&gt;</comment>
                            <comment id="16401746" author="githubbot" created="Fri, 16 Mar 2018 11:03:52 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706#discussion_r175056688&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706#discussion_r175056688&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/nodes/logical/FlinkLogicalWindowAggregate.scala &amp;#8212;&lt;br/&gt;
    @@ -103,6 +106,19 @@ class FlinkLogicalWindowAggregateConverter&lt;br/&gt;
         FlinkConventions.LOGICAL,&lt;br/&gt;
         &quot;FlinkLogicalWindowAggregateConverter&quot;) {&lt;/p&gt;

&lt;p&gt;    +  override def matches(call: RelOptRuleCall): Boolean = {&lt;br/&gt;
    +    val agg = call.rel(0).asInstanceOf&lt;span class=&quot;error&quot;&gt;&amp;#91;LogicalWindowAggregate&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +&lt;br/&gt;
    +    // we do not support these functions natively&lt;br/&gt;
    +    // they have to be converted using the WindowAggregateReduceFunctionsRule&lt;br/&gt;
    +    val supported = agg.getAggCallList.asScala.map(_.getAggregation.getKind).forall {&lt;br/&gt;
    +      case SqlKind.STDDEV_POP | SqlKind.STDDEV_SAMP | SqlKind.VAR_POP | SqlKind.VAR_SAMP =&amp;gt; false&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    We have a built-in function for AVG (which we don&apos;t really need anymore) and SUM, so we could translate such plans.&lt;br/&gt;
    But I agree, using SqlKind.AVG_AGG_FUNCTIONS.contains() is better.&lt;/p&gt;</comment>
                            <comment id="16402332" author="githubbot" created="Fri, 16 Mar 2018 18:37:16 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Updated the PR with the Calcite issue. &lt;/p&gt;</comment>
                            <comment id="16402335" author="githubbot" created="Fri, 16 Mar 2018 18:38:24 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706#discussion_r175181100&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706#discussion_r175181100&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/nodes/logical/FlinkLogicalWindowAggregate.scala &amp;#8212;&lt;br/&gt;
    @@ -103,6 +106,19 @@ class FlinkLogicalWindowAggregateConverter&lt;br/&gt;
         FlinkConventions.LOGICAL,&lt;br/&gt;
         &quot;FlinkLogicalWindowAggregateConverter&quot;) {&lt;/p&gt;

&lt;p&gt;    +  override def matches(call: RelOptRuleCall): Boolean = {&lt;br/&gt;
    +    val agg = call.rel(0).asInstanceOf&lt;span class=&quot;error&quot;&gt;&amp;#91;LogicalWindowAggregate&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +&lt;br/&gt;
    +    // we do not support these functions natively&lt;br/&gt;
    +    // they have to be converted using the WindowAggregateReduceFunctionsRule&lt;br/&gt;
    +    val supported = agg.getAggCallList.asScala.map(_.getAggregation.getKind).forall {&lt;br/&gt;
    +      case SqlKind.STDDEV_POP | SqlKind.STDDEV_SAMP | SqlKind.VAR_POP | SqlKind.VAR_SAMP =&amp;gt; false&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Replacing the current code by `SqlKind.AVG_AGG_FUNCTIONS.contains()` lead to several test failures. These tests expected an `AVG` aggregation function that was now replaced by `SUM / COUNT`.&lt;/p&gt;</comment>
                            <comment id="16402345" author="githubbot" created="Fri, 16 Mar 2018 18:49:30 +0000"  >&lt;p&gt;Github user suez1224 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706#discussion_r175183811&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706#discussion_r175183811&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/nodes/logical/FlinkLogicalWindowAggregate.scala &amp;#8212;&lt;br/&gt;
    @@ -103,6 +106,19 @@ class FlinkLogicalWindowAggregateConverter&lt;br/&gt;
         FlinkConventions.LOGICAL,&lt;br/&gt;
         &quot;FlinkLogicalWindowAggregateConverter&quot;) {&lt;/p&gt;

&lt;p&gt;    +  override def matches(call: RelOptRuleCall): Boolean = {&lt;br/&gt;
    +    val agg = call.rel(0).asInstanceOf&lt;span class=&quot;error&quot;&gt;&amp;#91;LogicalWindowAggregate&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +&lt;br/&gt;
    +    // we do not support these functions natively&lt;br/&gt;
    +    // they have to be converted using the WindowAggregateReduceFunctionsRule&lt;br/&gt;
    +    val supported = agg.getAggCallList.asScala.map(_.getAggregation.getKind).forall {&lt;br/&gt;
    +      case SqlKind.STDDEV_POP | SqlKind.STDDEV_SAMP | SqlKind.VAR_POP | SqlKind.VAR_SAMP =&amp;gt; false&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    How about SqlKink.AVG_AGG_FUNCTIONS.contains(kind) &amp;amp;&amp;amp; kind != SqlKind.SUM &amp;amp;&amp;amp; kind != SqlKind.AVG?&lt;/p&gt;</comment>
                            <comment id="16402691" author="githubbot" created="Fri, 16 Mar 2018 22:37:54 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706#discussion_r175230116&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706#discussion_r175230116&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/nodes/logical/FlinkLogicalWindowAggregate.scala &amp;#8212;&lt;br/&gt;
    @@ -103,6 +106,19 @@ class FlinkLogicalWindowAggregateConverter&lt;br/&gt;
         FlinkConventions.LOGICAL,&lt;br/&gt;
         &quot;FlinkLogicalWindowAggregateConverter&quot;) {&lt;/p&gt;

&lt;p&gt;    +  override def matches(call: RelOptRuleCall): Boolean = {&lt;br/&gt;
    +    val agg = call.rel(0).asInstanceOf&lt;span class=&quot;error&quot;&gt;&amp;#91;LogicalWindowAggregate&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +&lt;br/&gt;
    +    // we do not support these functions natively&lt;br/&gt;
    +    // they have to be converted using the WindowAggregateReduceFunctionsRule&lt;br/&gt;
    +    val supported = agg.getAggCallList.asScala.map(_.getAggregation.getKind).forall {&lt;br/&gt;
    +      case SqlKind.STDDEV_POP | SqlKind.STDDEV_SAMP | SqlKind.VAR_POP | SqlKind.VAR_SAMP =&amp;gt; false&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    sounds good to me. Will update the PR&lt;/p&gt;</comment>
                            <comment id="16403095" author="githubbot" created="Fri, 16 Mar 2018 23:09:18 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    updated PR&lt;/p&gt;</comment>
                            <comment id="16404070" author="githubbot" created="Sun, 18 Mar 2018 17:40:12 +0000"  >&lt;p&gt;Github user walterddr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706#discussion_r175296744&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706#discussion_r175296744&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/nodes/logical/FlinkLogicalWindowAggregate.scala &amp;#8212;&lt;br/&gt;
    @@ -103,6 +106,22 @@ class FlinkLogicalWindowAggregateConverter&lt;br/&gt;
         FlinkConventions.LOGICAL,&lt;br/&gt;
         &quot;FlinkLogicalWindowAggregateConverter&quot;) {&lt;/p&gt;

&lt;p&gt;    +  override def matches(call: RelOptRuleCall): Boolean = {&lt;br/&gt;
    +    val agg = call.rel(0).asInstanceOf&lt;span class=&quot;error&quot;&gt;&amp;#91;LogicalWindowAggregate&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +&lt;br/&gt;
    +    // we do not support these functions natively&lt;br/&gt;
    +    // they have to be converted using the WindowAggregateReduceFunctionsRule&lt;br/&gt;
    +    val supported = agg.getAggCallList.asScala.map(_.getAggregation.getKind).forall &lt;/p&gt;
{
    +      // we support AVG
    +      case SqlKind.AVG =&amp;gt; true
    +      // but none of the other AVG agg functions
    +      case k if SqlKind.AVG_AGG_FUNCTIONS.contains(k) =&amp;gt; false
    +      case _ =&amp;gt; true
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    !agg.containsDistinctCall() &amp;amp;&amp;amp; supported&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    shouldn&apos;t the logical rule supports distinct call here? It seems like previously the error were thrown on the `DataSetWindowAggregateRule` and `DataStreamWindowAggregateRule` respectively. Any chance we can add a unit-test to further clarify this change?&lt;/p&gt;
</comment>
                            <comment id="16406085" author="githubbot" created="Tue, 20 Mar 2018 10:29:10 +0000"  >&lt;p&gt;Github user fhueske commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706#discussion_r175716765&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706#discussion_r175716765&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/nodes/logical/FlinkLogicalWindowAggregate.scala &amp;#8212;&lt;br/&gt;
    @@ -103,6 +106,22 @@ class FlinkLogicalWindowAggregateConverter&lt;br/&gt;
         FlinkConventions.LOGICAL,&lt;br/&gt;
         &quot;FlinkLogicalWindowAggregateConverter&quot;) {&lt;/p&gt;

&lt;p&gt;    +  override def matches(call: RelOptRuleCall): Boolean = {&lt;br/&gt;
    +    val agg = call.rel(0).asInstanceOf&lt;span class=&quot;error&quot;&gt;&amp;#91;LogicalWindowAggregate&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +&lt;br/&gt;
    +    // we do not support these functions natively&lt;br/&gt;
    +    // they have to be converted using the WindowAggregateReduceFunctionsRule&lt;br/&gt;
    +    val supported = agg.getAggCallList.asScala.map(_.getAggregation.getKind).forall &lt;/p&gt;
{
    +      // we support AVG
    +      case SqlKind.AVG =&amp;gt; true
    +      // but none of the other AVG agg functions
    +      case k if SqlKind.AVG_AGG_FUNCTIONS.contains(k) =&amp;gt; false
    +      case _ =&amp;gt; true
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    !agg.containsDistinctCall() &amp;amp;&amp;amp; supported&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Hmm, that&apos;s a good point. &lt;br/&gt;
    In fact, there won&apos;t be any plan with a `DISTINCT` aggregation in a `LogicalWindowAggregate` because `LogicalWindowAggregateRule` prevents translation of (`Calc(TUMBLE) -&amp;gt; Aggregate()`) into (`WindowAggregate(TUMBLE)`) if there is a distinct aggregate. This prevents window aggregates in SQL queries being translated into `WindowAggregate`. The Table API does not even have an API to define such queries.&lt;/p&gt;

&lt;p&gt;    So, I&apos;d simply remove the `containsDistinctCall()` check for now. We should definitely clean this up when we add support for DISTINCT aggregates.&lt;/p&gt;

&lt;p&gt;    @walterddr, are you fine with this?&lt;/p&gt;
</comment>
                            <comment id="16406091" author="githubbot" created="Tue, 20 Mar 2018 10:31:45 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    PR updated&lt;/p&gt;</comment>
                            <comment id="16406559" author="githubbot" created="Tue, 20 Mar 2018 16:05:13 +0000"  >&lt;p&gt;Github user walterddr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706#discussion_r175825522&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706#discussion_r175825522&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-table/src/main/scala/org/apache/flink/table/plan/nodes/logical/FlinkLogicalWindowAggregate.scala &amp;#8212;&lt;br/&gt;
    @@ -103,6 +106,22 @@ class FlinkLogicalWindowAggregateConverter&lt;br/&gt;
         FlinkConventions.LOGICAL,&lt;br/&gt;
         &quot;FlinkLogicalWindowAggregateConverter&quot;) {&lt;/p&gt;

&lt;p&gt;    +  override def matches(call: RelOptRuleCall): Boolean = {&lt;br/&gt;
    +    val agg = call.rel(0).asInstanceOf&lt;span class=&quot;error&quot;&gt;&amp;#91;LogicalWindowAggregate&amp;#93;&lt;/span&gt;&lt;br/&gt;
    +&lt;br/&gt;
    +    // we do not support these functions natively&lt;br/&gt;
    +    // they have to be converted using the WindowAggregateReduceFunctionsRule&lt;br/&gt;
    +    val supported = agg.getAggCallList.asScala.map(_.getAggregation.getKind).forall &lt;/p&gt;
{
    +      // we support AVG
    +      case SqlKind.AVG =&amp;gt; true
    +      // but none of the other AVG agg functions
    +      case k if SqlKind.AVG_AGG_FUNCTIONS.contains(k) =&amp;gt; false
    +      case _ =&amp;gt; true
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    !agg.containsDistinctCall() &amp;amp;&amp;amp; supported&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Yes. This was kinda confusing to me, we should clean this up when adding DISTINCT support. Thanks for the update @fhueske &lt;/p&gt;</comment>
                            <comment id="16407123" author="githubbot" created="Tue, 20 Mar 2018 22:07:18 +0000"  >&lt;p&gt;Github user fhueske commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the feedback everybody!&lt;br/&gt;
    Will merge the PR tomorrow.&lt;/p&gt;</comment>
                            <comment id="16409603" author="githubbot" created="Thu, 22 Mar 2018 14:26:21 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5706&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5706&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16409604" author="fhueske" created="Thu, 22 Mar 2018 14:27:19 +0000"  >&lt;p&gt;Fixed for 1.5.0 with 555e80a089c7d4a5d2d69d9a2f05d606e12d2eff&lt;br/&gt;
Fixed for 1.6.0 with 8c042e378b65504c7d76302d508f1e33b2cfa524&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12913989" name="QQ&#22270;&#29255;20180312180143.jpg" size="155491" author="lilizhao" created="Mon, 12 Mar 2018 10:02:32 +0000"/>
                            <attachment id="12913742" name="TableAndSQLTest.java" size="2543" author="lilizhao" created="Fri, 9 Mar 2018 09:25:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3r3fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>