<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:42:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-14960] Dependency shading of table modules test fails on Travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-14960</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;e2e - misc cron job fails on Travis. The messages are as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
==============================================================================
Running &lt;span class=&quot;code-quote&quot;&gt;&apos;Dependency shading of table modules test&apos;&lt;/span&gt;
==============================================================================
TEST_DATA_DIR: /home/travis/build/apache/flink/flink-end-to-end-tests/test-scripts/temp-test-directory-41270732894
Flink dist directory: /home/travis/build/apache/flink/flink-dist/target/flink-1.10-SNAPSHOT-bin/flink-1.10-SNAPSHOT
Success: There are no unwanted dependencies in the /home/travis/build/apache/flink/flink-end-to-end-tests/../flink-table/flink-table-api-java/target/flink-table-api-java-1.10-SNAPSHOT.jar jar.
Success: There are no unwanted dependencies in the /home/travis/build/apache/flink/flink-end-to-end-tests/../flink-table/flink-table-api-scala/target/flink-table-api-scala_2.11-1.10-SNAPSHOT.jar jar.
Success: There are no unwanted dependencies in the /home/travis/build/apache/flink/flink-end-to-end-tests/../flink-table/flink-table-api-java-bridge/target/flink-table-api-java-bridge_2.11-1.10-SNAPSHOT.jar jar.
Success: There are no unwanted dependencies in the /home/travis/build/apache/flink/flink-end-to-end-tests/../flink-table/flink-table-api-scala-bridge/target/flink-table-api-scala-bridge_2.11-1.10-SNAPSHOT.jar jar.
Success: There are no unwanted dependencies in the /home/travis/build/apache/flink/flink-end-to-end-tests/../flink-table/flink-table-planner/target/flink-table-planner_2.11-1.10-SNAPSHOT.jar jar.
Failure: There are unwanted dependencies in the /home/travis/build/apache/flink/flink-end-to-end-tests/../flink-table/flink-table-planner-blink/target/flink-table-planner-blink_2.11-1.10-SNAPSHOT.jar jar:       -&amp;gt; com.esotericsoftware.kryo                          not found
[FAIL] Test script contains errors.
Checking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; errors...
No errors in log files.
Checking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; exceptions...
No exceptions in log files.
Checking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; non-empty .out files...
grep: /home/travis/build/apache/flink/flink-dist/target/flink-1.10-SNAPSHOT-bin/flink-1.10-SNAPSHOT/log/*.out: No such file or directory
No non-empty .out files.

[FAIL] &lt;span class=&quot;code-quote&quot;&gt;&apos;Dependency shading of table modules test&apos;&lt;/span&gt; failed after 0 minutes and 30 seconds! Test exited with exit code 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See &lt;a href=&quot;https://api.travis-ci.org/v3/job/617187809/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/617187809/log.txt&lt;/a&gt; for full message&lt;/p&gt;</description>
                <environment></environment>
        <key id="13270862">FLINK-14960</key>
            <summary>Dependency shading of table modules test fails on Travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jark">Jark Wu</assignee>
                                    <reporter username="TsReaper">Caizhi Weng</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Wed, 27 Nov 2019 02:27:27 +0000</created>
                <updated>Wed, 29 Jan 2020 08:58:06 +0000</updated>
                            <resolved>Wed, 4 Dec 2019 18:10:16 +0000</resolved>
                                    <version>1.9.1</version>
                    <version>1.10.0</version>
                                    <fixVersion>1.9.2</fixVersion>
                    <fixVersion>1.10.0</fixVersion>
                                    <component>Table SQL / Planner</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16984799" author="dawidwys" created="Fri, 29 Nov 2019 08:08:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ykt836&quot; class=&quot;user-hover&quot; rel=&quot;ykt836&quot;&gt;ykt836&lt;/a&gt; Could you check this?&lt;/p&gt;</comment>
                            <comment id="16984807" author="gjy" created="Fri, 29 Nov 2019 08:25:48 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/618179297/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/618179297/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16985285" author="jark" created="Sat, 30 Nov 2019 08:24:16 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;, I looked into this issue. I think the reason is the &lt;tt&gt;DummyStreamExecutionEnvironment&lt;/tt&gt; we introduced in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13708&quot; title=&quot;Transformations should be cleared because a table environment could execute multiple job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-13708&quot;&gt;&lt;del&gt;FLINK-13708&lt;/del&gt;&lt;/a&gt; has &lt;tt&gt;com.esotericsoftware.kryo.Serializer&lt;/tt&gt; dependency in imports. However, &lt;tt&gt;test_table_shaded_dependencies.sh&lt;/tt&gt; will check the code dependcies and think kryo is not in the allowed list.&lt;/p&gt;

&lt;p&gt;One solution is add kryo to the &lt;tt&gt;grep -v&lt;/tt&gt; list of&#160;jdeps, because it is flink-core dependency.&lt;/p&gt;</comment>
                            <comment id="16987146" author="stephanewen" created="Tue, 3 Dec 2019 18:22:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; If this is a new dependency that was not there before, is it correct to remove it from the test check?&lt;/p&gt;

&lt;p&gt;Should it maybe not be packaged instead?&lt;/p&gt;</comment>
                            <comment id="16987201" author="dawidwys" created="Tue, 3 Dec 2019 19:17:22 +0000"  >&lt;p&gt;I think we can add it to the whitelist in &lt;tt&gt;checkCodeDependencies&lt;/tt&gt; method. This method checks that we do not use unwanted classes. &lt;br/&gt;
There is a second method &lt;tt&gt;checkAllowedPackages&lt;/tt&gt; that checks actual classes in the packaged jar. We should not add an exclusion there.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt; As Jark said this code usage comes from the &lt;tt&gt;flink-core&lt;/tt&gt;, which does not relocate this package. The &lt;tt&gt;flink-core&lt;/tt&gt; is in a &lt;tt&gt;provided&lt;/tt&gt; scope. We did not add any new pacakged dependencies. I think it is safe to add that exclusion.&lt;br/&gt;
We should probably though add a note to the &lt;tt&gt;DummyStreamExecutionEnvironment&lt;/tt&gt; to remove that check back when we decide to remove it.&lt;/p&gt;</comment>
                            <comment id="16987547" author="jark" created="Wed, 4 Dec 2019 05:27:09 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;, I will open a pull request soon. &lt;/p&gt;</comment>
                            <comment id="16988061" author="dawidwys" created="Wed, 4 Dec 2019 18:10:16 +0000"  >&lt;p&gt;Fixed in:&lt;br/&gt;
master: 2cad7434973941ea738cd8ecaa4e90661810a833&lt;br/&gt;
1.9.2: c388c268635ed02df96ef3440ef0dbc4fab9401b&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13271284">FLINK-14988</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13271872">FLINK-15029</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z091s0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>