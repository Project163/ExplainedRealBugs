<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:18:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1556] JobClient does not wait until a job failed completely if submission exception</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1556</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;If an exception occurs during job submission the &lt;tt&gt;JobClient&lt;/tt&gt; received a &lt;tt&gt;SubmissionFailure&lt;/tt&gt;. Upon receiving this message, the &lt;tt&gt;JobClient&lt;/tt&gt; terminates itself and returns the error to the &lt;tt&gt;Client&lt;/tt&gt;. This indicates to the user that the job has been completely failed which is not necessarily true. &lt;/p&gt;

&lt;p&gt;If the user directly after such a failure submits another job, then it might be the case that not all slots of the formerly failed job are returned. This can lead to a &lt;tt&gt;NoRessourceAvailableException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;We can solve this problem by waiting for the completion of the job failure in the &lt;tt&gt;JobClient&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12775386">FLINK-1556</key>
            <summary>JobClient does not wait until a job failed completely if submission exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2015 15:21:08 +0000</created>
                <updated>Fri, 20 Feb 2015 09:58:58 +0000</updated>
                            <resolved>Fri, 20 Feb 2015 09:58:58 +0000</resolved>
                                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14322884" author="githubbot" created="Mon, 16 Feb 2015 15:31:39 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/406&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/406&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1556&quot; title=&quot;JobClient does not wait until a job failed completely if submission exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1556&quot;&gt;&lt;del&gt;FLINK-1556&lt;/del&gt;&lt;/a&gt; Corrects faulty JobClient behaviour in case of a submission failure&lt;/p&gt;

&lt;p&gt;    If an error occurred during job submission, a ```SubmissionFailure``` is sent to the ```JobClient```. As a reaction, the ```JobClient``` terminated itself and sent the failure to the ```Client```. However, this does not necessarily mean that the job has reached a terminal state, because the failing procedure is executed asynchronously.&lt;/p&gt;

&lt;p&gt;    The ```JobClient``` now waits until it receives a ```JobResult``` message indicating that the job has completed and all resources are properly returned.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; minorFixes&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/406.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/406.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #406&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2f32e9c6b87b8e295f792c04306d78fbb858f80d&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-02-16T09:17:21Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1556&quot; title=&quot;JobClient does not wait until a job failed completely if submission exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1556&quot;&gt;&lt;del&gt;FLINK-1556&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Corrects faulty JobClient behaviour in case of a submission failure&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14323219" author="githubbot" created="Mon, 16 Feb 2015 20:06:30 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/406#issuecomment-74565029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/406#issuecomment-74565029&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good to me!&lt;/p&gt;</comment>
                            <comment id="14323936" author="githubbot" created="Tue, 17 Feb 2015 08:37:28 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/406#issuecomment-74633679&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/406#issuecomment-74633679&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ok, I&apos;ll merge it.&lt;/p&gt;</comment>
                            <comment id="14324122" author="githubbot" created="Tue, 17 Feb 2015 12:17:45 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/406&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/406&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14324125" author="till.rohrmann" created="Tue, 17 Feb 2015 12:26:08 +0000"  >&lt;p&gt;Fixed via ac7bf427900e60abef3ff4344a5873349e6d108e&lt;/p&gt;</comment>
                            <comment id="14324354" author="rmetzger" created="Tue, 17 Feb 2015 15:59:30 +0000"  >&lt;p&gt;The issue hasn&apos;t been implemented/tested properly.&lt;/p&gt;

&lt;p&gt;I&apos;m reopening it.&lt;/p&gt;

&lt;p&gt;I was submitting a job with a wrong directory configured. I got the following output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./flink run -v -p 152 -c com.github.projectflink.avro.GenerateLineitems ../../testjob/flink-jobs/target/flink-jobs-0.1-SNAPSHOT.jar -p 144 -o hdfs:&lt;span class=&quot;code-comment&quot;&gt;///user/robert/datasets/tpch100/
&lt;/span&gt;16:55:04,748 WARN  org.apache.hadoop.util.NativeCodeLoader                       - Unable to load &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-hadoop library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; your platform... using builtin-java classes where applicable
Found a yarn properties file (.yarn-properties) file, using &lt;span class=&quot;code-quote&quot;&gt;&quot;cloud-31.dima.tu-berlin.de:33806&quot;&lt;/span&gt; to connect to the JobManager
Submission of job with ID 11bc00bb2a27105221a4137048e3a763 was unsuccessful, because File or directory already exists. Existing files and directories are not overwritten in NO_OVERWRITE mode. Use OVERWRITE mode to overwrite existing files and directories..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But the CliFrontend didn&apos;t stop. (I waited for more than a minute).&lt;/p&gt;

&lt;p&gt;jstack:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ jstack 25475
2015-02-17 16:56:43
Full thread dump Java HotSpot(TM) 64-Bit Server VM (24.76-b04 mixed mode):

&lt;span class=&quot;code-quote&quot;&gt;&quot;Attach Listener&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000013c9000 nid=0x63dc waiting on condition [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

&lt;span class=&quot;code-quote&quot;&gt;&quot;Hashed wheel timer #1&quot;&lt;/span&gt; daemon prio=10 tid=0x0000000001375000 nid=0x63a9 waiting on condition [0x00007f3582a96000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (sleeping)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)
	at org.jboss.netty.util.HashedWheelTimer$Worker.waitForNextTick(HashedWheelTimer.java:483)
	at org.jboss.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:392)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O server boss #6&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f3584123000 nid=0x63a8 runnable [0x00007f3582b97000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)
	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
	- locked &amp;lt;0x000000070ac52878&amp;gt; (a sun.nio.ch.Util$2)
	- locked &amp;lt;0x000000070ac52868&amp;gt; (a java.util.Collections$UnmodifiableSet)
	- locked &amp;lt;0x000000070ac52750&amp;gt; (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:102)
	at org.jboss.netty.channel.socket.nio.NioServerBoss.select(NioServerBoss.java:163)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
	at org.jboss.netty.channel.socket.nio.NioServerBoss.run(NioServerBoss.java:42)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O worker #5&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f3584124800 nid=0x63a7 runnable [0x00007f3582c98000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)
	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
	- locked &amp;lt;0x000000070ac35e20&amp;gt; (a sun.nio.ch.Util$2)
	- locked &amp;lt;0x000000070ac35e10&amp;gt; (a java.util.Collections$UnmodifiableSet)
	- locked &amp;lt;0x000000070ac35cf8&amp;gt; (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
	at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:415)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O worker #4&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f35843f0800 nid=0x63a6 runnable [0x00007f3582d99000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)
	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
	- locked &amp;lt;0x000000070ac25598&amp;gt; (a sun.nio.ch.Util$2)
	- locked &amp;lt;0x000000070ac25588&amp;gt; (a java.util.Collections$UnmodifiableSet)
	- locked &amp;lt;0x000000070ac25470&amp;gt; (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
	at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:415)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O boss #3&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f3584530000 nid=0x63a5 runnable [0x00007f3582e9a000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)
	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
	- locked &amp;lt;0x000000070abf0888&amp;gt; (a sun.nio.ch.Util$2)
	- locked &amp;lt;0x000000070abf0878&amp;gt; (a java.util.Collections$UnmodifiableSet)
	- locked &amp;lt;0x000000070abf0760&amp;gt; (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
	at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:415)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
	at org.jboss.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:42)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O worker #2&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f3584187000 nid=0x63a4 runnable [0x00007f3582f9b000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)
	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
	- locked &amp;lt;0x000000070ab400b8&amp;gt; (a sun.nio.ch.Util$2)
	- locked &amp;lt;0x000000070ab400a8&amp;gt; (a java.util.Collections$UnmodifiableSet)
	- locked &amp;lt;0x000000070ab3ff90&amp;gt; (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
	at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:415)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O worker #1&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000013e1000 nid=0x63a3 runnable [0x00007f358309b000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)
	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
	- locked &amp;lt;0x000000070ab0d8d0&amp;gt; (a sun.nio.ch.Util$2)
	- locked &amp;lt;0x000000070ab0d868&amp;gt; (a java.util.Collections$UnmodifiableSet)
	- locked &amp;lt;0x000000070ab0d738&amp;gt; (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
	at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:415)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.remote.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-remote-dispatcher-6&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f358c6ef800 nid=0x63a2 waiting on condition [0x00007f358319d000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x000000070a54f350&amp;gt; (a akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool)
	at scala.concurrent.forkjoin.ForkJoinPool.scan(ForkJoinPool.java:2075)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)

&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.remote.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-remote-dispatcher-5&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f3584184000 nid=0x63a1 waiting on condition [0x00007f358329e000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x000000070a54f350&amp;gt; (a akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool)
	at scala.concurrent.forkjoin.ForkJoinPool.idleAwaitWork(ForkJoinPool.java:2135)
	at scala.concurrent.forkjoin.ForkJoinPool.scan(ForkJoinPool.java:2067)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)

&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-4&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000011bd000 nid=0x63a0 waiting on condition [0x00007f358339f000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x0000000709ac8bd8&amp;gt; (a akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool)
	at scala.concurrent.forkjoin.ForkJoinPool.idleAwaitWork(ForkJoinPool.java:2135)
	at scala.concurrent.forkjoin.ForkJoinPool.scan(ForkJoinPool.java:2067)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)

&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-3&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f358c6b9000 nid=0x639f waiting on condition [0x00007f35834a0000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x0000000709ac8bd8&amp;gt; (a akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinPool)
	at scala.concurrent.forkjoin.ForkJoinPool.scan(ForkJoinPool.java:2075)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)

&lt;span class=&quot;code-quote&quot;&gt;&quot;flink-scheduler-1&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f358c61e800 nid=0x639d sleeping[0x00007f3588322000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (sleeping)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)
	at akka.actor.LightArrayRevolverScheduler.waitNanos(Scheduler.scala:226)
	at akka.actor.LightArrayRevolverScheduler$$anon$8.nextTick(Scheduler.scala:405)
	at akka.actor.LightArrayRevolverScheduler$$anon$8.run(Scheduler.scala:375)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

&lt;span class=&quot;code-quote&quot;&gt;&quot;Service &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f358c07d800 nid=0x6398 runnable [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

&lt;span class=&quot;code-quote&quot;&gt;&quot;C2 CompilerThread1&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f358c07b000 nid=0x6397 waiting on condition [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

&lt;span class=&quot;code-quote&quot;&gt;&quot;C2 CompilerThread0&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f358c078000 nid=0x6396 waiting on condition [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

&lt;span class=&quot;code-quote&quot;&gt;&quot;Signal Dispatcher&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f358c075800 nid=0x6395 runnable [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

&lt;span class=&quot;code-quote&quot;&gt;&quot;Finalizer&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f358c04c000 nid=0x6394 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007f35906eb000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x0000000703e84858&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:135)
	- locked &amp;lt;0x0000000703e84858&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:151)
	at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:209)

&lt;span class=&quot;code-quote&quot;&gt;&quot;Reference Handler&quot;&lt;/span&gt; daemon prio=10 tid=0x00007f358c04a000 nid=0x6393 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007f35907ec000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x0000000703e84470&amp;gt; (a java.lang.ref.Reference$Lock)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:503)
	at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
	- locked &amp;lt;0x0000000703e84470&amp;gt; (a java.lang.ref.Reference$Lock)

&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; prio=10 tid=0x0000000000fb5800 nid=0x6384 waiting on condition [0x00007f35b5f4f000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x000000070b19afb0&amp;gt; (a scala.concurrent.impl.Promise$CompletionLatch)
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1033)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1326)
	at scala.concurrent.impl.Promise$DefaultPromise.tryAwait(Promise.scala:208)
	at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:218)
	at scala.concurrent.impl.Promise$DefaultPromise.result(Promise.scala:223)
	at scala.concurrent.Await$$anonfun$result$1.apply(&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.scala:107)
	at scala.concurrent.BlockContext$DefaultBlockContext$.blockOn(BlockContext.scala:53)
	at scala.concurrent.Await$.result(&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.scala:107)
	at org.apache.flink.runtime.client.JobClient$.submitJobAndWait(JobClient.scala:226)
	at org.apache.flink.runtime.client.JobClient.submitJobAndWait(JobClient.scala)
	at org.apache.flink.client.program.Client.run(Client.java:342)
	at org.apache.flink.client.program.Client.run(Client.java:310)
	at org.apache.flink.client.program.Client.run(Client.java:304)
	at org.apache.flink.client.program.ContextEnvironment.execute(ContextEnvironment.java:55)
	at com.github.projectflink.avro.GenerateLineitems.main(GenerateLineitems.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.flink.client.program.PackagedProgram.callMainMethod(PackagedProgram.java:437)
	at org.apache.flink.client.program.PackagedProgram.invokeInteractiveModeForExecution(PackagedProgram.java:353)
	at org.apache.flink.client.program.Client.run(Client.java:254)
	at org.apache.flink.client.CliFrontend.executeProgram(CliFrontend.java:371)
	at org.apache.flink.client.CliFrontend.run(CliFrontend.java:344)
	at org.apache.flink.client.CliFrontend.parseParameters(CliFrontend.java:1087)
	at org.apache.flink.client.CliFrontend.main(CliFrontend.java:1114)

&lt;span class=&quot;code-quote&quot;&gt;&quot;VM &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;&quot;&lt;/span&gt; prio=10 tid=0x00007f358c046000 nid=0x6392 runnable 

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14324359" author="rmetzger" created="Tue, 17 Feb 2015 16:03:38 +0000"  >&lt;p&gt;I think showing the whole stacktrace of the exception is helpful to understand the deployment issue better.&lt;/p&gt;</comment>
                            <comment id="14324364" author="rmetzger" created="Tue, 17 Feb 2015 16:07:13 +0000"  >&lt;p&gt;Also, it seems that these &quot;fail-fast&quot; jobs are not properly removed from the jobmanager?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://imgur.com/PyuQEfm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://imgur.com/PyuQEfm&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14327632" author="githubbot" created="Thu, 19 Feb 2015 15:29:32 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/422&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/422&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1556&quot; title=&quot;JobClient does not wait until a job failed completely if submission exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1556&quot;&gt;&lt;del&gt;FLINK-1556&lt;/del&gt;&lt;/a&gt; Corrects faulty JobClient behaviour in case of a submission failure&lt;/p&gt;

&lt;p&gt;    Corrects the behaviour of the ```JobClient``` in case of a submission failure. The PR also contains test cases for the job submission.&lt;/p&gt;

&lt;p&gt;    Additionally, reworked how exceptions are transmitted from the ```JobManager``` to the ```JobClient```. They are directly wrapped into a ```akka.actor.Status.Failure``` and send to the ```JobClient```.&lt;/p&gt;

&lt;p&gt;    This PR is based on #419.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixSubmissionExceptions&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/422.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/422.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #422&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8cc604d61d75370972146333c5a016b5fcdddc77&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-02-19T10:04:56Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1584&quot; title=&quot;Spurious failure of TaskManagerFailsITCase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1584&quot;&gt;&lt;del&gt;FLINK-1584&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Fixes TaskManagerFailsITCase by replacing the TestingCluster with a ForkableFlinkMiniCluster&lt;/p&gt;

&lt;p&gt;commit 8ecca959d2bf96fa8be1961b413f4a2c45cf50e1&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-02-19T11:44:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1556&quot; title=&quot;JobClient does not wait until a job failed completely if submission exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1556&quot;&gt;&lt;del&gt;FLINK-1556&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Fails jobs properly in case of a job submission exception&lt;/p&gt;

&lt;p&gt;    Conflicts:&lt;br/&gt;
    	flink-runtime/src/test/scala/org/apache/flink/runtime/testingUtils/TestingUtils.scala&lt;br/&gt;
    	flink-tests/src/test/scala/org/apache/flink/api/scala/runtime/taskmanager/TaskManagerFailsITCase.scala&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14327812" author="githubbot" created="Thu, 19 Feb 2015 17:59:51 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/422#issuecomment-75102524&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/422#issuecomment-75102524&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good, will merge this as well...&lt;/p&gt;</comment>
                            <comment id="14328028" author="githubbot" created="Thu, 19 Feb 2015 19:53:42 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/422&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/422&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14328763" author="stephanewen" created="Fri, 20 Feb 2015 09:58:58 +0000"  >&lt;p&gt;Re-fixed in 4ff91cd7cd3e05637d70a56cfc6f5a4ba2f2501a&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25okv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>