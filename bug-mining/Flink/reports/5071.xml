<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:52:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-21013] Blink planner does not ingest timestamp into StreamRecord</title>
                <link>https://issues.apache.org/jira/browse/FLINK-21013</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently, the rowtime attribute is not put into the StreamRecord when leaving the Table API to DataStream API. The legacy planner supports this, but the timestamp is null when using the Blink planner.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();
        env.setParallelism(1);
            EnvironmentSettings settings =
                    EnvironmentSettings.newInstance().inStreamingMode().useBlinkPlanner().build();
            StreamTableEnvironment tEnv = StreamTableEnvironment.create(env, settings);

        DataStream&amp;lt;Order&amp;gt; orderA =
                env.fromCollection(
                        Arrays.asList(
                                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Order(1L, &lt;span class=&quot;code-quote&quot;&gt;&quot;beer&quot;&lt;/span&gt;, 3),
                                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Order(1L, &lt;span class=&quot;code-quote&quot;&gt;&quot;diaper&quot;&lt;/span&gt;, 4),
                                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Order(3L, &lt;span class=&quot;code-quote&quot;&gt;&quot;rubber&quot;&lt;/span&gt;, 2)));

        DataStream&amp;lt;Order&amp;gt; orderB =
                orderA.assignTimestampsAndWatermarks(
                        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AssignerWithPunctuatedWatermarks&amp;lt;Order&amp;gt;() {
                            @Nullable
                            @Override
                            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Watermark checkAndGetNextWatermark(
                                    Order lastElement, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; extractedTimestamp) {
                                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Watermark(extractedTimestamp);
                            }

                            @Override
                            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; extractTimestamp(Order element, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; recordTimestamp) {
                                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; element.user;
                            }
                        });

        Table tableA = tEnv.fromDataStream(orderB, $(&lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;).rowtime(), $(&lt;span class=&quot;code-quote&quot;&gt;&quot;product&quot;&lt;/span&gt;), $(&lt;span class=&quot;code-quote&quot;&gt;&quot;amount&quot;&lt;/span&gt;));

        &lt;span class=&quot;code-comment&quot;&gt;// union the two tables
&lt;/span&gt;        Table result = tEnv.sqlQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT * FROM &quot;&lt;/span&gt; + tableA);

        tEnv.toAppendStream(result, Row.class)
                .process(
                        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ProcessFunction&amp;lt;Row, Row&amp;gt;() {
                            @Override
                            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void processElement(Row value, Context ctx, Collector&amp;lt;Row&amp;gt; out)
                                    &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
                                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;TIMESTAMP&quot;&lt;/span&gt; + ctx.timestamp());
                            }
                        })
                .print();

        env.execute();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13353114">FLINK-21013</key>
            <summary>Blink planner does not ingest timestamp into StreamRecord</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="leonard">Leonard Xu</assignee>
                                    <reporter username="twalthr">Timo Walther</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 18 Jan 2021 16:23:37 +0000</created>
                <updated>Fri, 28 May 2021 09:02:17 +0000</updated>
                            <resolved>Tue, 9 Feb 2021 10:38:23 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.11.4</fixVersion>
                    <fixVersion>1.12.2</fixVersion>
                    <fixVersion>1.13.0</fixVersion>
                                    <component>Table SQL / Planner</component>
                    <component>Table SQL / Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17267399" author="twalthr" created="Mon, 18 Jan 2021 16:27:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; is this due to the recent temporal refactoring or existing since the Blink merge?&lt;/p&gt;</comment>
                            <comment id="17267617" author="jark" created="Tue, 19 Jan 2021 03:26:20 +0000"  >&lt;p&gt;I think this is a missing feature since Blink merge. &lt;br/&gt;
See the difference between blink-planner&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and old-planner &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-table/flink-table-planner-blink/src/main/scala/org/apache/flink/table/planner/plan/nodes/physical/stream/StreamExecLegacySink.scala#L133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/master/flink-table/flink-table-planner-blink/src/main/scala/org/apache/flink/table/planner/plan/nodes/physical/stream/StreamExecLegacySink.scala#L133&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-table/flink-table-planner/src/main/scala/org/apache/flink/table/planner/DataStreamConversions.scala#L108&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/master/flink-table/flink-table-planner/src/main/scala/org/apache/flink/table/planner/DataStreamConversions.scala#L108&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17271966" author="twalthr" created="Tue, 26 Jan 2021 08:31:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ykt836&quot; class=&quot;user-hover&quot; rel=&quot;ykt836&quot;&gt;ykt836&lt;/a&gt; How should we continue with this? FLIP-136 will definitely fix it for 1.13 but we should also backport a fix to 1.12 and 1.11. A user complained on the user mailing list that it is currently not possible to define a time-based operations in DataStream API after a call to Table API.&lt;/p&gt;</comment>
                            <comment id="17271973" author="ykt836" created="Tue, 26 Jan 2021 08:44:27 +0000"  >&lt;p&gt;Yes, I also think this bug deserved to be back ported. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Leonard+Xu&quot; class=&quot;user-hover&quot; rel=&quot;Leonard Xu&quot;&gt;Leonard Xu&lt;/a&gt;&#160;would you like to fix this before FLIP 162?&lt;/p&gt;</comment>
                            <comment id="17271978" author="leonard xu" created="Tue, 26 Jan 2021 08:55:18 +0000"  >&lt;p&gt;I&apos;d like to fix and back port to 1.11/1.12, please assign this ticket to me.&lt;/p&gt;</comment>
                            <comment id="17271985" author="twalthr" created="Tue, 26 Jan 2021 09:02:22 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Leonard+Xu&quot; class=&quot;user-hover&quot; rel=&quot;Leonard Xu&quot;&gt;Leonard Xu&lt;/a&gt;. I assigned it to you.&lt;/p&gt;</comment>
                            <comment id="17280752" author="ym" created="Mon, 8 Feb 2021 05:15:57 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Leonard+Xu&quot; class=&quot;user-hover&quot; rel=&quot;Leonard Xu&quot;&gt;Leonard Xu&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;, what is the status of this ticket? &lt;/p&gt;

&lt;p&gt;I saw the PRs are ready to review, how far away these PRs to be merged?&lt;/p&gt;

&lt;p&gt;I am asking because this ticket is marked as a blocker for Flink 1.12.2 release, wondering is it still the case?&lt;/p&gt;</comment>
                            <comment id="17280821" author="twalthr" created="Mon, 8 Feb 2021 07:47:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ym&quot; class=&quot;user-hover&quot; rel=&quot;ym&quot;&gt;ym&lt;/a&gt; I will review it today. We should fix this.&lt;/p&gt;</comment>
                            <comment id="17281702" author="twalthr" created="Tue, 9 Feb 2021 10:38:23 +0000"  >&lt;p&gt;Fixed in 1.13.0: e955ec1d1913a2c244a1e3835304c97fc97b3ea1&lt;br/&gt;
Fixed in 1.12.2: 20030c255849cc1f0a01045fdaa8a16d883726b6&lt;br/&gt;
Fixed in 1.11.4: 9984b5869b2f35b1fb8ce75e09ad73574d9f91ec&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mqfk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>