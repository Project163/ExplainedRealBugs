<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6922] Enum(Value)SerializerConfigSnapshot uses Java serialization to store enum values</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6922</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The &lt;tt&gt;EnumSerializer&lt;/tt&gt; and the &lt;tt&gt;EnumValueSerializer&lt;/tt&gt; (Scala) uses Java serialization to store enum values. From a user perspective this can be a bit of a problem if the user forgot to add a serial version UID. I think it would be better to store the enum information without Java serialization to avoid this problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13079807">FLINK-6922</key>
            <summary>Enum(Value)SerializerConfigSnapshot uses Java serialization to store enum values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tzulitai">Tzu-Li (Gordon) Tai</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Jun 2017 15:59:40 +0000</created>
                <updated>Tue, 20 Jun 2017 12:47:27 +0000</updated>
                            <resolved>Tue, 20 Jun 2017 12:47:27 +0000</resolved>
                                    <version>1.3.0</version>
                    <version>1.4.0</version>
                                    <fixVersion>1.3.1</fixVersion>
                                    <component>API / Type Serialization System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16055519" author="githubbot" created="Tue, 20 Jun 2017 10:25:22 +0000"  >&lt;p&gt;GitHub user tzulitai opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4147&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6922&quot; title=&quot;Enum(Value)SerializerConfigSnapshot uses Java serialization to store enum values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6922&quot;&gt;&lt;del&gt;FLINK-6922&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;serde&amp;#93;&lt;/span&gt; Remove Java serialization from Enum(Value)SerializerConfigSnapshot&lt;/p&gt;

&lt;p&gt;    This PR subsumes #4142.&lt;/p&gt;

&lt;p&gt;    It additionally removes Java serialization from the Java `EnumSerializerConfigSnapshot` and `EnumValueSerializerConfigSnapshot`, which was in the way for some compatible migration paths (e.g. adding constants to the enm, but not setting a serialVersionUID for the enum class).&lt;/p&gt;

&lt;p&gt;    This PR also ports the `EnumValueSerializerUpgradeTest` for the Java `EnumSerializer`, with the only difference that `testDifferentFieldOrder` should not require migration on the Java side (the Java `EnumSerializer` reconfigures its enum constant ordering).&lt;/p&gt;

&lt;p&gt;    The original `o.a.f.api.common.typeutils.base.EnumSerializerTest` already covers more sophisticated ordering tests for the `EnumSerializer`, as well as snapshot + compatibility check idempotency. Hence, there are no new tests for that. The ported `o.a.f.api.common.typeutils.base.EnumSerializerUpgradeTest` serves as an end-to-end behavioural test.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tzulitai/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tzulitai/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6922&quot; title=&quot;Enum(Value)SerializerConfigSnapshot uses Java serialization to store enum values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6922&quot;&gt;&lt;del&gt;FLINK-6922&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4147.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4147.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4147&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9a86e4b78dba3d2dd9d09702c1fa684fabac70b0&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-06-14T14:53:49Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6921&quot; title=&quot;EnumValueSerializer cannot properly handle appended enum values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6921&quot;&gt;&lt;del&gt;FLINK-6921&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;serializer&amp;#93;&lt;/span&gt; Allow EnumValueSerializer to deal with appended enum values&lt;/p&gt;

&lt;p&gt;    The problem was that we don&apos;t check the bounds of the array with the enum names contained&lt;br/&gt;
    in the ScalaEnumSerializerConfigSnapshot.&lt;/p&gt;

&lt;p&gt;    This PR also adds an Enumeration upgrade test which makes sure that appended fields are&lt;br/&gt;
    supported without migration. Moreover, it checks that a field removal and an order change&lt;br/&gt;
    leads to a required migration.&lt;/p&gt;

&lt;p&gt;    This closes #4126.&lt;/p&gt;

&lt;p&gt;commit 126dcc828b2fca1cdb16c228b5ad8483d970e106&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-06-19T10:49:05Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6948&quot; title=&quot;EnumValueSerializer cannot handle removed enum values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6948&quot;&gt;&lt;del&gt;FLINK-6948&lt;/del&gt;&lt;/a&gt; Harden EnumValueSerializer to detect changed enum indices&lt;/p&gt;

&lt;p&gt;    This PR changes the seriailization format of the ScalaEnumSerializerConfigSnapshot to also include the&lt;br/&gt;
    ordinal value of an enum value when being deserialized. This allows to detect if the ordinal values&lt;br/&gt;
    have been changed and, thus, if migration is required.&lt;/p&gt;

&lt;p&gt;    IMPORTANT: This PR changes the serialization format of ScalaEnumSerializerConfigSnapshot.&lt;/p&gt;

&lt;p&gt;    Remove backwards compatibility path for 1.3.1&lt;/p&gt;

&lt;p&gt;commit 07d468b88b31741961d20c665a13b735fecd6b73&lt;br/&gt;
Author: Tzu-Li (Gordon) Tai &amp;lt;tzulitai@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-06-20T10:17:21Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6922&quot; title=&quot;Enum(Value)SerializerConfigSnapshot uses Java serialization to store enum values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6922&quot;&gt;&lt;del&gt;FLINK-6922&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;serde&amp;#93;&lt;/span&gt; Remove Java serialization from Enum(Value)SerializerConfigSnapshot&lt;/p&gt;

&lt;p&gt;    This commit removes the use of Java serialization for serializing the&lt;br/&gt;
    enum class and constants in the Java EnumSerializerConfigSnapshot and&lt;br/&gt;
    Scala ScalaEnumSerializerConfigSnapshot.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16055687" author="githubbot" created="Tue, 20 Jun 2017 12:39:37 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4147&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16055699" author="tzulitai" created="Tue, 20 Jun 2017 12:47:27 +0000"  >&lt;p&gt;Fixed for master via f24a499b37515b43789ae23d83c1cd9eb2f827b3.&lt;br/&gt;
Fixed for 1.3.1 via 732d9c14252ebaded32b4d96cb25926e83254892.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g9qf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>