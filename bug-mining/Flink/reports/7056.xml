<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:17:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-32010] KubernetesLeaderRetrievalDriver always waits for lease update to resolve leadership</title>
                <link>https://issues.apache.org/jira/browse/FLINK-32010</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The k8s-based leader retrieval is based on ConfigMap watching. The config map lifecycle (from the consumer point of view) is handled as a series of events with the following types:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;ADDED -&amp;gt; the first time the consumer has seen the CM&lt;/li&gt;
	&lt;li&gt;UPDATED -&amp;gt; any further changes to the CM&lt;/li&gt;
	&lt;li&gt;DELETED -&amp;gt; ... you get the idea&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The implementation assumes that ElectionDriver (the one that creates the CM) and ElectionRetriver are started simultaneously and therefore ignore the ADDED events because the CM is always created as empty and is updated with the leadership information later on.&lt;/p&gt;

&lt;p&gt;This assumption is incorrect in the following cases (I might be missing some, but that&apos;s not important, the goal is to illustrate the problem):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;TM joining the cluster later when the leaders are established to discover RM / JM&lt;/li&gt;
	&lt;li&gt;RM tries to discover JM when&#160;&lt;br/&gt;
MultipleComponentLeaderElectionDriver is used&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This, for example, leads to higher job submission latencies that could be unnecessarily held back for up to the lease retry period &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; Configured by &lt;em&gt;high-availability.kubernetes.leader-election.retry-period&lt;/em&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13535133">FLINK-32010</key>
            <summary>KubernetesLeaderRetrievalDriver always waits for lease update to resolve leadership</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dmvk">David Mor&#225;vek</assignee>
                                    <reporter username="dmvk">David Mor&#225;vek</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 5 May 2023 09:50:06 +0000</created>
                <updated>Sat, 6 May 2023 06:20:33 +0000</updated>
                            <resolved>Sat, 6 May 2023 06:20:33 +0000</resolved>
                                    <version>1.17.0</version>
                    <version>1.16.1</version>
                    <version>1.18.0</version>
                                    <fixVersion>1.16.2</fixVersion>
                    <fixVersion>1.18.0</fixVersion>
                    <fixVersion>1.17.1</fixVersion>
                                    <component>Deployment / Kubernetes</component>
                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17719968" author="davidmoravek" created="Fri, 5 May 2023 19:03:13 +0000"  >&lt;p&gt;master: 026d7ccfe1d6f4cfa26c9038dd05403c889d2e0d&lt;/p&gt;

&lt;p&gt;release-1.16: 6aa84630a39fbe33209487fbeac412dc98439b46&lt;/p&gt;

&lt;p&gt;release-1.17: 2799038b964e88129545bf4e6a5128c03e3d2f2b&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13368761">FLINK-22054</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1hpqg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>