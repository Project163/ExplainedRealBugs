<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:48:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-16917] &quot;TPC-DS end-to-end test (Blink planner)&quot; gets stuck</title>
                <link>https://issues.apache.org/jira/browse/FLINK-16917</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The message you see from the CI system is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
##[error]The job running on agent Hosted Agent ran longer than the maximum time of 240 minutes. For more information, see https:&lt;span class=&quot;code-comment&quot;&gt;//go.microsoft.com/fwlink/?linkid=2077134&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example: &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6899&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6899&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The end of the log file looks as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-03-31T23:00:40.5416207Z [INFO]Run TPC-DS query 97 success.
2020-03-31T23:00:40.5439265Z [INFO]Run TPC-DS query 98 ...
2020-03-31T23:00:40.8269500Z Job has been submitted with JobID eec4759ae6d585ee9f8d9f84f1793c0e
2020-03-31T23:01:33.4757621Z Program execution finished
2020-03-31T23:01:33.4758328Z Job with JobID eec4759ae6d585ee9f8d9f84f1793c0e has finished.
2020-03-31T23:01:33.4758880Z Job &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt;: 51093 ms
2020-03-31T23:01:33.4759057Z 
2020-03-31T23:01:33.4760999Z [INFO]Run TPC-DS query 98 success.
2020-03-31T23:01:33.4761612Z [INFO]Run TPC-DS query 99 ...
2020-03-31T23:01:33.7297686Z Job has been submitted with JobID f47efc4194df2e0ead677fff239f3dfd
2020-03-31T23:01:50.0037484Z ##[error]The operation was canceled.
2020-03-31T23:01:50.0091655Z ##[section]Finishing: Run e2e tests
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice the time difference between &quot;Job has been submitted&quot; and &quot;The operation was canceled.&quot;. There was nothing happening for 20 minutes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13295486">FLINK-16917</key>
            <summary>&quot;TPC-DS end-to-end test (Blink planner)&quot; gets stuck</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="arvid">Arvid Heise</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Wed, 1 Apr 2020 09:48:58 +0000</created>
                <updated>Tue, 22 Jun 2021 14:05:21 +0000</updated>
                            <resolved>Thu, 2 Apr 2020 11:20:20 +0000</resolved>
                                                    <fixVersion>1.11.0</fixVersion>
                                    <component>Runtime / Task</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17072599" author="rmetzger" created="Wed, 1 Apr 2020 09:55:26 +0000"  >&lt;p&gt;Maybe the script should be changed to expect an output after at least 5 minutes. Otherwise, fail the test and print the Flink logs for further debugging.&lt;/p&gt;</comment>
                            <comment id="17072606" author="jark" created="Wed, 1 Apr 2020 10:05:31 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danny0405&quot; class=&quot;user-hover&quot; rel=&quot;danny0405&quot;&gt;danny0405&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfreyhe&quot; class=&quot;user-hover&quot; rel=&quot;godfreyhe&quot;&gt;godfreyhe&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17072620" author="danny0405" created="Wed, 1 Apr 2020 10:22:47 +0000"  >&lt;p&gt;Thanks for reporting this, would try a test on my MAC soon ~&lt;/p&gt;</comment>
                            <comment id="17072626" author="rmetzger" created="Wed, 1 Apr 2020 10:31:14 +0000"  >&lt;p&gt;The error does not happen all the time&lt;/p&gt;</comment>
                            <comment id="17072704" author="rmetzger" created="Wed, 1 Apr 2020 12:13:07 +0000"  >&lt;p&gt;Maybe the test is actually failing consistently. This might be related: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16906&quot; title=&quot;Various tests failing with: Could not register mbeans javax.management.InstanceAlreadyExistsException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16906&quot;&gt;&lt;del&gt;FLINK-16906&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17073009" author="rmetzger" created="Wed, 1 Apr 2020 17:26:19 +0000"  >&lt;p&gt;Another case: &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6927&amp;amp;view=results&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6927&amp;amp;view=results&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17073299" author="ykt836" created="Thu, 2 Apr 2020 01:33:57 +0000"  >&lt;p&gt;I think the root cause is tpc-ds tests have slowed down a lot. It only took us &amp;lt;20 min to run, but now it takes ~2 hour.&#160;&lt;/p&gt;

&lt;p&gt;I checked the master test history, &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16245&quot; title=&quot;Use a delegating classloader as the user code classloader to prevent class leaks.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16245&quot;&gt;&lt;del&gt;FLINK-16245&lt;/del&gt;&lt;/a&gt;&#160;seems to be the root casue.&lt;/p&gt;

&lt;p&gt;You can see until &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16767&quot; title=&quot;Failed to read Hive table with RegexSerDe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16767&quot;&gt;&lt;del&gt;FLINK-16767&lt;/del&gt;&lt;/a&gt;, the performance seems to be still normal.&#160;&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AHeise&quot; class=&quot;user-hover&quot; rel=&quot;AHeise&quot;&gt;AHeise&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12998540/12998540_image-2020-04-02-09-32-52-979.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17073315" author="danny0405" created="Thu, 2 Apr 2020 02:26:54 +0000"  >&lt;p&gt;It seems that after &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16411&quot; title=&quot;Maven central connection timeouts on Azure Pipelines&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16411&quot;&gt;&lt;del&gt;FLINK-16411&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, the tests take about 5h to finish, before that, we usually finish the whole tests within 3h.&lt;/p&gt;

&lt;p&gt;But it&apos;s interesting that the &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16411&quot; title=&quot;Maven central connection timeouts on Azure Pipelines&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16411&quot;&gt;&lt;del&gt;FLINK-16411&lt;/del&gt;&lt;/a&gt; test itself take 3 hours, but following that a typo fix can not finish already.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;  &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build?definitionId=4&amp;amp;_a=summaryhttps://dev.azure.com/rmetzger/Flink/_build?definitionId=4&amp;amp;_a=summary&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build?definitionId=4&amp;amp;_a=summaryhttps://dev.azure.com/rmetzger/Flink/_build?definitionId=4&amp;amp;_a=summary&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6894&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6894&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17073411" author="rmetzger" created="Thu, 2 Apr 2020 06:31:04 +0000"  >&lt;p&gt;Thank you for looking into this ticket. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ykt836&quot; class=&quot;user-hover&quot; rel=&quot;ykt836&quot;&gt;ykt836&lt;/a&gt; It is interesting how the runtime of the test has changed! I believe the issue was introduced much earlier than &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16245&quot; title=&quot;Use a delegating classloader as the user code classloader to prevent class leaks.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16245&quot;&gt;&lt;del&gt;FLINK-16245&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;My analysis points at &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-14338&quot; title=&quot;Upgrade Calcite version to 1.22 for Flink SQL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-14338&quot;&gt;&lt;del&gt;FLINK-14338&lt;/del&gt;&lt;/a&gt; to be the root cause.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danny0405&quot; class=&quot;user-hover&quot; rel=&quot;danny0405&quot;&gt;danny0405&lt;/a&gt; You need to look at this Pipeline: &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build?definitionId=8&amp;amp;_a=summary&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build?definitionId=8&amp;amp;_a=summary&lt;/a&gt;, the other one you posted is just from the pull requests, thus it is not in order of the pushes to master.&lt;/p&gt;

&lt;p&gt;Why do I believe &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-14338&quot; title=&quot;Upgrade Calcite version to 1.22 for Flink SQL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-14338&quot;&gt;&lt;del&gt;FLINK-14338&lt;/del&gt;&lt;/a&gt; is the root cause?&lt;/p&gt;

&lt;p&gt;Once &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-14338&quot; title=&quot;Upgrade Calcite version to 1.22 for Flink SQL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-14338&quot;&gt;&lt;del&gt;FLINK-14338&lt;/del&gt;&lt;/a&gt; got merged, the e2e tests started failing with &quot;flink-table-planner contains unwanted dependency org.apiguardian.api&quot; (reported and fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16878&quot; title=&quot;flink-table-planner contains unwanted dependency org.apiguardian.api&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16878&quot;&gt;&lt;del&gt;FLINK-16878&lt;/del&gt;&lt;/a&gt;). Since then, the &quot;TPC-DS end-to-end test (Blink planner)&quot; was not executed anymore (because it runs after the dependency check).&lt;br/&gt;
Once &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16878&quot; title=&quot;flink-table-planner contains unwanted dependency org.apiguardian.api&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16878&quot;&gt;&lt;del&gt;FLINK-16878&lt;/del&gt;&lt;/a&gt; got resolved, the TPC-DS e2e test started timing out.&lt;/p&gt;

&lt;p&gt;I visualized this for you:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12998550/12998550_Screenshot+2020-04-02+08.12.01.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;Once &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16878&quot; title=&quot;flink-table-planner contains unwanted dependency org.apiguardian.api&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16878&quot;&gt;&lt;del&gt;FLINK-16878&lt;/del&gt;&lt;/a&gt; got resolved, the TPC-DS e2e test started timing out (see the 4hrs duration):&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12998551/12998551_Screenshot+2020-04-02+08.24.28.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;  &lt;/p&gt;
</comment>
                            <comment id="17073419" author="arvid" created="Thu, 2 Apr 2020 06:44:41 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ykt836&quot; class=&quot;user-hover&quot; rel=&quot;ykt836&quot;&gt;ykt836&lt;/a&gt; , &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16245&quot; title=&quot;Use a delegating classloader as the user code classloader to prevent class leaks.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16245&quot;&gt;&lt;del&gt;FLINK-16245&lt;/del&gt;&lt;/a&gt; introduced a safety net around the user code classloader, to ensure user classes are not accessible after a job terminates. My main expectation would be that either stuff runs or it breaks, but having a much longer e2e does not immediately sense.&lt;/p&gt;

&lt;p&gt;Two options where I could see it happen:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Classloading is much slower now because of indirection. The safety net is also not parallel (but afaik none of our classloaders are). I severely doubt that this would increase e2e times just for this one test suite.&lt;/li&gt;
	&lt;li&gt;Some cleanup code needs new classes and is invoked after classloader is closed. That part then runs in timeouts. Did you observe any timeout warnings in the log?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@all, did you also observe increased times for other e2e tests?&lt;/p&gt;</comment>
                            <comment id="17073421" author="ykt836" created="Thu, 2 Apr 2020 06:48:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt;&#160; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AHeise&quot; class=&quot;user-hover&quot; rel=&quot;AHeise&quot;&gt;AHeise&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can check out&#160; &lt;b&gt;#20200331.7 &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16767&quot; title=&quot;Failed to read Hive table with RegexSerDe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16767&quot;&gt;&lt;del&gt;FLINK-16767&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;hive&amp;#93;&lt;/span&gt; Failed to read Hive table with RegexSerDe&lt;/b&gt;&#160;, which committed after calcite upgrade.&#160;&lt;/p&gt;

&lt;p&gt;It&apos;s true that the e2e test failed in that pipeline, but the tpc-ds e2e test actually succeeded before &quot;Dependency shading of table modules test&quot; fails:&lt;/p&gt;

&lt;p&gt;2020-03-31T11:56:37.8941780Z &lt;span class=&quot;error&quot;&gt;&amp;#91;PASS&amp;#93;&lt;/span&gt; &apos;TPC-DS end-to-end test (Blink planner)&apos; passed after &lt;b&gt;19 minutes&lt;/b&gt; and 33 seconds! Test exited with exit code 0.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;And then if you check out the next run: &quot;&lt;b&gt;#20200331.8 &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16245&quot; title=&quot;Use a delegating classloader as the user code classloader to prevent class leaks.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16245&quot;&gt;&lt;del&gt;FLINK-16245&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Adjust BatchFineGrainedRecoveryITCase&lt;/b&gt;&quot;, you will see tpc-ds tests was already very slow:&lt;/p&gt;

&lt;p&gt;2020-03-31T13:35:03.4588365Z &lt;span class=&quot;error&quot;&gt;&amp;#91;PASS&amp;#93;&lt;/span&gt; &apos;TPC-DS end-to-end test (Blink planner)&apos; passed after &lt;b&gt;86 minutes&lt;/b&gt; and 17 seconds! Test exited with exit code 0.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17073426" author="pnowojski" created="Thu, 2 Apr 2020 06:53:39 +0000"  >&lt;p&gt;Let&apos;s revert &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16245&quot; title=&quot;Use a delegating classloader as the user code classloader to prevent class leaks.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16245&quot;&gt;&lt;del&gt;FLINK-16245&lt;/del&gt;&lt;/a&gt; as that&apos;s relatively simple PR and see if this solves the problem.&lt;/p&gt;</comment>
                            <comment id="17073427" author="rmetzger" created="Thu, 2 Apr 2020 06:55:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AHeise&quot; class=&quot;user-hover&quot; rel=&quot;AHeise&quot;&gt;AHeise&lt;/a&gt; Kurt is relating to the high build times of &quot;#20200331.8 &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16245&quot; title=&quot;Use a delegating classloader as the user code classloader to prevent class leaks.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16245&quot;&gt;&lt;del&gt;FLINK-16245&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Adjust BatchFineGrainedRecoveryITCase&quot; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&lt;br/&gt;
I have analyzed the e2e build time of &quot;#20200331.15 &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; Fix typo in org.apache.flink.sql.parser.ddl.SqlCreateTable&quot; &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;br/&gt;
Column J shows the durations of the e2e tests: &lt;a href=&quot;https://docs.google.com/spreadsheets/d/1VpA3wsOY88ezY8qTUFl8iztPc58mRa-1pIncIBAbUL8/edit#gid=117660203&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.google.com/spreadsheets/d/1VpA3wsOY88ezY8qTUFl8iztPc58mRa-1pIncIBAbUL8/edit#gid=117660203&lt;/a&gt; As you can see in K, the e2e tests are not slower because of that (except for &quot;TPC-DS end-to-end test (Blink planner)&quot;, which doesn&apos;t finish &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6877&amp;amp;view=result&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6877&amp;amp;view=result&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6899&amp;amp;view=results&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6899&amp;amp;view=results&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17073428" author="rmetzger" created="Thu, 2 Apr 2020 06:57:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ykt836&quot; class=&quot;user-hover&quot; rel=&quot;ykt836&quot;&gt;ykt836&lt;/a&gt; You are right! My analysis is wrong.&lt;/p&gt;

&lt;p&gt;For some reason I thought that &quot;Dependency shading of table modules test&quot; runs before the TPC-DS test &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;I agree with Piotr to revert the commit.&lt;/p&gt;</comment>
                            <comment id="17073429" author="arvid" created="Thu, 2 Apr 2020 06:58:49 +0000"  >&lt;p&gt;:+1 to reverting &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16245&quot; title=&quot;Use a delegating classloader as the user code classloader to prevent class leaks.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16245&quot;&gt;&lt;del&gt;FLINK-16245&lt;/del&gt;&lt;/a&gt;, I guess we need to understand the issue better before reapplying the patch.&lt;/p&gt;</comment>
                            <comment id="17073431" author="ykt836" created="Thu, 2 Apr 2020 06:59:31 +0000"  >&lt;p&gt;And I quickly went through other e2e tests between&#160;#20200331.7 and&#160;#20200331.8, it&apos;s strange only tpc-h and tpc-ds tests are slowed down.**&lt;/p&gt;</comment>
                            <comment id="17073432" author="rmetzger" created="Thu, 2 Apr 2020 07:03:40 +0000"  >&lt;p&gt;I would like to mention that the e2e test run of the pull request adding &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16245&quot; title=&quot;Use a delegating classloader as the user code classloader to prevent class leaks.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16245&quot;&gt;&lt;del&gt;FLINK-16245&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; showed the issue that we are discussing here!&lt;br/&gt;
I know the Azure tests are not the most stable one, but they are sometimes showing real issues &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6813&amp;amp;view=logs&amp;amp;j=e428c73e-5bb8-51ab-b1f4-da736192251d&amp;amp;t=fb85e9b1-9460-5259-9251-5d7b922523ea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=6813&amp;amp;view=logs&amp;amp;j=e428c73e-5bb8-51ab-b1f4-da736192251d&amp;amp;t=fb85e9b1-9460-5259-9251-5d7b922523ea&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17073437" author="arvid" created="Thu, 2 Apr 2020 07:09:39 +0000"  >&lt;p&gt;I&apos;m assuming that something in Table API is leaking the classloader and hence we only see the issue there. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt; , seems like failing fast would have been the better option after all.&lt;/p&gt;</comment>
                            <comment id="17073447" author="rmetzger" created="Thu, 2 Apr 2020 07:20:28 +0000"  >&lt;p&gt;Who&apos;s going to revert?&lt;/p&gt;</comment>
                            <comment id="17073488" author="rmetzger" created="Thu, 2 Apr 2020 08:10:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AHeise&quot; class=&quot;user-hover&quot; rel=&quot;AHeise&quot;&gt;AHeise&lt;/a&gt; is. I&apos;ve assinged you to the ticket.&lt;/p&gt;</comment>
                            <comment id="17073627" author="rmetzger" created="Thu, 2 Apr 2020 11:12:12 +0000"  >&lt;p&gt;I merged the revert: c79c26a1089187c50bbd39d53bcfa47b509f47e7.&lt;/p&gt;

&lt;p&gt;I guess we can close this ticket, as the issue will be tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16245&quot; title=&quot;Use a delegating classloader as the user code classloader to prevent class leaks.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16245&quot;&gt;&lt;del&gt;FLINK-16245&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="17178631" author="zentol" created="Sun, 16 Aug 2020 21:29:28 +0000"  >&lt;p&gt;A fix for the orc issues has been merged to master for 1.12, along with an option to disable &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-16245&quot; title=&quot;Use a delegating classloader as the user code classloader to prevent class leaks.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-16245&quot;&gt;&lt;del&gt;FLINK-16245&lt;/del&gt;&lt;/a&gt; in case there are similar instances in the future:&lt;/p&gt;

&lt;p&gt;6c130daaf59e77b343d1c947822ea0573738a204&lt;/p&gt;

&lt;p&gt;fce82d7f56d5da3d3bf9ea6b66888d1350eb172f&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13295456">FLINK-16910</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13294106">FLINK-16795</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12998550" name="Screenshot 2020-04-02 08.12.01.png" size="698441" author="rmetzger" created="Thu, 2 Apr 2020 06:30:10 +0000"/>
                            <attachment id="12998551" name="Screenshot 2020-04-02 08.24.28.png" size="445986" author="rmetzger" created="Thu, 2 Apr 2020 06:30:58 +0000"/>
                            <attachment id="12998540" name="image-2020-04-02-09-32-52-979.png" size="237495" author="ykt836" created="Thu, 2 Apr 2020 01:32:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0d5ps:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>