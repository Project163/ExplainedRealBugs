<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:45:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-17416] Flink-kubernetes doesn&apos;t work on java 8 8u252</title>
                <link>https://issues.apache.org/jira/browse/FLINK-17416</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When using java-8-8u252 version, the flink container end-to-end failed. The test&#160; `Running &apos;Run kubernetes session test&apos;` fails with the `Broken pipe` error.&lt;/p&gt;

&lt;p&gt;See:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://logs.openlabtesting.org/logs/periodic-20-flink-mail/github.com/apache/flink/master/flink-end-to-end-test-arm64-container/fcfdd47/job-output.txt.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://logs.openlabtesting.org/logs/periodic-20-flink-mail/github.com/apache/flink/master/flink-end-to-end-test-arm64-container/fcfdd47/job-output.txt.gz&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Flink Azure CI doesn&apos;t hit this problem because it runs under jdk-8-8u242&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The reason is that the okhttp library which flink using doesn&apos;t work on java-8-8u252:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/square/okhttp/issues/5970&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/square/okhttp/issues/5970&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The problem has been with the PR:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/square/okhttp/pull/5977&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/square/okhttp/pull/5977&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Maybe we can wait for a new 3.12.x release and bump the okhttp version in Flink later.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13301255">FLINK-17416</key>
            <summary>Flink-kubernetes doesn&apos;t work on java 8 8u252</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wangxiyuan">wangxiyuan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 27 Apr 2020 12:31:38 +0000</created>
                <updated>Fri, 16 Oct 2020 10:32:35 +0000</updated>
                            <resolved>Fri, 5 Jun 2020 03:36:14 +0000</resolved>
                                    <version>1.10.0</version>
                    <version>1.11.0</version>
                                    <fixVersion>1.11.0</fixVersion>
                    <fixVersion>1.12.0</fixVersion>
                                    <component>Deployment / Kubernetes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17094121" author="fly_in_gis" created="Tue, 28 Apr 2020 03:37:01 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wangxiyuan&quot; class=&quot;user-hover&quot; rel=&quot;wangxiyuan&quot;&gt;wangxiyuan&lt;/a&gt;&#160;for creating this ticket. I think it is a good opportunity to bump the okhttp client in flink-kubernetes to new version.&lt;/p&gt;</comment>
                            <comment id="17095293" author="zentol" created="Wed, 29 Apr 2020 09:48:38 +0000"  >&lt;p&gt;3.12.11 and 3.14.8 have been released with a fix.&lt;/p&gt;

&lt;p&gt;I&apos;d suggest to bump everything to 3.12.11, and add a release note that flink-swift-fs-hadoop may not work on later JDKs (it still relies on 2.4.0 transitively via hadoop; we can&apos;t bump that easily, but maybe it is not affected?)&lt;/p&gt;</comment>
                            <comment id="17100662" author="zentol" created="Wed, 6 May 2020 10:41:44 +0000"  >&lt;p&gt;This is currently breaking the kubernetes e2e test.&lt;/p&gt;</comment>
                            <comment id="17100700" author="rmetzger" created="Wed, 6 May 2020 11:29:57 +0000"  >&lt;p&gt;Actually, we have the issue on Azure as well? &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=674&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=674&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For better discoverability:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-05-06T09:43:38.0213229Z 2020-05-06 09:43:38,021 INFO  org.apache.flink.configuration.GlobalConfiguration           [] - Loading configuration property: jobmanager.execution.failover-strategy, region
2020-05-06T09:43:39.1410368Z 2020-05-06 09:43:38,949 ERROR org.apache.flink.kubernetes.cli.KubernetesSessionCli         [] - Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; running the Flink session.
2020-05-06T09:43:39.1412057Z io.fabric8.kubernetes.client.KubernetesClientException: Operation: [get]  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; kind: [Service]  with name: [flink-&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-k8s-session-1-&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;]  in namespace: [&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;]  failed.
2020-05-06T09:43:39.1413357Z 	at io.fabric8.kubernetes.client.KubernetesClientException.launderThrowable(KubernetesClientException.java:64) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1414777Z 	at io.fabric8.kubernetes.client.KubernetesClientException.launderThrowable(KubernetesClientException.java:72) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1416398Z 	at io.fabric8.kubernetes.client.dsl.base.BaseOperation.getMandatory(BaseOperation.java:231) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1417559Z 	at io.fabric8.kubernetes.client.dsl.base.BaseOperation.get(BaseOperation.java:164) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1418948Z 	at org.apache.flink.kubernetes.kubeclient.Fabric8FlinkKubeClient.getRestService(Fabric8FlinkKubeClient.java:201) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1420222Z 	at org.apache.flink.kubernetes.cli.KubernetesSessionCli.run(KubernetesSessionCli.java:104) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1422055Z 	at org.apache.flink.kubernetes.cli.KubernetesSessionCli.lambda$main$0(KubernetesSessionCli.java:185) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1423731Z 	at org.apache.flink.runtime.security.contexts.NoOpSecurityContext.runSecured(NoOpSecurityContext.java:30) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1424868Z 	at org.apache.flink.kubernetes.cli.KubernetesSessionCli.main(KubernetesSessionCli.java:185) [flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1425544Z Caused by: java.net.SocketException: Broken pipe (Write failed)
2020-05-06T09:43:39.1426133Z 	at java.net.SocketOutputStream.socketWrite0(Native Method) ~[?:1.8.0_252]
2020-05-06T09:43:39.1426567Z 	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:111) ~[?:1.8.0_252]
2020-05-06T09:43:39.1427091Z 	at java.net.SocketOutputStream.write(SocketOutputStream.java:155) ~[?:1.8.0_252]
2020-05-06T09:43:39.1478206Z 	at sun.security.ssl.OutputRecord.writeBuffer(OutputRecord.java:431) ~[?:1.8.0_252]
2020-05-06T09:43:39.1478717Z 	at sun.security.ssl.OutputRecord.write(OutputRecord.java:417) ~[?:1.8.0_252]
2020-05-06T09:43:39.1479815Z 	at sun.security.ssl.SSLSocketImpl.writeRecordInternal(SSLSocketImpl.java:894) ~[?:1.8.0_252]
2020-05-06T09:43:39.1480353Z 	at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:865) ~[?:1.8.0_252]
2020-05-06T09:43:39.1481024Z 	at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123) ~[?:1.8.0_252]
2020-05-06T09:43:39.1482062Z 	at org.apache.flink.kubernetes.shaded.okio.Okio$1.write(Okio.java:79) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1483535Z 	at org.apache.flink.kubernetes.shaded.okio.AsyncTimeout$1.write(AsyncTimeout.java:180) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1484750Z 	at org.apache.flink.kubernetes.shaded.okio.RealBufferedSink.flush(RealBufferedSink.java:224) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1485790Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http2.Http2Writer.settings(Http2Writer.java:203) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1486874Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http2.Http2Connection.start(Http2Connection.java:515) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1488261Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http2.Http2Connection.start(Http2Connection.java:505) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1490124Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.connection.RealConnection.startHttp2(RealConnection.java:298) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1491667Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.connection.RealConnection.establishProtocol(RealConnection.java:287) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1493131Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.connection.RealConnection.connect(RealConnection.java:168) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1494682Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.connection.StreamAllocation.findConnection(StreamAllocation.java:257) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1496363Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.connection.StreamAllocation.findHealthyConnection(StreamAllocation.java:135) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1497783Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.connection.StreamAllocation.newStream(StreamAllocation.java:114) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1499260Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:42) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1501504Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1504529Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1506765Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:93) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1508818Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1510932Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1512523Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1515317Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1517038Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:126) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1518474Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1521417Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1522997Z 	at io.fabric8.kubernetes.client.utils.BackwardsCompatibilityInterceptor.intercept(BackwardsCompatibilityInterceptor.java:119) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1524899Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1525970Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1527187Z 	at io.fabric8.kubernetes.client.utils.ImpersonatorInterceptor.intercept(ImpersonatorInterceptor.java:68) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1530414Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1532488Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1533927Z 	at io.fabric8.kubernetes.client.utils.HttpClientUtils.lambda$createHttpClient$3(HttpClientUtils.java:112) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1535766Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1536906Z 	at org.apache.flink.kubernetes.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1539160Z 	at org.apache.flink.kubernetes.shaded.okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:254) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1540772Z 	at org.apache.flink.kubernetes.shaded.okhttp3.RealCall.execute(RealCall.java:92) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1542910Z 	at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:411) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1545053Z 	at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:372) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1546526Z 	at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleGet(OperationSupport.java:337) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1547709Z 	at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleGet(OperationSupport.java:318) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1549744Z 	at io.fabric8.kubernetes.client.dsl.base.BaseOperation.handleGet(BaseOperation.java:812) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1551119Z 	at io.fabric8.kubernetes.client.dsl.base.BaseOperation.getMandatory(BaseOperation.java:220) ~[flink-dist_2.11-1.11-SNAPSHOT.jar:1.11-SNAPSHOT]
2020-05-06T09:43:39.1551712Z 	... 6 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17100705" author="zentol" created="Wed, 6 May 2020 11:35:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; yes, this is what I meant.&lt;/p&gt;</comment>
                            <comment id="17100707" author="rmetzger" created="Wed, 6 May 2020 11:38:15 +0000"  >&lt;p&gt;I didn&apos;t read your comments yet &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I was in a phone call while posting the failing build &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17100751" author="rmetzger" created="Wed, 6 May 2020 12:22:57 +0000"  >&lt;p&gt;I propose a temporary fix by using OpenJDK8u252 on Azure: &lt;a href=&quot;https://github.com/apache/flink/pull/12007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/12007&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17101360" author="rmetzger" created="Thu, 7 May 2020 04:29:20 +0000"  >&lt;p&gt;My proposed fix doesn&apos;t work. I will push a hotfix (once validated) that disables the e2e test until fixed.&lt;/p&gt;</comment>
                            <comment id="17101370" author="fly_in_gis" created="Thu, 7 May 2020 04:57:38 +0000"  >&lt;p&gt;I am not sure why the java version in azure upgrade from &quot;1.8.0_242&quot; to &quot;1.8.0_252&quot; from yesterday. It makes the K8 tests failed.&lt;/p&gt;</comment>
                            <comment id="17101372" author="fly_in_gis" created="Thu, 7 May 2020 05:03:07 +0000"  >&lt;p&gt;I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt;&#160;that if we want to solve the problem&#160;thoroughly, we need to bump the okhttp version to&#160;3.12.11 and 3.14.8.&lt;/p&gt;</comment>
                            <comment id="17101393" author="rmetzger" created="Thu, 7 May 2020 05:42:15 +0000"  >&lt;p&gt;I also agree that we need to bump okhttp, otherwise our users will run into the issue.&lt;br/&gt;
I disabled the failing test to make the build green again in &lt;a href=&quot;https://github.com/apache/flink/commit/ad46ca3ea8f445dcddde631978ecc7935d5fa8ae&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/ad46ca3ea8f445dcddde631978ecc7935d5fa8ae&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17101546" author="fly_in_gis" created="Thu, 7 May 2020 10:50:49 +0000"  >&lt;p&gt;It seems that bumping the okhttp version could not solve the problem. And i have found an interesting thing. The k8s session cluster with jdk 8u252 could work in a real K8s cluster. However, it could not work for the minikube.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It is not a same issue with&#160;&lt;a href=&quot;https://github.com/square/okhttp/issues/5970&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/square/okhttp/issues/5970&lt;/a&gt;. Since they have different stack trace.&lt;/p&gt;</comment>
                            <comment id="17101578" author="wangxiyuan" created="Thu, 7 May 2020 11:43:34 +0000"  >&lt;p&gt;Thanks for picking this up. Yang.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It looks that Flink use io.fabric8.kubernetes-client -&#160;4.5.2 which depends on an old version of okhttp. Is it possbile that the version of okhttp was overrode?&lt;/p&gt;

&lt;p&gt;I didn&apos;t test it locally, just a guess.&lt;/p&gt;

&lt;p&gt;It bumps the version of okhttp in 4.10.0 . &lt;a href=&quot;https://github.com/fabric8io/kubernetes-client/releases/tag/v4.10.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fabric8io/kubernetes-client/releases/tag/v4.10.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Maybe we should bump the version of kubernetes-client as well?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17101683" author="pnowojski" created="Thu, 7 May 2020 13:35:04 +0000"  >&lt;p&gt;Another instance on azure: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=743&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=743&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=1e2bbe5b-4657-50be-1f07-d84bfce5b1f5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17102173" author="fly_in_gis" created="Fri, 8 May 2020 02:07:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wangxiyuan&quot; class=&quot;user-hover&quot; rel=&quot;wangxiyuan&quot;&gt;wangxiyuan&lt;/a&gt;&#160;Thanks for your comments. We have already explicitly set the okhttp version and it could not take effect. Maybe this issue is also related with the minikube version since it could work in a real K8s cluster with java 8u252.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;!-- Set dependency version &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; transitive dependencies --&amp;gt;
&amp;lt;dependencyManagement&amp;gt;
   &amp;lt;dependencies&amp;gt;
      &amp;lt;dependency&amp;gt;
         &amp;lt;groupId&amp;gt;com.squareup.okhttp3&amp;lt;/groupId&amp;gt;
         &amp;lt;artifactId&amp;gt;okhttp&amp;lt;/artifactId&amp;gt;
         &amp;lt;version&amp;gt;3.12.11&amp;lt;/version&amp;gt;
      &amp;lt;/dependency&amp;gt;
   &amp;lt;/dependencies&amp;gt;
&amp;lt;/dependencyManagement&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I have attached a log file with setting &lt;tt&gt;-Djavax.net.debug=all&lt;/tt&gt; so that someone is familiar with ssl could provide more clues.&lt;/p&gt;</comment>
                            <comment id="17102637" author="rmetzger" created="Fri, 8 May 2020 14:39:22 +0000"  >&lt;p&gt;Side note: A user is affected by this as well: &lt;a href=&quot;https://lists.apache.org/thread.html/ra80f7abbceaa68f29e63916a40aaf592d23842c17da382278eb2755f%40%3Cuser.flink.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/ra80f7abbceaa68f29e63916a40aaf592d23842c17da382278eb2755f%40%3Cuser.flink.apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Maybe a backport to the Flink 1.10 line should be considered as well.&lt;/p&gt;</comment>
                            <comment id="17104034" author="fly_in_gis" created="Mon, 11 May 2020 03:30:55 +0000"  >&lt;p&gt;Some updates on this ticket.&lt;/p&gt;

&lt;p&gt;After more investigation and testing, i find that this issue is not directly caused by the bug of okhttp. Instead, it is related with both kubernetes version and jdk version.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;For jdk 8u252, the fabric8 kubernetes-client could only work on kubernetes v1.16 and lower versions.&lt;/li&gt;
	&lt;li&gt;For other jdk versions(e.g. 8u242, jdk11), i am not aware of the same issues. It seems that native K8s integration works well. The user in the ML have solved the problem after upgrading to jdk11.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I will keep in touch with the author of fabric8 kubernetes-client to verify when this could be resolved.&lt;br/&gt;
At the same time i will update the K8s e2e tests to use kubernetes version v1.16.9 and enable the e2e tests so that it will not block our general release cycle.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; What do you think?&lt;/p&gt;</comment>
                            <comment id="17104140" author="rmetzger" created="Mon, 11 May 2020 07:14:56 +0000"  >&lt;p&gt;Thanks a lot for the investigation!&lt;/p&gt;

&lt;p&gt;I agree that we can re-enable the e2e test by upgrading K8s.&lt;br/&gt;
What I&apos;m a bit worried about is the upcoming feature freeze this week: People with up-to-date K8s and Java versions will face this issue (unless  fabric8 releases something before the release).&lt;/p&gt;

&lt;p&gt;I would propose to keep this issue open as a blocker until Flink works again with all K8s / Java versions.&lt;/p&gt;</comment>
                            <comment id="17104147" author="fly_in_gis" created="Mon, 11 May 2020 07:22:10 +0000"  >&lt;p&gt;Yes, i agree with you that we should keep this ticket open. And i will make an offline discussion with the author of fabric8 kubernetes-client and post the conclusion here.&lt;/p&gt;</comment>
                            <comment id="17104154" author="rmetzger" created="Mon, 11 May 2020 07:31:29 +0000"  >&lt;p&gt;Thanks a lot!&lt;/p&gt;</comment>
                            <comment id="17104390" author="rmetzger" created="Mon, 11 May 2020 12:14:23 +0000"  >&lt;p&gt;CI is resolved in: &lt;a href=&quot;https://github.com/apache/flink/commit/5846e5458e20308db4f0dd1c87d511a60817472c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/5846e5458e20308db4f0dd1c87d511a60817472c&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/flink/commit/bbf9d955164f14040f891b47fb6cf3d1476009e3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/bbf9d955164f14040f891b47fb6cf3d1476009e3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you Yang!&lt;/p&gt;</comment>
                            <comment id="17107960" author="fly_in_gis" created="Fri, 15 May 2020 05:32:22 +0000"  >&lt;p&gt;Update on this issue.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;After some discussion with author of the fabric8 kubernetes-client&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, we have get a conclusion that kubernetes-client could not work with jdk 8u252 because of the okhttp bug. Currently, we could use &quot;export HTTP2_DISABLE=true&quot; to disable the http2.&lt;/p&gt;

&lt;p&gt;Once the fabric8 kubernetes new version(4.9.2, 4.10.2) released, we need to bump the version and get a clean solution.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&#160;&lt;a href=&quot;https://github.com/fabric8io/kubernetes-client/issues/2212&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fabric8io/kubernetes-client/issues/2212&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17110314" author="till.rohrmann" created="Mon, 18 May 2020 14:05:18 +0000"  >&lt;p&gt;Should the priority be Blocker &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt;? If I understand the problem correctly, then there is nothing Flink can directly do about it. Hence, this ticket should also not block the next release imo. If you agree, then please down grade the issue.&lt;/p&gt;</comment>
                            <comment id="17110778" author="fly_in_gis" created="Tue, 19 May 2020 02:20:03 +0000"  >&lt;p&gt;For now, the reasonable solution is bumping the fabric8 kubernetes-client version to latest(1.10.2). And then this issue will be fixed. I think it makes sense to downgrade the priority just as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;&#160;said we could not do anything in Flink to avoid this issue.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;BTW, let&apos;s move the discussion about bumping version to&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17565&quot; title=&quot;Bump fabric8 version from 4.5.2 to 4.9.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17565&quot;&gt;&lt;del&gt;FLINK-17565&lt;/del&gt;&lt;/a&gt;. I will also have more tests on the new kubernetes-client version.&lt;/p&gt;</comment>
                            <comment id="17126347" author="fly_in_gis" created="Fri, 5 Jun 2020 03:36:26 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17565&quot; title=&quot;Bump fabric8 version from 4.5.2 to 4.9.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17565&quot;&gt;&lt;del&gt;FLINK-17565&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13303548">FLINK-17565</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13304063">FLINK-17613</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13002356" name="log.k8s.session.8u252" size="141428" author="wangyang0918" created="Fri, 8 May 2020 02:31:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0e474:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>