<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:50:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-13733] FlinkKafkaInternalProducerITCase.testHappyPath fails on Travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-13733</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The &lt;tt&gt;FlinkKafkaInternalProducerITCase.testHappyPath&lt;/tt&gt; fails on Travis with &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Test testHappyPath(org.apache.flink.streaming.connectors.kafka.FlinkKafkaInternalProducerITCase) failed with:
java.util.NoSuchElementException
	at org.apache.kafka.common.utils.AbstractIterator.next(AbstractIterator.java:52)
	at org.apache.flink.shaded.guava18.com.google.common.collect.Iterators.getOnlyElement(Iterators.java:302)
	at org.apache.flink.shaded.guava18.com.google.common.collect.Iterables.getOnlyElement(Iterables.java:289)
	at org.apache.flink.streaming.connectors.kafka.FlinkKafkaInternalProducerITCase.assertRecord(FlinkKafkaInternalProducerITCase.java:169)
	at org.apache.flink.streaming.connectors.kafka.FlinkKafkaInternalProducerITCase.testHappyPath(FlinkKafkaInternalProducerITCase.java:70)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://api.travis-ci.org/v3/job/571870358/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/571870358/log.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13250952">FLINK-13733</key>
            <summary>FlinkKafkaInternalProducerITCase.testHappyPath fails on Travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="becket_qin">Jiangjie Qin</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 15 Aug 2019 06:46:57 +0000</created>
                <updated>Wed, 11 Nov 2020 06:00:40 +0000</updated>
                            <resolved>Wed, 11 Nov 2020 06:00:40 +0000</resolved>
                                    <version>1.9.0</version>
                    <version>1.10.0</version>
                    <version>1.11.0</version>
                    <version>1.12.0</version>
                                    <fixVersion>1.11.3</fixVersion>
                    <fixVersion>1.12.0</fixVersion>
                                    <component>Connectors / Kafka</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16907899" author="becket_qin" created="Thu, 15 Aug 2019 07:53:49 +0000"  >&lt;p&gt;This test itself is quite simple. It might fail because a particular message send to Kafka was unsuccessful and we did not check the status, or the record fetching took longer than expected. This could happen when the testing machine is super busy or experienced a long GC.&lt;/p&gt;

&lt;p&gt;In term of the fix, it might make sense to do the following:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;ensure each step was done successfully, e.g. a message send callback fired successfully.&lt;/li&gt;
	&lt;li&gt;Extend the timeout a little bit, e.g. give it 30 seconds to fetch a record rather than 10 seconds.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17002737" author="becket_qin" created="Tue, 24 Dec 2019 09:06:26 +0000"  >&lt;p&gt;It looks that this issue only happened once. I&apos;ll close the ticket for now. If this happen again we can enhance the message delivery guarantee.&lt;/p&gt;</comment>
                            <comment id="17089322" author="rmetzger" created="Wed, 22 Apr 2020 06:09:30 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=7851&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=684b1416-4c17-504e-d5ab-97ee44e08a20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=7851&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=684b1416-4c17-504e-d5ab-97ee44e08a20&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Attached logs to ticket.&lt;/p&gt;</comment>
                            <comment id="17114127" author="till.rohrmann" created="Fri, 22 May 2020 14:58:41 +0000"  >&lt;p&gt;The issue seems to have reoccurred. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; please re-open closed issues if the problem seems to still exist.&lt;/p&gt;</comment>
                            <comment id="17115011" author="becket_qin" created="Sun, 24 May 2020 02:04:12 +0000"  >&lt;p&gt;I am not completely sure what caused the problem. One guess is that the consumer was not able to connect to the broker to begin with. If so, this is more of a connectivity issue of the environment. I am adding some debugging code here to give more information in case this happen again.&lt;/p&gt;</comment>
                            <comment id="17130599" author="till.rohrmann" created="Wed, 10 Jun 2020 12:19:26 +0000"  >&lt;p&gt;Another instance &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3018&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=03dca39c-73e8-5aaf-601d-328ae5c35f20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3018&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=03dca39c-73e8-5aaf-601d-328ae5c35f20&lt;/a&gt;. This time the &lt;tt&gt;FlinkKafkaProducerITCase.testHappyPath&lt;/tt&gt; failed but with a very similar exception message.&lt;/p&gt;</comment>
                            <comment id="17133579" author="rmetzger" created="Thu, 11 Jun 2020 18:43:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3298&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=684b1416-4c17-504e-d5ab-97ee44e08a20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3298&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=684b1416-4c17-504e-d5ab-97ee44e08a20&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17137792" author="rmetzger" created="Tue, 16 Jun 2020 17:51:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3577&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=34f486e1-e1e4-5dd2-9c06-bfdd9b9c74a8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3577&amp;amp;view=logs&amp;amp;j=d44f43ce-542c-597d-bf94-b0718c71e5e8&amp;amp;t=34f486e1-e1e4-5dd2-9c06-bfdd9b9c74a8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17140265" author="pnowojski" created="Fri, 19 Jun 2020 06:50:49 +0000"  >&lt;p&gt;Another instance &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3794&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=684b1416-4c17-504e-d5ab-97ee44e08a20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3794&amp;amp;view=logs&amp;amp;j=c5f0071e-1851-543e-9a45-9ac140befc32&amp;amp;t=684b1416-4c17-504e-d5ab-97ee44e08a20&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17191418" author="dian.fu" created="Mon, 7 Sep 2020 03:03:51 +0000"  >&lt;p&gt;Another instance on master:&#160;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=6256&amp;amp;view=logs&amp;amp;j=1fc6e7bf-633c-5081-c32a-9dea24b05730&amp;amp;t=80a658d1-f7f6-5d93-2758-53ac19fd5b19&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=6256&amp;amp;view=logs&amp;amp;j=1fc6e7bf-633c-5081-c32a-9dea24b05730&amp;amp;t=80a658d1-f7f6-5d93-2758-53ac19fd5b19&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17199112" author="renqs" created="Mon, 21 Sep 2020 01:51:03 +0000"  >&lt;p&gt;Hello everyone, I ran this test case locally with TRACE level log. Records are indeed produced to and logged by Kafka, but the consumer was just closed after it sends consume request and before getting response from the broker. I think we can extend the timeout value of kafkaConsumer.poll() method in assertRecord a little bit. I&apos;ll create a PR for this.&#160;&lt;/p&gt;</comment>
                            <comment id="17201215" author="dian.fu" created="Thu, 24 Sep 2020 02:04:35 +0000"  >&lt;p&gt;Another instance on 1.11: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=6871&amp;amp;view=logs&amp;amp;j=ba53eb01-1462-56a3-8e98-0dd97fbcaab5&amp;amp;t=eb5f4d19-2d2d-5856-a4ce-acf5f904a994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=6871&amp;amp;view=logs&amp;amp;j=ba53eb01-1462-56a3-8e98-0dd97fbcaab5&amp;amp;t=eb5f4d19-2d2d-5856-a4ce-acf5f904a994&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17225570" author="stephanewen" created="Tue, 3 Nov 2020 17:12:59 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://dev.azure.com/sewen0794/19b23adf-d190-4fb4-ae6e-2e92b08923a3/_apis/build/builds/168/logs/82&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/sewen0794/19b23adf-d190-4fb4-ae6e-2e92b08923a3/_apis/build/builds/168/logs/82&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17225768" author="dian.fu" created="Wed, 4 Nov 2020 01:45:26 +0000"  >&lt;p&gt;Another instance on 1.11: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=8925&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=19faa67c-fc43-55af-ba4e-7519fca274b5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=8925&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=19faa67c-fc43-55af-ba4e-7519fca274b5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17228914" author="dian.fu" created="Tue, 10 Nov 2020 02:04:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9362&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=19faa67c-fc43-55af-ba4e-7519fca274b5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=9362&amp;amp;view=logs&amp;amp;j=72d4811f-9f0d-5fd0-014a-0bc26b72b642&amp;amp;t=19faa67c-fc43-55af-ba4e-7519fca274b5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17229008" author="rmetzger" created="Tue, 10 Nov 2020 06:26:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=renqs&quot; class=&quot;user-hover&quot; rel=&quot;renqs&quot;&gt;renqs&lt;/a&gt; what&apos;s the status of the PR increasing the timeout?&lt;/p&gt;</comment>
                            <comment id="17229025" author="renqs" created="Tue, 10 Nov 2020 07:16:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt;&#160;Sorry for my late response! I&apos;ll create a PR to fix this now. Thanks for your reminder~&#160;&lt;/p&gt;</comment>
                            <comment id="17229761" author="becket_qin" created="Wed, 11 Nov 2020 05:59:09 +0000"  >&lt;p&gt;The patch has been merged to master.&lt;br/&gt;
cb2d137adc9ea1e46a67513c1e0f2469bb05bff4&lt;/p&gt;

&lt;p&gt; I am closing the ticket. Hopefully we don&apos;t see the unstability again.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13306304">FLINK-17851</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13000792" name="20200421.13.tar.gz" size="1610791" author="rmetzger" created="Wed, 22 Apr 2020 06:09:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05osw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>