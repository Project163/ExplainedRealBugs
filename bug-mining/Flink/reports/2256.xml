<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:32:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8451] CaseClassSerializer is not backwards compatible in 1.4</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8451</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;There seems to be problems with the updated Scala version and the CaseClassSerializer that make it impossible to restore from a Flink 1.3 savepoint.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/flink-user/201801.mbox/%3CCACk7FThV5itjSj_1fG9oaWS86z8WTKWs7abHvok6FnHzq9XT-A%40mail.gmail.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/flink-user/201801.mbox/%3CCACk7FThV5itjSj_1fG9oaWS86z8WTKWs7abHvok6FnHzq9XT-A%40mail.gmail.com%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/flink-user/201801.mbox/%3C7CABB00B-D52F-4878-B04F-201415CEB658%40mediamath.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/flink-user/201801.mbox/%3C7CABB00B-D52F-4878-B04F-201415CEB658%40mediamath.com%3E&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13131869">FLINK-8451</key>
            <summary>CaseClassSerializer is not backwards compatible in 1.4</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twalthr">Timo Walther</assignee>
                                    <reporter username="twalthr">Timo Walther</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jan 2018 12:58:53 +0000</created>
                <updated>Thu, 15 Mar 2018 16:49:49 +0000</updated>
                            <resolved>Wed, 28 Feb 2018 12:41:50 +0000</resolved>
                                    <version>1.4.0</version>
                    <version>1.5.0</version>
                                    <fixVersion>1.4.2</fixVersion>
                    <fixVersion>1.5.0</fixVersion>
                                    <component>API / Type Serialization System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16330562" author="shashank734" created="Thu, 18 Jan 2018 14:21:52 +0000"  >&lt;p&gt;I have taken savepoint from 1.4 and tried to restore on itself 1.4 but still, it&apos;s failing. I haven&apos;t changed any code or version. I am using java.utill.list, option and Seq in my case class. I am getting following error while restore :&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalStateException: Could not initialize keyed state backend.
	at org.apache.flink.streaming.api.operators.AbstractStreamOperator.initKeyedState(AbstractStreamOperator.java:293)
	at org.apache.flink.streaming.api.operators.AbstractStreamOperator.initializeState(AbstractStreamOperator.java:225)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.initializeOperators(StreamTask.java:692)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.initializeState(StreamTask.java:679)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:253)
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:718)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: java.io.InvalidClassException: org.apache.flink.cep.scala.pattern.Pattern$$anon$3; invalid descriptor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; field 
	at java.io.ObjectStreamClass.readNonProxy(ObjectStreamClass.java:723)
	at java.io.ObjectInputStream.readClassDescriptor(ObjectInputStream.java:833)
	at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1609)
	at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1521)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1781)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1353)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:373)
	at org.apache.flink.cep.nfa.NFA$NFASerializer.deserializeCondition(NFA.java:1171)
	at org.apache.flink.cep.nfa.NFA$NFASerializer.deserializeStates(NFA.java:1129)
	at org.apache.flink.cep.nfa.NFA$NFASerializer.deserialize(NFA.java:917)
	at org.apache.flink.cep.nfa.NFA$NFASerializer.deserialize(NFA.java:820)
	at org.apache.flink.runtime.state.heap.StateTableByKeyGroupReaders$StateTableByKeyGroupReaderV2V3.readMappingsInKeyGroup(StateTableByKeyGroupReaders.java:133)
	at org.apache.flink.runtime.state.heap.HeapKeyedStateBackend.restorePartitionedState(HeapKeyedStateBackend.java:575)
	at org.apache.flink.runtime.state.heap.HeapKeyedStateBackend.restore(HeapKeyedStateBackend.java:446)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.createKeyedStateBackend(StreamTask.java:773)
	at org.apache.flink.streaming.api.operators.AbstractStreamOperator.initKeyedState(AbstractStreamOperator.java:283)
	... 6 more
Caused by: java.lang.IllegalArgumentException: illegal signature
	at java.io.ObjectStreamField.&amp;lt;init&amp;gt;(ObjectStreamField.java:122)
	at java.io.ObjectStreamClass.readNonProxy(ObjectStreamClass.java:721)
	... 21 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16357291" author="tzulitai" created="Thu, 8 Feb 2018 17:45:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shashank734&quot; class=&quot;user-hover&quot; rel=&quot;shashank734&quot;&gt;shashank734&lt;/a&gt; the stack trace you posted seems to direct to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-7760&quot; title=&quot;Restore failing from external checkpointing metadata.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-7760&quot;&gt;&lt;del&gt;FLINK-7760&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;As per-discussion in the mailing lists, we will not continue to block 1.4.1 for issues that are missing a pull request.&lt;br/&gt;
Moving this to 1.4.2. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; let me know if you disagree, thanks.&lt;/p&gt;</comment>
                            <comment id="16357300" author="twalthr" created="Thu, 8 Feb 2018 17:50:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt; yes, 1.4.2 is fine for me.&lt;/p&gt;</comment>
                            <comment id="16374113" author="githubbot" created="Fri, 23 Feb 2018 09:17:50 +0000"  >&lt;p&gt;GitHub user twalthr opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8451&quot; title=&quot;CaseClassSerializer is not backwards compatible in 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8451&quot;&gt;&lt;del&gt;FLINK-8451&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;serializers&amp;#93;&lt;/span&gt; Make Scala tuple serializer deserialization more failure tolerant&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Scala tuples (and thus also case classes) classes are serialized together with their serializers. The `serialVersionUID` changed from Scala 2.10 to 2.11. We need to ignore those changes when reading a serializer config snapshot.&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make deserialization more failure tolerant&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;See `org.apache.flink.api.scala.runtime.TupleSerializerCompatibilityTest`&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): no&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: no&lt;/li&gt;
	&lt;li&gt;The serializers: yes&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): no&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: no&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: no&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/twalthr/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/twalthr/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8451&quot; title=&quot;CaseClassSerializer is not backwards compatible in 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8451&quot;&gt;&lt;del&gt;FLINK-8451&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5567&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3855837fe3d79c473c59ad892daabbb45f711c47&lt;br/&gt;
Author: Timo Walther &amp;lt;twalthr@...&amp;gt;&lt;br/&gt;
Date:   2018-02-22T16:22:54Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8451&quot; title=&quot;CaseClassSerializer is not backwards compatible in 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8451&quot;&gt;&lt;del&gt;FLINK-8451&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;serializers&amp;#93;&lt;/span&gt; Make Scala tuple serializer deserialization more failure tolerant&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16374114" author="githubbot" created="Fri, 23 Feb 2018 09:18:18 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    CC @tzulitai @aljoscha &lt;/p&gt;</comment>
                            <comment id="16374188" author="githubbot" created="Fri, 23 Feb 2018 10:23:19 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567#discussion_r170215340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567#discussion_r170215340&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/util/InstantiationUtil.java &amp;#8212;&lt;br/&gt;
    @@ -121,10 +121,53 @@ public ClassLoaderObjectInputStream(InputStream in, ClassLoader classLoader) thr&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EnumValueSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.OptionSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.TrySerializer&quot;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EitherSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.UnitSerializer&quot;);&lt;br/&gt;
     	}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * The serialVersionUID might change between Scala versions and since those classes are&lt;br/&gt;
    +	 * part of the tuple serializer config snapshots we need to ignore them.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * See also &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8451&quot; title=&quot;CaseClassSerializer is not backwards compatible in 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8451&quot;&gt;&lt;del&gt;FLINK-8451&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private static Set&amp;lt;String&amp;gt; scalaTypes = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    make final?&lt;/p&gt;</comment>
                            <comment id="16374244" author="githubbot" created="Fri, 23 Feb 2018 11:38:57 +0000"  >&lt;p&gt;Github user tzulitai commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567#discussion_r170231102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567#discussion_r170231102&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/util/InstantiationUtil.java &amp;#8212;&lt;br/&gt;
    @@ -121,10 +121,53 @@ public ClassLoaderObjectInputStream(InputStream in, ClassLoader classLoader) thr&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EnumValueSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.OptionSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.TrySerializer&quot;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EitherSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.UnitSerializer&quot;);&lt;br/&gt;
     	}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * The serialVersionUID might change between Scala versions and since those classes are&lt;br/&gt;
    +	 * part of the tuple serializer config snapshots we need to ignore them.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * See also &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8451&quot; title=&quot;CaseClassSerializer is not backwards compatible in 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8451&quot;&gt;&lt;del&gt;FLINK-8451&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private static Set&amp;lt;String&amp;gt; scalaTypes = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
    +	static {&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple1&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple2&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple3&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple4&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple5&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple6&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple7&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple8&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple9&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple10&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple11&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple12&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple13&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple14&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple15&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple16&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple17&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple18&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple19&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple20&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple21&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple22&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple1$mcJ$sp&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple1$mcI$sp&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Could you briefly explain what these are?&lt;/p&gt;</comment>
                            <comment id="16374247" author="githubbot" created="Fri, 23 Feb 2018 11:41:49 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    A few side notes:&lt;br/&gt;
    1) Maybe we should have written just the arity of tuples in the config snapshots. That would have avoided this issue.&lt;br/&gt;
    2) Is there any potential cases like this one, for other Scala types beside Tuples?&lt;/p&gt;</comment>
                            <comment id="16374321" author="githubbot" created="Fri, 23 Feb 2018 13:14:30 +0000"  >&lt;p&gt;Github user twalthr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567#discussion_r170247807&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567#discussion_r170247807&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/util/InstantiationUtil.java &amp;#8212;&lt;br/&gt;
    @@ -121,10 +121,53 @@ public ClassLoaderObjectInputStream(InputStream in, ClassLoader classLoader) thr&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EnumValueSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.OptionSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.TrySerializer&quot;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EitherSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.UnitSerializer&quot;);&lt;br/&gt;
     	}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * The serialVersionUID might change between Scala versions and since those classes are&lt;br/&gt;
    +	 * part of the tuple serializer config snapshots we need to ignore them.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * See also &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8451&quot; title=&quot;CaseClassSerializer is not backwards compatible in 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8451&quot;&gt;&lt;del&gt;FLINK-8451&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private static Set&amp;lt;String&amp;gt; scalaTypes = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
    +	static {&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple1&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple2&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple3&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple4&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple5&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple6&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple7&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple8&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple9&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple10&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple11&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple12&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple13&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple14&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple15&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple16&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple17&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple18&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple19&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple20&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple21&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple22&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple1$mcJ$sp&quot;);&lt;br/&gt;
    +		scalaTypes.add(&quot;scala.Tuple1$mcI$sp&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    These anonymous classes are used for type specific tuples. Like `II` for a `(Int, Int)`. I don&apos;t know exactly when they are inserted by the compiler but I added them just to be sure.&lt;/p&gt;</comment>
                            <comment id="16374326" author="githubbot" created="Fri, 23 Feb 2018 13:21:25 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai I think just writing out the arity is not enough. It really depends on the type of tuple. Maybe it would have been better to write out only the name of the class. But since we support tuple POJOs this might be a little bit risky. The tuple serializer serializes general subclasses for both Java and Scala and case classes.&lt;/p&gt;

&lt;p&gt;    I tested case classes, tuples, `Either` and `Unit`. What do you think we should test as well? The other serializers do not include classes that need to be snapshotted.&lt;/p&gt;</comment>
                            <comment id="16376823" author="githubbot" created="Mon, 26 Feb 2018 12:59:27 +0000"  >&lt;p&gt;Github user tzulitai commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @twalthr I see. Then for other Scala types whose serializer config snapshot does not require writing classes, we probably don&apos;t need to include them in the `FailureTolerantObjectInputStream` then.&lt;/p&gt;</comment>
                            <comment id="16378307" author="githubbot" created="Tue, 27 Feb 2018 09:50:54 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tzulitai exactly, I think tuples/case classes are just a special case. @aljoscha are we going to merge this now? (given the checkstyle error is fixed)&lt;/p&gt;</comment>
                            <comment id="16380153" author="githubbot" created="Wed, 28 Feb 2018 11:21:09 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567#discussion_r171212166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567#discussion_r171212166&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/util/InstantiationUtil.java &amp;#8212;&lt;br/&gt;
    @@ -113,18 +113,61 @@ public ClassLoaderObjectInputStream(InputStream in, ClassLoader classLoader) thr&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;This can be removed once 1.2 is no longer supported.&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static Set&amp;lt;String&amp;gt; scalaSerializerClassnames = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
    +	private final static Set&amp;lt;String&amp;gt; scalaSerializerClassnames = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
     	static {&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.TraversableSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.CaseClassSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EitherSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EnumValueSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.OptionSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.TrySerializer&quot;);&lt;/li&gt;
	&lt;li&gt;scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EitherSerializer&quot;);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Why is this removed?&lt;/p&gt;</comment>
                            <comment id="16380157" author="githubbot" created="Wed, 28 Feb 2018 11:22:52 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567#discussion_r171214451&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567#discussion_r171214451&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/util/InstantiationUtil.java &amp;#8212;&lt;br/&gt;
    @@ -113,18 +113,61 @@ public ClassLoaderObjectInputStream(InputStream in, ClassLoader classLoader) thr&lt;br/&gt;
     	 *&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;This can be removed once 1.2 is no longer supported.&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static Set&amp;lt;String&amp;gt; scalaSerializerClassnames = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
    +	private final static Set&amp;lt;String&amp;gt; scalaSerializerClassnames = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
     	static {&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.TraversableSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.CaseClassSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EitherSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EnumValueSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.OptionSerializer&quot;);&lt;br/&gt;
     		scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.TrySerializer&quot;);&lt;/li&gt;
	&lt;li&gt;scalaSerializerClassnames.add(&quot;org.apache.flink.api.scala.typeutils.EitherSerializer&quot;);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    nvm, @twalthr pointed out that it was in there twice&lt;/p&gt;</comment>
                            <comment id="16380221" author="githubbot" created="Wed, 28 Feb 2018 12:33:05 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16380243" author="twalthr" created="Wed, 28 Feb 2018 12:41:50 +0000"  >&lt;p&gt;Fixed in 1.6.0: 6c837d738f90ccf140ad2288cd24f3706babd63c&lt;br/&gt;
Fixed in 1.5.0: 302aaeb021bacf3f37cb9a3ee236304c94adbf30&lt;br/&gt;
Fixed in 1.4.2: 93f823fff7b1517cc3f2484fa0091ebdc9e546d0&lt;/p&gt;</comment>
                            <comment id="16381702" author="githubbot" created="Thu, 1 Mar 2018 09:09:33 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to what Gordon suggested.&lt;/p&gt;

&lt;p&gt;    Let&apos;s move towards avoiding writing classes alltogether in any config snapshot. Tuple arity is the right thing for tuples, plus ideally a format version number.&lt;/p&gt;</comment>
                            <comment id="16381768" author="githubbot" created="Thu, 1 Mar 2018 09:55:48 +0000"  >&lt;p&gt;Github user twalthr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @StephanEwen a tuple arity would be enough if the tuple serializer would only serialize tuples but it also serializes case classes and POJOs. Wouldn&apos;t be the fully qualified name better? But yes writing classes should be avoided.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p28f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>