<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:29:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6987] TextInputFormatTest fails when run in path containing spaces</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6987</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The test &lt;tt&gt;TextInputFormatTest.testNestedFileRead&lt;/tt&gt; fails if the path contains spaces.&lt;/p&gt;

&lt;p&gt;Reason: &quot;Test erroneous&quot;&lt;/p&gt;

&lt;p&gt;I was building Flink on MacOS 10.12.5 and the folder was called &quot;flink-1.3.1 2&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13081808">FLINK-6987</key>
            <summary>TextInputFormatTest fails when run in path containing spaces</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mingleizhang">zhangminglei</assignee>
                                    <reporter username="twalthr">Timo Walther</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Jun 2017 14:45:40 +0000</created>
                <updated>Sat, 1 Jul 2017 10:10:17 +0000</updated>
                            <resolved>Sat, 1 Jul 2017 10:10:17 +0000</resolved>
                                    <version>1.3.1</version>
                                    <fixVersion>1.3.2</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Build System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16059584" author="mingleizhang" created="Thu, 22 Jun 2017 16:02:21 +0000"  >&lt;p&gt;I just test on my windows 7. Also happened. I will give a PR to fix this issue soon enough.&lt;/p&gt;</comment>
                            <comment id="16059598" author="githubbot" created="Thu, 22 Jun 2017 16:06:52 +0000"  >&lt;p&gt;GitHub user zhangminglei opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6987&quot; title=&quot;TextInputFormatTest fails when run in path containing spaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6987&quot;&gt;&lt;del&gt;FLINK-6987&lt;/del&gt;&lt;/a&gt; Fix erroneous when path containing spaces&lt;/p&gt;

&lt;p&gt;    Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.&lt;br/&gt;
    If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the &lt;span class=&quot;error&quot;&gt;&amp;#91;How To Contribute guide&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://flink.apache.org/how-to-contribute.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://flink.apache.org/how-to-contribute.html&lt;/a&gt;).&lt;br/&gt;
    In addition to going through the list, please provide a meaningful description of your changes.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] General&lt;/li&gt;
	&lt;li&gt;The pull request references the related JIRA issue (&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;FLINK-XXX&amp;#93;&lt;/span&gt; Jira title text&quot;)&lt;/li&gt;
	&lt;li&gt;The pull request addresses only one issue&lt;/li&gt;
	&lt;li&gt;Each commit in the PR has a meaningful commit message (including the JIRA id)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Documentation&lt;/li&gt;
	&lt;li&gt;Documentation has been added for new functionality&lt;/li&gt;
	&lt;li&gt;Old documentation affected by the pull request has been updated&lt;/li&gt;
	&lt;li&gt;JavaDoc for public methods has been added&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Tests &amp;amp; Build&lt;/li&gt;
	&lt;li&gt;Functionality added by the pull request is covered by tests&lt;/li&gt;
	&lt;li&gt;`mvn clean verify` has been executed successfully locally or a Travis build has passed&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zhangminglei/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zhangminglei/flink&lt;/a&gt; flink-6987&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4168&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b146f8e085f45b801cb8411962c6e3cc95f206c9&lt;br/&gt;
Author: zhangminglei &amp;lt;zml13856086071@163.com&amp;gt;&lt;br/&gt;
Date:   2017-06-22T16:05:44Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6987&quot; title=&quot;TextInputFormatTest fails when run in path containing spaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6987&quot;&gt;&lt;del&gt;FLINK-6987&lt;/del&gt;&lt;/a&gt; Fix erroneous when path containing spaces&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16059606" author="githubbot" created="Thu, 22 Jun 2017 16:08:03 +0000"  >&lt;p&gt;Github user zhangminglei commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @twalthr , you can test it again. I think it works fine now. &lt;/p&gt;</comment>
                            <comment id="16059621" author="githubbot" created="Thu, 22 Jun 2017 16:13:49 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I doubt this fixes the underlying issue, it just masks it by storing the input files in paths containing spaces.&lt;/p&gt;</comment>
                            <comment id="16059657" author="githubbot" created="Thu, 22 Jun 2017 16:40:16 +0000"  >&lt;p&gt;Github user zhangminglei commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I dont think it has an underlying issue as below line of code throw an error, and it is not relavant to the ```TextInputFormat``` class . ```tmpDir``` has spaces and then trigger that problem.  If my understanding is wrong, please help me out. &lt;/p&gt;

&lt;p&gt;    ```File tempFile = File.createTempFile(&quot;TextInputFormatTest&quot;, &quot;.tmp&quot;, tmpDir);```&lt;/p&gt;


</comment>
                            <comment id="16059669" author="githubbot" created="Thu, 22 Jun 2017 16:48:05 +0000"  >&lt;p&gt;Github user zhangminglei commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Oops. I might be wrong. I will check again.&lt;/p&gt;</comment>
                            <comment id="16060486" author="githubbot" created="Fri, 23 Jun 2017 07:08:23 +0000"  >&lt;p&gt;Github user zhangminglei commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @twalthr  for reporting this VERY good issue. And thanks @zentol for looking over it. PR has been updated. I misread the error from JIRA before , so literally used ```trim()``` to solve and it was proved to be wrong.&lt;/p&gt;</comment>
                            <comment id="16060512" author="githubbot" created="Fri, 23 Jun 2017 07:27:27 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168#discussion_r123687252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168#discussion_r123687252&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/FileInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -461,8 +463,9 @@ public LocatableInputSplitAssigner getInputSplitAssigner(FileInputSplit[] splits&lt;/p&gt;

&lt;p&gt;     		// take the desired number of splits into account&lt;br/&gt;
     		minNumSplits = Math.max(minNumSplits, this.numSplits);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;final Path path = this.filePath;&lt;br/&gt;
    +&lt;br/&gt;
    +		final Path path = new Path(URLDecoder.decode(this.filePath.toString(), Charset.defaultCharset().name()));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Pretty sure this fails on windows.&lt;/p&gt;</comment>
                            <comment id="16060524" author="githubbot" created="Fri, 23 Jun 2017 07:43:48 +0000"  >&lt;p&gt;Github user zhangminglei commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168#discussion_r123689575&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168#discussion_r123689575&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/FileInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -461,8 +463,9 @@ public LocatableInputSplitAssigner getInputSplitAssigner(FileInputSplit[] splits&lt;/p&gt;

&lt;p&gt;     		// take the desired number of splits into account&lt;br/&gt;
     		minNumSplits = Math.max(minNumSplits, this.numSplits);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;final Path path = this.filePath;&lt;br/&gt;
    +&lt;br/&gt;
    +		final Path path = new Path(URLDecoder.decode(this.filePath.toString(), Charset.defaultCharset().name()));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    What do you mean ? My computer is windows and operation system belongs to windows 7. I didnt get any error with this line of code and with a folder called ```flink-1.3.1 2```  to build it with test. Test passed with ```flink-1.3.1 2``` when build flink.&lt;/p&gt;</comment>
                            <comment id="16060544" author="githubbot" created="Fri, 23 Jun 2017 08:02:38 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168#discussion_r123692542&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168#discussion_r123692542&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/FileInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -461,8 +463,9 @@ public LocatableInputSplitAssigner getInputSplitAssigner(FileInputSplit[] splits&lt;/p&gt;

&lt;p&gt;     		// take the desired number of splits into account&lt;br/&gt;
     		minNumSplits = Math.max(minNumSplits, this.numSplits);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;final Path path = this.filePath;&lt;br/&gt;
    +&lt;br/&gt;
    +		final Path path = new Path(URLDecoder.decode(this.filePath.toString(), Charset.defaultCharset().name()));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Typically, when going from flink paths to Strings to jave file API&apos;s on Windows you get exceptions since Flink paths on Windows always start with a &quot;/&quot;. But this call never goes through the file API, hence it does succeed.&lt;/p&gt;

&lt;p&gt;    Anyway, an easier solution is to simply not call `URI#toString` when calling the `Path` constructor in the tests. Then the spaces aren&apos;t escaped and the tests succeed.&lt;/p&gt;</comment>
                            <comment id="16060757" author="githubbot" created="Fri, 23 Jun 2017 11:24:39 +0000"  >&lt;p&gt;Github user zhangminglei commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168#discussion_r123726433&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168#discussion_r123726433&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/FileInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -461,8 +463,9 @@ public LocatableInputSplitAssigner getInputSplitAssigner(FileInputSplit[] splits&lt;/p&gt;

&lt;p&gt;     		// take the desired number of splits into account&lt;br/&gt;
     		minNumSplits = Math.max(minNumSplits, this.numSplits);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;final Path path = this.filePath;&lt;br/&gt;
    +&lt;br/&gt;
    +		final Path path = new Path(URLDecoder.decode(this.filePath.toString(), Charset.defaultCharset().name()));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    An awesome solution always welcomed.  I can literally use ```parentDir.toString()``` to avoid that issue.  Not to call ```parentDir.toURI().toString().```&lt;/p&gt;</comment>
                            <comment id="16060862" author="githubbot" created="Fri, 23 Jun 2017 13:08:23 +0000"  >&lt;p&gt;Github user zhangminglei commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168#discussion_r123743180&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168#discussion_r123743180&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/FileInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -461,8 +463,9 @@ public LocatableInputSplitAssigner getInputSplitAssigner(FileInputSplit[] splits&lt;/p&gt;

&lt;p&gt;     		// take the desired number of splits into account&lt;br/&gt;
     		minNumSplits = Math.max(minNumSplits, this.numSplits);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;final Path path = this.filePath;&lt;br/&gt;
    +&lt;br/&gt;
    +		final Path path = new Path(URLDecoder.decode(this.filePath.toString(), Charset.defaultCharset().name()));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    We can also use ```parentDir.getAbsoluteFile().toString()``` to hack that. Not very sure about which way is better. I would think ```parentDir.getAbsoluteFile().toString()``` is better as it can obtain the whole path. What do you think ? @zentol &lt;/p&gt;</comment>
                            <comment id="16062913" author="githubbot" created="Mon, 26 Jun 2017 10:50:47 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168#discussion_r123980520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168#discussion_r123980520&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/FileInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -461,8 +463,9 @@ public LocatableInputSplitAssigner getInputSplitAssigner(FileInputSplit[] splits&lt;/p&gt;

&lt;p&gt;     		// take the desired number of splits into account&lt;br/&gt;
     		minNumSplits = Math.max(minNumSplits, this.numSplits);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;final Path path = this.filePath;&lt;br/&gt;
    +&lt;br/&gt;
    +		final Path path = new Path(URLDecoder.decode(this.filePath.toString(), Charset.defaultCharset().name()));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I would keep the conversion to an URI for the sake of making less changes to the test.&lt;/p&gt;</comment>
                            <comment id="16064174" author="githubbot" created="Tue, 27 Jun 2017 02:53:27 +0000"  >&lt;p&gt;Github user zhangminglei commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168#discussion_r124168503&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168#discussion_r124168503&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/FileInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -461,8 +463,9 @@ public LocatableInputSplitAssigner getInputSplitAssigner(FileInputSplit[] splits&lt;/p&gt;

&lt;p&gt;     		// take the desired number of splits into account&lt;br/&gt;
     		minNumSplits = Math.max(minNumSplits, this.numSplits);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;final Path path = this.filePath;&lt;br/&gt;
    +&lt;br/&gt;
    +		final Path path = new Path(URLDecoder.decode(this.filePath.toString(), Charset.defaultCharset().name()));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Oh. Yeah. You are very correct, we need make the less changes to test. PR will update soon today.&lt;/p&gt;</comment>
                            <comment id="16064232" author="githubbot" created="Tue, 27 Jun 2017 04:17:53 +0000"  >&lt;p&gt;Github user zhangminglei commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168#discussion_r124175328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168#discussion_r124175328&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/FileInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -461,8 +463,9 @@ public LocatableInputSplitAssigner getInputSplitAssigner(FileInputSplit[] splits&lt;/p&gt;

&lt;p&gt;     		// take the desired number of splits into account&lt;br/&gt;
     		minNumSplits = Math.max(minNumSplits, this.numSplits);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;final Path path = this.filePath;&lt;br/&gt;
    +&lt;br/&gt;
    +		final Path path = new Path(URLDecoder.decode(this.filePath.toString(), Charset.defaultCharset().name()));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I have updated the code. Please check again. One thing we should concern though. &lt;/p&gt;

&lt;p&gt;    FYI, though, it is not very relevant to this issue here.&lt;/p&gt;

&lt;p&gt;    We can see, for *&lt;b&gt;1&lt;/b&gt;* and *&lt;b&gt;2&lt;/b&gt;* output results, they are both the same. That is to say, call ```toString()``` from ```toURI()``` does not change the internal of the result. But, if we call them in context of ```flink.core.fs.Path```. what I got is *&lt;b&gt;3&lt;/b&gt;* and *&lt;b&gt;4&lt;/b&gt;* outputs. *&lt;b&gt;It seems ```new Path``` change someting stuff&lt;/b&gt;*. I guess that we  should expect that not happen under this context. Instead, I expect ```new Path(parentDirTest.toURI().toString())``` return the same value as ```new Path(parentDirTest.toURI())```. Now, they are not equal. &lt;/p&gt;

&lt;p&gt;    ```File parentDirTest = new File(&quot;D:\\projects&lt;br class=&quot;atl-forced-newline&quot; /&gt;hello world&quot;);```&lt;br/&gt;
    ```System.out.println(parentDirTest.toURI()); ```&lt;/p&gt;

&lt;p&gt;    1. **Output: &lt;a href=&quot;file:/D:/projects/hello%20world/**&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/D:/projects/hello%20world/**&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    ```System.out.println(parentDirTest.toURI().toString());```&lt;/p&gt;

&lt;p&gt;    2. **Output: &lt;a href=&quot;file:/D:/projects/hello%20world/**&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/D:/projects/hello%20world/**&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    ```System.out.println(new Path(parentDirTest.toURI())); ```&lt;/p&gt;

&lt;p&gt;    3. *&lt;b&gt;Output: &lt;a href=&quot;file:/D:/projects/hello&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/D:/projects/hello&lt;/a&gt; world/&lt;/b&gt;*&lt;/p&gt;

&lt;p&gt;    ```System.out.println(new Path(parentDirTest.toURI().toString()));```&lt;/p&gt;

&lt;p&gt;    4. **Output: &lt;a href=&quot;file:/D:/projects/hello%20world**&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/D:/projects/hello%20world**&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16064536" author="githubbot" created="Tue, 27 Jun 2017 09:24:01 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168#discussion_r124223192&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168#discussion_r124223192&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/FileInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -461,8 +463,9 @@ public LocatableInputSplitAssigner getInputSplitAssigner(FileInputSplit[] splits&lt;/p&gt;

&lt;p&gt;     		// take the desired number of splits into account&lt;br/&gt;
     		minNumSplits = Math.max(minNumSplits, this.numSplits);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;final Path path = this.filePath;&lt;br/&gt;
    +&lt;br/&gt;
    +		final Path path = new Path(URLDecoder.decode(this.filePath.toString(), Charset.defaultCharset().name()));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    That#s a problem of URI, not of the path class. URI#toString escapes certain characters (like spaces) but they aren&apos;t escaped internally.&lt;/p&gt;</comment>
                            <comment id="16064537" author="githubbot" created="Tue, 27 Jun 2017 09:24:16 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merging.&lt;/p&gt;</comment>
                            <comment id="16064549" author="githubbot" created="Tue, 27 Jun 2017 09:31:52 +0000"  >&lt;p&gt;Github user zhangminglei commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168#discussion_r124225059&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168#discussion_r124225059&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/api/common/io/FileInputFormat.java &amp;#8212;&lt;br/&gt;
    @@ -461,8 +463,9 @@ public LocatableInputSplitAssigner getInputSplitAssigner(FileInputSplit[] splits&lt;/p&gt;

&lt;p&gt;     		// take the desired number of splits into account&lt;br/&gt;
     		minNumSplits = Math.max(minNumSplits, this.numSplits);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;final Path path = this.filePath;&lt;br/&gt;
    +&lt;br/&gt;
    +		final Path path = new Path(URLDecoder.decode(this.filePath.toString(), Charset.defaultCharset().name()));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Oh. I see, thanks.&lt;/p&gt;</comment>
                            <comment id="16071144" author="githubbot" created="Sat, 1 Jul 2017 10:07:41 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/4168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/4168&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16071157" author="zentol" created="Sat, 1 Jul 2017 10:10:17 +0000"  >&lt;p&gt;1.3: c0ad4699af12454f54ff1dd977c6fc562f09a304&lt;br/&gt;
1.4: c84a82854e715ebdf714b4f4ea09c73645e6cd5d&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 20 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gm1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>