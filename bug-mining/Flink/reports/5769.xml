<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:00:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-23857] insert overwirite table select * from t where 1 != 1, Unable to clear table data</title>
                <link>https://issues.apache.org/jira/browse/FLINK-23857</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;insert overwirite table select * from t where 1 != 1&#65292;Unable to clear table data&#65292;Unlike hive&#12290;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13395872">FLINK-23857</key>
            <summary>insert overwirite table select * from t where 1 != 1, Unable to clear table data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lirui">Rui Li</assignee>
                                    <reporter username="leexu">lixu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 18 Aug 2021 12:27:30 +0000</created>
                <updated>Tue, 7 Sep 2021 06:54:48 +0000</updated>
                            <resolved>Tue, 31 Aug 2021 05:53:15 +0000</resolved>
                                    <version>1.13.1</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.15.0</fixVersion>
                                    <component>Connectors / FileSystem</component>
                    <component>Connectors / Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17407089" author="lirui" created="Tue, 31 Aug 2021 05:53:15 +0000"  >&lt;p&gt;Fixed in master: 6f5995d783bc07b7bb26653555da366659255f45&lt;br/&gt;
Fixed in release-1.14: 2650fd63172b4d7b218187c7f65178d14fdaeb1b&lt;/p&gt;</comment>
                            <comment id="17407279" author="leexu" created="Tue, 31 Aug 2021 12:01:58 +0000"  >&lt;p&gt;insert overwrite table t1 partition(f2=1) select * from t2 where 1 != 1&lt;/p&gt;

&lt;p&gt;I merge code tests, unable to cleat partition data;&lt;/p&gt;</comment>
                            <comment id="17407788" author="lirui" created="Wed, 1 Sep 2021 03:39:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;insert overwrite table t1 partition(f2=1) select * from t2 where 1 != 1&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leexu&quot; class=&quot;user-hover&quot; rel=&quot;leexu&quot;&gt;leexu&lt;/a&gt; Are you able to clear partition data with this in Hive? And could you share the hive version you&apos;re using?&lt;/p&gt;</comment>
                            <comment id="17407791" author="leexu" created="Wed, 1 Sep 2021 03:44:46 +0000"  >&lt;p&gt;hive 1.1.0&lt;/p&gt;</comment>
                            <comment id="17409759" author="luoyuxia" created="Sat, 4 Sep 2021 00:00:23 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;insert overwrite table t1 partition(f2=1) select * from t2 where 1 != 1&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Yeah, I have tried, the sql can&#160;clear partition data in Hive.&lt;/p&gt;

&lt;p&gt;Currently, the fix only works for no partition table. I would like to try to make it work even for&#160;partition table.&lt;/p&gt;</comment>
                            <comment id="17410080" author="jark" created="Sun, 5 Sep 2021 01:56:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=luoyuxia&quot; class=&quot;user-hover&quot; rel=&quot;luoyuxia&quot;&gt;luoyuxia&lt;/a&gt; Shouldn&apos;t the above query fail if target table is non-partitioned table? &lt;/p&gt;</comment>
                            <comment id="17410267" author="luoyuxia" created="Mon, 6 Sep 2021 01:25:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;Yeah, the query will fail if&#160;target table is non-partitioned table,&#160; but is fine for&#160;partitioned table.&lt;/p&gt;</comment>
                            <comment id="17410356" author="lirui" created="Mon, 6 Sep 2021 03:46:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=luoyuxia&quot; class=&quot;user-hover&quot; rel=&quot;luoyuxia&quot;&gt;luoyuxia&lt;/a&gt; Please also verify with different hive versions. IIRC hive didn&apos;t clear partition data when I tried with hive-2.3.4.&lt;/p&gt;</comment>
                            <comment id="17410870" author="luoyuxia" created="Tue, 7 Sep 2021 01:46:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt;&#160;I tried with hive-2.3.2, hive-2.3.8,&#160; hive-3.1.2. All of them clear partition data.&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13033130/13033130_7F086A05-FE73-47F2-BA6C-95371E89116C.png&quot; height=&quot;409&quot; width=&quot;498&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Not sure whether need to&#160;clear parition data using hive dialect in flink to make the behaviour&#160;consistent with hive.&lt;/p&gt;</comment>
                            <comment id="17410952" author="lirui" created="Tue, 7 Sep 2021 06:54:48 +0000"  >&lt;p&gt;OK, I tried with an empty source table w/o the &lt;tt&gt;1 != 1&lt;/tt&gt; filter, and hive doesn&apos;t clear the partition data in that case. Maybe there&apos;s some inconsistency in hive. I guess it&apos;s more intuitive to clear the data since user intends to do &lt;tt&gt;OVERWRITE&lt;/tt&gt;. And therefore I prefer not to make a difference on this between hive and default dialect. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13033130" name="7F086A05-FE73-47F2-BA6C-95371E89116C.png" size="654701" author="luoyuxia" created="Tue, 7 Sep 2021 01:46:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0u0j4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>