<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:44:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-16860] Failed to push filter into OrcTableSource when upgrading to 1.9.2</title>
                <link>https://issues.apache.org/jira/browse/FLINK-16860</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;We have a batch job which we currently have on a flink cluster running 1.8.2&lt;br/&gt;
 The job runs fine. We wanted to upgrade to flink 1.10, but that yielded errors, so we started downgrading until we found that the issue is in flink 1.9.2&lt;/p&gt;

&lt;p&gt;The job on 1.9.2 fails with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.apache.flink.table.api.TableException: Failed to push filter into table source! table source with pushdown capability must override and change explainSource() API to explain the pushdown applied!&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which is not happening on flink 1.8.2. You can check the logs for the exactly same job, just running on different cluster versions:&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12998191/12998191_flink-1.8.2.txt&quot; title=&quot;flink-1.8.2.txt attached to FLINK-16860&quot;&gt;flink-1.8.2.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12998192/12998192_flink-1.9.2.txt&quot; title=&quot;flink-1.9.2.txt attached to FLINK-16860&quot;&gt;flink-1.9.2.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I tried to narrow it down and it seems that this exception has been added in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-12399&quot; title=&quot;FilterableTableSource does not use filters on job run&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-12399&quot;&gt;&lt;del&gt;FLINK-12399&lt;/del&gt;&lt;/a&gt; and there was a small discussion regarding the exception:&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/8468#discussion_r329876088&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/8468#discussion_r329876088&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Our code looks something like this:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; tempTableName = &lt;span class=&quot;code-quote&quot;&gt;&quot;tempTable&quot;&lt;/span&gt;;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; sql = SqlBuilder.buildSql(tempTableName);
BatchTableEnvironment tableEnv = BatchTableEnvironment.create(env);
OrcTableSource orcTableSource = OrcTableSource.builder()
 .path(hdfsFolder, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
 .forOrcSchema(ORC.getSchema())
 .withConfiguration(config)
 .build();
tableEnv.registerTableSource(tempTableName, orcTableSource);
Table tempTable = tableEnv.sqlQuery(sql);
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; tableEnv.toDataSet(tempTable, Row.class);&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Where the sql build is nothing more than&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT * FROM table WHERE id IN (1,2,3) AND mid IN(4,5,6)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;flink 1.8.2&lt;/p&gt;

&lt;p&gt;flink 1.9.2&lt;/p&gt;</environment>
        <key id="13294920">FLINK-16860</key>
            <summary>Failed to push filter into OrcTableSource when upgrading to 1.9.2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lzljs3620320">Jingsong Lee</assignee>
                                    <reporter username="nikobearrr">Nikola</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 30 Mar 2020 07:53:34 +0000</created>
                <updated>Fri, 17 Apr 2020 02:16:57 +0000</updated>
                            <resolved>Thu, 2 Apr 2020 07:10:52 +0000</resolved>
                                    <version>1.9.2</version>
                    <version>1.10.0</version>
                                    <fixVersion>1.9.3</fixVersion>
                    <fixVersion>1.10.1</fixVersion>
                                    <component>Connectors / ORC</component>
                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17072518" author="aljoscha" created="Wed, 1 Apr 2020 08:36:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;, could you please take a look at this?&lt;/p&gt;</comment>
                            <comment id="17072521" author="lzljs3620320" created="Wed, 1 Apr 2020 08:45:06 +0000"  >&lt;p&gt;Ah... Yes, after &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-12399&quot; title=&quot;FilterableTableSource does not use filters on job run&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-12399&quot;&gt;&lt;del&gt;FLINK-12399&lt;/del&gt;&lt;/a&gt;. there are bugs in &lt;tt&gt;OrcTableSource&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The case is there are some filters to be pushed down to source, but source can not consume them. We need distinguish empty filters from no pushed down in &lt;tt&gt;expainSource&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17072582" author="lzljs3620320" created="Wed, 1 Apr 2020 09:34:58 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nikobearrr&quot; class=&quot;user-hover&quot; rel=&quot;nikobearrr&quot;&gt;nikobearrr&lt;/a&gt;&#160;you can try&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/11597&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/11597&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17072642" author="nikobearrr" created="Wed, 1 Apr 2020 10:49:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&#160;is there a docker build I can run it from?&#160;&lt;/p&gt;</comment>
                            <comment id="17072695" author="lzljs3620320" created="Wed, 1 Apr 2020 12:07:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nikobearrr&quot; class=&quot;user-hover&quot; rel=&quot;nikobearrr&quot;&gt;nikobearrr&lt;/a&gt;&#160;currently no...&lt;/p&gt;</comment>
                            <comment id="17073440" author="lzljs3620320" created="Thu, 2 Apr 2020 07:10:53 +0000"  >&lt;p&gt;master:&#160;c8a23c74e618b752bbdc58dca62d997ddd303d40&lt;/p&gt;

&lt;p&gt;release-1.10:&#160;9d21a4a5539e6fe0b253def255d6641335da18df&lt;/p&gt;

&lt;p&gt;release-1.9:&#160;78e2c0de6ef21e497e82de4a180759a960d11eab&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13231514">FLINK-12399</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12998191" name="flink-1.8.2.txt" size="4607" author="nikobearrr" created="Mon, 30 Mar 2020 07:52:38 +0000"/>
                            <attachment id="12998192" name="flink-1.9.2.txt" size="5730" author="nikobearrr" created="Mon, 30 Mar 2020 07:52:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0d28o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>