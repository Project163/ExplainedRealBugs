<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:51:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-20213] Partition commit is delayed when records keep coming</title>
                <link>https://issues.apache.org/jira/browse/FLINK-20213</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When set partition-commit.delay=0,&#160;Users expect partitions to be committed immediately.&lt;/p&gt;

&lt;p&gt;However, if the record of this partition continues to flow in, the bucket for the partition will be activated, and no inactive bucket will appear.&lt;/p&gt;

&lt;p&gt;We need to consider listening to bucket created.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13341284">FLINK-20213</key>
            <summary>Partition commit is delayed when records keep coming</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lzljs3620320">Jingsong Lee</assignee>
                                    <reporter username="lzljs3620320">Jingsong Lee</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 18 Nov 2020 09:46:23 +0000</created>
                <updated>Thu, 28 Jan 2021 08:21:59 +0000</updated>
                            <resolved>Tue, 22 Dec 2020 02:15:29 +0000</resolved>
                                    <version>1.11.2</version>
                                    <fixVersion>1.11.3</fixVersion>
                    <fixVersion>1.12.1</fixVersion>
                                    <component>Connectors / FileSystem</component>
                    <component>Table SQL / Ecosystem</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17239024" author="zouyunhe" created="Thu, 26 Nov 2020 02:35:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&#160;Hello, we get your PR&#160; and&#160; test it in Partition-Time tigger ,&#160; and we find that the hive partition is commited before the data is written finished .&lt;/p&gt;

&lt;p&gt;perhaps it has some other problems.&lt;/p&gt;</comment>
                            <comment id="17239050" author="lzljs3620320" created="Thu, 26 Nov 2020 03:43:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zouyunhe&quot; class=&quot;user-hover&quot; rel=&quot;zouyunhe&quot;&gt;zouyunhe&lt;/a&gt;&#160;Thanks for you feedback, Can you check the watermark is correct?&lt;/p&gt;</comment>
                            <comment id="17239051" author="zouyunhe" created="Thu, 26 Nov 2020 04:01:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&#160; We found the watermark as below, the time is about 2020-11-25 21:53:02&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13016054/13016054_image-2020-11-26-12-00-23-542.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;And we see the data write in hive partition , the _SUCCESS file has been writeen finished.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13016055/13016055_image-2020-11-26-12-00-55-829.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;But Some in-progress file was not finished, which mean this paritition is not finished.&lt;/p&gt;</comment>
                            <comment id="17239073" author="lzljs3620320" created="Thu, 26 Nov 2020 05:59:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zouyunhe&quot; class=&quot;user-hover&quot; rel=&quot;zouyunhe&quot;&gt;zouyunhe&lt;/a&gt; What is the delay?&lt;/p&gt;</comment>
                            <comment id="17239075" author="zouyunhe" created="Thu, 26 Nov 2020 06:02:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&#160;the commit delay is 1 min, the tblproperties&#160;&lt;/p&gt;

&lt;p&gt;&apos;partition.time-extractor.timestamp-pattern&apos;=&apos;$day $hour:00:00&apos;, &lt;br/&gt;
 &apos;sink.partition-commit.delay&apos;=&apos;1 min&apos;, &lt;br/&gt;
 &apos;sink.partition-commit.policy.kind&apos;=&apos;metastore,success-file&apos;, &lt;br/&gt;
 &apos;sink.partition-commit.trigger&apos;=&apos;partition-time&apos;,&lt;/p&gt;</comment>
                            <comment id="17239080" author="lzljs3620320" created="Thu, 26 Nov 2020 06:10:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zouyunhe&quot; class=&quot;user-hover&quot; rel=&quot;zouyunhe&quot;&gt;zouyunhe&lt;/a&gt;, I think your correct commit delay should be 1 hour plus 1min&lt;/p&gt;</comment>
                            <comment id="17239096" author="zouyunhe" created="Thu, 26 Nov 2020 06:59:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&#160;OK&lt;/p&gt;</comment>
                            <comment id="17253215" author="lzljs3620320" created="Tue, 22 Dec 2020 02:15:29 +0000"  >&lt;p&gt;release-1.11:&#160;75b759d6a3a7e193521ab7f0c738b9faf908601c&lt;/p&gt;

&lt;p&gt;release-1.12:&#160;8a9b632dfc41e20b35c85b357f9ae5cfc2f70fff&lt;/p&gt;

&lt;p&gt;master (1.13):&#160;a046ee8f2d1944d3c1f45f24bb14eb53682a3b09&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13347861">FLINK-20771</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13346726">FLINK-20671</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13016054" name="image-2020-11-26-12-00-23-542.png" size="18100" author="zouyunhe" created="Thu, 26 Nov 2020 04:00:25 +0000"/>
                            <attachment id="13016055" name="image-2020-11-26-12-00-55-829.png" size="270586" author="zouyunhe" created="Thu, 26 Nov 2020 04:00:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kpc8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>