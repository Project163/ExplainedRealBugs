<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:40:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-13769] BatchFineGrainedRecoveryITCase.testProgram failed on Travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-13769</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;tt&gt;BatchFineGrainedRecoveryITCase.testProgram&lt;/tt&gt; failed on Travis.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
23:14:26.860 [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 50.007 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.test.recovery.BatchFineGrainedRecoveryITCase
23:14:26.868 [ERROR] testProgram(org.apache.flink.test.recovery.BatchFineGrainedRecoveryITCase)  Time elapsed: 49.469 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.flink.runtime.client.JobExecutionException: Job execution failed.
	at org.apache.flink.test.recovery.BatchFineGrainedRecoveryITCase.testProgram(BatchFineGrainedRecoveryITCase.java:225)
Caused by: java.util.concurrent.CompletionException: akka.pattern.AskTimeoutException: Ask timed out on [Actor[akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@localhost:39333/user/taskmanager_3#-344551647]] after [10000 ms]. Message of type [org.apache.flink.runtime.rpc.messages.RemoteRpcInvocation]. A typical reason &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; `AskTimeoutException` is that the recipient actor didn&apos;t send a reply.
&lt;/span&gt;Caused by: akka.pattern.AskTimeoutException: Ask timed out on [Actor[akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@localhost:39333/user/taskmanager_3#-344551647]] after [10000 ms]. Message of type [org.apache.flink.runtime.rpc.messages.RemoteRpcInvocation]. A typical reason &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; `AskTimeoutException` is that the recipient actor didn&apos;t send a reply.
&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/573523669&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/573523669&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13251532">FLINK-13769</key>
            <summary>BatchFineGrainedRecoveryITCase.testProgram failed on Travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="azagrebin">Andrey Zagrebin</assignee>
                                    <reporter username="azagrebin">Andrey Zagrebin</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Mon, 19 Aug 2019 10:01:27 +0000</created>
                <updated>Fri, 30 Aug 2019 07:27:55 +0000</updated>
                            <resolved>Fri, 30 Aug 2019 07:27:55 +0000</resolved>
                                    <version>1.9.0</version>
                                    <fixVersion>1.9.1</fixVersion>
                    <fixVersion>1.10.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16911033" author="till.rohrmann" created="Tue, 20 Aug 2019 06:34:35 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/573915348/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/573915348/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16911965" author="till.rohrmann" created="Wed, 21 Aug 2019 05:52:00 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/574335587/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/574335587/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16913209" author="azagrebin" created="Thu, 22 Aug 2019 10:18:44 +0000"  >&lt;p&gt;The problem is that after we merged waiting for all tasks termination in TaskExecutor.onStop() (&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11630&quot; title=&quot;TaskExecutor does not wait for Task termination when terminating itself&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11630&quot;&gt;&lt;del&gt;FLINK-11630&lt;/del&gt;&lt;/a&gt;),&lt;/p&gt;

&lt;p&gt;this interrupted the testing mappers earlier in&#160;BatchFineGrainedRecoveryITCase, causing concurrency problems with the next slot allocation.&lt;/p&gt;

&lt;p&gt;The JM got notified about task failure faster and requested quickly a slot from RM which has not realised yet that the slot of the stopping TM cannot be used anymore. This led to deploying the recovered task into the just killed TM. To fix this we need to deregister TM with the RM at the beginning of the&#160;TaskExecutor.onStop().&lt;/p&gt;

&lt;p&gt;Having deregistered itself, TM should stop reconnecting to RM. A preliminary change is required for that to check the stopping state (&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13819&quot; title=&quot;Introduce RpcEndpoint State&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-13819&quot;&gt;&lt;del&gt;FLINK-13819&lt;/del&gt;&lt;/a&gt;) of the TM RpcEndpoint in&#160;TaskExecutor.disconnectResourceManager to decide whether to reconnect.&lt;/p&gt;</comment>
                            <comment id="16915584" author="till.rohrmann" created="Mon, 26 Aug 2019 08:24:28 +0000"  >&lt;p&gt;Just for the records: &lt;a href=&quot;https://api.travis-ci.org/v3/job/576002720/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/576002720/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16918465" author="aljoscha" created="Thu, 29 Aug 2019 10:03:54 +0000"  >&lt;p&gt;It it resolved with the fix?&lt;/p&gt;</comment>
                            <comment id="16919291" author="azagrebin" created="Fri, 30 Aug 2019 07:27:38 +0000"  >&lt;p&gt;merged into master by&#160;fa12f2de7574b318008d67803d6969b339331867&lt;/p&gt;

&lt;p&gt;merged into&#160;release-1.9 by&#160;1a837659b71dd02ef6775bd2a4de331aab3ddc2e&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt;&#160;Yes, I was just waiting for my Travis to be green after the rebase&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="13252347">FLINK-13819</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05s9k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>