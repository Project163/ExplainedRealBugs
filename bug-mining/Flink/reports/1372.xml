<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:26:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5369] Rework jsr305 and logging dependencies</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5369</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently, every project in Flink has a hard (compile scope) dependency on the &lt;tt&gt;jsr305&lt;/tt&gt;, &lt;tt&gt;slf4j&lt;/tt&gt;, &lt;tt&gt;log4j&lt;/tt&gt;, and &lt;tt&gt;commons-land3&lt;/tt&gt; artifacts, because these dependencies are declared in the root pom.xml. That way they are pulled into every fat jar, including user fat jars as soon as they refer to a connector or library.&lt;/p&gt;

&lt;p&gt;We should get the &lt;tt&gt;log4j&lt;/tt&gt; related dependencies out of the root pom file. Ideally these dependencies are only in test scope (as the default logger for testing) and in &lt;tt&gt;flink-dist&lt;/tt&gt; and the quickstart poms. But to keep compatibility with the current project setups by users, we could also add them to &lt;tt&gt;flink-core&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In addition, the projects whose artifacts usually get bundles in fat jars (namely &lt;tt&gt;flink-libraries&lt;/tt&gt;, &lt;tt&gt;flink-connectors&lt;/tt&gt;, and &lt;tt&gt;flink-metrics&lt;/tt&gt; should override the &lt;tt&gt;slf4j&lt;/tt&gt; and &lt;tt&gt;jsr305&lt;/tt&gt; dependencies as provided.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13029185">FLINK-5369</key>
            <summary>Rework jsr305 and logging dependencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="sewen">Stephan Ewen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Dec 2016 16:40:19 +0000</created>
                <updated>Tue, 3 Jan 2017 21:08:52 +0000</updated>
                            <resolved>Tue, 20 Dec 2016 16:52:14 +0000</resolved>
                                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Build System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15761749" author="githubbot" created="Mon, 19 Dec 2016 17:23:35 +0000"  >&lt;p&gt;GitHub user StephanEwen opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3029&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5369&quot; title=&quot;Rework jsr305 and logging dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5369&quot;&gt;&lt;del&gt;FLINK-5369&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;build&amp;#93;&lt;/span&gt; Set jsr305 and logging dependencies to &apos;provided&apos; by default.&lt;/p&gt;

&lt;p&gt;    Currently, every project in Flink has a hard (compile scope) dependency on the `jsr305`, `slf4j`, `log4j`, and `commons-land3` artifacts. That way they are pulled into every fat jar, including user fat jars as soon as they refer to a connector or library.&lt;/p&gt;

&lt;p&gt;    This commit sets these dependencies to &apos;provided&apos; in the root pom file. That means every project can refer to those classes, but should never re-bundle them (instead assume they are present already).&lt;/p&gt;

&lt;p&gt;    To make the classes end up in the class path for local executions, they are added only to the `flink-core` project as actual (compile scope) dependencies. Connectors and libraries that refer to `flink-core` as provided actually treat those dependencies in the same way.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Looking Forward&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Ideally, no Flink project should directly reference a concrete logging framework (like log4j), but only `flink-dist` should add this to the `lib` directory. That way the logging framework is perfectly pluggable for everyone that references Flink projects (today it needs explicit exclusion of the log4j dependency).&lt;/p&gt;

&lt;p&gt;    The quickstarts and tests should also pull in a default logging framework, to enable local logging. This pull request prepares that, but still keeps `log4j` in the classpath of `flink-core` (as before) to not break any existing Flink projects (based on prior quickstarts) executing in the IDE.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/StephanEwen/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StephanEwen/incubator-flink&lt;/a&gt; shade&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3029.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3029.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3029&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit be32c4e0f72e56a32ca81c96658c17b09fb73300&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-12-19T15:24:29Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5369&quot; title=&quot;Rework jsr305 and logging dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5369&quot;&gt;&lt;del&gt;FLINK-5369&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;build&amp;#93;&lt;/span&gt; Set jsr305 and logging dependencies to &apos;provided&apos; by default.&lt;/p&gt;

&lt;p&gt;    Currently, every project in Flink has a hard (compile scope) dependency on the jsr305, slf4j, and log4j&lt;br/&gt;
    artifacts. That way they are pulled into every fat jar, including user fat jars as soon as they refer to&lt;br/&gt;
    a connector or library.&lt;/p&gt;

&lt;p&gt;    This commit sets jsr305 and slf4j to &apos;provided&apos; in the root pom file. That means every project can refer&lt;br/&gt;
    to those classes, but should never re-bundle them (instead assume they are present already). That is&lt;br/&gt;
    achieved by adding them only to the &apos;flink-core&apos; project as actualy (compile scope) dependencies.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15762228" author="githubbot" created="Mon, 19 Dec 2016 20:31:30 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3029&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think this is a quite crucial change for 1.2, because dependency structure cannot be changed in minor releases.&lt;/p&gt;

&lt;p&gt;    @rmetzger to your attention&lt;/p&gt;</comment>
                            <comment id="15763839" author="githubbot" created="Tue, 20 Dec 2016 10:12:38 +0000"  >&lt;p&gt;Github user rmetzger commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3029#discussion_r93206487&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3029#discussion_r93206487&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: pom.xml &amp;#8212;&lt;br/&gt;
    @@ -91,7 +91,6 @@ under the License.&lt;br/&gt;
     		&amp;lt;flink.forkCount&amp;gt;1C&amp;lt;/flink.forkCount&amp;gt;&lt;br/&gt;
     		&amp;lt;flink.reuseForks&amp;gt;true&amp;lt;/flink.reuseForks&amp;gt;&lt;br/&gt;
     		&amp;lt;log4j.configuration&amp;gt;log4j-test.properties&amp;lt;/log4j.configuration&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;slf4j.version&amp;gt;1.7.7&amp;lt;/slf4j.version&amp;gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Why did you remove that version as a property? The reason why we add properties for those dependencies is that users can pass a custom version via -Dslf4j.version=1.2.3 when building Flink.&lt;/p&gt;</comment>
                            <comment id="15763850" author="githubbot" created="Tue, 20 Dec 2016 10:16:27 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3029&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ve tested the change on a YARN cluster (I know there are tests for that). I&apos;m currently trying out the quickstarts as well.&lt;/p&gt;</comment>
                            <comment id="15763889" author="githubbot" created="Tue, 20 Dec 2016 10:37:05 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3029&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    (quickstart worked as well!)&lt;/p&gt;</comment>
                            <comment id="15764649" author="stephanewen" created="Tue, 20 Dec 2016 16:52:14 +0000"  >&lt;p&gt;Fixed via cefb8db3525dc25421d41cfcdaaac1bd5540bc68&lt;/p&gt;</comment>
                            <comment id="15796002" author="githubbot" created="Tue, 3 Jan 2017 19:46:19 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3029&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I guess this PR can be closed.&lt;/p&gt;</comment>
                            <comment id="15796182" author="githubbot" created="Tue, 3 Jan 2017 21:08:52 +0000"  >&lt;p&gt;Github user StephanEwen closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3029&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13010823">FLINK-4782</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37s1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>