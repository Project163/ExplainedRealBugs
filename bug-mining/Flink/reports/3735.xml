<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10918] incremental Keyed state with RocksDB throws cannot create directory error in windows</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10918</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Facing error while enabling keyed state with RocksDBBackend with checkpointing to a local windows directory&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.rocksdb.RocksDBException: Failed to create dir: /c:/tmp/data/job_dbe01128760d4d5cb90809cd94c2a936_op_StreamMap_b5c8d46f3e7b141acf271f12622e752b__3_8__uuid_45c1f62b-a198-44f5-add5-7683079b03f8/chk-1.tmp: Invalid argument

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.rocksdb.Checkpoint.createCheckpoint(Native Method)

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.rocksdb.Checkpoint.createCheckpoint(Checkpoint.java:51)

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.flink.contrib.streaming.state.RocksDBKeyedStateBackend$RocksDBIncrementalSnapshotOperation.takeSnapshot(RocksDBKeyedStateBackend.java:2549)

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.flink.contrib.streaming.state.RocksDBKeyedStateBackend$IncrementalSnapshotStrategy.performSnapshot(RocksDBKeyedStateBackend.java:2008)

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.flink.contrib.streaming.state.RocksDBKeyedStateBackend.snapshot(RocksDBKeyedStateBackend.java:498)

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.flink.streaming.api.operators.AbstractStreamOperator.snapshotState(AbstractStreamOperator.java:406)

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ... 13 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;windows&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
val env = StreamExecutionEnvironment.getExecutionEnvironment
val rocksdb = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RocksDBStateBackend(&lt;span class=&quot;code-quote&quot;&gt;&quot;file:\\C:\\rocksdb\\checkpoint&quot;&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
rocksdb.setDbStoragePath(&lt;span class=&quot;code-quote&quot;&gt;&quot;file:\\C:\\rocksdb\\storage&quot;&lt;/span&gt;)
env.setStateBackend(rocksdb)
env.enableCheckpointing(10)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13199159">FLINK-10918</key>
            <summary>incremental Keyed state with RocksDB throws cannot create directory error in windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="imamitsehgal">Amit</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>usability</label>
                    </labels>
                <created>Sun, 18 Nov 2018 09:48:31 +0000</created>
                <updated>Wed, 8 Dec 2021 08:41:49 +0000</updated>
                            <resolved>Tue, 25 Feb 2020 03:41:00 +0000</resolved>
                                    <version>1.6.2</version>
                    <version>1.9.2</version>
                    <version>1.10.0</version>
                                    <fixVersion>1.10.1</fixVersion>
                    <fixVersion>1.11.0</fixVersion>
                                    <component>Runtime / Queryable State</component>
                    <component>Runtime / State Backends</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>10</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16690899" author="imamitsehgal" created="Sun, 18 Nov 2018 13:06:37 +0000"  >&lt;p&gt;Attaching a patch file.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12948632/12948632_0001-FLINK-10918-Fix-for-checkpoint-creation-on-windows-1.patch&quot; title=&quot;0001-FLINK-10918-Fix-for-checkpoint-creation-on-windows-1.patch attached to FLINK-10918&quot;&gt;0001-FLINK-10918-Fix-for-checkpoint-creation-on-windows-1.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16690907" author="githubbot" created="Sun, 18 Nov 2018 13:23:42 +0000"  >&lt;p&gt;imamitsehgal opened a new pull request #7134: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; fix for checkpoint dir creation error on window. &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7134&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7134&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;flink-state-backaends&amp;#93;&lt;/span&gt; fix for checkpoint dir creation error on window. 1 of the 4 failing test on windows are now passing&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16691243" author="githubbot" created="Mon, 19 Nov 2018 04:20:52 +0000"  >&lt;p&gt;imamitsehgal commented on issue #7134: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; fix for checkpoint dir creation error on window. &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7134#issuecomment-439767469&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7134#issuecomment-439767469&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Why are builds failing while the change is not at all related?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16691264" author="githubbot" created="Mon, 19 Nov 2018 05:13:21 +0000"  >&lt;p&gt;imamitsehgal closed pull request #7134: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; fix for checkpoint dir creation error on window. &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7134&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7134&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java b/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
index 17ba985f883..29ce3814c6d 100644&lt;br/&gt;
&amp;#8212; a/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
+++ b/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
@@ -575,7 +575,7 @@ private RocksDB openDB(&lt;br/&gt;
 		try &lt;/p&gt;
{
 			dbRef = RocksDB.open(
 				Preconditions.checkNotNull(dbOptions),
-				Preconditions.checkNotNull(path),
+				Preconditions.checkNotNull(new Path(path).toString()),
 				columnFamilyDescriptors,
 				stateColumnFamilyHandles);
 		}
&lt;p&gt; catch (RocksDBException e) {&lt;br/&gt;
@@ -2546,7 +2546,8 @@ void takeSnapshot() throws Exception {&lt;/p&gt;

&lt;p&gt; 			// create hard links of living files in the snapshot path&lt;br/&gt;
 			try (Checkpoint checkpoint = Checkpoint.create(stateBackend.db)) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;checkpoint.createCheckpoint(localBackupDirectory.getDirectory().getPath());&lt;br/&gt;
+				LOG.info(&quot;Checkpoint path is {}.&quot;, localBackupDirectory.getDirectory().toString());&lt;br/&gt;
+				checkpoint.createCheckpoint(localBackupDirectory.getDirectory().toString());&lt;br/&gt;
 			}&lt;br/&gt;
 		}&lt;/li&gt;
&lt;/ul&gt;






&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697374" author="githubbot" created="Fri, 23 Nov 2018 17:20:53 +0000"  >&lt;p&gt;StefanRRichter commented on a change in pull request #7153: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix the checkpoint dir creation error on Window for keyed rocksdb state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7153#discussion_r235995727&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7153#discussion_r235995727&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -575,7 +585,7 @@ private RocksDB openDB(&lt;br/&gt;
 		try {&lt;br/&gt;
 			dbRef = RocksDB.open(&lt;br/&gt;
 				Preconditions.checkNotNull(dbOptions),&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Preconditions.checkNotNull(path),&lt;br/&gt;
+				Preconditions.checkNotNull(Utils.getPathAsString(new Path(path))),&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Nit: Like this, the null check does not ensure that `path`is non-null, but the return value.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697375" author="githubbot" created="Fri, 23 Nov 2018 17:20:53 +0000"  >&lt;p&gt;StefanRRichter commented on a change in pull request #7153: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix the checkpoint dir creation error on Window for keyed rocksdb state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7153#discussion_r235995638&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7153#discussion_r235995638&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -557,6 +557,16 @@ private void createDB() throws IOException &lt;/p&gt;
{
 		this.defaultColumnFamily = columnFamilyHandles.get(0);
 	}

&lt;p&gt;+	private static class Utils {&lt;br/&gt;
+		static String getPathAsString(Path path) {&lt;br/&gt;
+			String pathString = path.getPath();&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   I think a cleaner approach would by along the lines of `new File(path.toUri()).getAbsolutePath()`, the constructor should take care of transforming the URI to a system dependent string.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697376" author="githubbot" created="Fri, 23 Nov 2018 17:20:53 +0000"  >&lt;p&gt;StefanRRichter commented on a change in pull request #7153: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix the checkpoint dir creation error on Window for keyed rocksdb state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7153#discussion_r235996032&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7153#discussion_r235996032&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -2546,7 +2557,9 @@ void takeSnapshot() throws Exception {&lt;/p&gt;

&lt;p&gt; 			// create hard links of living files in the snapshot path&lt;br/&gt;
 			try (Checkpoint checkpoint = Checkpoint.create(stateBackend.db)) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;checkpoint.createCheckpoint(localBackupDirectory.getDirectory().getPath());&lt;br/&gt;
+				LOG.info(&quot;Checkpoint path is {}.&quot;, localBackupDirectory.getDirectory().getPath());&lt;br/&gt;
+				String path = Utils.getPathAsString(localBackupDirectory.getDirectory());&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Why not prepare this string just once in the evry beginning and use it for the log message as well?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697377" author="githubbot" created="Fri, 23 Nov 2018 17:20:53 +0000"  >&lt;p&gt;StefanRRichter commented on a change in pull request #7153: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix the checkpoint dir creation error on Window for keyed rocksdb state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7153#discussion_r235996153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7153#discussion_r235996153&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: docs/release-notes/flink-1.6.md&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -29,6 +29,15 @@ The default value of the slot idle timeout `slot.idle.timeout` is set to the def&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Changed ElasticSearch 5.x Sink API&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt; Previous APIs in the Flink ElasticSearch 5.x Sink&apos;s `RequestIndexer` interface have been deprecated in favor of new signatures. &lt;br/&gt;
-When adding requests to the `RequestIndexer`, the requests now must be of type `IndexRequest`, `DeleteRequest`, or `UpdateRequest`, instead of the base `ActionRequest`. &lt;br/&gt;
+When adding requests to the `RequestIndexer`, the requests now must be of type `IndexRequest`, `DeleteRequest`, or `UpdateRequest`, instead of the base `ActionRequest`.&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Why is this commit included in the PR?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697378" author="githubbot" created="Fri, 23 Nov 2018 17:20:53 +0000"  >&lt;p&gt;StefanRRichter commented on a change in pull request #7153: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix the checkpoint dir creation error on Window for keyed rocksdb state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7153#discussion_r235995783&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7153#discussion_r235995783&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -557,6 +557,16 @@ private void createDB() throws IOException &lt;/p&gt;
{
 		this.defaultColumnFamily = columnFamilyHandles.get(0);
 	}

&lt;p&gt;+	private static class Utils {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Why is the static class required, couln&apos;t we just have a private method?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697379" author="githubbot" created="Fri, 23 Nov 2018 17:20:53 +0000"  >&lt;p&gt;StefanRRichter commented on a change in pull request #7153: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix the checkpoint dir creation error on Window for keyed rocksdb state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7153#discussion_r235995974&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7153#discussion_r235995974&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -2546,7 +2557,9 @@ void takeSnapshot() throws Exception {&lt;/p&gt;

&lt;p&gt; 			// create hard links of living files in the snapshot path&lt;br/&gt;
 			try (Checkpoint checkpoint = Checkpoint.create(stateBackend.db)) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;checkpoint.createCheckpoint(localBackupDirectory.getDirectory().getPath());&lt;br/&gt;
+				LOG.info(&quot;Checkpoint path is {}.&quot;, localBackupDirectory.getDirectory().getPath());&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   I think this should not be logged on info level, it can potentially spam the log file. We could log this on debug or trace.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697781" author="githubbot" created="Sat, 24 Nov 2018 12:27:40 +0000"  >&lt;p&gt;imamitsehgal commented on a change in pull request #7153: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix the checkpoint dir creation error on Window for keyed rocksdb state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7153#discussion_r236041049&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7153#discussion_r236041049&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -557,6 +557,16 @@ private void createDB() throws IOException &lt;/p&gt;
{
 		this.defaultColumnFamily = columnFamilyHandles.get(0);
 	}

&lt;p&gt;+	private static class Utils {&lt;br/&gt;
+		static String getPathAsString(Path path) {&lt;br/&gt;
+			String pathString = path.getPath();&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   I tried that it kept failing the test cases. Event tried the toString method in Path class which removes the leading &apos;/&apos; even that fails the test cases&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697806" author="githubbot" created="Sat, 24 Nov 2018 13:04:43 +0000"  >&lt;p&gt;imamitsehgal commented on a change in pull request #7153: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix the checkpoint dir creation error on Window for keyed rocksdb state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7153#discussion_r236042001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7153#discussion_r236042001&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -575,7 +585,7 @@ private RocksDB openDB(&lt;br/&gt;
 		try {&lt;br/&gt;
 			dbRef = RocksDB.open(&lt;br/&gt;
 				Preconditions.checkNotNull(dbOptions),&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Preconditions.checkNotNull(path),&lt;br/&gt;
+				Preconditions.checkNotNull(Utils.getPathAsString(new Path(path))),&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   If Path is null or &quot;&quot; then new Path(path) will throw runtime IllegalArgumentException. The path returned by getPathAsString will be checked again to be non-null.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697807" author="githubbot" created="Sat, 24 Nov 2018 13:05:32 +0000"  >&lt;p&gt;imamitsehgal commented on a change in pull request #7153: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix the checkpoint dir creation error on Window for keyed rocksdb state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7153#discussion_r236042030&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7153#discussion_r236042030&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -557,6 +557,16 @@ private void createDB() throws IOException &lt;/p&gt;
{
 		this.defaultColumnFamily = columnFamilyHandles.get(0);
 	}

&lt;p&gt;+	private static class Utils {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   valid point, I initially thought to create utility  class, then decided to keep it local.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697867" author="githubbot" created="Sat, 24 Nov 2018 16:06:08 +0000"  >&lt;p&gt;imamitsehgal closed pull request #7153: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix the checkpoint dir creation error on Window for keyed rocksdb state&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7153&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java b/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
index 17ba985f883..4db32e1d2c8 100644&lt;br/&gt;
&amp;#8212; a/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
+++ b/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
@@ -557,6 +557,14 @@ private void createDB() throws IOException &lt;/p&gt;
{
 		this.defaultColumnFamily = columnFamilyHandles.get(0);
 	}

&lt;p&gt;+	private String getPathAsString(Path path) {&lt;br/&gt;
+		String pathString = path.getPath();&lt;br/&gt;
+		if (path.hasWindowsDrive() &amp;amp;&amp;amp; pathString.startsWith(&quot;/&quot;)) &lt;/p&gt;
{
+			pathString = pathString.substring(1);
+		}
&lt;p&gt;+		return pathString;&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
 	private RocksDB openDB(&lt;br/&gt;
 		String path,&lt;br/&gt;
 		List&amp;lt;ColumnFamilyDescriptor&amp;gt; stateColumnFamilyDescriptors,&lt;br/&gt;
@@ -575,7 +583,7 @@ private RocksDB openDB(&lt;br/&gt;
 		try &lt;/p&gt;
{
 			dbRef = RocksDB.open(
 				Preconditions.checkNotNull(dbOptions),
-				Preconditions.checkNotNull(path),
+				Preconditions.checkNotNull(getPathAsString(new Path(path))),
 				columnFamilyDescriptors,
 				stateColumnFamilyHandles);
 		}
&lt;p&gt; catch (RocksDBException e) {&lt;br/&gt;
@@ -2374,6 +2382,7 @@ private void closeLocalRegistry() {&lt;br/&gt;
 		}&lt;br/&gt;
 	}&lt;/p&gt;

&lt;p&gt;+&lt;br/&gt;
 	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Encapsulates the process to perform an incremental snapshot of a RocksDBKeyedStateBackend.&lt;br/&gt;
 	 */&lt;br/&gt;
@@ -2546,7 +2555,9 @@ void takeSnapshot() throws Exception {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 			// create hard links of living files in the snapshot path&lt;br/&gt;
 			try (Checkpoint checkpoint = Checkpoint.create(stateBackend.db)) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;checkpoint.createCheckpoint(localBackupDirectory.getDirectory().getPath());&lt;br/&gt;
+				String path = stateBackend.getPathAsString(localBackupDirectory.getDirectory());&lt;br/&gt;
+				LOG.trace(&quot;Checkpoint path is {}.&quot;, path);&lt;br/&gt;
+				checkpoint.createCheckpoint(path);&lt;br/&gt;
 			}&lt;br/&gt;
 		}&lt;/li&gt;
&lt;/ul&gt;






&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697868" author="githubbot" created="Sat, 24 Nov 2018 16:07:58 +0000"  >&lt;p&gt;imamitsehgal opened a new pull request #7171: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix error while checkpointing on window keyed state rock &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7171&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;db backend&lt;/p&gt;

&lt;p&gt;   &amp;lt;!--&lt;br/&gt;
   &lt;b&gt;Thank you very much for contributing to Apache Flink - we are happy that you want to help us improve Flink. To help the community review your contribution in the best possible way, please go through the checklist below, which will get the contribution into a shape in which it can be best reviewed.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;   &lt;b&gt;Please understand that we do not do this to make contributions to Flink a hassle. In order to uphold a high standard of quality for code contributions, while at the same time managing a large number of contributions, we need contributors to prepare the contributions well, and give reviewers enough contextual information for the review. Please also understand that contributions that do not follow this guide will take longer to review and thus typically be picked up with lower priority by the community.&lt;/b&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Contribution Checklist&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make sure that the pull request corresponds to a &lt;span class=&quot;error&quot;&gt;&amp;#91;JIRA issue&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/projects/FLINK/issues&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/FLINK/issues&lt;/a&gt;). Exceptions are made for typos in JavaDoc or documentation files, which need no JIRA issue.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Name the pull request in the form &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;FLINK-XXXX&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;component&amp;#93;&lt;/span&gt; Title of the pull request&quot;, where &lt;b&gt;FLINK-XXXX&lt;/b&gt; should be replaced by the actual issue number. Skip &lt;b&gt;component&lt;/b&gt; if you are unsure about which is the best component.&lt;br/&gt;
     Typo fixes that have no associated JIRA issue should be named following this pattern: `&lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;docs&amp;#93;&lt;/span&gt; Fix typo in event time introduction` or `&lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;javadocs&amp;#93;&lt;/span&gt; Expand JavaDoc for PuncuatedWatermarkGenerator`.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fill out the template below to describe the changes contributed by the pull request. That will give reviewers the context they need to do the review.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make sure that the change passes the automated tests, i.e., `mvn clean verify` passes. You can set up Travis CI to do that following &lt;span class=&quot;error&quot;&gt;&amp;#91;this guide&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://flink.apache.org/contribute-code.html#best-practices&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://flink.apache.org/contribute-code.html#best-practices&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Each pull request should address only one issue, not mix up code from multiple issues.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Each commit in the pull request has a meaningful commit message (including the JIRA id)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Once all items of the checklist are addressed, remove the above text and this checklist, leaving only the filled out template below.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;   *&lt;b&gt;(The sections below can be removed for hotfixes of typos)&lt;/b&gt;*&lt;br/&gt;
   --&amp;gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   &lt;b&gt;(For example: This pull request makes task deployment go through the blob server, rather than through RPC. That way we avoid re-transferring them on each deployment (during recovery).)&lt;/b&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   &lt;b&gt;(for example&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/b&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;The TaskInfo is stored in the blob store on job creation time as a persistent artifact&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Deployments RPC transmits only the blob storage reference&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;TaskManagers retrieve the TaskInfo from the blob cache&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   &lt;b&gt;(Please pick either of the following options)&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;   This change is a trivial rework / code cleanup without any test coverage.&lt;/p&gt;

&lt;p&gt;   &lt;b&gt;(or)&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;   This change is already covered by existing tests, such as &lt;b&gt;(please describe tests)&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;   &lt;b&gt;(or)&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;   This change added tests and can be verified as follows:&lt;/p&gt;

&lt;p&gt;   &lt;b&gt;(example&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/b&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Added integration tests for end-to-end deployment with large payloads (100MB)&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Extended integration test for recovery after master (JobManager) failure&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Added test that validates that TaskInfo is transferred only once across recoveries&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Manually verified the change by running a 4 node cluser with 2 JobManagers and 4 TaskManagers, a stateful streaming program, and killing one JobManager and two TaskManagers during the execution, verifying that recovery happens correctly.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / no)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / no / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16697871" author="githubbot" created="Sat, 24 Nov 2018 16:11:21 +0000"  >&lt;p&gt;imamitsehgal commented on issue #7171: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix error while checkpointing on window keyed state rock &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7171#issuecomment-441378109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7171#issuecomment-441378109&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   What is the purpose of the change?&lt;br/&gt;
   To fix the issue with creating directory while running on windows with keyed state and rocksdbbackend.&lt;br/&gt;
   Brief change log&lt;br/&gt;
   RockDBKeyedStateBackend class changes to remove leading &apos;/&apos; in the path string&lt;br/&gt;
   Verifying this change&lt;br/&gt;
   This change is already covered by existing tests, such as (please describe tests).&lt;br/&gt;
   Documentation&lt;br/&gt;
   Does this pull request introduce a new feature? NO&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16698071" author="githubbot" created="Sun, 25 Nov 2018 05:42:01 +0000"  >&lt;p&gt;imamitsehgal commented on issue #7171: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix error while checkpointing on window keyed state rock &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7171#issuecomment-441417072&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7171#issuecomment-441417072&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   The build is passing on the forked branch, the failure here is unrelated&lt;br/&gt;
   &lt;a href=&quot;https://travis-ci.org/imamitsehgal/flink/builds/459154746&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/imamitsehgal/flink/builds/459154746&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16698092" author="imamitsehgal" created="Sun, 25 Nov 2018 07:42:25 +0000"  >&lt;p&gt;Un-related streaming test cases are failing, while the forked branch built without any errors&lt;/p&gt;</comment>
                            <comment id="16698521" author="githubbot" created="Mon, 26 Nov 2018 06:36:21 +0000"  >&lt;p&gt;imamitsehgal closed pull request #7171: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix error while checkpointing on window keyed state rock &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7171&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java b/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
index 17ba985f883..1ee831407d0 100644&lt;br/&gt;
&amp;#8212; a/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
+++ b/flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBKeyedStateBackend.java&lt;br/&gt;
@@ -557,6 +557,14 @@ private void createDB() throws IOException &lt;/p&gt;
{
 		this.defaultColumnFamily = columnFamilyHandles.get(0);
 	}

&lt;p&gt;+	private String getPathAsString(Path path) {&lt;br/&gt;
+		String pathString = path.getPath();&lt;br/&gt;
+		if (path.hasWindowsDrive() &amp;amp;&amp;amp; pathString.startsWith(&quot;/&quot;)) &lt;/p&gt;
{
+			pathString = pathString.substring(1);
+		}
&lt;p&gt;+		return pathString;&lt;br/&gt;
+	}&lt;br/&gt;
+&lt;br/&gt;
 	private RocksDB openDB(&lt;br/&gt;
 		String path,&lt;br/&gt;
 		List&amp;lt;ColumnFamilyDescriptor&amp;gt; stateColumnFamilyDescriptors,&lt;br/&gt;
@@ -575,7 +583,7 @@ private RocksDB openDB(&lt;br/&gt;
 		try &lt;/p&gt;
{
 			dbRef = RocksDB.open(
 				Preconditions.checkNotNull(dbOptions),
-				Preconditions.checkNotNull(path),
+				Preconditions.checkNotNull(getPathAsString(new Path(path))),
 				columnFamilyDescriptors,
 				stateColumnFamilyHandles);
 		}
&lt;p&gt; catch (RocksDBException e) {&lt;br/&gt;
@@ -2546,7 +2554,9 @@ void takeSnapshot() throws Exception {&lt;/p&gt;

&lt;p&gt; 			// create hard links of living files in the snapshot path&lt;br/&gt;
 			try (Checkpoint checkpoint = Checkpoint.create(stateBackend.db)) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;checkpoint.createCheckpoint(localBackupDirectory.getDirectory().getPath());&lt;br/&gt;
+				String path = stateBackend.getPathAsString(localBackupDirectory.getDirectory());&lt;br/&gt;
+				LOG.trace(&quot;Checkpoint directory is {}.&quot;, path);&lt;br/&gt;
+				checkpoint.createCheckpoint(path);&lt;br/&gt;
 			}&lt;br/&gt;
 		}&lt;/li&gt;
&lt;/ul&gt;






&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16698522" author="githubbot" created="Mon, 26 Nov 2018 06:36:32 +0000"  >&lt;p&gt;imamitsehgal opened a new pull request #7171: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix error while checkpointing on window keyed state rock &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7171&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;db backend&lt;/p&gt;

&lt;p&gt;   &amp;lt;!--&lt;br/&gt;
   &lt;b&gt;Thank you very much for contributing to Apache Flink - we are happy that you want to help us improve Flink. To help the community review your contribution in the best possible way, please go through the checklist below, which will get the contribution into a shape in which it can be best reviewed.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;   &lt;b&gt;Please understand that we do not do this to make contributions to Flink a hassle. In order to uphold a high standard of quality for code contributions, while at the same time managing a large number of contributions, we need contributors to prepare the contributions well, and give reviewers enough contextual information for the review. Please also understand that contributions that do not follow this guide will take longer to review and thus typically be picked up with lower priority by the community.&lt;/b&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Contribution Checklist&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make sure that the pull request corresponds to a &lt;span class=&quot;error&quot;&gt;&amp;#91;JIRA issue&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/projects/FLINK/issues&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/FLINK/issues&lt;/a&gt;). Exceptions are made for typos in JavaDoc or documentation files, which need no JIRA issue.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Name the pull request in the form &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;FLINK-XXXX&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;component&amp;#93;&lt;/span&gt; Title of the pull request&quot;, where &lt;b&gt;FLINK-XXXX&lt;/b&gt; should be replaced by the actual issue number. Skip &lt;b&gt;component&lt;/b&gt; if you are unsure about which is the best component.&lt;br/&gt;
     Typo fixes that have no associated JIRA issue should be named following this pattern: `&lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;docs&amp;#93;&lt;/span&gt; Fix typo in event time introduction` or `&lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;javadocs&amp;#93;&lt;/span&gt; Expand JavaDoc for PuncuatedWatermarkGenerator`.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fill out the template below to describe the changes contributed by the pull request. That will give reviewers the context they need to do the review.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make sure that the change passes the automated tests, i.e., `mvn clean verify` passes. You can set up Travis CI to do that following &lt;span class=&quot;error&quot;&gt;&amp;#91;this guide&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://flink.apache.org/contribute-code.html#best-practices&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://flink.apache.org/contribute-code.html#best-practices&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Each pull request should address only one issue, not mix up code from multiple issues.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Each commit in the pull request has a meaningful commit message (including the JIRA id)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Once all items of the checklist are addressed, remove the above text and this checklist, leaving only the filled out template below.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;   *&lt;b&gt;(The sections below can be removed for hotfixes of typos)&lt;/b&gt;*&lt;br/&gt;
   --&amp;gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   &lt;b&gt;To fix the directory creation error while running on Windows with RockDBBackend&lt;/b&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;



&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Changed the RocksDBKeyedStateBackend to remove leading &apos;/&apos; in checkpoint path on windows&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This change is already covered by existing tests, such as &lt;b&gt;(please describe tests)&lt;/b&gt;.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: ( no )&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): ( no )&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: ( no )&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: ( no )&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? ( no)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16699914" author="githubbot" created="Tue, 27 Nov 2018 04:39:30 +0000"  >&lt;p&gt;imamitsehgal removed a comment on issue #7171: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10918&quot; title=&quot;incremental Keyed state with RocksDB throws cannot create directory error in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10918&quot;&gt;&lt;del&gt;FLINK-10918&lt;/del&gt;&lt;/a&gt; Fix error while checkpointing on window keyed state rock &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/7171#issuecomment-441378109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/7171#issuecomment-441378109&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   What is the purpose of the change?&lt;br/&gt;
   To fix the issue with creating directory while running on windows with keyed state and rocksdbbackend.&lt;br/&gt;
   Brief change log&lt;br/&gt;
   RockDBKeyedStateBackend class changes to remove leading &apos;/&apos; in the path string&lt;br/&gt;
   Verifying this change&lt;br/&gt;
   This change is already covered by existing tests, such as (please describe tests).&lt;br/&gt;
   Documentation&lt;br/&gt;
   Does this pull request introduce a new feature? NO&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17003793" author="koalalam" created="Thu, 26 Dec 2019 22:33:46 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=imamitsehgal&quot; class=&quot;user-hover&quot; rel=&quot;imamitsehgal&quot;&gt;imamitsehgal&lt;/a&gt;, what is the latest of this issue? Looks like this issue is still there in v1.9+&lt;/p&gt;</comment>
                            <comment id="17036414" author="stephanewen" created="Thu, 13 Feb 2020 18:35:24 +0000"  >&lt;p&gt;I think we need to re-boot this issue.&lt;/p&gt;

&lt;p&gt;Looking at the code, the root cause seems to be the use of the Flink Path class for local directories, which not always handles the removal of leading slashes correctly.&lt;/p&gt;

&lt;p&gt;I believe the best fix is to change the RocksDB Snapshot classes to use either &lt;tt&gt;File&lt;/tt&gt; or &lt;tt&gt;java.io.file.Path&lt;/tt&gt;. The reason being that Flink&apos;s Path class is the minimal &quot;cross file system / object store&quot; abstraction (local, hdfs, s3, etc.).&lt;/p&gt;

&lt;p&gt;RocksDB is strictly tied to the local Unix/Windows file system, so it makes sense to build the classes with the local File or Path types.&lt;/p&gt;</comment>
                            <comment id="17036536" author="stephanewen" created="Thu, 13 Feb 2020 22:04:46 +0000"  >&lt;p&gt;Here is an implementation of using &lt;tt&gt;java.nio.file.Path&lt;/tt&gt; rather than Flink&apos;s Path class:&lt;br/&gt;
&lt;a href=&quot;https://github.com/StephanEwen/flink/tree/rocks_incremental_windows&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StephanEwen/flink/tree/rocks_incremental_windows&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17036661" author="carp84" created="Fri, 14 Feb 2020 03:09:04 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klion26&quot; class=&quot;user-hover&quot; rel=&quot;klion26&quot;&gt;klion26&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17036771" author="stephanewen" created="Fri, 14 Feb 2020 08:06:49 +0000"  >&lt;p&gt;Will open a PR with this shortly, happy to take reviews then...&lt;/p&gt;</comment>
                            <comment id="17044100" author="carp84" created="Tue, 25 Feb 2020 03:41:00 +0000"  >&lt;p&gt;Fixed in:&lt;br/&gt;
master via dddda6904df94beeb0239c936e25968988f68afa&lt;br/&gt;
release-1.10 via 399329275e5e2baca9ed9494cce97ff732ac077a&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13199614">FLINK-10950</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12948632" name="0001-FLINK-10918-Fix-for-checkpoint-creation-on-windows-1.patch" size="1863" author="imamitsehgal" created="Sun, 18 Nov 2018 13:06:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00mgw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>