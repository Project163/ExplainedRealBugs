<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:15:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-29830] PulsarSinkITCase$DeliveryGuaranteeTest.writeRecordsToPulsar failed</title>
                <link>https://issues.apache.org/jira/browse/FLINK-29830</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Nov 01 01:28:03 [ERROR] Failures: 
Nov 01 01:28:03 [ERROR]   PulsarSinkITCase$DeliveryGuaranteeTest.writeRecordsToPulsar:140 
Nov 01 01:28:03 Actual and expected should have same size but actual size is:
Nov 01 01:28:03   0
Nov 01 01:28:03 &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; expected size is:
Nov 01 01:28:03   115
Nov 01 01:28:03 Actual was:
Nov 01 01:28:03   []
Nov 01 01:28:03 Expected was:
Nov 01 01:28:03   [&lt;span class=&quot;code-quote&quot;&gt;&quot;AT_LEAST_ONCE-isxrFGAL-0-kO65unDUKX&quot;&lt;/span&gt;,
Nov 01 01:28:03     &lt;span class=&quot;code-quote&quot;&gt;&quot;AT_LEAST_ONCE-isxrFGAL-1-4tBNu1UmeR&quot;&lt;/span&gt;,
Nov 01 01:28:03     &lt;span class=&quot;code-quote&quot;&gt;&quot;AT_LEAST_ONCE-isxrFGAL-2-9PTnEahlNU&quot;&lt;/span&gt;,
Nov 01 01:28:03     &lt;span class=&quot;code-quote&quot;&gt;&quot;AT_LEAST_ONCE-isxrFGAL-3-GjWqEp21yz&quot;&lt;/span&gt;,
Nov 01 01:28:03     &lt;span class=&quot;code-quote&quot;&gt;&quot;AT_LEAST_ONCE-isxrFGAL-4-jnbJr9C0w8&quot;&lt;/span&gt;,
Nov 01 01:28:03     &lt;span class=&quot;code-quote&quot;&gt;&quot;AT_LEAST_ONCE-isxrFGAL-5-e8Wacz5yDO&quot;&lt;/span&gt;,
Nov 01 01:28:03     &lt;span class=&quot;code-quote&quot;&gt;&quot;AT_LEAST_ONCE-isxrFGAL-6-9cW53j3Zcf&quot;&lt;/span&gt;,
Nov 01 01:28:03     &lt;span class=&quot;code-quote&quot;&gt;&quot;AT_LEAST_ONCE-isxrFGAL-7-jk8z3m2Aa5&quot;&lt;/span&gt;,
Nov 01 01:28:03     &lt;span class=&quot;code-quote&quot;&gt;&quot;AT_LEAST_ONCE-isxrFGAL-8-VU56KmMeiz&quot;&lt;/span&gt;,
Nov 01 01:28:03     &lt;span class=&quot;code-quote&quot;&gt;&quot;AT_LEAST_ONCE-isxrFGAL-9-uvMdFxxDAj&quot;&lt;/span&gt;,
Nov 01 01:28:03     &lt;span class=&quot;code-quote&quot;&gt;&quot;AT_LEAST_ONCE-isxrFGAL-10-FQyWfwJFbH&quot;&lt;/span&gt;,
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=42680&amp;amp;view=logs&amp;amp;j=aa18c3f6-13b8-5f58-86bb-c1cffb239496&amp;amp;t=502fb6c0-30a2-5e49-c5c2-a00fa3acb203&amp;amp;l=37544&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=42680&amp;amp;view=logs&amp;amp;j=aa18c3f6-13b8-5f58-86bb-c1cffb239496&amp;amp;t=502fb6c0-30a2-5e49-c5c2-a00fa3acb203&amp;amp;l=37544&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13493964">FLINK-29830</key>
            <summary>PulsarSinkITCase$DeliveryGuaranteeTest.writeRecordsToPulsar failed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="syhily">Yufan Sheng</assignee>
                                    <reporter username="martijnvisser">Martijn Visser</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 1 Nov 2022 08:25:29 +0000</created>
                <updated>Thu, 19 Jan 2023 10:27:20 +0000</updated>
                            <resolved>Fri, 2 Dec 2022 14:23:10 +0000</resolved>
                                    <version>1.16.0</version>
                    <version>1.17.0</version>
                    <version>1.15.3</version>
                                    <fixVersion>1.17.0</fixVersion>
                    <fixVersion>1.16.1</fixVersion>
                    <fixVersion>1.15.4</fixVersion>
                    <fixVersion>pulsar-3.0.1</fixVersion>
                                    <component>Connectors / Pulsar</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17627020" author="mapohl" created="Tue, 1 Nov 2022 08:57:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=42681&amp;amp;view=logs&amp;amp;j=fc5181b0-e452-5c8f-68de-1097947f6483&amp;amp;t=995c650b-6573-581c-9ce6-7ad4cc038461&amp;amp;l=27843&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=42681&amp;amp;view=logs&amp;amp;j=fc5181b0-e452-5c8f-68de-1097947f6483&amp;amp;t=995c650b-6573-581c-9ce6-7ad4cc038461&amp;amp;l=27843&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17627688" author="fabian.paul" created="Wed, 2 Nov 2022 13:09:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijnvisser&quot; class=&quot;user-hover&quot; rel=&quot;martijnvisser&quot;&gt;martijnvisser&lt;/a&gt; do you think this is a block for the 1.15.3 release? The pulsar tests seem to be flaky for a while.&lt;/p&gt;</comment>
                            <comment id="17627719" author="martijnvisser" created="Wed, 2 Nov 2022 13:45:29 +0000"  >&lt;p&gt;This is not a blocker for 1.15.3&lt;/p&gt;</comment>
                            <comment id="17629646" author="mapohl" created="Mon, 7 Nov 2022 08:01:54 +0000"  >&lt;p&gt;Same build:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=42857&amp;amp;view=logs&amp;amp;j=fc5181b0-e452-5c8f-68de-1097947f6483&amp;amp;t=995c650b-6573-581c-9ce6-7ad4cc038461&amp;amp;l=28624&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=42857&amp;amp;view=logs&amp;amp;j=fc5181b0-e452-5c8f-68de-1097947f6483&amp;amp;t=995c650b-6573-581c-9ce6-7ad4cc038461&amp;amp;l=28624&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=42857&amp;amp;view=logs&amp;amp;j=245e1f2e-ba5b-5570-d689-25ae21e5302f&amp;amp;t=d04c9862-880c-52f5-574b-a7a79fef8e0f&amp;amp;l=28463&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=42857&amp;amp;view=logs&amp;amp;j=245e1f2e-ba5b-5570-d689-25ae21e5302f&amp;amp;t=d04c9862-880c-52f5-574b-a7a79fef8e0f&amp;amp;l=28463&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17629820" author="syhily" created="Mon, 7 Nov 2022 13:30:59 +0000"  >&lt;p&gt;The log couldn&apos;t show the real cause. We shall add some log to print the hidden error stack.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Timeout for waiting the records from Pulsar. We have consumed 0 messages, expect 137 messages.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Aha, I find the cause, it&apos;s my mistake in consuming messages.&lt;/p&gt;</comment>
                            <comment id="17629838" author="mapohl" created="Mon, 7 Nov 2022 13:56:48 +0000"  >&lt;p&gt;There is some warning in the logs about some timeout on the Pulsar side:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
160037 01:57:02,826 [Legacy Source &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; - Source: Custom Source (1/1)#0] WARN  org.apache.flink.connector.pulsar.testutils.function.ControlSource$StopSignal [] - Timeout &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; waiting the records from Pulsar. We have consumed 0 messages, expect 137 messages.
 160038 01:57:02,987 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Triggering checkpoint 600 (type=CheckpointType{name=&lt;span class=&quot;code-quote&quot;&gt;&apos;Checkpoint&apos;&lt;/span&gt;, sharingFilesStrategy=FORWARD_BACKWARD}) @ 1667699822986 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 6fa5e9f506b63276a4933daa137fdf43.
 160039 01:57:02,994 [jobmanager-io-thread-13] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Completed checkpoint 600 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 6fa5e9f506b63276a4933daa137fdf43 (314 bytes, checkpointDuration=8 ms, finalizationTime=0 ms).
 160040 01:57:02,996 [Source: Custom Source (1/1)#0] INFO  org.apache.flink.runtime.taskmanager.Task                    [] - Source: Custom Source (1/1)#0 (3cfeb328eb182887d817886aa848606d) switched from RUNNING to FINISHED.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Subsequent checkpoints are declined as a consequence (AFAIU).&lt;/p&gt;</comment>
                            <comment id="17629841" author="syhily" created="Mon, 7 Nov 2022 14:03:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; It&apos;s my mistake in &lt;tt&gt;ControlSource.StopSignal&lt;/tt&gt;. I consume messages with the latest stop cursor. Which would cause the race condition that all message has been sent before I start the consumer.&lt;/p&gt;

&lt;p&gt;Can you add 1.16.0 in affected version?&lt;/p&gt;</comment>
                            <comment id="17629842" author="mapohl" created="Mon, 7 Nov 2022 14:05:49 +0000"  >&lt;p&gt;Done. Are you going to provide a fix for that? I would assign this Jira issue to you in that case.&lt;/p&gt;</comment>
                            <comment id="17629846" author="syhily" created="Mon, 7 Nov 2022 14:10:50 +0000"  >&lt;p&gt;Yep, I&apos;ll submit a fix right now. Plz assign this ticket to me and thanks for helping me find this undetectable bug.&lt;/p&gt;</comment>
                            <comment id="17629860" author="syhily" created="Mon, 7 Nov 2022 15:00:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; Can you help review the PR? &lt;a href=&quot;https://github.com/apache/flink/pull/21252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/21252&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17633479" author="leonard xu" created="Mon, 14 Nov 2022 03:38:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=43089&amp;amp;view=logs&amp;amp;j=8eee98ee-a482-5f7c-2c51-b3456453e704&amp;amp;t=da58e781-88fe-508b-b74c-018210e533cc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=43089&amp;amp;view=logs&amp;amp;j=8eee98ee-a482-5f7c-2c51-b3456453e704&amp;amp;t=da58e781-88fe-508b-b74c-018210e533cc&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17633482" author="leonard xu" created="Mon, 14 Nov 2022 03:43:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=43089&amp;amp;view=logs&amp;amp;j=8eee98ee-a482-5f7c-2c51-b3456453e704&amp;amp;t=da58e781-88fe-508b-b74c-018210e533cc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=43089&amp;amp;view=logs&amp;amp;j=8eee98ee-a482-5f7c-2c51-b3456453e704&amp;amp;t=da58e781-88fe-508b-b74c-018210e533cc&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17636585" author="leonard xu" created="Mon, 21 Nov 2022 09:32:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=43253&amp;amp;view=logs&amp;amp;j=5cae8624-c7eb-5c51-92d3-4d2dacedd221&amp;amp;t=5acec1b4-945b-59ca-34f8-168928ce5199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=43253&amp;amp;view=logs&amp;amp;j=5cae8624-c7eb-5c51-92d3-4d2dacedd221&amp;amp;t=5acec1b4-945b-59ca-34f8-168928ce5199&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17638075" author="mapohl" created="Thu, 24 Nov 2022 03:35:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=syhily&quot; class=&quot;user-hover&quot; rel=&quot;syhily&quot;&gt;syhily&lt;/a&gt; may you create a backport PR for 1.16 and 1.15 as well, please?&lt;/p&gt;</comment>
                            <comment id="17641094" author="mapohl" created="Wed, 30 Nov 2022 06:54:15 +0000"  >&lt;p&gt;I moved this under the Umbrella Pulsar stability ticket.&lt;/p&gt;</comment>
                            <comment id="17641928" author="martijnvisser" created="Thu, 1 Dec 2022 13:46:04 +0000"  >&lt;p&gt;Fixed in Pulsar external connector repo: 5162b766bb042705ecafefc773bb2600b7e56263&lt;/p&gt;</comment>
                            <comment id="17642543" author="mapohl" created="Fri, 2 Dec 2022 14:23:10 +0000"  >&lt;p&gt;master: f8b3b33ce1c2b36aa8e0011131a1ba74f540035f&lt;br/&gt;
1.16: 0ff47bedba48714c79b82cfb0379768d79e2d6ef&lt;br/&gt;
1.15: 3eb002eb30ebffba6306081f79ead3a487b2cb5c&lt;br/&gt;
flink-connector-pulsar:v3.0: 5162b766bb042705ecafefc773bb2600b7e56263&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                            <outwardlinks description="Testing discovered">
                                        <issuelink>
            <issuekey id="13504751">FLINK-30109</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1aofs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>