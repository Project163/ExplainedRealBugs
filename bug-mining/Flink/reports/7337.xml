<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:19:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-31788] Add back Support emitValueWithRetract for TableAggregateFunction</title>
                <link>https://issues.apache.org/jira/browse/FLINK-31788</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;This feature was originally implemented in the old planner:&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/8550/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/8550/files&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;However, this feature was not implemented in the new planner , the Blink planner.&#160;&lt;/p&gt;

&lt;p&gt;With the removal of the old planner in version 1.14&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/16080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/16080&lt;/a&gt;&#160;, this code was also removed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We should add it back.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;origin discuss link:&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://lists.apache.org/thread/rnvw8k3636dqhdttpmf1c9colbpw9svp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/rnvw8k3636dqhdttpmf1c9colbpw9svp&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13532369">FLINK-31788</key>
            <summary>Add back Support emitValueWithRetract for TableAggregateFunction</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="qingyue">Jane Chan</assignee>
                                    <reporter username="hackergin">Feng Jin</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 12 Apr 2023 15:13:51 +0000</created>
                <updated>Mon, 29 Jan 2024 07:31:41 +0000</updated>
                            <resolved>Sun, 14 Jan 2024 05:30:40 +0000</resolved>
                                    <version>1.14.0</version>
                    <version>1.14.2</version>
                    <version>1.14.3</version>
                    <version>1.14.4</version>
                    <version>1.14.5</version>
                    <version>1.15.0</version>
                    <version>1.15.1</version>
                    <version>1.16.0</version>
                    <version>1.17.0</version>
                    <version>1.15.2</version>
                    <version>1.14.6</version>
                    <version>1.15.3</version>
                    <version>1.16.1</version>
                    <version>1.15.4</version>
                    <version>1.16.2</version>
                    <version>1.18.0</version>
                    <version>1.17.1</version>
                    <version>1.16.3</version>
                    <version>1.17.2</version>
                    <version>1.18.1</version>
                                    <fixVersion>1.19.0</fixVersion>
                    <fixVersion>1.18.2</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="17711443" author="martijnvisser" created="Wed, 12 Apr 2023 15:21:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=twalthr&quot; class=&quot;user-hover&quot; rel=&quot;twalthr&quot;&gt;twalthr&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="17711747" author="twalthr" created="Thu, 13 Apr 2023 08:26:28 +0000"  >&lt;p&gt;This looks like a regression to me. Does anyone from the original Blink mergers have context on this? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17711802" author="jark" created="Thu, 13 Apr 2023 09:54:23 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hackergin&quot; class=&quot;user-hover&quot; rel=&quot;hackergin&quot;&gt;hackergin&lt;/a&gt;, it seems the &lt;tt&gt;emitValueWithRetract&lt;/tt&gt; was never introduced. &lt;a href=&quot;https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=97552739&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;FLIP-29&lt;/a&gt; proposed &lt;tt&gt;emitValueWithRetract&lt;/tt&gt;, but it was implemented as &lt;tt&gt;emitUpdateWithRetract&lt;/tt&gt; in the first &lt;a href=&quot;https://github.com/apache/flink/pull/8550/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt; (I don&apos;t know why the method name was changed), and the &lt;tt&gt;emitUpdateWithRetract&lt;/tt&gt; is still supported in the latest version in the blink planner. &lt;/p&gt;</comment>
                            <comment id="17711840" author="hackergin" created="Thu, 13 Apr 2023 11:11:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; &#160;I&apos;m sorry, I wrote the wrong name.&#160; It should be &lt;tt&gt;emitUpdateWithRetract&lt;/tt&gt;.&#160; &#160;&lt;/p&gt;

&lt;p&gt;I found that there is a relevant definition of &lt;tt&gt;emitUpdateWithRetract&lt;/tt&gt;&#160;function in the code, and it is indeed checked during the validation phase. However, I did not find any relevant methods during codegen&lt;/p&gt;</comment>
                            <comment id="17711852" author="jark" created="Thu, 13 Apr 2023 11:38:16 +0000"  >&lt;p&gt;Thanks for pointing out this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hackergin&quot; class=&quot;user-hover&quot; rel=&quot;hackergin&quot;&gt;hackergin&lt;/a&gt;. If it&apos;s true, I think it makes sense to add it back. &lt;/p&gt;

&lt;p&gt;By the way, are you using this UDTAF?  I&apos;m wondering why it is not found for so many years. Does it mean users rarely use it?&lt;/p&gt;</comment>
                            <comment id="17711854" author="hackergin" created="Thu, 13 Apr 2023 11:42:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160; This question is from a user mail. &#160;&#160;&lt;/p&gt;

&lt;p&gt;The origin discuss link:&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://lists.apache.org/thread/rnvw8k3636dqhdttpmf1c9colbpw9svp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/rnvw8k3636dqhdttpmf1c9colbpw9svp&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17761219" author="qingyue" created="Fri, 1 Sep 2023 08:03:25 +0000"  >&lt;p&gt;Sorry for just noticing this issue now. This problem should be a feature rollback when deprecating the old planner since 1.15. The method `emitUpdateWithRetract` was not called in the codegen, but the &lt;a href=&quot;https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/dev/table/functions/udfs/#retraction-example&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;user-defined table agg func doc&lt;/a&gt; still gives the retract example that evaluates this method.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Jark: I&apos;m wondering why it is not found for so many years. Does it mean users rarely use it?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;IMO, we can evaluate whether users still need this feature versus the cost of fixing it. If we no longer intend to support this method, we can open a discussion to deprecate it. Alternatively, it&apos;s reasonable to add it back.&lt;/p&gt;</comment>
                            <comment id="17761708" author="martijnvisser" created="Mon, 4 Sep 2023 07:09:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=qingyue&quot; class=&quot;user-hover&quot; rel=&quot;qingyue&quot;&gt;qingyue&lt;/a&gt; Will you open a discussion thread on it? I feel like it&apos;s a regression and we should consider making it available again, but also +1 for seeing how many users actually use this&lt;/p&gt;</comment>
                            <comment id="17762557" author="qingyue" created="Thu, 7 Sep 2023 03:47:53 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijnvisser&quot; class=&quot;user-hover&quot; rel=&quot;martijnvisser&quot;&gt;martijnvisser&lt;/a&gt;, I&apos;ve started a &lt;a href=&quot;https://lists.apache.org/thread/879yfhy2rkq0mxpot7c6fw4s0cj3dsmp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;discussion&lt;/a&gt;, and let&apos;s talk there. Cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17764475" author="qingyue" created="Wed, 13 Sep 2023 03:48:45 +0000"  >&lt;p&gt;Hi, according to the discussion, we&apos;re on the consensus that we should support this feature, please assign the ticket to me, thanks.&lt;/p&gt;</comment>
                            <comment id="17764485" author="lincoln.86xy" created="Wed, 13 Sep 2023 04:34:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=qingyue&quot; class=&quot;user-hover&quot; rel=&quot;qingyue&quot;&gt;qingyue&lt;/a&gt; assigned to you.&lt;/p&gt;</comment>
                            <comment id="17764514" author="martijnvisser" created="Wed, 13 Sep 2023 06:52:26 +0000"  >&lt;p&gt;Thanks for driving this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=qingyue&quot; class=&quot;user-hover&quot; rel=&quot;qingyue&quot;&gt;qingyue&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17805853" author="qingyue" created="Fri, 12 Jan 2024 01:48:11 +0000"  >&lt;p&gt;Fixed in master 01569644aedb56f792c7f7e04f84612d405b0bdf&lt;/p&gt;

&lt;p&gt;Fixed in release-1.18 d7e9abe73a27edc2a27182b55307ff15d88f1042&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13549357">FLINK-33015</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13564874">FLINK-34115</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13564325">FLINK-34060</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                            <outwardlinks description="Testing discovered">
                                        <issuelink>
            <issuekey id="13566471">FLINK-34258</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1h8rk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>