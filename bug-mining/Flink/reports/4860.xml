<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:51:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-20235] Missing Hive dependencies</title>
                <link>https://issues.apache.org/jira/browse/FLINK-20235</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I tried following the setup here: &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-master/dev/table/hive/#dependencies&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.apache.org/projects/flink/flink-docs-master/dev/table/hive/#dependencies&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I put the flink-sql-connector-hive-2.3.6 in the &lt;tt&gt;\lib&lt;/tt&gt; directory and tried running queries (as described in &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-master/dev/table/hive/hive_streaming.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.apache.org/projects/flink/flink-docs-master/dev/table/hive/hive_streaming.html&lt;/a&gt;) via &lt;tt&gt;sql-client&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SET table.sql-dialect=hive;
CREATE TABLE hive_table (
  user_id STRING,
  order_amount DOUBLE
) PARTITIONED BY (dt STRING, hr STRING) STORED AS parquet TBLPROPERTIES (
  &lt;span class=&quot;code-quote&quot;&gt;&apos;partition.time-extractor.timestamp-pattern&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;$dt $hr:00:00&apos;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&apos;sink.partition-commit.trigger&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;partition-time&apos;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&apos;sink.partition-commit.delay&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;1 s&apos;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&apos;sink.partition-commit.policy.kind&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;metastore,success-file&apos;&lt;/span&gt;
);

SET table.sql-dialect=&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;;
SELECT * FROM hive_table;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It fails with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.NoClassDefFoundError: Could not initialize &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.flink.hive.shaded.parquet.format.converter.ParquetMetadataConverter
	at org.apache.flink.hive.shaded.formats.parquet.ParquetVectorizedInputFormat.createReader(ParquetVectorizedInputFormat.java:112)
	at org.apache.flink.hive.shaded.formats.parquet.ParquetVectorizedInputFormat.createReader(ParquetVectorizedInputFormat.java:73)
	at org.apache.flink.connectors.hive.read.HiveBulkFormatAdapter.createReader(HiveBulkFormatAdapter.java:99)
	at org.apache.flink.connectors.hive.read.HiveBulkFormatAdapter.createReader(HiveBulkFormatAdapter.java:62)
	at org.apache.flink.connector.file.src.impl.FileSourceSplitReader.checkSplitOrStartNext(FileSourceSplitReader.java:110)
	at org.apache.flink.connector.file.src.impl.FileSourceSplitReader.fetch(FileSourceSplitReader.java:68)
	at org.apache.flink.connector.base.source.reader.fetcher.FetchTask.run(FetchTask.java:58)
	at org.apache.flink.connector.base.source.reader.fetcher.SplitFetcher.runOnce(SplitFetcher.java:136)
	at org.apache.flink.connector.base.source.reader.fetcher.SplitFetcher.run(SplitFetcher.java:100)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	... 1 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;hive 2.3.4&lt;br/&gt;
hadoop 2.7.4&lt;/p&gt;</environment>
        <key id="13341523">FLINK-20235</key>
            <summary>Missing Hive dependencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lzljs3620320">Jingsong Lee</assignee>
                                    <reporter username="dwysakowicz">Dawid Wysakowicz</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 19 Nov 2020 08:26:25 +0000</created>
                <updated>Tue, 24 Nov 2020 09:35:48 +0000</updated>
                            <resolved>Tue, 24 Nov 2020 09:35:48 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.12.0</fixVersion>
                                    <component>Connectors / Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17235283" author="lzljs3620320" created="Thu, 19 Nov 2020 09:00:15 +0000"  >&lt;p&gt;This may be the same as &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-19564&quot; title=&quot;Parquet lack additional dependencies after bumping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-19564&quot;&gt;&lt;del&gt;FLINK-19564&lt;/del&gt;&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17235285" author="dawidwys" created="Thu, 19 Nov 2020 09:01:31 +0000"  >&lt;p&gt;Yes, I think it is the same &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17235287" author="dawidwys" created="Thu, 19 Nov 2020 09:03:25 +0000"  >&lt;p&gt;I closed the other one, as this one has user facing steps to reproduce the issue.&lt;/p&gt;</comment>
                            <comment id="17237173" author="rmetzger" created="Mon, 23 Nov 2020 07:51:21 +0000"  >&lt;p&gt;Shouldn&apos;t this ticket be a blocker?&lt;/p&gt;

&lt;p&gt;I would like to create the first voting RC soon, I guess we want to include this fix in there? If so, please make sure to merge a fix soon. If you want me to track it, upgrade it to blocker.&lt;/p&gt;</comment>
                            <comment id="17237773" author="dian.fu" created="Tue, 24 Nov 2020 01:28:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt;&#160;Could you help to take a look at this issue?&lt;/p&gt;</comment>
                            <comment id="17237806" author="lzljs3620320" created="Tue, 24 Nov 2020 02:56:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dian.fu&quot; class=&quot;user-hover&quot; rel=&quot;dian.fu&quot;&gt;dian.fu&lt;/a&gt;&#160;I will create a PR soon&lt;/p&gt;</comment>
                            <comment id="17237808" author="dian.fu" created="Tue, 24 Nov 2020 02:57:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lzljs3620320&quot; class=&quot;user-hover&quot; rel=&quot;lzljs3620320&quot;&gt;lzljs3620320&lt;/a&gt;&#160;Thanks a lot~&lt;/p&gt;</comment>
                            <comment id="17237857" author="lzljs3620320" created="Tue, 24 Nov 2020 04:29:06 +0000"  >&lt;p&gt;Verified &lt;a href=&quot;https://github.com/apache/flink/pull/14189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/14189&lt;/a&gt;&#160;, passed in my env.&lt;/p&gt;</comment>
                            <comment id="17237990" author="lzljs3620320" created="Tue, 24 Nov 2020 09:35:32 +0000"  >&lt;p&gt;master (1.12):&#160;7e7dbc27b02fa2d339f0ddb6fd3810745a2e3763&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13334773">FLINK-19564</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13340535">FLINK-20151</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kqt4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>