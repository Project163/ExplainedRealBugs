<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:40:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-13489] Heavy deployment end-to-end test fails on Travis with TM heartbeat timeout</title>
                <link>https://issues.apache.org/jira/browse/FLINK-13489</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://api.travis-ci.org/v3/job/564925128/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/564925128/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
------------------------------------------------------------
 The program finished with the following exception:

org.apache.flink.client.program.ProgramInvocationException: Job failed. (JobID: 1b4f1807cc749628cfc1bdf04647527a)
	at org.apache.flink.client.program.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.RestClusterClient.submitJob(RestClusterClient.java:250)
	at org.apache.flink.client.program.ClusterClient.run(ClusterClient.java:338)
	at org.apache.flink.streaming.api.environment.StreamContextEnvironment.execute(StreamContextEnvironment.java:60)
	at org.apache.flink.streaming.api.environment.StreamExecutionEnvironment.execute(StreamExecutionEnvironment.java:1507)
	at org.apache.flink.deployment.HeavyDeploymentStressTestProgram.main(HeavyDeploymentStressTestProgram.java:70)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.flink.client.program.PackagedProgram.callMainMethod(PackagedProgram.java:576)
	at org.apache.flink.client.program.PackagedProgram.invokeInteractiveModeForExecution(PackagedProgram.java:438)
	at org.apache.flink.client.program.ClusterClient.run(ClusterClient.java:274)
	at org.apache.flink.client.cli.CliFrontend.executeProgram(CliFrontend.java:746)
	at org.apache.flink.client.cli.CliFrontend.runProgram(CliFrontend.java:273)
	at org.apache.flink.client.cli.CliFrontend.run(CliFrontend.java:205)
	at org.apache.flink.client.cli.CliFrontend.parseParameters(CliFrontend.java:1010)
	at org.apache.flink.client.cli.CliFrontend.lambda$main$10(CliFrontend.java:1083)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1836)
	at org.apache.flink.runtime.security.HadoopSecurityContext.runSecured(HadoopSecurityContext.java:41)
	at org.apache.flink.client.cli.CliFrontend.main(CliFrontend.java:1083)
Caused by: org.apache.flink.runtime.client.JobExecutionException: Job execution failed.
	at org.apache.flink.runtime.jobmaster.JobResult.toJobExecutionResult(JobResult.java:146)
	at org.apache.flink.client.program.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.RestClusterClient.submitJob(RestClusterClient.java:247)
	... 21 more
Caused by: java.util.concurrent.TimeoutException: Heartbeat of TaskManager with id ea456d6a590eca7598c19c4d35e56db9 timed out.
	at org.apache.flink.runtime.jobmaster.JobMaster$TaskManagerHeartbeatListener.notifyHeartbeatTimeout(JobMaster.java:1149)
	at org.apache.flink.runtime.heartbeat.HeartbeatManagerImpl$HeartbeatMonitor.run(HeartbeatManagerImpl.java:318)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRunAsync(AkkaRpcActor.java:397)
	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcMessage(AkkaRpcActor.java:190)
	at org.apache.flink.runtime.rpc.akka.FencedAkkaRpcActor.handleRpcMessage(FencedAkkaRpcActor.java:74)
	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleMessage(AkkaRpcActor.java:152)
	at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:26)
	at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:21)
	at scala.PartialFunction$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;applyOrElse(PartialFunction.scala:123)
	at akka.japi.pf.UnitCaseStatement.applyOrElse(CaseStatements.scala:21)
	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:170)
	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171)
	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171)
	at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundReceive(Actor.scala:517)
	at akka.actor.AbstractActor.aroundReceive(AbstractActor.scala:225)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:592)
	at akka.actor.ActorCell.invoke(ActorCell.scala:561)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:258)
	at akka.dispatch.Mailbox.run(Mailbox.scala:225)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:235)
	at akka.dispatch.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at akka.dispatch.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at akka.dispatch.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at akka.dispatch.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13247779">FLINK-13489</key>
            <summary>Heavy deployment end-to-end test fails on Travis with TM heartbeat timeout</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevin.cyj">Yingjie Cao</assignee>
                                    <reporter username="tzulitai">Tzu-Li (Gordon) Tai</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 30 Jul 2019 04:27:19 +0000</created>
                <updated>Wed, 2 Oct 2019 17:45:20 +0000</updated>
                            <resolved>Tue, 13 Aug 2019 19:43:55 +0000</resolved>
                                                    <fixVersion>1.9.1</fixVersion>
                    <fixVersion>1.10.0</fixVersion>
                                    <component>Test Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16897985" author="kevin.cyj" created="Thu, 1 Aug 2019 11:13:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt; I wonder how this test was triggered? I used both master branch and release-1.9 branch, but there seems problem with the configuration of heavy deployment test. The test cluster can not be started, the following is the exception:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

2019-08-01 18:42:29,289 ERROR org.apache.flink.runtime.entrypoint.ClusterEntrypoint - Could not start cluster entrypoint StandaloneSessionClusterEntrypoint.
org.apache.flink.runtime.entrypoint.ClusterEntrypointException: Failed to initialize the cluster entrypoint StandaloneSessionClusterEntrypoint.
at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.startCluster(ClusterEntrypoint.java:182)
at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.runClusterEntrypoint(ClusterEntrypoint.java:501)
at org.apache.flink.runtime.entrypoint.StandaloneSessionClusterEntrypoint.main(StandaloneSessionClusterEntrypoint.java:65)
Caused by: org.apache.flink.util.FlinkException: Could not create the DispatcherResourceManagerComponent.
at org.apache.flink.runtime.entrypoint.component.AbstractDispatcherResourceManagerComponentFactory.create(AbstractDispatcherResourceManagerComponentFactory.java:259)
at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.runCluster(ClusterEntrypoint.java:210)
at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.lambda$startCluster$0(ClusterEntrypoint.java:164)
at org.apache.flink.runtime.security.NoOpSecurityContext.runSecured(NoOpSecurityContext.java:30)
at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.startCluster(ClusterEntrypoint.java:163)
... 2 more
Caused by: java.lang.IllegalArgumentException: The configuration value &lt;span class=&quot;code-quote&quot;&gt;&apos;containerized.heap-cutoff-min&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;600&apos;&lt;/span&gt; is larger than the total container memory 512
at org.apache.flink.runtime.clusterframework.ContaineredTaskManagerParameters.calculateCutoffMB(ContaineredTaskManagerParameters.java:133)
at org.apache.flink.runtime.util.ResourceManagerUtil.getResourceManagerConfiguration(ResourceManagerUtil.java:34)
at org.apache.flink.runtime.entrypoint.component.AbstractDispatcherResourceManagerComponentFactory.create(AbstractDispatcherResourceManagerComponentFactory.java:171)
... 6 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I set the config option containerized.heap-cutoff-min to 100 (default is 600) to make the test cluster start successfully.&#160;&lt;/p&gt;

&lt;p&gt;BTW, I Triggered the heavy deployment test by running:&#160;./flink-end-to-end-tests/run-single-test.sh test-scripts/test_heavy_deployment.sh.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;After&#160;the config option&#160;containerized.heap-cutoff-min was set, I run more than 300 times of the&#160;heavy deployment test, all tests passed and each test took about 20 seconds.&lt;/p&gt;

&lt;p&gt;After that, I hacked the travis config file and make the&#160;heavy deployment test run&#160;each time I push code to my github&#160;repository. However, the test did not pass because of timeout (more than 10min and killed by Travis). I am now still trying to figure out why the&#160; test is that slow on Travis.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16898497" author="kevin.cyj" created="Fri, 2 Aug 2019 02:42:01 +0000"  >&lt;p&gt;I tested different setting on Travis for the&#160;heavy deployment test and find the running time is relevant to state size and taskmanager memory size. When the original setting is used, the test encountered akka timeout problem sometimes, but after the&#160;taskmanager memory size was set to 1G (the original value is 512M), the problem did not occur anymore. I think 512M memory for 10 slot is a little small, so I suggest to increase the&#160;taskmanager memory size. What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16898733" author="till.rohrmann" created="Fri, 2 Aug 2019 09:32:29 +0000"  >&lt;p&gt;Yes let&apos;s increase it &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt;. Can you open a PR for the fix? Please also move this issue into &quot;In Progress&quot; if possible.&lt;/p&gt;

&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/566420659/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/566420659/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16898882" author="kevin.cyj" created="Fri, 2 Aug 2019 13:19:41 +0000"  >&lt;p&gt;I&apos;d like to open a PR and fix it.&lt;/p&gt;</comment>
                            <comment id="16898896" author="stephanewen" created="Fri, 2 Aug 2019 13:40:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt; I am wondering whether there is more hidden here.&lt;/p&gt;

&lt;p&gt;Can you share some details why the Akka timeout occurs? Why does the smaller TM heap size lead to that timeout? GC pressure? Some OOM in some threads?&lt;/p&gt;

&lt;p&gt;Also, why is the test sensitive to the value for &lt;tt&gt;containerized.heap-cutoff-min&lt;/tt&gt; ? The test runs with the standalone resource manager, no container / heap cutoff should ever be used there.&lt;/p&gt;</comment>
                            <comment id="16899343" author="kevin.cyj" created="Sat, 3 Aug 2019 03:32:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt; I run the test for many times, but only encountered the akka timeout problem only once, and nerve encountered the heartbeat timeout problem. But unfortunately, I did not get the JM/TM log of that&#160;failure. Latter, I modified the test script to print gc and JM/TM log out and run the test for many times, but the timeout problem did not occur. I noticed the gc time is a little long, many 2, 3, 4 seconds (these are for successfully finished job). I guess the previous failure may result by GC. Another problem is that the Travis test platform seems not stable, the test time varies.&lt;/p&gt;

&lt;p&gt;As for&#160;containerized.heap-cutoff-min, it is because it was used for memory calculation. If the default value (600) is used, the standalone cluster can not start up. I agree with you that this config option should not be considered by standalone mode, but it seems reusing the same&#160;code (I think it also should be fixed). The flowing is the exception stack:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 2019-08-01 18:42:29,289 ERROR org.apache.flink.runtime.entrypoint.ClusterEntrypoint - Could not start cluster entrypoint StandaloneSessionClusterEntrypoint.
 org.apache.flink.runtime.entrypoint.ClusterEntrypointException: Failed to initialize the cluster entrypoint StandaloneSessionClusterEntrypoint.
 at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.startCluster(ClusterEntrypoint.java:182)
 at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.runClusterEntrypoint(ClusterEntrypoint.java:501)
 at org.apache.flink.runtime.entrypoint.StandaloneSessionClusterEntrypoint.main(StandaloneSessionClusterEntrypoint.java:65)
 Caused by: org.apache.flink.util.FlinkException: Could not create the DispatcherResourceManagerComponent.
 at org.apache.flink.runtime.entrypoint.component.AbstractDispatcherResourceManagerComponentFactory.create(AbstractDispatcherResourceManagerComponentFactory.java:259)
 at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.runCluster(ClusterEntrypoint.java:210)
 at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.lambda$startCluster$0(ClusterEntrypoint.java:164)
 at org.apache.flink.runtime.security.NoOpSecurityContext.runSecured(NoOpSecurityContext.java:30)
 at org.apache.flink.runtime.entrypoint.ClusterEntrypoint.startCluster(ClusterEntrypoint.java:163)
 ... 2 more
 Caused by: java.lang.IllegalArgumentException: The configuration value &lt;span class=&quot;code-quote&quot;&gt;&apos;containerized.heap-cutoff-min&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;600&apos;&lt;/span&gt; is larger than the total container memory 512
 at org.apache.flink.runtime.clusterframework.ContaineredTaskManagerParameters.calculateCutoffMB(ContaineredTaskManagerParameters.java:133)
 at org.apache.flink.runtime.util.ResourceManagerUtil.getResourceManagerConfiguration(ResourceManagerUtil.java:34)
 at org.apache.flink.runtime.entrypoint.component.AbstractDispatcherResourceManagerComponentFactory.create(AbstractDispatcherResourceManagerComponentFactory.java:171)
 ... 6 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16899749" author="gaoyunhaii" created="Mon, 5 Aug 2019 03:51:42 +0000"  >&lt;p&gt;I think the cut-off configuration problem might be introduced by the recent PR &lt;a href=&quot;https://github.com/apache/flink/pull/9246&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#9246&lt;/a&gt;, which is cherry-pick of&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/9105&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#9105&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16899854" author="carp84" created="Mon, 5 Aug 2019 07:51:18 +0000"  >&lt;p&gt;Please mark the status as &quot;In-Progress&quot; since you&apos;ve already started debugging here &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt;, thanks.&lt;/p&gt;</comment>
                            <comment id="16899860" author="kevin.cyj" created="Mon, 5 Aug 2019 07:57:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=carp84&quot; class=&quot;user-hover&quot; rel=&quot;carp84&quot;&gt;carp84&lt;/a&gt;&#160;Thanks for reminding, I have&#160;marked the status as &quot;In-Progress&quot;.&lt;/p&gt;</comment>
                            <comment id="16899914" author="till.rohrmann" created="Mon, 5 Aug 2019 08:56:30 +0000"  >&lt;p&gt;Yes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt;, the cut-off configuration problem has been introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13241&quot; title=&quot;YarnResourceManager does not handle slot allocations in certain cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-13241&quot;&gt;&lt;del&gt;FLINK-13241&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt; opened &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13579&quot; title=&quot;Failed launching standalone cluster due to improper configured irrelevant config options for active mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-13579&quot;&gt;&lt;del&gt;FLINK-13579&lt;/del&gt;&lt;/a&gt; to fix this issue.&lt;/p&gt;

&lt;p&gt;That leaves now the problem of the Akka timeout issues to be figured out. Maybe it&apos;s solely because of Travis but we should make sure that this is the case.&lt;/p&gt;</comment>
                            <comment id="16899915" author="till.rohrmann" created="Mon, 5 Aug 2019 08:57:28 +0000"  >&lt;p&gt;This is issue is partially caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13579&quot; title=&quot;Failed launching standalone cluster due to improper configured irrelevant config options for active mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-13579&quot;&gt;&lt;del&gt;FLINK-13579&lt;/del&gt;&lt;/a&gt;. The Akka timeouts might not be explained by this issue, though.&lt;/p&gt;</comment>
                            <comment id="16899957" author="kevin.cyj" created="Mon, 5 Aug 2019 09:49:34 +0000"  >&lt;p&gt;The GC time is still high after I Increased the heap size of TM and JM (though lower than before, there are still many 1 ~&#160;2 seconds entries). And I notice that the real time if much longer than user plus sys time. Usually, the user and sys time are longer than real time because of multi thread GC. Longer real time usually means that the GC threads are waiting for CPU or IO. Like the GC thread, the RPC main thread&#160; may also need to wait for CPU or IO. If so, may be the proper solution for this case is just to increase the akka and heartbeat timeout config value.&#160; I will collect more information about this case.&lt;/p&gt;</comment>
                            <comment id="16899965" author="till.rohrmann" created="Mon, 5 Aug 2019 10:05:56 +0000"  >&lt;p&gt;Thanks for the update &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt;. Here is a PR for the problem with the container cutoff min value: &lt;a href=&quot;https://github.com/apache/flink/pull/9357&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/9357&lt;/a&gt;. You could rebase your work on this to see whether the increase in container size is no longer necessary.&lt;/p&gt;</comment>
                            <comment id="16900649" author="till.rohrmann" created="Tue, 6 Aug 2019 05:47:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13579&quot; title=&quot;Failed launching standalone cluster due to improper configured irrelevant config options for active mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-13579&quot;&gt;&lt;del&gt;FLINK-13579&lt;/del&gt;&lt;/a&gt; has been merged.&lt;/p&gt;</comment>
                            <comment id="16901816" author="till.rohrmann" created="Wed, 7 Aug 2019 07:33:58 +0000"  >&lt;p&gt;&lt;del&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt; are you still working on this issue? I&apos;ve seen the test still fail after &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13579&quot; title=&quot;Failed launching standalone cluster due to improper configured irrelevant config options for active mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-13579&quot;&gt;&lt;del&gt;FLINK-13579&lt;/del&gt;&lt;/a&gt;.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;In the latest &lt;tt&gt;release-1.9&lt;/tt&gt; cron job the tests weren&apos;t executed because the tpch end-to-end test failed consistently.&lt;/p&gt;</comment>
                            <comment id="16901830" author="kevin.cyj" created="Wed, 7 Aug 2019 07:42:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt; I am still working on this issue, could you share the latest failure log, I wonder if the failures we encountered are resulted by the same cause. I am now focusing on the akka timeout problem, but&#160;the probability of failure is low, about 1%-2%.&lt;/p&gt;</comment>
                            <comment id="16901841" author="kevin.cyj" created="Wed, 7 Aug 2019 07:49:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt; Is there a Jira for the&#160;tpch end-to-end test&#160; failure, or we solve the problem under this Jira?&lt;/p&gt;</comment>
                            <comment id="16901917" author="till.rohrmann" created="Wed, 7 Aug 2019 09:21:02 +0000"  >&lt;p&gt;Thanks for the update &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt;. The corresponding JIRA issue for the failing tpch end-to-end test is &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-13607&quot; title=&quot;TPC-H end-to-end test (Blink planner) failed on Travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-13607&quot;&gt;&lt;del&gt;FLINK-13607&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I would suggest that we unblock this issue if we see that the cron jobs are passing a couple of times (given that the akka timeout issue happens rarely).&lt;/p&gt;</comment>
                            <comment id="16901970" author="kevin.cyj" created="Wed, 7 Aug 2019 10:49:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt; I agree with you, this should not be a blocker.&lt;/p&gt;</comment>
                            <comment id="16902748" author="till.rohrmann" created="Thu, 8 Aug 2019 07:16:57 +0000"  >&lt;p&gt;The latest &lt;a href=&quot;https://travis-ci.org/apache/flink/builds/568771238&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;release-1.9 cron job&lt;/a&gt; passed. Hence I assume that only the Akka timeout problem is left. Assuming that this is most likely a test instability and not a fundamental problem, I&apos;ll decrease the priority of this issue to critical. We should nevertheless try to fix the test instability &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16902750" author="kevin.cyj" created="Thu, 8 Aug 2019 07:17:16 +0000"  >&lt;p&gt;I ran the heavy deployment test for many times and found the akka timeout problem should be purely resulted by the test environment. The resources of the test VM is limited (two cpu cores and less than 8G memory, both the network and disk are not fast enough), but the test needs to start 10 TM and more than 100 tasks. When the akka timeout config value is decreased, the akka timeout failures occurred more frequently, and when the&#160;akka timeout config value was set to 60s, akka timeout failure did not occur after the heavy deployment test ran for more than 200 times (if the default timeout is used, there will be one or two times of failure when the heavy deployment test ran for 100 times).&lt;/p&gt;

&lt;p&gt;There are two config options relevant to the akka timeout, one is&#160;akka.ask.timeout and most rpc calls use this, the other is&#160;web.timeout and the rpc calls from rest client use this. The default value for both config options are 10s and in my tests, both can cause the akka timeout failure. (To be honest, I think we should use the same akka rpc timeout configuration for both rest client and other components like TM, JM and RM, when the a user encounters the akka time out problem, he/she is easy to find the akka.ask.timeout config options and increase it but it is not easy to establish the relationship with web.timeout ).&lt;/p&gt;

&lt;p&gt;I have&#160;create a pr which increases the config value of both&#160;&#160;akka.ask.timeout and&#160;web.timeout, which should make the heavy deployment test more stable (other tests are not affected).&lt;/p&gt;</comment>
                            <comment id="16902939" author="till.rohrmann" created="Thu, 8 Aug 2019 12:52:25 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevin.cyj&quot; class=&quot;user-hover&quot; rel=&quot;kevin.cyj&quot;&gt;kevin.cyj&lt;/a&gt; for the update. I&apos;ll take a look at your PR.&lt;/p&gt;</comment>
                            <comment id="16903630" author="till.rohrmann" created="Fri, 9 Aug 2019 07:09:09 +0000"  >&lt;p&gt;Another instance of this test failed on Travis: &lt;a href=&quot;https://api.travis-ci.org/v3/job/569262833/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/569262833/log.txt&lt;/a&gt;. Could be a different reason though.&lt;/p&gt;</comment>
                            <comment id="16903757" author="kevin.cyj" created="Fri, 9 Aug 2019 09:41:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt; I&apos;ll try to reproduce the problem and figure out why the test ran more than 10min.&lt;/p&gt;</comment>
                            <comment id="16903996" author="tzulitai" created="Fri, 9 Aug 2019 15:50:51 +0000"  >&lt;p&gt;Since this is no longer a blocker for 1.9.0 and we&apos;re not proceeding with a voting RC, I&apos;ll now move the fix version to 1.10.0.&lt;/p&gt;</comment>
                            <comment id="16906562" author="till.rohrmann" created="Tue, 13 Aug 2019 19:43:56 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;1.10.0: 64738aa0bdba41718518bf1e2fb2a6e2ebdeeaef&lt;br/&gt;
1.9.1: 4bdb3132da127fc1d7b7f2b57c62b45677570948&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13248825">FLINK-13579</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05594:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>