<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:00:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-23889] Unnecessary logging from FineGrainedSlotManager</title>
                <link>https://issues.apache.org/jira/browse/FLINK-23889</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;This is what the slot manager logs when creating a standalone cluster, without running any job:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2021-08-20 09:21:49,586 INFO  FineGrainedSlotManager [] - Registering task executor [::1]:45785-0effb8 under 71b35bc7267c2a5aa290fc5bc3789d56 at the slot manager.
2021-08-20 09:21:49,593 INFO  FineGrainedSlotManager [] - Scheduling the resource requirement check.
2021-08-20 09:21:49,660 INFO  FineGrainedSlotManager [] - Matching resource requirements against available resources.
2021-08-20 09:22:48,465 INFO  FineGrainedSlotManager [] - Release TaskManager 71b35bc7267c2a5aa290fc5bc3789d56 because it exceeded the idle timeout.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;These are additional messages being logged when submitting a job:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2021-08-20 09:26:57,943 INFO  FineGrainedSlotManager [] - Allocating task managers &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the resource requirements.
2021-08-20 09:26:58,803 INFO  FineGrainedSlotManager [] - Clearing resource requirements of job bdb66574e9629e9090aa173e408f9625
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;Scheduling the resource requirement check.&lt;/tt&gt; is unnecessary information that provides no benefits. It is also logged repeatedly for some reason.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Matching resource requirements against available resources.&lt;/tt&gt; should only be logged if there are any requirements to actually match against.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Release TaskManager XXX because it exceeded the idle timeout&lt;/tt&gt; is not applicable in standalone mode; it is also logged repeatedly.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Allocating task managers for the resource requirements.&lt;/tt&gt; is not applicable to standalone mode.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Clearing resource requirements of job XXX&lt;/tt&gt; is logged twice for each job.&lt;br/&gt;
This also happens for the DeclarativeSlotManager.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13396286">FLINK-23889</key>
            <summary>Unnecessary logging from FineGrainedSlotManager</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guoyangze">Yangze Guo</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 20 Aug 2021 07:26:30 +0000</created>
                <updated>Tue, 24 Aug 2021 06:05:42 +0000</updated>
                            <resolved>Tue, 24 Aug 2021 06:05:42 +0000</resolved>
                                    <version>1.14.0</version>
                                    <fixVersion>1.14.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17402571" author="till.rohrmann" created="Sat, 21 Aug 2021 09:38:54 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xtsong&quot; class=&quot;user-hover&quot; rel=&quot;xtsong&quot;&gt;xtsong&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17402940" author="karmagyz" created="Mon, 23 Aug 2021 02:54:42 +0000"  >&lt;p&gt;&amp;gt; Clearing resource requirements of job XXX is logged twice for each job.&lt;br/&gt;
It&apos;s not only for the &lt;tt&gt;FineGrainedResourceManager&lt;/tt&gt;. I think the root cause might come from the &lt;/p&gt;
{SlotPool}
&lt;p&gt;. Would &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhuzh&quot; class=&quot;user-hover&quot; rel=&quot;zhuzh&quot;&gt;zhuzh&lt;/a&gt; take a look?&lt;/p&gt;</comment>
                            <comment id="17402962" author="zhuzh" created="Mon, 23 Aug 2021 05:48:14 +0000"  >&lt;p&gt;Looks to me that &quot;Clearing resource requirements ...&quot; is printed each time the resource manager receives an empty resource declaration.&lt;br/&gt;
I think if the previous resource requirements in SlotManager is already empty, there is no need to print this log.&lt;br/&gt;
In declarative slot allocation, I think it&apos;s acceptable that the JM can send an empty resource declaration to RM multiple times.&lt;/p&gt;</comment>
                            <comment id="17402974" author="zhuzh" created="Mon, 23 Aug 2021 06:38:13 +0000"  >&lt;p&gt;Regarding why the empty resource declaration is sent twice, I think one is caused by the safety net in &lt;tt&gt;DeclarativeSlotPoolBridge#onClose()&lt;/tt&gt; and the other is caused by &lt;tt&gt;DeclarativeSlotPoolBridge#onReleaseTaskManager()&lt;/tt&gt;.&lt;br/&gt;
I think we should skip decreasing empty resources at JM side, because each TM release can trigger one such useless RPC. But still I think it&apos;s better to always do a final check in SlotManager.&lt;/p&gt;</comment>
                            <comment id="17403013" author="karmagyz" created="Mon, 23 Aug 2021 07:50:10 +0000"  >&lt;p&gt;Personally, I think it might be good enough to skip decreasing empty resources at JM side. On RM side, check the diff between the two resource requirements each time might cost a lot for large-scale jobs. Also, I&apos;d like to move the discussion to another ticket. WDYT? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17403016" author="zentol" created="Mon, 23 Aug 2021 07:57:09 +0000"  >&lt;p&gt;We shouldn&apos;t check whether 2 requirements are different; but checking that they are empty should be fine. Feel free to create distinct issues.&lt;/p&gt;</comment>
                            <comment id="17403019" author="karmagyz" created="Mon, 23 Aug 2021 08:09:51 +0000"  >&lt;p&gt;FYI, create &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-23912&quot; title=&quot;Remove unnecessary &amp;quot;Clearing resource requirements of job&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-23912&quot;&gt;&lt;del&gt;FLINK-23912&lt;/del&gt;&lt;/a&gt; for it.&lt;/p&gt;</comment>
                            <comment id="17403538" author="xintongsong" created="Tue, 24 Aug 2021 06:05:42 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;master (1.14): f69cc3deb818c949ee7f914ad067884dae346ccb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0u334:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>