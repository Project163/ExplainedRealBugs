<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:58:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-23233] OperatorEventSendingCheckpointITCase.testOperatorEventLostWithReaderFailure fails on azure</title>
                <link>https://issues.apache.org/jira/browse/FLINK-23233</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19857&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=9382&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=19857&amp;amp;view=logs&amp;amp;j=4d4a0d10-fca2-5507-8eed-c07f0bdf4887&amp;amp;t=c2734c79-73b6-521c-e85a-67c7ecae9107&amp;amp;l=9382&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Jul 03 01:37:31 [ERROR] Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 21.415 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.runtime.operators.coordination.OperatorEventSendingCheckpointITCase
Jul 03 01:37:31 [ERROR] testOperatorEventLostWithReaderFailure(org.apache.flink.runtime.operators.coordination.OperatorEventSendingCheckpointITCase)  Time elapsed: 3.623 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
Jul 03 01:37:31 java.lang.AssertionError: expected:&amp;lt;[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]&amp;gt; but was:&amp;lt;[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67]&amp;gt;
Jul 03 01:37:31 	at org.junit.Assert.fail(Assert.java:88)
Jul 03 01:37:31 	at org.junit.Assert.failNotEquals(Assert.java:834)
Jul 03 01:37:31 	at org.junit.Assert.assertEquals(Assert.java:118)
Jul 03 01:37:31 	at org.junit.Assert.assertEquals(Assert.java:144)
Jul 03 01:37:31 	at org.apache.flink.runtime.operators.coordination.OperatorEventSendingCheckpointITCase.runTest(OperatorEventSendingCheckpointITCase.java:254)
Jul 03 01:37:31 	at org.apache.flink.runtime.operators.coordination.OperatorEventSendingCheckpointITCase.testOperatorEventLostWithReaderFailure(OperatorEventSendingCheckpointITCase.java:143)
Jul 03 01:37:31 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
Jul 03 01:37:31 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
Jul 03 01:37:31 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
Jul 03 01:37:31 	at java.lang.reflect.Method.invoke(Method.java:498)
Jul 03 01:37:31 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
Jul 03 01:37:31 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
Jul 03 01:37:31 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
Jul 03 01:37:31 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
Jul 03 01:37:31 	at org.apache.flink.util.TestNameProvider$1.evaluate(TestNameProvider.java:45)
Jul 03 01:37:31 	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
Jul 03 01:37:31 	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
Jul 03 01:37:31 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
Jul 03 01:37:31 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
Jul 03 01:37:31 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13387617">FLINK-23233</key>
            <summary>OperatorEventSendingCheckpointITCase.testOperatorEventLostWithReaderFailure fails on azure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gaoyunhaii">Yun Gao</assignee>
                                    <reporter username="xtsong">Xintong Song</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 5 Jul 2021 03:20:11 +0000</created>
                <updated>Thu, 23 Sep 2021 18:02:50 +0000</updated>
                            <resolved>Tue, 13 Jul 2021 12:34:25 +0000</resolved>
                                    <version>1.14.0</version>
                    <version>1.12.3</version>
                    <version>1.13.1</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.12.5</fixVersion>
                    <fixVersion>1.13.2</fixVersion>
                                    <component>Runtime / Checkpointing</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="17374478" author="xintongsong" created="Mon, 5 Jul 2021 03:34:18 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt;&lt;br/&gt;
Could you take a look? Most importantly, is this a correctness issue that should block release 1.13.2?&lt;/p&gt;</comment>
                            <comment id="17374480" author="gaoyunhaii" created="Mon, 5 Jul 2021 03:35:35 +0000"  >&lt;p&gt;Ok, I&apos;ll have a look~&lt;/p&gt;</comment>
                            <comment id="17375870" author="gaoyunhaii" created="Tue, 6 Jul 2021 17:10:19 +0000"  >&lt;p&gt;It seems the issue is caused by this part:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
01:37:29,362 [           &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-49] INFO  org.apache.flink.streaming.api.operators.collect.CollectSinkFunction [] - Invalid request. Received version = 8a0b400e-0aa9-4223-89dc-f7638a67a845, offset = 0, &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; expected version = 99a5868b-4923-46ec-ad60-58443bdba519, offset = 0
01:37:29,764 [    Checkpoint Timer] WARN  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Failed to trigger checkpoint 5 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job a4214b0065b42350a8831b7ce4a32ad2. (1 consecutive failed attempts so far)
org.apache.flink.util.FlinkException: Failing OperatorCoordinator checkpoint because some OperatorEvents before &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; checkpoint barrier were not received by the target tasks.
    at org.apache.flink.runtime.operators.coordination.OperatorCoordinatorHolder.lambda$completeCheckpointOnceEventsAreDone$4(OperatorCoordinatorHolder.java:344) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:?]
    at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774) ~[?:1.8.0_282]
    at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750) ~[?:1.8.0_282]
    at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488) ~[?:1.8.0_282]
    at java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:1990) ~[?:1.8.0_282]
    at org.apache.flink.runtime.concurrent.FutureUtils$WaitingConjunctFuture.handleCompletedFuture(FutureUtils.java:905) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
    at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774) ~[?:1.8.0_282]
    at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750) ~[?:1.8.0_282]
    at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488) ~[?:1.8.0_282]
    at java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:1990) ~[?:1.8.0_282]
    at org.apache.flink.runtime.concurrent.FutureUtils.lambda$forwardTo$23(FutureUtils.java:1356) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
    at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774) ~[?:1.8.0_282]
    at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750) ~[?:1.8.0_282]
    at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488) ~[?:1.8.0_282]
    at java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:1990) ~[?:1.8.0_282]
    at org.apache.flink.runtime.concurrent.FutureUtils$Timeout.run(FutureUtils.java:1255) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
    at org.apache.flink.runtime.concurrent.DirectExecutorService.execute(DirectExecutorService.java:217) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
    at org.apache.flink.runtime.concurrent.FutureUtils.lambda$orTimeout$15(FutureUtils.java:582) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_282]
    at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_282]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_282]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [?:1.8.0_282]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_282]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_282]
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [?:1.8.0_282]
01:37:29,766 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Triggering checkpoint 6 (type=CHECKPOINT) @ 1625276249765 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job a4214b0065b42350a8831b7ce4a32ad2.
01:37:29,768 [jobmanager-&lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;-thread-1] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Completed checkpoint 6 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job a4214b0065b42350a8831b7ce4a32ad2 (942 bytes in 3 ms).
01:37:29,768 [SourceCoordinator-Source: numbers -&amp;gt; Map -&amp;gt; Sink: Data stream collect sink] INFO  org.apache.flink.runtime.source.coordinator.SourceCoordinator [] - Marking checkpoint 6 as completed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; source Source: numbers -&amp;gt; Map -&amp;gt; Sink: Data stream collect sink.
01:37:29,769 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Triggering checkpoint 7 (type=CHECKPOINT) @ 1625276249768 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job a4214b0065b42350a8831b7ce4a32ad2.
01:37:29,770 [jobmanager-&lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;-thread-2] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Completed checkpoint 7 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job a4214b0065b42350a8831b7ce4a32ad2 (942 bytes in 2 ms).
01:37:29,770 [SourceCoordinator-Source: numbers -&amp;gt; Map -&amp;gt; Sink: Data stream collect sink] INFO  org.apache.flink.runtime.source.coordinator.SourceCoordinator [] - Marking checkpoint 7 as completed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; source Source: numbers -&amp;gt; Map -&amp;gt; Sink: Data stream collect sink.
01:37:29,771 [    Checkpoint Timer] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Triggering checkpoint 8 (type=CHECKPOINT) @ 1625276249770 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job a4214b0065b42350a8831b7ce4a32ad2.
01:37:29,772 [jobmanager-&lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;-thread-1] INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator    [] - Completed checkpoint 8 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job a4214b0065b42350a8831b7ce4a32ad2 (942 bytes in 2 ms). 
01:37:29,773 [flink-akka.actor.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-dispatcher-2] INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph       [] - Source: numbers -&amp;gt; Map -&amp;gt; Sink: Data stream collect sink (1/1) (f37c51a50966c297173f7852774e54f2) switched from RUNNING to FAILED on 0057f3d7-309e-4ba2-8b12-99d2269c5aa7 @ localhost (dataPort=-1).
org.apache.flink.util.FlinkException: An OperatorEvent from an OperatorCoordinator to a task was lost. Triggering task failover to ensure consistency. Event: &lt;span class=&quot;code-quote&quot;&gt;&apos;AddSplitEvents[[[B@6c71f390]]&apos;&lt;/span&gt;, targetTask: Source: numbers -&amp;gt; Map -&amp;gt; Sink: Data stream collect sink (1/1) - execution #1
    at org.apache.flink.runtime.operators.coordination.SubtaskGatewayImpl.lambda$sendEvent$0(SubtaskGatewayImpl.java:81) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:?]
    at java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:836) ~[?:1.8.0_282]
    at java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:811) ~[?:1.8.0_282]
    at java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:456) ~[?:1.8.0_282]
    at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRunAsync(AkkaRpcActor.java:440) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
    at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcMessage(AkkaRpcActor.java:208) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
    at org.apache.flink.runtime.rpc.akka.FencedAkkaRpcActor.handleRpcMessage(FencedAkkaRpcActor.java:77) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
    at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleMessage(AkkaRpcActor.java:158) ~[flink-runtime_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Currently for the OperatorCoordinator, each event send action is bound with a future, and two actions are relying on the result of the future:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;When taking checkpoints, it would check if all the previous events are sent successfully, if not, it would&#160; fail the checkpoint.&#160;But during this process, it would cleanup the pending previous events.&lt;/li&gt;
	&lt;li&gt;For each event, if the sending failed, it would trigger a failover for the subtask.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The in this case:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The job has only one task (source -&amp;gt; map -&amp;gt; sink (1/1)), the source has 3 splits, namely 1 - 34, 35 - 67, 68 - 100.&lt;/li&gt;
	&lt;li&gt;With some prior execution, AddSplit&lt;span class=&quot;error&quot;&gt;&amp;#91;1-34&amp;#93;&lt;/span&gt; is emitted and processed. Then now only two splits remains.&lt;/li&gt;
	&lt;li&gt;Then as the above log shows, the next AddSplit&lt;span class=&quot;error&quot;&gt;&amp;#91;68-100&amp;#93;&lt;/span&gt; is emitted before checkpoint 5, and the test deliberately make the event sending failed due to timeout.&lt;/li&gt;
	&lt;li&gt;The stage related to checkpoint executed first, abort the checkpoint 5. In this process it removes the pending event, namely now only 1 split remains.&lt;/li&gt;
	&lt;li&gt;Now new checkpoints are triggered. Since now there is no failed pending events, the checkpoint would complete, and only the remaining split 35-67 is snapshotted.&lt;/li&gt;
	&lt;li&gt;Then after some time the stage related to subtask failover executed, trigger the failover.&lt;/li&gt;
	&lt;li&gt;However, after the failover, it would recover from the checkpoint 8, which contains only the split 35-67. Then AddSplit&lt;span class=&quot;error&quot;&gt;&amp;#91;35-67&amp;#93;&lt;/span&gt; is emitted and executed. Thus the split 68-100 is missed.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The failure could be reproduced locally by simulates the above case as in &lt;a href=&quot;https://github.com/gaoyunhaii/flink/commits/fix_oc_cp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/gaoyunhaii/flink/commits/fix_oc_cp&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17376350" author="yunta" created="Wed, 7 Jul 2021 07:07:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt;, as the original developer of this feature, would you please also take a look at this problem? Currently we think this might be a blocker for releasing 1.13.2, what do you think?&lt;/p&gt;</comment>
                            <comment id="17376376" author="gaoyunhaii" created="Wed, 7 Jul 2021 07:39:28 +0000"  >&lt;p&gt;To fix this issue, perhaps we should change the mechanism of the tracking incomplete event sending futures in OperatorCoordinatorHolder:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;All the future would be tracked before actually send.&lt;/li&gt;
	&lt;li&gt;If one future complete successfully, remove it from the pending set.&lt;/li&gt;
	&lt;li&gt;When doing checkpoints, only check the pending futures but do not cleanup.&lt;/li&gt;
	&lt;li&gt;After we have failed subtask for one future, we remove it from the set.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Perhaps it might be something like &lt;a href=&quot;https://github.com/gaoyunhaii/flink/commit/c52ddd8c345f9a25dbb558db07499b8a3d29c4ec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/gaoyunhaii/flink/commit/c52ddd8c345f9a25dbb558db07499b8a3d29c4ec&lt;/a&gt; ? &lt;/p&gt;</comment>
                            <comment id="17376420" author="till.rohrmann" created="Wed, 7 Jul 2021 09:14:34 +0000"  >&lt;p&gt;I think this a very serious bug which warrants making it a release blocker. The effect is that you might lose input splits w/o noticing if I understood the analysis correctly. This is equal to losing data.&lt;/p&gt;

&lt;p&gt;I think we need to fix this immediately.&lt;/p&gt;</comment>
                            <comment id="17376423" author="till.rohrmann" created="Wed, 7 Jul 2021 09:16:49 +0000"  >&lt;p&gt;Are we sure that this only affects 1.14 and 1.13? I think &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-21996&quot; title=&quot;Transient RPC failure without TaskManager failure can lead to split assignment loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-21996&quot;&gt;&lt;del&gt;FLINK-21996&lt;/del&gt;&lt;/a&gt; was also merged to 1.12. Hence, I would assume that 1.12 is also affected.&lt;/p&gt;</comment>
                            <comment id="17376443" author="xintongsong" created="Wed, 7 Jul 2021 09:33:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt;, how long do you expect it takes to fix this problem? If not too long, I&apos;m leaning towards canceling the 1.13.2/1.12.5 RCs and fix this immediately.&lt;/p&gt;</comment>
                            <comment id="17376495" author="gaoyunhaii" created="Wed, 7 Jul 2021 11:28:00 +0000"  >&lt;p&gt;Yes, this should cause losing data, and I check it indeed also exists in 1.12.x.&lt;/p&gt;

&lt;p&gt;I think I would be able to open the PR by tomorrow~&lt;/p&gt;</comment>
                            <comment id="17377763" author="xintongsong" created="Fri, 9 Jul 2021 03:31:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=20195&amp;amp;view=logs&amp;amp;j=219e462f-e75e-506c-3671-5017d866ccf6&amp;amp;t=4c5dc768-5c82-5ab0-660d-086cb90b76a0&amp;amp;l=5134&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=20195&amp;amp;view=logs&amp;amp;j=219e462f-e75e-506c-3671-5017d866ccf6&amp;amp;t=4c5dc768-5c82-5ab0-660d-086cb90b76a0&amp;amp;l=5134&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17378164" author="stephanewen" created="Fri, 9 Jul 2021 16:41:25 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt; for debugging this. Your analysis of the cause is correct.&lt;/p&gt;

&lt;p&gt;I commented on the Pull Request regarding the suggested solution.&lt;/p&gt;

&lt;p&gt;Regarding the Bugfix Release criticality: This condition here can only happen in conjunction with actual RPC loss, plus a very fast checkpoint interval. So this bug should be super rare. The original RPC loss fix was already fixing a rare issue, this here should be even rarer.&lt;br/&gt;
Of course we should fix it asap, but I would expect that this will be hard to observe in practice, outside tests with very specific setups. So if this fix takes a bit, we may not want to block other more critical fixes on this.&lt;/p&gt;</comment>
                            <comment id="17379862" author="till.rohrmann" created="Tue, 13 Jul 2021 12:34:25 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;1.14.0: c874338c6b19d8939f21a4781661759bea5d8449&lt;br/&gt;
1.13.2: 1fa52e1a93d025bc8482987ddac04c94142fc6cc&lt;br/&gt;
1.12.5: 2c3f8f64f653a3ab604148698b5ae9cb3e343887&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13384755">FLINK-23046</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13367996">FLINK-21996</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0slmw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>