<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:21:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-33681] Display source/sink numRecordsIn/Out &amp; numBytesIn/Out on UI</title>
                <link>https://issues.apache.org/jira/browse/FLINK-33681</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently, the numRecordsIn &amp;amp; numBytesIn metrics for sources and the numRecordsOut &amp;amp; numBytesOut metrics for sinks are always 0 on the Flink web dashboard.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11576&quot; title=&quot;FLIP-33: Standardize connector metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11576&quot;&gt;&lt;del&gt;FLINK-11576&lt;/del&gt;&lt;/a&gt; brings us these metrics on the opeartor level, but it does not integrate them on the task level. On the other hand, the summay metrics on the job overview page is based on the task level I/O metrics.&#160;As a result, even though new connectors supporting FLIP-33 metrics will report operator-level I/O metrics, we still cannot see the metrics on dashboard.&lt;/p&gt;

&lt;p&gt;This ticket serves as an umbrella issue to integrate standard source/sink I/O metrics with the corresponding task I/O metrics.&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13065586/13065586_screenshot-20231224-195605-1.png&quot; height=&quot;333&quot; width=&quot;608&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13559826">FLINK-33681</key>
            <summary>Display source/sink numRecordsIn/Out &amp; numBytesIn/Out on UI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Zhanghao Chen">Zhanghao Chen</assignee>
                                    <reporter username="Zhanghao Chen">Zhanghao Chen</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 29 Nov 2023 05:30:13 +0000</created>
                <updated>Mon, 2 Sep 2024 09:30:23 +0000</updated>
                            <resolved>Wed, 21 Aug 2024 22:36:27 +0000</resolved>
                                    <version>1.18.0</version>
                    <version>1.17.2</version>
                    <version>1.20.0</version>
                    <version>1.19.1</version>
                                    <fixVersion>2.0-preview</fixVersion>
                                    <component>Runtime / Metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                                                            <comments>
                            <comment id="17800234" author="zhanghao chen" created="Mon, 25 Dec 2023 03:40:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=renqs&quot; class=&quot;user-hover&quot; rel=&quot;renqs&quot;&gt;renqs&lt;/a&gt; Hi, I&apos;m reaching out to you to have some inputs. From the comments of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11576&quot; title=&quot;FLIP-33: Standardize connector metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11576&quot;&gt;&lt;del&gt;FLINK-11576&lt;/del&gt;&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://cwiki.apache.org/confluence/display/FLINK/FLIP-33%3A+Standardize+Connector+Metrics&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;FLIP-33&lt;/a&gt;, it seems that at least in some previous versions of Flink, the I/O metrics of the source/sink can be seen from the web dashboard. However, I verified that this is not the case in Flink 1.17 &amp;amp; 1.18 (see the screenshot attached). As I do not have a working environment of ealier versions of Flink, not sure if this is a bug fix or just an improvement.&lt;/p&gt;

&lt;p&gt;After investigation, the current version of Flink records task I/O metrics as follows:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;numBytesIn: collected in InputGateWithMetrics, which only accounts for Flink internal traffic. Before &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-29567&quot; title=&quot;Revert sink output metric names from numRecordsSend back to numRecordsOut&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-29567&quot;&gt;&lt;del&gt;FLINK-29567&lt;/del&gt;&lt;/a&gt;, the operator-level numBytesIn &amp;amp; numBytesOut counter reuses the task-level I/O counters, so Flink is able to collect source input bytes metrics as well.&lt;/li&gt;
	&lt;li&gt;numBytesOut: collected in ResultPartition, which only accounts for Flink internal traffic as well.Before &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-29567&quot; title=&quot;Revert sink output metric names from numRecordsSend back to numRecordsOut&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-29567&quot;&gt;&lt;del&gt;FLINK-29567&lt;/del&gt;&lt;/a&gt;, the operator-level numBytesIn &amp;amp; numBytesOut counter reuses the task-level I/O counters, so Flink is able to collect sink output bytes metrics as well.&lt;/li&gt;
	&lt;li&gt;numRecordsIn: reuse the numRecordsIn metric of the head operators SingleInput MultitpleInput. I didn&apos;t find evidence on how Flink was able to collect source numberRecordsIn metrics in previous versions.&lt;/li&gt;
	&lt;li&gt;numRecordsOut: &#160;reuse the numRecordsOut metric of the tail operator in the opeartor chain. Specifically, the reuse will skip if the opeartor is a SinkWriterOperator, which means sink output metrics won&apos;t be exposed to the UI as well.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;We can see that the I/O metrics of the source/sink are not integrated into the task-level I/O metrics now, and hence cannot be seen on the UI.&lt;/p&gt;

&lt;p&gt;Fix proposal: just reuse opeartor I/O records/bytes metrics for task I/O metrics for SourceOperator &amp;amp; SinkWriterOperator.&lt;/p&gt;

&lt;p&gt;Looking forward to your suggestions on it.&lt;/p&gt;</comment>
                            <comment id="17800237" author="zhanghao chen" created="Mon, 25 Dec 2023 04:05:58 +0000"  >&lt;p&gt;Attached is a working demo:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13065589/13065589_screenshot-20231225-120421.png&quot; height=&quot;374&quot; width=&quot;669&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17804596" author="zhanghao chen" created="Tue, 9 Jan 2024 06:57:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=renqs&quot; class=&quot;user-hover&quot; rel=&quot;renqs&quot;&gt;renqs&lt;/a&gt; Kindly remind~ Would you mind take a look at the issue? I think the feature is useful for debugging, and would like to hear from someone who is a master in this field. Many thanks in advance&lt;/p&gt;</comment>
                            <comment id="17850176" author="becket_qin" created="Tue, 28 May 2024 21:04:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Zhanghao+Chen&quot; class=&quot;user-hover&quot; rel=&quot;Zhanghao Chen&quot;&gt;Zhanghao Chen&lt;/a&gt; Thanks for firing the ticket. The solution sounds good to me. Are you interested in authoring the patch? I am happy to review.&lt;/p&gt;

&lt;p&gt;BTW, technically speaking this is a user sensible behavior change. So a FLIP would be required. It is probably going to be a quick FLIP, though.&lt;/p&gt;</comment>
                            <comment id="17850219" author="zhanghao chen" created="Wed, 29 May 2024 00:42:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt; Thanks for the attention! I&apos;ve already drafted a &lt;a href=&quot;https://github.com/apache/flink/pull/23998&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt; for review. Agree that we&apos;ll need a FLIP, I&apos;ll draft one for discussion.&lt;/p&gt;</comment>
                            <comment id="17868401" author="JIRAUSER295489" created="Wed, 24 Jul 2024 15:20:11 +0000"  >&lt;p&gt;Hi there &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Zhanghao+Chen&quot; class=&quot;user-hover&quot; rel=&quot;Zhanghao Chen&quot;&gt;Zhanghao Chen&lt;/a&gt;, I&apos;ve been reading your FLIP and is there any work remaining? I would love to help with some of the tasks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="17868519" author="zhanghao chen" created="Thu, 25 Jul 2024 02:01:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eric.xiao&quot; class=&quot;user-hover&quot; rel=&quot;eric.xiao&quot;&gt;eric.xiao&lt;/a&gt; Thanks for your attention! The MR is overall ready and just lacks some UTs. I plan to get it finished this week.&lt;/p&gt;</comment>
                            <comment id="17875677" author="becket_qin" created="Wed, 21 Aug 2024 22:36:27 +0000"  >&lt;p&gt;Merged to master: 0309f13e8af62f9b523e227a3a66ff59e838a1b4&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13214979">FLINK-11576</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13090545">FLINK-7286</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13065586" name="screenshot-20231224-195605-1.png" size="83012" author="Zhanghao Chen" created="Mon, 25 Dec 2023 03:17:21 +0000"/>
                            <attachment id="13065589" name="screenshot-20231225-120421.png" size="93457" author="Zhanghao Chen" created="Mon, 25 Dec 2023 04:04:53 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="13559828">FLINK-33682</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lx0g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>The Source and Sink IO metrics are not reported to the tasks. This means the Web UI will show the IO metrics of the source and sink vertices, instead of 0.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>