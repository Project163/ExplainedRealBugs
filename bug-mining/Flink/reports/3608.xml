<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:43:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-14200] Temporal Table Function Joins do not work on Tables (only TableSources) on the query side</title>
                <link>https://issues.apache.org/jira/browse/FLINK-14200</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;This only affects the Blink planner. The legacy planner works fine.&lt;/p&gt;

&lt;p&gt;With Orders as a TableSource, and Orders2 as a Table with the same content:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
tEnv.registerTableSource(&lt;span class=&quot;code-quote&quot;&gt;&quot;Orders&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FooSource(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;o_currency&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;o_amount&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;o_proctime&quot;&lt;/span&gt;}));
Table orders2 = tEnv.sqlQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT * FROM Orders&quot;&lt;/span&gt;);
tEnv.registerTable(&lt;span class=&quot;code-quote&quot;&gt;&quot;Orders2&quot;&lt;/span&gt;, orders2);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This works (TableSource on the query side):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT 
 o_amount * r_amount AS amount 
FROM Orders  
 , LATERAL TABLE (Rates(o_proctime)) 
WHERE r_currency = o_currency&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;While this does not (Table on the query side):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT 
 o_amount * r_amount AS amount 
FROM Orders2 
 , LATERAL TABLE (Rates(o_proctime)) 
WHERE r_currency = o_currency&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Throwing an NPE in&#160;FlinkRelBuilder, called from&#160;LogicalCorrelateToJoinFromTemporalTableFunctionRule. Attached is Java code for reproduction, along with the full log and stacktrace, and a pom.xml.&lt;/p&gt;

&lt;p&gt;EDIT: This may not be Table vs TableSource, maybe more a projection or a decorrelate issue? Don&apos;t know how the planner works well enough to characterize it better.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 8, Scala 2.11, Flink 1.9&lt;/p&gt;</environment>
        <key id="13258591">FLINK-14200</key>
            <summary>Temporal Table Function Joins do not work on Tables (only TableSources) on the query side</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jark">Jark Wu</assignee>
                                    <reporter username="BenoitParis">Beno&#238;t Paris</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 24 Sep 2019 16:13:59 +0000</created>
                <updated>Tue, 7 Jan 2020 10:00:15 +0000</updated>
                            <resolved>Tue, 7 Jan 2020 09:49:36 +0000</resolved>
                                    <version>1.9.0</version>
                                    <fixVersion>1.9.2</fixVersion>
                    <fixVersion>1.10.0</fixVersion>
                                    <component>Table SQL / Planner</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="16937367" author="jark" created="Wed, 25 Sep 2019 03:28:26 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=BenoitParis&quot; class=&quot;user-hover&quot; rel=&quot;BenoitParis&quot;&gt;BenoitParis&lt;/a&gt;, thanks for reporting this. I think this is a bug. &lt;/p&gt;</comment>
                            <comment id="16950839" author="benoitparis" created="Mon, 14 Oct 2019 09:11:35 +0000"  >&lt;p&gt;&lt;a href=&quot;http://apache-flink-user-mailing-list-archive.2336050.n4.nabble.com/flink-sql-table-in-subquery-join-temporal-table-raise-java-lang-NullPointerException-td30494.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;As mentioned in the mailing-list&lt;/a&gt; by another user, the following syntax fails as well:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT o_amount * r_amount AS amount
FROM (SELECT * FROM Orders) as Orders, LATERAL TABLE (Rates(o_proctime))
WHERE r_currency = o_currency
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16992428" author="benoitparis" created="Tue, 10 Dec 2019 10:57:08 +0000"  >&lt;p&gt;This issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15112&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-15112&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;seems to be the equivalent bug in the Legacy planner.&lt;/p&gt;</comment>
                            <comment id="17008531" author="lzljs3620320" created="Mon, 6 Jan 2020 04:00:53 +0000"  >&lt;p&gt;Consider it is bug of 1.10 too, I&apos;ll set its version to 1.10 too. FYI, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=BenoitParis&quot; class=&quot;user-hover&quot; rel=&quot;BenoitParis&quot;&gt;BenoitParis&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17008551" author="jark" created="Mon, 6 Jan 2020 05:26:26 +0000"  >&lt;p&gt;Sure.&lt;/p&gt;</comment>
                            <comment id="17009386" author="jark" created="Tue, 7 Jan 2020 05:45:55 +0000"  >&lt;p&gt;1.11.0: 1121949bd6018d5c44238dc5550364285751faf9&lt;br/&gt;
1.10.0: 13a5cf92a1c66089a80fc03048fdb4b46c3009b0&lt;br/&gt;
1.9.2: 632a6dbebb81c950f0c72da64bdc7e5112820a9d&lt;/p&gt;</comment>
                            <comment id="17009574" author="benoitparis" created="Tue, 7 Jan 2020 10:00:15 +0000"  >&lt;p&gt;Thanks a lot for the fix&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jark&quot; class=&quot;user-hover&quot; rel=&quot;jark&quot;&gt;jark&lt;/a&gt;&#160;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13272775">FLINK-15112</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12981211" name="temporal-table-function-query-side-as-not-table-source.zip" size="5509" author="BenoitParis" created="Tue, 24 Sep 2019 16:13:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06yx4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>