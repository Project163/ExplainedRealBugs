<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:48:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-18677] ZooKeeperLeaderRetrievalService does not invalidate leader in case of SUSPENDED connection</title>
                <link>https://issues.apache.org/jira/browse/FLINK-18677</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The &lt;tt&gt;ZooKeeperLeaderRetrievalService&lt;/tt&gt; does not invalidate the leader if the ZooKeeper connection gets SUSPENDED. This means that a &lt;tt&gt;TaskManager&lt;/tt&gt; won&apos;t cancel its running tasks even though it might miss a leader change. I think we should at least make it configurable whether in such a situation the leader listener should be informed about the lost leadership. Otherwise, we might run into the situation where an old and a newly recovered instance of a &lt;tt&gt;Task&lt;/tt&gt; can run at the same time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13318775">FLINK-18677</key>
            <summary>ZooKeeperLeaderRetrievalService does not invalidate leader in case of SUSPENDED connection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mapohl">Matthias Pohl</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 22 Jul 2020 21:16:31 +0000</created>
                <updated>Sat, 28 Aug 2021 11:16:27 +0000</updated>
                            <resolved>Wed, 5 Aug 2020 09:38:52 +0000</resolved>
                                    <version>1.10.1</version>
                    <version>1.11.1</version>
                    <version>1.12.0</version>
                                    <fixVersion>1.10.2</fixVersion>
                    <fixVersion>1.11.2</fixVersion>
                    <fixVersion>1.12.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17168001" author="mapohl" created="Thu, 30 Jul 2020 15:20:20 +0000"  >&lt;p&gt;We were able to reproduce the behavior by submitting a long-running task (i.e. windowJoin example). By killing the StandaloneSession daemon and shortly afterwards stopping the ZooKeeper, we got into a situation where the TaskManager was not informed by the JobManager about the ZooKeeper connection being suspended.&lt;/p&gt;

&lt;p&gt;The task kept processing data even though the suspended ZooKeeper connection was recognized (and logged out) by the TaskManager.&lt;/p&gt;</comment>
                            <comment id="17168458" author="till.rohrmann" created="Fri, 31 Jul 2020 07:07:33 +0000"  >&lt;p&gt;Good work &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt;. According to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10052&quot; title=&quot;Tolerate temporarily suspended ZooKeeper connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10052&quot;&gt;&lt;del&gt;FLINK-10052&lt;/del&gt;&lt;/a&gt; the &lt;tt&gt;ZooKeeperLeaderElectionService&lt;/tt&gt; will revoke the leadership of the leader if the connection is &lt;tt&gt;SUSPENDED&lt;/tt&gt;. Hence, as a first step I believe it would make sense to make this behaviour on the &lt;tt&gt;ZooKeeperLeaderRetrievalService&lt;/tt&gt; side symmetric.&lt;/p&gt;</comment>
                            <comment id="17171380" author="till.rohrmann" created="Wed, 5 Aug 2020 09:38:52 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;master: cf8b882af788d467f43643d22d82a6a221860e24&lt;br/&gt;
1.11.2: 1c66bfa74dc88ea1b0733c529715dc434003e867&lt;br/&gt;
1.10.2: d954278bb1dc1672fedcd2de745bfe8f5bad6e34&lt;/p&gt;</comment>
                            <comment id="17325071" author="tison" created="Mon, 19 Apr 2021 14:18:12 +0000"  >&lt;p&gt;It won&apos;t miss leader change because new leader will have a different leader session id.&lt;/p&gt;</comment>
                            <comment id="17325076" author="tison" created="Mon, 19 Apr 2021 14:22:11 +0000"  >&lt;p&gt;But I agree that we can do that if the zk is lost because NodeCache won&apos;t trigger at this case.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13314193">FLINK-18451</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0h3mo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>