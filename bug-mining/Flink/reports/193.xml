<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:18:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1376] SubSlots are not properly released in case that a TaskManager fatally fails, leaving the system in a corrupted state</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1376</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;In case that the TaskManager fatally fails and some of the failing node&apos;s slots are SharedSlots, then the slots are not properly released by the JobManager. This causes that the corresponding job will not be properly failed, leaving the system in a corrupted state.&lt;/p&gt;

&lt;p&gt;The reason for that is that the AllocatedSlot is not aware of being treated as a SharedSlot and thus he cannot release the associated SubSlots.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12765853">FLINK-1376</key>
            <summary>SubSlots are not properly released in case that a TaskManager fatally fails, leaving the system in a corrupted state</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Jan 2015 20:26:35 +0000</created>
                <updated>Mon, 9 Feb 2015 16:49:56 +0000</updated>
                            <resolved>Mon, 9 Feb 2015 16:49:56 +0000</resolved>
                                    <version>0.8.0</version>
                    <version>0.9</version>
                                    <fixVersion>0.8.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14270013" author="stephanewen" created="Thu, 8 Jan 2015 20:34:24 +0000"  >&lt;p&gt;This is a rather critical issue.&lt;/p&gt;

&lt;p&gt;I suggest to port the fix also to 0.8.0 or 0.8.1&lt;/p&gt;</comment>
                            <comment id="14270132" author="till.rohrmann" created="Thu, 8 Jan 2015 22:17:47 +0000"  >&lt;p&gt;I agree, since I could reproduce the behaviour with the 0.8 release branch.&lt;/p&gt;</comment>
                            <comment id="14273814" author="githubbot" created="Mon, 12 Jan 2015 17:37:56 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/300&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/300&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Add &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1376&quot; title=&quot;SubSlots are not properly released in case that a TaskManager fatally fails, leaving the system in a corrupted state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1376&quot;&gt;&lt;del&gt;FLINK-1376&lt;/del&gt;&lt;/a&gt; Add proper shared slot release in case of a fatal TaskManager failure&lt;/p&gt;

&lt;p&gt;    This PR introduces SharedSlots as being a special Slot type and as such being released properly in case an Instance has been marked dead. This fixes the problem that a dead instance, which has not been shutdown properly, causes a job not being removed properly from the system, because it is not aware of the SubSlots.&lt;/p&gt;

&lt;p&gt;    Adds test cases where only the heartbeat is disabled to see if the job is properly failed.&lt;/p&gt;

&lt;p&gt;    @StephanEwen: Would be great if you could take a close look at the code because of the delicate synchronization mechanism. What I&apos;ve done in the end is to synchronize most of the calls by passing them through the SlotSharingGroupAssignment.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixSharedSlotRelease&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/300.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/300.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #300&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 02004f98d1d76dc0683392690be38ab721bd6edd&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-01-12T09:58:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1376&quot; title=&quot;SubSlots are not properly released in case that a TaskManager fatally fails, leaving the system in a corrupted state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1376&quot;&gt;&lt;del&gt;FLINK-1376&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Add proper shared slot release in case of a fatal TaskManager failure.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14275443" author="githubbot" created="Tue, 13 Jan 2015 16:01:53 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/300#issuecomment-69767682&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/300#issuecomment-69767682&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks Till, this is a pretty involved patch. I&apos;ll try to look over it tomorrow or Thursday.&lt;/p&gt;
</comment>
                            <comment id="14275857" author="githubbot" created="Tue, 13 Jan 2015 20:17:26 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/300#issuecomment-69811875&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/300#issuecomment-69811875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    There is still a concurrent modification somewhere.&lt;br/&gt;
    On Jan 13, 2015 5:03 PM, &quot;Stephan Ewen&quot; &amp;lt;notifications@github.com&amp;gt; wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; Thanks Till, this is a pretty involved patch. I&apos;ll try to look over it&lt;br/&gt;
    &amp;gt; tomorrow or Thursday.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; Reply to this email directly or view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/flink/pull/300#issuecomment-69767682&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/300#issuecomment-69767682&lt;/a&gt;&amp;gt;.&lt;br/&gt;
    &amp;gt;&lt;/p&gt;</comment>
                            <comment id="14277304" author="githubbot" created="Wed, 14 Jan 2015 17:46:53 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/300#issuecomment-69958460&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/300#issuecomment-69958460&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I found the error and fixed it. I&apos;ll close this PR and open a new one rebased on the latest 0.8 release candidate.&lt;/p&gt;</comment>
                            <comment id="14277305" author="githubbot" created="Wed, 14 Jan 2015 17:46:54 +0000"  >&lt;p&gt;Github user tillrohrmann closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/300&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/300&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14277385" author="githubbot" created="Wed, 14 Jan 2015 18:26:09 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/309&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/309&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1376&quot; title=&quot;SubSlots are not properly released in case that a TaskManager fatally fails, leaving the system in a corrupted state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1376&quot;&gt;&lt;del&gt;FLINK-1376&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Add proper shared slot release in case of a fatal TaskManager failure&lt;/p&gt;

&lt;p&gt;    This PR introduces SharedSlots as being a special Slot type and as such being released properly in case an Instance has been marked dead. This fixes the problem that a dead instance, which has not been shutdown properly, causes a job not being removed properly from the system, because it is not aware of the SubSlots.&lt;/p&gt;

&lt;p&gt;    Adds test cases where only the task manager is killed by a Kill message (hard shutdown)&lt;/p&gt;

&lt;p&gt;    @StephanEwen: Requires thorough review because it touches some delicate scheduling/slot logic.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixSharedSlotReleaseAkka&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/309.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/309.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #309&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ba1dd8b2ce956eb1b14a0ca458a3ca5240da0aee&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-01-12T09:58:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1376&quot; title=&quot;SubSlots are not properly released in case that a TaskManager fatally fails, leaving the system in a corrupted state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1376&quot;&gt;&lt;del&gt;FLINK-1376&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Add proper shared slot release in case of a fatal TaskManager failure.&lt;/p&gt;

&lt;p&gt;    Fixes concurrent modification exception of SharedSlot&apos;s subSlots field by synchronizing all state changing operations through the associated assignment group. Fixes deadlock where Instance.markDead first acquires InstanceLock and then by releasing the associated slots the assignment group lockcan block with a direct releaseSlot call on a SharedSlot which first acquires the assignment group lock and then the instance lock in order to return the slot to the instance.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14277425" author="githubbot" created="Wed, 14 Jan 2015 18:46:46 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/310&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/310&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1376&quot; title=&quot;SubSlots are not properly released in case that a TaskManager fatally fails, leaving the system in a corrupted state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1376&quot;&gt;&lt;del&gt;FLINK-1376&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Add proper shared slot release in case of a fatal TaskManager failure&lt;/p&gt;

&lt;p&gt;    This PR introduces SharedSlots as being a special Slot type and as such being released properly in case an Instance has been marked dead. This fixes the problem that a dead instance, which has not been shutdown properly, causes a job not being removed properly from the system, because it is not aware of the SubSlots.&lt;/p&gt;

&lt;p&gt;    Adds test cases where only the heartbeat thread of TaskManager is killed.&lt;/p&gt;

&lt;p&gt;    Except for the test cases, this is basically the same PR as #309 just rebased on the current 0.8 release candidate.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixSharedSlotReleaseRC2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/310.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/310.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #310&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2935a7ee19eddb48efb38a3a65c4afe5e1bba0d2&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-01-12T09:58:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1376&quot; title=&quot;SubSlots are not properly released in case that a TaskManager fatally fails, leaving the system in a corrupted state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1376&quot;&gt;&lt;del&gt;FLINK-1376&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Add proper shared slot release in case of a fatal TaskManager failure.&lt;/p&gt;

&lt;p&gt;    Fixes concurrent modification exception of SharedSlot&apos;s subSlots field by synchronizing all state changing operations through the associated assignment group. Fixes deadlock where Instance.markDead first acquires InstanceLock and then by releasing the associated slots the assignment group lockcan block with a direct releaseSlot call on a SharedSlot which first acquires the assignment group lock and then the instance lock in order to return the slot to the instance.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14291540" author="githubbot" created="Mon, 26 Jan 2015 07:39:36 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/317#issuecomment-71423347&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/317#issuecomment-71423347&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I am looking into this right now and testing it locally. Seems to work so far. Will try to give a vote by tomorrow...&lt;/p&gt;</comment>
                            <comment id="14299757" author="githubbot" created="Sat, 31 Jan 2015 10:54:37 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/317#issuecomment-72313219&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/317#issuecomment-72313219&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi,&lt;br/&gt;
    maybe thats a helpful datapoint for you:&lt;br/&gt;
    I have a Flink cluster started where all TaskManagers died (misconfiguration). The JobManager needs more than 200 seconds to realize that (on the TaskManagers overview, you see timeouts &amp;lt; 200). When submitting a job, you&apos;ll get the following exception:&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    org.apache.flink.client.program.ProgramInvocationException: The program execution failed: java.lang.Exception: Failed to deploy the task CHAIN DataSource (Generator: class io.airlift.tpch.NationGenerator) -&amp;gt; Map (Map at writeAsFormattedText(DataSet.java:1132)) (1/1) - execution #0 to slot SubSlot 0 (f8d11026ec5a11f0b273184c74ec4f29 (0) - ALLOCATED/ALIVE): java.lang.NullPointerException&lt;br/&gt;
    	at org.apache.flink.runtime.taskmanager.TaskManager.org$apache$flink$runtime$taskmanager$TaskManager$$submitTask(TaskManager.scala:346)&lt;br/&gt;
    	at org.apache.flink.runtime.taskmanager.TaskManager$$anonfun$receiveWithLogMessages$1.applyOrElse(TaskManager.scala:248)&lt;br/&gt;
    	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply$mcVL$sp(AbstractPartialFunction.scala:33)&lt;br/&gt;
    	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:33)&lt;br/&gt;
    	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:25)&lt;br/&gt;
    	at org.apache.flink.yarn.YarnTaskManager$$anonfun$receiveYarnMessages$1.applyOrElse(YarnTaskManager.scala:32)&lt;br/&gt;
    	at scala.PartialFunction$OrElse.apply(PartialFunction.scala:162)&lt;br/&gt;
    	at org.apache.flink.runtime.ActorLogMessages$$anon$1.apply(ActorLogMessages.scala:41)&lt;br/&gt;
    	at org.apache.flink.runtime.ActorLogMessages$$anon$1.apply(ActorLogMessages.scala:27)&lt;br/&gt;
    	at scala.PartialFunction$class.applyOrElse(PartialFunction.scala:118)&lt;br/&gt;
    	at org.apache.flink.runtime.ActorLogMessages$$anon$1.applyOrElse(ActorLogMessages.scala:27)&lt;br/&gt;
    	at akka.actor.Actor$class.aroundReceive(Actor.scala:465)&lt;br/&gt;
    	at org.apache.flink.runtime.taskmanager.TaskManager.aroundReceive(TaskManager.scala:78)&lt;br/&gt;
    	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)&lt;br/&gt;
    	at akka.actor.ActorCell.invoke(ActorCell.scala:487)&lt;br/&gt;
    	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:254)&lt;br/&gt;
    	at akka.dispatch.Mailbox.run(Mailbox.scala:221)&lt;br/&gt;
    	at akka.dispatch.Mailbox.exec(Mailbox.scala:231)&lt;br/&gt;
    	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)&lt;br/&gt;
    	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)&lt;br/&gt;
    	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)&lt;br/&gt;
    	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)&lt;/p&gt;

&lt;p&gt;    	at org.apache.flink.runtime.executiongraph.Execution$2.onComplete(Execution.java:311)&lt;br/&gt;
    	at akka.dispatch.OnComplete.internal(Future.scala:247)&lt;br/&gt;
    	at akka.dispatch.OnComplete.internal(Future.scala:244)&lt;br/&gt;
    	at akka.dispatch.japi$CallbackBridge.apply(Future.scala:174)&lt;br/&gt;
    	at akka.dispatch.japi$CallbackBridge.apply(Future.scala:171)&lt;br/&gt;
    	at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:32)&lt;br/&gt;
    	at scala.concurrent.impl.ExecutionContextImpl$$anon$3.exec(ExecutionContextImpl.scala:107)&lt;br/&gt;
    	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)&lt;br/&gt;
    	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)&lt;br/&gt;
    	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)&lt;br/&gt;
    	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)&lt;/p&gt;

&lt;p&gt;    	at org.apache.flink.client.program.Client.run(Client.java:345)&lt;br/&gt;
    	at org.apache.flink.client.program.Client.run(Client.java:304)&lt;br/&gt;
    	at org.apache.flink.client.program.Client.run(Client.java:298)&lt;br/&gt;
    	at org.apache.flink.client.program.ContextEnvironment.execute(ContextEnvironment.java:55)&lt;br/&gt;
    	at flink.generators.programs.TPCHGenerator.main(TPCHGenerator.java:80)&lt;br/&gt;
    	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
    	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
    	at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
    	at org.apache.flink.client.program.PackagedProgram.callMainMethod(PackagedProgram.java:437)&lt;br/&gt;
    	at org.apache.flink.client.program.PackagedProgram.invokeInteractiveModeForExecution(PackagedProgram.java:353)&lt;br/&gt;
    	at org.apache.flink.client.program.Client.run(Client.java:250)&lt;br/&gt;
    	at org.apache.flink.client.CliFrontend.executeProgram(CliFrontend.java:389)&lt;br/&gt;
    	at org.apache.flink.client.CliFrontend.run(CliFrontend.java:358)&lt;br/&gt;
    	at org.apache.flink.client.CliFrontend.parseParameters(CliFrontend.java:1068)&lt;br/&gt;
    	at org.apache.flink.client.CliFrontend.main(CliFrontend.java:1092)&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    I think a NPE is never desired. Does this pull request cover this case?&lt;/p&gt;</comment>
                            <comment id="14299824" author="githubbot" created="Sat, 31 Jan 2015 14:14:32 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/317#issuecomment-72319281&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/317#issuecomment-72319281&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    No I don&apos;t think that this has something to do with the shared slot&lt;br/&gt;
    release. It should be handled in a separate ticket.&lt;/p&gt;

&lt;p&gt;    On Sat, Jan 31, 2015 at 11:54 AM, Robert Metzger &amp;lt;notifications@github.com&amp;gt;&lt;br/&gt;
    wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; Hi,&lt;br/&gt;
    &amp;gt; maybe thats a helpful datapoint for you:&lt;br/&gt;
    &amp;gt; I have a Flink cluster started where all TaskManagers died&lt;br/&gt;
    &amp;gt; (misconfiguration). The JobManager needs more than 200 seconds to realize&lt;br/&gt;
    &amp;gt; that (on the TaskManagers overview, you see timeouts &amp;lt; 200). When&lt;br/&gt;
    &amp;gt; submitting a job, you&apos;ll get the following exception:&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; org.apache.flink.client.program.ProgramInvocationException: The program execution failed: java.lang.Exception: Failed to deploy the task CHAIN DataSource (Generator: class io.airlift.tpch.NationGenerator) -&amp;gt; Map (Map at writeAsFormattedText(DataSet.java:1132)) (1/1) - execution #0 to slot SubSlot 0 (f8d11026ec5a11f0b273184c74ec4f29 (0) - ALLOCATED/ALIVE): java.lang.NullPointerException&lt;br/&gt;
    &amp;gt;     at org.apache.flink.runtime.taskmanager.TaskManager.org$apache$flink$runtime$taskmanager$TaskManager$$submitTask(TaskManager.scala:346)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.runtime.taskmanager.TaskManager$$anonfun$receiveWithLogMessages$1.applyOrElse(TaskManager.scala:248)&lt;br/&gt;
    &amp;gt;     at scala.runtime.AbstractPartialFunction$mcVL$sp.apply$mcVL$sp(AbstractPartialFunction.scala:33)&lt;br/&gt;
    &amp;gt;     at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:33)&lt;br/&gt;
    &amp;gt;     at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:25)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.yarn.YarnTaskManager$$anonfun$receiveYarnMessages$1.applyOrElse(YarnTaskManager.scala:32)&lt;br/&gt;
    &amp;gt;     at scala.PartialFunction$OrElse.apply(PartialFunction.scala:162)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.runtime.ActorLogMessages$$anon$1.apply(ActorLogMessages.scala:41)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.runtime.ActorLogMessages$$anon$1.apply(ActorLogMessages.scala:27)&lt;br/&gt;
    &amp;gt;     at scala.PartialFunction$class.applyOrElse(PartialFunction.scala:118)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.runtime.ActorLogMessages$$anon$1.applyOrElse(ActorLogMessages.scala:27)&lt;br/&gt;
    &amp;gt;     at akka.actor.Actor$class.aroundReceive(Actor.scala:465)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.runtime.taskmanager.TaskManager.aroundReceive(TaskManager.scala:78)&lt;br/&gt;
    &amp;gt;     at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)&lt;br/&gt;
    &amp;gt;     at akka.actor.ActorCell.invoke(ActorCell.scala:487)&lt;br/&gt;
    &amp;gt;     at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:254)&lt;br/&gt;
    &amp;gt;     at akka.dispatch.Mailbox.run(Mailbox.scala:221)&lt;br/&gt;
    &amp;gt;     at akka.dispatch.Mailbox.exec(Mailbox.scala:231)&lt;br/&gt;
    &amp;gt;     at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)&lt;br/&gt;
    &amp;gt;     at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)&lt;br/&gt;
    &amp;gt;     at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)&lt;br/&gt;
    &amp;gt;     at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt;     at org.apache.flink.runtime.executiongraph.Execution$2.onComplete(Execution.java:311)&lt;br/&gt;
    &amp;gt;     at akka.dispatch.OnComplete.internal(Future.scala:247)&lt;br/&gt;
    &amp;gt;     at akka.dispatch.OnComplete.internal(Future.scala:244)&lt;br/&gt;
    &amp;gt;     at akka.dispatch.japi$CallbackBridge.apply(Future.scala:174)&lt;br/&gt;
    &amp;gt;     at akka.dispatch.japi$CallbackBridge.apply(Future.scala:171)&lt;br/&gt;
    &amp;gt;     at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:32)&lt;br/&gt;
    &amp;gt;     at scala.concurrent.impl.ExecutionContextImpl$$anon$3.exec(ExecutionContextImpl.scala:107)&lt;br/&gt;
    &amp;gt;     at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)&lt;br/&gt;
    &amp;gt;     at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)&lt;br/&gt;
    &amp;gt;     at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)&lt;br/&gt;
    &amp;gt;     at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt;     at org.apache.flink.client.program.Client.run(Client.java:345)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.client.program.Client.run(Client.java:304)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.client.program.Client.run(Client.java:298)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.client.program.ContextEnvironment.execute(ContextEnvironment.java:55)&lt;br/&gt;
    &amp;gt;     at flink.generators.programs.TPCHGenerator.main(TPCHGenerator.java:80)&lt;br/&gt;
    &amp;gt;     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    &amp;gt;     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
    &amp;gt;     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
    &amp;gt;     at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.client.program.PackagedProgram.callMainMethod(PackagedProgram.java:437)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.client.program.PackagedProgram.invokeInteractiveModeForExecution(PackagedProgram.java:353)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.client.program.Client.run(Client.java:250)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.client.CliFrontend.executeProgram(CliFrontend.java:389)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.client.CliFrontend.run(CliFrontend.java:358)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.client.CliFrontend.parseParameters(CliFrontend.java:1068)&lt;br/&gt;
    &amp;gt;     at org.apache.flink.client.CliFrontend.main(CliFrontend.java:1092)&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; I think a NPE is never desired. Does this pull request cover this case?&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; Reply to this email directly or view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/flink/pull/317#issuecomment-72313219&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/317#issuecomment-72313219&lt;/a&gt;&amp;gt;.&lt;br/&gt;
    &amp;gt;&lt;/p&gt;</comment>
                            <comment id="14299825" author="githubbot" created="Sat, 31 Jan 2015 14:15:19 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/317#issuecomment-72319309&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/317#issuecomment-72319309&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Okay, I&apos;ll file a JIRA&lt;/p&gt;</comment>
                            <comment id="14302997" author="githubbot" created="Tue, 3 Feb 2015 09:27:08 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/317#issuecomment-72618925&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/317#issuecomment-72618925&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think this is a good fix, overall. There is one issue I would really like to fix, and that is the serializability of the `Instance` class. This class is not meant to be serialized and moved around, which can be reflected by the fact that it holds an Actor Ref, and the necessity to make a lot of the fields transient.&lt;/p&gt;

&lt;p&gt;    I assume that the instance needs to be serialized as part of the ExechutionGraph archiving, where the ExecutionGraph is sent via an actor message to the archiver.&lt;/p&gt;

&lt;p&gt;    I would like to solve that differently. The execution graph is &quot;cleaned&quot; before archiving (see #344 ) to reduce memory footprint. At this point, I would replace the `Instance` in the Executions with the `Instance Connection Info`, which holds all info necessary. Then we won&apos;t have to send instances through actor messages, which would be the cleaner solution.&lt;/p&gt;</comment>
                            <comment id="14304900" author="githubbot" created="Wed, 4 Feb 2015 10:30:08 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/317#issuecomment-72832512&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/317#issuecomment-72832512&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 for removing unnecessary ExecutionGraph information before archiving. &lt;/p&gt;</comment>
                            <comment id="14307144" author="stephanewen" created="Thu, 5 Feb 2015 12:36:33 +0000"  >&lt;p&gt;merged into 0.9 in db1b8b993c12f2e74b6cc9a48414265666dc0e69&lt;/p&gt;</comment>
                            <comment id="14307202" author="githubbot" created="Thu, 5 Feb 2015 13:30:55 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/317#issuecomment-73045884&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/317#issuecomment-73045884&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This one has been manually merged (but I made a typo in the &quot;This closes #xxx&quot; message &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;

&lt;p&gt;    @tillrohrmann Can you close the PR manually?&lt;/p&gt;</comment>
                            <comment id="14307206" author="githubbot" created="Thu, 5 Feb 2015 13:33:41 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/317#issuecomment-73046225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/317#issuecomment-73046225&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Of course. Thanks for merging.&lt;/p&gt;

&lt;p&gt;    On Thu, Feb 5, 2015 at 2:30 PM, Stephan Ewen &amp;lt;notifications@github.com&amp;gt;&lt;br/&gt;
    wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; This one has been manually merged (but I made a typo in the &quot;This closes&lt;br/&gt;
    &amp;gt; #xxx&quot; message &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; @tillrohrmann &amp;lt;&lt;a href=&quot;https://github.com/tillrohrmann&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann&lt;/a&gt;&amp;gt; Can you close the PR&lt;br/&gt;
    &amp;gt; manually?&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; Reply to this email directly or view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/flink/pull/317#issuecomment-73045884&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/317#issuecomment-73045884&lt;/a&gt;&amp;gt;.&lt;br/&gt;
    &amp;gt;&lt;/p&gt;
</comment>
                            <comment id="14307208" author="githubbot" created="Thu, 5 Feb 2015 13:33:47 +0000"  >&lt;p&gt;Github user tillrohrmann closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/317&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/317&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14312191" author="rmetzger" created="Mon, 9 Feb 2015 13:00:54 +0000"  >&lt;p&gt;Resolved for &quot;release-0.8&quot; with target 0.8.1 in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/91382bb8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/91382bb8&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14312192" author="githubbot" created="Mon, 9 Feb 2015 13:01:34 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/318#issuecomment-73504622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/318#issuecomment-73504622&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ve merged it to the 0.8 branch. I forgot to close the PR, could you do it manually?&lt;br/&gt;
    Thank you.&lt;/p&gt;</comment>
                            <comment id="14312203" author="githubbot" created="Mon, 9 Feb 2015 13:10:15 +0000"  >&lt;p&gt;Github user tillrohrmann closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/318&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14312451" author="till.rohrmann" created="Mon, 9 Feb 2015 16:49:56 +0000"  >&lt;p&gt;Fixed with db1b8b993c12f2e74b6cc9a48414265666dc0e69  in 0.9&lt;/p&gt;

&lt;p&gt;Fixed with 91382bb8c1f63dde0b11cc6f4dc9c18f29731cdd in 0.8&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i243en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>