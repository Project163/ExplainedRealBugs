<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:47:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-18233] TaskExecutorSubmissionTest unstable</title>
                <link>https://issues.apache.org/jira/browse/FLINK-18233</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3116&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=05b74a19-4ee4-5036-c46f-ada307df6cf0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=3116&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=05b74a19-4ee4-5036-c46f-ada307df6cf0&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-06-10T04:55:48.9840787Z [ERROR] Tests run: 11, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 16.96 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.runtime.taskexecutor.TaskExecutorSubmissionTest
2020-06-10T04:55:48.9842063Z [ERROR] testFailingScheduleOrUpdateConsumers(org.apache.flink.runtime.taskexecutor.TaskExecutorSubmissionTest)  Time elapsed: 10.866 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
2020-06-10T04:55:48.9842771Z org.junit.runners.model.TestTimedOutException: test timed out after 10000 milliseconds
2020-06-10T04:55:48.9843232Z 	at sun.misc.Unsafe.allocateMemory(Native Method)
2020-06-10T04:55:48.9843569Z 	at java.nio.DirectByteBuffer.&amp;lt;init&amp;gt;(DirectByteBuffer.java:127)
2020-06-10T04:55:48.9843928Z 	at java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:311)
2020-06-10T04:55:48.9847080Z 	at org.apache.flink.core.memory.MemorySegmentFactory.allocateDirectMemory(MemorySegmentFactory.java:143)
2020-06-10T04:55:48.9847779Z 	at org.apache.flink.core.memory.MemorySegmentFactory.allocateUnpooledOffHeapMemory(MemorySegmentFactory.java:131)
2020-06-10T04:55:48.9848321Z 	at org.apache.flink.runtime.io.network.buffer.NetworkBufferPool.&amp;lt;init&amp;gt;(NetworkBufferPool.java:122)
2020-06-10T04:55:48.9848929Z 	at org.apache.flink.runtime.io.network.NettyShuffleServiceFactory.createNettyShuffleEnvironment(NettyShuffleServiceFactory.java:116)
2020-06-10T04:55:48.9849547Z 	at org.apache.flink.runtime.io.network.NettyShuffleEnvironmentBuilder.build(NettyShuffleEnvironmentBuilder.java:144)
2020-06-10T04:55:48.9850142Z 	at org.apache.flink.runtime.taskexecutor.TaskSubmissionTestEnvironment.createShuffleEnvironment(TaskSubmissionTestEnvironment.java:259)
2020-06-10T04:55:48.9850770Z 	at org.apache.flink.runtime.taskexecutor.TaskSubmissionTestEnvironment.access$100(TaskSubmissionTestEnvironment.java:84)
2020-06-10T04:55:48.9851496Z 	at org.apache.flink.runtime.taskexecutor.TaskSubmissionTestEnvironment$Builder.lambda$build$0(TaskSubmissionTestEnvironment.java:357)
2020-06-10T04:55:48.9852092Z 	at org.apache.flink.runtime.taskexecutor.TaskSubmissionTestEnvironment$Builder$$Lambda$63/238383730.get(Unknown Source)
2020-06-10T04:55:48.9852509Z 	at java.util.Optional.orElseGet(Optional.java:267)
2020-06-10T04:55:48.9853118Z 	at org.apache.flink.runtime.taskexecutor.TaskSubmissionTestEnvironment$Builder.build(TaskSubmissionTestEnvironment.java:355)
2020-06-10T04:55:48.9853753Z 	at org.apache.flink.runtime.taskexecutor.TaskExecutorSubmissionTest.testFailingScheduleOrUpdateConsumers(TaskExecutorSubmissionTest.java:545)
2020-06-10T04:55:48.9854252Z 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2020-06-10T04:55:48.9854625Z 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2020-06-10T04:55:48.9855148Z 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2020-06-10T04:55:48.9855544Z 	at java.lang.reflect.Method.invoke(Method.java:498)
2020-06-10T04:55:48.9855948Z 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
2020-06-10T04:55:48.9856395Z 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
2020-06-10T04:55:48.9856860Z 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
2020-06-10T04:55:48.9857320Z 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
2020-06-10T04:55:48.9857800Z 	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
2020-06-10T04:55:48.9858318Z 	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
2020-06-10T04:55:48.9858743Z 	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
2020-06-10T04:55:48.9859070Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
2020-06-10T04:55:48.9859357Z 
2020-06-10T04:55:48.9859763Z [ERROR] testUpdateTaskInputPartitionsFailure(org.apache.flink.runtime.taskexecutor.TaskExecutorSubmissionTest)  Time elapsed: 0.949 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
2020-06-10T04:55:48.9860432Z java.util.concurrent.ExecutionException: org.apache.flink.runtime.rpc.akka.exceptions.AkkaRpcException: Failure &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; stopping RpcEndpoint taskmanager_0.
2020-06-10T04:55:48.9860972Z 	at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)
2020-06-10T04:55:48.9861684Z 	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1928)
2020-06-10T04:55:48.9862256Z 	at org.apache.flink.runtime.rpc.RpcUtils.terminateRpcEndpoint(RpcUtils.java:83)
2020-06-10T04:55:48.9862811Z 	at org.apache.flink.runtime.taskexecutor.TaskSubmissionTestEnvironment.close(TaskSubmissionTestEnvironment.java:269)
2020-06-10T04:55:48.9863489Z 	at org.apache.flink.runtime.taskexecutor.TaskExecutorSubmissionTest.testUpdateTaskInputPartitionsFailure(TaskExecutorSubmissionTest.java:457)
2020-06-10T04:55:48.9863968Z 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2020-06-10T04:55:48.9864355Z 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2020-06-10T04:55:48.9864821Z 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2020-06-10T04:55:48.9865245Z 	at java.lang.reflect.Method.invoke(Method.java:498)
2020-06-10T04:55:48.9865645Z 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
2020-06-10T04:55:48.9866106Z 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
2020-06-10T04:55:48.9866569Z 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
2020-06-10T04:55:48.9867012Z 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
2020-06-10T04:55:48.9867424Z 	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
2020-06-10T04:55:48.9867795Z 	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
2020-06-10T04:55:48.9868141Z 	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
2020-06-10T04:55:48.9868511Z 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
2020-06-10T04:55:48.9868914Z 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
2020-06-10T04:55:48.9869373Z 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
2020-06-10T04:55:48.9869794Z 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
2020-06-10T04:55:48.9870312Z 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
2020-06-10T04:55:48.9870886Z 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
2020-06-10T04:55:48.9871579Z 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
2020-06-10T04:55:48.9872212Z 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
2020-06-10T04:55:48.9872760Z 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
2020-06-10T04:55:48.9873424Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
2020-06-10T04:55:48.9874094Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
2020-06-10T04:55:48.9874571Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
2020-06-10T04:55:48.9875084Z 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
2020-06-10T04:55:48.9875575Z 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
2020-06-10T04:55:48.9876094Z 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
2020-06-10T04:55:48.9876555Z 	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
2020-06-10T04:55:48.9876974Z 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-06-10T04:55:48.9877467Z Caused by: org.apache.flink.runtime.rpc.akka.exceptions.AkkaRpcException: Failure &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; stopping RpcEndpoint taskmanager_0.
2020-06-10T04:55:48.9877981Z 	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor$StartedState.terminate(AkkaRpcActor.java:518)
2020-06-10T04:55:48.9878478Z 	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleControlMessage(AkkaRpcActor.java:176)
2020-06-10T04:55:48.9878903Z 	at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:26)
2020-06-10T04:55:48.9879288Z 	at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:21)
2020-06-10T04:55:48.9879835Z 	at scala.PartialFunction$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;applyOrElse(PartialFunction.scala:123)
2020-06-10T04:55:48.9880316Z 	at akka.japi.pf.UnitCaseStatement.applyOrElse(CaseStatements.scala:21)
2020-06-10T04:55:48.9880721Z 	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:170)
2020-06-10T04:55:48.9881198Z 	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171)
2020-06-10T04:55:48.9881578Z 	at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundReceive(Actor.scala:517)
2020-06-10T04:55:48.9881957Z 	at akka.actor.AbstractActor.aroundReceive(AbstractActor.scala:225)
2020-06-10T04:55:48.9882322Z 	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:592)
2020-06-10T04:55:48.9882677Z 	at akka.actor.ActorCell.invoke(ActorCell.scala:561)
2020-06-10T04:55:48.9883075Z 	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:258)
2020-06-10T04:55:48.9883418Z 	at akka.dispatch.Mailbox.run(Mailbox.scala:225)
2020-06-10T04:55:48.9883726Z 	at akka.dispatch.Mailbox.exec(Mailbox.scala:235)
2020-06-10T04:55:48.9884096Z 	at akka.dispatch.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
2020-06-10T04:55:48.9884506Z 	at akka.dispatch.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
2020-06-10T04:55:48.9884985Z 	at akka.dispatch.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
2020-06-10T04:55:48.9885413Z 	at akka.dispatch.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
2020-06-10T04:55:48.9885757Z Caused by: java.lang.IllegalStateException
2020-06-10T04:55:48.9886103Z 	at org.apache.flink.util.Preconditions.checkState(Preconditions.java:179)
2020-06-10T04:55:48.9886519Z 	at org.apache.flink.runtime.taskexecutor.TaskExecutor.onStop(TaskExecutor.java:416)
2020-06-10T04:55:48.9886974Z 	at org.apache.flink.runtime.rpc.RpcEndpoint.internalCallOnStop(RpcEndpoint.java:216)
2020-06-10T04:55:48.9887445Z 	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor$StartedState.terminate(AkkaRpcActor.java:514)
2020-06-10T04:55:48.9887768Z 	... 18 more
2020-06-10T04:55:48.9887885Z 
2020-06-10T04:55:49.7419345Z [INFO] Running org.apache.flink.runtime.taskexecutor.DefaultJobLeaderServiceTest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13310565">FLINK-18233</key>
            <summary>TaskExecutorSubmissionTest unstable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Wed, 10 Jun 2020 06:53:52 +0000</created>
                <updated>Fri, 12 Jun 2020 13:48:29 +0000</updated>
                            <resolved>Fri, 12 Jun 2020 13:48:29 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.11.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17130688" author="till.rohrmann" created="Wed, 10 Jun 2020 13:47:37 +0000"  >&lt;p&gt;The test failure seems to be twofold:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;TaskExectuorSubmissionTest.testFailingScheduleOrUpdateConsumers&lt;/tt&gt; fails because it cannot allocate fast enough direct byte buffers (32MB in 10s). It needs slightly more than 10s.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;TaskExecutorSubmissionTest.testUpdateTaskInputPartitionsFailure&lt;/tt&gt; fails because of an &lt;tt&gt;IllegalStateException&lt;/tt&gt;. This is most likely cause by &lt;a href=&quot;https://github.com/apache/flink/pull/12399/files#r438132048&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/12399/files#r438132048&lt;/a&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15687&quot; title=&quot;Potential test instabilities due to concurrent access to TaskSlotTable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15687&quot;&gt;&lt;del&gt;FLINK-15687&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;For fixing this issue I propose to increase the timeouts of &lt;tt&gt;TaskExecutorSubmissionTest&lt;/tt&gt;. The latter problem will be addressed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-15687&quot; title=&quot;Potential test instabilities due to concurrent access to TaskSlotTable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-15687&quot;&gt;&lt;del&gt;FLINK-15687&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17134230" author="till.rohrmann" created="Fri, 12 Jun 2020 13:48:29 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;master: e026274882b21f647f71febd65623e0a2c71d553&lt;br/&gt;
1.11.0: 180533c668778bd032732b21e8c24fe0e664518b&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fp8w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>