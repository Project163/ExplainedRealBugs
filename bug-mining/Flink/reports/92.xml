<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:17:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1223] Allow value escaping in CSV files</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1223</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The CSV Parser currently does not interpret escaped values&lt;/p&gt;

&lt;p&gt;The example from here&lt;br/&gt;
&lt;a href=&quot;http://en.wikipedia.org/wiki/Comma-separated_values#Example&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://en.wikipedia.org/wiki/Comma-separated_values#Example&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Year,Make,Model,Description,Price
1997,Ford,E350,&lt;span class=&quot;code-quote&quot;&gt;&quot;ac, abs, moon&quot;&lt;/span&gt;,3000.00
1999,Chevy,&lt;span class=&quot;code-quote&quot;&gt;&quot;Venture &quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;Extended Edition&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;,&quot;&lt;/span&gt;&quot;,4900.00
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Does not work currently.&lt;/p&gt;

&lt;p&gt;Here escaping inside the string field generates an error.&lt;/p&gt;

&lt;p&gt;For reference &lt;/p&gt;

&lt;p&gt;An interesting post about the fallacies that could be encountered when parsing CSV files.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://tburette.github.io/blog/2014/05/25/so-you-want-to-write-your-own-CSV-code/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tburette.github.io/blog/2014/05/25/so-you-want-to-write-your-own-CSV-code/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12753407">FLINK-1223</key>
            <summary>Allow value escaping in CSV files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jkirsch">Johannes</assignee>
                                    <reporter username="jkirsch">Johannes</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Nov 2014 14:25:19 +0000</created>
                <updated>Thu, 28 Feb 2019 14:29:34 +0000</updated>
                            <resolved>Tue, 11 Nov 2014 11:05:46 +0000</resolved>
                                    <version>0.8.0</version>
                                                    <component>API / Scala</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14200898" author="githubbot" created="Thu, 6 Nov 2014 20:53:37 +0000"  >&lt;p&gt;GitHub user jkirsch opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/187&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/187&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1223&quot; title=&quot;Allow value escaping in CSV files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1223&quot;&gt;&lt;del&gt;FLINK-1223&lt;/del&gt;&lt;/a&gt; Allow value escaping in CSV files.&lt;/p&gt;

&lt;p&gt;    Strings can now contain &quot; quoted characters&lt;br/&gt;
    Skip trailing whitespace after quote&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jkirsch/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jkirsch/incubator-flink&lt;/a&gt; csv&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/187.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/187.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #187&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1c03d901b47c8a7147fc5ed17ca36f5b1791af99&lt;br/&gt;
Author: Johannes &amp;lt;jkirschnick@gmail.com&amp;gt;&lt;br/&gt;
Date:   2014-11-06T19:19:56Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1223&quot; title=&quot;Allow value escaping in CSV files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1223&quot;&gt;&lt;del&gt;FLINK-1223&lt;/del&gt;&lt;/a&gt; Allow value escaping in CSV files.&lt;/p&gt;

&lt;p&gt;    Strings can now contain &quot; quoted characters&lt;br/&gt;
    Skip trailing whitespace after quote&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14201902" author="githubbot" created="Fri, 7 Nov 2014 10:32:21 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/187#issuecomment-62124858&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/187#issuecomment-62124858&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good. I have one inline comment/question, though&lt;/p&gt;</comment>
                            <comment id="14201903" author="githubbot" created="Fri, 7 Nov 2014 10:34:31 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/187#discussion_r20003612&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/187#discussion_r20003612&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/types/parser/StringParser.java &amp;#8212;&lt;br/&gt;
    @@ -30,7 +34,14 @@&lt;br/&gt;
     	private static final byte WHITESPACE_TAB = (byte) &apos;\t&apos;;&lt;/p&gt;

&lt;p&gt;     	private static final byte QUOTE_DOUBLE = (byte) &apos;&quot;&apos;;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
    +	private static final Set&amp;lt;Byte&amp;gt; trailingCheckSet = Sets.newHashSet(&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The parsers are often stressed badly when reading large CSV files, so we think a lot about performance here.&lt;/p&gt;

&lt;p&gt;    I am wondering if a hash set is the best choice to check for these three elements. Computing hash, table lookup, entry lookup, comparison, ...&lt;/p&gt;

&lt;p&gt;    Might be cheaper to just hardwire the check for those types...&lt;/p&gt;</comment>
                            <comment id="14201975" author="githubbot" created="Fri, 7 Nov 2014 12:07:02 +0000"  >&lt;p&gt;Github user jkirsch commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/187#discussion_r20007010&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/187#discussion_r20007010&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/types/parser/StringParser.java &amp;#8212;&lt;br/&gt;
    @@ -30,7 +34,14 @@&lt;br/&gt;
     	private static final byte WHITESPACE_TAB = (byte) &apos;\t&apos;;&lt;/p&gt;

&lt;p&gt;     	private static final byte QUOTE_DOUBLE = (byte) &apos;&quot;&apos;;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
    +	private static final Set&amp;lt;Byte&amp;gt; trailingCheckSet = Sets.newHashSet(&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    You are right&lt;br/&gt;
    &lt;a href=&quot;https://microbenchmarks.appspot.com/runs/b3ab8918-7226-4527-b019-c622a728d144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://microbenchmarks.appspot.com/runs/b3ab8918-7226-4527-b019-c622a728d144&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14201976" author="githubbot" created="Fri, 7 Nov 2014 12:07:03 +0000"  >&lt;p&gt;Github user jkirsch commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/187#issuecomment-62133790&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/187#issuecomment-62133790&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for having a look at the code&lt;/p&gt;

&lt;p&gt;    Indeed the Set approach is nicer to read but there is a performance penalty incurred&lt;/p&gt;

&lt;p&gt;    I just ran a simple caliper benchmark and on my machine the set approach is about 10x slower, so I fixed that.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://microbenchmarks.appspot.com/runs/b3ab8918-7226-4527-b019-c622a728d144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://microbenchmarks.appspot.com/runs/b3ab8918-7226-4527-b019-c622a728d144&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="14204565" author="rmetzger" created="Mon, 10 Nov 2014 09:45:29 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkirsch&quot; class=&quot;user-hover&quot; rel=&quot;jkirsch&quot;&gt;jkirsch&lt;/a&gt;, I gave you &quot;Contributor&quot; permissions on JIRA so that you can assign issues to yourself.&lt;/p&gt;</comment>
                            <comment id="14204566" author="githubbot" created="Mon, 10 Nov 2014 09:46:42 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/187#issuecomment-62361647&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/187#issuecomment-62361647&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good.&lt;/p&gt;</comment>
                            <comment id="14206261" author="githubbot" created="Tue, 11 Nov 2014 10:45:19 +0000"  >&lt;p&gt;Github user uce commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/187#issuecomment-62530397&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/187#issuecomment-62530397&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    OK. I&apos;m merging this in the current batch.&lt;/p&gt;</comment>
                            <comment id="14206291" author="uce" created="Tue, 11 Nov 2014 11:05:46 +0000"  >&lt;p&gt;Fixed in e855ef4712c6d065d0580b2f58e9485b0909dbf8.&lt;/p&gt;</comment>
                            <comment id="14206301" author="githubbot" created="Tue, 11 Nov 2014 11:11:05 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-flink/pull/187&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-flink/pull/187&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2225b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>