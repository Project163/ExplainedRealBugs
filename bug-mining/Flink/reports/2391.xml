<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:33:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-8900] YARN FinalStatus always shows as KILLED with Flip-6</title>
                <link>https://issues.apache.org/jira/browse/FLINK-8900</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Whenever I run a simple simple word count like this one on YARN with Flip-6 enabled,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./bin/flink run -m yarn-cluster -yjm 768 -ytm 3072 -ys 2 -p 20 -c org.apache.flink.streaming.examples.wordcount.WordCount ./examples/streaming/WordCount.jar --input /usr/share/doc/rsync-3.0.6/COPYING
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it will show up as &lt;tt&gt;KILLED&lt;/tt&gt; in the &lt;tt&gt;State&lt;/tt&gt; and &lt;tt&gt;FinalStatus&lt;/tt&gt; columns even though the program ran successfully like this one (irrespective of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8899&quot; title=&quot;Submitting YARN job with FLIP-6 may lead to ApplicationAttemptNotFoundException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8899&quot;&gt;&lt;del&gt;FLINK-8899&lt;/del&gt;&lt;/a&gt; occurring or not):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2018-03-08 16:48:39,049 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Job Streaming WordCount (11a794d2f5dc2955d8015625ec300c20) switched from state RUNNING to FINISHED.
2018-03-08 16:48:39,050 INFO  org.apache.flink.runtime.checkpoint.CheckpointCoordinator     - Stopping checkpoint coordinator &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 11a794d2f5dc2955d8015625ec300c20
2018-03-08 16:48:39,050 INFO  org.apache.flink.runtime.checkpoint.StandaloneCompletedCheckpointStore  - Shutting down
2018-03-08 16:48:39,078 INFO  org.apache.flink.runtime.dispatcher.StandaloneDispatcher      - Job 11a794d2f5dc2955d8015625ec300c20 reached globally terminal state FINISHED.
2018-03-08 16:48:39,151 INFO  org.apache.flink.runtime.resourcemanager.slotmanager.SlotManager  - Register TaskManager e58efd886429e8f080815ea74ddfa734 at the SlotManager.
2018-03-08 16:48:39,221 INFO  org.apache.flink.runtime.jobmaster.JobMaster                  - Stopping the JobMaster &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job Streaming WordCount(11a794d2f5dc2955d8015625ec300c20).
2018-03-08 16:48:39,270 INFO  org.apache.flink.runtime.jobmaster.JobMaster                  - Close ResourceManager connection 43f725adaee14987d3ff99380701f52f: JobManager is shutting down..
2018-03-08 16:48:39,270 INFO  org.apache.flink.yarn.YarnResourceManager                     - Disconnect job manager 00000000000000000000000000000000@akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@ip-172-31-7-0.eu-west-1.compute.internal:34281/user/jobmanager_0 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job 11a794d2f5dc2955d8015625ec300c20 from the resource manager.
&lt;/span&gt;2018-03-08 16:48:39,349 INFO  org.apache.flink.runtime.jobmaster.slotpool.SlotPool          - Suspending SlotPool.
2018-03-08 16:48:39,349 INFO  org.apache.flink.runtime.jobmaster.slotpool.SlotPool          - Stopping SlotPool.
2018-03-08 16:48:39,349 INFO  org.apache.flink.runtime.jobmaster.JobManagerRunner           - JobManagerRunner already shutdown.
2018-03-08 16:48:39,775 INFO  org.apache.flink.runtime.resourcemanager.slotmanager.SlotManager  - Register TaskManager 4e1fb6c8f95685e24b6a4cb4b71ffb92 at the SlotManager.
2018-03-08 16:48:39,846 INFO  org.apache.flink.runtime.resourcemanager.slotmanager.SlotManager  - Register TaskManager b5bce0bdfa7fbb0f4a0905cc3ee1c233 at the SlotManager.
2018-03-08 16:48:39,876 INFO  org.apache.flink.runtime.entrypoint.ClusterEntrypoint         - RECEIVED SIGNAL 15: SIGTERM. Shutting down as requested.
2018-03-08 16:48:39,910 INFO  org.apache.flink.runtime.resourcemanager.slotmanager.SlotManager  - Register TaskManager a35b0690fdc6ec38bbcbe18a965000fd at the SlotManager.
2018-03-08 16:48:39,942 INFO  org.apache.flink.runtime.resourcemanager.slotmanager.SlotManager  - Register TaskManager 5175cabe428bea19230ac056ff2a17bb at the SlotManager.
2018-03-08 16:48:39,974 INFO  org.apache.flink.runtime.blob.BlobServer                      - Stopped BLOB server at 0.0.0.0:46511
2018-03-08 16:48:39,975 INFO  org.apache.flink.runtime.blob.TransientBlobCache              - Shutting down BLOB cache
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13143614">FLINK-8900</key>
            <summary>YARN FinalStatus always shows as KILLED with Flip-6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="nkruber">Nico Kruber</reporter>
                        <labels>
                            <label>flip-6</label>
                    </labels>
                <created>Thu, 8 Mar 2018 17:05:37 +0000</created>
                <updated>Thu, 3 May 2018 13:06:30 +0000</updated>
                            <resolved>Thu, 3 May 2018 13:06:26 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.6.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16391566" author="nicok" created="Thu, 8 Mar 2018 17:24:06 +0000"  >&lt;p&gt;Let me elaborate a bit more since this also partly affects the old non-FLIP-6 mode:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;old mode: jobs I run detached show as &lt;tt&gt;SUCCEEDED&lt;/tt&gt; while non-detached jobs show as &lt;tt&gt;KILLED&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;FLIP-6: jobs I run detached show as &lt;tt&gt;FAILED&lt;/tt&gt; while non-detached jobs show as &lt;tt&gt;KILLED&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16408607" author="githubbot" created="Wed, 21 Mar 2018 21:29:11 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5741&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5741&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8900&quot; title=&quot;YARN FinalStatus always shows as KILLED with Flip-6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8900&quot;&gt;&lt;del&gt;FLINK-8900&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;yarn&amp;#93;&lt;/span&gt; Properly unregister application from Yarn RM&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Unregisters the Flink application from Yarn if the application is shut down. This is required to properly show the state and final status in the Yarn web UI.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Manually tested&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (yes)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; yarnApplicationStatus&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5741.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5741.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5741&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 71efa75973d066268bbb3533f29da05270ef24b2&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@...&amp;gt;&lt;br/&gt;
Date:   2018-03-21T20:48:19Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; Log final status and exit code under lock&lt;/p&gt;

&lt;p&gt;commit c10e100cbf09e602415ff72043b857a1e29daf66&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@...&amp;gt;&lt;br/&gt;
Date:   2018-03-21T21:14:58Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; Add FutureUtils#composeAfterwards&lt;/p&gt;

&lt;p&gt;commit 2072210eddbb13add2b3228fd08c8550075cdfc1&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@...&amp;gt;&lt;br/&gt;
Date:   2018-03-21T21:19:28Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8900&quot; title=&quot;YARN FinalStatus always shows as KILLED with Flip-6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8900&quot;&gt;&lt;del&gt;FLINK-8900&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;yarn&amp;#93;&lt;/span&gt; Properly unregister application from Yarn RM&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16411045" author="githubbot" created="Fri, 23 Mar 2018 09:07:45 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5741&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5741&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merging the PR.&lt;/p&gt;</comment>
                            <comment id="16411263" author="githubbot" created="Fri, 23 Mar 2018 11:40:15 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5741&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5741&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16411266" author="till.rohrmann" created="Fri, 23 Mar 2018 11:41:19 +0000"  >&lt;p&gt;Fixed via&lt;br/&gt;
master: 9ee02f6a3463c531400404dee791033e120f5bfc&lt;br/&gt;
1.5.0: c94b88aa401f4561a841aa9a986a8eeb692c7ccf&lt;/p&gt;</comment>
                            <comment id="16440927" author="gjy" created="Tue, 17 Apr 2018 14:36:48 +0000"  >&lt;p&gt;When submitting in non-detached mode, the problem still surfaces. It detached mode the status is set correctly.&lt;/p&gt;

&lt;p&gt;Command used to submit:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;HADOOP_CLASSPATH=`hadoop classpath` bin/flink run -m yarn-cluster -yjm 2048 -ytm 2048  ./examples/streaming/WordCount.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;State and FinalStatus is: KILLED&lt;/p&gt;

&lt;p&gt;I re-opened the ticket.&lt;/p&gt;
</comment>
                            <comment id="16458752" author="githubbot" created="Mon, 30 Apr 2018 16:45:02 +0000"  >&lt;p&gt;GitHub user StephanEwen opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8900&quot; title=&quot;YARN FinalStatus always shows as KILLED with Flip-6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8900&quot;&gt;&lt;del&gt;FLINK-8900&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;yarn&amp;#93;&lt;/span&gt; Set correct application status when job is finished&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    When finite Flink applications (batch jobs) are sent to YARN in the detached mode, the final status is currently always the same, because the job&apos;s result is not passed to the logic that initiates the application shutdown.&lt;/p&gt;

&lt;p&gt;    This PR forwards the final job status via a future that is used to register the shutdown handlers.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Brief change log&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Introduce the `JobTerminationFuture` in the `MiniDispatcher`&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    ```&lt;br/&gt;
    bin/flink run -m yarn-cluster -yjm 2048 -ytm 2048  ./examples/streaming/WordCount.jar&lt;br/&gt;
    ```&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Run the batch job as described above on YARN to succeed, check that the final application status is successful.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Run the batch job with a parameter to a non existing input file on YARN, check that the final application status is failed.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (yes / *&lt;b&gt;no)&lt;/b&gt;*&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;The serializers: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (*&lt;b&gt;yes&lt;/b&gt;* / no / don&apos;t know)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes / *&lt;b&gt;no&lt;/b&gt;* / don&apos;t know)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (yes / *&lt;b&gt;no&lt;/b&gt;*)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (*&lt;b&gt;not applicable&lt;/b&gt;* / docs / JavaDocs / not documented)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/StephanEwen/incubator-flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StephanEwen/incubator-flink&lt;/a&gt; yarn_fix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #5944&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f4130c64420e2ad2acb680869c9b84aa5dbcc7c7&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@...&amp;gt;&lt;br/&gt;
Date:   2018-04-30T07:55:50Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;hotfix&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Update log4j-test.properties&lt;/p&gt;

&lt;p&gt;    Brings the logging definition in sync with other projects.&lt;br/&gt;
    Updates the classname for the suppressed logger in Netty to account for the new&lt;br/&gt;
    shading model introduced in Flink 1.4.&lt;/p&gt;

&lt;p&gt;commit 5fcc9aca392cbcd5dfa474b0a286868b44836f23&lt;br/&gt;
Author: Stephan Ewen &amp;lt;sewen@...&amp;gt;&lt;br/&gt;
Date:   2018-04-27T16:57:27Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8900&quot; title=&quot;YARN FinalStatus always shows as KILLED with Flip-6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8900&quot;&gt;&lt;del&gt;FLINK-8900&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;yarn&amp;#93;&lt;/span&gt; Set correct application status when job is finished&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16458893" author="githubbot" created="Mon, 30 Apr 2018 19:04:40 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The test failure is unrelated - unrelated test flakeyness &lt;/p&gt;</comment>
                            <comment id="16459004" author="githubbot" created="Mon, 30 Apr 2018 20:24:28 +0000"  >&lt;p&gt;Github user GJL commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I will try it out.&lt;/p&gt;</comment>
                            <comment id="16459435" author="githubbot" created="Tue, 1 May 2018 04:27:01 +0000"  >&lt;p&gt;Github user GJL commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944#discussion_r185163871&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944#discussion_r185163871&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/entrypoint/YarnJobClusterEntrypoint.java &amp;#8212;&lt;br/&gt;
    @@ -131,6 +133,17 @@ protected JobGraph retrieveJobGraph(Configuration configuration) throws FlinkExc&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	@Override&lt;br/&gt;
    +	protected void registerShutdownActions(CompletableFuture&amp;lt;ApplicationStatus&amp;gt; terminationFuture) {&lt;br/&gt;
    +		terminationFuture.whenComplete((status, throwable) -&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    `throwable` isn&apos;t used. If `terminationFuture` cannot be completed exceptionally, `thenAccept` should be used. &lt;/p&gt;</comment>
                            <comment id="16459436" author="githubbot" created="Tue, 1 May 2018 04:27:01 +0000"  >&lt;p&gt;Github user GJL commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944#discussion_r185163799&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944#discussion_r185163799&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/dispatcher/MiniDispatcher.java &amp;#8212;&lt;br/&gt;
    @@ -109,7 +119,11 @@ public MiniDispatcher(&lt;/p&gt;

&lt;p&gt;     		if (executionMode == ClusterEntrypoint.ExecutionMode.NORMAL) {&lt;br/&gt;
     			// terminate the MiniDispatcher once we served the first JobResult successfully&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jobResultFuture.whenComplete((JobResult ignored, Throwable throwable) -&amp;gt; shutDown());&lt;br/&gt;
    +			jobResultFuture.whenComplete((JobResult result, Throwable throwable) -&amp;gt; {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    `throwable` isn&apos;t used. If `jobResultFuture` cannot be completed exceptionally, `thenAccept` should be used. &lt;/p&gt;</comment>
                            <comment id="16459437" author="githubbot" created="Tue, 1 May 2018 04:27:02 +0000"  >&lt;p&gt;Github user GJL commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944#discussion_r185164034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944#discussion_r185164034&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/dispatcher/MiniDispatcher.java &amp;#8212;&lt;br/&gt;
    @@ -109,7 +119,11 @@ public MiniDispatcher(&lt;/p&gt;

&lt;p&gt;     		if (executionMode == ClusterEntrypoint.ExecutionMode.NORMAL) {&lt;br/&gt;
     			// terminate the MiniDispatcher once we served the first JobResult successfully&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jobResultFuture.whenComplete((JobResult ignored, Throwable throwable) -&amp;gt; shutDown());&lt;br/&gt;
    +			jobResultFuture.whenComplete((JobResult result, Throwable throwable) -&amp;gt; {&lt;br/&gt;
    +				ApplicationStatus status = result.getSerializedThrowable().isPresent() ?&lt;br/&gt;
    +						ApplicationStatus.FAILED : ApplicationStatus.SUCCEEDED;&lt;br/&gt;
    +				jobTerminationFuture.complete(status);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think the functional way would be:&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    				jobTerminationFuture.complete(result.getSerializedThrowable()&lt;br/&gt;
    					.map(serializedThrowable -&amp;gt; ApplicationStatus.FAILED)&lt;br/&gt;
    					.orElse(ApplicationStatus.SUCCEEDED));&lt;br/&gt;
    ```&lt;/p&gt;</comment>
                            <comment id="16462130" author="githubbot" created="Thu, 3 May 2018 08:53:48 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944#discussion_r185732507&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944#discussion_r185732507&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/dispatcher/MiniDispatcher.java &amp;#8212;&lt;br/&gt;
    @@ -109,7 +119,11 @@ public MiniDispatcher(&lt;/p&gt;

&lt;p&gt;     		if (executionMode == ClusterEntrypoint.ExecutionMode.NORMAL) {&lt;br/&gt;
     			// terminate the MiniDispatcher once we served the first JobResult successfully&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jobResultFuture.whenComplete((JobResult ignored, Throwable throwable) -&amp;gt; shutDown());&lt;br/&gt;
    +			jobResultFuture.whenComplete((JobResult result, Throwable throwable) -&amp;gt; {&lt;br/&gt;
    +				ApplicationStatus status = result.getSerializedThrowable().isPresent() ?&lt;br/&gt;
    +						ApplicationStatus.FAILED : ApplicationStatus.SUCCEEDED;&lt;br/&gt;
    +				jobTerminationFuture.complete(status);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    True, I had it like that initially, but found the above version more readable in the end, because we don&apos;t really use the serializedThrowable (making the map() a bit strange).&lt;/p&gt;</comment>
                            <comment id="16462131" author="githubbot" created="Thu, 3 May 2018 08:53:56 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944#discussion_r185732539&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944#discussion_r185732539&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/dispatcher/MiniDispatcher.java &amp;#8212;&lt;br/&gt;
    @@ -109,7 +119,11 @@ public MiniDispatcher(&lt;/p&gt;

&lt;p&gt;     		if (executionMode == ClusterEntrypoint.ExecutionMode.NORMAL) {&lt;br/&gt;
     			// terminate the MiniDispatcher once we served the first JobResult successfully&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jobResultFuture.whenComplete((JobResult ignored, Throwable throwable) -&amp;gt; shutDown());&lt;br/&gt;
    +			jobResultFuture.whenComplete((JobResult result, Throwable throwable) -&amp;gt; {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Will update&lt;/p&gt;</comment>
                            <comment id="16462132" author="githubbot" created="Thu, 3 May 2018 08:54:02 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944#discussion_r185732563&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944#discussion_r185732563&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-yarn/src/main/java/org/apache/flink/yarn/entrypoint/YarnJobClusterEntrypoint.java &amp;#8212;&lt;br/&gt;
    @@ -131,6 +133,17 @@ protected JobGraph retrieveJobGraph(Configuration configuration) throws FlinkExc&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	@Override&lt;br/&gt;
    +	protected void registerShutdownActions(CompletableFuture&amp;lt;ApplicationStatus&amp;gt; terminationFuture) {&lt;br/&gt;
    +		terminationFuture.whenComplete((status, throwable) -&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Will update&lt;/p&gt;</comment>
                            <comment id="16462169" author="githubbot" created="Thu, 3 May 2018 09:20:02 +0000"  >&lt;p&gt;Github user GJL commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944#discussion_r185739056&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944#discussion_r185739056&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/dispatcher/MiniDispatcher.java &amp;#8212;&lt;br/&gt;
    @@ -109,7 +119,11 @@ public MiniDispatcher(&lt;/p&gt;

&lt;p&gt;     		if (executionMode == ClusterEntrypoint.ExecutionMode.NORMAL) {&lt;br/&gt;
     			// terminate the MiniDispatcher once we served the first JobResult successfully&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jobResultFuture.whenComplete((JobResult ignored, Throwable throwable) -&amp;gt; shutDown());&lt;br/&gt;
    +			jobResultFuture.whenComplete((JobResult result, Throwable throwable) -&amp;gt; {&lt;br/&gt;
    +				ApplicationStatus status = result.getSerializedThrowable().isPresent() ?&lt;br/&gt;
    +						ApplicationStatus.FAILED : ApplicationStatus.SUCCEEDED;&lt;br/&gt;
    +				jobTerminationFuture.complete(status);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    ok&lt;/p&gt;</comment>
                            <comment id="16462402" author="githubbot" created="Thu, 3 May 2018 13:05:31 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/5944&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/5944&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16462403" author="stephanewen" created="Thu, 3 May 2018 13:06:26 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;1.5.0 via 5b26718404a89744fd4ddcdd963a712ec581222c&lt;/li&gt;
	&lt;li&gt;1.6.0 via 545d530747067c805071935ec2bd62083299164b&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3r20f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>