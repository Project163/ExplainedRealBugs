<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:41:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-11665] Flink fails to remove JobGraph from ZK even though it reports it did</title>
                <link>https://issues.apache.org/jira/browse/FLINK-11665</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;We recently have seen the following issue with Flink 1.5.5:&lt;/p&gt;

&lt;p&gt;Given Flink Job ID&#160;1d24cad26843dcebdfca236d5e3ad82a:&#160;&lt;/p&gt;

&lt;p&gt;1- A&#160;job is activated successfully and the job graph added to ZK:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Added SubmittedJobGraph(1d24cad26843dcebdfca236d5e3ad82a, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) to ZooKeeper.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;2- Job is deactivated, Flink reports that the job graph has been successfully removed from ZK and the blob is deleted from the blob server (in this case S3):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Removed job graph 1d24cad26843dcebdfca236d5e3ad82a from ZooKeeper.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;3- JM is later restarted, Flink for some reason attempts to recover the job that&#160;it reported earlier it has&#160;removed from ZK but since the blob has already been deleted the JM goes into a crash loop. The only way to recover it manually is to remove the job graph entry from ZK:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Recovered SubmittedJobGraph(1d24cad26843dcebdfca236d5e3ad82a, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;).	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.flink.fs.s3presto.shaded.com.amazonaws.services.s3.model.AmazonS3Exception: The specified key does not exist. (Service: Amazon S3; Status Code: 404; Error Code: NoSuchKey; Request ID: 1BCDFD83FC4546A2), S3 Extended Request ID: OzZtMbihzCm1LKy99s2+rgUMxyll/xYmL6ouMvU2eo30wuDbUmj/DAWoTCs9pNNCLft0FWqbhTo= (Path: s3:&lt;span class=&quot;code-comment&quot;&gt;//blam-state-staging/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/blob/job_1d24cad26843dcebdfca236d5e3ad82a/blob_p-c51b25cc0b20351f6e32a628bb6e674ee48a273e-ccfa96b0fd795502897c73714185dde3)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My question is under what circumstances would this happen? this seems to happen very infrequently but since the consequence is severe (JM crash loop) we&apos;d like to understand how it would happen.&lt;/p&gt;

&lt;p&gt;This  all seems a little similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9575&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-9575&lt;/a&gt; but that issue is reported fixed in Flink 1.5.2 and we are already on Flink 1.5.5&lt;/p&gt;</description>
                <environment></environment>
        <key id="13216772">FLINK-11665</key>
            <summary>Flink fails to remove JobGraph from ZK even though it reports it did</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="basharaj">Bashar Abdul Jawad</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 19 Feb 2019 23:37:58 +0000</created>
                <updated>Fri, 31 Jul 2020 10:21:13 +0000</updated>
                            <resolved>Fri, 25 Oct 2019 15:39:04 +0000</resolved>
                                    <version>1.5.5</version>
                    <version>1.6.4</version>
                    <version>1.7.2</version>
                    <version>1.8.0</version>
                                    <fixVersion>1.10.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16772600" author="tison" created="Wed, 20 Feb 2019 04:01:48 +0000"  >&lt;p&gt;Do you see the log below?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Released locks of job graph 1d24cad26843dcebdfca236d5e3ad82a from ZooKeeper.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16772603" author="basharaj" created="Wed, 20 Feb 2019 04:16:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Tison&quot; class=&quot;user-hover&quot; rel=&quot;tison&quot;&gt;Tison&lt;/a&gt; I do, this happens right after the first recovery attempt:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1/24/19 2:59:58.457 PM: Recovered SubmittedJobGraph(1d24cad26843dcebdfca236d5e3ad82a, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;).	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Followed by: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1/24/19 2:59:58.498 PM: Released locks of job graph 1d24cad26843dcebdfca236d5e3ad82a from ZooKeeper.	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Subsequent recovery attempts are not following by the &quot;Released locks&quot; statement. &lt;/p&gt;</comment>
                            <comment id="16772620" author="tison" created="Wed, 20 Feb 2019 04:45:59 +0000"  >&lt;p&gt;If there a &quot;Released locks&quot; before &quot;Removed job graph&quot;? If a &quot;release&quot; was called before &quot;remove&quot;, then &lt;tt&gt;addedJobGraphs&lt;/tt&gt; removed JobID 1d24cad26843dcebdfca236d5e3ad82a, which cause that when you call &quot;remove&quot;, flink couldn&apos;t find your Job in &lt;tt&gt;addedJobGraphs&lt;/tt&gt; so passed the &quot;delete&quot; action in ZK. However, it still printed the log &quot;Removed job graph&quot;. It is a wart but can explain what you met.&lt;/p&gt;

&lt;p&gt;It is helpful if you can share the full log (or the related fragment).&lt;/p&gt;</comment>
                            <comment id="16773164" author="basharaj" created="Wed, 20 Feb 2019 16:22:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Tison&quot; class=&quot;user-hover&quot; rel=&quot;tison&quot;&gt;Tison&lt;/a&gt; you&apos;re exactly right, the sequence of events is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1/24/19 2:59:58.457 Recovered SubmittedJobGraph(1d24cad26843dcebdfca236d5e3ad82a, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1/24/19 2:59:58.498 PM: Released locks of job graph 1d24cad26843dcebdfca236d5e3ad82a from ZooKeeper.	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1/25/19 6:14:49.915 AM Removed job graph 1d24cad26843dcebdfca236d5e3ad82a from ZooKeeper. --&amp;gt; misleading statement
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My question now is, is this expected? why was &lt;tt&gt;releaseJobGraph(JobID)&lt;/tt&gt; called after &lt;tt&gt;recoverJobGraph(JobID)&lt;/tt&gt;? is it expected that it will remove the &lt;tt&gt;JobID&lt;/tt&gt; from &lt;tt&gt;addedJobGraphs&lt;/tt&gt;? Does that mean we shouldn&apos;t attempt to stop a job that has &lt;tt&gt;releaseJobGraph(JobID)&lt;/tt&gt; already called on it?&lt;/p&gt;

&lt;p&gt;Also I think the log message at &lt;a href=&quot;https://github.com/apache/flink/blob/release-1.5.5/flink-runtime/src/main/java/org/apache/flink/runtime/jobmanager/ZooKeeperSubmittedJobGraphStore.java#L290&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/release-1.5.5/flink-runtime/src/main/java/org/apache/flink/runtime/jobmanager/ZooKeeperSubmittedJobGraphStore.java#L290&lt;/a&gt; is misleading as it will be logged even if the &lt;tt&gt;JobID&lt;/tt&gt; wasn&apos;t in &lt;tt&gt;addedJobGraphs&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16773282" author="fwiffo" created="Wed, 20 Feb 2019 18:56:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=basharaj&quot; class=&quot;user-hover&quot; rel=&quot;basharaj&quot;&gt;basharaj&lt;/a&gt;, I see one code path where jobs are released after they were recovered: &lt;a href=&quot;https://github.com/apache/flink/blob/release-1.5.5/flink-runtime/src/main/java/org/apache/flink/runtime/dispatcher/Dispatcher.java#L657-L674&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/release-1.5.5/flink-runtime/src/main/java/org/apache/flink/runtime/dispatcher/Dispatcher.java#L657-L674&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What I think is happening is that while the Dispatcher is trying to recover all jobs, it gets an exception. This triggers a release of all recovered job graphs which deletes the lock from zookeeper and removes the job from the &lt;tt&gt;addedJobGraphs&lt;/tt&gt; cache in &lt;tt&gt;ZooKeeperSubmittedJobGraphStore&lt;/tt&gt;. When the job is then stopped, you get the error that you noticed where the ZK state is left because the job wasn&apos;t in the cache. I don&apos;t see anywhere that the exception is logged so I&apos;m not sure that I can confirm that one of the jobs failed to recover causing the release, but it seems most likely based on my reading of the source code.&lt;/p&gt;</comment>
                            <comment id="16773302" author="basharaj" created="Wed, 20 Feb 2019 19:17:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fwiffo&quot; class=&quot;user-hover&quot; rel=&quot;fwiffo&quot;&gt;fwiffo&lt;/a&gt; that makes sense, &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-release-1.5/api/java/org/apache/flink/runtime/jobmanager/SubmittedJobGraphStore.html#releaseJobGraph-org.apache.flink.api.common.JobID-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the docs for releaseJobGraph&lt;/a&gt; says that:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Releases the locks on the specified JobGraph. Releasing the locks allows that another instance can delete the job from the SubmittedJobGraphStore.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I am not sure if the second part didn&apos;t happen? (&lt;em&gt;another instance can delete the job from the SubmittedJobGraphStore&lt;/em&gt;). It seems incorrect to me that releaseJobGraph would remove the JobID from &lt;tt&gt;addedJobGraphs&lt;/tt&gt; cache without actually deleting the path in ZK. This may cause a dangling entry in ZK which is the problem reported here. &lt;/p&gt;</comment>
                            <comment id="16773435" author="basharaj" created="Wed, 20 Feb 2019 22:05:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Tison&quot; class=&quot;user-hover&quot; rel=&quot;tison&quot;&gt;Tison&lt;/a&gt; I think we found what might be causing this:&lt;/p&gt;

&lt;p&gt;1- Current Dispatcher loses leadership, this will terminate all running job managers:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2019-01-24 06:59:57.434 Dispatcher akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@flink-jobmanager:6123/user/dispatcher was revoked leadership.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice however that this runs asynchronously, and that&apos;s a problem.&lt;/p&gt;

&lt;p&gt;2- New Dispatcher is granted leadership with a new fencing token:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2019-01-24 06:59:58.294 Dispatcher akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@flink-jobmanager:6123/user/dispatcher was granted leadership with fencing token d4ed78fe-ddda-4f5e-8255-c10e99a1c48e&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;3- New Dispatcher recovers job graph 1d24cad26843dcebdfca236d5e3ad82a&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2019-01-24 06:59:58.457 Recovered SubmittedJobGraph(1d24cad26843dcebdfca236d5e3ad82a, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;4- Since old Dispatcher is asynchronously terminating, it release locks of job graph 1d24cad26843dcebdfca236d5e3ad82a from ZooKeeper after #3 completes:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2019-01-24 06:59:58.498 Released locks of job graph 1d24cad26843dcebdfca236d5e3ad82a from ZooKeeper.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This release lock removes the jobID from &lt;tt&gt;addedJobGraphs&lt;/tt&gt; cache. Later when yo cancel the job it won&apos;t find it in the &lt;tt&gt;addedJobGraphs&lt;/tt&gt; cache so won&apos;t remove it from ZK however it will still remove the Blob from S3.&lt;/p&gt;

&lt;p&gt;5- JM restarts, Job Graph is in ZK but the blob is gone, JM goes into crash loop (problem reported in this Jira).&lt;/p&gt;

&lt;p&gt;I attached the relevant logs here. &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12959506/12959506_FLINK-11665.csv&quot; title=&quot;FLINK-11665.csv attached to FLINK-11665&quot;&gt;FLINK-11665.csv&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;Any reason why revokeLeadership() is called asynchronously? this may cause a race condition when a new Dispatcher is started up.&lt;/p&gt;</comment>
                            <comment id="16773470" author="fwiffo" created="Wed, 20 Feb 2019 22:47:12 +0000"  >&lt;p&gt;That makes sense &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=basharaj&quot; class=&quot;user-hover&quot; rel=&quot;basharaj&quot;&gt;basharaj&lt;/a&gt;. I think that&apos;s more likely than my previous theory.&lt;/p&gt;</comment>
                            <comment id="16773720" author="tison" created="Thu, 21 Feb 2019 06:45:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=basharaj&quot; class=&quot;user-hover&quot; rel=&quot;basharaj&quot;&gt;basharaj&lt;/a&gt; I&apos;ve checked out your logs and agree with your analysis.&lt;/p&gt;

&lt;p&gt;I&apos;d like to involve one of our committers &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt; here.&lt;/p&gt;

&lt;p&gt;It looks like that when a &lt;tt&gt;Dispatcher&lt;/tt&gt; &lt;tt&gt;#revokeLeadership&lt;/tt&gt; it &lt;tt&gt;#terminateJobManagerRunners&lt;/tt&gt; and then &lt;tt&gt;#removeJob&lt;/tt&gt;, where it calls &lt;tt&gt;#cleanUpJobData&lt;/tt&gt; async by &lt;tt&gt;#CompletableFuture#thenRunAsync&lt;/tt&gt;. We don&apos;t wait for its completion and if there is a concurrent &lt;tt&gt;#grantLeadership&lt;/tt&gt;, we can meet the error as described above, i.e., recovered the &lt;tt&gt;SubmittedJobGraph&lt;/tt&gt; and followed by an async released.&lt;/p&gt;</comment>
                            <comment id="16773884" author="till.rohrmann" created="Thu, 21 Feb 2019 09:40:01 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=basharaj&quot; class=&quot;user-hover&quot; rel=&quot;basharaj&quot;&gt;basharaj&lt;/a&gt;, thanks for the analysis. I think your analysis is correct. Instead of waiting for the previous &lt;tt&gt;JobManagerRunner&lt;/tt&gt; to terminate (waiting on &lt;tt&gt;jobManagerTerminationFutures&lt;/tt&gt;) before starting the new one, we actually need to do this before we are recovering jobs (this could happen in &lt;tt&gt;recoverJob&lt;/tt&gt;). This should solve the problem.&lt;/p&gt;</comment>
                            <comment id="16813552" author="azagrebin" created="Tue, 9 Apr 2019 15:47:16 +0000"  >&lt;p&gt;As discussed in &lt;a href=&quot;https://github.com/apache/flink/pull/7889&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;, this issue can be resolved by the more proper Dispatcher/LeaderStore lifecycle in the scope of another problem&#160;from&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11843&quot; title=&quot;Dispatcher fails to recover jobs if leader change happens during JobManagerRunner termination&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11843&quot;&gt;&lt;del&gt;FLINK-11843&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16959864" author="till.rohrmann" created="Fri, 25 Oct 2019 15:39:04 +0000"  >&lt;p&gt;Fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-11843&quot; title=&quot;Dispatcher fails to recover jobs if leader change happens during JobManagerRunner termination&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-11843&quot;&gt;&lt;del&gt;FLINK-11843&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13206564">FLINK-11225</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13165813">FLINK-9575</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="13219946">FLINK-11843</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12959506" name="FLINK-11665.csv" size="16462" author="basharaj" created="Wed, 20 Feb 2019 22:04:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi15p4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>