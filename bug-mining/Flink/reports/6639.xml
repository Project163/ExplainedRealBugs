<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:12:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-28078] ZooKeeperMultipleComponentLeaderElectionDriverTest.testLeaderElectionWithMultipleDrivers runs into timeout</title>
                <link>https://issues.apache.org/jira/browse/FLINK-28078</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=36189&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=24c3384f-1bcb-57b3-224f-51bf973bbee8&amp;amp;l=10455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Build #36189&lt;/a&gt; got stuck in &lt;tt&gt;ZooKeeperMultipleComponentLeaderElectionDriverTest.testLeaderElectionWithMultipleDrivers&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;ForkJoinPool-45-worker-25&quot;&lt;/span&gt; #525 daemon prio=5 os_prio=0 tid=0x00007fc74d9e3800 nid=0x62c8 waiting on condition [0x00007fc6ff2f2000]
May 30 16:36:10    java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
May 30 16:36:10 	at sun.misc.Unsafe.park(Native Method)
May 30 16:36:10 	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00000000c2571b80&amp;gt; (a java.util.concurrent.CompletableFuture$Signaller)
May 30 16:36:10 	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
May 30 16:36:10 	at java.util.concurrent.CompletableFuture$Signaller.block(CompletableFuture.java:1707)
May 30 16:36:10 	at java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3313)
May 30 16:36:10 	at java.util.concurrent.CompletableFuture.waitingGet(CompletableFuture.java:1742)
May 30 16:36:10 	at java.util.concurrent.CompletableFuture.join(CompletableFuture.java:1947)
May 30 16:36:10 	at org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriverTest.testLeaderElectionWithMultipleDrivers(ZooKeeperMultipleComponentLeaderElectionDriverTest.java:256)
May 30 16:36:10 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
May 30 16:36:10 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
May 30 16:36:10 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
May 30 16:36:10 	at java.lang.reflect.Method.invoke(Method.java:498)
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13450185">FLINK-28078</key>
            <summary>ZooKeeperMultipleComponentLeaderElectionDriverTest.testLeaderElectionWithMultipleDrivers runs into timeout</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mapohl">Matthias Pohl</assignee>
                                    <reporter username="mapohl">Matthias Pohl</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>stale-assigned</label>
                            <label>test-stability</label>
                    </labels>
                <created>Wed, 15 Jun 2022 09:16:20 +0000</created>
                <updated>Thu, 9 Mar 2023 12:08:12 +0000</updated>
                            <resolved>Thu, 9 Mar 2023 12:08:12 +0000</resolved>
                                    <version>1.16.0</version>
                    <version>1.15.2</version>
                                    <fixVersion>1.16.0</fixVersion>
                    <fixVersion>1.15.3</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17554963" author="zentol" created="Thu, 16 Jun 2022 08:42:02 +0000"  >&lt;p&gt;We seem to be entering a strange loop. The ZK log show the following over and over again; the final number inf the getData calls is incremented on each loop.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FinalRequestProcessor - Processing request:: sessionid:0x100cf6d9cf60000 type:getData cxid:0x20 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_ddb7327c-1775-4084-9fbd-40e263758697-latch-0000000000
FinalRequestProcessor - sessionid:0x100cf6d9cf60000 type:getData cxid:0x20 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_ddb7327c-1775-4084-9fbd-40e263758697-latch-0000000000
FinalRequestProcessor - Processing request:: sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x21 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
FinalRequestProcessor - sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x21 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
FinalRequestProcessor - Processing request:: sessionid:0x100cf6d9cf60000 type:delete cxid:0x22 zxid:0xc txntype:2 reqpath:n/a
FinalRequestProcessor - sessionid:0x100cf6d9cf60000 type:delete cxid:0x22 zxid:0xc txntype:2 reqpath:n/a
FinalRequestProcessor - Processing request:: sessionid:0x100cf6d9cf60000 type:create2 cxid:0x23 zxid:0xd txntype:15 reqpath:n/a
FinalRequestProcessor - sessionid:0x100cf6d9cf60000 type:create2 cxid:0x23 zxid:0xd txntype:15 reqpath:n/a
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17556863" author="mapohl" created="Tue, 21 Jun 2022 12:05:45 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
16:17:07,802 [ForkJoinPool-45-worker-25] INFO  org.apache.flink.shaded.curator5.org.apache.curator.framework.imps.CuratorFrameworkImpl [] - Starting
16:17:07,804 [ForkJoinPool-45-worker-25] INFO  org.apache.flink.shaded.curator5.org.apache.curator.framework.imps.CuratorFrameworkImpl [] - Default schema
16:17:07,814 [ForkJoinPool-45-worker-25-EventThread] INFO  org.apache.flink.shaded.curator5.org.apache.curator.framework.state.ConnectionStateManager [] - State change: CONNECTED
16:17:07,817 [ForkJoinPool-45-worker-25-EventThread] INFO  org.apache.flink.shaded.curator5.org.apache.curator.framework.imps.EnsembleTracker [] - New config event received: {}
16:17:07,824 [Curator-ConnectionStateManager-0] DEBUG org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - Connected to ZooKeeper quorum. Leader election can start.
16:17:07,824 [Curator-ConnectionStateManager-0] DEBUG org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - Connected to ZooKeeper quorum. Leader election can start.
16:17:07,826 [ForkJoinPool-45-worker-25-EventThread] INFO  org.apache.flink.shaded.curator5.org.apache.curator.framework.imps.EnsembleTracker [] - New config event received: {}
16:17:07,848 [ForkJoinPool-45-worker-25-EventThread] DEBUG org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - ZooKeeperMultipleComponentLeaderElectionDriver obtained the leadership.
16:17:07,860 [ForkJoinPool-45-worker-25] INFO  org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - Closing ZooKeeperMultipleComponentLeaderElectionDriver.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The test itself usually creates three &lt;tt&gt;ElectionDriver&lt;/tt&gt; instances and removes them one by one through a for loop. The logs of the failed test reveal that only two out of the three have the quorum connection established (i.e. the log message &lt;tt&gt;Connected to ZooKeeper quorum. Leader election can start.&lt;/tt&gt; is printed). The first iteration picks the first instance, checks its leadership and closes it. &lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;anyOf&lt;/tt&gt; call in the next iteration should actually still succeed because there&apos;s one &lt;tt&gt;ElectionDriver&lt;/tt&gt; that has an established connection. But the resulting &lt;tt&gt;anyOf&lt;/tt&gt; composite future doesn&apos;t complete, i.e. non of the left Leadership futures completes resulting in the test getting stuck in the subsequent &lt;tt&gt;join&lt;/tt&gt; call.&lt;/p&gt;</comment>
                            <comment id="17556962" author="mapohl" created="Tue, 21 Jun 2022 15:02:11 +0000"  >&lt;p&gt;It&apos;s not clear to me, yet, why we&apos;re not seeing the second ElectionDriver taking over the leadership. I&apos;d expect to get through the second iteration as well because the leadership should be obtainable for the second ElectionDriver as well. &lt;/p&gt;</comment>
                            <comment id="17558345" author="mapohl" created="Fri, 24 Jun 2022 06:37:56 +0000"  >&lt;p&gt;I did a comparison of a successful run and the failed run. I&apos;m getting the feeling that we&apos;re running into some race condition on the &lt;tt&gt;LeaderLatch&lt;/tt&gt; implementation side.&lt;/p&gt;

&lt;p&gt;Here are the logs of a successful run starting from the log message where the latch zNode is checked for existence after being created:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1376 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:exists cxid:0x1b zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1376 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:exists cxid:0x1b zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1377 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:createContainer cxid:0x1c zxid:0xa txntype:19 reqpath:n/a
1378 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:createContainer cxid:0x1c zxid:0xa txntype:19 reqpath:n/a
1380 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x1d zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1380 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x1d zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1380 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x1e zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1380 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x1e zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1380 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x1f zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1380 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x1f zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1381 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getChildren cxid:0x20 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1381 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getChildren cxid:0x20 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1385 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:create2 cxid:0x21 zxid:0xb txntype:15 reqpath:n/a
1385 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:create2 cxid:0x21 zxid:0xb txntype:15 reqpath:n/a
1385 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:exists cxid:0x22 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink
1385 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:exists cxid:0x22 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink
1386 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:exists cxid:0x23 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1386 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:exists cxid:0x23 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1387 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x24 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1387 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x24 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1387 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:exists cxid:0x25 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1387 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:exists cxid:0x25 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1388 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getChildren cxid:0x26 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1388 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getChildren cxid:0x26 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1390 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:create2 cxid:0x27 zxid:0xc txntype:15 reqpath:n/a
1391 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:create2 cxid:0x27 zxid:0xc txntype:15 reqpath:n/a
1391 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:exists cxid:0x28 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink
1391 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:exists cxid:0x28 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink
1391 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:exists cxid:0x29 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1391 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:exists cxid:0x29 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1392 [ForkJoinPool-1-worker-9-EventThread] DEBUG org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - ZooKeeperMultipleComponentLeaderElectionDriver obtained the leadership.
1392 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x2a zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1392 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x2a zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1393 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:exists cxid:0x2b zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1393 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:exists cxid:0x2b zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1393 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getChildren cxid:0x2c zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1393 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getChildren cxid:0x2c zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1394 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:create2 cxid:0x2d zxid:0xd txntype:15 reqpath:n/a
1395 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:create2 cxid:0x2d zxid:0xd txntype:15 reqpath:n/a
1421 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getData cxid:0x2e zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_2b57761c-31e0-458d-9466-b409010d3d14-latch-0000000000
1421 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getData cxid:0x2e zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_2b57761c-31e0-458d-9466-b409010d3d14-latch-0000000000
1421 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x2f zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1421 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x2f zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1422 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getData cxid:0x30 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_1e836e28-a9d1-4bea-97f3-222034044247-latch-0000000001
1422 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getData cxid:0x30 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_1e836e28-a9d1-4bea-97f3-222034044247-latch-0000000001
1497 [ForkJoinPool-1-worker-9] INFO  org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - Closing ZooKeeperMultipleComponentLeaderElectionDriver.
1501 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:checkWatches cxid:0x31 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1501 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:checkWatches cxid:0x31 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1505 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:delete cxid:0x32 zxid:0xe txntype:2 reqpath:n/a
1506 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:delete cxid:0x32 zxid:0xe txntype:2 reqpath:n/a
1506 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x33 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1506 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x33 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1507 [ForkJoinPool-1-worker-9-EventThread] DEBUG org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - ZooKeeperMultipleComponentLeaderElectionDriver obtained the leadership.
1507 [ForkJoinPool-1-worker-9] INFO  org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - Closing ZooKeeperMultipleComponentLeaderElectionDriver.
1508 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:checkWatches cxid:0x34 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1508 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:checkWatches cxid:0x34 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1508 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:delete cxid:0x35 zxid:0xf txntype:2 reqpath:n/a
1508 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:delete cxid:0x35 zxid:0xf txntype:2 reqpath:n/a
1509 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x36 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1509 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:getChildren2 cxid:0x36 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
1509 [ForkJoinPool-1-worker-9-EventThread] DEBUG org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - ZooKeeperMultipleComponentLeaderElectionDriver obtained the leadership.
1510 [ForkJoinPool-1-worker-9] INFO  org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - Closing ZooKeeperMultipleComponentLeaderElectionDriver.
1510 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:checkWatches cxid:0x37 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1510 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:checkWatches cxid:0x37 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
1510 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:delete cxid:0x38 zxid:0x10 txntype:2 reqpath:n/a
1511 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:delete cxid:0x38 zxid:0x10 txntype:2 reqpath:n/a
1511 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:checkWatches cxid:0x39 zxid:0xfffffffffffffffe txntype:unknown reqpath:/zookeeper/config
1511 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:checkWatches cxid:0x39 zxid:0xfffffffffffffffe txntype:unknown reqpath:/zookeeper/config
1513 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - Processing request:: sessionid:0x100009ef1b30000 type:closeSession cxid:0x3a zxid:0x11 txntype:-11 reqpath:n/a
1513 [SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor [] - sessionid:0x100009ef1b30000 type:closeSession cxid:0x3a zxid:0x11 txntype:-11 reqpath:n/a
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and here are the merged (i.e. I integrated the test-sides logs into the zookeeper-server logs based on the time) logs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
16:17:07,824 [Curator-ConnectionStateManager-0] DEBUG org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - Connected to ZooKeeper quorum. Leader election can start.
16:17:07,824 [Curator-ConnectionStateManager-0] DEBUG org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - Connected to ZooKeeper quorum. Leader election can start.
16:17:07,829 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:exists cxid:0x10 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,829 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:exists cxid:0x10 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,831 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getData cxid:0x11 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,832 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getData cxid:0x11 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,837 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x12 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,837 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x12 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,838 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:createContainer cxid:0x13 zxid:0x7 txntype:19 reqpath:n/a
16:17:07,838 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:createContainer cxid:0x13 zxid:0x7 txntype:19 reqpath:n/a
16:17:07,839 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:create2 cxid:0x14 zxid:0x8 txntype:15 reqpath:n/a
16:17:07,839 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:create2 cxid:0x14 zxid:0x8 txntype:15 reqpath:n/a
16:17:07,839 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getData cxid:0x15 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,839 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getData cxid:0x15 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,839 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x16 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,839 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x16 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,846 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:create2 cxid:0x17 zxid:0x9 txntype:15 reqpath:n/a
16:17:07,846 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:create2 cxid:0x17 zxid:0x9 txntype:15 reqpath:n/a
16:17:07,846 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getChildren cxid:0x18 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,846 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getChildren cxid:0x18 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,846 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x19 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,846 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x19 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,846 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x1a zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,846 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x1a zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,846 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x1b zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,846 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x1b zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,848 [ForkJoinPool-45-worker-25-EventThread] DEBUG org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - ZooKeeperMultipleComponentLeaderElectionDriver obtained the leadership.
16:17:07,854 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x1c zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,854 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x1c zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,848 [ForkJoinPool-45-worker-25-EventThread] DEBUG org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - ZooKeeperMultipleComponentLeaderElectionDriver obtained the leadership.
16:17:07,860 [ForkJoinPool-45-worker-25] INFO  org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriver [] - Closing ZooKeeperMultipleComponentLeaderElectionDriver.
16:17:07,860 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:create2 cxid:0x1d zxid:0xa txntype:15 reqpath:n/a
16:17:07,860 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:create2 cxid:0x1d zxid:0xa txntype:15 reqpath:n/a
16:17:07,862 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:checkWatches cxid:0x1e zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,862 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:checkWatches cxid:0x1e zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
16:17:07,863 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:delete cxid:0x1f zxid:0xb txntype:2 reqpath:n/a
16:17:07,863 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:delete cxid:0x1f zxid:0xb txntype:2 reqpath:n/a
16:17:07,863 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getData cxid:0x20 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_ddb7327c-1775-4084-9fbd-40e263758697-latch-0000000000
16:17:07,863 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getData cxid:0x20 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_ddb7327c-1775-4084-9fbd-40e263758697-latch-0000000000
16:17:07,864 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x21 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,864 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x21 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,866 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:delete cxid:0x22 zxid:0xc txntype:2 reqpath:n/a
16:17:07,866 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:delete cxid:0x22 zxid:0xc txntype:2 reqpath:n/a
16:17:07,869 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:create2 cxid:0x23 zxid:0xd txntype:15 reqpath:n/a
16:17:07,869 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:create2 cxid:0x23 zxid:0xd txntype:15 reqpath:n/a
16:17:07,869 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getData cxid:0x24 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_6eb174e9-bb77-4a73-9604-531242c11c0e-latch-0000000001
16:17:07,869 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getData cxid:0x24 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_6eb174e9-bb77-4a73-9604-531242c11c0e-latch-0000000001
16:17:07,871 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x25 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,871 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x25 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,875 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:delete cxid:0x26 zxid:0xe txntype:2 reqpath:n/a
16:17:07,875 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:delete cxid:0x26 zxid:0xe txntype:2 reqpath:n/a
16:17:07,876 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:create2 cxid:0x27 zxid:0xf txntype:15 reqpath:n/a
16:17:07,876 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:create2 cxid:0x27 zxid:0xf txntype:15 reqpath:n/a
16:17:07,876 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getData cxid:0x28 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_8008ceb9-e0b9-459b-8fa5-44428fa31e29-latch-0000000002
16:17:07,876 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getData cxid:0x28 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_8008ceb9-e0b9-459b-8fa5-44428fa31e29-latch-0000000002
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The LeaderLatch implementation works like that (based on the code):&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;LeaderLatch&lt;/tt&gt; is started pointing to a given zNode path (&lt;tt&gt;/flink/default/latch/&lt;/tt&gt; in our case).&lt;/li&gt;
	&lt;li&gt;The instance will get &lt;tt&gt;reset()&lt;/tt&gt; initially setting the leadership for this latch to &lt;tt&gt;false&lt;/tt&gt; and triggering a child creation&lt;/li&gt;
	&lt;li&gt;Child creation is done &quot;withProtection&quot; (i.e. a random String will be prefixed to the child) in mode &lt;tt&gt;EPHEMERAL_SEQUENTIAL&lt;/tt&gt; (i.e. the child will be deleted on connection-loss and a monotonically increasing number is added as a suffix) with a callback that triggers &lt;tt&gt;getChildren&lt;/tt&gt; in case of success and selecting the leader based on the suffix of the child nodes names (lower ID wins). Hence, an order between the children is established based on the ID.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;getChildren&lt;/tt&gt; callback triggers leadership detection in the local &lt;tt&gt;LeaderLatch&lt;/tt&gt; instance.
	&lt;ol&gt;
		&lt;li&gt;For the child with the lowest ID, the leadership is triggered in the callback&lt;/li&gt;
		&lt;li&gt;If the current &lt;tt&gt;LeaderLatch&lt;/tt&gt; doesn&apos;t correspond to the child with the lowest ID, a watcher is set up watching the direct predecessor (based on the ID-based ordering I mentioned before) for deletion. If the deletion happens, the watcher is triggered (only once, i.e. not repeatedly) and reinitiates the leadership detection through &lt;tt&gt;getChildren&lt;/tt&gt; (4.) if the &lt;tt&gt;LeaderLatch&lt;/tt&gt; isn&apos;t closed, yet. This is what we observe in the successful test run with the watcher being triggered.&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;There is another code path if the predecessor node doesn&apos;t exist in &lt;tt&gt;getChildren&lt;/tt&gt; (4.). In that case, an entire &lt;tt&gt;reset()&lt;/tt&gt; (2.) is triggered resulting in the deletion of the current&apos;s &lt;tt&gt;LeaderLatch&lt;/tt&gt;&apos;s zNode and the recreation of the child zNode. It appears that we&apos;re ending up in a this code path for the unsuccessful test run.&lt;/p&gt;</comment>
                            <comment id="17558357" author="mapohl" created="Fri, 24 Jun 2022 07:11:33 +0000"  >&lt;p&gt;The loop consists of the following logs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
16:17:07,864 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x21 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,864 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:getChildren2 cxid:0x21 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch
16:17:07,866 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:delete cxid:0x22 zxid:0xc txntype:2 reqpath:n/a
16:17:07,866 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:delete cxid:0x22 zxid:0xc txntype:2 reqpath:n/a
16:17:07,869 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:create2 cxid:0x23 zxid:0xd txntype:15 reqpath:n/a
16:17:07,869 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - sessionid:0x100cf6d9cf60000 type:create2 cxid:0x23 zxid:0xd txntype:15 reqpath:n/a
16:17:07,869 [        SyncThread:0] DEBUG org.apache.zookeeper.server.FinalRequestProcessor            [] - Processing request:: sessionid:0x100cf6d9cf60000 type:getData cxid:0x24 zxid:0xfffffffffffffffe txntype:unknown reqpath:/flink/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/latch/_c_6eb174e9-bb77-4a73-9604-531242c11c0e-latch-0000000001
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;ol&gt;
	&lt;li&gt;The &lt;tt&gt;reset()&lt;/tt&gt; triggers &lt;a href=&quot;https://github.com/apache/curator/blob/d1a9234ecae47e3704037c839e6041931c24d1f4/curator-recipes/src/main/java/org/apache/curator/framework/recipes/leader/LeaderLatch.java#L629&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;getChildren&lt;/a&gt; through the &lt;a href=&quot;https://github.com/apache/curator/blob/d1a9234ecae47e3704037c839e6041931c24d1f4/curator-recipes/src/main/java/org/apache/curator/framework/recipes/leader/LeaderLatch.java#L525&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;LeaderLatch#getChildren&lt;/a&gt; after a new child is created (I would assume &lt;tt&gt;create2&lt;/tt&gt; entry in the logs before &lt;tt&gt;getChildren&lt;/tt&gt; entry which is not the case; so, I might be wrong in my observation)&lt;/li&gt;
	&lt;li&gt;The callback of &lt;tt&gt;getChildren&lt;/tt&gt; triggers &lt;a href=&quot;https://github.com/apache/curator/blob/d1a9234ecae47e3704037c839e6041931c24d1f4/curator-recipes/src/main/java/org/apache/curator/framework/recipes/leader/LeaderLatch.java#L625&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;checkLeadership&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;In the meantime, the predecessor gets deleted (I&apos;d assume because of the deterministic ordering of the events in ZK). This causes the &lt;a href=&quot;https://github.com/apache/curator/blob/d1a9234ecae47e3704037c839e6041931c24d1f4/curator-recipes/src/main/java/org/apache/curator/framework/recipes/leader/LeaderLatch.java#L607&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;callback in checkLeadership&lt;/a&gt; to fail with a &lt;tt&gt;NONODE&lt;/tt&gt; event and triggering the reset of the current &lt;tt&gt;LeaderLatch&lt;/tt&gt; instance which again triggers the deletion of the current&apos;s &lt;tt&gt;LeaderLatch&lt;/tt&gt;&apos;s child zNode and which is executed on the server later on.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17558358" author="mapohl" created="Fri, 24 Jun 2022 07:12:46 +0000"  >&lt;p&gt;I found &lt;a href=&quot;https://issues.apache.org/jira/browse/CURATOR-3&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;CURATOR-3&lt;/a&gt; that might be of relevance here. In the unsuccessful test run, there is a &lt;tt&gt;checkWatch&lt;/tt&gt; event triggered after the first &lt;tt&gt;LeaderLatch&lt;/tt&gt; is closed. But the ticket refers to a single &lt;tt&gt;LeaderLatch&lt;/tt&gt; not getting the leadership anymore. So, our observed behavior with the loop is different.&lt;/p&gt;</comment>
                            <comment id="17561315" author="mapohl" created="Fri, 1 Jul 2022 06:43:33 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/CURATOR-645&quot; title=&quot;LeaderLatch generates infinite loop with two LeaderLatch instances competing for the leadership&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CURATOR-645&quot;&gt;&lt;del&gt;CURATOR-645&lt;/del&gt;&lt;/a&gt; to cover the issue on the curator side. I&apos;ll leave this issue open because it might mean that curator needs to be updated to cover a fix.&lt;/p&gt;</comment>
                            <comment id="17573498" author="flink-jira-bot" created="Sun, 31 Jul 2022 22:37:28 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issue is assigned but has not received an update in 30 days, so it has been labeled &quot;stale-assigned&quot;.&lt;br/&gt;
If you are still working on the issue, please remove the label and add a comment updating the community on your progress.  If this issue is waiting on feedback, please consider this a reminder to the committer/reviewer. Flink is a very active project, and so we appreciate your patience.&lt;br/&gt;
If you are no longer working on the issue, please unassign yourself so someone else may work on it.&lt;/p&gt;</comment>
                            <comment id="17580152" author="hxbks2ks" created="Tue, 16 Aug 2022 08:27:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=40027&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=24c3384f-1bcb-57b3-224f-51bf973bbee8&amp;amp;l=10214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=40027&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=24c3384f-1bcb-57b3-224f-51bf973bbee8&amp;amp;l=10214&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17580651" author="hxbks2ks" created="Wed, 17 Aug 2022 07:50:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=40084&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=24c3384f-1bcb-57b3-224f-51bf973bbee8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=40084&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=24c3384f-1bcb-57b3-224f-51bf973bbee8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17596940" author="hxb" created="Mon, 29 Aug 2022 02:35:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=40433&amp;amp;view=logs&amp;amp;j=f0ac5c25-1168-55a5-07ff-0e88223afed9&amp;amp;t=50bf7a25-bdc4-5e56-5478-c7b4511dde53&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=40433&amp;amp;view=logs&amp;amp;j=f0ac5c25-1168-55a5-07ff-0e88223afed9&amp;amp;t=50bf7a25-bdc4-5e56-5478-c7b4511dde53&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17597279" author="mapohl" created="Mon, 29 Aug 2022 16:21:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CURATOR-645&quot; title=&quot;LeaderLatch generates infinite loop with two LeaderLatch instances competing for the leadership&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CURATOR-645&quot;&gt;&lt;del&gt;CURATOR-645&lt;/del&gt;&lt;/a&gt; is probably caused by some issue where we revoke the leadership in the test &quot;too fast&quot; which makes the curator code end up in a different code path that contains a bug. There&apos;s already a fix for that in &lt;a href=&quot;https://github.com/apache/curator/pull/430&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a PR in the CURATOR project&lt;/a&gt;. But I&apos;m not sure how fast we&apos;re going to get this merged.&lt;/p&gt;

&lt;p&gt;I started experimenting with some temporary (dirty) workaround for our test to make it less likely to fail. I&apos;m suspecting that we only need to &quot;add some workload on the leader&apos;s side&quot; to throttle the leadership revocation. Still, this issue can happen in production as well. There&apos;s a race condition between the leader losing its leadership and candidates going through an re-evaluation of the leadership on their end (&lt;tt&gt;LeaderLatch#getChildren&lt;/tt&gt; is called before the leader&apos;s znode is deleted but &lt;tt&gt;LeaderLatch#checkLeadership&lt;/tt&gt; is called after the leader&apos;s znode is deleted). We can only overcome this by fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/CURATOR-645&quot; title=&quot;LeaderLatch generates infinite loop with two LeaderLatch instances competing for the leadership&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CURATOR-645&quot;&gt;&lt;del&gt;CURATOR-645&lt;/del&gt;&lt;/a&gt; and upgrading to the corresponding Apache Curator version.&lt;/p&gt;

&lt;p&gt;I would still leave the Jira issue as &lt;tt&gt;Major&lt;/tt&gt; because of nobody having it reported by now. The test case made the issue only visible because the race condition because more likely in the test with no actual workload being processed by the leader process.&lt;/p&gt;</comment>
                            <comment id="17598256" author="mapohl" created="Wed, 31 Aug 2022 08:31:02 +0000"  >&lt;p&gt;Ok, I tried to reproduce the issue in &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=40525&amp;amp;view=results&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build 20220830.14&lt;/a&gt; (I let each of the test jobs run the unit test repeatedly except for the `core` stage due to some bug in the if statement :facepalm&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. I attached the results of the run for reproducability reasons to this issue (see  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13048798/13048798_FLINK-28078-build-40525-20220830.14.tar.gz&quot; title=&quot;FLINK-28078-build-40525-20220830.14.tar.gz attached to FLINK-28078&quot;&gt;FLINK-28078-build-40525-20220830.14.tar.gz&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;).&lt;/p&gt;

&lt;p&gt;In total there were 6178 test execution over all participating modules (there were failed test runs due to the jobs being cancelled after ~4hours).&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; f in $(ls *zip); &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; job_name=&lt;span class=&quot;code-quote&quot;&gt;&quot;${f%&quot;&lt;/span&gt;.zip&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;; unzip -p $f ${job_name}/mvn-1.log | grep -c &lt;span class=&quot;code-quote&quot;&gt;&quot;Test org.apache.flink.runtime.leaderelection.ZooKeeperMultipleComponentLeaderElectionDriverTest.testLeaderElectionWithMultipleDrivers successfully run.&quot;&lt;/span&gt;; done  | paste -sd+ | bc
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I couldn&apos;t find any evidence that any of the test runs ran into the issue by checking the size of the &lt;tt&gt;zookeeper-server-1.log&lt;/tt&gt; for each of the jobs (we should have observed a peak in file size due to the infinite loop on the ZK side). All logs have similar sizes:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; f in $(ls *zip); &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; job_name=&lt;span class=&quot;code-quote&quot;&gt;&quot;${f%&quot;&lt;/span&gt;.zip&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;; echo $job_name; unzip -p $f ${job_name}/zookeeper-server-1.log | wc --bytes | numfmt --to iec --format &lt;span class=&quot;code-quote&quot;&gt;&quot;%8.4f&quot;&lt;/span&gt;; done
logs-ci-test_ci_connect_1-1661858590
41,0784M
logs-ci-test_ci_connect_2-1661858534
43,2716M
logs-ci-test_ci_core-1661858500
caution: filename not matched:  logs-ci-test_ci_core-1661858500/zookeeper-server-1.log
  0,0000
logs-ci-test_ci_finegrained_resource_management-1661858511
42,9698M
logs-ci-test_ci_misc-1661858514
39,8520M
logs-ci-test_ci_python-1661858538
41,2648M
logs-ci-test_ci_table-1661858510
43,8197M
logs-ci-test_ci_tests-1661858630
40,8045M
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I will proceed with implementing the (dirty temporary) workaround in the PR. Let&apos;s see whether that reduces the likelihood for this test failing again.&lt;/p&gt;</comment>
                            <comment id="17598944" author="mapohl" created="Thu, 1 Sep 2022 12:41:15 +0000"  >&lt;p&gt;master: 655184cdb086ac2adec3e743701868f1a55b6129&lt;br/&gt;
1.15: ed8700d03cccc47bfa39da5e1e6611eb9be7d5a1&lt;/p&gt;</comment>
                            <comment id="17598994" author="mapohl" created="Thu, 1 Sep 2022 14:25:12 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-29173&quot; title=&quot;Upgrade curator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-29173&quot;&gt;&lt;del&gt;FLINK-29173&lt;/del&gt;&lt;/a&gt; as a follow-up to revert the changes from this issue and upgrading curator.&lt;/p&gt;</comment>
                            <comment id="17696985" author="mapohl" created="Mon, 6 Mar 2023 14:44:54 +0000"  >&lt;p&gt;Looks like this issue can still appear:&lt;br/&gt;
1.16: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46843&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=2ef0effc-1da1-50e5-c2bd-aab434b1c5b7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=46843&amp;amp;view=logs&amp;amp;j=a57e0635-3fad-5b08-57c7-a4142d7d6fa9&amp;amp;t=2ef0effc-1da1-50e5-c2bd-aab434b1c5b7&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17696986" author="mapohl" created="Mon, 6 Mar 2023 14:46:48 +0000"  >&lt;p&gt;Another workaround to cover the issue which is closer to reality is that we use separate client for each LeaderElectionService. This will avoid using the same event queue and breaks the strict orderness of events between different LeaderElectionService instances.&lt;/p&gt;</comment>
                            <comment id="17698317" author="dannycranmer" created="Thu, 9 Mar 2023 11:13:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; since this is already merged into a fix version I suggest we create a follow up Jira and link them. Having a single Jira with fixVersion 1.5.3 and 1.15.5 does not make sense.&lt;/p&gt;</comment>
                            <comment id="17698340" author="mapohl" created="Thu, 9 Mar 2023 12:08:12 +0000"  >&lt;p&gt;Fair point. Thanks for bringing that up, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dannycranmer&quot; class=&quot;user-hover&quot; rel=&quot;dannycranmer&quot;&gt;dannycranmer&lt;/a&gt;. I created a follow-up &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-31379&quot; title=&quot;ZooKeeperMultipleComponentLeaderElectionDriverTest.testLeaderElectionWithMultipleDrivers runs into timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-31379&quot;&gt;&lt;del&gt;FLINK-31379&lt;/del&gt;&lt;/a&gt; to cover the issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13448077">FLINK-27880</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13479675">FLINK-29173</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13515197">FLINK-30484</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13527803">FLINK-31379</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                            <outwardlinks description="Testing discovered">
                                        <issuelink>
            <issuekey id="13469473">CURATOR-645</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13048798" name="FLINK-28078-build-40525-20220830.14.tar.gz" size="35441219" author="mapohl" created="Wed, 31 Aug 2022 08:32:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1397k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>