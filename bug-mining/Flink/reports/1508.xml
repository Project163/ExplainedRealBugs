<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:27:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5817] Fix test concurrent execution failure by test dir conflicts.</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5817</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently when different users build flink on the same machine, failure may happen because some test utilities create test file using the fixed name, which will cause file access failing when different user processing the same file at the same time.&lt;br/&gt;
We have found errors from AbstractTestBase, IOManagerTest, FileCacheTest.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13043562">FLINK-5817</key>
            <summary>Fix test concurrent execution failure by test dir conflicts.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wenlong.lwl">Wenlong Lyu</assignee>
                                    <reporter username="wenlong.lwl">Wenlong Lyu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Feb 2017 09:10:00 +0000</created>
                <updated>Wed, 2 Oct 2019 17:42:35 +0000</updated>
                            <resolved>Mon, 20 Feb 2017 11:07:44 +0000</resolved>
                                                    <fixVersion>1.2.1</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15869687" author="stephanewen" created="Thu, 16 Feb 2017 10:25:47 +0000"  >&lt;p&gt;I would encourage you to use the JUnit tool to create random temporary folders:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Rule
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; TemporaryFolder tmp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TemporaryFolder();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Have a look at the &lt;tt&gt;org.apache.flink.util.FileUtilsTest&lt;/tt&gt; for an example.&lt;/p&gt;</comment>
                            <comment id="15869704" author="wenlong.lwl" created="Thu, 16 Feb 2017 10:39:34 +0000"  >&lt;p&gt;ok, It seems good, I will try it instead of adding a random suffix.&lt;/p&gt;</comment>
                            <comment id="15869939" author="stephanewen" created="Thu, 16 Feb 2017 13:44:36 +0000"  >&lt;p&gt;There is also a pull request that tries to change the tmp directory for tests: &lt;a href=&quot;https://github.com/apache/flink/pull/3190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3190&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15871082" author="shijinkui" created="Fri, 17 Feb 2017 02:53:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wenlong.lwl&quot; class=&quot;user-hover&quot; rel=&quot;wenlong.lwl&quot;&gt;wenlong.lwl&lt;/a&gt;, there no overlapping between &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5546&quot; title=&quot;java.io.tmpdir setted as project build directory in surefire plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5546&quot;&gt;&lt;del&gt;FLINK-5546&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5817&quot; title=&quot;Fix test concurrent execution failure by test dir conflicts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5817&quot;&gt;&lt;del&gt;FLINK-5817&lt;/del&gt;&lt;/a&gt;. In &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5546&quot; title=&quot;java.io.tmpdir setted as project build directory in surefire plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5546&quot;&gt;&lt;del&gt;FLINK-5546&lt;/del&gt;&lt;/a&gt;, I&apos;m focus on changing the default java.io.tmp system property.&lt;br/&gt;
I think this issue can find out all the temporary directory creating by new File, and replace all with TemporaryFolder following Stephan&apos;s suggestion.&lt;br/&gt;
You can find out all the &lt;b&gt;Test.&lt;/b&gt; files and search the keyword &quot;new File(&quot;, then you&apos;ll find there so much bad smell need to be re-corrected.&lt;/p&gt;</comment>
                            <comment id="15871461" author="wenlong.lwl" created="Fri, 17 Feb 2017 08:55:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shijinkui&quot; class=&quot;user-hover&quot; rel=&quot;shijinkui&quot;&gt;shijinkui&lt;/a&gt; I think the reason why you want to change the java.io.tmp property is to solve the ut problem. But I think the best way is to avoid UTs depends on the system property, which will make building more clear. And when we make it, where is no need to set java.io.tmp by pom any more.&lt;/p&gt;</comment>
                            <comment id="15871505" author="githubbot" created="Fri, 17 Feb 2017 09:20:27 +0000"  >&lt;p&gt;GitHub user wenlong88 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3341&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3341&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5817&quot; title=&quot;Fix test concurrent execution failure by test dir conflicts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5817&quot;&gt;&lt;del&gt;FLINK-5817&lt;/del&gt;&lt;/a&gt;Fix test concurrent execution failure by test dir conflicts.&lt;/p&gt;

&lt;p&gt;    use TemporaryFold to create temp files and folds for UT&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/wenlong88/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/wenlong88/flink&lt;/a&gt; jira-5817-2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3341.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3341.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3341&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="15871867" author="githubbot" created="Fri, 17 Feb 2017 13:40:48 +0000"  >&lt;p&gt;Github user NicoK commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3341&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3341&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks, this looks like a really nice addition and simplifies the code a lot.&lt;/p&gt;</comment>
                            <comment id="15872180" author="githubbot" created="Fri, 17 Feb 2017 17:39:53 +0000"  >&lt;p&gt;Github user StephanEwen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3341&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3341&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good change, thank you. merging this...&lt;/p&gt;</comment>
                            <comment id="15873908" author="githubbot" created="Mon, 20 Feb 2017 00:56:26 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3341&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3341&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15874372" author="stephanewen" created="Mon, 20 Feb 2017 11:07:44 +0000"  >&lt;p&gt;Fixed in&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;1.2.1 via d1b148cf30ebd10815912bca2f2b94b2b56a2388 and fc5a20a81f71b81850292bba2643ef37acfb6c2f&lt;/li&gt;
	&lt;li&gt;1.3.0 via 709fa1d95b7dbbcfdd1124de7d6e073834ca75cf and 1456f0a7084f45056ea9b09e3f85b1aae6b11c6e&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a5yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>