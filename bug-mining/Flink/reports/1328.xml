<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:25:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5197] Late JobStatusChanged messages can interfere with running jobs</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5197</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When the &lt;tt&gt;JobManager&lt;/tt&gt; receives a &lt;tt&gt;JobStatusChanged&lt;/tt&gt; message, it will look up the &lt;tt&gt;ExecutionGraph&lt;/tt&gt; for the given &lt;tt&gt;JobID&lt;/tt&gt;. If there is no &lt;tt&gt;ExecutionGraph&lt;/tt&gt;, then a &lt;tt&gt;RemoveJob&lt;/tt&gt; message is sent to itself. In the general case, this is not problematic, because the &lt;tt&gt;RemoveJob&lt;/tt&gt; message won&apos;t do anything if there is no &lt;tt&gt;ExecutionGraph&lt;/tt&gt;. However, since this is an asynchronous call, it can happen that the corresponding job of the &lt;tt&gt;JobID&lt;/tt&gt; is recovered before receiving the &lt;tt&gt;RemoveJob&lt;/tt&gt; message. In this case, the newly recovered job would be removed.&lt;/p&gt;

&lt;p&gt;I propose to change the behaviour such that a &lt;tt&gt;JobStatusChanged&lt;/tt&gt; for a non-existing &lt;tt&gt;ExecutionGraph&lt;/tt&gt; will be simply ignored.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13024095">FLINK-5197</key>
            <summary>Late JobStatusChanged messages can interfere with running jobs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Nov 2016 14:35:31 +0000</created>
                <updated>Thu, 28 Feb 2019 14:01:48 +0000</updated>
                            <resolved>Wed, 30 Nov 2016 12:47:50 +0000</resolved>
                                    <version>1.1.3</version>
                    <version>1.2.0</version>
                                    <fixVersion>1.1.4</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15705538" author="githubbot" created="Tue, 29 Nov 2016 15:06:40 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2895&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5197&quot; title=&quot;Late JobStatusChanged messages can interfere with running jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5197&quot;&gt;&lt;del&gt;FLINK-5197&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jm&amp;#93;&lt;/span&gt; Ignore outdated JobStatusChanged messages&lt;/p&gt;

&lt;p&gt;    Outdated JobStatusChanged messages no longer trigger a RemoveJob message but are&lt;br/&gt;
    logged and ignored. This has the advantage, that an outdated JobStatusChanged message&lt;br/&gt;
    cannot interfere with a recovered job which can have the same job id.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixJobStatusChangedMessage&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2895.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2895.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2895&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 490cef46380178a2296c2f743b9eb91154967463&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-29T15:02:29Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5197&quot; title=&quot;Late JobStatusChanged messages can interfere with running jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5197&quot;&gt;&lt;del&gt;FLINK-5197&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jm&amp;#93;&lt;/span&gt; Ignore outdated JobStatusChanged messages&lt;/p&gt;

&lt;p&gt;    Outdated JobStatusChanged messages no longer trigger a RemoveJob message but are&lt;br/&gt;
    logged and ignored. This has the advantage, that an outdated JobStatusChanged message&lt;br/&gt;
    cannot interfere with a recovered job which can have the same job id.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15705540" author="githubbot" created="Tue, 29 Nov 2016 15:07:39 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2896&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2896&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5197&quot; title=&quot;Late JobStatusChanged messages can interfere with running jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5197&quot;&gt;&lt;del&gt;FLINK-5197&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jm&amp;#93;&lt;/span&gt; Ignore outdated JobStatusChanged messages&lt;/p&gt;

&lt;p&gt;    Backport of #2895 for release 1.1 branch.&lt;/p&gt;

&lt;p&gt;    Outdated JobStatusChanged messages no longer trigger a RemoveJob message but are&lt;br/&gt;
    logged and ignored. This has the advantage, that an outdated JobStatusChanged message&lt;br/&gt;
    cannot interfere with a recovered job which can have the same job id.&lt;/p&gt;

&lt;p&gt;    Review @uce.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; backportFixJobStatusChangedMessage&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2896.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2896.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2896&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4a2f948224fe628c721adc4fae24199b0296c80f&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-29T15:02:29Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5197&quot; title=&quot;Late JobStatusChanged messages can interfere with running jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5197&quot;&gt;&lt;del&gt;FLINK-5197&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jm&amp;#93;&lt;/span&gt; Ignore outdated JobStatusChanged messages&lt;/p&gt;

&lt;p&gt;    Outdated JobStatusChanged messages no longer trigger a RemoveJob message but are&lt;br/&gt;
    logged and ignored. This has the advantage, that an outdated JobStatusChanged message&lt;br/&gt;
    cannot interfere with a recovered job which can have the same job id.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15705885" author="githubbot" created="Tue, 29 Nov 2016 17:12:25 +0000"  >&lt;p&gt;Github user uce commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2896&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2896&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good catch! The `RemoveJob` cannot succeed since is also checking the `currentJobs` that are checked for `JobStatusChanged` already. So in the end, the only case where this actually triggers removal is when it interfers with a recovered job as you say. &#128552; &lt;/p&gt;

&lt;p&gt;    +1 to merge for 1.1 and #2895 for 1.2.&lt;/p&gt;</comment>
                            <comment id="15708485" author="githubbot" created="Wed, 30 Nov 2016 12:40:01 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2896&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2896&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @uce. Failing test cases are unrelated. Merging this PR.&lt;/p&gt;</comment>
                            <comment id="15708494" author="githubbot" created="Wed, 30 Nov 2016 12:45:00 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2895&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merging this PR. @uce reviewed the backport. &lt;/p&gt;</comment>
                            <comment id="15708498" author="till.rohrmann" created="Wed, 30 Nov 2016 12:47:50 +0000"  >&lt;p&gt;1.2.0 fixed via ae0975c16b997fe792790216820a559d01a01894&lt;br/&gt;
1.1.4 fixed via 569a9666fca9d9113d9fc7f0382faf986afb036f&lt;/p&gt;</comment>
                            <comment id="15708500" author="githubbot" created="Wed, 30 Nov 2016 12:48:13 +0000"  >&lt;p&gt;Github user tillrohrmann closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2896&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2896&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15708502" author="githubbot" created="Wed, 30 Nov 2016 12:48:47 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2895&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Forgot to include the closing tag in the commit.&lt;/p&gt;</comment>
                            <comment id="15708503" author="githubbot" created="Wed, 30 Nov 2016 12:48:49 +0000"  >&lt;p&gt;Github user tillrohrmann closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2895&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36wmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>