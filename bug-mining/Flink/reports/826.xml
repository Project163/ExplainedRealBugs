<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:22:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3296] DataStream.write*() methods are not flushing properly</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3296</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The DataStream.write() methods rely on the &lt;tt&gt;FileSinkFunctionByMillis&lt;/tt&gt; class, which has a logic for flushing records, even though the underlying stream is never flushed. This is misleading for users as files are not written as they would expect it.&lt;/p&gt;

&lt;p&gt;The code was initial written with FileOutputFormats in mind, but the types were not set correctly. This PR opened the write() method to any output format: &lt;a href=&quot;https://github.com/apache/flink/pull/706/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/706/files&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12934773">FLINK-3296</key>
            <summary>DataStream.write*() methods are not flushing properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rmetzger">Robert Metzger</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jan 2016 11:22:41 +0000</created>
                <updated>Fri, 12 Jan 2018 02:26:27 +0000</updated>
                            <resolved>Tue, 16 Feb 2016 14:53:43 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                                    <component>Connectors / Common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15124194" author="githubbot" created="Fri, 29 Jan 2016 20:55:18 +0000"  >&lt;p&gt;GitHub user rmetzger opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3296&quot; title=&quot;DataStream.write*() methods are not flushing properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3296&quot;&gt;&lt;del&gt;FLINK-3296&lt;/del&gt;&lt;/a&gt; Remove &apos;flushing&apos; behavior of the OutputFormat in DataStream API&lt;/p&gt;

&lt;p&gt;    I removed the `FileSinkFunctionByMillis` and removed all the `millis` arguments on the writing functions.&lt;/p&gt;

&lt;p&gt;    The whole &quot;buffering&quot; and &quot;flushing&quot; functionality was broken: Elements were kept in an ArrayList and send to the OutputFormat on &quot;flush()&quot;. However, the flush was not really called periodically. It was only checked when new records arrived. So when a stream is not having elements for a certain time, the last few elements would just stay in the list until new elements arrive again.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rmetzger/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rmetzger/flink&lt;/a&gt; flink3296&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1563&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3275adaaf27f6e1ec74ffc2a48169239da0e1f5b&lt;br/&gt;
Author: Robert Metzger &amp;lt;rmetzger@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-01-28T13:56:29Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3296&quot; title=&quot;DataStream.write*() methods are not flushing properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3296&quot;&gt;&lt;del&gt;FLINK-3296&lt;/del&gt;&lt;/a&gt; Remove &apos;flushing&apos; behavior of the OutputFormat support of the DataStream API&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15124777" author="githubbot" created="Sat, 30 Jan 2016 06:42:18 +0000"  >&lt;p&gt;Github user mbalassi commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563#issuecomment-177088061&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563#issuecomment-177088061&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    With the `RollingHDFSSink` this functionality is not needed any more and as you suggested apparently was a misleading implmentation anyway. I like your not to the docs. :+1: &lt;br/&gt;
    Could you add `&lt;span class=&quot;error&quot;&gt;&amp;#91;api-breaking&amp;#93;&lt;/span&gt;` to the commit msg though please, when merging?&lt;/p&gt;</comment>
                            <comment id="15126351" author="githubbot" created="Mon, 1 Feb 2016 15:04:47 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563#discussion_r51428065&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563#discussion_r51428065&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: docs/apis/streaming/index.md &amp;#8212;&lt;br/&gt;
    @@ -1768,6 +1768,11 @@ greater than 1, the output will also be prepended with the identifier of the tas&lt;br/&gt;
     &amp;lt;/div&amp;gt;&lt;br/&gt;
     &amp;lt;/div&amp;gt;&lt;/p&gt;

&lt;p&gt;    +Note that the `write*()` methods on `DataStream` are mainly intended for debugging purposes.&lt;br/&gt;
    +They are not participating in Flink&apos;s checkpointing (no fault tolerance guarantees). The &lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    May be worth adding that this means usually &quot;at-least-once&quot; , but may also mean data loss in cases where the output formats buffer data and do not immediately persist it.&lt;/p&gt;</comment>
                            <comment id="15126388" author="githubbot" created="Mon, 1 Feb 2016 15:28:57 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563#issuecomment-178020653&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563#issuecomment-178020653&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Code looks good. I would like to update the docs to include a bit more info (like in the inline comment) and at least refer to the `addSink(...)` method, for fault tolerant sinks.&lt;/p&gt;</comment>
                            <comment id="15143176" author="githubbot" created="Thu, 11 Feb 2016 18:10:01 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563#issuecomment-182983683&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563#issuecomment-182983683&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Changes look good to me&lt;/p&gt;</comment>
                            <comment id="15144642" author="githubbot" created="Fri, 12 Feb 2016 14:44:03 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563#issuecomment-183356403&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563#issuecomment-183356403&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thank you for the review. I&apos;ve addressed the comments and rebased the change.&lt;/p&gt;

&lt;p&gt;    Once travis has passed, I&apos;ll merge it!&lt;/p&gt;</comment>
                            <comment id="15144868" author="githubbot" created="Fri, 12 Feb 2016 17:06:40 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563#issuecomment-183414977&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563#issuecomment-183414977&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think the `writeOutputFormat` method name could be misleading. To me it implies writing the `OutputFormat` not writing something by using the `OutputFormat`.&lt;/p&gt;</comment>
                            <comment id="15148479" author="githubbot" created="Tue, 16 Feb 2016 11:30:14 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563#issuecomment-184642511&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563#issuecomment-184642511&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I renamed the method to `writeUsingOutputFormat` and rebased to current master.&lt;/p&gt;</comment>
                            <comment id="15148652" author="githubbot" created="Tue, 16 Feb 2016 14:24:45 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563#issuecomment-184700077&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563#issuecomment-184700077&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ll merge the PR.&lt;/p&gt;</comment>
                            <comment id="15148706" author="rmetzger" created="Tue, 16 Feb 2016 14:53:43 +0000"  >&lt;p&gt;Resolved in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/2714aaf3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/2714aaf3&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15148707" author="githubbot" created="Tue, 16 Feb 2016 14:53:49 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16323442" author="githubbot" created="Fri, 12 Jan 2018 02:26:27 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1563&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1563&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/15015307/badge)](https://coveralls.io/builds/15015307&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://coveralls.io/builds/15015307/badge)](https://coveralls.io/builds/15015307&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Changes Unknown when pulling *&lt;b&gt;df49d5bb8ba778cdd17b94318c4bf48c6d1747ad on rmetzger:flink3296&lt;/b&gt;* into ** on apache:master**.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s37z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>