<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:25:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5040] Set correct input channel types with eager scheduling</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5040</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When we do eager deployment all intermediate stream/partition locations are already known when scheduling an intermediate stream/partition consumer. Nonetheless we saw tasks with &quot;unknown input channels&quot; that were updated lazily during runtime. This was caused by a wrong producer execution state check requiring the producers to be in RUNNING or DEPLOYING state when creating consumer input channels.&lt;/p&gt;

&lt;p&gt;(We had a bogus fix for this in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3232&quot; title=&quot;Add option to eagerly deploy channels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3232&quot;&gt;&lt;del&gt;FLINK-3232&lt;/del&gt;&lt;/a&gt;. With that &quot;fix&quot; we actually did not fix anything correctly and instead doubled the number of schedule or update consumer messages we sent.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019587">FLINK-5040</key>
            <summary>Set correct input channel types with eager scheduling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uce">Ufuk Celebi</assignee>
                                    <reporter username="uce">Ufuk Celebi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Nov 2016 17:24:21 +0000</created>
                <updated>Thu, 28 Feb 2019 14:01:55 +0000</updated>
                            <resolved>Fri, 11 Nov 2016 09:00:05 +0000</resolved>
                                                    <fixVersion>1.1.4</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15654482" author="githubbot" created="Thu, 10 Nov 2016 16:33:40 +0000"  >&lt;p&gt;GitHub user uce opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2783&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2783&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5040&quot; title=&quot;Set correct input channel types with eager scheduling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5040&quot;&gt;&lt;del&gt;FLINK-5040&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jobmanager&amp;#93;&lt;/span&gt; Set correct input channel types with eager scheduling&lt;/p&gt;

&lt;p&gt;    When we do eager deployment all intermediate stream/partition locations are already known when scheduling an intermediate stream/partition consumer. Nonetheless we saw tasks with &quot;unknown input channels&quot; that were updated lazily during runtime. This was caused by a wrong producer execution state check requiring the producers to be in RUNNING or DEPLOYING state when creating consumer input channels. This is changed in the 2nd commit.&lt;/p&gt;

&lt;p&gt;    The 1st commit revert a bogus fix as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3232&quot; title=&quot;Add option to eagerly deploy channels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3232&quot;&gt;&lt;del&gt;FLINK-3232&lt;/del&gt;&lt;/a&gt;. With that &quot;fix&quot; we actually did not fix anything correctly and instead doubled the number of schedule or update consumer messages we sent.&lt;/p&gt;

&lt;p&gt;    Furthermore (3rd commit) we change the initial and max partition request back off to 100ms and 10secs respectively. Those numbers were hard coded before. As a safety net for very slow deployments, the values can be changed via the config. No user should need to change this config value in practice.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/uce/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/uce/flink&lt;/a&gt; eager_deployment&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2783.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2783.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2783&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit bbbe8e9c19eb528e3e5d8e046e79298a300af556&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-09T15:07:22Z&lt;/p&gt;

&lt;p&gt;    Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3232&quot; title=&quot;Add option to eagerly deploy channels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3232&quot;&gt;&lt;del&gt;FLINK-3232&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Add option to eagerly deploy channels&quot;&lt;/p&gt;

&lt;p&gt;    The reverted commit did not really fix anything, but hid the problem by&lt;br/&gt;
    brute force, sending many more schedule or update consumers messages.&lt;/p&gt;

&lt;p&gt;commit 70088f2acade2f20b8b75e18955f91793f7614c3&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-09T17:25:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5040&quot; title=&quot;Set correct input channel types with eager scheduling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5040&quot;&gt;&lt;del&gt;FLINK-5040&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jobmanager&amp;#93;&lt;/span&gt; Set correct input channel types with eager scheduling&lt;/p&gt;

&lt;p&gt;commit 9d186d9e42007f1144e64c802466befb858b7363&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-10T10:15:47Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5040&quot; title=&quot;Set correct input channel types with eager scheduling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5040&quot;&gt;&lt;del&gt;FLINK-5040&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;taskmanager&amp;#93;&lt;/span&gt; Adjust partition request backoffs&lt;/p&gt;

&lt;p&gt;    The back offs were hard coded before, which would have made it&lt;br/&gt;
    impossible to react to any potential problems with them.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15654488" author="githubbot" created="Thu, 10 Nov 2016 16:36:01 +0000"  >&lt;p&gt;GitHub user uce opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2784&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2784&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;backport&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5040&quot; title=&quot;Set correct input channel types with eager scheduling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5040&quot;&gt;&lt;del&gt;FLINK-5040&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jobmanager&amp;#93;&lt;/span&gt; Set correct input channel types with eager scheduling&lt;/p&gt;

&lt;p&gt;    Backport of #2783 with no major differences.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/uce/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/uce/flink&lt;/a&gt; eager_deployment-backport_1.1&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2784.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2784.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2784&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2790511f6cf261537da6b3f909add29092c613d0&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-10T13:01:22Z&lt;/p&gt;

&lt;p&gt;    Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3232&quot; title=&quot;Add option to eagerly deploy channels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3232&quot;&gt;&lt;del&gt;FLINK-3232&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Add option to eagerly deploy channels&quot;&lt;/p&gt;

&lt;p&gt;    The reverted commit did not really fix anything, but hid the problem by&lt;br/&gt;
    brute force, sending many more schedule or update consumers messages.&lt;/p&gt;

&lt;p&gt;commit 10ffceea52b168a4819b41efb85a04a98ede0078&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-10T16:25:06Z&lt;/p&gt;

&lt;p&gt;    Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3232&quot; title=&quot;Add option to eagerly deploy channels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3232&quot;&gt;&lt;del&gt;FLINK-3232&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;runtime&amp;#93;&lt;/span&gt; Add option to eagerly deploy channels&quot;&lt;/p&gt;

&lt;p&gt;    The reverted commit did not really fix anything, but hid the problem by&lt;br/&gt;
    brute force, sending many more schedule or update consumers messages.&lt;/p&gt;

&lt;p&gt;commit 097c4eae2931dc8c11d8fda28a36b715f5f376a6&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-09T17:25:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5040&quot; title=&quot;Set correct input channel types with eager scheduling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5040&quot;&gt;&lt;del&gt;FLINK-5040&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jobmanager&amp;#93;&lt;/span&gt; Set correct input channel types with eager scheduling&lt;/p&gt;

&lt;p&gt;commit b549789956d4d1e594f2bfb642137e1f3f074b9c&lt;br/&gt;
Author: Ufuk Celebi &amp;lt;uce@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-10T10:15:47Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5040&quot; title=&quot;Set correct input channel types with eager scheduling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5040&quot;&gt;&lt;del&gt;FLINK-5040&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;taskmanager&amp;#93;&lt;/span&gt; Adjust partition request backoffs&lt;/p&gt;

&lt;p&gt;    The back offs were hard coded before, which would have made it&lt;br/&gt;
    impossible to react to any potential problems with them.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15656533" author="githubbot" created="Fri, 11 Nov 2016 08:46:14 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2784&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2784&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15656557" author="githubbot" created="Fri, 11 Nov 2016 08:58:34 +0000"  >&lt;p&gt;Github user uce closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2783&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2783&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15656562" author="uce" created="Fri, 11 Nov 2016 09:00:05 +0000"  >&lt;p&gt;Fixed in &lt;tt&gt;0d2e8b2, 2742d5c, 5d5637b&lt;/tt&gt; (master) and &lt;tt&gt;b5a4cb6, 55c506f, 0bd8e02&lt;/tt&gt; (release-1.1).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i364t3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>