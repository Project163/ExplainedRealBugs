<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:34:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9622] DistributedCacheDfsTest failed on travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9622</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;DistributedCacheDfsTest#testDistributeFileViaDFS() failed flakey on travis.&lt;/p&gt;

&lt;p&gt;instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/394399700/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/394399700/log.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13167090">FLINK-9622</key>
            <summary>DistributedCacheDfsTest failed on travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="sihuazhou">Sihua Zhou</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 20 Jun 2018 07:18:02 +0000</created>
                <updated>Tue, 1 Oct 2019 15:38:51 +0000</updated>
                            <resolved>Wed, 4 Jul 2018 11:24:02 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16517874" author="sihuazhou" created="Wed, 20 Jun 2018 07:19:46 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16517878" author="sihuazhou" created="Wed, 20 Jun 2018 07:23:00 +0000"  >&lt;p&gt;one more instances: &lt;a href=&quot;https://api.travis-ci.org/v3/job/394119180/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/394119180/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16530030" author="till.rohrmann" created="Mon, 2 Jul 2018 14:50:25 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://api.travis-ci.org/v3/job/398921171/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/398921171/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16530097" author="till.rohrmann" created="Mon, 2 Jul 2018 15:46:03 +0000"  >&lt;p&gt;The problem seems to be that we don&apos;t create the parent directory of the target file when copying the distributed cache file from the remote to the local file system.&lt;/p&gt;</comment>
                            <comment id="16530928" author="till.rohrmann" created="Tue, 3 Jul 2018 07:09:01 +0000"  >&lt;p&gt;Well the actual problem is that there are two concurrent directory creation operations happening and &lt;tt&gt;LocalFileSystem#create&lt;/tt&gt; fails if it cannot create the directory.&lt;/p&gt;</comment>
                            <comment id="16530931" author="till.rohrmann" created="Tue, 3 Jul 2018 07:15:58 +0000"  >&lt;p&gt;The problem there seems to be that &lt;tt&gt;LocalFileSystem#mkdirsInternal&lt;/tt&gt; fails if there is a concurrent directory make operation happening &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-core/src/main/java/org/apache/flink/core/fs/local/LocalFileSystem.java#L257&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/blob/master/flink-core/src/main/java/org/apache/flink/core/fs/local/LocalFileSystem.java#L257&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="16531240" author="githubbot" created="Tue, 3 Jul 2018 11:45:48 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6244&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6244&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9622&quot; title=&quot;DistributedCacheDfsTest failed on travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9622&quot;&gt;&lt;del&gt;FLINK-9622&lt;/del&gt;&lt;/a&gt; Do not swallow exceptions in FileUtils#copy&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    This commit lets `IOExceptions` originating from `FileUtil#copy` bubble up instead of swallowing them.&lt;/p&gt;

&lt;p&gt;    This PR is based on #6243.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Trivial fix&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; cleanUpDistributedCacheDfsTest&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6244.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6244.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #6244&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1ba98b2dbd2f91c815761d3b2e382a78230d021e&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@...&amp;gt;&lt;br/&gt;
Date:   2018-07-02T15:44:52Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9622&quot; title=&quot;DistributedCacheDfsTest failed on travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9622&quot;&gt;&lt;del&gt;FLINK-9622&lt;/del&gt;&lt;/a&gt; Do not swallow exceptions in FileUtils#copy&lt;/p&gt;

&lt;p&gt;commit 82cd571b12f15fc99293173502d21370802aea55&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@...&amp;gt;&lt;br/&gt;
Date:   2018-07-03T11:36:33Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9707&quot; title=&quot;LocalFileSystem does not support concurrent directory creations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9707&quot;&gt;&lt;del&gt;FLINK-9707&lt;/del&gt;&lt;/a&gt; Support concurrent directory creations in LocalFileSystem&lt;/p&gt;

&lt;p&gt;    Support concurrent directory creations by accepting directories which have been&lt;br/&gt;
    created by a different thread/process in LocalFileSystem#mkdirs.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16532526" author="githubbot" created="Wed, 4 Jul 2018 09:31:41 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6244#discussion_r200065001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6244#discussion_r200065001&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-fs-tests/src/test/java/org/apache/flink/hdfstests/DistributedCacheDfsTest.java &amp;#8212;&lt;br/&gt;
    @@ -128,7 +130,7 @@ public void testDistributeFileViaDFS() throws Exception {&lt;/p&gt;

&lt;p&gt;     		env.fromElements(1)&lt;br/&gt;
     			.map(new TestMapFunction())&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;.print();&lt;br/&gt;
    +			.addSink(new DiscardingSink&amp;lt;&amp;gt;());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    probably cleaner to address this issue in a separate commit as the relation isn&apos;t obvious.&lt;/p&gt;</comment>
                            <comment id="16532560" author="githubbot" created="Wed, 4 Jul 2018 09:59:04 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6244#discussion_r200073559&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6244#discussion_r200073559&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-fs-tests/src/test/java/org/apache/flink/hdfstests/DistributedCacheDfsTest.java &amp;#8212;&lt;br/&gt;
    @@ -128,7 +130,7 @@ public void testDistributeFileViaDFS() throws Exception {&lt;/p&gt;

&lt;p&gt;     		env.fromElements(1)&lt;br/&gt;
     			.map(new TestMapFunction())&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;.print();&lt;br/&gt;
    +			.addSink(new DiscardingSink&amp;lt;&amp;gt;());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    True, will change the PR accordingly.&lt;/p&gt;</comment>
                            <comment id="16532561" author="githubbot" created="Wed, 4 Jul 2018 09:59:18 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6244&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6244&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @zentol. I will address your comments while merging the PR.&lt;/p&gt;</comment>
                            <comment id="16532639" author="till.rohrmann" created="Wed, 4 Jul 2018 11:24:03 +0000"  >&lt;p&gt;Fixed via acb8edc2d42d5f16014d10b7aa42bba2f2f8267f&lt;/p&gt;</comment>
                            <comment id="16532640" author="githubbot" created="Wed, 4 Jul 2018 11:24:24 +0000"  >&lt;p&gt;Github user tillrohrmann closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/6244&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6244&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3v1en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>