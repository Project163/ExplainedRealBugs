<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:11:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-27856] Adding pod template without spec crashes job manager</title>
                <link>https://issues.apache.org/jira/browse/FLINK-27856</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;While trying to add Pod annotation through pod template in FlinkDeployment, taskmanager was keep crashing.&lt;/p&gt;

&lt;p&gt;Pod template that I used:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  taskManager:
    podTemplate:
      apiVersion: v1
      kind: Pod
      metadata:
        annotations:
          iam.amazonaws.com/role: fake-role-arn
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It created below ConfigMap and mounted to the deployment:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
apiVersion: v1
data:
  taskmanager-pod-template.yaml: |
    ---
    apiVersion: &lt;span class=&quot;code-quote&quot;&gt;&quot;v1&quot;&lt;/span&gt;
    kind: &lt;span class=&quot;code-quote&quot;&gt;&quot;Pod&quot;&lt;/span&gt;
    metadata:
      annotations:
        iam.amazonaws.com/role: &lt;span class=&quot;code-quote&quot;&gt;&quot;fake-role-arn&quot;&lt;/span&gt;
kind: ConfigMap
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Looks like missing &quot;spec&quot; stanza in pod template resulted in the crash and I couldn&apos;t find any documentation that &quot;spec&quot; is required for pod template even for just adding metadata annotations.&lt;/p&gt;

&lt;p&gt;Adding below worked fine&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  taskManager:
    podTemplate:
      apiVersion: v1
      kind: Pod
      metadata:
        annotations:
          iam.amazonaws.com/role: fake-role-arn
      spec: {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Corresponding ConfigMap&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
apiVersion: v1
data:
  taskmanager-pod-template.yaml: |
    ---
    apiVersion: &lt;span class=&quot;code-quote&quot;&gt;&quot;v1&quot;&lt;/span&gt;
    kind: &lt;span class=&quot;code-quote&quot;&gt;&quot;Pod&quot;&lt;/span&gt;
    metadata:
      annotations:
        iam.amazonaws.com/role: &lt;span class=&quot;code-quote&quot;&gt;&quot;fake-role-arn&quot;&lt;/span&gt;
    spec:
      containers: []
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13447763">FLINK-27856</key>
            <summary>Adding pod template without spec crashes job manager</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevin_123">Peng Yuan</assignee>
                                    <reporter username="jeesmon">Jeesmon Jacob</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 31 May 2022 18:39:58 +0000</created>
                <updated>Fri, 12 Aug 2022 08:32:23 +0000</updated>
                            <resolved>Fri, 12 Aug 2022 08:32:23 +0000</resolved>
                                                    <fixVersion>1.16.0</fixVersion>
                    <fixVersion>1.15.2</fixVersion>
                                    <component>Deployment / Kubernetes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17545240" author="fly_in_gis" created="Thu, 2 Jun 2022 02:28:22 +0000"  >&lt;p&gt;We will have a NPE in the JobManager if the &lt;tt&gt;spec&lt;/tt&gt; is not configured in the pod template. This ticket needs to be fixed in the Flink project.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2022-06-02 02:26:11,864 ERROR org.apache.flink.runtime.entrypoint.ClusterEntrypoint &#160; &#160; &#160; &#160;[] - Fatal error occurred in the cluster entrypoint.
org.apache.flink.runtime.resourcemanager.exceptions.ResourceManagerException: Could not start the ResourceManager akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@basic-example.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;:6123/user/rpc/resourcemanager_1
&lt;/span&gt;&#160; &#160; &#160; &#160; at org.apache.flink.runtime.resourcemanager.ResourceManager.onStart(ResourceManager.java:223) ~[flink-dist-1.15.0.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.rpc.RpcEndpoint.internalCallOnStart(RpcEndpoint.java:181) ~[flink-dist-1.15.0.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.rpc.akka.AkkaRpcActor$StoppedState.lambda$start$0(AkkaRpcActor.java:612) ~[flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.concurrent.akka.ClassLoadingUtils.runWithContextClassLoader(ClassLoadingUtils.java:68) ~[flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.rpc.akka.AkkaRpcActor$StoppedState.start(AkkaRpcActor.java:611) ~[flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleControlMessage(AkkaRpcActor.java:185) ~[flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:24) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:20) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at scala.PartialFunction.applyOrElse(PartialFunction.scala:123) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at scala.PartialFunction.applyOrElse$(PartialFunction.scala:122) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at akka.japi.pf.UnitCaseStatement.applyOrElse(CaseStatements.scala:20) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:172) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at akka.actor.Actor.aroundReceive(Actor.scala:537) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at akka.actor.Actor.aroundReceive$(Actor.scala:535) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at akka.actor.AbstractActor.aroundReceive(AbstractActor.scala:220) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at akka.actor.ActorCell.receiveMessage(ActorCell.scala:580) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at akka.actor.ActorCell.invoke(ActorCell.scala:548) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:270) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at akka.dispatch.Mailbox.run(Mailbox.scala:231) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at akka.dispatch.Mailbox.exec(Mailbox.scala:243) [flink-rpc-akka_ee3c2e1e-3cab-4d23-8b5d-cdf80a18084e.jar:1.15.0]
&#160; &#160; &#160; &#160; at java.util.concurrent.ForkJoinTask.doExec(Unknown Source) [?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(Unknown Source) [?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ForkJoinPool.scan(Unknown Source) [?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ForkJoinPool.runWorker(Unknown Source) [?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source) [?:?]
Caused by: org.apache.flink.runtime.resourcemanager.exceptions.ResourceManagerException: Cannot initialize resource provider.
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.resourcemanager.active.ActiveResourceManager.initialize(ActiveResourceManager.java:158) ~[flink-dist-1.15.0.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.resourcemanager.ResourceManager.startResourceManagerServices(ResourceManager.java:241) ~[flink-dist-1.15.0.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.resourcemanager.ResourceManager.onStart(ResourceManager.java:218) ~[flink-dist-1.15.0.jar:1.15.0]
&#160; &#160; &#160; &#160; ... 25 more
Caused by: java.lang.NullPointerException
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.utils.KubernetesUtils.loadPodFromTemplateFile(KubernetesUtils.java:421) ~[flink-dist-1.15.0.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.kubernetes.KubernetesResourceManagerDriver.initializeInternal(KubernetesResourceManagerDriver.java:115) ~[flink-dist-1.15.0.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.resourcemanager.active.AbstractResourceManagerDriver.initialize(AbstractResourceManagerDriver.java:81) ~[flink-dist-1.15.0.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.resourcemanager.active.ActiveResourceManager.initialize(ActiveResourceManager.java:156) ~[flink-dist-1.15.0.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.resourcemanager.ResourceManager.startResourceManagerServices(ResourceManager.java:241) ~[flink-dist-1.15.0.jar:1.15.0]
&#160; &#160; &#160; &#160; at org.apache.flink.runtime.resourcemanager.ResourceManager.onStart(ResourceManager.java:218) ~[flink-dist-1.15.0.jar:1.15.0] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17577354" author="kevin_123" created="Tue, 9 Aug 2022 11:17:34 +0000"  >&lt;p&gt;I have made a PR to fix this error. Please assign this ticket to me.&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wangyang0918&quot; class=&quot;user-hover&quot; rel=&quot;wangyang0918&quot;&gt;wangyang0918&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17578863" author="fly_in_gis" created="Fri, 12 Aug 2022 08:32:13 +0000"  >&lt;p&gt;Fixed via:&lt;/p&gt;

&lt;p&gt;master: 5e554c17742e1809188aa702daca3f435dcab778&lt;/p&gt;

&lt;p&gt;release-1.15: 3d910dc8381c6965bfce6d948c7cac27cdde1a3c&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12ub4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>