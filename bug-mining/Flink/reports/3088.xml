<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:40:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-13205] Checkpoints/savepoints injection has loose ordering properties when a stop-with-savepoint is triggered</title>
                <link>https://issues.apache.org/jira/browse/FLINK-13205</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When a stop-with-savepoint is triggered at a source task, the task&apos;s dispatcher (&lt;tt&gt;Task.asyncCallDispatcher&lt;/tt&gt;)&apos;s thread pool is extended (from single-threaded, it becomes multi-threaded).&lt;/p&gt;

&lt;p&gt;This leads to a race of applying consequent checkpoints/savepoints from dispatcher&apos;s queue at the same time and checkpoints/savepoints would be not strictly ordered in the event stream.&lt;/p&gt;

&lt;p&gt;As the result, checkpoints/savepoints that injected later than they should, may be &quot;silently subsumed&quot;: potentially, they would be ignored and won&apos;t be reported to checkpoint coordinator.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Proposed solution:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Revert &lt;tt&gt;Task.asyncCallDispatcher&lt;/tt&gt; behavior to be single-threaded.&lt;br/&gt;
For stop-with-savepoint feature, the dispatcher&apos;s thread that performs the synchronous savepoint doesn&apos;t need to be blocking and &lt;tt&gt;StreamTask.finishTask()&lt;/tt&gt; invocation can be delegated to &lt;tt&gt;StreamTask.notifyCheckpointComplete()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; imo, the issue described here is not critical, but the proposed change should simplify implementation. This ticket can be considered as enhancement.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13244245">FLINK-13205</key>
            <summary>Checkpoints/savepoints injection has loose ordering properties when a stop-with-savepoint is triggered</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="1u0">Alex</assignee>
                                    <reporter username="1u0">Alex</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 11 Jul 2019 07:46:03 +0000</created>
                <updated>Mon, 15 Jul 2019 12:40:23 +0000</updated>
                            <resolved>Mon, 15 Jul 2019 12:38:19 +0000</resolved>
                                    <version>1.9.0</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>Runtime / Checkpointing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="16885181" author="kkl0u" created="Mon, 15 Jul 2019 12:38:19 +0000"  >&lt;p&gt;Merged on master with 0c8c1d4b827700d788f5b4ddbd8a21192165d039&lt;br/&gt;
and on release-1.9 with b5aa6792bb04eaabb86bf9d73f12ec8441153f77&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04jy8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>