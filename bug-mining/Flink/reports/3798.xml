<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:44:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-16313] flink-state-processor-api: surefire execution unstable on Azure</title>
                <link>https://issues.apache.org/jira/browse/FLINK-16313</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Log file: &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5686&amp;amp;view=logs&amp;amp;j=41cba0bb-1271-5adb-01cc-4768f26a8311&amp;amp;t=44574c85-1cd0-5978-cccf-f0cf7e87a36a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5686&amp;amp;view=logs&amp;amp;j=41cba0bb-1271-5adb-01cc-4768f26a8311&amp;amp;t=44574c85-1cd0-5978-cccf-f0cf7e87a36a&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-02-27T12:36:35.2860111Z [INFO] flink-table-planner ................................ SUCCESS [01:47 min]
2020-02-27T12:36:35.2860966Z [INFO] flink-cep-scala .................................... SUCCESS [  5.041 s]
2020-02-27T12:36:35.2861740Z [INFO] flink-sql-client ................................... SUCCESS [03:00 min]
2020-02-27T12:36:35.2862503Z [INFO] flink-state-processor-api .......................... FAILURE [ 15.394 s]
2020-02-27T12:36:35.2863237Z [INFO] ------------------------------------------------------------------------
2020-02-27T12:36:35.2863587Z [INFO] BUILD FAILURE
2020-02-27T12:36:35.2864071Z [INFO] ------------------------------------------------------------------------
2020-02-27T12:36:35.2864428Z [INFO] Total time: 05:38 min
2020-02-27T12:36:35.2866349Z [INFO] Finished at: 2020-02-27T12:36:35+00:00
2020-02-27T12:36:35.9345815Z [INFO] Final Memory: 147M/2914M
2020-02-27T12:36:35.9347238Z [INFO] ------------------------------------------------------------------------
2020-02-27T12:36:35.9355362Z [WARNING] The requested profile &lt;span class=&quot;code-quote&quot;&gt;&quot;skip-webui-build&quot;&lt;/span&gt; could not be activated because it does not exist.
2020-02-27T12:36:35.9367919Z [ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.1:test (integration-tests) on project flink-state-processor-api_2.11: There are test failures.
2020-02-27T12:36:35.9368804Z [ERROR] 
2020-02-27T12:36:35.9369489Z [ERROR] Please refer to /__w/2/s/flink-libraries/flink-state-processing-api/target/surefire-reports &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the individual test results.
2020-02-27T12:36:35.9370249Z [ERROR] Please refer to dump files (&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
2020-02-27T12:36:35.9370713Z [ERROR] ExecutionException Error occurred in starting fork, check output in log
2020-02-27T12:36:35.9371279Z [ERROR] org.apache.maven.surefire.booter.SurefireBooterForkException: ExecutionException Error occurred in starting fork, check output in log
2020-02-27T12:36:35.9372275Z [ERROR] at org.apache.maven.plugin.surefire.booterclient.ForkStarter.awaitResultsDone(ForkStarter.java:510)
2020-02-27T12:36:35.9372917Z [ERROR] at org.apache.maven.plugin.surefire.booterclient.ForkStarter.runSuitesForkPerTestSet(ForkStarter.java:457)
2020-02-27T12:36:35.9373498Z [ERROR] at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:298)
2020-02-27T12:36:35.9374064Z [ERROR] at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:246)
2020-02-27T12:36:35.9374636Z [ERROR] at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeProvider(AbstractSurefireMojo.java:1183)
2020-02-27T12:36:35.9375344Z [ERROR] at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAfterPreconditionsChecked(AbstractSurefireMojo.java:1011)
2020-02-27T12:36:35.9376194Z [ERROR] at org.apache.maven.plugin.surefire.AbstractSurefireMojo.execute(AbstractSurefireMojo.java:857)
2020-02-27T12:36:35.9376791Z [ERROR] at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:132)
2020-02-27T12:36:35.9377375Z [ERROR] at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)
2020-02-27T12:36:35.9377898Z [ERROR] at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
2020-02-27T12:36:35.9378435Z [ERROR] at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
2020-02-27T12:36:35.9379063Z [ERROR] at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:116)
2020-02-27T12:36:35.9379709Z [ERROR] at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:80)
2020-02-27T12:36:35.9380367Z [ERROR] at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)
2020-02-27T12:36:35.9381007Z [ERROR] at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:120)
2020-02-27T12:36:35.9381510Z [ERROR] at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:355)
2020-02-27T12:36:35.9381973Z [ERROR] at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:155)
2020-02-27T12:36:35.9382404Z [ERROR] at org.apache.maven.cli.MavenCli.execute(MavenCli.java:584)
2020-02-27T12:36:35.9382839Z [ERROR] at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:216)
2020-02-27T12:36:35.9383248Z [ERROR] at org.apache.maven.cli.MavenCli.main(MavenCli.java:160)
2020-02-27T12:36:35.9383661Z [ERROR] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2020-02-27T12:36:35.9384126Z [ERROR] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2020-02-27T12:36:35.9384659Z [ERROR] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2020-02-27T12:36:35.9385145Z [ERROR] at java.lang.reflect.Method.invoke(Method.java:498)
2020-02-27T12:36:35.9385606Z [ERROR] at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
2020-02-27T12:36:35.9386293Z [ERROR] at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
2020-02-27T12:36:35.9386930Z [ERROR] at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)
2020-02-27T12:36:35.9387471Z [ERROR] at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)
2020-02-27T12:36:35.9388056Z [ERROR] Caused by: org.apache.maven.surefire.booter.SurefireBooterForkException: Error occurred in starting fork, check output in log
2020-02-27T12:36:35.9388731Z [ERROR] at org.apache.maven.plugin.surefire.booterclient.ForkStarter.fork(ForkStarter.java:622)
2020-02-27T12:36:35.9389289Z [ERROR] at org.apache.maven.plugin.surefire.booterclient.ForkStarter.access$600(ForkStarter.java:115)
2020-02-27T12:36:35.9389864Z [ERROR] at org.apache.maven.plugin.surefire.booterclient.ForkStarter$2.call(ForkStarter.java:444)
2020-02-27T12:36:35.9390411Z [ERROR] at org.apache.maven.plugin.surefire.booterclient.ForkStarter$2.call(ForkStarter.java:420)
2020-02-27T12:36:35.9390986Z [ERROR] at java.util.concurrent.FutureTask.run(FutureTask.java:266)
2020-02-27T12:36:35.9391458Z [ERROR] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
2020-02-27T12:36:35.9391991Z [ERROR] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
2020-02-27T12:36:35.9392419Z [ERROR] at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
2020-02-27T12:36:35.9392894Z [ERROR] -&amp;gt; [Help 1]
2020-02-27T12:36:35.9393077Z [ERROR] 
2020-02-27T12:36:35.9393553Z [ERROR] To see the full stack trace of the errors, re-run Maven with the -e &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt;.
2020-02-27T12:36:35.9394108Z [ERROR] Re-run Maven using the -X &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; to enable full debug logging.
2020-02-27T12:36:35.9394392Z [ERROR] 
2020-02-27T12:36:35.9394713Z [ERROR] For more information about the errors and possible solutions, please read the following articles:
2020-02-27T12:36:35.9395211Z [ERROR] [Help 1] http:&lt;span class=&quot;code-comment&quot;&gt;//cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
&lt;/span&gt;2020-02-27T12:36:35.9395525Z [ERROR] 
2020-02-27T12:36:35.9395889Z [ERROR] After correcting the problems, you can resume the build with the command
2020-02-27T12:36:35.9396511Z [ERROR]   mvn &amp;lt;goals&amp;gt; -rf :flink-state-processor-api_2.11
2020-02-27T12:36:36.2427441Z MVN exited with EXIT CODE: 1.
2020-02-27T12:36:36.2427867Z Trying to KILL watchdog (1633).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13288061">FLINK-16313</key>
            <summary>flink-state-processor-api: surefire execution unstable on Azure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sjwiesman">Seth Wiesman</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 27 Feb 2020 14:06:22 +0000</created>
                <updated>Sat, 7 Mar 2020 06:39:38 +0000</updated>
                            <resolved>Fri, 6 Mar 2020 17:09:16 +0000</resolved>
                                    <version>1.10.1</version>
                    <version>1.11.0</version>
                                    <fixVersion>1.10.1</fixVersion>
                    <fixVersion>1.11.0</fixVersion>
                                    <component>API / State Processor</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17047421" author="rmetzger" created="Fri, 28 Feb 2020 10:12:31 +0000"  >&lt;p&gt;Another case &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5723&amp;amp;view=logs&amp;amp;j=41cba0bb-1271-5adb-01cc-4768f26a8311&amp;amp;t=97bfbae5-9730-50fb-c7f7-7ec78a126729&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5723&amp;amp;view=logs&amp;amp;j=41cba0bb-1271-5adb-01cc-4768f26a8311&amp;amp;t=97bfbae5-9730-50fb-c7f7-7ec78a126729&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17048993" author="rmetzger" created="Mon, 2 Mar 2020 10:11:45 +0000"  >&lt;p&gt;Another case, on master: &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5807&amp;amp;view=logs&amp;amp;s=0491af50-44b2-5583-ba82-45044b1ef751&amp;amp;j=41cba0bb-1271-5adb-01cc-4768f26a8311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5807&amp;amp;view=logs&amp;amp;s=0491af50-44b2-5583-ba82-45044b1ef751&amp;amp;j=41cba0bb-1271-5adb-01cc-4768f26a8311&lt;/a&gt; with transfer.sh logs: &lt;a href=&quot;https://transfer.sh/8344E/20200302.19.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://transfer.sh/8344E/20200302.19.tar.gz&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17051234" author="till.rohrmann" created="Wed, 4 Mar 2020 13:48:14 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5896&amp;amp;view=logs&amp;amp;j=41cba0bb-1271-5adb-01cc-4768f26a8311&amp;amp;t=97bfbae5-9730-50fb-c7f7-7ec78a126729&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/rmetzger/Flink/_build/results?buildId=5896&amp;amp;view=logs&amp;amp;j=41cba0bb-1271-5adb-01cc-4768f26a8311&amp;amp;t=97bfbae5-9730-50fb-c7f7-7ec78a126729&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17052168" author="rmetzger" created="Thu, 5 Mar 2020 14:08:31 +0000"  >&lt;p&gt;The jvm is writing a &lt;tt&gt;.dumpstream&lt;/tt&gt; file with the following contents:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# Created at 2020-03-05T12:51:24.963
pure virtual method called

# Created at 2020-03-05T12:51:24.964
terminate called without an active exception

# Created at 2020-03-05T12:51:26.982
Aborted (core dumped)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... investigating further&lt;/p&gt;</comment>
                            <comment id="17052340" author="rmetzger" created="Thu, 5 Mar 2020 17:07:01 +0000"  >&lt;p&gt;More information:&lt;/p&gt;

&lt;p&gt;From the coredump and gdb, I get the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
root@ed674fdc4d9b:/home/test/flink/flink-libraries/flink-state-processing-api/target# gdb $JAVA_HOME/bin/java core.11410
GNU gdb (Ubuntu 7.11.1-0ubuntu1~16.5) 7.11.1
Copyright (C) 2016 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//gnu.org/licenses/gpl.html&amp;gt;
&lt;/span&gt;This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &lt;span class=&quot;code-quote&quot;&gt;&quot;show copying&quot;&lt;/span&gt;
and &lt;span class=&quot;code-quote&quot;&gt;&quot;show warranty&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
This GDB was configured as &lt;span class=&quot;code-quote&quot;&gt;&quot;x86_64-linux-gnu&quot;&lt;/span&gt;.
Type &lt;span class=&quot;code-quote&quot;&gt;&quot;show configuration&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; configuration details.
For bug reporting instructions, please see:
&amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//www.gnu.org/software/gdb/bugs/&amp;gt;.
&lt;/span&gt;Find the GDB manual and other documentation resources online at:
&amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//www.gnu.org/software/gdb/documentation/&amp;gt;.
&lt;/span&gt;For help, type &lt;span class=&quot;code-quote&quot;&gt;&quot;help&quot;&lt;/span&gt;.
Type &lt;span class=&quot;code-quote&quot;&gt;&quot;apropos word&quot;&lt;/span&gt; to search &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; commands related to &lt;span class=&quot;code-quote&quot;&gt;&quot;word&quot;&lt;/span&gt;...
Reading symbols from /usr/lib/jvm/java-8-openjdk-amd64/bin/java...(no debugging symbols found)...done.
[New LWP 11468]
[New LWP 11470]
[New LWP 11475]
[New LWP 11476]
[New LWP 11481]
[New LWP 11480]
[New LWP 11486]
[New LWP 11469]
[New LWP 11471]
[New LWP 11472]
[New LWP 11473]
[New LWP 11474]
[New LWP 11478]
[New LWP 11477]
[New LWP 11479]
[New LWP 11482]
[New LWP 11463]
[New LWP 11823]
[New LWP 11460]
[New LWP 11465]
[New LWP 11421]
[New LWP 11483]
[New LWP 11492]
[New LWP 11975]
[New LWP 11821]
[New LWP 11426]
[New LWP 11416]
[New LWP 11417]
[New LWP 11466]
[New LWP 11484]
[New LWP 11418]
[New LWP 11414]
[New LWP 11433]
[New LWP 11424]
[New LWP 11412]
[New LWP 11415]
[New LWP 11462]
[New LWP 11411]
[New LWP 11430]
[New LWP 11429]
[New LWP 11422]
[New LWP 11461]
[New LWP 11978]
[New LWP 11977]
[New LWP 11427]
[New LWP 11488]
[New LWP 11434]
[New LWP 11419]
[New LWP 11428]
[New LWP 11431]
[New LWP 11425]
[New LWP 12072]
[New LWP 11464]
[New LWP 11485]
[New LWP 12136]
[New LWP 11410]
[New LWP 11423]
[New LWP 11420]
[New LWP 11432]
[New LWP 11467]
[New LWP 11413]

warning: Could not load shared library symbols &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /tmp/junit1547658367137473582/junit5791642854447555054/rocksdb-lib-b2b47d85aecef16c175b116af00b6d57/librocksdbjni-linux64.so.
Do you need &lt;span class=&quot;code-quote&quot;&gt;&quot;set solib-search-path&quot;&lt;/span&gt; or &lt;span class=&quot;code-quote&quot;&gt;&quot;set sysroot&quot;&lt;/span&gt;?
[&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; debugging using libthread_db enabled]
Using host libthread_db library &lt;span class=&quot;code-quote&quot;&gt;&quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;&lt;/span&gt;.
Core was generated by `/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java -Xms256m -Xmx2048m -Dmvn.forkNum&apos;.
Program terminated with signal SIGABRT, Aborted.
#0  0x00007f69aaec6428 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54
54	../sysdeps/unix/sysv/linux/raise.c: No such file or directory.
[Current thread is 1 (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 0x7f68ade2c700 (LWP 11468))]
Installing openjdk unwinder
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/share/gdb/auto-load/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/server/libjvm.so-gdb.py&quot;&lt;/span&gt;, line 52, in &amp;lt;module&amp;gt;
    &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Types(object):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/share/gdb/auto-load/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/server/libjvm.so-gdb.py&quot;&lt;/span&gt;, line 66, in Types
    nmethodp_t = gdb.lookup_type(&lt;span class=&quot;code-quote&quot;&gt;&apos;nmethod&apos;&lt;/span&gt;).pointer()
gdb.error: No type named nmethod.
(gdb) where
#0  0x00007f69aaec6428 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54
#1  0x00007f69aaec802a in __GI_abort () at abort.c:89
#2  0x00007f69a960e84d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#3  0x00007f69a960c6b6 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#4  0x00007f69a960c701 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#5  0x00007f69a960d23f in __cxa_pure_virtual () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#6  0x00007f678e9110d5 in ?? ()
#7  0x00007f676c055b08 in ?? ()
#8  0x00007f676c053660 in ?? ()
#9  0x00007f68ade2b4af in ?? ()
#10 0x00007f68ade2b4b0 in ?? ()
#11 0x00007f68ade2b4c0 in ?? ()
#12 0x00007f68ade2b730 in ?? ()
#13 0x00007f676c055d38 in ?? ()
#14 0x00007f676c055b58 in ?? ()
#15 0x00007f69aaa6e270 in stack_used () from /lib/x86_64-linux-gnu/libpthread.so.0
#16 0x0000000000000001 in ?? ()
#17 0x00007f68ade2c700 in ?? ()
#18 0x00007f69aa85d5c9 in __free_stacks (limit=41943040) at allocatestack.c:288
#19 queue_stack (stack=&amp;lt;optimized out&amp;gt;) at allocatestack.c:312
#20 __deallocate_stack (pd=&amp;lt;optimized out&amp;gt;) at allocatestack.c:774
#21 __free_tcb (pd=&amp;lt;optimized out&amp;gt;) at pthread_create.c:243
#22 0x0000000000000000 in ?? ()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Previous runs have also resulted in such files:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.io.IOException: Stream closed
	at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:170)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:283)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:345)
	at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)
	at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)
	at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)
	at java.io.InputStreamReader.read(InputStreamReader.java:184)
	at java.io.Reader.read(Reader.java:100)
	at java.util.Scanner.readInput(Scanner.java:804)
	at java.util.Scanner.findWithinHorizon(Scanner.java:1685)
	at java.util.Scanner.hasNextLine(Scanner.java:1500)
	at org.apache.maven.surefire.booter.PpidChecker$ProcessInfoConsumer.execute(PpidChecker.java:354)
	at org.apache.maven.surefire.booter.PpidChecker.unix(PpidChecker.java:190)
	at org.apache.maven.surefire.booter.PpidChecker.isProcessAlive(PpidChecker.java:123)
	at org.apache.maven.surefire.booter.ForkedBooter$2.run(ForkedBooter.java:214)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)


# Created at 2020-03-05T15:49:56.955
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit() or &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; command error interrupted process checker.
java.lang.IllegalStateException: error [STOPPED] to read process 15274
	at org.apache.maven.surefire.booter.PpidChecker.checkProcessInfo(PpidChecker.java:145)
	at org.apache.maven.surefire.booter.PpidChecker.isProcessAlive(PpidChecker.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter$2.run(ForkedBooter.java:214)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I believe I am only able to reproduce this issue within this docker container &lt;tt&gt;rmetzger/flink-ci:ubuntu-amd64-3528acd&lt;/tt&gt;, and NOT on the azure hosted ubuntu 16.04 machines.&lt;br/&gt;
But on a &lt;tt&gt;CentOS Linux release 7.6.1810&lt;/tt&gt; host machine.&lt;/p&gt;</comment>
                            <comment id="17052393" author="rmetzger" created="Thu, 5 Mar 2020 18:10:33 +0000"  >&lt;p&gt;More information&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
root@ed674fdc4d9b:/home/test/flink/flink-libraries/flink-state-processing-api/target# jstack -J-d64 $JAVA_HOME/bin/java core.11410
Attaching to core core.11410 from executable /usr/lib/jvm/java-8-openjdk-amd64/bin/java, please wait...
Debugger attached successfully.
Server compiler detected.
JVM version is 25.242-b08
Deadlock Detection:

No deadlocks found.

&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 12136: (state = BLOCKED)
 - sun.misc.Unsafe.park(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Compiled frame; information may be imprecise)
 - java.util.concurrent.locks.LockSupport.parkNanos(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=20, line=215 (Compiled frame)
 - java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=78, line=2078 (Interpreted frame)
 - java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take() @bci=124, line=1093 (Interpreted frame)
 - java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take() @bci=1, line=809 (Interpreted frame)
 - java.util.concurrent.ThreadPoolExecutor.getTask() @bci=149, line=1074 (Compiled frame)
 - java.util.concurrent.ThreadPoolExecutor.runWorker(java.util.concurrent.ThreadPoolExecutor$Worker) @bci=26, line=1134 (Interpreted frame)
 - java.util.concurrent.ThreadPoolExecutor$Worker.run() @bci=5, line=624 (Interpreted frame)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run() @bci=11, line=748 (Interpreted frame)


&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 12072: (state = BLOCKED)
 - sun.misc.Unsafe.park(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Compiled frame; information may be imprecise)
 - java.util.concurrent.locks.LockSupport.parkNanos(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=20, line=215 (Compiled frame)
 - java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=78, line=2078 (Interpreted frame)
 - java.util.concurrent.LinkedBlockingQueue.poll(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, java.util.concurrent.TimeUnit) @bci=62, line=467 (Compiled frame)
 - org.apache.flink.shaded.netty4.io.netty.util.concurrent.GlobalEventExecutor.takeTask() @bci=49, line=94 (Interpreted frame)
 - org.apache.flink.shaded.netty4.io.netty.util.concurrent.GlobalEventExecutor$TaskRunner.run() @bci=4, line=247 (Interpreted frame)
 - org.apache.flink.shaded.netty4.io.netty.util.internal.ThreadExecutorMap$2.run() @bci=11, line=74 (Interpreted frame)
 - org.apache.flink.shaded.netty4.io.netty.util.concurrent.FastThreadLocalRunnable.run() @bci=4, line=30 (Interpreted frame)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run() @bci=11, line=748 (Interpreted frame)


&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 11823: (state = BLOCKED)
 - sun.misc.Unsafe.park(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Interpreted frame)
 - java.util.concurrent.locks.LockSupport.parkNanos(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=20, line=215 (Interpreted frame)
 - java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=78, line=2078 (Interpreted frame)
 - java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take() @bci=124, line=1093 (Interpreted frame)
 - java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take() @bci=1, line=809 (Interpreted frame)
 - java.util.concurrent.ThreadPoolExecutor.getTask() @bci=149, line=1074 (Interpreted frame)
 - java.util.concurrent.ThreadPoolExecutor.runWorker(java.util.concurrent.ThreadPoolExecutor$Worker) @bci=26, line=1134 (Interpreted frame)
 - java.util.concurrent.ThreadPoolExecutor$Worker.run() @bci=5, line=624 (Interpreted frame)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run() @bci=11, line=748 (Interpreted frame)


&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 11821: (state = BLOCKED)
 - sun.misc.Unsafe.park(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Compiled frame; information may be imprecise)
 - java.util.concurrent.ForkJoinPool.awaitWork(java.util.concurrent.ForkJoinPool$WorkQueue, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=350, line=1824 (Interpreted frame)
 - java.util.concurrent.ForkJoinPool.runWorker(java.util.concurrent.ForkJoinPool$WorkQueue) @bci=44, line=1693 (Interpreted frame)
 - java.util.concurrent.ForkJoinWorkerThread.run() @bci=24, line=157 (Interpreted frame)


&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 11492: (state = BLOCKED)
 - sun.misc.Unsafe.park(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Interpreted frame)
 - java.util.concurrent.locks.LockSupport.parkNanos(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=20, line=215 (Interpreted frame)
 - java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(java.util.concurrent.SynchronousQueue$TransferStack$SNode, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=160, line=460 (Interpreted frame)
 - java.util.concurrent.SynchronousQueue$TransferStack.transfer(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=102, line=362 (Interpreted frame)
 - java.util.concurrent.SynchronousQueue.poll(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, java.util.concurrent.TimeUnit) @bci=11, line=941 (Interpreted frame)
 - java.util.concurrent.ThreadPoolExecutor.getTask() @bci=134, line=1073 (Interpreted frame)
 - java.util.concurrent.ThreadPoolExecutor.runWorker(java.util.concurrent.ThreadPoolExecutor$Worker) @bci=26, line=1134 (Interpreted frame)
 - java.util.concurrent.ThreadPoolExecutor$Worker.run() @bci=5, line=624 (Interpreted frame)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run() @bci=11, line=748 (Interpreted frame)


&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 11488: (state = BLOCKED)
 - java.io.FileInputStream.readBytes(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=0 (Compiled frame; information may be imprecise)
 - java.io.FileInputStream.read(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=4, line=255 (Compiled frame)
 - java.io.BufferedInputStream.fill() @bci=214, line=246 (Interpreted frame)
 - java.io.BufferedInputStream.read() @bci=12, line=265 (Compiled frame)
 - java.io.DataInputStream.readInt() @bci=4, line=387 (Compiled frame)
 - org.apache.maven.surefire.booter.MasterProcessCommand.decode(java.io.DataInputStream) @bci=1, line=115 (Interpreted frame)
 - org.apache.maven.surefire.booter.CommandReader$CommandRunnable.run() @bci=40, line=391 (Interpreted frame)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run() @bci=11, line=748 (Interpreted frame)


&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 11470: (state = BLOCKED)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.exit() @bci=0, line=757 (Interpreted frame)


&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 11469: (state = BLOCKED)


&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 11468: (state = IN_NATIVE)
 - org.rocksdb.RocksDB.disposeInternal(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Interpreted frame)
 - org.rocksdb.RocksObject.disposeInternal() @bci=5, line=37 (Interpreted frame)
 - org.rocksdb.AbstractImmutableNativeReference.close() @bci=13, line=57 (Compiled frame)
 - org.rocksdb.AbstractNativeReference.dispose() @bci=1, line=53 (Compiled frame)
 - org.rocksdb.AbstractNativeReference.finalize() @bci=8, line=73 (Compiled frame)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;$2.invokeFinalize(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) @bci=1, line=1275 (Compiled frame)
 - java.lang.ref.Finalizer.runFinalizer(sun.misc.JavaLangAccess) @bci=46, line=102 (Compiled frame)
 - java.lang.ref.Finalizer.access$100(java.lang.ref.Finalizer, sun.misc.JavaLangAccess) @bci=2, line=34 (Compiled frame)
 - java.lang.ref.Finalizer$FinalizerThread.run() @bci=45, line=217 (Interpreted frame)


&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 11467: (state = BLOCKED)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Interpreted frame)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() @bci=2, line=502 (Compiled frame)
 - java.lang.ref.Reference.tryHandlePending(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) @bci=54, line=191 (Compiled frame)
 - java.lang.ref.Reference$ReferenceHandler.run() @bci=1, line=153 (Interpreted frame)


&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 11411: (state = BLOCKED)
 - java.lang.Shutdown.halt0(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=0 (Interpreted frame)
 - java.lang.Shutdown.halt(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=7, line=139 (Interpreted frame)
 - java.lang.Shutdown.exit(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=99, line=213 (Interpreted frame)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt;.exit(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=14, line=110 (Interpreted frame)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=4, line=973 (Interpreted frame)
 - org.apache.maven.surefire.booter.ForkedBooter.acknowledgedExit() @bci=70, line=338 (Interpreted frame)
 - org.apache.maven.surefire.booter.ForkedBooter.execute() @bci=145, line=145 (Interpreted frame)
 - org.apache.maven.surefire.booter.ForkedBooter.main(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]) @bci=35, line=418 (Interpreted frame)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=azagrebin&quot; class=&quot;user-hover&quot; rel=&quot;azagrebin&quot;&gt;azagrebin&lt;/a&gt; do you believe the &lt;tt&gt;org.rocksdb.RocksDB.disposeInternal(long)&lt;/tt&gt; could cause this?&lt;/p&gt;</comment>
                            <comment id="17052470" author="rmetzger" created="Thu, 5 Mar 2020 19:45:44 +0000"  >&lt;p&gt;Putting the rocksdb.so back into the tmp folder revealed more / confirms:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(gdb) where
#0  0x00007f69aaec6428 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54
#1  0x00007f69aaec802a in __GI_abort () at abort.c:89
#2  0x00007f69a960e84d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#3  0x00007f69a960c6b6 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#4  0x00007f69a960c701 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#5  0x00007f69a960d23f in __cxa_pure_virtual () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#6  0x00007f678e9110d5 in rocksdb::DBImpl::CloseHelper() ()
   from /tmp/junit1547658367137473582/junit5791642854447555054/rocksdb-lib-b2b47d85aecef16c175b116af00b6d57/librocksdbjni-linux64.so
#7  0x00007f678e91c17b in rocksdb::DBImpl::~DBImpl() () from /tmp/junit1547658367137473582/junit5791642854447555054/rocksdb-lib-b2b47d85aecef16c175b116af00b6d57/librocksdbjni-linux64.so
#8  0x00007f678e91c451 in rocksdb::DBImpl::~DBImpl() () from /tmp/junit1547658367137473582/junit5791642854447555054/rocksdb-lib-b2b47d85aecef16c175b116af00b6d57/librocksdbjni-linux64.so
#9  0x00007f6994e0f607 in ?? ()
#10 0x3338303638366431 in ?? ()
#11 0x3435615f66373731 in ?? ()
#12 0x6138646564336562 in ?? ()
#13 0x6530373737633131 in ?? ()
#14 0x00007f68ade2b7c0 in ?? ()
#15 0x0000000000000000 in ?? ()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17052486" author="rmetzger" created="Thu, 5 Mar 2020 20:18:29 +0000"  >&lt;p&gt;Running all tests in the &lt;tt&gt;flink-state-processor-api&lt;/tt&gt; module in IntelliJ on my mac also leads to this on stdout&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Assertion failed: (last_ref), function ~ColumnFamilySet, file db/column_family.cc, line 1238.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and this in osx crashreport:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 25 Crashed:: Java: Finalizer
0   libsystem_kernel.dylib              0x00007fff71ff97fa __pthread_kill + 10
1   libsystem_pthread.dylib             0x00007fff720b6bc1 pthread_kill + 432
2   libsystem_c.dylib                   0x00007fff71f80a1c abort + 120
3   libsystem_c.dylib                   0x00007fff71f7fcd6 __assert_rtn + 314
4   librocksdbjni-osx.jnilib            0x000000012d560038 rocksdb::ColumnFamilySet::~ColumnFamilySet() + 344
5   librocksdbjni-osx.jnilib            0x000000012d72fb07 rocksdb::VersionSet::~VersionSet() + 71
6   librocksdbjni-osx.jnilib            0x000000012d5c7497 rocksdb::DBImpl::CloseHelper() + 2519
7   librocksdbjni-osx.jnilib            0x000000012d5c7779 rocksdb::DBImpl::~DBImpl() + 57
8   librocksdbjni-osx.jnilib            0x000000012d5c7f0e rocksdb::DBImpl::~DBImpl() + 14
9   ???                                 0x00000001171d65a7 0 + 4682769831
10  ???                                 0x00000001171c5ffd 0 + 4682702845
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17052525" author="azagrebin" created="Thu, 5 Mar 2020 21:19:39 +0000"  >&lt;p&gt;Looks like native column ref leak in&#160; RocksDB. Possibly some column family object is not closed properly before closing RocksDB instance. If this started to happen recently but worked before, we should check any related latest changes.&lt;br/&gt;
cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liyu&quot; class=&quot;user-hover&quot; rel=&quot;liyu&quot;&gt;liyu&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sjwiesman&quot; class=&quot;user-hover&quot; rel=&quot;sjwiesman&quot;&gt;sjwiesman&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17052563" author="sjwiesman" created="Thu, 5 Mar 2020 22:31:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-14231&quot; title=&quot;Support the timers of the upstream operator with endInput properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-14231&quot;&gt;&lt;del&gt;FLINK-14231&lt;/del&gt;&lt;/a&gt; made changes to how StreamTask closes operators and the state proc api uses stream task in a non-standard way. I will investigate. &lt;/p&gt;</comment>
                            <comment id="17052598" author="sjwiesman" created="Thu, 5 Mar 2020 23:31:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; I ran all the tests 100 times and so far I am unable to reproduce. Is this failure occurring for a certain test or across all? Particularly if its on the reader or writer side, as those comonents don&apos;t share much code. &lt;/p&gt;

&lt;p&gt;I checked the changes made to BoundedStreamTask by &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-14231&quot; title=&quot;Support the timers of the upstream operator with endInput properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-14231&quot;&gt;&lt;del&gt;FLINK-14231&lt;/del&gt;&lt;/a&gt; and they do not look like they should be causing this issue. The state proc api does not ever work directly with RocksDB but only through the state backend interface. &lt;/p&gt;</comment>
                            <comment id="17053085" author="rmetzger" created="Fri, 6 Mar 2020 07:00:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sjwiesman&quot; class=&quot;user-hover&quot; rel=&quot;sjwiesman&quot;&gt;sjwiesman&lt;/a&gt; Thanks for looking into it.&lt;br/&gt;
I am also not able to reproduce it by executing the tests through maven on my mac.&lt;br/&gt;
But running &lt;b&gt;ALL&lt;/b&gt; tests of the state processor API module together triggers it every time.&lt;br/&gt;
And it looks like the test after the RocksDBB test is failing, not the rocks test itself. But if you ignore the rocks test, all tests are passing.&lt;/p&gt;

&lt;p&gt;To execute all tests, right click on the module, and click &quot;Run all tests&quot;&lt;/p&gt;</comment>
                            <comment id="17053132" author="rmetzger" created="Fri, 6 Mar 2020 08:09:41 +0000"  >&lt;p&gt;I opened a PR to ignore this test in the meantime: &lt;a href=&quot;https://github.com/apache/flink/pull/11330&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/11330&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17053135" author="carp84" created="Fri, 6 Mar 2020 08:15:10 +0000"  >&lt;p&gt;I could also reproduce the issue locally by running All tests for &lt;tt&gt;flink-state-processing-api&lt;/tt&gt; module with below error, which truly indicates some resource leak problem. Will take a closer look into it.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Assertion failed: (last_ref), function ~ColumnFamilySet, file db/column_family.cc, line 1238.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="17053362" author="rmetzger" created="Fri, 6 Mar 2020 12:37:59 +0000"  >&lt;p&gt;Thank you for looking into it Yu. The test is ignored in master for now: &lt;a href=&quot;https://github.com/apache/flink/commit/d1f1d40a297dace6942c6d1d49bc4aca264b9c49&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/d1f1d40a297dace6942c6d1d49bc4aca264b9c49&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17053363" author="pnowojski" created="Fri, 6 Mar 2020 12:38:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liyu&quot; class=&quot;user-hover&quot; rel=&quot;liyu&quot;&gt;liyu&lt;/a&gt;, we have merged PR to ignore the test for now. Can you take over this issue for a proper fix?&lt;/p&gt;</comment>
                            <comment id="17053560" author="sjwiesman" created="Fri, 6 Mar 2020 16:05:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liyu&quot; class=&quot;user-hover&quot; rel=&quot;liyu&quot;&gt;liyu&lt;/a&gt; No need, I found the issue and have opened a PR. &lt;/p&gt;</comment>
                            <comment id="17053604" author="tzulitai" created="Fri, 6 Mar 2020 17:09:16 +0000"  >&lt;p&gt;Fixed by:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;master&lt;/tt&gt; / &lt;tt&gt;1.11.0&lt;/tt&gt; - 560e8052c8632ae6b1db73dd6152b837402c1290&lt;br/&gt;
&lt;tt&gt;1.10.1&lt;/tt&gt; - 93d6324ee0e3fb7c7975fb0c56280357adc66f24 &lt;/p&gt;</comment>
                            <comment id="17053707" author="rmetzger" created="Fri, 6 Mar 2020 18:57:42 +0000"  >&lt;p&gt;Thanks to everybody who was involved in this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17053911" author="carp84" created="Sat, 7 Mar 2020 06:39:38 +0000"  >&lt;p&gt;Thanks for the quick fix and review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sjwiesman&quot; class=&quot;user-hover&quot; rel=&quot;sjwiesman&quot;&gt;sjwiesman&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tzulitai&quot; class=&quot;user-hover&quot; rel=&quot;tzulitai&quot;&gt;tzulitai&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0byo0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>