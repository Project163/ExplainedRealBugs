<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:18:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-28513] Flink Table API CSV streaming sink throws SerializedThrowable exception</title>
                <link>https://issues.apache.org/jira/browse/FLINK-28513</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Table API S3 streaming sink (CSV format) throws the following exception,&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.apache.flink.util.SerializedThrowable: S3RecoverableFsDataOutputStream cannot sync state to S3. Use persist() to create a persistent recoverable intermediate point.
at org.apache.flink.fs.s3.common.utils.RefCountedBufferingFileStream.sync(RefCountedBufferingFileStream.java:111) ~[flink-s3-fs-hadoop-1.15.1.jar:1.15.1]
at org.apache.flink.fs.s3.common.writer.S3RecoverableFsDataOutputStream.sync(S3RecoverableFsDataOutputStream.java:129) ~[flink-s3-fs-hadoop-1.15.1.jar:1.15.1]
at org.apache.flink.formats.csv.CsvBulkWriter.finish(CsvBulkWriter.java:110) ~[flink-csv-1.15.1.jar:1.15.1]
at org.apache.flink.connector.file.table.FileSystemTableSink$ProjectionBulkFactory$1.finish(FileSystemTableSink.java:642) ~[flink-connector-files-1.15.1.jar:1.15.1]
at org.apache.flink.streaming.api.functions.sink.filesystem.BulkPartWriter.closeForCommit(BulkPartWriter.java:64) ~[flink-file-sink-common-1.15.1.jar:1.15.1]
at org.apache.flink.streaming.api.functions.sink.filesystem.Bucket.closePartFile(Bucket.java:263) ~[flink-streaming-java-1.15.1.jar:1.15.1]
at org.apache.flink.streaming.api.functions.sink.filesystem.Bucket.prepareBucketForCheckpointing(Bucket.java:305) ~[flink-streaming-java-1.15.1.jar:1.15.1]
at org.apache.flink.streaming.api.functions.sink.filesystem.Bucket.onReceptionOfCheckpoint(Bucket.java:277) ~[flink-streaming-java-1.15.1.jar:1.15.1]
at org.apache.flink.streaming.api.functions.sink.filesystem.Buckets.snapshotActiveBuckets(Buckets.java:270) ~[flink-streaming-java-1.15.1.jar:1.15.1]
at org.apache.flink.streaming.api.functions.sink.filesystem.Buckets.snapshotState(Buckets.java:261) ~[flink-streaming-java-1.15.1.jar:1.15.1]
at org.apache.flink.streaming.api.functions.sink.filesystem.StreamingFileSinkHelper.snapshotState(StreamingFileSinkHelper.java:87) ~[flink-streaming-java-1.15.1.jar:1.15.1]
at org.apache.flink.connector.file.table.stream.AbstractStreamingWriter.snapshotState(AbstractStreamingWriter.java:129) ~[flink-connector-files-1.15.1.jar:1.15.1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In my table config, I am trying to read from Kafka and write to S3 (s3a) using table API and checkpoint configuration using s3p (presto). Even I tried with a simple datagen example instead of Kafka with local file system as checkpointing (`&lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt;` instead of `s3p://`) and I am getting the same issue. Exactly it is fails when the code triggers the checkpoint.&lt;/p&gt;

&lt;p&gt;Some related slack conversation and SO conversation &lt;a href=&quot;https://apache-flink.slack.com/archives/C03G7LJTS2G/p1657609776339389&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, &lt;a href=&quot;https://stackoverflow.com/questions/62138635/flink-streaming-compression-not-working-using-amazon-aws-s3-connector-streaming&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;https://stackoverflow.com/questions/72943730/flink-table-api-streaming-s3-sink-throws-serializedthrowable-exception&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Since there is no work around for S3 table API streaming sink, I am marking this as critical. if this is not a relevant severity, feel free to reduce the priority. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13471197">FLINK-28513</key>
            <summary>Flink Table API CSV streaming sink throws SerializedThrowable exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="samrat007">Samrat Deb</assignee>
                                    <reporter username="jaya.ananthram">Jaya Ananthram</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>stale-assigned</label>
                    </labels>
                <created>Tue, 12 Jul 2022 10:34:40 +0000</created>
                <updated>Wed, 21 Aug 2024 11:46:59 +0000</updated>
                            <resolved>Mon, 4 Sep 2023 11:02:42 +0000</resolved>
                                    <version>1.15.1</version>
                                    <fixVersion>1.18.0</fixVersion>
                    <fixVersion>1.17.2</fixVersion>
                    <fixVersion>1.19.0</fixVersion>
                                    <component>FileSystems</component>
                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17643167" author="dannycranmer" created="Mon, 5 Dec 2022 08:50:37 +0000"  >&lt;p&gt;Assigning to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samrat007&quot; class=&quot;user-hover&quot; rel=&quot;samrat007&quot;&gt;samrat007&lt;/a&gt; as discussed offline&lt;/p&gt;</comment>
                            <comment id="17761646" author="flink-jira-bot" created="Sun, 3 Sep 2023 22:35:08 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issue is assigned but has not received an update in 30 days, so it has been labeled &quot;stale-assigned&quot;.&lt;br/&gt;
If you are still working on the issue, please remove the label and add a comment updating the community on your progress.  If this issue is waiting on feedback, please consider this a reminder to the committer/reviewer. Flink is a very active project, and so we appreciate your patience.&lt;br/&gt;
If you are no longer working on the issue, please unassign yourself so someone else may work on it.&lt;/p&gt;</comment>
                            <comment id="17761785" author="JIRAUSER292614" created="Mon, 4 Sep 2023 10:58:30 +0000"  >&lt;p&gt;&#160;merged commit&#160;&lt;a href=&quot;https://github.com/apache/flink/commit/e921489279ca70b179521ec4619514725b061491&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;e921489&lt;/tt&gt;&lt;/a&gt;&#160;into&#160;apache:master&lt;/p&gt;</comment>
                            <comment id="17761787" author="hong" created="Mon, 4 Sep 2023 11:03:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samrat007&quot; class=&quot;user-hover&quot; rel=&quot;samrat007&quot;&gt;samrat007&lt;/a&gt;&#160; Could we backport this bugfix to Flink 1.17 and 1.18 as well?&lt;/p&gt;</comment>
                            <comment id="17761790" author="samrat007" created="Mon, 4 Sep 2023 11:38:58 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liangtl&quot; class=&quot;user-hover&quot; rel=&quot;liangtl&quot;&gt;liangtl&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;backport for 1.17 :-&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/23351&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/23351&lt;/a&gt;&lt;br/&gt;
backport for 1.18 :-&#160;&#160;&lt;a href=&quot;https://github.com/apache/flink/pull/23352&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/23352&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please review whenever time&#160;&lt;/p&gt;</comment>
                            <comment id="17761794" author="samrat007" created="Mon, 4 Sep 2023 11:48:43 +0000"  >&lt;p&gt;I dont have access to update the fix version . Please help updating the `Fix Version/s` for this issue&lt;/p&gt;</comment>
                            <comment id="17761855" author="hong" created="Mon, 4 Sep 2023 15:16:30 +0000"  >&lt;p&gt;merged commit&#160;&lt;a href=&quot;https://github.com/apache/flink/commit/d06a297422fd4884aa21655fdf1f1bce94cc3a8a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;d06a297&lt;/tt&gt;&lt;/a&gt;&#160;into&#160;apache:release-1.17&lt;/p&gt;</comment>
                            <comment id="17761856" author="hong" created="Mon, 4 Sep 2023 15:16:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;I dont have access to update the fix version . Please help updating the `Fix Version/s` for this issue&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Updated&lt;/p&gt;</comment>
                            <comment id="17762039" author="hong" created="Tue, 5 Sep 2023 11:02:54 +0000"  >&lt;p&gt;merged commit&#160;&lt;a href=&quot;https://github.com/apache/flink/commit/2437cf568785a05ece70fde9f917637731740e46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;2437cf5&lt;/tt&gt;&lt;/a&gt;&#160;into&#160;apache:release-1.18&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13557740">FLINK-33536</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z16spk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>