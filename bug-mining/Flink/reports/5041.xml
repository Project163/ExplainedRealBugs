<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:52:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-21144] KubernetesResourceManagerDriver#tryResetPodCreationCoolDown causes fatal error</title>
                <link>https://issues.apache.org/jira/browse/FLINK-21144</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;tt&gt;KubernetesResourceManagerDriver#tryResetPodCreationCoolDown&lt;/tt&gt; is calling a not implemented method &lt;tt&gt;RpcEndpoint.MainThreadExecutor#schedule(Callable&amp;lt;V&amp;gt; callable, long delay, TimeUnit unit)&lt;/tt&gt;. This will cause a fatal error and make JobManager terminate exceptionally.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13354602">FLINK-21144</key>
            <summary>KubernetesResourceManagerDriver#tryResetPodCreationCoolDown causes fatal error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xtsong">Xintong Song</assignee>
                                    <reporter username="wangyang0918">Yang Wang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 26 Jan 2021 07:10:57 +0000</created>
                <updated>Thu, 28 Jan 2021 10:19:22 +0000</updated>
                            <resolved>Thu, 28 Jan 2021 10:19:22 +0000</resolved>
                                    <version>1.12.1</version>
                                    <fixVersion>1.12.2</fixVersion>
                    <fixVersion>1.13.0</fixVersion>
                                    <component>Deployment / Kubernetes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17271922" author="fly_in_gis" created="Tue, 26 Jan 2021 07:11:44 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17271929" author="fly_in_gis" created="Tue, 26 Jan 2021 07:27:48 +0000"  >&lt;p&gt;Since &lt;tt&gt;KubernetesResourceManagerDriver#tryResetPodCreationCoolDown&lt;/tt&gt; has already been replaced with &lt;tt&gt;ThresholdMeter&lt;/tt&gt; in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10868&quot; title=&quot;Flink&amp;#39;s JobCluster ResourceManager doesn&amp;#39;t use maximum-failed-containers as limit of resource acquirement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10868&quot;&gt;&lt;del&gt;FLINK-10868&lt;/del&gt;&lt;/a&gt;. Maybe we need to backport it to 1.12 or add a quick fix just for 1.12 branch.&lt;/p&gt;</comment>
                            <comment id="17271981" author="xintongsong" created="Tue, 26 Jan 2021 08:56:35 +0000"  >&lt;p&gt;Nice catch!&lt;/p&gt;

&lt;p&gt;This escaped our tests because we use a fully implemented executor in the tests.&lt;/p&gt;

&lt;p&gt;I think the proper fix might be to implement the missing methods in `MainThreadExecutor`. Per the error message, there&apos;re no strong reason against implementing those methods, except for there were not used. And we might also want to do that for the master branch, to avoid similar problems in future.&lt;/p&gt;</comment>
                            <comment id="17272049" author="fly_in_gis" created="Tue, 26 Jan 2021 11:37:03 +0000"  >&lt;p&gt;Great. +1 to implement these methods to avoid similar issues in the future.&lt;/p&gt;</comment>
                            <comment id="17272607" author="xintongsong" created="Wed, 27 Jan 2021 06:28:53 +0000"  >&lt;p&gt;After taking a closer look, I found it not trivial to support scheduling periodical executions in `MainThreadExecutor`.&lt;/p&gt;

&lt;p&gt;Scheduling periodical executions can be supported through `RpcService#getScheduledExecutor()`. However, exposing the `ScheduledExecutor` to the `RpcEndpoint#MainThreadExecutor` requires invasive changes to the current encapsulation.&lt;/p&gt;

&lt;p&gt;For now, I think we may only implement `MainThreadExecutor#schedule(callable, delay, unit)`, which should be enough to fix the `tryResetPodCreationCoolDown` problem.&lt;/p&gt;

&lt;p&gt;I&apos;ve opened a PR. Please take a look. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17273483" author="xintongsong" created="Thu, 28 Jan 2021 10:19:22 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;master (1.13): db27d6da4a9f5436711d1ff7613a3dd70e4be12d&lt;/li&gt;
	&lt;li&gt;release-1.12: 79f029c90f8d3109b0d8f6852eae627bc7c25989&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13319423">FLINK-18720</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mzmg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>