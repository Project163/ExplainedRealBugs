<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:51:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-20382] Exception thrown from JobMaster.startScheduling() may be ignored.</title>
                <link>https://issues.apache.org/jira/browse/FLINK-20382</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Currently &lt;tt&gt;JobMaster.resetAndStartScheduler()&lt;/tt&gt; invokes &lt;tt&gt;startScheduling()&lt;/tt&gt;&#160;in a&#160;&lt;tt&gt;thenRun&lt;/tt&gt;&#160;clause without &lt;tt&gt;exceptionally&lt;/tt&gt;&#160;or &lt;tt&gt;handle&lt;/tt&gt; to handle exceptions. The job may hang if an exception is thrown when starting scheduling, e.g. failed to create operator coordinators.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13342872">FLINK-20382</key>
            <summary>Exception thrown from JobMaster.startScheduling() may be ignored.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="becket_qin">Jiangjie Qin</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 26 Nov 2020 19:19:42 +0000</created>
                <updated>Thu, 3 Dec 2020 17:28:18 +0000</updated>
                            <resolved>Mon, 30 Nov 2020 09:31:10 +0000</resolved>
                                    <version>1.11.2</version>
                                    <fixVersion>1.11.3</fixVersion>
                    <fixVersion>1.12.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17239575" author="till.rohrmann" created="Fri, 27 Nov 2020 08:47:47 +0000"  >&lt;p&gt;Thanks for reporting this issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=becket_qin&quot; class=&quot;user-hover&quot; rel=&quot;becket_qin&quot;&gt;becket_qin&lt;/a&gt;. This is indeed a good finding. I will fix it.&lt;/p&gt;</comment>
                            <comment id="17239647" author="till.rohrmann" created="Fri, 27 Nov 2020 12:02:48 +0000"  >&lt;p&gt;The solution will be to fail hard because currently it is not expected that exceptions can be thrown from the &lt;tt&gt;SchedulerNG.startScheduling&lt;/tt&gt; method.&lt;/p&gt;</comment>
                            <comment id="17240601" author="till.rohrmann" created="Mon, 30 Nov 2020 09:31:10 +0000"  >&lt;p&gt;Fixed via&lt;/p&gt;

&lt;p&gt;master: f8e56226550f8fa1620b4650d83edc1993e210b8&lt;br/&gt;
1.12.0: c5188a1b36953c3cfb889c5866c4835cc3b5dcb5&lt;br/&gt;
1.11.3: dfa13d8b75ead9ce60ae982b469f70943ad69d35&lt;/p&gt;</comment>
                            <comment id="17240760" author="rmetzger" created="Mon, 30 Nov 2020 13:13:28 +0000"  >&lt;p&gt;Thanks for the quick fix! I agree that failing hard is a good short-term fix.&lt;/p&gt;

&lt;p&gt;But from a user&apos;s perspective, I would not expect my JobManager to exit if I submit a custom source implementation that throws an exception. &lt;a href=&quot;https://github.com/apache/flink/pull/14251#discussion_r531639026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;I guess failing the job with the exception&lt;/a&gt; thrown by the operator coordinator would be the expected behavior.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt; Can you take a look at his?&lt;/p&gt;</comment>
                            <comment id="17243197" author="stephanewen" created="Thu, 3 Dec 2020 14:05:46 +0000"  >&lt;p&gt;For the suggestion from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt;, a few questions:&lt;/p&gt;

&lt;p&gt;As far as I can tell, the &quot;startScheduling()&quot; method of the scheduler is called only once. So if the exception there is caught and triggers a global failure, then we will never try to start the coordinator again. So that sounds like it is not a feasible solution.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt; Could you confirm that?&lt;/p&gt;

&lt;p&gt;I would say, let keep the &quot;fatal error is start()&quot; behavior for now, because the sources should (in the future) no longer do anything in &quot;start()&quot; that fails.&lt;/p&gt;</comment>
                            <comment id="17243387" author="till.rohrmann" created="Thu, 3 Dec 2020 17:28:18 +0000"  >&lt;p&gt;Yes, the code is currently not written with the assumption that &lt;tt&gt;startScheduling&lt;/tt&gt; can fail and, hence, is lacking a retry. If we want to tolerate &lt;tt&gt;startScheduling&lt;/tt&gt; failures, then we need to change this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kz3k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>