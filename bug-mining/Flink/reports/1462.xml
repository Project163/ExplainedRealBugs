<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:26:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-5473] setMaxParallelism() higher than 1 is possible on non-parallel operators</title>
                <link>https://issues.apache.org/jira/browse/FLINK-5473</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;While trying out Flink 1.2, I found out that you can set a maxParallelism higher than 1 on a non-parallel operator.&lt;br/&gt;
I think we should have the same semantics as the setParallelism() method.&lt;/p&gt;

&lt;p&gt;Also, when setting a global maxParallelism in the execution environment, it will be set as a default value for the non-parallel operator.&lt;br/&gt;
When restoring a savepoint from 1.1, you have to set the maxParallelism to the parallelism of the 1.1 job. Non-parallel operators will then also get the maxPar set to this value, leading to an error on restore.&lt;/p&gt;

&lt;p&gt;So currently, users restoring from 1.1 to 1.2 have to manually set the maxParallelism to 1 for all non-parallel operators.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13034400">FLINK-5473</key>
            <summary>setMaxParallelism() higher than 1 is possible on non-parallel operators</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srichter">Stefan Richter</assignee>
                                    <reporter username="rmetzger">Robert Metzger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jan 2017 15:22:48 +0000</created>
                <updated>Thu, 23 Mar 2023 09:21:05 +0000</updated>
                            <resolved>Tue, 24 Jan 2017 14:54:07 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15821254" author="srichter" created="Thu, 12 Jan 2017 15:26:23 +0000"  >&lt;p&gt;We could try to automatically set the old parallelism as max parallelism by default.&lt;/p&gt;</comment>
                            <comment id="15821262" author="rmetzger" created="Thu, 12 Jan 2017 15:31:03 +0000"  >&lt;p&gt;That would be the best user experience, yes.&lt;/p&gt;</comment>
                            <comment id="15831939" author="githubbot" created="Fri, 20 Jan 2017 15:24:21 +0000"  >&lt;p&gt;GitHub user StefanRRichter opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5473&quot; title=&quot;setMaxParallelism() higher than 1 is possible on non-parallel operators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5473&quot;&gt;&lt;del&gt;FLINK-5473&lt;/del&gt;&lt;/a&gt; Limit MaxParallelism to 1 for non-parallel operators and improve choice of max parallelism without explicit configuration&lt;/p&gt;

&lt;p&gt;    This PR limits the maximum parallelism for non-parallel operator to 1.&lt;/p&gt;

&lt;p&gt;    Furthermore, this improves the default behaviour if the user did not explicitly specify a maximum parallelism. In particular, maximum parallelism can now be derived from savepoints, allowing users that migrate from Flink 1.1 to Flink 1.2 to keep their job unchanged.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/StefanRRichter/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/StefanRRichter/flink&lt;/a&gt; recover-max-para&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3182&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 20d0a3fc88c85a71b692c5408fc7b2fd33da8ff2&lt;br/&gt;
Author: Stefan Richter &amp;lt;s.richter@data-artisans.com&amp;gt;&lt;br/&gt;
Date:   2017-01-16T13:31:22Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5473&quot; title=&quot;setMaxParallelism() higher than 1 is possible on non-parallel operators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5473&quot;&gt;&lt;del&gt;FLINK-5473&lt;/del&gt;&lt;/a&gt; Limit max parallelism to 1 for non-parallel operators&lt;/p&gt;

&lt;p&gt;commit f6081f319b7f2ef8615557743d906bc4585445f7&lt;br/&gt;
Author: Stefan Richter &amp;lt;s.richter@data-artisans.com&amp;gt;&lt;br/&gt;
Date:   2017-01-16T17:41:37Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-5473&quot; title=&quot;setMaxParallelism() higher than 1 is possible on non-parallel operators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-5473&quot;&gt;&lt;del&gt;FLINK-5473&lt;/del&gt;&lt;/a&gt; Better default behaviours for unspecified maximum parallelism&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15831941" author="githubbot" created="Fri, 20 Jan 2017 15:24:39 +0000"  >&lt;p&gt;Github user StefanRRichter commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    cc @uce &lt;/p&gt;</comment>
                            <comment id="15834372" author="githubbot" created="Mon, 23 Jan 2017 12:25:08 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182#discussion_r97282806&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182#discussion_r97282806&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionJobVertex.java &amp;#8212;&lt;br/&gt;
    @@ -212,6 +206,19 @@ public ExecutionJobVertex(&lt;br/&gt;
     		finishedSubtasks = new boolean&lt;span class=&quot;error&quot;&gt;&amp;#91;parallelism&amp;#93;&lt;/span&gt;;&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	public void setMaxParallelismDerived(int maxParallelism) {&lt;br/&gt;
    +&lt;br/&gt;
    +		Preconditions.checkState(VALUE_NOT_SET == maxParallelismConfigured,&lt;br/&gt;
    +				&quot;Attempt to override a configured max parallelism. Configured: &quot; + maxParallelismConfigured&lt;br/&gt;
    +						+ &quot;, argument: &quot; + maxParallelism);&lt;br/&gt;
    +&lt;br/&gt;
    +		Preconditions.checkArgument(maxParallelism &amp;gt; 0&lt;br/&gt;
    +						&amp;amp;&amp;amp; maxParallelism &amp;lt;= KeyGroupRangeAssignment.UPPER_BOUND_MAX_PARALLELISM,&lt;br/&gt;
    +				&quot;Overriding max parallelism is not in valid bounds: &quot; + maxParallelism);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Maybe we could add the valid bounds here.&lt;/p&gt;</comment>
                            <comment id="15834373" author="githubbot" created="Mon, 23 Jan 2017 12:25:08 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182#discussion_r97293150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182#discussion_r97293150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionJobVertex.java &amp;#8212;&lt;br/&gt;
    @@ -230,9 +237,46 @@ public int getParallelism() &lt;/p&gt;
{
     		return parallelism;
     	}

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * Returns the effective max parallelism. This value is determined in the following order of priority:&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;&lt;br/&gt;
    +	 * (maxParallelismConfigured) overrides (maxParallelismOverride) override (max(128, roundUp(parallelism)) / default)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    `maxParallelismOverride` =&amp;gt; `maxParallelismDerived`?&lt;/p&gt;</comment>
                            <comment id="15834374" author="githubbot" created="Mon, 23 Jan 2017 12:25:08 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182#discussion_r97283204&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182#discussion_r97283204&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionVertex.java &amp;#8212;&lt;br/&gt;
    @@ -599,7 +602,24 @@ TaskDeploymentDescriptor createDeploymentDescriptor(&lt;br/&gt;
     		boolean lazyScheduling = getExecutionGraph().getScheduleMode().allowLazyDeployment();&lt;/p&gt;

&lt;p&gt;     		for (IntermediateResultPartition partition : resultPartitions.values()) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;producedPartitions.add(ResultPartitionDeploymentDescriptor.from(partition, lazyScheduling));&lt;br/&gt;
    +&lt;br/&gt;
    +			List&amp;lt;List&amp;lt;ExecutionEdge&amp;gt;&amp;gt; consumers = partition.getConsumers();&lt;br/&gt;
    +&lt;br/&gt;
    +			if(consumers.isEmpty()) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    whitespace missing between `if` and `(`&lt;/p&gt;</comment>
                            <comment id="15834375" author="githubbot" created="Mon, 23 Jan 2017 12:25:08 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182#discussion_r97280170&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182#discussion_r97280170&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/checkpoint/StateAssignmentOperation.java &amp;#8212;&lt;br/&gt;
    @@ -45,29 +45,37 @@&lt;/p&gt;

&lt;p&gt;     	private final Logger logger;&lt;br/&gt;
     	private final Map&amp;lt;JobVertexID, ExecutionJobVertex&amp;gt; tasks;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private final CompletedCheckpoint latest;&lt;br/&gt;
    +	private final Map&amp;lt;JobVertexID, TaskState&amp;gt; taskStates;&lt;br/&gt;
     	private final boolean allowNonRestoredState;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	public StateAssignmentOperation(&lt;br/&gt;
     			Logger logger,&lt;br/&gt;
     			Map&amp;lt;JobVertexID, ExecutionJobVertex&amp;gt; tasks,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;CompletedCheckpoint latest,&lt;br/&gt;
    +			Map&amp;lt;JobVertexID, TaskState&amp;gt; taskStates,&lt;br/&gt;
     			boolean allowNonRestoredState) {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     		this.logger = logger;&lt;br/&gt;
     		this.tasks = tasks;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this.latest = latest;&lt;br/&gt;
    +		this.taskStates = taskStates;&lt;br/&gt;
     		this.allowNonRestoredState = allowNonRestoredState;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    `Precondition` checks could be helpful here.&lt;/p&gt;</comment>
                            <comment id="15834376" author="githubbot" created="Mon, 23 Jan 2017 12:25:08 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182#discussion_r97281937&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182#discussion_r97281937&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/checkpoint/StateAssignmentOperation.java &amp;#8212;&lt;br/&gt;
    @@ -45,29 +45,37 @@&lt;/p&gt;

&lt;p&gt;     	private final Logger logger;&lt;br/&gt;
     	private final Map&amp;lt;JobVertexID, ExecutionJobVertex&amp;gt; tasks;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private final CompletedCheckpoint latest;&lt;br/&gt;
    +	private final Map&amp;lt;JobVertexID, TaskState&amp;gt; taskStates;&lt;br/&gt;
     	private final boolean allowNonRestoredState;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	public StateAssignmentOperation(&lt;br/&gt;
     			Logger logger,&lt;br/&gt;
     			Map&amp;lt;JobVertexID, ExecutionJobVertex&amp;gt; tasks,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;CompletedCheckpoint latest,&lt;br/&gt;
    +			Map&amp;lt;JobVertexID, TaskState&amp;gt; taskStates,&lt;br/&gt;
     			boolean allowNonRestoredState) 
{
     
     		this.logger = logger;
     		this.tasks = tasks;
    -		this.latest = latest;
    +		this.taskStates = taskStates;
     		this.allowNonRestoredState = allowNonRestoredState;
     	}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	public boolean assignStates() throws Exception {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This method seems a bit lengthy. Maybe we could split it up.&lt;/p&gt;</comment>
                            <comment id="15834377" author="githubbot" created="Mon, 23 Jan 2017 12:25:08 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182#discussion_r97282598&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182#discussion_r97282598&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionJobVertex.java &amp;#8212;&lt;br/&gt;
    @@ -57,47 +57,51 @@&lt;/p&gt;

&lt;p&gt;     	/** Use the same log for all ExecutionGraph classes */&lt;br/&gt;
     	private static final Logger LOG = ExecutionGraph.LOG;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;private final SerializableObject stateMonitor = new SerializableObject();&lt;br/&gt;
    +&lt;br/&gt;
    +	public static final int VALUE_NOT_SET = -1;&lt;br/&gt;
    +&lt;br/&gt;
    +	private final Object stateMonitor = new Object();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	private final ExecutionGraph graph;&lt;/p&gt;

&lt;p&gt;     	private final JobVertex jobVertex;&lt;/p&gt;

&lt;p&gt;     	private final ExecutionVertex[] taskVertices;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private IntermediateResult[] producedDataSets;&lt;br/&gt;
    +	private final IntermediateResult[] producedDataSets;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	private final List&amp;lt;IntermediateResult&amp;gt; inputs;&lt;/p&gt;

&lt;p&gt;     	private final int parallelism;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private final int maxParallelism;&lt;/li&gt;
	&lt;li&gt;&lt;br/&gt;
     	private final boolean[] finishedSubtasks;&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;private volatile int numSubtasksInFinalState;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     	private final SlotSharingGroup slotSharingGroup;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     	private final CoLocationGroup coLocationGroup;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     	private final InputSplit[] inputSplits;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +	private final int maxParallelismConfigured;&lt;br/&gt;
    +&lt;br/&gt;
    +	private int maxParallelismDerived;&lt;br/&gt;
    +&lt;br/&gt;
    +	private volatile int numSubtasksInFinalState;&lt;br/&gt;
    +&lt;br/&gt;
     	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Serialized task information which is for all sub tasks the same. Thus, it avoids to&lt;/li&gt;
	&lt;li&gt;serialize the same information multiple times in order to create the&lt;/li&gt;
	&lt;li&gt;TaskDeploymentDescriptors.&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private final SerializedValue&amp;lt;TaskInformation&amp;gt; serializedTaskInformation;&lt;br/&gt;
    +	private SerializedValue&amp;lt;TaskInformation&amp;gt; serializedTaskInformation;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	private InputSplitAssigner splitAssigner;&lt;/p&gt;

&lt;p&gt;     	public ExecutionJobVertex(&lt;br/&gt;
     		ExecutionGraph graph,&lt;br/&gt;
     		JobVertex jobVertex,&lt;br/&gt;
     		int defaultParallelism,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Time timeout) throws JobException, IOException {&lt;br/&gt;
    +		Time timeout) throws JobException {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Method declaration parameters which are broken into multiple lines are usually indented twice.&lt;/p&gt;</comment>
                            <comment id="15834378" author="githubbot" created="Mon, 23 Jan 2017 12:25:08 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182#discussion_r97286408&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182#discussion_r97286408&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/runtime/tasks/OperatorChain.java &amp;#8212;&lt;br/&gt;
    @@ -94,6 +95,9 @@ public OperatorChain(StreamTask&amp;lt;OUT, OP&amp;gt; containingTask) {&lt;br/&gt;
     		try {&lt;br/&gt;
     			for (int i = 0; i &amp;lt; outEdgesInOrder.size(); i++) {&lt;br/&gt;
     				StreamEdge outEdge = outEdgesInOrder.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    One line break would probably be enough here.&lt;/p&gt;</comment>
                            <comment id="15834714" author="githubbot" created="Mon, 23 Jan 2017 15:10:40 +0000"  >&lt;p&gt;Github user StefanRRichter commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182#discussion_r97337263&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182#discussion_r97337263&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionJobVertex.java &amp;#8212;&lt;br/&gt;
    @@ -57,47 +57,51 @@&lt;/p&gt;

&lt;p&gt;     	/** Use the same log for all ExecutionGraph classes */&lt;br/&gt;
     	private static final Logger LOG = ExecutionGraph.LOG;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;private final SerializableObject stateMonitor = new SerializableObject();&lt;br/&gt;
    +&lt;br/&gt;
    +	public static final int VALUE_NOT_SET = -1;&lt;br/&gt;
    +&lt;br/&gt;
    +	private final Object stateMonitor = new Object();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	private final ExecutionGraph graph;&lt;/p&gt;

&lt;p&gt;     	private final JobVertex jobVertex;&lt;/p&gt;

&lt;p&gt;     	private final ExecutionVertex[] taskVertices;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private IntermediateResult[] producedDataSets;&lt;br/&gt;
    +	private final IntermediateResult[] producedDataSets;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	private final List&amp;lt;IntermediateResult&amp;gt; inputs;&lt;/p&gt;

&lt;p&gt;     	private final int parallelism;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private final int maxParallelism;&lt;/li&gt;
	&lt;li&gt;&lt;br/&gt;
     	private final boolean[] finishedSubtasks;&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;private volatile int numSubtasksInFinalState;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     	private final SlotSharingGroup slotSharingGroup;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     	private final CoLocationGroup coLocationGroup;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;    +&lt;br/&gt;
     	private final InputSplit[] inputSplits;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +	private final int maxParallelismConfigured;&lt;br/&gt;
    +&lt;br/&gt;
    +	private int maxParallelismDerived;&lt;br/&gt;
    +&lt;br/&gt;
    +	private volatile int numSubtasksInFinalState;&lt;br/&gt;
    +&lt;br/&gt;
     	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Serialized task information which is for all sub tasks the same. Thus, it avoids to&lt;/li&gt;
	&lt;li&gt;serialize the same information multiple times in order to create the&lt;/li&gt;
	&lt;li&gt;TaskDeploymentDescriptors.&lt;br/&gt;
     	 */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private final SerializedValue&amp;lt;TaskInformation&amp;gt; serializedTaskInformation;&lt;br/&gt;
    +	private SerializedValue&amp;lt;TaskInformation&amp;gt; serializedTaskInformation;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	private InputSplitAssigner splitAssigner;&lt;/p&gt;

&lt;p&gt;     	public ExecutionJobVertex(&lt;br/&gt;
     		ExecutionGraph graph,&lt;br/&gt;
     		JobVertex jobVertex,&lt;br/&gt;
     		int defaultParallelism,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Time timeout) throws JobException, IOException {&lt;br/&gt;
    +		Time timeout) throws JobException {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    You are right, but I kept the indentation to avoid formatting changes.&lt;/p&gt;</comment>
                            <comment id="15834718" author="githubbot" created="Mon, 23 Jan 2017 15:11:47 +0000"  >&lt;p&gt;Github user StefanRRichter commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review, @tillrohrmann! I followed all of your suggestions, except for the indentation formatting.&lt;/p&gt;</comment>
                            <comment id="15834774" author="githubbot" created="Mon, 23 Jan 2017 15:41:06 +0000"  >&lt;p&gt;Github user StefanRRichter commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Rebased.&lt;/p&gt;</comment>
                            <comment id="15835853" author="githubbot" created="Tue, 24 Jan 2017 08:45:02 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Changes look good. Travis passed. Merging this PR. Thanks for your work @StefanRRichter &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15835919" author="rmetzger" created="Tue, 24 Jan 2017 09:49:52 +0000"  >&lt;p&gt;Resolved for 1.2 in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flink/commit/993a2e2f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flink/commit/993a2e2f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15835968" author="aljoscha" created="Tue, 24 Jan 2017 10:16:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmetzger&quot; class=&quot;user-hover&quot; rel=&quot;rmetzger&quot;&gt;rmetzger&lt;/a&gt; can this be closed, then?&lt;/p&gt;</comment>
                            <comment id="15836051" author="githubbot" created="Tue, 24 Jan 2017 11:25:23 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ve merged the PR to the `release-1.2` branch.&lt;/p&gt;</comment>
                            <comment id="15836182" author="rmetzger" created="Tue, 24 Jan 2017 14:25:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; No, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt; wants to merge it to master as well.&lt;/p&gt;</comment>
                            <comment id="15836203" author="githubbot" created="Tue, 24 Jan 2017 14:53:42 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3182&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15836204" author="till.rohrmann" created="Tue, 24 Jan 2017 14:54:07 +0000"  >&lt;p&gt;1.3.0: acfeeaf5e337e56300d10a3a991e79edc827ac7a&lt;br/&gt;
1.2.0: 993a2e2fa0ceecff0979a267ace7cd7b8e05d359&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13493869">FLINK-29822</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38n53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>