<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6602] Table source with defined time attributes allows empty string</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6602</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;tt&gt;DefinedRowtimeAttribute&lt;/tt&gt; and &lt;tt&gt;DefinedProctimeAttribute&lt;/tt&gt; are not checked for empty strings.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13072480">FLINK-6602</key>
            <summary>Table source with defined time attributes allows empty string</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lmalds">Zhe Li</assignee>
                                    <reporter username="twalthr">Timo Walther</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 May 2017 14:54:16 +0000</created>
                <updated>Mon, 19 Jun 2017 22:22:10 +0000</updated>
                            <resolved>Mon, 19 Jun 2017 22:22:10 +0000</resolved>
                                                    <fixVersion>1.3.1</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Table SQL / API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16036675" author="lmalds" created="Mon, 5 Jun 2017 08:30:53 +0000"  >&lt;p&gt;Checking the rowtime and proctime are not allowed empty string in StreamTableEnvironment#validateAndExtractTimeAttributes when called registerDataStreamInternal method, such as below code (added on line 485):&lt;/p&gt;

&lt;p&gt;// rowtime and proctime are not allowed empty string&lt;br/&gt;
    if (rowtime.isDefined &amp;amp;&amp;amp; rowtime.get._2.trim == &quot;&quot;) &lt;/p&gt;
{
      throw new TableException(
        &quot;The rowtime attribute are not allowed empty string.&quot;)
    }

&lt;p&gt;    if (proctime.isDefined &amp;amp;&amp;amp; rowtime.get._2.trim == &quot;&quot;) &lt;/p&gt;
{
      throw new TableException(
        &quot;The proctime attribute are not allowed empty string.&quot;)
    }

&lt;p&gt;Is it right?&lt;/p&gt;</comment>
                            <comment id="16038973" author="twalthr" created="Tue, 6 Jun 2017 14:25:23 +0000"  >&lt;p&gt;Yes, I would also check for null and change the message to &quot;The name of the XXXX attribute must not be empty.&quot;.&lt;/p&gt;</comment>
                            <comment id="16038991" author="fhueske" created="Tue, 6 Jun 2017 14:34:45 +0000"  >&lt;p&gt;I think we should allow &lt;tt&gt;null&lt;/tt&gt; to indicate that no time attribute should be added. &lt;br/&gt;
Otherwise we need TableSource implementations for all combinations of none, event-time, processing-time, and both.&lt;/p&gt;</comment>
                            <comment id="16046298" author="lmalds" created="Mon, 12 Jun 2017 07:54:15 +0000"  >&lt;p&gt;Timo &amp;amp; Fabian,&lt;/p&gt;

&lt;p&gt;I have 2 problems to confirm.&lt;/p&gt;

&lt;p&gt;(1) I think this problem only appeared when called StreamTableSourceTable#getRowType method, but not StreamTableEnvironment#validateAndExtractTimeAttributes, so we should check in the method of getRowType, line 42 and 50, is it right?&lt;/p&gt;

&lt;p&gt;(2) When check timeSource.getRowtimeAttribute or timeSource.getProctimeAttribute is null or not, (line 42 and 50), we should add codes to check  whether &apos;XXXXAttribute&apos; is empty string, if yes, we can treat it as None. Such as following codes:&lt;/p&gt;

&lt;p&gt;//case timeSource: DefinedRowtimeAttribute if timeSource.getRowtimeAttribute != null =&amp;gt;&lt;br/&gt;
case timeSource: DefinedRowtimeAttribute if timeSource.getRowtimeAttribute != null &amp;amp;&amp;amp; !timeSource.getRowtimeAttribute.trim.equals(&quot;&quot;) =&amp;gt;&lt;br/&gt;
...&lt;br/&gt;
//case timeSource: DefinedProctimeAttribute if timeSource.getProctimeAttribute != null =&amp;gt;&lt;br/&gt;
case timeSource: DefinedProctimeAttribute if timeSource.getProctimeAttribute != null &amp;amp;&amp;amp; !timeSource.getProctimeAttribute.trim.equals(&quot;&quot;) =&amp;gt;&lt;/p&gt;

&lt;p&gt;is it right?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="16048857" author="fhueske" created="Wed, 14 Jun 2017 08:27:33 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmalds&quot; class=&quot;user-hover&quot; rel=&quot;lmalds&quot;&gt;lmalds&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;yes, we need to fix this issue in &lt;tt&gt;StreamTableSourceTable&lt;/tt&gt; and not in &lt;tt&gt;StreamTableEnvironment&lt;/tt&gt;.&lt;br/&gt;
However, I don&apos;t think we should treat an empty string the same way as &lt;tt&gt;null&lt;/tt&gt;. Instead I would throw a &lt;tt&gt;TableException&lt;/tt&gt; if the string is empty.&lt;/p&gt;</comment>
                            <comment id="16050038" author="lmalds" created="Thu, 15 Jun 2017 06:05:37 +0000"  >&lt;p&gt;Fabian&#65292;&lt;/p&gt;

&lt;p&gt;I understand what you mean.&lt;/p&gt;

&lt;p&gt;So I modified the codes in StreamTableSourceTable#getRowType to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  val rowtime = tableSource match {
      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; emptyStringTimeSource : DefinedRowtimeAttribute &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; emptyStringTimeSource.getRowtimeAttribute.trim.equals(&quot;&quot;)  =&amp;gt;
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; TableException(&lt;span class=&quot;code-quote&quot;&gt;&quot;The name of the rowtime attribute must not be empty.&quot;&lt;/span&gt;)

      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; timeSource: DefinedRowtimeAttribute &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; timeSource.getRowtimeAttribute != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;  =&amp;gt;
        val rowtimeAttribute = timeSource.getRowtimeAttribute
        Some((fieldCnt, rowtimeAttribute))
      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; _ =&amp;gt;
        None
    }

    val proctime = tableSource match {
      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; emptyStringTimeSource : DefinedProctimeAttribute &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; emptyStringTimeSource.getProctimeAttribute.trim.equals(&quot;&quot;)  =&amp;gt;
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; TableException(&lt;span class=&quot;code-quote&quot;&gt;&quot;The name of the proctime attribute must not be empty.&quot;&lt;/span&gt;)

      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; timeSource: DefinedProctimeAttribute &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; timeSource.getProctimeAttribute != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;  =&amp;gt;
        val proctimeAttribute = timeSource.getProctimeAttribute
        Some((fieldCnt + (&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (rowtime.isDefined) 1 &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; 0), proctimeAttribute))
      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; _ =&amp;gt;
        None
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If there is nothing problem, could I fix the issue? &lt;/p&gt;

&lt;p&gt;Below is my Jira profile:&lt;/p&gt;

&lt;p&gt;Username:	lmalds&lt;br/&gt;
Full Name:	Zhe Li&lt;/p&gt;

&lt;p&gt;please assign me the update privilege.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="16050224" author="fhueske" created="Thu, 15 Jun 2017 09:28:13 +0000"  >&lt;p&gt;The fix looks good! Please open a pull request with that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I also gave you contributor permissions for the Flink JIRA.&lt;br/&gt;
You can now also assign other issues to yourself.&lt;/p&gt;

&lt;p&gt;Thank you, Fabian&lt;/p&gt;</comment>
                            <comment id="16052025" author="lmalds" created="Fri, 16 Jun 2017 15:20:34 +0000"  >&lt;p&gt;It&apos;s my pleasure&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I have opened a pull request just now.&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="16054855" author="fhueske" created="Mon, 19 Jun 2017 22:22:10 +0000"  >&lt;p&gt;Fixed for 1.3.1 with c7f6d0245cd0d47a99d9badcd43f1ebb8758125e&lt;br/&gt;
Fixed for 1.4.0 with 850e4d913bf33d90409a078dab2fbc26bfa976ce&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12873061" name="getRowType.png" size="49955" author="lmalds" created="Thu, 15 Jun 2017 05:54:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3f26v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>