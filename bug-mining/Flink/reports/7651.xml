<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:21:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-36350] IllegalAccessError detected in JDK17+ runs</title>
                <link>https://issues.apache.org/jira/browse/FLINK-36350</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;UnalignedCheckpointRescaleITCase and GroupReduceITCase are affected in JDK17 and JDK21 test profiles.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=62359&amp;amp;view=logs&amp;amp;j=a596f69e-60d2-5a4b-7d39-dc69e4cdaed3&amp;amp;t=712ade8c-ca16-5b76-3acd-14df33bc1cb1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=62359&amp;amp;view=logs&amp;amp;j=a596f69e-60d2-5a4b-7d39-dc69e4cdaed3&amp;amp;t=712ade8c-ca16-5b76-3acd-14df33bc1cb1&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13592913">FLINK-36350</key>
            <summary>IllegalAccessError detected in JDK17+ runs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yyhx">xuhuang</assignee>
                                    <reporter username="mapohl">Matthias Pohl</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Mon, 23 Sep 2024 07:31:35 +0000</created>
                <updated>Mon, 14 Oct 2024 02:21:34 +0000</updated>
                            <resolved>Mon, 14 Oct 2024 02:21:34 +0000</resolved>
                                    <version>2.0-preview</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17883732" author="mapohl" created="Mon, 23 Sep 2024 07:32:38 +0000"  >&lt;p&gt;I didn&apos;t verify it but I assume it might be also related to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-29741&quot; title=&quot;[FLIP-265] Remove all Scala APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-29741&quot;&gt;&lt;del&gt;FLINK-29741&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17883734" author="mapohl" created="Mon, 23 Sep 2024 07:33:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yyhx&quot; class=&quot;user-hover&quot; rel=&quot;yyhx&quot;&gt;yyhx&lt;/a&gt; can you have a look at it?&lt;/p&gt;</comment>
                            <comment id="17883947" author="JIRAUSER300304" created="Mon, 23 Sep 2024 16:27:53 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I&apos;ve identified the cause of the &quot;Illegal Access Error&quot; in JDK 17+.&lt;/p&gt;

&lt;p&gt;You are right, it is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-29741&quot; title=&quot;[FLIP-265] Remove all Scala APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-29741&quot;&gt;&lt;del&gt;FLINK-29741&lt;/del&gt;&lt;/a&gt; and the pull request &lt;a href=&quot;https://github.com/apache/flink/pull/25324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;25324&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I have submitted a fix in pull request &lt;a href=&quot;https://github.com/apache/flink/pull/25379&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;25379&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here are the details:&lt;/p&gt;

&lt;p&gt;According to the &lt;a href=&quot;https://github.com/EsotericSoftware/kryo?tab=readme-ov-file#instantiatorstrategy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Kryo Object Creation documentation&lt;/a&gt;, there are two types of object creation strategies: the &lt;em&gt;DefaultInstantiatorStrategy&lt;/em&gt;, which creates objects using a no-argument constructor, and the &lt;em&gt;StdInstantiatorStrategy&lt;/em&gt;, which utilizes JVM-specific APIs to create instances without invoking any constructors.&lt;/p&gt;

&lt;p&gt;In JDK 17+ &lt;a href=&quot;https://docs.oracle.com/en/java/javase/17/migrate/migrating-jdk-8-later-jdk-releases.html#GUID-7BB28E4D-99B3-4078-BDC4-FC24180CE82B&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Strong Encapsulation&lt;/a&gt;, some class reflection issues arise, such as with &lt;em&gt;org.apache.flink.test.checkpointing.UnalignedCheckpointRescaleITCase$VerifyingSink$State&lt;/em&gt;. In these cases, the &lt;em&gt;DefaultInstantiatorStrategy&lt;/em&gt;, which relies on class constructors, can lead to an IllegalAccessError, while the &lt;em&gt;StdInstantiatorStrategy&lt;/em&gt; does not encounter this issue.&lt;/p&gt;

&lt;p&gt;Before pull request &lt;a href=&quot;https://github.com/apache/flink/pull/25324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;25324&lt;/a&gt;, Flink always used the &lt;em&gt;StdInstantiatorStrategy&lt;/em&gt; in both the test and installed environments, as the &lt;em&gt;FlinkScalaKryoInstantiator&lt;/em&gt; was present in the classpath and utilized the &lt;em&gt;StdInstantiatorStrategy&lt;/em&gt;. The detailed logic can be found in &lt;em&gt;org.apache.flink.api.java.typeutils.runtime.kryo.KryoSerializer#getKryoInstance&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;However, pull request &lt;a href=&quot;https://github.com/apache/flink/pull/25324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;25324&lt;/a&gt; removed the &lt;em&gt;FlinkScalaKryoInstantiator&lt;/em&gt; class dependency from the flink-test pom.xml, causing Flink to use the DefaultInstantiatorStrategy in the test environment, which results in the IllegalAccessError.&lt;/p&gt;

&lt;p&gt;Given that the &lt;em&gt;FlinkScalaKryoInstantiator&lt;/em&gt; is related to deprecated Scala APIs, I think it should be removed ultimatly, and we should use the &lt;em&gt;StdInstantiatorStrategy&lt;/em&gt;, as was done previously in Flink.&lt;/p&gt;

&lt;p&gt;WDYT?&lt;/p&gt;</comment>
                            <comment id="17884000" author="JIRAUSER300304" created="Mon, 23 Sep 2024 19:02:04 +0000"  >&lt;p&gt;Sorry, I found that my thought was incorrect. Using only &lt;em&gt;StdInstantiatorStrategy&lt;/em&gt; may still lead to exceptions.&lt;/p&gt;

&lt;p&gt;For example, &lt;em&gt;org.apache.flink.api.common.serialization.TypeInformationSerializationSchemaTest#testDeSerialization&lt;/em&gt; will throw a Null Pointer Exception because the constructor for &lt;em&gt;org.apache.flink.api.common.serialization.TypeInformationSerializationSchemaTest.MyPOJO&lt;/em&gt; has not been executed. The failed attempt can be found at this commit: &lt;a href=&quot;https://github.com/apache/flink/pull/25379/commits/2bd2b8d896e28d67e4423dc0ab625fb623ea29cf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/25379/commits/2bd2b8d896e28d67e4423dc0ab625fb623ea29cf&lt;/a&gt;, and the CI report is available here: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=62407&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=24c3384f-1bcb-57b3-224f-51bf973bbee8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=62407&amp;amp;view=logs&amp;amp;j=0da23115-68bb-5dcd-192c-bd4c8adebde1&amp;amp;t=24c3384f-1bcb-57b3-224f-51bf973bbee8&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;We need to explore other solutions &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="17884169" author="mapohl" created="Tue, 24 Sep 2024 08:06:48 +0000"  >&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=62413&amp;amp;view=logs&amp;amp;j=a657ddbf-d986-5381-9649-342d9c92e7fb&amp;amp;t=dc085d4a-05c8-580e-06ab-21f5624dab16&amp;amp;l=13523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=62413&amp;amp;view=logs&amp;amp;j=a657ddbf-d986-5381-9649-342d9c92e7fb&amp;amp;t=dc085d4a-05c8-580e-06ab-21f5624dab16&amp;amp;l=13523&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=62413&amp;amp;view=logs&amp;amp;j=a596f69e-60d2-5a4b-7d39-dc69e4cdaed3&amp;amp;t=712ade8c-ca16-5b76-3acd-14df33bc1cb1&amp;amp;l=13519&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=62413&amp;amp;view=logs&amp;amp;j=a596f69e-60d2-5a4b-7d39-dc69e4cdaed3&amp;amp;t=712ade8c-ca16-5b76-3acd-14df33bc1cb1&amp;amp;l=13519&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17889063" author="weijie guo" created="Mon, 14 Oct 2024 02:21:34 +0000"  >&lt;p&gt;master(2.0) via d6cb8b39aa7818449934d53e1c4c7d4c7dea9dae.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13490561">FLINK-29741</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1rk20:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>