<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:20:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2600] Failing ElasticsearchSinkITCase.testNodeClient test case</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2600</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I observed that the &lt;tt&gt;ElasticsearchSinkITCase.testNodeClient&lt;/tt&gt; test case fails on Travis. The stack trace is&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.flink.runtime.client.JobExecutionException: Job execution failed.
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1.applyOrElse(JobManager.scala:414)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply$mcVL$sp(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:25)
	at org.apache.flink.runtime.testingUtils.TestingJobManager$$anonfun$handleTestingMessage$1.applyOrElse(TestingJobManager.scala:285)
	at scala.PartialFunction$OrElse.apply(PartialFunction.scala:162)
	at org.apache.flink.runtime.LeaderSessionMessageFilter$$anonfun$receive$1.applyOrElse(LeaderSessionMessageFilter.scala:36)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply$mcVL$sp(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:33)
	at scala.runtime.AbstractPartialFunction$mcVL$sp.apply(AbstractPartialFunction.scala:25)
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:33)
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:28)
	at scala.PartialFunction$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;applyOrElse(PartialFunction.scala:118)
	at org.apache.flink.runtime.LogMessages$$anon$1.applyOrElse(LogMessages.scala:28)
	at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundReceive(Actor.scala:465)
	at org.apache.flink.runtime.jobmanager.JobManager.aroundReceive(JobManager.scala:104)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)
	at akka.actor.ActorCell.invoke(ActorCell.scala:487)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:254)
	at akka.dispatch.Mailbox.run(Mailbox.scala:221)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:231)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
Caused by: java.lang.RuntimeException: An error occured in ElasticsearchSink.
	at org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSink.close(ElasticsearchSink.java:307)
	at org.apache.flink.api.common.functions.util.FunctionUtils.closeFunction(FunctionUtils.java:40)
	at org.apache.flink.streaming.api.operators.AbstractUdfStreamOperator.close(AbstractUdfStreamOperator.java:75)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.closeAllOperators(StreamTask.java:243)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:185)
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:581)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: java.lang.RuntimeException: IndexMissingException[[my-index] missing]
	at org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSink$1.afterBulk(ElasticsearchSink.java:240)
	at org.elasticsearch.action.bulk.BulkProcessor.execute(BulkProcessor.java:316)
	at org.elasticsearch.action.bulk.BulkProcessor.executeIfNeeded(BulkProcessor.java:299)
	at org.elasticsearch.action.bulk.BulkProcessor.internalAdd(BulkProcessor.java:281)
	at org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:264)
	at org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:260)
	at org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:246)
	at org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSink.invoke(ElasticsearchSink.java:286)
	at org.apache.flink.streaming.api.operators.StreamSink.processElement(StreamSink.java:37)
	at org.apache.flink.streaming.runtime.io.StreamInputProcessor.processInput(StreamInputProcessor.java:163)
	at org.apache.flink.streaming.runtime.tasks.OneInputStreamTask.run(OneInputStreamTask.java:56)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:172)
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:581)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Resources:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/78055773/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/78055773/log.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12860939">FLINK-2600</key>
            <summary>Failing ElasticsearchSinkITCase.testNodeClient test case</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>test-stability</label>
                    </labels>
                <created>Tue, 1 Sep 2015 08:49:44 +0000</created>
                <updated>Fri, 13 Oct 2017 16:05:04 +0000</updated>
                            <resolved>Fri, 13 Oct 2017 16:05:04 +0000</resolved>
                                                                    <component>Connectors / Common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14725018" author="aljoscha" created="Tue, 1 Sep 2015 09:05:19 +0000"  >&lt;p&gt;This might not be reproducible, the Elasicsearch sink has been in there for a few weeks now and we never saw this. Nevertheless, I will look into how we can harden this.&lt;/p&gt;</comment>
                            <comment id="14734764" author="huangwei" created="Tue, 8 Sep 2015 12:53:07 +0000"  >&lt;p&gt;Hi, &lt;br/&gt;
&lt;a href=&quot;https://travis-ci.org/apache/flink/builds/79250039&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/builds/79250039&lt;/a&gt;&lt;br/&gt;
Is it the same issue?&lt;br/&gt;
Log following:&lt;br/&gt;
`Running org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSinkITCase&lt;br/&gt;
Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 7.352 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSinkITCase&lt;br/&gt;
testNodeClient(org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSinkITCase)  Time elapsed: 1.372 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
org.apache.flink.runtime.client.JobExecutionException: Job execution failed.&lt;br/&gt;
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1.applyOrElse(JobManager.scala:414)&lt;br/&gt;
	at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:36)&lt;br/&gt;
	at org.apache.flink.runtime.testingUtils.TestingJobManager$$anonfun$handleTestingMessage$1.applyOrElse(TestingJobManager.scala:285)&lt;br/&gt;
	at scala.PartialFunction$OrElse.apply(PartialFunction.scala:167)&lt;br/&gt;
	at org.apache.flink.runtime.LeaderSessionMessageFilter$$anonfun$receive$1.applyOrElse(LeaderSessionMessageFilter.scala:36)&lt;br/&gt;
	at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:36)&lt;br/&gt;
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:33)&lt;br/&gt;
	at org.apache.flink.runtime.LogMessages$$anon$1.apply(LogMessages.scala:28)&lt;br/&gt;
	at scala.PartialFunction$class.applyOrElse(PartialFunction.scala:123)&lt;br/&gt;
	at org.apache.flink.runtime.LogMessages$$anon$1.applyOrElse(LogMessages.scala:28)&lt;br/&gt;
	at akka.actor.Actor$class.aroundReceive(Actor.scala:465)&lt;br/&gt;
	at org.apache.flink.runtime.jobmanager.JobManager.aroundReceive(JobManager.scala:104)&lt;br/&gt;
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:516)&lt;br/&gt;
	at akka.actor.ActorCell.invoke(ActorCell.scala:487)&lt;br/&gt;
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:254)&lt;br/&gt;
	at akka.dispatch.Mailbox.run(Mailbox.scala:221)&lt;br/&gt;
	at akka.dispatch.Mailbox.exec(Mailbox.scala:231)&lt;br/&gt;
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)&lt;br/&gt;
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)&lt;br/&gt;
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)&lt;br/&gt;
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)&lt;br/&gt;
Caused by: java.lang.RuntimeException: An error occured in ElasticsearchSink.&lt;br/&gt;
	at org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSink.close(ElasticsearchSink.java:307)&lt;br/&gt;
	at org.apache.flink.api.common.functions.util.FunctionUtils.closeFunction(FunctionUtils.java:40)&lt;br/&gt;
	at org.apache.flink.streaming.api.operators.AbstractUdfStreamOperator.close(AbstractUdfStreamOperator.java:75)&lt;br/&gt;
	at org.apache.flink.streaming.runtime.tasks.StreamTask.closeAllOperators(StreamTask.java:243)&lt;br/&gt;
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:185)&lt;br/&gt;
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:581)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
Caused by: java.lang.RuntimeException: IndexMissingException[&lt;span class=&quot;error&quot;&gt;&amp;#91;my-index&amp;#93;&lt;/span&gt; missing]&lt;br/&gt;
	at org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSink$1.afterBulk(ElasticsearchSink.java:240)&lt;br/&gt;
	at org.elasticsearch.action.bulk.BulkProcessor.execute(BulkProcessor.java:316)&lt;br/&gt;
	at org.elasticsearch.action.bulk.BulkProcessor.executeIfNeeded(BulkProcessor.java:299)&lt;br/&gt;
	at org.elasticsearch.action.bulk.BulkProcessor.internalAdd(BulkProcessor.java:281)&lt;br/&gt;
	at org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:264)&lt;br/&gt;
	at org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:260)&lt;br/&gt;
	at org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:246)&lt;br/&gt;
	at org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSink.invoke(ElasticsearchSink.java:286)&lt;br/&gt;
	at org.apache.flink.streaming.api.operators.StreamSink.processElement(StreamSink.java:37)&lt;br/&gt;
	at org.apache.flink.streaming.runtime.io.StreamInputProcessor.processInput(StreamInputProcessor.java:163)&lt;br/&gt;
	at org.apache.flink.streaming.runtime.tasks.OneInputStreamTask.run(OneInputStreamTask.java:56)&lt;br/&gt;
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:172)&lt;br/&gt;
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:581)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;


&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests in error: &lt;br/&gt;
  ElasticsearchSinkITCase.testNodeClient &#187; JobExecution Job execution failed.&lt;/p&gt;

&lt;p&gt;Tests run: 3, Failures: 0, Errors: 1, Skipped: 0`&lt;/p&gt;</comment>
                            <comment id="14734767" author="aljoscha" created="Tue, 8 Sep 2015 12:59:03 +0000"  >&lt;p&gt;Yes, that&apos;s the same issue.&lt;/p&gt;</comment>
                            <comment id="14734773" author="stephanewen" created="Tue, 8 Sep 2015 13:10:05 +0000"  >&lt;p&gt;Would be nice to harden such tests that can spuriously fail in the external dependencies.&lt;/p&gt;

&lt;p&gt;How about having a loop of re-tries (up to 5 times) until it works? For errors that are out of our hands, this may help reducing the number of failed builds we see...&lt;/p&gt;</comment>
                            <comment id="14734782" author="huangwei" created="Tue, 8 Sep 2015 13:17:58 +0000"  >&lt;p&gt;If retry I think it is better that record the fail in somewhere even the test is passed finally.&lt;br/&gt;
After all, if there is a problem it needs to be solved.&lt;/p&gt;</comment>
                            <comment id="14734811" author="aljoscha" created="Tue, 8 Sep 2015 13:46:08 +0000"  >&lt;p&gt;There are surefire/failsafe configs that allow rerunning tests: &lt;br/&gt;
&lt;a href=&quot;https://maven.apache.org/surefire/maven-surefire-plugin/examples/rerun-failing-tests.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-surefire-plugin/examples/rerun-failing-tests.html&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://maven.apache.org/surefire/maven-failsafe-plugin/examples/rerun-failing-tests.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-failsafe-plugin/examples/rerun-failing-tests.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Should we maybe set those? These would help with all flaky tests.&lt;/p&gt;</comment>
                            <comment id="14734869" author="stephanewen" created="Tue, 8 Sep 2015 14:18:14 +0000"  >&lt;p&gt;These would retry all tests. That masks valid failures in unstable features.&lt;/p&gt;

&lt;p&gt;I would not use these unless you can activate them for very specific tests...&lt;/p&gt;</comment>
                            <comment id="14735341" author="rmetzger" created="Tue, 8 Sep 2015 18:28:22 +0000"  >&lt;p&gt;We can set the surefire/failsafe settings on a per maven module basis. I would enable this for the &quot;flink-yarn-tests&quot;, the fs tests and elasticsearch.&lt;/p&gt;</comment>
                            <comment id="14735371" author="githubbot" created="Tue, 8 Sep 2015 18:44:55 +0000"  >&lt;p&gt;GitHub user aljoscha opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1108&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1108&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2600&quot; title=&quot;Failing ElasticsearchSinkITCase.testNodeClient test case&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2600&quot;&gt;&lt;del&gt;FLINK-2600&lt;/del&gt;&lt;/a&gt; Enable test rerun for Elasticsearch Tests&lt;/p&gt;

&lt;p&gt;    This also bumps surefire/failsafe version to 2.8.1&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/aljoscha/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aljoscha/flink&lt;/a&gt; el-test-rerun&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1108.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1108.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1108&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3065a9d34c62baee2311580aae7f9081cfcf058c&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-09-08T18:43:05Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2600&quot; title=&quot;Failing ElasticsearchSinkITCase.testNodeClient test case&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2600&quot;&gt;&lt;del&gt;FLINK-2600&lt;/del&gt;&lt;/a&gt; Enable test rerun for Elasticsearch Tests&lt;/p&gt;

&lt;p&gt;    This also bumps surefire/failsafe version to 2.8.1&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14735421" author="githubbot" created="Tue, 8 Sep 2015 19:05:40 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1108#issuecomment-138672001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1108#issuecomment-138672001&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Since this is a test case where the failure is not due to a Flink issue, this looks like a good way to stabilize the tests.&lt;/p&gt;

&lt;p&gt;    +1 to merge&lt;/p&gt;</comment>
                            <comment id="14736424" author="githubbot" created="Wed, 9 Sep 2015 08:17:04 +0000"  >&lt;p&gt;Github user rmetzger commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1108#issuecomment-138820891&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1108#issuecomment-138820891&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1&lt;/p&gt;</comment>
                            <comment id="14736439" author="githubbot" created="Wed, 9 Sep 2015 08:27:39 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1108#issuecomment-138823043&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1108#issuecomment-138823043&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Manually merged&lt;/p&gt;</comment>
                            <comment id="14736442" author="aljoscha" created="Wed, 9 Sep 2015 08:28:35 +0000"  >&lt;p&gt;(Hopefully) fixed in &lt;a href=&quot;https://github.com/apache/flink/commit/a9c29a760d68202622328bcd723ef9b0b071684e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/a9c29a760d68202622328bcd723ef9b0b071684e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14736444" author="githubbot" created="Wed, 9 Sep 2015 08:29:36 +0000"  >&lt;p&gt;Github user aljoscha closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1108&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1108&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14737166" author="sachingoel0101" created="Wed, 9 Sep 2015 16:43:53 +0000"  >&lt;p&gt;Observed a failure just now: Here&apos;s the build log: &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/79486037/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/79486037/log.txt&lt;/a&gt; if that&apos;s helpful but it&apos;s the same exception log. &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Before you ask, it was rebased on today&amp;#39;s fix. :&amp;#39;) &amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Edit: The exception log is different. Sorry. Deadlocked.&lt;/p&gt;</comment>
                            <comment id="14737182" author="aljoscha" created="Wed, 9 Sep 2015 16:52:35 +0000"  >&lt;p&gt;I don&apos;t think that&apos;s anything that we could resolve.&lt;/p&gt;</comment>
                            <comment id="14737193" author="sachingoel0101" created="Wed, 9 Sep 2015 16:55:48 +0000"  >&lt;p&gt;But this is a test stability issue though. Maybe we should keep this open and see if it occurs again? &lt;/p&gt;</comment>
                            <comment id="14737528" author="aljoscha" created="Wed, 9 Sep 2015 20:27:59 +0000"  >&lt;p&gt;Sure &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14738747" author="stephanewen" created="Thu, 10 Sep 2015 13:32:19 +0000"  >&lt;p&gt;We could also close it and reopen when it re-occurs.&lt;/p&gt;

&lt;p&gt;That way we avoid all these zombie-issues that we have plentiful already. Fixed or no-problem issues that were never closed...&lt;/p&gt;</comment>
                            <comment id="14803050" author="till.rohrmann" created="Thu, 17 Sep 2015 15:10:04 +0000"  >&lt;p&gt;Occurred again&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/80770633/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/80770633/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14875850" author="aljoscha" created="Fri, 18 Sep 2015 16:10:39 +0000"  >&lt;p&gt;But that&apos;s differente, isn&apos;t it? The other time the test failed with an exception in Elasticsearch, here it&apos;s a deadlock.&lt;/p&gt;</comment>
                            <comment id="14906060" author="uce" created="Thu, 24 Sep 2015 08:59:10 +0000"  >&lt;p&gt;Failed again: &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/81824062/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/81824062/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.flink.runtime.client.JobExecutionException: Job execution failed.
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$7.apply$mcV$sp(JobManager.scala:528)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$7.apply(JobManager.scala:473)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$7.apply(JobManager.scala:473)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)
	at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:41)
	at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(AbstractDispatcher.scala:401)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
Caused by: java.lang.RuntimeException: An error occured in ElasticsearchSink.
	at org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSink.close(ElasticsearchSink.java:307)
	at org.apache.flink.api.common.functions.util.FunctionUtils.closeFunction(FunctionUtils.java:40)
	at org.apache.flink.streaming.api.operators.AbstractUdfStreamOperator.close(AbstractUdfStreamOperator.java:84)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.closeAllOperators(StreamTask.java:236)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:181)
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:579)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: java.lang.RuntimeException: UnavailableShardsException[[my-index][0] Primary shard is not active or isn&apos;t assigned to a known node. Timeout: [1m], request: org.elasticsearch.action.bulk.BulkShardRequest@518c3966]
	at org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSink$1.afterBulk(ElasticsearchSink.java:240)
	at org.elasticsearch.action.bulk.BulkProcessor.execute(BulkProcessor.java:316)
	at org.elasticsearch.action.bulk.BulkProcessor.executeIfNeeded(BulkProcessor.java:299)
	at org.elasticsearch.action.bulk.BulkProcessor.internalAdd(BulkProcessor.java:281)
	at org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:264)
	at org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:260)
	at org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:246)
	at org.apache.flink.streaming.connectors.elasticsearch.ElasticsearchSink.invoke(ElasticsearchSink.java:286)
	at org.apache.flink.streaming.api.operators.StreamSink.processElement(StreamSink.java:37)
	at org.apache.flink.streaming.runtime.io.StreamInputProcessor.processInput(StreamInputProcessor.java:162)
	at org.apache.flink.streaming.runtime.tasks.OneInputStreamTask.run(OneInputStreamTask.java:56)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:168)
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:579)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14907903" author="aljoscha" created="Fri, 25 Sep 2015 10:35:31 +0000"  >&lt;p&gt;Ah man, this Elasticsearch embedded Node seems very fragile... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14933418" author="stephanewen" created="Mon, 28 Sep 2015 15:03:13 +0000"  >&lt;p&gt;How about we start a new maven project for &quot;manual tests&quot; that contain programs for release testing, that we do not execute as part of regular builds?&lt;/p&gt;

&lt;p&gt;We put tests there that cannot be stabilized (external dependencies) or would simply take too long (such as some massive sorting tests)...&lt;/p&gt;</comment>
                            <comment id="14933491" author="aljoscha" created="Mon, 28 Sep 2015 16:02:23 +0000"  >&lt;p&gt;This sounds good. But then we should move the discussion to the mailing list or open a new jira that is not specific to Elasticsearch.&lt;/p&gt;</comment>
                            <comment id="15013866" author="uce" created="Thu, 19 Nov 2015 16:57:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/92033118/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/92033118/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15033652" author="rmetzger" created="Tue, 1 Dec 2015 13:08:50 +0000"  >&lt;p&gt;Another incident: &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/94123465/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/94123465/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15033783" author="stephanewen" created="Tue, 1 Dec 2015 14:44:38 +0000"  >&lt;p&gt;I think we should start making this a manual test, or add code that polls whether the index has been created...&lt;/p&gt;</comment>
                            <comment id="15127998" author="rmetzger" created="Tue, 2 Feb 2016 09:59:16 +0000"  >&lt;p&gt;One more: &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/106246892/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/106246892/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15526018" author="stephanewen" created="Tue, 27 Sep 2016 12:49:33 +0000"  >&lt;p&gt;This seems to not have occurred in a while. Any updates here?&lt;/p&gt;</comment>
                            <comment id="15701479" author="uce" created="Mon, 28 Nov 2016 09:51:15 +0000"  >&lt;p&gt;I just got this here via Maven with what I think are unrelated changes:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.flink.runtime.client.JobExecutionException: Job execution failed.
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$8.apply$mcV$sp(JobManager.scala:810)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$8.apply(JobManager.scala:756)
	at org.apache.flink.runtime.jobmanager.JobManager$$anonfun$handleMessage$1$$anonfun$applyOrElse$8.apply(JobManager.scala:756)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)
	at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:41)
	at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(AbstractDispatcher.scala:401)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
Caused by: java.lang.RuntimeException: Client is not connected to any Elasticsearch nodes!
	at org.apache.flink.streaming.connectors.elasticsearch2.ElasticsearchSink.open(ElasticsearchSink.java:172)
	at org.apache.flink.api.common.functions.util.FunctionUtils.openFunction(FunctionUtils.java:38)
	at org.apache.flink.streaming.api.operators.AbstractUdfStreamOperator.open(AbstractUdfStreamOperator.java:91)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.openAllOperators(StreamTask.java:389)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:256)
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:638)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16203759" author="aljoscha" created="Fri, 13 Oct 2017 16:05:04 +0000"  >&lt;p&gt;Hasn&apos;t occurred in about a year.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jn1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>