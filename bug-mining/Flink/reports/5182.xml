<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:55:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-20654] Unaligned checkpoint recovery may lead to corrupted data stream</title>
                <link>https://issues.apache.org/jira/browse/FLINK-20654</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Fix of &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-20433&quot; title=&quot;UnalignedCheckpointTestBase.execute failed with &amp;quot;TestTimedOutException: test timed out after 300 seconds&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-20433&quot;&gt;&lt;del&gt;FLINK-20433&lt;/del&gt;&lt;/a&gt; shows potential corruption after recovery for all variations of UnalignedCheckpointITCase.&lt;/p&gt;

&lt;p&gt;To reproduce, run UCITCase a couple hundreds times. The issue showed for me in:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;execute &lt;span class=&quot;error&quot;&gt;&amp;#91;Parallel union, p = 5&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;execute &lt;span class=&quot;error&quot;&gt;&amp;#91;Parallel union, p = 10&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;execute &lt;span class=&quot;error&quot;&gt;&amp;#91;Parallel cogroup, p = 5&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;execute &lt;span class=&quot;error&quot;&gt;&amp;#91;parallel pipeline with remote channels, p = 5&amp;#93;&lt;/span&gt;&lt;br/&gt;
with decreasing frequency.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The issue manifests as one of the following issues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;stream corrupted exception&lt;/li&gt;
	&lt;li&gt;EOF exception&lt;/li&gt;
	&lt;li&gt;assertion failure in NUM_LOST or NUM_OUT_OF_ORDER&lt;/li&gt;
	&lt;li&gt;(for union) ArithmeticException overflow (because the number that should be &lt;span class=&quot;error&quot;&gt;&amp;#91;0;100000&amp;#93;&lt;/span&gt; has been mis-deserialized)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13346592">FLINK-20654</key>
            <summary>Unaligned checkpoint recovery may lead to corrupted data stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pnowojski">Piotr Nowojski</assignee>
                                    <reporter username="arvid">Arvid Heise</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 17 Dec 2020 13:07:24 +0000</created>
                <updated>Tue, 22 Jun 2021 14:06:41 +0000</updated>
                            <resolved>Thu, 22 Apr 2021 06:05:20 +0000</resolved>
                                    <version>1.12.0</version>
                    <version>1.12.1</version>
                                    <fixVersion>1.13.0</fixVersion>
                    <fixVersion>1.12.3</fixVersion>
                                    <component>Runtime / Checkpointing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>17</watches>
                                                                                                                <comments>
                            <comment id="17251864" author="arvid" created="Fri, 18 Dec 2020 16:48:40 +0000"  >&lt;p&gt;For my investigation, I added a bunch of info statements to track which buffers are written.&lt;br/&gt;
&lt;a href=&quot;https://github.com/AHeise/flink/tree/FLINK-20654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/AHeise/flink/tree/FLINK-20654&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For &lt;span class=&quot;error&quot;&gt;&amp;#91;Parallel union, p = 5&amp;#93;&lt;/span&gt;, I noticed that the issues arises only when multiple buffers of the same channel are recovered.&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;19749 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=0, inputChannelIdx=3} recovered 8 bytes
19749 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=1, inputChannelIdx=3} recovered 9 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=2, inputChannelIdx=3} recovered 1 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=3, inputChannelIdx=3} recovered 14 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=0, inputChannelIdx=3} recovered 4096 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=0, inputChannelIdx=3} recovered 4096 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=0, inputChannelIdx=3} recovered 4096 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=0, inputChannelIdx=3} recovered 4096 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=0, inputChannelIdx=3} recovered 4096 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=0, inputChannelIdx=3} recovered 4096 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=0, inputChannelIdx=3} recovered 4096 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=0, inputChannelIdx=3} recovered 4096 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=0, inputChannelIdx=3} recovered 4096 bytes
19750 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79)/InputChannelInfo{gateIdx=0, inputChannelIdx=3} recovered 4 bytes
19750 [Flat Map (4/5)#5] INFO  org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput [] - InputChannelInfo{gateIdx=1, inputChannelIdx=3} prepareSnapshot 9 bytes
19750 [Flat Map (4/5)#5] INFO  org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput [] - InputChannelInfo{gateIdx=2, inputChannelIdx=3} prepareSnapshot 1 bytes
19750 [Flat Map (4/5)#5] INFO  org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput [] - InputChannelInfo{gateIdx=3, inputChannelIdx=3} prepareSnapshot 14 bytes
19750 [Flat Map (1/5)#5] INFO  org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput [] - InputChannelInfo{gateIdx=0, inputChannelIdx=0} prepareSnapshot 17 bytes
19750 [Flat Map (1/5)#5] INFO  org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput [] - InputChannelInfo{gateIdx=1, inputChannelIdx=0} prepareSnapshot 13 bytes
19750 [Flat Map (1/5)#5] INFO  org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput [] - InputChannelInfo{gateIdx=2, inputChannelIdx=0} prepareSnapshot 18 bytes
19750 [Flat Map (1/5)#5] INFO  org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput [] - InputChannelInfo{gateIdx=3, inputChannelIdx=0} prepareSnapshot 14 bytes
19751 [Flat Map (1/5)#5] INFO  org.apache.flink.runtime.io.network.partition.consumer.ChannelStatePersister [] - InputChannelInfo{gateIdx=3, inputChannelIdx=0} maybePersist 4096 bytes
19751 [Flat Map (1/5)#5] INFO  org.apache.flink.runtime.io.network.partition.consumer.ChannelStatePersister [] - InputChannelInfo{gateIdx=3, inputChannelIdx=0} maybePersist 4096 bytes
19751 [Flat Map (1/5)#5] INFO  org.apache.flink.runtime.io.network.partition.consumer.ChannelStatePersister [] - InputChannelInfo{gateIdx=3, inputChannelIdx=0} maybePersist 4096 bytes
19752 [Flat Map (1/5)#5] INFO  org.apache.flink.runtime.io.network.partition.consumer.ChannelStatePersister [] - InputChannelInfo{gateIdx=3, inputChannelIdx=0} maybePersist 4096 bytes
19752 [Flat Map (1/5)#5] INFO  org.apache.flink.runtime.io.network.partition.consumer.ChannelStatePersister [] - InputChannelInfo{gateIdx=3, inputChannelIdx=0} maybePersist 4096 bytes
19752 [Flat Map (1/5)#5] INFO  org.apache.flink.runtime.io.network.partition.consumer.ChannelStatePersister [] - InputChannelInfo{gateIdx=3, inputChannelIdx=0} maybePersist 4096 bytes
19752 [Channel state writer Flat Map (4/5)#5] INFO  org.apache.flink.runtime.checkpoint.channel.ChannelStateWriteRequestExecutorImpl [] - Flat Map (4/5)#5 discarding 0 drained requests
19752 [Flat Map (1/5)#5] INFO  org.apache.flink.runtime.io.network.partition.consumer.ChannelStatePersister [] - InputChannelInfo{gateIdx=3, inputChannelIdx=0} maybePersist 4096 bytes
19752 [Flat Map (4/5)#5] INFO  org.apache.flink.runtime.checkpoint.channel.ChannelStateWriteRequestExecutorImpl [] - Flat Map (4/5)#5 discarding 1 drained requests
19753 [Source: source1 (1/5)#5] INFO  org.apache.flink.test.checkpointing.UnalignedCheckpointTestBase [] - Snapshotted LongSplit{increment=5, nextNumber=21525, numCompletedCheckpoints=4} @ 0 subtask (5 attempt)
19753 [Source: source1 (4/5)#5] INFO  org.apache.flink.test.checkpointing.UnalignedCheckpointTestBase [] - Snapshotted LongSplit{increment=5, nextNumber=21528, numCompletedCheckpoints=4} @ 3 subtask (5 attempt)
19753 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (3/5)#5 (0bf62fa35c5a671073338ea1f1730953)/InputChannelInfo{gateIdx=0, inputChannelIdx=2} recovered 2 bytes
19753 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (3/5)#5 (0bf62fa35c5a671073338ea1f1730953)/InputChannelInfo{gateIdx=1, inputChannelIdx=2} recovered 12 bytes
19753 [AsyncOperations-thread-1] INFO  org.apache.flink.streaming.runtime.tasks.AsyncCheckpointRunnable [] - Flat Map (4/5)#5 - asynchronous part of checkpoint 11 could not be completed.
java.util.concurrent.CancellationException: null
	at java.util.concurrent.FutureTask.report(FutureTask.java:121) ~[?:1.8.0_222]
	at java.util.concurrent.FutureTask.get(FutureTask.java:192) ~[?:1.8.0_222]
	at org.apache.flink.runtime.concurrent.FutureUtils.runIfNotDoneAndGet(FutureUtils.java:583) ~[classes/:?]
	at org.apache.flink.streaming.api.operators.OperatorSnapshotFinalizer.&amp;lt;init&amp;gt;(OperatorSnapshotFinalizer.java:59) ~[classes/:?]
	at org.apache.flink.streaming.runtime.tasks.AsyncCheckpointRunnable.run(AsyncCheckpointRunnable.java:115) [classes/:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_222]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_222]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_222]
19753 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (3/5)#5 (0bf62fa35c5a671073338ea1f1730953)/InputChannelInfo{gateIdx=2, inputChannelIdx=2} recovered 4 bytes
19753 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (3/5)#5 (0bf62fa35c5a671073338ea1f1730953)/InputChannelInfo{gateIdx=3, inputChannelIdx=2} recovered 14 bytes
19753 [channel-state-unspilling-thread-1] INFO  org.apache.flink.runtime.io.network.partition.consumer.RecoveredInputChannel [] - Flat Map (3/5)#5 (0bf62fa35c5a671073338ea1f1730953)/InputChannelInfo{gateIdx=2, inputChannelIdx=2} recovered 4096 bytes
19753 [Flat Map (4/5)#5] WARN  org.apache.flink.runtime.taskmanager.Task [] - Flat Map (4/5)#5 (de5cfe0d40797af545b28a5c2994ca79) switched from RUNNING to FAILED.
java.lang.ArithmeticException: integer overflow
	at java.lang.Math.toIntExact(Math.java:1011) ~[?:1.8.0_222]
	at java.lang.StrictMath.toIntExact(StrictMath.java:813) ~[?:1.8.0_222]
	at org.apache.flink.test.checkpointing.UnalignedCheckpointITCase$CountingMapFunction.flatMap(UnalignedCheckpointITCase.java:414) ~[test-classes/:?]
	at org.apache.flink.test.checkpointing.UnalignedCheckpointITCase$CountingMapFunction.flatMap(UnalignedCheckpointITCase.java:401) ~[test-classes/:?]
	at org.apache.flink.streaming.api.operators.StreamFlatMap.processElement(StreamFlatMap.java:50) ~[classes/:?]
	at org.apache.flink.streaming.runtime.tasks.OneInputStreamTask$StreamTaskNetworkOutput.emitRecord(OneInputStreamTask.java:193) ~[classes/:?]
	at org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput.processElement(StreamTaskNetworkInput.java:185) ~[classes/:?]
	at org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput.emitNext(StreamTaskNetworkInput.java:158) ~[classes/:?]
	at org.apache.flink.streaming.runtime.io.StreamOneInputProcessor.processInput(StreamOneInputProcessor.java:67) ~[classes/:?]
	at org.apache.flink.streaming.runtime.tasks.StreamTask.processInput(StreamTask.java:372) ~[classes/:?]
	at org.apache.flink.streaming.runtime.tasks.mailbox.MailboxProcessor.runMailboxLoop(MailboxProcessor.java:186) ~[classes/:?]
	at org.apache.flink.streaming.runtime.tasks.StreamTask.runMailboxLoop(StreamTask.java:575) ~[classes/:?]
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:539) ~[classes/:?]
	at org.apache.flink.runtime.taskmanager.Task.doRun(Task.java:722) [classes/:?]
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:547) [classes/:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_222]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17252305" author="hxbks2ks" created="Sun, 20 Dec 2020 03:51:44 +0000"  >&lt;p&gt;another instance&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11071&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11071&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17252311" author="hxbks2ks" created="Sun, 20 Dec 2020 04:39:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11069&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11069&amp;amp;view=logs&amp;amp;j=59c257d0-c525-593b-261d-e96a86f1926b&amp;amp;t=b93980e3-753f-5433-6a19-13747adae66a&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17252631" author="hxbks2ks" created="Mon, 21 Dec 2020 06:07:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11085&amp;amp;view=logs&amp;amp;j=219e462f-e75e-506c-3671-5017d866ccf6&amp;amp;t=4c5dc768-5c82-5ab0-660d-086cb90b76a0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11085&amp;amp;view=logs&amp;amp;j=219e462f-e75e-506c-3671-5017d866ccf6&amp;amp;t=4c5dc768-5c82-5ab0-660d-086cb90b76a0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17252708" author="hxbks2ks" created="Mon, 21 Dec 2020 09:05:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11091&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11091&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17252738" author="till.rohrmann" created="Mon, 21 Dec 2020 09:54:19 +0000"  >&lt;p&gt;Another instance: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11025&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11025&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17252771" author="pnowojski" created="Mon, 21 Dec 2020 10:59:00 +0000"  >&lt;p&gt;Test was temporarily disabled as d42c333 on the master&lt;/p&gt;</comment>
                            <comment id="17253252" author="hxbks2ks" created="Tue, 22 Dec 2020 03:30:55 +0000"  >&lt;p&gt;Instance in 1.12&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11138&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11138&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17253303" author="xintongsong" created="Tue, 22 Dec 2020 06:44:14 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roman_khachatryan&quot; class=&quot;user-hover&quot; rel=&quot;roman_khachatryan&quot;&gt;roman_khachatryan&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;How are things going with this issue? Is this a pure test instability, or it&apos;s a severe production bug that should block the next bugfix release?&lt;/p&gt;</comment>
                            <comment id="17253309" author="hxbks2ks" created="Tue, 22 Dec 2020 07:24:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11145&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11145&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17253313" author="pnowojski" created="Tue, 22 Dec 2020 07:35:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xintongsong&quot; class=&quot;user-hover&quot; rel=&quot;xintongsong&quot;&gt;xintongsong&lt;/a&gt;, I suspect this being a real bug.&lt;/p&gt;</comment>
                            <comment id="17253373" author="xintongsong" created="Tue, 22 Dec 2020 09:45:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for the reply.&lt;/p&gt;

&lt;p&gt;Among all the 1.12.1 release blockers, it seems this is the most uncertain one since the cause is not found yet.&lt;/p&gt;

&lt;p&gt;Looking forward to further updates.&lt;/p&gt;</comment>
                            <comment id="17253893" author="hxbks2ks" created="Wed, 23 Dec 2020 05:07:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11205&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11205&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=a99e99c7-21cd-5a1f-7274-585e62b72f56&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17253921" author="mapohl" created="Wed, 23 Dec 2020 07:06:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=140&amp;amp;view=logs&amp;amp;j=0a15d512-44ac-5ba5-97ab-13a5d066c22c&amp;amp;t=634cd701-c189-5dff-24cb-606ed884db87&amp;amp;l=3882&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;This build&lt;/a&gt; failed due to a &lt;tt&gt;EOFException&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17255416" author="mapohl" created="Mon, 28 Dec 2020 06:35:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=142&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&amp;amp;l=8809&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Build failed&lt;/a&gt;&#160;due to &lt;tt&gt;IndexOutOfBoundsException&lt;/tt&gt; similar to what is listed in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-20662&quot; title=&quot;UnalignedCheckpointITCase.execute failed with IndexOutOfBoundsException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-20662&quot;&gt;&lt;del&gt;FLINK-20662&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17255421" author="mapohl" created="Mon, 28 Dec 2020 06:44:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11090&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&amp;amp;l=3994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Build #20201221.2&lt;/a&gt; contained a test failure of &lt;tt&gt;UnalignedCheckpointITCase&lt;/tt&gt; due to an &lt;tt&gt;EOFException&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17255577" author="roman_khachatryan" created="Mon, 28 Dec 2020 13:01:54 +0000"  >&lt;p&gt;The staus so far:&lt;/p&gt;

&lt;p&gt;Even with high number of allowed restarts, there are still failures present. Which means that the issue is with persisting state, rather than reading it.&lt;/p&gt;

&lt;p&gt;The issue doesn&apos;t manifest itself with legacy sources. Which means:&lt;br/&gt;
1. The issue is likely in MultipleInput task code or is related to different rates in such tasks&lt;br/&gt;
2. &quot;git bisect&quot; doesn&apos;t make sense (and bisecting until API changes didn&apos;t help)&lt;/p&gt;

&lt;p&gt;Flattening the topology from&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(src0, src1) -&amp;gt; map1
    (map1, src2) -&amp;gt; map2
        (map2, src3) -&amp;gt; map3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(src0, src1) -&amp;gt; map1
(src2, src3) -&amp;gt; map2
(map1, map2) -&amp;gt; map3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so that each task combines inputs of only a single type significantly reduces failure rate (which also confirms (1)):&lt;/p&gt;

&lt;p&gt;The following ruled out:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;StreamTaskSourceInput - wrong (fake) gate/channels ids - removing didn&apos;t help&lt;/li&gt;
	&lt;li&gt;Custom partitioner - replacing e.g. with keyby doesn&apos;t help&lt;/li&gt;
	&lt;li&gt;Thread safety of SingleCheckpointBarrierHandler.allBarriersReceivedFuture - checked with synchronized, didn&apos;t help&lt;/li&gt;
	&lt;li&gt;Gate alignment (EndOfChannelStateEvent) - doesn&apos;t fail with gate alignment always enabled&lt;/li&gt;
	&lt;li&gt;Gate index stability - inspected the code, those shouldn&apos;t change&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17255595" author="mapohl" created="Mon, 28 Dec 2020 13:50:59 +0000"  >&lt;p&gt;For the sake of completeness: &lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=143&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&amp;amp;l=8813&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;This Build&lt;/a&gt;&#160;and &lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=144&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&amp;amp;l=8807&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;that build&lt;/a&gt;due to &lt;tt&gt;IndexOutOfBoundsException&lt;/tt&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-20662&quot; title=&quot;UnalignedCheckpointITCase.execute failed with IndexOutOfBoundsException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-20662&quot;&gt;&lt;del&gt;FLINK-20662&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="17256386" author="pnowojski" created="Wed, 30 Dec 2020 08:47:24 +0000"  >&lt;p&gt;A couple of fixes for the corrupted recovery were merged as  6ab2a89..b137bbd. Most of the UnalignedCheckpointITCase was re-enabled again. Union test case is still .failing sporadically (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roman_khachatryan&quot; class=&quot;user-hover&quot; rel=&quot;roman_khachatryan&quot;&gt;roman_khachatryan&lt;/a&gt; is still investigating it) and remains disabled for the time being.&lt;/p&gt;</comment>
                            <comment id="17256637" author="till.rohrmann" created="Wed, 30 Dec 2020 18:14:21 +0000"  >&lt;p&gt;I&apos;ve seen the &lt;tt&gt;UnalignedCheckpointITCase&lt;/tt&gt; failing again:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11501&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11501&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11500&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11500&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17256704" author="roman_khachatryan" created="Wed, 30 Dec 2020 20:17:08 +0000"  >&lt;p&gt;The fixes above were also merged to release-1.12 as d61a36...026a86.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As for the failures, the first one is&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-20781&quot; title=&quot;UnalignedCheckpointITCase failure caused by NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-20781&quot;&gt;&lt;del&gt;FLINK-20781&lt;/del&gt;&lt;/a&gt;, but the second one is again IOException in co-group (thanks for reporting&#160; them!)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think we can leave the test enabled (without union) as failure rate should be low.&lt;/p&gt;</comment>
                            <comment id="17256780" author="hxbks2ks" created="Thu, 31 Dec 2020 01:52:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11500&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=11500&amp;amp;view=logs&amp;amp;j=5c8e7682-d68f-54d1-16a2-a09310218a49&amp;amp;t=f508e270-48d6-5f1e-3138-42a17e0714f0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17258290" author="till.rohrmann" created="Mon, 4 Jan 2021 15:45:20 +0000"  >&lt;p&gt;Another failure: &lt;a href=&quot;https://dev.azure.com/tillrohrmann/flink/_build/results?buildId=378&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/tillrohrmann/flink/_build/results?buildId=378&amp;amp;view=logs&amp;amp;j=6e55a443-5252-5db5-c632-109baf464772&amp;amp;t=9df6efca-61d0-513a-97ad-edb76d85786a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17261059" author="pnowojski" created="Fri, 8 Jan 2021 07:08:40 +0000"  >&lt;p&gt;merged commit 45f8577 into apache:release-1.12&lt;br/&gt;
merged commit c6786ab into apache:master&lt;/p&gt;</comment>
                            <comment id="17265862" author="hxbks2ks" created="Fri, 15 Jan 2021 09:52:22 +0000"  >&lt;p&gt;The failed instance with &quot;ArithmeticException: integer overflow&quot; happened again. Do we reopen this issue?&lt;br/&gt;
&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=12083&amp;amp;view=logs&amp;amp;j=34f41360-6c0d-54d3-11a1-0292a2def1d9&amp;amp;t=2d56e022-1ace-542f-bf1a-b37dd63243f2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=12083&amp;amp;view=logs&amp;amp;j=34f41360-6c0d-54d3-11a1-0292a2def1d9&amp;amp;t=2d56e022-1ace-542f-bf1a-b37dd63243f2&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2021-01-15T03:39:12.3771952Z Caused by: java.lang.ArithmeticException: integer overflow
2021-01-15T03:39:12.3772559Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.toIntExact(&lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.java:1011)
2021-01-15T03:39:12.3773309Z 	at java.lang.StrictMath.toIntExact(StrictMath.java:813)
2021-01-15T03:39:12.3774293Z 	at org.apache.flink.test.checkpointing.UnalignedCheckpointITCase$CountingMapFunction.flatMap(UnalignedCheckpointITCase.java:488)
2021-01-15T03:39:12.3775410Z 	at org.apache.flink.test.checkpointing.UnalignedCheckpointITCase$CountingMapFunction.flatMap(UnalignedCheckpointITCase.java:474)
2021-01-15T03:39:12.3776427Z 	at org.apache.flink.streaming.api.operators.StreamFlatMap.processElement(StreamFlatMap.java:47)
2021-01-15T03:39:12.3777379Z 	at org.apache.flink.streaming.runtime.tasks.OneInputStreamTask$StreamTaskNetworkOutput.emitRecord(OneInputStreamTask.java:191)
2021-01-15T03:39:12.3778351Z 	at org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput.processElement(StreamTaskNetworkInput.java:205)
2021-01-15T03:39:12.3779297Z 	at org.apache.flink.streaming.runtime.io.StreamTaskNetworkInput.emitNext(StreamTaskNetworkInput.java:175)
2021-01-15T03:39:12.3780231Z 	at org.apache.flink.streaming.runtime.io.StreamOneInputProcessor.processInput(StreamOneInputProcessor.java:65)
2021-01-15T03:39:12.3781114Z 	at org.apache.flink.streaming.runtime.tasks.StreamTask.processInput(StreamTask.java:399)
2021-01-15T03:39:12.3782078Z 	at org.apache.flink.streaming.runtime.tasks.mailbox.MailboxProcessor.runMailboxLoop(MailboxProcessor.java:190)
2021-01-15T03:39:12.3783079Z 	at org.apache.flink.streaming.runtime.tasks.StreamTask.runMailboxLoop(StreamTask.java:608)
2021-01-15T03:39:12.3783947Z 	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:572)
2021-01-15T03:39:12.3784646Z 	at org.apache.flink.runtime.taskmanager.Task.doRun(Task.java:749)
2021-01-15T03:39:12.3785361Z 	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:564)
2021-01-15T03:39:12.3785993Z 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17265871" author="roman_khachatryan" created="Fri, 15 Jan 2021 10:07:00 +0000"  >&lt;p&gt;Yes, let&apos;s keep it open.&lt;/p&gt;</comment>
                            <comment id="17270361" author="arvid" created="Fri, 22 Jan 2021 18:52:08 +0000"  >&lt;p&gt;Merged a fix into master as 5d1c1b145fe2f5d34a692b3b13b731e9a26f4c0 and into 1.12 as 155301ecb1f6f2b6be140a2eeafcd8b0427d9ab2.&lt;/p&gt;</comment>
                            <comment id="17271137" author="dawidwys" created="Mon, 25 Jan 2021 08:09:20 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AHeise&quot; class=&quot;user-hover&quot; rel=&quot;AHeise&quot;&gt;AHeise&lt;/a&gt; I think there is a mistake in the master commit hash. I think the respective commits are:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;master
	&lt;ul&gt;
		&lt;li&gt;25d1c1b145fe2f5d34a692b3b13b731e9a26f4c0&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;1.12.2
	&lt;ul&gt;
		&lt;li&gt;155301ecb1f6f2b6be140a2eeafcd8b0427d9ab2&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17275552" author="pnowojski" created="Sat, 30 Jan 2021 10:56:13 +0000"  >&lt;p&gt;yet another fix merged to master as a23744795d9&lt;br/&gt;
Back-ported to 1.12 as f460a57c5e3&lt;/p&gt;</comment>
                            <comment id="17296771" author="lwlin" created="Sun, 7 Mar 2021 06:35:06 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;&#160;, does this also affect Flink 1.11.3 ?&lt;/p&gt;

&lt;p&gt;And another thing we&apos;d like to know is, is unaligned checkpoint production-ready as of Flink 1.11.3 or 1.12.2 ?&lt;/p&gt;

&lt;p&gt;thanks!&#160; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17296789" author="pnowojski" created="Sun, 7 Mar 2021 08:01:49 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lwlin&quot; class=&quot;user-hover&quot; rel=&quot;lwlin&quot;&gt;lwlin&lt;/a&gt;. We are not aware of issues with 1.11.x branch and unaligned checkpoints. Most problems in this ticket with 1.12.x were caused by some preliminary changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-19681&quot; title=&quot;Passively timeout alignment on the inputs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-19681&quot;&gt;&lt;del&gt;FLINK-19681&lt;/del&gt;&lt;/a&gt;, so 1.11.x shouldn&apos;t be affected by it. As of 1.12.2, we are not aware of any problems with unaligned checkpoints, last one as you can see was reported/merged over a month ago. So both 1.11.3 and 1.12.2 should be stable in this regard.&lt;/p&gt;

&lt;p&gt;Having said that, as a result of those bugs, 1.12.x and 1.13.x branches are more thoroughly tested, so if you have an option to choose 1.11.3 or 1.12.2, I would suggest 1.12.2.&lt;/p&gt;</comment>
                            <comment id="17297080" author="lwlin" created="Mon, 8 Mar 2021 05:33:00 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt;, very appreciated for your detailed explanation! Exactly what we&apos;d like to know!&#160;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17298135" author="dawidwys" created="Tue, 9 Mar 2021 15:52:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14342&amp;amp;view=logs&amp;amp;j=34f41360-6c0d-54d3-11a1-0292a2def1d9&amp;amp;t=2d56e022-1ace-542f-bf1a-b37dd63243f2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=14342&amp;amp;view=logs&amp;amp;j=34f41360-6c0d-54d3-11a1-0292a2def1d9&amp;amp;t=2d56e022-1ace-542f-bf1a-b37dd63243f2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17309412" author="arvid" created="Fri, 26 Mar 2021 13:02:14 +0000"  >&lt;p&gt;Merged another set of test tunings + improved logging into master as f0d5d3be89c9762fdf147077a90831e365cf6ba0..913ea8e398e8396d044c14a0911d8e134ec4377d. I&apos;m closing this ticket as there have been no other failures in the past two weeks. When another issue occurs the new logging should help us to drill it down.&lt;/p&gt;</comment>
                            <comment id="17327123" author="pnowojski" created="Thu, 22 Apr 2021 06:03:24 +0000"  >&lt;p&gt;Buffers recycling fix merged:&lt;br/&gt;
to master as 3fc77ad3ffc&lt;br/&gt;
to release-1.13 as 860a716574c&lt;br/&gt;
to release-1.12 as 9a256ec6b64&lt;br/&gt;
to release-1.11 as 603a3c3ef93 (probably not needed)&lt;/p&gt;</comment>
                            <comment id="17339537" author="mapohl" created="Wed, 5 May 2021 08:58:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AHeise&quot; class=&quot;user-hover&quot; rel=&quot;AHeise&quot;&gt;AHeise&lt;/a&gt; what&apos;s the plan with the trace logging being enabled for UnalignedCheckpoints? Shall we have a Jira issue for disabling it again after a certain amount of time? I came across it when investigating the file size of the Maven logs (the one I looked at was 7.9G). 25.458.266 out of 26.712.993 lines were due to the trace logging of the &lt;tt&gt;NetworkActionsLogger&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17339539" author="till.rohrmann" created="Wed, 5 May 2021 09:05:53 +0000"  >&lt;p&gt;I&apos;d also be in favor of decreasing the verbosity of these logs. Due to the TRACE logging, the logs are super huge and harder to analyze.&lt;/p&gt;</comment>
                            <comment id="17340073" author="pnowojski" created="Thu, 6 May 2021 08:31:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trohrmann&quot; class=&quot;user-hover&quot; rel=&quot;trohrmann&quot;&gt;trohrmann&lt;/a&gt;, could you elaborate what&apos;s the problem exactly? Why do you need to analyse UCITcase/UCStressITCase/UCRescaingITCase logs?&lt;/p&gt;</comment>
                            <comment id="17340190" author="mapohl" created="Thu, 6 May 2021 12:54:21 +0000"  >&lt;p&gt;I didn&apos;t have to analyze the UCITCase. I looked into another issue and was initially puzzled by the size of the Maven logs (only one of the two). I&apos;m just concerned that the big file size for &lt;tt&gt;mvn*.log&lt;/tt&gt; would make analyzing any issue a bit annoying. Just grepping for a String in the Maven logs takes already much longer.&lt;/p&gt;

&lt;p&gt;I totally understand the necessity of why we set the log level to trace. I was just wondering whether we have some plan to disable it again. I could imagine the case where we just don&apos;t run into issues with the UC anymore. At what point in time do we decide to set the log level back to &lt;tt&gt;INFO&lt;/tt&gt;? Alternatively, we could move those logs into it&apos;s own file? Not sure how easy it is with our current AzureCI setup.&lt;/p&gt;</comment>
                            <comment id="17340198" author="pnowojski" created="Thu, 6 May 2021 13:13:02 +0000"  >&lt;p&gt;Maybe let&apos;s wait a bit more time, and let&apos;s re-evaluate it in a couple of weeks? If we won&apos;t be using those logs (no new bugs in this area), maybe indeed it would be the best to decrease the logging level.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13342259">FLINK-20309</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13346692">FLINK-20662</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13347512">FLINK-20744</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13354062">FLINK-21104</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13351981">FLINK-20960</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lm14:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>