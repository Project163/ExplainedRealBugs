<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:47:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-18152] Master starts despite IllegalConfigurationException</title>
                <link>https://issues.apache.org/jira/browse/FLINK-18152</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;When no memory configuration parameters are set for the Master process then this exception is logged by the BashJavaUtils:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.flink.configuration.IllegalConfigurationException: Either required fine-grained memory (jobmanager.memory.heap.size), or Total Flink Memory size (Key: &lt;span class=&quot;code-quote&quot;&gt;&apos;jobmanager.memory.flink.size&apos;&lt;/span&gt; , &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; $        at org.apache.flink.runtime.util.config.memory.ProcessMemoryUtils.failBecauseRequiredOptionsNotConfigured(ProcessMemoryUtils.java:111)                                                                                                       at org.apache.flink.runtime.util.config.memory.ProcessMemoryUtils.memoryProcessSpecFromConfig(ProcessMemoryUtils.java:81)                                                                                                                    at org.apache.flink.runtime.jobmanager.JobManagerProcessUtils.processSpecFromConfig(JobManagerProcessUtils.java:76)                                                                                                                          at org.apache.flink.runtime.jobmanager.JobManagerProcessUtils.processSpecFromConfigWithNewOptionToInterpretLegacyHeap(JobManagerProcessUtils.java:71)                                                                                        at org.apache.flink.runtime.util.bash.BashJavaUtils.getJmResourceParams(BashJavaUtils.java:92)                                                                                                                                               at org.apache.flink.runtime.util.bash.BashJavaUtils.runCommand(BashJavaUtils.java:66)                                                                                                                                                        at org.apache.flink.runtime.util.bash.BashJavaUtils.main(BashJavaUtils.java:54)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Afterwards, the Master process however continues to start just fine.&lt;/p&gt;

&lt;p&gt;TaskManagers will not be started given the same situation, which is inconsistent behavior, and it seems dangerous to start a process despite an illegal configuration.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13309699">FLINK-18152</key>
            <summary>Master starts despite IllegalConfigurationException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="azagrebin">Andrey Zagrebin</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 5 Jun 2020 11:17:23 +0000</created>
                <updated>Tue, 9 Jun 2020 16:44:41 +0000</updated>
                            <resolved>Tue, 9 Jun 2020 09:15:19 +0000</resolved>
                                    <version>1.11.0</version>
                                    <fixVersion>1.11.0</fixVersion>
                                    <component>Runtime / Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17126688" author="zentol" created="Fri, 5 Jun 2020 11:22:00 +0000"  >&lt;p&gt;In a similar vein, if &lt;tt&gt;jobmanager.memory.process.size&lt;/tt&gt; is set to low value you also get an exception, but the process starts nonetheless:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[] - The derived from fraction jvm overhead memory (512.000kb (524288 bytes)) is less than its min value 192.000mb (201326592 bytes), min value will be used instead                                                                         Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.flink.configuration.IllegalConfigurationException: Sum of configured JVM Metaspace (256.000mb (268435456 bytes)) and JVM Overhead (192.000mb (201326592 bytes)) exceed configured Total &lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; Memory$        at org.apache.flink.runtime.util.config.memory.ProcessMemoryUtils.deriveJvmMetaspaceAndOverheadWithTotalProcessMemory(ProcessMemoryUtils.java:133)                                                                                           at org.apache.flink.runtime.util.config.memory.ProcessMemoryUtils.deriveProcessSpecWithTotalProcessMemory(ProcessMemoryUtils.java:102)                                                                                                       at org.apache.flink.runtime.util.config.memory.ProcessMemoryUtils.memoryProcessSpecFromConfig(ProcessMemoryUtils.java:79)                                                                                                                    at org.apache.flink.runtime.jobmanager.JobManagerProcessUtils.processSpecFromConfig(JobManagerProcessUtils.java:76)                                                                                                                          at org.apache.flink.runtime.jobmanager.JobManagerProcessUtils.processSpecFromConfigWithNewOptionToInterpretLegacyHeap(JobManagerProcessUtils.java:71)                                                                                        at org.apache.flink.runtime.util.bash.BashJavaUtils.getJmResourceParams(BashJavaUtils.java:92)                                                                                                                                               at org.apache.flink.runtime.util.bash.BashJavaUtils.runCommand(BashJavaUtils.java:66)                                                                                                                                                        at org.apache.flink.runtime.util.bash.BashJavaUtils.main(BashJavaUtils.java:54)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Either there should also be a minimum total process memory to properly handle the JMV overhead minimum, or this should fail the startup.&lt;/p&gt;</comment>
                            <comment id="17126691" author="zentol" created="Fri, 5 Jun 2020 11:24:01 +0000"  >&lt;p&gt;Exceptions due to negative (or in any way malformatted) values also don&apos;t fail the startup:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.flink.configuration.IllegalConfigurationException: Cannot read memory size from config option &lt;span class=&quot;code-quote&quot;&gt;&apos;jobmanager.memory.process.size&apos;&lt;/span&gt;.                                                                                at org.apache.flink.runtime.util.config.memory.ProcessMemoryUtils.getMemorySizeFromConfig(ProcessMemoryUtils.java:217)                                                                                                                       at org.apache.flink.runtime.util.config.memory.ProcessMemoryUtils.deriveProcessSpecWithTotalProcessMemory(ProcessMemoryUtils.java:100)                                                                                                       at org.apache.flink.runtime.util.config.memory.ProcessMemoryUtils.memoryProcessSpecFromConfig(ProcessMemoryUtils.java:79)                                                                                                                    at org.apache.flink.runtime.jobmanager.JobManagerProcessUtils.processSpecFromConfig(JobManagerProcessUtils.java:76)                                                                                                                          at org.apache.flink.runtime.jobmanager.JobManagerProcessUtils.processSpecFromConfigWithNewOptionToInterpretLegacyHeap(JobManagerProcessUtils.java:71)                                                                                        at org.apache.flink.runtime.util.bash.BashJavaUtils.getJmResourceParams(BashJavaUtils.java:92)                                                                                                                                               at org.apache.flink.runtime.util.bash.BashJavaUtils.runCommand(BashJavaUtils.java:66)                                                                                                                                                        at org.apache.flink.runtime.util.bash.BashJavaUtils.main(BashJavaUtils.java:54)                                                                                                                                                      Caused by: java.lang.IllegalArgumentException: Could not parse value &lt;span class=&quot;code-quote&quot;&gt;&apos;-5m&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; key &lt;span class=&quot;code-quote&quot;&gt;&apos;jobmanager.memory.process.size&apos;&lt;/span&gt;.                                                                                                                                 at org.apache.flink.configuration.Configuration.getOptional(Configuration.java:753)                                                                                                                                                          at org.apache.flink.configuration.Configuration.get(Configuration.java:738)                                                                                                                                                                  at org.apache.flink.runtime.util.config.memory.ProcessMemoryUtils.getMemorySizeFromConfig(ProcessMemoryUtils.java:215)                                                                                                                       ... 7 more                                                                                                                                                                                                                           Caused by: java.lang.NumberFormatException: text does not start with a number                                                                                                                                                                        at org.apache.flink.configuration.MemorySize.parseBytes(MemorySize.java:294)                                                                                                                                                                 at org.apache.flink.configuration.MemorySize.parse(MemorySize.java:247)                                                                                                                                                                      at org.apache.flink.configuration.Configuration.convertToMemorySize(Configuration.java:951)                                                                                                                                                  at org.apache.flink.configuration.Configuration.convertValue(Configuration.java:885)                                                                                                                                                         at org.apache.flink.configuration.Configuration.lambda$getOptional$2(Configuration.java:750)                                                                                                                                                 at java.base/java.util.Optional.map(Optional.java:265)                                                                                                                                                                                       at org.apache.flink.configuration.Configuration.getOptional(Configuration.java:750)                                                                                                                                                          ... 9 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17126816" author="azagrebin" created="Fri, 5 Jun 2020 14:26:19 +0000"  >&lt;p&gt;I think we forgot to check called bash function exit code in the refactoring of `parseJmJvmArgsAndExportLogs`:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [[ $? -ne 0 ]]; then
        echo &lt;span class=&quot;code-quote&quot;&gt;&quot;[ERROR] Could not get JVM parameters and dynamic configurations properly.&quot;&lt;/span&gt;
        exit 1
    fi
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="17129038" author="azagrebin" created="Tue, 9 Jun 2020 09:15:19 +0000"  >&lt;p&gt;merged into master by&#160;44acd5017502688be128e7208dcd2f1fbfc7c396&lt;/p&gt;

&lt;p&gt;merged into 1.11 by 822e8a3b67bcf48551eaaa124d987c684c5008d3&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310460">
                    <name>Child-Issue</name>
                                                                <inwardlinks description="is a child of">
                                        <issuelink>
            <issuekey id="13307733">FLINK-17973</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13310390">FLINK-18217</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fjwo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>