{"url":"https://api.github.com/repos/gofiber/fiber/issues/1055","repository_url":"https://api.github.com/repos/gofiber/fiber","labels_url":"https://api.github.com/repos/gofiber/fiber/issues/1055/labels{/name}","comments_url":"https://api.github.com/repos/gofiber/fiber/issues/1055/comments","events_url":"https://api.github.com/repos/gofiber/fiber/issues/1055/events","html_url":"https://github.com/gofiber/fiber/issues/1055","id":757407011,"node_id":"MDU6SXNzdWU3NTc0MDcwMTE=","number":1055,"title":"üöÄ Better Integration between cache and compress ","user":{"login":"moneszarrugh","id":11161902,"node_id":"MDQ6VXNlcjExMTYxOTAy","avatar_url":"https://avatars.githubusercontent.com/u/11161902?v=4","gravatar_id":"","url":"https://api.github.com/users/moneszarrugh","html_url":"https://github.com/moneszarrugh","followers_url":"https://api.github.com/users/moneszarrugh/followers","following_url":"https://api.github.com/users/moneszarrugh/following{/other_user}","gists_url":"https://api.github.com/users/moneszarrugh/gists{/gist_id}","starred_url":"https://api.github.com/users/moneszarrugh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moneszarrugh/subscriptions","organizations_url":"https://api.github.com/users/moneszarrugh/orgs","repos_url":"https://api.github.com/users/moneszarrugh/repos","events_url":"https://api.github.com/users/moneszarrugh/events{/privacy}","received_events_url":"https://api.github.com/users/moneszarrugh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2064310314,"node_id":"MDU6TGFiZWwyMDY0MzEwMzE0","url":"https://api.github.com/repos/gofiber/fiber/labels/%F0%9F%8F%B7%20Wait%20for%20Release","name":"üè∑ Wait for Release","color":"abd406","default":false,"description":""},{"id":2064310319,"node_id":"MDU6TGFiZWwyMDY0MzEwMzE5","url":"https://api.github.com/repos/gofiber/fiber/labels/%E2%98%A2%EF%B8%8F%20Bug","name":"‚ò¢Ô∏è Bug","color":"e11d21","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-12-04T21:08:58Z","updated_at":"2020-12-09T00:27:26Z","closed_at":"2020-12-09T00:27:26Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Problem**\r\nWhen the cache middleware is used with the compress middleware, cached responses need to be re-compressed on every request. This adds 30-60ms latency on my machine for compressing cached responses.\r\n\r\n```\r\n// responese are cached uncompressed, and are compressed on-the-fly on each request\r\napp.Use(compress.New(), cache.New())\r\n```\r\nThe code below does not work because cache middleware does not know how to cache compressed content nor does it cache response headers such as `Content-Encoding`\r\n```\r\napp.Use(cache.New(), compress.New())\r\n```\r\n\r\n**Suggested Solution**\r\nIt would be nice to have a better integration between the two middleware handlers so that cached responses are pre-compressed.\r\n\r\n","closed_by":{"login":"Fenny","id":25108519,"node_id":"MDQ6VXNlcjI1MTA4NTE5","avatar_url":"https://avatars.githubusercontent.com/u/25108519?v=4","gravatar_id":"","url":"https://api.github.com/users/Fenny","html_url":"https://github.com/Fenny","followers_url":"https://api.github.com/users/Fenny/followers","following_url":"https://api.github.com/users/Fenny/following{/other_user}","gists_url":"https://api.github.com/users/Fenny/gists{/gist_id}","starred_url":"https://api.github.com/users/Fenny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fenny/subscriptions","organizations_url":"https://api.github.com/users/Fenny/orgs","repos_url":"https://api.github.com/users/Fenny/repos","events_url":"https://api.github.com/users/Fenny/events{/privacy}","received_events_url":"https://api.github.com/users/Fenny/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/1055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/gofiber/fiber/issues/1055/timeline","performed_via_github_app":null,"state_reason":"completed"}