{"url":"https://api.github.com/repos/gofiber/fiber/issues/3072","repository_url":"https://api.github.com/repos/gofiber/fiber","labels_url":"https://api.github.com/repos/gofiber/fiber/issues/3072/labels{/name}","comments_url":"https://api.github.com/repos/gofiber/fiber/issues/3072/comments","events_url":"https://api.github.com/repos/gofiber/fiber/issues/3072/events","html_url":"https://github.com/gofiber/fiber/issues/3072","id":2406754370,"node_id":"I_kwDODfYWS86PdChC","number":3072,"title":"üêõ [Bug]: cache middleware: runtime error: index out of range [0] with length 0","user":{"login":"canbusio","id":168648317,"node_id":"U_kgDOCg1efQ","avatar_url":"https://avatars.githubusercontent.com/u/168648317?v=4","gravatar_id":"","url":"https://api.github.com/users/canbusio","html_url":"https://github.com/canbusio","followers_url":"https://api.github.com/users/canbusio/followers","following_url":"https://api.github.com/users/canbusio/following{/other_user}","gists_url":"https://api.github.com/users/canbusio/gists{/gist_id}","starred_url":"https://api.github.com/users/canbusio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canbusio/subscriptions","organizations_url":"https://api.github.com/users/canbusio/orgs","repos_url":"https://api.github.com/users/canbusio/repos","events_url":"https://api.github.com/users/canbusio/events{/privacy}","received_events_url":"https://api.github.com/users/canbusio/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2064310319,"node_id":"MDU6TGFiZWwyMDY0MzEwMzE5","url":"https://api.github.com/repos/gofiber/fiber/labels/%E2%98%A2%EF%B8%8F%20Bug","name":"‚ò¢Ô∏è Bug","color":"e11d21","default":false,"description":""},{"id":2454811973,"node_id":"MDU6TGFiZWwyNDU0ODExOTcz","url":"https://api.github.com/repos/gofiber/fiber/labels/%F0%9F%91%8D%20Accepting%20PR","name":"üëç Accepting PR","color":"f9d0c4","default":false,"description":""},{"id":3947514349,"node_id":"LA_kwDODfYWS87rSknt","url":"https://api.github.com/repos/gofiber/fiber/labels/v3","name":"v3","color":"436eee","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":15,"created_at":"2024-07-13T07:34:35Z","updated_at":"2024-07-23T06:36:42Z","closed_at":"2024-07-23T06:36:42Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Bug Description\n\nUse cache middleware to cache home page \"/\".\r\nUse CacheInvalidator to skip cache, got error: runtime error: index out of range [0] with length 0.\n\n### How to Reproduce\n\n1.use cache middleware to cache home page \"/\".\r\n2.do not visit \"/\" in browser, so there will not be any cache of it.\r\n3.visit \"/login\" page to login, then CacheInvalidator would return true now.\r\n4.visit \"/\".\r\n5.got error.\n\n### Expected Behavior\n\nWhen restart the program, not every page is cached, when user logged in visit no cache page, it should be open normal.\n\n### Fiber Version\n\nv3.0.0-beta.3\n\n### Code Snippet (optional)\n\n```go\nvar WebCache_Home = cache.New(cache.Config{\r\n\tCacheInvalidator: auth.ValidateLogin,\r\n\tExpiration: 10 * time.Minute,\r\n\tKeyGenerator: func(c fiber.Ctx) string {\r\n\t\tcacheKey := \"homeLogout\"\r\n\t\tif auth.ValidateLogin(c){\r\n\t\t\tcacheKey = \"homeLogin\"\r\n\t\t}\r\n\t\treturn cacheKey\r\n\t},\r\n\tStoreResponseHeaders: true,\r\n\tMaxBytes:             1 * 1024 * 1024,\r\n})\r\n\r\napp.Use(\"/:p<maxLen(0)>?\", cache.WebCache_Home)\r\napp.Get(\"/:p<maxLen(0)>?\", user.HomeHandler)\n```\n\n\n### Checklist:\n\n- [X] I agree to follow Fiber's [Code of Conduct](https://github.com/gofiber/fiber/blob/master/.github/CODE_OF_CONDUCT.md).\n- [X] I have checked for existing issues that describe my problem prior to opening this one.\n- [X] I understand that improperly formatted bug reports may be closed without explanation.","closed_by":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/3072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/gofiber/fiber/issues/3072/timeline","performed_via_github_app":null,"state_reason":"completed"}