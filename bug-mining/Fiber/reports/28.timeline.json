[{"id":13494832626,"node_id":"LE_lADODfYWS86PdChCzwAAAAMkWs3y","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13494832626","actor":{"login":"canbusio","id":168648317,"node_id":"U_kgDOCg1efQ","avatar_url":"https://avatars.githubusercontent.com/u/168648317?v=4","gravatar_id":"","url":"https://api.github.com/users/canbusio","html_url":"https://github.com/canbusio","followers_url":"https://api.github.com/users/canbusio/followers","following_url":"https://api.github.com/users/canbusio/following{/other_user}","gists_url":"https://api.github.com/users/canbusio/gists{/gist_id}","starred_url":"https://api.github.com/users/canbusio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canbusio/subscriptions","organizations_url":"https://api.github.com/users/canbusio/orgs","repos_url":"https://api.github.com/users/canbusio/repos","events_url":"https://api.github.com/users/canbusio/events{/privacy}","received_events_url":"https://api.github.com/users/canbusio/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-13T07:34:35Z","label":{"name":"‚ò¢Ô∏è Bug","color":"e11d21"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226808608","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2226808608","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2226808608,"node_id":"IC_kwDODfYWS86Eumcg","user":{"login":"welcome[bot]","id":30606887,"node_id":"MDM6Qm90MzA2MDY4ODc=","avatar_url":"https://avatars.githubusercontent.com/in/4141?v=4","gravatar_id":"","url":"https://api.github.com/users/welcome%5Bbot%5D","html_url":"https://github.com/apps/welcome","followers_url":"https://api.github.com/users/welcome%5Bbot%5D/followers","following_url":"https://api.github.com/users/welcome%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/welcome%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/welcome%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/welcome%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/welcome%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/welcome%5Bbot%5D/repos","events_url":"https://api.github.com/users/welcome%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/welcome%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2024-07-13T07:34:38Z","updated_at":"2024-07-13T07:34:38Z","body":"Thanks for opening your first issue here! üéâ Be sure to follow the issue template! If you need help or want to chat with us, join us on Discord https://gofiber.io/discord\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226808608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":{"id":4141,"client_id":"Iv1.740f1ff5dfe7e3ad","slug":"welcome","node_id":"MDM6QXBwNDE0MQ==","owner":{"login":"probot","id":26350515,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI2MzUwNTE1","avatar_url":"https://avatars.githubusercontent.com/u/26350515?v=4","gravatar_id":"","url":"https://api.github.com/users/probot","html_url":"https://github.com/probot","followers_url":"https://api.github.com/users/probot/followers","following_url":"https://api.github.com/users/probot/following{/other_user}","gists_url":"https://api.github.com/users/probot/gists{/gist_id}","starred_url":"https://api.github.com/users/probot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/probot/subscriptions","organizations_url":"https://api.github.com/users/probot/orgs","repos_url":"https://api.github.com/users/probot/repos","events_url":"https://api.github.com/users/probot/events{/privacy}","received_events_url":"https://api.github.com/users/probot/received_events","type":"Organization","user_view_type":"public","site_admin":false},"name":"Welcome","description":"\r\n> a GitHub App built with [probot](https://github.com/probot/probot) that welcomes new users based off maintainer defined comments that should be located in a `.github/config.yml`\r\n\r\nThe 3 plugins it combines with are [new-issue-welcome]\r\n\r\n### New Issue Welcome:\r\n[new-issue-welcome](https://github.com/behaviorbot/new-issue-welcome)\r\n<img width=\"801\" alt=\"screen shot 2017-07-17 at 1 31 50 pm\" src=\"https://user-images.githubusercontent.com/13410355/28288547-5f83aa8e-6af4-11e7-9692-eb41d42431e2.png\">\r\n\r\n### New PR Welcome: \r\n[new-pr-welcome](https://github.com/behaviorbot/new-pr-welcome)\r\n<img width=\"802\" alt=\"screen shot 2017-07-07 at 10 40 26 am\" src=\"https://user-images.githubusercontent.com/13410355/28288851-679f582a-6af5-11e7-8dd8-b85b6c33e16b.png\">\r\n\r\nand [first-pr-merge](https://github.com/behaviorbot/new-issue-welcome)\r\n<img width=\"807\" alt=\"screen shot 2017-07-17 at 1 58 37 pm\" src=\"https://user-images.githubusercontent.com/13410355/28289605-1ab81a76-6af8-11e7-8f78-6a1b3948df36.png\">\r\n\r\n## Usage\r\n\r\n1. Install the bot on the intended repositories. The plugin requires the following **Permissions and Events**:\r\n- Pull requests: **Read & Write**\r\n- Issues: **Read & Write**\r\n\r\n2. Create a `config.yml` file to check for content of the comments:\r\n\r\n``` yaml\r\n# Configuration for welcome - https://github.com/behaviorbot/welcome\r\n\r\n# Configuration for new-issue-welcome - https://github.com/behaviorbot/new-issue-welcome\r\n\r\n# Comment to be posted to on first time issues\r\nnewIssueWelcomeComment: >\r\n  Thanks for opening your first issue here! Be sure to follow the issue template!\r\n\r\n# Configuration for new-pr-welcome - https://github.com/behaviorbot/new-pr-welcome\r\n\r\n# Comment to be posted to on PRs from first time contributors in your repository\r\nnewPRWelcomeComment: >\r\n  Thanks for opening this pull request! Please check out our contributing guidelines.\r\n\r\n# Configuration for first-pr-merge - https://github.com/behaviorbot/first-pr-merge\r\n\r\n# Comment to be posted to on pull requests merged by a first time user\r\nfirstPRMergeComment: >\r\n  Congrats on merging your first pull request! We here at behaviorbot are proud of you! \r\n\r\n# It is recommend to include as many gifs and emojis as possible\r\n```\r\n\r\nYou can opt out of having the bot comment on first time pull requests, pull request merges, or new issues by not filling in a value for each app's respective field.","external_url":"https://probot.github.io/apps/welcome/","html_url":"https://github.com/apps/welcome","created_at":"2017-07-31T21:21:17Z","updated_at":"2017-09-28T16:06:25Z","permissions":{"issues":"write","metadata":"read","pull_requests":"write"},"events":["issues","pull_request"]},"event":"commented","actor":{"login":"welcome[bot]","id":30606887,"node_id":"MDM6Qm90MzA2MDY4ODc=","avatar_url":"https://avatars.githubusercontent.com/in/4141?v=4","gravatar_id":"","url":"https://api.github.com/users/welcome%5Bbot%5D","html_url":"https://github.com/apps/welcome","followers_url":"https://api.github.com/users/welcome%5Bbot%5D/followers","following_url":"https://api.github.com/users/welcome%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/welcome%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/welcome%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/welcome%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/welcome%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/welcome%5Bbot%5D/repos","events_url":"https://api.github.com/users/welcome%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/welcome%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226828159","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2226828159","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2226828159,"node_id":"IC_kwDODfYWS86EurN_","user":{"login":"gaby","id":835733,"node_id":"MDQ6VXNlcjgzNTczMw==","avatar_url":"https://avatars.githubusercontent.com/u/835733?v=4","gravatar_id":"","url":"https://api.github.com/users/gaby","html_url":"https://github.com/gaby","followers_url":"https://api.github.com/users/gaby/followers","following_url":"https://api.github.com/users/gaby/following{/other_user}","gists_url":"https://api.github.com/users/gaby/gists{/gist_id}","starred_url":"https://api.github.com/users/gaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaby/subscriptions","organizations_url":"https://api.github.com/users/gaby/orgs","repos_url":"https://api.github.com/users/gaby/repos","events_url":"https://api.github.com/users/gaby/events{/privacy}","received_events_url":"https://api.github.com/users/gaby/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-13T08:57:56Z","updated_at":"2024-07-13T08:57:56Z","body":"@canbusio We need an example to replicate this, from your snippet we can't tell what is `auth.ValidateLogin`. is it using anything from the context to valdiate?\r\n\r\nCam yo share the runtime error logs","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226828159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gaby","id":835733,"node_id":"MDQ6VXNlcjgzNTczMw==","avatar_url":"https://avatars.githubusercontent.com/u/835733?v=4","gravatar_id":"","url":"https://api.github.com/users/gaby","html_url":"https://github.com/gaby","followers_url":"https://api.github.com/users/gaby/followers","following_url":"https://api.github.com/users/gaby/following{/other_user}","gists_url":"https://api.github.com/users/gaby/gists{/gist_id}","starred_url":"https://api.github.com/users/gaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaby/subscriptions","organizations_url":"https://api.github.com/users/gaby/orgs","repos_url":"https://api.github.com/users/gaby/repos","events_url":"https://api.github.com/users/gaby/events{/privacy}","received_events_url":"https://api.github.com/users/gaby/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13494969639,"node_id":"MEE_lADODfYWS86PdChCzwAAAAMkXOUn","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13494969639","actor":{"login":"canbusio","id":168648317,"node_id":"U_kgDOCg1efQ","avatar_url":"https://avatars.githubusercontent.com/u/168648317?v=4","gravatar_id":"","url":"https://api.github.com/users/canbusio","html_url":"https://github.com/canbusio","followers_url":"https://api.github.com/users/canbusio/followers","following_url":"https://api.github.com/users/canbusio/following{/other_user}","gists_url":"https://api.github.com/users/canbusio/gists{/gist_id}","starred_url":"https://api.github.com/users/canbusio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canbusio/subscriptions","organizations_url":"https://api.github.com/users/canbusio/orgs","repos_url":"https://api.github.com/users/canbusio/repos","events_url":"https://api.github.com/users/canbusio/events{/privacy}","received_events_url":"https://api.github.com/users/canbusio/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-13T08:57:57Z","performed_via_github_app":null},{"id":13494969642,"node_id":"SE_lADODfYWS86PdChCzwAAAAMkXOUq","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13494969642","actor":{"login":"canbusio","id":168648317,"node_id":"U_kgDOCg1efQ","avatar_url":"https://avatars.githubusercontent.com/u/168648317?v=4","gravatar_id":"","url":"https://api.github.com/users/canbusio","html_url":"https://github.com/canbusio","followers_url":"https://api.github.com/users/canbusio/followers","following_url":"https://api.github.com/users/canbusio/following{/other_user}","gists_url":"https://api.github.com/users/canbusio/gists{/gist_id}","starred_url":"https://api.github.com/users/canbusio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canbusio/subscriptions","organizations_url":"https://api.github.com/users/canbusio/orgs","repos_url":"https://api.github.com/users/canbusio/repos","events_url":"https://api.github.com/users/canbusio/events{/privacy}","received_events_url":"https://api.github.com/users/canbusio/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-13T08:57:57Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226874529","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2226874529","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2226874529,"node_id":"IC_kwDODfYWS86Eu2ih","user":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-13T11:53:08Z","updated_at":"2024-07-13T11:53:08Z","body":"Does it make sense to have a maxLen 0 rule in the route? ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226874529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226879485","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2226879485","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2226879485,"node_id":"IC_kwDODfYWS86Eu3v9","user":{"login":"canbusio","id":168648317,"node_id":"U_kgDOCg1efQ","avatar_url":"https://avatars.githubusercontent.com/u/168648317?v=4","gravatar_id":"","url":"https://api.github.com/users/canbusio","html_url":"https://github.com/canbusio","followers_url":"https://api.github.com/users/canbusio/followers","following_url":"https://api.github.com/users/canbusio/following{/other_user}","gists_url":"https://api.github.com/users/canbusio/gists{/gist_id}","starred_url":"https://api.github.com/users/canbusio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canbusio/subscriptions","organizations_url":"https://api.github.com/users/canbusio/orgs","repos_url":"https://api.github.com/users/canbusio/repos","events_url":"https://api.github.com/users/canbusio/events{/privacy}","received_events_url":"https://api.github.com/users/canbusio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-13T12:11:36Z","updated_at":"2024-07-13T12:15:36Z","body":"> @canbusio We need an example to replicate this, from your snippet we can't tell what is `auth.ValidateLogin`. is it using anything from the context to valdiate?\r\n> \r\n> Cam yo share the runtime error logs\r\n\r\nHi~\r\n\r\nI tried again with auth.ValidateLogin codes bellow:\r\n\r\n```go\r\nfunc ValidateLogin(c fiber.Ctx) bool {\r\n    return true\r\n}\r\n```\r\n\r\nAnd this \"index out of range [0] with length 0\" error can be reproduced.\r\n\r\nBy the way, when I remove \"CacheInvalidator: auth.ValidateLogin\", it works fine.\r\n\r\n\r\nThe full run time error log is like this:\r\n\r\n```\r\npanic: runtime error: index out of range [0] with length 0\r\n\r\ngoroutine 55 [running]:\r\ngithub.com/gofiber/fiber/v3/middleware/cache.(*indexedHeap).remove(0xc0002e2db0?, 0xe?)\r\n        /home//go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0-beta.3/middleware/cache/heap.go:86 +0xb8\r\ngithub.com/gofiber/fiber/v3/middleware/cache.New.func4({0xb6fb78, 0xc00023a008})\r\n        /home/user/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0-beta.3/middleware/cache/cache.go:129 +0x348\r\ngithub.com/gofiber/fiber/v3.(*App).next(0xc000250008, 0xc00023a008)\r\n        /home/user/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0-beta.3/router.go:188 +0x1c2\r\ngithub.com/gofiber/fiber/v3.(*DefaultCtx).Next(0xc0002100c0?)\r\n        /home/user/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0-beta.3/ctx.go:1036 +0x79\r\ngithub.com/gofiber/fiber/v3/middleware/limiter.FixedWindow.New.func1({0xb6fb78, 0xc00023a008})\r\n        /home/user/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0-beta.3/middleware/limiter/limiter_fixed.go:83 +0x1a7\r\ngithub.com/gofiber/fiber/v3.(*App).next(0xc000250008, 0xc00023a008)\r\n        /home/user/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0-beta.3/router.go:188 +0x1c2\r\ngithub.com/gofiber/fiber/v3.(*DefaultCtx).Next(0xc0000ee2a8?)\r\n        /home/user/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0-beta.3/ctx.go:1036 +0x79\r\nflawer_leaf/internal/route.Setup.func1({0xb6fb78, 0xc00023a008})\r\n        /home/user/Go/FlawerNext/Flawer_Leaf/internal/route/route.go:21 +0x24\r\ngithub.com/gofiber/fiber/v3.(*App).next(0xc000250008, 0xc00023a008)\r\n        /home/user/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0-beta.3/router.go:188 +0x1c2\r\ngithub.com/gofiber/fiber/v3.(*App).requestHandler(0xc000250008, 0x4ac7af?)\r\n        /home/user/go/pkg/mod/github.com/gofiber/fiber/v3@v3.0.0-beta.3/router.go:236 +0x2f8\r\ngithub.com/valyala/fasthttp.(*Server).serveConn(0xc0000f6248, {0xb69318, 0xc0002077c8})\r\n        /home/user/go/pkg/mod/github.com/valyala/fasthttp@v1.55.0/server.go:2379 +0xe70\r\ngithub.com/valyala/fasthttp.(*workerPool).workerFunc(0xc000144140, 0xc0002920e0)\r\n        /home/user/go/pkg/mod/github.com/valyala/fasthttp@v1.55.0/workerpool.go:224 +0xa4\r\ngithub.com/valyala/fasthttp.(*workerPool).getCh.func1()\r\n        /home/user/go/pkg/mod/github.com/valyala/fasthttp@v1.55.0/workerpool.go:196 +0x32\r\ncreated by github.com/valyala/fasthttp.(*workerPool).getCh in goroutine 83\r\n        /home/user/go/pkg/mod/github.com/valyala/fasthttp@v1.55.0/workerpool.go:195 +0x190\r\nexit status 2\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226879485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canbusio","id":168648317,"node_id":"U_kgDOCg1efQ","avatar_url":"https://avatars.githubusercontent.com/u/168648317?v=4","gravatar_id":"","url":"https://api.github.com/users/canbusio","html_url":"https://github.com/canbusio","followers_url":"https://api.github.com/users/canbusio/followers","following_url":"https://api.github.com/users/canbusio/following{/other_user}","gists_url":"https://api.github.com/users/canbusio/gists{/gist_id}","starred_url":"https://api.github.com/users/canbusio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canbusio/subscriptions","organizations_url":"https://api.github.com/users/canbusio/orgs","repos_url":"https://api.github.com/users/canbusio/repos","events_url":"https://api.github.com/users/canbusio/events{/privacy}","received_events_url":"https://api.github.com/users/canbusio/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13495347780,"node_id":"MEE_lADODfYWS86PdChCzwAAAAMkYqpE","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13495347780","actor":{"login":"canbusio","id":168648317,"node_id":"U_kgDOCg1efQ","avatar_url":"https://avatars.githubusercontent.com/u/168648317?v=4","gravatar_id":"","url":"https://api.github.com/users/canbusio","html_url":"https://github.com/canbusio","followers_url":"https://api.github.com/users/canbusio/followers","following_url":"https://api.github.com/users/canbusio/following{/other_user}","gists_url":"https://api.github.com/users/canbusio/gists{/gist_id}","starred_url":"https://api.github.com/users/canbusio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canbusio/subscriptions","organizations_url":"https://api.github.com/users/canbusio/orgs","repos_url":"https://api.github.com/users/canbusio/repos","events_url":"https://api.github.com/users/canbusio/events{/privacy}","received_events_url":"https://api.github.com/users/canbusio/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-13T12:11:38Z","performed_via_github_app":null},{"id":13495347784,"node_id":"SE_lADODfYWS86PdChCzwAAAAMkYqpI","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13495347784","actor":{"login":"canbusio","id":168648317,"node_id":"U_kgDOCg1efQ","avatar_url":"https://avatars.githubusercontent.com/u/168648317?v=4","gravatar_id":"","url":"https://api.github.com/users/canbusio","html_url":"https://github.com/canbusio","followers_url":"https://api.github.com/users/canbusio/followers","following_url":"https://api.github.com/users/canbusio/following{/other_user}","gists_url":"https://api.github.com/users/canbusio/gists{/gist_id}","starred_url":"https://api.github.com/users/canbusio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canbusio/subscriptions","organizations_url":"https://api.github.com/users/canbusio/orgs","repos_url":"https://api.github.com/users/canbusio/repos","events_url":"https://api.github.com/users/canbusio/events{/privacy}","received_events_url":"https://api.github.com/users/canbusio/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-13T12:11:38Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226880572","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2226880572","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2226880572,"node_id":"IC_kwDODfYWS86Eu4A8","user":{"login":"canbusio","id":168648317,"node_id":"U_kgDOCg1efQ","avatar_url":"https://avatars.githubusercontent.com/u/168648317?v=4","gravatar_id":"","url":"https://api.github.com/users/canbusio","html_url":"https://github.com/canbusio","followers_url":"https://api.github.com/users/canbusio/followers","following_url":"https://api.github.com/users/canbusio/following{/other_user}","gists_url":"https://api.github.com/users/canbusio/gists{/gist_id}","starred_url":"https://api.github.com/users/canbusio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canbusio/subscriptions","organizations_url":"https://api.github.com/users/canbusio/orgs","repos_url":"https://api.github.com/users/canbusio/repos","events_url":"https://api.github.com/users/canbusio/events{/privacy}","received_events_url":"https://api.github.com/users/canbusio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-13T12:15:23Z","updated_at":"2024-07-13T12:15:23Z","body":"@ReneWerner87 cache config for home page only, if no maxLen 0, other page like /c/12345 would be mathed.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226880572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canbusio","id":168648317,"node_id":"U_kgDOCg1efQ","avatar_url":"https://avatars.githubusercontent.com/u/168648317?v=4","gravatar_id":"","url":"https://api.github.com/users/canbusio","html_url":"https://github.com/canbusio","followers_url":"https://api.github.com/users/canbusio/followers","following_url":"https://api.github.com/users/canbusio/following{/other_user}","gists_url":"https://api.github.com/users/canbusio/gists{/gist_id}","starred_url":"https://api.github.com/users/canbusio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canbusio/subscriptions","organizations_url":"https://api.github.com/users/canbusio/orgs","repos_url":"https://api.github.com/users/canbusio/repos","events_url":"https://api.github.com/users/canbusio/events{/privacy}","received_events_url":"https://api.github.com/users/canbusio/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13495353811,"node_id":"MEE_lADODfYWS86PdChCzwAAAAMkYsHT","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13495353811","actor":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-13T12:15:24Z","performed_via_github_app":null},{"id":13495353817,"node_id":"SE_lADODfYWS86PdChCzwAAAAMkYsHZ","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13495353817","actor":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-13T12:15:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226883085","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2226883085","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2226883085,"node_id":"IC_kwDODfYWS86Eu4oN","user":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-13T12:24:56Z","updated_at":"2024-07-13T12:24:56Z","body":"But you can use\n```go\napp.All(\"/\", cache.WebCache_Home)\n```\nwith the same effect ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226883085/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226884194","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2226884194","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2226884194,"node_id":"IC_kwDODfYWS86Eu45i","user":{"login":"gaby","id":835733,"node_id":"MDQ6VXNlcjgzNTczMw==","avatar_url":"https://avatars.githubusercontent.com/u/835733?v=4","gravatar_id":"","url":"https://api.github.com/users/gaby","html_url":"https://github.com/gaby","followers_url":"https://api.github.com/users/gaby/followers","following_url":"https://api.github.com/users/gaby/following{/other_user}","gists_url":"https://api.github.com/users/gaby/gists{/gist_id}","starred_url":"https://api.github.com/users/gaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaby/subscriptions","organizations_url":"https://api.github.com/users/gaby/orgs","repos_url":"https://api.github.com/users/gaby/repos","events_url":"https://api.github.com/users/gaby/events{/privacy}","received_events_url":"https://api.github.com/users/gaby/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-13T12:30:07Z","updated_at":"2024-07-13T12:30:07Z","body":"@ReneWerner87 The `heap` in cache is using indexes without any checks:\r\n\r\nhttps://github.com/gofiber/fiber/blob/main/middleware/cache/heap.go#L86","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226884194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gaby","id":835733,"node_id":"MDQ6VXNlcjgzNTczMw==","avatar_url":"https://avatars.githubusercontent.com/u/835733?v=4","gravatar_id":"","url":"https://api.github.com/users/gaby","html_url":"https://github.com/gaby","followers_url":"https://api.github.com/users/gaby/followers","following_url":"https://api.github.com/users/gaby/following{/other_user}","gists_url":"https://api.github.com/users/gaby/gists{/gist_id}","starred_url":"https://api.github.com/users/gaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaby/subscriptions","organizations_url":"https://api.github.com/users/gaby/orgs","repos_url":"https://api.github.com/users/gaby/repos","events_url":"https://api.github.com/users/gaby/events{/privacy}","received_events_url":"https://api.github.com/users/gaby/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13495377024,"node_id":"MEE_lADODfYWS86PdChCzwAAAAMkYxyA","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13495377024","actor":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-13T12:30:08Z","performed_via_github_app":null},{"id":13495377027,"node_id":"SE_lADODfYWS86PdChCzwAAAAMkYxyD","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13495377027","actor":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-13T12:30:08Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226884974","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2226884974","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2226884974,"node_id":"IC_kwDODfYWS86Eu5Fu","user":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-13T12:33:25Z","updated_at":"2024-07-13T12:33:25Z","body":"Ok, then we need an adjustment ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226884974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13495382968,"node_id":"LE_lADODfYWS86PdChCzwAAAAMkYzO4","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13495382968","actor":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-13T12:33:52Z","label":{"name":"üëç Accepting PR","color":"f9d0c4"},"performed_via_github_app":null},{"id":13495382969,"node_id":"LE_lADODfYWS86PdChCzwAAAAMkYzO5","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13495382969","actor":{"login":"ReneWerner87","id":7063188,"node_id":"MDQ6VXNlcjcwNjMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7063188?v=4","gravatar_id":"","url":"https://api.github.com/users/ReneWerner87","html_url":"https://github.com/ReneWerner87","followers_url":"https://api.github.com/users/ReneWerner87/followers","following_url":"https://api.github.com/users/ReneWerner87/following{/other_user}","gists_url":"https://api.github.com/users/ReneWerner87/gists{/gist_id}","starred_url":"https://api.github.com/users/ReneWerner87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReneWerner87/subscriptions","organizations_url":"https://api.github.com/users/ReneWerner87/orgs","repos_url":"https://api.github.com/users/ReneWerner87/repos","events_url":"https://api.github.com/users/ReneWerner87/events{/privacy}","received_events_url":"https://api.github.com/users/ReneWerner87/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-13T12:33:52Z","label":{"name":"v3","color":"436eee"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226886448","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2226886448","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2226886448,"node_id":"IC_kwDODfYWS86Eu5cw","user":{"login":"gaby","id":835733,"node_id":"MDQ6VXNlcjgzNTczMw==","avatar_url":"https://avatars.githubusercontent.com/u/835733?v=4","gravatar_id":"","url":"https://api.github.com/users/gaby","html_url":"https://github.com/gaby","followers_url":"https://api.github.com/users/gaby/followers","following_url":"https://api.github.com/users/gaby/following{/other_user}","gists_url":"https://api.github.com/users/gaby/gists{/gist_id}","starred_url":"https://api.github.com/users/gaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaby/subscriptions","organizations_url":"https://api.github.com/users/gaby/orgs","repos_url":"https://api.github.com/users/gaby/repos","events_url":"https://api.github.com/users/gaby/events{/privacy}","received_events_url":"https://api.github.com/users/gaby/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-13T12:39:38Z","updated_at":"2024-07-13T12:40:00Z","body":"Should be something like this?\r\n\r\n```go\r\nfunc (h *indexedHeap) remove(idx int) (string, uint, error)\r\n    if idx < 0 || idx >= len(h.indices) {\r\n        return \"\", 0, ErrIndexOut0fRange\r\n    }\r\n    return h.removeInternal(h.indices[idx])\r\n}\r\n```\r\n\r\n`cache.go` would need to be updated too. I'm still not sure why `idx` is not in `indixes` for this case.\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2226886448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gaby","id":835733,"node_id":"MDQ6VXNlcjgzNTczMw==","avatar_url":"https://avatars.githubusercontent.com/u/835733?v=4","gravatar_id":"","url":"https://api.github.com/users/gaby","html_url":"https://github.com/gaby","followers_url":"https://api.github.com/users/gaby/followers","following_url":"https://api.github.com/users/gaby/following{/other_user}","gists_url":"https://api.github.com/users/gaby/gists{/gist_id}","starred_url":"https://api.github.com/users/gaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaby/subscriptions","organizations_url":"https://api.github.com/users/gaby/orgs","repos_url":"https://api.github.com/users/gaby/repos","events_url":"https://api.github.com/users/gaby/events{/privacy}","received_events_url":"https://api.github.com/users/gaby/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2227563609","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2227563609","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2227563609,"node_id":"IC_kwDODfYWS86ExexZ","user":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-15T01:13:39Z","updated_at":"2024-07-15T01:13:39Z","body":"Can I work on this issue?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2227563609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2227566186","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2227566186","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2227566186,"node_id":"IC_kwDODfYWS86ExfZq","user":{"login":"gaby","id":835733,"node_id":"MDQ6VXNlcjgzNTczMw==","avatar_url":"https://avatars.githubusercontent.com/u/835733?v=4","gravatar_id":"","url":"https://api.github.com/users/gaby","html_url":"https://github.com/gaby","followers_url":"https://api.github.com/users/gaby/followers","following_url":"https://api.github.com/users/gaby/following{/other_user}","gists_url":"https://api.github.com/users/gaby/gists{/gist_id}","starred_url":"https://api.github.com/users/gaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaby/subscriptions","organizations_url":"https://api.github.com/users/gaby/orgs","repos_url":"https://api.github.com/users/gaby/repos","events_url":"https://api.github.com/users/gaby/events{/privacy}","received_events_url":"https://api.github.com/users/gaby/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-15T01:18:44Z","updated_at":"2024-07-15T01:18:44Z","body":"@brunodmartins Sure, basically the implementation of heap.go needs some updates. A lot of the functions are not checking `idx` first before making the call. There's also a concurrency issue. The `remove` function should look like this: \r\n\r\n```go\r\n// Remove entry by index\r\nfunc (h *indexedHeap) remove(idx int) (string, uint) {\r\n\th.mu.Lock()\r\n\tdefer h.mu.Unlock()\r\n\tif idx < 0 || idx >= len(h.indices) {\r\n\t\treturn \"\", 0 // Return empty values if the index is out of bounds\r\n\t}\r\n\treturn h.removeInternal(h.indices[idx])\r\n}\r\n```\r\n\r\nThis requires also updating the actual `cache` middleware, to take into account that `0` being returned. But this same issue is also present in other functions like `removeinternal`, etc.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2227566186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gaby","id":835733,"node_id":"MDQ6VXNlcjgzNTczMw==","avatar_url":"https://avatars.githubusercontent.com/u/835733?v=4","gravatar_id":"","url":"https://api.github.com/users/gaby","html_url":"https://github.com/gaby","followers_url":"https://api.github.com/users/gaby/followers","following_url":"https://api.github.com/users/gaby/following{/other_user}","gists_url":"https://api.github.com/users/gaby/gists{/gist_id}","starred_url":"https://api.github.com/users/gaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaby/subscriptions","organizations_url":"https://api.github.com/users/gaby/orgs","repos_url":"https://api.github.com/users/gaby/repos","events_url":"https://api.github.com/users/gaby/events{/privacy}","received_events_url":"https://api.github.com/users/gaby/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13499274753,"node_id":"MEE_lADODfYWS86PdChCzwAAAAMknpYB","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13499274753","actor":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-15T01:18:45Z","performed_via_github_app":null},{"id":13499274759,"node_id":"SE_lADODfYWS86PdChCzwAAAAMknpYH","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13499274759","actor":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-15T01:18:45Z","performed_via_github_app":null},{"id":13499275054,"node_id":"AE_lADODfYWS86PdChCzwAAAAMknpcu","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13499275054","actor":{"login":"gaby","id":835733,"node_id":"MDQ6VXNlcjgzNTczMw==","avatar_url":"https://avatars.githubusercontent.com/u/835733?v=4","gravatar_id":"","url":"https://api.github.com/users/gaby","html_url":"https://github.com/gaby","followers_url":"https://api.github.com/users/gaby/followers","following_url":"https://api.github.com/users/gaby/following{/other_user}","gists_url":"https://api.github.com/users/gaby/gists{/gist_id}","starred_url":"https://api.github.com/users/gaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaby/subscriptions","organizations_url":"https://api.github.com/users/gaby/orgs","repos_url":"https://api.github.com/users/gaby/repos","events_url":"https://api.github.com/users/gaby/events{/privacy}","received_events_url":"https://api.github.com/users/gaby/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-07-15T01:18:50Z","assignee":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2227567008","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2227567008","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2227567008,"node_id":"IC_kwDODfYWS86Exfmg","user":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-15T01:20:14Z","updated_at":"2024-07-15T01:20:14Z","body":"Thanks! I will review the code now! Any doubts I will return here =)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2227567008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2227567485","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2227567485","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2227567485,"node_id":"IC_kwDODfYWS86Exft9","user":{"login":"gaby","id":835733,"node_id":"MDQ6VXNlcjgzNTczMw==","avatar_url":"https://avatars.githubusercontent.com/u/835733?v=4","gravatar_id":"","url":"https://api.github.com/users/gaby","html_url":"https://github.com/gaby","followers_url":"https://api.github.com/users/gaby/followers","following_url":"https://api.github.com/users/gaby/following{/other_user}","gists_url":"https://api.github.com/users/gaby/gists{/gist_id}","starred_url":"https://api.github.com/users/gaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaby/subscriptions","organizations_url":"https://api.github.com/users/gaby/orgs","repos_url":"https://api.github.com/users/gaby/repos","events_url":"https://api.github.com/users/gaby/events{/privacy}","received_events_url":"https://api.github.com/users/gaby/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-15T01:21:00Z","updated_at":"2024-07-15T01:21:00Z","body":"@brunodmartins This is a draft I have for `heap.go`, I never got into the changes needed to the `cache` middleware itself.\r\n\r\n```go\r\npackage cache\r\n\r\nimport (\r\n\t\"container/heap\"\r\n\t\"sync\"\r\n)\r\n\r\ntype heapEntry struct {\r\n\tkey   string\r\n\texp   uint64\r\n\tbytes uint\r\n\tidx   int\r\n}\r\n\r\n// indexedHeap is a regular min-heap that allows finding\r\n// elements in constant time. It does so by handing out special indices\r\n// and tracking entry movement.\r\n//\r\n// indexdedHeap is used for quickly finding entries with the lowest\r\n// expiration timestamp and deleting arbitrary entries.\r\ntype indexedHeap struct {\r\n\t// Slice the heap is built on\r\n\tentries []heapEntry\r\n\t// Mapping \"index\" to position in heap slice\r\n\tindices []int\r\n\t// Max index handed out\r\n\tmaxidx int\r\n\t// Mutex for concurrent access\r\n\tmu sync.Mutex\r\n}\r\n\r\nfunc (h indexedHeap) Len() int {\r\n\treturn len(h.entries)\r\n}\r\n\r\nfunc (h indexedHeap) Less(i, j int) bool {\r\n\treturn h.entries[i].exp < h.entries[j].exp\r\n}\r\n\r\nfunc (h indexedHeap) Swap(i, j int) {\r\n\th.entries[i], h.entries[j] = h.entries[j], h.entries[i]\r\n\th.indices[h.entries[i].idx] = i\r\n\th.indices[h.entries[j].idx] = j\r\n}\r\n\r\nfunc (h *indexedHeap) Push(x any) {\r\n\th.mu.Lock()\r\n\tdefer h.mu.Unlock()\r\n\th.pushInternal(x.(heapEntry)) //nolint:forcetypeassert // Forced type assertion required to implement the heap.Interface interface\r\n}\r\n\r\nfunc (h *indexedHeap) Pop() any {\r\n\th.mu.Lock()\r\n\tdefer h.mu.Unlock()\r\n\treturn h.popInternal()\r\n}\r\n\r\nfunc (h *indexedHeap) popInternal() any {\r\n\tn := len(h.entries)\r\n\tif n == 0 {\r\n\t\treturn nil\r\n\t}\r\n\tentry := h.entries[n-1]\r\n\th.entries = h.entries[:n-1]\r\n\treturn entry\r\n}\r\n\r\nfunc (h *indexedHeap) pushInternal(entry heapEntry) {\r\n\th.indices[entry.idx] = len(h.entries)\r\n\th.entries = append(h.entries, entry)\r\n}\r\n\r\n// Returns index to track entry\r\nfunc (h *indexedHeap) put(key string, exp uint64, bytes uint) int {\r\n\th.mu.Lock()\r\n\tdefer h.mu.Unlock()\r\n\tidx := 0\r\n\tif len(h.entries) < h.maxidx {\r\n\t\t// Steal index from previously removed entry\r\n\t\t// capacity > size is guaranteed\r\n\t\tn := len(h.entries)\r\n\t\tidx = h.entries[:n+1][n].idx\r\n\t} else {\r\n\t\tidx = h.maxidx\r\n\t\th.maxidx++\r\n\t\th.indices = append(h.indices, idx)\r\n\t}\r\n\t// Push manually to avoid allocation\r\n\th.pushInternal(heapEntry{\r\n\t\tkey: key, exp: exp, idx: idx, bytes: bytes,\r\n\t})\r\n\theap.Fix(h, h.Len()-1)\r\n\treturn idx\r\n}\r\n\r\nfunc (h *indexedHeap) removeInternal(realIdx int) (string, uint) {\r\n\th.mu.Lock()\r\n\tdefer h.mu.Unlock()\r\n\tif realIdx < 0 || realIdx >= len(h.entries) {\r\n\t\treturn \"\", 0 // Return empty values if the index is out of bounds\r\n\t}\r\n\tx := heap.Remove(h, realIdx).(heapEntry) //nolint:forcetypeassert,errcheck // Forced type assertion required to implement the heap.Interface interface\r\n\treturn x.key, x.bytes\r\n}\r\n\r\n// Remove entry by index\r\nfunc (h *indexedHeap) remove(idx int) (string, uint) {\r\n\th.mu.Lock()\r\n\tdefer h.mu.Unlock()\r\n\tif idx < 0 || idx >= len(h.indices) {\r\n\t\treturn \"\", 0 // Return empty values if the index is out of bounds\r\n\t}\r\n\treturn h.removeInternal(h.indices[idx])\r\n}\r\n\r\n// Remove entry with lowest expiration time\r\nfunc (h *indexedHeap) removeFirst() (string, uint) {\r\n\th.mu.Lock()\r\n\tdefer h.mu.Unlock()\r\n\tif len(h.entries) == 0 {\r\n\t\treturn \"\", 0 // Return empty values if there are no entries\r\n\t}\r\n\treturn h.removeInternal(0)\r\n}\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2227567485/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gaby","id":835733,"node_id":"MDQ6VXNlcjgzNTczMw==","avatar_url":"https://avatars.githubusercontent.com/u/835733?v=4","gravatar_id":"","url":"https://api.github.com/users/gaby","html_url":"https://github.com/gaby","followers_url":"https://api.github.com/users/gaby/followers","following_url":"https://api.github.com/users/gaby/following{/other_user}","gists_url":"https://api.github.com/users/gaby/gists{/gist_id}","starred_url":"https://api.github.com/users/gaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaby/subscriptions","organizations_url":"https://api.github.com/users/gaby/orgs","repos_url":"https://api.github.com/users/gaby/repos","events_url":"https://api.github.com/users/gaby/events{/privacy}","received_events_url":"https://api.github.com/users/gaby/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13499282900,"node_id":"MEE_lADODfYWS86PdChCzwAAAAMknrXU","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13499282900","actor":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-15T01:21:02Z","performed_via_github_app":null},{"id":13499282911,"node_id":"SE_lADODfYWS86PdChCzwAAAAMknrXf","url":"https://api.github.com/repos/gofiber/fiber/issues/events/13499282911","actor":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-15T01:21:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2229837641","html_url":"https://github.com/gofiber/fiber/issues/3072#issuecomment-2229837641","issue_url":"https://api.github.com/repos/gofiber/fiber/issues/3072","id":2229837641,"node_id":"IC_kwDODfYWS86E6J9J","user":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-16T01:51:21Z","updated_at":"2024-07-16T01:51:21Z","body":"@gaby I have found why the idx does not exist. The main reason is that on the given scenario by @canbusio , the cache always expire, due to the function ValidateLogin return always `true`. Removing it from the code, the error does not occur. Despite that, I investigated further and found out that, before we validate if the cache is expired, we are not really checking if the cache entry really exist. \r\n\r\ncache.go\r\n```go \r\n\t\t// Get entry from pool\r\n\t\te := manager.get(key)\r\n\r\n\t\t// Lock entry\r\n\t\tmux.Lock()\r\n\r\n\t\t// Get timestamp\r\n\t\tts := atomic.LoadUint64(&timestamp)\r\n\r\n\t\t// Invalidate cache if requested\r\n\t\tif cfg.CacheInvalidator != nil && cfg.CacheInvalidator(c) && e != nil {\r\n\t\t\te.exp = ts - 1\r\n\t\t}\r\n\r\n\t\t// Check if entry is expired\r\n\t\tif e.exp != 0 && ts >= e.exp {\r\n\t\t\tdeleteKey(key)\r\n\t\t\tif cfg.MaxBytes > 0 {\r\n\t\t\t\t_, size := heap.remove(e.heapidx)\r\n\t\t\t\tstoredBytes -= size\r\n\t\t\t}\r\n\t\t}\r\n```\r\n\r\nThe call to `manager.get` instead of returning a `nil` in case not founding the entry, returns a new instance, making the rest of the previous call operate as if a real cache entry exist.\r\n\r\nmanager.go\r\n```go\r\n\tif it, _ = m.memory.Get(key).(*item); it == nil { //nolint:errcheck // We store nothing else in the pool\r\n\t\tit = m.acquire()\r\n\t\treturn it\r\n\t}\r\n```\r\n\r\nTo fix the issue, I changed the `manager.get` to return a `nil` in case the entry is not found, and modified the cache behavior to skip invalidation in case of a `nil` is returned. I will open a draft PR =)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/gofiber/fiber/issues/comments/2229837641/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brunodmartins","id":7273952,"node_id":"MDQ6VXNlcjcyNzM5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7273952?v=4","gravatar_id":"","url":"https://api.github.com/users/brunodmartins","html_url":"https://github.com/brunodmartins","followers_url":"https://api.github.com/users/brunodmartins/followers","following_url":"https://api.github.com/users/brunodmartins/following{/other_user}","gists_url":"https://api.github.com/users/brunodmartins/gists{/gist_id}","starred_url":"https://api.github.com/users/brunodmartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunodmartins/subscriptions","organizations_url":"https://api.github.com/users/brunodmartins/orgs","repos_url":"https://api.github.com/users/brunodmartins/repos","events_url":"https://api.github.com/users/brunodmartins/events{/privacy}","received_events_url":"https://api.github.com/users/brunodmartins/received_events","type":"User","user_view_type":"public","site_admin":false}}]