diff --git a/internal/gopsutil/cpu/cpu_darwin_cgo.go b/internal/gopsutil/cpu/cpu_darwin_cgo.go
index 180e0afa..2a7d4a11 100644
--- a/internal/gopsutil/cpu/cpu_darwin_cgo.go
+++ b/internal/gopsutil/cpu/cpu_darwin_cgo.go
@@ -10,6 +10,7 @@ package cpu
 #include <mach/mach_init.h>
 #include <mach/mach_host.h>
 #include <mach/host_info.h>
+#include <TargetConditionals.h>
 #if TARGET_OS_MAC
 #include <libproc.h>
 #endif
