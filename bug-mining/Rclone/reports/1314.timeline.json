[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/619386878","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-619386878","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":619386878,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTM4Njg3OA==","user":{"login":"Zeioth","id":3357792,"node_id":"MDQ6VXNlcjMzNTc3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3357792?v=4","gravatar_id":"","url":"https://api.github.com/users/Zeioth","html_url":"https://github.com/Zeioth","followers_url":"https://api.github.com/users/Zeioth/followers","following_url":"https://api.github.com/users/Zeioth/following{/other_user}","gists_url":"https://api.github.com/users/Zeioth/gists{/gist_id}","starred_url":"https://api.github.com/users/Zeioth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zeioth/subscriptions","organizations_url":"https://api.github.com/users/Zeioth/orgs","repos_url":"https://api.github.com/users/Zeioth/repos","events_url":"https://api.github.com/users/Zeioth/events{/privacy}","received_events_url":"https://api.github.com/users/Zeioth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T14:20:41Z","updated_at":"2020-04-25T14:20:41Z","body":"Possible solution:\r\nhttps://medium.com/@staticmukesh/how-i-managed-to-delete-1-billions-files-from-my-google-drive-account-9fdc67e6aaca","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/619386878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Zeioth","id":3357792,"node_id":"MDQ6VXNlcjMzNTc3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3357792?v=4","gravatar_id":"","url":"https://api.github.com/users/Zeioth","html_url":"https://github.com/Zeioth","followers_url":"https://api.github.com/users/Zeioth/followers","following_url":"https://api.github.com/users/Zeioth/following{/other_user}","gists_url":"https://api.github.com/users/Zeioth/gists{/gist_id}","starred_url":"https://api.github.com/users/Zeioth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zeioth/subscriptions","organizations_url":"https://api.github.com/users/Zeioth/orgs","repos_url":"https://api.github.com/users/Zeioth/repos","events_url":"https://api.github.com/users/Zeioth/events{/privacy}","received_events_url":"https://api.github.com/users/Zeioth/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/619548288","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-619548288","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":619548288,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTU0ODI4OA==","user":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T13:17:43Z","updated_at":"2020-04-26T13:17:43Z","body":"@ncw - I know we've looked before and I still do not see any API way to do this rather than that longer complex way listed a few posts online like the one above. I can't see this coming into rclone unless they expose the API so I can mark an as an enhancement for Drive and let me know what you want to do with it.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/619548288/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3272934846,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI3MjkzNDg0Ng==","url":"https://api.github.com/repos/rclone/rclone/issues/events/3272934846","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-26T13:17:43Z","performed_via_github_app":null},{"id":3272934847,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyNzI5MzQ4NDc=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3272934847","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-26T13:17:43Z","performed_via_github_app":null},{"id":3272934941,"node_id":"MDEyOkxhYmVsZWRFdmVudDMyNzI5MzQ5NDE=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3272934941","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-04-26T13:17:53Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":3272934942,"node_id":"MDEyOkxhYmVsZWRFdmVudDMyNzI5MzQ5NDI=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3272934942","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-04-26T13:17:53Z","label":{"name":"Remote: Drive","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/619639471","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-619639471","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":619639471,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTYzOTQ3MQ==","user":{"login":"Zeioth","id":3357792,"node_id":"MDQ6VXNlcjMzNTc3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3357792?v=4","gravatar_id":"","url":"https://api.github.com/users/Zeioth","html_url":"https://github.com/Zeioth","followers_url":"https://api.github.com/users/Zeioth/followers","following_url":"https://api.github.com/users/Zeioth/following{/other_user}","gists_url":"https://api.github.com/users/Zeioth/gists{/gist_id}","starred_url":"https://api.github.com/users/Zeioth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zeioth/subscriptions","organizations_url":"https://api.github.com/users/Zeioth/orgs","repos_url":"https://api.github.com/users/Zeioth/repos","events_url":"https://api.github.com/users/Zeioth/events{/privacy}","received_events_url":"https://api.github.com/users/Zeioth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T23:10:53Z","updated_at":"2020-04-26T23:40:13Z","body":"For some stupid reason, I need to validate my OAuth  credentials in order to delete files from Google Drive, which apparently takes 4-6 weeks, so I can't confirm that everything works yet, but this should delete only orphan files and directories:\r\n\r\n**The premise is:**\r\n\r\n* List all files.\r\n* If a file has no 'parents' field, it means it's an orphan file.\r\n* So, the script deletes them.\r\n\r\n``` python\r\nfrom __future__ import print_function\r\nimport pickle\r\nimport os.path\r\nfrom googleapiclient.discovery import build\r\nfrom google_auth_oauthlib.flow import InstalledAppFlow\r\nfrom google.auth.transport.requests import Request\r\n \r\n# If modifying these scopes, delete the file token.pickle.\r\nSCOPES = ['https://www.googleapis.com/auth/drive']\r\n \r\ndef callback(request_id, response, exception):\r\n    if exception:\r\n        print(\"Exception:\", exception)\r\n \r\ndef main():\r\n    \"\"\"\r\n   Description:\r\n   Shows basic usage of the Drive v3 API to delete orphan files.\r\n   \"\"\"\r\n \r\n    \"\"\" --- CHECK CREDENTIALS --- \"\"\"\r\n    creds = None\r\n    # The file token.pickle stores the user's access and refresh tokens, and is\r\n    # created automatically when the authorization flow completes for the first\r\n    # time.\r\n    if os.path.exists('token.pickle'):\r\n        with open('token.pickle', 'rb') as token:\r\n            creds = pickle.load(token)\r\n    # If there are no (valid) credentials available, let the user log in.\r\n    if not creds or not creds.valid:\r\n        if creds and creds.expired and creds.refresh_token:\r\n            creds.refresh(Request())\r\n        else:\r\n            flow = InstalledAppFlow.from_client_secrets_file(\r\n                'credentials.json', SCOPES)\r\n            creds = flow.run_local_server(port=0)\r\n        # Save the credentials for the next run\r\n        with open('token.pickle', 'wb') as token:\r\n            pickle.dump(creds, token)\r\n \r\n    \"\"\" --- OPEN CONNECTION --- \"\"\"\r\n    service = build('drive', 'v3', credentials=creds)\r\n \r\n    page_token = \"\"\r\n    files = None\r\n    orphans = []\r\n    page_size = 100\r\n    batch_counter = 0\r\n \r\n    print(\"LISTING ORPHAN FILES\")\r\n    print(\"-----------------------------\")\r\n    while (True):\r\n        # List\r\n        r = service.files().list(pageToken=page_token,\r\n                                 pageSize=page_size,\r\n                                 fields=\"nextPageToken, files\"\r\n                                 ).execute()\r\n        page_token = r.get('nextPageToken')\r\n        files = r.get('files', [])\r\n \r\n        # Filter orphans\r\n        # NOTE: (If the file has no 'parents' field, it means it's orphan)\r\n        for file in files:\r\n            try:\r\n                if file['parents']:\r\n                    print(\"File with a parent found.\")\r\n            except Exception as e:\r\n                print(\"Orphan file found.\")\r\n                orphans.append(file['id'])\r\n \r\n        # Exit condition\r\n        if page_token is None:\r\n            break\r\n \r\n    print(\"DELETING ORPHAN FILES\")\r\n    print(\"-----------------------------\")\r\n    batch_size = min(len(orphans), 100)\r\n    while(len(orphans) > 0):\r\n        batch = service.new_batch_http_request(callback=callback)\r\n        for i in range(batch_size):\r\n            print(\"File with id {0} queued for deletion.\".format(orphans[0]))\r\n            batch.add(service.files().delete(fileId=orphans[0]))\r\n            del orphans[0]\r\n        batch.execute()\r\n        batch_counter += 1\r\n        print(\"BATCH {0} DELETED - {1} FILES DELETED\".format(batch_counter,\r\n                                                             batch_size))\r\n \r\n \r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\nThis should not delete files in the root directory, as they have the 'root' value for the field 'parents'.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/619639471/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Zeioth","id":3357792,"node_id":"MDQ6VXNlcjMzNTc3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3357792?v=4","gravatar_id":"","url":"https://api.github.com/users/Zeioth","html_url":"https://github.com/Zeioth","followers_url":"https://api.github.com/users/Zeioth/followers","following_url":"https://api.github.com/users/Zeioth/following{/other_user}","gists_url":"https://api.github.com/users/Zeioth/gists{/gist_id}","starred_url":"https://api.github.com/users/Zeioth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zeioth/subscriptions","organizations_url":"https://api.github.com/users/Zeioth/orgs","repos_url":"https://api.github.com/users/Zeioth/repos","events_url":"https://api.github.com/users/Zeioth/events{/privacy}","received_events_url":"https://api.github.com/users/Zeioth/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3273539550,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MzI3MzUzOTU1MA==","url":"https://api.github.com/repos/rclone/rclone/issues/events/3273539550","actor":{"login":"Zeioth","id":3357792,"node_id":"MDQ6VXNlcjMzNTc3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3357792?v=4","gravatar_id":"","url":"https://api.github.com/users/Zeioth","html_url":"https://github.com/Zeioth","followers_url":"https://api.github.com/users/Zeioth/followers","following_url":"https://api.github.com/users/Zeioth/following{/other_user}","gists_url":"https://api.github.com/users/Zeioth/gists{/gist_id}","starred_url":"https://api.github.com/users/Zeioth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zeioth/subscriptions","organizations_url":"https://api.github.com/users/Zeioth/orgs","repos_url":"https://api.github.com/users/Zeioth/repos","events_url":"https://api.github.com/users/Zeioth/events{/privacy}","received_events_url":"https://api.github.com/users/Zeioth/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2020-04-27T00:19:19Z","rename":{"from":"Google Drive: No way to delete orhan files","to":"Google Drive: No way to delete orphan files"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/620007174","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-620007174","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":620007174,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDAwNzE3NA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T14:03:17Z","updated_at":"2020-04-27T14:03:17Z","body":"This appears to be quite tricky...\r\n\r\nTo make it work in rclone we'd need to find [a query](https://developers.google.com/drive/api/v3/search-files) which meant this file has no parents - I'm not sure there is one though...\r\n\r\nAssuming not, then you'd have to do the initial query with no `... in parents` filter which would mean that you'd get **all** items returned. You'd then manually discard any item with parents.\r\n\r\nThat would work, but it would be very slow for drives with lots of files.\r\n\r\nIf anyone wants to have a go at a `--drive-orphans` flag, here is the code you need to be looking at (showing the trashed only function)\r\n\r\nhttps://github.com/rclone/rclone/blob/8e91f83174cc4011158c596d0c8569cd226fc36d/backend/drive/drive.go#L679-L681\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/620007174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3275937689,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDMyNzU5Mzc2ODk=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3275937689","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2020-04-27T14:03:26Z","milestone":{"title":"Help Wanted"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/620007892","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-620007892","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":620007892,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDAwNzg5Mg==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T14:04:29Z","updated_at":"2020-04-27T14:04:29Z","body":"> On Google drive, I deleted a directory that was created by rclone, and now all the 40.000 files inside of it are orphan. There's some way to use RClone to delete all orphan files on my drive? \r\n\r\nHow did you delete that directory? Was it through rclone? If so we need to fix that!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/620007892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/620035371","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-620035371","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":620035371,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDAzNTM3MQ==","user":{"login":"Zeioth","id":3357792,"node_id":"MDQ6VXNlcjMzNTc3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3357792?v=4","gravatar_id":"","url":"https://api.github.com/users/Zeioth","html_url":"https://github.com/Zeioth","followers_url":"https://api.github.com/users/Zeioth/followers","following_url":"https://api.github.com/users/Zeioth/following{/other_user}","gists_url":"https://api.github.com/users/Zeioth/gists{/gist_id}","starred_url":"https://api.github.com/users/Zeioth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zeioth/subscriptions","organizations_url":"https://api.github.com/users/Zeioth/orgs","repos_url":"https://api.github.com/users/Zeioth/repos","events_url":"https://api.github.com/users/Zeioth/events{/privacy}","received_events_url":"https://api.github.com/users/Zeioth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T14:50:02Z","updated_at":"2020-04-27T14:50:33Z","body":"No it wasn't through RClone: I deleted the directory created by RClone, manually on Google Drive website. Apparently when you do that, it generates orphan files. It's on Google Drive documentation.\r\n\r\nIt's their fault, not RClone. Still it's a quite common case of use.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/620035371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Zeioth","id":3357792,"node_id":"MDQ6VXNlcjMzNTc3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3357792?v=4","gravatar_id":"","url":"https://api.github.com/users/Zeioth","html_url":"https://github.com/Zeioth","followers_url":"https://api.github.com/users/Zeioth/followers","following_url":"https://api.github.com/users/Zeioth/following{/other_user}","gists_url":"https://api.github.com/users/Zeioth/gists{/gist_id}","starred_url":"https://api.github.com/users/Zeioth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zeioth/subscriptions","organizations_url":"https://api.github.com/users/Zeioth/orgs","repos_url":"https://api.github.com/users/Zeioth/repos","events_url":"https://api.github.com/users/Zeioth/events{/privacy}","received_events_url":"https://api.github.com/users/Zeioth/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/621281305","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-621281305","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":621281305,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTI4MTMwNQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-29T15:20:32Z","updated_at":"2020-04-29T15:20:32Z","body":"> No it wasn't through RClone: I deleted the directory created by RClone, manually on Google Drive website. Apparently when you do that, it generates orphan files. It's on Google Drive documentation.\r\n\r\nReally! That is weird!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/621281305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/621283166","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-621283166","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":621283166,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTI4MzE2Ng==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-29T15:23:31Z","updated_at":"2020-04-29T15:23:31Z","body":"I've added the framework for backend commands now, so if someone wanted to make a \"rescue-orphans\" command for the drive backend that would now be possible.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/621283166/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/846612752","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-846612752","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":846612752,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NjYxMjc1Mg==","user":{"login":"Ret2lib","id":20664366,"node_id":"MDQ6VXNlcjIwNjY0MzY2","avatar_url":"https://avatars.githubusercontent.com/u/20664366?v=4","gravatar_id":"","url":"https://api.github.com/users/Ret2lib","html_url":"https://github.com/Ret2lib","followers_url":"https://api.github.com/users/Ret2lib/followers","following_url":"https://api.github.com/users/Ret2lib/following{/other_user}","gists_url":"https://api.github.com/users/Ret2lib/gists{/gist_id}","starred_url":"https://api.github.com/users/Ret2lib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ret2lib/subscriptions","organizations_url":"https://api.github.com/users/Ret2lib/orgs","repos_url":"https://api.github.com/users/Ret2lib/repos","events_url":"https://api.github.com/users/Ret2lib/events{/privacy}","received_events_url":"https://api.github.com/users/Ret2lib/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-23T19:30:19Z","updated_at":"2021-05-23T19:30:19Z","body":"Hi,\r\n\r\nI'm willing to help contribute to this but not sure what is meant by \"framework for backend commands\". Is there somewhere I can read about on this? What part of the code do I need to add this to (I just found out about rclone today)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/846612752/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Ret2lib","id":20664366,"node_id":"MDQ6VXNlcjIwNjY0MzY2","avatar_url":"https://avatars.githubusercontent.com/u/20664366?v=4","gravatar_id":"","url":"https://api.github.com/users/Ret2lib","html_url":"https://github.com/Ret2lib","followers_url":"https://api.github.com/users/Ret2lib/followers","following_url":"https://api.github.com/users/Ret2lib/following{/other_user}","gists_url":"https://api.github.com/users/Ret2lib/gists{/gist_id}","starred_url":"https://api.github.com/users/Ret2lib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ret2lib/subscriptions","organizations_url":"https://api.github.com/users/Ret2lib/orgs","repos_url":"https://api.github.com/users/Ret2lib/repos","events_url":"https://api.github.com/users/Ret2lib/events{/privacy}","received_events_url":"https://api.github.com/users/Ret2lib/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/858769714","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-858769714","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":858769714,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODc2OTcxNA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T16:31:49Z","updated_at":"2021-06-10T16:31:49Z","body":"@Ret2lib sorry for the delay responding.\r\n\r\nThe backend commands are defined here\r\n\r\nhttps://github.com/rclone/rclone/blob/654f5309b041cbb65bba3b86423fcb75c0d84dab/backend/drive/drive.go#L3077\r\n\r\nAnd implemented here\r\n\r\nhttps://github.com/rclone/rclone/blob/654f5309b041cbb65bba3b86423fcb75c0d84dab/backend/drive/drive.go#L3211\r\n\r\nSo you'd make a function which did the work and parse the arguments in the `Command` function, then call your function.\r\n\r\nYou'd use it something like this\r\n\r\n    rclone backend rescueorphans drive:dir-to-rescue-files\r\n\r\nLet me know if you'd like more help and I'll provide it :-)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/858769714/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4872587635,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDg3MjU4NzYzNQ==","url":"https://api.github.com/repos/rclone/rclone/issues/events/4872587635","actor":{"login":"Ret2lib","id":20664366,"node_id":"MDQ6VXNlcjIwNjY0MzY2","avatar_url":"https://avatars.githubusercontent.com/u/20664366?v=4","gravatar_id":"","url":"https://api.github.com/users/Ret2lib","html_url":"https://github.com/Ret2lib","followers_url":"https://api.github.com/users/Ret2lib/followers","following_url":"https://api.github.com/users/Ret2lib/following{/other_user}","gists_url":"https://api.github.com/users/Ret2lib/gists{/gist_id}","starred_url":"https://api.github.com/users/Ret2lib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ret2lib/subscriptions","organizations_url":"https://api.github.com/users/Ret2lib/orgs","repos_url":"https://api.github.com/users/Ret2lib/repos","events_url":"https://api.github.com/users/Ret2lib/events{/privacy}","received_events_url":"https://api.github.com/users/Ret2lib/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-06-10T16:31:49Z","performed_via_github_app":null},{"id":4872587636,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ4NzI1ODc2MzY=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4872587636","actor":{"login":"Ret2lib","id":20664366,"node_id":"MDQ6VXNlcjIwNjY0MzY2","avatar_url":"https://avatars.githubusercontent.com/u/20664366?v=4","gravatar_id":"","url":"https://api.github.com/users/Ret2lib","html_url":"https://github.com/Ret2lib","followers_url":"https://api.github.com/users/Ret2lib/followers","following_url":"https://api.github.com/users/Ret2lib/following{/other_user}","gists_url":"https://api.github.com/users/Ret2lib/gists{/gist_id}","starred_url":"https://api.github.com/users/Ret2lib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ret2lib/subscriptions","organizations_url":"https://api.github.com/users/Ret2lib/orgs","repos_url":"https://api.github.com/users/Ret2lib/repos","events_url":"https://api.github.com/users/Ret2lib/events{/privacy}","received_events_url":"https://api.github.com/users/Ret2lib/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-06-10T16:31:49Z","performed_via_github_app":null},{"id":5999313108,"node_id":"MEE_lADOAQ-n5M4kKpprzwAAAAFllkDU","url":"https://api.github.com/repos/rclone/rclone/issues/events/5999313108","actor":{"login":"Ret2lib","id":20664366,"node_id":"MDQ6VXNlcjIwNjY0MzY2","avatar_url":"https://avatars.githubusercontent.com/u/20664366?v=4","gravatar_id":"","url":"https://api.github.com/users/Ret2lib","html_url":"https://github.com/Ret2lib","followers_url":"https://api.github.com/users/Ret2lib/followers","following_url":"https://api.github.com/users/Ret2lib/following{/other_user}","gists_url":"https://api.github.com/users/Ret2lib/gists{/gist_id}","starred_url":"https://api.github.com/users/Ret2lib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ret2lib/subscriptions","organizations_url":"https://api.github.com/users/Ret2lib/orgs","repos_url":"https://api.github.com/users/Ret2lib/repos","events_url":"https://api.github.com/users/Ret2lib/events{/privacy}","received_events_url":"https://api.github.com/users/Ret2lib/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-02-02T23:41:57Z","performed_via_github_app":null},{"id":5999313112,"node_id":"SE_lADOAQ-n5M4kKpprzwAAAAFllkDY","url":"https://api.github.com/repos/rclone/rclone/issues/events/5999313112","actor":{"login":"Ret2lib","id":20664366,"node_id":"MDQ6VXNlcjIwNjY0MzY2","avatar_url":"https://avatars.githubusercontent.com/u/20664366?v=4","gravatar_id":"","url":"https://api.github.com/users/Ret2lib","html_url":"https://github.com/Ret2lib","followers_url":"https://api.github.com/users/Ret2lib/followers","following_url":"https://api.github.com/users/Ret2lib/following{/other_user}","gists_url":"https://api.github.com/users/Ret2lib/gists{/gist_id}","starred_url":"https://api.github.com/users/Ret2lib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ret2lib/subscriptions","organizations_url":"https://api.github.com/users/Ret2lib/orgs","repos_url":"https://api.github.com/users/Ret2lib/repos","events_url":"https://api.github.com/users/Ret2lib/events{/privacy}","received_events_url":"https://api.github.com/users/Ret2lib/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-02-02T23:41:57Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2235778580","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-2235778580","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":2235778580,"node_id":"IC_kwDOAQ-n5M6FQ0YU","user":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-18T07:05:24Z","updated_at":"2024-07-18T07:05:24Z","body":"Did anything ever get solved here? I have millions of orphaned files.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2235778580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13558494272,"node_id":"REFE_lADOAQ-n5M4kKpprzwAAAAMoJjRA","url":"https://api.github.com/repos/rclone/rclone/issues/events/13558494272","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"96f964bbb1979353cf4f975147345e1ae1ccd354","commit_url":"https://api.github.com/repos/rclone/rclone/commits/96f964bbb1979353cf4f975147345e1ae1ccd354","created_at":"2024-07-18T15:41:38Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2236899154","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-2236899154","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":2236899154,"node_id":"IC_kwDOAQ-n5M6FVF9S","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-18T15:45:29Z","updated_at":"2024-07-18T15:45:29Z","body":"@dzg I had a go at implementing this\r\n\r\n[v1.68.0-beta.8105.96f964bbb.fix-4166-drive-rescue-orphans](https://beta.rclone.org/branch/fix-4166-drive-rescue-orphans/v1.68.0-beta.8105.96f964bbb.fix-4166-drive-rescue-orphans/) on branch [fix-4166-drive-rescue-orphans](https://github.com/rclone/rclone/tree/fix-4166-drive-rescue-orphans) (uploaded in 15-30 mins)\r\n\r\nUse like this\r\n\r\n### rescue\r\n\r\nRescue or delete any orphaned files\r\n\r\n    rclone backend rescue remote: [options] [<arguments>+]\r\n\r\nThis command rescues or deletes any orphaned files or directories.\r\n\r\nSometimes files can get orphaned in Google Drive. This means that they\r\nare no longer in any folder in Google Drive.\r\n\r\nThis command finds those files and either rescues them to a directory\r\nyou specify or deletes them.\r\n\r\nUsage:\r\n\r\nThis can be used in 3 ways.\r\n\r\nFirst, list all orphaned files\r\n\r\n    rclone backend rescue drive:directory\r\n\r\nSecond rescue all orphaned files to the directory indicated\r\n\r\n    rclone backend rescue drive:directory \"relative/path/to/rescue/directory\"\r\n\r\nThird delete all orphaned files to the trash\r\n\r\n    rclone backend rescue drive:directory -o delete\r\n\r\n\r\n**HOWEVER** this does not work for me. It finds the rescued files just fine, but trying to delete them gives 403 permission denied, and trying to rescue them into a directory (add a parent) gives \"Increasing the number of parents is not allowed, cannotAddParent\". I tried lots of variations of adding/removing parents but I couldn't get anything to work.\r\n\r\nSo I think that these files really are orphaned. The API no longer lets us add a parent to rescue them, and the API doesn't seem to let us delete them either.\r\n\r\nIt would be worth having a try with it though to see if you have the same experience.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2236899154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13558546379,"node_id":"MEE_lADOAQ-n5M4kKpprzwAAAAMoJv_L","url":"https://api.github.com/repos/rclone/rclone/issues/events/13558546379","actor":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-18T15:45:30Z","performed_via_github_app":null},{"id":13558546392,"node_id":"SE_lADOAQ-n5M4kKpprzwAAAAMoJv_Y","url":"https://api.github.com/repos/rclone/rclone/issues/events/13558546392","actor":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-18T15:45:30Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2398673130","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-2398673130","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":2398673130,"node_id":"IC_kwDOAQ-n5M6O-Njq","user":{"login":"timwsuqld","id":6201617,"node_id":"MDQ6VXNlcjYyMDE2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6201617?v=4","gravatar_id":"","url":"https://api.github.com/users/timwsuqld","html_url":"https://github.com/timwsuqld","followers_url":"https://api.github.com/users/timwsuqld/followers","following_url":"https://api.github.com/users/timwsuqld/following{/other_user}","gists_url":"https://api.github.com/users/timwsuqld/gists{/gist_id}","starred_url":"https://api.github.com/users/timwsuqld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timwsuqld/subscriptions","organizations_url":"https://api.github.com/users/timwsuqld/orgs","repos_url":"https://api.github.com/users/timwsuqld/repos","events_url":"https://api.github.com/users/timwsuqld/events{/privacy}","received_events_url":"https://api.github.com/users/timwsuqld/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-08T03:15:14Z","updated_at":"2024-10-08T03:15:14Z","body":"@ncw I had a quick play with your beta version, because I'm tackling this issue in my own tooling at the moment. Unfortunately, rclone with your mods is detecting more orphaned files/directories than my system does. Investigating a bit more, it appears to be detecting files/directories owned by other users (but that the current user has access to), as being orphaned as well.\r\n\r\nThe way I had implemented it in my tools was I had to query all files with the query `'me' in owners` and then check if `parents` was defined.\r\n\r\nSo because rclone is detecting more, I can't test the \"rescue\" part of this.\r\n\r\nBut I think we are in the same boat, what used to work (adding a new parent) no longer works. I know it used to work, because I used this code 6-10 months ago and it was working then. Now I get an error no matter what combination I try. Specifying an empty `removeParents`, not specifying `removeParents`, specifying 'root' for `removeParents`, trying the MyDrive ID in `removeParents`. The only request that doesn't error, is if I try the destination folder in `removeParents` and `addParents`, but then it gives me an OK without actually moving it.\r\n\r\n```\r\ngoogleapiclient.errors.HttpError: <HttpError 500 when requesting https://www.googleapis.com/drive/v3/files/<ORHPANED FILE>?addParents=<DESTINATION FOLDER>&removeParents=&alt=json returned \"Internal Error\". Details: \"[{'message': 'Internal Error', 'domain': 'global', 'reason': 'internalError'}]\">\r\n\r\ngoogleapiclient.errors.HttpError: <HttpError 500 when requesting https://www.googleapis.com/drive/v3/files/<ORHPANED FILE>?addParents=<DESTINATION FOLDER>&alt=json returned \"Internal Error\". Details: \"[{'message': 'Internal Error', 'domain': 'global', 'reason': 'internalError'}]\">\r\n\r\netc\r\n```\r\n\r\nSo I'm pretty sure something has changed in the API, and we're just stuffed now. I'll update you if I find any API call that works for rescuing the orphaned files/fodlers","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2398673130/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"timwsuqld","id":6201617,"node_id":"MDQ6VXNlcjYyMDE2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6201617?v=4","gravatar_id":"","url":"https://api.github.com/users/timwsuqld","html_url":"https://github.com/timwsuqld","followers_url":"https://api.github.com/users/timwsuqld/followers","following_url":"https://api.github.com/users/timwsuqld/following{/other_user}","gists_url":"https://api.github.com/users/timwsuqld/gists{/gist_id}","starred_url":"https://api.github.com/users/timwsuqld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timwsuqld/subscriptions","organizations_url":"https://api.github.com/users/timwsuqld/orgs","repos_url":"https://api.github.com/users/timwsuqld/repos","events_url":"https://api.github.com/users/timwsuqld/events{/privacy}","received_events_url":"https://api.github.com/users/timwsuqld/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14549420280,"node_id":"MEE_lADOAQ-n5M4kKpprzwAAAANjNoj4","url":"https://api.github.com/repos/rclone/rclone/issues/events/14549420280","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-10-08T03:15:16Z","performed_via_github_app":null},{"id":14549420291,"node_id":"SE_lADOAQ-n5M4kKpprzwAAAANjNokD","url":"https://api.github.com/repos/rclone/rclone/issues/events/14549420291","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-10-08T03:15:16Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2418261766","html_url":"https://github.com/rclone/rclone/issues/4166#issuecomment-2418261766","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4166","id":2418261766,"node_id":"IC_kwDOAQ-n5M6QI78G","user":{"login":"timwsuqld","id":6201617,"node_id":"MDQ6VXNlcjYyMDE2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6201617?v=4","gravatar_id":"","url":"https://api.github.com/users/timwsuqld","html_url":"https://github.com/timwsuqld","followers_url":"https://api.github.com/users/timwsuqld/followers","following_url":"https://api.github.com/users/timwsuqld/following{/other_user}","gists_url":"https://api.github.com/users/timwsuqld/gists{/gist_id}","starred_url":"https://api.github.com/users/timwsuqld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timwsuqld/subscriptions","organizations_url":"https://api.github.com/users/timwsuqld/orgs","repos_url":"https://api.github.com/users/timwsuqld/repos","events_url":"https://api.github.com/users/timwsuqld/events{/privacy}","received_events_url":"https://api.github.com/users/timwsuqld/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T00:49:34Z","updated_at":"2024-10-17T00:49:34Z","body":"@ncw I think I've worked it out. I had 2 users with issues, and both folders had the same name \"USB and External Devices\". No API calls worked to modify those folders, although I could use rclone to move everything from inside the folder and that worked. It turns out that is a folder from the Google Drive Backup client (when it's backing up your external disks). I'm guessing there are other folders that appear as orphans, but are part of the computer backup part of Google Drive.\r\n\r\nI had another user with plenty of orphaned files and folders, and the normal `files.update` call worked (the params I am using are:\r\n```python\r\nupdate(\r\n     fileId=file[\"id\"],\r\n     addParents=destination_folder_o[\"id\"],\r\n     supportsAllDrives=True,\r\n     supportsTeamDrives=True,\r\n     fields=\"parents\",\r\n```\r\n\r\nTo be clear, I check in code before executing this that they really do have no parents, if they do have parents (but with another users), then this would fail without the relevant removeParents as well.\r\n\r\nIn theory, this should be less and less of an issue, you can't orphan files anymore, if you attempt to orphan them, it'll put them into your My Drive.\r\n\r\nI will see if I can find any more orphaned files and I'll test your beta version on those to see if it works. (I'm progressively working through 600 users, so I'll find more orphaned files)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2418261766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"timwsuqld","id":6201617,"node_id":"MDQ6VXNlcjYyMDE2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6201617?v=4","gravatar_id":"","url":"https://api.github.com/users/timwsuqld","html_url":"https://github.com/timwsuqld","followers_url":"https://api.github.com/users/timwsuqld/followers","following_url":"https://api.github.com/users/timwsuqld/following{/other_user}","gists_url":"https://api.github.com/users/timwsuqld/gists{/gist_id}","starred_url":"https://api.github.com/users/timwsuqld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timwsuqld/subscriptions","organizations_url":"https://api.github.com/users/timwsuqld/orgs","repos_url":"https://api.github.com/users/timwsuqld/repos","events_url":"https://api.github.com/users/timwsuqld/events{/privacy}","received_events_url":"https://api.github.com/users/timwsuqld/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14691246014,"node_id":"MEE_lADOAQ-n5M4kKpprzwAAAANrqp--","url":"https://api.github.com/repos/rclone/rclone/issues/events/14691246014","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-10-17T00:49:35Z","performed_via_github_app":null}]