{"url":"https://api.github.com/repos/rclone/rclone/issues/8224","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/8224/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/8224/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/8224/events","html_url":"https://github.com/rclone/rclone/issues/8224","id":2715456700,"node_id":"I_kwDOAQ-n5M6h2pS8","number":8224,"title":"[FTP] ls commands returns an empty list on \"Microsoft FTP Service\" servers","user":{"login":"NicolasCordier","id":32298286,"node_id":"MDQ6VXNlcjMyMjk4Mjg2","avatar_url":"https://avatars.githubusercontent.com/u/32298286?v=4","gravatar_id":"","url":"https://api.github.com/users/NicolasCordier","html_url":"https://github.com/NicolasCordier","followers_url":"https://api.github.com/users/NicolasCordier/followers","following_url":"https://api.github.com/users/NicolasCordier/following{/other_user}","gists_url":"https://api.github.com/users/NicolasCordier/gists{/gist_id}","starred_url":"https://api.github.com/users/NicolasCordier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NicolasCordier/subscriptions","organizations_url":"https://api.github.com/users/NicolasCordier/orgs","repos_url":"https://api.github.com/users/NicolasCordier/repos","events_url":"https://api.github.com/users/NicolasCordier/events{/privacy}","received_events_url":"https://api.github.com/users/NicolasCordier/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":608259284,"node_id":"MDU6TGFiZWw2MDgyNTkyODQ=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20FTP","name":"Remote: FTP","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/57","html_url":"https://github.com/rclone/rclone/milestone/57","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/57/labels","id":11258698,"node_id":"MI_kwDOAQ-n5M4Aq8tK","number":57,"title":"v1.69","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":1,"closed_issues":23,"state":"closed","created_at":"2024-07-01T16:37:57Z","updated_at":"2025-05-27T14:40:10Z","due_on":"2025-01-12T08:00:00Z","closed_at":"2025-01-13T10:54:46Z"},"comments":5,"created_at":"2024-12-03T16:19:34Z","updated_at":"2025-01-11T20:03:05Z","closed_at":"2025-01-11T20:02:18Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**What is the problem you are having with Rclone?**\r\nRclone ls doesn't returns anything\r\n\r\n**What is your rclone version (output from `rclone version`)**\r\n(I'm using the docker version)\r\n```\r\nrclone v1.68.2\r\n- os/version: alpine 3.20.3 (64 bit)\r\n- os/kernel: 5.15.167.4-microsoft-standard-WSL2 (x86_64)\r\n- os/type: linux\r\n- os/arch: amd64\r\n- go/version: go1.23.3\r\n- go/linking: static\r\n- go/tags: none\r\n```\r\n\r\n**Which cloud storage system are you using? (e.g. Google Drive)**\r\n`FTP`\r\n\r\n**The command you were trying to run (e.g. `rclone copy /tmp remote:tmp`)**\r\n`rclone.exe ls ftp:`\r\n\r\n**Log with ---dump bodies**\r\n```\r\n2024/12/03 15:57:29 DEBUG : rclone: Version \"v1.68.2\" starting with parameters [\"rclone\" \"lsd\" \"myftp:\" \"-vvv\" \"--dump\" \"bodies\" \"--ftp-concurrency=1\"]\r\n2024/12/03 15:57:29 DEBUG : ftp://ftp.myftp.pt:21: Connecting to FTP server\r\n2024/12/03 15:57:29 DEBUG : ftp://ftp.myftp.pt:21: dial(\"tcp\",\"ftp.myftp.pt:21\")\r\n2024/12/03 15:57:37 DEBUG : ftp://ftp.myftp.pt:21: > dial: conn=*fshttp.timeoutConn, err=<nil>\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \"220 Microsoft FTP Service\"\r\n2024/12/03 15:57:37 DEBUG : FTP Tx: \"USER anonymous\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \"331 Anonymous access allowed, send identity (e-mail name) as password.\"\r\n2024/12/03 15:57:37 DEBUG : FTP Tx: PASS *****\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \"230 User logged in.\"\r\n2024/12/03 15:57:37 DEBUG : FTP Tx: \"FEAT\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \"211-Extended features supported:\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \" LANG EN*\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \" UTF8\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \" AUTH TLS;TLS-C;SSL;TLS-P;\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \" PBSZ\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \" PROT C;P;\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \" CCC\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \" HOST\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \" SIZE\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \" MDTM\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \" REST STREAM\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \"211 END\"\r\n2024/12/03 15:57:37 DEBUG : FTP Tx: \"TYPE I\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \"200 Type set to I.\"\r\n2024/12/03 15:57:37 DEBUG : FTP Tx: \"OPTS UTF8 ON\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \"200 OPTS UTF8 command successful - UTF8 encoding now ON.\"\r\n2024/12/03 15:57:37 DEBUG : fs cache: renaming cache item \"myftp:\" to be canonical \"myftp{zV8cd}:\"\r\n2024/12/03 15:57:37 DEBUG : FTP Tx: \"EPSV\"\r\n2024/12/03 15:57:37 DEBUG : FTP Rx: \"229 Entering Extended Passive Mode (|||53034|)\"\r\n2024/12/03 15:57:37 DEBUG : ftp://ftp.myftp.pt:21: dial(\"tcp\",\"**redacted**:53034\")\r\n2024/12/03 15:57:38 DEBUG : ftp://ftp.myftp.pt:21: > dial: conn=*fshttp.timeoutConn, err=<nil>\r\n2024/12/03 15:57:38 DEBUG : FTP Tx: \"LIST\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"125 Data connection already open; Transfer starting.\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"226 Transfer complete.\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"10-28-2024  12:51PM       <DIR>          folder1\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"12-03-2024  03:57PM       <DIR>          folder2\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"06-21-2021  02:34PM       <DIR>          folder3\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"12-03-2024  03:57PM       <DIR>          folder4\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"12-03-2024  03:57PM       <DIR>          folder5\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"12-12-2022  01:50PM       <DIR>          folder6\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"12-03-2024  03:57PM       <DIR>          folder7\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"12-03-2024  03:57PM       <DIR>          folder8\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"12-03-2024  03:57PM       <DIR>          folder9\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"12-03-2024  03:57PM       <DIR>          folder10\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"12-03-2024  03:57PM       <DIR>          folder11\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"12-03-2024  03:57PM       <DIR>          folder12\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"03-01-2024  12:33PM       <DIR>          folder13\"\r\n2024/12/03 15:57:38 DEBUG : FTP Rx: \"09-12-2024  09:14AM       <DIR>          folder14\"\r\n2024/12/03 15:57:38 DEBUG : 4 go routines active\r\n2024/12/03 15:57:38 DEBUG : ftp://ftp.myftp.pt:21: closing 1 unused connections\r\n2024/12/03 15:57:38 DEBUG : FTP Tx: \"QUIT\"\r\n```\r\n\r\nI'm facing this issue on most \"Microsoft FTP Service\" I'm trying to connect to.\r\nIt looks like the ls format has changed from one version to another (can't tell you which version, these are public FTP servers)\r\n\r\nThe supported date format that works with rclone is:\r\n`11-27-24  09:59AM       <DIR>          folder`\r\nThe one that doesn't is:\r\n`03-01-2024  12:33PM       <DIR>          folder`\r\n\r\nI have created a minimalistic FTP server to confirm my doubt. By sending back both date format. Here are the logs: [https://pastebin.com/SMCEqRs3](https://pastebin.com/SMCEqRs3)\r\n\r\nI believe it comes from this line: [https://github.com/rclone/ftp/blob/dev/parse.go#L25](https://github.com/rclone/ftp/blob/dev/parse.go#L25)\r\n\r\nI wish I could help you more but I don't know how to build the project, never worked in GO and can't say I'm an expert in FTP, so I don't want to break anything.","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/8224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/8224/timeline","performed_via_github_app":null,"state_reason":"completed"}