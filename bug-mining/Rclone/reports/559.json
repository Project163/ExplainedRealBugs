{"url":"https://api.github.com/repos/rclone/rclone/issues/2826","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/2826/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/2826/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/2826/events","html_url":"https://github.com/rclone/rclone/issues/2826","id":389005351,"node_id":"MDU6SXNzdWUzODkwMDUzNTE=","number":2826,"title":"Running `info` on the parent of a crypt remote breaks the crypted remote","user":{"login":"Saviq","id":231077,"node_id":"MDQ6VXNlcjIzMTA3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/231077?v=4","gravatar_id":"","url":"https://api.github.com/users/Saviq","html_url":"https://github.com/Saviq","followers_url":"https://api.github.com/users/Saviq/followers","following_url":"https://api.github.com/users/Saviq/following{/other_user}","gists_url":"https://api.github.com/users/Saviq/gists{/gist_id}","starred_url":"https://api.github.com/users/Saviq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Saviq/subscriptions","organizations_url":"https://api.github.com/users/Saviq/orgs","repos_url":"https://api.github.com/users/Saviq/repos","events_url":"https://api.github.com/users/Saviq/events{/privacy}","received_events_url":"https://api.github.com/users/Saviq/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-12-09T09:58:44Z","updated_at":"2018-12-19T11:53:22Z","closed_at":"2018-12-19T11:51:45Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What is the problem you are having with rclone?\r\nI ran `rclone info` on a `drive` remote. Subsequently I could not use the `crypt` remote over it any more. The `info` command seems to have sent a bunch of files:\r\n\r\n```plain\r\n$ rclone ls --drive-trashed-only Drive:\r\n       50 0x01-\u0001-\r\n       50 0x02-\u0002-\r\n       50 0x03-\u0003-\r\n       50 0x05-\u0005-\r\n       50 0x06-\u0006-\r\n       50 0x07-\u0007-\r\n…\r\n       50 Héroique\r\n       50 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\r\n       32 checkStreamingTest\r\n```\r\n\r\nThis then results in a panic when trying to list that directory through `crypt`:\r\n\r\n```plain\r\n$ rclone ls --drive-trashed-only CryptedDrive:\r\n2018/12/09 10:55:39 EME operates on 1 to 128 block-cipher blocks, you passed 300\r\npanic: EME operates on 1 to 128 block-cipher blocks, you passed 300\r\n\r\ngoroutine 21 [running]:\r\nlog.Panicf(0x111eda7, 0x3a, 0xc0004ffa60, 0x2, 0x2)\r\n        /home/travis/.gimme/versions/go1.11.linux.amd64/src/log/log.go:333 +0xda\r\ngithub.com/ncw/rclone/vendor/github.com/rfjakob/eme.Transform(0x1265ea0, 0xc000082630, 0xc00033acc0, 0x10, 0x10, 0xc001400000, 0x12c0, 0x12c0, 0xc000482000, 0x1e00, ...)\r\n        /home/travis/gopath/src/github.com/ncw/rclone/vendor/github.com/rfjakob/eme/eme.go:128 +0x125\r\ngithub.com/ncw/rclone/backend/crypt.(*cipher).decryptSegment(0xc00033ac80, 0xc000482000, 0x1e00, 0x1, 0xc00022dff0, 0x1, 0x1)\r\n        /home/travis/gopath/src/github.com/ncw/rclone/backend/crypt/cipher.go:289 +0xdd\r\ngithub.com/ncw/rclone/backend/crypt.(*cipher).decryptFileName(0xc00033ac80, 0xc000482000, 0x1e00, 0x409a18, 0x10, 0xeeac00, 0xc00000b401)\r\n        /home/travis/gopath/src/github.com/ncw/rclone/backend/crypt/cipher.go:520 +0xd0\r\ngithub.com/ncw/rclone/backend/crypt.(*cipher).DecryptFileName(0xc00033ac80, 0xc000482000, 0x1e00, 0x24, 0xc0004ffc80, 0x1, 0x408bfb)\r\n        /home/travis/gopath/src/github.com/ncw/rclone/backend/crypt/cipher.go:541 +0xf9\r\ngithub.com/ncw/rclone/backend/crypt.(*Fs).add(0xc0000a8500, 0xc0004ffd38, 0x1272920, 0xc000298500)\r\n        /home/travis/gopath/src/github.com/ncw/rclone/backend/crypt/crypt.go:223 +0x7d\r\ngithub.com/ncw/rclone/backend/crypt.(*Fs).encryptEntries(0xc0000a8500, 0xc000348000, 0x8c, 0x100, 0xc000348000, 0x0, 0x100, 0x0, 0x0)\r\n        /home/travis/gopath/src/github.com/ncw/rclone/backend/crypt/crypt.go:254 +0x102\r\ngithub.com/ncw/rclone/backend/crypt.(*Fs).List(0xc0000a8500, 0x0, 0x0, 0x0, 0x0, 0xc000055f20, 0xc00002e100, 0x0)\r\n        /home/travis/gopath/src/github.com/ncw/rclone/backend/crypt/crypt.go:278 +0xe2\r\ngithub.com/ncw/rclone/fs/list.DirSorted(0x12727a0, 0xc0000a8500, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /home/travis/gopath/src/github.com/ncw/rclone/fs/list/list.go:23 +0x63\r\ngithub.com/ncw/rclone/fs/walk.walk.func2(0xc000039270, 0xc000078900, 0x1144dd8, 0x12727a0, 0xc0000a8500, 0xc0013a3a00, 0xc0000392a0, 0xc00028e0d0, 0xc000039280, 0xc00015b830, ...)\r\n        /home/travis/gopath/src/github.com/ncw/rclone/fs/walk/walk.go:122 +0x1b7\r\ncreated by github.com/ncw/rclone/fs/walk.walk\r\n        /home/travis/gopath/src/github.com/ncw/rclone/fs/walk/walk.go:114 +0x252\r\n```\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\nrclone v1.43.1\r\n- os/arch: linux/amd64\r\n- go version: go1.11\r\n\r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\nGoogle Drive\r\n\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\n`rclone lsd crypted-remote:`","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/2826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/2826/timeline","performed_via_github_app":null,"state_reason":"completed"}