{"url":"https://api.github.com/repos/rclone/rclone/issues/2060","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/2060/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/2060/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/2060/events","html_url":"https://github.com/rclone/rclone/issues/2060","id":296073597,"node_id":"MDU6SXNzdWUyOTYwNzM1OTc=","number":2060,"title":"running multiple copies of rclone may cause it to fail to update token in config (and abort)","user":{"login":"ljr9600","id":13732417,"node_id":"MDQ6VXNlcjEzNzMyNDE3","avatar_url":"https://avatars.githubusercontent.com/u/13732417?v=4","gravatar_id":"","url":"https://api.github.com/users/ljr9600","html_url":"https://github.com/ljr9600","followers_url":"https://api.github.com/users/ljr9600/followers","following_url":"https://api.github.com/users/ljr9600/following{/other_user}","gists_url":"https://api.github.com/users/ljr9600/gists{/gist_id}","starred_url":"https://api.github.com/users/ljr9600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ljr9600/subscriptions","organizations_url":"https://api.github.com/users/ljr9600/orgs","repos_url":"https://api.github.com/users/ljr9600/repos","events_url":"https://api.github.com/users/ljr9600/events{/privacy}","received_events_url":"https://api.github.com/users/ljr9600/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":591433922,"node_id":"MDU6TGFiZWw1OTE0MzM5MjI=","url":"https://api.github.com/repos/rclone/rclone/labels/good%20first%20issue","name":"good first issue","color":"5319e7","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/27","html_url":"https://github.com/rclone/rclone/milestone/27","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/27/labels","id":2804379,"node_id":"MDk6TWlsZXN0b25lMjgwNDM3OQ==","number":27,"title":"v1.40","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":53,"state":"closed","created_at":"2017-09-30T13:34:06Z","updated_at":"2018-03-19T14:34:06Z","due_on":"2018-03-17T07:00:00Z","closed_at":"2018-03-19T14:34:06Z"},"comments":4,"created_at":"2018-02-10T04:47:47Z","updated_at":"2018-02-19T18:00:25Z","closed_at":"2018-02-19T17:59:30Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When running multiple instances of rclone to upload to google drive on Windows, I have seen the error (a few times):\r\n\r\ndrive_r_copy.txt:2018/02/07 05:38:56 Failed to move previous config to backup location: rename C:\\Users\\xyz\\.config\\rclone\\rclone.conf C:\\Users\\xyz\\.config\\rclone\\rclone.conf.old: Access is denied.\r\n\r\nIt looks like 2 or more instances of rclone is trying to update the config file when a new token is recieved, and gets access denied (because one of them has locked the file to write or rename it).  This causes the process getting access denied to fail, and abort the whole rclone copy.\r\n\r\nI think there should be a retry attempt here or the last one in gets to make the change. It should be ok since both instances of rclone will have the new token in memory, just one will fail to update it.\r\n\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/2060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/2060/timeline","performed_via_github_app":null,"state_reason":"completed"}