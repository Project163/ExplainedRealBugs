{"url":"https://api.github.com/repos/rclone/rclone/issues/203","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/203/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/203/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/203/events","html_url":"https://github.com/rclone/rclone/issues/203","id":115739600,"node_id":"MDU6SXNzdWUxMTU3Mzk2MDA=","number":203,"title":"Comparison by md5 and large objects","user":{"login":"xgiovio","id":3085150,"node_id":"MDQ6VXNlcjMwODUxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/3085150?v=4","gravatar_id":"","url":"https://api.github.com/users/xgiovio","html_url":"https://github.com/xgiovio","followers_url":"https://api.github.com/users/xgiovio/followers","following_url":"https://api.github.com/users/xgiovio/following{/other_user}","gists_url":"https://api.github.com/users/xgiovio/gists{/gist_id}","starred_url":"https://api.github.com/users/xgiovio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xgiovio/subscriptions","organizations_url":"https://api.github.com/users/xgiovio/orgs","repos_url":"https://api.github.com/users/xgiovio/repos","events_url":"https://api.github.com/users/xgiovio/events{/privacy}","received_events_url":"https://api.github.com/users/xgiovio/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":86399009,"node_id":"MDU6TGFiZWw4NjM5OTAwOQ==","url":"https://api.github.com/repos/rclone/rclone/labels/question","name":"question","color":"a07898","default":true,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/8","html_url":"https://github.com/rclone/rclone/milestone/8","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/8/labels","id":1399375,"node_id":"MDk6TWlsZXN0b25lMTM5OTM3NQ==","number":8,"title":"v1.25","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":8,"state":"closed","created_at":"2015-11-07T16:46:17Z","updated_at":"2015-11-17T13:27:03Z","due_on":null,"closed_at":"2015-11-17T13:27:03Z"},"comments":11,"created_at":"2015-11-08T15:27:39Z","updated_at":"2015-11-14T13:22:40Z","closed_at":"2015-11-11T17:01:06Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello, i haven't tried yet but i was wondering how rclone manage comparison by md5 on large objects.\nUsually files on openstack are >0 bytes if they are full files, 0 bytes if they are manifests of a file divided in segments, a folder or a simply 0 byte file.\n\nNow for files > 0 and 0 byte files we have an etag metadata that stores md5 values. So using rclone it would be possible to compare file using md5.\nFor folders rclone should simply skip these files checking metadata content-type application/folder\nbut\nfor large objects?\nOpenstack stores in the manifest an etag as the md5 of contatenation of all md5(etag) segments.\nIt's impossible then to have a comparison for that file without download it first.\n\nIn addition rclone comparison supports only -c for size and checksum, no options for mtimes and size, size-only for size only.\nBut if i want to sync/copy a folder that contains both large and normal files i should have an intermediate option : size-only for large files (comparing the content-length metadata), size + checksum for normal files.\n\nThe software should list all files, divide the list into files >0 and 0.\nFor >0 do the normal size + cheksum comparison (checking size and etag)\nFor 0 files check the metadatas: if the metadatas contain the manifest it should compare only the content-length, if it's a folder skip it, if a simple 0 file do the file size + checksum comparison.\n\nWhat do you think?\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/203/timeline","performed_via_github_app":null,"state_reason":"completed"}