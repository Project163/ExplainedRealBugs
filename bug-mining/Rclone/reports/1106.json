{"url":"https://api.github.com/repos/rclone/rclone/issues/6552","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/6552/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/6552/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/6552/events","html_url":"https://github.com/rclone/rclone/issues/6552","id":1440176497,"node_id":"I_kwDOAQ-n5M5V11lx","number":6552,"title":"Fish shell misdetection","user":{"login":"blenderfreaky","id":14351657,"node_id":"MDQ6VXNlcjE0MzUxNjU3","avatar_url":"https://avatars.githubusercontent.com/u/14351657?v=4","gravatar_id":"","url":"https://api.github.com/users/blenderfreaky","html_url":"https://github.com/blenderfreaky","followers_url":"https://api.github.com/users/blenderfreaky/followers","following_url":"https://api.github.com/users/blenderfreaky/following{/other_user}","gists_url":"https://api.github.com/users/blenderfreaky/gists{/gist_id}","starred_url":"https://api.github.com/users/blenderfreaky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blenderfreaky/subscriptions","organizations_url":"https://api.github.com/users/blenderfreaky/orgs","repos_url":"https://api.github.com/users/blenderfreaky/repos","events_url":"https://api.github.com/users/blenderfreaky/events{/privacy}","received_events_url":"https://api.github.com/users/blenderfreaky/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":608259405,"node_id":"MDU6TGFiZWw2MDgyNTk0MDU=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20SFTP","name":"Remote: SFTP","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":7,"created_at":"2022-11-08T13:12:18Z","updated_at":"2022-11-11T15:32:45Z","closed_at":"2022-11-11T15:32:45Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"EDIT: This issue seems to come from misdetecting the fish-shell as cmd.\r\n\r\nOriginal issue:\r\n## SFTP remote not working properly with files that have a dollar sign in their filename\r\n\r\nWhen copying a file with a dollar sign in its name to (or from) an SFTP remote, no file gets copied and the md5sum check fails with an empty md5sum. I assume this is because it tries to expand the dollar as a shell variable (the md5sum command in the log replaces \"foo $bar\" with \"foo \").\r\n\r\nI am using up-to-date Arch Linux both locally and the remote. This occurs with current rclone `v1.60.0` as well as on `v1.61.0-DEV`.\r\nOriginally I assumed this might be due to running fish shell on the server, but it happens with bash as well.\r\n\r\nA simple repro:\r\n```\r\ncd ~/rclone-repro\r\necho \"test\" >> \"abc \\$def ghj\"\r\nrclone copy abc\\ \\$def\\ ghj thekka:rclone-repro -vv --log-file bug.log\r\n```\r\nOutputs: [bug.log](https://github.com/rclone/rclone/files/9961323/bug.log)\r\n\r\nNote that copying via the sftp command directly works without issue in both directions (uploading and downloading), so it's not an issue of the target file system not liking the name.\r\nDownloading the file with rclone after copying via regular sftp results in basically the same error.","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/6552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/6552/timeline","performed_via_github_app":null,"state_reason":"completed"}