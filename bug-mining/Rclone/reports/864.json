{"url":"https://api.github.com/repos/rclone/rclone/issues/4021","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/4021/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/4021/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/4021/events","html_url":"https://github.com/rclone/rclone/issues/4021","id":573586861,"node_id":"MDU6SXNzdWU1NzM1ODY4NjE=","number":4021,"title":"using OneDrive with chunker and crypt results in stalled transfers","user":{"login":"kultigspritzig","id":25629364,"node_id":"MDQ6VXNlcjI1NjI5MzY0","avatar_url":"https://avatars.githubusercontent.com/u/25629364?v=4","gravatar_id":"","url":"https://api.github.com/users/kultigspritzig","html_url":"https://github.com/kultigspritzig","followers_url":"https://api.github.com/users/kultigspritzig/followers","following_url":"https://api.github.com/users/kultigspritzig/following{/other_user}","gists_url":"https://api.github.com/users/kultigspritzig/gists{/gist_id}","starred_url":"https://api.github.com/users/kultigspritzig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kultigspritzig/subscriptions","organizations_url":"https://api.github.com/users/kultigspritzig/orgs","repos_url":"https://api.github.com/users/kultigspritzig/repos","events_url":"https://api.github.com/users/kultigspritzig/events{/privacy}","received_events_url":"https://api.github.com/users/kultigspritzig/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1667241641,"node_id":"MDU6TGFiZWwxNjY3MjQxNjQx","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Chunker","name":"Remote: Chunker","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":14,"created_at":"2020-03-01T17:51:04Z","updated_at":"2020-10-26T17:18:10Z","closed_at":"2020-10-26T17:18:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What is the problem you are having with rclone?\r\n\r\nAfter enabling chunker I am seeing 0/s or very low transfer â€“ although the latter happened only once.\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\nTried with `1.51 release` and `v1.51.0-076-g38a4d50e-beta`\r\n\r\n#### Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\nUbuntu 64bit\r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\nOneDrive Business\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\n`/usr/bin/rclone move /mnt/local/Media backup1_chunker:/Media --config=/home/seed/.config/rclone/rclone.conf --user-agent=\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.131 Safari/537.36\" --checkers=16 --onedrive-chunk-size=120M --stats=60s --transfers=4 -vv --skip-links --retries=1 --low-level-retries=2 --exclude=**partial~ --exclude=**_HIDDEN~ --exclude=.unionfs/** --exclude=.unionfs-fuse/** --exclude=.fuse_hidden**`\r\n\r\n#### A log from the command with the `-vv` flag (eg output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\n```\r\ntest@box:~$ /usr/bin/rclone move /mnt/local/Media backup1_chunker:/Media --config=/home/seed/.config/rclone/rclone.conf --user-agent=\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.131 Safari/537.36\" --checkers=16 --onedrive-chunk-size=120M --stats=60s --transfers=4 -vv --skip-links --retries=1 --low-level-retries=2 --exclude=**partial~ --exclude=**_HIDDEN~ --exclude=.unionfs/** --exclude=.unionfs-fuse/** --exclude=.fuse_hidden**\r\n2020/03/01 12:41:25 DEBUG : rclone: Version \"v1.51.0-076-g38a4d50e-beta\" starting with parameters [\"/usr/bin/rclone\" \"move\" \"/mnt/local/Media\" \"backup1_chunker:/Media\" \"--config=/home/seed/.config/rclone/rclone.conf\" \"--user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.131 Safari/537.36\" \"--checkers=16\" \"--onedrive-chunk-size=120M\" \"--stats=60s\" \"--transfers=4\" \"-vv\" \"--skip-links\" \"--retries=1\" \"--low-level-retries=2\" \"--exclude=**partial~\" \"--exclude=**_HIDDEN~\" \"--exclude=.unionfs/**\" \"--exclude=.unionfs-fuse/**\" \"--exclude=.fuse_hidden**\"]\r\n2020/03/01 12:41:25 DEBUG : Using config file from \"/home/seed/.config/rclone/rclone.conf\"\r\n2020/03/01 12:41:29 DEBUG : Chunked 'backup1_chunker:/Media': Waiting for checks to finish\r\n2020/03/01 12:41:29 DEBUG : Chunked 'backup1_chunker:/Media': Waiting for transfers to finish\r\n2020/03/01 12:42:26 INFO  :\r\nTransferred:   \t         0 / 3.386 TBytes, 0%, 0 Bytes/s, ETA -\r\nChecks:                 0 / 4, 0%\r\nTransferred:            0 / 169, 0%\r\nElapsed time:        58.8s\r\nChecking:\r\n\r\nTransferring:\r\n * media1.iso:  0% /30.707G, 0/s, -\r\n * media2.iso:  0% /18.186G, 0/s, -\r\n * media3.iso:  0% /30.970G, 0/s, -\r\n * media4.iso:  0% /25.537G, 0/s, -\r\n```\r\n\r\nHowever, uploading to the underlying `backup1_enc:` remote directly with `/usr/bin/rclone move /mnt/local/Media backup1_enc:/Media (...)` results in correct behavior, although some media files uploaded are different:\r\n\r\n```\r\nTransferred:   \t    1.874G / 3.386 TBytes, 0%, 32.624 MBytes/s, ETA 1d6h12m54s\r\nChecks:                 0 / 4, 0%\r\nTransferred:            0 / 169, 0%\r\nElapsed time:        58.8s\r\nChecking:\r\n\r\nTransferring:\r\n * media1.iso:  2% /18.186G, 8.326M/s, 36m20s\r\n * media2.iso:  1% /28.295G, 8.360M/s, 56m46s\r\n * media4.iso:  1% /29.382G, 8.487M/s, 58m9s\r\n * media5.iso:  1% /25.537G, 8.518M/s, 50m13s\r\n```\r\n\r\nRemotes are configured as following:\r\n```\r\n[backup1_enc]\r\ntype = crypt\r\nremote = backup1:\r\nfilename_encryption = standard\r\ndirectory_name_encryption = true\r\npassword = xxxx\r\n\r\n[backup1_chunker]\r\ntype = chunker\r\nremote = backup1_enc:\r\nchunk_size = 600M\r\nhash_type = md5\r\n```\r\n\r\n`rclone ls backup1_enc:` and `rclone ls backup1_chunker:` both correctly display the folder structure with files in it. ","closed_by":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/4021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/4021/timeline","performed_via_github_app":null,"state_reason":"completed"}