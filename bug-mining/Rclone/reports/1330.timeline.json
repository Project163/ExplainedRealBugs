[{"actor":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-06T19:33:52Z","updated_at":"2024-12-06T19:33:52Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/6920","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/6920/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/6920/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/6920/events","html_url":"https://github.com/rclone/rclone/issues/6920","id":1655742105,"node_id":"I_kwDOAQ-n5M5isJ6Z","number":6920,"title":"Google Photos: max concurrent write request 429 RESOURCE_EXHAUSTED","user":{"login":"sahilnarain","id":3143331,"node_id":"MDQ6VXNlcjMxNDMzMzE=","avatar_url":"https://avatars.githubusercontent.com/u/3143331?v=4","gravatar_id":"","url":"https://api.github.com/users/sahilnarain","html_url":"https://github.com/sahilnarain","followers_url":"https://api.github.com/users/sahilnarain/followers","following_url":"https://api.github.com/users/sahilnarain/following{/other_user}","gists_url":"https://api.github.com/users/sahilnarain/gists{/gist_id}","starred_url":"https://api.github.com/users/sahilnarain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sahilnarain/subscriptions","organizations_url":"https://api.github.com/users/sahilnarain/orgs","repos_url":"https://api.github.com/users/sahilnarain/repos","events_url":"https://api.github.com/users/sahilnarain/events{/privacy}","received_events_url":"https://api.github.com/users/sahilnarain/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2023-04-05T14:30:13Z","updated_at":"2024-12-06T19:33:53Z","closed_at":"2023-10-03T17:06:30Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"#### Output of `rclone version`\r\nrclone v1.61.1\r\n- os/version: oracle 9.1 (64 bit)\r\n- os/kernel: 5.15.0-7.86.6.1.el9uek.aarch64 (aarch64)\r\n- os/type: linux\r\n- os/arch: arm64\r\n- go/version: go1.19.4\r\n- go/linking: static\r\n- go/tags: none\r\n\r\n\r\n#### Describe the issue\r\n   Google Photos backend hits the write quota, even though very small amounts of files are being written.\r\n\r\n   Google Photos backend hits write quota, both with the default and my own Google Photo Library client IDs. I have tried reducing the `tpslimit` to an unreasonably low amount (~=0.05 which means, 1 transaction every 20 seconds) but that gets rate limited very soon. I am only able to upload a small amount of photos before being rate limited.\r\n\r\n    rclone move $file gphotos:album/$album/ --transfers 1 --checkers 1 --no-check-dest --low-level-retries 1 --retries 2 --tpslimit 0.05 -vvP\r\n\r\nSample output:\r\n```\r\n...\r\n2023-04-05 13:47:24 DEBUG : pacer: low level retry 1/1 (error Quota exceeded for quota 'concurrent write request' of service 'photoslibrary.googleapis.com'. (429 RESOURCE_EXHAUSTED))\r\n2023-04-05 13:47:24 DEBUG : pacer: Rate limited, increasing sleep to 1.258731557s\r\n2023-04-05 13:47:24 DEBUG : test.jpeg : >Update: err=failed to create media item: Quota exceeded for quota 'concurrent write request' of service 'photoslibrary.googleapis.com'. (429 RESOURCE_EXHAUSTED)\r\n2023-04-05 13:47:24 DEBUG : Google Photos path \"album/test-album\": >Put:\r\n2023-04-05 13:47:24 ERROR : test.jpeg : Failed to copy: failed to create media item: Quota exceeded for quota 'concurrent write request' of service 'photoslibrary.googleapis.com'. (429 RESOURCE_EXHAUSTED)\r\n2023-04-05 13:47:24 ERROR : test.jpeg : Not deleting source as copy failed: failed to create media item: Quota exceeded for quota 'concurrent write request' of service 'photoslibrary.googleapis.com'. (429 RESOURCE_EXHAUSTED)\r\n...\r\n```\r\n\r\nThis _could_ possibly mean that the write handle is not being closed properly, causing this to max out soon, after which I wait for a couple of hours before the rate limit gets lifted.\r\n\r\nWhat's interesting is that no quotas are being hit on the API that I can see in my cloud console while using my own client ID. However, the 429 errors are for ```BatchCreateMediaItems``` method only.\r\n\r\nPlease reach out If I can provide any additional information, and if someone can guide me in the right direction, I can try taking a shot at fixing this too.\r\n\r\nThanks in advance!\r\n\r\n","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/6920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/6920/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2536926687","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2536926687","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2536926687,"node_id":"IC_kwDOAQ-n5M6XNm3f","user":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-11T19:25:26Z","updated_at":"2024-12-11T19:25:26Z","body":"FWIW, this is happening on latest beta too:\r\n\r\n```\r\n2024/12/11 11:22:13 INFO  : Starting transaction limiter: max 1 transactions/s with burst 1\r\n2024/12/11 11:22:13 DEBUG : rclone: Version \"v1.69.0-beta.8430.6a983d601\" starting with parameters [\"rclone\" \"copy\" \"-Pvv\" \"--transfers\" \"16\" \"--tpslimit\" \"1\" \"--drive-chunk-size\" \"128M\" \"--exclude\" \"*.{xml,bin,json,thm,DS_Store}*\" \"--ignore-case\" \"--log-file=rclone-photos-20241211_112213.log\" \"z00:Shelly_Z00/Shelly_NYU/Shelly Photos from NYU\" \"gpzs2:album/rclone\" \"--gphotos-read-size\" \"--gphotos-batch-mode\" \"async\"]\r\n...\r\n2024/12/11 11:24:08 DEBUG : Google Photos path \"album/rclone\": Adding \"to file/iPhoto export/IMG_1956.heic\" to batch\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xc1b9a8]\r\n\r\ngoroutine 106 [running]:\r\ngithub.com/rclone/rclone/backend/googlephotos.(*Object).setMetaData(...)\r\n        github.com/rclone/rclone/backend/googlephotos/googlephotos.go:900\r\ngithub.com/rclone/rclone/backend/googlephotos.(*Object).Update(0x4000638230, {0x2504cb0, 0x4000532370}, {0x24dd940, 0x4000633000}, {0x0?, 0x1c07040?}, {0x40015c62d0, 0x1, 0x1})\r\n        github.com/rclone/rclone/backend/googlephotos/googlephotos.go:1180 +0x618\r\ngithub.com/rclone/rclone/fs/operations.(*copy).updateOrPut(0x4000c40360, {0x2504cb0, 0x4000532370}, {0x24f0ba0?, 0x4000b9e380?}, {0x40015c62d0, 0x1, 0x1})\r\n        github.com/rclone/rclone/fs/operations/copy.go:211 +0x144\r\ngithub.com/rclone/rclone/fs/operations.(*copy).manualCopy(0x4000c40360, {0x2504cb0, 0x4000532370})\r\n        github.com/rclone/rclone/fs/operations/copy.go:270 +0x54c\r\ngithub.com/rclone/rclone/fs/operations.(*copy).copy(0x4000c40360, {0x2504cb0, 0x4000532370})\r\n        github.com/rclone/rclone/fs/operations/copy.go:310 +0x108\r\ngithub.com/rclone/rclone/fs/operations.Copy({0x2504cb0, 0x4000532370}, {0x251b910, 0x4000b122a0}, {0x251b980, 0x4000638230}, {0x40010e820d, 0x23}, {0x251af70, 0x4000c24df8})\r\n        github.com/rclone/rclone/fs/operations/copy.go:412 +0x394\r\ngithub.com/rclone/rclone/fs/sync.(*syncCopyMove).pairCopyOrMove(0x40002e8f08, {0x2504cb0, 0x4000532370}, 0x40005322d0, {0x251b910, 0x4000b122a0}, 0x3e, 0x0?)\r\n        github.com/rclone/rclone/fs/sync/sync.go:501 +0x160\r\ncreated by github.com/rclone/rclone/fs/sync.(*syncCopyMove).startTransfers in goroutine 1\r\n        github.com/rclone/rclone/fs/sync/sync.go:531 +0x6c\r\n```\r\n\r\n \r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2536926687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2537057275","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2537057275","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2537057275,"node_id":"IC_kwDOAQ-n5M6XOGv7","user":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-11T20:26:00Z","updated_at":"2024-12-11T20:26:00Z","body":"Also FWIW, using `--gphotos-batch-mode off` also causes panic:\r\n\r\n```\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xc031f0]\r\n\r\ngoroutine 75 [running]:\r\ngithub.com/rclone/rclone/backend/googlephotos.(*Object).setMetaData(...)\r\n\tgithub.com/rclone/rclone/backend/googlephotos/googlephotos.go:872\r\ngithub.com/rclone/rclone/backend/googlephotos.(*Object).Update(0x400038f880, {0x240e410, 0x4000c8c690}, {0x23e74a0, 0x4000609100}, {0xf5d5a1c76fa8, 0x40009d0510}, {0x40009bd3e0, 0x1, 0x1})\r\n\tgithub.com/rclone/rclone/backend/googlephotos/googlephotos.go:1148 +0x6d0\r\ngithub.com/rclone/rclone/backend/googlephotos.(*Fs).Put(0x4000a20d00, {0x240e410, 0x4000c8c690}, {0x23e74a0, 0x4000609100}, {0xf5d5a1c76fa8, 0x40009d0510}, {0x40009bd3e0, 0x1, 0x1})\r\n\tgithub.com/rclone/rclone/backend/googlephotos/googlephotos.go:693 +0x148\r\ngithub.com/rclone/rclone/fs/operations.(*copy).updateOrPut(0x40007dd170, {0x240e410, 0x4000c8c690}, {0x23fa780?, 0x4000baa0e0?}, {0x40009bd3e0, 0x1, 0x1})\r\n\tgithub.com/rclone/rclone/fs/operations/copy.go:217 +0x1a4\r\ngithub.com/rclone/rclone/fs/operations.(*copy).manualCopy(0x40007dd170, {0x240e410, 0x4000c8c690})\r\n\tgithub.com/rclone/rclone/fs/operations/copy.go:270 +0x54c\r\ngithub.com/rclone/rclone/fs/operations.(*copy).copy(0x40007dd170, {0x240e410, 0x4000c8c690})\r\n\tgithub.com/rclone/rclone/fs/operations/copy.go:310 +0x108\r\ngithub.com/rclone/rclone/fs/operations.Copy({0x240e410, 0x4000c8c690}, {0x2424ab0, 0x4000a20d00}, {0x0, 0x0}, {0x4000b616fd, 0x16}, {0x2424110, 0x40009d0510})\r\n\tgithub.com/rclone/rclone/fs/operations/copy.go:412 +0x394\r\ngithub.com/rclone/rclone/fs/sync.(*syncCopyMove).pairCopyOrMove(0x4000553b88, {0x240e410, 0x4000c8c690}, 0x4000c8c5f0, {0x2424ab0, 0x4000a20d00}, 0xc, 0x0?)\r\n\tgithub.com/rclone/rclone/fs/sync/sync.go:501 +0x160\r\ncreated by github.com/rclone/rclone/fs/sync.(*syncCopyMove).startTransfers in goroutine 1\r\n\tgithub.com/rclone/rclone/fs/sync/sync.go:531 +0x6c\r\n\r\n```\r\n\r\n ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2537057275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15650085912,"node_id":"REFE_lADOAQ-n5M6iMli-zwAAAAOk0VwY","url":"https://api.github.com/repos/rclone/rclone/issues/events/15650085912","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"51d162e5836011448f60bc9bb6a4b98c68e7fe12","commit_url":"https://api.github.com/repos/rclone/rclone/commits/51d162e5836011448f60bc9bb6a4b98c68e7fe12","created_at":"2024-12-13T15:13:26Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2541672389","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2541672389","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2541672389,"node_id":"IC_kwDOAQ-n5M6XftfF","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-13T15:13:50Z","updated_at":"2024-12-13T15:13:50Z","body":"There seems to be a pretty obvious cause for this!\r\n\r\nCan you give this a try please?\r\n\r\n[v1.69.0-beta.8454.51d162e58.fix-8233-gphotos-crash](https://beta.rclone.org/branch/fix-8233-gphotos-crash/v1.69.0-beta.8454.51d162e58.fix-8233-gphotos-crash/) on branch [fix-8233-gphotos-crash](https://github.com/rclone/rclone/tree/fix-8233-gphotos-crash) (uploaded in 15-30 mins)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2541672389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15650093541,"node_id":"LE_lADOAQ-n5M6iMli-zwAAAAOk0Xnl","url":"https://api.github.com/repos/rclone/rclone/issues/events/15650093541","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-12-13T15:14:06Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":15650093548,"node_id":"LE_lADOAQ-n5M6iMli-zwAAAAOk0Xns","url":"https://api.github.com/repos/rclone/rclone/issues/events/15650093548","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-12-13T15:14:06Z","label":{"name":"Remote: Google Photos","color":"fbca04"},"performed_via_github_app":null},{"id":15650094183,"node_id":"MIE_lADOAQ-n5M6iMli-zwAAAAOk0Xxn","url":"https://api.github.com/repos/rclone/rclone/issues/events/15650094183","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2024-12-13T15:14:09Z","milestone":{"title":"v1.69"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2542069686","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2542069686","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2542069686,"node_id":"IC_kwDOAQ-n5M6XhOe2","user":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-13T19:00:45Z","updated_at":"2024-12-13T19:00:45Z","body":"Thanks, I will try!\r\n\r\nDo you think this might help with https://forum.rclone.org/t/google-photos-upload-issue-2/49003 ?\r\n\r\nI'm kind of at an impasse... should I post that issue here?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2542069686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2542105389","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2542105389","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2542105389,"node_id":"IC_kwDOAQ-n5M6XhXMt","user":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-13T19:25:41Z","updated_at":"2024-12-13T19:25:41Z","body":"```\r\n$ ./rclone-test version\r\nrclone v1.69.0-beta.8454.51d162e58.fix-8233-gphotos-crash\r\n- os/version: ubuntu 24.04 (64 bit)\r\n- os/kernel: 6.8.0-1015-oracle (aarch64)\r\n- os/type: linux\r\n- os/arch: arm (ARMv7 compatible)\r\n- go/version: go1.23.4\r\n- go/linking: static\r\n- go/tags: none\r\n```\r\n\r\n ```\r\n2024/12/13 11:23:05 DEBUG : Google Photos path \"album/rclone\": Adding \"to file/MEDIA/C0360.MP4\" to batch\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x14 pc=0xd4d754]\r\n\r\ngoroutine 91 [running]:\r\ngithub.com/rclone/rclone/backend/googlephotos.(*Object).setMetaData(...)\r\ngithub.com/rclone/rclone/backend/googlephotos/googlephotos.go:900\r\ngithub.com/rclone/rclone/backend/googlephotos.(*Object).Update(0x3f2f700, {0x24dc338, 0x43d4150}, {0x24c8850, 0x40266e8}, {0xedc2d270, 0x441ab40}, {0x41568c8, 0x1, 0x1})\r\ngithub.com/rclone/rclone/backend/googlephotos/googlephotos.go:1180 +0x748\r\ngithub.com/rclone/rclone/backend/googlephotos.(*Fs).Put(0x41d6128, {0x24dc338, 0x43d4150}, {0x24c8850, 0x40266e8}, {0xedc2d270, 0x441ab40}, {0x41568c8, 0x1, 0x1})\r\ngithub.com/rclone/rclone/backend/googlephotos/googlephotos.go:721 +0xd8\r\ngithub.com/rclone/rclone/fs/operations.(*copy).updateOrPut(0x43a8640, {0x24dc338, 0x43d4150}, {0x24d20e8, 0x40241e8}, {0x41568c8, 0x1, 0x1})\r\ngithub.com/rclone/rclone/fs/operations/copy.go:217 +0x2e4\r\ngithub.com/rclone/rclone/fs/operations.(*copy).manualCopy(0x43a8640, {0x24dc338, 0x43d4150})\r\ngithub.com/rclone/rclone/fs/operations/copy.go:270 +0x65c\r\ngithub.com/rclone/rclone/fs/operations.(*copy).copy(0x43a8640, {0x24dc338, 0x43d4150})\r\ngithub.com/rclone/rclone/fs/operations/copy.go:310 +0x15c\r\ngithub.com/rclone/rclone/fs/operations.Copy({0x24dc338, 0x43d4150}, {0x24e60a4, 0x41d6128}, {0x0, 0x0}, {0x437c8ed, 0x17}, {0x24e5bd4, 0x441ab40})\r\ngithub.com/rclone/rclone/fs/operations/copy.go:412 +0x3ec\r\ngithub.com/rclone/rclone/fs/sync.(*syncCopyMove).pairCopyOrMove(0x3cda688, {0x24dc338, 0x43d4150}, 0x43d40f0, {0x24e60a4, 0x41d6128}, 0x2e, 0x3cda730)\r\ngithub.com/rclone/rclone/fs/sync/sync.go:501 +0x1e4\r\ncreated by github.com/rclone/rclone/fs/sync.(*syncCopyMove).startTransfers in goroutine 1\r\ngithub.com/rclone/rclone/fs/sync/sync.go:531 +0x6c\r\n```\r\n\r\n ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2542105389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2542387038","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2542387038","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2542387038,"node_id":"IC_kwDOAQ-n5M6Xib9e","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-13T21:09:45Z","updated_at":"2024-12-13T21:09:45Z","body":"I need a way to replicate this I think.\r\n\r\nCan you provide the full command line for your rclone and the output of `rclone config redacted` plus some idea of how to replicate - thank you :-)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2542387038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2542434495","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2542434495","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2542434495,"node_id":"IC_kwDOAQ-n5M6Xini_","user":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-13T21:47:38Z","updated_at":"2024-12-13T21:47:38Z","body":"```\r\n$ rclone config redacted\r\n[Shelly]\r\ntype = drive\r\nscope = drive\r\nservice_account_file = /home/ubuntu/immich-oracle@rc2024-428206.iam.gserviceaccount.com.json\r\nteam_drive = XXX\r\n\r\n[gd0]\r\ntype = drive\r\nskip_shortcuts = true\r\nscope = drive\r\ntoken = XXX\r\nteam_drive =\r\n\r\n[z00]\r\ntype = combine\r\nupstreams = \"Shelly=Shelly:\" \"MyDrive=gd0:\"\r\n\r\n[gpzs2]\r\ntype = google photos\r\nclient_id = XXX\r\nclient_secret = XXX\r\ntoken = XXX\r\n```\r\n\r\n ```\r\n./rclone-test copy -Pvv \\\r\n \"z00:Shelly/Shelly_NYU/Shelly Photos from NYU\" \"gpzs2:album/rclone\" \\\r\n --transfers 32 \\\r\n --tpslimit 1 \\\r\n --drive-chunk-size 128M \\\r\n --exclude \"*.{xml,bin,json,thm,DS_Store}*\" \\\r\n --ignore-case \\\r\n --log-file=rclone-photos-\"$(date +%Y%m%d_%H%M%S).log\" \\\r\n --gphotos-batch-size 32 \\\r\n --gphotos-batch-mode async\r\n```\r\n\r\n LMK if I can help any other way! THanks","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2542434495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dzg","id":466557,"node_id":"MDQ6VXNlcjQ2NjU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/466557?v=4","gravatar_id":"","url":"https://api.github.com/users/dzg","html_url":"https://github.com/dzg","followers_url":"https://api.github.com/users/dzg/followers","following_url":"https://api.github.com/users/dzg/following{/other_user}","gists_url":"https://api.github.com/users/dzg/gists{/gist_id}","starred_url":"https://api.github.com/users/dzg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzg/subscriptions","organizations_url":"https://api.github.com/users/dzg/orgs","repos_url":"https://api.github.com/users/dzg/repos","events_url":"https://api.github.com/users/dzg/events{/privacy}","received_events_url":"https://api.github.com/users/dzg/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2542519818","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2542519818","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2542519818,"node_id":"IC_kwDOAQ-n5M6Xi8YK","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-13T23:00:21Z","updated_at":"2024-12-13T23:00:21Z","body":"It would be really helpful if you could attach a log file of it going wrong with -vv --dump responses\r\n\r\nThat will have names of pictures and albums in so if you don't want to make them public you can email the log (or a link to the log) to nick@craig-wood.com\r\n\r\nThank you","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2542519818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15893414721,"node_id":"REFE_lADOAQ-n5M6iMli-zwAAAAOzUkNB","url":"https://api.github.com/repos/rclone/rclone/issues/events/15893414721","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2f66537514fc52983a7f3a443472f23eef39fbc6","commit_url":"https://api.github.com/repos/rclone/rclone/commits/2f66537514fc52983a7f3a443472f23eef39fbc6","created_at":"2025-01-11T18:46:46Z","performed_via_github_app":null},{"id":15893507356,"node_id":"CE_lADOAQ-n5M6iMli-zwAAAAOzU60c","url":"https://api.github.com/repos/rclone/rclone/issues/events/15893507356","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"2f66537514fc52983a7f3a443472f23eef39fbc6","commit_url":"https://api.github.com/repos/rclone/rclone/commits/2f66537514fc52983a7f3a443472f23eef39fbc6","created_at":"2025-01-11T19:52:20Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2585390138","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2585390138","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2585390138,"node_id":"IC_kwDOAQ-n5M6aGew6","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-11T19:54:02Z","updated_at":"2025-01-11T19:54:02Z","body":"I've merged this to master now which means it will be in [the latest beta](https://beta.rclone.org/) in 15-30 minutes and released in v1.69 ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2585390138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2909540653","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2909540653","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2909540653,"node_id":"IC_kwDOAQ-n5M6tbBEt","user":{"login":"dequis","id":94108,"node_id":"MDQ6VXNlcjk0MTA4","avatar_url":"https://avatars.githubusercontent.com/u/94108?v=4","gravatar_id":"","url":"https://api.github.com/users/dequis","html_url":"https://github.com/dequis","followers_url":"https://api.github.com/users/dequis/followers","following_url":"https://api.github.com/users/dequis/following{/other_user}","gists_url":"https://api.github.com/users/dequis/gists{/gist_id}","starred_url":"https://api.github.com/users/dequis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dequis/subscriptions","organizations_url":"https://api.github.com/users/dequis/orgs","repos_url":"https://api.github.com/users/dequis/repos","events_url":"https://api.github.com/users/dequis/events{/privacy}","received_events_url":"https://api.github.com/users/dequis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-26T12:16:14Z","updated_at":"2025-05-26T12:16:14Z","body":"Hello, I am getting an identical traceback with rclone `v1.70.0-beta.8745.15510c66d` and current git master.\n\nNo special options besides `--gphotos-batch-mode async`, crashes shortly after the first file. I reduced transfers to 1 because that's enough.\n\n```\nrclone copy ./ gphotos:album/[...]/ -P --exclude '*.xmp' --gphotos-batch-mode async --transfers 1\n```\n\nTraceback:\n\n```\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x11ae036]\n\ngoroutine 87 [running]:\ngithub.com/rclone/rclone/backend/googlephotos.(*Object).setMetaData(...)\n        github.com/rclone/rclone/backend/googlephotos/googlephotos.go:913\ngithub.com/rclone/rclone/backend/googlephotos.(*Object).Update(0xc0004857a0, {0x2e6b2e0, 0xc00053a140}, {0x2e42160, 0xc0011ba100}, {0x28eaf80?, 0x207301?}, {0xc000abe240, 0x1, 0x1})\n        github.com/rclone/rclone/backend/googlephotos/googlephotos.go:1196 +0x776\ngithub.com/rclone/rclone/backend/googlephotos.(*Fs).Put(0xc000000380, {0x2e6b2e0, 0xc00053a140}, {0x2e42160, 0xc0011ba100}, {0x78d7f2cf69c0, 0xc001520180}, {0xc000abe240, 0x1, 0x1})\n        github.com/rclone/rclone/backend/googlephotos/googlephotos.go:734 +0x108\ngithub.com/rclone/rclone/fs/operations.(*copy).updateOrPut(0xc000abd8c0, {0x2e6b2e0, 0xc00053a140}, {0x2e55e78?, 0xc00118e0e0?}, {0xc000abe240, 0x1, 0x1})\n        github.com/rclone/rclone/fs/operations/copy.go:217 +0x225\ngithub.com/rclone/rclone/fs/operations.(*copy).manualCopy(0xc000abd8c0, {0x2e6b2e0, 0xc00053a140})\n        github.com/rclone/rclone/fs/operations/copy.go:270 +0x6d8\ngithub.com/rclone/rclone/fs/operations.(*copy).copy(0xc000abd8c0, {0x2e6b2e0, 0xc00053a140})\n        github.com/rclone/rclone/fs/operations/copy.go:310 +0x170\ngithub.com/rclone/rclone/fs/operations.Copy({0x2e6b2e0, 0xc00053a140}, {0x2e82fb0, 0xc000000380}, {0x0, 0x0}, {0xc00172c9c0, 0x15}, {0x2e839c0, 0xc001520180})\n        github.com/rclone/rclone/fs/operations/copy.go:412 +0x473\ngithub.com/rclone/rclone/fs/sync.(*syncCopyMove).pairCopyOrMove(0xc00091e008, {0x2e6b2e0, 0xc00053a140}, 0xc00053a0a0, {0x2e82fb0, 0xc000000380}, 0x9, 0x0?)\n        github.com/rclone/rclone/fs/sync/sync.go:502 +0x1fe\ncreated by github.com/rclone/rclone/fs/sync.(*syncCopyMove).startTransfers in goroutine 1\n        github.com/rclone/rclone/fs/sync/sync.go:532 +0x7d\n```\n\nI did some debugging. The context of the calling function:\n\nhttps://github.com/rclone/rclone/blob/15510c66d401e6737a2b15a0dba988e04ffb4ddd/backend/googlephotos/googlephotos.go#L1180-L1196\n\nThe first branch of the if is taken, when `o.fs.batcher.Batching()`. The second branch (which the bugfix is about) is not involved here as far as i can tell.\n\n`o.fs.batcher.Commit()` returns nil info and nil err, from here:\n\nhttps://github.com/rclone/rclone/blob/15510c66d401e6737a2b15a0dba988e04ffb4ddd/lib/batcher/batcher.go#L276-L278\n\nThe comment on that function also specifies it always returns nil info on async mode.\n\nSo as long as `setMetaData` is called and can't take nils, the `o.fs.batcher.Batching()` branch will always crash this in async mode.\n\nI don't really understand much beyond this. Sounds like we have no way to set metadata in async mode. No idea how bad that is.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2909540653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dequis","id":94108,"node_id":"MDQ6VXNlcjk0MTA4","avatar_url":"https://avatars.githubusercontent.com/u/94108?v=4","gravatar_id":"","url":"https://api.github.com/users/dequis","html_url":"https://github.com/dequis","followers_url":"https://api.github.com/users/dequis/followers","following_url":"https://api.github.com/users/dequis/following{/other_user}","gists_url":"https://api.github.com/users/dequis/gists{/gist_id}","starred_url":"https://api.github.com/users/dequis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dequis/subscriptions","organizations_url":"https://api.github.com/users/dequis/orgs","repos_url":"https://api.github.com/users/dequis/repos","events_url":"https://api.github.com/users/dequis/events{/privacy}","received_events_url":"https://api.github.com/users/dequis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17832174966,"node_id":"REFE_lADOAQ-n5M6iMli-zwAAAAQm4WV2","url":"https://api.github.com/repos/rclone/rclone/issues/events/17832174966","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b7c4d1f8f6e9d9b8943579dcfea12fb4051ac4db","commit_url":"https://api.github.com/repos/rclone/rclone/commits/b7c4d1f8f6e9d9b8943579dcfea12fb4051ac4db","created_at":"2025-05-27T14:39:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2912776784","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2912776784","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2912776784,"node_id":"IC_kwDOAQ-n5M6tnXJQ","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-27T14:40:09Z","updated_at":"2025-05-27T14:40:09Z","body":"@dequis yes you are right, when using async the info returned will be nil - that is the whole point of it - not waiting for the response!\n\nThis is the equivalent code in the dropbox backend\n\nhttps://github.com/rclone/rclone/blob/359433017774a6d4647d50bf95e3adcbb373c9b4/backend/dropbox/dropbox.go#L2055-L2063\n\nI've added something similar to google photos - can you give it a try?\n\n[v1.70.0-beta.8746.b7c4d1f8f.fix-8233-google-photos](https://beta.rclone.org/branch/fix-8233-google-photos/v1.70.0-beta.8746.b7c4d1f8f.fix-8233-google-photos/) on branch [fix-8233-google-photos](https://github.com/rclone/rclone/tree/fix-8233-google-photos) (uploaded in 15-30 mins)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2912776784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17832192688,"node_id":"REE_lADOAQ-n5M6iMli-zwAAAAQm4aqw","url":"https://api.github.com/repos/rclone/rclone/issues/events/17832192688","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2025-05-27T14:40:10Z","state_reason":"reopened","performed_via_github_app":null},{"id":17832193057,"node_id":"MEE_lADOAQ-n5M6iMli-zwAAAAQm4awh","url":"https://api.github.com/repos/rclone/rclone/issues/events/17832193057","actor":{"login":"dequis","id":94108,"node_id":"MDQ6VXNlcjk0MTA4","avatar_url":"https://avatars.githubusercontent.com/u/94108?v=4","gravatar_id":"","url":"https://api.github.com/users/dequis","html_url":"https://github.com/dequis","followers_url":"https://api.github.com/users/dequis/followers","following_url":"https://api.github.com/users/dequis/following{/other_user}","gists_url":"https://api.github.com/users/dequis/gists{/gist_id}","starred_url":"https://api.github.com/users/dequis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dequis/subscriptions","organizations_url":"https://api.github.com/users/dequis/orgs","repos_url":"https://api.github.com/users/dequis/repos","events_url":"https://api.github.com/users/dequis/events{/privacy}","received_events_url":"https://api.github.com/users/dequis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-05-27T14:40:11Z","performed_via_github_app":null},{"id":17832193081,"node_id":"SE_lADOAQ-n5M6iMli-zwAAAAQm4aw5","url":"https://api.github.com/repos/rclone/rclone/issues/events/17832193081","actor":{"login":"dequis","id":94108,"node_id":"MDQ6VXNlcjk0MTA4","avatar_url":"https://avatars.githubusercontent.com/u/94108?v=4","gravatar_id":"","url":"https://api.github.com/users/dequis","html_url":"https://github.com/dequis","followers_url":"https://api.github.com/users/dequis/followers","following_url":"https://api.github.com/users/dequis/following{/other_user}","gists_url":"https://api.github.com/users/dequis/gists{/gist_id}","starred_url":"https://api.github.com/users/dequis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dequis/subscriptions","organizations_url":"https://api.github.com/users/dequis/orgs","repos_url":"https://api.github.com/users/dequis/repos","events_url":"https://api.github.com/users/dequis/events{/privacy}","received_events_url":"https://api.github.com/users/dequis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-05-27T14:40:11Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2912822837","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2912822837","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2912822837,"node_id":"IC_kwDOAQ-n5M6tniY1","user":{"login":"dequis","id":94108,"node_id":"MDQ6VXNlcjk0MTA4","avatar_url":"https://avatars.githubusercontent.com/u/94108?v=4","gravatar_id":"","url":"https://api.github.com/users/dequis","html_url":"https://github.com/dequis","followers_url":"https://api.github.com/users/dequis/followers","following_url":"https://api.github.com/users/dequis/following{/other_user}","gists_url":"https://api.github.com/users/dequis/gists{/gist_id}","starred_url":"https://api.github.com/users/dequis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dequis/subscriptions","organizations_url":"https://api.github.com/users/dequis/orgs","repos_url":"https://api.github.com/users/dequis/repos","events_url":"https://api.github.com/users/dequis/events{/privacy}","received_events_url":"https://api.github.com/users/dequis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-27T14:51:33Z","updated_at":"2025-05-27T14:51:33Z","body":"Looks like it's not succeeding at any transfers because of the size 0:\n\n```\n2025/05/27 16:50:27 ERROR : 266CANON/IMG_7545.JPG: corrupted on transfer: sizes differ src(Local file system at /home/dx/Pictures/g5x) 4687672 vs dst(Google Photos path \"album/g5x\") 0\n2025/05/27 16:50:27 INFO  : 266CANON/IMG_7545.JPG: Removing failed copy\n2025/05/27 16:50:29 DEBUG : Google Photos path \"album/g5x\": Adding \"266CANON/IMG_7532.JPG\" to batch\n2025/05/27 16:50:29 ERROR : 266CANON/IMG_7532.JPG: corrupted on transfer: sizes differ src(Local file system at /home/dx/Pictures/g5x) 3203087 vs dst(Google Photos path \"album/g5x\") 0\n2025/05/27 16:50:29 INFO  : 266CANON/IMG_7532.JPG: Removing failed copy\n2025/05/27 16:50:30 DEBUG : Google Photos path \"album/g5x\": Adding \"266CANON/IMG_7489.JPG\" to batch\n2025/05/27 16:50:30 ERROR : 266CANON/IMG_7489.JPG: corrupted on transfer: sizes differ src(Local file system at /home/dx/Pictures/g5x) 4701221 vs dst(Google Photos path \"album/g5x\") 0\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2912822837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dequis","id":94108,"node_id":"MDQ6VXNlcjk0MTA4","avatar_url":"https://avatars.githubusercontent.com/u/94108?v=4","gravatar_id":"","url":"https://api.github.com/users/dequis","html_url":"https://github.com/dequis","followers_url":"https://api.github.com/users/dequis/followers","following_url":"https://api.github.com/users/dequis/following{/other_user}","gists_url":"https://api.github.com/users/dequis/gists{/gist_id}","starred_url":"https://api.github.com/users/dequis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dequis/subscriptions","organizations_url":"https://api.github.com/users/dequis/orgs","repos_url":"https://api.github.com/users/dequis/repos","events_url":"https://api.github.com/users/dequis/events{/privacy}","received_events_url":"https://api.github.com/users/dequis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2912900871","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2912900871","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2912900871,"node_id":"IC_kwDOAQ-n5M6tn1cH","user":{"login":"dequis","id":94108,"node_id":"MDQ6VXNlcjk0MTA4","avatar_url":"https://avatars.githubusercontent.com/u/94108?v=4","gravatar_id":"","url":"https://api.github.com/users/dequis","html_url":"https://github.com/dequis","followers_url":"https://api.github.com/users/dequis/followers","following_url":"https://api.github.com/users/dequis/following{/other_user}","gists_url":"https://api.github.com/users/dequis/gists{/gist_id}","starred_url":"https://api.github.com/users/dequis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dequis/subscriptions","organizations_url":"https://api.github.com/users/dequis/orgs","repos_url":"https://api.github.com/users/dequis/repos","events_url":"https://api.github.com/users/dequis/events{/privacy}","received_events_url":"https://api.github.com/users/dequis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-27T15:05:52Z","updated_at":"2025-05-27T15:05:52Z","body":"Noticed that setMetaData doesn't set the size either, hackily threw this change in here, looks like it works:\n\n```\n--- a/backend/googlephotos/googlephotos.go\n+++ b/backend/googlephotos/googlephotos.go\n@@ -1196,6 +1196,7 @@ func (o *Object) Update(ctx context.Context, in io.Reader, src fs.ObjectInfo, op\n        // Store the info back into the Object\n        // info == nil will only happen if we are uploading async batches\n        // we don't have anything sensible to write into the info then.\n+       o.bytes = -1\n        if info != nil {\n                o.setMetaData(info)\n        }\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2912900871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dequis","id":94108,"node_id":"MDQ6VXNlcjk0MTA4","avatar_url":"https://avatars.githubusercontent.com/u/94108?v=4","gravatar_id":"","url":"https://api.github.com/users/dequis","html_url":"https://github.com/dequis","followers_url":"https://api.github.com/users/dequis/followers","following_url":"https://api.github.com/users/dequis/following{/other_user}","gists_url":"https://api.github.com/users/dequis/gists{/gist_id}","starred_url":"https://api.github.com/users/dequis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dequis/subscriptions","organizations_url":"https://api.github.com/users/dequis/orgs","repos_url":"https://api.github.com/users/dequis/repos","events_url":"https://api.github.com/users/dequis/events{/privacy}","received_events_url":"https://api.github.com/users/dequis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2913002570","html_url":"https://github.com/rclone/rclone/issues/8233#issuecomment-2913002570","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8233","id":2913002570,"node_id":"IC_kwDOAQ-n5M6toORK","user":{"login":"dequis","id":94108,"node_id":"MDQ6VXNlcjk0MTA4","avatar_url":"https://avatars.githubusercontent.com/u/94108?v=4","gravatar_id":"","url":"https://api.github.com/users/dequis","html_url":"https://github.com/dequis","followers_url":"https://api.github.com/users/dequis/followers","following_url":"https://api.github.com/users/dequis/following{/other_user}","gists_url":"https://api.github.com/users/dequis/gists{/gist_id}","starred_url":"https://api.github.com/users/dequis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dequis/subscriptions","organizations_url":"https://api.github.com/users/dequis/orgs","repos_url":"https://api.github.com/users/dequis/repos","events_url":"https://api.github.com/users/dequis/events{/privacy}","received_events_url":"https://api.github.com/users/dequis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-27T15:24:10Z","updated_at":"2025-05-28T17:35:20Z","body":"Yeah I think this fixes the bug. I'm not super experienced with google photos and its weirdnesses (it's only been three days of trying to upload stuff) and in the beginning I felt like I got more i/o errors in this mode, but I think google photos decided to be worse today. At some point batchCreate got stuck for 4 minutes, ended with EOF, did a low level retry, succeeded after 3 seconds, and only then started to commit the next batch. \n\nIt also had files stuck at 0 bytes per second with ETAs of thousands of hours, but in the end it recovered gracefully. It's doing the rest of the files now with no issues.\n\n~~Given this behavior of batchCreate, it looks plausible that this async mode helps with the \"concurrent write request\" rate limit of issue #6920, it really doesn't attempt to do more than one batchCreate request at once even when the server is being awful. And having comitting/committed log messages highlights that these can just take 8 seconds to complete. I get it now. It felt a bit counterintuitive but the sync mode is not afraid to start concurrent write requests (what is being blocked is the transfer, but many transfers and batches can happen in parallel), this mode avoids it.~~ EDIT: i had better luck yesterday but today the server throws 429 even when obviously doing only one batchCreate request at a time. \n\nThanks for this feature and the bugfix!\n\n(Also I'm preparing to move to a self-hosted thing, paying for google photos is not worth it, this API sucks)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2913002570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dequis","id":94108,"node_id":"MDQ6VXNlcjk0MTA4","avatar_url":"https://avatars.githubusercontent.com/u/94108?v=4","gravatar_id":"","url":"https://api.github.com/users/dequis","html_url":"https://github.com/dequis","followers_url":"https://api.github.com/users/dequis/followers","following_url":"https://api.github.com/users/dequis/following{/other_user}","gists_url":"https://api.github.com/users/dequis/gists{/gist_id}","starred_url":"https://api.github.com/users/dequis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dequis/subscriptions","organizations_url":"https://api.github.com/users/dequis/orgs","repos_url":"https://api.github.com/users/dequis/repos","events_url":"https://api.github.com/users/dequis/events{/privacy}","received_events_url":"https://api.github.com/users/dequis/received_events","type":"User","user_view_type":"public","site_admin":false}}]