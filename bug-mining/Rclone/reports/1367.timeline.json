[{"id":16935604026,"node_id":"LE_lADOAQ-n5M6vNV5GzwAAAAPxcM86","url":"https://api.github.com/repos/rclone/rclone/issues/events/16935604026","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-03-21T21:10:37Z","label":{"name":"Support Contract","color":"D93F0B"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2744454904","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2744454904","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2744454904,"node_id":"IC_kwDOAQ-n5M6jlQ74","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-21T21:10:46Z","updated_at":"2025-03-21T21:10:46Z","body":"Heads up @rclone/support - the \"Support Contract\" label was applied to this issue.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2744454904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16935605398,"node_id":"SE_lADOAQ-n5M6vNV5GzwAAAAPxcNSW","url":"https://api.github.com/repos/rclone/rclone/issues/events/16935605398","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-21T21:10:47Z","performed_via_github_app":null},{"id":16935605415,"node_id":"SE_lADOAQ-n5M6vNV5GzwAAAAPxcNSn","url":"https://api.github.com/repos/rclone/rclone/issues/events/16935605415","actor":{"login":"edc-w","id":138211970,"node_id":"U_kgDOCDzygg","avatar_url":"https://avatars.githubusercontent.com/u/138211970?v=4","gravatar_id":"","url":"https://api.github.com/users/edc-w","html_url":"https://github.com/edc-w","followers_url":"https://api.github.com/users/edc-w/followers","following_url":"https://api.github.com/users/edc-w/following{/other_user}","gists_url":"https://api.github.com/users/edc-w/gists{/gist_id}","starred_url":"https://api.github.com/users/edc-w/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edc-w/subscriptions","organizations_url":"https://api.github.com/users/edc-w/orgs","repos_url":"https://api.github.com/users/edc-w/repos","events_url":"https://api.github.com/users/edc-w/events{/privacy}","received_events_url":"https://api.github.com/users/edc-w/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-21T21:10:47Z","performed_via_github_app":null},{"id":16935605742,"node_id":"RTE_lADOAQ-n5M6vNV5GzwAAAAPxcNXu","url":"https://api.github.com/repos/rclone/rclone/issues/events/16935605742","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2025-03-21T21:10:50Z","rename":{"from":"Sort OneDrive permissions with users ahead of groups","to":"Sort Graph permissions with users ahead of groups"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2744463272","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2744463272","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2744463272,"node_id":"IC_kwDOAQ-n5M6jlS-o","user":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-21T21:15:23Z","updated_at":"2025-03-21T21:15:23Z","body":"@ncw This is what I emailed about earlier today. It appears to be a Graph issue and not a bug, and there is a workaround available. Still, I think it would be good to address this in rclone, as it could lead to loss of access in the following scenario:\n\n1. A user has individual and group permissions to a file.\n2. The user is removed from the group.\n3. The user no longer has access to the file because Graph dropped the individual permission.\n\nWhether intentional or not, Graph is assuming group memberships are static, and that's anything but true in the real world.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2744463272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16935670670,"node_id":"MEE_lADOAQ-n5M6vNV5GzwAAAAPxcdOO","url":"https://api.github.com/repos/rclone/rclone/issues/events/16935670670","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-03-21T21:15:25Z","performed_via_github_app":null},{"id":16935670679,"node_id":"SE_lADOAQ-n5M6vNV5GzwAAAAPxcdOX","url":"https://api.github.com/repos/rclone/rclone/issues/events/16935670679","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-21T21:15:25Z","performed_via_github_app":null},{"id":16991212573,"node_id":"REFE_lADOAQ-n5M6vNV5GzwAAAAP0wVQd","url":"https://api.github.com/repos/rclone/rclone/issues/events/16991212573","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2af1e8f462b5e43812527052220558819a82f438","commit_url":"https://api.github.com/repos/rclone/rclone/commits/2af1e8f462b5e43812527052220558819a82f438","created_at":"2025-03-26T11:56:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2754160216","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2754160216","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2754160216,"node_id":"IC_kwDOAQ-n5M6kKSZY","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-26T11:58:02Z","updated_at":"2025-03-26T11:58:02Z","body":"@chscott I had a go at ordering the permission updates so anything with a user in it comes first. I think this should fix the problem.\n\nCan you give it a try?\n\n[v1.70.0-beta.8641.2af1e8f46.fix-8465-onedrive-metadata](https://beta.rclone.org/branch/fix-8465-onedrive-metadata/v1.70.0-beta.8641.2af1e8f46.fix-8465-onedrive-metadata/) on branch [fix-8465-onedrive-metadata](https://github.com/rclone/rclone/tree/fix-8465-onedrive-metadata) (uploaded in 15-30 mins)\n\nThanks","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2754160216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16991236894,"node_id":"MEE_lADOAQ-n5M6vNV5GzwAAAAP0wbMe","url":"https://api.github.com/repos/rclone/rclone/issues/events/16991236894","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-03-26T11:58:02Z","performed_via_github_app":null},{"id":16991236923,"node_id":"SE_lADOAQ-n5M6vNV5GzwAAAAP0wbM7","url":"https://api.github.com/repos/rclone/rclone/issues/events/16991236923","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-26T11:58:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2754568055","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2754568055","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2754568055,"node_id":"IC_kwDOAQ-n5M6kL193","user":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-26T14:09:34Z","updated_at":"2025-03-26T14:09:34Z","body":"@ncw The fix didn't work for me. Here's are two log excerpts. The first is with the fix and no changes on my side. The second is with `v1.69.1` and a change on my side to sort the permissions that are returned to rclone.\n\n```\n2025/03/26 08:44:57 DEBUG : rclone: Version \"v1.70.0-beta.8641.2af1e8f46.fix-8465-onedrive-metadata\" starting with parameters\n2025/03/26 08:44:59 DEBUG : Metadata mapper sent: \n{\n\t\"SrcFs\": \"Source{UEqtu}:Test\",\n\t\"SrcFsType\": \"drive\",\n\t\"DstFs\": \"Target{VZpyf}:Test\",\n\t\"DstFsType\": \"onedrive\",\n\t\"Remote\": \"sample.txt\",\n\t\"Size\": 22,\n\t\"MimeType\": \"text/plain\",\n\t\"ModTime\": \"2025-03-26T13:41:56.572Z\",\n\t\"IsDir\": false,\n\t\"ID\": \"1vTdEO9GWMQzHJfN0l3Fcs5SZCvem0-5J\",\n\t\"Metadata\": {\n\t\t\"btime\": \"2025-03-25T20:30:38.560Z\",\n\t\t\"content-type\": \"text/plain\",\n\t\t\"copy-requires-writer-permission\": \"false\",\n\t\t\"mtime\": \"2025-03-26T13:41:56.572Z\",\n\t\t\"owner\": \"chad@cdsconsulting.co\",\n\t\t\"permissions\": \"[{\\\"emailAddress\\\":\\\"reviewers@cdsconsulting.co\\\",\\\"id\\\":\\\"09466358200964241419\\\",\\\"role\\\":\\\"writer\\\",\\\"type\\\":\\\"group\\\"},{\\\"emailAddress\\\":\\\"angie@cdsconsulting.co\\\",\\\"id\\\":\\\"14885772533033484759\\\",\\\"role\\\":\\\"writer\\\",\\\"type\\\":\\\"user\\\"},{\\\"emailAddress\\\":\\\"chad@cdsconsulting.co\\\",\\\"id\\\":\\\"09287294999424909072\\\",\\\"role\\\":\\\"owner\\\",\\\"type\\\":\\\"user\\\"}]\",\n\t\t\"starred\": \"false\",\n\t\t\"viewed-by-me\": \"true\",\n\t\t\"writers-can-share\": \"true\"\n\t}\n}\n2025/03/26 08:44:59 DEBUG : Metadata mapper received: \n{\"Metadata\":{\"permissions\":\"[{\\\"grantedToV2\\\":{\\\"group\\\":{\\\"id\\\":\\\"reviewers@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]},{\\\"grantedToV2\\\":{\\\"user\\\":{\\\"id\\\":\\\"angie.scott@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]}]\"}}\n\n2025/03/26 08:45:01 DEBUG : POST /v1.0/drives/b!ssbqQHJ0v0Ki4mBGkrRBXWvDWPc3piNIl8WI29g4XaD8jOMrJ7J6RKVhFAqRVq5-/items/01N4X3HM36IPUADM7D4RGLAYEKM2E5HS52/invite HTTP/1.1\n{\"recipients\":[{\"email\":\"reviewers@cdsconsulting.org\"}],\"requireSignIn\":true,\"roles\":[\"write\"]}\n2025/03/26 08:45:02 DEBUG : HTTP/2.0 200 OK\n{\n    \"@odata.context\": \"https://graph.microsoft.com/v1.0/$metadata#Collection(microsoft.graph.permission)\",\n    \"value\": [{\n            \"id\": \"Yzowby5jfGZlZGVyYXRlZGRpcmVjdG9yeWNsYWltcHJvdmlkZXJ8ZmVjMjNjZGYtYTZkZS00OTU1LWFkZWItMDE3OTM2NWU2Yjdi\",\n            \"roles\": [\"write\"],\n            \"grantedTo\": {\n                \"user\": {\n                    \"email\": \"reviewers@cdsconsultingllc.onmicrosoft.com\",\n                    \"displayName\": \"Reviewers Members\"\n                }\n            }\n        }\n    ]\n}\n\n2025/03/26 08:45:02 DEBUG : POST /v1.0/drives/b!ssbqQHJ0v0Ki4mBGkrRBXWvDWPc3piNIl8WI29g4XaD8jOMrJ7J6RKVhFAqRVq5-/items/01N4X3HM36IPUADM7D4RGLAYEKM2E5HS52/invite HTTP/1.1\n{\"recipients\":[{\"email\":\"angie.scott@cdsconsulting.org\"}],\"requireSignIn\":true,\"roles\":[\"write\"]}\n2025/03/26 08:45:02 DEBUG : HTTP/2.0 200 OK\n{\n    \"@odata.context\": \"https://graph.microsoft.com/v1.0/$metadata#Collection(microsoft.graph.permission)\",\n    \"value\": [{\n            \"id\": \"aTowIy5mfG1lbWJlcnNoaXB8YW5naWUuc2NvdHRAY2RzY29uc3VsdGluZy5vcmc\",\n            \"roles\": [\"write\"],\n            \"grantedTo\": {\n                \"user\": {\n                    \"email\": \"angie@cdsconsulting.org\",\n                    \"id\": \"4b9c56cb-83b3-4b1a-a66f-5e108a840bf4\",\n                    \"displayName\": \"Angie Scott\"\n                }\n            }\n        }\n    ]\n}\n\n2025/03/26 08:45:02 DEBUG : GET /v1.0/drives/b!ssbqQHJ0v0Ki4mBGkrRBXWvDWPc3piNIl8WI29g4XaD8jOMrJ7J6RKVhFAqRVq5-/items/01N4X3HM36IPUADM7D4RGLAYEKM2E5HS52/permissions HTTP/1.1\n2025/03/26 08:45:03 DEBUG : HTTP/2.0 200 OK\n{\n    \"@odata.context\": \"https://graph.microsoft.com/v1.0/$metadata#drives('b%21ssbqQHJ0v0Ki4mBGkrRBXWvDWPc3piNIl8WI29g4XaD8jOMrJ7J6RKVhFAqRVq5-')/items('01N4X3HM36IPUADM7D4RGLAYEKM2E5HS52')/permissions\",\n    \"value\": [{\n            \"id\": \"Yzowby5jfGZlZGVyYXRlZGRpcmVjdG9yeWNsYWltcHJvdmlkZXJ8ZmVjMjNjZGYtYTZkZS00OTU1LWFkZWItMDE3OTM2NWU2Yjdi\",\n            \"roles\": [\"write\"],\n            \"shareId\": \"Yzowby5jfGZlZGVyYXRlZGRpcmVjdG9yeWNsYWltcHJvdmlkZXJ8ZmVjMjNjZGYtYTZkZS00OTU1LWFkZWItMDE3OTM2NWU2Yjdi\",\n            \"grantedToV2\": {\n                \"group\": {\n                    \"@odata.type\": \"#microsoft.graph.sharePointIdentity\",\n                    \"displayName\": \"Reviewers Members\",\n                    \"email\": \"reviewers@cdsconsultingllc.onmicrosoft.com\",\n                    \"id\": \"fec23cdf-a6de-4955-adeb-0179365e6b7b\"\n                },\n                \"siteUser\": {\n                    \"displayName\": \"Reviewers Members\",\n                    \"email\": \"reviewers@cdsconsultingllc.onmicrosoft.com\",\n                    \"id\": \"16\",\n                    \"loginName\": \"c:0o.c|federateddirectoryclaimprovider|fec23cdf-a6de-4955-adeb-0179365e6b7b\"\n                }\n            },\n            \"grantedTo\": {\n                \"user\": {\n                    \"displayName\": \"Reviewers Members\",\n                    \"email\": \"reviewers@cdsconsultingllc.onmicrosoft.com\",\n                    \"id\": \"fec23cdf-a6de-4955-adeb-0179365e6b7b\"\n                }\n            }\n        }, {\n            \"id\": \"aTowIy5mfG1lbWJlcnNoaXB8Y2hhZC5zY290dEBjZHNjb25zdWx0aW5nLm9yZw\",\n            \"roles\": [\"owner\"],\n            \"shareId\": \"aTowIy5mfG1lbWJlcnNoaXB8Y2hhZC5zY290dEBjZHNjb25zdWx0aW5nLm9yZw\",\n            \"grantedToV2\": {\n                \"user\": {\n                    \"@odata.type\": \"#microsoft.graph.sharePointIdentity\",\n                    \"displayName\": \"Chad Scott\",\n                    \"email\": \"chad@cdsconsulting.org\",\n                    \"id\": \"7ecdcdf3-e69a-4194-8ad8-e290ea289fd5\"\n                },\n                \"siteUser\": {\n                    \"displayName\": \"Chad Scott\",\n                    \"email\": \"chad@cdsconsulting.org\",\n                    \"id\": \"3\",\n                    \"loginName\": \"i:0#.f|membership|chad.scott@cdsconsulting.org\"\n                }\n            },\n            \"grantedTo\": {\n                \"user\": {\n                    \"displayName\": \"Chad Scott\",\n                    \"email\": \"chad@cdsconsulting.org\",\n                    \"id\": \"7ecdcdf3-e69a-4194-8ad8-e290ea289fd5\"\n                }\n            }\n        }\n    ]\n}\n```\n\n```\n2025/03/26 08:52:36 DEBUG : rclone: Version \"v1.69.1\" starting with parameters \n2025/03/26 08:52:37 DEBUG : Metadata mapper sent: \n{\n\t\"SrcFs\": \"Source{UEqtu}:Test\",\n\t\"SrcFsType\": \"drive\",\n\t\"DstFs\": \"Target{VZpyf}:Test\",\n\t\"DstFsType\": \"onedrive\",\n\t\"Remote\": \"sample.txt\",\n\t\"Size\": 22,\n\t\"MimeType\": \"text/plain\",\n\t\"ModTime\": \"2025-03-26T13:41:56.572Z\",\n\t\"IsDir\": false,\n\t\"ID\": \"1vTdEO9GWMQzHJfN0l3Fcs5SZCvem0-5J\",\n\t\"Metadata\": {\n\t\t\"btime\": \"2025-03-25T20:30:38.560Z\",\n\t\t\"content-type\": \"text/plain\",\n\t\t\"copy-requires-writer-permission\": \"false\",\n\t\t\"mtime\": \"2025-03-26T13:41:56.572Z\",\n\t\t\"owner\": \"chad@cdsconsulting.co\",\n\t\t\"permissions\": \"[{\\\"emailAddress\\\":\\\"reviewers@cdsconsulting.co\\\",\\\"id\\\":\\\"09466358200964241419\\\",\\\"role\\\":\\\"writer\\\",\\\"type\\\":\\\"group\\\"},{\\\"emailAddress\\\":\\\"angie@cdsconsulting.co\\\",\\\"id\\\":\\\"14885772533033484759\\\",\\\"role\\\":\\\"writer\\\",\\\"type\\\":\\\"user\\\"},{\\\"emailAddress\\\":\\\"chad@cdsconsulting.co\\\",\\\"id\\\":\\\"09287294999424909072\\\",\\\"role\\\":\\\"owner\\\",\\\"type\\\":\\\"user\\\"}]\",\n\t\t\"starred\": \"false\",\n\t\t\"viewed-by-me\": \"true\",\n\t\t\"writers-can-share\": \"true\"\n\t}\n}\n2025/03/26 08:52:38 DEBUG : Metadata mapper received: \n{\"Metadata\":{\"permissions\":\"[{\\\"grantedToV2\\\":{\\\"user\\\":{\\\"id\\\":\\\"angie.scott@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]},{\\\"grantedToV2\\\":{\\\"group\\\":{\\\"id\\\":\\\"reviewers@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]}]\"}}\n\n2025/03/26 08:52:40 DEBUG : POST /v1.0/drives/b!ssbqQHJ0v0Ki4mBGkrRBXWvDWPc3piNIl8WI29g4XaD8jOMrJ7J6RKVhFAqRVq5-/items/01N4X3HM6YFBSNPFDSWJGZAWXNLGDPFDPO/invite HTTP/1.1\n{\"recipients\":[{\"email\":\"angie.scott@cdsconsulting.org\"}],\"requireSignIn\":true,\"roles\":[\"write\"]}\n2025/03/26 08:52:40 DEBUG : HTTP/2.0 200 OK\n{\n    \"@odata.context\": \"https://graph.microsoft.com/v1.0/$metadata#Collection(microsoft.graph.permission)\",\n    \"value\": [{\n            \"id\": \"aTowIy5mfG1lbWJlcnNoaXB8YW5naWUuc2NvdHRAY2RzY29uc3VsdGluZy5vcmc\",\n            \"roles\": [\"write\"],\n            \"grantedTo\": {\n                \"user\": {\n                    \"email\": \"angie@cdsconsulting.org\",\n                    \"id\": \"4b9c56cb-83b3-4b1a-a66f-5e108a840bf4\",\n                    \"displayName\": \"Angie Scott\"\n                }\n            }\n        }\n    ]\n}\n\n2025/03/26 08:52:40 DEBUG : POST /v1.0/drives/b!ssbqQHJ0v0Ki4mBGkrRBXWvDWPc3piNIl8WI29g4XaD8jOMrJ7J6RKVhFAqRVq5-/items/01N4X3HM6YFBSNPFDSWJGZAWXNLGDPFDPO/invite HTTP/1.1\n{\"recipients\":[{\"email\":\"reviewers@cdsconsulting.org\"}],\"requireSignIn\":true,\"roles\":[\"write\"]}\n2025/03/26 08:52:41 DEBUG : HTTP/2.0 200 OK\n{\n    \"@odata.context\": \"https://graph.microsoft.com/v1.0/$metadata#Collection(microsoft.graph.permission)\",\n    \"value\": [{\n            \"id\": \"Yzowby5jfGZlZGVyYXRlZGRpcmVjdG9yeWNsYWltcHJvdmlkZXJ8ZmVjMjNjZGYtYTZkZS00OTU1LWFkZWItMDE3OTM2NWU2Yjdi\",\n            \"roles\": [\"write\"],\n            \"grantedTo\": {\n                \"user\": {\n                    \"email\": \"reviewers@cdsconsultingllc.onmicrosoft.com\",\n                    \"displayName\": \"Reviewers Members\"\n                }\n            }\n        }\n    ]\n}\n\n2025/03/26 08:52:41 DEBUG : GET /v1.0/drives/b!ssbqQHJ0v0Ki4mBGkrRBXWvDWPc3piNIl8WI29g4XaD8jOMrJ7J6RKVhFAqRVq5-/items/01N4X3HM6YFBSNPFDSWJGZAWXNLGDPFDPO/permissions HTTP/1.1\n2025/03/26 08:52:41 DEBUG : HTTP/2.0 200 OK\n{\n    \"@odata.context\": \"https://graph.microsoft.com/v1.0/$metadata#drives('b%21ssbqQHJ0v0Ki4mBGkrRBXWvDWPc3piNIl8WI29g4XaD8jOMrJ7J6RKVhFAqRVq5-')/items('01N4X3HM6YFBSNPFDSWJGZAWXNLGDPFDPO')/permissions\",\n    \"value\": [{\n            \"id\": \"aTowIy5mfG1lbWJlcnNoaXB8YW5naWUuc2NvdHRAY2RzY29uc3VsdGluZy5vcmc\",\n            \"roles\": [\"write\"],\n            \"shareId\": \"aTowIy5mfG1lbWJlcnNoaXB8YW5naWUuc2NvdHRAY2RzY29uc3VsdGluZy5vcmc\",\n            \"grantedToV2\": {\n                \"user\": {\n                    \"@odata.type\": \"#microsoft.graph.sharePointIdentity\",\n                    \"displayName\": \"Angie Scott\",\n                    \"email\": \"angie@cdsconsulting.org\",\n                    \"id\": \"4b9c56cb-83b3-4b1a-a66f-5e108a840bf4\"\n                },\n                \"siteUser\": {\n                    \"displayName\": \"Angie Scott\",\n                    \"email\": \"angie@cdsconsulting.org\",\n                    \"id\": \"7\",\n                    \"loginName\": \"i:0#.f|membership|angie.scott@cdsconsulting.org\"\n                }\n            },\n            \"grantedTo\": {\n                \"user\": {\n                    \"displayName\": \"Angie Scott\",\n                    \"email\": \"angie@cdsconsulting.org\",\n                    \"id\": \"4b9c56cb-83b3-4b1a-a66f-5e108a840bf4\"\n                }\n            }\n        }, {\n            \"id\": \"Yzowby5jfGZlZGVyYXRlZGRpcmVjdG9yeWNsYWltcHJvdmlkZXJ8ZmVjMjNjZGYtYTZkZS00OTU1LWFkZWItMDE3OTM2NWU2Yjdi\",\n            \"roles\": [\"write\"],\n            \"shareId\": \"Yzowby5jfGZlZGVyYXRlZGRpcmVjdG9yeWNsYWltcHJvdmlkZXJ8ZmVjMjNjZGYtYTZkZS00OTU1LWFkZWItMDE3OTM2NWU2Yjdi\",\n            \"grantedToV2\": {\n                \"group\": {\n                    \"@odata.type\": \"#microsoft.graph.sharePointIdentity\",\n                    \"displayName\": \"Reviewers Members\",\n                    \"email\": \"reviewers@cdsconsultingllc.onmicrosoft.com\",\n                    \"id\": \"fec23cdf-a6de-4955-adeb-0179365e6b7b\"\n                },\n                \"siteUser\": {\n                    \"displayName\": \"Reviewers Members\",\n                    \"email\": \"reviewers@cdsconsultingllc.onmicrosoft.com\",\n                    \"id\": \"16\",\n                    \"loginName\": \"c:0o.c|federateddirectoryclaimprovider|fec23cdf-a6de-4955-adeb-0179365e6b7b\"\n                }\n            },\n            \"grantedTo\": {\n                \"user\": {\n                    \"displayName\": \"Reviewers Members\",\n                    \"email\": \"reviewers@cdsconsultingllc.onmicrosoft.com\",\n                    \"id\": \"fec23cdf-a6de-4955-adeb-0179365e6b7b\"\n                }\n            }\n        }, {\n            \"id\": \"aTowIy5mfG1lbWJlcnNoaXB8Y2hhZC5zY290dEBjZHNjb25zdWx0aW5nLm9yZw\",\n            \"roles\": [\"owner\"],\n            \"shareId\": \"aTowIy5mfG1lbWJlcnNoaXB8Y2hhZC5zY290dEBjZHNjb25zdWx0aW5nLm9yZw\",\n            \"grantedToV2\": {\n                \"user\": {\n                    \"@odata.type\": \"#microsoft.graph.sharePointIdentity\",\n                    \"displayName\": \"Chad Scott\",\n                    \"email\": \"chad@cdsconsulting.org\",\n                    \"id\": \"7ecdcdf3-e69a-4194-8ad8-e290ea289fd5\"\n                },\n                \"siteUser\": {\n                    \"displayName\": \"Chad Scott\",\n                    \"email\": \"chad@cdsconsulting.org\",\n                    \"id\": \"3\",\n                    \"loginName\": \"i:0#.f|membership|chad.scott@cdsconsulting.org\"\n                }\n            },\n            \"grantedTo\": {\n                \"user\": {\n                    \"displayName\": \"Chad Scott\",\n                    \"email\": \"chad@cdsconsulting.org\",\n                    \"id\": \"7ecdcdf3-e69a-4194-8ad8-e290ea289fd5\"\n                }\n            }\n        }\n    ]\n}\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2754568055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16993640203,"node_id":"MEE_lADOAQ-n5M6vNV5GzwAAAAP05l8L","url":"https://api.github.com/repos/rclone/rclone/issues/events/16993640203","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-03-26T14:09:36Z","performed_via_github_app":null},{"id":16993640237,"node_id":"SE_lADOAQ-n5M6vNV5GzwAAAAP05l8t","url":"https://api.github.com/repos/rclone/rclone/issues/events/16993640237","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-26T14:09:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2755456020","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2755456020","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2755456020,"node_id":"IC_kwDOAQ-n5M6kPOwU","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-26T18:52:38Z","updated_at":"2025-03-26T18:52:38Z","body":"@chscott \n\nThere is something which is puzzling me above. The POSTs have grantedTo not grantedToV2 like I would expect for a onedrive business. Is that what the metadata mapper is sending?\n\nI think it probably needs to send grantedTo for onedrive personal and grantedToV2 for business, same for grantedToIdentities","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2755456020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16998455683,"node_id":"MEE_lADOAQ-n5M6vNV5GzwAAAAP1L9mD","url":"https://api.github.com/repos/rclone/rclone/issues/events/16998455683","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-03-26T18:52:39Z","performed_via_github_app":null},{"id":16998455693,"node_id":"SE_lADOAQ-n5M6vNV5GzwAAAAP1L9mN","url":"https://api.github.com/repos/rclone/rclone/issues/events/16998455693","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-26T18:52:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2755657908","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2755657908","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2755657908,"node_id":"IC_kwDOAQ-n5M6kQAC0","user":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-26T20:19:11Z","updated_at":"2025-03-26T20:19:11Z","body":"The mapper is sending `grantedToV2` in both cases. The first line in each pair below is from my code. The second is from rclone.\n\n```\n[1vTdEO9GWMQzHJfN0l3Fcs5SZCvem0-5J] Object to rclone: {\"Metadata\":{\"permissions\":\"[{\\\"grantedToV2\\\":{\\\"group\\\":{\\\"id\\\":\\\"reviewers@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]},{\\\"grantedToV2\\\":{\\\"user\\\":{\\\"id\\\":\\\"angie.scott@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]}]\"}}\n\n2025/03/26 08:44:59 DEBUG : Metadata mapper received: \n{\"Metadata\":{\"permissions\":\"[{\\\"grantedToV2\\\":{\\\"group\\\":{\\\"id\\\":\\\"reviewers@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]},{\\\"grantedToV2\\\":{\\\"user\\\":{\\\"id\\\":\\\"angie.scott@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]}]\"}}\n```\n\n```\n[1vTdEO9GWMQzHJfN0l3Fcs5SZCvem0-5J] Object to rclone: {\"Metadata\":{\"permissions\":\"[{\\\"grantedToV2\\\":{\\\"user\\\":{\\\"id\\\":\\\"angie.scott@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]},{\\\"grantedToV2\\\":{\\\"group\\\":{\\\"id\\\":\\\"reviewers@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]}]\"}}\n\n2025/03/26 08:52:38 DEBUG : Metadata mapper received: \n{\"Metadata\":{\"permissions\":\"[{\\\"grantedToV2\\\":{\\\"user\\\":{\\\"id\\\":\\\"angie.scott@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]},{\\\"grantedToV2\\\":{\\\"group\\\":{\\\"id\\\":\\\"reviewers@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]}]\"}}\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2755657908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2766612984","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2766612984","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2766612984,"node_id":"IC_kwDOAQ-n5M6k5yn4","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-31T15:33:50Z","updated_at":"2025-03-31T15:33:50Z","body":"Yes I see the mapper is sending `grantedToV2` now, sorry.\n\nWhat is confusing me is this which appears to send or receive `grantedTo` not `grantedToV2`. I'm not sure whether rclone is sending this or receiving this though.\n\nCan you send me what rclone sent and what it received from onedrive for this call? I want to know if rclone sent `grantedTo` rather than `grantedToV2` but I don't think that is in your log.\n\nThe reason I'm worried about this is that we sort the entries according to `grantedTo` or `grantedToV2` depending on personal or business onedrive and if rclone is confused about which it should be using then the sorting will go wrong.\n\n```\n2025/03/26 08:45:01 DEBUG : POST /v1.0/drives/b!ssbqQHJ0v0Ki4mBGkrRBXWvDWPc3piNIl8WI29g4XaD8jOMrJ7J6RKVhFAqRVq5-/items/01N4X3HM36IPUADM7D4RGLAYEKM2E5HS52/invite HTTP/1.1\n{\"recipients\":[{\"email\":\"reviewers@cdsconsulting.org\"}],\"requireSignIn\":true,\"roles\":[\"write\"]}\n2025/03/26 08:45:02 DEBUG : HTTP/2.0 200 OK\n{\n    \"@odata.context\": \"https://graph.microsoft.com/v1.0/$metadata#Collection(microsoft.graph.permission)\",\n    \"value\": [{\n            \"id\": \"Yzowby5jfGZlZGVyYXRlZGRpcmVjdG9yeWNsYWltcHJvdmlkZXJ8ZmVjMjNjZGYtYTZkZS00OTU1LWFkZWItMDE3OTM2NWU2Yjdi\",\n            \"roles\": [\"write\"],\n            \"grantedTo\": {\n                \"user\": {\n                    \"email\": \"reviewers@cdsconsultingllc.onmicrosoft.com\",\n                    \"displayName\": \"Reviewers Members\"\n                }\n            }\n        }\n    ]\n}\n```\n\nThank you","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2766612984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2766645896","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2766645896","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2766645896,"node_id":"IC_kwDOAQ-n5M6k56qI","user":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-31T15:46:29Z","updated_at":"2025-03-31T15:46:29Z","body":"@ncw Do you want data different from what is in https://github.com/rclone/rclone/issues/8465#issuecomment-2754568055, or is that what you're looking for?\n\n```\n2025/03/26 08:44:59 DEBUG : Metadata mapper sent: \n{\n\t\"SrcFs\": \"Source{UEqtu}:Test\",\n\t\"SrcFsType\": \"drive\",\n\t\"DstFs\": \"Target{VZpyf}:Test\",\n\t\"DstFsType\": \"onedrive\",\n\t\"Remote\": \"sample.txt\",\n\t\"Size\": 22,\n\t\"MimeType\": \"text/plain\",\n\t\"ModTime\": \"2025-03-26T13:41:56.572Z\",\n\t\"IsDir\": false,\n\t\"ID\": \"1vTdEO9GWMQzHJfN0l3Fcs5SZCvem0-5J\",\n\t\"Metadata\": {\n\t\t\"btime\": \"2025-03-25T20:30:38.560Z\",\n\t\t\"content-type\": \"text/plain\",\n\t\t\"copy-requires-writer-permission\": \"false\",\n\t\t\"mtime\": \"2025-03-26T13:41:56.572Z\",\n\t\t\"owner\": \"chad@cdsconsulting.co\",\n\t\t\"permissions\": \"[{\\\"emailAddress\\\":\\\"reviewers@cdsconsulting.co\\\",\\\"id\\\":\\\"09466358200964241419\\\",\\\"role\\\":\\\"writer\\\",\\\"type\\\":\\\"group\\\"},{\\\"emailAddress\\\":\\\"angie@cdsconsulting.co\\\",\\\"id\\\":\\\"14885772533033484759\\\",\\\"role\\\":\\\"writer\\\",\\\"type\\\":\\\"user\\\"},{\\\"emailAddress\\\":\\\"chad@cdsconsulting.co\\\",\\\"id\\\":\\\"09287294999424909072\\\",\\\"role\\\":\\\"owner\\\",\\\"type\\\":\\\"user\\\"}]\",\n\t\t\"starred\": \"false\",\n\t\t\"viewed-by-me\": \"true\",\n\t\t\"writers-can-share\": \"true\"\n\t}\n}\n2025/03/26 08:44:59 DEBUG : Metadata mapper received: \n{\"Metadata\":{\"permissions\":\"[{\\\"grantedToV2\\\":{\\\"group\\\":{\\\"id\\\":\\\"reviewers@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]},{\\\"grantedToV2\\\":{\\\"user\\\":{\\\"id\\\":\\\"angie.scott@cdsconsulting.org\\\"}},\\\"roles\\\":[\\\"write\\\"]}]\"}}\n\n2025/03/26 08:45:01 DEBUG : POST /v1.0/drives/b!ssbqQHJ0v0Ki4mBGkrRBXWvDWPc3piNIl8WI29g4XaD8jOMrJ7J6RKVhFAqRVq5-/items/01N4X3HM36IPUADM7D4RGLAYEKM2E5HS52/invite HTTP/1.1\n{\"recipients\":[{\"email\":\"reviewers@cdsconsulting.org\"}],\"requireSignIn\":true,\"roles\":[\"write\"]}\n2025/03/26 08:45:02 DEBUG : HTTP/2.0 200 OK\n{\n    \"@odata.context\": \"https://graph.microsoft.com/v1.0/$metadata#Collection(microsoft.graph.permission)\",\n    \"value\": [{\n            \"id\": \"Yzowby5jfGZlZGVyYXRlZGRpcmVjdG9yeWNsYWltcHJvdmlkZXJ8ZmVjMjNjZGYtYTZkZS00OTU1LWFkZWItMDE3OTM2NWU2Yjdi\",\n            \"roles\": [\"write\"],\n            \"grantedTo\": {\n                \"user\": {\n                    \"email\": \"reviewers@cdsconsultingllc.onmicrosoft.com\",\n                    \"displayName\": \"Reviewers Members\"\n                }\n            }\n        }\n    ]\n}\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2766645896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17059724874,"node_id":"MEE_lADOAQ-n5M6vNV5GzwAAAAP41r5K","url":"https://api.github.com/repos/rclone/rclone/issues/events/17059724874","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-03-31T15:46:30Z","performed_via_github_app":null},{"id":17059724906,"node_id":"SE_lADOAQ-n5M6vNV5GzwAAAAP41r5q","url":"https://api.github.com/repos/rclone/rclone/issues/events/17059724906","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-31T15:46:30Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2767083999","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2767083999","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2767083999,"node_id":"IC_kwDOAQ-n5M6k7lnf","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-31T18:36:38Z","updated_at":"2025-03-31T18:36:38Z","body":"I'd like to see what rclone sent if possible - I think (but I'm not 100% sure) that the above is what onedrive sent. That will need `--dump bodies`. Thanks","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2767083999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17062556158,"node_id":"UE_lADOAQ-n5M6vNV5GzwAAAAP5AfH-","url":"https://api.github.com/repos/rclone/rclone/issues/events/17062556158","actor":{"login":"Baneeishaque","id":6133009,"node_id":"MDQ6VXNlcjYxMzMwMDk=","avatar_url":"https://avatars.githubusercontent.com/u/6133009?v=4","gravatar_id":"","url":"https://api.github.com/users/Baneeishaque","html_url":"https://github.com/Baneeishaque","followers_url":"https://api.github.com/users/Baneeishaque/followers","following_url":"https://api.github.com/users/Baneeishaque/following{/other_user}","gists_url":"https://api.github.com/users/Baneeishaque/gists{/gist_id}","starred_url":"https://api.github.com/users/Baneeishaque/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Baneeishaque/subscriptions","organizations_url":"https://api.github.com/users/Baneeishaque/orgs","repos_url":"https://api.github.com/users/Baneeishaque/repos","events_url":"https://api.github.com/users/Baneeishaque/events{/privacy}","received_events_url":"https://api.github.com/users/Baneeishaque/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unsubscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-31T19:10:33Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2769489554","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2769489554","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2769489554,"node_id":"IC_kwDOAQ-n5M6lEw6S","user":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-01T14:08:25Z","updated_at":"2025-04-01T14:10:50Z","body":"A full log is attached. I think the bit you're looking for is here:\n\n```\n2025/04/01 08:38:01 DEBUG : HTTP REQUEST (req 0xc000755180)\n2025/04/01 08:38:01 DEBUG : POST /v1.0/drives/b!RI7jTE_7VEWvQfQFOGxQOFg6zGE89vBPg_ISUx_CLGNzm-ky8cLeQrzJ6fhJvcxd/items/014TQUZBEF3KFB577R5NBYOXBGZ4XPB5MR/invite HTTP/1.1\nHost: graph.microsoft.com\nUser-Agent: ISV|Transend Corporation|TMCTools/1.0\nContent-Length: 109\nAuthorization: Bearer REDACTED\nContent-Type: application/json\nAccept-Encoding: gzip\n\n{\"recipients\":[{\"email\":\"reviewers@transendtesting.onmicrosoft.com\"}],\"requireSignIn\":true,\"roles\":[\"write\"]}\n2025/04/01 08:38:01 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n2025/04/01 08:38:01 INFO  : 2025/04/01 08:38:01 -          22 B / 22 B, 100%, 5 B/s, ETA 0s\n2025/04/01 08:38:03 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n2025/04/01 08:38:03 DEBUG : HTTP RESPONSE (req 0xc000755180)\n2025/04/01 08:38:03 DEBUG : HTTP/2.0 200 OK\nCache-Control: no-store, no-cache\nClient-Request-Id: 16529a50-207d-4857-9076-f775d96f256d\nContent-Type: application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8\nDate: Tue, 01 Apr 2025 13:38:02 GMT\nDeprecation: Fri, 03 Sep 2021 23:59:59 GMT\nLink: <https://developer.microsoft-tst.com/en-us/graph/changes?$filterby=v1.0,Removal&from=2021-09-01&to=2021-10-01>;rel=\"deprecation\";type=\"text/html\"\nLink: <https://developer.microsoft-tst.com/en-us/graph/changes?$filterby=v1.0,Removal&from=2021-09-01&to=2021-10-01>;rel=\"deprecation\";type=\"text/html\"\nLocation: https://graph.microsoft.com\nOdata-Version: 4.0\nRequest-Id: 16529a50-207d-4857-9076-f775d96f256d\nStrict-Transport-Security: max-age=31536000\nSunset: Sun, 01 Oct 2023 23:59:59 GMT\nVary: Accept-Encoding\nX-Ms-Ags-Diagnostic: {\"ServerInfo\":{\"DataCenter\":\"South Central US\",\"Slice\":\"E\",\"Ring\":\"5\",\"ScaleUnit\":\"000\",\"RoleInstance\":\"SA2PEPF00002E05\"}}\n\n{\"@odata.context\":\"https://graph.microsoft.com/v1.0/$metadata#Collection(microsoft.graph.permission)\",\"value\":[{\"id\":\"Yzowby5jfGZlZGVyYXRlZGRpcmVjdG9yeWNsYWltcHJvdmlkZXJ8ODVhZDY2ZTItYzJlYS00ZTMxLWEwNjQtMmU5NThlZGVjYzNm\",\"roles\":[\"write\"],\"grantedTo\":{\"user\":{\"email\":\"reviewers@transendtesting.onmicrosoft.com\",\"displayName\":\"Reviewers Members\"}}}]}\n```\n\nI believe what we are seeing was raised as an issue in https://learn.microsoft.com/en-us/answers/questions/1332382/microsoft-graph-api-drives-((drive-id))-items-((it, though I suspect `grantedTo`/`grantedToV2` in the response is more of a quirk than the problem. The Microsoft answer linking to further discussion on that point doesn't seem related to the problem. I think the actual issue is described in Ed Freeman's response:\n\n_In my case, I deduced that it was because the user/group I was trying to assign permissions already had permissions on the item through some other means._\n\nI think this is a bug on the Microsoft side, but the workaround of adding users before groups will help mitigate it, with no real downside I can think of. Presumably, there will still be cases that can be impacted, like groups that contain other groups.\n\n[chad@cdsconsulting.co.log](https://github.com/user-attachments/files/19551985/chad%40cdsconsulting.co.log)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2769489554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2770056921","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2770056921","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2770056921,"node_id":"IC_kwDOAQ-n5M6lG7bZ","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-01T17:10:56Z","updated_at":"2025-04-01T17:10:56Z","body":"Thanks for that. I think you are right the `grantedTo`/`grantedToV2` response is a quirk. I just checked the code and we don't actually use those returns for anything so I'm not too worried about it.\n\nI've just been through the log you sent.\n\nIt looks like the user was sent before the group even though the metadata mapper sent them the other way round.\n\n```\n2025/04/01 08:38:01 DEBUG : POST /v1.0/drives/b!RI7jTE_7VEWvQfQFOGxQOFg6zGE89vBPg_ISUx_CLGNzm-ky8cLeQrzJ6fhJvcxd/items/014TQUZBEF3KFB577R5NBYOXBGZ4XPB5MR/invite HTTP/1.1\nHost: graph.microsoft.com\nUser-Agent: ISV|Transend Corporation|TMCTools/1.0\nContent-Length: 106\nAuthorization: Bearer REDACTED\nContent-Type: application/json\nAccept-Encoding: gzip\n\n{\n  \"recipients\": [\n    {\n      \"email\": \"cuser2@transendtesting.onmicrosoft.com\"\n    }\n  ],\n  \"requireSignIn\": true,\n  \"roles\": [\n    \"write\"\n  ]\n}\n\n```\n\nis followed by\n\n```\n2025/04/01 08:38:01 DEBUG : POST /v1.0/drives/b!RI7jTE_7VEWvQfQFOGxQOFg6zGE89vBPg_ISUx_CLGNzm-ky8cLeQrzJ6fhJvcxd/items/014TQUZBEF3KFB577R5NBYOXBGZ4XPB5MR/invite HTTP/1.1\nHost: graph.microsoft.com\nUser-Agent: ISV|Transend Corporation|TMCTools/1.0\nContent-Length: 109\nAuthorization: Bearer REDACTED\nContent-Type: application/json\nAccept-Encoding: gzip\n\n{\n  \"recipients\": [\n    {\n      \"email\": \"reviewers@transendtesting.onmicrosoft.com\"\n    }\n  ],\n  \"requireSignIn\": true,\n  \"roles\": [\n    \"write\"\n  ]\n}\n```\n\nSo in this case the new code appears to have done its job.\n\nBoth the  users are visible in the final output\n\n<details><summary>Final output</summary>\n```json\n{\n  \"@odata.context\": \"https://graph.microsoft.com/v1.0/$metadata#drives('b%21RI7jTE_7VEWvQfQFOGxQOFg6zGE89vBPg_ISUx_CLGNzm-ky8cLeQrzJ6fhJvcxd')/items('014TQUZBEF3KFB577R5NBYOXBGZ4XPB5MR')/permissions\",\n  \"value\": [\n    {\n      \"id\": \"aTowIy5mfG1lbWJlcnNoaXB8Y3VzZXIyQHRyYW5zZW5kdGVzdGluZy5vbm1pY3Jvc29mdC5jb20\",\n      \"roles\": [\n        \"write\"\n      ],\n      \"shareId\": \"aTowIy5mfG1lbWJlcnNoaXB8Y3VzZXIyQHRyYW5zZW5kdGVzdGluZy5vbm1pY3Jvc29mdC5jb20\",\n      \"grantedToV2\": {\n        \"user\": {\n          \"@odata.type\": \"#microsoft.graph.sharePointIdentity\",\n          \"displayName\": \"Cloud User2\",\n          \"email\": \"cuser2@transendtesting.onmicrosoft.com\",\n          \"id\": \"57c26025-316f-4a71-a464-bf3adb0a6ac4\"\n        },\n        \"siteUser\": {\n          \"displayName\": \"Cloud User2\",\n          \"email\": \"cuser2@transendtesting.onmicrosoft.com\",\n          \"id\": \"7\",\n          \"loginName\": \"i:0#.f|membership|cuser2@transendtesting.onmicrosoft.com\"\n        }\n      },\n      \"grantedTo\": {\n        \"user\": {\n          \"displayName\": \"Cloud User2\",\n          \"email\": \"cuser2@transendtesting.onmicrosoft.com\",\n          \"id\": \"57c26025-316f-4a71-a464-bf3adb0a6ac4\"\n        }\n      }\n    },\n    {\n      \"id\": \"Yzowby5jfGZlZGVyYXRlZGRpcmVjdG9yeWNsYWltcHJvdmlkZXJ8ODVhZDY2ZTItYzJlYS00ZTMxLWEwNjQtMmU5NThlZGVjYzNm\",\n      \"roles\": [\n        \"write\"\n      ],\n      \"shareId\": \"Yzowby5jfGZlZGVyYXRlZGRpcmVjdG9yeWNsYWltcHJvdmlkZXJ8ODVhZDY2ZTItYzJlYS00ZTMxLWEwNjQtMmU5NThlZGVjYzNm\",\n      \"grantedToV2\": {\n        \"group\": {\n          \"@odata.type\": \"#microsoft.graph.sharePointIdentity\",\n          \"displayName\": \"Reviewers Members\",\n          \"email\": \"reviewers@transendtesting.onmicrosoft.com\",\n          \"id\": \"85ad66e2-c2ea-4e31-a064-2e958edecc3f\"\n        },\n        \"siteUser\": {\n          \"displayName\": \"Reviewers Members\",\n          \"email\": \"reviewers@transendtesting.onmicrosoft.com\",\n          \"id\": \"8\",\n          \"loginName\": \"c:0o.c|federateddirectoryclaimprovider|85ad66e2-c2ea-4e31-a064-2e958edecc3f\"\n        }\n      },\n      \"grantedTo\": {\n        \"user\": {\n          \"displayName\": \"Reviewers Members\",\n          \"email\": \"reviewers@transendtesting.onmicrosoft.com\",\n          \"id\": \"85ad66e2-c2ea-4e31-a064-2e958edecc3f\"\n        }\n      }\n    },\n    {\n      \"id\": \"aTowIy5mfG1lbWJlcnNoaXB8Y3VzZXIxQHRyYW5zZW5kdGVzdGluZy5vbm1pY3Jvc29mdC5jb20\",\n      \"roles\": [\n        \"owner\"\n      ],\n      \"shareId\": \"aTowIy5mfG1lbWJlcnNoaXB8Y3VzZXIxQHRyYW5zZW5kdGVzdGluZy5vbm1pY3Jvc29mdC5jb20\",\n      \"grantedToV2\": {\n        \"user\": {\n          \"@odata.type\": \"#microsoft.graph.sharePointIdentity\",\n          \"displayName\": \"Cloud User1\",\n          \"email\": \"cuser1@transendtesting.onmicrosoft.com\",\n          \"id\": \"e05ce5e6-bd01-4a63-981f-23719dc7e625\"\n        },\n        \"siteUser\": {\n          \"displayName\": \"Cloud User1\",\n          \"email\": \"cuser1@transendtesting.onmicrosoft.com\",\n          \"id\": \"3\",\n          \"loginName\": \"i:0#.f|membership|cuser1@transendtesting.onmicrosoft.com\"\n        }\n      },\n      \"grantedTo\": {\n        \"user\": {\n          \"displayName\": \"Cloud User1\",\n          \"email\": \"cuser1@transendtesting.onmicrosoft.com\",\n          \"id\": \"e05ce5e6-bd01-4a63-981f-23719dc7e625\"\n        }\n      }\n    }\n  ]\n}\n```\n<p>\n\n\n\n</p>\n</details> \n\nWhat do you think @chscott did the new code work OK in this circumstance? If so why didn't it work above?  \n\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2770056921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17079299774,"node_id":"MEE_lADOAQ-n5M6vNV5GzwAAAAP6AW6-","url":"https://api.github.com/repos/rclone/rclone/issues/events/17079299774","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-04-01T17:10:58Z","performed_via_github_app":null},{"id":17079299847,"node_id":"SE_lADOAQ-n5M6vNV5GzwAAAAP6AW8H","url":"https://api.github.com/repos/rclone/rclone/issues/events/17079299847","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-04-01T17:10:58Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2779213948","html_url":"https://github.com/rclone/rclone/issues/8465#issuecomment-2779213948","issue_url":"https://api.github.com/repos/rclone/rclone/issues/8465","id":2779213948,"node_id":"IC_kwDOAQ-n5M6lp3B8","user":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-04T16:17:41Z","updated_at":"2025-04-04T16:17:41Z","body":"In the most recent test, I was only trying to get the requests and responses, so I didn't back out my code change to return the permissions to Rclone in sorted (users, then groups) order. When I remove that change, the results I get are as in https://github.com/rclone/rclone/issues/8465#issuecomment-2754568055.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2779213948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false}}]