[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1201300163","html_url":"https://github.com/rclone/rclone/issues/6351#issuecomment-1201300163","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6351","id":1201300163,"node_id":"IC_kwDOAQ-n5M5HmmLD","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-01T14:44:43Z","updated_at":"2022-08-01T14:44:43Z","body":"Is the problem with the shell escaping to call the md5sum command?\r\n\r\n    drive/tmp/test ... test ... test.mp4: Failed to calculate dst hash: failed to calculate md5 hash: failed to run \"md5sum /drive/tmp/test\\\\ ...\\\\ test\\\\ ...\\\\ test.mp4\": hash failed: hash type not supported: Process exited with status 1\r\n\r\n`rclone serve` has its own internal implementation of md5sum so maybe it is decoding the shell escaping incorrectly on Windows.\r\n\r\n@albertony what do you think?\r\n\r\n@Forum1877621 it would be very helpful if you could show the exact rclone commands you are using and the rclone config with secrets redacted - thanks.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1201300163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7102269704,"node_id":"MEE_lADOAQ-n5M5O48xTzwAAAAGnVAkI","url":"https://api.github.com/repos/rclone/rclone/issues/events/7102269704","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-08-01T14:44:43Z","performed_via_github_app":null},{"id":7102269713,"node_id":"SE_lADOAQ-n5M5O48xTzwAAAAGnVAkR","url":"https://api.github.com/repos/rclone/rclone/issues/events/7102269713","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-08-01T14:44:43Z","performed_via_github_app":null},{"id":7102269727,"node_id":"MEE_lADOAQ-n5M5O48xTzwAAAAGnVAkf","url":"https://api.github.com/repos/rclone/rclone/issues/events/7102269727","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-08-01T14:44:43Z","performed_via_github_app":null},{"id":7102269734,"node_id":"SE_lADOAQ-n5M5O48xTzwAAAAGnVAkm","url":"https://api.github.com/repos/rclone/rclone/issues/events/7102269734","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-08-01T14:44:43Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1201408640","html_url":"https://github.com/rclone/rclone/issues/6351#issuecomment-1201408640","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6351","id":1201408640,"node_id":"IC_kwDOAQ-n5M5HnAqA","user":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-01T16:11:05Z","updated_at":"2022-08-01T16:11:05Z","body":"@ncw: Yeah, that path looks strange: `test\\\\ ...\\\\ test\\\\ ...\\\\ test.mp4`. I think the double `\\\\` is simply the log message formatting it with `%q` (and not `%s` or `%v`, which I think would be better in many cases, and instead surround with quotes manually). Then what remains is backslash escaped space characters. That is not very Windows-y... And sure enough, if I test with `--sftp-shell-type=unix` I get similar problem. So rclone is treating the server as having \"Unix shell\". \r\n\r\n@Forum1877621: How is the config of the sftp remote in rclone, especially the `shell_type` option? It will be auto-detected on first use of the remote and saved back to config file, but if the detection fails it will default to `unix` and you will have to manually fix this. You can test overriding it temporarily by adding `--sftp-shell-type=cmd` (or `--sftp-shell-type=powershell` if your sftp server is configured with PowerShell instead) to your rclone command. If this is the case, i.e. the auto-detection failed, it would be interesting to see a debug log from it: Remove any `shell_type` option from your remote config, or create a brand new remote for testing, and run a simple command with verbose logging, e.g. `rclone about yoursftpremote: -vv`","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1201408640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7102962426,"node_id":"MEE_lADOAQ-n5M5O48xTzwAAAAGnXpr6","url":"https://api.github.com/repos/rclone/rclone/issues/events/7102962426","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-08-01T16:11:05Z","performed_via_github_app":null},{"id":7102962437,"node_id":"SE_lADOAQ-n5M5O48xTzwAAAAGnXpsF","url":"https://api.github.com/repos/rclone/rclone/issues/events/7102962437","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-08-01T16:11:05Z","performed_via_github_app":null},{"id":7102962444,"node_id":"MEE_lADOAQ-n5M5O48xTzwAAAAGnXpsM","url":"https://api.github.com/repos/rclone/rclone/issues/events/7102962444","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-08-01T16:11:05Z","performed_via_github_app":null},{"id":7102962454,"node_id":"SE_lADOAQ-n5M5O48xTzwAAAAGnXpsW","url":"https://api.github.com/repos/rclone/rclone/issues/events/7102962454","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-08-01T16:11:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1201753348","html_url":"https://github.com/rclone/rclone/issues/6351#issuecomment-1201753348","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6351","id":1201753348,"node_id":"IC_kwDOAQ-n5M5HoU0E","user":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-01T21:43:01Z","updated_at":"2022-08-01T21:43:01Z","body":"**Important note: I've only noticed this problem when serving a crypt (with any file encoding)**\r\n\r\n@albertony\r\n\r\nI think the autodetection might be broken on windows. On both of my Windows computers the shell_type gets set to unix.\r\n\r\n```\r\n[test]\r\ntype = sftp\r\nhost = 192.168.2.50\r\nuser = my-user\r\nport = 54321\r\npass = some-password\r\nmd5sum_command = md5sum\r\nsha1sum_command = sha1sum\r\nshell_type = unix\r\n```\r\n\r\nrclone about doesn't seem to work\r\n\r\n```\r\n...\\rclone>rclone.exe about test -vv\r\n2022/08/01 17:13:25 DEBUG : rclone: Version \"v1.59.0\" starting with parameters [\"rclone.exe\" \"about\" \"test\" \"-vv\"]\r\n2022/08/01 17:13:25 DEBUG : Creating backend with remote \"test\"\r\n2022/08/01 17:13:25 DEBUG : Using config file from \"C:\\\\Users\\\\...\\\\AppData\\\\Roaming\\\\rclone\\\\rclone.conf\"\r\n2022/08/01 17:13:25 DEBUG : fs cache: renaming cache item \"test\" to be canonical \"//?/D:/some/path/some/rclone/test\"\r\n2022/08/01 17:13:25 DEBUG : 2 go routines active\r\n2022/08/01 17:13:25 Failed to about: about call failed: failed to read disk usage: The system cannot find the path specified.\r\n```\r\n\r\nIf I delete the shell_type line and run a command like so:\r\n\r\n```\r\n...\\rclone>rclone.exe -v --stats=5s mount test:/ \"path\\test\" --cache-dir=\"E:\\vfs\" --vfs-cache-mode=writes --vfs-cache-max-size=10000M --vfs-cache-max-age=72h\r\n2022/08/01 17:09:34 INFO  : sftp://my-user@192.168.2.51:54321//: poll-interval is not supported by this remote\r\n2022/08/01 17:09:34 INFO  : vfs cache: cleaned: objects 0 (was 0) in use 0, to upload 0, uploading 0, total size 0 (was 0)\r\n2022/08/01 17:09:34 ERROR : sftp://my-user@192.168.2.51:54321//: Statfs failed: your remote may not have the required df utility: failed to run \"df -k /\": about failed: failed to read disk usage: The system cannot find the path specified.: Process exited with status 1\r\nThe service rclone has been started.\r\n```\r\n\r\nthe shell_type gets set to unix again, not cmd.\r\n\r\nI tested copying file with periods when shell_type is cmd but I get the same error\r\n\r\n@ncw \r\n\r\nconfig is above\r\n\r\nCommands\r\n\r\nWindows PC 1: make a crypt\r\n\r\n```\r\n[my-crypt]\r\ntype = crypt\r\nremote = E:\\some-folder\r\npassword = a\r\npassword2 = b\r\nfilename_encoding = base64\r\n```\r\n\r\nWindows PC 1: rclone.exe -vv --stats=5s serve sftp my-crypt:/ --user=user-1 --pass=password-1 --addr=:54321\r\n\r\nWindows PC 2: rclone.exe -vv --stats=5s --file-perms=0777 mount the-crypt:/ \"...\\test-mount-point\"\r\n\r\nThen, on PC 2 copy \"test ... test ... test.mp4\" to the mounted folder and look at the console output. You should see the error.\r\n\r\n\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1201753348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7105094879,"node_id":"MEE_lADOAQ-n5M5O48xTzwAAAAGnfyTf","url":"https://api.github.com/repos/rclone/rclone/issues/events/7105094879","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-08-01T21:43:01Z","performed_via_github_app":null},{"id":7105094885,"node_id":"SE_lADOAQ-n5M5O48xTzwAAAAGnfyTl","url":"https://api.github.com/repos/rclone/rclone/issues/events/7105094885","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-08-01T21:43:01Z","performed_via_github_app":null},{"id":7105094890,"node_id":"MEE_lADOAQ-n5M5O48xTzwAAAAGnfyTq","url":"https://api.github.com/repos/rclone/rclone/issues/events/7105094890","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-08-01T21:43:01Z","performed_via_github_app":null},{"id":7105094895,"node_id":"SE_lADOAQ-n5M5O48xTzwAAAAGnfyTv","url":"https://api.github.com/repos/rclone/rclone/issues/events/7105094895","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-08-01T21:43:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1202071625","html_url":"https://github.com/rclone/rclone/issues/6351#issuecomment-1202071625","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6351","id":1202071625,"node_id":"IC_kwDOAQ-n5M5HpihJ","user":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-02T06:28:39Z","updated_at":"2022-08-02T06:28:39Z","body":"@Forum1877621 Thanks for testing.\r\n\r\n> rclone about doesn't seem to work\r\n> ...\\rclone>rclone.exe about test -vv\r\n\r\nIt seems you forgot a `:` following your remote name in your command in this test, it should be:\r\n\r\n```\r\n...\\rclone>rclone.exe about test: -vv\r\n```\r\n\r\n> If I delete the shell_type line and run a command like so:\r\n> ...\\rclone>rclone.exe -v --stats=5s mount ...\r\n\r\nCould you please show the debug log in this test, i.e. double up to `-vv`. If you remove the shell_type option and run the next (any) command with `-vv` it should print the output of the shell detection code as debug messages. That will be really interesting to see.\r\n\r\n> I think the autodetection might be broken on windows.\r\n\r\nIn any case you can configure it yourself. It is under advanced config, so when you set up your remote with `rclone config` you will have to answer `y` on the question to set advanced options. The auto detection done by default was never bullet proof and meant more as a convenience feature that would work for most users. I would really like to see why it fails in your case, though.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1202071625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7106999298,"node_id":"MEE_lADOAQ-n5M5O48xTzwAAAAGnnDQC","url":"https://api.github.com/repos/rclone/rclone/issues/events/7106999298","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-08-02T06:28:39Z","performed_via_github_app":null},{"id":7106999305,"node_id":"SE_lADOAQ-n5M5O48xTzwAAAAGnnDQJ","url":"https://api.github.com/repos/rclone/rclone/issues/events/7106999305","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-08-02T06:28:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1202681124","html_url":"https://github.com/rclone/rclone/issues/6351#issuecomment-1202681124","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6351","id":1202681124,"node_id":"IC_kwDOAQ-n5M5Hr3Uk","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-02T14:22:11Z","updated_at":"2022-08-02T14:22:11Z","body":"@Forum1877621 what is the sftp server? is it `rclone serve sftp`?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1202681124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7110469536,"node_id":"MEE_lADOAQ-n5M5O48xTzwAAAAGn0Seg","url":"https://api.github.com/repos/rclone/rclone/issues/events/7110469536","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-08-02T14:22:11Z","performed_via_github_app":null},{"id":7110469542,"node_id":"SE_lADOAQ-n5M5O48xTzwAAAAGn0Sem","url":"https://api.github.com/repos/rclone/rclone/issues/events/7110469542","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-08-02T14:22:11Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1203190360","html_url":"https://github.com/rclone/rclone/issues/6351#issuecomment-1203190360","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6351","id":1203190360,"node_id":"IC_kwDOAQ-n5M5HtzpY","user":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-02T20:37:02Z","updated_at":"2022-08-02T20:37:02Z","body":"@ncw yes\r\n\r\nrclone.exe -vv --stats=5s serve sftp my-crypt:/ --user=user-1 --pass=password-1 --addr=:54321","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1203190360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7113246579,"node_id":"MEE_lADOAQ-n5M5O48xTzwAAAAGn-4dz","url":"https://api.github.com/repos/rclone/rclone/issues/events/7113246579","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-08-02T20:37:02Z","performed_via_github_app":null},{"id":7113246593,"node_id":"SE_lADOAQ-n5M5O48xTzwAAAAGn-4eB","url":"https://api.github.com/repos/rclone/rclone/issues/events/7113246593","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-08-02T20:37:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1203232480","html_url":"https://github.com/rclone/rclone/issues/6351#issuecomment-1203232480","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6351","id":1203232480,"node_id":"IC_kwDOAQ-n5M5Ht97g","user":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-02T21:29:17Z","updated_at":"2022-08-02T21:29:17Z","body":"Aha, that is relevant information, I didn't catch that...\r\n\r\nThe `serve sftp` (\"rclone server\") is treated as a unix shell by the sftp backend (\"rclone client\"), regardless what it is running on (Windows or Linux), because it has code that detects typical unix commands such as `df` and `md5sum` and returns proper result for them without actually executing the corresponding commands. It also has code to \"unescape\" unix shell style escaping, i.e. backslash escapes. So `shell_type = unix` should be correct after all. But for some reason the escaping and/or unescaping trips up on something. Did a simple test locally, paths with spaces, periods etc, and that worked fine. I will run some more tests tomorrow, but in any case debug log output (`-vv`) from your original case would still be beneficial, if possible from both sides so that we can try to track how the escaping and unescaping is being done.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1203232480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1203391856","html_url":"https://github.com/rclone/rclone/issues/6351#issuecomment-1203391856","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6351","id":1203391856,"node_id":"IC_kwDOAQ-n5M5Huk1w","user":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-03T01:49:18Z","updated_at":"2022-08-03T01:49:18Z","body":"@albertony \r\n\r\nI removed the shell_type again and ran the following command\r\n\r\n`rclone.exe -vv about some-sftp:`\r\n\r\nHere's the output\r\n\r\n```\r\n...rclone...\\>rclone.exe -vv about some-sftp:\r\n2022/08/02 21:43:53 DEBUG : rclone: Version \"v1.59.0\" starting with parameters [\"rclone.exe\" \"-vv\" \"about\" \"some-sftp:\"]\r\n2022/08/02 21:43:53 DEBUG : Creating backend with remote \"some-sftp:\"\r\n2022/08/02 21:43:53 DEBUG : Using config file from \"----\\\\Roaming\\\\rclone\\\\rclone.conf\"\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: New connection 192.168.2.49:8023->192.168.2.50:54321 to \"SSH-2.0-rclone/v1.59.0\"\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: Running shell type detection remote command: echo ${ShellId}%ComSpec%\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: Remote command result: ${ShellId}%ComSpec%\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: Shell type \"unix\" detected (set option shell_type to override)\r\n2022/08/02 21:43:53 DEBUG : Saving config \"shell_type\" in section \"some-sftp\" of the config file\r\n2022/08/02 21:43:53 DEBUG : Keeping previous permissions for config file: -rw-rw-rw-\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: Relative path resolved to \"/\"\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: Using root directory \"/\"\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: Server has VFS statistics extension\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: About path \"/\"\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: Failed to retrieve VFS statistics, trying shell command instead: sftp: \"operation unsupported\" (SSH_FX_OP_UNSUPPORTED)\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: Shell path \"/\"\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: About path \"/\"\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: About using shell command for shell type \"unix\"\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: Running remote command: df -k /\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: About shell command for shell type \"unix\" failed (set option shell_type to override): failed to run \"df -k /\": about failed: failed to read disk usage: The system cannot find the path specified.: Process exited with status 1\r\n2022/08/02 21:43:53 DEBUG : 12 go routines active\r\n2022/08/02 21:43:53 DEBUG : sftp://user@192.168.2.50:54321/: Closing 1 unused connections\r\n2022/08/02 21:43:53 Failed to about: about call failed: your remote may not have the required df utility: failed to run \"df -k /\": about failed: failed to read disk usage: The system cannot find the path specified.: Process exited with status 1\r\n```\r\n\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1203391856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7114722571,"node_id":"MEE_lADOAQ-n5M5O48xTzwAAAAGoEg0L","url":"https://api.github.com/repos/rclone/rclone/issues/events/7114722571","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-08-03T01:49:18Z","performed_via_github_app":null},{"id":7114722575,"node_id":"SE_lADOAQ-n5M5O48xTzwAAAAGoEg0P","url":"https://api.github.com/repos/rclone/rclone/issues/events/7114722575","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-08-03T01:49:18Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1203398851","html_url":"https://github.com/rclone/rclone/issues/6351#issuecomment-1203398851","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6351","id":1203398851,"node_id":"IC_kwDOAQ-n5M5HumjD","user":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-03T02:04:19Z","updated_at":"2022-08-03T02:04:19Z","body":"> But for some reason the escaping and/or unescaping trips up on something. Did a simple test locally, paths with spaces, periods etc, and that worked fine. \r\n\r\nI haven't had any problems with local files and periods. I also haven't had problems serving a normal folder over SFTP. I've only seen the problem when serving a crypt. Try to serve a crypt over SFTP and on another computer copy a video with periods in the file name to the crypt. If you look at the log output you should see errors.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1203398851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Forum1877621","id":109703756,"node_id":"U_kgDOBonyTA","avatar_url":"https://avatars.githubusercontent.com/u/109703756?v=4","gravatar_id":"","url":"https://api.github.com/users/Forum1877621","html_url":"https://github.com/Forum1877621","followers_url":"https://api.github.com/users/Forum1877621/followers","following_url":"https://api.github.com/users/Forum1877621/following{/other_user}","gists_url":"https://api.github.com/users/Forum1877621/gists{/gist_id}","starred_url":"https://api.github.com/users/Forum1877621/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Forum1877621/subscriptions","organizations_url":"https://api.github.com/users/Forum1877621/orgs","repos_url":"https://api.github.com/users/Forum1877621/repos","events_url":"https://api.github.com/users/Forum1877621/events{/privacy}","received_events_url":"https://api.github.com/users/Forum1877621/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1203668592","html_url":"https://github.com/rclone/rclone/issues/6351#issuecomment-1203668592","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6351","id":1203668592,"node_id":"IC_kwDOAQ-n5M5HvoZw","user":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-03T08:51:14Z","updated_at":"2022-08-03T19:54:09Z","body":"Right. I reproduced it now.\r\n\r\nDon't think it is related to shell escaping.\r\n\r\nEdit: Ran extra test with simple filenames, and that confirmes (at least my reproduced issue) has nothing to do with file names - it seems to simply have to do with the combination of serve (sftp) and crypt.\r\n\r\n```\r\n2022/08/03 21:51:55 ERROR : ccache.exe: Failed to calculate dst hash: failed to calculate md5 hash: failed to run \"md5sum /ccache.exe\": hash failed: hash type not supported: Process exited with status 1\r\n2022/08/03 21:51:55 ERROR : ccache.exe: corrupted on transfer: md5 hash differ \"2e0e276e09b42612e22e154f646027f7\" vs \"\"\r\n2022/08/03 21:51:55 INFO  : ccache.exe: Removing failed copy\r\n```\r\n\r\nWhen serving a crypt remote, the serve(r) returns \"hash type not supported\" from here:\r\nhttps://github.com/rclone/rclone/blob/3a8e52de74e81f499f44a47a937552378d5bc83b/backend/crypt/crypt.go#L904\r\n\r\nCalled from here:\r\nhttps://github.com/rclone/rclone/blob/3a8e52de74e81f499f44a47a937552378d5bc83b/cmd/serve/sftp/connection.go#L125\r\n\r\nWill have to dig deeper into it later. Perhaps @ncw in the mean time sees ...  ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1203668592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false}}]