{"url":"https://api.github.com/repos/rclone/rclone/issues/8359","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/8359/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/8359/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/8359/events","html_url":"https://github.com/rclone/rclone/issues/8359","id":2827958329,"node_id":"I_kwDOAQ-n5M6ojzg5","number":8359,"title":"bisync: modtime of latest/updated file gets changed matching modtime of the previous revision","user":{"login":"TheWhiteBug","id":54198648,"node_id":"MDQ6VXNlcjU0MTk4NjQ4","avatar_url":"https://avatars.githubusercontent.com/u/54198648?v=4","gravatar_id":"","url":"https://api.github.com/users/TheWhiteBug","html_url":"https://github.com/TheWhiteBug","followers_url":"https://api.github.com/users/TheWhiteBug/followers","following_url":"https://api.github.com/users/TheWhiteBug/following{/other_user}","gists_url":"https://api.github.com/users/TheWhiteBug/gists{/gist_id}","starred_url":"https://api.github.com/users/TheWhiteBug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheWhiteBug/subscriptions","organizations_url":"https://api.github.com/users/TheWhiteBug/orgs","repos_url":"https://api.github.com/users/TheWhiteBug/repos","events_url":"https://api.github.com/users/TheWhiteBug/events{/privacy}","received_events_url":"https://api.github.com/users/TheWhiteBug/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":2482161914,"node_id":"MDU6TGFiZWwyNDgyMTYxOTE0","url":"https://api.github.com/repos/rclone/rclone/labels/needs%20retest","name":"needs retest","color":"006b75","default":false,"description":""},{"id":3427818774,"node_id":"LA_kwDOAQ-n5M7MUF0W","url":"https://api.github.com/repos/rclone/rclone/labels/bisync","name":"bisync","color":"1D76DB","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/11","html_url":"https://github.com/rclone/rclone/milestone/11","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/11/labels","id":1480382,"node_id":"MDk6TWlsZXN0b25lMTQ4MDM4Mg==","number":11,"title":"Soon","description":"Issues which are a good idea but haven't been assigned a specific release yet.","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":75,"closed_issues":94,"state":"open","created_at":"2016-01-02T12:56:46Z","updated_at":"2025-10-12T21:14:16Z","due_on":null,"closed_at":null},"comments":11,"created_at":"2025-02-03T16:16:21Z","updated_at":"2025-02-11T11:21:55Z","closed_at":"2025-02-11T11:21:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What is the problem you are having with rclone?\n\nUsing `bisync`, where the remote is Synology NAS SFTP, the modification time of file downloaded file is sometimes not updated properly on one of the nodes and eventually the \"old\" modtime gets propagated to all the nodes.\n\nNote that the content / checksum of the file is correctly propagated as expected. The confusion comes from the fact that the modtime of the file ends up being the date of the previous revision of the file, and that is propagated to all the nodes.\n\nAfter spending some time on this, I got back to a working behavior by changing the pattern to prevent pulling any conflict files and removing rclone generated conflict files on all my nodes. In other words, the bisync pattern I used was pulling conflict files wich would themselves conflict with other conflict files from other nodes. I didn't care much about those files as I could confirm the main file(s) were ok.\n\nHowever, my understanding of the problem is that those conflicts would somehow interfere with the bisync operation in a way that made the moditfication time not be updated while the content of the file was.\n\nI understand that bisync is in beta and I'm happy to report that the feature is useful to me.\n\n```\n# on amd64 Linux (Ubuntu)\n$ stat ~/REDACTED\n  File: /home/XXX/REDACTED\n  Size: 98584     \tBlocks: 200        IO Block: 4096   regular file\nDevice: 252,1\tInode: 16664833    Links: 1\nAccess: (0664/-rw-rw-r--)  Uid: ( 1000/REDACTED)   Gid: ( 1000/REDACTED)\nAccess: 2025-02-03 01:50:02.254891607 -0500\nModify: 2025-01-31 23:57:40.000000000 -0500\nChange: 2025-02-03 01:35:01.522276874 -0500\n Birth: 2025-02-03 01:35:01.503276785 -0500\n```\n\n```\n# in termux (Android)\n$ stat ~/REDACTED\n  File: /data/data/com.termux/files/home/XXX/REDACTED\n  Size: 98584     \tBlocks: 200        IO Block: 4096   regular file\nDevice: 0,201\tInode: 83456       Links: 1\nAccess: (0660/-rw-rw----)  Uid: (10275/ u0_a275)   Gid: ( 1023/media_rw)\nContext: u:object_r:fuse:s0\nAccess: 2025-02-03 00:38:52.000000000 -0500\nModify: 2025-01-31 23:57:40.483101109 -0500\nChange: 2025-02-03 01:23:57.860059979 -0500\n Birth: -\n```\n\n#### What is your rclone version (output from `rclone version`)\n\n```\nrclone v1.69.0-termux\n- os/version: unknown\n- os/kernel: 5.15.123-android13-8-00033-g39606e3309fc-ab10974680 (aarch64)\n- os/type: android\n- os/arch: arm64 (ARMv8 compatible)\n- go/version: go1.23.4\n- go/linking: dynamic\n- go/tags: noselfupdate\n```\n\nNote: I also use amd64 Linux clients. The client above was the one I notice that did not set proper modtime to the downloaded file. That bogus modtime somehow got propagated back.\n\n#### Which OS you are using and how many bits (e.g. Windows 7, 64 bit)\n\narm64 Android, amd64 Linux\n\n#### Which cloud storage system are you using? (e.g. Google Drive)\n\nSFTP (Synology NAS)\n\n#### The command you were trying to run (e.g. `rclone copy /tmp remote:tmp`)\n\n```\nrclone bisync REDACTED:PATH /data/data/com.termux/files/home/REDACTED --include /REDACTED* --compare size,modtime,checksum --resilient --recover --max-lock 2m --conflict-resolve newer --verbose\n```\nconfig:\n```\n[REDACTED]\ntype = sftp\nhost = REDACTED\nuser = REDACTED\nport = REDACTED\npass = REDACTED\npath_override = /volume1/\ndescription = REDACTED\nshell_type = unix\nmd5sum_command = none\nsha1sum_command = none\n```\n\n#### A log from the command with the `-vv` flag (e.g. output from `rclone -vv copy /tmp remote:tmp`)\n\nI think I provided above insightful information on the problem. If you feel however you still need my help to reproduce the issue, I will take the time top reproduce the issue, this time with the log level you request as it seemed I could reproduce  the issue systematically.\n\n#### How to use GitHub\n\n* Please use the üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to show that you are affected by the same issue.\n* Please don't comment if you have no relevant information to add. It's just extra noise for everyone subscribed to this issue.\n* Subscribe to receive notifications on status change and new comments.\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/8359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/8359/timeline","performed_via_github_app":null,"state_reason":"completed"}