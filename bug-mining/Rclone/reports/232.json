{"url":"https://api.github.com/repos/rclone/rclone/issues/874","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/874/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/874/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/874/events","html_url":"https://github.com/rclone/rclone/issues/874","id":188959628,"node_id":"MDU6SXNzdWUxODg5NTk2Mjg=","number":874,"title":"WriteFileHandle.Flush error for Amazon Cloud Drive write attempts ","user":{"login":"thechile","id":3511504,"node_id":"MDQ6VXNlcjM1MTE1MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3511504?v=4","gravatar_id":"","url":"https://api.github.com/users/thechile","html_url":"https://github.com/thechile","followers_url":"https://api.github.com/users/thechile/followers","following_url":"https://api.github.com/users/thechile/following{/other_user}","gists_url":"https://api.github.com/users/thechile/gists{/gist_id}","starred_url":"https://api.github.com/users/thechile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thechile/subscriptions","organizations_url":"https://api.github.com/users/thechile/orgs","repos_url":"https://api.github.com/users/thechile/repos","events_url":"https://api.github.com/users/thechile/events{/privacy}","received_events_url":"https://api.github.com/users/thechile/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399007,"node_id":"MDU6TGFiZWw4NjM5OTAwNw==","url":"https://api.github.com/repos/rclone/rclone/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null},{"id":306062657,"node_id":"MDU6TGFiZWwzMDYwNjI2NTc=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Amazon%20Cloud%20Drive","name":"Remote: Amazon Cloud Drive","color":"fbca04","default":false,"description":null},{"id":430778096,"node_id":"MDU6TGFiZWw0MzA3NzgwOTY=","url":"https://api.github.com/repos/rclone/rclone/labels/VFS%20/%20mount","name":"VFS / mount","color":"0e8a16","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/22","html_url":"https://github.com/rclone/rclone/milestone/22","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/22/labels","id":1962877,"node_id":"MDk6TWlsZXN0b25lMTk2Mjg3Nw==","number":22,"title":"v1.35","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":23,"state":"closed","created_at":"2016-08-25T12:45:49Z","updated_at":"2017-01-03T21:05:16Z","due_on":"2016-12-11T08:00:00Z","closed_at":"2017-01-03T21:05:16Z"},"comments":6,"created_at":"2016-11-13T08:51:37Z","updated_at":"2016-11-19T10:58:00Z","closed_at":"2016-11-19T10:58:00Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi,\r\n\r\nI was trying to write to a acd mount point and kept getting the following type of errors `WriteFileHandle.Flush error: Post https://content-eu.drive.amazonaws.com/cdproxy/nodes?suppress=deduplication: http: ContentLength=486 with Body length 57546611`. I found https://github.com/ncw/rclone/issues/813 which explained the problem as \r\n\r\n> This is because Amazon need to know the size of the file in advance for the upload, but we don't know it until the end.\r\n\r\nCan you explain this problem in some more detail please because i also read https://github.com/ncw/rclone/issues/669 which seems to suggest that the file size isn't required in advance. \r\n\r\nLooking through the acd API documentation it does mention [here](https://developer.amazon.com/public/apis/experience/cloud-drive/content/restful-api-getting-started) that the size **is** required.\r\n\r\n> Content-Length\tSpecifies the length of the message in the body; without the headers. This is a required parameter when the body of the request in not empty.\r\n\r\nFingers crossed that write support is possible on `mount` to allow use of common tools/scripts to shift data into acd like `cp` or `rsync` etc..\r\n\r\nOut of curiosity... in the fuse code when you receive the request would it not be possible to use the target file name that your about to create/write via rclone and scan the associated local source path for the matching file and stat the file size to fulfill acd requirement to specify size on upload ? Or is that a bit willy wonka thinking ?\r\n\r\nGreat project, thanks for all your hard work. \r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/874/timeline","performed_via_github_app":null,"state_reason":"completed"}