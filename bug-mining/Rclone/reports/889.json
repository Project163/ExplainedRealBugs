{"url":"https://api.github.com/repos/rclone/rclone/issues/4819","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/4819/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/4819/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/4819/events","html_url":"https://github.com/rclone/rclone/issues/4819","id":753071841,"node_id":"MDU6SXNzdWU3NTMwNzE4NDE=","number":4819,"title":"409 Error when RClone Sync --delete-before to Azure Blob Archive-Tier","user":{"login":"GoingOffRoading","id":4582826,"node_id":"MDQ6VXNlcjQ1ODI4MjY=","avatar_url":"https://avatars.githubusercontent.com/u/4582826?v=4","gravatar_id":"","url":"https://api.github.com/users/GoingOffRoading","html_url":"https://github.com/GoingOffRoading","followers_url":"https://api.github.com/users/GoingOffRoading/followers","following_url":"https://api.github.com/users/GoingOffRoading/following{/other_user}","gists_url":"https://api.github.com/users/GoingOffRoading/gists{/gist_id}","starred_url":"https://api.github.com/users/GoingOffRoading/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GoingOffRoading/subscriptions","organizations_url":"https://api.github.com/users/GoingOffRoading/orgs","repos_url":"https://api.github.com/users/GoingOffRoading/repos","events_url":"https://api.github.com/users/GoingOffRoading/events{/privacy}","received_events_url":"https://api.github.com/users/GoingOffRoading/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1043114791,"node_id":"MDU6TGFiZWwxMDQzMTE0Nzkx","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Azure%20Blob","name":"Remote: Azure Blob","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":25,"created_at":"2020-11-30T01:23:44Z","updated_at":"2020-12-28T12:33:54Z","closed_at":"2020-12-28T12:33:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n\r\nWelcome :-) We understand you are having a problem with rclone; we want to help you with that!\r\n\r\nIf you've just got a question or aren't sure if you've found a bug then please use the rclone forum:\r\n\r\n    https://forum.rclone.org/\r\n\r\ninstead of filing an issue for a quick response.\r\n\r\nIf you think you might have found a bug, please can you try to replicate it with the latest beta?\r\n\r\n    https://beta.rclone.org/\r\n    \r\nIf you can still replicate it with the latest beta, then please fill in the info below which makes our lives much easier.  A log with -vv will make our day :-)\r\n\r\nThank you\r\n\r\nThe Rclone Developers\r\n\r\n-->\r\n\r\n#### What is the problem you are having with rclone?\r\n\r\nI have files in Azure Blob storage that are stored in Archive-Tier.  Azure Blob Archive-Tier files can be stored or deleted, have meta-data, and they CAN-NOT be read or modified.  My local versions of these files have been updated and I now need to sync my local files to Azure.  To do so, I essentially need to delete the Azure Blob version (in Archive-Tier, again: can not be read/modified outside of meta-data).\r\n\r\nI'm using the RClone GUI but am setting the --delete-before flag on the sync.\r\n\r\nWhen the sync occurs, I get a \"RESPONSE Stats: 409 This operation is not permitted on an archived blob\" error.  The error code is many rows but those code do not provide any additional diagnostic information, just Azure, API, local machine, and etc basic information.\r\n\r\nNote, similar issue here: [https://forum.rclone.org/t/azure-storage-blob-overwrite-on-archive/9668](https://forum.rclone.org/t/azure-storage-blob-overwrite-on-archive/9668)\r\n\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n\r\n```\r\n# rclone version\r\nrclone v1.53.0\r\n- os/arch: linux/amd64\r\n- go version: go1.15\r\n```\r\n\r\nUsing the GUI option\r\n\r\n#### Which OS you are using and how many bits (e.g. Windows 7, 64 bit)\r\n\r\nRunning in Docker/Kubernetes, linux/amd64\r\n\r\n####  Which cloud storage system are you using? (e.g. Google Drive)\r\n\r\nAzure Blob Storage\r\n\r\n#### The command you were trying to run (e.g. `rclone copy /tmp remote:tmp`)\r\n\r\n`rclone sync --delete-before --size-only --verbose --no-update-modtime --transfers 4 --checkers 8 --contimeout 60s --timeout 300s --retries 3 --low-level-retries 10 --delete-before  --stats 1s --stats-file-name-length 0 --fast-list /directory:remote`\r\n\r\nPlease forgive small formatting errors... This was manually copied from a VNC window\r\n\r\n#### A log from the command with the `-vv` flag (e.g. output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\nDeleted/modified the directory, remote name, and the GUIDs for privacy reasons\r\n\r\n```\r\n2020/11/30 01:21:25 ERROR : **MY-FILE**: Failed to copy: multipart upload failed to upload part: -> github.com/Azure/azure-storage-blob-go/azblob.newStorageError, github.com/Azure/azure-storage-blob-go@v0.10.0/azblob/zc_storage_error.go:42\r\n===== RESPONSE ERROR (ServiceCode=BlobArchived) =====\r\nDescription=This operation is not permitted on an archived blob.\r\nRequestId:c97536a8-e01e-000b-50b7-c6f95f0000\r\nTime:2020-11-30T01:21:25.4901576Z, Details:\r\n   Code: BlobArchived\r\n   PUT https://kubeomv.blob.core.windows.net/**MyRemote**?blockid=AQAAAAAAAAA%3D&comp=block&timeout=31536001\r\n   Authorization: REDACTED\r\n   Content-Length: [419434]\r\n   Content-Md5: [km02rBUA9Ac7ArHhzRuw==]\r\n   User-Agent: [rclone/v1.53.0]\r\n   X-Ms-Client-Request-Id: [9409ff8f-f83f-4fae-53cc-556e67c74852]\r\n   X-Ms-Date: [Mon, 30 Nov 2020 01:21:25 GMT]\r\n   X-Ms-Version: [2019-02-02]\r\n   --------------------------------------------------------------------------------\r\n   RESPONSE Status: 409 This operation is not permitted on an archived blob.\r\n   Content-Length: [233]\r\n   Content-Type: [application/xml]\r\n   Date: [Mon, 30 Nov 2020 01:21:24 GMT]\r\n   Server: [Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0]\r\n   X-Ms-Client-Request-Id: [9409ff8f-f83f-4fae-53cc-556e674852]\r\n   X-Ms-Error-Code: [BlobArchived]\r\n   X-Ms-Request-Id: [c97536a8-e01e-00-50b7-c6f95f000000]\r\n   X-Ms-Version: [2019-02-02]\r\n```\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/4819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/4819/timeline","performed_via_github_app":null,"state_reason":"completed"}