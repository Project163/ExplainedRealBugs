{"url":"https://api.github.com/repos/rclone/rclone/issues/6962","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/6962/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/6962/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/6962/events","html_url":"https://github.com/rclone/rclone/issues/6962","id":1675950015,"node_id":"I_kwDOAQ-n5M5j5Pe_","number":6962,"title":"potential data races","user":{"login":"191830230","id":90442779,"node_id":"MDQ6VXNlcjkwNDQyNzc5","avatar_url":"https://avatars.githubusercontent.com/u/90442779?v=4","gravatar_id":"","url":"https://api.github.com/users/191830230","html_url":"https://github.com/191830230","followers_url":"https://api.github.com/users/191830230/followers","following_url":"https://api.github.com/users/191830230/following{/other_user}","gists_url":"https://api.github.com/users/191830230/gists{/gist_id}","starred_url":"https://api.github.com/users/191830230/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/191830230/subscriptions","organizations_url":"https://api.github.com/users/191830230/orgs","repos_url":"https://api.github.com/users/191830230/repos","events_url":"https://api.github.com/users/191830230/events{/privacy}","received_events_url":"https://api.github.com/users/191830230/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-20T03:45:44Z","updated_at":"2023-04-24T11:17:39Z","closed_at":"2023-04-24T11:17:20Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello developer, I used a static data race detector to check this project and found suspicious data race defects. I have done preliminary filtering and categorized the defects, choosing only one from each category. However, due to my unfamiliarity with the overall architecture of the project, there may still be false positives after filtering. Below are the potential data race issues I found(not all stack traces are listed)\r\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++\r\nPotential race condition:\r\n Access1:\r\n        abort = true\r\n        ^\r\nrclone/vfs/read.go:240:3 ->\r\nrclone/vfs/read.go:234:4\r\n \r\n Access2:\r\n        for *poff != off && !abort {\r\n                             ^\r\nrclone/vfs/read.go:241:23 \r\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++\r\nPotential race condition:\r\n Access1:\r\n        err = s.serveHTTP()\r\n        ^\r\nrclone/cmd/serve/dlna/dlna.go:310:3 ->\r\nrclone/cmd/serve/dlna/dlna.go:306:3\r\n \r\n Access2:\r\n        return nil\r\n        ^\r\nrclone/cmd/serve/dlna/dlna.go:312:2 \r\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++\r\nPotential race condition:\r\n Access1:\r\n        if err != nil {\r\n           ^\r\nrclone/cmd/serve/dlna/dlna.go:310:3 ->\r\nrclone/cmd/serve/dlna/dlna.go:307:6\r\n \r\n Access2:\r\n        return nil\r\n        ^\r\nrclone/cmd/serve/dlna/dlna.go:312:2 \r\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++\r\nPotential race condition:\r\n Access1:\r\n        fs.Logf(s.f, \"Error on serving HTTP server: %v\", err)\r\n                                                         ^\r\nrclone/cmd/serve/dlna/dlna.go:310:3 ->\r\nrclone/cmd/serve/dlna/dlna.go:308:53\r\n \r\n Access2:\r\n        return nil\r\n        ^\r\nrclone/cmd/serve/dlna/dlna.go:312:2 \r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/6962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/6962/timeline","performed_via_github_app":null,"state_reason":"completed"}