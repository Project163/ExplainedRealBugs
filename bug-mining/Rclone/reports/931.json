{"url":"https://api.github.com/repos/rclone/rclone/issues/5024","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/5024/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/5024/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/5024/events","html_url":"https://github.com/rclone/rclone/issues/5024","id":808002015,"node_id":"MDU6SXNzdWU4MDgwMDIwMTU=","number":5024,"title":"â€“low-level-retries=0 causes panic: runtime error: invalid memory address or nil pointer dereference","user":{"login":"tmusolf","id":34257180,"node_id":"MDQ6VXNlcjM0MjU3MTgw","avatar_url":"https://avatars.githubusercontent.com/u/34257180?v=4","gravatar_id":"","url":"https://api.github.com/users/tmusolf","html_url":"https://github.com/tmusolf","followers_url":"https://api.github.com/users/tmusolf/followers","following_url":"https://api.github.com/users/tmusolf/following{/other_user}","gists_url":"https://api.github.com/users/tmusolf/gists{/gist_id}","starred_url":"https://api.github.com/users/tmusolf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmusolf/subscriptions","organizations_url":"https://api.github.com/users/tmusolf/orgs","repos_url":"https://api.github.com/users/tmusolf/repos","events_url":"https://api.github.com/users/tmusolf/events{/privacy}","received_events_url":"https://api.github.com/users/tmusolf/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/43","html_url":"https://github.com/rclone/rclone/milestone/43","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/43/labels","id":5847508,"node_id":"MDk6TWlsZXN0b25lNTg0NzUwOA==","number":43,"title":"v1.55","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":55,"state":"closed","created_at":"2020-09-05T13:45:35Z","updated_at":"2021-04-03T13:38:18Z","due_on":"2021-03-31T07:00:00Z","closed_at":"2021-04-03T13:38:18Z"},"comments":8,"created_at":"2021-02-14T17:12:43Z","updated_at":"2021-03-15T17:06:40Z","closed_at":"2021-03-15T17:06:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n\r\nWelcome :-) We understand you are having a problem with rclone; we want to help you with that!\r\n\r\nIf you've just got a question or aren't sure if you've found a bug then please use the rclone forum:\r\n\r\n    https://forum.rclone.org/\r\n\r\ninstead of filing an issue for a quick response.\r\n\r\nIf you are reporting a bug or asking for a new feature then please use one of the templates here:\r\n\r\n    https://github.com/rclone/rclone/issues/new\r\n\r\notherwise fill in the form below.\r\n\r\nThank you\r\n\r\nThe Rclone Developers\r\n\r\n-->\r\n\r\n\r\n#### Output of `rclone version`\r\nRClone cmd: rclone -vv --retries=1 --retries-sleep=10s --low-level-retries=0 --timeout=5s --contimeout=2s --expect-continue-timeout=1s --max-duration=5s --checkers=1 --multi-thread-streams=0 --no-traverse --transfers=1 --check-first --use-mmap --buffer-size=64M move /home/pi/WaterLogger/moveTest gdrive:WaterLogger/dataTest --delete-empty-src-dirs\r\n2021/02/13 14:47:59 DEBUG : rclone: Version \"v1.54.0\" starting with parameters [\"rclone\" \"-vv\" \"--retries=1\" \"--retries-sleep=10s\" \"--low-level-retries=0\" \"--timeout=5s\" \"--contimeout=2s\" \"--expect-continue-timeout=1s\" \"--max-duration=5s\" \"--checkers=1\" \"--multi-thread-streams=0\" \"--no-traverse\" \"--transfers=1\" \"--check-first\" \"--use-mmap\" \"--buffer-size=64M\" \"move\" \"/home/pi/WaterLogger/moveTest\" \"gdrive:WaterLogger/dataTest\" \"--delete-empty-src-dirs\"]\r\n2021/02/13 14:47:59 DEBUG : Creating backend with remote \"/home/pi/WaterLogger/moveTest\"\r\n2021/02/13 14:47:59 DEBUG : Using config file from \"/home/pi/.config/rclone/rclone.conf\"\r\n2021/02/13 14:47:59 DEBUG : Creating backend with remote \"gdrive:WaterLogger/dataTest\"\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x68 pc=0x7fbc4c]\r\n\r\ngoroutine 1 [running]:\r\ngithub.com/rclone/rclone/backend/drive.(*Fs).getRootID(0x396b300, 0x343c088, 0xbea107d1, 0x6, 0xbea107d8)\r\n        github.com/rclone/rclone/backend/drive/drive.go:715 +0x90\r\ngithub.com/rclone/rclone/backend/drive.NewFs(0x1675e20, 0x343c088, 0xbea107d1, 0x6, 0xbea107d8, 0x14, 0x1668240, 0x36aa040, 0x0, 0x0, ...)\r\n        github.com/rclone/rclone/backend/drive/drive.go:1158 +0x654\r\ngithub.com/rclone/rclone/fs.NewFs(0x1675e20, 0x343c088, 0xbea107d1, 0x1b, 0x340ac60, 0x1, 0x0, 0x87c01)\r\n        github.com/rclone/rclone/fs/fs.go:1366 +0x10c\r\ngithub.com/rclone/rclone/fs/cache.GetFn.func1(0xbea107d1, 0x1b, 0xbea107d1, 0x1b, 0x1ff9c58, 0x0, 0x0)\r\n        github.com/rclone/rclone/fs/cache/cache.go:48 +0x44\r\ngithub.com/rclone/rclone/lib/cache.(*Cache).Get(0x340ac60, 0xbea107d1, 0x1b, 0x3735df8, 0x0, 0x0, 0x0, 0x0)\r\n        github.com/rclone/rclone/lib/cache/cache.go:61 +0x114\r\ngithub.com/rclone/rclone/fs/cache.GetFn(0x1675e20, 0x343c088, 0xbea107d1, 0x1b, 0x146de10, 0x1d, 0x1688e50, 0x3514400, 0xea8d18)\r\n        github.com/rclone/rclone/fs/cache/cache.go:47 +0x98\r\ngithub.com/rclone/rclone/fs/cache.Get(...)\r\n        github.com/rclone/rclone/fs/cache/cache.go:104\r\ngithub.com/rclone/rclone/cmd.newFsDir(0xbea107d1, 0x1b, 0x1688e50, 0x362c540)\r\n        github.com/rclone/rclone/cmd/cmd.go:142 +0x40\r\ngithub.com/rclone/rclone/cmd.NewFsSrcFileDst(0x3742d80, 0x2, 0x12, 0x3742d80, 0x2, 0x12, 0x3716200, 0x139d392, 0x113e790)\r\n        github.com/rclone/rclone/cmd/cmd.go:171 +0x78\r\ngithub.com/rclone/rclone/cmd/move.glob..func1(0x1fdbaa0, 0x3742d80, 0x2, 0x12)\r\n        github.com/rclone/rclone/cmd/move/move.go:60 +0x5c\r\ngithub.com/spf13/cobra.(*Command).execute(0x1fdbaa0, 0x396b200, 0x12, 0x20, 0x1fdbaa0, 0x396b200)\r\n        github.com/spf13/cobra@v1.1.1/command.go:854 +0x1e8\r\ngithub.com/spf13/cobra.(*Command).ExecuteC(0x1fd7a50, 0x0, 0x3462070, 0x0)\r\n        github.com/spf13/cobra@v1.1.1/command.go:958 +0x274\r\ngithub.com/spf13/cobra.(*Command).Execute(...)\r\n        github.com/spf13/cobra@v1.1.1/command.go:895\r\ngithub.com/rclone/rclone/cmd.Main()\r\n        github.com/rclone/rclone/cmd/cmd.go:543 +0x90\r\nmain.main()\r\n        github.com/rclone/rclone/rclone.go:14 +0x14\r\nRClone to GDrive return code:%d:%x exit code:%d:%x sig num:%d:%x 512 512 2 2 0 0\r\nRClone update to GDrive returned error code: %d 2\r\n\r\nWith --low-level-retries=1\r\n\r\nRClone cmd: rclone -vv --retries=1 --retries-sleep=10s --low-level-retries=1 --timeout=5s --contimeout=2s --expect-continue-timeout=1s --max-duration=5s --checkers=1 --multi-thread-streams=0 --no-traverse --transfers=1 --check-first --use-mmap --buffer-size=64M move /home/pi/WaterLogger/moveTest gdrive:WaterLogger/dataTest --delete-empty-src-dirs\r\n2021/02/13 14:57:36 DEBUG : rclone: Version \"v1.54.0\" starting with parameters [\"rclone\" \"-vv\" \"--retries=1\" \"--retries-sleep=10s\" \"--low-level-retries=1\" \"--timeout=5s\" \"--contimeout=2s\" \"--expect-continue-timeout=1s\" \"--max-duration=5s\" \"--checkers=1\" \"--multi-thread-streams=0\" \"--no-traverse\" \"--transfers=1\" \"--check-first\" \"--use-mmap\" \"--buffer-size=64M\" \"move\" \"/home/pi/WaterLogger/moveTest\" \"gdrive:WaterLogger/dataTest\" \"--delete-empty-src-dirs\"]\r\n2021/02/13 14:57:36 DEBUG : Creating backend with remote \"/home/pi/WaterLogger/moveTest\"\r\n2021/02/13 14:57:36 DEBUG : Using config file from \"/home/pi/.config/rclone/rclone.conf\"\r\n2021/02/13 14:57:36 DEBUG : Creating backend with remote \"gdrive:WaterLogger/dataTest\"\r\n2021/02/13 14:57:38 DEBUG : Google drive root 'WaterLogger/dataTest': root_folder_id = \"0AEGVUEE5jRR3Uk9PVA\" - save this in the config to speed up startup\r\n2021/02/13 14:57:39 INFO  : Google drive root 'WaterLogger/dataTest': Running all checks before starting transfers\r\n2021/02/13 14:57:39 INFO  : Google drive root 'WaterLogger/dataTest': Transfer session deadline: 2021/02/13 14:57:44\r\n2021/02/13 14:57:39 DEBUG : Google drive root 'WaterLogger/dataTest': Waiting for checks to finish\r\n2021/02/13 14:57:39 DEBUG : 2021/20210213.dat: Sizes differ (src 1517 vs dst 1405)\r\n2021/02/13 14:57:39 INFO  : Google drive root 'WaterLogger/dataTest': Checks finished, now starting transfers\r\n2021/02/13 14:57:39 DEBUG : Google drive root 'WaterLogger/dataTest': Waiting for transfers to finish\r\n2021/02/13 14:57:40 DEBUG : 2021/20210213.dat: MD5 = 8709a05124b8101f749626ea4ade3efb OK\r\n2021/02/13 14:57:40 INFO  : 2021/20210213.dat: Copied (replaced existing)\r\n2021/02/13 14:57:40 INFO  : 2021/20210213.dat: Deleted\r\n2021/02/13 14:57:40 DEBUG : 2021: Removing directory\r\n2021/02/13 14:57:40 DEBUG : Local file system at /home/pi/WaterLogger/moveTest: deleted 1 directories\r\n2021/02/13 14:57:40 INFO  :\r\nTransferred:        1.481k / 1.481 kBytes, 100%, 1.424 kBytes/s, ETA 0s\r\nChecks:                 3 / 3, 100%\r\nDeleted:                1 (files), 1 (dirs)\r\nRenamed:                1\r\nTransferred:            1 / 1, 100%\r\nElapsed time:         4.5s\r\n\r\n2021/02/13 14:57:40 DEBUG : 4 go routines active\r\nRClone to GDrive return code:%d:%x exit code:%d:%x sig num:%d:%x 0 0 0 0 0 0\r\n\r\n\r\n#### Describe the issue\r\nTesting rclone with small/short values around internet connection time outs and retries. I was attempting to force some errors as if I had a bad/spotty internet connection.\r\n\r\nIf I set --low-level-retires=0 this error occurs every time. If I set --low-level-retires=1 it works correctly.\r\n\r\nThis is not causing me any problems as it is not a --low-level-retries value I expect to use. However, it appears to be boundary condition that should be addressed.\r\n\r\n\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/5024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/5024/timeline","performed_via_github_app":null,"state_reason":"completed"}