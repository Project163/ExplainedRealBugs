[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/579728634","html_url":"https://github.com/rclone/rclone/issues/3912#issuecomment-579728634","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3912","id":579728634,"node_id":"MDEyOklzc3VlQ29tbWVudDU3OTcyODYzNA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-29T12:13:13Z","updated_at":"2020-01-29T12:13:13Z","body":"`size_as_quota` is only intended for listing your files so you can see the quota, not for syncing, so you don't want to set this in the config.\r\n\r\nDo you think the docs should highlight this better?\r\n\r\nWhat made you set `size_as_quota`?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/579728634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/579790809","html_url":"https://github.com/rclone/rclone/issues/3912#issuecomment-579790809","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3912","id":579790809,"node_id":"MDEyOklzc3VlQ29tbWVudDU3OTc5MDgwOQ==","user":{"login":"Alvaro-Santos","id":19858704,"node_id":"MDQ6VXNlcjE5ODU4NzA0","avatar_url":"https://avatars.githubusercontent.com/u/19858704?v=4","gravatar_id":"","url":"https://api.github.com/users/Alvaro-Santos","html_url":"https://github.com/Alvaro-Santos","followers_url":"https://api.github.com/users/Alvaro-Santos/followers","following_url":"https://api.github.com/users/Alvaro-Santos/following{/other_user}","gists_url":"https://api.github.com/users/Alvaro-Santos/gists{/gist_id}","starred_url":"https://api.github.com/users/Alvaro-Santos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Alvaro-Santos/subscriptions","organizations_url":"https://api.github.com/users/Alvaro-Santos/orgs","repos_url":"https://api.github.com/users/Alvaro-Santos/repos","events_url":"https://api.github.com/users/Alvaro-Santos/events{/privacy}","received_events_url":"https://api.github.com/users/Alvaro-Santos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-29T14:51:51Z","updated_at":"2020-01-29T14:51:51Z","body":"I think the expected behaviour, for someone using rclone for the first time, would be for `size_as_quota` to only affect commands \"read\" commands (like `ls`) and not influence \"write\" commands at all (like `sync`). As the config is global, and not per action, I think this is a reasonable expectation. Whether you agree with this expectation or not, I think you'll agree that it's not at all expected for rclone to report local sizes at 0 if size_as_quota is set (in the sense that it's surprising for an user).\r\n\r\nI set this config value to true because I wanted to be aware of the \"true\" size my files are occupying on google drive, although I'll admit I did find the documentation in general poor. As a concrete example: \"[Show storage quota usage for file size.](https://rclone.org/drive/#drive-size-as-quota)\" --- show it where? In what commands?\r\n\r\nIdeally, I'd like to see `size_as_quota` simply be ignored by `sync`/`copy`/etc and only used to report sizes in commands like `ls`. However, since I'm not offering a patch to the project, I cannot impose on you. Another (less satisfying) solution would be to change the documentation (on the project site, on `rclone sync --help`, and on the interactive prompt when modifying an advanced configuration) to warn of the effects of setting `size_as_quota` and trying to use \"write\" commands and of the temporary fix for people who want to have it enabled while being able to write to their remotes (using `--ignore-size`).","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/579790809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Alvaro-Santos","id":19858704,"node_id":"MDQ6VXNlcjE5ODU4NzA0","avatar_url":"https://avatars.githubusercontent.com/u/19858704?v=4","gravatar_id":"","url":"https://api.github.com/users/Alvaro-Santos","html_url":"https://github.com/Alvaro-Santos","followers_url":"https://api.github.com/users/Alvaro-Santos/followers","following_url":"https://api.github.com/users/Alvaro-Santos/following{/other_user}","gists_url":"https://api.github.com/users/Alvaro-Santos/gists{/gist_id}","starred_url":"https://api.github.com/users/Alvaro-Santos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Alvaro-Santos/subscriptions","organizations_url":"https://api.github.com/users/Alvaro-Santos/orgs","repos_url":"https://api.github.com/users/Alvaro-Santos/repos","events_url":"https://api.github.com/users/Alvaro-Santos/events{/privacy}","received_events_url":"https://api.github.com/users/Alvaro-Santos/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/579941451","html_url":"https://github.com/rclone/rclone/issues/3912#issuecomment-579941451","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3912","id":579941451,"node_id":"MDEyOklzc3VlQ29tbWVudDU3OTk0MTQ1MQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-29T20:20:33Z","updated_at":"2020-01-29T20:20:33Z","body":"> I think the expected behaviour, for someone using rclone for the first time, would be for `size_as_quota` to only affect commands \"read\" commands (like `ls`) and not influence \"write\" commands at all (like `sync`).\r\n\r\nIt does only affect the size reading, but that messes up the sync as you've seen.\r\n\r\n> As the config is global, and not per action, I think this is a reasonable expectation.\r\n\r\nI think the expectation is that people would only use this as a flag, eg\r\n\r\n    rclone lsl --drive-size-as-quota drive:path\r\n\r\n> Ideally, I'd like to see `size_as_quota` simply be ignored by `sync`/`copy`/etc and only used to report sizes in commands like `ls`.\r\n\r\nUnfortunately that isn't possible easily. The `sync`/`copy` etc are just calling the backend interface and there is only one size interface.\r\n\r\n> Another (less satisfying) solution would be to change the documentation (on the project site, on `rclone sync --help`, and on the interactive prompt when modifying an advanced configuration) to warn of the effects of setting `size_as_quota` and trying to use \"write\" commands and of the temporary fix for people who want to have it enabled while being able to write to their remotes (using `--ignore-size`).\r\n\r\nI think this is my preferred option.\r\n\r\nHow about this for a proposed text:\r\n\r\n----\r\n\r\nShow storage quota usage for file size.\r\n\r\nThe storage used by a file is the size of the current version plus any older versions that have been set to keep forever.\r\n\r\n**NB** it is not recommended to set this flag in your config - the recommended usage is using the flag form `--drive-size-as-quota` when doing `rclone ls/lsl/lsf/lsjson/etc` only.\r\n\r\n----\r\n\r\nI think I can take the flag out of the configurator completely so it only shows as a command line option.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/579941451/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/580023242","html_url":"https://github.com/rclone/rclone/issues/3912#issuecomment-580023242","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3912","id":580023242,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MDAyMzI0Mg==","user":{"login":"Alvaro-Santos","id":19858704,"node_id":"MDQ6VXNlcjE5ODU4NzA0","avatar_url":"https://avatars.githubusercontent.com/u/19858704?v=4","gravatar_id":"","url":"https://api.github.com/users/Alvaro-Santos","html_url":"https://github.com/Alvaro-Santos","followers_url":"https://api.github.com/users/Alvaro-Santos/followers","following_url":"https://api.github.com/users/Alvaro-Santos/following{/other_user}","gists_url":"https://api.github.com/users/Alvaro-Santos/gists{/gist_id}","starred_url":"https://api.github.com/users/Alvaro-Santos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Alvaro-Santos/subscriptions","organizations_url":"https://api.github.com/users/Alvaro-Santos/orgs","repos_url":"https://api.github.com/users/Alvaro-Santos/repos","events_url":"https://api.github.com/users/Alvaro-Santos/events{/privacy}","received_events_url":"https://api.github.com/users/Alvaro-Santos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-30T00:10:11Z","updated_at":"2020-01-30T00:10:11Z","body":">Unfortunately that isn't possible easily. The sync/copy etc are just calling the backend interface and there is only one size interface.\r\n\r\nPerhaps I'm missing some subtlety of the implementation, but I don't understand how this could be much harder than checking if the command given is one of {sync, copy, copyto, etc} and overriding (temporarily) the flag's value with false. The backend wouldn't ever even know that the frontend had been called with the flag enabled.\r\n\r\n>I think I can take the flag out of the configurator completely so it only shows as a command line option.\r\n\r\nThis seems ideal given your intended usage of the flag as a command line option. Your text seems to imply the possibility of still setting the flag in the config, though. If you do choose to maintain it as a config option, I'd amend your nota bene to also refer to this issue (which explains the \"issue\" & your rationale in depth) and add the \"fix\" of using --ignore-size. If you choose to drop it, then the text seems fine as is. [Would any other contributors, perhaps more technical-writing inclined, like to weigh in?]","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/580023242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Alvaro-Santos","id":19858704,"node_id":"MDQ6VXNlcjE5ODU4NzA0","avatar_url":"https://avatars.githubusercontent.com/u/19858704?v=4","gravatar_id":"","url":"https://api.github.com/users/Alvaro-Santos","html_url":"https://github.com/Alvaro-Santos","followers_url":"https://api.github.com/users/Alvaro-Santos/followers","following_url":"https://api.github.com/users/Alvaro-Santos/following{/other_user}","gists_url":"https://api.github.com/users/Alvaro-Santos/gists{/gist_id}","starred_url":"https://api.github.com/users/Alvaro-Santos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Alvaro-Santos/subscriptions","organizations_url":"https://api.github.com/users/Alvaro-Santos/orgs","repos_url":"https://api.github.com/users/Alvaro-Santos/repos","events_url":"https://api.github.com/users/Alvaro-Santos/events{/privacy}","received_events_url":"https://api.github.com/users/Alvaro-Santos/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2996520250,"node_id":"MDExOkNsb3NlZEV2ZW50Mjk5NjUyMDI1MA==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2996520250","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"97ed8db75d06ed9458862ebbb19da7b6fc9eb2f7","commit_url":"https://api.github.com/repos/rclone/rclone/commits/97ed8db75d06ed9458862ebbb19da7b6fc9eb2f7","created_at":"2020-01-31T10:10:16Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/580670978","html_url":"https://github.com/rclone/rclone/issues/3912#issuecomment-580670978","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3912","id":580670978,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MDY3MDk3OA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-31T10:10:41Z","updated_at":"2020-01-31T10:10:41Z","body":"I've gone with the hiding from the configurator option and more help text\r\n\r\n97ed8db75d06ed9458862ebbb19da7b6fc9eb2f7\r\n\r\nThanks for reporting this.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/580670978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}}]