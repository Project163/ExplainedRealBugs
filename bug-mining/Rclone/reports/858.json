{"url":"https://api.github.com/repos/rclone/rclone/issues/4655","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/4655/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/4655/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/4655/events","html_url":"https://github.com/rclone/rclone/issues/4655","id":715025906,"node_id":"MDU6SXNzdWU3MTUwMjU5MDY=","number":4655,"title":"Jottacloud rclone copy using server-side copy crashed with SEGV.","user":{"login":"gerph","id":13813876,"node_id":"MDQ6VXNlcjEzODEzODc2","avatar_url":"https://avatars.githubusercontent.com/u/13813876?v=4","gravatar_id":"","url":"https://api.github.com/users/gerph","html_url":"https://github.com/gerph","followers_url":"https://api.github.com/users/gerph/followers","following_url":"https://api.github.com/users/gerph/following{/other_user}","gists_url":"https://api.github.com/users/gerph/gists{/gist_id}","starred_url":"https://api.github.com/users/gerph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gerph/subscriptions","organizations_url":"https://api.github.com/users/gerph/orgs","repos_url":"https://api.github.com/users/gerph/repos","events_url":"https://api.github.com/users/gerph/events{/privacy}","received_events_url":"https://api.github.com/users/gerph/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1045816570,"node_id":"MDU6TGFiZWwxMDQ1ODE2NTcw","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Jottacloud","name":"Remote: Jottacloud","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"buengese","id":4004974,"node_id":"MDQ6VXNlcjQwMDQ5NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4004974?v=4","gravatar_id":"","url":"https://api.github.com/users/buengese","html_url":"https://github.com/buengese","followers_url":"https://api.github.com/users/buengese/followers","following_url":"https://api.github.com/users/buengese/following{/other_user}","gists_url":"https://api.github.com/users/buengese/gists{/gist_id}","starred_url":"https://api.github.com/users/buengese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/buengese/subscriptions","organizations_url":"https://api.github.com/users/buengese/orgs","repos_url":"https://api.github.com/users/buengese/repos","events_url":"https://api.github.com/users/buengese/events{/privacy}","received_events_url":"https://api.github.com/users/buengese/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"buengese","id":4004974,"node_id":"MDQ6VXNlcjQwMDQ5NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4004974?v=4","gravatar_id":"","url":"https://api.github.com/users/buengese","html_url":"https://github.com/buengese","followers_url":"https://api.github.com/users/buengese/followers","following_url":"https://api.github.com/users/buengese/following{/other_user}","gists_url":"https://api.github.com/users/buengese/gists{/gist_id}","starred_url":"https://api.github.com/users/buengese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/buengese/subscriptions","organizations_url":"https://api.github.com/users/buengese/orgs","repos_url":"https://api.github.com/users/buengese/repos","events_url":"https://api.github.com/users/buengese/events{/privacy}","received_events_url":"https://api.github.com/users/buengese/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-10-05T17:26:29Z","updated_at":"2020-10-05T18:14:38Z","closed_at":"2020-10-05T18:13:42Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n\r\nWelcome :-) We understand you are having a problem with rclone; we want to help you with that!\r\n\r\nIf you've just got a question or aren't sure if you've found a bug then please use the rclone forum:\r\n\r\n    https://forum.rclone.org/\r\n\r\ninstead of filing an issue for a quick response.\r\n\r\nIf you think you might have found a bug, please can you try to replicate it with the latest beta?\r\n\r\n    https://beta.rclone.org/\r\n    \r\nIf you can still replicate it with the latest beta, then please fill in the info below which makes our lives much easier.  A log with -vv will make our day :-)\r\n\r\nThank you\r\n\r\nThe Rclone Developers\r\n\r\n-->\r\n\r\n#### What is the problem you are having with rclone?\r\n\r\nIt crashed whilst performing a server side copy of a directory - it had been running for over an hour when it happened. I was running two of these copies (different destination directories) at the same time on the same machine, and both of them seemed to crash at about the same time, so I'm going to guess that they got back an unexpected response which caused that (the machine itself isn't low on memory and shouldn't have otherwise failed).\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n\r\n```\r\ncharles@laputa ~> rclone version\r\nrclone v1.54.0-beta.4793.2b7994e73\r\n- os/arch: darwin/amd64\r\n- go version: go1.15.2\r\n```\r\n\r\n#### Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\n\r\nMacOS 10.14.6\r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\n\r\nJottacloud\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\n\r\n`rclone -v copy jottacloud-crypt:archives/2020-10/home/ jottacloud-crypt:archives/2020-09/home/`\r\n\r\nand\r\n\r\n`rclone -v copy --transfers 40 jottacloud-crypt:archives/2020-10/home/ jottacloud-crypt:archives/2020-01/home/`\r\n\r\n#### A log from the command with the `-vv` flag (eg output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\nI don't have a -vv log; but I do have the surrounding logs from two processes that failed with -v selected:\r\n\r\n```\r\n2020/10/05 18:08:30 INFO  : charles/.cpanm/work/1584570345.8175/Perl-Critic-1.126/blib/lib/Perl/Critic/Policy/ControlStructures/ProhibitUnreachableCode.pm: Copied (server side copy)\r\n2020/10/05 18:08:31 INFO  : charles/.cpanm/work/1584572480.1242/PPI-1.220/blib/lib/PPI/Token/Prototype.pm: Copied (server side copy)\r\n2020/10/05 18:08:33 INFO  : charles/.cpanm/work/1584570345.8175/Perl-Critic-1.126/lib/Perl/Critic/Exception/Configuration/Option/Global/ExtraParameter.pm: Copied (server side copy)\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x4aac33e]\r\n\r\ngoroutine 112 [running]:\r\ngithub.com/rclone/rclone/backend/jottacloud.(*Fs).copyOrMove.func1(0xc000116838, 0x8, 0x203000)\r\n\tgithub.com/rclone/rclone/backend/jottacloud/jottacloud.go:1091 +0x11e\r\ngithub.com/rclone/rclone/fs.pacerInvoker(0x1, 0xa, 0xc00133a6c0, 0xc00133a6c0, 0x349e6bb8, 0x11d)\r\n\tgithub.com/rclone/rclone/fs/fs.go:1477 +0x3c\r\ngithub.com/rclone/rclone/lib/pacer.(*Pacer).call(0xc00013a5a0, 0xc00133a6c0, 0xa, 0x40, 0x55d2ec0)\r\n\tgithub.com/rclone/rclone/lib/pacer/pacer.go:197 +0x90\r\ngithub.com/rclone/rclone/lib/pacer.(*Pacer).Call(0xc00013a5a0, 0xc00133a6c0, 0x56bae22, 0x2)\r\n\tgithub.com/rclone/rclone/lib/pacer/pacer.go:216 +0x6a\r\ngithub.com/rclone/rclone/backend/jottacloud.(*Fs).copyOrMove(0xc0000ad600, 0x59ac9c0, 0xc00020c7c0, 0x56bae22, 0x2, 0xc0010267e0, 0x11d, 0xc001230000, 0xa0, 0xa0, ...)\r\n\tgithub.com/rclone/rclone/backend/jottacloud/jottacloud.go:1088 +0x428\r\ngithub.com/rclone/rclone/backend/jottacloud.(*Fs).Copy(0xc0000ad600, 0x59ac9c0, 0xc00020c7c0, 0x59c3560, 0xc0011314a0, 0xc001230000, 0xa0, 0x5, 0x4, 0x40, ...)\r\n\tgithub.com/rclone/rclone/backend/jottacloud/jottacloud.go:1119 +0x1d0\r\ngithub.com/rclone/rclone/backend/crypt.(*Fs).Copy(0xc0018deb40, 0x59ac9c0, 0xc00020c7c0, 0x592322be0, 0xc0013d6d20, 0xc000838ec0, 0x3d, 0xbfd6f222222c9f333, 0x3233254041111, 0x642c552, ...)\r\n\tgithub.com/rclone/rclone/backend/crypt/crypt.go:465 +0x115\r\ngithub.com/rclone/rclone/fs/operations.Copy(0x59ac9c0, 0xc00020c7c0, 0x59c2b60, 0xc0018deb40, 0x0, 0x0, 0xc00023338ec0, 0x3d, 0x52242be0, 0xc00334420, ...)\r\n\tgithub.com/rclone/rclone/fs/operations/operations.go:382 +0x19a3\r\ngithub.com/rclone/rclone/fs/sync.(*syncCopyMove).pairCopyOrMove(0xc00000c1e0, 0x59ac9c0, 0xc00020c7c0, 0xc0018e81e0, 0x59c2b60, 0xc0018deb40, 0x32, 0xc00000c2d0)\r\n\tgithub.com/rclone/rclone/fs/sync/sync.go:384 +0x22c\r\ncreated by github.com/rclone/rclone/fs/sync.(*syncCopyMove).startTransfers\r\n\tgithub.com/rclone/rclone/fs/sync/sync.go:411 +0xd2\r\n```\r\n\r\nand\r\n\r\n```\r\n2020/10/05 18:12:20 INFO  : charles/ansible.gerph.old/roles/chartdirector-python/tasks/main.yaml: Copied (server side copy)\r\n2020/10/05 18:12:21 INFO  : charles/ansible.gerph.old/roles/chartdirector-php/templates/htaccess.j2: Copied (server side copy)\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x4aac33e]\r\n\r\ngoroutine 148 [running]:\r\ngithub.com/rclone/rclone/backend/jottacloud.(*Fs).copyOrMove.func1(0xc0001ab258, 0xc000683500, 0xc000683588)\r\n\tgithub.com/rclone/rclone/backend/jottacloud/jottacloud.go:1091 +0x11e\r\ngithub.com/rclone/rclone/fs.pacerInvoker(0x1, 0xa, 0xc000b9a3c0, 0xc000b9a3c0, 0x1375ef90, 0x138)\r\n\tgithub.com/rclone/rclone/fs/fs.go:1477 +0x3c\r\ngithub.com/rclone/rclone/lib/pacer.(*Pacer).call(0xc00007c540, 0xc000b9a3c0, 0xa, 0x40, 0x55d2ec0)\r\n\tgithub.com/rclone/rclone/lib/pacer/pacer.go:197 +0x90\r\ngithub.com/rclone/rclone/lib/pacer.(*Pacer).Call(0xc00007c540, 0xc000b9a3c0, 0x56bae22, 0x2)\r\n\tgithub.com/rclone/rclone/lib/pacer/pacer.go:216 +0x6a\r\ngithub.com/rclone/rclone/backend/jottacloud.(*Fs).copyOrMove(0xc000604160, 0x59ac9c0, 0xc00048a000, 0x56bae22, 0x2, 0xc000b06500, 0x138, 0xc0003f6000, 0xbb, 0xbb, ...)\r\n\tgithub.com/rclone/rclone/backend/jottacloud/jottacloud.go:1088 +0x428\r\ngithub.com/rclone/rclone/backend/jottacloud.(*Fs).Copy(0xc000604160, 0x59ac9c0, 0xc00048a000, 0x59c3560, 0xc0005ce480, 0xc0003f6000, 0xbb, 0x6, 0x5, 0x50, ...)\r\n\tgithub.com/rclone/rclone/backend/jottacloud/jottacloud.go:1119 +0x1d0\r\ngithub.com/rclone/rclone/backend/crypt.(*Fs).Copy(0xc0003c2000, 0x59ac9c0, 0xc00048a000, 0x59c3352, 0xc000780620, 0xc000c64100, 0x38, 0xbfd62222fab53333, 0x5117b2222db, 0x6424422, ...)\r\n\tgithub.com/rclone/rclone/backend/crypt/crypt.go:465 +0x115\r\ngithub.com/rclone/rclone/fs/operations.Copy(0x59ac9c0, 0xc00048a000, 0x59c2b60, 0xc0003c2000, 0x0, 0x0, 0xc000c64100, 0x38, 0x59c2be0, 0xc000780620, ...)\r\n\tgithub.com/rclone/rclone/fs/operations/operations.go:382 +0x19a3\r\ngithub.com/rclone/rclone/fs/sync.(*syncCopyMove).pairCopyOrMove(0xc00000c1e0, 0x59ac9c0, 0xc00048a000, 0xc00018ef50, 0x59c2b60, 0xc0003c2000, 0x34, 0xc00000c2d0)\r\n\tgithub.com/rclone/rclone/fs/sync/sync.go:384 +0x22c\r\ncreated by github.com/rclone/rclone/fs/sync.(*syncCopyMove).startTransfers\r\n\tgithub.com/rclone/rclone/fs/sync/sync.go:411 +0xd2\r\n```\r\n\r\nI guess those times aren't exactly the same times, but it had been working just fine, and they failed quite close together.\r\n","closed_by":{"login":"buengese","id":4004974,"node_id":"MDQ6VXNlcjQwMDQ5NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4004974?v=4","gravatar_id":"","url":"https://api.github.com/users/buengese","html_url":"https://github.com/buengese","followers_url":"https://api.github.com/users/buengese/followers","following_url":"https://api.github.com/users/buengese/following{/other_user}","gists_url":"https://api.github.com/users/buengese/gists{/gist_id}","starred_url":"https://api.github.com/users/buengese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/buengese/subscriptions","organizations_url":"https://api.github.com/users/buengese/orgs","repos_url":"https://api.github.com/users/buengese/repos","events_url":"https://api.github.com/users/buengese/events{/privacy}","received_events_url":"https://api.github.com/users/buengese/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/4655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/4655/timeline","performed_via_github_app":null,"state_reason":"completed"}