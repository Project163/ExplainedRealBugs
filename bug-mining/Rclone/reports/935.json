{"url":"https://api.github.com/repos/rclone/rclone/issues/4811","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/4811/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/4811/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/4811/events","html_url":"https://github.com/rclone/rclone/issues/4811","id":751785950,"node_id":"MDU6SXNzdWU3NTE3ODU5NTA=","number":4811,"title":"SFTP Storage - Change in config parameters won't take affect until rclone is restarted","user":{"login":"mchrisson","id":11784158,"node_id":"MDQ6VXNlcjExNzg0MTU4","avatar_url":"https://avatars.githubusercontent.com/u/11784158?v=4","gravatar_id":"","url":"https://api.github.com/users/mchrisson","html_url":"https://github.com/mchrisson","followers_url":"https://api.github.com/users/mchrisson/followers","following_url":"https://api.github.com/users/mchrisson/following{/other_user}","gists_url":"https://api.github.com/users/mchrisson/gists{/gist_id}","starred_url":"https://api.github.com/users/mchrisson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mchrisson/subscriptions","organizations_url":"https://api.github.com/users/mchrisson/orgs","repos_url":"https://api.github.com/users/mchrisson/repos","events_url":"https://api.github.com/users/mchrisson/events{/privacy}","received_events_url":"https://api.github.com/users/mchrisson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399007,"node_id":"MDU6TGFiZWw4NjM5OTAwNw==","url":"https://api.github.com/repos/rclone/rclone/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null},{"id":2353203261,"node_id":"MDU6TGFiZWwyMzUzMjAzMjYx","url":"https://api.github.com/repos/rclone/rclone/labels/Web%20GUI","name":"Web GUI","color":"a4fce6","default":false,"description":""},{"id":2510194032,"node_id":"MDU6TGFiZWwyNTEwMTk0MDMy","url":"https://api.github.com/repos/rclone/rclone/labels/API%20/%20Remote%20Control%20/%20RC","name":"API / Remote Control / RC","color":"87edbf","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/43","html_url":"https://github.com/rclone/rclone/milestone/43","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/43/labels","id":5847508,"node_id":"MDk6TWlsZXN0b25lNTg0NzUwOA==","number":43,"title":"v1.55","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":55,"state":"closed","created_at":"2020-09-05T13:45:35Z","updated_at":"2021-04-03T13:38:18Z","due_on":"2021-03-31T07:00:00Z","closed_at":"2021-04-03T13:38:18Z"},"comments":9,"created_at":"2020-11-26T19:05:51Z","updated_at":"2021-03-16T09:27:32Z","closed_at":"2021-03-15T19:22:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n\r\nWelcome :-) We understand you are having a problem with rclone; we want to help you with that!\r\n\r\nIf you've just got a question or aren't sure if you've found a bug then please use the rclone forum:\r\n\r\n    https://forum.rclone.org/\r\n\r\ninstead of filing an issue for a quick response.\r\n\r\nIf you think you might have found a bug, please can you try to replicate it with the latest beta?\r\n\r\n    https://beta.rclone.org/\r\n    \r\nIf you can still replicate it with the latest beta, then please fill in the info below which makes our lives much easier.  A log with -vv will make our day :-)\r\n\r\nThank you\r\n\r\nThe Rclone Developers\r\n\r\n-->\r\n\r\n#### What is the problem you are having with rclone?\r\n**Usage:** I am using rclone to add SFTP storages (remotes) and upload, download, move files around in those storages via the rclone REST API.\r\n\r\n**The Problem:** Change in parameters of the SFTP type storage config only take affect after rclone is restarted. Similarly if I delete a storage config, I am still able to access the files on that storage.\r\n\r\n**Steps to Reproduce:**\r\n1. Start rclone with `./rclone rcd --rc-user=test-user --rc-pass=test-pass --rc-web-gui --rc-addr=0.0.0.0:5572`\r\n2. Access WebUI at `localhost:5572` and login\r\n3. Go to Configs > Create a New Config\r\n4. Enter Name (say 'Test-SFTP'), Select type as 'SSH/SFTP Connection'\r\n5. Enter parameters, like ssh host, user, port, password\r\n   ( say `{ \"host\": \"192.168.100.9\", \"user\": \"test\", \"port: 22, \"pass\": \"pass\" }` )\r\n   Click Next.\r\n6. Config is created. Head to Explorer > Enter Storage Name 'Test-SFTP' > Hit Enter.\r\n7. Able to see / access files on 192.168.100.9 .. Cool.\r\n8. Head back to Configs > Click Update of 'Test-SFTP'.\r\n9. Don't change type, click Next.\r\n10. Change parameters,\r\n   ( say `{ \"host\": \"192.168.100.111\", \"user\": \"test1\", \"port: 22, \"pass\": \"pass1\" }` )\r\n   Click Next.\r\n11. Head back to Explorer. ( Or can even close web-browser and open a new incognito window, so that cache and local storage isn't used )\r\n12. In Explorer, Enter Storage Name 'Test-SFTP' > Hit Enter.\r\n13. Still able to see / access / download / upload files that are on 192.168.100.9. â˜¹\r\n\r\n**Expectation:** Is that files on 192.168.100.111 should be accessible ( as the parameters are changed to point to this remote )\r\n\r\nI could reproduce this scenario, with rclone running on a ubuntu system as well.\r\nIf rclone is restarted, then going to Explorer, I can see the actual files on 192.168.100.111.\r\n\r\nI would not like to restart rclone to achieve this. Also, I use the rclone REST API to perform these operations in my NODE.js application. But this could also be reproducible using the rclone WebUI (as of course it also uses the REST API) \r\n\r\nAdditionally, I watched the config file under `.config/rclone/rclone.conf`.\r\nThis seems to change immediately, on POST /config/update\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\nrclone v1.54.0-beta.4920.979bb07c8\r\n- os/arch: windows/amd64\r\n- go version: go1.15.5\r\n\r\n#### Which OS you are using and how many bits (e.g. Windows 7, 64 bit)\r\nWindows 10, 64 bit\r\n\r\n\r\n####  Which cloud storage system are you using? (e.g. Google Drive)\r\nSSH/SFTP Connection\r\n\r\n\r\n#### The command you were trying to run (e.g. `rclone copy /tmp remote:tmp`)\r\n./rclone rcd --rc-user=test-user --rc-pass=test-pass --rc-web-gui --rc-addr=0.0.0.0:5572\r\n\r\n\r\n#### A log from the command with the `-vv` flag (e.g. output from `rclone -vv copy /tmp remote:tmp`)\r\n$ ./rclone -vv rcd --rc-user=test-user --rc-pass=test-pass --rc-web-gui --rc-addr=0.0.0.0:5572\r\n2020/11/26 23:46:19 DEBUG : rclone: Version \"v1.54.0-beta.4920.979bb07c8\" starting with parameters [\"C:\\\\Users\\\\<user-name>\\\\Development\\\\programs\\\\rclone-beta\\\\rclone.exe\" \"-vv\" \"rcd\" \"--rc-user=test-user\" \"--rc-pass=test-pass\" \"--rc-web-gui\" \"--rc-addr=0.0.0.0:5572\"]\r\n2020/11/26 23:46:20 DEBUG : Current tag: v2.0.3, Release tag: v2.0.3\r\n2020/11/26 23:46:20 NOTICE: Web GUI exists. Update skipped.\r\n2020/11/26 23:46:20 NOTICE: Serving Web GUI\r\n2020/11/26 23:46:20 INFO  : Using --user test-user --pass XXXX as authenticated user\r\n2020/11/26 23:46:20 NOTICE: Serving remote control on http://[::]:5572/\r\n2020/11/26 23:46:20 DEBUG : login_token \"dGVzdC11c2VyOnRlc3QtcGFzcw==\"\r\n\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/4811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/4811/timeline","performed_via_github_app":null,"state_reason":"completed"}