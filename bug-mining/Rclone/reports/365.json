{"url":"https://api.github.com/repos/rclone/rclone/issues/1769","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/1769/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/1769/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/1769/events","html_url":"https://github.com/rclone/rclone/issues/1769","id":267998447,"node_id":"MDU6SXNzdWUyNjc5OTg0NDc=","number":1769,"title":"rclone tries to PUT swift segments container every time","user":{"login":"johnl","id":5997,"node_id":"MDQ6VXNlcjU5OTc=","avatar_url":"https://avatars.githubusercontent.com/u/5997?v=4","gravatar_id":"","url":"https://api.github.com/users/johnl","html_url":"https://github.com/johnl","followers_url":"https://api.github.com/users/johnl/followers","following_url":"https://api.github.com/users/johnl/following{/other_user}","gists_url":"https://api.github.com/users/johnl/gists{/gist_id}","starred_url":"https://api.github.com/users/johnl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johnl/subscriptions","organizations_url":"https://api.github.com/users/johnl/orgs","repos_url":"https://api.github.com/users/johnl/repos","events_url":"https://api.github.com/users/johnl/events{/privacy}","received_events_url":"https://api.github.com/users/johnl/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-10-24T11:39:59Z","updated_at":"2017-10-26T20:40:26Z","closed_at":"2017-10-26T20:39:06Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm using rclone v1.38 with an OpenStack Swift cluster.\r\n\r\nWhen setting the `--swift-chunk-size` option rclone splits large files into chunks which it stores in a separate swift container, named the same as the destination container but with `_segments` added on the end.\r\n\r\nI'm using credentials for Swift that don't have authorisation to create or update containers, only objects within them. So I create the container manually with another set of credentials.\r\n\r\nbut then rclone sends a PUT request to the `_segments` container - it looks like it blindly does this rather than checking if it already exists. It receives a 403 forbidden code from Swift of course. it just retries a few times and gives up.\r\n\r\nI think that it should make a HEAD request on the container to see if it already exists first and skip the PUT if it already does.\r\n\r\nAlso worth noting is that rclone seems not to give any hint what it's doing regarding chunks/segments. I've tried running it with all the verbose options but it never mentions the _segments container use at all. It only says:\r\n\r\n`2017/10/24 12:34:43 ERROR : DSC_1345.MOV: Failed to copy: Operation forbidden`\r\n\r\nwhich is rather misleading!\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/1769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/1769/timeline","performed_via_github_app":null,"state_reason":"completed"}