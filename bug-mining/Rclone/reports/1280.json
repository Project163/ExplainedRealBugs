{"url":"https://api.github.com/repos/rclone/rclone/issues/7924","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/7924/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/7924/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/7924/events","html_url":"https://github.com/rclone/rclone/issues/7924","id":2370447756,"node_id":"I_kwDOAQ-n5M6NSimM","number":7924,"title":"rclone size & rclone about commands returns different results","user":{"login":"honghainguyen777","id":59792233,"node_id":"MDQ6VXNlcjU5NzkyMjMz","avatar_url":"https://avatars.githubusercontent.com/u/59792233?v=4","gravatar_id":"","url":"https://api.github.com/users/honghainguyen777","html_url":"https://github.com/honghainguyen777","followers_url":"https://api.github.com/users/honghainguyen777/followers","following_url":"https://api.github.com/users/honghainguyen777/following{/other_user}","gists_url":"https://api.github.com/users/honghainguyen777/gists{/gist_id}","starred_url":"https://api.github.com/users/honghainguyen777/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/honghainguyen777/subscriptions","organizations_url":"https://api.github.com/users/honghainguyen777/orgs","repos_url":"https://api.github.com/users/honghainguyen777/repos","events_url":"https://api.github.com/users/honghainguyen777/events{/privacy}","received_events_url":"https://api.github.com/users/honghainguyen777/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":306062816,"node_id":"MDU6TGFiZWwzMDYwNjI4MTY=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Swift","name":"Remote: Swift","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2024-06-24T14:47:04Z","updated_at":"2024-06-28T10:15:12Z","closed_at":"2024-06-28T10:14:27Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi Rclone community,\r\n\r\nI am reaching out for assistance with an issue we're experiencing while migrating our OpenStack ObjectStore to a newer cluster. We encounter problems specifically with containers/buckets that contain a large number of files (> 100,000 files). Despite extensive research through Rclone GitHub Issues, forums, and other resources, we haven't found a viable solution.\r\n\r\n#### Problem Description\r\nWe are trying to run the following command to migrate our data:\r\n```\r\nrclone copy source:my-bucket destination:my-bucket --transfers 64 --size-only --server-side-across-configs --multi-thread-write-buffer-size 3Mi --multi-thread-cutoff 1Gi --multi-thread-chunk-size 512Mi --progress -vv\r\n```\r\n\r\nWe have experimented with various other options as well, but each time, only a portion of the bucket is copied, and no errors are reported.\r\n\r\nNotably, the copied portion has the exact number of objects and size as reported by `rclone size source:my-bucket`:\r\n```\r\nroot@root#rclone about source:my-bucket\r\nUsed:    24.596 GiB\r\nObjects: 71.233k\r\n\r\nroot@root# rclone size source:my-bucket\r\nTotal objects: 47.978k (47978)\r\nTotal size: 12.043 GiB (12930961798 Byte)\r\n\r\nroot@root# rclone size destination:my-bucket\r\nTotal objects: 47.978k (47978)\r\nTotal size: 12.043 GiB (12930961798 Byte) \r\n```\r\n\r\nThe number of objects and size should match the output from `rclone about source:my-bucket`. This discrepancy leads us to suspect a potential bug or configuration issue.\r\n\r\n#### Rclone Version\r\n```\r\nrclone v1.67.0\r\n- os/version: ubuntu 20.04 (64 bit)\r\n- os/kernel: 6.8.11-300.fc40.x86_64 (x86_64)\r\n- os/type: linux\r\n- os/arch: amd64\r\n- go/version: go1.22.4\r\n- go/linking: static\r\n- go/tags: none\r\n```\r\n\r\n#### OS Details\r\n```\r\nNAME=\"Ubuntu\"\r\nVERSION=\"20.04.6 LTS (Focal Fossa)\"\r\nID=ubuntu\r\nID_LIKE=debian\r\nPRETTY_NAME=\"Ubuntu 20.04.6 LTS\"\r\nVERSION_ID=\"20.04\"\r\nHOME_URL=\"https://www.ubuntu.com/\"\r\nSUPPORT_URL=\"https://help.ubuntu.com/\"\r\nBUG_REPORT_URL=\"https://bugs.launchpad.net/ubuntu/\"\r\nPRIVACY_POLICY_URL=\"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\"\r\nVERSION_CODENAME=focal\r\nUBUNTU_CODENAME=focal\r\n```\r\n\r\n#### Cloud Storage System\r\nOpenStack Swift - ObjectStore\r\n\r\n#### Commands Tried\r\n```\r\nrclone copy/sync source:my-bucket destination:my-bucket --transfers 64 --size-only --server-side-across-configs --multi-thread-write-buffer-size 3Mi --multi-thread-cutoff 1Gi --multi-thread-chunk-size 512Mi --progress  -vv\r\n\r\nrclone about source:my-bucket\r\nrclone size source:my-bucket\r\nrclone size destination:my-bucket\r\n```\r\n\r\nI would greatly appreciate any guidance or solutions to resolve this issue. If more information is needed, I am happy to provide it promptly.\r\n\r\nThank you very much for your support!\r\n\r\nBest regards,\r\nHai","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/7924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/7924/timeline","performed_via_github_app":null,"state_reason":"completed"}