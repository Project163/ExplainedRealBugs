[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826143530","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-826143530","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":826143530,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjE0MzUzMA==","user":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-24T19:41:35Z","updated_at":"2021-04-24T20:03:59Z","body":"Strangely, doing a fetch from upstream and force push on my master branch allowed to push the content, but the github actions all triggered in my fork under my account, which is probably not what we would want.\r\n\r\nHaving a PR build and master build, and eventually some additional checks is fine and is something setup only in the upstrema repo but I am wondering if using GitHub actions on the upstream, which propagates to all forks, is a good idea...\r\n\r\nWhat is not working is using a Github action to automatically refresh the fork because of these workflow scripts that are pushed.\r\n\r\nYou can see the failure here: https://github.com/mathieucarbou/rclone/runs/2424844621?check_suite_focus=true#step:3:7069\r\n\r\nI am using a GitHub action to sync my forks. \r\nMore info: https://blog.mathieu.photography/post/649318432483033088/automatic-fork-syncing-with-github","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826143530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826328349","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-826328349","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":826328349,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjMyODM0OQ==","user":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-25T13:52:52Z","updated_at":"2021-04-25T13:52:52Z","body":"Additional notes: not filtering the events so that they execute only on the upstream repo would also allow to not bust the usage limits of users having forked this repo.\r\n\r\nhttps://docs.github.com/en/actions/reference/usage-limits-billing-and-administration#usage-limits","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826328349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826344773","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-826344773","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":826344773,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjM0NDc3Mw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-25T15:43:34Z","updated_at":"2021-04-25T15:43:34Z","body":"What would your suggested fix for this be?\r\n\r\nDo you want to send a PR with that in?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826344773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826358362","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-826358362","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":826358362,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjM1ODM2Mg==","user":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-25T17:21:00Z","updated_at":"2021-04-25T17:21:29Z","body":"> What would your suggested fix for this be?\r\n\r\nThere are several fixes like using `*-ignores`, specific branches (not `*`), or if conditions.\r\n\r\n> Do you want to send a PR with that in?\r\n\r\nI can but since I don't know what are doing the  current workflow scripts, I will just assume they only need to be execute inside the upstream master branch. Is that right ? Or they also need to be executed for each PR sent or updated ?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826358362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-25T18:13:45Z","updated_at":"2021-04-25T18:13:45Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/5275","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/5275/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/5275/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/5275/events","html_url":"https://github.com/rclone/rclone/pull/5275","id":867076660,"node_id":"MDExOlB1bGxSZXF1ZXN0NjIyODEyODEz","number":5275,"title":"Fix #5272: Only run workflow script in rclone repsoitory, not forks","user":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2330137373,"node_id":"MDU6TGFiZWwyMzMwMTM3Mzcz","url":"https://api.github.com/repos/rclone/rclone/labels/build","name":"build","color":"5319e7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-04-25T18:13:45Z","updated_at":"2023-04-25T16:37:36Z","closed_at":"2021-04-26T16:52:03Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rclone/rclone/pulls/5275","html_url":"https://github.com/rclone/rclone/pull/5275","diff_url":"https://github.com/rclone/rclone/pull/5275.diff","patch_url":"https://github.com/rclone/rclone/pull/5275.patch","merged_at":"2021-04-26T16:52:03Z"},"body":"<!--\r\nThank you very much for contributing code or documentation to rclone! Please\r\nfill out the following questions to make it easier for us to review your\r\nchanges.\r\n\r\nYou do not need to check all the boxes below all at once, feel free to take\r\nyour time and add more commits. If you're done and ready for review, please\r\ncheck the last box.\r\n-->\r\n\r\n#### What is the purpose of this change?\r\n\r\nFix #5272\r\n\r\n#### Was the change discussed in an issue or in the forum before?\r\n\r\nSee #5272\r\n\r\n#### Checklist\r\n\r\n- [X] I have read the [contribution guidelines](https://github.com/rclone/rclone/blob/master/CONTRIBUTING.md#submitting-a-pull-request).\r\n- [ ] I have added tests for all changes in this PR if appropriate.\r\n- [ ] I have added documentation for the changes if appropriate.\r\n- [X] All commit messages are in [house style](https://github.com/rclone/rclone/blob/master/CONTRIBUTING.md#commit-messages).\r\n- [X] I'm done, this Pull Request is ready for review :-)\r\n","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/5275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/5275/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":4643086606,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ2NDMwODY2MDY=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4643086606","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-04-26T07:58:14Z","label":{"name":"build","color":"5319e7"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826869044","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-826869044","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":826869044,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjg2OTA0NA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T14:12:58Z","updated_at":"2021-04-26T14:12:58Z","body":"> > What would your suggested fix for this be?\r\n> \r\n> There are several fixes like using `*-ignores`, specific branches (not `*`), or if conditions.\r\n> \r\n> > Do you want to send a PR with that in?\r\n> \r\n> I can but since I don't know what are doing the current workflow scripts, I will just assume they only need to be execute inside the upstream master branch. Is that right ? Or they also need to be executed for each PR sent or updated ?\r\n\r\nWe need the actions to run on pushes to branches and for PR requests on the main repo.\r\n\r\nI'm really not sure about forks. Is it useful for them to run the actions? Or maybe a subset of them?\r\n\r\nI was looking at what other open source projects do\r\n\r\n[Hugo](https://github.com/gohugoio/hugo/blob/master/.github/workflows/test.yml) does `on: [push, pull_request]` - is that better than what rclone has at the moment?\r\n\r\n[Caddy](https://github.com/caddyserver/caddy/blob/master/.github/workflows/ci.yml) does something slightly different.\r\n\r\nI made up the original code rclone is using a long time ago (rclone was one of the first users of actions) so it may be completely wrong!\r\n\r\nhttps://github.com/rclone/rclone/blob/0537791d14675e9c66a2a237680f6403cba4e3f1/.github/workflows/build.yml#L8-L14\r\n\r\nLooking at it now I can see why I get two builds one for the tag and one for the branch whenever I push a tag... So I should probably remove the `tags` section.\r\n\r\nWhat do you think best practice is now?\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826869044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826910038","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-826910038","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":826910038,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjkxMDAzOA==","user":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T15:05:29Z","updated_at":"2021-04-26T15:07:17Z","body":"Hello @ncw ,\r\n\r\nIf you look at my PR (#5275), you will see that I have only added `if:` conditions so that the script logic **is not changed** but will only be applied to the official rclone repository, not forks. This is important because otherwise these scripts could be executed under every people's account having forked rclone and will contribute in depleting users quota for GitHub Actions.\r\n\r\nThis is [what is recommended](https://github.community/t/stop-github-actions-running-on-a-fork/17965/2) until GitHub provides users the options to partly disable workflow scripts **by default when forking**.\r\n\r\nCurrently, GitHub has a way to totally disable running Actions on a repository, but this option is not activated by default on forks and is not suitable in cases where a user would still want to add some workflow actions (like I do) to automatically sync from rclone repo for example. GitHub currently does not \"automatically\" disable actions when forking, and worse, there is no way to activate only custom ones, leaving the rest disabled.\r\n\r\nSo that is why adding `if:` conditions would be the more reliable way to keep the same logic and only execute those scripts under rclone account as it is right now.\r\n\r\nNote that PR build is done under rclone account, not the user's account having sent the PR...","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826910038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4645504223,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDY0NTUwNDIyMw==","url":"https://api.github.com/repos/rclone/rclone/issues/events/4645504223","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-04-26T15:05:30Z","performed_via_github_app":null},{"id":4645504231,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ2NDU1MDQyMzE=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4645504231","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-04-26T15:05:30Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826922286","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-826922286","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":826922286,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjkyMjI4Ng==","user":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T15:16:19Z","updated_at":"2021-04-26T15:16:58Z","body":"**The ideal solution would be:**\r\n\r\n- The current scripts as they are right now with the `if:` conditions so that the jobs are not executed **automatically** on people's fork\r\n- Another script which would be a partial copy of the current one, that would contain only a manual trigger with `workflow_dispatch:` under `on:` to allow users to access these scripts from their GitHub Actions tab on their fork so that they can **manually** run the build from their fork.\r\n\r\n```\r\non:\r\n  workflow_dispatch:\r\n```\r\n\r\nThis would be the ideal solutions: \r\n- using event-driven jobs filtered with `if:` so that this event-driven jobs only execute under rclone's account and do not participate in depleting people's quota\r\n- having manual triggers to still provide users a way to run jobs manually (those jobs would not have the `if:` condition)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826922286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826957423","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-826957423","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":826957423,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjk1NzQyMw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T16:03:59Z","updated_at":"2021-04-26T16:03:59Z","body":"> So that is why adding `if:` conditions would be the more reliable way to keep the same logic and only execute those scripts under rclone account as it is right now.\r\n\r\nOK you've convinced me :-)\r\n\r\n\r\n\r\n> This would be the ideal solutions:\r\n> \r\n> * using event-driven jobs filtered with `if:` so that this event-driven jobs only execute under rclone's account and do not participate in depleting people's quota\r\n> * having manual triggers to still provide users a way to run jobs manually (those jobs would not have the `if:` condition)\r\n\r\nYou seem to have implemented this in your PR :-)\r\n\r\nDoes it work?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826957423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826959998","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-826959998","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":826959998,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjk1OTk5OA==","user":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T16:07:01Z","updated_at":"2021-04-26T16:07:01Z","body":"Hello @ncw !\r\n\r\nYes indeed! I am testing it right now and even better I have found a way to use inputs (which can be given when running a job manually) to filter.\r\n\r\nMagic is done thanks to:\r\n\r\n```\r\n  workflow_dispatch:\r\n    inputs:\r\n      manual:\r\n        required: true\r\n        default: true\r\n```\r\n\r\nand \r\n\r\n`    if: ${{ github.repository == 'rclone/rclone' || github.event.inputs.manual }}`\r\n\r\nSo this way:\r\n- everything will run as before on rclone repo\r\n- but on forks, nothing will run automatically\r\n- both on rclone and forks, there will now be the ability to trigger a manual build by clicking on the build workflow and running it on a specific branch, with the `manual` parameter defaulted to true to bypass the filter when on forks.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/826959998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4645893144,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDY0NTg5MzE0NA==","url":"https://api.github.com/repos/rclone/rclone/issues/events/4645893144","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-04-26T16:07:01Z","performed_via_github_app":null},{"id":4645893156,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ2NDU4OTMxNTY=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4645893156","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-04-26T16:07:01Z","performed_via_github_app":null},{"id":4646154731,"node_id":"MDExOkNsb3NlZEV2ZW50NDY0NjE1NDczMQ==","url":"https://api.github.com/repos/rclone/rclone/issues/events/4646154731","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-04-26T16:52:03Z","state_reason":null,"performed_via_github_app":null},{"id":4646154938,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ2NDYxNTQ5Mzg=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4646154938","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"964088affa51b790f8c6909048d2b99a24d2b1f1","commit_url":"https://api.github.com/repos/rclone/rclone/commits/964088affa51b790f8c6909048d2b99a24d2b1f1","created_at":"2021-04-26T16:52:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/827004650","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-827004650","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":827004650,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNzAwNDY1MA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T17:09:05Z","updated_at":"2021-04-26T17:09:05Z","body":"Thanks for fixing that @mathieucarbou :-)\r\n\r\nI wondered if I could pick your brain about another actions related matter....\r\n\r\nIn the action scripts we only deploy built binaries \"if enabled in config && not a PR && not a fork\"\r\n\r\nhttps://github.com/rclone/rclone/blob/8f23cae1c0719bf72d13f874cc6f447d8b43d6ec/.github/workflows/build.yml#L210-L220\r\n\r\nI'd like to make that a bit more flexible...\r\n\r\nI'd like pull requests by project members only to be able to deploy build binaries.\r\n\r\nAt the moment project members push to branches to make deployments which is at cross purposes with the whole pull request system.\r\n\r\nHowever there were several things I couldn't figure out\r\n\r\n1. How to determine the user sending the pull request is a project member\r\n2. How to determine in the Makefile that the thing it is building is a pull request and what its PR number is from the environment variables\r\n\r\nAny ideas much appreciated!\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/827004650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4646240748,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDY0NjI0MDc0OA==","url":"https://api.github.com/repos/rclone/rclone/issues/events/4646240748","actor":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-04-26T17:09:06Z","performed_via_github_app":null},{"id":4646240752,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ2NDYyNDA3NTI=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4646240752","actor":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-04-26T17:09:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/827050129","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-827050129","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":827050129,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNzA1MDEyOQ==","user":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T18:21:07Z","updated_at":"2021-04-26T18:37:45Z","body":"> However there were several things I couldn't figure out\r\n> \r\n> 1. How to determine the user sending the pull request is a project member\r\n> \r\n> 2. How to determine in the Makefile that the thing it is building is a pull request and what its PR number is from the environment variables\r\n\r\nI haven't experience such need but I think this could be achieved by using env vars perhaps for the most part.\r\n\r\n- https://docs.github.com/en/actions/reference/environment-variables#default-environment-variables\r\n- https://docs.github.com/en/developers/webhooks-and-events/webhook-events-and-payloads#pull_request\r\n\r\nAnd for members: \r\n\r\n- `curl https://api.github.com/orgs/rclone/members`\r\n\r\nYou could perhaps add these env variables in your script and access them from your make files. \r\nIf you have them set, you are in a PR build\r\n\r\n```yml\r\nenv:\r\n  PR_NUMBER: ${{ github.event.pull_request.number }}\r\n  PR_AUTHOR: ${{ github.event.pull_request.user.login }}\r\n```\r\n\r\nAnd in your make file, something like:\r\n\r\n```bash\r\nif [ ! -z \"$PR_AUTHOR\" ]; then\r\n  # PR\r\n  FOUND=curl -s https://api.github.com/orgs/rclone/members | jq -r 'map(.login | select(. | test(\"^$PR_AUTHOR\\$\"))) | join(\"\")'\r\n  if [ \"$PR_AUTHOR\" == \"$FOUND\" ]; then\r\n    # PR was created by a member\r\n  fi\r\nfi\r\n```\r\n\r\nNote: didn't test all of that, and probably needs refining, but you have most of the pieces ;-)\r\n\r\nHappy to help an awesome project  ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/827050129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/827151385","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-827151385","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":827151385,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNzE1MTM4NQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T21:14:34Z","updated_at":"2021-04-26T21:14:34Z","body":"That is brilliant - thanks. I didn't realise you could get stuff out of github.event - I was only looking at the environment variables. And your jq one liner is very cool!\r\n\r\nI think that is probably enough things indeed - thank you for the inspiration :-)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/827151385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/827211511","html_url":"https://github.com/rclone/rclone/issues/5272#issuecomment-827211511","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5272","id":827211511,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNzIxMTUxMQ==","user":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T23:49:18Z","updated_at":"2021-04-26T23:49:18Z","body":"> That is brilliant - thanks. I didn't realise you could get stuff out of github.event - I was only looking at the environment variables. And your jq one liner is very cool!\r\n> \r\n> I think that is probably enough things indeed - thank you for the inspiration :-)\r\n\r\nYou're welcome!","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/827211511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mathieucarbou","id":61346,"node_id":"MDQ6VXNlcjYxMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/61346?v=4","gravatar_id":"","url":"https://api.github.com/users/mathieucarbou","html_url":"https://github.com/mathieucarbou","followers_url":"https://api.github.com/users/mathieucarbou/followers","following_url":"https://api.github.com/users/mathieucarbou/following{/other_user}","gists_url":"https://api.github.com/users/mathieucarbou/gists{/gist_id}","starred_url":"https://api.github.com/users/mathieucarbou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathieucarbou/subscriptions","organizations_url":"https://api.github.com/users/mathieucarbou/orgs","repos_url":"https://api.github.com/users/mathieucarbou/repos","events_url":"https://api.github.com/users/mathieucarbou/events{/privacy}","received_events_url":"https://api.github.com/users/mathieucarbou/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5153937603,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDUxNTM5Mzc2MDM=","url":"https://api.github.com/repos/rclone/rclone/issues/events/5153937603","actor":{"login":"negative0","id":12236512,"node_id":"MDQ6VXNlcjEyMjM2NTEy","avatar_url":"https://avatars.githubusercontent.com/u/12236512?v=4","gravatar_id":"","url":"https://api.github.com/users/negative0","html_url":"https://github.com/negative0","followers_url":"https://api.github.com/users/negative0/followers","following_url":"https://api.github.com/users/negative0/following{/other_user}","gists_url":"https://api.github.com/users/negative0/gists{/gist_id}","starred_url":"https://api.github.com/users/negative0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/negative0/subscriptions","organizations_url":"https://api.github.com/users/negative0/orgs","repos_url":"https://api.github.com/users/negative0/repos","events_url":"https://api.github.com/users/negative0/events{/privacy}","received_events_url":"https://api.github.com/users/negative0/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2224678df05fc31d2467e65494908b26def24223","commit_url":"https://api.github.com/repos/negative0/rclone/commits/2224678df05fc31d2467e65494908b26def24223","created_at":"2021-08-13T06:10:43Z","performed_via_github_app":null}]