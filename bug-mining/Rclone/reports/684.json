{"url":"https://api.github.com/repos/rclone/rclone/issues/3573","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/3573/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/3573/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/3573/events","html_url":"https://github.com/rclone/rclone/issues/3573","id":499101034,"node_id":"MDU6SXNzdWU0OTkxMDEwMzQ=","number":3573,"title":"secure box authentication URL","user":{"login":"jonjacksonma","id":37711451,"node_id":"MDQ6VXNlcjM3NzExNDUx","avatar_url":"https://avatars.githubusercontent.com/u/37711451?v=4","gravatar_id":"","url":"https://api.github.com/users/jonjacksonma","html_url":"https://github.com/jonjacksonma","followers_url":"https://api.github.com/users/jonjacksonma/followers","following_url":"https://api.github.com/users/jonjacksonma/following{/other_user}","gists_url":"https://api.github.com/users/jonjacksonma/gists{/gist_id}","starred_url":"https://api.github.com/users/jonjacksonma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonjacksonma/subscriptions","organizations_url":"https://api.github.com/users/jonjacksonma/orgs","repos_url":"https://api.github.com/users/jonjacksonma/repos","events_url":"https://api.github.com/users/jonjacksonma/events{/privacy}","received_events_url":"https://api.github.com/users/jonjacksonma/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/37","html_url":"https://github.com/rclone/rclone/milestone/37","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/37/labels","id":4423541,"node_id":"MDk6TWlsZXN0b25lNDQyMzU0MQ==","number":37,"title":"v1.50","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":53,"state":"closed","created_at":"2019-06-19T08:40:02Z","updated_at":"2023-06-23T16:59:46Z","due_on":"2019-10-12T07:00:00Z","closed_at":"2019-11-14T16:50:09Z"},"comments":4,"created_at":"2019-09-26T20:30:50Z","updated_at":"2019-09-29T11:54:54Z","closed_at":"2019-09-29T09:43:11Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What is the problem you are having with rclone?\r\n\r\nBox authentication is not secure in a multi-user environment\r\n\r\nA situation occurred where UserA connected to a UserB's rclone config instance via the http://127.0.0.1:53682/auth URL, because the URL and port are always the same and there is no mechanism to verify which user is connecting.  UserA was not aware they had connected to someone else's authentication page and went ahead to authenticate.  The secret token for UserA was passed to UserB's rclone instance and saved in UserB's rclone configuration.  This scenario results in data exposure.  I'm filing it under bugs rather than feature requests due to the security implications.\r\n\r\nWould it be possible to embed a long random string into the auth URL and only accept connections that are using the correct random string?  Another improvement would be to pick the next available port if 53682 is taken.\r\n\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n\r\nrclone v1.49.3-100-g6750af61-beta\r\n- os/arch: linux/amd64\r\n- go version: go1.13.1\r\n\r\n\r\n#### Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\n\r\nLinux 64 bit\r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\n\r\nBox\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\n\r\nrclone config\r\n\r\n#### A log from the command with the `-vv` flag (eg output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\nCONFIGURING A BOX REMOTE:\r\n```\r\nUse auto config?\r\n * Say Y if not sure\r\n * Say N if you are working on a remote or headless machine\r\ny) Yes\r\nn) No\r\ny/n> y\r\nIf your browser doesn't open automatically go to the following link: http://127.0.0.1:53682/auth\r\nLog in and authorize rclone for access\r\nWaiting for code...\r\n```\r\n\r\nThe problem / bug is that http://127.0.0.1:53682/auth is not unique - any user on a shared platform can connect\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/3573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/3573/timeline","performed_via_github_app":null,"state_reason":"completed"}