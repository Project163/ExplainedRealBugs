[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/462065002","html_url":"https://github.com/rclone/rclone/issues/2960#issuecomment-462065002","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2960","id":462065002,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MjA2NTAwMg==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-09T17:53:58Z","updated_at":"2019-02-09T17:53:58Z","body":"Yes, I've always gone for Major.Minor with rclone with an implicit patch level .0.  Alas that turns out not to be quite semvar compliant :-(\r\n\r\nI hasn't realised that making 1.43.1 makes that the only version go modules will pick up.\r\n\r\nI'll put a 1.46.0 tag on the repo now and have a think about the best way forward for the future.\r\n\r\nThank you for letting me know about this!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/462065002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2128840593,"node_id":"MDEyOkxhYmVsZWRFdmVudDIxMjg4NDA1OTM=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2128840593","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-02-09T17:54:05Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":2128840634,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDIxMjg4NDA2MzQ=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2128840634","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2019-02-09T17:54:10Z","milestone":{"title":"v1.47"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/462066306","html_url":"https://github.com/rclone/rclone/issues/2960#issuecomment-462066306","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2960","id":462066306,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MjA2NjMwNg==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-09T18:10:39Z","updated_at":"2019-02-09T18:10:39Z","body":"I did a bit of experimenting and I think v1.X.Y versions won't break anything.  I've updated the Makefile so the next time I do a release it will make that sort of tag and I've pushed a v1.46.0 tag so hopefully we are all good!\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/462066306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/462069902","html_url":"https://github.com/rclone/rclone/issues/2960#issuecomment-462069902","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2960","id":462069902,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MjA2OTkwMg==","user":{"login":"myitcv","id":3374574,"node_id":"MDQ6VXNlcjMzNzQ1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/3374574?v=4","gravatar_id":"","url":"https://api.github.com/users/myitcv","html_url":"https://github.com/myitcv","followers_url":"https://api.github.com/users/myitcv/followers","following_url":"https://api.github.com/users/myitcv/following{/other_user}","gists_url":"https://api.github.com/users/myitcv/gists{/gist_id}","starred_url":"https://api.github.com/users/myitcv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myitcv/subscriptions","organizations_url":"https://api.github.com/users/myitcv/orgs","repos_url":"https://api.github.com/users/myitcv/repos","events_url":"https://api.github.com/users/myitcv/events{/privacy}","received_events_url":"https://api.github.com/users/myitcv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-09T18:55:46Z","updated_at":"2019-02-09T18:55:46Z","body":"> I've pushed a v1.46.0 tag so hopefully we are all good!\r\n\r\nLooks good to me (repeated same test above).\r\n\r\n> Thank you for letting me know about this!\r\n\r\nMy pleasure. \r\n\r\nThank you for all the amazing work you've done and continue to do on rclone. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/462069902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"myitcv","id":3374574,"node_id":"MDQ6VXNlcjMzNzQ1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/3374574?v=4","gravatar_id":"","url":"https://api.github.com/users/myitcv","html_url":"https://github.com/myitcv","followers_url":"https://api.github.com/users/myitcv/followers","following_url":"https://api.github.com/users/myitcv/following{/other_user}","gists_url":"https://api.github.com/users/myitcv/gists{/gist_id}","starred_url":"https://api.github.com/users/myitcv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myitcv/subscriptions","organizations_url":"https://api.github.com/users/myitcv/orgs","repos_url":"https://api.github.com/users/myitcv/repos","events_url":"https://api.github.com/users/myitcv/events{/privacy}","received_events_url":"https://api.github.com/users/myitcv/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2129341382,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIxMjkzNDEzODI=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2129341382","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3167ad514a0dd16bbf4a0f6a05690b2393564245","commit_url":"https://api.github.com/repos/rclone/rclone/commits/3167ad514a0dd16bbf4a0f6a05690b2393564245","created_at":"2019-02-10T18:27:41Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/462170554","html_url":"https://github.com/rclone/rclone/issues/2960#issuecomment-462170554","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2960","id":462170554,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MjE3MDU1NA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-10T20:45:48Z","updated_at":"2019-02-10T20:45:48Z","body":"Thanks for testing :-)\r\n\r\nI've changed the build process to use semvar compliant tags so next release should use them automatically (cross fingers!).\r\n\r\nI'll leave this issue open until 1.47.0 is released!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/462170554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2129408603,"node_id":"MDExOkNsb3NlZEV2ZW50MjEyOTQwODYwMw==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2129408603","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"d8e5b19ed445312516fdd889d7f9670b283791b7","commit_url":"https://api.github.com/repos/rclone/rclone/commits/d8e5b19ed445312516fdd889d7f9670b283791b7","created_at":"2019-02-10T20:55:50Z","state_reason":null,"performed_via_github_app":null},{"id":2207597640,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIyMDc1OTc2NDA=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2207597640","actor":{"login":"gcornut","id":939567,"node_id":"MDQ6VXNlcjkzOTU2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/939567?v=4","gravatar_id":"","url":"https://api.github.com/users/gcornut","html_url":"https://github.com/gcornut","followers_url":"https://api.github.com/users/gcornut/followers","following_url":"https://api.github.com/users/gcornut/following{/other_user}","gists_url":"https://api.github.com/users/gcornut/gists{/gist_id}","starred_url":"https://api.github.com/users/gcornut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gcornut/subscriptions","organizations_url":"https://api.github.com/users/gcornut/orgs","repos_url":"https://api.github.com/users/gcornut/repos","events_url":"https://api.github.com/users/gcornut/events{/privacy}","received_events_url":"https://api.github.com/users/gcornut/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"252d8816774e46ce4fca1491a2962e281f2d8f50","commit_url":"https://api.github.com/repos/gcornut/rclone/commits/252d8816774e46ce4fca1491a2962e281f2d8f50","created_at":"2019-03-15T20:54:19Z","performed_via_github_app":null},{"id":2207610720,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIyMDc2MTA3MjA=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2207610720","actor":{"login":"gcornut","id":939567,"node_id":"MDQ6VXNlcjkzOTU2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/939567?v=4","gravatar_id":"","url":"https://api.github.com/users/gcornut","html_url":"https://github.com/gcornut","followers_url":"https://api.github.com/users/gcornut/followers","following_url":"https://api.github.com/users/gcornut/following{/other_user}","gists_url":"https://api.github.com/users/gcornut/gists{/gist_id}","starred_url":"https://api.github.com/users/gcornut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gcornut/subscriptions","organizations_url":"https://api.github.com/users/gcornut/orgs","repos_url":"https://api.github.com/users/gcornut/repos","events_url":"https://api.github.com/users/gcornut/events{/privacy}","received_events_url":"https://api.github.com/users/gcornut/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a65759e6e08c784a15b234eceda897fd8fa00586","commit_url":"https://api.github.com/repos/gcornut/rclone/commits/a65759e6e08c784a15b234eceda897fd8fa00586","created_at":"2019-03-15T21:00:58Z","performed_via_github_app":null},{"actor":{"login":"KateGo520","id":62839645,"node_id":"MDQ6VXNlcjYyODM5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/62839645?v=4","gravatar_id":"","url":"https://api.github.com/users/KateGo520","html_url":"https://github.com/KateGo520","followers_url":"https://api.github.com/users/KateGo520/followers","following_url":"https://api.github.com/users/KateGo520/following{/other_user}","gists_url":"https://api.github.com/users/KateGo520/gists{/gist_id}","starred_url":"https://api.github.com/users/KateGo520/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KateGo520/subscriptions","organizations_url":"https://api.github.com/users/KateGo520/orgs","repos_url":"https://api.github.com/users/KateGo520/repos","events_url":"https://api.github.com/users/KateGo520/events{/privacy}","received_events_url":"https://api.github.com/users/KateGo520/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-06T15:07:03Z","updated_at":"2021-01-06T15:07:03Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/golang/go/issues/43542","repository_url":"https://api.github.com/repos/golang/go","labels_url":"https://api.github.com/repos/golang/go/issues/43542/labels{/name}","comments_url":"https://api.github.com/repos/golang/go/issues/43542/comments","events_url":"https://api.github.com/repos/golang/go/issues/43542/events","html_url":"https://github.com/golang/go/issues/43542","id":780620517,"node_id":"MDU6SXNzdWU3ODA2MjA1MTc=","number":43542,"title":"cmd/go: A survey on Golang's dependency management modes (GOPATH and Go Modules): status quo, problems and challenges","user":{"login":"KateGo520","id":62839645,"node_id":"MDQ6VXNlcjYyODM5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/62839645?v=4","gravatar_id":"","url":"https://api.github.com/users/KateGo520","html_url":"https://github.com/KateGo520","followers_url":"https://api.github.com/users/KateGo520/followers","following_url":"https://api.github.com/users/KateGo520/following{/other_user}","gists_url":"https://api.github.com/users/KateGo520/gists{/gist_id}","starred_url":"https://api.github.com/users/KateGo520/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KateGo520/subscriptions","organizations_url":"https://api.github.com/users/KateGo520/orgs","repos_url":"https://api.github.com/users/KateGo520/repos","events_url":"https://api.github.com/users/KateGo520/events{/privacy}","received_events_url":"https://api.github.com/users/KateGo520/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":398069301,"node_id":"MDU6TGFiZWwzOTgwNjkzMDE=","url":"https://api.github.com/repos/golang/go/labels/FrozenDueToAge","name":"FrozenDueToAge","color":"1d76db","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-01-06T15:06:59Z","updated_at":"2022-01-06T16:58:42Z","closed_at":"2021-01-06T16:29:42Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":23096959,"node_id":"MDEwOlJlcG9zaXRvcnkyMzA5Njk1OQ==","name":"go","full_name":"golang/go","private":false,"owner":{"login":"golang","id":4314092,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQzMTQwOTI=","avatar_url":"https://avatars.githubusercontent.com/u/4314092?v=4","gravatar_id":"","url":"https://api.github.com/users/golang","html_url":"https://github.com/golang","followers_url":"https://api.github.com/users/golang/followers","following_url":"https://api.github.com/users/golang/following{/other_user}","gists_url":"https://api.github.com/users/golang/gists{/gist_id}","starred_url":"https://api.github.com/users/golang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/golang/subscriptions","organizations_url":"https://api.github.com/users/golang/orgs","repos_url":"https://api.github.com/users/golang/repos","events_url":"https://api.github.com/users/golang/events{/privacy}","received_events_url":"https://api.github.com/users/golang/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/golang/go","description":"The Go programming language","fork":false,"url":"https://api.github.com/repos/golang/go","forks_url":"https://api.github.com/repos/golang/go/forks","keys_url":"https://api.github.com/repos/golang/go/keys{/key_id}","collaborators_url":"https://api.github.com/repos/golang/go/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/golang/go/teams","hooks_url":"https://api.github.com/repos/golang/go/hooks","issue_events_url":"https://api.github.com/repos/golang/go/issues/events{/number}","events_url":"https://api.github.com/repos/golang/go/events","assignees_url":"https://api.github.com/repos/golang/go/assignees{/user}","branches_url":"https://api.github.com/repos/golang/go/branches{/branch}","tags_url":"https://api.github.com/repos/golang/go/tags","blobs_url":"https://api.github.com/repos/golang/go/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/golang/go/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/golang/go/git/refs{/sha}","trees_url":"https://api.github.com/repos/golang/go/git/trees{/sha}","statuses_url":"https://api.github.com/repos/golang/go/statuses/{sha}","languages_url":"https://api.github.com/repos/golang/go/languages","stargazers_url":"https://api.github.com/repos/golang/go/stargazers","contributors_url":"https://api.github.com/repos/golang/go/contributors","subscribers_url":"https://api.github.com/repos/golang/go/subscribers","subscription_url":"https://api.github.com/repos/golang/go/subscription","commits_url":"https://api.github.com/repos/golang/go/commits{/sha}","git_commits_url":"https://api.github.com/repos/golang/go/git/commits{/sha}","comments_url":"https://api.github.com/repos/golang/go/comments{/number}","issue_comment_url":"https://api.github.com/repos/golang/go/issues/comments{/number}","contents_url":"https://api.github.com/repos/golang/go/contents/{+path}","compare_url":"https://api.github.com/repos/golang/go/compare/{base}...{head}","merges_url":"https://api.github.com/repos/golang/go/merges","archive_url":"https://api.github.com/repos/golang/go/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/golang/go/downloads","issues_url":"https://api.github.com/repos/golang/go/issues{/number}","pulls_url":"https://api.github.com/repos/golang/go/pulls{/number}","milestones_url":"https://api.github.com/repos/golang/go/milestones{/number}","notifications_url":"https://api.github.com/repos/golang/go/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/golang/go/labels{/name}","releases_url":"https://api.github.com/repos/golang/go/releases{/id}","deployments_url":"https://api.github.com/repos/golang/go/deployments","created_at":"2014-08-19T04:33:40Z","updated_at":"2025-11-09T22:56:50Z","pushed_at":"2025-11-08T12:26:57Z","git_url":"git://github.com/golang/go.git","ssh_url":"git@github.com:golang/go.git","clone_url":"https://github.com/golang/go.git","svn_url":"https://github.com/golang/go","homepage":"https://go.dev","size":416665,"stargazers_count":130763,"watchers_count":130763,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":18450,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":9590,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["go","golang","language","programming-language"],"visibility":"public","forks":18450,"open_issues":9590,"watchers":130763,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"## Background\r\nGolang has two dependency management modes, GOPATH and Go Modules.\r\n### GOPATH Mode:\r\nPrior to Golang 1.11, Golang uses [**GOPATH mode**](https://tip.golang.org/cmd/go/#hdr-GOPATH_environment_variable) to assist in managing libraries. Libraries referenced by a project are fetched using command [go get](https://tip.golang.org/cmd/go/#hdr-Legacy_GOPATH_go_get). This mode does not require developers to provide any configuration file. It works by matching the [**URLs of the site hosting**](https://divan.dev/posts/gopath/) referenced libraries with the import paths specified by the [go get](https://tip.golang.org/cmd/go/#hdr-Legacy_GOPATH_go_get) command. However, it fetches only a library's latest version. To overcome this restriction, developers use [**third-party tools**](https://github.com/golang/go/wiki/PackageManagementTools) such as [**Dep**](https://github.com/golang/dep) and [**Glide**](https://github.com/Masterminds/glide) to manage different library versions under the same vendor directory.\r\n\r\nhttps://divan.dev/posts/gopath/\r\n```\r\nGOPATH offered a simple and clean structure for your directory - bin/, pkg/ and src/ triplet. \r\nDown the directory depth, the structure was mirroring Go import names, which were mirroring URL of the version control system for the package.\r\nGOPATH didn’t try to solve the versioning problem. It was postponed and offloaded to the third-party tools, and ultimately resulted in Go Modules.\r\nWith GOPATH, there is only one ‘master’ version, and that’s it.\r\n```\r\n\r\nhttps://www.ardanlabs.com/blog/2019/10/modules-01-why-and-what.html\r\n```\r\nWhen operating in GOPATH mode, the solution was to use go get to identify and clone all the repos for all the dependencies into your GOPATH workspace. However, this wasn’t a perfect solution since go get only knows how to clone and update the latest code from the master branch for each dependency. Pulling code from the master branch for each dependency might be fine when you write your initial code. Eventually after a few months (or years) of dependencies evolving independently, the dependencies’ latest master code is likely to no longer be compatible with your project. This is because your project is not respecting the version tags so any upgrade might contain a breaking change.\r\nWhen operating in the new module mode, the option for go get to clone the repos for all the dependencies into a single well defined workspace is no longer preferred. Plus, you need to find a way of referencing a compatible version of each dependency that would work for the entirety of the project. Then there is supporting the use of different major semantic versions of the same dependency within your project incase your dependencies are importing different major versions of the same package.\r\nAlthough some solutions to these problems already existed in the form of community-developed tooling (dep, godep, glide, …), Go needed an integrated solution. The solution was to reuse the module file to maintain a list of direct and sometimes indirect dependencies by version. Then treat any given version of a repo as a single immutable bundle of code. This versioned immutable bundle is called a module.\r\n```\r\n\r\n### Go Modules Mode:\r\nGolang 1.11 introduced the [**Go Modules mode**](https://github.com/golang/go/wiki/Modules), which allows multiple library versions to be referenced by a module using different paths. A module comprises a tree of Golang source files with a [**go.mod**](https://github.com/golang/go/wiki/Modules#gomod) configuration file defined in the tree's root directory. The configuration file explicitly specifies the module's dependency of specific library versions as well as a module path by which the module itself can be uniquely referenced by other projects. The file must be specified according to the [**semantic import versioning (SIV) rules**](https://github.com/golang/go/wiki/Modules). For instance, projects whose major versions are v2 or above, should include a version suffix like `\"/v2\"` at the end of their module paths.\r\n\r\nhttps://github.com/golang/go/wiki/Modules#semantic-import-versioning\r\n```\r\nAs a result of Semantic Import Versioning, code opting in to Go modules must comply with these rules:\r\n1.\tFollow semver. (An example VCS tag is v1.2.3).\r\n2.\tIf the module is version v2 or higher, the major version of the module must be included as a /vN at the end of the module paths used in go.mod files (e.g., module github.com/my/mod/v2, require github.com/my/mod/v2 v2.0.1) and in the package import path (e.g., import \"github.com/my/mod/v2/mypkg\"). This includes the paths used in go get commands (e.g., go get github.com/my/mod/v2@v2.0.1. Note there is both a /v2 and a @v2.0.1 in that example. One way to think about it is that the module name now includes the /v2, so include /v2 whenever you are using the module name).\r\n3.\tIf the module is version v0 or v1, do not include the major version in either the module path or the import path.\r\n```\r\n ![1](https://user-images.githubusercontent.com/62839645/103775670-5c952b00-5069-11eb-9785-35d56cc78f9e.png)\r\nhttps://www.ardanlabs.com/blog/2019/10/modules-01-why-and-what.html\r\n```\r\nModules provide an integrated solution for three key problems that have been a pain point for developers since Go’s initial release:\r\nAbility to work with Go code outside of the GOPATH workspace.\r\nAbility to version a dependency and identify the most compatible version to use.\r\nAbility to manage dependencies natively using the Go tooling.\r\n```\r\n\r\n### Module-aware VS Module-unaware:\r\n**Module-awareness:** The capability of recognizing a virtual path ended with a version suffix like `\"/v2\"` from projects in Go Modules.\r\n \r\n![2](https://user-images.githubusercontent.com/62839645/103775909-ac73f200-5069-11eb-8f68-67b98ab29545.png)\r\n\r\n**Module-aware project:** A project is module-aware if and only if it uses a compatible or new Golang version and does not use any [**third-party tools**](https://github.com/golang/go/wiki/PackageManagementTools).\r\n**Module-unaware project:** A project is module-unaware if and only if it uses a legacy Golang version, or it uses a compatible or new Golang version with a [**third-party tool**](https://github.com/golang/go/wiki/PackageManagementTools).\r\n \r\n![3](https://user-images.githubusercontent.com/62839645/103775975-c281b280-5069-11eb-8812-4725f686b452.png)\r\n\r\nThis figure shows how module-aware and module-unaware projects differ in parsing an import path with or without a **v2+ version suffix**. \r\nFor an import path like `\"github.com/user/projectA\"`, a module-aware project could reference a specific version **v0.∗.∗ or v1.∗.∗** of projectA under v2 (latest version under v2, by default), while a module-unaware project would reference the version on projectA's main branch (typically the latest version). \r\nFor an import path like `\"github.com/user/projectA/v2\"`, a module-aware project could reference a specific version **v2.∗.∗** of projectA (latest version under v3, by default), while a module-unaware project would fail to recognize it.\r\n\r\n## Some concrete issues\r\nMany projects suffered from various issues caused by such mixed dependency management modes. **Go Modules** is not backward compatible with **GOPATH**. SIV rules can be violated even if a Golang project and its referenced upstream projects both use Go Modules. Resolve these issues for a Golang project requires **up-to-date knowledge of its upstream and downstream projects**, as well as their possible heterogeneous uses of two dependency management modes. There are some concrete issues.\r\n\r\n### Issue A:\r\nBuild errors can occur when projects in **GOPATH** with no module-awareness directly or transitively depend on projects in **Go Modules** which have virtual paths with version suffixes.\r\n \r\n![4](https://user-images.githubusercontent.com/62839645/103776428-653a3100-506a-11eb-8969-e92ce29975b2.png)\r\n\r\nE.g.,  issues: pierrec/lz4#33, golang/dep#1962, gin-gonic/gin#2427, asim/go-micro#1839, urfave/cli#866, golang/go#37995, Masterminds/glide#1017, go-redis/redis#1143, Masterminds/glide#968, libp2p/go-libp2p-kad-dht#258, gofrs/uuid#67. \r\n\r\ngolang/dep#1962\r\n```\r\nIf a library has a major version 2, then it's module line in go.mod will be module github.com/foo/bar/v2 even if it is being fetched from github.com/foo/bar. Go, since 1.10.3, will build just fine when using imports like import bar \"github.com/foo/bar/v2\", but dep complains that the repo doesn't have a submodule v2.\r\nAs a result, we can't use dep at all if we depend on packages using go.mod.\r\n```\r\n\r\n### Issue B:\r\n\r\nA project that has migrated to **Go Modules** may not find their referenced libraries in downstream **GOPATH** mode projects, or may fetch unintended library versions, due to different import path interpretations by the two modes.\r\n\r\n- **Issue B.1:**\r\n![5](https://user-images.githubusercontent.com/62839645/103776610-9f0b3780-506a-11eb-8271-1eb9f8d523af.png)\r\nProject A in **Go Modules** depend on project B in **GOPATH**, and B further depend on C in Go Modules with import path `\"C/pkg\"`. Suppose that C has released a v2+ version with the major branch strategy. From B's perspective, it interprets the import path as C's latest version (i.e., v2+ version on C's main branch). However, in A's build environment, the import path is interpreted as a v0/v1 version of C (no version suffix in the path). As a result, A fails to fetch C's correct version and can encounter errors when building with B. \r\nE.g.,  issues: cockroachdb/cockroach#47246, asim/go-micro#1731, kubernetes/client-go#474.\r\n\r\n- **Issue B.2:**\r\n ![6](https://user-images.githubusercontent.com/62839645/103776697-c8c45e80-506a-11eb-9516-35b22d4f97b5.png)\r\nProject A in **Go Modules** depend on project B in **GOPATH**, and B further depend on project C, which is managed in B's Vendor directory. Project A references C by import path `\"C/pkg\"` declared in B's source files rather than from B's Vendor directory. Although the build may work for the time being, A can fail to fetch C if C is deleted or moved to another repository (e.g., renaming). Even if the fetching is successful, the version on C's hosting site could be different from the one in B's **Vendor directory**, causing potential build errors due to the inconsistency.\r\nE.g.,  issues: hybridgroup/gobot#689, sirupsen/logrus#1041, go-kit/kit#940, golang/lint#436, go-macaron/macaron#185, moby/moby#39302, grpc/grpc-go#2700, google/go-cloud#429, hybridgroup/gobot#689.\r\n\r\nhybridgroup/gobot#689\r\n```\r\nThis is due to the usage of the dependency \"github.com/codegangsta/cli\", which has been renamed to \"github.com/urfave/cli\"\r\n```\r\n\r\n### Issue C:\r\nErrors will occur when projects in **Go Modules** depend on projects also in **Go Modules** but not following **SIV rules**:\r\n(1) lacking version suffixes like `\"/v2\"` in module paths or import paths, although the versions of concerned projects are v2+ (e.g., issue kataras/iris#1355, pierrec/lz4#39, v2ray/v2ray-core#2438, etcd-io/etcd#11154, prometheus/prometheus#6048, vitessio/vitess#5019, golang/go#32695, dgrijalva/jwt-go#301, shirou/gopsutil#663); \r\n(2) version tags not following the [**semver**](https://semver.org/) (e.g., issue osrg/gobgp#1848, gohugoio/hugo#5639, gin-gonic/gin#1388, rclone/rclone#2960, robfig/cron#196); \r\n(3) module paths in go.mod files inconsistent with URLs associated with concerned projects on their hosting sites (e.g., issue jwplayer/jwplatformgo#9, micro/micro#272, etcd-io/etcd#11808).\r\n\r\nhttps://github.com/golang/go/issues/31543\r\n```\r\nOf the various go.mod files I have looked at in repos with v2+ semver tags over the last several months, I estimate more than 50% of those go.mod files are incorrect due to missing the required /vN at the end of the module path.\r\n```\r\nhttps://github.com/golang/go/issues/32695\r\n```\r\nObserve people accidentally creating and using modules that have v2+ semver tags but that have not adopted Semantic Import Versioning.\r\nFor example, if there is a module example.com/foo that:\r\n>has a go.mod file (that is, it has adopted modules)\r\n>has a v2.0.0 semver tag as its latest tag\r\n>and its module line reads module example.com/foo (without the in theory required /v2)\r\nthen this still works for a module-based consumer, even though the module is in a \"bad\" state:\r\ngo get example.com.com/foo@v2.0.0+incompatible\r\nThis means people can and do create usable v2+ modules that did not adopt Semantic Import Versioning, and consumers can and do consume those \"bad\" modules.\r\nHowever, other things such as upgrades or go get example.com.com/foo@latest do not work as expected, which leads to confusion.\r\n```\r\n\r\n## Fixing Solutions\r\nIn order to resolve the above issues, developers have come up with various solutions. But resolve these issues for a Golang project requires **up-to-date knowledge of its upstream and downstream projects**, as well as their possible heterogeneous uses of two dependency management modes. Resolving these issues in a project locally without considering the ecosystem in a holistic way can easily cause new issues to its downstream projects.\r\n\r\n### Cases\r\n\r\n- **Case 1:** \r\nProject [**pierrec/lz4**](github.com/pierrec/lz4) migrated to **Go Modules** in version **v2.0.7**. Following SIV rules, it declared module path `\"github.com/pierrec/lz4/v2\"` in its go.mod file with version suffix `\"/v2\"`. Although the project can be built successfully after migration, it induced **Issue A** to downstream projects still in **GOPATH**, since the latter cannot recognize the version suffix in module path. \r\nE.g., issues: pierrec/lz4#33, Shopify/sarama#1163, mholt/archiver#86, filebrowser/filebrowser#530.\r\n ![7](https://user-images.githubusercontent.com/62839645/103777641-2ad19380-506c-11eb-9b49-4635fcfebb8c.png)\r\n![8](https://user-images.githubusercontent.com/62839645/103784789-56a54700-5075-11eb-96f7-671901ca5ca4.png)\r\nTo fix the issue, [**pierrec/lz4**](github.com/pierrec/lz4) released version **v2.2.4** still in **Go Modules**, but removed version suffix `\"/v2\"` from its module path as a workaround. This resolved the **Issue A** in its downstream projects in **GOPATH**, but induced **Issue C** to downstream projects that had already migrated to **Go Modules**, causing build errors, since this solution violates SIV rules. \r\nE.g., issues: pierrec/lz4#39, golang/go#32695, golang/go#34189, golang/go#31428\r\n![9](https://user-images.githubusercontent.com/62839645/103777817-653b3080-506c-11eb-9406-4b2192029178.png)\r\nAs there is no accurate way to estimate the migration impact to its downstream projects, [**pierrec/lz4**](github.com/pierrec/lz4) chose to roll back to **GOPATH** in **v2.2.6** and suspended its migration until its most downstream projects had completed migrations. \r\nFinally, [**pierrec/lz4**](github.com/pierrec/lz4) migrated to Go Modules again in version **v3.0.**1. And it induced **Issue A** to downstream projects still in GOPATH again.\r\nE.g., issues: kythe/kythe#4208, pierrec/lz4#62, wrouesnel/postgres_exporter#408, forensicanalysis/artifactcollector#18, go-rod/rod#108.\r\n\r\n- **Case 2:** \r\nProject [**golang-migrate/migrate**](github.com/golang-migrate/migrate) migrated to **Go Modules** in version **v3.5.2** and declared its module path as `\"github.com/golang-migrate/migrate/v3\"` in go.mod file with version suffix `\"/v3\"`. It induced **Issue A** to downstream projects still in **GOPATH**, since the latter cannot recognize the version suffix in module path. \r\n ![10](https://user-images.githubusercontent.com/62839645/103780527-08417980-5070-11eb-8cae-b53ac9c2d454.png)\r\n![11](https://user-images.githubusercontent.com/62839645/103780539-0ecff100-5070-11eb-819c-1cea892dc362.png)\r\nTo fix the issue, [**golang-migrate/migrate**](github.com/golang-migrate/migrate) took the form of a vote in the ecosystem, learning that downstream users preferred this solution: roll back to **GOPATH** until the next version v4.\r\n ![12](https://user-images.githubusercontent.com/62839645/103780607-2ad39280-5070-11eb-9cb2-a9ce54fb529a.png)\r\n\r\n**Below summarize eight common fixing solutions with different trade-offs.**\r\n \r\n![13](https://user-images.githubusercontent.com/62839645/103780702-4d65ab80-5070-11eb-8748-938feddb39f5.png)\r\n\r\n### Solution 1: Projects in GOPATH migrate to Go Modules. \r\nIt encourages migration from GOPATH to Go Modules, for fixing **Issue A**, since **Issue A** is due to projects still in GOPATH and unable to recognize import paths with version suffixes. \r\nFor example, in issue go-redis/redis#1154, project [**go-redis/redis**](https://github.com/go-redis/redis) migrated to Go Modules, but its downstream projects were still in GOPATH. Then, downstream projects were suggested to migrate to Go Modules as well to avoid build errors. This solved downstream projects' **Issue A**, but also caused **Issue A** to downstream projects' module-unaware downstream projects. As a result, new **Issue A** (e.g., issues Jeffail/benthos#232, Jeffail/benthos#270) occurred for these projects.\r\nExamples: golang/go#37995, filebrowser/filebrowser#530, gotestyourself/gotest.tools#203, kataras/iris#1385, labstack/echo#1321, micro/go-micro#1839, urfave/cli#866, DataDog/dd-trace-go#606, oauth2-proxy/oauth2-proxy#642, prometheus/client_golang#673.\r\n_`[This solution will affect downstream projects in GOPATH]`_\r\n\r\n### Solution 2: Projects in Go Modules roll back to GOPATH.\r\nIt cancels previous Go Modules migration, for fixing **Issue A** and **Issue C**, by solving migration's caused incompatibility. \r\nFor example, in issue gofrs/uuid#61(**Issue A**), project [**gofrs/uuid**](https://github.com/gofrs/uuid)'s migration to Go Modules broke many downstream projects' building (in GOPATH). As a compromise, [**gofrs/uuid**](https://github.com/gofrs/uuid) rolled back to GOPATH, waiting for downstream projects to migrate first. In issue shirou/gopsutil#663(**Issue C**), [**shirou/gopsutil**](https://github.com/shirou/gopsutil) and its downstream projects were all in Go Modules, but [**shirou/gopsutil**](https://github.com/shirou/gopsutil) violated SIV rules (lacking a version suffix in its module path of v2+ release), causing build errors to downstream projects. As such, [**shirou/gopsutil**](https://github.com/shirou/gopsutil) chose to roll back to GOPATH, temporarily making downstream projects to work again. This solves the problem, but hinders the migration status to the ecosystem.\r\nExamples:  [dgraph-io/badger#4662](https://discuss.dgraph.io/t/go-modules-on-badger-and-dgraph/4662), golang-migrate/migrate#103, go-mail/mail#39, patrickmn/go-cache#89, stripe/stripe-go#712, cenkalti/backoff#76, go-redis/redis#1149, go-chi/chi#327, pierrec/lz4#39, go-chi/jwtauth#42, sercand/kuberesolver#11. \r\n\r\n### Solution 3: Changing the strategy of releasing v2+ projects in Go Modules from major branch to subdirectory.\r\nIt targets at **Issue A**, where module-unaware projects cannot recognize virtual import paths for v2+ libraries in Go Modules. The new strategy creates physical paths by code cloning, so that libraries can be referenced by module-unaware projects. However, this is a workaround treatment and needs extra maintenance in subsequent releases.\r\nExamples: mediocregopher/radix#128, nicksnyder/go-i18n#184, olivere/elastic#1145, gomodule/redigo#366, golang/go#37995, twitchtv/twirp#169.  \r\n\r\n### Solution 4: Maintaining v2+ libraries in Go Modules in downstream projects' Vendor directories rather than referencing them by virtual import paths.\r\nIt targets at **Issue A**. By making a copy of libraries in downstream projects, these projects can avoid fetching them by virtual import paths. \r\nFor example, in issue mediocregopher/radix#141, [**mediocregopher/radix**](https://github.com/mediocregopher/radix) refused to use the major subdirectory strategy for its v2+ project release in Go Modules. Its downstream projects had to make a copy of [**mediocregopher/radix**](https://github.com/mediocregopher/radix)’s code in their Vendor directories, causing extra maintenance and potential **Issue B** in future. \r\nExamples: brianvoe/gofakeit#88, gopherjs/gopherjs#881, go-redis/redis#1143, mholt/archiver#192, moby/moby#40371, vmihailenco/msgpack#237.\r\n_`[This solution may affect downstream projects in Go Modules]`_\r\n\r\n### Solution 5: Using a replace directive with version information to avoid using import paths in referencing libraries.\r\nIt addresses **Issue B.1** (problematic import path interpretations) and **Issue C** (import path violating SIV rules). \r\nFor example, in issue andrewstuart/goq#12, a client project used a directive to replace the original import path: `\"replace github.com/andrewstuart/goq => astuart.co/goq v1.0.0\"`, to reference its expected project [**andrewstuart/goq**](https://github.com/andrewstuart/goq)'s version. However, this makes developers no longer able to use the go get command to fetch automatically upgraded libraries.\r\nExamples: maistra/istio#78, scylladb/gocql#3, etcd-io/etcd#10773, cockroachdb/cockroach#47246, micro/micro#1149, moby/moby#39302, grpc/grpc-go#3500. \r\n\r\n### Solution 6: Updating import paths for libraries that have changed their repositories.\r\nIt fixes **Issue B.2**, where libraries in a project's Vendor directory may be inconsistent with the ones referenced by their import paths. It updates import paths to help a project's downstream projects in Go Modules fetch consistent library versions. \r\nFor example, in issue google/go-cloud#429, [**google/go-cloud**](https://github.com/google/go-cloud) managed library **coreos/etcd** in its Vendor directory, which later changed its hosting repository from **`github.com/coreos/etcd`** to `**go.etcd.io/etcd**`. To fix build errors for [**google/go-cloud**](https://github.com/google/go-cloud)'s downstream projects in Go Modules, it updated **coreos/etcd**'s import path to the latest one for the consistency. This fixes the issue, benefiting all affected downstream projects, without impacting others in the ecosystem.\r\nExamples: hybridgroup/gobot#689, kythe/kythe#3344, pion/webrtc#1082, census-instrumentation/opencensus-go#1052, micro/go-plugins#372, go-kit/kit#940, golang/lint#436, golang/oauth2#395, sirupsen/logrus#1041, nats-io/nats.go#478, unknwon/com#26. \r\n\r\n### Solution 7: Projects in Go Modules fix configuration items to strictly follow SIV rules.\r\nIt urges projects that have migrated to Go Modules to follow [**Golang's official guidelines on SIV rules**](https://github.com/golang/go/wiki/Modules#semantic-import-versioning), for fixing **Issue C**. \r\nFor example, in issue go-redis/redis#1149, project [**go-redis/redis**](https://github.com/go-redis/redis) added version suffix` \"/v7\"` at the end of its module path to follow SIV rules. However, **Issue C** fixed, but the project's downstream projects in GOPATH may encounter **Issue A** (unable to recognize such version suffixes, e.g., issue go-redis/redis#1151).\r\nExamples: etcd-io/etcd#11154, godbus/dbus#125, gotestyourself/gotest.tools#140, Jeffail/benthos#232, kataras/iris#1355, labstack/echo#1244, mholt/archiver#187, golang/go#27009, golang/go#33879, gin-gonic/gin#1388, golangci/golangci-lint#371, osrg/gobgp#1848, golang/go#37529, gohugoio/hugo#5639, istio/api#1201, golang/go#29731, vitessio/vitess#5019, googleforgames/open-match#675, micro/micro#272, microsoft/go-winio#156, golang/go#31437. \r\n_`[This solution may affect downstream projects in GOPATH]`_\r\n\r\n### Solution 8: Using a hash commit ID for a specific version to replace a problematic version number in library referencing.\r\nDownstream projects use this approach to avoid **Issue** C, where some projects in Go Modules violate SIV rules in version numbers and cause build errors to downstream projects also in Go Modules. It avoids referencing problematic version numbers, by require directives with the specific hash commit ID in downstream projects' go.mod files. \r\nFor example, in issue prometheus/prometheus#6048, one of [**prometheus/prometheus**](https://github.com/prometheus/prometheus)'s downstream projects in Go Modules chose to use **directive** `\"require github.com/prometheus/prometheus 43acd0e\"` to reference its expected version v2.12.0. As Solution 5, this also causes developers cannot fetch automatically upgraded libraries.\r\nExamples: argoproj/argo#2602, concourse/concourse#3952, ibm-messaging/mq-golang#121, dexidp/dex#1710, zouyx/agollo#78, rwynn/monstache#316, pingcap/parser#812. \r\n_`[This solution will affect downstream projects in Go Modules]`_\r\n\r\n### **As it stands**, **GOPATH** mode and **Go Modules** mode will co-exist for a while in the ecosystem. Developers are likely to encounter these issues again. \r\n@bcmills  @mvdan @thepudds @rsc \r\nThe purpose of this report is to help developers understand these issues better and find the best solution to fix the issues. Hope this report can help the ecosystem make a smooth transition from **GOPATH** to **Go Modules**.\r\n\r\n## References:\r\n* https://yourbasic.org/golang/\r\n* https://divan.dev/posts/gopath/\r\n* https://tip.golang.org/doc/\r\n* https://github.com/golang/go/wiki/Modules\r\n* https://github.com/golang/go/wiki/PackageManagementTools\r\n* https://github.com/golang/go/issues/25967\r\n* https://github.com/golang/go/issues/27009\r\n* https://github.com/gofrs/uuid/issues/61\r\n* https://golang.org/cmd/go/#hdr-Legacy_GOPATH_go_get\r\n\r\n","reactions":{"url":"https://api.github.com/repos/golang/go/issues/43542/reactions","total_count":5,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":5,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/golang/go/issues/43542/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"KateGo520","id":62839645,"node_id":"MDQ6VXNlcjYyODM5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/62839645?v=4","gravatar_id":"","url":"https://api.github.com/users/KateGo520","html_url":"https://github.com/KateGo520","followers_url":"https://api.github.com/users/KateGo520/followers","following_url":"https://api.github.com/users/KateGo520/following{/other_user}","gists_url":"https://api.github.com/users/KateGo520/gists{/gist_id}","starred_url":"https://api.github.com/users/KateGo520/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KateGo520/subscriptions","organizations_url":"https://api.github.com/users/KateGo520/orgs","repos_url":"https://api.github.com/users/KateGo520/repos","events_url":"https://api.github.com/users/KateGo520/events{/privacy}","received_events_url":"https://api.github.com/users/KateGo520/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-07T02:31:49Z","updated_at":"2021-01-07T02:31:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/KateGo520/Hero/issues/1","repository_url":"https://api.github.com/repos/KateGo520/Hero","labels_url":"https://api.github.com/repos/KateGo520/Hero/issues/1/labels{/name}","comments_url":"https://api.github.com/repos/KateGo520/Hero/issues/1/comments","events_url":"https://api.github.com/repos/KateGo520/Hero/issues/1/events","html_url":"https://github.com/KateGo520/Hero/issues/1","id":780979309,"node_id":"MDU6SXNzdWU3ODA5NzkzMDk=","number":1,"title":"A survey on Golang's dependency management modes (GOPATH and Go Modules): status quo, problems and challenges","user":{"login":"KateGo520","id":62839645,"node_id":"MDQ6VXNlcjYyODM5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/62839645?v=4","gravatar_id":"","url":"https://api.github.com/users/KateGo520","html_url":"https://github.com/KateGo520","followers_url":"https://api.github.com/users/KateGo520/followers","following_url":"https://api.github.com/users/KateGo520/following{/other_user}","gists_url":"https://api.github.com/users/KateGo520/gists{/gist_id}","starred_url":"https://api.github.com/users/KateGo520/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KateGo520/subscriptions","organizations_url":"https://api.github.com/users/KateGo520/orgs","repos_url":"https://api.github.com/users/KateGo520/repos","events_url":"https://api.github.com/users/KateGo520/events{/privacy}","received_events_url":"https://api.github.com/users/KateGo520/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-01-07T02:31:46Z","updated_at":"2021-01-16T11:30:49Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":291266842,"node_id":"MDEwOlJlcG9zaXRvcnkyOTEyNjY4NDI=","name":"Hero","full_name":"KateGo520/Hero","private":false,"owner":{"login":"KateGo520","id":62839645,"node_id":"MDQ6VXNlcjYyODM5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/62839645?v=4","gravatar_id":"","url":"https://api.github.com/users/KateGo520","html_url":"https://github.com/KateGo520","followers_url":"https://api.github.com/users/KateGo520/followers","following_url":"https://api.github.com/users/KateGo520/following{/other_user}","gists_url":"https://api.github.com/users/KateGo520/gists{/gist_id}","starred_url":"https://api.github.com/users/KateGo520/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KateGo520/subscriptions","organizations_url":"https://api.github.com/users/KateGo520/orgs","repos_url":"https://api.github.com/users/KateGo520/repos","events_url":"https://api.github.com/users/KateGo520/events{/privacy}","received_events_url":"https://api.github.com/users/KateGo520/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/KateGo520/Hero","description":"Repo of www.hero-go.com/","fork":false,"url":"https://api.github.com/repos/KateGo520/Hero","forks_url":"https://api.github.com/repos/KateGo520/Hero/forks","keys_url":"https://api.github.com/repos/KateGo520/Hero/keys{/key_id}","collaborators_url":"https://api.github.com/repos/KateGo520/Hero/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/KateGo520/Hero/teams","hooks_url":"https://api.github.com/repos/KateGo520/Hero/hooks","issue_events_url":"https://api.github.com/repos/KateGo520/Hero/issues/events{/number}","events_url":"https://api.github.com/repos/KateGo520/Hero/events","assignees_url":"https://api.github.com/repos/KateGo520/Hero/assignees{/user}","branches_url":"https://api.github.com/repos/KateGo520/Hero/branches{/branch}","tags_url":"https://api.github.com/repos/KateGo520/Hero/tags","blobs_url":"https://api.github.com/repos/KateGo520/Hero/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/KateGo520/Hero/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/KateGo520/Hero/git/refs{/sha}","trees_url":"https://api.github.com/repos/KateGo520/Hero/git/trees{/sha}","statuses_url":"https://api.github.com/repos/KateGo520/Hero/statuses/{sha}","languages_url":"https://api.github.com/repos/KateGo520/Hero/languages","stargazers_url":"https://api.github.com/repos/KateGo520/Hero/stargazers","contributors_url":"https://api.github.com/repos/KateGo520/Hero/contributors","subscribers_url":"https://api.github.com/repos/KateGo520/Hero/subscribers","subscription_url":"https://api.github.com/repos/KateGo520/Hero/subscription","commits_url":"https://api.github.com/repos/KateGo520/Hero/commits{/sha}","git_commits_url":"https://api.github.com/repos/KateGo520/Hero/git/commits{/sha}","comments_url":"https://api.github.com/repos/KateGo520/Hero/comments{/number}","issue_comment_url":"https://api.github.com/repos/KateGo520/Hero/issues/comments{/number}","contents_url":"https://api.github.com/repos/KateGo520/Hero/contents/{+path}","compare_url":"https://api.github.com/repos/KateGo520/Hero/compare/{base}...{head}","merges_url":"https://api.github.com/repos/KateGo520/Hero/merges","archive_url":"https://api.github.com/repos/KateGo520/Hero/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/KateGo520/Hero/downloads","issues_url":"https://api.github.com/repos/KateGo520/Hero/issues{/number}","pulls_url":"https://api.github.com/repos/KateGo520/Hero/pulls{/number}","milestones_url":"https://api.github.com/repos/KateGo520/Hero/milestones{/number}","notifications_url":"https://api.github.com/repos/KateGo520/Hero/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/KateGo520/Hero/labels{/name}","releases_url":"https://api.github.com/repos/KateGo520/Hero/releases{/id}","deployments_url":"https://api.github.com/repos/KateGo520/Hero/deployments","created_at":"2020-08-29T12:26:33Z","updated_at":"2023-10-10T03:44:11Z","pushed_at":"2021-04-29T08:53:50Z","git_url":"git://github.com/KateGo520/Hero.git","ssh_url":"git@github.com:KateGo520/Hero.git","clone_url":"https://github.com/KateGo520/Hero.git","svn_url":"https://github.com/KateGo520/Hero","homepage":null,"size":22866,"stargazers_count":5,"watchers_count":5,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":2,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":2,"open_issues":1,"watchers":5,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**This report has been collected into [golang/go/wiki/ExperienceReports]**(https://github.com/golang/go/wiki/ExperienceReports#modules).\r\n\r\n**The following empirical findings are summarized based on a research paper:**\r\n[ICSE’21] Ying Wang, Liang Qiao, Chang Xu*, Yepang Liu, Na Meng, Shing-Chi Cheung, Hai Yu and Zhiliang Zhu. [_Hero: On the Chaos When PATH Meets Modules_](http://faculty.neu.edu.cn/swc/wangying/Paper/Hero%20On%20the%20Chaos%20When%20PATH%20Meets%20Modules.pdf), In 43rd International Conference on Software Engineering (ICSE 2021).\r\n\r\n\r\n## Background\r\nGolang has two dependency management modes, GOPATH and Go Modules.\r\n### GOPATH Mode:\r\nPrior to Golang 1.11, Golang uses [**GOPATH mode**](https://tip.golang.org/cmd/go/#hdr-GOPATH_environment_variable) to assist in managing libraries. Libraries referenced by a project are fetched using command [go get](https://tip.golang.org/cmd/go/#hdr-Legacy_GOPATH_go_get). This mode does not require developers to provide any configuration file. It works by matching the [**URLs of the site hosting**](https://divan.dev/posts/gopath/) referenced libraries with the import paths specified by the [go get](https://tip.golang.org/cmd/go/#hdr-Legacy_GOPATH_go_get) command. However, it fetches only a library's latest version. To overcome this restriction, developers use [**third-party tools**](https://github.com/golang/go/wiki/PackageManagementTools) such as [**Dep**](https://github.com/golang/dep) and [**Glide**](https://github.com/Masterminds/glide) to manage different library versions under the same vendor directory.\r\n\r\nhttps://divan.dev/posts/gopath/\r\n```\r\nGOPATH offered a simple and clean structure for your directory - bin/, pkg/ and src/ triplet. \r\nDown the directory depth, the structure was mirroring Go import names, which were mirroring URL of the version control system for the package.\r\nGOPATH didn’t try to solve the versioning problem. It was postponed and offloaded to the third-party tools, and ultimately resulted in Go Modules.\r\nWith GOPATH, there is only one ‘master’ version, and that’s it.\r\n```\r\n\r\nhttps://www.ardanlabs.com/blog/2019/10/modules-01-why-and-what.html\r\n```\r\nWhen operating in GOPATH mode, the solution was to use go get to identify and clone all the repos for all the dependencies into your GOPATH workspace. However, this wasn’t a perfect solution since go get only knows how to clone and update the latest code from the master branch for each dependency. Pulling code from the master branch for each dependency might be fine when you write your initial code. Eventually after a few months (or years) of dependencies evolving independently, the dependencies’ latest master code is likely to no longer be compatible with your project. This is because your project is not respecting the version tags so any upgrade might contain a breaking change.\r\nWhen operating in the new module mode, the option for go get to clone the repos for all the dependencies into a single well defined workspace is no longer preferred. Plus, you need to find a way of referencing a compatible version of each dependency that would work for the entirety of the project. Then there is supporting the use of different major semantic versions of the same dependency within your project incase your dependencies are importing different major versions of the same package.\r\nAlthough some solutions to these problems already existed in the form of community-developed tooling (dep, godep, glide, …), Go needed an integrated solution. The solution was to reuse the module file to maintain a list of direct and sometimes indirect dependencies by version. Then treat any given version of a repo as a single immutable bundle of code. This versioned immutable bundle is called a module.\r\n```\r\n\r\n### Go Modules Mode:\r\nGolang 1.11 introduced the [**Go Modules mode**](https://github.com/golang/go/wiki/Modules), which allows multiple library versions to be referenced by a module using different paths. A module comprises a tree of Golang source files with a [**go.mod**](https://github.com/golang/go/wiki/Modules#gomod) configuration file defined in the tree's root directory. The configuration file explicitly specifies the module's dependency of specific library versions as well as a module path by which the module itself can be uniquely referenced by other projects. The file must be specified according to the [**semantic import versioning (SIV) rules**](https://github.com/golang/go/wiki/Modules). For instance, projects whose major versions are v2 or above, should include a version suffix like `\"/v2\"` at the end of their module paths.\r\n\r\nhttps://github.com/golang/go/wiki/Modules#semantic-import-versioning\r\n```\r\nAs a result of Semantic Import Versioning, code opting in to Go modules must comply with these rules:\r\n1.\tFollow semver. (An example VCS tag is v1.2.3).\r\n2.\tIf the module is version v2 or higher, the major version of the module must be included as a /vN at the end of the module paths used in go.mod files (e.g., module github.com/my/mod/v2, require github.com/my/mod/v2 v2.0.1) and in the package import path (e.g., import \"github.com/my/mod/v2/mypkg\"). This includes the paths used in go get commands (e.g., go get github.com/my/mod/v2@v2.0.1. Note there is both a /v2 and a @v2.0.1 in that example. One way to think about it is that the module name now includes the /v2, so include /v2 whenever you are using the module name).\r\n3.\tIf the module is version v0 or v1, do not include the major version in either the module path or the import path.\r\n```\r\n ![1](https://user-images.githubusercontent.com/62839645/103775670-5c952b00-5069-11eb-9785-35d56cc78f9e.png)\r\nhttps://www.ardanlabs.com/blog/2019/10/modules-01-why-and-what.html\r\n```\r\nModules provide an integrated solution for three key problems that have been a pain point for developers since Go’s initial release:\r\nAbility to work with Go code outside of the GOPATH workspace.\r\nAbility to version a dependency and identify the most compatible version to use.\r\nAbility to manage dependencies natively using the Go tooling.\r\n```\r\n\r\n### Module-aware VS Module-unaware:\r\n**Module-awareness:** The capability of recognizing a virtual path ended with a version suffix like `\"/v2\"` from projects in Go Modules.\r\n \r\n![2](https://user-images.githubusercontent.com/62839645/103775909-ac73f200-5069-11eb-8f68-67b98ab29545.png)\r\n\r\n**Module-aware project:** A project is module-aware if and only if it uses a compatible or new Golang version and does not use any [**third-party tools**](https://github.com/golang/go/wiki/PackageManagementTools).\r\n**Module-unaware project:** A project is module-unaware if and only if it uses a legacy Golang version, or it uses a compatible or new Golang version with a [**third-party tool**](https://github.com/golang/go/wiki/PackageManagementTools).\r\n \r\n![3](https://user-images.githubusercontent.com/62839645/103775975-c281b280-5069-11eb-8812-4725f686b452.png)\r\n\r\nThis figure shows how module-aware and module-unaware projects differ in parsing an import path with or without a **v2+ version suffix**. \r\nFor an import path like `\"github.com/user/projectA\"`, a module-aware project could reference a specific version **v0.∗.∗ or v1.∗.∗** of projectA under v2 (latest version under v2, by default), while a module-unaware project would reference the version on projectA's main branch (typically the latest version). \r\nFor an import path like `\"github.com/user/projectA/v2\"`, a module-aware project could reference a specific version **v2.∗.∗** of projectA (latest version under v3, by default), while a module-unaware project would fail to recognize it.\r\n\r\n## Some concrete issues\r\nMany projects suffered from various issues caused by such mixed dependency management modes. **Go Modules** is not backward compatible with **GOPATH**. SIV rules can be violated even if a Golang project and its referenced upstream projects both use Go Modules. Resolve these issues for a Golang project requires **up-to-date knowledge of its upstream and downstream projects**, as well as their possible heterogeneous uses of two dependency management modes. There are some concrete issues.\r\n\r\n### Issue A:\r\nBuild errors can occur when projects in **GOPATH** with no module-awareness directly or transitively depend on projects in **Go Modules** which have virtual paths with version suffixes.\r\n \r\n![4](https://user-images.githubusercontent.com/62839645/103776428-653a3100-506a-11eb-8969-e92ce29975b2.png)\r\n\r\nE.g.,  issues: pierrec/lz4#33, golang/dep#1962, gin-gonic/gin#2427, asim/go-micro#1839, urfave/cli#866, golang/go#37995, Masterminds/glide#1017, go-redis/redis#1143, Masterminds/glide#968, libp2p/go-libp2p-kad-dht#258, gofrs/uuid#67. \r\n\r\n[golang/dep#1962](https://github.com/golang/dep/issues/1962)\r\n```\r\nIf a library has a major version 2, then it's module line in go.mod will be module github.com/foo/bar/v2 even if it is being fetched from github.com/foo/bar. Go, since 1.10.3, will build just fine when using imports like import bar \"github.com/foo/bar/v2\", but dep complains that the repo doesn't have a submodule v2.\r\nAs a result, we can't use dep at all if we depend on packages using go.mod.\r\n```\r\n\r\n### Issue B:\r\n\r\nA project that has migrated to **Go Modules** may not find their referenced libraries in downstream **GOPATH** mode projects, or may fetch unintended library versions, due to different import path interpretations by the two modes.\r\n\r\n- **Issue B.1:**\r\n![5](https://user-images.githubusercontent.com/62839645/103776610-9f0b3780-506a-11eb-8271-1eb9f8d523af.png)\r\nProject A in **Go Modules** depend on project B in **GOPATH**, and B further depend on C in Go Modules with import path `\"C/pkg\"`. Suppose that C has released a v2+ version with the major branch strategy. From B's perspective, it interprets the import path as C's latest version (i.e., v2+ version on C's main branch). However, in A's build environment, the import path is interpreted as a v0/v1 version of C (no version suffix in the path). As a result, A fails to fetch C's correct version and can encounter errors when building with B. \r\nE.g.,  issues: cockroachdb/cockroach#47246, asim/go-micro#1731, kubernetes/client-go#474.\r\n\r\n- **Issue B.2:**\r\n ![6](https://user-images.githubusercontent.com/62839645/103776697-c8c45e80-506a-11eb-9516-35b22d4f97b5.png)\r\nProject A in **Go Modules** depend on project B in **GOPATH**, and B further depend on project C, which is managed in B's Vendor directory. Project A references C by import path `\"C/pkg\"` declared in B's source files rather than from B's Vendor directory. Although the build may work for the time being, A can fail to fetch C if C is deleted or moved to another repository (e.g., renaming). Even if the fetching is successful, the version on C's hosting site could be different from the one in B's **Vendor directory**, causing potential build errors due to the inconsistency.\r\nE.g.,  issues: hybridgroup/gobot#689, sirupsen/logrus#1041, go-kit/kit#940, golang/lint#436, go-macaron/macaron#185, moby/moby#39302, grpc/grpc-go#2700, google/go-cloud#429, hybridgroup/gobot#689.\r\n\r\nhybridgroup/gobot#689\r\n```\r\nThis is due to the usage of the dependency \"github.com/codegangsta/cli\", which has been renamed to \"github.com/urfave/cli\"\r\n```\r\n\r\n### Issue C:\r\nErrors will occur when projects in **Go Modules** depend on projects also in **Go Modules** but not following **SIV rules**:\r\n(1) lacking version suffixes like `\"/v2\"` in module paths or import paths, although the versions of concerned projects are v2+ (e.g., issue kataras/iris#1355, pierrec/lz4#39, v2ray/v2ray-core#2438, etcd-io/etcd#11154, prometheus/prometheus#6048, vitessio/vitess#5019, golang/go#32695, dgrijalva/jwt-go#301, shirou/gopsutil#663); \r\n(2) version tags not following the [**semver**](https://semver.org/) (e.g., issue osrg/gobgp#1848, gohugoio/hugo#5639, gin-gonic/gin#1388, rclone/rclone#2960, robfig/cron#196); \r\n(3) module paths in go.mod files inconsistent with URLs associated with concerned projects on their hosting sites (e.g., issue jwplayer/jwplatformgo#9, micro/micro#272, etcd-io/etcd#11808).\r\n\r\nhttps://github.com/golang/go/issues/31543\r\n```\r\nOf the various go.mod files I have looked at in repos with v2+ semver tags over the last several months, I estimate more than 50% of those go.mod files are incorrect due to missing the required /vN at the end of the module path.\r\n```\r\nhttps://github.com/golang/go/issues/32695\r\n```\r\nObserve people accidentally creating and using modules that have v2+ semver tags but that have not adopted Semantic Import Versioning.\r\nFor example, if there is a module example.com/foo that:\r\n>has a go.mod file (that is, it has adopted modules)\r\n>has a v2.0.0 semver tag as its latest tag\r\n>and its module line reads module example.com/foo (without the in theory required /v2)\r\nthen this still works for a module-based consumer, even though the module is in a \"bad\" state:\r\ngo get example.com.com/foo@v2.0.0+incompatible\r\nThis means people can and do create usable v2+ modules that did not adopt Semantic Import Versioning, and consumers can and do consume those \"bad\" modules.\r\nHowever, other things such as upgrades or go get example.com.com/foo@latest do not work as expected, which leads to confusion.\r\n```\r\n\r\n## Fixing Solutions\r\nIn order to resolve the above issues, developers have come up with various solutions. But resolve these issues for a Golang project requires **up-to-date knowledge of its upstream and downstream projects**, as well as their possible heterogeneous uses of two dependency management modes. Resolving these issues in a project locally without considering the ecosystem in a holistic way can easily cause new issues to its downstream projects.\r\n\r\n### Cases\r\n\r\n- **Case 1:** \r\nProject [**pierrec/lz4**](github.com/pierrec/lz4) migrated to **Go Modules** in version **v2.0.7**. Following SIV rules, it declared module path `\"github.com/pierrec/lz4/v2\"` in its go.mod file with version suffix `\"/v2\"`. Although the project can be built successfully after migration, it induced **Issue A** to downstream projects still in **GOPATH**, since the latter cannot recognize the version suffix in module path. \r\nE.g., issues: pierrec/lz4#33, Shopify/sarama#1163, mholt/archiver#86, filebrowser/filebrowser#530.\r\n ![7](https://user-images.githubusercontent.com/62839645/103777641-2ad19380-506c-11eb-9b49-4635fcfebb8c.png)\r\n![8](https://user-images.githubusercontent.com/62839645/103784789-56a54700-5075-11eb-96f7-671901ca5ca4.png)\r\nTo fix the issue, [**pierrec/lz4**](github.com/pierrec/lz4) released version **v2.2.4** still in **Go Modules**, but removed version suffix `\"/v2\"` from its module path as a workaround. This resolved the **Issue A** in its downstream projects in **GOPATH**, but induced **Issue C** to downstream projects that had already migrated to **Go Modules**, causing build errors, since this solution violates SIV rules. \r\nE.g., issues: pierrec/lz4#39, golang/go#32695, golang/go#34189, golang/go#31428\r\n![9](https://user-images.githubusercontent.com/62839645/103777817-653b3080-506c-11eb-9406-4b2192029178.png)\r\nAs there is no accurate way to estimate the migration impact to its downstream projects, [**pierrec/lz4**](github.com/pierrec/lz4) chose to roll back to **GOPATH** in **v2.2.6** and suspended its migration until its most downstream projects had completed migrations. \r\nFinally, [**pierrec/lz4**](github.com/pierrec/lz4) migrated to Go Modules again in version **v3.0.**1. And it induced **Issue A** to downstream projects still in GOPATH again.\r\nE.g., issues: kythe/kythe#4208, pierrec/lz4#62, wrouesnel/postgres_exporter#408, forensicanalysis/artifactcollector#18, go-rod/rod#108.\r\n\r\n- **Case 2:** \r\nProject [**golang-migrate/migrate**](github.com/golang-migrate/migrate) migrated to **Go Modules** in version **v3.5.2** and declared its module path as `\"github.com/golang-migrate/migrate/v3\"` in go.mod file with version suffix `\"/v3\"`. It induced **Issue A** to downstream projects still in **GOPATH**, since the latter cannot recognize the version suffix in module path. \r\n ![10](https://user-images.githubusercontent.com/62839645/103780527-08417980-5070-11eb-8cae-b53ac9c2d454.png)\r\n![11](https://user-images.githubusercontent.com/62839645/103780539-0ecff100-5070-11eb-819c-1cea892dc362.png)\r\nTo fix the issue, [**golang-migrate/migrate**](github.com/golang-migrate/migrate) took the form of a vote in the ecosystem, learning that downstream users preferred this solution: roll back to **GOPATH** until the next version v4.\r\n ![12](https://user-images.githubusercontent.com/62839645/103780607-2ad39280-5070-11eb-9cb2-a9ce54fb529a.png)\r\n\r\n**Below summarize eight common fixing solutions with different trade-offs.**\r\n \r\n![13](https://user-images.githubusercontent.com/62839645/103780702-4d65ab80-5070-11eb-8748-938feddb39f5.png)\r\n\r\n### Solution 1: Projects in GOPATH migrate to Go Modules. \r\nIt encourages migration from GOPATH to Go Modules, for fixing **Issue A**, since **Issue A** is due to projects still in GOPATH and unable to recognize import paths with version suffixes. \r\nFor example, in issue go-redis/redis#1154, project [**go-redis/redis**](https://github.com/go-redis/redis) migrated to Go Modules, but its downstream projects were still in GOPATH. Then, downstream projects were suggested to migrate to Go Modules as well to avoid build errors. This solved downstream projects' **Issue A**, but also caused **Issue A** to downstream projects' module-unaware downstream projects. As a result, new **Issue A** (e.g., issues Jeffail/benthos#232, Jeffail/benthos#270) occurred for these projects.\r\nExamples: golang/go#37995, filebrowser/filebrowser#530, gotestyourself/gotest.tools#203, kataras/iris#1385, labstack/echo#1321, micro/go-micro#1839, urfave/cli#866, DataDog/dd-trace-go#606, oauth2-proxy/oauth2-proxy#642, prometheus/client_golang#673.\r\n_`[This solution will affect downstream projects in GOPATH]`_\r\n\r\n### Solution 2: Projects in Go Modules roll back to GOPATH.\r\nIt cancels previous Go Modules migration, for fixing **Issue A** and **Issue C**, by solving migration's caused incompatibility. \r\nFor example, in issue gofrs/uuid#61(**Issue A**), project [**gofrs/uuid**](https://github.com/gofrs/uuid)'s migration to Go Modules broke many downstream projects' building (in GOPATH). As a compromise, [**gofrs/uuid**](https://github.com/gofrs/uuid) rolled back to GOPATH, waiting for downstream projects to migrate first. In issue shirou/gopsutil#663(**Issue C**), [**shirou/gopsutil**](https://github.com/shirou/gopsutil) and its downstream projects were all in Go Modules, but [**shirou/gopsutil**](https://github.com/shirou/gopsutil) violated SIV rules (lacking a version suffix in its module path of v2+ release), causing build errors to downstream projects. As such, [**shirou/gopsutil**](https://github.com/shirou/gopsutil) chose to roll back to GOPATH, temporarily making downstream projects to work again. This solves the problem, but hinders the migration status to the ecosystem.\r\nExamples:  [dgraph-io/badger#4662](https://discuss.dgraph.io/t/go-modules-on-badger-and-dgraph/4662), golang-migrate/migrate#103, go-mail/mail#39, patrickmn/go-cache#89, stripe/stripe-go#712, cenkalti/backoff#76, go-redis/redis#1149, go-chi/chi#327, pierrec/lz4#39, go-chi/jwtauth#42, sercand/kuberesolver#11. \r\n\r\n### Solution 3: Changing the strategy of releasing v2+ projects in Go Modules from major branch to subdirectory.\r\nIt targets at **Issue A**, where module-unaware projects cannot recognize virtual import paths for v2+ libraries in Go Modules. The new strategy creates physical paths by code cloning, so that libraries can be referenced by module-unaware projects. However, this is a workaround treatment and needs extra maintenance in subsequent releases.\r\nExamples: mediocregopher/radix#128, nicksnyder/go-i18n#184, olivere/elastic#1145, gomodule/redigo#366, golang/go#37995, twitchtv/twirp#169.  \r\n\r\n### Solution 4: Maintaining v2+ libraries in Go Modules in downstream projects' Vendor directories rather than referencing them by virtual import paths.\r\nIt targets at **Issue A**. By making a copy of libraries in downstream projects, these projects can avoid fetching them by virtual import paths. \r\nFor example, in issue mediocregopher/radix#141, [**mediocregopher/radix**](https://github.com/mediocregopher/radix) refused to use the major subdirectory strategy for its v2+ project release in Go Modules. Its downstream projects had to make a copy of [**mediocregopher/radix**](https://github.com/mediocregopher/radix)’s code in their Vendor directories, causing extra maintenance and potential **Issue B** in future. \r\nExamples: brianvoe/gofakeit#88, gopherjs/gopherjs#881, go-redis/redis#1143, mholt/archiver#192, moby/moby#40371, vmihailenco/msgpack#237.\r\n_`[This solution may affect downstream projects in Go Modules]`_\r\n\r\n### Solution 5: Using a replace directive with version information to avoid using import paths in referencing libraries.\r\nIt addresses **Issue B.1** (problematic import path interpretations) and **Issue C** (import path violating SIV rules). \r\nFor example, in issue andrewstuart/goq#12, a client project used a directive to replace the original import path: `\"replace github.com/andrewstuart/goq => astuart.co/goq v1.0.0\"`, to reference its expected project [**andrewstuart/goq**](https://github.com/andrewstuart/goq)'s version. However, this makes developers no longer able to use the go get command to fetch automatically upgraded libraries.\r\nExamples: maistra/istio#78, scylladb/gocql#3, etcd-io/etcd#10773, cockroachdb/cockroach#47246, micro/micro#1149, moby/moby#39302, grpc/grpc-go#3500. \r\n\r\n### Solution 6: Updating import paths for libraries that have changed their repositories.\r\nIt fixes **Issue B.2**, where libraries in a project's Vendor directory may be inconsistent with the ones referenced by their import paths. It updates import paths to help a project's downstream projects in Go Modules fetch consistent library versions. \r\nFor example, in issue google/go-cloud#429, [**google/go-cloud**](https://github.com/google/go-cloud) managed library **coreos/etcd** in its Vendor directory, which later changed its hosting repository from **`github.com/coreos/etcd`** to `**go.etcd.io/etcd**`. To fix build errors for [**google/go-cloud**](https://github.com/google/go-cloud)'s downstream projects in Go Modules, it updated **coreos/etcd**'s import path to the latest one for the consistency. This fixes the issue, benefiting all affected downstream projects, without impacting others in the ecosystem.\r\nExamples: hybridgroup/gobot#689, kythe/kythe#3344, pion/webrtc#1082, census-instrumentation/opencensus-go#1052, micro/go-plugins#372, go-kit/kit#940, golang/lint#436, golang/oauth2#395, sirupsen/logrus#1041, nats-io/nats.go#478, unknwon/com#26. \r\n\r\n### Solution 7: Projects in Go Modules fix configuration items to strictly follow SIV rules.\r\nIt urges projects that have migrated to Go Modules to follow [**Golang's official guidelines on SIV rules**](https://github.com/golang/go/wiki/Modules#semantic-import-versioning), for fixing **Issue C**. \r\nFor example, in issue go-redis/redis#1149, project [**go-redis/redis**](https://github.com/go-redis/redis) added version suffix` \"/v7\"` at the end of its module path to follow SIV rules. However, **Issue C** fixed, but the project's downstream projects in GOPATH may encounter **Issue A** (unable to recognize such version suffixes, e.g., issue go-redis/redis#1151).\r\nExamples: etcd-io/etcd#11154, godbus/dbus#125, gotestyourself/gotest.tools#140, Jeffail/benthos#232, kataras/iris#1355, labstack/echo#1244, mholt/archiver#187, golang/go#27009, golang/go#33879, gin-gonic/gin#1388, golangci/golangci-lint#371, osrg/gobgp#1848, golang/go#37529, gohugoio/hugo#5639, istio/api#1201, golang/go#29731, vitessio/vitess#5019, googleforgames/open-match#675, micro/micro#272, microsoft/go-winio#156, golang/go#31437. \r\n_`[This solution may affect downstream projects in GOPATH]`_\r\n\r\n### Solution 8: Using a hash commit ID for a specific version to replace a problematic version number in library referencing.\r\nDownstream projects use this approach to avoid **Issue** C, where some projects in Go Modules violate SIV rules in version numbers and cause build errors to downstream projects also in Go Modules. It avoids referencing problematic version numbers, by require directives with the specific hash commit ID in downstream projects' go.mod files. \r\nFor example, in issue prometheus/prometheus#6048, one of [**prometheus/prometheus**](https://github.com/prometheus/prometheus)'s downstream projects in Go Modules chose to use **directive** `\"require github.com/prometheus/prometheus 43acd0e\"` to reference its expected version v2.12.0. As Solution 5, this also causes developers cannot fetch automatically upgraded libraries.\r\nExamples: argoproj/argo#2602, concourse/concourse#3952, ibm-messaging/mq-golang#121, dexidp/dex#1710, zouyx/agollo#78, rwynn/monstache#316, pingcap/parser#812. \r\n_`[This solution will affect downstream projects in Go Modules]`_\r\n\r\n### **As it stands**, **GOPATH** mode and **Go Modules** mode will co-exist for a while in the ecosystem. Developers are likely to encounter these issues again. \r\nThe purpose of this report is to help developers understand these issues better and find the best solution to fix the issues. Hope this report can help the ecosystem make a smooth transition from **GOPATH** to **Go Modules**.\r\n\r\n## References:\r\n* https://yourbasic.org/golang/\r\n* https://divan.dev/posts/gopath/\r\n* https://tip.golang.org/doc/\r\n* https://github.com/golang/go/wiki/Modules\r\n* https://github.com/golang/go/wiki/PackageManagementTools\r\n* https://github.com/golang/go/issues/25967\r\n* https://github.com/golang/go/issues/27009\r\n* https://github.com/gofrs/uuid/issues/61\r\n* https://golang.org/cmd/go/#hdr-Legacy_GOPATH_go_get\r\n\r\n","reactions":{"url":"https://api.github.com/repos/KateGo520/Hero/issues/1/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/KateGo520/Hero/issues/1/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]