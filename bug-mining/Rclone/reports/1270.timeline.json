[{"id":12819885859,"node_id":"LE_lADOAQ-n5M6I_F6LzwAAAAL8H-8j","url":"https://api.github.com/repos/rclone/rclone/issues/events/12819885859","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-05-15T15:30:59Z","label":{"name":"Support Contract","color":"D93F0B"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2112866815","html_url":"https://github.com/rclone/rclone/issues/7848#issuecomment-2112866815","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7848","id":2112866815,"node_id":"IC_kwDOAQ-n5M5978n_","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-15T15:31:10Z","updated_at":"2024-05-15T15:31:10Z","body":"Heads up @rclone/support - the \"Support Contract\" label was applied to this issue.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2112866815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12819888462,"node_id":"SE_lADOAQ-n5M6I_F6LzwAAAAL8H_lO","url":"https://api.github.com/repos/rclone/rclone/issues/events/12819888462","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-15T15:31:11Z","performed_via_github_app":null},{"id":12819888488,"node_id":"SE_lADOAQ-n5M6I_F6LzwAAAAL8H_lo","url":"https://api.github.com/repos/rclone/rclone/issues/events/12819888488","actor":{"login":"edc-w","id":138211970,"node_id":"U_kgDOCDzygg","avatar_url":"https://avatars.githubusercontent.com/u/138211970?v=4","gravatar_id":"","url":"https://api.github.com/users/edc-w","html_url":"https://github.com/edc-w","followers_url":"https://api.github.com/users/edc-w/followers","following_url":"https://api.github.com/users/edc-w/following{/other_user}","gists_url":"https://api.github.com/users/edc-w/gists{/gist_id}","starred_url":"https://api.github.com/users/edc-w/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edc-w/subscriptions","organizations_url":"https://api.github.com/users/edc-w/orgs","repos_url":"https://api.github.com/users/edc-w/repos","events_url":"https://api.github.com/users/edc-w/events{/privacy}","received_events_url":"https://api.github.com/users/edc-w/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-15T15:31:11Z","performed_via_github_app":null},{"id":12820883870,"node_id":"REFE_lADOAQ-n5M6I_F6LzwAAAAL8Lyme","url":"https://api.github.com/repos/rclone/rclone/issues/events/12820883870","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0681eb1c79f0678152e532efec7ebc7df21fe26d","commit_url":"https://api.github.com/repos/rclone/rclone/commits/0681eb1c79f0678152e532efec7ebc7df21fe26d","created_at":"2024-05-15T16:53:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2113028121","html_url":"https://github.com/rclone/rclone/issues/7848#issuecomment-2113028121","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7848","id":2113028121,"node_id":"IC_kwDOAQ-n5M598kAZ","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-15T16:54:29Z","updated_at":"2024-05-15T16:54:29Z","body":"Google docs are handled in a special way in rclone.\r\n\r\nWe don't know their size until **after** they are downloaded so we can't use the standard copy routines. Instead we use the internal equivalent of `rclone rcat` which streams the result to the destination.\r\n\r\nIn this process rclone loses the knowledge of the source backend.\r\n\r\nI've had a go at fixing this here - can you give it a try? Note that this includes the fix for #7845 which is very relevant!\r\n\r\n[v1.67.0-beta.7962.0681eb1c7.fix-7848-metadata-mapper](https://beta.rclone.org/branch/fix-7848-metadata-mapper/v1.67.0-beta.7962.0681eb1c7.fix-7848-metadata-mapper/) on branch [fix-7848-metadata-mapper](https://github.com/rclone/rclone/tree/fix-7848-metadata-mapper) (uploaded in 15-30 mins)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2113028121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12820899741,"node_id":"LE_lADOAQ-n5M6I_F6LzwAAAAL8L2ed","url":"https://api.github.com/repos/rclone/rclone/issues/events/12820899741","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-05-15T16:54:35Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":12820900241,"node_id":"MIE_lADOAQ-n5M6I_F6LzwAAAAL8L2mR","url":"https://api.github.com/repos/rclone/rclone/issues/events/12820900241","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2024-05-15T16:54:38Z","milestone":{"title":"v1.67"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2113410309","html_url":"https://github.com/rclone/rclone/issues/7848#issuecomment-2113410309","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7848","id":2113410309,"node_id":"IC_kwDOAQ-n5M59-BUF","user":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-15T20:34:18Z","updated_at":"2024-05-15T20:34:18Z","body":"The `SrcFsType` now looks good, but I've lost the `DstFsType`.\r\n\r\n**Now**\r\n\r\n```\r\n\"SrcFs\": \"Source{xrgXa}:Test\",\r\n\"SrcFsType\": \"drive\",\r\n\"DstFs\": \"//?/C:/Users/Chad/Logs/rclone-spool1942096378\",\r\n\"DstFsType\": \"local\",\r\n```\r\n\r\n**Before**\r\n\r\n```\r\n\"SrcFs\": \"memory:\",\r\n\"SrcFsType\": \"object.memoryFs\",\r\n\"DstFs\": \"Target{VZpyf}:Test\",\r\n\"DstFsType\": \"onedrive\",\r\n```\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2113410309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2113464940","html_url":"https://github.com/rclone/rclone/issues/7848#issuecomment-2113464940","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7848","id":2113464940,"node_id":"IC_kwDOAQ-n5M59-Ops","user":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-15T21:12:44Z","updated_at":"2024-05-15T21:12:44Z","body":"Using `v1.67.0-beta.7962.0681eb1c7.fix-7848-metadata-mapper`, the behavior changes based on whether or not `--streaming-upload-cutoff` governs the transfer.\r\n\r\n**Without `--streaming-upload-cutoff` set**\r\n\r\n_Note that the mapper is invoked twice for a single file._\r\n\r\n```\r\n{\r\n    \"level\": \"debug\",\r\n    \"msg\": \"Metadata mapper sent: \\n{\\n\\t\\\"SrcFs\\\": \\\"Source{xrgXa}:Test\\\",\\n\\t\\\"SrcFsType\\\": \\\"drive\\\",\\n\\t\\\"DstFs\\\": \\\"//?/C:/Users/Chad/Domains/cdsconsulting.co/logs/Copy-GOUserDrives_20240515_160249/rclone-spool259196758\\\",\\n\\t\\\"DstFsType\\\": \\\"local\\\",\\n\\t\\\"Remote\\\": \\\"Sample doc.docx\\\",\\n\\t\\\"Size\\\": -1,\\n\\t\\\"MimeType\\\": \\\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\\\",\\n\\t\\\"ModTime\\\": \\\"2024-05-15T15:05:22.457Z\\\",\\n\\t\\\"IsDir\\\": false,\\n\\t\\\"Metadata\\\": {\\n\\t\\t\\\"btime\\\": \\\"2024-05-15T14:56:11.061Z\\\",\\n\\t\\t\\\"content-type\\\": \\\"application/vnd.google-apps.document\\\",\\n\\t\\t\\\"copy-requires-writer-permission\\\": \\\"false\\\",\\n\\t\\t\\\"mtime\\\": \\\"2024-05-15T15:05:22.457Z\\\",\\n\\t\\t\\\"owner\\\": \\\"user1@cdsconsulting.co\\\",\\n\\t\\t\\\"permissions\\\": \\\"[{\\\\\\\"emailAddress\\\\\\\":\\\\\\\"user2@cdsconsulting.co\\\\\\\",\\\\\\\"id\\\\\\\":\\\\\\\"14885772533033484759\\\\\\\",\\\\\\\"role\\\\\\\":\\\\\\\"writer\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"user\\\\\\\"},{\\\\\\\"emailAddress\\\\\\\":\\\\\\\"user1@cdsconsulting.co\\\\\\\",\\\\\\\"id\\\\\\\":\\\\\\\"09287294999424909072\\\\\\\",\\\\\\\"role\\\\\\\":\\\\\\\"owner\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"user\\\\\\\"}]\\\",\\n\\t\\t\\\"starred\\\": \\\"false\\\",\\n\\t\\t\\\"viewed-by-me\\\": \\\"true\\\",\\n\\t\\t\\\"writers-can-share\\\": \\\"true\\\"\\n\\t}\\n}\\n\",\r\n    \"source\": \"fs/metadata.go:123\",\r\n    \"time\": \"2024-05-15T16:03:00.789903-05:00\"\r\n}\r\n{\r\n    \"level\": \"debug\",\r\n    \"msg\": \"Metadata mapper sent: \\n{\\n\\t\\\"SrcFs\\\": \\\"//?/C:/Users/Chad/Domains/cdsconsulting.co/logs/Copy-GOUserDrives_20240515_160249/rclone-spool259196758\\\",\\n\\t\\\"SrcFsType\\\": \\\"local\\\",\\n\\t\\\"DstFs\\\": \\\"Target{qpiyZ}:Test\\\",\\n\\t\\\"DstFsType\\\": \\\"onedrive\\\",\\n\\t\\\"Remote\\\": \\\"Sample doc.docx\\\",\\n\\t\\\"Size\\\": 317900,\\n\\t\\\"MimeType\\\": \\\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\\\",\\n\\t\\\"ModTime\\\": \\\"2024-05-15T10:05:22.457-05:00\\\",\\n\\t\\\"IsDir\\\": false,\\n\\t\\\"Metadata\\\": {\\n\\t\\t\\\"atime\\\": \\\"2024-05-15T10:05:22.457-05:00\\\",\\n\\t\\t\\\"btime\\\": \\\"2024-05-15T09:56:11.061-05:00\\\",\\n\\t\\t\\\"mode\\\": \\\"666\\\",\\n\\t\\t\\\"mtime\\\": \\\"2024-05-15T10:05:22.457-05:00\\\"\\n\\t}\\n}\\n\",\r\n    \"source\": \"fs/metadata.go:123\",\r\n    \"time\": \"2024-05-15T16:03:01.167733-05:00\"\r\n}\r\n```\r\n\r\n**With `--streaming-upload-cutoff 100Mi` set**\r\n\r\n_Note that the mapper is invoked only once._\r\n\r\n```\r\n{\r\n    \"level\": \"debug\",\r\n    \"msg\": \"Metadata mapper sent: \\n{\\n\\t\\\"SrcFs\\\": \\\"Source{xrgXa}:Test\\\",\\n\\t\\\"SrcFsType\\\": \\\"drive\\\",\\n\\t\\\"DstFs\\\": \\\"Target{qpiyZ}:Test\\\",\\n\\t\\\"DstFsType\\\": \\\"onedrive\\\",\\n\\t\\\"Remote\\\": \\\"Sample doc.docx\\\",\\n\\t\\\"Size\\\": 317900,\\n\\t\\\"MimeType\\\": \\\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\\\",\\n\\t\\\"ModTime\\\": \\\"2024-05-15T15:05:22.457Z\\\",\\n\\t\\\"IsDir\\\": false,\\n\\t\\\"Metadata\\\": {\\n\\t\\t\\\"btime\\\": \\\"2024-05-15T14:56:11.061Z\\\",\\n\\t\\t\\\"content-type\\\": \\\"application/vnd.google-apps.document\\\",\\n\\t\\t\\\"copy-requires-writer-permission\\\": \\\"false\\\",\\n\\t\\t\\\"mtime\\\": \\\"2024-05-15T15:05:22.457Z\\\",\\n\\t\\t\\\"owner\\\": \\\"user1@cdsconsulting.co\\\",\\n\\t\\t\\\"permissions\\\": \\\"[{\\\\\\\"emailAddress\\\\\\\":\\\\\\\"user2@cdsconsulting.co\\\\\\\",\\\\\\\"id\\\\\\\":\\\\\\\"14885772533033484759\\\\\\\",\\\\\\\"role\\\\\\\":\\\\\\\"writer\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"user\\\\\\\"},{\\\\\\\"emailAddress\\\\\\\":\\\\\\\"user1@cdsconsulting.co\\\\\\\",\\\\\\\"id\\\\\\\":\\\\\\\"09287294999424909072\\\\\\\",\\\\\\\"role\\\\\\\":\\\\\\\"owner\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"user\\\\\\\"}]\\\",\\n\\t\\t\\\"starred\\\": \\\"false\\\",\\n\\t\\t\\\"viewed-by-me\\\": \\\"true\\\",\\n\\t\\t\\\"writers-can-share\\\": \\\"true\\\"\\n\\t}\\n}\\n\",\r\n    \"source\": \"fs/metadata.go:123\",\r\n    \"time\": \"2024-05-15T16:05:05.602204-05:00\"\r\n}\r\n```\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2113464940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-15T21:16:00Z","updated_at":"2024-05-15T21:16:00Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/7845","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/7845/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/7845/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/7845/events","html_url":"https://github.com/rclone/rclone/issues/7845","id":2295646348,"node_id":"I_kwDOAQ-n5M6I1MiM","number":7845,"title":"panic at github.com/rclone/rclone/fs/metadata.go:112: invalid memory address or nil pointer dereference","user":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":6919867104,"node_id":"LA_kwDOAQ-n5M8AAAABnHTK4A","url":"https://api.github.com/repos/rclone/rclone/labels/Support%20Contract","name":"Support Contract","color":"D93F0B","default":false,"description":"Issues made for customers with support contracts"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/55","html_url":"https://github.com/rclone/rclone/milestone/55","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/55/labels","id":10370070,"node_id":"MI_kwDOAQ-n5M4AnjwW","number":55,"title":"v1.67","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":27,"state":"closed","created_at":"2024-01-03T12:08:00Z","updated_at":"2024-10-17T09:00:34Z","due_on":"2024-04-21T07:00:00Z","closed_at":"2024-07-01T16:37:48Z"},"comments":9,"created_at":"2024-05-14T14:29:23Z","updated_at":"2024-05-16T09:07:54Z","closed_at":"2024-05-15T21:15:59Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--\r\n\r\nWe understand you are having a problem with rclone; we want to help you with that!\r\n\r\n**STOP and READ**\r\n**YOUR POST WILL BE REMOVED IF IT IS LOW QUALITY**:\r\nPlease show the effort you've put into solving the problem and please be specific.\r\nPeople are volunteering their time to help! Low effort posts are not likely to get good answers!\r\n\r\nIf you think you might have found a bug, try to replicate it with the latest beta (or stable).\r\nThe update instructions are available at https://rclone.org/commands/rclone_selfupdate/\r\n\r\nIf you can still replicate it or just got a question then please use the rclone forum:\r\n\r\n    https://forum.rclone.org/\r\n\r\nfor a quick response instead of filing an issue on this repo.\r\n\r\nIf nothing else helps, then please fill in the info below which helps us help you.\r\n\r\n**DO NOT REDACT** any information except passwords/keys/personal info.\r\n\r\nYou should use 3 backticks to begin and end your paste to make it readable.\r\n\r\nMake sure to include a log obtained with '-vv'.\r\n\r\nYou can also use '-vv --log-file bug.log' and a service such as https://pastebin.com or https://gist.github.com/\r\n\r\nThank you\r\n\r\nThe Rclone Developers\r\n\r\n-->\r\n\r\n#### The associated forum post URL from `https://forum.rclone.org`\r\n\r\nN/A\r\n\r\n#### What is the problem you are having with rclone?\r\n\r\nRepeatable crash like this:\r\n\r\n```\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal 0xc0000005 code=0x0 addr=0x28 pc=0x7c497a]\r\n\r\ngoroutine 32662 [running]:\r\ngithub.com/rclone/rclone/fs.metadataMapper({0x2a69050, 0xc0003203c0}, {0xc0000ca000, 0x14, 0x14}, {0x2a7e870, 0xc0017d9e00}, {0x4bd69a08, 0xc0005517a0}, 0xc0016e9c80)\r\n\tgithub.com/rclone/rclone/fs/metadata.go:112 +0x31a\r\ngithub.com/rclone/rclone/fs.GetMetadataOptions({0x2a69050, 0xc0003203c0}, {0x2a7e870, 0xc0017d9e00}, {0x4bd69a08, 0xc0005517a0}, {0x0, 0x0, 0x4bd33708?})\r\n\tgithub.com/rclone/rclone/fs/metadata.go:166 +0x1e8\r\ngithub.com/rclone/rclone/backend/local.(*Object).Update(0xc000a5b320, {0x2a69050, 0xc0003203c0}, {0x4bd69988, 0xc0019102e0}, {0x2a746c0, 0xc0005517a0}, {0x0, 0x0, 0x0})\r\n\tgithub.com/rclone/rclone/backend/local/local.go:1423 +0x8d0\r\ngithub.com/rclone/rclone/backend/local.(*Fs).Put(0xc0017d9e00, {0x2a69050, 0xc0003203c0}, {0x4bd69988, 0xc0019102e0}, {0x2a746c0, 0xc0005517a0}, {0x0, 0x0, 0x0})\r\n\tgithub.com/rclone/rclone/backend/local/local.go:696 +0xbd\r\ngithub.com/rclone/rclone/backend/local.(*Fs).PutStream(0x40fabf?, {0x2a69050?, 0xc0003203c0?}, {0x4bd69988?, 0xc0019102e0?}, {0x2a746c0?, 0xc0005517a0?}, {0x0, 0x0, 0x0})\r\n\tgithub.com/rclone/rclone/backend/local/local.go:705 +0x65\r\ngithub.com/rclone/rclone/fs/operations.Rcat({0x2a69050, 0xc0003203c0}, {0x2a7ecd0, 0xc000340840}, {0xc0001211d0, 0x47}, {0x2a5a670, 0xc001323420}, {0x121eac0, 0xedb86ca95, ...}, ...)\r\n\tgithub.com/rclone/rclone/fs/operations/operations.go:1359 +0x1003\r\ngithub.com/rclone/rclone/fs/operations.(*copy).rcat(0xc0011ca2d0, {0x2a69050, 0xc0003203c0}, {0x2a5a670, 0xc001323420})\r\n\tgithub.com/rclone/rclone/fs/operations/copy.go:183 +0xe9\r\ngithub.com/rclone/rclone/fs/operations.(*copy).manualCopy(0xc0011ca2d0, {0x2a69050, 0xc0003203c0})\r\n\tgithub.com/rclone/rclone/fs/operations/copy.go:260 +0x616\r\ngithub.com/rclone/rclone/fs/operations.(*copy).copy(0xc0011ca2d0, {0x2a69050, 0xc0003203c0})\r\n\tgithub.com/rclone/rclone/fs/operations/copy.go:302 +0x16c\r\ngithub.com/rclone/rclone/fs/operations.Copy({0x2a69050, 0xc0003203c0}, {0x2a7ecd0, 0xc000340840}, {0x0, 0x0}, {0xc0001211d0, 0x47}, {0x2a7da70, 0xc000bb90e0})\r\n\tgithub.com/rclone/rclone/fs/operations/copy.go:404 +0x485\r\ngithub.com/rclone/rclone/fs/sync.(*syncCopyMove).pairCopyOrMove(0xc000a60288, {0x2a69050, 0xc0003203c0}, 0xc000320320, {0x2a7ecd0, 0xc000340840}, 0x25, 0xc000d2bf60?)\r\n\tgithub.com/rclone/rclone/fs/sync/sync.go:498 +0x205\r\ncreated by github.com/rclone/rclone/fs/sync.(*syncCopyMove).startTransfers in goroutine 1\r\n\tgithub.com/rclone/rclone/fs/sync/sync.go:528 +0x6b\r\n```\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n\r\n`v1.67.0-beta.7919.df0229245.pr-7789-onedrive`\r\n\r\n#### Which OS you are using and how many bits (e.g. Windows 7, 64 bit)\r\n\r\nWindows 2022, 64 bit\r\n\r\n#### Which cloud storage system are you using? (e.g. Google Drive)\r\n\r\nGoogle Workspace (source)\r\nOneDrive/SharePoint (target)\r\n\r\n#### The command you were trying to run (e.g. `rclone copy /tmp remote:tmp`)\r\n\r\n`rclone copy Source: Target:`\r\n\r\n#### A log from the command with the `-vv` flag (e.g. output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\nI'll email logs to the Support address shortly.\r\n\r\n<!--- Please keep the note below for others who read your bug report. -->\r\n\r\n#### How to use GitHub\r\n\r\n* Please use the üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to show that you are affected by the same issue.\r\n* Please don't comment if you have no relevant information to add. It's just extra noise for everyone subscribed to this issue.\r\n* Subscribe to receive notifications on status change and new comments.\r\n","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/7845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/7845/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2114848074","html_url":"https://github.com/rclone/rclone/issues/7848#issuecomment-2114848074","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7848","id":2114848074,"node_id":"IC_kwDOAQ-n5M5-DgVK","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-16T10:34:43Z","updated_at":"2024-05-16T10:34:43Z","body":"It looks like the changes I made are working for `--streaming-upload-cutoff 100M`.\r\n\r\nSome backends (such as onedrive) can't upload a file of unknown length. You can see these backends with [StreamUpload = N in the overview table](https://rclone.org/overview/#optional-features).\r\n\r\nGoogle docs don't have a defined length - you have to download them to find out how long they are. So either we cache them in memory (if size < `--streaming-upload-cutoff`) or we download them to a local disk first (if size >= `--streaming-upload-cutoff`)\r\n\r\nIf we cache them in memory then you will just get the single transfer and the single invocation of the metadata mapper. If we are caching them on disk then you will get the transfer to the local disk (with metadata invocation) followed by the transfer from local disk to destination (with metadata invocation). Rclone takes some care that the metadata is correct when transferring via the local disk.\r\n\r\nIn an ideal world we'd change the onedrive backend to accept streaming uploads. I had a quick review of [the uploading methods](https://learn.microsoft.com/en-us/onedrive/developer/rest-api/concepts/upload?view=odsp-graph-online) and still think that you can't upload files without knowing how big they are to onedrive. There is a stack overflow question [which confirms this](https://stackoverflow.com/q/51428601/164234)) but you may have a better idea. This would be the best solution if possible.\r\n\r\nIn the mean time I'm going to attempt to rejig the Rcat code so that it doesn't use the rclone machinery to copy an object to local disk. This will mean writing a bit more code but it would mean you'd only get one transfer. I don't think it would make the transfer less reliable. It would affect the stats slightly but I suspect currently they are quite confusing!\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2114848074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12834483154,"node_id":"REFE_lADOAQ-n5M6I_F6LzwAAAAL8_qvS","url":"https://api.github.com/repos/rclone/rclone/issues/events/12834483154","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5b3abc0edf4d0ca72b7f68c17834bbaac4023069","commit_url":"https://api.github.com/repos/rclone/rclone/commits/5b3abc0edf4d0ca72b7f68c17834bbaac4023069","created_at":"2024-05-16T14:03:48Z","performed_via_github_app":null},{"id":12834483206,"node_id":"REFE_lADOAQ-n5M6I_F6LzwAAAAL8_qwG","url":"https://api.github.com/repos/rclone/rclone/issues/events/12834483206","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"12d4964f2ae0be790525fb5a118da3c5ad9d6c3b","commit_url":"https://api.github.com/repos/rclone/rclone/commits/12d4964f2ae0be790525fb5a118da3c5ad9d6c3b","created_at":"2024-05-16T14:03:49Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2115344586","html_url":"https://github.com/rclone/rclone/issues/7848#issuecomment-2115344586","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7848","id":2115344586,"node_id":"IC_kwDOAQ-n5M5-FZjK","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-16T14:05:00Z","updated_at":"2024-05-16T14:05:00Z","body":"I've had a go at fixing this by re-working the internals of rcat.\r\n\r\nI've run the local and onedrive integration tests with this and I think it is looking OK, but it could do with more testing.\r\n\r\n[v1.67.0-beta.7967.12d4964f2.fix-7848-metadata-mapper](https://beta.rclone.org/branch/fix-7848-metadata-mapper/v1.67.0-beta.7967.12d4964f2.fix-7848-metadata-mapper/) on branch [fix-7848-metadata-mapper](https://github.com/rclone/rclone/tree/fix-7848-metadata-mapper) (uploaded in 15-30 mins)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2115344586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2115878895","html_url":"https://github.com/rclone/rclone/issues/7848#issuecomment-2115878895","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7848","id":2115878895,"node_id":"IC_kwDOAQ-n5M5-Hb_v","user":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-16T18:01:12Z","updated_at":"2024-05-16T18:01:12Z","body":"> In an ideal world we'd change the onedrive backend to accept streaming uploads. I had a quick review of [the uploading methods](https://learn.microsoft.com/en-us/onedrive/developer/rest-api/concepts/upload?view=odsp-graph-online) and still think that you can't upload files without knowing how big they are to onedrive. There is a stack overflow question [which confirms this](https://stackoverflow.com/q/51428601/164234)) but you may have a better idea. This would be the best solution if possible.\r\n\r\nMy research turned up the same. Uploading files of unknown length does not seem possible with OneDrive/SharePoint.\r\n\r\nThe fix in `v1.67.0-beta.7967.12d4964f2.fix-7848-metadata-mapper` looks good to me. In particular, when I have `--streaming-upload-cutoff` _unset_:\r\n\r\n- The mapper is invoked only once.\r\n- `SrcFsType` and `DstFsType` have the expected values.\r\n\r\n```\r\n{\r\n    \"level\": \"debug\",\r\n    \"msg\": \"Metadata mapper sent: \\n{\\n\\t\\\"SrcFs\\\": \\\"Source{xrgXa}:Test\\\",\\n\\t\\\"SrcFsType\\\": \\\"drive\\\",\\n\\t\\\"DstFs\\\": \\\"Target{qpiyZ}:Test\\\",\\n\\t\\\"DstFsType\\\": \\\"onedrive\\\",\\n\\t\\\"Remote\\\": \\\"Sample doc.docx\\\",\\n\\t\\\"Size\\\": 317900,\\n\\t\\\"MimeType\\\": \\\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\\\",\\n\\t\\\"ModTime\\\": \\\"2024-05-15T15:05:22.457Z\\\",\\n\\t\\\"IsDir\\\": false,\\n\\t\\\"Metadata\\\": {\\n\\t\\t\\\"btime\\\": \\\"2024-05-15T14:56:11.061Z\\\",\\n\\t\\t\\\"content-type\\\": \\\"application/vnd.google-apps.document\\\",\\n\\t\\t\\\"copy-requires-writer-permission\\\": \\\"false\\\",\\n\\t\\t\\\"mtime\\\": \\\"2024-05-15T15:05:22.457Z\\\",\\n\\t\\t\\\"owner\\\": \\\"user1@cdsconsulting.co\\\",\\n\\t\\t\\\"permissions\\\": \\\"[{\\\\\\\"emailAddress\\\\\\\":\\\\\\\"user2@cdsconsulting.co\\\\\\\",\\\\\\\"id\\\\\\\":\\\\\\\"14885772533033484759\\\\\\\",\\\\\\\"role\\\\\\\":\\\\\\\"writer\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"user\\\\\\\"},{\\\\\\\"emailAddress\\\\\\\":\\\\\\\"user1@cdsconsulting.co\\\\\\\",\\\\\\\"id\\\\\\\":\\\\\\\"09287294999424909072\\\\\\\",\\\\\\\"role\\\\\\\":\\\\\\\"owner\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"user\\\\\\\"}]\\\",\\n\\t\\t\\\"starred\\\": \\\"false\\\",\\n\\t\\t\\\"viewed-by-me\\\": \\\"true\\\",\\n\\t\\t\\\"writers-can-share\\\": \\\"true\\\"\\n\\t}\\n}\\n\",\r\n    \"source\": \"fs/metadata.go:123\",\r\n    \"time\": \"2024-05-16T12:58:07.830524-05:00\"\r\n}\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2115878895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chscott","id":9805298,"node_id":"MDQ6VXNlcjk4MDUyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/9805298?v=4","gravatar_id":"","url":"https://api.github.com/users/chscott","html_url":"https://github.com/chscott","followers_url":"https://api.github.com/users/chscott/followers","following_url":"https://api.github.com/users/chscott/following{/other_user}","gists_url":"https://api.github.com/users/chscott/gists{/gist_id}","starred_url":"https://api.github.com/users/chscott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chscott/subscriptions","organizations_url":"https://api.github.com/users/chscott/orgs","repos_url":"https://api.github.com/users/chscott/repos","events_url":"https://api.github.com/users/chscott/events{/privacy}","received_events_url":"https://api.github.com/users/chscott/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12867641356,"node_id":"REFE_lADOAQ-n5M6I_F6LzwAAAAL--KAM","url":"https://api.github.com/repos/rclone/rclone/issues/events/12867641356","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d3d8bb4911111feb35c54480fbadf8229dfde8b5","commit_url":"https://api.github.com/repos/rclone/rclone/commits/d3d8bb4911111feb35c54480fbadf8229dfde8b5","created_at":"2024-05-20T15:12:15Z","performed_via_github_app":null},{"id":12868944568,"node_id":"CE_lADOAQ-n5M6I_F6LzwAAAAL_DIK4","url":"https://api.github.com/repos/rclone/rclone/issues/events/12868944568","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"faa58315c5b664e7dd7c4b216d5f43a302c578fe","commit_url":"https://api.github.com/repos/rclone/rclone/commits/faa58315c5b664e7dd7c4b216d5f43a302c578fe","created_at":"2024-05-20T17:17:17Z","state_reason":null,"performed_via_github_app":null},{"id":12868944638,"node_id":"REFE_lADOAQ-n5M6I_F6LzwAAAAL_DIL-","url":"https://api.github.com/repos/rclone/rclone/issues/events/12868944638","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a5700a4a53abc7714461f13aee15bae8591cde18","commit_url":"https://api.github.com/repos/rclone/rclone/commits/a5700a4a53abc7714461f13aee15bae8591cde18","created_at":"2024-05-20T17:17:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2120869683","html_url":"https://github.com/rclone/rclone/issues/7848#issuecomment-2120869683","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7848","id":2120869683,"node_id":"IC_kwDOAQ-n5M5-aecz","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-20T17:17:45Z","updated_at":"2024-05-20T17:17:45Z","body":"Thanks for testing. I've merged this to master now which means it will be in [the latest beta](https://beta.rclone.org/) in 15-30 minutes and released in v1.67 ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2120869683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12869016217,"node_id":"REFE_lADOAQ-n5M6I_F6LzwAAAAL_DZqZ","url":"https://api.github.com/repos/rclone/rclone/issues/events/12869016217","actor":{"login":"pull[bot]","id":39814207,"node_id":"MDM6Qm90Mzk4MTQyMDc=","avatar_url":"https://avatars.githubusercontent.com/in/12910?v=4","gravatar_id":"","url":"https://api.github.com/users/pull%5Bbot%5D","html_url":"https://github.com/apps/pull","followers_url":"https://api.github.com/users/pull%5Bbot%5D/followers","following_url":"https://api.github.com/users/pull%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/pull%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/pull%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pull%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/pull%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/pull%5Bbot%5D/repos","events_url":"https://api.github.com/users/pull%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/pull%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"faa58315c5b664e7dd7c4b216d5f43a302c578fe","commit_url":"https://api.github.com/repos/boost-entropy-golang/rclone/commits/faa58315c5b664e7dd7c4b216d5f43a302c578fe","created_at":"2024-05-20T17:25:06Z","performed_via_github_app":null},{"id":13697928781,"node_id":"REFE_lADOAQ-n5M6I_F6LzwAAAAMwdc5N","url":"https://api.github.com/repos/rclone/rclone/issues/events/13697928781","actor":{"login":"Fornax96","id":1247928,"node_id":"MDQ6VXNlcjEyNDc5Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/1247928?v=4","gravatar_id":"","url":"https://api.github.com/users/Fornax96","html_url":"https://github.com/Fornax96","followers_url":"https://api.github.com/users/Fornax96/followers","following_url":"https://api.github.com/users/Fornax96/following{/other_user}","gists_url":"https://api.github.com/users/Fornax96/gists{/gist_id}","starred_url":"https://api.github.com/users/Fornax96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fornax96/subscriptions","organizations_url":"https://api.github.com/users/Fornax96/orgs","repos_url":"https://api.github.com/users/Fornax96/repos","events_url":"https://api.github.com/users/Fornax96/events{/privacy}","received_events_url":"https://api.github.com/users/Fornax96/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"21ff651b4348bf708e2b797bfa19ed576103379a","commit_url":"https://api.github.com/repos/Fornaxian/rclone/commits/21ff651b4348bf708e2b797bfa19ed576103379a","created_at":"2024-07-30T15:35:06Z","performed_via_github_app":null},{"id":13697928793,"node_id":"REFE_lADOAQ-n5M6I_F6LzwAAAAMwdc5Z","url":"https://api.github.com/repos/rclone/rclone/issues/events/13697928793","actor":{"login":"Fornax96","id":1247928,"node_id":"MDQ6VXNlcjEyNDc5Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/1247928?v=4","gravatar_id":"","url":"https://api.github.com/users/Fornax96","html_url":"https://github.com/Fornax96","followers_url":"https://api.github.com/users/Fornax96/followers","following_url":"https://api.github.com/users/Fornax96/following{/other_user}","gists_url":"https://api.github.com/users/Fornax96/gists{/gist_id}","starred_url":"https://api.github.com/users/Fornax96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fornax96/subscriptions","organizations_url":"https://api.github.com/users/Fornax96/orgs","repos_url":"https://api.github.com/users/Fornax96/repos","events_url":"https://api.github.com/users/Fornax96/events{/privacy}","received_events_url":"https://api.github.com/users/Fornax96/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"47d8f04796ac0694282e6ccd0498f686f9271d56","commit_url":"https://api.github.com/repos/Fornaxian/rclone/commits/47d8f04796ac0694282e6ccd0498f686f9271d56","created_at":"2024-07-30T15:35:06Z","performed_via_github_app":null}]