[{"id":11102683564,"node_id":"LE_lADOAQ-n5M54Qp0jzwAAAAKVxYGs","url":"https://api.github.com/repos/rclone/rclone/issues/events/11102683564","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-11-29T23:59:56Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":11102683574,"node_id":"LE_lADOAQ-n5M54Qp0jzwAAAAKVxYG2","url":"https://api.github.com/repos/rclone/rclone/issues/events/11102683574","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-11-29T23:59:56Z","label":{"name":"configuration","color":"8ccedb"},"performed_via_github_app":null},{"id":11102683585,"node_id":"LE_lADOAQ-n5M54Qp0jzwAAAAKVxYHB","url":"https://api.github.com/repos/rclone/rclone/issues/events/11102683585","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-11-29T23:59:56Z","label":{"name":"change detection","color":"54d3cf"},"performed_via_github_app":null},{"id":11102683591,"node_id":"LE_lADOAQ-n5M54Qp0jzwAAAAKVxYHH","url":"https://api.github.com/repos/rclone/rclone/issues/events/11102683591","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-11-29T23:59:56Z","label":{"name":"bisync","color":"1D76DB"},"performed_via_github_app":null},{"id":11102683607,"node_id":"MIE_lADOAQ-n5M54Qp0jzwAAAAKVxYHX","url":"https://api.github.com/repos/rclone/rclone/issues/events/11102683607","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2023-11-29T23:59:56Z","milestone":{"title":"Soon"},"performed_via_github_app":null},{"id":11102683660,"node_id":"AE_lADOAQ-n5M54Qp0jzwAAAAKVxYIM","url":"https://api.github.com/repos/rclone/rclone/issues/events/11102683660","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-11-29T23:59:57Z","assignee":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":11102683680,"node_id":"MEE_lADOAQ-n5M54Qp0jzwAAAAKVxYIg","url":"https://api.github.com/repos/rclone/rclone/issues/events/11102683680","actor":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-29T23:59:57Z","performed_via_github_app":null},{"id":11102683686,"node_id":"SE_lADOAQ-n5M54Qp0jzwAAAAKVxYIm","url":"https://api.github.com/repos/rclone/rclone/issues/events/11102683686","actor":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-29T23:59:57Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1834019143","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1834019143","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1834019143,"node_id":"IC_kwDOAQ-n5M5tUOlH","user":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-30T15:38:39Z","updated_at":"2023-11-30T15:41:06Z","body":"Thank you nielash for the great write up here.\r\n\r\nMy initial thoughts on this are:\r\n\r\n1. Flag names should be named based of relation to others as it gets very confusing otherwise so I have renamed the flags below. Subjective but believe is a valid choice.\r\n\r\n2. In regards, to further thoughts you write: \r\n\r\n> User A demands perfection every time. If Bisync is ever unsure of what to do, User A would prefer that Bisync stop and ask for help rather than take its best guess and continue.\r\n\r\nAnd then suggest this is how bisync currently works. However, this is not the case bisync currently renames files rather than stopping and erroring and does this with a completely random naming scenario e.g. .path1, .path2. This is fundamentally flawed as per my previous comments as .path1, .path2 is meaningless in a multi-user, multi-pc setup, the very nature of bisync and I believe should be changed entirely to conflict1, conflict2 as default. I agree that if bisync did do as you have written it would \"safe by default\" and would prevent sync on conflicted files and log this as an error. See prevent option added below.\r\n\r\n3. Handling Conflicts\r\n\r\n```\r\n--conflict-winner CHOICE  Automatically resolve conflicts by preferring the version that is: If none both files are renamed or sync prevented as set by --conflict-loser\r\n                            none | newer | older | larger | smaller | path1 | path2 (default: none)\r\n\r\n--conflict-loser CHOICE   When conflict choose how to handle. When --conflict-winner none 'delete' is ignored and 'num' chosen. \r\n                            prevent | delete | num (default: num)\r\n                            \r\n--conflict-name\tSTRING   Choose a name for conflicts. Use comma separated string to name path1,path2 sperately e.g. 'user,cloud' (default: 'conflict')\r\n                            \r\n--conflict-shortname\t Will rename files using .c1, .c2, ... over .conflict1, .conflict2, ... if --conflict-loser set to num and --conflict-name unset\r\n```\r\n\r\nThis would also mean losing conflicts get automatically renamed conflict1, conflict2 and so on by default and there is no winner. Same as now but without the issues from point 2. Whilst I think that this default is fundamentally unsafe so is any automatic conflict resolution and is purely subjective about what is best. I will put forward in this thread the default in most other commonly used bisync (OneDrive,Dropbox,GDrive,etc..) would be `newer` and `num`. Other power user tools have different mechanism such as unison to either of these choices.\r\n\r\nI do not think there should be any overwrite of conflicts so for example when custom naming is used it would be something like ('user,cloud') user1, user2, cloud1, cloud2 and so on.. Personally, I doubt I would ever use custom naming as one side is always going to lack meaning and there is no viable way for that to be otherwise.\r\n\r\nI think the concept of .path1 must be removed in its entirety due to points previously mentioned.\r\n\r\n--conflict-shortname maybe this should be automated and only used for files names above x but using this flag this could be forced always. \r\n\r\n3. Resync\r\n\r\nI think the resync flag should be a singular flag not two and same if auto-resync is implemented:\r\n\r\n```\r\n--resync OPTION    newer | older | larger | smaller | path1 | path2 (default: path1)\r\n```\r\n\r\nOtherwise, not much to say on this flag. I think to keep backwards compatibility 'path1' will have to remain as default. \r\n\r\n4. Auto-Resync\r\n\r\nI know I initially pushed for an `--resync-auto` due to the resync being required too much however after conversations and more time I think this feature is inherently useless and dangerous and so it may be best to avoid such a design. After both filters and exits (#7470) are handled I do not really seem a use case for `--resync-auto` as this should never be required short of listing being missing when `--resilient` flag used.\r\n\r\nFor filter changes, I would prefer something like an error stating please choose a `--resync-filters` (if not already present) option rather than succumb to a global `--resync-auto` flag and should only apply to the changes in filters rather than resyncing all filters again. \r\n\r\n```\r\n--resync-auto OPTION    newer | older | larger | smaller | path1 | path2 (default: path1)\r\n```\r\n\r\n5. Checksum and SizeOnly\r\n\r\n> Note that the newer and older options require modtime support for both paths, and will be ignored if either remote lacks modtimes (or if the user has requested to ignore them with --checksum or --size-only.)\r\n\r\nI agree with this and is simply a limitation that can't be avoided.\r\n\r\n6. Identical Sizes or Times \r\n\r\n> An open question is what should happen when a winner can't be determined by the requested method. For example: --auto-resolve newer where the sizes differ> but modtimes are identical. Probably the easiest would be to revert to the current behavior (keep both, do ..path1 / ..path2 rename), but I am open to other ideas!\r\n\r\nBar the fact I think it should be .conflict1, .conflict2 by default, I agree. Though perhaps, there could a --conflict-winner-fallback set to something like 'larger' | 'smaller' when 'newer' | 'older' for --conflict-winner and vice versa for the other way round and only after all these fail it renames both files.\r\n\r\n6. Lock files\r\n\r\nLock files I think should be handled in another thread and completely separate to any of this work. Personally, when local it should work on the basis of checking if current processID is running and is the same command (same being bisync path1 path2 e.g. flags ignored) using some form of regex. This mechanism can be expanded to handle a time based mechanism when/if remote --workdir are implemented.\r\n\r\nThanks ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1834019143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-30T15:50:42Z","updated_at":"2023-11-30T15:50:42Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/7470","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/7470/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/7470/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/7470/events","html_url":"https://github.com/rclone/rclone/issues/7470","id":2017422981,"node_id":"I_kwDOAQ-n5M54P26F","number":7470,"title":"bisync: recover from exit without `--resync`","user":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399007,"node_id":"MDU6TGFiZWw4NjM5OTAwNw==","url":"https://api.github.com/repos/rclone/rclone/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null},{"id":709439722,"node_id":"MDU6TGFiZWw3MDk0Mzk3MjI=","url":"https://api.github.com/repos/rclone/rclone/labels/thinking","name":"thinking","color":"e9d6d5","default":false,"description":""},{"id":3427818774,"node_id":"LA_kwDOAQ-n5M7MUF0W","url":"https://api.github.com/repos/rclone/rclone/labels/bisync","name":"bisync","color":"1D76DB","default":false,"description":""},{"id":3456256266,"node_id":"LA_kwDOAQ-n5M7OAkkK","url":"https://api.github.com/repos/rclone/rclone/labels/resume","name":"resume","color":"d4c5f9","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/11","html_url":"https://github.com/rclone/rclone/milestone/11","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/11/labels","id":1480382,"node_id":"MDk6TWlsZXN0b25lMTQ4MDM4Mg==","number":11,"title":"Soon","description":"Issues which are a good idea but haven't been assigned a specific release yet.","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":75,"closed_issues":94,"state":"open","created_at":"2016-01-02T12:56:46Z","updated_at":"2025-10-12T21:14:16Z","due_on":null,"closed_at":null},"comments":7,"created_at":"2023-11-29T21:12:02Z","updated_at":"2024-01-20T21:31:30Z","closed_at":"2024-01-20T21:31:30Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"It would be great if bisync could recover from an exit (SIGINT, SIGTERM, SIGKILL) without the need of a `--resync`.\r\n\r\ne.g. powercut, Ctrl+C, shutdown\r\n\r\nThis would save the extra work to get it to play nice with everyday usage. Currently, have to run a script to wait for sync(s) to finish then shutdown/restart/etc. In some cases there is nothing that can be done to prevent this such as as system crash or power cut resulting in `--resync` being required. Or sometimes you just want a quick restart due to a kernel/application update or other issue and instead you have to wait or accept the consequences. \r\n\r\nThanks","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/7470/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/7470/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1835538500","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1835538500","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1835538500,"node_id":"IC_kwDOAQ-n5M5taBhE","user":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T06:26:16Z","updated_at":"2023-12-01T19:33:52Z","body":"Thank you as always for making me challenge my assumptions! ðŸ˜„ I agree with a lot of what you've said here. Some responses below:\r\n\r\n > Flag names should be named based of relation to others as it gets very confusing otherwise so I have renamed the flags below.\r\n\r\nAgree, and I like many of your suggestions. Allowing a customizable `--conflict-name` is a great idea (though I wonder if something like `--conflict-suffix` might be clearer? And more rclonic given [`--suffix`](https://rclone.org/docs/#suffix-suffix)?) \r\n\r\nI like pairing `--conflict-winner` and `--conflict-loser`, but do you think it might be confusing that one refers to a comparison method and the other refers to an action?\r\n\r\nWhat would your proposed `--conflict-loser prevent` do? Skip conflicts and leave the sides un-identical at the end of the sync? We would need to carefully think through how to deal with that during `--check-sync`... (would probably need to trigger [rollback](https://github.com/rclone/rclone/commit/ef4b47a9824754824a05491c3d4c7a2ef97253d4) in perpetuity until the conflict is externally resolved, and even so, it would get wiped if there were ever a `--resync`.)\r\n\r\nI'm not sure that `--conflict-shortname` is necessary, as you could just achieve the same result with `--conflict-name c`, no?\r\n\r\nI like the idea of `--resync OPTION` (with `--resync` alone implying `--resync path1`), however `--resync` is currently a `bool` and this would require converting it to `string`, which could possibly break people's scripts if they've been using `--resync=true` or `--resync=false` (for some reason). I would also need to check if it breaks anything with the `-1` shorthand. But it may be worth doing even so... I agree it's best not to have 2 flags when you can have 1.\r\n\r\n> 2\\. you write:\r\n> \r\n> > User A demands perfection every time. If Bisync is ever unsure of what to do, User A would prefer that Bisync stop and ask for help rather than take its best guess and continue.\r\n> \r\n> And then suggest this is how bisync currently works. However, this is not the case bisync currently renames files rather than stopping and erroring and does this with a completely random naming scenario e.g. .path1, .path2.\r\n\r\nI see what you're getting at, but I don't actually think it's a contradiction (nor is the naming random). There is no \"guessing\" involved in Bisync's current renaming behavior -- it refuses to pick winners and losers and instead keeps BOTH versions and renames them symmetrically, giving neither one preference over the other (in fact, this refusal to pick winners/losers is your chief complaint about it, right?). The use of the pathname means you could theoretically \"undo\" this rename later (not that most people probably do.) But this \"Further Thoughts\" section was mainly referring to the `--auto-resync` idea -- naturally, User A will think it's an abomination, while User B will think the _lack_ of it is an abomination. ðŸ˜„ \r\n\r\n> This is fundamentally flawed as per my previous comments as .path1, .path2 is meaningless in a multi-user, multi-pc setup, the very nature of bisync and I believe should be changed entirely to conflict1, conflict2 as default.\r\n\r\n> I think the concept of .path1 must be removed in its entirety due to points previously mentioned.\r\n\r\nI'm not totally following what you mean here... how is \".path1\" unsafe but \".conflict1\" is not?\r\n\r\nI get your point about multi-user / multi-pc, but I think \"meaningless\" is an overstatement -- suppose you have a star topology where Path1 is always the cloud and Path2 is always the local machine... this naming convention tells you that `..path1` came from the cloud and `..path2` came from a user's machine (even if you don't know exactly which user). If instead it's `file` and `file..conflict1`, there's no way to tell which came from which (although your proposed `--conflict-name` potentially offers a way around this, which I like.) \r\n\r\nAnyway, regardless of what we think of `..path1` / `..path2`, it has been a feature for 2+ years now and so I am not sure we can just get rid of it, for backward compatibility reasons. I do think you make a compelling case that the default should be changed -- but I think `pathname` should at least be available as a non-default legacy option.\r\n\r\n> This would also mean losing conflicts get automatically renamed conflict1, conflict2 and so on by default and there is no winner. Same as now but without the issues from point 2. \r\n\r\nJust to make sure I'm following -- you mean that with the default (equivalent to `--conflict-winner none --conflict-loser num`), instead of `file` and `file..conflict1` we get `file..conflict1` and `file..conflict2`, correct? (Essentially, _both sides_ are losers?) Also, if `file..conflict2` were to then have another conflict (probably unlikely, but we need to think about it), we'd get `file..conflict2..conflict1` and `file..conflict2..conflict2`, correct? (whereas with `--conflict-winner newer` we could eventually get `file..conflict3`, `file..conflict4`, and so on.)\r\n\r\nAlso, do you think we should lpad with some number of zeroes to make sure that `file..conflict9` alphabetically sorts before `file..conflict10`? Or don't worry about it?\r\n\r\nAnd regarding the `--conflict-name` (or `--conflict-suffix`), should the `..` be part of the customizable suffix, or hard-coded? Should we try to implement [`--suffix-keep-extension`](https://rclone.org/docs/#suffix-keep-extension)?\r\n\r\n> I know I initially pushed for an `--resync-auto` due to the resync being required too much however after conversations and more time I think this feature is inherently useless and dangerous and so it may be best to avoid such a design. After both filters and exits (https://github.com/rclone/rclone/issues/7470) are handled I do not really seem a use case for `--resync-auto` as this should never be required short of listing being missing when `--resilient` flag used.\r\n\r\nI think I may need to give this more thought. I agree with you that `--auto-resync` is probably not something I'd ever use myself, nor do I think it's advisable generally, however for some reason it really is a request I see over and over on the forums (it's not just you)... and there are in fact some alternative sync tools that tout their lack of `--resync` as a feature, not a bug. I've even seen users code their own scripts to automatically run a `--resync` when Exit Code > 0. So I am trying to channel the \"You Are Not the User\" mantra and remain open-minded to the fact that some users really do seem to want this, no matter how ill-advised I may personally find it. It is hard to tell sometimes whether there's something I'm missing about their use case, or something _they're_ missing about why they do not actually want what they think they want.\r\n\r\nYour point about [exits](https://github.com/rclone/rclone/issues/7470) is a good one, and it may be worth seeing how close to perfection we can get (particularly with recovering from ungraceful shutdowns) before making a decision about `--auto-resync`. I actually think that `--conflict-winner newer` could significantly mitigate that one edge-case I was concerned about in the \"diff from last trusted listing\" method. I agree that if we can recover perfectly, `--auto-resync` is probably moot. But if it's only \"pretty good most of the time\", I wonder if some users will still prefer `--auto-resync` due to the perceived safety of erring on the side of not-deleting (despite my total agreement with you that \"no deletes\" != \"non-destructive\").\r\n\r\n> For filter changes, I would prefer something like an error stating please choose a --resync-filters (if not already present) option rather than succumb to a global --resync-auto flag and should only apply to the changes in filters rather than resyncing all filters again.\r\n\r\nMy current thought on this is that `--force` would be a more appropriate flag than `--resync` for committing [session changes](https://github.com/rclone/rclone/issues/5678), or perhaps we need a new flag. I agree that using `--resync` as a catch-all is too heavy-handed.\r\n\r\nFYI it is not just filters but other kinds of flags as well. For example, flags like `--ignore-case-sync`, `--size-only`, and `--drive-skip-gdocs` can all have surprising consequences if added/removed without a `--resync`.\r\n\r\n> Lock files I think should be handled in another thread and completely separate to any of this work.\r\n\r\nThe problem is... `--auto-resync` and lock files go hand-in-hand -- we can't really implement `--auto-resync` without making some kind of change to lock files. (Same is kind of true for your [exits](https://github.com/rclone/rclone/issues/7470) ticket.) But we can table this for now until we revisit the `--auto-resync` discussion.\r\n\r\n> Personally, when local it should work on the basis of checking if current processID is running and is the same command (same being bisync path1 path2 e.g. flags ignored) using some form of regex. This mechanism can be expanded to handle a time based mechanism when/if remote --workdir are implemented.\r\n\r\nNot to go too far down this rabbit-hole, since we already discussed this at length ðŸ˜…, but -- even if we accept your (very good) arguments about why the rest of the `--workdir` should remain local, lock files are the one thing that would benefit most from being remote, to prevent [race conditions](https://github.com/rclone/rclone/issues/7332#issuecomment-1746444947:~:text=Sync%20order%20does%20matter,machine%20gets%20there%20first.) between machines. So I'm not sure it makes sense to go to all the trouble of building PID-related logic that we already know we'll just have to remove. It's also possible that there could be issues with checking PIDs on some platforms and that the time-based dead-man's-switch option could be more robust in those cases, even on local.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1835538500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1837516358","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1837516358","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1837516358,"node_id":"IC_kwDOAQ-n5M5thkZG","user":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-03T15:28:43Z","updated_at":"2023-12-03T15:28:43Z","body":"Definitely, agree with `--conflict-suffix`. Though, I would wonder whether it is actually a prefix because this is the name before a numbering but also is placed at the end of the file ergo suffix. I leave that one to you to decide. \r\n\r\nI agree it could be confusing perhaps it should be: \r\n\r\n```\r\n--conflict-method CHOICE  Choose the method for handling conflicts \r\n                           renameboth | winner | prevent (default: renameboth)\r\n\r\n--conflict-winner CHOICE  When conflict-method winner, choose how to pick the winning file.\r\n                            newer | older | larger | smaller | path1 | path2 (default: newer)\r\n\r\n--conflict-loser CHOICE   When conflict-method winner, choose how to handle the losing file.\r\n                            delete | num (default: num)                     \r\n```\r\n\r\nI only put 'prevent' there to handle User A in your analogy. Yes, it would work in the way you state e.g. ignore these files but continue with sync though I also agree a lot of work so perhaps is a future if at all upgrade due to the complications of implementing correctly. Renaming both files is still taking an action not \"do nothing and wait for user\" and therefore is no different to keeping one as a \"winner\" and the other numbered as the user may or may not see either of these actions; though I understand the argument in very limited circumstances where dealing with an application/project folder this could cause a breakage which would as a by-product inform the user (if the application logs this correctly). Same as the argument that bisync doesn't pick a winner so is doing nothing which is correct if it then didn't take an action based on that outcome though it does by renaming both so still not userA. \r\n\r\nWith regards to the default \".path1, .path2\" I agree the naming is not random, my mistake, rather that .path1, .path2 is  seemingly meaningless. The problem with your analogy is you still do not know who made the cloud file in the first place nor the user and requires a very rigid setup procedure to potentially gain some meaning. Though this is still debatable as the only argument is not really for the cloud side (?), I can only see the users/machine side e.g. `--conflict-suffix userA` so at least you would know who or which machine to help resolve the conflict. Having a file renamed .path2 (or .cloud1) still seems to give no advantage/insight for fixing the conflict in a bisync environment as you can't determine the source. Though, the option would be there to name each path separately e.g. `--conflict-suffix userA,cloud` if one so choses.\r\n\r\nThere is also that it would not work with `--conflict-suffix path1, path2` (as a default) as you would in essence get path11, path21 or if you handle suffix ending with numbers path1-1, path2-1. I don't think due to the reasons above the old code for conflict resolution should be kept as I can't see anyone complaining about the old being removed when they can just add there own conflict suffix for both path1 and path2. The comment of being safe was specifically about 'prevent' or for unsafe about any automatic action taken whether both are renamed or only one due to a winner, not about naming: .path1 is not any safer than .conflict1, sorry if there was any confusion about this.\r\n\r\nI started with `--conflict-shortname` before I thought of separating the flags. Reason I kept is some may just want a flag to enable .c1, .c2 over specifically setting `--conflict-suffix c` though in essence all this flag would be is a shortcut to this. The line of thinking of using a shortname in the first place is that I have file names that only just fit on the remote so adding .conflictX would cause issues and wanted to put that out there incase this is something that should automated when the name is too long? Personally, I have no issues with using `--conflict-suffix c` for a remote I know have long names and therefore is potentially unnecessary.\r\n\r\nGreat, I think with `--resync` would it not be possible for backwards compatibility to just have true = 'path1' and false still disables a resync so that all bases are covered? I think as these are params they are interpreted as strings regardless of the equal sign but I may be wrong? ...\r\n\r\n> Just to make sure I'm following -- you mean that with the default (equivalent to --conflict-winner none --conflict-loser num), instead of file and file..conflict1 we get file..conflict1 and file..conflict2, correct? (Essentially, both sides are losers?) Also, if file..conflict2 were to then have another conflict (probably unlikely, but we need to think about it), we'd get file..conflict2..conflict1 and file..conflict2..conflict2, correct? (whereas with --conflict-winner newer we could eventually get file..conflict3, file..conflict4, and so on.)\r\n\r\nYes, exactly concept wise just with a change of flags if you agree with those I made at the start.. Though for example in a multi-user environment lets say you already have  file..conflict1/ file..conflict2 and file is resync 'd so you have all three and there is now another conflict I don't think it should overwrite but instead give  file..conflict3, file..conflict4 (this is when using 'renameboth')\r\n\r\n> Also, do you think we should lpad with some number of zeroes to make sure that file..conflict9 alphabetically sorts before file..conflict10? Or don't worry about it?\r\n\r\nI personally would not worry.\r\n\r\n> And regarding the --conflict-name (or --conflict-suffix), should the .. be part of the customizable suffix, or hard-coded? Should we try to implement --suffix-keep-extension?\r\n\r\nThink .. should be hardcoded and no I don't think so for `--suffix-keep-extension` though I guess thats subjective just I don't think I've seen that else where (?) and arguably one should resolve the conflict before using the file. \r\n\r\nThough, do we really need ..conflict1 why not just .conflict1 (/.conflict1.conflict1) ? Is there an advantage I am missing?\r\n\r\nI agree with auto-resync, filter+other resyncs, lockfiles and think this should be separated into a new thread/issue and discussed there, perhaps three threads. Especially as once exits and the above is handled views my change on this. At least in my head there is still much to discuss on these and would also allow the above/rest (resync & conflicts) to be implemented sooner rather than seeing this as an all-in-one upgrade/issue. One thing with lockfiles on the remote is it would seem not really practical or viable in a many user setup as users would not be able to sync there files (!/?) as it would be pure luck/chance who gets there turn to sync.. I get there are certain race condition though these are limited, expected of any bisync and can't be worked around as these are more technical limitations; I would argue this is more how a user should use such a tool rather than locking the remote. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1837516358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1838034565","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1838034565","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1838034565,"node_id":"IC_kwDOAQ-n5M5tji6F","user":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T08:12:45Z","updated_at":"2023-12-04T08:12:45Z","body":"> I don't think due to the reasons above the old code for conflict resolution should be kept as I can't see anyone complaining about the old being removed when they can just add there own conflict suffix for both path1 and path2.\r\n\r\nSo, I think you have convinced me that the _default_ should be changed to `--conflict-loser num`, and the remaining question is only whether `--conflict-loser pathname` should stick around as a non-default option or be removed. I think that the thing I have not done a good job articulating is that `file..path1` / `file..path2` is _reversible_ in a way that `file` / `file.conflict1` is not, at least in a single-user environment (and bisync has plenty of single-users.) For example, suppose you want to restore path1 to the way it was before bisync renamed things -- you could write a simple script to find all `*..path2` files and delete, then find all `*..path1` files and rename to trim the `..path1` suffix. This is possible with `pathname` but not with `num`, as you don't know which side it came from. So, it is possible that there are some users who rely on this naming convention for this reason, and I could imagine them being unhappy if it's taken away. I think keeping it as a non-default legacy option makes everyone happy, and does not in any way disadvantage the users who choose not to use it. There are tons of rclone flags that are irrelevant to me -- I just ignore them and use the ones I want ðŸ™‚ \r\n\r\n> Definitely, agree with --conflict-suffix. Though, I would wonder whether it is actually a prefix because this is the name before a numbering but also is placed at the end of the file ergo suffix. I leave that one to you to decide.\r\n\r\nThe same thought occurred to me, but I can't think of anything clearer. So I'm leaning towards `--conflict-suffix` (and clarify any confusion in the docs.) (After all, [`--suffix-keep-extension`](https://rclone.org/docs/#suffix-keep-extension) is not strictly a \"suffix\" either.)\r\n\r\nI am not sure that `--conflict-method` helps us, as `--conflict-winner` and `--conflict-loser` would still refer to different things. It just makes 3 flags for what could have been achieved with 2. \r\n\r\nSo, I think it is between this:\r\n```\r\n--conflict-winner CHOICE\r\n--conflict-loser CHOICE\r\n--conflict-suffix STRING[,STRING]\r\n```\r\n\r\nor maybe this:\r\n```\r\n--auto-resolve CHOICE\r\n--conflict-loser CHOICE\r\n--conflict-suffix STRING[,STRING]\r\n```\r\n\r\nI think `prevent` should be disregarded for now, but worth revisiting in the future if users are asking for it. (And if so, I think `skip` might be a clearer name for it.)\r\n\r\n> There is also that it would not work with --conflict-suffix path1, path2 (as a default) as you would in essence get path11, path21 or if you handle suffix ending with numbers path1-1, path2-1.\r\n\r\nI was thinking that if you wanted to keep the old behavior, you would do `--conflict-suffix path --conflict-loser pathname`. So `file` becomes:\r\n\r\n```\r\nfile..path1\r\nfile..path2\r\n```\r\n\r\nAnd then if `file..path1` itself has another conflict (unlikely), you get:\r\n\r\n```\r\nfile..path1..path1\r\nfile..path1..path2\r\nfile..path2\r\n```\r\n\r\nwhich is the same as what happens now. (Remember that if you want to keep the current behavior, there is no \"winner\" -- instead it's essentially two \"losers\".)\r\n\r\nYou could do the same with a different suffix, like `--conflict-suffix side`:\r\n\r\n```\r\nfile..side1..side1\r\nfile..side1..side2\r\nfile..side2\r\n```\r\n\r\nand probably we would automatically omit the digits when two strings are provided, like `--conflict-suffix cloud,user`:\r\n\r\n```\r\nfile..cloud..cloud\r\nfile..cloud..user\r\nfile..user\r\n```\r\nWhich makes `--conflict-suffix path` behave exactly the same as `--conflict-suffix path1,path2`.\r\n\r\nMeanwhile for your desired behavior, you would do `--conflict-winner newer --conflict-suffix c` to get:\r\n\r\n```\r\nfile\r\nfile..c1\r\nfile..c2\r\n```\r\n\r\n> The line of thinking of using a shortname in the first place is that I have file names that only just fit on the remote so adding .conflictX would cause issues\r\n\r\nThis is a good point, and honestly it's another reason that users could be upset about being forced to change from `path` to `conflict`...\r\n\r\n> incase this is something that should automated when the name is too long?\r\n\r\nI worry that automating it could be problematic for users whose conflict-resolution workflows depend on having one consistent string they can search for. In my example above, it would have been harder to find and correct all the `..path1`s if half of them are `.p1`. I think the best solution is to let the user pick the `--conflict-suffix`, and they can choose a short one if filename length is an issue.\r\n\r\n> no I don't think so for --suffix-keep-extension though I guess thats subjective just I don't think I've seen that else where (?) and arguably one should resolve the conflict before using the file.\r\n\r\nI think the idea is that many systems determine the MIME Type by looking at the extension, so `file.conflict1.jpg` will be recognized as an image while `file.jpg.conflict1` will be an unreadable text file. (Resolving conflicts would probably be easier if you could preview the content...) I may look into whether it can be supported without too much trouble.\r\n\r\n> Though, do we really need ..conflict1 why not just .conflict1 (/.conflict1.conflict1) ? Is there an advantage I am missing?\r\n\r\nTo the double-dot instead of a single-dot? No advantage that I'm aware of, other than that bisync has always used the double-dot and it's possible that it could break people's scripts if we change it. Perhaps the best compromise is to hard-code just one dot (or none?) and let people do `--conflict-suffix .path` if they want the double.\r\n\r\n> I agree with auto-resync, filter+other resyncs, lockfiles and think this should be separated into a new thread/issue and discussed there, perhaps three threads. Especially as once exits and the above is handled views my change on this. At least in my head there is still much to discuss on these and would also allow the above/rest (resync & conflicts) to be implemented sooner rather than seeing this as an all-in-one upgrade/issue.\r\n\r\nHappy to discuss on separate threads, but when features are closely related (as these ones are), I do think it can be helpful to think a few steps ahead before diving in -- so that feature1 can be built the right way from the start, and we don't have to totally redo it when feature2 comes along. Exits depends on lock files and auto-resync depends on both. So I think once you've had a chance to try my proposed lock files change on #7470 let's talk about it there, and #5678 is the place to discuss decoupling filter changes from `--resync`. Feel free to create a new issue for `--auto-resync` if you wish, or I'm also fine continuing to discuss it here. (FWIW it's one of the easiest changes from a technical perspective -- maybe even just 4 lines of code. The bigger question is whether it's advisable.)\r\n\r\n> One thing with lockfiles on the remote is it would seem not really practical or viable in a many user setup as users would not be able to sync there files (!/?) as it would be pure luck/chance who gets there turn to sync.. I get there are certain race condition though these are limited, expected of any bisync and can't be worked around as these are more technical limitations; I would argue this is more how a user should use such a tool rather than locking the remote.\r\n\r\nFirstly just to be clear, there are two different proposed changes to lock files: 1.) allowing them to expire, and 2.) allowing them to live on non-local remotes. You are focusing on issue 2, but really it's issue 1 that is the blocking issue for recovery and `--auto-resync`. \r\n\r\nSecondly, even if proposed change 2 were adopted, no one would be forced to use it. Each user could choose to use their own local lock file, exactly as they do today. \r\n\r\nThirdly, I think there are some possible solutions to what you're describing, like perhaps some sort of central ledger to ensure a round-robin rotation. But even if there's not a good solution, I don't think that's a reason to just not worry about race conditions. There are always trade-offs, and different users have different priorities. You may prioritize more frequent syncs even if it means more race conditions, but other users may prioritize avoiding race conditions, even if it means less frequent syncs. Very much the User A / User B divide again. User B will see conflicts as just the inevitable cost of concurrent syncing, and User A will see mutual exclusion as just the inevitable cost of data integrity. They are both right ðŸ™‚  And I think bisync can make them both happy by allowing each user to choose which option is right for them.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1838034565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1839865182","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1839865182","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1839865182,"node_id":"IC_kwDOAQ-n5M5tqh1e","user":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-05T01:52:03Z","updated_at":"2023-12-05T02:10:04Z","body":"I think the use case described here with ..path1, ..path2 and scripts seems like a workaround for the options `--conflict-winner path1(/path2)` and `--conflict-loser delete` as they are currently not available. I think where I get to with this is it simply a paradox to say that path1 means x and path2 means cloud even in a rigid environment because which machine is path1 and which machine did path2 originally belong to? Even in a single user environment we are still talking multiple machines otherwise `copy`/`sync` should be used. I can't see any escape from this paradox and so believe it to be unsolvable. However, giving each machine/user a name in a machine(s)<->cloud can provide considerable meaning/benefit.\r\n\r\nI agree to match suffix used elsewhere `--conflict-suffix` is probably best or perhaps `--conflict-name` is best?\r\n\r\nWhat about `--conflict-resolve` instead of `--conflict-winner` - I think I like this and also use this later? Then perhaps `--conflict-resolve-fallback` or `--conflict-resolve-secondary`\r\n\r\nAgree `prevent` should be ignored for now and also agree `skip` makes much more sense.\r\n\r\nI still don't really understand the use of `pathname` in `--conflict-loser`? I can't see why anyone would want only one conflict for a file as you could have the following, due to the original file being added back without a manual resolution: (assume `--conflict-winner none --conflict-loser num --conflict-suffix conflict`)\r\n\r\n```\r\nfile\r\nfile.conflict1\r\nfile.conflict2\r\n```\r\n  \r\nNow lets say there is a conflict of the file again in the legacy way this would overwrite the already existing conflicts (? or so I believe e.g. dangerous and you would lose work!) where it really should end up with the following: (where c1, c2 are from the first conflict and c3,c4 are from the second) \r\n\r\n```\r\nfile.conflict1\r\nfile.conflict2\r\nfile.conflict3\r\nfile.conflict4\r\n```\r\n\r\nWhether you choose to keep a legacy flag for this behaviour is entirely up to you as you are ultimately developing the tool - personally, I would force users away from this paradox and dangerous behaviour even though I know that might cause some upset in the short run. \r\n\r\nI also think if you do this it should be done via `--conflict-resolve legacy` and will ultimately ignore the rest of these flags as would be better than adding `--conflict-loser pathname` as this is already handled with suffix and would try to avoid any overwriting actions in this new conflict code.\r\n\r\nNo issue with automating a shortname I agree with your points here and allows the user to be explicit in this case.\r\n\r\nI am also certainly not against supporting `--suffix-keep-extension` if it can be without too much trouble. The idea definitely has some merit and some may like this - I may even use it though perhaps more pressing items as is more a nice to have.\r\n\r\nI think `..` is simply another seemed good at the time but really should have never been implemented. Personally, I do not think `--conflict-suffix` should handle this and rather `..` should only be used with `--conflict-resolve legacy` (if kept) otherwise all new logic should use `.`. If you do not like this perhaps a flag the enables or disables the `..`.\r\n\r\nWhilst I agree that recovery and auto resync rely on lockfiles its implementation should have no effect on how these are coded as it should simply call the same isLocked function. I think others may also be more likely to get involved with lock files functionality if it was on its own thread and think it is very much worthy of one. If you do not agree will layout some thoughts re lockfiles on #7470.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1839865182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1841985961","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1841985961","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1841985961,"node_id":"IC_kwDOAQ-n5M5tynmp","user":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-06T02:30:38Z","updated_at":"2023-12-06T02:30:38Z","body":"> I still don't really understand the use of `pathname` in `--conflict-loser`? I can't see why anyone would want only one conflict for a file\r\n\r\nThis suggests to me that I still have not succeeded in articulating this concept:\r\n\r\n> `file..path1` / `file..path2` is reversible in a way that `file` / `file.conflict1` is not\r\n\r\nand until we're on the same page about that, I fear we have a bit of a \"Chesterton's Fence\" scenario, where the assertion that the feature should be removed comes without a full grasp of why it is there.\r\n\r\n> Even in a single user environment we are still talking multiple machines otherwise `copy`/`sync` should be used.\r\n\r\nWhy? There are many users who use Bisync to synchronize two local paths, or one machine with one cloud storage service (where changes can be made directly on either side -- such as via the browser UI.) `copy`/`sync` does not cover those scenarios. \r\n\r\n> I think the use case described here with ..path1, ..path2 and scripts seems like a workaround for the options `--conflict-winner path1(/path2)` and `--conflict-loser delete` as they are currently not available.\r\n\r\nI don't think it is. There are some users who will want to manually review each sync conflict and decide how to resolve it. Think of it like a git merge conflict -- sometimes it's as simple as keeping one version and discarding the other, but sometimes the fix is more complicated -- like keeping a combination of both. The \"User A\" types will take issue with the \"automatic\" part, as the winners may not always follow one consistent pattern, like being from the same side, and even when they are, it can't be predicted in advance which side that will be. I think you are assuming that once these auto-resolve features are available, everyone will want to use them -- and I don't think that is true. My guess is most will, but a significant minority will prefer to resolve any conflicts manually. \r\n\r\n> What about `--conflict-resolve` instead of `--conflict-winner` - I think I like this and also use this later? Then perhaps `--conflict-resolve-fallback` or `--conflict-resolve-secondary`\r\n\r\nI like `--conflict-resolve`. I think the others are too long, and `--conflict-loser` is fine if there is no `--conflict-winner` to confuse it with.\r\n\r\n> Now lets say there is a conflict of the file again in the legacy way this would overwrite the already existing conflicts (dangerous and you would lose work!)\r\n\r\nI see what you're getting at, but I think it assumes a false inference, as  once `file` is renamed `file..path1` and `file..path2`, there is no more `file`. That is -- a second conflict can only occur if the user has chosen not to resolve the first conflict. The overwrite behavior is consistent with how rclone's [`--backup-dir`](https://rclone.org/docs/#backup-dir-dir) works:\r\n\r\n```\r\nIf there is a file with the same path (after the suffix has been added) in DIR, then it will be overwritten.\r\n```\r\n\r\nwhich is why many users choose to include a dated suffix like `--suffix -2019-01-01`.\r\n\r\nRemember that in \"User A\"'s philosophy, a conflict is not supposed to happen -- and when it does happen, the conflicts must be resolved -- not left there forever while more conflicts are created. (I also fully understand why \"User B\" would prefer the convenience of letting `file.conflict48`, `file.conflict49`, etc. build up to be dealt with later or possibly never. They are both valid preferences -- just fundamentally incompatible with each other.)\r\n\r\n> where it really should end up with the following: (where c1, c2 are from the first conflict and c3,c4 are from the second)\r\n> \r\n> ```\r\n> file.conflict1\r\n> file.conflict2\r\n> file.conflict3\r\n> file.conflict4\r\n> ```\r\n\r\nWhat I think this overlooks is that there is no way to tell in this scenario which side `file.conflict3` came from, so it is not _reversible_, for the users who care about that. Which is not me saying this option shouldn't exist -- it should! But I disagree that it should be the _only_ option.\r\n\r\n> personally, I would force users away from this paradox and dangerous behaviour even though I know that might cause some upset in the short run.\r\n> \r\n> I also think if you do this it should be done via `--conflict-resolve legacy` and will ultimately ignore the rest of these flags\r\n\r\nNaming it \"legacy\" says to me \"if we were starting over today, we would just remove this\", and I don't think that's actually what this is. I think it's a valid option that serves an unfilled need for a minority of users -- but just shouldn't be the default.\r\n\r\nThe thing to keep remembering is that two users with different preferences will often both think their way is \"right\" and that all other users should be forced to use it. The maintainer's job is to balance the needs of all users, which sometimes conflict (no pun intended). Often that means making both options available. This becomes untenable if users start saying \"it's not enough for me to get my option, I also need the other guy's option removed.\" As I said, there are a number of rclone flags that make me think \"I can't imagine why anyone would possibly want that\", but I ignore them and move on, knowing that some users probably feel the same way about flags I find essential for some unusual reason ðŸ™‚ \r\n\r\n> would be better than adding `--conflict-loser pathname` as this is already handled with suffix\r\n\r\nI think what you're saying is that `--conflict-loser pathname` is unnecessary because it is already implied by `--conflict-suffix path1,path2`, right? I think the issue with this is that if there is no `pathname` then users are forced to use `--conflict-loser num`,  so if I want (say) `--conflict-resolve newer --conflict-suffix path1,path2` then I end up with:\r\n\r\n```\r\nfile\r\nfile.path11\r\nfile.path12\r\nfile.path21\r\nfile.path22\r\nfile.path23\r\n```\r\n\r\nwith no way to disable the auto-numbering. So essentially, `--conflict-loser pathname` is a way to say \"do not auto-number, keep only the most recent conflict\". But I agree this probably wouldn't come up too much, as most users who want `pathname` would probably also want `--conflict-winner none`. And others might choose to add a hyphen/underscore, like `--conflict--suffix path1_,path2_`\r\n\r\n\r\n\r\n> I think `..` is simply another seemed good at the time but really should have never been implemented.\r\n\r\nI tend to agree, although I think rather than adding another flag, the most efficient way to handle this is to say it's one dot by default, and if you want more dots you can simply add them into your `--conflict-suffix`. I don't see how that in any way harms users who choose to stick with the default.\r\n\r\n> Whilst I agree that recovery and auto resync rely on lockfiles its implementation should have no effect on how these are coded as it should simply call the same isLocked function. I think others may also be more likely to get involved with lock files functionality if it was on its own thread and think it is very much worthy of one. If you do not agree will layout some thoughts re lockfiles on https://github.com/rclone/rclone/issues/7470.\r\n\r\nI'm not sure if I follow what you mean about the function. Which thread we use is not terribly important to me (feel free to start a new one if you prefer), but I do think that a prerequisite for further lock files discussion should be you trying out the `--max-lock` implementation I put forward on #7470, which I think is quite good.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1841985961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1843187115","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1843187115","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1843187115,"node_id":"IC_kwDOAQ-n5M5t3M2r","user":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-06T15:55:26Z","updated_at":"2023-12-06T15:57:37Z","body":"I think some of this has been taken out of context for example you were specifically talking about a user not manually resolving but using a script to automatically rename and the method I suggested would do so in the way I believe you intend rather than the method you suggest that would have the issue as in No.2 below.\r\n\r\nFor clarity any use of the word user,machine also implies client whether that be separate to rclone e.g. a web ui or any other means and would imply bisync. So user/client/machine all have the same meaning.\r\n\r\nWould seem we agree on and for ease am going to use shortened versions as below:\r\n\r\n```\r\n--conflict-resolve (-cr)\r\n--conflict-loser (-cl)\r\n--conflict-suffix (-cs)\r\n```\r\n\r\nI think it may be better to ask do you agree that ... questions and then go from there?\r\n\r\n--\r\n\r\nSo do you agree that:\r\n\r\n1) It is paradoxical to assign any meaning to any side of conflict resolution in a bi-synchronous environment bar specific and unique client ids\r\n\r\n2) With `-cr none -cl num -cs conflict` there is no difference in meaning `-cr none -cl num -cs path` (unless the code randomly assign the number)\r\n\r\n```\r\nfile.conflict1 = file.path1 (path1)\r\nfile.conflict2 = file.path2 (path2) \r\nfile.conflict3 = file.path3 (path1) \r\nfile.conflict4 = file.path4 (path2)\r\n// or with nested conflicts\r\nfile.conflict1.conflict1 = file.path1.path1 (path1)\r\nfile.conflict1.conflict2 = file.path1.path2 (path2)\r\n```\r\n\r\nAnd therefore both are reversible in the method you describe (though the method you describe may not have the result I believe you think it does due primarily to point No.1 and No.3)\r\n\r\n3) That in the legacy conflict mechanism it is more than possible for both `file` and `file..path1` and `file..path2` to exist and there for it will be destructive if another conflict of `file` happens\r\n\r\nFor example, having `file` open in a program/editor, a conflict happening and then saving which would write back to `file`. Or in a multi-user environment editing a file before the conflict has been updated. An application that auto recreates a file when missing. I'm sure there are many others. Not that it can only occur if a user has decided not to handle the conflict.\r\n\r\n4) That there are really three types of user for conflict resolution: \r\n\r\n```\r\nA - Do nothing and ask user \r\nB - Handle conflict and always keep losers (safe)\r\nC - Handle conflict and delete or overwrite losers (destructive)\r\n```\r\nHandle conflict means the concept of winner/losers whether both lose (e.g. renaming both) or one wins (e.g. either way an action is taken)\r\n\r\n5) That only the sync exiting with an error code and listing the errors with something like '-cr skip' (or interactive prompt `-cr ask`) is the only way to be UserA?\r\n\r\n6) That `-cr none -cl num -cs conflict` & `-cr newer -cl num -cs conflict` are both UserB?\r\n\r\n7) That the legacy way of handling conflicts is inherently UserC?\r\n\r\n8) That you could get *similar* behaviour to legacy by setting a flag such as `-cr none -cl overwrite -cs path (or .path for ..)`\r\n\r\nOverwrite would only allow a singular conflict to exist only ergo legacy so you would get `file.path1` and `file.path2` regardless of the amount of `file` conflicts and with any other `-cr` where one wins `file` & `file.path1` (never `file.path2`, `file.path3`, ...). \r\n\r\n9) That just because `-cr none -cl num -cs conflict` renames both files that does not imply that the user has been informed of this action. \r\n\r\nThough due to lack of access of this file through certain means may in some cases my make it more noticeable though could also cause breakages that go unnoticed too. If looking for the file via an explorer any resolution where the loser is kept would be obvious.\r\n\r\n10) That because you can't gain any meaning with .path1/.path2 (if you agree with the relevant points above) that doing so creates a false sense of security and could mislead users? \r\n\r\n-- \r\n\r\nHopefully, answering yes/no to the above will give clarity where we disagree, if we do and help hash out anything left remaining. \r\n\r\n-- \r\n\r\nWill start a thread re lockfiles so not to conflate - thanks and will explain the bit about the isLocked function.. Whilst I haven't test your solution I have looked over the code and do understand how it functions :) ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1843187115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1848837290","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1848837290","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1848837290,"node_id":"IC_kwDOAQ-n5M5uMwSq","user":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-10T02:25:54Z","updated_at":"2023-12-10T02:25:54Z","body":"> you were specifically talking about a user not manually resolving but using a script to automatically rename and the method I suggested would do so in the way I believe you intend\r\n\r\nThe script example was about _reversing_, which is different from _resolving_. _Reversing_ means undoing whatever mess bisync may have made, with the goal of reverting both paths back to how they were the moment before bisync ran. This still leaves you with conflicts, which is why it's not _resolving_. But it matters from User A's perspective because an irreversible change is inherently more destructive than a reversible one.\r\n\r\n> 1. It is paradoxical to assign any meaning to any side of conflict resolution in a bi-synchronous environment bar specific and unique client ids\r\n\r\nIt's possible I'm misunderstanding what you mean, but no -- I don't think it's paradoxical. Suppose I'm a single user with one bisync run, where Path1 is Google Drive and Path2 is my local computer. Path1 and Path2 have clear meanings to me in this case. When I see `file..path1`, I know it was the Google Drive side of the conflict. When I see `file..path2`, I know it was the local computer side of the conflict. It's helpful info for me to have when deciding which version to keep.\r\n\r\n> 2\\. With `-cr none -cl num -cs conflict` there is no difference in meaning `-cr none -cl num -cs path` (unless the code randomly assign the number)\r\n\r\nI agree that whether the suffix is \"path\" or \"conflict\" doesn't make much difference. But I disagree that an auto-numbering system is as reversible as the legacy behavior. I think your point is that we can deduce that 3 must be Path1 because it is odd, and 4 must be Path2 because it is even? That makes a lot of assumptions -- like that the files were always renamed in the same order, and that none were ever deleted. All it would take is one missing file somewhere to break the pattern for all subsequent files.\r\n\r\n> 3. That in the legacy conflict mechanism it is more than possible for both file and file..path1 and file..path2 to exist and there for it will be destructive if another conflict of file happens\r\n\r\nAgree that it's possible, disagree that it's a major concern. The scenario you describe requires another process to intervene and create a secondary conflict. Users can of course have all kinds of processes on their machines that cause chaos to their files -- at a certain point, that's on them, and not something we can control. And I'm not sure how your solution improves that -- doesn't `file` still get overwritten with `-cr newer` (in your scenario where it is open during the sync and re-saved after)? If the behavior of overwriting a prior suffixed conflict is destructive, then by definition, do you also think [`--backup-dir`](https://rclone.org/docs/#backup-dir-dir) is destructive?\r\n\r\n> 4\\. That there are really three types of user for conflict resolution:\r\n> \r\n> ```\r\n> A - Do nothing and ask user \r\n> B - Handle conflict and always keep losers (safe)\r\n> C - Handle conflict and delete or overwrite losers (destructive)\r\n> ```\r\n\r\nMostly agree, but I think the \"safe\" and \"destructive\" characterizations are too simplistic. Does B keep the losers in a reversible or irreversible way? Does C delete the losers always, or only if the user has allowed a secondary conflict to occur, without resolving the first conflict? \r\n\r\nHere is how I tend to think of it instead:\r\n```\r\nA - Do not pick winners and losers -- either stop and ask user or take some action that user could undo later (like move files out of the way *reversibly*)\r\nB - Use best efforts to pick a winner, and either delete or irreversibly rename the loser\r\n```\r\n\r\nI think part of the reason we may be talking past each other is because you are treating \"keep\" and \"delete\" as synonymous with \"safe\" and \"destructive\". Suppose that some malware program randomly renames every file on your computer without changing the contents -- do you consider this \"safe\" simply because no files have been deleted?\r\n\r\nNow, consider another program that does nearly the same thing, except it's a filename encryption program and you hold the decryption key. The reversibility makes a difference, no? This is why I am more focused on reversible vs. irreversible -- not all \"changes\" are bad, and not all \"keeps\" are good.\r\n\r\nWhat bisync's legacy behavior aims to do is move the conflicts out of the way in a way that the user can later revert, should they choose. Akin to encrypting a filename and giving the user a decryption key (which yes, is still a \"change\", but a harmless one).\r\n\r\n> 5\\. That only the sync exiting with an error code and listing the errors with something like '-cr skip' (or interactive prompt `-cr ask`) is the only way to be UserA?\r\n\r\nPartially agree. I think there probably are some User A types who would see this as the only acceptable solution. But other User A types who would find the legacy behavior acceptable. Not all User As are exactly the same. I would note that in the original Bisync docs, this is how it is described:\r\n\r\n> ### Safety measures\r\n- Lock file prevents multiple simultaneous runs when taking a while. This can be particularly useful if bisync is run by cron scheduler.\r\n- Handle change conflicts non-destructively by creating `..path1` and `..path2` file versions.\r\n\r\n> 6. That `-cr none -cl num -cs conflict` & `-cr newer -cl num -cs conflict` are both UserB?\r\n\r\nAgree.\r\n\r\n> 7\\. That the legacy way of handling conflicts is inherently UserC?\r\n\r\nDisagree, because of the way it's worded. This more accurately describes `-cr newer -cl delete`. The legacy way does not \"handle\" conflicts (it more _refuses_ to handle them), it does not delete, and it is not inherently destructive. I do understand why you see it that way -- because you are focusing on a possible scenario where a secondary conflict overwrites an unresolved prior conflict, and I agree that is theoretically possible, but I guess I see that more as preventable user error that is out of scope for bisync to worry about. What I will say is that if you have suggestions for how to better handle this scenario in bisync, I am all ears and happy to consider improvements. \r\n\r\n> 8\\. That you could get _similar_ behaviour to legacy by setting a flag such as `-cr none -cl overwrite -cs path (or .path for ..)`\r\n\r\nAgree, given the way you've defined \"overwrite\", although I don't think \"overwrite\" is an accurate label for the legacy behavior. Again, nothing is overwritten under normal circumstances. The scenario you're focusing on requires a secondary conflict to occur before the original conflict is resolved. It is \"overwrite\" only in the same sense that `--backup-dir` is \"overwrite\". Is it perfect and totally robust to all kinds of edge cases? No. But I do think it is pretty good, and better (for this particular goal) than any alternatives I've seen suggested in this thread. \r\n\r\n> 9. That just because `-cr none -cl num -cs conflict` renames both files that does not imply that the user has been informed of this action.\r\n\r\nAgree. But it would be quite easy to identify them with, for example:\r\n```\r\nrclone lsl remotename --include \"*.conflict*\"\r\n```\r\n\r\nPersonally I have a script that runs weekly and emails me a report of such issues, and I suspect that more serious User A types run it more frequently than that.\r\n\r\n> 10. That because you can't gain any meaning with .path1/.path2 (if you agree with the relevant points above) that doing so creates a false sense of security and could mislead users?\r\n\r\nDisagree with the premise -- as I said in number 1, I think it's quite possible to gain meaning from `..path1`/`..path2`. When you say false sense of security, do you mean because of the secondary conflict overwrite scenario? If so, perhaps adding a note to the docs would help, similar to the one `--backup-dir` has? I'm a little confused because on the one hand you seem concerned that the legacy behavior isn't safe _enough_, but on the other hand you are saying it is _too_ safe, to the point of being useless, and you are advocating removing it and forcing all users to use a far less cautious / reversible method. \r\n\r\nHere are my two questions for you in return:\r\n\r\n1. Let's assume for the purposes of these questions that we agree that the legacy behavior is utterly pointless, very likely destructive, should never have been released, and anyone still wanting to use such an option must not be very smart. Do you agree that it does not harm you personally if it continues to exist as a non-default flag that you will never be forced to use?\r\n\r\n2. Do you agree that it is ever acceptable to develop/maintain an optional feature because other users want it, even if you personally find their use of it to be misguided or ill-advised?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1848837290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1858420435","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1858420435","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1858420435,"node_id":"IC_kwDOAQ-n5M5uxT7T","user":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T19:59:56Z","updated_at":"2023-12-15T20:00:24Z","body":"I haven't had much time, its been hectic on the run up to Christmas (as always) though I'd like to respond quickly.\r\n\r\nThis is 100% resolving not reverting, the only way to revert is to cache previous changes including deletes and restore both local and cloud changes as well as the listings. I think you mean resolve conflicts as local so in essence you would have \"partially-reverted\" only the conflicts back to previous state.\r\n\r\n> 1) It is paradoxical to assign any meaning to any side of conflict resolution in a bi-synchronous environment bar specific and unique client ids\r\n\r\nWhat you just described is (assumed) unique naming due to rcloneClients=1 so seems we agree.\r\n\r\n> 2) With -cr none -cl num -cs conflict there is no difference in meaning -cr none -cl num -cs path (unless the code randomly assign the number)\r\n\r\nI agree they both lack meaning which is kind of the point. You keep talking about reversing but there is currently no way in rclone to correctly reverse only resolve. The point is per no 1. the only way to resolve in this way is to have unique names and use a more destructive `-cr none -cl overwrite`. You are correct that the numbering is an issue so it may be worth another options that always number path1 as odd and path2 as even but again I'm still unsure of what benefit this would provide.\r\n\r\n> 3) That in the legacy conflict mechanism it is more than possible for both file and file..path1 and file..path2 to exist and there for it will be destructive if another conflict of file happens\r\n\r\nIt is actually quite a major concern as this will happen in almost any program people regularly use from Libre/MS Office, IDEs,DAWs,Video Editors, etc... Re `-cr newer` depends on the program; most IDEs will alert you when the file has changed on disc. Though, this point is relevant to the legacy way where in this case files would be lost though with `-cr none -cl num` all future conflicts would still be kept. I know nothing regarding --backup-dir and I'm not sure it has any relevance here we aren't talking about backups but a live bi-synchronous environment. You'd be surprised but if you have your sync running regularly and switch between machine regularly this is likely one of the most common 'edge' case one might experience. Or what about somebody running a resync that has not yet had the conflict. This can and does happen. Both these events have happened to me in my short time of using rclone. \r\n\r\n> 4) That there are really three types of user for conflict resolution:.. \r\n\r\n> Does C delete the losers always, or only if the user has allowed a secondary conflict to occur, without resolving the first conflict?\r\n\r\nDoesn't matter it has the potential to overwrite so whilst first conflict may be userB it belongs in userC due to this fact.\r\n\r\n> I think part of the reason we may be talking past each other is because you are treating \"keep\" and \"delete\" as synonymous with \"safe\" and \"destructive\". Suppose that some malware program randomly renames every file on your computer without changing the contents -- do you consider this \"safe\" simply because no files have been deleted?\r\n\r\nNow this is an irrelevant case (unlike No.3) and very much outside conflict resolution or rclone scope and the reason one needs archives / backups. I still support my use case of keeping files as safe and automatically deleting or create with overwrite as destructive.\r\n\r\n> Now, consider another program that does nearly the same thing, except it's a filename encryption program and you hold the decryption key. The reversibility makes a difference, no? This is why I am more focused on reversible vs. irreversible -- not all \"changes\" are bad, and not all \"keeps\" are good.\r\n\r\nAgain, you are not reversing but resolving which may give the impression of a partial revert.\r\n\r\n> 5) That only the sync exiting with an error code and listing the errors with something like '-cr skip' (or interactive prompt -cr ask) is the only way to be UserA?\r\n\r\n> Partially agree. I think there probably are some User A types who would see this as the only acceptable solution. But other User A types who would find the legacy behavior acceptable. Not all User As are exactly the same. I would note that in the original Bisync docs, this is how it is described:\r\n\r\nI think there are no userA that would agree with legacy behaviour (userC) but would accept any of userB.\r\n\r\nThe docs are wrong the current method has the potential to be destructive it is by very nature overwrite.\r\n\r\n> 7) That the legacy way of handling conflicts is inherently UserC?\r\n\r\nDon't want to sound like a broken record and already answered my reasoning for this statement. \r\n\r\n> 8) That you could get similar behaviour to legacy by setting a flag such as -cr none -cl overwrite -cs path (or .path for ..)\r\n\r\nOverwrite in this case means to create or update I was thinking `upsert` but that is never really used outside of SQL. In most programs similar / file based overwrite works on the basis create a file if not exists if it does allow update/overwrite and without overwrite it errors and stop/skips if file currently exists. So I would say current behaviour is overwrite. Unless you have a better name?\r\n\r\n> 9) That just because -cr none -cl num -cs conflict renames both files that does not imply that the user has been informed of this action.\r\n\r\n> Agree. But it would be quite easy to identify them with, for example: \r\n\r\nYou would still have this unless using `-cl delete` e.g. no greater insight if one file or both are renamed. \r\n\r\n> 10) That because you can't gain any meaning with .path1/.path2 (if you agree with the relevant points above) that doing so creates a false sense of security and could mislead users?\r\n\r\n> Disagree with the premise -- as I said in number 1, I think it's quite possible to gain meaning from ..path1/..path2. \r\n\r\nAlready, shown that your example in No. 1 ( rcloneClients=1) implies these names would be unique and there provide some meaning. \r\n\r\n> When you say false sense of security, do you mean because of the secondary conflict overwrite scenario? \r\n\r\nNo I mean that by default when rcloneClients=n (n>2) these have no meaning only unique client names do so it is a false sense of security.\r\n\r\n> I'm a little confused because on the one hand you seem concerned that the legacy behavior isn't safe enough, but on the other hand you are saying it is too safe, to the point of being useless, and you are advocating removing it and forcing all users to use a far less cautious / reversible method.\r\n\r\nNot at all I am saying that the legacy method is UserC because it has the potential to overwrite and there is very little difference to any UserB options so whatever the default is, is just preference. I've also said if someone wants the overwrite method of course that's fine and am yet to see any reasoning that `-cl overwrite` would not provide the `legacy` behaviour. \r\n\r\nYour questions:\r\n\r\n> 1. Let's assume for the purposes of these questions that we agree that the legacy behavior is utterly pointless, very likely destructive, should never have been released, and anyone still wanting to use such an option must not be very smart. Do you agree that it does not harm you personally if it continues to exist as a non-default flag that you will never be forced to use?\r\n\r\nIt not about being smart or whether it is pointless. Some people may prefer only having one (or two when both lose) conflict at a time I assume this is only for those with regular archives who aren't scared of losing conflicts. The issue is the fact that what is clearly UserC and destructive by nature is being referred to as safe and UserB. Of course, to also provide legacy compatibility with the upgrade users should have the option of `cl overwrite` though should be informed of the risks and also that without unique naming you can not resolve a conflict in the manner suggested e.g automated via script nor can you ever revert though you can consider this type of resolving as perhaps a partial revert although personally I think that is still wrong to use the word revert at all. Right now there is only one way to revert which would be restore previous state from an archive/backup and run a sync (prehaps a --resync ...). \r\n\r\n> 2. Do you agree that it is ever acceptable to develop/maintain an optional feature because other users want it, even if you personally find their use of it to be misguided or ill-advised?\r\n\r\nSee point 1. in short of course I just think the docs should be clear about the risks.\r\n\r\nIt seems emotion might have been a little high and am only making these points so bisync can become the best possible version and to help aid development not to dig, insult or belittle. We are all constantly learning. I do massively appreciate your work and time on this #7410 is just one example of being frickin awesome and has completely changed the viability of this tool for many.\r\n\r\nI am away again this weekend and from Friday next week family time starts so if we don't speak before then; Merry Christmas and a Happy New Year ! ðŸŽ… ðŸŽ„ ðŸŽ‰\r\n\r\nn.b. I will get to testing #7470 though it might not be until the new year now \r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1858420435/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"crocinsocks","id":88002608,"node_id":"MDQ6VXNlcjg4MDAyNjA4","avatar_url":"https://avatars.githubusercontent.com/u/88002608?v=4","gravatar_id":"","url":"https://api.github.com/users/crocinsocks","html_url":"https://github.com/crocinsocks","followers_url":"https://api.github.com/users/crocinsocks/followers","following_url":"https://api.github.com/users/crocinsocks/following{/other_user}","gists_url":"https://api.github.com/users/crocinsocks/gists{/gist_id}","starred_url":"https://api.github.com/users/crocinsocks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crocinsocks/subscriptions","organizations_url":"https://api.github.com/users/crocinsocks/orgs","repos_url":"https://api.github.com/users/crocinsocks/repos","events_url":"https://api.github.com/users/crocinsocks/events{/privacy}","received_events_url":"https://api.github.com/users/crocinsocks/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1858601828","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1858601828","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1858601828,"node_id":"IC_kwDOAQ-n5M5uyANk","user":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T23:22:07Z","updated_at":"2023-12-15T23:22:07Z","body":"No worries, and thank you as always for taking the time to discuss this all in such great detail during such a busy time! It is valuable and I really do appreciate it, even when I don't always share your view 100% of the time.\r\n\r\nI think that there is actually a lot that we do agree on here, and if we reach a lot of the same conclusions for different reasons, that is ok ðŸ™‚ Here is what I think the main takeaways are, for me:\r\n\r\n- You are right that the default should be changed from the legacy behavior to the auto-numbering system that you have proposed.\r\n- The legacy behavior should remain available for the minority of users who want it, but should not be the default, much less the _only_ option.\r\n- The legacy behavior does indeed carry some risk of having older conflicts overwritten by newer conflicts, and at minimum, this risk should be made more clear in the docs. I also remain open to other changes, if you have suggestions as to how bisync could handle this scenario more safely for the users who choose to use it.\r\n- Bisync does not replace the need for a proper 3-2-1 incremental backup system -- they are different tools for different purposes.\r\n- Your `-cr` and `-cs` flags are great ideas and should definitely be added -- I look forward to working on them, and probably pretty soon!\r\n\r\nIf we don't speak again before then, a Merry Christmas and Happy New Year to you as well! ðŸ¥‚","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1858601828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11331893643,"node_id":"REFE_lADOAQ-n5M54Qp0jzwAAAAKjbvmL","url":"https://api.github.com/repos/rclone/rclone/issues/events/11331893643","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8babd5fe062df90a3eedf99bb209999f9369d475","commit_url":"https://api.github.com/repos/nielash/rclone/commits/8babd5fe062df90a3eedf99bb209999f9369d475","created_at":"2023-12-24T04:30:08Z","performed_via_github_app":null},{"actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-24T04:42:09Z","updated_at":"2023-12-24T04:42:09Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/7529","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/7529/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/7529/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/7529/events","html_url":"https://github.com/rclone/rclone/pull/7529","id":2054983543,"node_id":"PR_kwDOAQ-n5M5itOlp","number":7529,"title":"bisync: auto-resolve conflicts, customize `--resync` - fixes #7471 #5681","user":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399007,"node_id":"MDU6TGFiZWw4NjM5OTAwNw==","url":"https://api.github.com/repos/rclone/rclone/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null},{"id":2523110692,"node_id":"MDU6TGFiZWwyNTIzMTEwNjky","url":"https://api.github.com/repos/rclone/rclone/labels/refactoring","name":"refactoring","color":"5319e7","default":false,"description":""},{"id":2533004918,"node_id":"MDU6TGFiZWwyNTMzMDA0OTE4","url":"https://api.github.com/repos/rclone/rclone/labels/change%20detection","name":"change detection","color":"54d3cf","default":false,"description":""},{"id":3427818774,"node_id":"LA_kwDOAQ-n5M7MUF0W","url":"https://api.github.com/repos/rclone/rclone/labels/bisync","name":"bisync","color":"1D76DB","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/54","html_url":"https://github.com/rclone/rclone/milestone/54","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/54/labels","id":9909337,"node_id":"MI_kwDOAQ-n5M4AlzRZ","number":54,"title":"v1.66","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":5,"closed_issues":25,"state":"closed","created_at":"2023-09-11T16:50:18Z","updated_at":"2024-08-15T14:36:39Z","due_on":"2024-02-29T08:00:00Z","closed_at":"2024-03-10T12:33:48Z"},"comments":0,"created_at":"2023-12-24T04:42:08Z","updated_at":"2024-01-20T22:17:02Z","closed_at":"2024-01-20T22:17:02Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rclone/rclone/pulls/7529","html_url":"https://github.com/rclone/rclone/pull/7529","diff_url":"https://github.com/rclone/rclone/pull/7529.diff","patch_url":"https://github.com/rclone/rclone/pull/7529.patch","merged_at":"2024-01-20T22:17:02Z"},"body":"(This PR is dependent on #7410, #7497, #7498, #7501, and #7515 -- only 5 commits are new ðŸ™‚ )\r\n\r\n#### What is the purpose of this change?\r\n\r\nCurrently, when a file is new/changed on both paths (relative to the prior sync), and the versions on each side are not identical, bisync will keep both versions, renaming them with `..path1` and `..path2` suffixes, respectively. Many users have requested more control over how bisync handles such conflicts -- including an option to automatically select one version as the \"winner\" and rename or delete the \"loser\".\r\n\r\nSimilarly, users have requested more control over how conflicting files are handled during `--resync`. Currently the `path1` version prevails by default, but users have requested options to automatically select the winner based on characteristics such as `newer`, `older`, `larger`, and `smaller`.\r\n\r\nThis change introduces support for such options. Documented in great detail in [the docs](https://github.com/nielash/rclone/blob/bisync-resolve/docs/content/bisync.md#--conflict-resolve-choice-conflict-resolve) and commit messages.\r\n\r\n#### Was the change discussed in an issue or in the forum before?\r\n\r\n- #7471\r\n- #5681\r\n\r\n#### Checklist\r\n\r\n- [x] I have read the [contribution guidelines](https://github.com/rclone/rclone/blob/master/CONTRIBUTING.md#submitting-a-new-feature-or-bug-fix).\r\n- [x] I have added tests for all changes in this PR if appropriate.\r\n- [x] I have added documentation for the changes if appropriate.\r\n- [x] All commit messages are in [house style](https://github.com/rclone/rclone/blob/master/CONTRIBUTING.md#commit-messages).\r\n- [x] I'm done, this Pull Request is ready for review :-)\r\n","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/7529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/7529/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":11331903673,"node_id":"COE_lADOAQ-n5M54Qp0jzwAAAAKjbyC5","url":"https://api.github.com/repos/rclone/rclone/issues/events/11331903673","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"connected","commit_id":null,"commit_url":null,"created_at":"2023-12-24T04:43:54Z","performed_via_github_app":null},{"id":11331938658,"node_id":"REFE_lADOAQ-n5M54Qp0jzwAAAAKjb6li","url":"https://api.github.com/repos/rclone/rclone/issues/events/11331938658","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"db3ff1c78028527a6d4afcbe443bd839d88da5dd","commit_url":"https://api.github.com/repos/nielash/rclone/commits/db3ff1c78028527a6d4afcbe443bd839d88da5dd","created_at":"2023-12-24T05:30:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1881003942","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1881003942","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1881003942,"node_id":"IC_kwDOAQ-n5M5wHdem","user":{"login":"martind69","id":103326240,"node_id":"U_kgDOBiiiIA","avatar_url":"https://avatars.githubusercontent.com/u/103326240?v=4","gravatar_id":"","url":"https://api.github.com/users/martind69","html_url":"https://github.com/martind69","followers_url":"https://api.github.com/users/martind69/followers","following_url":"https://api.github.com/users/martind69/following{/other_user}","gists_url":"https://api.github.com/users/martind69/gists{/gist_id}","starred_url":"https://api.github.com/users/martind69/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martind69/subscriptions","organizations_url":"https://api.github.com/users/martind69/orgs","repos_url":"https://api.github.com/users/martind69/repos","events_url":"https://api.github.com/users/martind69/events{/privacy}","received_events_url":"https://api.github.com/users/martind69/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-08T13:26:11Z","updated_at":"2024-01-08T13:26:11Z","body":"Please post an update to this Task. I am waiting for a fix.\r\nMy issues with the latest beta is that no `--retries` occurs on an conflict situation.\r\nI tried using `--retries=1000 --retries-sleep=30` for cases where MS Office files are occupied or locked!\r\nThe bisync task will end up with a fatal error and needs to be resynced. \r\nIf this would work, the actual task could be end up normal with a (few) file(s) in a retrying loop.\r\nPlease consider to accept `--retries*` with bisync!\r\n\r\nI don't know how the new solutions will perform `--conflict-resolve=newer --conflict-loser=delete --resync-mode=newer` i could'nt be test it.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1881003942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"martind69","id":103326240,"node_id":"U_kgDOBiiiIA","avatar_url":"https://avatars.githubusercontent.com/u/103326240?v=4","gravatar_id":"","url":"https://api.github.com/users/martind69","html_url":"https://github.com/martind69","followers_url":"https://api.github.com/users/martind69/followers","following_url":"https://api.github.com/users/martind69/following{/other_user}","gists_url":"https://api.github.com/users/martind69/gists{/gist_id}","starred_url":"https://api.github.com/users/martind69/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martind69/subscriptions","organizations_url":"https://api.github.com/users/martind69/orgs","repos_url":"https://api.github.com/users/martind69/repos","events_url":"https://api.github.com/users/martind69/events{/privacy}","received_events_url":"https://api.github.com/users/martind69/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1882382319","html_url":"https://github.com/rclone/rclone/issues/7471#issuecomment-1882382319","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7471","id":1882382319,"node_id":"IC_kwDOAQ-n5M5wMt_v","user":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T04:07:57Z","updated_at":"2024-01-09T04:07:57Z","body":"Hi @martind69, I have [posted a preview here](https://github.com/nielash/rclone/releases/tag/v1.65.0-beta.7566.68eb6f5b2.bisync-feature-preview-2024-01-01) -- feel free to try it if you like and let me know if you have feedback. It includes my proposed implementation of the conflict-resolve features discussed on this ticket, and also [many](https://github.com/nielash/rclone/blob/bisync-feature-preview-2024-01-01/docs/content/bisync.md#v166) other [fixes](https://github.com/nielash/rclone/compare/668711e43213bc9464c0b25c88621cd987898f08...bisync-feature-preview-2024-01-01) that are not yet in the latest official rclone beta.\r\n\r\n> Please consider to accept `--retries*` with bisync!\r\n\r\nOne of my proposed commits does exactly this ðŸ™‚ https://github.com/nielash/rclone/commit/f1109f1da86a4e43d47f18617523a4a1eed842dd\r\nNote that it requires using `--resilient`, the default is `--retries 3`, and `--retries-sleep` is not yet implemented (but it would be easy to add this -- do you want to open a new issue for this?)\r\n\r\nGiven what you described, I think you may also be interested in the [`--recover`](https://github.com/nielash/rclone/blob/bisync-feature-preview-2024-01-01/docs/content/bisync.md#--recover) feature proposed on #7501. I would recommend trying it with something like:\r\n\r\n```\r\n--resilient --recover --max-lock 2m --conflict-resolve newer\r\n```\r\nand `--resync-mode newer` (only when resyncing.)\r\n\r\nI would probably suggest _not_ using `--conflict-loser delete` right away, until you have used `--conflict-resolve newer` for a little while and are comfortable with how it works and you are sure that deleting the loser is what you want. I also highly suggest using [`--backup-dir1` and `--backup-dir2`](https://github.com/nielash/rclone/blob/bisync-feature-preview-2024-01-01/docs/content/bisync.md#--backup-dir1-and---backup-dir2) if you are going to use `--conflict-loser delete`.\r\n\r\nLet me know how it works for you if you give it a try ðŸ™‚ ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1882382319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11424928773,"node_id":"MEE_lADOAQ-n5M54Qp0jzwAAAAKo-pQF","url":"https://api.github.com/repos/rclone/rclone/issues/events/11424928773","actor":{"login":"martind69","id":103326240,"node_id":"U_kgDOBiiiIA","avatar_url":"https://avatars.githubusercontent.com/u/103326240?v=4","gravatar_id":"","url":"https://api.github.com/users/martind69","html_url":"https://github.com/martind69","followers_url":"https://api.github.com/users/martind69/followers","following_url":"https://api.github.com/users/martind69/following{/other_user}","gists_url":"https://api.github.com/users/martind69/gists{/gist_id}","starred_url":"https://api.github.com/users/martind69/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martind69/subscriptions","organizations_url":"https://api.github.com/users/martind69/orgs","repos_url":"https://api.github.com/users/martind69/repos","events_url":"https://api.github.com/users/martind69/events{/privacy}","received_events_url":"https://api.github.com/users/martind69/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-01-09T04:07:57Z","performed_via_github_app":null},{"id":11424928778,"node_id":"SE_lADOAQ-n5M54Qp0jzwAAAAKo-pQK","url":"https://api.github.com/repos/rclone/rclone/issues/events/11424928778","actor":{"login":"martind69","id":103326240,"node_id":"U_kgDOBiiiIA","avatar_url":"https://avatars.githubusercontent.com/u/103326240?v=4","gravatar_id":"","url":"https://api.github.com/users/martind69","html_url":"https://github.com/martind69","followers_url":"https://api.github.com/users/martind69/followers","following_url":"https://api.github.com/users/martind69/following{/other_user}","gists_url":"https://api.github.com/users/martind69/gists{/gist_id}","starred_url":"https://api.github.com/users/martind69/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martind69/subscriptions","organizations_url":"https://api.github.com/users/martind69/orgs","repos_url":"https://api.github.com/users/martind69/repos","events_url":"https://api.github.com/users/martind69/events{/privacy}","received_events_url":"https://api.github.com/users/martind69/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-01-09T04:07:57Z","performed_via_github_app":null},{"actor":{"login":"martind69","id":103326240,"node_id":"U_kgDOBiiiIA","avatar_url":"https://avatars.githubusercontent.com/u/103326240?v=4","gravatar_id":"","url":"https://api.github.com/users/martind69","html_url":"https://github.com/martind69","followers_url":"https://api.github.com/users/martind69/followers","following_url":"https://api.github.com/users/martind69/following{/other_user}","gists_url":"https://api.github.com/users/martind69/gists{/gist_id}","starred_url":"https://api.github.com/users/martind69/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martind69/subscriptions","organizations_url":"https://api.github.com/users/martind69/orgs","repos_url":"https://api.github.com/users/martind69/repos","events_url":"https://api.github.com/users/martind69/events{/privacy}","received_events_url":"https://api.github.com/users/martind69/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T06:30:20Z","updated_at":"2024-01-09T06:30:20Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/7555","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/7555/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/7555/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/7555/events","html_url":"https://github.com/rclone/rclone/issues/7555","id":2071714001,"node_id":"I_kwDOAQ-n5M57e9jR","number":7555,"title":"bisync: retries and delay on locked files","user":{"login":"martind69","id":103326240,"node_id":"U_kgDOBiiiIA","avatar_url":"https://avatars.githubusercontent.com/u/103326240?v=4","gravatar_id":"","url":"https://api.github.com/users/martind69","html_url":"https://github.com/martind69","followers_url":"https://api.github.com/users/martind69/followers","following_url":"https://api.github.com/users/martind69/following{/other_user}","gists_url":"https://api.github.com/users/martind69/gists{/gist_id}","starred_url":"https://api.github.com/users/martind69/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martind69/subscriptions","organizations_url":"https://api.github.com/users/martind69/orgs","repos_url":"https://api.github.com/users/martind69/repos","events_url":"https://api.github.com/users/martind69/events{/privacy}","received_events_url":"https://api.github.com/users/martind69/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3427818774,"node_id":"LA_kwDOAQ-n5M7MUF0W","url":"https://api.github.com/repos/rclone/rclone/labels/bisync","name":"bisync","color":"1D76DB","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/54","html_url":"https://github.com/rclone/rclone/milestone/54","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/54/labels","id":9909337,"node_id":"MI_kwDOAQ-n5M4AlzRZ","number":54,"title":"v1.66","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":5,"closed_issues":25,"state":"closed","created_at":"2023-09-11T16:50:18Z","updated_at":"2024-08-15T14:36:39Z","due_on":"2024-02-29T08:00:00Z","closed_at":"2024-03-10T12:33:48Z"},"comments":7,"created_at":"2024-01-09T06:30:19Z","updated_at":"2024-02-12T18:24:56Z","closed_at":"2024-02-12T18:24:55Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"In relation to #7471 i will split off this issue as an extra feature request.\r\n\r\nI tried using --retries=1000 --retries-sleep=30 for cases where MS Office files are occupied or locked!\r\nThe bisync task will end up with a fatal error and needs to be resynced.\r\n\r\n@nielash [posted a preview.](https://github.com/nielash/rclone/releases/tag/v1.65.0-beta.7566.68eb6f5b2.bisync-feature-preview-2024-01-01) **Many THANKS for that!**\r\nI share my test results with this preview beta here:\r\n\r\n```\r\nrclone bisync \"path1\" \"C:\\TBD\\Test\" --config=\"rclone.conf\" --workdir=\"cache\" --exclude=\"{~$*,*.tmp,*.bak}\" --check-first --fast-list --remove-empty-dirs --retries=1000 --retries-sleep=30 --conflict-resolve=newer --conflict-loser=delete --resilient --recover --max-lock 5m -v\r\n2024/01/09 06:31:11 NOTICE: bisync is IN BETA. Don't use in production!\r\n2024/01/09 06:31:11 INFO  : Setting --ignore-listing-checksum as neither --checksum nor --compare checksum are set.\r\n2024/01/09 06:31:11 INFO  : Bisyncing with Comparison Settings:\r\n{\r\n        \"Modtime\": true,\r\n        \"Size\": true,\r\n        \"Checksum\": false,\r\n        \"HashType1\": 0,\r\n        \"HashType2\": 0,\r\n        \"NoSlowHash\": false,\r\n        \"SlowHashSyncOnly\": false,\r\n        \"SlowHashDetected\": true,\r\n        \"DownloadHash\": false\r\n}\r\n2024/01/09 06:31:11 INFO  : lock file renewed for 5m0s. New expiration: 2024-01-09 06:36:11.3875714 +0100 CET m=+300.422610101\r\n2024/01/09 06:31:11 INFO  : Synching Path1 \"path1\" with Path2 \"C:\\TBD\\Test\\\"\r\n2024/01/09 06:31:11 INFO  : Building Path1 and Path2 listings\r\n2024/01/09 06:31:11 INFO  : Path1 checking for diffs\r\n2024/01/09 06:31:11 INFO  : - Path1    File changed: size (smaller), time (newer) - Ship-to form.docx\r\n2024/01/09 06:31:11 INFO  : Path1:    1 changes:    0 new,    1 modified,    0 deleted\r\n2024/01/09 06:31:11 INFO  : (Modified:    1 newer,    0 older,    0 larger,    1 smaller)\r\n2024/01/09 06:31:11 INFO  : Path2 checking for diffs\r\n2024/01/09 06:31:11 INFO  : Applying changes\r\n2024/01/09 06:31:11 INFO  : - Path1    Queue copy to Path2       - C:\\TBD\\Test\\Ship-to form.docx\r\n2024/01/09 06:31:11 INFO  : - Path1    Do queued copies to                - Path2\r\n2024/01/09 06:31:11 INFO  : Local file system at //?/C:/TBD/Test: Running all checks before starting transfers\r\n2024/01/09 06:31:11 INFO  : Local file system at //?/C:/TBD/Test: Checks finished, now starting transfers\r\n2024/01/09 06:31:11 ERROR : Ship-to form.docx.cagiyuw2.partial: partial file rename failed: rename \\\\?\\C:\\TBD\\Test\\Ship-to form.docx.cagiyuw2.partial \\\\?\\C:\\TBD\\Test\\Ship-to form.docx: Access is denied.\r\n2024/01/09 06:31:11 INFO  : Ship-to form.docx.cagiyuw2.partial: Removing failed copy\r\n2024/01/09 06:31:11 ERROR : Local file system at //?/C:/TBD/Test: not deleting files as there were IO errors\r\n2024/01/09 06:31:11 ERROR : Local file system at //?/C:/TBD/Test: not deleting directories as there were IO errors\r\n2024/01/09 06:31:11 NOTICE: copy1to2: Received error: rename \\\\?\\C:\\TBD\\Test\\Ship-to form.docx.cagiyuw2.partial \\\\?\\C:\\TBD\\Test\\Ship-to form.docx: Access is denied. - retrying as --resilient is set. Retry 1/1000\r\n2024/01/09 06:31:11 INFO  : Local file system at //?/C:/TBD/Test: Running all checks before starting transfers\r\n2024/01/09 06:31:11 INFO  : Local file system at //?/C:/TBD/Test: Checks finished, now starting transfers\r\n2024/01/09 06:31:11 ERROR : Ship-to form.docx.zeluram5.partial: partial file rename failed: rename \\\\?\\C:\\TBD\\Test\\Ship-to form.docx.zeluram5.partial \\\\?\\C:\\TBD\\Test\\Ship-to form.docx: Access is denied.\r\n2024/01/09 06:31:11 INFO  : Ship-to form.docx.zeluram5.partial: Removing failed copy\r\n2024/01/09 06:31:11 ERROR : Local file system at //?/C:/TBD/Test: not deleting files as there were IO errors\r\n2024/01/09 06:31:11 ERROR : Local file system at //?/C:/TBD/Test: not deleting directories as there were IO errors\r\n2024/01/09 06:31:11 NOTICE: copy1to2: Received error: rename \\\\?\\C:\\TBD\\Test\\Ship-to form.docx.zeluram5.partial \\\\?\\C:\\TBD\\Test\\Ship-to form.docx: Access is denied. - retrying as --resilient is set. Retry 2/1000\r\n```\r\n\r\nThis loop runs very quick without any sleep time. So the `--retries-sleep=30` was ignored!\r\n\r\nAt this moment i unlocked the file.\r\n\r\n```\r\n2024/01/09 06:31:26 INFO  : Local file system at //?/C:/TBD/Test: Running all checks before starting transfers\r\n2024/01/09 06:31:26 INFO  : Local file system at //?/C:/TBD/Test: Checks finished, now starting transfers\r\n2024/01/09 06:31:26 INFO  : Ship-to form.docx: Copied (replaced existing)\r\n2024/01/09 06:31:26 ERROR : Local file system at //?/C:/TBD/Test: not deleting files as there were IO errors\r\n2024/01/09 06:31:26 ERROR : Local file system at //?/C:/TBD/Test: not deleting directories as there were IO errors\r\n2024/01/09 06:31:26 NOTICE: copy1to2: Received error: not deleting files as there were IO errors - retrying as --resilient is set. Retry 174/1000\r\n2024/01/09 06:31:26 INFO  : Local file system at //?/C:/TBD/Test: Running all checks before starting transfers\r\n2024/01/09 06:31:26 INFO  : Local file system at //?/C:/TBD/Test: Checks finished, now starting transfers\r\n2024/01/09 06:31:26 ERROR : Local file system at //?/C:/TBD/Test: not deleting files as there were IO errors\r\n2024/01/09 06:31:26 ERROR : Local file system at //?/C:/TBD/Test: not deleting directories as there were IO errors\r\n2024/01/09 06:31:26 NOTICE: copy1to2: Received error: not deleting files as there were IO errors - retrying as --resilient is set. Retry 175/1000\r\n```\r\n\r\nThe loop keeps running...\r\nSo i ended up with sending an exit signal.\r\n\r\n```\r\n2024/01/09 06:31:31 INFO  : Local file system at //?/C:/TBD/Test: Running all checks before starting transfers\r\n2024/01/09 06:31:31 INFO  : Local file system at //?/C:/TBD/Test: Checks finished, now starting transfers\r\n2024/01/09 06:31:31 ERROR : Local file system at //?/C:/TBD/Test: not deleting files as there were IO errors\r\n2024/01/09 06:31:31 ERROR : Local file system at //?/C:/TBD/Test: not deleting directories as there were IO errors\r\n2024/01/09 06:31:31 NOTICE: copy1to2: Received error: not deleting files as there were IO errors - retrying as --resilient is set. Retry 281/1000\r\n2024/01/09 06:31:31 INFO  : Local file system at //?/C:/TBD/Test: Running all checks before starting transfers\r\n2024/01/09 06:31:31 INFO  : Signal received: interrupt\r\n2024/01/09 06:31:31 NOTICE: Attempting to gracefully shutdown. (Send exit signal again for immediate un-graceful shutdown.)\r\n2024/01/09 06:31:31 INFO  : Telling Sync to wrap up early.\r\n2024/01/09 06:31:31 INFO  : Canceling Sync if not done in: 30\r\n2024/01/09 06:31:31 INFO  : Local file system at //?/C:/TBD/Test: Checks finished, now starting transfers\r\n2024/01/09 06:31:31 ERROR : Local file system at //?/C:/TBD/Test: not deleting files as there were IO errors\r\n2024/01/09 06:31:31 ERROR : Local file system at //?/C:/TBD/Test: not deleting directories as there were IO errors\r\n2024/01/09 06:31:31 NOTICE: copy1to2: Received error: not deleting files as there were IO errors - retrying as --resilient is set. Retry 282/1000\r\n2024/01/09 06:31:31 NOTICE: copy1to2: Received error: <nil> - retrying as --resilient is set. Retry 283/1000\r\n2024/01/09 06:31:31 NOTICE: copy1to2: Received error: <nil> - retrying as --resilient is set. Retry 284/1000\r\n...\r\n...\r\n2024/01/09 06:31:31 NOTICE: copy1to2: Received error: <nil> - retrying as --resilient is set. Retry 999/1000\r\n2024/01/09 06:31:31 NOTICE: copy1to2: Received error: <nil> - retrying as --resilient is set. Retry 1000/1000\r\n2024/01/09 06:31:31 INFO  : Updating listings\r\n2024/01/09 06:31:31 INFO  : Validating listings for Path1 \"path1\" vs Path2 \"C:\\TBD\\Test\\\"\r\n2024/01/09 06:31:31 INFO  : Removing empty directories\r\n2024/01/09 06:31:31 NOTICE: Graceful shutdown completed successfully.\r\n2024/01/09 06:31:31 INFO  : Bisync successful\r\n2024/01/09 06:31:31 INFO  :\r\nTransferred:       14.388 MiB / 14.388 MiB, 100%, 711.230 KiB/s, ETA 0s\r\nErrors:               173 (retrying may help)\r\nChecks:               396 / 396, 100%\r\nTransferred:            1 / 1, 100%\r\nElapsed time:        20.5s\r\n\r\n2024/01/09 06:31:31 Failed to bisync with 173 errors: last error was: rename \\\\?\\C:\\TBD\\Test\\Ship-to form.docx.lebeqic0.partial \\\\?\\C:\\TBD\\Test\\Ship-to form.docx: Access is denied.\r\n2024/01/09 06:31:32 INFO  : Exiting...\r\n```\r\n\r\nI was wondering why 14.388 MiB are transferred. Every loop the partial file was copied.\r\nSo the `--retries-sleep=30` would be reduce the amount.\r\n\r\nMy summary of the bisync-feature-preview:\r\nanything causes tons of verbose output.\r\nstability seems good. next run recovers automatically.","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/7555/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/7555/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":11547471494,"node_id":"REFE_lADOAQ-n5M54Qp0jzwAAAAKwSG6G","url":"https://api.github.com/repos/rclone/rclone/issues/events/11547471494","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3816d85d045b3bd9afe6259eda15cf0f33504309","commit_url":"https://api.github.com/repos/nielash/rclone/commits/3816d85d045b3bd9afe6259eda15cf0f33504309","created_at":"2024-01-20T21:58:12Z","performed_via_github_app":null},{"id":11547516540,"node_id":"CE_lADOAQ-n5M54Qp0jzwAAAAKwSR58","url":"https://api.github.com/repos/rclone/rclone/issues/events/11547516540","actor":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"68f09986999824d247d084f3aed81ec957cd0a93","commit_url":"https://api.github.com/repos/rclone/rclone/commits/68f09986999824d247d084f3aed81ec957cd0a93","created_at":"2024-01-20T22:17:04Z","state_reason":null,"performed_via_github_app":null}]