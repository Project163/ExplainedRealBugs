[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/874017227","html_url":"https://github.com/rclone/rclone/issues/5422#issuecomment-874017227","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5422","id":874017227,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NDAxNzIyNw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-05T10:55:21Z","updated_at":"2021-07-05T10:55:21Z","body":"Hmm, this is a consequence of rclone using a [presigned request](https://docs.aws.amazon.com/sdk-for-go/api/aws/request/#Request.PresignRequest) for uploads. Note that rclone does incude the `content-md5` in this case which is a very strong check.\r\n\r\nhttps://github.com/rclone/rclone/blob/76ea716abfcc0c7dc18ecfd1fb609a6b6a89f101/backend/s3/s3.go#L3315-L3322\r\n\r\nI don't think that rclone knows the X-Amz-Content-Sha256 at this point which is why it isn't returned in the presigned request.\r\n\r\nThis is all to work around the fact that you can't give a `io.Reader` to [PutObject](https://docs.aws.amazon.com/sdk-for-go/api/service/s3/#S3.PutObject) - it needs a seekable stream which we don't have","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/874017227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5520982952,"node_id":"AE_lADOAQ-n5M43SH9uzwAAAAFJE4Oo","url":"https://api.github.com/repos/rclone/rclone/issues/events/5520982952","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2021-10-26T14:14:07Z","assignee":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":5520984740,"node_id":"LE_lADOAQ-n5M43SH9uzwAAAAFJE4qk","url":"https://api.github.com/repos/rclone/rclone/issues/events/5520984740","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-10-26T14:14:22Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":5520984748,"node_id":"LE_lADOAQ-n5M43SH9uzwAAAAFJE4qs","url":"https://api.github.com/repos/rclone/rclone/issues/events/5520984748","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-10-26T14:14:22Z","label":{"name":"question","color":"a07898"},"performed_via_github_app":null},{"id":5520984758,"node_id":"LE_lADOAQ-n5M43SH9uzwAAAAFJE4q2","url":"https://api.github.com/repos/rclone/rclone/issues/events/5520984758","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-10-26T14:14:22Z","label":{"name":"Remote: S3","color":"fbca04"},"performed_via_github_app":null},{"id":5830652761,"node_id":"UNLE_lADOAQ-n5M43SH9uzwAAAAFbiLNZ","url":"https://api.github.com/repos/rclone/rclone/issues/events/5830652761","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2021-12-31T15:06:19Z","label":{"name":"question","color":"a07898"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1113411642","html_url":"https://github.com/rclone/rclone/issues/5422#issuecomment-1113411642","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5422","id":1113411642,"node_id":"IC_kwDOAQ-n5M5CXVA6","user":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T14:49:17Z","updated_at":"2022-04-29T14:49:17Z","body":"Would it be possible to send `x-amz-content-sha256: UNSIGNED-PAYLOAD` when it's not available?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1113411642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1113971154","html_url":"https://github.com/rclone/rclone/issues/5422#issuecomment-1113971154","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5422","id":1113971154,"node_id":"IC_kwDOAQ-n5M5CZdnS","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-30T11:23:39Z","updated_at":"2022-04-30T11:23:39Z","body":"> Would it be possible to send `x-amz-content-sha256: UNSIGNED-PAYLOAD` when it's not available?\r\n\r\nSure - that would easy to do. How would it help? Do you want to send a pull request?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1113971154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1114033550","html_url":"https://github.com/rclone/rclone/issues/5422#issuecomment-1114033550","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5422","id":1114033550,"node_id":"IC_kwDOAQ-n5M5CZs2O","user":{"login":"Erisa","id":14004943,"node_id":"MDQ6VXNlcjE0MDA0OTQz","avatar_url":"https://avatars.githubusercontent.com/u/14004943?v=4","gravatar_id":"","url":"https://api.github.com/users/Erisa","html_url":"https://github.com/Erisa","followers_url":"https://api.github.com/users/Erisa/followers","following_url":"https://api.github.com/users/Erisa/following{/other_user}","gists_url":"https://api.github.com/users/Erisa/gists{/gist_id}","starred_url":"https://api.github.com/users/Erisa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erisa/subscriptions","organizations_url":"https://api.github.com/users/Erisa/orgs","repos_url":"https://api.github.com/users/Erisa/repos","events_url":"https://api.github.com/users/Erisa/events{/privacy}","received_events_url":"https://api.github.com/users/Erisa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-30T18:32:02Z","updated_at":"2022-04-30T18:32:02Z","body":"> > Would it be possible to send `x-amz-content-sha256: UNSIGNED-PAYLOAD` when it's not available?\r\n> \r\n> Sure - that would easy to do. How would it help? Do you want to send a pull request?\r\n\r\nFrom my (limited) understanding of the situation, the `x-amz-content-sha256` header is strictly required in the proper S3 spec, and if you cannot or do not want to calculate an SHA256 to send, you are supposed to send `UNSIGNED-PAYLOAD` to notify it of such.\r\n\r\nThis is documented here: https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-header-based-auth.html\r\n\r\nThough it seems not a lot of S3 providers actually enforce that requirement, some of them do, and those don't work when uploading from rclone currently. To the best of my knowledge this is not a failing on their part since they follow the spec.\r\n\r\nI don't think setting the header in this casse should have any negative repercussions, though I don't know 100% for sure.\r\n\r\nThe ideal situation (and what I think the issue opener here is asking for) would of course be to include a proper X-Amz-Content-Sha256 for all requests where possible, but if it is not possible the header should still exist.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1114033550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Erisa","id":14004943,"node_id":"MDQ6VXNlcjE0MDA0OTQz","avatar_url":"https://avatars.githubusercontent.com/u/14004943?v=4","gravatar_id":"","url":"https://api.github.com/users/Erisa","html_url":"https://github.com/Erisa","followers_url":"https://api.github.com/users/Erisa/followers","following_url":"https://api.github.com/users/Erisa/following{/other_user}","gists_url":"https://api.github.com/users/Erisa/gists{/gist_id}","starred_url":"https://api.github.com/users/Erisa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erisa/subscriptions","organizations_url":"https://api.github.com/users/Erisa/orgs","repos_url":"https://api.github.com/users/Erisa/repos","events_url":"https://api.github.com/users/Erisa/events{/privacy}","received_events_url":"https://api.github.com/users/Erisa/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6528651997,"node_id":"REFE_lADOAQ-n5M43SH9uzwAAAAGFI1Ld","url":"https://api.github.com/repos/rclone/rclone/issues/events/6528651997","actor":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f3a4181aa9515f1b65f330d2fb95d59c30fca37e","commit_url":"https://api.github.com/repos/vlovich/rclone/commits/f3a4181aa9515f1b65f330d2fb95d59c30fca37e","created_at":"2022-05-01T00:22:43Z","performed_via_github_app":null},{"id":6528657607,"node_id":"REFE_lADOAQ-n5M43SH9uzwAAAAGFI2jH","url":"https://api.github.com/repos/rclone/rclone/issues/events/6528657607","actor":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3f5bed51dd0c89d9e7ac085437d778adbeb769cf","commit_url":"https://api.github.com/repos/vlovich/rclone/commits/3f5bed51dd0c89d9e7ac085437d778adbeb769cf","created_at":"2022-05-01T00:25:32Z","performed_via_github_app":null},{"actor":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-01T00:27:44Z","updated_at":"2022-05-01T00:27:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/6136","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/6136/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/6136/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/6136/events","html_url":"https://github.com/rclone/rclone/pull/6136","id":1221958376,"node_id":"PR_kwDOAQ-n5M43Hq3U","number":6136,"title":"Fix strict Sigv4 spec incompatibility","user":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-05-01T00:27:44Z","updated_at":"2022-05-01T17:24:10Z","closed_at":"2022-05-01T17:24:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rclone/rclone/pulls/6136","html_url":"https://github.com/rclone/rclone/pull/6136","diff_url":"https://github.com/rclone/rclone/pull/6136.diff","patch_url":"https://github.com/rclone/rclone/pull/6136.patch","merged_at":null},"body":"Set unsigned-payload value for x-amz-content-sha256 if unavailable.\r\nFixes #5422 (cause of incompatibility with R2).\r\n\r\n#### What is the purpose of this change?\r\nFix incompatibility with any S3 provider that implements the Sigv4 spec strictly by making sure `x-amz-content-sha256` is always set if not present (the value is documented as being required to be `UNSIGNED_PAYLOAD`).\r\n\r\n#### Was the change discussed in an issue or in the forum before?\r\n\r\n#5422\r\nAlso on internal-only R2 private beta Discord channel.\r\n\r\n#### Checklist\r\n\r\n- [X] I have read the [contribution guidelines](https://github.com/rclone/rclone/blob/master/CONTRIBUTING.md#submitting-a-new-feature-or-bug-fix).\r\n- [ ] I have added tests for all changes in this PR if appropriate.\r\n- [ ] I have added documentation for the changes if appropriate.\r\n- [X] All commit messages are in [house style](https://github.com/rclone/rclone/blob/master/CONTRIBUTING.md#commit-messages).\r\n- [ ] I'm done, this Pull Request is ready for review :-)\r\n","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/6136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/6136/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1114083810","html_url":"https://github.com/rclone/rclone/issues/5422#issuecomment-1114083810","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5422","id":1114083810,"node_id":"IC_kwDOAQ-n5M5CZ5Hi","user":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-01T00:31:35Z","updated_at":"2022-05-01T00:31:35Z","body":"Hey Nick. I appreciate you're busy. I did my best at guessing a fix but I'm not sure if it's correct or how to add tests. I'm a bit swamped with the launch of R2 so I can't promise I followed all the contribution guidelines so I hope you'll help me out here. We also have an enthusiastic community - hopefully they can help at least verify this fixes the issue with R2 as I haven't done that part either (just kind of blindly wrote the code which is all I have time for).\r\n\r\nThat being said, I'm seriously debating dropping enforcing this on the R2 side of things since we're trying for S3 compatibility.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1114083810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1114088388","html_url":"https://github.com/rclone/rclone/issues/5422#issuecomment-1114088388","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5422","id":1114088388,"node_id":"IC_kwDOAQ-n5M5CZ6PE","user":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-01T01:03:18Z","updated_at":"2022-05-01T01:03:18Z","body":"So we confirmed that that header adding code does work. It's not sufficient for R2 since we don't support presigned requests yet (maybe that's not required there and the original poster was similarly misled?)\n\nI don't think this is an issue for R2 yet.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1114088388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6542327753,"node_id":"REFE_lADOAQ-n5M43SH9uzwAAAAGF8__J","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542327753","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"59ef20417bba91aa5b494afc73d47e2ad3925b9d","commit_url":"https://api.github.com/repos/rclone/rclone/commits/59ef20417bba91aa5b494afc73d47e2ad3925b9d","created_at":"2022-05-03T16:53:48Z","performed_via_github_app":null},{"id":6542327772,"node_id":"REFE_lADOAQ-n5M43SH9uzwAAAAGF8__c","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542327772","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"781bff280dc1851cb8983169f5ec7ca9cc93dcad","commit_url":"https://api.github.com/repos/rclone/rclone/commits/781bff280dc1851cb8983169f5ec7ca9cc93dcad","created_at":"2022-05-03T16:53:48Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1116330745","html_url":"https://github.com/rclone/rclone/issues/5422#issuecomment-1116330745","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5422","id":1116330745,"node_id":"IC_kwDOAQ-n5M5Cidr5","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T16:57:19Z","updated_at":"2022-05-03T17:06:55Z","body":"@vlovich thanks for having a go at this.\r\n\r\nI've spent a couple of hours trawling through the SDK code and I've finally found a way rclone can use `PutObject` with an `io.Reader`. It adds the proper X-Amz-Content-Sha256 header.\r\n\r\nSo would any interested parties please give this a test? @Erisa @ctgschollar \r\n\r\nIf it goes well I'd like to make PutObject the default for v1.59 as not all S3 backends support pre-signed requests (if you want to use rclone without pre-signed requests just set `--s3-upload-cutoff 0` so all things are uploaded as multipart uploads)\r\n\r\nHere is the commit message which has more info\r\n\r\n>     s3: use PutObject from the aws SDK to upload single part objects\r\n>     \r\n>     Before this change rclone used presigned requests to upload single\r\n>     part objects. This was because of a limitation in the SDK which didn't\r\n>     allow non seekable io.Readers to be passed in.\r\n>     \r\n>     This is incompatible with some S3 backends, and rclone wasn't adding\r\n>     the `X-Amz-Content-Sha256: UNSIGNED-PAYLOAD` header which was\r\n>     incompatible with other S3 backends.\r\n>     \r\n>     The SDK now allows for this so rclone can use PutObject directly.\r\n>     \r\n>     This sets the `X-Amz-Content-Sha256: UNSIGNED-PAYLOAD` flag on the PUT\r\n>     request. However rclone will add a `Content-Md5` header if at all\r\n>     possible so the body data is still protected.\r\n>     \r\n>     Note that the old behaviour can still be configured if required with\r\n>     the `use_presigned_request` config parameter.\r\n> \r\n\r\nPlease find the code here:\r\n\r\n[v1.59.0-beta.6116.781bff280.fix-5422-s3-putobject](https://beta.rclone.org/branch/fix-5422-s3-putobject/v1.59.0-beta.6116.781bff280.fix-5422-s3-putobject/) on branch [fix-5422-s3-putobject](https://github.com/rclone/rclone/tree/fix-5422-s3-putobject) (uploaded in 15-30 mins)\r\n\r\nThis passes all bar 1 tests of the full integration suite - the one that fails is something to do with retries needing to seek so I need to turn retries off somehow for PutObject.\r\n\r\nPS I looked at the v2 SDK for go and they make this a whole heap easier to do, but changing to that is a job for another day!\r\n\r\nPPS this is probably my 4th attempt to do this over the last 6 years - IMHO the aws SDK is quite over-engineered and makes doing anything against the grain very hard...","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1116330745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6542353272,"node_id":"MEE_lADOAQ-n5M43SH9uzwAAAAGF9GN4","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542353272","actor":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-03T16:57:19Z","performed_via_github_app":null},{"id":6542353277,"node_id":"SE_lADOAQ-n5M43SH9uzwAAAAGF9GN9","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542353277","actor":{"login":"vlovich","id":201287,"node_id":"MDQ6VXNlcjIwMTI4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/201287?v=4","gravatar_id":"","url":"https://api.github.com/users/vlovich","html_url":"https://github.com/vlovich","followers_url":"https://api.github.com/users/vlovich/followers","following_url":"https://api.github.com/users/vlovich/following{/other_user}","gists_url":"https://api.github.com/users/vlovich/gists{/gist_id}","starred_url":"https://api.github.com/users/vlovich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlovich/subscriptions","organizations_url":"https://api.github.com/users/vlovich/orgs","repos_url":"https://api.github.com/users/vlovich/repos","events_url":"https://api.github.com/users/vlovich/events{/privacy}","received_events_url":"https://api.github.com/users/vlovich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-03T16:57:19Z","performed_via_github_app":null},{"id":6542353287,"node_id":"MEE_lADOAQ-n5M43SH9uzwAAAAGF9GOH","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542353287","actor":{"login":"ctgschollar","id":1866355,"node_id":"MDQ6VXNlcjE4NjYzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1866355?v=4","gravatar_id":"","url":"https://api.github.com/users/ctgschollar","html_url":"https://github.com/ctgschollar","followers_url":"https://api.github.com/users/ctgschollar/followers","following_url":"https://api.github.com/users/ctgschollar/following{/other_user}","gists_url":"https://api.github.com/users/ctgschollar/gists{/gist_id}","starred_url":"https://api.github.com/users/ctgschollar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctgschollar/subscriptions","organizations_url":"https://api.github.com/users/ctgschollar/orgs","repos_url":"https://api.github.com/users/ctgschollar/repos","events_url":"https://api.github.com/users/ctgschollar/events{/privacy}","received_events_url":"https://api.github.com/users/ctgschollar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-03T16:57:19Z","performed_via_github_app":null},{"id":6542353292,"node_id":"SE_lADOAQ-n5M43SH9uzwAAAAGF9GOM","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542353292","actor":{"login":"ctgschollar","id":1866355,"node_id":"MDQ6VXNlcjE4NjYzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1866355?v=4","gravatar_id":"","url":"https://api.github.com/users/ctgschollar","html_url":"https://github.com/ctgschollar","followers_url":"https://api.github.com/users/ctgschollar/followers","following_url":"https://api.github.com/users/ctgschollar/following{/other_user}","gists_url":"https://api.github.com/users/ctgschollar/gists{/gist_id}","starred_url":"https://api.github.com/users/ctgschollar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctgschollar/subscriptions","organizations_url":"https://api.github.com/users/ctgschollar/orgs","repos_url":"https://api.github.com/users/ctgschollar/repos","events_url":"https://api.github.com/users/ctgschollar/events{/privacy}","received_events_url":"https://api.github.com/users/ctgschollar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-03T16:57:19Z","performed_via_github_app":null},{"id":6542353297,"node_id":"MEE_lADOAQ-n5M43SH9uzwAAAAGF9GOR","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542353297","actor":{"login":"Erisa","id":14004943,"node_id":"MDQ6VXNlcjE0MDA0OTQz","avatar_url":"https://avatars.githubusercontent.com/u/14004943?v=4","gravatar_id":"","url":"https://api.github.com/users/Erisa","html_url":"https://github.com/Erisa","followers_url":"https://api.github.com/users/Erisa/followers","following_url":"https://api.github.com/users/Erisa/following{/other_user}","gists_url":"https://api.github.com/users/Erisa/gists{/gist_id}","starred_url":"https://api.github.com/users/Erisa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erisa/subscriptions","organizations_url":"https://api.github.com/users/Erisa/orgs","repos_url":"https://api.github.com/users/Erisa/repos","events_url":"https://api.github.com/users/Erisa/events{/privacy}","received_events_url":"https://api.github.com/users/Erisa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-03T16:57:19Z","performed_via_github_app":null},{"id":6542353306,"node_id":"SE_lADOAQ-n5M43SH9uzwAAAAGF9GOa","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542353306","actor":{"login":"Erisa","id":14004943,"node_id":"MDQ6VXNlcjE0MDA0OTQz","avatar_url":"https://avatars.githubusercontent.com/u/14004943?v=4","gravatar_id":"","url":"https://api.github.com/users/Erisa","html_url":"https://github.com/Erisa","followers_url":"https://api.github.com/users/Erisa/followers","following_url":"https://api.github.com/users/Erisa/following{/other_user}","gists_url":"https://api.github.com/users/Erisa/gists{/gist_id}","starred_url":"https://api.github.com/users/Erisa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erisa/subscriptions","organizations_url":"https://api.github.com/users/Erisa/orgs","repos_url":"https://api.github.com/users/Erisa/repos","events_url":"https://api.github.com/users/Erisa/events{/privacy}","received_events_url":"https://api.github.com/users/Erisa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-03T16:57:19Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1116337600","html_url":"https://github.com/rclone/rclone/issues/5422#issuecomment-1116337600","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5422","id":1116337600,"node_id":"IC_kwDOAQ-n5M5CifXA","user":{"login":"Erisa","id":14004943,"node_id":"MDQ6VXNlcjE0MDA0OTQz","avatar_url":"https://avatars.githubusercontent.com/u/14004943?v=4","gravatar_id":"","url":"https://api.github.com/users/Erisa","html_url":"https://github.com/Erisa","followers_url":"https://api.github.com/users/Erisa/followers","following_url":"https://api.github.com/users/Erisa/following{/other_user}","gists_url":"https://api.github.com/users/Erisa/gists{/gist_id}","starred_url":"https://api.github.com/users/Erisa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erisa/subscriptions","organizations_url":"https://api.github.com/users/Erisa/orgs","repos_url":"https://api.github.com/users/Erisa/repos","events_url":"https://api.github.com/users/Erisa/events{/privacy}","received_events_url":"https://api.github.com/users/Erisa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T17:04:49Z","updated_at":"2022-05-03T17:04:49Z","body":"Hi @ncw,\r\n\r\nI can confirm these changes work to make rclone work with uploading (Single part) files to the Cloudflare R2 closed beta, which does not support presigned requests yet and thus did not work previously.\r\n\r\nI also did a quick check and it does not break compatibility with my rclone config against Scaleway Object Storage either. I cannot test with actual Amazon S3 at this time.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1116337600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Erisa","id":14004943,"node_id":"MDQ6VXNlcjE0MDA0OTQz","avatar_url":"https://avatars.githubusercontent.com/u/14004943?v=4","gravatar_id":"","url":"https://api.github.com/users/Erisa","html_url":"https://github.com/Erisa","followers_url":"https://api.github.com/users/Erisa/followers","following_url":"https://api.github.com/users/Erisa/following{/other_user}","gists_url":"https://api.github.com/users/Erisa/gists{/gist_id}","starred_url":"https://api.github.com/users/Erisa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erisa/subscriptions","organizations_url":"https://api.github.com/users/Erisa/orgs","repos_url":"https://api.github.com/users/Erisa/repos","events_url":"https://api.github.com/users/Erisa/events{/privacy}","received_events_url":"https://api.github.com/users/Erisa/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6542406705,"node_id":"MEE_lADOAQ-n5M43SH9uzwAAAAGF9TQx","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542406705","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-03T17:04:50Z","performed_via_github_app":null},{"id":6542406714,"node_id":"SE_lADOAQ-n5M43SH9uzwAAAAGF9TQ6","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542406714","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-03T17:04:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1116341413","html_url":"https://github.com/rclone/rclone/issues/5422#issuecomment-1116341413","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5422","id":1116341413,"node_id":"IC_kwDOAQ-n5M5CigSl","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T17:09:15Z","updated_at":"2022-05-03T17:09:15Z","body":"Thanks @Erisa - great tests.\r\n\r\nCan you confirm if current rclone v1.58 with `--s3-upload-cutoff 0` works with the R2 beta also?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1116341413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6542433987,"node_id":"MEE_lADOAQ-n5M43SH9uzwAAAAGF9Z7D","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542433987","actor":{"login":"Erisa","id":14004943,"node_id":"MDQ6VXNlcjE0MDA0OTQz","avatar_url":"https://avatars.githubusercontent.com/u/14004943?v=4","gravatar_id":"","url":"https://api.github.com/users/Erisa","html_url":"https://github.com/Erisa","followers_url":"https://api.github.com/users/Erisa/followers","following_url":"https://api.github.com/users/Erisa/following{/other_user}","gists_url":"https://api.github.com/users/Erisa/gists{/gist_id}","starred_url":"https://api.github.com/users/Erisa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erisa/subscriptions","organizations_url":"https://api.github.com/users/Erisa/orgs","repos_url":"https://api.github.com/users/Erisa/repos","events_url":"https://api.github.com/users/Erisa/events{/privacy}","received_events_url":"https://api.github.com/users/Erisa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-03T17:09:15Z","performed_via_github_app":null},{"id":6542433992,"node_id":"SE_lADOAQ-n5M43SH9uzwAAAAGF9Z7I","url":"https://api.github.com/repos/rclone/rclone/issues/events/6542433992","actor":{"login":"Erisa","id":14004943,"node_id":"MDQ6VXNlcjE0MDA0OTQz","avatar_url":"https://avatars.githubusercontent.com/u/14004943?v=4","gravatar_id":"","url":"https://api.github.com/users/Erisa","html_url":"https://github.com/Erisa","followers_url":"https://api.github.com/users/Erisa/followers","following_url":"https://api.github.com/users/Erisa/following{/other_user}","gists_url":"https://api.github.com/users/Erisa/gists{/gist_id}","starred_url":"https://api.github.com/users/Erisa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erisa/subscriptions","organizations_url":"https://api.github.com/users/Erisa/orgs","repos_url":"https://api.github.com/users/Erisa/repos","events_url":"https://api.github.com/users/Erisa/events{/privacy}","received_events_url":"https://api.github.com/users/Erisa/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-03T17:09:15Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1116343694","html_url":"https://github.com/rclone/rclone/issues/5422#issuecomment-1116343694","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5422","id":1116343694,"node_id":"IC_kwDOAQ-n5M5Cig2O","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T17:11:44Z","updated_at":"2022-05-03T17:11:44Z","body":"PS If someone at cloudflare would like to hit me up with a beta account I can run the integration tests and figure out what is broken with rclone/r2 ( nick@craig-wood.com ) - the integration test suite is quite good at wrinkling out bugs!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1116343694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}}]