{"url":"https://api.github.com/repos/rclone/rclone/issues/2193","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/2193/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/2193/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/2193/events","html_url":"https://github.com/rclone/rclone/issues/2193","id":310275358,"node_id":"MDU6SXNzdWUzMTAyNzUzNTg=","number":2193,"title":"--backup-dir with GCS requires storage.buckets.get ACL","user":{"login":"prattmic","id":1293187,"node_id":"MDQ6VXNlcjEyOTMxODc=","avatar_url":"https://avatars.githubusercontent.com/u/1293187?v=4","gravatar_id":"","url":"https://api.github.com/users/prattmic","html_url":"https://github.com/prattmic","followers_url":"https://api.github.com/users/prattmic/followers","following_url":"https://api.github.com/users/prattmic/following{/other_user}","gists_url":"https://api.github.com/users/prattmic/gists{/gist_id}","starred_url":"https://api.github.com/users/prattmic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prattmic/subscriptions","organizations_url":"https://api.github.com/users/prattmic/orgs","repos_url":"https://api.github.com/users/prattmic/repos","events_url":"https://api.github.com/users/prattmic/events{/privacy}","received_events_url":"https://api.github.com/users/prattmic/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399007,"node_id":"MDU6TGFiZWw4NjM5OTAwNw==","url":"https://api.github.com/repos/rclone/rclone/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null},{"id":306063008,"node_id":"MDU6TGFiZWwzMDYwNjMwMDg=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Google%20Cloud%20Storage","name":"Remote: Google Cloud Storage","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/28","html_url":"https://github.com/rclone/rclone/milestone/28","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/28/labels","id":3028709,"node_id":"MDk6TWlsZXN0b25lMzAyODcwOQ==","number":28,"title":"v1.41","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":33,"state":"closed","created_at":"2018-01-11T14:25:44Z","updated_at":"2018-05-10T10:57:57Z","due_on":"2018-04-29T07:00:00Z","closed_at":"2018-04-28T12:06:39Z"},"comments":8,"created_at":"2018-03-31T22:00:57Z","updated_at":"2018-04-06T11:46:17Z","closed_at":"2018-04-06T11:46:03Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What is the problem you are having with rclone?\r\n\r\nAFAICT, this is #1590, but applied specifically to --backup-dir.\r\n\r\n`rclone sync <anything> <gcs remote>/folder` works just fine with a service account that only has the \"Storage Object Admin\" role.\r\n\r\nHowever, `rclone sync <anything> <gcs remote>/folder --backup-dir <gcs remote>/other-folder` fails when it needs to actually create a backup file with an error like:\r\n\r\n```\r\n2018/03/31 14:41:48 ERROR : SOURCE_FILE: Failed to copy: failed to get bucket: googleapi: Error 403: SERVICE_ACCOUNT@PROJECT.iam.gserviceaccount.com does not have storage.buckets.get access to BUCKET., forbidden\r\n2018/03/31 14:41:48 ERROR : SOURCE_FILE: Not deleting source as copy failed: failed to get bucket: googleapi: Error 403: SERVICE_ACCOUNT@PROJECT.iam.gserviceaccount.com does not have storage.buckets.get access to BUCKET., forbidden\r\n2018/03/31 14:41:48 ERROR : SOURCE_FILE: Couldn't move into backup dir: failed to get bucket: googleapi: Error 403: SERVICE_ACCOUNT@PROJECT.iam.gserviceaccount.com does not have storage.buckets.get access to BUCKET., forbidden\r\n```\r\n\r\nIt works if I add the service account to the \"Storage Legacy Bucket Reader\" role, which includes \"storage.buckets.get\", but it is not clear why that should be required since normal sync works just fine without it. sync even created the initial folder the first time.\r\n\r\n#### What is your rclone version (eg output from `rclone -V`)\r\n\r\n```\r\n$ rclone -V\r\nrclone v1.40\r\n- os/arch: linux/amd64\r\n- go version: go1.10\r\n```\r\n\r\n#### Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\n\r\nDebian testing, x86_64, Linux 4.14\r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\n\r\nGoogle Cloud Storage\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\n\r\nSee above.\r\n\r\n#### A log from the command with the `-vv` flag (eg output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\nI only used one `-v` above. Let me know if you'd like me to reproduce with `-vv`, but I think the issue is clear.","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/2193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/2193/timeline","performed_via_github_app":null,"state_reason":"completed"}