{"url":"https://api.github.com/repos/rclone/rclone/issues/5952","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/5952/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/5952/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/5952/events","html_url":"https://github.com/rclone/rclone/issues/5952","id":1114988069,"node_id":"I_kwDOAQ-n5M5CdV4l","number":5952,"title":"Rclone ‚Äútouch‚Äù command fails since 1.57.0","user":{"login":"keyhelp","id":11715543,"node_id":"MDQ6VXNlcjExNzE1NTQz","avatar_url":"https://avatars.githubusercontent.com/u/11715543?v=4","gravatar_id":"","url":"https://api.github.com/users/keyhelp","html_url":"https://github.com/keyhelp","followers_url":"https://api.github.com/users/keyhelp/followers","following_url":"https://api.github.com/users/keyhelp/following{/other_user}","gists_url":"https://api.github.com/users/keyhelp/gists{/gist_id}","starred_url":"https://api.github.com/users/keyhelp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keyhelp/subscriptions","organizations_url":"https://api.github.com/users/keyhelp/orgs","repos_url":"https://api.github.com/users/keyhelp/repos","events_url":"https://api.github.com/users/keyhelp/events{/privacy}","received_events_url":"https://api.github.com/users/keyhelp/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":306062879,"node_id":"MDU6TGFiZWwzMDYwNjI4Nzk=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Dropbox","name":"Remote: Dropbox","color":"fbca04","default":false,"description":null},{"id":608259284,"node_id":"MDU6TGFiZWw2MDgyNTkyODQ=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20FTP","name":"Remote: FTP","color":"fbca04","default":false,"description":""},{"id":608259405,"node_id":"MDU6TGFiZWw2MDgyNTk0MDU=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20SFTP","name":"Remote: SFTP","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":7,"created_at":"2022-01-26T12:55:05Z","updated_at":"2022-02-01T11:12:04Z","closed_at":"2022-01-28T19:37:30Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### The associated forum post URL from `https://forum.rclone.org`\r\nhttps://forum.rclone.org/t/rclone-touch-command-fails-since-1-57-0/28890\r\n\r\n\r\n#### What is the problem you are having with rclone?\r\nSomething changed with rclone 1.57.0 so that the rclone \"touch\" command is not usable for me anymore.\r\nIt all worked fine, and still does when I run rclone with 1.56.2, but it fails with newer versions.\r\nI see that the --recursive option has been added to the \"touch\" command with 1.57.0, so maybe it is related to this addition?\r\n\r\nBackground: I use the \"touch\" command to test if the remote server is set up correctly. So I \"touch\" a new file that does not exist on the remote server and delete the file after success.\r\n\r\nThe errors I get with type FTP:\r\n```\r\n2022/01/26 12:47:06 ERROR : Attempt 1/1 failed with 1 errors and: failed to touch (create): update stor: 550 /files/ftp: Not a regular file\r\n2022/01/26 12:47:06 Failed to touch: failed to touch (create): update stor: 550 /files/ftp: Not a regular file\r\n```\r\n\r\nThe errors I get with type SFTP:\r\n```\r\n2022/01/26 13:01:26 ERROR : Attempt 1/1 failed with 1 errors and: failed to touch (create): Update Create failed: sftp: \"Failure\" (SSH_FX_FAILURE)\r\n2022/01/26 13:01:26 Failed to touch: failed to touch (create): Update Create failed: sftp: \"Failure\" (SSH_FX_FAILURE)\r\n```\r\n\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n\r\n```\r\nrclone v1.57.0\r\n- os/version: ubuntu 20.04 (64 bit)\r\n- os/kernel: 5.4.0-94-generic (x86_64)\r\n- os/type: linux\r\n- os/arch: amd64\r\n- go/version: go1.17.2\r\n- go/linking: static\r\n- go/tags: none\r\n```\r\n\r\nI have also tested the latest Beta, but without success:\r\n\r\n```\r\nrclone v1.58.0-beta.5960.a667e03fc\r\n- os/version: ubuntu 20.04 (64 bit)\r\n- os/kernel: 5.4.0-94-generic (x86_64)\r\n- os/type: linux\r\n- os/arch: amd64\r\n- go/version: go1.17.6\r\n- go/linking: static\r\n- go/tags: none\r\n```\r\n\r\n\r\n#### Which OS you are using and how many bits (e.g. Windows 7, 64 bit)\r\nUbuntu 20.04 - 64 bit\r\n\r\n\r\n#### Which cloud storage system are you using? (e.g. Google Drive)\r\nI have tested FTP, SFTP, Dropbox -> All report the same: \"failed to touch\"\r\n\r\n\r\n#### The command you were trying to run (e.g. `rclone copy /tmp remote:tmp`)\r\nWith FTP:\r\n```\r\nrclone --config '/tmp/rclone-ftp.config' --retries 1 touch 'rclone-storage:/files/ftp'\r\n```\r\n-> Result: Nothing happens on the remote side. An rclone error message is shown (see above).\r\n\r\nWith SFTP:\r\n```\r\nrclone --config '/tmp/rclone-sftp.config' --retries 1 touch 'rclone-storage:/files/sftp'\r\n```\r\n-> Result: On the remote side, a new directory \"sftp\" is created in \"/files/\" (??? Why a directory ???). An rclone error message is shown (see above).\r\n\r\n\r\n#### The rclone config contents with secrets removed.\r\n\r\n```\r\n[rclone-storage]\r\ntype = ftp\r\nhost = dev23.keymachine.de\r\nuser = test\r\npass = <secret-pass>\r\nexplicit_tls = true\r\n```\r\n\r\n```\r\n[rclone-storage]\r\ntype = sftp\r\nhost = dev23.keymachine.de\r\nuser = test\r\npass = <secret-pass>\r\nmd5sum_command = none\r\nsha1sum_command = none\r\n```\r\n\r\n\r\n#### A log from the command with the `-vv` flag\r\n\r\nWith FTP:\r\n```\r\n2022/01/26 12:47:28 DEBUG : rclone: Version \"v1.57.0\" starting with parameters [\"rclone\" \"--config\" \"/tmp/rclone-ftp.config\" \"-vv\" \"--retries\" \"1\" \"touch\" \"rclone-storage:/files/ftp\"]\r\n2022/01/26 12:47:28 DEBUG : Creating backend with remote \"rclone-storage:/files/ftp\"\r\n2022/01/26 12:47:28 DEBUG : Using config file from \"/tmp/rclone-ftp.config\"\r\n2022/01/26 12:47:28 DEBUG : ftp://dev23.keymachine.de:21/files/ftp: Connecting to FTP server\r\n2022/01/26 12:47:28 DEBUG : Touch time 2022-01-26 12:47:28.42150678 +0100 CET m=+0.361783329\r\n2022/01/26 12:47:28 DEBUG : ftp://dev23.keymachine.de:21/files/ftp: Touching (creating)\r\n2022/01/26 12:47:29 DEBUG : ftp://dev23.keymachine.de:21/files/ftp: Connecting to FTP server\r\n2022/01/26 12:47:29 DEBUG : : Removed after failed upload: 550 /files/ftp: Not a regular file\r\n2022/01/26 12:47:29 ERROR : Attempt 1/1 failed with 1 errors and: failed to touch (create): update stor: 550 /files/ftp: Not a regular file\r\n2022/01/26 12:47:29 DEBUG : 2 go routines active\r\n2022/01/26 12:47:29 Failed to touch: failed to touch (create): update stor: 550 /files/ftp: Not a regular file\r\n```\r\n\r\nWith SFTP:\r\n```\r\n2022/01/26 13:04:07 DEBUG : rclone: Version \"v1.57.0\" starting with parameters [\"rclone\" \"--config\" \"/tmp/rclone-sftp.config\" \"-vv\" \"--retries\" \"1\" \"touch\" \"rclone-storage:/files/sftp\"]\r\n2022/01/26 13:04:07 DEBUG : Creating backend with remote \"rclone-storage:/files/sftp\"\r\n2022/01/26 13:04:07 DEBUG : Using config file from \"/tmp/rclone-sftp.config\"\r\n2022/01/26 13:04:07 DEBUG : sftp://test@dev23.keymachine.de:22//files/sftp: New connection 62.141.56.104:51682->62.141.56.45:22 to \"SSH-2.0-OpenSSH_8.4p1 Debian-5\"\r\n2022/01/26 13:04:07 DEBUG : Touch time 2022-01-26 13:04:07.852656441 +0100 CET m=+0.612075729\r\n2022/01/26 13:04:07 DEBUG : sftp://test@dev23.keymachine.de:22//files/sftp: Touching (creating)\r\n2022/01/26 13:04:07 ERROR : Attempt 1/1 failed with 1 errors and: failed to touch (create): Update Create failed: sftp: \"Failure\" (SSH_FX_FAILURE)\r\n2022/01/26 13:04:07 DEBUG : 11 go routines active\r\n2022/01/26 13:04:07 Failed to touch: failed to touch (create): Update Create failed: sftp: \"Failure\" (SSH_FX_FAILURE)\r\n```\r\n\r\n\r\n#### How to use GitHub\r\n\r\n* Please use the üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to show that you are affected by the same issue.\r\n* Please don't comment if you have no relevant information to add. It's just extra noise for everyone subscribed to this issue.\r\n* Subscribe to receive notifications on status change and new comments.\r\n\r\n\r\nThank you very much for your help!\r\nAlex","closed_by":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/5952/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/5952/timeline","performed_via_github_app":null,"state_reason":"completed"}