{"url":"https://api.github.com/repos/rclone/rclone/issues/3851","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/3851/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/3851/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/3851/events","html_url":"https://github.com/rclone/rclone/issues/3851","id":545271014,"node_id":"MDU6SXNzdWU1NDUyNzEwMTQ=","number":3851,"title":"drive: --fast-list/ListR doesn't work with root_folder_id = appDataFolder","user":{"login":"1xe","id":26555253,"node_id":"MDQ6VXNlcjI2NTU1MjUz","avatar_url":"https://avatars.githubusercontent.com/u/26555253?v=4","gravatar_id":"","url":"https://api.github.com/users/1xe","html_url":"https://github.com/1xe","followers_url":"https://api.github.com/users/1xe/followers","following_url":"https://api.github.com/users/1xe/following{/other_user}","gists_url":"https://api.github.com/users/1xe/gists{/gist_id}","starred_url":"https://api.github.com/users/1xe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1xe/subscriptions","organizations_url":"https://api.github.com/users/1xe/orgs","repos_url":"https://api.github.com/users/1xe/repos","events_url":"https://api.github.com/users/1xe/events{/privacy}","received_events_url":"https://api.github.com/users/1xe/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":306062764,"node_id":"MDU6TGFiZWwzMDYwNjI3NjQ=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Drive","name":"Remote: Drive","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/38","html_url":"https://github.com/rclone/rclone/milestone/38","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/38/labels","id":4606532,"node_id":"MDk6TWlsZXN0b25lNDYwNjUzMg==","number":38,"title":"v1.51","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":45,"state":"closed","created_at":"2019-08-27T09:35:50Z","updated_at":"2020-02-01T14:10:46Z","due_on":"2020-02-01T08:00:00Z","closed_at":"2020-02-01T14:09:58Z"},"comments":8,"created_at":"2020-01-04T10:52:32Z","updated_at":"2020-03-06T16:19:36Z","closed_at":"2020-01-05T19:57:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What is the problem you are having with rclone?\r\n`--fast-list/ListR` doesn't work with `root_folder_id = appDataFolder`.\r\n\r\nSee https://forum.rclone.org/t/rclone-rc-vfs-refresh-recursive-true-seems-to-clear-the-directory-cache/13657 for more information.\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n    rclone v1.50.2\r\n    - os/arch: linux/amd64\r\n    - go version: go1.13.4\r\n\r\n#### Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\nDevuan GNU/Linux 3 (beowulf) (Linux version 4.19.67, x86_64)\r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\nGoogle Drive\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\n    /usr/bin/rclone mount rclone-crypt: /mnt/remote --buffer-size=256M --cache-dir=/mnt/local/.cache/rclone --config=/etc/rclone/rclone.conf --fast-list --links --rc --rc-no-auth --timeout=1h --allow-other --attr-timeout=8760h --default-permissions --dir-cache-time=8760h --poll-interval=0 --umask=002 --vfs-cache-mode=writes -vv\r\n\r\n    /usr/bin/rclone rc vfs/refresh recursive=true --config=/etc/rclone/rclone.conf -vv\r\n\r\n    ls -l /mnt/remote\r\n\r\n    /usr/bin/rclone rc vfs/refresh recursive=false --config=/etc/rclone/rclone.conf -vv\r\n\r\n    ls -l /mnt/remote\r\n\r\n#### A log from the command with the `-vv` flag (eg output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\nLog for `rclone mount` (formatted for readability)\r\n\r\n    # /usr/bin/rclone mount rclone-crypt: /mnt/remote --buffer-size=256M --cache-dir=/mnt/local/.cache/rclone --config=/etc/rclone/rclone.conf --fast-list --links --rc --rc-no-auth --timeout=1h --allow-other --attr-timeout=8760h --default-permissions --dir-cache-time=8760h --poll-interval=0 --umask=002 --vfs-cache-mode=writes -vv\r\n    2020/01/03 16:33:19 DEBUG : rclone: Version \"v1.50.2\" starting with parameters [\"/usr/bin/rclone\" \"mount\" \"rclone-crypt:\" \"/mnt/remote\" \"--buffer-size=256M\" \"--cache-dir=/mnt/local/.cache/rclone\" \"--config=/etc/rclone/rclone.conf\" \"--fast-list\" \"--links\" \"--rc\" \"--rc-no-auth\" \"--timeout=1h\" \"--allow-other\" \"--attr-timeout=8760h\" \"--default-permissions\" \"--dir-cache-time=8760h\" \"--poll-interval=0\" \"--umask=002\" \"--vfs-cache-mode=writes\" \"-vv\"]\r\n    2020/01/03 16:33:19 NOTICE: Serving remote control on http://127.0.0.1:5572/\r\n    2020/01/03 16:33:19 DEBUG : Using config file from \"/etc/rclone/rclone.conf\"\r\n    2020/01/03 16:33:19 DEBUG : Encrypted drive 'rclone-crypt:': Mounting on \"/mnt/remote\"\r\n    2020/01/03 16:33:20 DEBUG : vfs cache root is \"/mnt/local/.cache/rclone/vfs/rclone-crypt\"\r\n    2020/01/03 16:33:20 DEBUG : Adding path \"vfs/forget\" to remote control registry\r\n    2020/01/03 16:33:20 DEBUG : Adding path \"vfs/refresh\" to remote control registry\r\n    2020/01/03 16:33:20 DEBUG : Adding path \"vfs/poll-interval\" to remote control registry\r\n    2020/01/03 16:33:20 DEBUG : : Root: \r\n    2020/01/03 16:33:20 DEBUG : : >Root: node=/, err=<nil>\r\n\r\n    2020/01/03 16:35:00 DEBUG : rc: \"vfs/refresh\": with parameters map[recursive:true]\r\n    2020/01/03 16:35:00 DEBUG : : Reading directory tree\r\n    2020/01/03 16:35:01 DEBUG : : Reading directory tree done in 309.447146ms\r\n    2020/01/03 16:35:01 DEBUG : rc: \"vfs/refresh\": reply map[result:map[:OK]]: <nil>\r\n\r\n    2020/01/03 16:35:51 DEBUG : /: Attr: \r\n    2020/01/03 16:35:51 DEBUG : /: >Attr: attr=valid=8760h0m0s ino=0 size=0 mode=drwxrwxr-x, err=<nil>\r\n    2020/01/03 16:35:51 DEBUG : /: ReadDirAll: \r\n    2020/01/03 16:35:51 DEBUG : /: >ReadDirAll: item=0, err=<nil>\r\n\r\n    2020/01/03 16:36:21 DEBUG : rc: \"vfs/refresh\": with parameters map[recursive:false]\r\n    2020/01/03 16:36:21 DEBUG : rc: \"vfs/refresh\": reply map[result:map[:OK]]: <nil>\r\n\r\n    2020/01/03 16:36:52 DEBUG : /: Attr: \r\n    2020/01/03 16:36:52 DEBUG : /: >Attr: attr=valid=8760h0m0s ino=0 size=0 mode=drwxrwxr-x, err=<nil>\r\n    2020/01/03 16:36:52 DEBUG : /: ReadDirAll: \r\n    2020/01/03 16:36:52 DEBUG : /: >ReadDirAll: item=4, err=<nil>\r\n    2020/01/03 16:36:52 DEBUG : /: Attr: \r\n    2020/01/03 16:36:52 DEBUG : /: >Attr: attr=valid=8760h0m0s ino=0 size=0 mode=drwxrwxr-x, err=<nil>\r\n    2020/01/03 16:36:52 DEBUG : /: Lookup: name=\"dir1\"\r\n    2020/01/03 16:36:52 DEBUG : /: >Lookup: node=dir1/, err=<nil>\r\n    2020/01/03 16:36:52 DEBUG : dir1/: Attr: \r\n    2020/01/03 16:36:52 DEBUG : dir1/: >Attr: attr=valid=8760h0m0s ino=0 size=0 mode=drwxrwxr-x, err=<nil>\r\n    2020/01/03 16:36:52 DEBUG : /: Lookup: name=\"dir2\"\r\n    2020/01/03 16:36:52 DEBUG : /: >Lookup: node=dir2/, err=<nil>\r\n    2020/01/03 16:36:52 DEBUG : dir2/: Attr: \r\n    2020/01/03 16:36:52 DEBUG : dir2/: >Attr: attr=valid=8760h0m0s ino=0 size=0 mode=drwxrwxr-x, err=<nil>\r\n    2020/01/03 16:36:52 DEBUG : /: Lookup: name=\"file1\"\r\n    2020/01/03 16:36:52 DEBUG : /: >Lookup: node=file1, err=<nil>\r\n    2020/01/03 16:36:52 DEBUG : file1: Attr: \r\n    2020/01/03 16:36:52 DEBUG : file1: >Attr: a=valid=8760h0m0s ino=0 size=0 mode=-rw-rw-r--, err=<nil>\r\n    2020/01/03 16:36:52 DEBUG : /: Lookup: name=\"dir3\"\r\n    2020/01/03 16:36:52 DEBUG : /: >Lookup: node=dir3/, err=<nil>\r\n    2020/01/03 16:36:52 DEBUG : dir3/: Attr: \r\n    2020/01/03 16:36:52 DEBUG : dir3/: >Attr: attr=valid=8760h0m0s ino=0 size=0 mode=drwxrwxr-x, err=<nil>\r\n\r\n    ^C2020/01/03 16:37:50 DEBUG : cache cleaner exiting\r\n    2020/01/03 16:37:50 DEBUG : rclone: Version \"v1.50.2\" finishing with parameters [\"/usr/bin/rclone\" \"mount\" \"rclone-crypt:\" \"/mnt/remote\" \"--buffer-size=256M\" \"--cache-dir=/mnt/local/.cache/rclone\" \"--config=/etc/rclone/rclone.conf\" \"--fast-list\" \"--links\" \"--rc\" \"--rc-no-auth\" \"--timeout=1h\" \"--allow-other\" \"--attr-timeout=8760h\" \"--default-permissions\" \"--dir-cache-time=8760h\" \"--poll-interval=0\" \"--umask=002\" \"--vfs-cache-mode=writes\" \"-vv\"]\r\n    # \r\n\r\nLog for `rclone rc` + `ls` (formatted for readability)\r\n\r\n    # /usr/bin/rclone rc vfs/refresh recursive=true --config=/etc/rclone/rclone.conf -vv\r\n    2020/01/03 16:35:00 DEBUG : rclone: Version \"v1.50.2\" starting with parameters [\"/usr/bin/rclone\" \"rc\" \"vfs/refresh\" \"recursive=true\" \"--config=/etc/rclone/rclone.conf\" \"-vv\"]\r\n    {\r\n        \"result\": {\r\n            \"\": \"OK\"\r\n        }\r\n    }\r\n    2020/01/03 16:35:01 DEBUG : 5 go routines active\r\n    2020/01/03 16:35:01 DEBUG : rclone: Version \"v1.50.2\" finishing with parameters [\"/usr/bin/rclone\" \"rc\" \"vfs/refresh\" \"recursive=true\" \"--config=/etc/rclone/rclone.conf\" \"-vv\"]\r\n\r\n    # ls -l /mnt/remote\r\n    total 0\r\n\r\n    # /usr/bin/rclone rc vfs/refresh recursive=false --config=/etc/rclone/rclone.conf -vv\r\n    2020/01/03 16:36:21 DEBUG : rclone: Version \"v1.50.2\" starting with parameters [\"/usr/bin/rclone\" \"rc\" \"vfs/refresh\" \"recursive=false\" \"--config=/etc/rclone/rclone.conf\" \"-vv\"]\r\n    {\r\n        \"result\": {\r\n            \"\": \"OK\"\r\n        }\r\n    }\r\n    2020/01/03 16:36:21 DEBUG : 5 go routines active\r\n    2020/01/03 16:36:21 DEBUG : rclone: Version \"v1.50.2\" finishing with parameters [\"/usr/bin/rclone\" \"rc\" \"vfs/refresh\" \"recursive=false\" \"--config=/etc/rclone/rclone.conf\" \"-vv\"]\r\n\r\n    # ls -l /mnt/remote\r\n    total 0\r\n    drwxrwxr-x 1 root root 0 Dec 30 14:15 dir1\r\n    drwxrwxr-x 1 root root 0 Dec 30 14:15 dir2\r\n    -rw-rw-r-- 1 root root 0 Jan  2 23:03 file1\r\n    drwxrwxr-x 1 root root 0 Dec 30 14:15 dir3\r\n    # \r\n\r\nConfig\r\n\r\n    [rclone-drive]\r\n    type = drive\r\n    scope = drive,drive.appfolder\r\n    service_account_file = <service_account_file>\r\n    root_folder_id = appDataFolder\r\n    impersonate = <email>\r\n\r\n    [rclone-crypt]\r\n    type = crypt\r\n    remote = rclone-drive:\r\n    filename_encryption = standard\r\n    password = <password>\r\n    password2 = <password2>","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/3851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/3851/timeline","performed_via_github_app":null,"state_reason":"completed"}