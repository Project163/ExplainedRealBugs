[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/916482463","html_url":"https://github.com/rclone/rclone/issues/5583#issuecomment-916482463","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5583","id":916482463,"node_id":"IC_kwDOAQ-n5M42oGmf","user":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T22:24:52Z","updated_at":"2021-09-09T22:24:52Z","body":"I would also consider making `rclone cleanup` find and prune uncommitted AzureBlob blocks.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/916482463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5292254154,"node_id":"LE_lADOAQ-n5M47ACESzwAAAAE7cWPK","url":"https://api.github.com/repos/rclone/rclone/issues/events/5292254154","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-09-13T11:25:11Z","label":{"name":"Remote: Azure Blob","color":"fbca04"},"performed_via_github_app":null},{"id":5292254902,"node_id":"LE_lADOAQ-n5M47ACESzwAAAAE7cWa2","url":"https://api.github.com/repos/rclone/rclone/issues/events/5292254902","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-09-13T11:25:20Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":5292255212,"node_id":"MIE_lADOAQ-n5M47ACESzwAAAAE7cWfs","url":"https://api.github.com/repos/rclone/rclone/issues/events/5292255212","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2021-09-13T11:25:24Z","milestone":{"title":"Help Wanted"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/918101708","html_url":"https://github.com/rclone/rclone/issues/5583#issuecomment-918101708","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5583","id":918101708,"node_id":"IC_kwDOAQ-n5M42uR7M","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T11:31:01Z","updated_at":"2021-09-13T11:31:01Z","body":"This seems like a reasonable idea...\r\n\r\nDo you want to send a patch @sschols ?\r\n\r\nThere doesn't seem to be an option in the SDK to cleanup ( https://pkg.go.dev/github.com/Azure/azure-storage-blob-go/azblob#UploadStreamToBlockBlobOptions )?\r\n\r\nI note in s3 we have this\r\n\r\n      --s3-leave-parts-on-error              If true avoid calling abort upload on a failure, leaving all successfully uploaded parts on S3 for manual recovery.\r\n\r\nSo this should probably be conditional on a flag in the same way\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/918101708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5292283881,"node_id":"MEE_lADOAQ-n5M47ACESzwAAAAE7cdfp","url":"https://api.github.com/repos/rclone/rclone/issues/events/5292283881","actor":{"login":"sschols","id":60104242,"node_id":"MDQ6VXNlcjYwMTA0MjQy","avatar_url":"https://avatars.githubusercontent.com/u/60104242?v=4","gravatar_id":"","url":"https://api.github.com/users/sschols","html_url":"https://github.com/sschols","followers_url":"https://api.github.com/users/sschols/followers","following_url":"https://api.github.com/users/sschols/following{/other_user}","gists_url":"https://api.github.com/users/sschols/gists{/gist_id}","starred_url":"https://api.github.com/users/sschols/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschols/subscriptions","organizations_url":"https://api.github.com/users/sschols/orgs","repos_url":"https://api.github.com/users/sschols/repos","events_url":"https://api.github.com/users/sschols/events{/privacy}","received_events_url":"https://api.github.com/users/sschols/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-09-13T11:31:02Z","performed_via_github_app":null},{"id":5292283888,"node_id":"SE_lADOAQ-n5M47ACESzwAAAAE7cdfw","url":"https://api.github.com/repos/rclone/rclone/issues/events/5292283888","actor":{"login":"sschols","id":60104242,"node_id":"MDQ6VXNlcjYwMTA0MjQy","avatar_url":"https://avatars.githubusercontent.com/u/60104242?v=4","gravatar_id":"","url":"https://api.github.com/users/sschols","html_url":"https://github.com/sschols","followers_url":"https://api.github.com/users/sschols/followers","following_url":"https://api.github.com/users/sschols/following{/other_user}","gists_url":"https://api.github.com/users/sschols/gists{/gist_id}","starred_url":"https://api.github.com/users/sschols/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschols/subscriptions","organizations_url":"https://api.github.com/users/sschols/orgs","repos_url":"https://api.github.com/users/sschols/repos","events_url":"https://api.github.com/users/sschols/events{/privacy}","received_events_url":"https://api.github.com/users/sschols/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-09-13T11:31:02Z","performed_via_github_app":null},{"id":5323686184,"node_id":"AE_lADOAQ-n5M47ACESzwAAAAE9UQEo","url":"https://api.github.com/repos/rclone/rclone/issues/events/5323686184","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2021-09-18T18:45:43Z","assignee":{"login":"sschols","id":60104242,"node_id":"MDQ6VXNlcjYwMTA0MjQy","avatar_url":"https://avatars.githubusercontent.com/u/60104242?v=4","gravatar_id":"","url":"https://api.github.com/users/sschols","html_url":"https://github.com/sschols","followers_url":"https://api.github.com/users/sschols/followers","following_url":"https://api.github.com/users/sschols/following{/other_user}","gists_url":"https://api.github.com/users/sschols/gists{/gist_id}","starred_url":"https://api.github.com/users/sschols/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschols/subscriptions","organizations_url":"https://api.github.com/users/sschols/orgs","repos_url":"https://api.github.com/users/sschols/repos","events_url":"https://api.github.com/users/sschols/events{/privacy}","received_events_url":"https://api.github.com/users/sschols/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":5323686350,"node_id":"LE_lADOAQ-n5M47ACESzwAAAAE9UQHO","url":"https://api.github.com/repos/rclone/rclone/issues/events/5323686350","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-09-18T18:45:54Z","label":{"name":"help wanted","color":"c2e0c6"},"performed_via_github_app":null},{"id":5326257294,"node_id":"UNE_lADOAQ-n5M47ACESzwAAAAE9eDyO","url":"https://api.github.com/repos/rclone/rclone/issues/events/5326257294","actor":{"login":"sschols","id":60104242,"node_id":"MDQ6VXNlcjYwMTA0MjQy","avatar_url":"https://avatars.githubusercontent.com/u/60104242?v=4","gravatar_id":"","url":"https://api.github.com/users/sschols","html_url":"https://github.com/sschols","followers_url":"https://api.github.com/users/sschols/followers","following_url":"https://api.github.com/users/sschols/following{/other_user}","gists_url":"https://api.github.com/users/sschols/gists{/gist_id}","starred_url":"https://api.github.com/users/sschols/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschols/subscriptions","organizations_url":"https://api.github.com/users/sschols/orgs","repos_url":"https://api.github.com/users/sschols/repos","events_url":"https://api.github.com/users/sschols/events{/privacy}","received_events_url":"https://api.github.com/users/sschols/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2021-09-20T06:50:13Z","assignee":{"login":"sschols","id":60104242,"node_id":"MDQ6VXNlcjYwMTA0MjQy","avatar_url":"https://avatars.githubusercontent.com/u/60104242?v=4","gravatar_id":"","url":"https://api.github.com/users/sschols","html_url":"https://github.com/sschols","followers_url":"https://api.github.com/users/sschols/followers","following_url":"https://api.github.com/users/sschols/following{/other_user}","gists_url":"https://api.github.com/users/sschols/gists{/gist_id}","starred_url":"https://api.github.com/users/sschols/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschols/subscriptions","organizations_url":"https://api.github.com/users/sschols/orgs","repos_url":"https://api.github.com/users/sschols/repos","events_url":"https://api.github.com/users/sschols/events{/privacy}","received_events_url":"https://api.github.com/users/sschols/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/922674772","html_url":"https://github.com/rclone/rclone/issues/5583#issuecomment-922674772","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5583","id":922674772,"node_id":"IC_kwDOAQ-n5M42_uZU","user":{"login":"sschols","id":60104242,"node_id":"MDQ6VXNlcjYwMTA0MjQy","avatar_url":"https://avatars.githubusercontent.com/u/60104242?v=4","gravatar_id":"","url":"https://api.github.com/users/sschols","html_url":"https://github.com/sschols","followers_url":"https://api.github.com/users/sschols/followers","following_url":"https://api.github.com/users/sschols/following{/other_user}","gists_url":"https://api.github.com/users/sschols/gists{/gist_id}","starred_url":"https://api.github.com/users/sschols/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschols/subscriptions","organizations_url":"https://api.github.com/users/sschols/orgs","repos_url":"https://api.github.com/users/sschols/repos","events_url":"https://api.github.com/users/sschols/events{/privacy}","received_events_url":"https://api.github.com/users/sschols/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-20T06:53:56Z","updated_at":"2021-09-20T06:53:56Z","body":"The way I understand it there is no way to trigger a generic cleanup specifically via the SDK, so something like `rclone cleanup` might be a little more difficult.\r\n\r\nI've never written Go, so I'm probably not the right person to tackle the implementation of this, but I'd be all in on testing it once it's there.\r\n\r\nMaking it conditional is probably a good idea.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/922674772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sschols","id":60104242,"node_id":"MDQ6VXNlcjYwMTA0MjQy","avatar_url":"https://avatars.githubusercontent.com/u/60104242?v=4","gravatar_id":"","url":"https://api.github.com/users/sschols","html_url":"https://github.com/sschols","followers_url":"https://api.github.com/users/sschols/followers","following_url":"https://api.github.com/users/sschols/following{/other_user}","gists_url":"https://api.github.com/users/sschols/gists{/gist_id}","starred_url":"https://api.github.com/users/sschols/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschols/subscriptions","organizations_url":"https://api.github.com/users/sschols/orgs","repos_url":"https://api.github.com/users/sschols/repos","events_url":"https://api.github.com/users/sschols/events{/privacy}","received_events_url":"https://api.github.com/users/sschols/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1339591811","html_url":"https://github.com/rclone/rclone/issues/5583#issuecomment-1339591811","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5583","id":1339591811,"node_id":"IC_kwDOAQ-n5M5P2IyD","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T15:56:17Z","updated_at":"2022-12-06T15:56:17Z","body":"I've just redone the azure blob backend to use the new SDK and I came across this issue.\r\n\r\nI think the best solution will be to do different things if there is already an existing blob.\r\n\r\n1. If there is no existing blob then it is safe to upload a zero sized blob and delete it to free the uncomitted blocks. I think rclone should do this unconditionally.\r\n2. If there is an existing blob rclone is updating, then uplaoding a zero sized blob and deleting it will cause data loss - the existing blob will be removed without a new replacement. I don't think rclone should do this normally, but it could perhaps do it with a flag.\r\n\r\n@sschols what do you think of that scheme?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1339591811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7968079472,"node_id":"MEE_lADOAQ-n5M47ACESzwAAAAHa7z5w","url":"https://api.github.com/repos/rclone/rclone/issues/events/7968079472","actor":{"login":"sschols","id":60104242,"node_id":"MDQ6VXNlcjYwMTA0MjQy","avatar_url":"https://avatars.githubusercontent.com/u/60104242?v=4","gravatar_id":"","url":"https://api.github.com/users/sschols","html_url":"https://github.com/sschols","followers_url":"https://api.github.com/users/sschols/followers","following_url":"https://api.github.com/users/sschols/following{/other_user}","gists_url":"https://api.github.com/users/sschols/gists{/gist_id}","starred_url":"https://api.github.com/users/sschols/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschols/subscriptions","organizations_url":"https://api.github.com/users/sschols/orgs","repos_url":"https://api.github.com/users/sschols/repos","events_url":"https://api.github.com/users/sschols/events{/privacy}","received_events_url":"https://api.github.com/users/sschols/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-06T15:56:18Z","performed_via_github_app":null},{"id":7968079482,"node_id":"SE_lADOAQ-n5M47ACESzwAAAAHa7z56","url":"https://api.github.com/repos/rclone/rclone/issues/events/7968079482","actor":{"login":"sschols","id":60104242,"node_id":"MDQ6VXNlcjYwMTA0MjQy","avatar_url":"https://avatars.githubusercontent.com/u/60104242?v=4","gravatar_id":"","url":"https://api.github.com/users/sschols","html_url":"https://github.com/sschols","followers_url":"https://api.github.com/users/sschols/followers","following_url":"https://api.github.com/users/sschols/following{/other_user}","gists_url":"https://api.github.com/users/sschols/gists{/gist_id}","starred_url":"https://api.github.com/users/sschols/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschols/subscriptions","organizations_url":"https://api.github.com/users/sschols/orgs","repos_url":"https://api.github.com/users/sschols/repos","events_url":"https://api.github.com/users/sschols/events{/privacy}","received_events_url":"https://api.github.com/users/sschols/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-06T15:56:18Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2004317346","html_url":"https://github.com/rclone/rclone/issues/5583#issuecomment-2004317346","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5583","id":2004317346,"node_id":"IC_kwDOAQ-n5M53d3Si","user":{"login":"rsavard-tt","id":94134127,"node_id":"U_kgDOBZxfbw","avatar_url":"https://avatars.githubusercontent.com/u/94134127?v=4","gravatar_id":"","url":"https://api.github.com/users/rsavard-tt","html_url":"https://github.com/rsavard-tt","followers_url":"https://api.github.com/users/rsavard-tt/followers","following_url":"https://api.github.com/users/rsavard-tt/following{/other_user}","gists_url":"https://api.github.com/users/rsavard-tt/gists{/gist_id}","starred_url":"https://api.github.com/users/rsavard-tt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsavard-tt/subscriptions","organizations_url":"https://api.github.com/users/rsavard-tt/orgs","repos_url":"https://api.github.com/users/rsavard-tt/repos","events_url":"https://api.github.com/users/rsavard-tt/events{/privacy}","received_events_url":"https://api.github.com/users/rsavard-tt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T15:59:46Z","updated_at":"2024-03-18T15:59:46Z","body":"Any progress on this issue?  Seems to still be an issue with rclone 1.66.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2004317346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rsavard-tt","id":94134127,"node_id":"U_kgDOBZxfbw","avatar_url":"https://avatars.githubusercontent.com/u/94134127?v=4","gravatar_id":"","url":"https://api.github.com/users/rsavard-tt","html_url":"https://github.com/rsavard-tt","followers_url":"https://api.github.com/users/rsavard-tt/followers","following_url":"https://api.github.com/users/rsavard-tt/following{/other_user}","gists_url":"https://api.github.com/users/rsavard-tt/gists{/gist_id}","starred_url":"https://api.github.com/users/rsavard-tt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsavard-tt/subscriptions","organizations_url":"https://api.github.com/users/rsavard-tt/orgs","repos_url":"https://api.github.com/users/rsavard-tt/repos","events_url":"https://api.github.com/users/rsavard-tt/events{/privacy}","received_events_url":"https://api.github.com/users/rsavard-tt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2015572349","html_url":"https://github.com/rclone/rclone/issues/5583#issuecomment-2015572349","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5583","id":2015572349,"node_id":"IC_kwDOAQ-n5M54IzF9","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-22T17:32:01Z","updated_at":"2024-03-22T17:32:01Z","body":"@rsavard-tt there hasn't been progress on this recently alas. If you are working on behalf of a company you might be interested in taking out a [support contract](https://rclone.com/support) which could push this issue up the priority list and keeps the rclone project sustainable. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2015572349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12218850378,"node_id":"MEE_lADOAQ-n5M47ACESzwAAAALYTNxK","url":"https://api.github.com/repos/rclone/rclone/issues/events/12218850378","actor":{"login":"rsavard-tt","id":94134127,"node_id":"U_kgDOBZxfbw","avatar_url":"https://avatars.githubusercontent.com/u/94134127?v=4","gravatar_id":"","url":"https://api.github.com/users/rsavard-tt","html_url":"https://github.com/rsavard-tt","followers_url":"https://api.github.com/users/rsavard-tt/followers","following_url":"https://api.github.com/users/rsavard-tt/following{/other_user}","gists_url":"https://api.github.com/users/rsavard-tt/gists{/gist_id}","starred_url":"https://api.github.com/users/rsavard-tt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsavard-tt/subscriptions","organizations_url":"https://api.github.com/users/rsavard-tt/orgs","repos_url":"https://api.github.com/users/rsavard-tt/repos","events_url":"https://api.github.com/users/rsavard-tt/events{/privacy}","received_events_url":"https://api.github.com/users/rsavard-tt/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-22T17:32:02Z","performed_via_github_app":null},{"id":12218850394,"node_id":"SE_lADOAQ-n5M47ACESzwAAAALYTNxa","url":"https://api.github.com/repos/rclone/rclone/issues/events/12218850394","actor":{"login":"rsavard-tt","id":94134127,"node_id":"U_kgDOBZxfbw","avatar_url":"https://avatars.githubusercontent.com/u/94134127?v=4","gravatar_id":"","url":"https://api.github.com/users/rsavard-tt","html_url":"https://github.com/rsavard-tt","followers_url":"https://api.github.com/users/rsavard-tt/followers","following_url":"https://api.github.com/users/rsavard-tt/following{/other_user}","gists_url":"https://api.github.com/users/rsavard-tt/gists{/gist_id}","starred_url":"https://api.github.com/users/rsavard-tt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsavard-tt/subscriptions","organizations_url":"https://api.github.com/users/rsavard-tt/orgs","repos_url":"https://api.github.com/users/rsavard-tt/repos","events_url":"https://api.github.com/users/rsavard-tt/events{/privacy}","received_events_url":"https://api.github.com/users/rsavard-tt/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-22T17:32:02Z","performed_via_github_app":null},{"actor":{"login":"Erudition","id":3915447,"node_id":"MDQ6VXNlcjM5MTU0NDc=","avatar_url":"https://avatars.githubusercontent.com/u/3915447?v=4","gravatar_id":"","url":"https://api.github.com/users/Erudition","html_url":"https://github.com/Erudition","followers_url":"https://api.github.com/users/Erudition/followers","following_url":"https://api.github.com/users/Erudition/following{/other_user}","gists_url":"https://api.github.com/users/Erudition/gists{/gist_id}","starred_url":"https://api.github.com/users/Erudition/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erudition/subscriptions","organizations_url":"https://api.github.com/users/Erudition/orgs","repos_url":"https://api.github.com/users/Erudition/repos","events_url":"https://api.github.com/users/Erudition/events{/privacy}","received_events_url":"https://api.github.com/users/Erudition/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-25T00:08:34Z","updated_at":"2024-09-25T00:08:34Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/8099","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/8099/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/8099/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/8099/events","html_url":"https://github.com/rclone/rclone/issues/8099","id":2546563436,"node_id":"I_kwDOAQ-n5M6XyXls","number":8099,"title":"Azure BlobOperationNotSupportedForBlobCreatedBySftp","user":{"login":"Erudition","id":3915447,"node_id":"MDQ6VXNlcjM5MTU0NDc=","avatar_url":"https://avatars.githubusercontent.com/u/3915447?v=4","gravatar_id":"","url":"https://api.github.com/users/Erudition","html_url":"https://github.com/Erudition","followers_url":"https://api.github.com/users/Erudition/followers","following_url":"https://api.github.com/users/Erudition/following{/other_user}","gists_url":"https://api.github.com/users/Erudition/gists{/gist_id}","starred_url":"https://api.github.com/users/Erudition/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erudition/subscriptions","organizations_url":"https://api.github.com/users/Erudition/orgs","repos_url":"https://api.github.com/users/Erudition/repos","events_url":"https://api.github.com/users/Erudition/events{/privacy}","received_events_url":"https://api.github.com/users/Erudition/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1043114791,"node_id":"MDU6TGFiZWwxMDQzMTE0Nzkx","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Azure%20Blob","name":"Remote: Azure Blob","color":"fbca04","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-09-24T23:02:06Z","updated_at":"2025-01-15T14:49:26Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'm copying a bunch of videos to Azure, but running into an error on certain files that Rclone currently doesn't handle.\r\n\r\n#### Background:\r\n\r\nAt one point I switched connections and it slowed to a halt without error, turns out this was because my new connection's IP was not white listed. Fixed, but when I went to sync again the files were staying on 0% indefinitely. Or so I thought, so I eventually cancelled the command thinking I must have messed up my rclone somehow.\r\n\r\nThen I switched to Azure SFTP and uploaded more files manually without rclone.\r\n\r\nI've since learned that the original issue was due to the checksum calculation, which I didn't realize since the \"Checking:\" area had nothing in it, only the \"Transfer:\" area listed 4 files at 0 percent while the time lapsed was increasing. Confusing, but I confirmed this later by trying again with `--size-only`, and the transfer started immediately.\r\n\r\n#### Problem\r\n\r\n\r\n#### InvalidBlobOrBlock\r\nGreat, so I switched back to rclone, but some files were failing with InvalidBlobOrBlock. According to the forum post\r\nhttps://forum.rclone.org/t/error-while-syncing-with-azure-blob-storage-x-ms-error-code-invalidbloborblock/15561/30\r\n\r\nThose partially uploaded blocks can't be resumed and are stuck that way till GC, so I need to overwrite them with `--no-check-dest` for now.\r\n\r\nThe [Microsoft help page](https://learn.microsoft.com/en-us/troubleshoot/azure/azure-storage/blobs/connectivity/invalid-blob-or-block-content-or-invalid-block-list) on this issue offers alternative solutions that could be implemented by rclone.\r\n\r\n#### BlobOperationNotSupportedForBlobCreatedBySftp\r\n\r\nThat worked but I found additional errors, and it looks like rclone is retrying them even though this error is permanent:\r\n\r\n```\r\n2024-09-24 17:22:11 ERROR : VID_20240907_173743_00_112.insv: Not deleting source as copy failed: multipart upload failed to upload part: -> github.com/rclone/rclone/vendor/github.com/Azure/azure-storage-blob-go/azblob.newStorageError, github.com/rclone/rclone/vendor/github.com/Azure/azure-storage-blob-go/azblob/zc_storage_error.go:42\r\n===== RESPONSE ERROR (ServiceCode=BlobOperationNotSupportedForBlobCreatedBySftp) =====\r\nDescription=This operation is not supported for blobs created by the SFTP service.\r\nRequestId:9b92d17c-701e-002a-65d0-0e6b9c000000\r\nTime:2024-09-24T22:22:10.1666675Z, Details: \r\n   Code: BlobOperationNotSupportedForBlobCreatedBySftp\r\n   PUT https://paradoxis.blob.core.windows.net/mycontainer/Videos/VID_20240907_173743_00_112.insv?blockid=AQAAAAAAAAA%3D&comp=block&timeout=31536001\r\n   Authorization: REDACTED\r\n   Content-Length: [4194304]\r\n   Content-Md5: [fk5lK0YoetCcYTyPGjv82w==]\r\n   User-Agent: [rclone/v1.52.3]\r\n   X-Ms-Client-Request-Id: [1a949bfe-da4f-42cc-5af1-563cd21116a1]\r\n   X-Ms-Date: [Tue, 24 Sep 2024 22:22:10 GMT]\r\n   X-Ms-Version: [2018-11-09]\r\n   --------------------------------------------------------------------------------\r\n   RESPONSE Status: 409 This operation is not supported for blobs created by the SFTP service.\r\n   Content-Length: [284]\r\n   Content-Type: [application/xml]\r\n   Date: [Tue, 24 Sep 2024 22:22:10 GMT]\r\n   Server: [Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0]\r\n   X-Ms-Error-Code: [BlobOperationNotSupportedForBlobCreatedBySftp]\r\n   X-Ms-Request-Id: [9b92d17c-701e-002a-65d0-0e6b9c000000]\r\n   X-Ms-Version: [2018-11-09]\r\n```\r\n\r\nTurns out that the pseudo-SFTP service they have does not support some features, and this permanently applies to files uploaded that way. There's an experimental feature to enable resuming on the SFTP, which I turned on. So it must be the checksum fetch.\r\n\r\nYep, [turns out](https://learn.microsoft.com/en-us/azure/storage/blobs/secure-file-transfer-protocol-known-issues) that the MD5 calculation is not done for files uploaded with SFTP, and the MD5 attribute will be empty:\r\n\r\n> By default, the Content-MD5 property of blobs that are uploaded by using SFTP are set to null. Therefore, if you want the Content-MD5 property of those blobs to contain an MD5 hash, your client must calculate that value, and then set the Content-MD5 property of the blob before the uploading the blob.\r\n\r\nThe docs for `--azureblob-disable-checksum` say it only prevents storing the MD5 on new uploads to Azure, that's not what I want, I want it to skip the serverside check if the checksum is missing, but use it if not.\r\n\r\nSo it seems now I need to disable all hash checking with `--ignore-checksum` to continue my upload, since it will keep failing for those few and keep retrying, taking up upload bandwidth. Or build a custom list of files without checksum and sync them separately.\r\n\r\nBut then I can't take advantage of the MD5 on the other blobs that have it for uploads that are not already in the cloud..\r\n\r\nEdit: turns out `--ignore-checksum` isn't enough, and even `--no-check-dest` doesn't prevent the error. My guess is that the very inclusion of the has header in the upload (`Content-Md5: [Gk6hXiBOZJSpOQCOAKMYnA==]`) tells Azure to check the file itself. So we can't even _send_ the checksum for these files. Using `--azureblob-disable-checksum` did the trick! Upload proceeded. However, I got a bunch of InvalidBlobOrBlock errors again, and unlike @ncw 's guess, `--no-check-dest` didn't fix it. Manually `rclone delete` the server's copy of the files that I was about to upload helped, but I'm still running into #5583 .\r\n\r\nSo my idea for this bug is for rclone to be aware that not all azure blobs were uploaded with an MD5 attribute, and when encountering the BlobOperationNotSupportedForBlobCreatedBySftp error, consider continuing just like `--azureblob-disable-checksum` does, but only for those files.\r\n","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/8099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/8099/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2372614207","html_url":"https://github.com/rclone/rclone/issues/5583#issuecomment-2372614207","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5583","id":2372614207,"node_id":"IC_kwDOAQ-n5M6Nazg_","user":{"login":"Erudition","id":3915447,"node_id":"MDQ6VXNlcjM5MTU0NDc=","avatar_url":"https://avatars.githubusercontent.com/u/3915447?v=4","gravatar_id":"","url":"https://api.github.com/users/Erudition","html_url":"https://github.com/Erudition","followers_url":"https://api.github.com/users/Erudition/followers","following_url":"https://api.github.com/users/Erudition/following{/other_user}","gists_url":"https://api.github.com/users/Erudition/gists{/gist_id}","starred_url":"https://api.github.com/users/Erudition/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erudition/subscriptions","organizations_url":"https://api.github.com/users/Erudition/orgs","repos_url":"https://api.github.com/users/Erudition/repos","events_url":"https://api.github.com/users/Erudition/events{/privacy}","received_events_url":"https://api.github.com/users/Erudition/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-25T00:17:05Z","updated_at":"2024-09-25T19:29:12Z","body":"This issue also breaks the \"it should always be safe to stop an rclone move operation at any time\" guarantee. The local data is safe, but if I cancel an upload, it won't finish the blocks in progress and thus cause this issue for trying to upload again later.\r\n\r\nCan we have rclone finish the blocks in progress when receiving a stop signal?\r\n\r\nEDIT: Oh I see it's been requested since 2017, issue #1522 \r\n\r\nAlso, \r\n\r\n\r\n\r\n> There doesn't seem to be an option in the SDK to cleanup ( )?\r\n\r\n[Microsoft says](https://learn.microsoft.com/en-us/troubleshoot/azure/azure-storage/blobs/connectivity/invalid-blob-or-block-content-or-invalid-block-list#solution-3-commit-the-uncommitted-block-list-by-using-the-azure-storage-sdk) you can do it like this:\r\n\r\n> 1. Retrieve the uncommitted block list by making a [Get Block List](https://learn.microsoft.com/en-us/rest/api/storageservices/get-block-list) URI request in which the blocklisttype URI parameter is set to uncommitted.\r\n> 2. Commit the block list by using the [Put Block List](https://learn.microsoft.com/en-us/rest/api/storageservices/put-block-list) URI request.\r\n> 3. Delete the blob.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2372614207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Erudition","id":3915447,"node_id":"MDQ6VXNlcjM5MTU0NDc=","avatar_url":"https://avatars.githubusercontent.com/u/3915447?v=4","gravatar_id":"","url":"https://api.github.com/users/Erudition","html_url":"https://github.com/Erudition","followers_url":"https://api.github.com/users/Erudition/followers","following_url":"https://api.github.com/users/Erudition/following{/other_user}","gists_url":"https://api.github.com/users/Erudition/gists{/gist_id}","starred_url":"https://api.github.com/users/Erudition/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erudition/subscriptions","organizations_url":"https://api.github.com/users/Erudition/orgs","repos_url":"https://api.github.com/users/Erudition/repos","events_url":"https://api.github.com/users/Erudition/events{/privacy}","received_events_url":"https://api.github.com/users/Erudition/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2375151435","html_url":"https://github.com/rclone/rclone/issues/5583#issuecomment-2375151435","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5583","id":2375151435,"node_id":"IC_kwDOAQ-n5M6Nke9L","user":{"login":"Erudition","id":3915447,"node_id":"MDQ6VXNlcjM5MTU0NDc=","avatar_url":"https://avatars.githubusercontent.com/u/3915447?v=4","gravatar_id":"","url":"https://api.github.com/users/Erudition","html_url":"https://github.com/Erudition","followers_url":"https://api.github.com/users/Erudition/followers","following_url":"https://api.github.com/users/Erudition/following{/other_user}","gists_url":"https://api.github.com/users/Erudition/gists{/gist_id}","starred_url":"https://api.github.com/users/Erudition/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erudition/subscriptions","organizations_url":"https://api.github.com/users/Erudition/orgs","repos_url":"https://api.github.com/users/Erudition/repos","events_url":"https://api.github.com/users/Erudition/events{/privacy}","received_events_url":"https://api.github.com/users/Erudition/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-25T20:06:31Z","updated_at":"2024-09-25T20:06:31Z","body":"# RENAMING THE FILE WORKS\r\nhttps://github.com/MicrosoftDocs/azure-docs/issues/36347#issuecomment-517486622\r\n\r\nNot sure how I didn't think of this, but none of the talk on rclone Github/Forum mentioned it... I thought I was stuck having to wait 7 days, after struggling with this issue for hours and giving up a few times.\r\n\r\nBut then I saw the azclone repo ncw linked on another page and someone had mentioned that there was a workaround, renaming! I guess I thought blocks were content-addressed or something, but no, blobs with a new name are considered different enough to bypass the issue!\r\n\r\n- `filename.blob` -> `filename.blob.attempt2`\r\n- upload again\r\n- `filename.blob.attempt2` -> `filename.blob`","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2375151435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Erudition","id":3915447,"node_id":"MDQ6VXNlcjM5MTU0NDc=","avatar_url":"https://avatars.githubusercontent.com/u/3915447?v=4","gravatar_id":"","url":"https://api.github.com/users/Erudition","html_url":"https://github.com/Erudition","followers_url":"https://api.github.com/users/Erudition/followers","following_url":"https://api.github.com/users/Erudition/following{/other_user}","gists_url":"https://api.github.com/users/Erudition/gists{/gist_id}","starred_url":"https://api.github.com/users/Erudition/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erudition/subscriptions","organizations_url":"https://api.github.com/users/Erudition/orgs","repos_url":"https://api.github.com/users/Erudition/repos","events_url":"https://api.github.com/users/Erudition/events{/privacy}","received_events_url":"https://api.github.com/users/Erudition/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15740072039,"node_id":"REFE_lADOAQ-n5M47ACESzwAAAAOqLnBn","url":"https://api.github.com/repos/rclone/rclone/issues/events/15740072039","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f4d5bee5c8d09da99ada61d9d1c2e7585f44bfe0","commit_url":"https://api.github.com/repos/rclone/rclone/commits/f4d5bee5c8d09da99ada61d9d1c2e7585f44bfe0","created_at":"2024-12-21T18:30:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2558197872","html_url":"https://github.com/rclone/rclone/issues/5583#issuecomment-2558197872","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5583","id":2558197872,"node_id":"IC_kwDOAQ-n5M6YewBw","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-21T18:32:54Z","updated_at":"2024-12-21T18:32:54Z","body":"I have fixed that here\r\n\r\n[v1.69.0-beta.8471.f67ac4d38.fix-8249-azure-blob-server-side-copy](https://beta.rclone.org/branch/fix-8249-azure-blob-server-side-copy/v1.69.0-beta.8471.f67ac4d38.fix-8249-azure-blob-server-side-copy/) on branch [fix-8249-azure-blob-server-side-copy](https://github.com/rclone/rclone/tree/fix-8249-azure-blob-server-side-copy) (uploaded in 15-30 mins)\r\n\r\nThis goes to some lengths to make sure that on multipart upload, uncomitted blocks are cancelled on quit or error.\r\n\r\nAny testing much appreciated.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2558197872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15825335899,"node_id":"REFE_lADOAQ-n5M47ACESzwAAAAOvQ3Zb","url":"https://api.github.com/repos/rclone/rclone/issues/events/15825335899","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e6f9000efd1fdd443e9abb0f06bda47a269fec82","commit_url":"https://api.github.com/repos/rclone/rclone/commits/e6f9000efd1fdd443e9abb0f06bda47a269fec82","created_at":"2025-01-06T12:04:56Z","performed_via_github_app":null},{"id":15828245522,"node_id":"REFE_lADOAQ-n5M47ACESzwAAAAOvb9wS","url":"https://api.github.com/repos/rclone/rclone/issues/events/15828245522","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8d3957eded960cdb563acd872ddbd623d10f2e78","commit_url":"https://api.github.com/repos/rclone/rclone/commits/8d3957eded960cdb563acd872ddbd623d10f2e78","created_at":"2025-01-06T16:26:08Z","performed_via_github_app":null},{"id":15857993224,"node_id":"REFE_lADOAQ-n5M47ACESzwAAAAOxNcYI","url":"https://api.github.com/repos/rclone/rclone/issues/events/15857993224","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9414d86d7b0aaf2d2459897e0a8a6462f6021d36","commit_url":"https://api.github.com/repos/rclone/rclone/commits/9414d86d7b0aaf2d2459897e0a8a6462f6021d36","created_at":"2025-01-08T18:19:54Z","performed_via_github_app":null},{"id":15892806561,"node_id":"REFE_lADOAQ-n5M47ACESzwAAAAOzSPuh","url":"https://api.github.com/repos/rclone/rclone/issues/events/15892806561","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7d7fafdafe4edfe467d886d3292c753c4d2ef2a4","commit_url":"https://api.github.com/repos/rclone/rclone/commits/7d7fafdafe4edfe467d886d3292c753c4d2ef2a4","created_at":"2025-01-11T14:56:32Z","performed_via_github_app":null},{"id":16019386570,"node_id":"REFE_lADOAQ-n5M47ACESzwAAAAO61HDK","url":"https://api.github.com/repos/rclone/rclone/issues/events/16019386570","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"592a3c31bfbc34cd613c4876e11bf3aef6584105","commit_url":"https://api.github.com/repos/rclone/rclone/commits/592a3c31bfbc34cd613c4876e11bf3aef6584105","created_at":"2025-01-21T19:42:42Z","performed_via_github_app":null},{"id":16027916314,"node_id":"CE_lADOAQ-n5M47ACESzwAAAAO7Vpga","url":"https://api.github.com/repos/rclone/rclone/issues/events/16027916314","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"4e9b63e1412967e6e5b44c1a93cdfe3b6e483eea","commit_url":"https://api.github.com/repos/rclone/rclone/commits/4e9b63e1412967e6e5b44c1a93cdfe3b6e483eea","created_at":"2025-01-22T11:56:14Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2607062239","html_url":"https://github.com/rclone/rclone/issues/5583#issuecomment-2607062239","issue_url":"https://api.github.com/repos/rclone/rclone/issues/5583","id":2607062239,"node_id":"IC_kwDOAQ-n5M6bZJzf","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-22T12:02:06Z","updated_at":"2025-01-22T12:02:06Z","body":"I've merged a fix for this to master now which means it will be in [the latest beta](https://beta.rclone.org/) in 15-30 minutes and released in v1.70 ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/2607062239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}}]