{"url":"https://api.github.com/repos/rclone/rclone/issues/3564","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/3564/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/3564/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/3564/events","html_url":"https://github.com/rclone/rclone/issues/3564","id":496916746,"node_id":"MDU6SXNzdWU0OTY5MTY3NDY=","number":3564,"title":"rClone Copy Issue with SharePoint Online","user":{"login":"PowershellNinja","id":12686296,"node_id":"MDQ6VXNlcjEyNjg2Mjk2","avatar_url":"https://avatars.githubusercontent.com/u/12686296?v=4","gravatar_id":"","url":"https://api.github.com/users/PowershellNinja","html_url":"https://github.com/PowershellNinja","followers_url":"https://api.github.com/users/PowershellNinja/followers","following_url":"https://api.github.com/users/PowershellNinja/following{/other_user}","gists_url":"https://api.github.com/users/PowershellNinja/gists{/gist_id}","starred_url":"https://api.github.com/users/PowershellNinja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PowershellNinja/subscriptions","organizations_url":"https://api.github.com/users/PowershellNinja/orgs","repos_url":"https://api.github.com/users/PowershellNinja/repos","events_url":"https://api.github.com/users/PowershellNinja/events{/privacy}","received_events_url":"https://api.github.com/users/PowershellNinja/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-09-23T06:31:31Z","updated_at":"2019-10-05T16:06:45Z","closed_at":"2019-10-05T16:06:45Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What is the problem you are having with rclone?\r\nRClone Copy does not work correctly. \r\n\r\nWhen calling rClone like this, it removes half of the files:\r\n```Powershell\r\n.\\rclone.exe copy \"C:\\Temp\\TestRClone\\\" RCloneTest:\"Shared Documents\" --transfers=50 -vv\r\n2019/09/23 08:23:35 DEBUG : rclone: Version \"v1.49.0-089-g49d6d642-beta\" starting with parameters [\"C:\\\\temp\\\\rClone\\\\rclone.exe\" \"copy\" \"C:\\\\Temp\\\\TestRClone\\\\\" \"RCloneTest:Shared Documents\" \"--transfers=50\" \"-vv\"]\r\n2019/09/23 08:23:35 DEBUG : Using config file from \"C:\\\\Users\\\\Raphael.RBOOK\\\\.config\\\\rclone\\\\rclone.conf\"\r\n2019/09/23 08:23:37 INFO  : webdav root 'Shared Documents': Waiting for checks to finish\r\n2019/09/23 08:23:37 INFO  : webdav root 'Shared Documents': Waiting for transfers to finish\r\n2019/09/23 08:23:38 INFO  : Doc1 - Copy.dot: Copied (new)\r\n2019/09/23 08:23:39 INFO  : Doc1.dot: Copied (new)\r\n2019/09/23 08:23:39 INFO  : Doc1 - Copy (2).dot: Copied (new)\r\n2019/09/23 08:23:39 ERROR : Presentation1.ppt: corrupted on transfer: sizes differ 93184 vs 94720\r\n2019/09/23 08:23:39 INFO  : Presentation1.ppt: Removing failed copy\r\n2019/09/23 08:23:39 ERROR : SecondLevelFolder/Presentation1.pot: corrupted on transfer: sizes differ 93184 vs 94720\r\n2019/09/23 08:23:39 INFO  : SecondLevelFolder/Presentation1.pot: Removing failed copy\r\n2019/09/23 08:23:39 INFO  : SecondLevelFolder/ThirdLevelFolder1/New Text Document.txt: Copied (new)\r\n2019/09/23 08:23:39 ERROR : SecondLevelFolder/ThirdLevelFolder2/TestFile3.docx: corrupted on transfer: sizes differ 14350 vs 20341\r\n2019/09/23 08:23:39 INFO  : SecondLevelFolder/ThirdLevelFolder2/TestFile3.docx: Removing failed copy\r\n2019/09/23 08:23:39 ERROR : SecondLevelFolder/ThirdLevelFolder1/Doc1.doc: corrupted on transfer: sizes differ 45056 vs 46592\r\n2019/09/23 08:23:39 INFO  : SecondLevelFolder/ThirdLevelFolder1/Doc1.doc: Removing failed copy\r\n2019/09/23 08:23:39 ERROR : Attempt 1/3 failed with 9 errors and: corrupted on transfer: sizes differ 45056 vs 46592\r\n2019/09/23 08:23:39 DEBUG : Doc1 - Copy (2).dot: Sizes identical\r\n2019/09/23 08:23:39 DEBUG : Doc1 - Copy (2).dot: Unchanged skipping\r\n2019/09/23 08:23:39 DEBUG : Doc1 - Copy.dot: Sizes identical\r\n2019/09/23 08:23:39 DEBUG : Doc1 - Copy.dot: Unchanged skipping\r\n2019/09/23 08:23:39 DEBUG : Doc1.dot: Sizes identical\r\n2019/09/23 08:23:39 DEBUG : Doc1.dot: Unchanged skipping\r\n2019/09/23 08:23:40 DEBUG : SecondLevelFolder/ThirdLevelFolder1/New Text Document.txt: Sizes identical\r\n2019/09/23 08:23:40 DEBUG : SecondLevelFolder/ThirdLevelFolder1/New Text Document.txt: Unchanged skipping\r\n2019/09/23 08:23:40 INFO  : webdav root 'Shared Documents': Waiting for checks to finish\r\n2019/09/23 08:23:40 INFO  : webdav root 'Shared Documents': Waiting for transfers to finish\r\n2019/09/23 08:23:40 ERROR : Presentation1.ppt: corrupted on transfer: sizes differ 93184 vs 94720\r\n2019/09/23 08:23:40 INFO  : Presentation1.ppt: Removing failed copy\r\n2019/09/23 08:23:40 ERROR : SecondLevelFolder/Presentation1.pot: corrupted on transfer: sizes differ 93184 vs 94720\r\n2019/09/23 08:23:40 INFO  : SecondLevelFolder/Presentation1.pot: Removing failed copy\r\n2019/09/23 08:23:40 ERROR : SecondLevelFolder/ThirdLevelFolder2/TestFile3.docx: corrupted on transfer: sizes differ 14350 vs 20346\r\n2019/09/23 08:23:40 INFO  : SecondLevelFolder/ThirdLevelFolder2/TestFile3.docx: Removing failed copy\r\n2019/09/23 08:23:41 ERROR : SecondLevelFolder/ThirdLevelFolder1/Doc1.doc: corrupted on transfer: sizes differ 45056 vs 46592\r\n2019/09/23 08:23:41 INFO  : SecondLevelFolder/ThirdLevelFolder1/Doc1.doc: Removing failed copy\r\n2019/09/23 08:23:41 ERROR : Attempt 2/3 failed with 9 errors and: corrupted on transfer: sizes differ 45056 vs 46592\r\n2019/09/23 08:23:41 DEBUG : Doc1 - Copy (2).dot: Sizes identical\r\n2019/09/23 08:23:41 DEBUG : Doc1 - Copy (2).dot: Unchanged skipping\r\n2019/09/23 08:23:41 DEBUG : Doc1.dot: Sizes identical\r\n2019/09/23 08:23:41 DEBUG : Doc1.dot: Unchanged skipping\r\n2019/09/23 08:23:41 DEBUG : Doc1 - Copy.dot: Sizes identical\r\n2019/09/23 08:23:41 DEBUG : Doc1 - Copy.dot: Unchanged skipping\r\n2019/09/23 08:23:41 DEBUG : SecondLevelFolder/ThirdLevelFolder1/New Text Document.txt: Sizes identical\r\n2019/09/23 08:23:41 DEBUG : SecondLevelFolder/ThirdLevelFolder1/New Text Document.txt: Unchanged skipping\r\n2019/09/23 08:23:41 INFO  : webdav root 'Shared Documents': Waiting for checks to finish\r\n2019/09/23 08:23:41 INFO  : webdav root 'Shared Documents': Waiting for transfers to finish\r\n2019/09/23 08:23:42 ERROR : Presentation1.ppt: corrupted on transfer: sizes differ 93184 vs 94720\r\n2019/09/23 08:23:42 INFO  : Presentation1.ppt: Removing failed copy\r\n2019/09/23 08:23:42 ERROR : SecondLevelFolder/Presentation1.pot: corrupted on transfer: sizes differ 93184 vs 94720\r\n2019/09/23 08:23:42 INFO  : SecondLevelFolder/Presentation1.pot: Removing failed copy\r\n2019/09/23 08:23:42 ERROR : SecondLevelFolder/ThirdLevelFolder2/TestFile3.docx: corrupted on transfer: sizes differ 14350 vs 20347\r\n2019/09/23 08:23:42 INFO  : SecondLevelFolder/ThirdLevelFolder2/TestFile3.docx: Removing failed copy\r\n2019/09/23 08:23:43 ERROR : SecondLevelFolder/ThirdLevelFolder1/Doc1.doc: corrupted on transfer: sizes differ 45056 vs 46592\r\n2019/09/23 08:23:43 INFO  : SecondLevelFolder/ThirdLevelFolder1/Doc1.doc: Removing failed copy\r\n2019/09/23 08:23:43 ERROR : Attempt 3/3 failed with 9 errors and: corrupted on transfer: sizes differ 45056 vs 46592\r\n2019/09/23 08:23:43 Failed to copy with 9 errors: last error was: corrupted on transfer: sizes differ 45056 vs 46592\r\n```\r\n\r\nWhen calling rClone with --ignore-size, it correctly copies the 4 missing files - but on changing local files and rerunning the command, they are not copied\r\n\r\n```Powershell\r\n.\\rclone.exe copy \"C:\\Temp\\TestRClone\\\" RCloneTest:\"Shared Documents\" --ignore-size --trans\r\nfers=50 -vv\r\n2019/09/23 08:25:54 DEBUG : rclone: Version \"v1.49.0-089-g49d6d642-beta\" starting with parameters [\"C:\\\\temp\\\\rClone\\\\rclone.exe\" \"copy\" \"C:\\\\Temp\\\\TestRClone\\\\\" \"RCloneTest:Shared Documents\" \"--ignore-size\" \"--transfers=50\" \"-vv\"]\r\n2019/09/23 08:25:54 DEBUG : Using config file from \"C:\\\\Users\\\\Raphael.RBOOK\\\\.config\\\\rclone\\\\rclone.conf\"\r\n2019/09/23 08:25:57 DEBUG : Doc1 - Copy.dot: Sizes identical\r\n2019/09/23 08:25:57 DEBUG : Doc1 - Copy.dot: Unchanged skipping\r\n2019/09/23 08:25:57 DEBUG : Doc1.dot: Sizes identical\r\n2019/09/23 08:25:57 DEBUG : Doc1.dot: Unchanged skipping\r\n2019/09/23 08:25:57 DEBUG : Doc1 - Copy (2).dot: Sizes identical\r\n2019/09/23 08:25:57 DEBUG : Doc1 - Copy (2).dot: Unchanged skipping\r\n2019/09/23 08:25:58 DEBUG : SecondLevelFolder/ThirdLevelFolder1/New Text Document.txt: Sizes identical\r\n2019/09/23 08:25:58 DEBUG : SecondLevelFolder/ThirdLevelFolder1/New Text Document.txt: Unchanged skipping\r\n2019/09/23 08:25:58 INFO  : webdav root 'Shared Documents': Waiting for checks to finish\r\n2019/09/23 08:25:58 INFO  : webdav root 'Shared Documents': Waiting for transfers to finish\r\n2019/09/23 08:25:58 INFO  : Presentation1.ppt: Copied (new)\r\n2019/09/23 08:25:58 INFO  : SecondLevelFolder/ThirdLevelFolder2/TestFile3.docx: Copied (new)\r\n2019/09/23 08:25:59 INFO  : SecondLevelFolder/ThirdLevelFolder1/Doc1.doc: Copied (new)\r\n2019/09/23 08:25:59 INFO  : SecondLevelFolder/Presentation1.pot: Copied (new)\r\n2019/09/23 08:25:59 INFO  :\r\nTransferred:      240.014k / 240.014 kBytes, 100%, 137.997 kBytes/s, ETA 0s\r\nErrors:                 0\r\nChecks:                 4 / 4, 100%\r\nTransferred:            4 / 4, 100%\r\nElapsed time:        1.7s\r\n\r\n2019/09/23 08:25:59 DEBUG : 19 go routines active\r\n2019/09/23 08:25:59 DEBUG : rclone: Version \"v1.49.0-089-g49d6d642-beta\" finishing with parameters [\"C:\\\\temp\\\\rClone\\\\rclone.exe\" \"copy\" \"C:\\\\Temp\\\\TestRClone\\\\\" \"RCloneTest:Shared Documents\" \"--ignore-size\" \"--transfers=50\" \"-vv\"]\r\n```\r\nCalling it again with 1 locally hanged .docx File does not upload the file again:\r\n```Powershell\r\n.\\rclone.exe copy \"C:\\Temp\\TestRClone\\\" RCloneTest:\"Shared Documents\" --ignore-size --trans\r\nfers=50 -vv\r\n2019/09/23 08:27:56 DEBUG : rclone: Version \"v1.49.0-089-g49d6d642-beta\" starting with parameters [\"C:\\\\temp\\\\rClone\\\\rclone.exe\" \"copy\" \"C:\\\\Temp\\\\TestRClone\\\\\" \"RCloneTest:Shared Documents\" \"--ignore-size\" \"--transfers=50\" \"-vv\"]\r\n2019/09/23 08:27:56 DEBUG : Using config file from \"C:\\\\Users\\\\Raphael.RBOOK\\\\.config\\\\rclone\\\\rclone.conf\"\r\n2019/09/23 08:27:58 DEBUG : Doc1 - Copy (2).dot: Sizes identical\r\n2019/09/23 08:27:58 DEBUG : Doc1 - Copy (2).dot: Unchanged skipping\r\n2019/09/23 08:27:58 DEBUG : Doc1 - Copy.dot: Sizes identical\r\n2019/09/23 08:27:58 DEBUG : Doc1 - Copy.dot: Unchanged skipping\r\n2019/09/23 08:27:58 DEBUG : Doc1.dot: Sizes identical\r\n2019/09/23 08:27:58 DEBUG : Doc1.dot: Unchanged skipping\r\n2019/09/23 08:27:58 DEBUG : Presentation1.ppt: Sizes identical\r\n2019/09/23 08:27:58 DEBUG : Presentation1.ppt: Unchanged skipping\r\n2019/09/23 08:27:58 DEBUG : SecondLevelFolder/Presentation1.pot: Sizes identical\r\n2019/09/23 08:27:58 DEBUG : SecondLevelFolder/Presentation1.pot: Unchanged skipping\r\n2019/09/23 08:27:58 DEBUG : SecondLevelFolder/ThirdLevelFolder2/TestFile3.docx: Sizes identical\r\n2019/09/23 08:27:58 DEBUG : SecondLevelFolder/ThirdLevelFolder2/TestFile3.docx: Unchanged skipping\r\n2019/09/23 08:27:58 DEBUG : SecondLevelFolder/ThirdLevelFolder1/Doc1.doc: Sizes identical\r\n2019/09/23 08:27:58 DEBUG : SecondLevelFolder/ThirdLevelFolder1/Doc1.doc: Unchanged skipping\r\n2019/09/23 08:27:58 INFO  : webdav root 'Shared Documents': Waiting for checks to finish\r\n2019/09/23 08:27:58 DEBUG : SecondLevelFolder/ThirdLevelFolder1/New Text Document.txt: Sizes identical\r\n2019/09/23 08:27:58 DEBUG : SecondLevelFolder/ThirdLevelFolder1/New Text Document.txt: Unchanged skipping\r\n2019/09/23 08:27:58 INFO  : webdav root 'Shared Documents': Waiting for transfers to finish\r\n2019/09/23 08:27:58 INFO  :\r\nTransferred:             0 / 0 Bytes, -, 0 Bytes/s, ETA -\r\nErrors:                 0\r\nChecks:                 8 / 8, 100%\r\nTransferred:            0 / 0, -\r\nElapsed time:          0s\r\n\r\n2019/09/23 08:27:58 DEBUG : 11 go routines active\r\n2019/09/23 08:27:58 DEBUG : rclone: Version \"v1.49.0-089-g49d6d642-beta\" finishing with parameters [\"C:\\\\temp\\\\rClone\\\\rclone.exe\" \"copy\" \"C:\\\\Temp\\\\TestRClone\\\\\" \"RCloneTest:Shared Documents\" \"--ignore-size\" \"--transfers=50\" \"-vv\"]\r\n```\r\n\r\nAdding --ignore-checksum does not help either:\r\n```Powershell\r\n.\\rclone.exe copy \"C:\\Temp\\TestRClone\\\" RCloneTest:\"Shared Documents\" --ignore-size --ignor\r\ne-checksum --transfers=50 -vv\r\n2019/09/23 08:28:56 DEBUG : rclone: Version \"v1.49.0-089-g49d6d642-beta\" starting with parameters [\"C:\\\\temp\\\\rClone\\\\rclone.exe\" \"copy\" \"C:\\\\Temp\\\\TestRClone\\\\\" \"RCloneTest:Shared Documents\" \"--ignore-size\" \"--ignore-checksum\" \"--transfers=50\" \"-vv\"]\r\n2019/09/23 08:28:56 DEBUG : Using config file from \"C:\\\\Users\\\\Raphael.RBOOK\\\\.config\\\\rclone\\\\rclone.conf\"\r\n2019/09/23 08:28:57 DEBUG : Doc1 - Copy (2).dot: Sizes identical\r\n2019/09/23 08:28:57 DEBUG : Doc1 - Copy (2).dot: Unchanged skipping\r\n2019/09/23 08:28:57 DEBUG : Doc1.dot: Sizes identical\r\n2019/09/23 08:28:57 DEBUG : Doc1.dot: Unchanged skipping\r\n2019/09/23 08:28:57 DEBUG : Presentation1.ppt: Sizes identical\r\n2019/09/23 08:28:57 DEBUG : Presentation1.ppt: Unchanged skipping\r\n2019/09/23 08:28:57 DEBUG : Doc1 - Copy.dot: Sizes identical\r\n2019/09/23 08:28:57 DEBUG : Doc1 - Copy.dot: Unchanged skipping\r\n2019/09/23 08:28:58 DEBUG : SecondLevelFolder/Presentation1.pot: Sizes identical\r\n2019/09/23 08:28:58 DEBUG : SecondLevelFolder/Presentation1.pot: Unchanged skipping\r\n2019/09/23 08:28:58 DEBUG : SecondLevelFolder/ThirdLevelFolder2/TestFile3.docx: Sizes identical\r\n2019/09/23 08:28:58 DEBUG : SecondLevelFolder/ThirdLevelFolder2/TestFile3.docx: Unchanged skipping\r\n2019/09/23 08:28:58 DEBUG : SecondLevelFolder/ThirdLevelFolder1/Doc1.doc: Sizes identical\r\n2019/09/23 08:28:58 DEBUG : SecondLevelFolder/ThirdLevelFolder1/Doc1.doc: Unchanged skipping\r\n2019/09/23 08:28:58 INFO  : webdav root 'Shared Documents': Waiting for checks to finish\r\n2019/09/23 08:28:58 DEBUG : SecondLevelFolder/ThirdLevelFolder1/New Text Document.txt: Sizes identical\r\n2019/09/23 08:28:58 DEBUG : SecondLevelFolder/ThirdLevelFolder1/New Text Document.txt: Unchanged skipping\r\n2019/09/23 08:28:58 INFO  : webdav root 'Shared Documents': Waiting for transfers to finish\r\n2019/09/23 08:28:58 INFO  :\r\nTransferred:             0 / 0 Bytes, -, 0 Bytes/s, ETA -\r\nErrors:                 0\r\nChecks:                 8 / 8, 100%\r\nTransferred:            0 / 0, -\r\nElapsed time:          0s\r\n\r\n2019/09/23 08:28:58 DEBUG : 11 go routines active\r\n2019/09/23 08:28:58 DEBUG : rclone: Version \"v1.49.0-089-g49d6d642-beta\" finishing with parameters [\"C:\\\\temp\\\\rClone\\\\rclone.exe\" \"copy\" \"C:\\\\Temp\\\\TestRClone\\\\\" \"RCloneTest:Shared Documents\" \"--ignore-size\" \"--ignore-checksum\" \"--transfers=50\" \"-vv\"]\r\n```\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n```Powershell\r\nrclone v1.49.0-089-g49d6d642-beta\r\n- os/arch: windows/amd64\r\n- go version: go1.12.3\r\n```\r\n\r\n#### Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\n\r\nWindows 10, 64  Bit\r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\nSharePoint Online (WebDav)\r\n\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\n```Powershell\r\n.\\rclone.exe copy \"C:\\Temp\\TestRClone\\\" RCloneTest:\"Shared Documents\" --ignore-size --ignore-checksum --transfers=50 -vv\r\n```\r\n\r\n#### A log from the command with the `-vv` flag (eg output from `rclone -vv copy /tmp remote:tmp`)\r\nSee above\r\n\r\n\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/3564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/3564/timeline","performed_via_github_app":null,"state_reason":"completed"}