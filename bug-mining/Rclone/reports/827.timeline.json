[{"id":3565310153,"node_id":"MDEyOkxhYmVsZWRFdmVudDM1NjUzMTAxNTM=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3565310153","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-07-20T11:23:49Z","label":{"name":"question","color":"cc317c"},"performed_via_github_app":null},{"id":3565310155,"node_id":"MDEyOkxhYmVsZWRFdmVudDM1NjUzMTAxNTU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3565310155","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-07-20T11:23:49Z","label":{"name":"Remote: S3","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/661913304","html_url":"https://github.com/rclone/rclone/issues/4449#issuecomment-661913304","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4449","id":661913304,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTkxMzMwNA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-21T14:58:54Z","updated_at":"2020-07-21T14:58:54Z","body":"This is rclone trying to create the bucket if it doesn't exist. \r\n\r\nThis is quite a similar problem to #4297 which was fixed by 723c1dfdc52b99b4412303b2d4e5f4c3502947f2\r\n\r\nThis fix would work here too, but because you've used `--no-traverse` and `--no-check-existing` by the time rclone comes to do the upload it doesn't know if the bucket exists or not because it hasn't listed it or anything within it.\r\n\r\nSo I guess options are\r\n\r\n- ignore the 403 forbidden message when we come to create the bucket. The could potentially mask other errors though\r\n- don't try to create the bucket - maybe make a `--s3-assume-bucket-exists` flag or something like that\r\n\r\nThoughts?\r\n\r\nAny other idea?\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/661913304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3571709018,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MzU3MTcwOTAxOA==","url":"https://api.github.com/repos/rclone/rclone/issues/events/3571709018","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2020-07-21T14:59:03Z","label":{"name":"question","color":"cc317c"},"performed_via_github_app":null},{"id":3571709023,"node_id":"MDEyOkxhYmVsZWRFdmVudDM1NzE3MDkwMjM=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3571709023","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-07-21T14:59:04Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":3571709485,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDM1NzE3MDk0ODU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3571709485","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2020-07-21T14:59:07Z","milestone":{"title":"v1.53"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/661925801","html_url":"https://github.com/rclone/rclone/issues/4449#issuecomment-661925801","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4449","id":661925801,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTkyNTgwMQ==","user":{"login":"EmilienCourt","id":22601366,"node_id":"MDQ6VXNlcjIyNjAxMzY2","avatar_url":"https://avatars.githubusercontent.com/u/22601366?v=4","gravatar_id":"","url":"https://api.github.com/users/EmilienCourt","html_url":"https://github.com/EmilienCourt","followers_url":"https://api.github.com/users/EmilienCourt/followers","following_url":"https://api.github.com/users/EmilienCourt/following{/other_user}","gists_url":"https://api.github.com/users/EmilienCourt/gists{/gist_id}","starred_url":"https://api.github.com/users/EmilienCourt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EmilienCourt/subscriptions","organizations_url":"https://api.github.com/users/EmilienCourt/orgs","repos_url":"https://api.github.com/users/EmilienCourt/repos","events_url":"https://api.github.com/users/EmilienCourt/events{/privacy}","received_events_url":"https://api.github.com/users/EmilienCourt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-21T15:20:11Z","updated_at":"2020-07-21T15:20:47Z","body":"> \r\n> \r\n> This is rclone trying to create the bucket if it doesn't exist.\r\n> \r\n> This is quite a similar problem to #4297 which was fixed by [723c1df](https://github.com/rclone/rclone/commit/723c1dfdc52b99b4412303b2d4e5f4c3502947f2)\r\n> \r\n> This fix would work here too, but because you've used `--no-traverse` and `--no-check-existing` by the time rclone comes to do the upload it doesn't know if the bucket exists or not because it hasn't listed it or anything within it.\r\n> \r\n> So I guess options are\r\n> \r\n>     * ignore the 403 forbidden message when we come to create the bucket. The could potentially mask other errors though\r\n> \r\n>     * don't try to create the bucket - maybe make a `--s3-assume-bucket-exists` flag or something like that\r\n> \r\n> \r\n> Thoughts?\r\n> \r\n> Any other idea?\r\n\r\nThanks @ncw for the answer.\r\n\r\n\r\nI have tried with and without the `--no-traverse` and `--no-check-existing` options, but it would not work either (due to the very restrictive bucket policy).\r\n\r\nThe `--s3-assume-bucket-exists` would be the best option, according to me.\r\n\r\n\r\nMaybe a more global switch like `--bare-requests` would also be appropriate (only for `copy`) ? \r\n\r\nThis would just send the PUT requests (which is what `aws s3api cp` does). I think it would be more convenient than having to set `--no-traverse`, `--no-check-existing` and `--s3-assume-bucket-exists`.\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/661925801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"EmilienCourt","id":22601366,"node_id":"MDQ6VXNlcjIyNjAxMzY2","avatar_url":"https://avatars.githubusercontent.com/u/22601366?v=4","gravatar_id":"","url":"https://api.github.com/users/EmilienCourt","html_url":"https://github.com/EmilienCourt","followers_url":"https://api.github.com/users/EmilienCourt/followers","following_url":"https://api.github.com/users/EmilienCourt/following{/other_user}","gists_url":"https://api.github.com/users/EmilienCourt/gists{/gist_id}","starred_url":"https://api.github.com/users/EmilienCourt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EmilienCourt/subscriptions","organizations_url":"https://api.github.com/users/EmilienCourt/orgs","repos_url":"https://api.github.com/users/EmilienCourt/repos","events_url":"https://api.github.com/users/EmilienCourt/events{/privacy}","received_events_url":"https://api.github.com/users/EmilienCourt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3571811917,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzU3MTgxMTkxNw==","url":"https://api.github.com/repos/rclone/rclone/issues/events/3571811917","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-07-21T15:20:12Z","performed_via_github_app":null},{"id":3571811925,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM1NzE4MTE5MjU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3571811925","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-07-21T15:20:12Z","performed_via_github_app":null},{"id":3575267675,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM1NzUyNjc2NzU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3575267675","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5ef6948dbec4bc56291d33cc7fd3819137296612","commit_url":"https://api.github.com/repos/rclone/rclone/commits/5ef6948dbec4bc56291d33cc7fd3819137296612","created_at":"2020-07-22T11:07:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/662394049","html_url":"https://github.com/rclone/rclone/issues/4449#issuecomment-662394049","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4449","id":662394049,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjM5NDA0OQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-22T11:12:22Z","updated_at":"2020-07-22T11:12:22Z","body":"\r\n> I have tried with and without the `--no-traverse` and `--no-check-existing` options, but it would not work either (due to the very restrictive bucket policy).\r\n\r\nSure\r\n\r\n> The `--s3-assume-bucket-exists` would be the best option, according to me.\r\n\r\nI made a `--s3-no-check-bucket` flag here - can you have a go?\r\n\r\n[v1.52.2-233-g5ef6948d-fix-4449-s3-no-check-bucket-beta](https://beta.rclone.org/branch/v1.52.2-233-g5ef6948d-fix-4449-s3-no-check-bucket-beta/) on branch [fix-4449-s3-no-check-bucket](https://github.com/rclone/rclone/tree/fix-4449-s3-no-check-bucket) (uploaded in 15-30 mins)\r\n\r\nHowever this is still doing a post copy HEAD request to check the file was uploaded correctly...\r\n\r\n> Maybe a more global switch like `--bare-requests` would also be appropriate (only for `copy`) ?\r\n> \r\n> This would just send the PUT requests (which is what `aws s3api cp` does). I think it would be more convenient than having to set `--no-traverse`, `--no-check-existing` and `--s3-assume-bucket-exists`.\r\n\r\nThis is a bit difficult to fit into rclone's framework...\r\n\r\nI could do a backend command for `s3` say `rclone backend put s3:bucket file` or something like that which just did the put.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/662394049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/662410952","html_url":"https://github.com/rclone/rclone/issues/4449#issuecomment-662410952","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4449","id":662410952,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjQxMDk1Mg==","user":{"login":"EmilienCourt","id":22601366,"node_id":"MDQ6VXNlcjIyNjAxMzY2","avatar_url":"https://avatars.githubusercontent.com/u/22601366?v=4","gravatar_id":"","url":"https://api.github.com/users/EmilienCourt","html_url":"https://github.com/EmilienCourt","followers_url":"https://api.github.com/users/EmilienCourt/followers","following_url":"https://api.github.com/users/EmilienCourt/following{/other_user}","gists_url":"https://api.github.com/users/EmilienCourt/gists{/gist_id}","starred_url":"https://api.github.com/users/EmilienCourt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EmilienCourt/subscriptions","organizations_url":"https://api.github.com/users/EmilienCourt/orgs","repos_url":"https://api.github.com/users/EmilienCourt/repos","events_url":"https://api.github.com/users/EmilienCourt/events{/privacy}","received_events_url":"https://api.github.com/users/EmilienCourt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-22T11:55:57Z","updated_at":"2020-07-22T11:55:57Z","body":"I've just tested the beta version you have linked, it works just fine. Thanks !\r\n\r\nThere is indeed a HEAD request before (the result of which is ignored) and after the copy. The result of the operation is \"Failed\", because of the latter (as you mentionned).\r\n\r\n</br>\r\n\r\nRegarding the backend command, I would not personally use it if implemented (as I have to copy entire folders) but it might be useful to some.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/662410952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"EmilienCourt","id":22601366,"node_id":"MDQ6VXNlcjIyNjAxMzY2","avatar_url":"https://avatars.githubusercontent.com/u/22601366?v=4","gravatar_id":"","url":"https://api.github.com/users/EmilienCourt","html_url":"https://github.com/EmilienCourt","followers_url":"https://api.github.com/users/EmilienCourt/followers","following_url":"https://api.github.com/users/EmilienCourt/following{/other_user}","gists_url":"https://api.github.com/users/EmilienCourt/gists{/gist_id}","starred_url":"https://api.github.com/users/EmilienCourt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EmilienCourt/subscriptions","organizations_url":"https://api.github.com/users/EmilienCourt/orgs","repos_url":"https://api.github.com/users/EmilienCourt/repos","events_url":"https://api.github.com/users/EmilienCourt/events{/privacy}","received_events_url":"https://api.github.com/users/EmilienCourt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3590746836,"node_id":"MDExOkNsb3NlZEV2ZW50MzU5MDc0NjgzNg==","url":"https://api.github.com/repos/rclone/rclone/issues/events/3590746836","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"f406dbbb4d8da540892629a6f6926ff0a94ee9cf","commit_url":"https://api.github.com/repos/rclone/rclone/commits/f406dbbb4d8da540892629a6f6926ff0a94ee9cf","created_at":"2020-07-27T16:49:52Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/664512507","html_url":"https://github.com/rclone/rclone/issues/4449#issuecomment-664512507","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4449","id":664512507,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDUxMjUwNw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-27T16:50:29Z","updated_at":"2020-07-27T16:50:29Z","body":"I've merged this to master now which means it will be in [the latest beta](https://beta.rclone.org) in 15-30 mins and released in v1.53\r\n\r\nI'll leave the backend command for the moment :-)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/664512507/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"jamshid","id":8549,"node_id":"MDQ6VXNlcjg1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/8549?v=4","gravatar_id":"","url":"https://api.github.com/users/jamshid","html_url":"https://github.com/jamshid","followers_url":"https://api.github.com/users/jamshid/followers","following_url":"https://api.github.com/users/jamshid/following{/other_user}","gists_url":"https://api.github.com/users/jamshid/gists{/gist_id}","starred_url":"https://api.github.com/users/jamshid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamshid/subscriptions","organizations_url":"https://api.github.com/users/jamshid/orgs","repos_url":"https://api.github.com/users/jamshid/repos","events_url":"https://api.github.com/users/jamshid/events{/privacy}","received_events_url":"https://api.github.com/users/jamshid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-09T00:39:15Z","updated_at":"2020-10-09T00:39:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/4665","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/4665/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/4665/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/4665/events","html_url":"https://github.com/rclone/rclone/issues/4665","id":717763364,"node_id":"MDU6SXNzdWU3MTc3NjMzNjQ=","number":4665,"title":"mkdir is a no-op with --s3-no-check-bucket","user":{"login":"jamshid","id":8549,"node_id":"MDQ6VXNlcjg1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/8549?v=4","gravatar_id":"","url":"https://api.github.com/users/jamshid","html_url":"https://github.com/jamshid","followers_url":"https://api.github.com/users/jamshid/followers","following_url":"https://api.github.com/users/jamshid/following{/other_user}","gists_url":"https://api.github.com/users/jamshid/gists{/gist_id}","starred_url":"https://api.github.com/users/jamshid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamshid/subscriptions","organizations_url":"https://api.github.com/users/jamshid/orgs","repos_url":"https://api.github.com/users/jamshid/repos","events_url":"https://api.github.com/users/jamshid/events{/privacy}","received_events_url":"https://api.github.com/users/jamshid/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":314138213,"node_id":"MDU6TGFiZWwzMTQxMzgyMTM=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20S3","name":"Remote: S3","color":"fbca04","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/18","html_url":"https://github.com/rclone/rclone/milestone/18","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/18/labels","id":1832726,"node_id":"MDk6TWlsZXN0b25lMTgzMjcyNg==","number":18,"title":"Known Problem","description":"This milestone contains issues which are known problems which are proving difficult to fix, or are awaiting an external fix or we haven't got round to yet.","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":70,"closed_issues":148,"state":"open","created_at":"2016-06-16T16:59:54Z","updated_at":"2025-08-25T17:05:37Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2020-10-09T00:39:14Z","updated_at":"2021-11-01T16:59:34Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"#### What is the problem you are having with rclone?\r\n\r\nThe new `--s3-no-check-bucket` option from https://github.com/rclone/rclone/issues/4449 **causes `mkdir` to be a no-op**.\r\nIs that intended behavior? \r\n\r\nI know it doesn't make sense to use that option with mkdir but I'm trying to workaround new behavior from rclone, where `rclone copy hello.txt caringo:mybucket` does a `PUT /mybucket` even if the bucket already exists. Yes that should be okay, AWS S3 returns a 200 OK for a PUT of a bucket that already exists. But the S3-compatible system I'm using is not quite compatible here and returns a 409 error :-(. \r\n\r\nAnyway I'll file a bug with the S3-compatible server about this incompatibility and change the test script I'm using to allow specifying different options for the `mkdir` and `copy` operations. \r\n**But it seems `mkdir` should create the bucket regardless of `--s3-no-check-bucket`.**\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n```\r\nbash-4.2# rclone-current --version\r\nrclone v1.53.1\r\n- os/arch: linux/amd64\r\n- go version: go1.15\r\n```\r\n\r\n#### Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\n\r\ncentOS 7.7\r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\n\r\nS3-compatible\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\n\r\n`rclone --s3-no-check-bucket mkdir caringo:s3test-rclone-current-https-r721y1gn`\r\n \r\n\r\n#### A log from the command with the `-vv` flag (eg output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\n```\r\n$ rclone-current -vv --dump headers --s3-no-check-bucket mkdir caringo:s3test-rclone-current-https-r721y1gn\r\n2020/10/09 00:20:55 DEBUG : rclone: Version \"v1.53.1\" starting with parameters [\"rclone-current\" \"-vv\" \"--dump\" \"headers\" \"--s3-no-check-bucket\" \"mkdir\" \"caringo:s3test-rclone-current-https-r721y1gn\"]\r\n2020/10/09 00:20:55 DEBUG : Creating backend with remote \"caringo:s3test-rclone-current-https-r721y1gn\"\r\n2020/10/09 00:20:55 DEBUG : Using config file from \"/root/.rclone.conf\"\r\n2020/10/09 00:20:55 DEBUG : You have specified to dump information. Please be noted that the Accept-Encoding as shown may not be correct in the request and the response may not show Content-Encoding if the go standard libraries auto gzip encoding was in effect. In this case the body of the request will be gunzipped before showing it.\r\n2020/10/09 00:20:55 DEBUG : S3 bucket s3test-rclone-current-https-r721y1gn: Making directory\r\n2020/10/09 00:20:55 DEBUG : 2 go routines active\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/4665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/4665/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"nickgooding","id":73336146,"node_id":"MDQ6VXNlcjczMzM2MTQ2","avatar_url":"https://avatars.githubusercontent.com/u/73336146?v=4","gravatar_id":"","url":"https://api.github.com/users/nickgooding","html_url":"https://github.com/nickgooding","followers_url":"https://api.github.com/users/nickgooding/followers","following_url":"https://api.github.com/users/nickgooding/following{/other_user}","gists_url":"https://api.github.com/users/nickgooding/gists{/gist_id}","starred_url":"https://api.github.com/users/nickgooding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickgooding/subscriptions","organizations_url":"https://api.github.com/users/nickgooding/orgs","repos_url":"https://api.github.com/users/nickgooding/repos","events_url":"https://api.github.com/users/nickgooding/events{/privacy}","received_events_url":"https://api.github.com/users/nickgooding/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T19:28:40Z","updated_at":"2022-04-12T19:28:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/6101","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/6101/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/6101/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/6101/events","html_url":"https://github.com/rclone/rclone/pull/6101","id":1202297452,"node_id":"PR_kwDOAQ-n5M42ICqY","number":6101,"title":"googlecloudstorage: add --gcs-no-check-bucket to minimise transactions and perms","user":{"login":"nickgooding","id":73336146,"node_id":"MDQ6VXNlcjczMzM2MTQ2","avatar_url":"https://avatars.githubusercontent.com/u/73336146?v=4","gravatar_id":"","url":"https://api.github.com/users/nickgooding","html_url":"https://github.com/nickgooding","followers_url":"https://api.github.com/users/nickgooding/followers","following_url":"https://api.github.com/users/nickgooding/following{/other_user}","gists_url":"https://api.github.com/users/nickgooding/gists{/gist_id}","starred_url":"https://api.github.com/users/nickgooding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickgooding/subscriptions","organizations_url":"https://api.github.com/users/nickgooding/orgs","repos_url":"https://api.github.com/users/nickgooding/repos","events_url":"https://api.github.com/users/nickgooding/events{/privacy}","received_events_url":"https://api.github.com/users/nickgooding/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-04-12T19:28:40Z","updated_at":"2022-07-09T14:17:24Z","closed_at":"2022-04-14T10:18:36Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rclone/rclone/pulls/6101","html_url":"https://github.com/rclone/rclone/pull/6101","diff_url":"https://github.com/rclone/rclone/pull/6101.diff","patch_url":"https://github.com/rclone/rclone/pull/6101.patch","merged_at":"2022-04-14T10:18:36Z"},"body":"<!--\r\nThank you very much for contributing code or documentation to rclone! Please\r\nfill out the following questions to make it easier for us to review your\r\nchanges.\r\n\r\nYou do not need to check all the boxes below all at once, feel free to take\r\nyour time and add more commits. If you're done and ready for review, please\r\ncheck the last box.\r\n-->\r\n\r\n#### What is the purpose of this change?\r\n\r\nAdds a configuration option to the GCS backend to allow skipping the\r\ncheck if a bucket exists before copying an object to it, much like\r\nf406dbb added for S3.\r\n\r\n#### Was the change discussed in an issue or in the forum before?\r\n\r\nThis is essentially a GCS-y version of the fix for #4449\r\n\r\n#### Checklist\r\n\r\n- [x] I have read the [contribution guidelines](https://github.com/rclone/rclone/blob/master/CONTRIBUTING.md#submitting-a-new-feature-or-bug-fix).\r\n- [x] I have added tests for all changes in this PR if appropriate.\r\n- [x] I have added documentation for the changes if appropriate.\r\n- [x] All commit messages are in [house style](https://github.com/rclone/rclone/blob/master/CONTRIBUTING.md#commit-messages).\r\n- [x] I'm done, this Pull Request is ready for review :-)\r\n","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/6101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/6101/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"neggles","id":4232981,"node_id":"MDQ6VXNlcjQyMzI5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/4232981?v=4","gravatar_id":"","url":"https://api.github.com/users/neggles","html_url":"https://github.com/neggles","followers_url":"https://api.github.com/users/neggles/followers","following_url":"https://api.github.com/users/neggles/following{/other_user}","gists_url":"https://api.github.com/users/neggles/gists{/gist_id}","starred_url":"https://api.github.com/users/neggles/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neggles/subscriptions","organizations_url":"https://api.github.com/users/neggles/orgs","repos_url":"https://api.github.com/users/neggles/repos","events_url":"https://api.github.com/users/neggles/events{/privacy}","received_events_url":"https://api.github.com/users/neggles/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-14T03:02:09Z","updated_at":"2023-08-14T03:02:09Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/fsspec/s3fs/issues/766","repository_url":"https://api.github.com/repos/fsspec/s3fs","labels_url":"https://api.github.com/repos/fsspec/s3fs/issues/766/labels{/name}","comments_url":"https://api.github.com/repos/fsspec/s3fs/issues/766/comments","events_url":"https://api.github.com/repos/fsspec/s3fs/issues/766/events","html_url":"https://github.com/fsspec/s3fs/issues/766","id":1836409797,"node_id":"I_kwDOAzfKcc5tdWPF","number":766,"title":"S3Map always attempts to create parent directiories","user":{"login":"Langdi","id":2018510,"node_id":"MDQ6VXNlcjIwMTg1MTA=","avatar_url":"https://avatars.githubusercontent.com/u/2018510?v=4","gravatar_id":"","url":"https://api.github.com/users/Langdi","html_url":"https://github.com/Langdi","followers_url":"https://api.github.com/users/Langdi/followers","following_url":"https://api.github.com/users/Langdi/following{/other_user}","gists_url":"https://api.github.com/users/Langdi/gists{/gist_id}","starred_url":"https://api.github.com/users/Langdi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Langdi/subscriptions","organizations_url":"https://api.github.com/users/Langdi/orgs","repos_url":"https://api.github.com/users/Langdi/repos","events_url":"https://api.github.com/users/Langdi/events{/privacy}","received_events_url":"https://api.github.com/users/Langdi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-08-04T09:37:37Z","updated_at":"2023-08-14T14:17:59Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":53987953,"node_id":"MDEwOlJlcG9zaXRvcnk1Mzk4Nzk1Mw==","name":"s3fs","full_name":"fsspec/s3fs","private":false,"owner":{"login":"fsspec","id":92825505,"node_id":"O_kgDOBYhnoQ","avatar_url":"https://avatars.githubusercontent.com/u/92825505?v=4","gravatar_id":"","url":"https://api.github.com/users/fsspec","html_url":"https://github.com/fsspec","followers_url":"https://api.github.com/users/fsspec/followers","following_url":"https://api.github.com/users/fsspec/following{/other_user}","gists_url":"https://api.github.com/users/fsspec/gists{/gist_id}","starred_url":"https://api.github.com/users/fsspec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fsspec/subscriptions","organizations_url":"https://api.github.com/users/fsspec/orgs","repos_url":"https://api.github.com/users/fsspec/repos","events_url":"https://api.github.com/users/fsspec/events{/privacy}","received_events_url":"https://api.github.com/users/fsspec/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/fsspec/s3fs","description":"S3 Filesystem ","fork":false,"url":"https://api.github.com/repos/fsspec/s3fs","forks_url":"https://api.github.com/repos/fsspec/s3fs/forks","keys_url":"https://api.github.com/repos/fsspec/s3fs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/fsspec/s3fs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/fsspec/s3fs/teams","hooks_url":"https://api.github.com/repos/fsspec/s3fs/hooks","issue_events_url":"https://api.github.com/repos/fsspec/s3fs/issues/events{/number}","events_url":"https://api.github.com/repos/fsspec/s3fs/events","assignees_url":"https://api.github.com/repos/fsspec/s3fs/assignees{/user}","branches_url":"https://api.github.com/repos/fsspec/s3fs/branches{/branch}","tags_url":"https://api.github.com/repos/fsspec/s3fs/tags","blobs_url":"https://api.github.com/repos/fsspec/s3fs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/fsspec/s3fs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/fsspec/s3fs/git/refs{/sha}","trees_url":"https://api.github.com/repos/fsspec/s3fs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/fsspec/s3fs/statuses/{sha}","languages_url":"https://api.github.com/repos/fsspec/s3fs/languages","stargazers_url":"https://api.github.com/repos/fsspec/s3fs/stargazers","contributors_url":"https://api.github.com/repos/fsspec/s3fs/contributors","subscribers_url":"https://api.github.com/repos/fsspec/s3fs/subscribers","subscription_url":"https://api.github.com/repos/fsspec/s3fs/subscription","commits_url":"https://api.github.com/repos/fsspec/s3fs/commits{/sha}","git_commits_url":"https://api.github.com/repos/fsspec/s3fs/git/commits{/sha}","comments_url":"https://api.github.com/repos/fsspec/s3fs/comments{/number}","issue_comment_url":"https://api.github.com/repos/fsspec/s3fs/issues/comments{/number}","contents_url":"https://api.github.com/repos/fsspec/s3fs/contents/{+path}","compare_url":"https://api.github.com/repos/fsspec/s3fs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/fsspec/s3fs/merges","archive_url":"https://api.github.com/repos/fsspec/s3fs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/fsspec/s3fs/downloads","issues_url":"https://api.github.com/repos/fsspec/s3fs/issues{/number}","pulls_url":"https://api.github.com/repos/fsspec/s3fs/pulls{/number}","milestones_url":"https://api.github.com/repos/fsspec/s3fs/milestones{/number}","notifications_url":"https://api.github.com/repos/fsspec/s3fs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/fsspec/s3fs/labels{/name}","releases_url":"https://api.github.com/repos/fsspec/s3fs/releases{/id}","deployments_url":"https://api.github.com/repos/fsspec/s3fs/deployments","created_at":"2016-03-16T00:19:32Z","updated_at":"2025-11-08T14:57:51Z","pushed_at":"2025-11-05T21:29:57Z","git_url":"git://github.com/fsspec/s3fs.git","ssh_url":"git@github.com:fsspec/s3fs.git","clone_url":"https://github.com/fsspec/s3fs.git","svn_url":"https://github.com/fsspec/s3fs","homepage":"http://s3fs.readthedocs.io/en/latest/","size":1132,"stargazers_count":983,"watchers_count":983,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":289,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":174,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest"],"visibility":"public","forks":289,"open_issues":174,"watchers":983,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"## Problem\r\n\r\nI am using ZARR (https://zarr.readthedocs.io) with an S3 Backend. Zarr knows the concept of a zarr store, which is basically an `S3Map`:\r\n\r\n```python\r\ns3 = s3fs.S3FileSystem(...)\r\nstore = s3fs.S3Map(root=\"s3://foo/bar/baz\")\r\n```\r\n\r\nWhen I now attempt to set a property with `store['.zmetadata'] = \"value\"`: I get the following error stack:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/s3fs/core.py\", line 113, in _error_wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/aiobotocore/client.py\", line 378, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.exceptions.ClientError: An error occurred (AccessDenied) when calling the CreateBucket operation: Access Denied\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/zarr/storage.py\", line 1421, in __setitem__\r\n    self.map[key] = value\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/fsspec/mapping.py\", line 162, in __setitem__\r\n    self.fs.mkdirs(self.fs._parent(key), exist_ok=True)\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/fsspec/spec.py\", line 1444, in mkdirs\r\n    return self.makedirs(path, exist_ok=exist_ok)\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/fsspec/asyn.py\", line 121, in wrapper\r\n    return sync(self.loop, func, *args, **kwargs)\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/fsspec/asyn.py\", line 106, in sync\r\n    raise return_result\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/fsspec/asyn.py\", line 61, in _runner\r\n    result[0] = await coro\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/s3fs/core.py\", line 892, in _makedirs\r\n    await self._mkdir(path, create_parents=True)\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/s3fs/core.py\", line 877, in _mkdir\r\n    await self._call_s3(\"create_bucket\", **params)\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/s3fs/core.py\", line 348, in _call_s3\r\n    return await _error_wrapper(\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/s3fs/core.py\", line 140, in _error_wrapper\r\n    raise err\r\nPermissionError: Access Denied\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/langdi/s3-upload-test/venv/lib/python3.10/site-packages/zarr/storage.py\", line 1424, in __setitem__\r\n    raise KeyError(key) from e\r\nKeyError: '.zmetadata'\r\n```\r\n\r\n## Disassembling the call stack\r\n\r\nWhen looking at the calls, the relevant parts are:\r\n\r\n## `fsspec/mapping.py`\r\n\r\n```python\r\n    def __setitem__(self, key, value):\r\n        \"\"\"Store value in key\"\"\"\r\n        key = self._key_to_str(key)\r\n        self.fs.mkdirs(self.fs._parent(key), exist_ok=True)\r\n        self.fs.pipe_file(key, maybe_convert(value))\r\n```\r\nHere `mkdirs` is called on the filesystem, which eventually leads to \r\n\r\n## `s3fs/core.py`\r\n\r\n```python\r\n    async def _makedirs(self, path, exist_ok=False):\r\n        try:\r\n            await self._mkdir(path, create_parents=True)\r\n        # ....\r\n```\r\n\r\nThe problem is that `create_parents=True` is passed without a way to set the parameter to something else. This makes S3FS always attempt to create the parent dictionary/bucket, requiring `create_bucket` permissions in S3, even if the bucket already exists.\r\n\r\nI am not sure where to fix this, ideally there is a way to check for existence before attempting to create the parent directories/objects. Perhaps it can be conditional on `fsspec`'s `auto_mkdir` parameter (https://filesystem-spec.readthedocs.io/en/latest/api.html), although this could create other problems. E.g. when setting `\"s3://foo/bar/baz\", it might be that `/foo` exists, but `/bar/baz` needs to be created.\r\n\r\n## Used versions\r\n\r\n```\r\nzarr==2.15.0\r\ns3fs==2023.6.0\r\nfsspec==2023.6.0\r\n```","reactions":{"url":"https://api.github.com/repos/fsspec/s3fs/issues/766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/fsspec/s3fs/issues/766/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]