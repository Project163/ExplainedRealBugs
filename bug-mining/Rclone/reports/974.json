{"url":"https://api.github.com/repos/rclone/rclone/issues/5350","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/5350/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/5350/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/5350/events","html_url":"https://github.com/rclone/rclone/issues/5350","id":898399001,"node_id":"MDU6SXNzdWU4OTgzOTkwMDE=","number":5350,"title":"RCLONE_UMASK variable ignored by rclone mount","user":{"login":"skidnik","id":37795001,"node_id":"MDQ6VXNlcjM3Nzk1MDAx","avatar_url":"https://avatars.githubusercontent.com/u/37795001?v=4","gravatar_id":"","url":"https://api.github.com/users/skidnik","html_url":"https://github.com/skidnik","followers_url":"https://api.github.com/users/skidnik/followers","following_url":"https://api.github.com/users/skidnik/following{/other_user}","gists_url":"https://api.github.com/users/skidnik/gists{/gist_id}","starred_url":"https://api.github.com/users/skidnik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skidnik/subscriptions","organizations_url":"https://api.github.com/users/skidnik/orgs","repos_url":"https://api.github.com/users/skidnik/repos","events_url":"https://api.github.com/users/skidnik/events{/privacy}","received_events_url":"https://api.github.com/users/skidnik/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":430778096,"node_id":"MDU6TGFiZWw0MzA3NzgwOTY=","url":"https://api.github.com/repos/rclone/rclone/labels/VFS%20/%20mount","name":"VFS / mount","color":"0e8a16","default":false,"description":""},{"id":2464837457,"node_id":"MDU6TGFiZWwyNDY0ODM3NDU3","url":"https://api.github.com/repos/rclone/rclone/labels/OS:%20Unix","name":"OS: Unix","color":"e8d466","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-05-21T19:46:27Z","updated_at":"2021-05-22T18:48:03Z","closed_at":"2021-05-22T18:48:03Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### [The associated forum post URL from `https://forum.rclone.org`](https://forum.rclone.org/t/rclone-umask-variable-ignored-by-rclone-mount/24374)\r\n\r\n#### Issue description:\r\n\r\n`rclone mount` ignores the `RCLONE_UMASK` environment variable.\r\n\r\n### How to reproduce:\r\n\r\nOn the Linux OS:\r\n\r\n1. configure a remote with the name 'myremote'.\r\n2. create a directory 'myremote' in cwd.\r\n3. enter into the terminal: `RCLONE_UMASK=077 rclone mount myremote: myremote`.\r\n4. enter in another terminal window: `ls -l myremote`.\r\n5. see that files from the remote are mounted with the OS default umask (755 or 644).\r\n6. stop rclone mount (press ^C, send it a SIGTERM).\r\n7. enter into the terminal: `rclone --umask=077 mount myremote: myremote`.\r\n8. enter in another terminal window: `ls -l myremote`.\r\n9. see that files are mounted without masked permissions (700 or 600).\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n\r\n```\r\nrclone v1.55.0-DEV\r\n- os/type: linux\r\n- os/arch: amd64\r\n- go/version: go1.16\r\n- go/linking: dynamic\r\n- go/tags: none\r\n```\r\n\r\nPackage: rclone.x86_64 1.55.0-1.fc34\r\n\r\nPackage: fuse.x86_64 2.9.9-11.fc34\r\n\r\nOS: Fedora 34 (KDE spin)\r\n\r\nTested with NextCloud WebDAV and Google Drive remotes.\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\n\r\n```\r\nRCLONE_UMASK=077 rclone -vv mount hetznernxc: hetznernxc\r\n```\r\n\r\n#### The rclone config contents with secrets removed:\r\n\r\n```\r\n[hetznernxc]\r\ntype = webdav\r\nurl = https://nx<redacted>.your-storageshare.de/remote.php/webdav/\r\nvendor = nextcloud\r\nuser = <redacted>\r\npass = <redacted>\r\n```\r\n\r\n### [A log of two commands with -vv ](https://gist.github.com/skidnik/636d013bf74f4c243f1b1a421388f235)\r\n\r\nFirst with the `--umask` set, second with the `RCLONE_UMASK` set to indicate the difference.\r\n\r\n\r\n<!--- Please keep the note below for others who read your bug report. -->\r\n\r\n#### How to use GitHub\r\n\r\n* Please use the üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to show that you are affected by the same issue.\r\n* Please don't comment if you have no relevant information to add. It's just extra noise for everyone subscribed to this issue.\r\n* Subscribe to receive notifications on status change and new comments.\r\n","closed_by":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/5350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/5350/timeline","performed_via_github_app":null,"state_reason":"completed"}