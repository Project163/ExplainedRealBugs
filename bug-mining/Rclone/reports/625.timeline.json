[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/490086404","html_url":"https://github.com/rclone/rclone/issues/3158#issuecomment-490086404","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3158","id":490086404,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDA4NjQwNA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-07T13:46:09Z","updated_at":"2019-05-07T13:46:09Z","body":"I think this should be a question of setting the `PublicIp` in the [ServerOpts](https://godoc.org/github.com/goftp/server#ServerOpts) structure from a config variable  `--ftp-public-ip` maybe.\r\n\r\nDo you fancy having a go at this?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/490086404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2324255967,"node_id":"MDEyOkxhYmVsZWRFdmVudDIzMjQyNTU5Njc=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2324255967","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-05-07T13:46:15Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":2324256265,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDIzMjQyNTYyNjU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2324256265","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2019-05-07T13:46:21Z","milestone":{"title":"Help Wanted"},"performed_via_github_app":null},{"id":2324257703,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjMyNDI1NzcwMw==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2324257703","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2019-05-07T13:46:49Z","rename":{"from":"add ftp advertise passive addr","to":"serve ftp: advertise configured passive addr"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/490090944","html_url":"https://github.com/rclone/rclone/issues/3158#issuecomment-490090944","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3158","id":490090944,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDA5MDk0NA==","user":{"login":"calisro","id":5018276,"node_id":"MDQ6VXNlcjUwMTgyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5018276?v=4","gravatar_id":"","url":"https://api.github.com/users/calisro","html_url":"https://github.com/calisro","followers_url":"https://api.github.com/users/calisro/followers","following_url":"https://api.github.com/users/calisro/following{/other_user}","gists_url":"https://api.github.com/users/calisro/gists{/gist_id}","starred_url":"https://api.github.com/users/calisro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calisro/subscriptions","organizations_url":"https://api.github.com/users/calisro/orgs","repos_url":"https://api.github.com/users/calisro/repos","events_url":"https://api.github.com/users/calisro/events{/privacy}","received_events_url":"https://api.github.com/users/calisro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-07T13:57:11Z","updated_at":"2019-05-07T13:57:11Z","body":"I had tried. It was fairly easy to add the PublicIp in the code but interestingly it didn't work. I'm not sure if it's a go issue or my code. But it's only like 4 lines of code.\r\n\r\nI use the successfully in vsftp and then tried on that same server after the modification and it still failed.\r\n\r\nAny hints on how I can debug?\r\n\r\nNot sure how to debug it though.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/490090944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calisro","id":5018276,"node_id":"MDQ6VXNlcjUwMTgyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5018276?v=4","gravatar_id":"","url":"https://api.github.com/users/calisro","html_url":"https://github.com/calisro","followers_url":"https://api.github.com/users/calisro/followers","following_url":"https://api.github.com/users/calisro/following{/other_user}","gists_url":"https://api.github.com/users/calisro/gists{/gist_id}","starred_url":"https://api.github.com/users/calisro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calisro/subscriptions","organizations_url":"https://api.github.com/users/calisro/orgs","repos_url":"https://api.github.com/users/calisro/repos","events_url":"https://api.github.com/users/calisro/events{/privacy}","received_events_url":"https://api.github.com/users/calisro/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/490106158","html_url":"https://github.com/rclone/rclone/issues/3158#issuecomment-490106158","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3158","id":490106158,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDEwNjE1OA==","user":{"login":"calisro","id":5018276,"node_id":"MDQ6VXNlcjUwMTgyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5018276?v=4","gravatar_id":"","url":"https://api.github.com/users/calisro","html_url":"https://github.com/calisro","followers_url":"https://api.github.com/users/calisro/followers","following_url":"https://api.github.com/users/calisro/following{/other_user}","gists_url":"https://api.github.com/users/calisro/gists{/gist_id}","starred_url":"https://api.github.com/users/calisro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calisro/subscriptions","organizations_url":"https://api.github.com/users/calisro/orgs","repos_url":"https://api.github.com/users/calisro/repos","events_url":"https://api.github.com/users/calisro/events{/privacy}","received_events_url":"https://api.github.com/users/calisro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-07T14:34:08Z","updated_at":"2019-05-07T15:08:36Z","body":"```\r\n       ftpopt := &ftp.ServerOpts{\r\n                Name:           \"Rclone FTP Server\",\r\n                WelcomeMessage: \"Welcome on Rclone FTP Server\",\r\n                Factory: &DriverFactory{\r\n                        vfs: vfs.New(f, &vfsflags.Opt),\r\n                },\r\n                Hostname:     host,\r\n                Port:         portNum,\r\n                PassivePorts: opt.PassivePorts,\r\n                PublicIp: \"<REDACTED_IP_ADDRESS>\",\r\n                Auth: &Auth{\r\n                        BasicUser: opt.BasicUser,\r\n                        BasicPass: opt.BasicPass,\r\n                },\r\n                Logger: &Logger{},\r\n                //TODO implement a maximum of https://godoc.org/github.com/goftp/server#ServerOpts\r\n        }\r\n\r\n```\r\n\r\nJust for grins I simply hard-coded it to see if it worked.  It also failed to get a data connection.  \r\n\r\nIt just doesn't look like rclone is advertising that public IP.  If I do the same on the same ports with hte same passive port specifications, I get a response:\r\n```\r\nrclone\r\nroot@notebook2:~# telnet xx 822\r\nTrying xx...\r\nConnected to xx.\r\nEscape character is '^]'.\r\n220 Welcome on Rclone FTP Server\r\nUSER xx\r\n331 User name ok, password required\r\nPASS xx\r\n230 Password ok, continue\r\nPASV\r\n425 Data connection failed\r\n^C^]q\r\n\r\n\r\nvsftp\r\ntelnet> q\r\nConnection closed.\r\nroot@notebook2:~# telnet xx 822\r\nTrying xx...\r\nConnected to xx.\r\nEscape character is '^]'.\r\n220 \"\"\r\nUSER xxxx \r\n331 Please specify the password.\r\nPASS xxxx\r\n230 Login successful.\r\nPASV \r\n227 Entering Passive Mode (xx,xx,xx,xx,46,244).\r\n\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/490106158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calisro","id":5018276,"node_id":"MDQ6VXNlcjUwMTgyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5018276?v=4","gravatar_id":"","url":"https://api.github.com/users/calisro","html_url":"https://github.com/calisro","followers_url":"https://api.github.com/users/calisro/followers","following_url":"https://api.github.com/users/calisro/following{/other_user}","gists_url":"https://api.github.com/users/calisro/gists{/gist_id}","starred_url":"https://api.github.com/users/calisro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calisro/subscriptions","organizations_url":"https://api.github.com/users/calisro/orgs","repos_url":"https://api.github.com/users/calisro/repos","events_url":"https://api.github.com/users/calisro/events{/privacy}","received_events_url":"https://api.github.com/users/calisro/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/490195001","html_url":"https://github.com/rclone/rclone/issues/3158#issuecomment-490195001","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3158","id":490195001,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDE5NTAwMQ==","user":{"login":"calisro","id":5018276,"node_id":"MDQ6VXNlcjUwMTgyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5018276?v=4","gravatar_id":"","url":"https://api.github.com/users/calisro","html_url":"https://github.com/calisro","followers_url":"https://api.github.com/users/calisro/followers","following_url":"https://api.github.com/users/calisro/following{/other_user}","gists_url":"https://api.github.com/users/calisro/gists{/gist_id}","starred_url":"https://api.github.com/users/calisro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calisro/subscriptions","organizations_url":"https://api.github.com/users/calisro/orgs","repos_url":"https://api.github.com/users/calisro/repos","events_url":"https://api.github.com/users/calisro/events{/privacy}","received_events_url":"https://api.github.com/users/calisro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-07T18:22:47Z","updated_at":"2019-05-07T18:22:47Z","body":"Hmm.  Saw this:\r\n\r\nhttps://github.com/goftp/server/issues/25\r\n\r\nAdding a port to the IP address fixed this issue.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/490195001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calisro","id":5018276,"node_id":"MDQ6VXNlcjUwMTgyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5018276?v=4","gravatar_id":"","url":"https://api.github.com/users/calisro","html_url":"https://github.com/calisro","followers_url":"https://api.github.com/users/calisro/followers","following_url":"https://api.github.com/users/calisro/following{/other_user}","gists_url":"https://api.github.com/users/calisro/gists{/gist_id}","starred_url":"https://api.github.com/users/calisro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calisro/subscriptions","organizations_url":"https://api.github.com/users/calisro/orgs","repos_url":"https://api.github.com/users/calisro/repos","events_url":"https://api.github.com/users/calisro/events{/privacy}","received_events_url":"https://api.github.com/users/calisro/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2331568132,"node_id":"MDExOkNsb3NlZEV2ZW50MjMzMTU2ODEzMg==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2331568132","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"f865280afafea1f3b0edffa9302ffc9da8d90509","commit_url":"https://api.github.com/repos/rclone/rclone/commits/f865280afafea1f3b0edffa9302ffc9da8d90509","created_at":"2019-05-09T21:52:32Z","state_reason":null,"performed_via_github_app":null}]