[{"id":8498503082,"node_id":"LE_lADOAQ-n5M5eQBnOzwAAAAH6jN2q","url":"https://api.github.com/repos/rclone/rclone/issues/events/8498503082","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-02-12T15:20:08Z","label":{"name":"Remote: SFTP","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1427835092","html_url":"https://github.com/rclone/rclone/issues/6763#issuecomment-1427835092","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6763","id":1427835092,"node_id":"IC_kwDOAQ-n5M5VGwjU","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-13T12:09:46Z","updated_at":"2023-02-13T12:09:46Z","body":"I can replicate this problem locally with rclone's bandwidth limiter\r\n\r\n```\r\n$ rclone copy 100M :sftp,user=sftptest: -v --bwlimit 10M\r\n2023/02/13 11:06:18 INFO  : Starting bandwidth limiter at 10Mi Byte/s\r\n2023/02/13 11:06:18 NOTICE: Can't save config \"shell_type\" for on the fly backend \":sftp\"\r\n2023/02/13 11:06:18 NOTICE: Can't save config \"md5sum_command\" for on the fly backend \":sftp\"\r\n2023/02/13 11:06:18 NOTICE: Can't save config \"sha1sum_command\" for on the fly backend \":sftp\"\r\n2023/02/13 11:06:28 INFO  : 100M: Copied (new)\r\n2023/02/13 11:06:28 INFO  : \r\nTransferred:   \t      100 MiB / 100 MiB, 100%, 10.242 MiB/s, ETA 0s\r\nTransferred:            1 / 1, 100%\r\nElapsed time:        10.2s\r\n```\r\n\r\nWhereas\r\n\r\n```\r\n$ rclone copy 100M 'secret,remote=\":sftp,user=sftptest:secret\":' -vv  --bwlimit 10M\r\n2023/02/13 11:07:09 INFO  : Starting bandwidth limiter at 10Mi Byte/s\r\n2023/02/13 11:07:09 DEBUG : rclone: Version \"v1.62.0-beta.6731.63bf57580.s3-multipart-etag\" starting with parameters [\"rclone\" \"copy\" \"100M\" \"secret,remote=\\\":sftp,user=sftptest:secret\\\":\" \"-vv\" \"--bwlimit\" \"10M\"]\r\n2023/02/13 11:07:09 DEBUG : Creating backend with remote \"100M\"\r\n2023/02/13 11:07:09 DEBUG : Using config file from \"/home/ncw/.rclone.conf\"\r\n2023/02/13 11:07:09 DEBUG : fs cache: adding new entry for parent of \"100M\", \"/tmp\"\r\n2023/02/13 11:07:09 DEBUG : Creating backend with remote \"secret,remote=\\\":sftp,user=sftptest:secret\\\":\"\r\n2023/02/13 11:07:09 DEBUG : secret: detected overridden config - adding \"{54EvE}\" suffix to name\r\n2023/02/13 11:07:09 DEBUG : Creating backend with remote \":sftp,user=sftptest:secret\"\r\n2023/02/13 11:07:09 DEBUG : :sftp: detected overridden config - adding \"{mH8_r}\" suffix to name\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: New connection 127.0.0.1:56126->127.0.0.1:22 to \"SSH-2.0-OpenSSH_8.9p1 Ubuntu-3ubuntu0.1\"\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Running shell type detection remote command: echo ${ShellId}%ComSpec%\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Remote command result: %ComSpec%\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Shell type \"unix\" detected (set option shell_type to override)\r\n2023/02/13 11:07:09 DEBUG : Saving config \"shell_type\" in section \":sftp\" of the config file\r\n2023/02/13 11:07:09 NOTICE: Can't save config \"shell_type\" for on the fly backend \":sftp\"\r\n2023/02/13 11:07:09 DEBUG : Keeping previous permissions for config file: -rw-rw-rw-\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Relative path resolved to \"/home/sftptest/secret\"\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Using root directory \"/home/sftptest/secret\"\r\n2023/02/13 11:07:09 DEBUG : fs cache: renaming cache item \":sftp,user=sftptest:secret\" to be canonical \":sftp{mH8_r}:secret\"\r\n2023/02/13 11:07:09 DEBUG : fs cache: renaming cache item \"secret,remote=\\\":sftp,user=sftptest:secret\\\":\" to be canonical \"secret{54EvE}:\"\r\n2023/02/13 11:07:09 DEBUG : 100M: Need to transfer - File not found at Destination\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Checking default md5 hash commands\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Running remote command: md5sum\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Remote command result: d41d8cd98f00b204e9800998ecf8427e  -\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Hash command accepted\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Checking default sha1 hash commands\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Running remote command: sha1sum\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Remote command result: da39a3ee5e6b4b0d3255bfef95601890afd80709  -\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Hash command accepted\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Setting hash command for md5 to \"md5sum\" (set sha1sum_command to override)\r\n2023/02/13 11:07:09 DEBUG : Saving config \"md5sum_command\" in section \":sftp\" of the config file\r\n2023/02/13 11:07:09 NOTICE: Can't save config \"md5sum_command\" for on the fly backend \":sftp\"\r\n2023/02/13 11:07:09 DEBUG : Keeping previous permissions for config file: -rw-rw-rw-\r\n2023/02/13 11:07:09 DEBUG : sftp://sftptest@:22/secret: Setting hash command for sha1 to \"sha1sum\" (set md5sum_command to override)\r\n2023/02/13 11:07:09 DEBUG : Saving config \"sha1sum_command\" in section \":sftp\" of the config file\r\n2023/02/13 11:07:09 NOTICE: Can't save config \"sha1sum_command\" for on the fly backend \":sftp\"\r\n2023/02/13 11:07:09 DEBUG : Keeping previous permissions for config file: -rw-rw-rw-\r\n2023/02/13 11:07:24 DEBUG : sftp://sftptest@:22/secret: Shell path \"/home/sftptest/secret/iqemg5cc4fr6p6jth2mhmja8f0\"\r\n2023/02/13 11:07:24 DEBUG : sftp://sftptest@:22/secret: Running remote command: md5sum /home/sftptest/secret/iqemg5cc4fr6p6jth2mhmja8f0\r\n2023/02/13 11:07:24 DEBUG : sftp://sftptest@:22/secret: Remote command result: 909ba091791245f15246dcbadcfe1432  /home/sftptest/secret/iqemg5cc4fr6p6jth2mhmja8f0\r\n2023/02/13 11:07:24 DEBUG : iqemg5cc4fr6p6jth2mhmja8f0: Parsed hash: 909ba091791245f15246dcbadcfe1432\r\n2023/02/13 11:07:24 DEBUG : 100M: md5 = 909ba091791245f15246dcbadcfe1432 OK\r\n2023/02/13 11:07:24 INFO  : 100M: Copied (new)\r\n2023/02/13 11:07:24 INFO  : \r\nTransferred:   \t  100.024 MiB / 100.024 MiB, 100%, 6.787 MiB/s, ETA 0s\r\nTransferred:            1 / 1, 100%\r\nElapsed time:        15.2s\r\n\r\n2023/02/13 11:07:24 DEBUG : 15 go routines active\r\n2023/02/13 11:07:24 DEBUG : sftp://sftptest@:22/secret: Closing 1 unused connections\r\n```\r\n\r\nWhatever values I plug in for the bandwidth limiter, or even trying it without the bandwidth limiter I the crypt transfer is about 65% of the speed of the non crypt transfer which is what you are seeing.\r\n\r\nI discovered that lowering `--sftp-chunk-size` from the default 32k makes things run faster. At 4k it runs at 90% of the speed.\r\n\r\nI wonder whether this is a bad interaction between the crypt block size of 65568 and the chunk size...\r\n\r\nSetting `--sftp-chunk-size 32784b` (exactly half the crypt blocksize) puts it to 100% of the speed.\r\n\r\nI wonder if we are transmitting more data than we need to. This should be easy enough to measure with\r\n\r\n    sudo tcpdump -i lo -n port 22 | grep 127.0.0.1.22: | perl -lne '$size += $1 if /length (\\d+)/; print $size;'\r\n\r\nIf I put the `--sftp-chunk-size 64k` then it runs at 50% of the speed as it is as if it is transmitting two 64k blocks, one which is mostly empty.\r\n\r\nA bit of work with tcpdump and perl later, I believe we are transmitting twice as much data as we should in this case. For a 100MiB file with  `--sftp-chunk-size 64k` we transmit 200.7 MiB of data, but with  `--sftp-chunk-size 32784b` 100.7 MiB and with default chunk size 150.8 MiB. Note that 100/150.8 is 66% so the ratio we've been seeing.\r\n\r\nOK, so that is what is happening. Why is a different question. This may be a bug in the SFTP library or in rclone.\r\n\r\nTo be continued...\r\n\r\n\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1427835092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8503723675,"node_id":"LE_lADOAQ-n5M5eQBnOzwAAAAH63Iab","url":"https://api.github.com/repos/rclone/rclone/issues/events/8503723675","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-02-13T12:09:55Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-13T14:23:02Z","updated_at":"2023-02-13T14:23:02Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pkg/sftp/issues/537","repository_url":"https://api.github.com/repos/pkg/sftp","labels_url":"https://api.github.com/repos/pkg/sftp/issues/537/labels{/name}","comments_url":"https://api.github.com/repos/pkg/sftp/issues/537/comments","events_url":"https://api.github.com/repos/pkg/sftp/issues/537/events","html_url":"https://github.com/pkg/sftp/pull/537","id":1582446237,"node_id":"PR_kwDOANej4M5J2uYX","number":537,"title":"Stop ReadFromWithConcurrency sending more data than it needs to","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-02-13T14:23:02Z","updated_at":"2023-02-15T03:21:51Z","closed_at":"2023-02-13T18:01:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":14132192,"node_id":"MDEwOlJlcG9zaXRvcnkxNDEzMjE5Mg==","name":"sftp","full_name":"pkg/sftp","private":false,"owner":{"login":"pkg","id":5497984,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU0OTc5ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/5497984?v=4","gravatar_id":"","url":"https://api.github.com/users/pkg","html_url":"https://github.com/pkg","followers_url":"https://api.github.com/users/pkg/followers","following_url":"https://api.github.com/users/pkg/following{/other_user}","gists_url":"https://api.github.com/users/pkg/gists{/gist_id}","starred_url":"https://api.github.com/users/pkg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkg/subscriptions","organizations_url":"https://api.github.com/users/pkg/orgs","repos_url":"https://api.github.com/users/pkg/repos","events_url":"https://api.github.com/users/pkg/events{/privacy}","received_events_url":"https://api.github.com/users/pkg/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pkg/sftp","description":"SFTP support for the go.crypto/ssh package","fork":false,"url":"https://api.github.com/repos/pkg/sftp","forks_url":"https://api.github.com/repos/pkg/sftp/forks","keys_url":"https://api.github.com/repos/pkg/sftp/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pkg/sftp/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pkg/sftp/teams","hooks_url":"https://api.github.com/repos/pkg/sftp/hooks","issue_events_url":"https://api.github.com/repos/pkg/sftp/issues/events{/number}","events_url":"https://api.github.com/repos/pkg/sftp/events","assignees_url":"https://api.github.com/repos/pkg/sftp/assignees{/user}","branches_url":"https://api.github.com/repos/pkg/sftp/branches{/branch}","tags_url":"https://api.github.com/repos/pkg/sftp/tags","blobs_url":"https://api.github.com/repos/pkg/sftp/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pkg/sftp/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pkg/sftp/git/refs{/sha}","trees_url":"https://api.github.com/repos/pkg/sftp/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pkg/sftp/statuses/{sha}","languages_url":"https://api.github.com/repos/pkg/sftp/languages","stargazers_url":"https://api.github.com/repos/pkg/sftp/stargazers","contributors_url":"https://api.github.com/repos/pkg/sftp/contributors","subscribers_url":"https://api.github.com/repos/pkg/sftp/subscribers","subscription_url":"https://api.github.com/repos/pkg/sftp/subscription","commits_url":"https://api.github.com/repos/pkg/sftp/commits{/sha}","git_commits_url":"https://api.github.com/repos/pkg/sftp/git/commits{/sha}","comments_url":"https://api.github.com/repos/pkg/sftp/comments{/number}","issue_comment_url":"https://api.github.com/repos/pkg/sftp/issues/comments{/number}","contents_url":"https://api.github.com/repos/pkg/sftp/contents/{+path}","compare_url":"https://api.github.com/repos/pkg/sftp/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pkg/sftp/merges","archive_url":"https://api.github.com/repos/pkg/sftp/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pkg/sftp/downloads","issues_url":"https://api.github.com/repos/pkg/sftp/issues{/number}","pulls_url":"https://api.github.com/repos/pkg/sftp/pulls{/number}","milestones_url":"https://api.github.com/repos/pkg/sftp/milestones{/number}","notifications_url":"https://api.github.com/repos/pkg/sftp/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pkg/sftp/labels{/name}","releases_url":"https://api.github.com/repos/pkg/sftp/releases{/id}","deployments_url":"https://api.github.com/repos/pkg/sftp/deployments","created_at":"2013-11-05T04:36:00Z","updated_at":"2025-11-07T13:57:04Z","pushed_at":"2025-10-27T19:03:31Z","git_url":"git://github.com/pkg/sftp.git","ssh_url":"git@github.com:pkg/sftp.git","clone_url":"https://github.com/pkg/sftp.git","svn_url":"https://github.com/pkg/sftp","homepage":null,"size":2811,"stargazers_count":1623,"watchers_count":1623,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":389,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":47,"license":{"key":"bsd-2-clause","name":"BSD 2-Clause \"Simplified\" License","spdx_id":"BSD-2-Clause","url":"https://api.github.com/licenses/bsd-2-clause","node_id":"MDc6TGljZW5zZTQ="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["go","sftp"],"visibility":"public","forks":389,"open_issues":47,"watchers":1623,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/pkg/sftp/pulls/537","html_url":"https://github.com/pkg/sftp/pull/537","diff_url":"https://github.com/pkg/sftp/pull/537.diff","patch_url":"https://github.com/pkg/sftp/pull/537.patch","merged_at":"2023-02-13T18:01:17Z"},"body":"It was discovered that the ReadFrom method for uploading files in\npkg/sftp was sending more data than it needed to.\n\nThis was tracked down to the ReadFromWithConcurrency method forgetting\nto truncate the packets it was sending to the size Read.\n\nThis was giving the remote server more work to do as it was writing\nand re-writing parts of a file.\n\nSee: https://github.com/rclone/rclone/issues/6763\n","reactions":{"url":"https://api.github.com/repos/pkg/sftp/issues/537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pkg/sftp/issues/537/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":8505028324,"node_id":"REFE_lADOAQ-n5M5eQBnOzwAAAAH68G7k","url":"https://api.github.com/repos/rclone/rclone/issues/events/8505028324","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8add055936962ccb386e34376d453e8e1d8be903","commit_url":"https://api.github.com/repos/ncw/sftp/commits/8add055936962ccb386e34376d453e8e1d8be903","created_at":"2023-02-13T14:23:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1428029387","html_url":"https://github.com/rclone/rclone/issues/6763#issuecomment-1428029387","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6763","id":1428029387,"node_id":"IC_kwDOAQ-n5M5VHf_L","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-13T14:26:04Z","updated_at":"2023-02-13T14:26:04Z","body":"This turned out to be a bug in pkg/sftp which I've sent in a pull request to fix https://github.com/pkg/sftp/pull/537\r\n\r\nIn the mean time you should find setting `--sftp-chunk-size 32784b` is a reasonable work-around.\r\n\r\nWhen this gets merged upstream, I'll make a beta for you to try.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1428029387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1428236458","html_url":"https://github.com/rclone/rclone/issues/6763#issuecomment-1428236458","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6763","id":1428236458,"node_id":"IC_kwDOAQ-n5M5VISiq","user":{"login":"sidamos","id":873537,"node_id":"MDQ6VXNlcjg3MzUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/873537?v=4","gravatar_id":"","url":"https://api.github.com/users/sidamos","html_url":"https://github.com/sidamos","followers_url":"https://api.github.com/users/sidamos/followers","following_url":"https://api.github.com/users/sidamos/following{/other_user}","gists_url":"https://api.github.com/users/sidamos/gists{/gist_id}","starred_url":"https://api.github.com/users/sidamos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidamos/subscriptions","organizations_url":"https://api.github.com/users/sidamos/orgs","repos_url":"https://api.github.com/users/sidamos/repos","events_url":"https://api.github.com/users/sidamos/events{/privacy}","received_events_url":"https://api.github.com/users/sidamos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-13T16:23:04Z","updated_at":"2023-02-13T16:23:04Z","body":"Wow, very cool. I can confirm that the workaround helps. I get 4 MBytes/s with it. Thank you!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1428236458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sidamos","id":873537,"node_id":"MDQ6VXNlcjg3MzUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/873537?v=4","gravatar_id":"","url":"https://api.github.com/users/sidamos","html_url":"https://github.com/sidamos","followers_url":"https://api.github.com/users/sidamos/followers","following_url":"https://api.github.com/users/sidamos/following{/other_user}","gists_url":"https://api.github.com/users/sidamos/gists{/gist_id}","starred_url":"https://api.github.com/users/sidamos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidamos/subscriptions","organizations_url":"https://api.github.com/users/sidamos/orgs","repos_url":"https://api.github.com/users/sidamos/repos","events_url":"https://api.github.com/users/sidamos/events{/privacy}","received_events_url":"https://api.github.com/users/sidamos/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8514225269,"node_id":"REFE_lADOAQ-n5M5eQBnOzwAAAAH7fMR1","url":"https://api.github.com/repos/rclone/rclone/issues/events/8514225269","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3d4b4516c452120617fd6ce5ceb6f2da84ed7c85","commit_url":"https://api.github.com/repos/rclone/rclone/commits/3d4b4516c452120617fd6ce5ceb6f2da84ed7c85","created_at":"2023-02-14T11:17:15Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1429559170","html_url":"https://github.com/rclone/rclone/issues/6763#issuecomment-1429559170","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6763","id":1429559170,"node_id":"IC_kwDOAQ-n5M5VNVeC","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-14T11:18:55Z","updated_at":"2023-02-14T11:18:55Z","body":"Ok the upstream has merged my fix, and I've pulled it back into rclone.\r\n\r\nCan you give this a test please without a `--sftp-chunk-size` parameter.\r\n\r\nThanks\r\n\r\n[v1.62.0-beta.6731.3d4b4516c.fix-6763-sftp-slow](https://beta.rclone.org/branch/fix-6763-sftp-slow/v1.62.0-beta.6731.3d4b4516c.fix-6763-sftp-slow/) on branch [fix-6763-sftp-slow](https://github.com/rclone/rclone/tree/fix-6763-sftp-slow) (uploaded in 15-30 mins)\r\n\r\nPS Thanks for being persistent about this bug :-)\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1429559170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1429629448","html_url":"https://github.com/rclone/rclone/issues/6763#issuecomment-1429629448","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6763","id":1429629448,"node_id":"IC_kwDOAQ-n5M5VNmoI","user":{"login":"sidamos","id":873537,"node_id":"MDQ6VXNlcjg3MzUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/873537?v=4","gravatar_id":"","url":"https://api.github.com/users/sidamos","html_url":"https://github.com/sidamos","followers_url":"https://api.github.com/users/sidamos/followers","following_url":"https://api.github.com/users/sidamos/following{/other_user}","gists_url":"https://api.github.com/users/sidamos/gists{/gist_id}","starred_url":"https://api.github.com/users/sidamos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidamos/subscriptions","organizations_url":"https://api.github.com/users/sidamos/orgs","repos_url":"https://api.github.com/users/sidamos/repos","events_url":"https://api.github.com/users/sidamos/events{/privacy}","received_events_url":"https://api.github.com/users/sidamos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-14T12:00:58Z","updated_at":"2023-02-14T12:00:58Z","body":"Yes, I can confirm that the beta is fast without the --sftp-chunk-size parameter. Thank you!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1429629448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sidamos","id":873537,"node_id":"MDQ6VXNlcjg3MzUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/873537?v=4","gravatar_id":"","url":"https://api.github.com/users/sidamos","html_url":"https://github.com/sidamos","followers_url":"https://api.github.com/users/sidamos/followers","following_url":"https://api.github.com/users/sidamos/following{/other_user}","gists_url":"https://api.github.com/users/sidamos/gists{/gist_id}","starred_url":"https://api.github.com/users/sidamos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sidamos/subscriptions","organizations_url":"https://api.github.com/users/sidamos/orgs","repos_url":"https://api.github.com/users/sidamos/repos","events_url":"https://api.github.com/users/sidamos/events{/privacy}","received_events_url":"https://api.github.com/users/sidamos/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8516985801,"node_id":"CE_lADOAQ-n5M5eQBnOzwAAAAH7puPJ","url":"https://api.github.com/repos/rclone/rclone/issues/events/8516985801","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"d4d7a6a55e0768809672c58a9c1b8c426a68bfd7","commit_url":"https://api.github.com/repos/rclone/rclone/commits/d4d7a6a55e0768809672c58a9c1b8c426a68bfd7","created_at":"2023-02-14T15:48:00Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1429964778","html_url":"https://github.com/rclone/rclone/issues/6763#issuecomment-1429964778","issue_url":"https://api.github.com/repos/rclone/rclone/issues/6763","id":1429964778,"node_id":"IC_kwDOAQ-n5M5VO4fq","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-14T15:48:11Z","updated_at":"2023-02-14T15:48:11Z","body":"Thank you for testing.\r\n\r\nI've merged this to master now which means it will be in [the latest beta](https://beta.rclone.org/) in 15-30 minutes and released in v1.62","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1429964778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8594792715,"node_id":"REFE_lADOAQ-n5M5eQBnOzwAAAAIASiEL","url":"https://api.github.com/repos/rclone/rclone/issues/events/8594792715","actor":{"login":"Skylion007","id":2053727,"node_id":"MDQ6VXNlcjIwNTM3Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/2053727?v=4","gravatar_id":"","url":"https://api.github.com/users/Skylion007","html_url":"https://github.com/Skylion007","followers_url":"https://api.github.com/users/Skylion007/followers","following_url":"https://api.github.com/users/Skylion007/following{/other_user}","gists_url":"https://api.github.com/users/Skylion007/gists{/gist_id}","starred_url":"https://api.github.com/users/Skylion007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Skylion007/subscriptions","organizations_url":"https://api.github.com/users/Skylion007/orgs","repos_url":"https://api.github.com/users/Skylion007/repos","events_url":"https://api.github.com/users/Skylion007/events{/privacy}","received_events_url":"https://api.github.com/users/Skylion007/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"80c505e2918cefe8f37b6d3793d34b7f9048677d","commit_url":"https://api.github.com/repos/Skylion007/rclone/commits/80c505e2918cefe8f37b6d3793d34b7f9048677d","created_at":"2023-02-23T18:32:14Z","performed_via_github_app":null},{"id":11635038750,"node_id":"REFE_lADOAQ-n5M5eQBnOzwAAAAK1gJoe","url":"https://api.github.com/repos/rclone/rclone/issues/events/11635038750","actor":{"login":"deyarchit","id":4198802,"node_id":"MDQ6VXNlcjQxOTg4MDI=","avatar_url":"https://avatars.githubusercontent.com/u/4198802?v=4","gravatar_id":"","url":"https://api.github.com/users/deyarchit","html_url":"https://github.com/deyarchit","followers_url":"https://api.github.com/users/deyarchit/followers","following_url":"https://api.github.com/users/deyarchit/following{/other_user}","gists_url":"https://api.github.com/users/deyarchit/gists{/gist_id}","starred_url":"https://api.github.com/users/deyarchit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deyarchit/subscriptions","organizations_url":"https://api.github.com/users/deyarchit/orgs","repos_url":"https://api.github.com/users/deyarchit/repos","events_url":"https://api.github.com/users/deyarchit/events{/privacy}","received_events_url":"https://api.github.com/users/deyarchit/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d4d7a6a55e0768809672c58a9c1b8c426a68bfd7","commit_url":"https://api.github.com/repos/deyarchit/rclone/commits/d4d7a6a55e0768809672c58a9c1b8c426a68bfd7","created_at":"2024-01-30T00:42:29Z","performed_via_github_app":null}]