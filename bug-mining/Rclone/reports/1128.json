{"url":"https://api.github.com/repos/rclone/rclone/issues/6734","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/6734/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/6734/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/6734/events","html_url":"https://github.com/rclone/rclone/issues/6734","id":1564899523,"node_id":"I_kwDOAQ-n5M5dRnjD","number":6734,"title":"Provider features aren't always set for Storj and IDrive","user":{"login":"olefrost","id":82263101,"node_id":"MDQ6VXNlcjgyMjYzMTAx","avatar_url":"https://avatars.githubusercontent.com/u/82263101?v=4","gravatar_id":"","url":"https://api.github.com/users/olefrost","html_url":"https://github.com/olefrost","followers_url":"https://api.github.com/users/olefrost/followers","following_url":"https://api.github.com/users/olefrost/following{/other_user}","gists_url":"https://api.github.com/users/olefrost/gists{/gist_id}","starred_url":"https://api.github.com/users/olefrost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olefrost/subscriptions","organizations_url":"https://api.github.com/users/olefrost/orgs","repos_url":"https://api.github.com/users/olefrost/repos","events_url":"https://api.github.com/users/olefrost/events{/privacy}","received_events_url":"https://api.github.com/users/olefrost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":314138213,"node_id":"MDU6TGFiZWwzMTQxMzgyMTM=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20S3","name":"Remote: S3","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"olefrost","id":82263101,"node_id":"MDQ6VXNlcjgyMjYzMTAx","avatar_url":"https://avatars.githubusercontent.com/u/82263101?v=4","gravatar_id":"","url":"https://api.github.com/users/olefrost","html_url":"https://github.com/olefrost","followers_url":"https://api.github.com/users/olefrost/followers","following_url":"https://api.github.com/users/olefrost/following{/other_user}","gists_url":"https://api.github.com/users/olefrost/gists{/gist_id}","starred_url":"https://api.github.com/users/olefrost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olefrost/subscriptions","organizations_url":"https://api.github.com/users/olefrost/orgs","repos_url":"https://api.github.com/users/olefrost/repos","events_url":"https://api.github.com/users/olefrost/events{/privacy}","received_events_url":"https://api.github.com/users/olefrost/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"olefrost","id":82263101,"node_id":"MDQ6VXNlcjgyMjYzMTAx","avatar_url":"https://avatars.githubusercontent.com/u/82263101?v=4","gravatar_id":"","url":"https://api.github.com/users/olefrost","html_url":"https://github.com/olefrost","followers_url":"https://api.github.com/users/olefrost/followers","following_url":"https://api.github.com/users/olefrost/following{/other_user}","gists_url":"https://api.github.com/users/olefrost/gists{/gist_id}","starred_url":"https://api.github.com/users/olefrost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olefrost/subscriptions","organizations_url":"https://api.github.com/users/olefrost/orgs","repos_url":"https://api.github.com/users/olefrost/repos","events_url":"https://api.github.com/users/olefrost/events{/privacy}","received_events_url":"https://api.github.com/users/olefrost/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":4,"created_at":"2023-01-31T19:44:27Z","updated_at":"2023-02-02T18:12:02Z","closed_at":"2023-02-02T18:12:02Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### The associated forum post URL from `https://forum.rclone.org`\r\n\r\nNone, discovered while debugging/reading code to understand how `rclone cat` handles duplicate names in S3.\r\n\r\n#### What is the problem you are having with rclone?\r\n\r\nIt seems like the code to set the provider specific features for Stroj and IDrive are placed to late in NewFS and therefore sometimes the values will not be set due to conditional returns earlier in the code.\r\n\r\nI haven't tested, but looks like these lines:\r\nhttps://github.com/rclone/rclone/blob/8e63a08d7f51f1c34f8f6e1ab72f8bbb5ebea544/backend/s3/s3.go#L3006-L3012\r\n\r\nShould be moved up just before the `if f.rootBucket ...` statement here:\r\n\r\nhttps://github.com/rclone/rclone/blob/8e63a08d7f51f1c34f8f6e1ab72f8bbb5ebea544/backend/s3/s3.go#L2988-L3015\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n\r\nLatest master (1.62.0-DEV)\r\n\r\n<!--- Please keep the note below for others who read your bug report. -->\r\n\r\n#### How to use GitHub\r\n\r\n* Please use the üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to show that you are affected by the same issue.\r\n* Please don't comment if you have no relevant information to add. It's just extra noise for everyone subscribed to this issue.\r\n* Subscribe to receive notifications on status change and new comments.\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/6734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/6734/timeline","performed_via_github_app":null,"state_reason":"completed"}