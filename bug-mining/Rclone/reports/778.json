{"url":"https://api.github.com/repos/rclone/rclone/issues/3979","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/3979/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/3979/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/3979/events","html_url":"https://github.com/rclone/rclone/issues/3979","id":566755559,"node_id":"MDU6SXNzdWU1NjY3NTU1NTk=","number":3979,"title":"Extend --drive-stop-on-upload-limit to respond to teamDriveFileLimitExceeded","user":{"login":"BinsonBuzz","id":24946073,"node_id":"MDQ6VXNlcjI0OTQ2MDcz","avatar_url":"https://avatars.githubusercontent.com/u/24946073?v=4","gravatar_id":"","url":"https://api.github.com/users/BinsonBuzz","html_url":"https://github.com/BinsonBuzz","followers_url":"https://api.github.com/users/BinsonBuzz/followers","following_url":"https://api.github.com/users/BinsonBuzz/following{/other_user}","gists_url":"https://api.github.com/users/BinsonBuzz/gists{/gist_id}","starred_url":"https://api.github.com/users/BinsonBuzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BinsonBuzz/subscriptions","organizations_url":"https://api.github.com/users/BinsonBuzz/orgs","repos_url":"https://api.github.com/users/BinsonBuzz/repos","events_url":"https://api.github.com/users/BinsonBuzz/events{/privacy}","received_events_url":"https://api.github.com/users/BinsonBuzz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399007,"node_id":"MDU6TGFiZWw4NjM5OTAwNw==","url":"https://api.github.com/repos/rclone/rclone/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null},{"id":306062764,"node_id":"MDU6TGFiZWwzMDYwNjI3NjQ=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Drive","name":"Remote: Drive","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/39","html_url":"https://github.com/rclone/rclone/milestone/39","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/39/labels","id":4787007,"node_id":"MDk6TWlsZXN0b25lNDc4NzAwNw==","number":39,"title":"v1.52","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":35,"state":"closed","created_at":"2019-10-26T17:18:37Z","updated_at":"2020-05-29T14:52:38Z","due_on":"2020-03-14T07:00:00Z","closed_at":"2020-05-29T14:52:38Z"},"comments":13,"created_at":"2020-02-18T09:24:41Z","updated_at":"2020-11-11T19:47:56Z","closed_at":"2020-03-26T16:19:51Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What is your current rclone version (output from `rclone version`)?\r\n1.51\r\n\r\n#### What problem are you are trying to solve?\r\nreclone move/copy/sync not responding to` teamDriveFileLimitExceeded`\r\n\r\n\r\n#### How do you think rclone should be changed to solve that?\r\nExtend the new --drive-stop-on-upload-limit command to stop jobs if response from Google is `teamDriveFileLimitExceeded`\r\n\r\n####### Detail #####################\r\nI stupidly ended up trying to backup lots of small files e.g. plex metadata to my backup mount, which pushed me over the 400k file limit.  My script is now stuck trying to copy the remaining files, even though it can't.\r\n\r\nGoogle is spitting out these error messages:\r\n```\r\n2020/02/18 09:15:29 ERROR : appdata/dockers/plex/Library/Application Support/Plex Media Server/Cache/PhotoTranscoder/04/04863423c1ec2f17a12569fab0348e75d8806e29.jpg: Failed to copy: googleapi: Error 403: The file limit for this shared drive has been exceeded., teamDriveFileLimitExceeded\r\n2020/02/18 09:15:29 ERROR : appdata/dockers/lazylibrarian/cache/XMLCache/7/6/76d5f769b45e3365c7de31e44c4c49f5.xml: Failed to copy: failed to make directory: googleapi: Error 403: The file limit for this shared drive has been exceeded., teamDriveFileLimitExceeded\r\n```\r\n\r\nThese seem to be the only 2 variations.  I think `--drive-stop-on-upload-limit` could be extended to cover this scenario, as I think it works by looking for certain syntax in Google's responses.\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/3979/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/3979/timeline","performed_via_github_app":null,"state_reason":"completed"}