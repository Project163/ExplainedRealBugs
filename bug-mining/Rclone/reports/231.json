{"url":"https://api.github.com/repos/rclone/rclone/issues/860","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/860/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/860/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/860/events","html_url":"https://github.com/rclone/rclone/issues/860","id":187643484,"node_id":"MDU6SXNzdWUxODc2NDM0ODQ=","number":860,"title":"CheckResponse includes trailing linefeed; typo in text","user":{"login":"diamondsw","id":49737,"node_id":"MDQ6VXNlcjQ5NzM3","avatar_url":"https://avatars.githubusercontent.com/u/49737?v=4","gravatar_id":"","url":"https://api.github.com/users/diamondsw","html_url":"https://github.com/diamondsw","followers_url":"https://api.github.com/users/diamondsw/followers","following_url":"https://api.github.com/users/diamondsw/following{/other_user}","gists_url":"https://api.github.com/users/diamondsw/gists{/gist_id}","starred_url":"https://api.github.com/users/diamondsw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diamondsw/subscriptions","organizations_url":"https://api.github.com/users/diamondsw/orgs","repos_url":"https://api.github.com/users/diamondsw/repos","events_url":"https://api.github.com/users/diamondsw/events{/privacy}","received_events_url":"https://api.github.com/users/diamondsw/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/22","html_url":"https://github.com/rclone/rclone/milestone/22","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/22/labels","id":1962877,"node_id":"MDk6TWlsZXN0b25lMTk2Mjg3Nw==","number":22,"title":"v1.35","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":23,"state":"closed","created_at":"2016-08-25T12:45:49Z","updated_at":"2017-01-03T21:05:16Z","due_on":"2016-12-11T08:00:00Z","closed_at":"2017-01-03T21:05:16Z"},"comments":8,"created_at":"2016-11-07T07:36:08Z","updated_at":"2016-11-30T14:41:00Z","closed_at":"2016-11-07T10:24:50Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"> What is your rclone version (eg output from `rclone -V`)\r\n1.33 (although issue verified in current code on github)\r\n> Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\nMac OS X 10.12.1 (64-bit), Debian 8 (64-bit, up-to-date)\r\n> Which cloud storage system are you using? (eg Google Drive)\r\nAmazon Cloud Drive\r\n> The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\nrclone sync /mydir amazon:/Backup/mydir (irrelevant, really)\r\n> A log from the command with the `-v` flag (eg output from `rclone -v copy /tmp remote:tmp`)\r\nA bit difficult to obtain in my case; see below.\r\n\r\nIn client.go/func CheckResponse, there are two issues:\r\n1) A minor misspelling - line 188 says \"reponse\" rather than \"response\"\r\n2) When obtaining the response on line 181 (\"errBody = string(data)\"), it includes a trailing linefeed from the HTTP response. TrimSuffix should do the trick. I'd submit a patch, but I'm not familiar with Go and how it represents linefeeds and similar escape characters.\r\n\r\nWhy does this matter? I'm writing a simple wrapper with Perl to take the verbose output from rclone and make it a bit more useful to me - keep messages I care about, discard those I don't, etc. Unfortunately when processing incoming text on a line-by-line basis, a stray linebreak really gums up the works. This affects the output in verbose mode, and a given line ends up split across multiple lines of output, and is encountered on separate iterations of the loop. I've put some hackish stuff in there for now to cache the line and reassemble it on the next run through the loop to maintain my internal context, but it seems like it would be simpler to just fix the root cause.\r\n\r\nSince I have a wrapper making massive changes to the output text, providing a log isn't terribly feasible, but I think the bug and solution is pretty clear without it.","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/860/timeline","performed_via_github_app":null,"state_reason":"completed"}