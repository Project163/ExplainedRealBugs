{"url":"https://api.github.com/repos/rclone/rclone/issues/5936","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/5936/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/5936/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/5936/events","html_url":"https://github.com/rclone/rclone/issues/5936","id":1111210210,"node_id":"I_kwDOAQ-n5M5CO7ji","number":5936,"title":"opendrive copy throws error despite 200 OK ","user":{"login":"scott-grimes","id":6396416,"node_id":"MDQ6VXNlcjYzOTY0MTY=","avatar_url":"https://avatars.githubusercontent.com/u/6396416?v=4","gravatar_id":"","url":"https://api.github.com/users/scott-grimes","html_url":"https://github.com/scott-grimes","followers_url":"https://api.github.com/users/scott-grimes/followers","following_url":"https://api.github.com/users/scott-grimes/following{/other_user}","gists_url":"https://api.github.com/users/scott-grimes/gists{/gist_id}","starred_url":"https://api.github.com/users/scott-grimes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scott-grimes/subscriptions","organizations_url":"https://api.github.com/users/scott-grimes/orgs","repos_url":"https://api.github.com/users/scott-grimes/repos","events_url":"https://api.github.com/users/scott-grimes/events{/privacy}","received_events_url":"https://api.github.com/users/scott-grimes/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1089747051,"node_id":"MDU6TGFiZWwxMDg5NzQ3MDUx","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20OpenDrive","name":"Remote: OpenDrive","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/47","html_url":"https://github.com/rclone/rclone/milestone/47","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/47/labels","id":7313007,"node_id":"MI_kwDOAQ-n5M4Ab5Zv","number":47,"title":"v1.59","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":18,"state":"closed","created_at":"2021-11-01T17:02:19Z","updated_at":"2022-07-09T20:30:36Z","due_on":"2022-07-08T07:00:00Z","closed_at":"2022-07-09T20:30:36Z"},"comments":5,"created_at":"2022-01-22T03:20:07Z","updated_at":"2022-06-17T15:48:06Z","closed_at":"2022-06-17T15:48:06Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### The associated forum post URL from `https://forum.rclone.org`\r\nN/A\r\n\r\n#### What is the problem you are having with rclone?\r\nUnable to copy files to opendrive (paid personal) using a basic config which wraps opendrive via crypt and chunker\r\n\r\n```\r\n[opendrivebase]\r\ntype = opendrive\r\nusername = <email>\r\npassword = <obfuscated_password>\r\n\r\n[opendrivechunked]\r\ntype = chunker\r\nremote = opendrivecrypt:\r\nchunk_size = 500Mi\r\n\r\n[opendrivecrypt]\r\ntype = crypt\r\nremote = opendrivebase:data\r\npassword = <obfuscated_password>\r\npassword2 = <obfuscated_salt>\r\n```\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\nrclone v1.57.0\r\n\r\n#### Which OS you are using and how many bits (e.g. Windows 7, 64 bit)\r\nMac - darwin 12.0.1 (64 bit)\r\n\r\n#### Which cloud storage system are you using? (e.g. Google Drive)\r\nopendrive\r\n\r\n#### The command you were trying to run (e.g. `rclone copy /tmp remote:tmp`)\r\nrclone copy ./subdir opendrivechunked:myfolder/subdir -vv --timeout 15m --log-file /Users/myuser/mylog.log --dump-headers --transfers 1\r\n\r\nI have attempted to fiddle with a few other flags to no avail\r\n\r\n#### A log from the command with the `-vv` flag (e.g. output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\nNo obvious errors here, I can see the requests working fine in the verbose logs and the headers. abbreviated version is:\r\n\r\n```\r\nPOST /api/v1/session/login.json\r\nGET /api/v1/folder/list.json/<session_id>/0\r\n<a few random GETs over root folders>\r\nGET /api/v1/folder/itembyname.json/<session_id>/<account_id>?name=<unique_id_d> # a metadata file? id appears only once in logs\r\nGET /api/v1/folder/itembyname.json/<session_id>/<account_id>?name=<unique_id_e> # file?\r\nGET /api/v1/folder/itembyname.json/<session_id>/<account_id>?name=<unique_id_e> # file?\r\nPOST /api/v1/upload/create_file.json\r\nPOST /api/v1/upload/open_file_upload.json\r\nPOST /api/v1/upload/upload_file_chunk.json\r\n... bunch more chunks uploaded ...\r\nPOST /api/v1/upload/upload_file_chunk.json\r\nPOST /api/v1/upload/close_file_upload.json\r\nPUT /api/v1/file/filesettings.json\r\nPOST /api/v1/file/access.json\r\nGET /api/v1/folder/itembyname.json/<session_id>/<account_id>?name=<unique_id_e> # file?\r\n```\r\nAll requests return 200. Even the final `GET /api/v1/folder/itembyname.json/<session_id>/<account_id>?name=<unique_id_e>` returns `HTTP/1.1 200 OK` but rsync still throws the following error: \r\n\r\n```\r\nERROR : myfile.dat: Failed to copy: object not found\r\n```\r\n\r\nIs there maybe a gap between when the close_file_upload succeeds and the itembyname will correctly register? The 200 leads me to believe that it found the new object though...\r\n\r\nAfter the failure rclone continues to move on to the next file, repeating uploading until all 3 retries are completed at which point  \r\n\r\n\r\nI've attempted this with files smaller than my chunk (set to 500Mi), and with files bigger. Same results. close_file_upload -> filesettings -> access -> itembyname all return a 200, but then ERROR\r\n\r\n```\r\n2022/01/21 22:15:02 ERROR : myfile.dat: Failed to copy: object not found\r\n2022/01/21 22:15:02 ERROR : Attempt 1/3 failed with 2 errors and: object not found\r\n```\r\n\r\nfull logs at https://pastebin.com/HQZv6gpg\r\n\r\nI will (rarely) get a pacer error, with the next attempt succeeding fine so I don't think it's a rate-limiting problem\r\n\r\n#### How to use GitHub\r\n\r\n* Please use the üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to show that you are affected by the same issue.\r\n* Please don't comment if you have no relevant information to add. It's just extra noise for everyone subscribed to this issue.\r\n* Subscribe to receive notifications on status change and new comments.\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/5936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/5936/timeline","performed_via_github_app":null,"state_reason":"completed"}