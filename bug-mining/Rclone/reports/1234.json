{"url":"https://api.github.com/repos/rclone/rclone/issues/5696","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/5696/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/5696/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/5696/events","html_url":"https://github.com/rclone/rclone/issues/5696","id":1021493427,"node_id":"I_kwDOAQ-n5M484sCz","number":5696,"title":"bisync: fix handling of Google Docs","user":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399007,"node_id":"MDU6TGFiZWw4NjM5OTAwNw==","url":"https://api.github.com/repos/rclone/rclone/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null},{"id":306062764,"node_id":"MDU6TGFiZWwzMDYwNjI3NjQ=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Drive","name":"Remote: Drive","color":"fbca04","default":false,"description":null},{"id":3427818774,"node_id":"LA_kwDOAQ-n5M7MUF0W","url":"https://api.github.com/repos/rclone/rclone/labels/bisync","name":"bisync","color":"1D76DB","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/11","html_url":"https://github.com/rclone/rclone/milestone/11","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/11/labels","id":1480382,"node_id":"MDk6TWlsZXN0b25lMTQ4MDM4Mg==","number":11,"title":"Soon","description":"Issues which are a good idea but haven't been assigned a specific release yet.","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":75,"closed_issues":94,"state":"open","created_at":"2016-01-02T12:56:46Z","updated_at":"2025-10-12T21:14:16Z","due_on":null,"closed_at":null},"comments":13,"created_at":"2021-10-08T21:47:37Z","updated_at":"2024-01-20T19:50:13Z","closed_at":"2024-01-20T19:50:13Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Snippet from https://github.com/cjnaz/rclonesync-V2/issues/1\r\n\r\nThe problem comes up if we attempt to upload a modified exported document, with the same name,\r\nback to Google Drive: \"Failed to copy: can't update a google document\". Similarly, deleting the\r\nlocal copy and then rclone syncing local to Drive: results in \"Couldn't delete: can't delete a google\r\ndocument\".\r\n\r\nProposed behavior:\r\n\r\nA new --export-google-docs switch will export (copy to Local) every found Google document as\r\n_export.. The final rclone sync will put a copy of the exported document on Google\r\nDrive as well. The date-stamp on the file will match the original Google document.\r\n\r\nLater, with --export-google-docs, If the native Google document timestamp is newer, and the\r\nexisting exported file is unchanged (relative to the prior sync), then the document will\r\nbe exported again, replacing the current _export file.\r\n\r\nIf the exported file is changed (newer) then it will be synchronized as usual/normal, but the\r\nnative Google document cannot be updated. Effectively, the file version and the native version\r\nare out of sync.\r\n\r\nIf the exported file had previously been changed, and now the native Google document is changed,\r\nthen --export-google-docs will blast/replace the file version. User beware. There is no reliable\r\nway to detect that the file version and the native Google document version have both been\r\nmodified. The user is advised to rename the modified file version if he/she plans to subsequently\r\nedit the native Google document via the web interface.\r\n\r\nIf --export-google-docs switch is not set then all Google document files (as indicated by\r\nfile size -1) will be ignored. Previously exported documents (which are now regular files)\r\nwill be synchronized as usual.\r\n\r\n### Other comments\r\n\r\nAs `@ncw` noted at https://github.com/rclone/rclone/pull/5164#discussion_r688914855\r\nwe should probably consider other things with `size < 0` (eg Google Photos) which will have that too.\r\n\r\nAs @cjnaz noted in his [commit review](https://github.com/rclone/rclone/commit/935559fbe9cf83b9b755036916b267c4c152378a#commitcomment-57724387), the log message `Ignoring incorrect line: \"- -1 - - ... GoogleDoc.docx` is rather vague and should be improved. The commented dump from [bisync.md](https://github.com/rclone/rclone/blob/f9ada52400307c813c1aa2be222e75c7a087e0d1/docs/content/bisync.md#google-doc-files) was:\r\n```\r\n2021/05/11 08:23:15 INFO  : Synching Path1 \"/path/to/local/tree/base/\" with Path2 \"GDrive:\"\r\n2021/05/11 08:23:15 INFO  : ...path2.lst-new: Ignoring incorrect line: \"- -1 - - 2018-07-29T08:49:30.136000000+0000 GoogleDoc.docx\"\r\n2021/05/11 08:23:15 INFO  : Bisync successful\r\n```\r\n\r\n### References\r\n\r\n- https://github.com/cjnaz/rclonesync-V2/issues/1\r\n- comment by @cjnaz w.r.t google docs in https://github.com/rclone/rclone/files/7314114/bisync.md\r\n- https://github.com/rclone/rclone/pull/2479\r\n- https://github.com/rclone/rclone/pull/2411\r\n- https://github.com/rclone/rclone/issues/2893\r\n- https://github.com/rclone/rclone/issues/3986\r\n\r\n### How to use GitHub\r\n\r\n* Please use the ðŸ‘ [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to show that you are affected by the same issue.\r\n* Please don't comment if you have no relevant information to add. It's just extra noise for everyone subscribed to this issue.\r\n* Subscribe to receive notifications on status change and new comments.\r\n","closed_by":{"login":"nielash","id":31582349,"node_id":"MDQ6VXNlcjMxNTgyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/31582349?v=4","gravatar_id":"","url":"https://api.github.com/users/nielash","html_url":"https://github.com/nielash","followers_url":"https://api.github.com/users/nielash/followers","following_url":"https://api.github.com/users/nielash/following{/other_user}","gists_url":"https://api.github.com/users/nielash/gists{/gist_id}","starred_url":"https://api.github.com/users/nielash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nielash/subscriptions","organizations_url":"https://api.github.com/users/nielash/orgs","repos_url":"https://api.github.com/users/nielash/repos","events_url":"https://api.github.com/users/nielash/events{/privacy}","received_events_url":"https://api.github.com/users/nielash/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/5696/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/5696/timeline","performed_via_github_app":null,"state_reason":"completed"}