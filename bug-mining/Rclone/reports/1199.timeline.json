[{"id":10407375903,"node_id":"LE_lADOAQ-n5M5xWy71zwAAAAJsU_Qf","url":"https://api.github.com/repos/rclone/rclone/issues/events/10407375903","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-09-19T08:27:28Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":10407375919,"node_id":"LE_lADOAQ-n5M5xWy71zwAAAAJsU_Qv","url":"https://api.github.com/repos/rclone/rclone/issues/events/10407375919","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-09-19T08:27:28Z","label":{"name":"Remote: One Drive","color":"fbca04"},"performed_via_github_app":null},{"id":10409107789,"node_id":"REFE_lADOAQ-n5M5xWy71zwAAAAJsbmFN","url":"https://api.github.com/repos/rclone/rclone/issues/events/10409107789","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"bfd439849a6582a751cd109dc3757bb64b797c92","commit_url":"https://api.github.com/repos/rclone/rclone/commits/bfd439849a6582a751cd109dc3757bb64b797c92","created_at":"2023-09-19T11:11:38Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1725304558","html_url":"https://github.com/rclone/rclone/issues/7317#issuecomment-1725304558","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7317","id":1725304558,"node_id":"IC_kwDOAQ-n5M5m1g7u","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-19T11:17:06Z","updated_at":"2023-09-19T11:17:06Z","body":"This is a great idea - ListR improves the experience massively on tps limited backends.\r\n\r\nIf we were to implement this for onedrive then calling `vfs/refresh` will fill the cache up using ListR (now that #7318 is (already) done!) and the polling mechanism already part of onedrive will keep it topped up which will pretty much bring it into line with microsoft best practices.\r\n\r\nI had a go at a proof of concept for this.\r\n\r\nUnfortunately the API doesn't work on anything except the root so it is inefficient to use `onedrive:dir`.\r\n\r\nCan you give this a go? If you could time these two commands that would be very useful. For my onedrive it was actually quicker without the ListR but I don't have very many files.\r\n\r\n    rclone lsf -R onedrive: > 1\r\n    rclone lsf -R --disable ListR onedrive: > 0\r\n\r\nUnder unix I'd do this\r\n\r\n    time rclone lsf -R onedrive: | sort > 1\r\n    time rclone lsf -R --disable ListR onedrive: | sort > 0\r\n\r\nIf all wen't well `0` and `1` should have the same contents. In my tests I found that\r\n\r\n- some folders are duplicated\r\n- shared folders are missing\r\n\r\nUse `-vv --dump bodies` to see what it is doing.\r\n\r\n[v1.65.0-beta.7379.bfd439849.fix-7317-onedrive-listr](https://beta.rclone.org/branch/fix-7317-onedrive-listr/v1.65.0-beta.7379.bfd439849.fix-7317-onedrive-listr/) on branch [fix-7317-onedrive-listr](https://github.com/rclone/rclone/tree/fix-7317-onedrive-listr) (uploaded in 15-30 mins)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1725304558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1725804073","html_url":"https://github.com/rclone/rclone/issues/7317#issuecomment-1725804073","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7317","id":1725804073,"node_id":"IC_kwDOAQ-n5M5m3a4p","user":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-19T14:52:39Z","updated_at":"2023-09-19T14:53:46Z","body":"Did a quick test, I stopped 2nd command after it was clear time difference was significant:\r\n\r\n```\r\n# time ./rclone lsf -R OneDrive1: | sort > 1\r\n\r\nreal    6m32.227s\r\nuser    1m52.446s\r\nsys     0m3.788s\r\n\r\n# time ./rclone lsf -R --disable ListR OneDrive1: | sort > 0\r\n\r\nreal    23m46.052s\r\nuser    0m48.653s\r\nsys     0m8.144s\r\n```\r\n\r\nI'm going to test another (smaller) OneDrive I got.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1725804073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1725937233","html_url":"https://github.com/rclone/rclone/issues/7317#issuecomment-1725937233","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7317","id":1725937233,"node_id":"IC_kwDOAQ-n5M5m37ZR","user":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-19T15:53:44Z","updated_at":"2023-09-19T16:02:31Z","body":"It really takes around the same time on the smaller OneDrive:\r\n```\r\n# time ./rclone lsf -R OneD: --log-level DEBUG --log-file ListR.log --dump-bodies > ListR.txt\r\nreal    1m48.017s\r\nuser    0m9.352s\r\nsys     0m1.794s\r\n# time ./rclone lsf -R --disable ListR OneD: --log-level DEBUG --log-file NoListR.log --dump-bodies > NoListR.txt\r\nreal    1m22.970s\r\nuser    0m21.867s\r\nsys     0m4.114s\r\n```\r\n\r\nYet debug logs are half the size for new implementation:\r\n```\r\n# ls -lah\r\n-rw-r-----.  1 root     root     113M Sep 19 10:34 ListR.log\r\n-rw-r--r--.  1 root     root     8.5M Sep 19 10:34 ListR.txt\r\n-rw-r-----.  1 root     root     214M Sep 19 10:39 NoListR.log\r\n-rw-r--r--.  1 root     root     8.3M Sep 19 10:39 NoListR.txt\r\n```\r\n\r\nUpon sorting the folders, I do also see lot of duplicate folders in the new method. I do not have any shared files in my OneDrive so can't talk about those and if they are missing or not. I'm going to try and search if there's any documentation about this behavior and report back. This can also be a OneDrive API error.\r\n\r\nFrom https://learn.microsoft.com/en-us/graph/api/driveitem-delta?view=graph-rest-1.0&tabs=http\r\n\r\nSeems this is expected behavior:\r\n\r\n> The same item may appear more than once in a delta feed, for various reasons. You should use the last occurrence you see.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1725937233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10425388611,"node_id":"REFE_lADOAQ-n5M5xWy71zwAAAAJtZs5D","url":"https://api.github.com/repos/rclone/rclone/issues/events/10425388611","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c8d5b159f2f5ad5e8f34715b038622987debe510","commit_url":"https://api.github.com/repos/rclone/rclone/commits/c8d5b159f2f5ad5e8f34715b038622987debe510","created_at":"2023-09-20T16:21:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728063861","html_url":"https://github.com/rclone/rclone/issues/7317#issuecomment-1728063861","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7317","id":1728063861,"node_id":"IC_kwDOAQ-n5M5nACl1","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-20T16:21:51Z","updated_at":"2023-09-20T16:21:51Z","body":"Your tests look encouraging.\r\n\r\nI fixed the duplicates and the shared items and made it pass the integration tests, so I think it is probably ready now.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728063861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728067053","html_url":"https://github.com/rclone/rclone/issues/7317#issuecomment-1728067053","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7317","id":1728067053,"node_id":"IC_kwDOAQ-n5M5nADXt","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-20T16:23:54Z","updated_at":"2023-09-20T16:23:54Z","body":"Pressed enter too soon!\r\n\r\nHere is the new test binary - can you give it a go? Also if you could see if it works with vfs/refresh too that would be good.\r\n\r\n[v1.65.0-beta.7380.c8d5b159f.fix-7317-onedrive-listr](https://beta.rclone.org/branch/fix-7317-onedrive-listr/v1.65.0-beta.7380.c8d5b159f.fix-7317-onedrive-listr/) on branch [fix-7317-onedrive-listr](https://github.com/rclone/rclone/tree/fix-7317-onedrive-listr) (uploaded in 15-30 mins)\r\n\r\nI have a slight reservation about merging this in that ListR only works at the root of the onedrive. If you use it not at the root then it recurses from the root and tosses all the data that is not under the directory you asked for. So it will be correct, I'm just a bit concerned about efficiency.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728067053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728341187","html_url":"https://github.com/rclone/rclone/issues/7317#issuecomment-1728341187","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7317","id":1728341187,"node_id":"IC_kwDOAQ-n5M5nBGTD","user":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-20T19:54:31Z","updated_at":"2023-09-20T19:54:31Z","body":"Thanks Nick, I'll check the binaries and play around. I'll do some time comparison loading subfolders. Will report back most likely tomorrow. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728341187/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728473469","html_url":"https://github.com/rclone/rclone/issues/7317#issuecomment-1728473469","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7317","id":1728473469,"node_id":"IC_kwDOAQ-n5M5nBml9","user":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-20T21:50:18Z","updated_at":"2023-09-20T21:52:05Z","body":"I think something is not working correctly.\r\n\r\nMounted with RC and ran the following command:\r\n\r\n```\r\n# rclone rc vfs/refresh recursive=true --rc-addr 127.0.0.1:5573 _async=true\r\n{\r\n        \"jobid\": 1\r\n}\r\n```\r\n\r\nAfter a couple of minutes I checked the status of the job:\r\n```\r\n# rclone rc job/status --json '{ \"jobid\":1 }' --rc-addr 127.0.0.1:5573\r\n{\r\n        \"duration\": 0,\r\n        \"endTime\": \"0001-01-01T00:00:00Z\",\r\n        \"error\": \"\",\r\n        \"finished\": false,\r\n        \"group\": \"job/1\",\r\n        \"id\": 1,\r\n        \"output\": null,\r\n        \"startTime\": \"2023-09-20T16:45:23.63038475-05:00\",\r\n        \"success\": false\r\n}\r\n\r\n```\r\n\r\nI'm logging with debug flag just to see what happened but don't see much activity going on:\r\n\r\n```\r\n2023/09/20 16:44:35 DEBUG : Encrypted drive '1USB2:': Mounting on \"/mnt/tmp\"\r\n2023/09/20 16:44:35 DEBUG : : Root:\r\n2023/09/20 16:44:35 DEBUG : : >Root: node=/, err=<nil>\r\n2023/09/20 16:44:36 DEBUG : /: Attr:\r\n2023/09/20 16:44:36 DEBUG : /: >Attr: attr=valid=1s ino=0 size=0 mode=drwxr-xr-x, err=<nil>\r\n2023/09/20 16:44:36 DEBUG : : Statfs:\r\n2023/09/20 16:44:36 DEBUG : : >Statfs: stat={Blocks:6553337856 Bfree:1087363410 Bavail:1087363410 Files:1000000000 Ffree:1000000000 Bsize:4096 Namelen:255 Frsize:4096}, err=<nil>\r\n2023/09/20 16:44:50 DEBUG : OneDrive root 'USB2': Checking for changes on remote\r\n2023/09/20 16:45:05 DEBUG : OneDrive root 'USB2': Checking for changes on remote\r\n2023/09/20 16:45:20 DEBUG : OneDrive root 'USB2': Checking for changes on remote\r\n2023/09/20 16:45:23 DEBUG : rc: \"vfs/refresh\": with parameters map[_async:true recursive:true]\r\n2023/09/20 16:45:23 DEBUG : rc: \"vfs/refresh\": reply map[jobid:1]: <nil>\r\n2023/09/20 16:45:23 DEBUG : : Reading directory tree\r\n2023/09/20 16:45:35 DEBUG : OneDrive root 'USB2': Checking for changes on remote\r\n2023/09/20 16:45:35 INFO  : vfs cache: cleaned: objects 0 (was 0) in use 0, to upload 0, uploading 0, total size 0 (was 0)\r\n2023/09/20 16:45:50 DEBUG : OneDrive root 'USB2': Checking for changes on remote\r\n2023/09/20 16:46:05 DEBUG : OneDrive root 'USB2': Checking for changes on remote\r\n2023/09/20 16:46:06 DEBUG : rc: \"job/status\": with parameters map[jobid:1]\r\n2023/09/20 16:46:06 DEBUG : rc: \"job/status\": reply map[duration:0 endTime:0001-01-01T00:00:00Z error: finished:false group:job/1 id:1 output:<nil> startTime:2023-09-20T16:45:23.63038475-05:00 success:false]: <nil>\r\n2023/09/20 16:46:20 DEBUG : OneDrive root 'USB2': Checking for changes on remote\r\n2023/09/20 16:46:35 DEBUG : OneDrive root 'USB2': Checking for changes on remote\r\n2023/09/20 16:46:35 INFO  : vfs cache: cleaned: objects 0 (was 0) in use 0, to upload 0, uploading 0, total size 0 (was 0)\r\n```\r\n\r\nThis is my mount command, it's exactly the same I use regularly:\r\n\r\n```\r\n/home/rclonebeta/rclone mount 1USB2: /mnt/tmp \\\r\n--allow-other \\\r\n--cache-dir /mnt/External/cache2/ \\\r\n--dir-cache-time 5000h \\\r\n--disable-http2 \\\r\n--log-file /mnt/External/1USB2beta.txt \\\r\n--log-level DEBUG \\\r\n--onedrive-no-versions \\\r\n--poll-interval 15s \\\r\n--rc \\\r\n--rc-addr 127.0.0.1:5573 \\\r\n--uid 1000 \\\r\n--use-mmap \\\r\n--user-agent \"ISV|rclone|rclone/v1.63.1\" \\\r\n--tpslimit  3 \\\r\n--tpslimit-burst 0 \\\r\n--vfs-cache-max-age 9999h \\\r\n--vfs-cache-max-size 2500G \\\r\n--vfs-cache-mode full \\\r\n--vfs-fast-fingerprint \\\r\n--vfs-write-back 1h &\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728473469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728907441","html_url":"https://github.com/rclone/rclone/issues/7317#issuecomment-1728907441","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7317","id":1728907441,"node_id":"IC_kwDOAQ-n5M5nDQix","user":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-21T06:03:07Z","updated_at":"2023-09-21T06:03:07Z","body":"Never mind, tested again with more patience and seems to be working:\r\n\r\n```\r\n# rclone rc vfs/refresh recursive=true --rc-addr 127.0.0.1:5573 _async=true\r\n{\r\n        \"jobid\": 1\r\n}\r\n# rclone rc job/status --json '{ \"jobid\":1 }' --rc-addr 127.0.0.1:5573\r\n{\r\n        \"duration\": 96.656083187,\r\n        \"endTime\": \"2023-09-21T01:00:35.116286286-05:00\",\r\n        \"error\": \"\",\r\n        \"finished\": true,\r\n        \"group\": \"job/1\",\r\n        \"id\": 1,\r\n        \"output\": {\r\n                \"result\": {\r\n                        \"\": \"OK\"\r\n                }\r\n        },\r\n        \"startTime\": \"2023-09-21T00:58:58.460203037-05:00\",\r\n        \"success\": true\r\n}\r\n```\r\nFrom Logs:\r\n\r\n`2023/09/21 01:00:35 DEBUG : : Reading directory tree done in 1m36.655803435s`\r\n\r\nI will retry with my bigger mounts and report again.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728907441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728923679","html_url":"https://github.com/rclone/rclone/issues/7317#issuecomment-1728923679","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7317","id":1728923679,"node_id":"IC_kwDOAQ-n5M5nDUgf","user":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-21T06:20:39Z","updated_at":"2023-09-21T06:20:39Z","body":"OMG This is an amazing difference, I got rid of the TPSLimit and TPSLimit-Burst to test, and see how fast it might get throttled, but it never did.\r\n\r\n`2023/09/21 01:11:09 DEBUG : : Reading directory tree done in 5m44.957874479s`\r\n\r\nAs as sidenote on previous code it would take close to 1 hour to do a whole vfs/refresh of this mount with multiple throttling events. 5 minutes is just an amazing difference.\r\n\r\nWas going to try the old method again to compare, but after 2 minutes got the following:\r\n\r\n```\r\n2023/09/21 01:16:34 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/09/21 01:16:34 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/09/21 01:16:34 DEBUG : HTTP RESPONSE (req 0xc002167500)\r\n2023/09/21 01:16:34 DEBUG : HTTP/1.1 429\r\nTransfer-Encoding: chunked\r\nCache-Control: private\r\nClient-Request-Id: xxx\r\nContent-Type: application/json\r\nDate: Thu, 21 Sep 2023 06:16:34 GMT\r\nRequest-Id: xxx\r\nRetry-After: 15\r\nStrict-Transport-Security: max-age=31536000\r\nVary: Accept-Encoding\r\nX-Ms-Ags-Diagnostic: {\"ServerInfo\":{\"DataCenter\":\"South Central US\",\"Slice\":\"E\",\"Ring\":\"5\",\"ScaleUnit\":\"002\",\"RoleInstance\":\"xxxx\"}}\r\n\r\n127\r\n{\"error\":{\"code\":\"activityLimitReached\",\"message\":\"The request has been throttled\",\"innerError\":{\"code\":\"throttledRequest\",\"innerError\":{\"code\":\"quota\"},\"date\":\"2023-09-21T06:16:34\",\"request-id\":\"xxxx\",\"client-request-id\":\"xxxx\"}}}\r\n\r\n```\r\n\r\nUsing delta the whole warmup went without a single throttle event. I imagine as Microsoft expects the whole file structure to be read. This is a huge boost","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1728923679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jcastilloalonso","id":37427692,"node_id":"MDQ6VXNlcjM3NDI3Njky","avatar_url":"https://avatars.githubusercontent.com/u/37427692?v=4","gravatar_id":"","url":"https://api.github.com/users/jcastilloalonso","html_url":"https://github.com/jcastilloalonso","followers_url":"https://api.github.com/users/jcastilloalonso/followers","following_url":"https://api.github.com/users/jcastilloalonso/following{/other_user}","gists_url":"https://api.github.com/users/jcastilloalonso/gists{/gist_id}","starred_url":"https://api.github.com/users/jcastilloalonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcastilloalonso/subscriptions","organizations_url":"https://api.github.com/users/jcastilloalonso/orgs","repos_url":"https://api.github.com/users/jcastilloalonso/repos","events_url":"https://api.github.com/users/jcastilloalonso/events{/privacy}","received_events_url":"https://api.github.com/users/jcastilloalonso/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10524518188,"node_id":"CE_lADOAQ-n5M5xWy71zwAAAAJzT2cs","url":"https://api.github.com/repos/rclone/rclone/issues/events/10524518188","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"b8591b230dbabc24e8089776ec953fcc14f464d3","commit_url":"https://api.github.com/repos/rclone/rclone/commits/b8591b230dbabc24e8089776ec953fcc14f464d3","created_at":"2023-10-02T10:35:20Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1742777375","html_url":"https://github.com/rclone/rclone/issues/7317#issuecomment-1742777375","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7317","id":1742777375,"node_id":"IC_kwDOAQ-n5M5n4Kwf","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-02T10:35:24Z","updated_at":"2023-10-02T10:35:24Z","body":"I've merged this to master now which means it will be in [the latest beta](https://beta.rclone.org/) in 15-30 minutes and released in v1.65\r\n\r\nThank you all for testing :-) ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1742777375/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-14T12:19:14Z","updated_at":"2023-10-14T12:19:14Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/7362","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/7362/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/7362/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/7362/events","html_url":"https://github.com/rclone/rclone/issues/7362","id":1939478046,"node_id":"I_kwDOAQ-n5M5zmhYe","number":7362,"title":"`rclone size` broken on onedrive with v1.65.0-beta","user":{"login":"kapitainsky","id":15635386,"node_id":"MDQ6VXNlcjE1NjM1Mzg2","avatar_url":"https://avatars.githubusercontent.com/u/15635386?v=4","gravatar_id":"","url":"https://api.github.com/users/kapitainsky","html_url":"https://github.com/kapitainsky","followers_url":"https://api.github.com/users/kapitainsky/followers","following_url":"https://api.github.com/users/kapitainsky/following{/other_user}","gists_url":"https://api.github.com/users/kapitainsky/gists{/gist_id}","starred_url":"https://api.github.com/users/kapitainsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kapitainsky/subscriptions","organizations_url":"https://api.github.com/users/kapitainsky/orgs","repos_url":"https://api.github.com/users/kapitainsky/repos","events_url":"https://api.github.com/users/kapitainsky/events{/privacy}","received_events_url":"https://api.github.com/users/kapitainsky/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":306063114,"node_id":"MDU6TGFiZWwzMDYwNjMxMTQ=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20One%20Drive","name":"Remote: One Drive","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2023-10-12T08:26:08Z","updated_at":"2023-11-26T21:23:40Z","closed_at":"2023-11-26T16:08:29Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Tests below with sample folder containing only 1 file. But the same with any other folder content.\r\n\r\nRemote:\r\n```\r\n[onedrive]\r\ntype = onedrive\r\nclient_id = XXX\r\nclient_secret = XXX\r\ndrive_id = XXX\r\ndrive_type = personal\r\ntoken = XXX\r\n```\r\n\r\nWorks as expected with `rclone v1.64.0`\r\n\r\n```\r\n$ rclone version\r\nrclone v1.64.0\r\n- os/version: darwin 14.0 (64 bit)\r\n- os/kernel: 23.0.0 (x86_64)\r\n- os/type: darwin\r\n- os/arch: amd64\r\n- go/version: go1.21.1\r\n- go/linking: dynamic\r\n- go/tags: cmount\r\n\r\n$ time rclone size onedrive:Test -vv\r\n2023/10/12 09:30:44 DEBUG : rclone: Version \"v1.64.0\" starting with parameters [\"rclone\" \"size\" \"onedrive:Test\" \"-vv\"]\r\n2023/10/12 09:30:44 DEBUG : Creating backend with remote \"onedrive:Test\"\r\n2023/10/12 09:30:44 DEBUG : Using config file from \"/Users/kptsky/.config/rclone/rclone.conf\"\r\nTotal objects: 1 (1)\r\nTotal size: 228 B (228 Byte)\r\n2023/10/12 09:30:46 DEBUG : 8 go routines active\r\n\r\nreal\t0m1.514s\r\nuser\t0m0.120s\r\nsys\t0m0.103s\r\n```\r\n\r\ndoes not produce any results with latest beta - simply hangs forever without any error in debug log\r\n\r\n```\r\n$ ~/Temp/rclone-beta/rclone version\r\nrclone v1.65.0-beta.7427.2de084944\r\n- os/version: darwin 14.0 (64 bit)\r\n- os/kernel: 23.0.0 (x86_64)\r\n- os/type: darwin\r\n- os/arch: amd64\r\n- go/version: go1.21.2\r\n- go/linking: dynamic\r\n- go/tags: cmount\r\n\r\n$ time ~/Temp/rclone-beta/rclone size onedrive:Test -vv\r\n2023/10/12 09:28:58 DEBUG : rclone: Version \"v1.65.0-beta.7427.2de084944\" starting with parameters [\"/Users/kptsky/Temp/rclone-beta/rclone\" \"size\" \"onedrive:Test\" \"-vv\"]\r\n2023/10/12 09:28:58 DEBUG : Creating backend with remote \"onedrive:Test\"\r\n2023/10/12 09:28:58 DEBUG : Using config file from \"/Users/kptsky/.config/rclone/rclone.conf\"\r\n```","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/7362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/7362/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1826821617","html_url":"https://github.com/rclone/rclone/issues/7317#issuecomment-1826821617","issue_url":"https://api.github.com/repos/rclone/rclone/issues/7317","id":1826821617,"node_id":"IC_kwDOAQ-n5M5s4xXx","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-26T16:01:21Z","updated_at":"2023-11-26T16:01:21Z","body":"Due to #7362 I have decided that this feature needs to be optionally enabled.\r\n\r\nI have added a `--onedrive-delta` flag as suggested which will default to off. So you will need to enable this feature with `delta = true` in the config file or `--onedrive-delta` on the command line.\r\n\r\nThis will go into 1.65","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1826821617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11635039650,"node_id":"REFE_lADOAQ-n5M5xWy71zwAAAAK1gJ2i","url":"https://api.github.com/repos/rclone/rclone/issues/events/11635039650","actor":{"login":"deyarchit","id":4198802,"node_id":"MDQ6VXNlcjQxOTg4MDI=","avatar_url":"https://avatars.githubusercontent.com/u/4198802?v=4","gravatar_id":"","url":"https://api.github.com/users/deyarchit","html_url":"https://github.com/deyarchit","followers_url":"https://api.github.com/users/deyarchit/followers","following_url":"https://api.github.com/users/deyarchit/following{/other_user}","gists_url":"https://api.github.com/users/deyarchit/gists{/gist_id}","starred_url":"https://api.github.com/users/deyarchit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deyarchit/subscriptions","organizations_url":"https://api.github.com/users/deyarchit/orgs","repos_url":"https://api.github.com/users/deyarchit/repos","events_url":"https://api.github.com/users/deyarchit/events{/privacy}","received_events_url":"https://api.github.com/users/deyarchit/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b8591b230dbabc24e8089776ec953fcc14f464d3","commit_url":"https://api.github.com/repos/deyarchit/rclone/commits/b8591b230dbabc24e8089776ec953fcc14f464d3","created_at":"2024-01-30T00:42:38Z","performed_via_github_app":null}]