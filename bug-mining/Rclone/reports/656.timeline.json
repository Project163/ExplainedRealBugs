[{"id":1719758344,"node_id":"MDEyOkxhYmVsZWRFdmVudDE3MTk3NTgzNDQ=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1719758344","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-07-06T08:31:35Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":1719758347,"node_id":"MDEyOkxhYmVsZWRFdmVudDE3MTk3NTgzNDc=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1719758347","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-07-06T08:31:35Z","label":{"name":"Remote: WebDAV","color":"fbca04"},"performed_via_github_app":null},{"id":1719758430,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE3MTk3NTg0MzA=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1719758430","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-07-06T08:31:38Z","milestone":{"title":"v1.43"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/417930846","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-417930846","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":417930846,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNzkzMDg0Ng==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-02T13:27:25Z","updated_at":"2018-09-02T13:27:25Z","body":"I haven't had time to work on this... Would anyone like to help?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/417930846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1822249353,"node_id":"MDEyOkxhYmVsZWRFdmVudDE4MjIyNDkzNTM=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1822249353","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-09-02T13:27:32Z","label":{"name":"help wanted","color":"c2e0c6"},"performed_via_github_app":null},{"id":1822249383,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MTgyMjI0OTM4Mw==","url":"https://api.github.com/repos/rclone/rclone/issues/events/1822249383","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2018-09-02T13:27:38Z","milestone":{"title":"v1.43"},"performed_via_github_app":null},{"id":1822249384,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE4MjIyNDkzODQ=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1822249384","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-09-02T13:27:38Z","milestone":{"title":"Help Wanted"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/418045123","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-418045123","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":418045123,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODA0NTEyMw==","user":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-03T08:45:21Z","updated_at":"2018-09-03T08:46:09Z","body":"I've been exploring a related project: [oidc-agent](https://github.com/indigo-dc/oidc-agent).  This handles obtaining the access-token, so the application doesn't need to worry about this.\r\n\r\nThe core concept is that there is a user has an `oidc-agent` daemon process running (much like `ssh-agent`).  For the available OPs, there is a refresh token is stored encrypted on disk.  The `oidc-agent` software provides a mechanism for achieving this.\r\n\r\nThe decrypted refresh token be uploaded into the `oidc-agent`'s memory, using the `oidc-add` command (again, much like `ssh-agent` and `ssh-add` command).  Once the refresh token is in the agent's memory, client applications may request an access token.  The `oidc-agent` either returns the cached value, or fetches a new access token from the OP, using the refresh token.\r\n\r\nThere is an example application, `oidc-token`, that simply requests an access token from the agent.  This may be used directly, but applications can also request an access token directly from the agent using some IPC.\r\n\r\nHere's a trivial example of using `oidc-token` to authorize a curl REST call (against dCache's user introspection endpoint), using an access token from the `Unity-HDF` OP.\r\n\r\n    curl -H \"Authorization: bearer $(oidc-token Unity-HDF)\" https://prometheus.desy.de:3880/api/v1/user\r\n\r\nAn option for adding OIDC support would be to extend the newly added arbitrary bearer token support in rclone, so that a command may be specified instead.  Running the command should yield the bearer token as the first line on stdout.\r\n\r\nThere are (at least) two ways that this could work:\r\n  1. rclone could run the command before every WebDAV command, relying on the application to cache the bearer token between requests (as appropriate),\r\n  2.  rclone could fetch a new bearer token for the first WebDAV command and then subsequently if it receives a 401 response.\r\n\r\nI guess such a change (especially 1.) would be relatively easy to implement.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/418045123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/418138716","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-418138716","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":418138716,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODEzODcxNg==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-03T14:57:54Z","updated_at":"2018-09-03T14:57:54Z","body":"The oidc agent looks interesting.  That would be pretty easy to integrate into rclone I think.  Your option 2 would probably be the right one.\r\n\r\nThis could be a parameter (which could go in the config file) `--webdav-bearer-token-command \"oidc-token UnityHDF\"`.  So rclone would run the command \"oidc-token UnityHDF\" to get back a bearer token.\r\n\r\nIs that what you were thinking of?\r\n\r\n...\r\n\r\nI found a go client library https://github.com/coreos/go-oidc\r\n\r\nWhich appears to do all the right things, though since I haven't studied OIDC in depth I'm not sure exactly where all the bits fit!  What do you think of that library?\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/418138716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/418151963","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-418151963","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":418151963,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODE1MTk2Mw==","user":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-03T16:00:05Z","updated_at":"2018-09-03T16:00:05Z","body":"Yes, that sounds good -- especially about going for option 2.  The `--webdav-bearer-token-command` (and corresponding configuration) is exactly what I hoped for, when looking at the oidc-agent project: a relatively simple way to obtain the bearer token dynamically.\r\n\r\nFrom what I can tell, the go-oidc project looks reasonable, but I haven't investigated it thoroughly (just flicked through the code).  I guess it is following the Authorization Code Flow, where the browser provides a token that the client then uses (along with its secret) to fetch the access token and id tokens.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/418151963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1825237865,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE4MjUyMzc4NjU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1825237865","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b7c6e4b0028b8cb47ba1c4398fa5b03a062adc96","commit_url":"https://api.github.com/repos/rclone/rclone/commits/b7c6e4b0028b8cb47ba1c4398fa5b03a062adc96","created_at":"2018-09-04T13:12:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/418362606","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-418362606","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":418362606,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODM2MjYwNg==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-04T13:14:59Z","updated_at":"2018-09-04T13:14:59Z","body":"OK I've made a proof of concept here\r\n\r\nhttps://beta.rclone.org/branch/v1.43-031-gb7c6e4b0-fix-2380-oidc-beta/ (uploaded in 15-30 mins)\r\n\r\nYou can use the --webdav-bearer-token-command  or put \"bearer_token_command\" in the config file (it is in the advanced section of the configurator).\r\n\r\nIt doesn't refresh any tokens yet, and has no documentation yet!\r\n\r\nLet me know what you think!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/418362606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/418651454","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-418651454","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":418651454,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODY1MTQ1NA==","user":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-05T08:50:10Z","updated_at":"2018-09-05T08:50:10Z","body":"Looks good!\r\n\r\nUsing this beta version, I was able to interact with dCache using the access token from oidc-agent.  I tested the `ls` `lsl` `cat` `copy` and `sync` commands, all seemed to work fine.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/418651454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/420170934","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-420170934","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":420170934,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMDE3MDkzNA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-11T07:10:03Z","updated_at":"2018-09-11T07:10:03Z","body":"That is a good start :-) Thanks for testing.  I'll have a think about refreshing the tokens next.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/420170934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/422715387","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-422715387","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":422715387,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMjcxNTM4Nw==","user":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-19T08:52:47Z","updated_at":"2018-09-19T08:52:47Z","body":"I've demoed the beta version of rclone to a few different groups, and people have been very impressed.\r\n\r\nAlthough rclone will ultimately do the refresh itself, is there a way a user can force rclone to fetch a fresh access-token in the beta version?  Perhaps by deleting a file somewhere?\r\n\r\nI'd like to give this to some \"early adopter\" users to do some more extensive tests of using rclone with OpenID-Connect (via oidc-agent).  In our case, the access tokens are good for an hour, so I think a manual process would be acceptable for limited, basic testing.\r\n\r\nAlso, can I do anything to help out here?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/422715387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1855257747,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQxODU1MjU3NzQ3","url":"https://api.github.com/repos/rclone/rclone/issues/events/1855257747","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2018-09-19T14:42:03Z","assignee":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":1855301991,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE4NTUzMDE5OTE=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1855301991","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"35601ecf8c089a6fc1600abee6d77cb9b8d4a1db","commit_url":"https://api.github.com/repos/rclone/rclone/commits/35601ecf8c089a6fc1600abee6d77cb9b8d4a1db","created_at":"2018-09-19T14:57:23Z","performed_via_github_app":null},{"id":1855301996,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE4NTUzMDE5OTY=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1855301996","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b2855cd84f5a412522ca416bc8620eb1d28ae895","commit_url":"https://api.github.com/repos/rclone/rclone/commits/b2855cd84f5a412522ca416bc8620eb1d28ae895","created_at":"2018-09-19T14:57:23Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/422838151","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-422838151","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":422838151,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMjgzODE1MQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-19T15:03:10Z","updated_at":"2018-09-19T15:03:10Z","body":"> I've demoed the beta version of rclone to a few different groups, and people have been very impressed.\r\n\r\nGreat :-)\r\n\r\n> Although rclone will ultimately do the refresh itself, is there a way a user can force rclone to fetch a fresh access-token in the beta version? Perhaps by deleting a file somewhere?\r\n\r\nNot at the moment.\r\n \r\n> I'd like to give this to some \"early adopter\" users to do some more extensive tests of using rclone with OpenID-Connect (via oidc-agent). In our case, the access tokens are good for an hour, so I think a manual process would be acceptable for limited, basic testing.\r\n> \r\n> Also, can I do anything to help out here?\r\n\r\nDo you happen to know which http access code is generated when the token expires?  I would expect it to be 401 but if you could check that would be very helpful :-)\r\n\r\nHere is a version which will refresh the token on a 401 error.  If it gets a 401 error it will refresh the token and try the operation again.  This should work reasonably well, but it won't be quite seamless on upload as rclone will have to retry the sync to upload missed files.  Ideally rclone would know when the token expires and refresh it a bit before that.\r\n\r\nhttps://beta.rclone.org/branch/v1.43-093-gb2855cd8-fix-2380-oidc-beta/ (uploaded in 15-30 mins)\r\n\r\nCan you give that a test please? You can view the headers of the http transactions with `-vv --dump headers` if you want to check which HTTP transactions go out.\r\n\r\nAlso if you could write a paragraph for me to stick in the docs about using `--webdav-bearer-token-command`  or the config equivalent and oidc-agent that would be really helpful!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/422838151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/423920524","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-423920524","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":423920524,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMzkyMDUyNA==","user":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-24T09:33:48Z","updated_at":"2018-09-24T09:33:48Z","body":"> Do you happen to know which http access code is generated when the token expires? I would expect it  to be 401 but if you could check that would be very helpful :-)\r\n\r\nI don't believe this is standardised, but dCache will return 401.\r\n\r\n> [...] Ideally rclone would know when the token expires and refresh it a bit before that.\r\n\r\nYes, unfortunately this information is currently unavailable through the oidc-agent API.  It could be that OP simply doesn't provide this information, so we just don't know.\r\n\r\n> Can you give that a test please?\r\n\r\nSure, will do.\r\n\r\n> write a paragraph\r\n\r\nSure.  Would you like this as a pull-request, or via some other mechanism?\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/423920524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/424014602","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-424014602","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":424014602,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDAxNDYwMg==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-24T15:22:32Z","updated_at":"2018-09-24T15:22:32Z","body":"> > Do you happen to know which http access code is generated when the token expires? I would expect it  to be 401 but if you could check that would be very helpful :-)\r\n> \r\n> I don't believe this is standardised, but dCache will return 401.\r\n\r\nGreat\r\n\r\n> > [...] Ideally rclone would know when the token expires and refresh it a bit before that.\r\n> \r\n> Yes, unfortunately this information is currently unavailable through the oidc-agent API. It could be that OP simply doesn't provide this information, so we just don't know.\r\n\r\nWell refresh on 401 will work OK - it is how the swift backend works.\r\n \r\n> > Can you give that a test please?\r\n> \r\n> Sure, will do.\r\n\r\nThanks\r\n \r\n> > write a paragraph\r\n> \r\n> Sure. Would you like this as a pull-request, or via some other mechanism?\r\n\r\nWhatever you fancy.  If you wanted to write some docs and paste them here that would be fine.\r\n\r\nOr alternatively a PR with docs in [webdav.md](https://github.com/ncw/rclone/blob/master/docs/content/webdav.md)\r\n\r\nThank you\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/424014602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/436950324","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-436950324","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":436950324,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjk1MDMyNA==","user":{"login":"zachmann","id":18414445,"node_id":"MDQ6VXNlcjE4NDE0NDQ1","avatar_url":"https://avatars.githubusercontent.com/u/18414445?v=4","gravatar_id":"","url":"https://api.github.com/users/zachmann","html_url":"https://github.com/zachmann","followers_url":"https://api.github.com/users/zachmann/followers","following_url":"https://api.github.com/users/zachmann/following{/other_user}","gists_url":"https://api.github.com/users/zachmann/gists{/gist_id}","starred_url":"https://api.github.com/users/zachmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zachmann/subscriptions","organizations_url":"https://api.github.com/users/zachmann/orgs","repos_url":"https://api.github.com/users/zachmann/repos","events_url":"https://api.github.com/users/zachmann/events{/privacy}","received_events_url":"https://api.github.com/users/zachmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-08T10:39:23Z","updated_at":"2018-11-08T10:39:23Z","body":"I'm the developer of oidc-agent and want to share some thoughts.\r\n\r\n> > [...] Ideally rclone would know when the token expires and refresh it a bit before that.\r\n> \r\n> Yes, unfortunately this information is currently unavailable through the oidc-agent API. It could be that OP simply doesn't provide this information, so we just don't know.\r\n\r\nWe will release oidc-agent v2.0.0 tomorrow. In the new version we included the possibility to get the time when the token expires. But as Paul said, it is possible that the OP doesn't provide the information. (In that case oidc-agent will return 0). So refreshing on 401 seems reasonable. But when the OP provides that information, it can be retrieved from oidc-agent and used.\r\n\r\nCalling oidc-token to get the access token is only one way how an access token can be retrieved from oidc-agent. We also provide an easy to use C-API and an application can also communicate through IPC with oidc-agent. However, this might mean higher development effort on your side. \r\nIt's also fine to use oidc-token. Just wanted to make sure you know that there are also other ways.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/436950324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zachmann","id":18414445,"node_id":"MDQ6VXNlcjE4NDE0NDQ1","avatar_url":"https://avatars.githubusercontent.com/u/18414445?v=4","gravatar_id":"","url":"https://api.github.com/users/zachmann","html_url":"https://github.com/zachmann","followers_url":"https://api.github.com/users/zachmann/followers","following_url":"https://api.github.com/users/zachmann/following{/other_user}","gists_url":"https://api.github.com/users/zachmann/gists{/gist_id}","starred_url":"https://api.github.com/users/zachmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zachmann/subscriptions","organizations_url":"https://api.github.com/users/zachmann/orgs","repos_url":"https://api.github.com/users/zachmann/repos","events_url":"https://api.github.com/users/zachmann/events{/privacy}","received_events_url":"https://api.github.com/users/zachmann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2500174444,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI1MDAxNzQ0NDQ=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2500174444","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c642531a1ef5e8391f3588080d85513f1401b542","commit_url":"https://api.github.com/repos/rclone/rclone/commits/c642531a1ef5e8391f3588080d85513f1401b542","created_at":"2019-07-22T15:06:23Z","performed_via_github_app":null},{"id":2500174455,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI1MDAxNzQ0NTU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2500174455","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1f1ab179a669e484524ed5245f4c217cc68ed2a7","commit_url":"https://api.github.com/repos/rclone/rclone/commits/1f1ab179a669e484524ed5245f4c217cc68ed2a7","created_at":"2019-07-22T15:06:23Z","performed_via_github_app":null},{"id":2500671417,"node_id":"MDExOkNsb3NlZEV2ZW50MjUwMDY3MTQxNw==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2500671417","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"c642531a1ef5e8391f3588080d85513f1401b542","commit_url":"https://api.github.com/repos/rclone/rclone/commits/c642531a1ef5e8391f3588080d85513f1401b542","created_at":"2019-07-22T18:17:46Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/513896672","html_url":"https://github.com/rclone/rclone/issues/2380#issuecomment-513896672","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2380","id":513896672,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzg5NjY3Mg==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T18:18:33Z","updated_at":"2019-07-22T18:18:33Z","body":"I've merged this to master now which means it will be in [the latest beta](https://beta.rclone.org) in 15-30 mins and released in v1.49.\r\n\r\nThank you for your docs @paulmillar - I've included those too :-)\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/513896672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2500673484,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUwMDY3MzQ4NA==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2500673484","actor":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-22T18:18:33Z","performed_via_github_app":null},{"id":2500673487,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MDA2NzM0ODc=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2500673487","actor":{"login":"paulmillar","id":533081,"node_id":"MDQ6VXNlcjUzMzA4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/533081?v=4","gravatar_id":"","url":"https://api.github.com/users/paulmillar","html_url":"https://github.com/paulmillar","followers_url":"https://api.github.com/users/paulmillar/followers","following_url":"https://api.github.com/users/paulmillar/following{/other_user}","gists_url":"https://api.github.com/users/paulmillar/gists{/gist_id}","starred_url":"https://api.github.com/users/paulmillar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulmillar/subscriptions","organizations_url":"https://api.github.com/users/paulmillar/orgs","repos_url":"https://api.github.com/users/paulmillar/repos","events_url":"https://api.github.com/users/paulmillar/events{/privacy}","received_events_url":"https://api.github.com/users/paulmillar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-22T18:18:33Z","performed_via_github_app":null}]