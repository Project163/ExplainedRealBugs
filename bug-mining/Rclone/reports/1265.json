{"url":"https://api.github.com/repos/rclone/rclone/issues/7689","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/7689/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/7689/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/7689/events","html_url":"https://github.com/rclone/rclone/issues/7689","id":2205032010,"node_id":"I_kwDOAQ-n5M6Dbh5K","number":7689,"title":"rclone copy creating empty directories it didn't create before","user":{"login":"YukiUnHappy","id":45060919,"node_id":"MDQ6VXNlcjQ1MDYwOTE5","avatar_url":"https://avatars.githubusercontent.com/u/45060919?v=4","gravatar_id":"","url":"https://api.github.com/users/YukiUnHappy","html_url":"https://github.com/YukiUnHappy","followers_url":"https://api.github.com/users/YukiUnHappy/followers","following_url":"https://api.github.com/users/YukiUnHappy/following{/other_user}","gists_url":"https://api.github.com/users/YukiUnHappy/gists{/gist_id}","starred_url":"https://api.github.com/users/YukiUnHappy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YukiUnHappy/subscriptions","organizations_url":"https://api.github.com/users/YukiUnHappy/orgs","repos_url":"https://api.github.com/users/YukiUnHappy/repos","events_url":"https://api.github.com/users/YukiUnHappy/events{/privacy}","received_events_url":"https://api.github.com/users/YukiUnHappy/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1710413418,"node_id":"MDU6TGFiZWwxNzEwNDEzNDE4","url":"https://api.github.com/repos/rclone/rclone/labels/Point%20Release%20Candidate","name":"Point Release Candidate","color":"b60205","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/55","html_url":"https://github.com/rclone/rclone/milestone/55","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/55/labels","id":10370070,"node_id":"MI_kwDOAQ-n5M4AnjwW","number":55,"title":"v1.67","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":27,"state":"closed","created_at":"2024-01-03T12:08:00Z","updated_at":"2024-10-17T09:00:34Z","due_on":"2024-04-21T07:00:00Z","closed_at":"2024-07-01T16:37:48Z"},"comments":18,"created_at":"2024-03-25T06:54:03Z","updated_at":"2024-05-03T11:32:26Z","closed_at":"2024-05-03T11:31:08Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What is the problem you are having with rclone?\r\n\r\n`Rclone will now sync directory modification times if the backend supports it`\r\nThat's a cool new feature, but I think it shouldn't be enabled by default, or it should ignore folders by default where no files need to be transferred.\r\nIn the previous version, I could simply `copy` to the remote within the folder where I needed to upload files, but now I have to remove the other folders in that folder that have no files first, otherwise these empty folders will also be created on the remote due to the sync modification time.\r\nConversely, if I only need to copy specific files from the remote to the local (using `--include`), but other irrelevant folders under that path on the remote will also be created on my local machine with the original structure. This did not exist in previous versions and is a bit annoying.\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n\r\nrclone v1.66.0\r\n- os/version: debian 10.0 (64 bit)\r\n- os/kernel: 5.14.9 (x86_64)\r\n- os/type: linux\r\n- os/arch: amd64\r\n- go/version: go1.22.1\r\n- go/linking: static\r\n- go/tags: none\r\n\r\n#### Which OS you are using and how many bits (e.g. Windows 7, 64 bit)\r\n\r\nThe information has already been mentioned above.\r\n\r\n#### Which cloud storage system are you using? (e.g. Google Drive)\r\n\r\nThis is not related to a specific backend.\r\n\r\n#### The command you were trying to run (e.g. `rclone copy /tmp remote:tmp`)\r\n\r\n`rclone copy -vv Source Remote --include E.txt`\r\n\r\n#### A log from the command with the `-vv` flag (e.g. output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\n```shell\r\nroot@localhost:~/TEST# tree\r\n.\r\n‚îî‚îÄ‚îÄ Source\r\n    ‚îú‚îÄ‚îÄ A\r\n    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ D\r\n    ‚îú‚îÄ‚îÄ B\r\n    ‚îú‚îÄ‚îÄ C\r\n    ‚îî‚îÄ‚îÄ E.txt\r\n\r\n5 directories, 1 file\r\nroot@localhost:~/TEST# rclone copy -vv Source Remote --include E.txt\r\n2024/03/24 23:51:52 DEBUG : rclone: Version \"v1.66.0\" starting with parameters [\"rclone\" \"copy\" \"-vv\" \"Source\" \"Remote\" \"--include\" \"E.txt\"]\r\n2024/03/24 23:51:52 DEBUG : Creating backend with remote \"Source\"\r\n2024/03/24 23:51:52 DEBUG : Using config file from \"/root/.config/rclone/rclone.conf\"\r\n2024/03/24 23:51:52 DEBUG : fs cache: renaming cache item \"Source\" to be canonical \"/root/TEST/Source\"\r\n2024/03/24 23:51:52 DEBUG : Creating backend with remote \"Remote\"\r\n2024/03/24 23:51:52 DEBUG : fs cache: renaming cache item \"Remote\" to be canonical \"/root/TEST/Remote\"\r\n2024/03/24 23:51:52 DEBUG : A: Making directory with metadata\r\n2024/03/24 23:51:52 INFO  : A: Made directory with metadata (mtime=2024-03-24T23:50:07.378243503-07:00)\r\n2024/03/24 23:51:52 DEBUG : Added delayed dir = \"A\", newDst=A\r\n2024/03/24 23:51:52 DEBUG : B: Making directory with metadata\r\n2024/03/24 23:51:52 INFO  : B: Made directory with metadata (mtime=2024-03-24T23:50:01.04917523-07:00)\r\n2024/03/24 23:51:52 DEBUG : Added delayed dir = \"B\", newDst=B\r\n2024/03/24 23:51:52 DEBUG : C: Making directory with metadata\r\n2024/03/24 23:51:52 INFO  : C: Made directory with metadata (mtime=2024-03-24T23:50:03.246198928-07:00)\r\n2024/03/24 23:51:52 DEBUG : Added delayed dir = \"C\", newDst=C\r\n2024/03/24 23:51:52 DEBUG : E.txt: Need to transfer - File not found at Destination\r\n2024/03/24 23:51:52 DEBUG : A/D: Making directory with metadata\r\n2024/03/24 23:51:52 INFO  : A/D: Made directory with metadata (mtime=2024-03-24T23:50:07.378243503-07:00)\r\n2024/03/24 23:51:52 DEBUG : Added delayed dir = \"A/D\", newDst=A/D\r\n2024/03/24 23:51:52 DEBUG : Local file system at /root/TEST/Remote: Waiting for checks to finish\r\n2024/03/24 23:51:52 DEBUG : E.txt: md5 = d8e8fca2dc0f896fd7cb4cb0031ba249 OK\r\n2024/03/24 23:51:52 DEBUG : E.txt.cihekil4.partial: renamed to: E.txt\r\n2024/03/24 23:51:52 INFO  : E.txt: Copied (new)\r\n2024/03/24 23:51:52 DEBUG : Local file system at /root/TEST/Remote: Waiting for transfers to finish\r\n2024/03/24 23:51:52 INFO  : A/D: Set directory modification time (using SetModTime)\r\n2024/03/24 23:51:52 INFO  : C: Set directory modification time (using SetModTime)\r\n2024/03/24 23:51:52 INFO  : A: Set directory modification time (using SetModTime)\r\n2024/03/24 23:51:52 INFO  : B: Set directory modification time (using SetModTime)\r\n2024/03/24 23:51:52 INFO  :\r\nTransferred:              5 B / 5 B, 100%, 0 B/s, ETA -\r\nTransferred:            1 / 1, 100%\r\nElapsed time:         0.0s\r\n\r\n2024/03/24 23:51:52 DEBUG : 7 go routines active\r\nroot@localhost:~/TEST# tree\r\n.\r\n‚îú‚îÄ‚îÄ Remote\r\n‚îÇ¬†¬† ‚îú‚îÄ‚îÄ A\r\n‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ D\r\n‚îÇ¬†¬† ‚îú‚îÄ‚îÄ B\r\n‚îÇ¬†¬† ‚îú‚îÄ‚îÄ C\r\n‚îÇ¬†¬† ‚îî‚îÄ‚îÄ E.txt\r\n‚îî‚îÄ‚îÄ Source\r\n    ‚îú‚îÄ‚îÄ A\r\n    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ D\r\n    ‚îú‚îÄ‚îÄ B\r\n    ‚îú‚îÄ‚îÄ C\r\n    ‚îî‚îÄ‚îÄ E.txt\r\n\r\n10 directories, 2 files\r\n```\r\n\r\n<!--- Please keep the note below for others who read your bug report. -->\r\n\r\n#### How to use GitHub\r\n\r\n* Please use the üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to show that you are affected by the same issue.\r\n* Please don't comment if you have no relevant information to add. It's just extra noise for everyone subscribed to this issue.\r\n* Subscribe to receive notifications on status change and new comments.\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/7689/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/7689/timeline","performed_via_github_app":null,"state_reason":"completed"}