[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/344562938","html_url":"https://github.com/rclone/rclone/issues/1824#issuecomment-344562938","issue_url":"https://api.github.com/repos/rclone/rclone/issues/1824","id":344562938,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDU2MjkzOA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T11:18:08Z","updated_at":"2017-11-15T11:18:08Z","body":"Thanks for the writeup and discussion of the problem.\r\n\r\nSo in the [s3 docs](http://docs.aws.amazon.com/AmazonS3/latest/API/RESTCommonResponseHeaders.html) it states:\r\n\r\n> Objects created by the PUT Object, POST Object, or Copy operation, or through the AWS Management Console, and are encrypted by SSE-C or SSE-KMS, have ETags that are not an MD5 digest of their object data.\r\n\r\nNow rclone assumes that all Etags are MD5 hashes.  The reason why it works for multipart upload is that rclone knows that these Etags aren't MD5 hashes and ignores them.\r\n\r\nIf you use this flag\r\n\r\n      --ignore-checksum                   Skip post copy check of checksums.\r\n\r\nthen I expect the uploads will work just fine.\r\n\r\nThis isn't an entirely satisfactory workaround though as rclone should be able to work out that the Etags aren't  MD5SUMs..\r\n\r\nIs there anything returned by amazon for rclone to know that the objects are encrypted?  Or something rclone could query?\r\n\r\nAlternatively rclone could take another config parameter which isn't ideal since some buckets may be encrypted and some not.\r\n\r\nAt minimum something in the docs about using `--ignore-checksum` when using KMS would be a good idea.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/344562938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1343356609,"node_id":"MDEyOkxhYmVsZWRFdmVudDEzNDMzNTY2MDk=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1343356609","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-11-15T16:22:47Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":1343356610,"node_id":"MDEyOkxhYmVsZWRFdmVudDEzNDMzNTY2MTA=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1343356610","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-11-15T16:22:47Z","label":{"name":"doc fix","color":"eb6420"},"performed_via_github_app":null},{"id":1343356759,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDEzNDMzNTY3NTk=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1343356759","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2017-11-15T16:22:51Z","milestone":{"title":"v1.40"},"performed_via_github_app":null},{"id":1526791559,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE1MjY3OTE1NTk=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1526791559","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e62fe06763d37a3ea11a997b2534c52e390e5e98","commit_url":"https://api.github.com/repos/rclone/rclone/commits/e62fe06763d37a3ea11a997b2534c52e390e5e98","created_at":"2018-03-17T10:53:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/373911380","html_url":"https://github.com/rclone/rclone/issues/1824#issuecomment-373911380","issue_url":"https://api.github.com/repos/rclone/rclone/issues/1824","id":373911380,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzkxMTM4MA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-17T10:55:49Z","updated_at":"2018-03-17T10:55:49Z","body":"I've done the update the docs fix, however this could do with a better fix.\r\n\r\nIf there was some header rclone could check then rclone could automatically ignore the ETag for encrypted items.\r\n\r\nIf you fetch a small textual item with `rclone cat --ignore-checksum -vv --dump bodies s3:path/to/file.txt` then rclone will dump the headers - can you paste them here?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/373911380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1526792252,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MTUyNjc5MjI1Mg==","url":"https://api.github.com/repos/rclone/rclone/issues/events/1526792252","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2018-03-17T10:56:02Z","label":{"name":"doc fix","color":"eb6420"},"performed_via_github_app":null},{"id":1526792301,"node_id":"MDEyOkxhYmVsZWRFdmVudDE1MjY3OTIzMDE=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1526792301","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-03-17T10:56:11Z","label":{"name":"Remote: S3","color":"fbca04"},"performed_via_github_app":null},{"id":1526792316,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MTUyNjc5MjMxNg==","url":"https://api.github.com/repos/rclone/rclone/issues/events/1526792316","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2018-03-17T10:56:15Z","milestone":{"title":"v1.40"},"performed_via_github_app":null},{"id":1526792317,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE1MjY3OTIzMTc=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1526792317","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-03-17T10:56:15Z","milestone":{"title":"v1.41"},"performed_via_github_app":null},{"id":1600091900,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MTYwMDA5MTkwMA==","url":"https://api.github.com/repos/rclone/rclone/issues/events/1600091900","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2018-04-28T12:06:19Z","milestone":{"title":"v1.41"},"performed_via_github_app":null},{"id":1600091901,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE2MDAwOTE5MDE=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1600091901","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-04-28T12:06:19Z","milestone":{"title":"v1.42"},"performed_via_github_app":null},{"id":1685028739,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MTY4NTAyODczOQ==","url":"https://api.github.com/repos/rclone/rclone/issues/events/1685028739","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2018-06-17T16:06:17Z","milestone":{"title":"v1.42"},"performed_via_github_app":null},{"id":1685028740,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE2ODUwMjg3NDA=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1685028740","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-06-17T16:06:17Z","milestone":{"title":"v1.43"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401545879","html_url":"https://github.com/rclone/rclone/issues/1824#issuecomment-401545879","issue_url":"https://api.github.com/repos/rclone/rclone/issues/1824","id":401545879,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTU0NTg3OQ==","user":{"login":"wgrrrr","id":554849,"node_id":"MDQ6VXNlcjU1NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/554849?v=4","gravatar_id":"","url":"https://api.github.com/users/wgrrrr","html_url":"https://github.com/wgrrrr","followers_url":"https://api.github.com/users/wgrrrr/followers","following_url":"https://api.github.com/users/wgrrrr/following{/other_user}","gists_url":"https://api.github.com/users/wgrrrr/gists{/gist_id}","starred_url":"https://api.github.com/users/wgrrrr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wgrrrr/subscriptions","organizations_url":"https://api.github.com/users/wgrrrr/orgs","repos_url":"https://api.github.com/users/wgrrrr/repos","events_url":"https://api.github.com/users/wgrrrr/events{/privacy}","received_events_url":"https://api.github.com/users/wgrrrr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-30T14:53:04Z","updated_at":"2018-06-30T14:53:04Z","body":"Hi there... this issue is affecting me as well, so I've taken the liberty of dumping the headers you wanted to see. I hope this is helpful. I've sanitized the output a bit, but I think it's still useful for your purposes.\r\n\r\n```\r\n2018/06/30 14:34:22 DEBUG : HTTP REQUEST (req 0xc420111800)\r\n2018/06/30 14:34:22 DEBUG : HEAD /bucket-name/path/to/small-file.key HTTP/1.1\r\nHost: s3.us-west-2.amazonaws.com\r\nUser-Agent: rclone/v1.42\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20180630T143422Z\r\n\r\n2018/06/30 14:34:22 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2018/06/30 14:34:22 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2018/06/30 14:34:22 DEBUG : HTTP RESPONSE (req 0xc420111800)\r\n2018/06/30 14:34:22 DEBUG : HTTP/1.1 200 OK\r\nContent-Length: 1706\r\nAccept-Ranges: bytes\r\nContent-Type:\r\nDate: Sat, 30 Jun 2018 14:34:23 GMT\r\nEtag: \"96c9b2988c9c388935236b5a719374c7\"\r\nLast-Modified: Fri, 29 Jun 2018 20:04:29 GMT\r\nServer: AmazonS3\r\nX-Amz-Id-2: AFgUQcJa2OlXhGNijiHPdE3Jzk8O0bL4mkQQnNANB3l4bh4hKO7jPfWZ2ZPTyY1O+kPZKfBUmMg=\r\nX-Amz-Request-Id: D841ED0CDDE41FA2\r\nX-Amz-Server-Side-Encryption: aws:kms\r\nX-Amz-Server-Side-Encryption-Aws-Kms-Key-Id: arn:aws:kms:region:account-id:key/key-uuid\r\n\r\n2018/06/30 14:34:22 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2018/06/30 14:34:22 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2018/06/30 14:34:22 DEBUG : HTTP REQUEST (req 0xc4201f6400)\r\n2018/06/30 14:34:22 DEBUG : GET /bucket-name?delimiter=%2F&max-keys=1000&prefix=path%2Fto%2F HTTP/1.1\r\nHost: s3.us-west-2.amazonaws.com\r\nUser-Agent: rclone/v1.42\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20180630T143422Z\r\nAccept-Encoding: gzip\r\n\r\n2018/06/30 14:34:22 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2018/06/30 14:34:22 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2018/06/30 14:34:22 DEBUG : HTTP RESPONSE (req 0xc4201f6400)\r\n2018/06/30 14:34:22 DEBUG : HTTP/1.1 200 OK\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Sat, 30 Jun 2018 14:34:23 GMT\r\nServer: AmazonS3\r\nX-Amz-Bucket-Region: region\r\nX-Amz-Id-2: Cn87BtiG8KsRqdKb7tLA9IG3IRc8YS8KL0soP1QmixjZnGNB/dGW3/oTEByekAGOTdt8zW65pXg=\r\nX-Amz-Request-Id: 7744C35851D3CAB6\r\n\r\n334\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<ListBucketResult xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Name>bucket-name</Name><Prefix>path/to/</Prefix><Marker></Marker><MaxKeys>1000</MaxKeys><Delimiter>/</Delimiter><IsTruncated>false</IsTruncated><Contents><Key>path/to/small-file.crt</Key><LastModified>2018-06-29T20:04:29.000Z</LastModified><ETag>&quot;9eb9691c8a3f0d803e6ae2b729680687&quot;</ETag><Size>6478</Size><StorageClass>STANDARD</StorageClass></Contents><Contents><Key>path/to/small-file.key</Key><LastModified>2018-06-29T20:04:29.000Z</LastModified><ETag>&quot;96c9b2988c9c388935236b5a719374c7&quot;</ETag><Size>1706</Size><StorageClass>STANDARD</StorageClass></Contents></ListBucketResult>\r\n0\r\n\r\n2018/06/30 14:34:22 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2018/06/30 14:34:22 DEBUG : small-file.crt: Excluded from sync (and deletion)\r\n2018/06/30 14:34:22 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2018/06/30 14:34:22 DEBUG : HTTP REQUEST (req 0xc4202b4100)\r\n2018/06/30 14:34:22 DEBUG : GET /bucket-name/path/to/small-file.key HTTP/1.1\r\nHost: s3.us-west-2.amazonaws.com\r\nUser-Agent: rclone/v1.42\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20180630T143422Z\r\nAccept-Encoding: gzip\r\n\r\n2018/06/30 14:34:22 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2018/06/30 14:34:22 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2018/06/30 14:34:22 DEBUG : HTTP RESPONSE (req 0xc4202b4100)\r\n2018/06/30 14:34:22 DEBUG : HTTP/1.1 200 OK\r\nContent-Length: 1706\r\nAccept-Ranges: bytes\r\nContent-Type:\r\nDate: Sat, 30 Jun 2018 14:34:23 GMT\r\nEtag: \"96c9b2988c9c388935236b5a719374c7\"\r\nLast-Modified: Fri, 29 Jun 2018 20:04:29 GMT\r\nServer: AmazonS3\r\nX-Amz-Id-2: WaGbSgU30kBSnjgS+vWXfDVRNJbmczXIt6n5vHe/neDesNst4h3H1Ur5W08TqutLyWOQPmutoZE=\r\nX-Amz-Request-Id: 1BFC4C04D0D894B1\r\nX-Amz-Server-Side-Encryption: aws:kms\r\nX-Amz-Server-Side-Encryption-Aws-Kms-Key-Id: arn:aws:kms:region:account-id:key/key-uuid\r\n```\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401545879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wgrrrr","id":554849,"node_id":"MDQ6VXNlcjU1NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/554849?v=4","gravatar_id":"","url":"https://api.github.com/users/wgrrrr","html_url":"https://github.com/wgrrrr","followers_url":"https://api.github.com/users/wgrrrr/followers","following_url":"https://api.github.com/users/wgrrrr/following{/other_user}","gists_url":"https://api.github.com/users/wgrrrr/gists{/gist_id}","starred_url":"https://api.github.com/users/wgrrrr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wgrrrr/subscriptions","organizations_url":"https://api.github.com/users/wgrrrr/orgs","repos_url":"https://api.github.com/users/wgrrrr/repos","events_url":"https://api.github.com/users/wgrrrr/events{/privacy}","received_events_url":"https://api.github.com/users/wgrrrr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401548060","html_url":"https://github.com/rclone/rclone/issues/1824#issuecomment-401548060","issue_url":"https://api.github.com/repos/rclone/rclone/issues/1824","id":401548060,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTU0ODA2MA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-30T15:32:17Z","updated_at":"2018-06-30T15:32:17Z","body":"@wgrrrr thank you for that - very useful.\r\n\r\nIt looks like this one is the header `X-Amz-Server-Side-Encryption: aws:kms`\r\n\r\nI've found the docs on that and it is a bit vague as to what the possible values can be!\r\n\r\nI'm unsure I should skip the etag check if the `X-Amz-Server-Side-Encryption` header is present, or only if it is set to `aws:kms`..\r\n\r\nI managed to find some fairly definitive docs:\r\n\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/API/RESTCommonResponseHeaders.html\r\n\r\nThe entity tag is a hash of the object. The ETag reflects changes only to the contents of an object, not its metadata. The ETag may or may not be an MD5 digest of the object data. Whether or not it is depends on how the object was created and how it is encrypted as described below:\r\n\r\n * Objects created by the PUT Object, POST Object, or Copy operation, or through the AWS Management Console, and are encrypted by SSE-S3 or plaintext, have ETags that **are** an MD5 digest of their object data.\r\n  * Objects created by the PUT Object, POST Object, or Copy operation, or through the AWS Management Console, and are encrypted by SSE-C or SSE-KMS, have ETags that **are not** an MD5 digest of their object data.\r\n  * If an object is created by either the Multipart Upload or Part Copy operation, the ETag **is not** an MD5 digest, regardless of the method of encryption.\r\n\r\nSo it looks like if there is no `X-Amz-Server-Side-Encryption` or if it matches sse-s3 then the Etag is an MD5.  I'm not quite sure what amazon will put in that header though for `sse-s3` any ideas?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401548060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1709985044,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTcwOTk4NTA0NA==","url":"https://api.github.com/repos/rclone/rclone/issues/events/1709985044","actor":{"login":"wgrrrr","id":554849,"node_id":"MDQ6VXNlcjU1NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/554849?v=4","gravatar_id":"","url":"https://api.github.com/users/wgrrrr","html_url":"https://github.com/wgrrrr","followers_url":"https://api.github.com/users/wgrrrr/followers","following_url":"https://api.github.com/users/wgrrrr/following{/other_user}","gists_url":"https://api.github.com/users/wgrrrr/gists{/gist_id}","starred_url":"https://api.github.com/users/wgrrrr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wgrrrr/subscriptions","organizations_url":"https://api.github.com/users/wgrrrr/orgs","repos_url":"https://api.github.com/users/wgrrrr/repos","events_url":"https://api.github.com/users/wgrrrr/events{/privacy}","received_events_url":"https://api.github.com/users/wgrrrr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-06-30T15:32:17Z","performed_via_github_app":null},{"id":1709985045,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE3MDk5ODUwNDU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1709985045","actor":{"login":"wgrrrr","id":554849,"node_id":"MDQ6VXNlcjU1NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/554849?v=4","gravatar_id":"","url":"https://api.github.com/users/wgrrrr","html_url":"https://github.com/wgrrrr","followers_url":"https://api.github.com/users/wgrrrr/followers","following_url":"https://api.github.com/users/wgrrrr/following{/other_user}","gists_url":"https://api.github.com/users/wgrrrr/gists{/gist_id}","starred_url":"https://api.github.com/users/wgrrrr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wgrrrr/subscriptions","organizations_url":"https://api.github.com/users/wgrrrr/orgs","repos_url":"https://api.github.com/users/wgrrrr/repos","events_url":"https://api.github.com/users/wgrrrr/events{/privacy}","received_events_url":"https://api.github.com/users/wgrrrr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-06-30T15:32:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401548571","html_url":"https://github.com/rclone/rclone/issues/1824#issuecomment-401548571","issue_url":"https://api.github.com/repos/rclone/rclone/issues/1824","id":401548571,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTU0ODU3MQ==","user":{"login":"wgrrrr","id":554849,"node_id":"MDQ6VXNlcjU1NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/554849?v=4","gravatar_id":"","url":"https://api.github.com/users/wgrrrr","html_url":"https://github.com/wgrrrr","followers_url":"https://api.github.com/users/wgrrrr/followers","following_url":"https://api.github.com/users/wgrrrr/following{/other_user}","gists_url":"https://api.github.com/users/wgrrrr/gists{/gist_id}","starred_url":"https://api.github.com/users/wgrrrr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wgrrrr/subscriptions","organizations_url":"https://api.github.com/users/wgrrrr/orgs","repos_url":"https://api.github.com/users/wgrrrr/repos","events_url":"https://api.github.com/users/wgrrrr/events{/privacy}","received_events_url":"https://api.github.com/users/wgrrrr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-30T15:41:45Z","updated_at":"2018-06-30T15:41:45Z","body":"[This page](https://aws.amazon.com/blogs/security/how-to-prevent-uploads-of-unencrypted-objects-to-amazon-s3/) seems to have some more detail on potential values of the `X-Amz-Server-Side-Encryption` header.\r\n\r\nAccording to that page, the values could be `NULL` (i.e. no value), `AES256` or `aws:kms`.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401548571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wgrrrr","id":554849,"node_id":"MDQ6VXNlcjU1NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/554849?v=4","gravatar_id":"","url":"https://api.github.com/users/wgrrrr","html_url":"https://github.com/wgrrrr","followers_url":"https://api.github.com/users/wgrrrr/followers","following_url":"https://api.github.com/users/wgrrrr/following{/other_user}","gists_url":"https://api.github.com/users/wgrrrr/gists{/gist_id}","starred_url":"https://api.github.com/users/wgrrrr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wgrrrr/subscriptions","organizations_url":"https://api.github.com/users/wgrrrr/orgs","repos_url":"https://api.github.com/users/wgrrrr/repos","events_url":"https://api.github.com/users/wgrrrr/events{/privacy}","received_events_url":"https://api.github.com/users/wgrrrr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401553263","html_url":"https://github.com/rclone/rclone/issues/1824#issuecomment-401553263","issue_url":"https://api.github.com/repos/rclone/rclone/issues/1824","id":401553263,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTU1MzI2Mw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-30T16:58:51Z","updated_at":"2018-06-30T16:58:51Z","body":"So if I have the metadata for an object then I can determine whether  ` X-Amz-Server-Side-Encryption` is present and if it not present or has the value `AES256` then the Etag is invalid.\r\n\r\nHowever reading the metadata needs a whole other transaction with S3 as it doesn't come in the [ListObjects](https://docs.aws.amazon.com/AmazonS3/latest/API/v2-RESTBucketGET.html) call.\r\n\r\nSo to implement this check it would need rclone to do a metadata read (a HEAD on the object) for all objects.  At the moment it only does it for objects which were uploaded with multipart upload.\r\n\r\nCan objects be individually encrypted or are all objects in a bucket encrypted?  Maybe looking at the bucket metadata would be a better idea?  I looked at the docs and it doesn't look that useful...\r\n\r\nAnother idea would be to make this a flag, say `--s3-use-md5-metadata` which would tell rclone to make extra md5 metadata for each object and only use that metadata and not the ETag header.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401553263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401613636","html_url":"https://github.com/rclone/rclone/issues/1824#issuecomment-401613636","issue_url":"https://api.github.com/repos/rclone/rclone/issues/1824","id":401613636,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTYxMzYzNg==","user":{"login":"wgrrrr","id":554849,"node_id":"MDQ6VXNlcjU1NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/554849?v=4","gravatar_id":"","url":"https://api.github.com/users/wgrrrr","html_url":"https://github.com/wgrrrr","followers_url":"https://api.github.com/users/wgrrrr/followers","following_url":"https://api.github.com/users/wgrrrr/following{/other_user}","gists_url":"https://api.github.com/users/wgrrrr/gists{/gist_id}","starred_url":"https://api.github.com/users/wgrrrr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wgrrrr/subscriptions","organizations_url":"https://api.github.com/users/wgrrrr/orgs","repos_url":"https://api.github.com/users/wgrrrr/repos","events_url":"https://api.github.com/users/wgrrrr/events{/privacy}","received_events_url":"https://api.github.com/users/wgrrrr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-01T15:25:18Z","updated_at":"2018-07-01T15:25:18Z","body":"S3 objects can be encrypted via [bucket default encryption](https://docs.aws.amazon.com/AmazonS3/latest/dev/bucket-encryption.html) or [via the REST API](https://docs.aws.amazon.com/AmazonS3/latest/dev/SSEUsingRESTAPI.html) on a variety of operations.\r\n\r\nIt would appear to me that each object will need to be evaluated individually to determine its encryption status.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401613636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wgrrrr","id":554849,"node_id":"MDQ6VXNlcjU1NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/554849?v=4","gravatar_id":"","url":"https://api.github.com/users/wgrrrr","html_url":"https://github.com/wgrrrr","followers_url":"https://api.github.com/users/wgrrrr/followers","following_url":"https://api.github.com/users/wgrrrr/following{/other_user}","gists_url":"https://api.github.com/users/wgrrrr/gists{/gist_id}","starred_url":"https://api.github.com/users/wgrrrr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wgrrrr/subscriptions","organizations_url":"https://api.github.com/users/wgrrrr/orgs","repos_url":"https://api.github.com/users/wgrrrr/repos","events_url":"https://api.github.com/users/wgrrrr/events{/privacy}","received_events_url":"https://api.github.com/users/wgrrrr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401801322","html_url":"https://github.com/rclone/rclone/issues/1824#issuecomment-401801322","issue_url":"https://api.github.com/repos/rclone/rclone/issues/1824","id":401801322,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTgwMTMyMg==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-02T13:18:58Z","updated_at":"2018-07-02T13:18:58Z","body":"Thanks for looking that up.  Doing a metadata read for every checksum read will certainly slow down S3 for everyone and cost more transactions :-(\r\n\r\nMaybe it will just have to be a flag for kms users.  You'll be able to set this in the config shortly so it isn't too inconvenient.\r\n\r\nWhat do you think?\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/401801322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/417932743","html_url":"https://github.com/rclone/rclone/issues/1824#issuecomment-417932743","issue_url":"https://api.github.com/repos/rclone/rclone/issues/1824","id":417932743,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNzkzMjc0Mw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-02T13:58:07Z","updated_at":"2018-09-02T13:58:07Z","body":"I think what needs to be done is that if the config parameter `server_side_encryption` is set to `aws:kms` the rclone should just be ignoring the Etag and only using the one rclone provides.\r\n\r\nDoes anyone want to have a go at this?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/417932743/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1822259599,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MTgyMjI1OTU5OQ==","url":"https://api.github.com/repos/rclone/rclone/issues/events/1822259599","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2018-09-02T13:58:14Z","milestone":{"title":"v1.43"},"performed_via_github_app":null},{"id":1822259600,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE4MjIyNTk2MDA=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1822259600","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-09-02T13:58:14Z","milestone":{"title":"v1.44"},"performed_via_github_app":null},{"id":1914983536,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MTkxNDk4MzUzNg==","url":"https://api.github.com/repos/rclone/rclone/issues/events/1914983536","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2018-10-19T14:55:56Z","milestone":{"title":"v1.44"},"performed_via_github_app":null},{"id":1914983538,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE5MTQ5ODM1Mzg=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1914983538","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-10-19T14:55:56Z","milestone":{"title":"v1.45"},"performed_via_github_app":null},{"id":1985034928,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MTk4NTAzNDkyOA==","url":"https://api.github.com/repos/rclone/rclone/issues/events/1985034928","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2018-11-24T15:23:32Z","milestone":{"title":"v1.45"},"performed_via_github_app":null},{"id":1985034929,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE5ODUwMzQ5Mjk=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1985034929","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-11-24T15:23:32Z","milestone":{"title":"v1.46"},"performed_via_github_app":null},{"id":2128848149,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MjEyODg0ODE0OQ==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2128848149","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2019-02-09T18:11:47Z","milestone":{"title":"v1.46"},"performed_via_github_app":null}]