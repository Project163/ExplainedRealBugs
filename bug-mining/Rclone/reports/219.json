{"url":"https://api.github.com/repos/rclone/rclone/issues/731","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/731/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/731/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/731/events","html_url":"https://github.com/rclone/rclone/issues/731","id":176940596,"node_id":"MDU6SXNzdWUxNzY5NDA1OTY=","number":731,"title":"b2: rclone eventually fails to respect the specified --transfers value","user":{"login":"dpedu","id":1266188,"node_id":"MDQ6VXNlcjEyNjYxODg=","avatar_url":"https://avatars.githubusercontent.com/u/1266188?v=4","gravatar_id":"","url":"https://api.github.com/users/dpedu","html_url":"https://github.com/dpedu","followers_url":"https://api.github.com/users/dpedu/followers","following_url":"https://api.github.com/users/dpedu/following{/other_user}","gists_url":"https://api.github.com/users/dpedu/gists{/gist_id}","starred_url":"https://api.github.com/users/dpedu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dpedu/subscriptions","organizations_url":"https://api.github.com/users/dpedu/orgs","repos_url":"https://api.github.com/users/dpedu/repos","events_url":"https://api.github.com/users/dpedu/events{/privacy}","received_events_url":"https://api.github.com/users/dpedu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":306063207,"node_id":"MDU6TGFiZWwzMDYwNjMyMDc=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Backblaze%20B2","name":"Remote: Backblaze B2","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/21","html_url":"https://github.com/rclone/rclone/milestone/21","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/21/labels","id":1890781,"node_id":"MDk6TWlsZXN0b25lMTg5MDc4MQ==","number":21,"title":"v1.34","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":48,"state":"closed","created_at":"2016-07-18T22:13:42Z","updated_at":"2016-11-06T10:51:40Z","due_on":null,"closed_at":"2016-11-06T10:51:40Z"},"comments":5,"created_at":"2016-09-14T15:34:00Z","updated_at":"2016-10-17T16:09:35Z","closed_at":"2016-10-17T16:09:35Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When syncing a large filesystem to B2, rclone eventually transfers only a few files at a time, instead of the requested number of parallel transfers.\n\nWhen it first starts, everything is good. We see nearly all the transfers running in parallel:\n\n```\nTransferred:   51.971 MBytes (882.298 kBytes/s)\nErrors:                 0\nChecks:              5631\nTransferred:           29\nElapsed time:      1m0.3s\nTransferring:\n * ...some/unique/file/path: 15% done. avg:   57.4, cur:   36.8 kByte/s. ETA: 6m18s\n * ...some/unique/file/path: 13% done. avg:   25.7, cur:   21.6 kByte/s. ETA: 5m27s\n * ...some/unique/file/path: 13% done. avg:   47.1, cur:   41.5 kByte/s. ETA: 5m43s\n * ...some/unique/file/path: 75% done. avg:   18.9, cur:   17.4 kByte/s. ETA: 17s\n * ...some/unique/file/path: 14% done. avg:   25.6, cur:   31.1 kByte/s. ETA: 3m44s\n * ...some/unique/file/path:  0% done. avg:    0.0, cur:    0.0 kByte/s. ETA: -\n * ...some/unique/file/path: 14% done. avg:   50.9, cur:   47.9 kByte/s. ETA: 5m18s\n * ...some/unique/file/path: 42% done. avg:   19.3, cur:   23.9 kByte/s. ETA: 54s\n * ...some/unique/file/path: 68% done. avg:   27.8, cur:   29.1 kByte/s. ETA: 21s\n * ...some/unique/file/path: 20% done. avg:   17.6, cur:   18.1 kByte/s. ETA: 3m7s\n * ...some/unique/file/path: 23% done. avg:   20.9, cur:   21.1 kByte/s. ETA: 2m28s\n * ...some/unique/file/path:  0% done. avg:    0.0, cur:    0.0 kByte/s. ETA: -\n * ...some/unique/file/path: 11% done. avg:   63.0, cur:  171.4 kByte/s. ETA: 42s\n * ...some/unique/file/path:  9% done. avg:   18.8, cur:   23.7 kByte/s. ETA: 5m12s\n * ...some/unique/file/path:  0% done. avg:    0.0, cur:    0.0 kByte/s. ETA: -\n * ...some/unique/file/path: 51% done. avg:   23.4, cur:   19.7 kByte/s. ETA: 54s\n * ...some/unique/file/path:  0% done. avg:    0.0, cur:    0.0 kByte/s. ETA: -\n * ...some/unique/file/path:  0% done. avg:    0.0, cur:    0.0 kByte/s. ETA: -\n * ...some/unique/file/path:  0% done. avg:    0.0, cur:    0.0 kByte/s. ETA: -\n * ...some/unique/file/path: 40% done. avg:   21.1, cur:   15.0 kByte/s. ETA: 1m40s\n * ...some/unique/file/path:  0% done. avg:    0.0, cur:    0.0 kByte/s. ETA: -\n * ...some/unique/file/path:  0% done. avg:    0.0, cur:    0.0 kByte/s. ETA: -\n * ...some/unique/file/path:  0% done. avg:    0.0, cur:    0.0 kByte/s. ETA: -\n * ...some/unique/file/path: 21% done. avg:   19.5, cur:   24.9 kByte/s. ETA: 2m8s\n * ...some/unique/file/path:  4% done. avg:   32.1, cur:   31.5 kByte/s. ETA: 16m34s\n * ...some/unique/file/path:  0% done. avg:    0.0, cur:    0.0 kByte/s. ETA: -\n * ...some/unique/file/path: 21% done. avg:   22.4, cur:   32.5 kByte/s. ETA: 1m38s\n * ...some/unique/file/path:  1% done. avg:  204.1, cur:  209.0 kByte/s. ETA: 49m3s\n * ...some/unique/file/path:  1% done. avg:  218.2, cur:  240.9 kByte/s. ETA: 42m36s\n * ...some/unique/file/path: 36% done. avg:   32.6, cur:   36.3 kByte/s. ETA: 1m11s\n * ...some/unique/file/path:  4% done. avg:   33.0, cur:   34.8 kByte/s. ETA: 14m57s\n * ...some/unique/file/path: 11% done. avg:   34.3, cur:   37.8 kByte/s. ETA: 5m36s\n```\n\nHowever, after a few hours of syncing many files, most files in the periodically outputted list above will look like:\n\n```\n * ...some/unique/file/path:  0% done. avg:    0.0, cur:    0.0 kByte/s. ETA: -\n```\n\nAnd maybe only 3-5 will still be making progress. The files not making progress will sit that way for some time before eventually being removed and the error counter incremented. The error printed is something along the lines of API token expired, which is not surprising. I will paste the exact error here later today when run with `-v` finishes.\n\nThese are generally all plain files with sizes varying between zero bytes and hundreds of GBs.\n\n> What is your rclone version (eg output from `rclone -V`)\n\nrclone v1.33\n\n> Which OS you are using and how many bits (eg Windows 7, 64 bit)\n\nUbuntu 14.04 64 bit\n\n> Which cloud storage system are you using? (eg Google Drive)\n\nB2\n\n> The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\n\nrclone --config /root/.rclone.conf --transfers 32 --bwlimit 1M --filter-from exclude.txt --delete-excluded sync /local/path remotename:bucket-name\n\n> A log from the command with the `-v` flag (eg output from `rclone -v copy /tmp remote:tmp`)\n\nhttp://davepedu.com/files/rclonelog.txt\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/731/timeline","performed_via_github_app":null,"state_reason":"completed"}