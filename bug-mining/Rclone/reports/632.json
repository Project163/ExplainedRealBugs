{"url":"https://api.github.com/repos/rclone/rclone/issues/3224","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/3224/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/3224/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/3224/events","html_url":"https://github.com/rclone/rclone/issues/3224","id":448226217,"node_id":"MDU6SXNzdWU0NDgyMjYyMTc=","number":3224,"title":"sync fails to S3 Glacier and Glacier Deep Archive tiers","user":{"login":"philip-harvey","id":32467456,"node_id":"MDQ6VXNlcjMyNDY3NDU2","avatar_url":"https://avatars.githubusercontent.com/u/32467456?v=4","gravatar_id":"","url":"https://api.github.com/users/philip-harvey","html_url":"https://github.com/philip-harvey","followers_url":"https://api.github.com/users/philip-harvey/followers","following_url":"https://api.github.com/users/philip-harvey/following{/other_user}","gists_url":"https://api.github.com/users/philip-harvey/gists{/gist_id}","starred_url":"https://api.github.com/users/philip-harvey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philip-harvey/subscriptions","organizations_url":"https://api.github.com/users/philip-harvey/orgs","repos_url":"https://api.github.com/users/philip-harvey/repos","events_url":"https://api.github.com/users/philip-harvey/events{/privacy}","received_events_url":"https://api.github.com/users/philip-harvey/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-05-24T15:20:49Z","updated_at":"2019-06-03T14:28:20Z","closed_at":"2019-06-03T14:28:20Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Creating an issue to track this bug.\r\nhttps://forum.rclone.org/t/suspected-bug-in-s3-or-compatible-sync-logic-to-glacier/10187\r\n\r\nWhen syncing from a S3 bucket to a S3 bucket if rclone detects that the source object timestamp has changed and the file is the same size and etag is matching in source and destination it attempts to update the metadata that stores the original modtime.\r\nIf the S3 object to be updated (copied) is in Glacier or Glacier Deep Archive tier then updating the modtime updates fails since you can't do a server side copy of an object that is in Glacier tier.\r\nThe error message is:\r\nFailed to set modification time: InvalidObjectState: Operation is not valid for the source object's storage class\r\nThe behavior should be updated to upload the object with the new modtime rather than attempt to do the server side copy/modtime update.","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/3224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/3224/timeline","performed_via_github_app":null,"state_reason":"completed"}