{"url":"https://api.github.com/repos/rclone/rclone/issues/2115","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/2115/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/2115/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/2115/events","html_url":"https://github.com/rclone/rclone/issues/2115","id":302405354,"node_id":"MDU6SXNzdWUzMDI0MDUzNTQ=","number":2115,"title":"NFS Mount Input/Output error on create files","user":{"login":"mcadam","id":3319629,"node_id":"MDQ6VXNlcjMzMTk2Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/3319629?v=4","gravatar_id":"","url":"https://api.github.com/users/mcadam","html_url":"https://github.com/mcadam","followers_url":"https://api.github.com/users/mcadam/followers","following_url":"https://api.github.com/users/mcadam/following{/other_user}","gists_url":"https://api.github.com/users/mcadam/gists{/gist_id}","starred_url":"https://api.github.com/users/mcadam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcadam/subscriptions","organizations_url":"https://api.github.com/users/mcadam/orgs","repos_url":"https://api.github.com/users/mcadam/repos","events_url":"https://api.github.com/users/mcadam/events{/privacy}","received_events_url":"https://api.github.com/users/mcadam/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":430778096,"node_id":"MDU6TGFiZWw0MzA3NzgwOTY=","url":"https://api.github.com/repos/rclone/rclone/labels/VFS%20/%20mount","name":"VFS / mount","color":"0e8a16","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/41","html_url":"https://github.com/rclone/rclone/milestone/41","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/41/labels","id":5478342,"node_id":"MDk6TWlsZXN0b25lNTQ3ODM0Mg==","number":41,"title":"v1.54","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":55,"state":"closed","created_at":"2020-05-29T14:52:51Z","updated_at":"2021-02-03T16:09:01Z","due_on":"2021-01-30T08:00:00Z","closed_at":"2021-02-03T16:05:14Z"},"comments":20,"created_at":"2018-03-05T18:12:04Z","updated_at":"2021-10-22T13:52:27Z","closed_at":"2020-10-30T13:01:39Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n\r\nHi!\r\n\r\nWe understand you are having a problem with rclone or have an idea for an improvement - we want to help you with that!\r\n\r\nIf you've just got a question or aren't sure if you've found a bug then please use the rclone forum\r\n\r\n    https://forum.rclone.org/\r\n\r\ninstead of filing an issue.  We'll reply quickly and it won't increase our massive issue backlog.\r\n\r\nIf you think you might have found a bug, please can you try to replicate it with the latest beta?\r\n\r\n    https://beta.rclone.org/\r\n    \r\nIf you can still replicate it with the latest beta, then please fill in the info below which makes our lives much easier.  A log with -vv will make our day :-)\r\n\r\nIf you have an idea for an improvement, then please search the old issues first and if you don't find your idea, make a new issue.\r\n\r\nThanks\r\n\r\nThe Rclone Developers\r\n\r\n-->\r\n\r\n#### What is the problem you are having with rclone?\r\n\r\nHi, I have been playing around rclone + NFS on top of it. I managed to mount, get the files listed and everything, I can delete files, read files fine, but I can't create a new file.\r\n\r\nError I am getting:\r\n\r\n$ touch test\r\ntouch: cannot touch 'test': Input/output error\r\n\r\n#### What is your rclone version (eg output from `rclone -V`)\r\n\r\nReplicated in both stable release and beta release:\r\n\r\n• ./rclone --version\r\nrclone v1.39\r\n- os/arch: linux/amd64\r\n- go version: go1.9.2\r\n\r\n• rclone --version\r\nrclone v1.39-171-g1383df4fβ\r\n- os/arch: linux/amd64\r\n- go version: go1.10\r\n\r\n\r\n#### Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\n\r\nUbuntu 64 bits \r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\n\r\nGoogle drive with a Rclone Cache on top of it\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\n```\r\n[Unit]\r\nDescription=Mount GDrive using rclone\r\nAfter=network-online.target\r\n\r\n[Service]\r\nType=notify\r\nUser=root\r\nExecStartPre=-/bin/mkdir /mnt/test\r\nExecStart=/home/user/rclone-tmp/rclone mount \\\r\n                          gdrivecache: /mnt/test \\\r\n                          --config /home/user/.rclone.conf \\\r\n                          --allow-other \\\r\n                          --cache-db-purge \\\r\n                          --cache-writes \\\r\n                          --cache-db-path=/tmp/rclone-test/cache-backend \\\r\n                          --gid=100 \\\r\n                          --uid=1000 \\\r\n                          --umask=002 \\\r\n                          -vv\r\nExecStop=/bin/fusermount -u /mnt/test\r\nRestart=on-abort\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n```\r\n\r\n#### A log from the command with the `-vv` flag (eg output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\nSo if I try to touch a \"test\" file from the mount directly I successfully get this:\r\n\r\n```\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : /: Lookup: name=\"test\"\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : /: >Lookup: node=<nil>, err=no such file or directory\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : /: Lookup: name=\"test\"\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : /: >Lookup: node=<nil>, err=no such file or directory\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : /: Create: name=\"test\"\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : test: Open: flags=O_RDWR|O_CREATE\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : test: >Open: fd=test (w), err=<nil>\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : /: >Create: node=test, handle=&{test (w)}, err=<nil>\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : test: Attr:\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : test: >Attr: a=valid=1m0s ino=0 size=0 mode=-rw-rw-r--, err=<nil>\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : &{test (w)}: Flush:\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : test: WriteFileHandle.Flush ignoring flush on unwritten handle\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : &{test (w)}: >Flush: err=<nil>\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : &{test (w)}: Release:\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : test: WriteFileHandle.Release closing\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 DEBUG : gdrivecache:: File to upload is small (0 bytes), uploading instead of streaming\r\nMar 05 17:55:12 sbx1 rclone[880]: 2018/03/05 17:55:12 INFO  : gdrivecache:: put data at 'test'\r\nMar 05 17:55:14 sbx1 rclone[880]: 2018/03/05 17:55:14 DEBUG : : cache: expired\r\nMar 05 17:55:14 sbx1 rclone[880]: 2018/03/05 17:55:14 DEBUG : test: object hash cached: d41d8cd98f00b204e9800998ecf8427e\r\nMar 05 17:55:14 sbx1 rclone[880]: 2018/03/05 17:55:14 INFO  : test: Copied (new)\r\nMar 05 17:55:14 sbx1 rclone[880]: 2018/03/05 17:55:14 DEBUG : &{test (w)}: >Release: err=<nil>\r\nMar 05 17:55:14 sbx1 rclone[880]: 2018/03/05 17:55:14 INFO  : cache: deleted (0) chunks\r\n```\r\n\r\nWhen I do the touch from the NFS mount I get this:\r\n\r\n```\r\nMar 05 17:54:45 sbx1 rclone[880]: 2018/03/05 17:54:45 DEBUG : /: Lookup: name=\"test\"\r\nMar 05 17:54:45 sbx1 rclone[880]: 2018/03/05 17:54:45 DEBUG : /: >Lookup: node=<nil>, err=no such file or directory\r\nMar 05 17:54:45 sbx1 rclone[880]: 2018/03/05 17:54:45 DEBUG : /: Lookup: name=\"test\"\r\nMar 05 17:54:45 sbx1 rclone[880]: 2018/03/05 17:54:45 DEBUG : /: >Lookup: node=<nil>, err=no such file or directory\r\n```\r\n\r\nAnd thats it.\r\n\r\nSo it does the same, look for the file, don't find it but then don't try to create it? Like it does on the main file system.\r\n\r\nLet me know how I can help to test further.\r\n\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/2115/reactions","total_count":4,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/2115/timeline","performed_via_github_app":null,"state_reason":"completed"}