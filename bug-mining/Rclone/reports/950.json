{"url":"https://api.github.com/repos/rclone/rclone/issues/5196","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/5196/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/5196/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/5196/events","html_url":"https://github.com/rclone/rclone/issues/5196","id":849488683,"node_id":"MDU6SXNzdWU4NDk0ODg2ODM=","number":5196,"title":"Google Drive Downloads not saving with file extension when using `backend copyid`","user":{"login":"mikfreedman","id":1176640,"node_id":"MDQ6VXNlcjExNzY2NDA=","avatar_url":"https://avatars.githubusercontent.com/u/1176640?v=4","gravatar_id":"","url":"https://api.github.com/users/mikfreedman","html_url":"https://github.com/mikfreedman","followers_url":"https://api.github.com/users/mikfreedman/followers","following_url":"https://api.github.com/users/mikfreedman/following{/other_user}","gists_url":"https://api.github.com/users/mikfreedman/gists{/gist_id}","starred_url":"https://api.github.com/users/mikfreedman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikfreedman/subscriptions","organizations_url":"https://api.github.com/users/mikfreedman/orgs","repos_url":"https://api.github.com/users/mikfreedman/repos","events_url":"https://api.github.com/users/mikfreedman/events{/privacy}","received_events_url":"https://api.github.com/users/mikfreedman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":306062764,"node_id":"MDU6TGFiZWwzMDYwNjI3NjQ=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Drive","name":"Remote: Drive","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/44","html_url":"https://github.com/rclone/rclone/milestone/44","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/44/labels","id":6389295,"node_id":"MDk6TWlsZXN0b25lNjM4OTI5NQ==","number":44,"title":"v1.56","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":36,"state":"closed","created_at":"2021-02-03T16:05:32Z","updated_at":"2021-07-20T20:07:10Z","due_on":"2021-07-16T07:00:00Z","closed_at":"2021-07-20T20:07:10Z"},"comments":5,"created_at":"2021-04-02T21:19:29Z","updated_at":"2021-04-06T10:48:00Z","closed_at":"2021-04-06T10:47:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What is the problem you are having with rclone?\r\nWhen using `rclone backend copyid` and downloading a google sheet document, I expect the filename to have the `.xlsx` extension.\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n```\r\nrclone v1.56.0-beta.5356.9e2fbe0f1\r\n- os/type: darwin\r\n- os/arch: amd64\r\n- go/version: go1.16.2\r\n- go/linking: dynamic\r\n- go/tags: cmount\r\n```\r\n#### Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\nMacOS 10.15.7 (19H524) amd64\r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\nGoogle Drive\r\n\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)  \r\n<!--  You should use 3 backticks to begin and end your paste to make it readable.   -->\r\n\r\n```\r\n./rclone -vv  backend copyid drive: [drive-id] /tmp/test/\r\n```\r\n\r\n\r\n#### The rclone config contents with secrets removed.  \r\n<!--  You should use 3 backticks to begin and end your paste to make it readable.   -->\r\n\r\n```\r\n[drive]\r\ntype = drive\r\nclient_id = [client-id]\r\nclient_secret = [client-secret]\r\nscope = drive\r\ntoken = {\"access_token\":\"[snipped]\",\"expiry\":\"2021-04-02T18:06:55.213361-04:00\"}\r\n\r\n```\r\n\r\n#### A log from the command with the `-vv` flag  \r\n\r\n```\r\n~/Downloads/rclone-v1.56.0-beta.5356.9e2fbe0f1-osx-amd64\r\n➜ ./rclone -vv  backend copyid drive: [drive-id] /tmp/test/\r\n2021/04/02 17:14:09 DEBUG : Using config file from \"/Users/[user]/.config/rclone/rclone.conf\"\r\n2021/04/02 17:14:09 DEBUG : rclone: Version \"v1.56.0-beta.5356.9e2fbe0f1\" starting with parameters [\"./rclone\" \"-vv\" \"backend\" \"copyid\" \"drive:\" \"[drive-id]\" \"/tmp/test/\"]\r\n2021/04/02 17:14:10 DEBUG : Google drive root '': root_folder_id = \"[folder-id]\" - save this in the config to speed up startup\r\n2021/04/02 17:14:10 DEBUG : Creating backend with remote \"/tmp/test/\"\r\n2021/04/02 17:14:12 DEBUG : Local file system at /tmp/test/: File to upload is small (4589 bytes), uploading instead of streaming\r\n2021/04/02 17:14:12 DEBUG : temp-sheet: MD5 = f41f56705773e82b7e1c89f1c17f9f48 OK\r\n2021/04/02 17:14:12 INFO  : temp-sheet: Copied (new)\r\n2021/04/02 17:14:12 DEBUG : temp-sheet.xlsx: Updating size of doc after download to 4589\r\n2021/04/02 17:14:12 INFO  : temp-sheet.xlsx: Copied (Rcat, new) to: temp-sheet\r\n2021/04/02 17:14:12 DEBUG : 10 go routines active\r\n\r\n~/Downloads/rclone-v1.56.0-beta.5356.9e2fbe0f1-osx-amd64 took 3s\r\n➜ cd /tmp/test\r\n\r\n/tmp/test\r\n➜ ls\r\ntemp-sheet\r\n```\r\n\r\nYou can see from the log that it downloads it as an xlsx, indeed if you change the filename it opens correctly in excel, however it does not update the local filename. This behavior is different from the regular `copy` command which correctly appends `.xlsx`\r\n\r\nCopying a file from drive that already has an extension (e.g. `temp.csv`) on drive works as expected.","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/5196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/5196/timeline","performed_via_github_app":null,"state_reason":"completed"}