{"url":"https://api.github.com/repos/rclone/rclone/issues/3127","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/3127/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/3127/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/3127/events","html_url":"https://github.com/rclone/rclone/issues/3127","id":436304395,"node_id":"MDU6SXNzdWU0MzYzMDQzOTU=","number":3127,"title":"Cannot create encrypted config via external script","user":{"login":"thecount2a","id":15679291,"node_id":"MDQ6VXNlcjE1Njc5Mjkx","avatar_url":"https://avatars.githubusercontent.com/u/15679291?v=4","gravatar_id":"","url":"https://api.github.com/users/thecount2a","html_url":"https://github.com/thecount2a","followers_url":"https://api.github.com/users/thecount2a/followers","following_url":"https://api.github.com/users/thecount2a/following{/other_user}","gists_url":"https://api.github.com/users/thecount2a/gists{/gist_id}","starred_url":"https://api.github.com/users/thecount2a/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thecount2a/subscriptions","organizations_url":"https://api.github.com/users/thecount2a/orgs","repos_url":"https://api.github.com/users/thecount2a/repos","events_url":"https://api.github.com/users/thecount2a/events{/privacy}","received_events_url":"https://api.github.com/users/thecount2a/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399007,"node_id":"MDU6TGFiZWw4NjM5OTAwNw==","url":"https://api.github.com/repos/rclone/rclone/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null},{"id":591433922,"node_id":"MDU6TGFiZWw1OTE0MzM5MjI=","url":"https://api.github.com/repos/rclone/rclone/labels/good%20first%20issue","name":"good first issue","color":"5319e7","default":true,"description":null},{"id":718218493,"node_id":"MDU6TGFiZWw3MTgyMTg0OTM=","url":"https://api.github.com/repos/rclone/rclone/labels/help%20wanted","name":"help wanted","color":"c2e0c6","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/13","html_url":"https://github.com/rclone/rclone/milestone/13","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/13/labels","id":1575401,"node_id":"MDk6TWlsZXN0b25lMTU3NTQwMQ==","number":13,"title":"Help Wanted","description":"Enhancements which might be useful, but currently aren't planned.\r\n\r\nAny help doing these much appreciated.","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":228,"closed_issues":302,"state":"open","created_at":"2016-02-10T17:44:20Z","updated_at":"2025-11-04T14:55:57Z","due_on":null,"closed_at":null},"comments":3,"created_at":"2019-04-23T17:28:04Z","updated_at":"2019-06-15T09:02:34Z","closed_at":"2019-06-15T09:02:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What is the problem you are having with rclone?\r\n\r\nRclone cannot currently create a new encrypted config, when being invoked via external script (for example, with stdin or using environment variables)\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n\r\nrclone v1.47.0\r\n- os/arch: linux/amd64\r\n- go version: go1.12.4\r\n\r\n#### Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\n\r\nLinux Fedora 25, 64bit\r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\n\r\nGoogle Drive\r\n\r\n\r\nI have discussed this in a thread in the forum:\r\n\r\nhttps://forum.rclone.org/t/headless-token-refresh-or-headless-setup-of-encrypted-configuration/9677\r\n\r\n@ncw suggested an approach that I think would solve this quite well:\r\n\r\n> RCLONE_CONFIG_PASS=password rclone --config /tmp/config config update newremote type drive\r\n\r\nBasically, if a password is defined via the environment, even if no password is required to decrypt the current config, the changes should be made and the config should be written back out encrypted with the password which is defined via the environment.","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/3127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/3127/timeline","performed_via_github_app":null,"state_reason":"completed"}