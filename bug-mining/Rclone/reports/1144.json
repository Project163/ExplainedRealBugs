{"url":"https://api.github.com/repos/rclone/rclone/issues/6846","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/6846/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/6846/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/6846/events","html_url":"https://github.com/rclone/rclone/issues/6846","id":1624253805,"node_id":"I_kwDOAQ-n5M5g0CVt","number":6846,"title":"InvalidRequest error when copying s3=>s3 to a locked bucket","user":{"login":"jamshid","id":8549,"node_id":"MDQ6VXNlcjg1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/8549?v=4","gravatar_id":"","url":"https://api.github.com/users/jamshid","html_url":"https://github.com/jamshid","followers_url":"https://api.github.com/users/jamshid/followers","following_url":"https://api.github.com/users/jamshid/following{/other_user}","gists_url":"https://api.github.com/users/jamshid/gists{/gist_id}","starred_url":"https://api.github.com/users/jamshid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamshid/subscriptions","organizations_url":"https://api.github.com/users/jamshid/orgs","repos_url":"https://api.github.com/users/jamshid/repos","events_url":"https://api.github.com/users/jamshid/events{/privacy}","received_events_url":"https://api.github.com/users/jamshid/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":314138213,"node_id":"MDU6TGFiZWwzMTQxMzgyMTM=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20S3","name":"Remote: S3","color":"fbca04","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2023-03-14T20:30:53Z","updated_at":"2025-01-13T12:01:30Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### The associated forum post URL from `https://forum.rclone.org`\r\n\r\nSorry I think I did find the related https://github.com/rclone/rclone/issues/5993 from a forum post.\r\n\r\n#### What is the problem you are having with rclone?\r\n\r\nRclone copy from s3 to an s3 locked bucket with a default retention fails with a 400 InvalidRequest if the source object is small but was written with a multipart upload.\r\n\r\nI think Rclone just has to switch to multipart regardless of the source object's size when it sees it was uploaded as multipart (etag ends with `-N`) and therefore does not have the MD5 value required by PUT into a locked bucket.  Or I guess rclone could load the source object into memory if it's small enough and compute an MD5.\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n\r\nrclone v1.61.1\r\n- os/version: darwin 12.6.3 (64 bit)\r\n- os/kernel: 21.6.0 (x86_64)\r\n- os/type: darwin\r\n- os/arch: amd64\r\n- go/version: go1.19.4\r\n- go/linking: dynamic\r\n- go/tags: none\r\n\r\n\r\n#### Which OS you are using and how many bits (e.g. Windows 7, 64 bit)\r\n\r\nmacOS\r\n\r\n#### Which cloud storage system are you using? (e.g. Google Drive)\r\n\r\nAWS S3\r\n\r\n#### The command you were trying to run (e.g. `rclone copy /tmp remote:tmp`)\r\n\r\nCreate two buckets in AWS, a source bucket mahbucke and a destination bucket jamlocker that is locking-enabled with a default GOVERNANCE lock of 1 day.\r\n\r\nUpload an 8MB file using s3cmd with multipart. Use s3cmd instead of Rclone to avoid it getting the custom metadata header `X-Amz-Meta-Md5chksum`.\r\n\r\n```\r\ns3cmd  put --multipart-chunk-size-mb=5 ~/demo/animals/Cats\\ Ringing\\ for\\ Dinner-wzh0EuLhRhE.mp4 s3://mahbucke/s3cmd/\r\n```\r\nNow attempt to copy that object with Rclone from source to the destination bucket.\r\nNote these have to be different configs (copy [s3] to [s3other] in ~/.rclone.conf)  to avoid a server-side CopyObject (which does not require an MD5).\r\nSince the object is small Rclone writes it as a single PUT but that fails because Rclone does not supply an MD5.\r\n```\r\nrclone -vv --dump headers copy s3:mahbucke/s3cmd/ s3other:jamlocker/willfail/\r\n...\r\n2023/03/14 11:16:37 ERROR : Cats Ringing for Dinner-wzh0EuLhRhE.mp4: Failed to copy: InvalidRequest: Content-MD5 OR x-amz-checksum- HTTP header is required for Put Object requests with Object Lock parameters\r\n\tstatus code: 400, request id: CJSBFPJZ0Z6WNYEF, host id: yyMmus87DQu30TAqD8ArDD7vWUxHkd52Mq/x6WWrYnBGGZZmCqSuX1PNg/donoXDDrogjUlv9uk=\r\n```\r\n*Workaround* by always copying the object as multipart. This succeeds because AWS does not require an MD5 on a multipart write to a locked bucket.\r\n```\r\nrclone -vv --dump headers copy --s3-upload-cutoff=0 s3:mahbucke/s3cmd/ s3other:jamlocker/foo/\r\n```\r\n\r\n#### A log from the command with the `-vv` flag (e.g. output from `rclone -vv copy /tmp remote:tmp`)\r\n\r\n```\r\n2023/03/14 15:24:39 DEBUG : rclone: Version \"v1.61.1\" starting with parameters [\"rclone\" \"-vv\" \"--dump\" \"headers\" \"copy\" \"s3:mahbucke/s3cmd/\" \"s3other:jamlocker/willfail/\"]\r\n2023/03/14 15:24:39 DEBUG : Creating backend with remote \"s3:mahbucke/s3cmd/\"\r\n2023/03/14 15:24:39 DEBUG : Using config file from \"/Users/jafshar/.rclone.conf\"\r\n2023/03/14 15:24:39 DEBUG : You have specified to dump information. Please be noted that the Accept-Encoding as shown may not be correct in the request and the response may not show Content-Encoding if the go standard libraries auto gzip encoding was in effect. In this case the body of the request will be gunzipped before showing it.\r\n2023/03/14 15:24:39 NOTICE: s3: s3 provider \"\" not known - please set correctly\r\n2023/03/14 15:24:39 DEBUG : You have specified to dump information. Please be noted that the Accept-Encoding as shown may not be correct in the request and the response may not show Content-Encoding if the go standard libraries auto gzip encoding was in effect. In this case the body of the request will be gunzipped before showing it.\r\n2023/03/14 15:24:39 DEBUG : fs cache: renaming cache item \"s3:mahbucke/s3cmd/\" to be canonical \"s3:mahbucke/s3cmd\"\r\n2023/03/14 15:24:39 DEBUG : Creating backend with remote \"s3other:jamlocker/willfail/\"\r\n2023/03/14 15:24:39 DEBUG : You have specified to dump information. Please be noted that the Accept-Encoding as shown may not be correct in the request and the response may not show Content-Encoding if the go standard libraries auto gzip encoding was in effect. In this case the body of the request will be gunzipped before showing it.\r\n2023/03/14 15:24:39 NOTICE: s3: s3 provider \"\" not known - please set correctly\r\n2023/03/14 15:24:39 DEBUG : fs cache: renaming cache item \"s3other:jamlocker/willfail/\" to be canonical \"s3other:jamlocker/willfail\"\r\n2023/03/14 15:24:39 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:39 DEBUG : HTTP REQUEST (req 0xc0005ca200)\r\n2023/03/14 15:24:39 DEBUG : GET /mahbucke?delimiter=%2F&max-keys=1000&prefix=s3cmd%2F HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20230314T202439Z\r\nAccept-Encoding: gzip\r\n\r\n2023/03/14 15:24:39 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:39 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:39 DEBUG : HTTP REQUEST (req 0xc0003e2200)\r\n2023/03/14 15:24:39 DEBUG : GET /jamlocker?delimiter=%2F&max-keys=1000&prefix=willfail%2F HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20230314T202439Z\r\nAccept-Encoding: gzip\r\n\r\n2023/03/14 15:24:39 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : HTTP RESPONSE (req 0xc0003e2200)\r\n2023/03/14 15:24:40 DEBUG : HTTP/1.1 200 OK\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Tue, 14 Mar 2023 20:24:40 GMT\r\nServer: AmazonS3\r\nX-Amz-Bucket-Region: us-east-1\r\nX-Amz-Id-2: przxe1/E/e9n2VmfI6rs9zPRsWfYj2FeKjcgKDALR0N5sLHTvO1x6lHbS6ZaVOvAlGrdFQX+zLc=\r\nX-Amz-Request-Id: 96P411A4GKFMT3AZ\r\n\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : HTTP RESPONSE (req 0xc0005ca200)\r\n2023/03/14 15:24:40 DEBUG : HTTP/1.1 200 OK\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Tue, 14 Mar 2023 20:24:40 GMT\r\nServer: AmazonS3\r\nX-Amz-Bucket-Region: us-east-1\r\nX-Amz-Id-2: H5uz7H444MVu0kfCF5aqeQkiCcukqmCKiCoUEwWwE8oEmbP5YnypuuhVF5Sk39qPnycYkBUgvtE=\r\nX-Amz-Request-Id: 96PD86Z1H3NH6BK3\r\n\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : S3 bucket jamlocker path willfail: Waiting for checks to finish\r\n2023/03/14 15:24:40 DEBUG : S3 bucket jamlocker path willfail: Waiting for transfers to finish\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : HTTP REQUEST (req 0xc0005ca500)\r\n2023/03/14 15:24:40 DEBUG : GET /mahbucke/s3cmd/Cats%20Ringing%20for%20Dinner-wzh0EuLhRhE.mp4 HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nAccept-Encoding: gzip\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20230314T202440Z\r\n\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : HTTP RESPONSE (req 0xc0005ca500)\r\n2023/03/14 15:24:40 DEBUG : HTTP/1.1 200 OK\r\nContent-Length: 8429881\r\nAccept-Ranges: bytes\r\nContent-Type: video/mp4\r\nDate: Tue, 14 Mar 2023 20:24:41 GMT\r\nEtag: \"25324e31b9dd9ff5358d9fb92f14060c-2\"\r\nLast-Modified: Tue, 14 Mar 2023 16:16:15 GMT\r\nServer: AmazonS3\r\nX-Amz-Id-2: Lo6tZEntm8InnzTu6t37DuqSPXooqTGQ07xeJVpy4LgNtKcQ2nmGhF1MrPxrJ7Su4lGC9atupsQ=\r\nX-Amz-Meta-S3cmd-Attrs: atime:1678779178/ctime:1644186824/gid:20/gname:staff/md5:2195c16644a97a0037bc8dc0b5714d6d/mode:33188/mtime:1513340471/uid:502/uname:_sophos\r\nX-Amz-Request-Id: XQBSGRZC4T5Q492F\r\nX-Amz-Server-Side-Encryption: AES256\r\nX-Amz-Version-Id: Ffie8htVBhZYmB2mfoAWMCC6vikJhQ0g\r\n\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : HTTP REQUEST (req 0xc00069e300)\r\n2023/03/14 15:24:40 DEBUG : PUT /jamlocker/willfail/Cats%20Ringing%20for%20Dinner-wzh0EuLhRhE.mp4 HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nContent-Length: 8429881\r\nAuthorization: XXXX\r\nContent-Type: video/mp4\r\nExpect: 100-Continue\r\nX-Amz-Content-Sha256: UNSIGNED-PAYLOAD\r\nX-Amz-Date: 20230314T202440Z\r\nX-Amz-Meta-Mtime: 1678810575\r\nAccept-Encoding: gzip\r\n\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : HTTP RESPONSE (req 0xc00069e300)\r\n2023/03/14 15:24:40 DEBUG : HTTP/1.1 400 Bad Request\r\nConnection: close\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Tue, 14 Mar 2023 20:24:39 GMT\r\nServer: AmazonS3\r\nX-Amz-Id-2: wKO/SwFouAbXiyzi1jvce4s3zvw2q0PMcp+hbSIOHuSi96pFJ9NzSjfHhzkWluol6nggfZKFRLk=\r\nX-Amz-Request-Id: XQBQGE8MCPMYSNCQ\r\n\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 ERROR : Cats Ringing for Dinner-wzh0EuLhRhE.mp4: Failed to copy: InvalidRequest: Content-MD5 OR x-amz-checksum- HTTP header is required for Put Object requests with Object Lock parameters\r\n\tstatus code: 400, request id: XQBQGE8MCPMYSNCQ, host id: wKO/SwFouAbXiyzi1jvce4s3zvw2q0PMcp+hbSIOHuSi96pFJ9NzSjfHhzkWluol6nggfZKFRLk=\r\n2023/03/14 15:24:40 ERROR : Attempt 1/3 failed with 1 errors and: InvalidRequest: Content-MD5 OR x-amz-checksum- HTTP header is required for Put Object requests with Object Lock parameters\r\n\tstatus code: 400, request id: XQBQGE8MCPMYSNCQ, host id: wKO/SwFouAbXiyzi1jvce4s3zvw2q0PMcp+hbSIOHuSi96pFJ9NzSjfHhzkWluol6nggfZKFRLk=\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : HTTP REQUEST (req 0xc000a9e300)\r\n2023/03/14 15:24:40 DEBUG : GET /mahbucke?delimiter=%2F&max-keys=1000&prefix=s3cmd%2F HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20230314T202440Z\r\nAccept-Encoding: gzip\r\n\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : HTTP REQUEST (req 0xc0005ca200)\r\n2023/03/14 15:24:40 DEBUG : GET /jamlocker?delimiter=%2F&max-keys=1000&prefix=willfail%2F HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20230314T202440Z\r\nAccept-Encoding: gzip\r\n\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : HTTP RESPONSE (req 0xc0005ca200)\r\n2023/03/14 15:24:40 DEBUG : HTTP/1.1 200 OK\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Tue, 14 Mar 2023 20:24:41 GMT\r\nServer: AmazonS3\r\nX-Amz-Bucket-Region: us-east-1\r\nX-Amz-Id-2: 52VgkdKfqjB50UpymGv47HiYIegId6cI/5YjKKPo5SXPNGlUXzL+mZ6AjBLA57/WDqm5dKUQNMs=\r\nX-Amz-Request-Id: XQBQMSRBSCPA5HWH\r\n\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : HTTP RESPONSE (req 0xc000a9e300)\r\n2023/03/14 15:24:40 DEBUG : HTTP/1.1 200 OK\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Tue, 14 Mar 2023 20:24:41 GMT\r\nServer: AmazonS3\r\nX-Amz-Bucket-Region: us-east-1\r\nX-Amz-Id-2: LCHTyKoRM67xqRtraD5W6GxKxolNYz6migeq4nXgBQmmCd9gCVIcmdNLFpvUher1+Jn6tY2N/hQ=\r\nX-Amz-Request-Id: XQBVFKBTNRD24TRF\r\n\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : S3 bucket jamlocker path willfail: Waiting for checks to finish\r\n2023/03/14 15:24:40 DEBUG : S3 bucket jamlocker path willfail: Waiting for transfers to finish\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : HTTP REQUEST (req 0xc00069e400)\r\n2023/03/14 15:24:40 DEBUG : GET /mahbucke/s3cmd/Cats%20Ringing%20for%20Dinner-wzh0EuLhRhE.mp4 HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nAccept-Encoding: gzip\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20230314T202440Z\r\n\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : HTTP RESPONSE (req 0xc00069e400)\r\n2023/03/14 15:24:40 DEBUG : HTTP/1.1 200 OK\r\nContent-Length: 8429881\r\nAccept-Ranges: bytes\r\nContent-Type: video/mp4\r\nDate: Tue, 14 Mar 2023 20:24:41 GMT\r\nEtag: \"25324e31b9dd9ff5358d9fb92f14060c-2\"\r\nLast-Modified: Tue, 14 Mar 2023 16:16:15 GMT\r\nServer: AmazonS3\r\nX-Amz-Id-2: SI2jVMp4UDkzC2L/2EfkuqXvERGbwMWp7j8cggkQ9PoZ+p4mgg8GC5DZO6xG0Dx/dPCjdFzSIuA=\r\nX-Amz-Meta-S3cmd-Attrs: atime:1678779178/ctime:1644186824/gid:20/gname:staff/md5:2195c16644a97a0037bc8dc0b5714d6d/mode:33188/mtime:1513340471/uid:502/uname:_sophos\r\nX-Amz-Request-Id: XQBMZW7TGFJR9DXN\r\nX-Amz-Server-Side-Encryption: AES256\r\nX-Amz-Version-Id: Ffie8htVBhZYmB2mfoAWMCC6vikJhQ0g\r\n\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : HTTP REQUEST (req 0xc0005ca800)\r\n2023/03/14 15:24:40 DEBUG : PUT /jamlocker/willfail/Cats%20Ringing%20for%20Dinner-wzh0EuLhRhE.mp4 HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nContent-Length: 8429881\r\nAuthorization: XXXX\r\nContent-Type: video/mp4\r\nExpect: 100-Continue\r\nX-Amz-Content-Sha256: UNSIGNED-PAYLOAD\r\nX-Amz-Date: 20230314T202440Z\r\nX-Amz-Meta-Mtime: 1678810575\r\nAccept-Encoding: gzip\r\n\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : HTTP RESPONSE (req 0xc0005ca800)\r\n2023/03/14 15:24:40 DEBUG : HTTP/1.1 400 Bad Request\r\nConnection: close\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Tue, 14 Mar 2023 20:24:39 GMT\r\nServer: AmazonS3\r\nX-Amz-Id-2: s12mUqFnn5c84gfbCsFUI86Deu3RujJbPNLOAuiz1mKmZZ2KDuTslZXF7Yt3x85P5SAG2oHc1b4=\r\nX-Amz-Request-Id: XQBMB2N8YXD6756M\r\n\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 ERROR : Cats Ringing for Dinner-wzh0EuLhRhE.mp4: Failed to copy: InvalidRequest: Content-MD5 OR x-amz-checksum- HTTP header is required for Put Object requests with Object Lock parameters\r\n\tstatus code: 400, request id: XQBMB2N8YXD6756M, host id: s12mUqFnn5c84gfbCsFUI86Deu3RujJbPNLOAuiz1mKmZZ2KDuTslZXF7Yt3x85P5SAG2oHc1b4=\r\n2023/03/14 15:24:40 ERROR : Attempt 2/3 failed with 1 errors and: InvalidRequest: Content-MD5 OR x-amz-checksum- HTTP header is required for Put Object requests with Object Lock parameters\r\n\tstatus code: 400, request id: XQBMB2N8YXD6756M, host id: s12mUqFnn5c84gfbCsFUI86Deu3RujJbPNLOAuiz1mKmZZ2KDuTslZXF7Yt3x85P5SAG2oHc1b4=\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : HTTP REQUEST (req 0xc00099c500)\r\n2023/03/14 15:24:40 DEBUG : GET /jamlocker?delimiter=%2F&max-keys=1000&prefix=willfail%2F HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20230314T202440Z\r\nAccept-Encoding: gzip\r\n\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : HTTP REQUEST (req 0xc00069e600)\r\n2023/03/14 15:24:40 DEBUG : GET /mahbucke?delimiter=%2F&max-keys=1000&prefix=s3cmd%2F HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20230314T202440Z\r\nAccept-Encoding: gzip\r\n\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : HTTP RESPONSE (req 0xc00069e600)\r\n2023/03/14 15:24:40 DEBUG : HTTP/1.1 200 OK\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Tue, 14 Mar 2023 20:24:41 GMT\r\nServer: AmazonS3\r\nX-Amz-Bucket-Region: us-east-1\r\nX-Amz-Id-2: 3pRgA8P3bNs0LrhmJL60iWXB2216WkG/5BbMHlNXbb5rCUt2aZ2IzjUSlBWateRYSXvIlwb+mPw=\r\nX-Amz-Request-Id: XQBR77SHBQZXH9W7\r\n\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : HTTP RESPONSE (req 0xc00099c500)\r\n2023/03/14 15:24:40 DEBUG : HTTP/1.1 200 OK\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Tue, 14 Mar 2023 20:24:41 GMT\r\nServer: AmazonS3\r\nX-Amz-Bucket-Region: us-east-1\r\nX-Amz-Id-2: XO2SSrkIgFGKM4OuLltWTtgtCw0IX11ve5FJUp51zKgzwr4E7MOLvkyegQ/Trlv2Mzxt9Qb0w3Q=\r\nX-Amz-Request-Id: XQBSV0WT0VNETZ63\r\n\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : S3 bucket jamlocker path willfail: Waiting for checks to finish\r\n2023/03/14 15:24:40 DEBUG : S3 bucket jamlocker path willfail: Waiting for transfers to finish\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : HTTP REQUEST (req 0xc00088d400)\r\n2023/03/14 15:24:40 DEBUG : GET /mahbucke/s3cmd/Cats%20Ringing%20for%20Dinner-wzh0EuLhRhE.mp4 HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nAccept-Encoding: gzip\r\nAuthorization: XXXX\r\nX-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\r\nX-Amz-Date: 20230314T202440Z\r\n\r\n2023/03/14 15:24:40 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:40 DEBUG : HTTP RESPONSE (req 0xc00088d400)\r\n2023/03/14 15:24:40 DEBUG : HTTP/1.1 200 OK\r\nContent-Length: 8429881\r\nAccept-Ranges: bytes\r\nContent-Type: video/mp4\r\nDate: Tue, 14 Mar 2023 20:24:41 GMT\r\nEtag: \"25324e31b9dd9ff5358d9fb92f14060c-2\"\r\nLast-Modified: Tue, 14 Mar 2023 16:16:15 GMT\r\nServer: AmazonS3\r\nX-Amz-Id-2: N8dSeq7gEm2+iDqNAqicduSsGG8yjekLRl+fR3G1tMhW3xAaTgn5SUi5ZQ21ZlloZ9xwIEeCPVc=\r\nX-Amz-Meta-S3cmd-Attrs: atime:1678779178/ctime:1644186824/gid:20/gname:staff/md5:2195c16644a97a0037bc8dc0b5714d6d/mode:33188/mtime:1513340471/uid:502/uname:_sophos\r\nX-Amz-Request-Id: XQBP67P9E6SBYNG6\r\nX-Amz-Server-Side-Encryption: AES256\r\nX-Amz-Version-Id: Ffie8htVBhZYmB2mfoAWMCC6vikJhQ0g\r\n\r\n2023/03/14 15:24:40 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:41 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:41 DEBUG : HTTP REQUEST (req 0xc0001d8800)\r\n2023/03/14 15:24:41 DEBUG : PUT /jamlocker/willfail/Cats%20Ringing%20for%20Dinner-wzh0EuLhRhE.mp4 HTTP/1.1\r\nHost: s3.amazonaws.com\r\nUser-Agent: rclone/v1.61.1\r\nContent-Length: 8429881\r\nAuthorization: XXXX\r\nContent-Type: video/mp4\r\nExpect: 100-Continue\r\nX-Amz-Content-Sha256: UNSIGNED-PAYLOAD\r\nX-Amz-Date: 20230314T202440Z\r\nX-Amz-Meta-Mtime: 1678810575\r\nAccept-Encoding: gzip\r\n\r\n2023/03/14 15:24:41 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2023/03/14 15:24:41 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:41 DEBUG : HTTP RESPONSE (req 0xc0001d8800)\r\n2023/03/14 15:24:41 DEBUG : HTTP/1.1 400 Bad Request\r\nConnection: close\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Tue, 14 Mar 2023 20:24:40 GMT\r\nServer: AmazonS3\r\nX-Amz-Id-2: Ey7IxVkGrKU1AFFRut8WELQ71JzWHQe8lup9yO5TAKSleq+x3NNu+XiUip7YHKUyQgHz5UxZtnU=\r\nX-Amz-Request-Id: XQBGVYW1NGN63K79\r\n\r\n2023/03/14 15:24:41 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2023/03/14 15:24:41 ERROR : Cats Ringing for Dinner-wzh0EuLhRhE.mp4: Failed to copy: InvalidRequest: Content-MD5 OR x-amz-checksum- HTTP header is required for Put Object requests with Object Lock parameters\r\n\tstatus code: 400, request id: XQBGVYW1NGN63K79, host id: Ey7IxVkGrKU1AFFRut8WELQ71JzWHQe8lup9yO5TAKSleq+x3NNu+XiUip7YHKUyQgHz5UxZtnU=\r\n2023/03/14 15:24:41 ERROR : Attempt 3/3 failed with 1 errors and: InvalidRequest: Content-MD5 OR x-amz-checksum- HTTP header is required for Put Object requests with Object Lock parameters\r\n\tstatus code: 400, request id: XQBGVYW1NGN63K79, host id: Ey7IxVkGrKU1AFFRut8WELQ71JzWHQe8lup9yO5TAKSleq+x3NNu+XiUip7YHKUyQgHz5UxZtnU=\r\n2023/03/14 15:24:41 INFO  : \r\nTransferred:   \t          0 B / 0 B, -, 0 B/s, ETA -\r\nErrors:                 1 (retrying may help)\r\nElapsed time:         1.2s\r\n\r\n2023/03/14 15:24:41 DEBUG : 5 go routines active\r\n2023/03/14 15:24:41 Failed to copy: InvalidRequest: Content-MD5 OR x-amz-checksum- HTTP header is required for Put Object requests with Object Lock parameters\r\n\tstatus code: 400, request id: XQBGVYW1NGN63K79, host id: Ey7IxVkGrKU1AFFRut8WELQ71JzWHQe8lup9yO5TAKSleq+x3NNu+XiUip7YHKUyQgHz5UxZtnU=\r\n```\r\n\r\n<!--- Please keep the note below for others who read your bug report. -->\r\n\r\n#### How to use GitHub\r\n\r\n* Please use the üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to show that you are affected by the same issue.\r\n* Please don't comment if you have no relevant information to add. It's just extra noise for everyone subscribed to this issue.\r\n* Subscribe to receive notifications on status change and new comments.\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/6846/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/6846/timeline","performed_via_github_app":null,"state_reason":"reopened"}