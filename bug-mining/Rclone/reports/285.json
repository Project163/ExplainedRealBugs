{"url":"https://api.github.com/repos/rclone/rclone/issues/1195","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/1195/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/1195/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/1195/events","html_url":"https://github.com/rclone/rclone/issues/1195","id":211396603,"node_id":"MDU6SXNzdWUyMTEzOTY2MDM=","number":1195,"title":"Using rclone to write to a google drive crypt mount fails","user":{"login":"calisro","id":5018276,"node_id":"MDQ6VXNlcjUwMTgyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5018276?v=4","gravatar_id":"","url":"https://api.github.com/users/calisro","html_url":"https://github.com/calisro","followers_url":"https://api.github.com/users/calisro/followers","following_url":"https://api.github.com/users/calisro/following{/other_user}","gists_url":"https://api.github.com/users/calisro/gists{/gist_id}","starred_url":"https://api.github.com/users/calisro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calisro/subscriptions","organizations_url":"https://api.github.com/users/calisro/orgs","repos_url":"https://api.github.com/users/calisro/repos","events_url":"https://api.github.com/users/calisro/events{/privacy}","received_events_url":"https://api.github.com/users/calisro/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":306063362,"node_id":"MDU6TGFiZWwzMDYwNjMzNjI=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Local%20FS","name":"Remote: Local FS","color":"fbca04","default":false,"description":""},{"id":430778096,"node_id":"MDU6TGFiZWw0MzA3NzgwOTY=","url":"https://api.github.com/repos/rclone/rclone/labels/VFS%20/%20mount","name":"VFS / mount","color":"0e8a16","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/23","html_url":"https://github.com/rclone/rclone/milestone/23","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/23/labels","id":2117065,"node_id":"MDk6TWlsZXN0b25lMjExNzA2NQ==","number":23,"title":"v1.36","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":67,"state":"closed","created_at":"2016-11-06T10:51:52Z","updated_at":"2017-03-23T15:58:11Z","due_on":"2017-03-19T07:00:00Z","closed_at":"2017-03-18T12:00:28Z"},"comments":4,"created_at":"2017-03-02T13:51:29Z","updated_at":"2017-03-03T14:47:13Z","closed_at":"2017-03-02T22:08:52Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"rclone -V\r\nrclone v1.35-137-ge2f0feeβ\r\n\r\nIn my case /data/Media3 is a google mount crypt.  I am trying to write to it and replace files:\r\n ```rclone --delete-before --stats 0 --config=$RCLONECONF --transfers=16 --checkers=64 copy -vv -c $OPT /data/Media1/Videos/Series/Van.Helsing/tvshow.nfo /data/Media3/\r\n2017/03/02 08:42:34 NOTICE: Config file \"\" not found - using defaults\r\n2017/03/02 08:42:34 DEBUG : rclone: Version \"v1.35-137-ge2f0feeβ\" starting with parameters [\"rclone\" \"--delete-before\" \"--stats\" \"0\" \"--config=\" \"--transfers=16\" \"--checkers=64\" \"copy\" \"-vv\" \"-c\" \"/data/Media1/Videos/Series/Van.Helsing/tvshow.nfo\" \"/data/Media3/\"]\r\n2017/03/02 08:42:34 INFO  : Local file system at /data/Media3: Modify window is 1ns\r\n2017/03/02 08:42:34 INFO  : Local file system at /data/Media3: Waiting for checks to finish\r\n2017/03/02 08:42:34 DEBUG : tvshow.nfo: MD5 = 21823f62fb2822d14c7b42c15fed58b1 (Local file system at /data/Media1/Videos/Series/Van.Helsing)\r\n2017/03/02 08:42:34 DEBUG : tvshow.nfo: MD5 = 73758a0d8836f93e88ebda6f20f14bf3 (Local file system at /data/Media3)\r\n2017/03/02 08:42:34 DEBUG : tvshow.nfo: MD5 differ\r\n2017/03/02 08:42:34 INFO  : Local file system at /data/Media3: Waiting for transfers to finish\r\n2017/03/02 08:42:34 ERROR : tvshow.nfo: Failed to copy: open /data/Media3/tvshow.nfo: input/output error\r\n2017/03/02 08:42:34 ERROR : Attempt 1/3 failed with 1 errors and: open /data/Media3/tvshow.nfo: input/output error\r\n```\r\n\r\nIf I remove that file first and then retry the write it succeeds... Sort of.  It writes the file but then can't change the times.  \r\n```\r\n rclone --delete-before --stats 0 --config=$RCLONECONF --transfers=16 --checkers=64 copy -vv -c $OPT /data/Media1/Videos/Series/Van.Helsing/tvshow.nfo /data/Media3/\r\n2017/03/02 08:47:13 NOTICE: Config file \"\" not found - using defaults\r\n2017/03/02 08:47:13 DEBUG : rclone: Version \"v1.35-137-ge2f0feeβ\" starting with parameters [\"rclone\" \"--delete-before\" \"--stats\" \"0\" \"--config=\" \"--transfers=16\" \"--checkers=64\" \"copy\" \"-vv\" \"-c\" \"/data/Media1/Videos/Series/Van.Helsing/tvshow.nfo\" \"/data/Media3/\"]\r\n2017/03/02 08:47:13 INFO  : Local file system at /data/Media3: Modify window is 1ns\r\n2017/03/02 08:47:13 INFO  : Local file system at /data/Media3: Waiting for checks to finish\r\n2017/03/02 08:47:13 INFO  : Local file system at /data/Media3: Waiting for transfers to finish\r\n2017/03/02 08:47:13 ERROR : tvshow.nfo: Failed to copy: chtimes /data/Media3/tvshow.nfo: operation not permitted\r\n2017/03/02 08:47:13 ERROR : Attempt 1/3 failed with 1 errors and: chtimes /data/Media3/tvshow.nfo: operation not permitted\r\n2017/03/02 08:47:13 INFO  : Local file system at /data/Media3: Waiting for checks to finish\r\n2017/03/02 08:47:13 DEBUG : tvshow.nfo: Size and MD5 of src and dst objects identical\r\n2017/03/02 08:47:13 DEBUG : tvshow.nfo: Unchanged skipping\r\n2017/03/02 08:47:13 INFO  : Local file system at /data/Media3: Waiting for transfers to finish\r\n2017/03/02 08:47:13 ERROR : Attempt 2/3 succeeded\r\n2017/03/02 08:47:13 DEBUG : Go routines at exit 2\r\n2017/03/02 08:47:13 DEBUG : rclone: Version \"v1.35-137-ge2f0feeβ\" finishing with parameters [\"rclone\" \"--delete-before\" \"--stats\" \"0\" \"--config=\" \"--transfers=16\" \"--checkers=64\" \"copy\" \"-vv\" \"-c\" \"/data/Media1/Videos/Series/Van.Helsing/tvshow.nfo\" \"/data/Media3/\"]\r\n\r\nls -l /data/Media3/tvshow.nfo\r\n-rw-rw-r-- 1 deluge mediashare 4972 Mar  1 17:42 /data/Media3/tvshow.nfo\r\n\r\n```\r\nI can replicate that.  So this is a mount restriction.  Should it be?\r\n```\r\ntouch -r /data/Media1/Videos/Series/Van.Helsing/tvshow.nfo /data/Media3/tvshow.nfo\r\ntouch: setting times of ‘/data/Media3/tvshow.nfo’: Operation not permitted\r\n\r\n```\r\nI am not 100% sure that the failure in the first example is the same as the times issue but i'd suspect it has something to do with it.  I see two options, allow hte changing of hte time stamps (which google drive allows I believe) or have a flag(s) to disable the destination time modification.\r\n\r\nrclone, however, should be able to write correctly to its own mount. :)  I would think the right approach would be to have the mount update the times if possible.  I think some of the underlying storage supports this (local does and gdrive?).  For ones that do not support this, perhaps the fuse/mount should silently fail instead of throwing errors?\r\n\r\n\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/1195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/1195/timeline","performed_via_github_app":null,"state_reason":"completed"}