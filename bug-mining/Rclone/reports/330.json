{"url":"https://api.github.com/repos/rclone/rclone/issues/1547","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/1547/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/1547/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/1547/events","html_url":"https://github.com/rclone/rclone/issues/1547","id":244823091,"node_id":"MDU6SXNzdWUyNDQ4MjMwOTE=","number":1547,"title":"B2: delete files during sync instead of marked hidden (necessitating separate cleanup)","user":{"login":"jpap","id":343842,"node_id":"MDQ6VXNlcjM0Mzg0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/343842?v=4","gravatar_id":"","url":"https://api.github.com/users/jpap","html_url":"https://github.com/jpap","followers_url":"https://api.github.com/users/jpap/followers","following_url":"https://api.github.com/users/jpap/following{/other_user}","gists_url":"https://api.github.com/users/jpap/gists{/gist_id}","starred_url":"https://api.github.com/users/jpap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpap/subscriptions","organizations_url":"https://api.github.com/users/jpap/orgs","repos_url":"https://api.github.com/users/jpap/repos","events_url":"https://api.github.com/users/jpap/events{/privacy}","received_events_url":"https://api.github.com/users/jpap/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399007,"node_id":"MDU6TGFiZWw4NjM5OTAwNw==","url":"https://api.github.com/repos/rclone/rclone/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null},{"id":306063207,"node_id":"MDU6TGFiZWwzMDYwNjMyMDc=","url":"https://api.github.com/repos/rclone/rclone/labels/Remote:%20Backblaze%20B2","name":"Remote: Backblaze B2","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/25","html_url":"https://github.com/rclone/rclone/milestone/25","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/25/labels","id":2395138,"node_id":"MDk6TWlsZXN0b25lMjM5NTEzOA==","number":25,"title":"v1.38","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":53,"state":"closed","created_at":"2017-03-18T12:00:38Z","updated_at":"2018-05-22T10:35:24Z","due_on":"2017-09-30T07:00:00Z","closed_at":"2017-09-30T13:33:53Z"},"comments":1,"created_at":"2017-07-22T04:24:32Z","updated_at":"2017-07-23T12:25:55Z","closed_at":"2017-07-23T12:02:44Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"As [discussed on the forum](https://forum.rclone.org/t/b2-delete-files-during-sync-and-without-cleanup/3179), it would be of benefit to have an opt-in for a `rclone sync` that permanently deletes files during a sync.  Presently files are hidden, and require a separate `cleanup` run to be removed permanently (see #462).\r\n\r\nThis would have a number of benefits:\r\n\r\n* Minimized bucket disk space (and storage cost) if there are large additions to the bucket during sync because we don't have to wait until the sync completes to recover the space with a cleanup.  This makes it more straightforward for a user implementing a backup system with quota, for example, by purging old backups stored locally prior to syncing.  On sync with `--delete-before`, the remote B2 bucket is then kept within a given quota (storage cost), for example the 10GB free tier.\r\n* By leveraging `--fast-list during` during the sync these file deletions are unmetered (i.e. no additional Class C transactions as `b2_delete_file_version` are free Class A).\r\n* Users do not have to separately run a `rclone cleanup`.","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/1547/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/1547/timeline","performed_via_github_app":null,"state_reason":"completed"}