[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/513906307","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-513906307","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":513906307,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzkwNjMwNw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T18:45:24Z","updated_at":"2019-07-22T18:45:24Z","body":"> As far as I can tell the cache can't actually do \"proper\" write caching with retention to quickly re-serve files that were recently written to a remote. Nor can the VFS cache apparently.\r\n\r\nThe VFS cache should keep files around until `--vfs-cache-max-age` or `--vfs-cache-max-size` is reached so I would have thought this would work with the VFS?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/513906307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/513952249","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-513952249","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":513952249,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzk1MjI0OQ==","user":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T20:59:08Z","updated_at":"2019-07-22T20:59:08Z","body":"Well, that's what I thought at first too...\r\n\r\nFirst I tried the cache backend's write mode, but as I explained that seems to delete the writes as soon as they are sent out from the cache, so that didn't do what I expected (and as a result I assumed it was implemented purely for error-safe uploads rather than cache retention).\r\n\r\nThen I tried testing the VFS with write caching, but that also didn't seem to do what I expected. Sure, you can make the uploaded files stay in the VFS using large age and size parameters, but when you try to re-download something you uploaded a few minutes ago (via the mounted drive) then it doesn't seem to redirect that request to the files in the VFS. The request goes to the cloud drive instead (Gdrive in my case) and the files(s) are just re-downloaded even though they already exist locally. That is of course entirely redundant and very inefficient - and completely against my assumption on how it would work.\r\n\r\nAs far as I can tell the only way to avoid redownloading recently uploads right now is to manually go into the VFS folder and copy the files from there, but that is so convoluted that I assume it's not how it was intended.\r\n\r\nI am 99% sure I already tested this thoroughly before making this issue, but if you want I would be happy to re-test and post a reproducible step-by-step of how the VFS fails to do what you say (and I thought) it should be doing. Just say the word.\r\n\r\nPersonally I would be happy with either the VFS or the cache backend having working write-caching with retention. Either would work for me. Doing it in the cache would probably be cleaner, safer (to not have unencrpyted files linger in write-cache) and more logical in terms of what modules do what. Doing it in the VFS would probably be faster and with less redundant local copying of files - and if the intention is to merge cache functionality into the VFS in the future it might make more sense to fix that then to do more work on the cache backend.\r\n\r\nIf I may ask - did you implement the VFS logic, or was that the work of another contributor?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/513952249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/515537551","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-515537551","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":515537551,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTUzNzU1MQ==","user":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T17:33:30Z","updated_at":"2019-07-26T17:38:29Z","body":"I have retested the VFS cache to be sure...\r\n\r\nIn short - the cache works as long as the file has not yet been uploaded to cloud. However, after the upload is complete I see in the log:\r\n2019/07/26 19:24:46 INFO  : BIGFILES: put: cache expired\r\n2019/07/26 19:24:46 INFO  : BIGFILES/BIGFILE.002: Copied (new)\r\n\r\nI assume this means the VFS is discarding that file as part of the cache and no longer refers to it (aka junk to be eventually cleaned up).\r\nAfter this, any attempt to re-download the file results in it being re-downloaded from the cloud (even though the file still exists within the VFS cache folder).\r\n\r\nI guess that is the problem.\r\nI don't see that I use any VFS settings that would cause this to happen, unless I am fundamentally misunderstanding something\r\nHere is the config used for testing:\r\n\r\n`[Teamdrive]\r\ntype = drive\r\nclient_id = [REDACTED]\r\nclient_secret = [REDACTED]\r\nscope = drive\r\ntoken = [REDACTED]\r\nupload_cutoff = 256M\r\nchunk_size = 256M`\r\n\r\n`[TeamdriveCache]\r\ntype = cache\r\nremote = Teamdrive:\r\nchunk_size = 32M\r\ninfo_age = 8760h\r\nchunk_total_size = 10G\r\ndb_path = C:\\---RCLONE_DB\r\nchunk_path = E:\\---RCLONE_CACHE\r\nchunk_clean_interval = 5m\r\nworkers = 4\r\ndb_wait_time = 1s`\r\n\r\nLaunch command:\r\n`rclone mount TeamdriveCache: X: ^\r\n--cache-dir \"E:\\---RCLONE_VFSCACHE\" ^\r\n--vfs-cache-mode writes ^\r\n--attr-timeout 1s ^\r\n--dir-cache-time 5m ^\r\n--vfs-cache-max-age 60m ^\r\n--vfs-cache-poll-interval 5m ^\r\n--vfs-cache-max-size 999G ^\r\n--track-renames ^\r\n--allow-other ^\r\n--transfers 4 ^\r\n--fast-list ^\r\n--stats 30s ^\r\n-v`\r\n\r\nStacked as:\r\nTeamdrive <-- Cache <-- Mount\r\n\r\nIn the documentation it does say something to the effect that the VFS cache in writes mode removes the files after upload unlike full. If so that would explain it, but I really don't see why that is needed. Full sucks because it can't stream or do a partial access, and I don't see any reason why write cache shouldn't be able to support writes retention in principle.\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/515537551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/515801147","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-515801147","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":515801147,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTgwMTE0Nw==","user":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-28T22:38:02Z","updated_at":"2019-07-28T22:38:02Z","body":"I sniffed around the pull requests and saw that Remus was involved in working on the cache backend about a half year ago. I don't know if he is the main architect behind the cache as a whole, but if I understand correctly he seems to have implemented temp-upload and cache-writes?\r\n\r\nI took the liberty of contacting him to see if he could confirm if the way I describe it functioning here is intentional or if it is actually a bug (or the result of me majorly misunderstanding something essential).\r\n\r\nI feel like ultimately it would be best if the VFS cache could do both read and write caching on it's own. It would certainly be a lot more efficient than doing it with 2 stacked backends and avoid a lot of unnecessary local copying of files, but that seems like a much larger and more complex problem to solve than just \"fixing\" the write caching issue in the existing cache. I have to defer on this to the people who are actually familiar with the code and/or know what the development plans are for Rclone going forward...","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/515801147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/516564207","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-516564207","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":516564207,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU2NDIwNw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T19:41:40Z","updated_at":"2019-07-30T19:41:40Z","body":"> I sniffed around the pull requests and saw that Remus was involved in working on the cache backend about a half year ago. I don't know if he is the main architect behind the cache as a whole, but if I understand correctly he seems to have implemented temp-upload and cache-writes?\r\n\r\nYes @remusb implemented the cache backend\r\n\r\n> I took the liberty of contacting him to see if he could confirm if the way I describe it functioning here is intentional or if it is actually a bug (or the result of me majorly misunderstanding something essential).\r\n> \r\n> I feel like ultimately it would be best if the VFS cache could do both read and write caching on it's own. It would certainly be a lot more efficient than doing it with 2 stacked backends and avoid a lot of unnecessary local copying of files, but that seems like a much larger and more complex problem to solve than just \"fixing\" the write caching issue in the existing cache. I have to defer on this to the people who are actually familiar with the code and/or know what the development plans are for Rclone going forward...\r\n\r\nI would like in the long run to unify the VFS cache and the cache backend. They do a very similar job.. The cache backend is a lot more sophisticated though, and can be used with `rclone sync` which the VFS cache can't.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/516564207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2521021995,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUyMTAyMTk5NQ==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2521021995","actor":{"login":"remusb","id":5675944,"node_id":"MDQ6VXNlcjU2NzU5NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5675944?v=4","gravatar_id":"","url":"https://api.github.com/users/remusb","html_url":"https://github.com/remusb","followers_url":"https://api.github.com/users/remusb/followers","following_url":"https://api.github.com/users/remusb/following{/other_user}","gists_url":"https://api.github.com/users/remusb/gists{/gist_id}","starred_url":"https://api.github.com/users/remusb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remusb/subscriptions","organizations_url":"https://api.github.com/users/remusb/orgs","repos_url":"https://api.github.com/users/remusb/repos","events_url":"https://api.github.com/users/remusb/events{/privacy}","received_events_url":"https://api.github.com/users/remusb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-30T19:41:41Z","performed_via_github_app":null},{"id":2521021996,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MjEwMjE5OTY=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2521021996","actor":{"login":"remusb","id":5675944,"node_id":"MDQ6VXNlcjU2NzU5NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5675944?v=4","gravatar_id":"","url":"https://api.github.com/users/remusb","html_url":"https://github.com/remusb","followers_url":"https://api.github.com/users/remusb/followers","following_url":"https://api.github.com/users/remusb/following{/other_user}","gists_url":"https://api.github.com/users/remusb/gists{/gist_id}","starred_url":"https://api.github.com/users/remusb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remusb/subscriptions","organizations_url":"https://api.github.com/users/remusb/orgs","repos_url":"https://api.github.com/users/remusb/repos","events_url":"https://api.github.com/users/remusb/events{/privacy}","received_events_url":"https://api.github.com/users/remusb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-30T19:41:41Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/516602872","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-516602872","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":516602872,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjYwMjg3Mg==","user":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T21:28:25Z","updated_at":"2019-07-30T21:28:25Z","body":"Well a VFS with integrated caching support for both reads and writes would be fantastic... if that's where you'd want to focus your effort (over the cache, especially when it's not your code) I'd support that decision even if it means it's going to take some time to happen.\r\n\r\nBut you made the VFS right, so could you at least confirm for me that it SHOULD be caching writes (beyond the upload completing)? Because as I said I can not get that to actually function after much testing. It looks to me like the VFS cache no longer considers a file part of it's cache after upload finishes so even if the file is still there it's \"dead\" and not actually used if you try to download it from the cloud again. I just don't know if this is by design, due to a bug, or due to some user-error on my part. Hope this isn't some windows quirk due to the differences in the mounting framework or something.\r\n\r\nSolving that issue with the VFS's write caching would be nice, because the cache backend can take care of the reads.\r\n\r\nUnfortunately no reply back from remusb - but we'll see what happens with that.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/516602872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/516616357","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-516616357","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":516616357,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjYxNjM1Nw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T22:14:23Z","updated_at":"2019-07-30T22:14:23Z","body":"> Well a VFS with integrated caching support for both reads and writes would be fantastic... if that's where you'd want to focus your effort (over the cache, especially when it's not your code) I'd support that decision even if it means it's going to take some time to happen.\r\n\r\n:-)\r\n\r\n> But you made the VFS right, so could you at least confirm for me that it SHOULD be caching writes (beyond the upload completing)? Because as I said I can not get that to actually function after much testing. It looks to me like the VFS cache no longer considers a file part of it's cache after upload finishes so even if the file is still there it's \"dead\" and not actually used if you try to download it from the cloud again. I just don't know if this is by design, due to a bug, or due to some user-error on my part. Hope this isn't some windows quirk due to the differences in the mounting framework or something.\r\n\r\nWith `--vfs-cache-mode writes` it doesn't remove the cached files until the cache expires.\r\n\r\nHowever (and this is the problem) if you try to open the file read only then it will stream it from the source rather than use the cached version.\r\n\r\nIf you open the file read/write you'll see something like this in the log\r\n\r\n    2019/07/30 23:06:18 DEBUG : ls(0xc000382120): Opened existing cached copy with flags=O_WRONLY|O_APPEND\r\n\r\nSo I think to solve the issue we would need to make sure that `--vfs-cache-mode writes` looks in the cache for existing files even for just read only operations.\r\n\r\nSo in this bit of code\r\n\r\nhttps://github.com/rclone/rclone/blob/c2635e39cc462210500bbcbab43147096c8cdd35/vfs/file.go#L570-L575\r\n\r\nrclone would need to take the f.openRW() branch if the file exists in the cache.\r\n\r\nThat probably isn't too tricky...\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/516616357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/516616488","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-516616488","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":516616488,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjYxNjQ4OA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T22:14:59Z","updated_at":"2019-07-30T22:14:59Z","body":"Shall I take over this issue to implement that?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/516616488/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/517050885","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-517050885","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":517050885,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzA1MDg4NQ==","user":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T22:48:40Z","updated_at":"2019-07-31T22:51:34Z","body":"Oh don't let me stop you :) Sounds like you know what to do here. It does seem like a simple change from the code, but I don't even have the software set up for code editing yet.\r\n\r\nIf you just make a test version I'd be happy to thoroughly beta it to make sure nothing unusual happens, although I don't really see much potential for it here.\r\n\r\nThis does seem like it would be a pretty powerful optimization boost with no downside to it as I can see at least. When files hit the VFS cache I might as well keep them around for a while if I have the space for it.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/517050885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2531322528,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI1MzEzMjI1Mjg=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2531322528","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"855578279f5b8e387466af96b81c9cb57e4997dc","commit_url":"https://api.github.com/repos/rclone/rclone/commits/855578279f5b8e387466af96b81c9cb57e4997dc","created_at":"2019-08-03T13:57:51Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/517926673","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-517926673","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":517926673,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzkyNjY3Mw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-03T13:59:19Z","updated_at":"2019-08-03T13:59:19Z","body":"OK I've ad a go at implementing that here.  I think it fixes the problem in my tests but I'd appreciate a double check - thanks!\r\n\r\nWell done for spotting this problem - fixing it will make --vfs-cache-modes writes perform much better! It might even fix some bugs.\r\n\r\nhttps://beta.rclone.org/branch/v1.48.0-103-g85557827-fix-3330-vfs-beta/ (uploaded in 15-30 mins)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/517926673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2531323482,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjUzMTMyMzQ4Mg==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2531323482","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2019-08-03T14:00:03Z","rename":{"from":"[enchancement request] add flag for cache backend to not delete writes after upload","to":"vfs: --vfs-cache-mode writes reads files from source even when they are in the VFS cache"},"performed_via_github_app":null},{"id":2531323547,"node_id":"MDEyOkxhYmVsZWRFdmVudDI1MzEzMjM1NDc=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2531323547","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-08-03T14:00:14Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":2531323548,"node_id":"MDEyOkxhYmVsZWRFdmVudDI1MzEzMjM1NDg=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2531323548","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-08-03T14:00:14Z","label":{"name":"VFS / mount","color":"0e8a16"},"performed_via_github_app":null},{"id":2531323560,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDI1MzEzMjM1NjA=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2531323560","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2019-08-03T14:00:18Z","milestone":{"title":"v1.49"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/517927922","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-517927922","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":517927922,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzkyNzkyMg==","user":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-03T14:18:20Z","updated_at":"2019-08-03T14:18:20Z","body":"Exellent! After I have finished working on another troubleshooting issue that I want to confirm with 1.48 stable I will give this a thorough test and probably just use this going forward in case any rare edge-cases should crop up.\r\n\r\nWill this be included in all \"latest beta\" builds going forward, or only merged at 1.49 ?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/517927922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/517948147","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-517948147","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":517948147,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzk0ODE0Nw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-03T19:16:19Z","updated_at":"2019-08-03T19:16:19Z","body":"After you've given it a test I'll merge it into the beta then it should be in 1.49","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/517948147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/518038433","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-518038433","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":518038433,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODAzODQzMw==","user":{"login":"darthShadow","id":6824881,"node_id":"MDQ6VXNlcjY4MjQ4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/6824881?v=4","gravatar_id":"","url":"https://api.github.com/users/darthShadow","html_url":"https://github.com/darthShadow","followers_url":"https://api.github.com/users/darthShadow/followers","following_url":"https://api.github.com/users/darthShadow/following{/other_user}","gists_url":"https://api.github.com/users/darthShadow/gists{/gist_id}","starred_url":"https://api.github.com/users/darthShadow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darthShadow/subscriptions","organizations_url":"https://api.github.com/users/darthShadow/orgs","repos_url":"https://api.github.com/users/darthShadow/repos","events_url":"https://api.github.com/users/darthShadow/events{/privacy}","received_events_url":"https://api.github.com/users/darthShadow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-04T21:38:02Z","updated_at":"2019-08-04T21:38:02Z","body":"Won't #2907 still prevent this from working properly for any case which involves renames?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/518038433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"darthShadow","id":6824881,"node_id":"MDQ6VXNlcjY4MjQ4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/6824881?v=4","gravatar_id":"","url":"https://api.github.com/users/darthShadow","html_url":"https://github.com/darthShadow","followers_url":"https://api.github.com/users/darthShadow/followers","following_url":"https://api.github.com/users/darthShadow/following{/other_user}","gists_url":"https://api.github.com/users/darthShadow/gists{/gist_id}","starred_url":"https://api.github.com/users/darthShadow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darthShadow/subscriptions","organizations_url":"https://api.github.com/users/darthShadow/orgs","repos_url":"https://api.github.com/users/darthShadow/repos","events_url":"https://api.github.com/users/darthShadow/events{/privacy}","received_events_url":"https://api.github.com/users/darthShadow/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/518052690","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-518052690","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":518052690,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODA1MjY5MA==","user":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T01:06:19Z","updated_at":"2019-08-05T01:06:19Z","body":"Sorry for taking my time with this, but I've given it a go now.\r\nInitial testing shows some wonky behavior.\r\n\r\nAfter clearing my caches (just to be safe) I've copied over\r\n- one folder with 100 small'ish jpgs\r\n- one folder with 2 x 1GB .bin files\r\nI observe the upload process making sure they have transfered, then wait a couple of minutes for good measure, then try to re-download from mount.\r\n\r\n**result:**\r\n- Folder with small files works consistently\r\n- Folder with large files fails (almost?) consistently and still redownloads from cloud. I think I saw one of the big files get referenced from cache once, but every other repeat of the test failed on large files.\r\n\r\nrclone v1.48.0-103-g85557827-fix-3330-vfs-beta\r\n- os/arch: windows/amd64\r\n- go version: go1.12.3\r\n\r\nIf you need logs of this, please specify the flags you think you need to look at.\r\nI will probably run some more tests on this tomorrow and see if I can spot anything spesific that triggers the buggy behavior.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/518052690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/518052938","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-518052938","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":518052938,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODA1MjkzOA==","user":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T01:08:52Z","updated_at":"2019-08-05T01:08:52Z","body":"> \r\n> \r\n> Won't #2907 still prevent this from working properly for any case which involves renames?\r\n\r\nI assume it will - but that seems kind of like a separate issue even if it is related. This issue only deals with the bug where rclone wasn't looking for the files in the cache in the fist place when accessed via read-only.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/518052938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/520149209","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-520149209","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":520149209,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDE0OTIwOQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-10T13:31:34Z","updated_at":"2019-08-10T13:31:34Z","body":"> If you need logs of this, please specify the flags you think you need to look at.\r\n\r\nSorry for the delay in replying.  Yes I'd love to see logs.  Not too bothered about the flags other than --vfs-cache-mode-writes.\r\n\r\nif you could do the smallest test which fails and attach that log, it would be perfect.\r\n\r\n\r\n\r\n> > Won't #2907 still prevent this from working properly for any case which involves renames?\r\n> \r\n> I assume it will - but that seems kind of like a separate issue even if it is related. This issue only deals with the bug where rclone wasn't looking for the files in the cache in the fist place when accessed via read-only.\r\n\r\nI'd forgotten about that issue...\r\n\r\nWhen we get round to #2907 I think it should improve things.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/520149209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/520155508","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-520155508","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":520155508,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDE1NTUwOA==","user":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-10T15:01:04Z","updated_at":"2019-08-10T15:02:51Z","body":"> Sorry for the delay in replying. Yes I'd love to see logs. Not too bothered about the flags other than --vfs-cache-mode-writes.\r\n> \r\n> if you could do the smallest test which fails and attach that log, it would be perfect.\r\n\r\nCopy that - will make it a priority. I find this a really important feature/fix personally.\r\nI was mostly thinking about \"dump\" flags (but maybe that is only relevant in communication wit hte server). I take it that normal debug will be ok then, unless you tell me otherwise.\r\n\r\nI will run some tests this evening (and tomorrow if needed) and try to narrow down the issue as much as I can on a dedicated test config and drive and see if it really is size related. If it is then I'm inclined to think it's some sort of timing issue rather than the actual size (ie. the large files take much longer to transfer) which maybe somehow could affect timestamps in an unintended way to cause this.\r\n\r\nIf you want to link the new code block that determines if the file is already in cache that might help me narrow down a probable cause.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/520155508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/520163556","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-520163556","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":520163556,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDE2MzU1Ng==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-10T16:46:17Z","updated_at":"2019-08-10T16:46:17Z","body":"> I take it that normal debug will be ok then, unless you tell me otherwise.\r\n\r\nJust with `-vv` should be fine.\r\n\r\n> If you want to link the new code block that determines if the file is already in cache that might help me narrow down a probable cause.\r\n\r\nIt is 85557827 - github normally auto links them - don't know why it didn't this time!\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/520163556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2579640292,"node_id":"MDExOkNsb3NlZEV2ZW50MjU3OTY0MDI5Mg==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2579640292","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"077b45322d892ce72dee253decaa83db57598a38","commit_url":"https://api.github.com/repos/rclone/rclone/commits/077b45322d892ce72dee253decaa83db57598a38","created_at":"2019-08-23T13:05:37Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/524308073","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-524308073","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":524308073,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDMwODA3Mw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-23T13:06:17Z","updated_at":"2019-08-23T13:06:17Z","body":"I did some testing of my own on this..\r\n\r\nI think with big files the issue is that the timestamp may be wrong, so rclone corrects it.  This does transactions with upstream and a local MD5SUM but doesn't re-download the file.\r\n\r\nHere is what happens on the first read\r\n\r\n```\r\n2019/08/23 14:00:31 DEBUG : 1GB: Open: flags=OpenReadOnly\r\n2019/08/23 14:00:31 DEBUG : 1GB: Open: flags=O_RDONLY\r\n2019/08/23 14:00:31 DEBUG : 1GB: >Open: fd=1GB (rw), err=<nil>\r\n2019/08/23 14:00:31 DEBUG : 1GB: >Open: fh=&{1GB (rw)}, err=<nil>\r\n2019/08/23 14:00:31 DEBUG : &{1GB (rw)}: Read: len=16384, offset=0\r\n2019/08/23 14:00:31 DEBUG : 1GB: Modification times differ by 8.228971778s: 2019-08-23 12:59:41.706 +0000 UTC, 2019-08-23 13:59:49.934971778 +0100 BST\r\n2019/08/23 14:00:33 DEBUG : 1GB: MD5 = e37115d4da0e187130ab645dee4f14ed OK\r\n2019/08/23 14:00:33 INFO  : 1GB: Updated modification time in destination\r\n2019/08/23 14:00:33 DEBUG : 1GB: Unchanged skipping\r\n2019/08/23 14:00:33 DEBUG : 1GB(0xc00074c540): Opened existing cached copy with flags=O_RDONLY\r\n```\r\n\r\nSubsequent ones do this\r\n\r\n```\r\n2019/08/23 14:01:28 DEBUG : 1GB: Size and modification time the same (differ by 0s, within tolerance 1ms)\r\n2019/08/23 14:01:28 DEBUG : 1GB: Unchanged skipping\r\n2019/08/23 14:01:28 DEBUG : 1GB(0xc0000c9ce0): Opened existing cached copy with flags=O_RDONLY\r\n```\r\n\r\nSo it still checks the object is up to date before opening.\r\n\r\nI'm confident enough in this that I've merged this to master now which means it will be in [the latest beta](https://beta.rclone.org) in 15-30 mins and released in v1.49.\r\n\r\nIf you can find problems though I'd be delighted to fix them :-)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/524308073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2579642084,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQyNTc5NjQyMDg0","url":"https://api.github.com/repos/rclone/rclone/issues/events/2579642084","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2019-08-23T13:06:18Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/524381489","html_url":"https://github.com/rclone/rclone/issues/3330#issuecomment-524381489","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3330","id":524381489,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDM4MTQ4OQ==","user":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-23T16:36:22Z","updated_at":"2019-08-23T16:36:22Z","body":"Will run some tests on the newest version and see if I can replicate the issue I saw with some proper logs. Sorry for being so sluggish in moving this forward. I've had a few too many balls in the air recently I think :)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/524381489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thestigma","id":11866923,"node_id":"MDQ6VXNlcjExODY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/11866923?v=4","gravatar_id":"","url":"https://api.github.com/users/thestigma","html_url":"https://github.com/thestigma","followers_url":"https://api.github.com/users/thestigma/followers","following_url":"https://api.github.com/users/thestigma/following{/other_user}","gists_url":"https://api.github.com/users/thestigma/gists{/gist_id}","starred_url":"https://api.github.com/users/thestigma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thestigma/subscriptions","organizations_url":"https://api.github.com/users/thestigma/orgs","repos_url":"https://api.github.com/users/thestigma/repos","events_url":"https://api.github.com/users/thestigma/events{/privacy}","received_events_url":"https://api.github.com/users/thestigma/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2586382607,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MjU4NjM4MjYwNw==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2586382607","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2019-08-27T09:22:48Z","milestone":{"title":"v1.49"},"performed_via_github_app":null}]