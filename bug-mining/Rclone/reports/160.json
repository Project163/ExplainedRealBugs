{"url":"https://api.github.com/repos/rclone/rclone/issues/513","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/513/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/513/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/513/events","html_url":"https://github.com/rclone/rclone/issues/513","id":159046070,"node_id":"MDU6SXNzdWUxNTkwNDYwNzA=","number":513,"title":"Change of Google Cloud Storage's JSON API ","user":{"login":"pjrobertson","id":150431,"node_id":"MDQ6VXNlcjE1MDQzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/150431?v=4","gravatar_id":"","url":"https://api.github.com/users/pjrobertson","html_url":"https://github.com/pjrobertson","followers_url":"https://api.github.com/users/pjrobertson/followers","following_url":"https://api.github.com/users/pjrobertson/following{/other_user}","gists_url":"https://api.github.com/users/pjrobertson/gists{/gist_id}","starred_url":"https://api.github.com/users/pjrobertson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjrobertson/subscriptions","organizations_url":"https://api.github.com/users/pjrobertson/orgs","repos_url":"https://api.github.com/users/pjrobertson/repos","events_url":"https://api.github.com/users/pjrobertson/events{/privacy}","received_events_url":"https://api.github.com/users/pjrobertson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/15","html_url":"https://github.com/rclone/rclone/milestone/15","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/15/labels","id":1680297,"node_id":"MDk6TWlsZXN0b25lMTY4MDI5Nw==","number":15,"title":"v1.30","description":"","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":37,"state":"closed","created_at":"2016-04-03T14:45:45Z","updated_at":"2016-06-18T16:52:15Z","due_on":null,"closed_at":"2016-06-18T16:52:15Z"},"comments":5,"created_at":"2016-06-07T23:17:37Z","updated_at":"2016-06-17T14:12:23Z","closed_at":"2016-06-09T17:00:19Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Using rclone v1.27 (originally on v1.07) on Linux 64 bit, connecting to Google Buckets.\nCommand is:\n`/rclone -v sync dir_to_sync google:google_bucket`\n\nHi all, apologies if this has already been answered/fixed.\nI have been using rclone to sync to Google's buckets for some time now, and yesterday I got an email from Google saying the software I was using to sync needs updating/adjusting.\nIs this something you guys are aware of/have already fixed? I was originally using rclone 1.07 and have just updated to v1.27, but I am unsure if the problem is fixed in this version.\n\nHere's the email:\n\n> Dear Google Cloud Storage JSON API customer,\n> \n> Important: An upcoming change to improve Google Cloud Storage's JSON API request validation will cause some of the types of object uploads that you have made recently to be rejected as invalid requests.\n> \n> Google Cloud Storage is making a bug-fix change to ensure that objects are always given the Content-Type intended by the uploader. You are being contacted as a project-owner of a project whose buckets have received upload requests in the last two weeks that would, under the new validation, be rejected because the Content-Type as specified by the media does not match the Content-Type as specified by the metadata. The following buckets, listed by project, have been identified as having received such upload requests:\n> \n> [my_bucket]\n> \n> If you upload content using:\n> \n> uploadType=media, there is nothing to address in that code path, as this upload type is not impacted by the change.\n> uploadType=multipart, then if you specify a contentType in the JSON body of the first part, and you specify a Content-Type header of the second part, and they do not match, the request will be rejected.\n> uploadType=resumable, then if you specify a contentType in the JSON body of the request to initiate the resumable upload session, and you specify a X-Upload-Content-Type header on that same request, and they do not match, the request will be rejected.\n> From our analysis, of the tiny fraction of customers who are affected by this change, all are using https://github.com/google/google-api-go-client. The Go client defaults to trying to auto-determine the > Content-Type of the Media provided for upload and often conflicts with any custom contentType that was provided in the object's metadata. This behavior can be suppressed with the MediaOptions.ContentType(\"\") as [described here](https://godoc.org/google.golang.org/api/googleapi#ContentType), with code that looks like:\n> \n> result, err := svc.Objects.Insert(\"BUCKET\", &storage.Object{Name: \"OBJECT\", ContentType:\"example/foo\"}).Media(file, googleapi.ContentType(\"\"))\n> \n> This capacity was added with [this commit](https://github.com/google/google-api-go-client/commit/e61f6e00cdf8b78313641288c50f6e2d4e3d749c), so update your Go client, and update your code.\n> \n> We plan to make the change on 1st August 2016. We are monitoring the requests that would be affected by this change, and will send out reminders leading up to the change date. If you have any questions or concerns, please do not hesitate to contact us.\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/513/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/513/timeline","performed_via_github_app":null,"state_reason":"completed"}