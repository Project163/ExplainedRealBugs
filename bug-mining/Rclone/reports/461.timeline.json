[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395459646","html_url":"https://github.com/rclone/rclone/issues/2336#issuecomment-395459646","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2336","id":395459646,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTQ1OTY0Ng==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T15:19:26Z","updated_at":"2018-06-07T15:19:26Z","body":"Does rclone work with these junctions without the shadow copy?\r\n\r\nI'm not 100% sure rclone's junction handling is correct...\r\n\r\nIt looks like from this message `Application Data: Clearing symlink bit to allow a file with reparse points to be copied` that rclone is treating the junction points as files then trying to read from them and blowing up with `The handle is invalid`.\r\n\r\nWhich must mean that here\r\n\r\nhttps://github.com/ncw/rclone/blob/05edb5f501a107e763e437322f269c6879b84de6/backend/local/local.go#L253-L267\r\n\r\nrclone isn't identifying these as directories.  Ie the go call `fi.IsDir()` says it is a file...\r\n\r\nI don't really have a clue about junction points or reparse points so I'd appreciate some help with this!\r\n\r\n\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395459646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1668861450,"node_id":"MDEyOkxhYmVsZWRFdmVudDE2Njg4NjE0NTA=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1668861450","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-06-07T15:19:32Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":1668861625,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE2Njg4NjE2MjU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1668861625","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-06-07T15:19:34Z","milestone":{"title":"v1.42"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395613897","html_url":"https://github.com/rclone/rclone/issues/2336#issuecomment-395613897","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2336","id":395613897,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTYxMzg5Nw==","user":{"login":"arfycat","id":3708619,"node_id":"MDQ6VXNlcjM3MDg2MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3708619?v=4","gravatar_id":"","url":"https://api.github.com/users/arfycat","html_url":"https://github.com/arfycat","followers_url":"https://api.github.com/users/arfycat/followers","following_url":"https://api.github.com/users/arfycat/following{/other_user}","gists_url":"https://api.github.com/users/arfycat/gists{/gist_id}","starred_url":"https://api.github.com/users/arfycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arfycat/subscriptions","organizations_url":"https://api.github.com/users/arfycat/orgs","repos_url":"https://api.github.com/users/arfycat/repos","events_url":"https://api.github.com/users/arfycat/events{/privacy}","received_events_url":"https://api.github.com/users/arfycat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-08T01:08:51Z","updated_at":"2018-06-08T01:08:51Z","body":"Its not working outside of the shadow copy either.  I created absolute and relative junctions, directory symlinks, and file symlinks:\r\n\r\n```\r\n Directory of C:\\Users\\meow\\Temp\r\n\r\n06/07/2018  08:44 PM    <DIR>          .\r\n06/07/2018  08:44 PM    <DIR>          ..\r\n06/07/2018  08:44 PM    <JUNCTION>     junction-rel-test1 [C:\\Users\\meow\\Temp\\test1]\r\n06/07/2018  08:37 PM    <JUNCTION>     junction-test1 [C:\\Users\\meow\\Temp\\test1]\r\n06/07/2018  08:44 PM    <SYMLINKD>     symlink-rel-test1 [test1]\r\n06/07/2018  08:38 PM    <SYMLINKD>     symlink-test1 [C:\\Users\\meow\\Temp\\test1]\r\n06/07/2018  08:38 PM    <SYMLINK>      symlink-test2.txt [test2.txt]\r\n06/07/2018  08:38 PM    <DIR>          test1\r\n06/07/2018  08:39 PM                 5 test2.txt\r\n               2 File(s)              5 bytes\r\n\r\n Directory of C:\\Users\\meow\\Temp\\test1\r\n\r\n06/07/2018  08:38 PM    <DIR>          .\r\n06/07/2018  08:38 PM    <DIR>          ..\r\n06/07/2018  08:38 PM                 5 test1.txt\r\n```\r\n\r\nAnd then sync'ed the directory against Google Drive:.  The directory junctions and symlinks cause errors, the file symlinks work OK - they're skipped without error.\r\n\r\n> rclone sync C:\\\\Users\\\\meow\\\\Temp GoogleDrive-dds11:/temp --skip-links --delete-during --delete-excluded -vv --track-renames --fast-list --local-no-check-updated\r\n\r\n```\r\n2018/06/07 20:50:12 DEBUG : rclone: Version \"v1.41\" starting with parameters [\"C:\\\\Users\\\\meow\\\\Google Drive\\\\Program Files\\\\rclone\\\\rclone.exe\" \"sync\" \"C:\\\\Users\\\\meow\\\\Temp\" \"GoogleDrive-dds11:/temp\" \"--skip-links\" \"--delete-du ring\" \"--delete-excluded\" \"-vv\" \"--track-renames\" \"--fast-list\" \"--local-no-check-updated\"]\r\n2018/06/07 20:50:12 DEBUG : Using config file from \"C:\\\\Users\\\\meow\\\\.config\\\\rclone\\\\rclone.conf\"\r\n2018/06/07 20:50:12 INFO  : Google drive root 'temp': Modify window is 1ms\r\n2018/06/07 20:50:12 DEBUG : junction-rel-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:12 DEBUG : junction-rel-test2.txt: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:12 DEBUG : junction-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:12 DEBUG : symlink-rel-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:12 DEBUG : symlink-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:12 DEBUG : symlink-test2.txt: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:13 DEBUG : test2.txt: Size and modification time the same (differ by -687.8µs, within tolerance 1ms)\r\n2018/06/07 20:50:13 DEBUG : test2.txt: Unchanged skipping\r\n2018/06/07 20:50:13 DEBUG : test1/test1.txt: Size and modification time the same (differ by -19.2µs, within tolerance 1ms)\r\n2018/06/07 20:50:13 DEBUG : test1/test1.txt: Unchanged skipping\r\n2018/06/07 20:50:13 INFO  : Google drive root 'temp': Making map for --track-renames\r\n2018/06/07 20:50:13 INFO  : Google drive root 'temp': Finished making map for --track-renames\r\n2018/06/07 20:50:13 INFO  : Google drive root 'temp': Waiting for checks to finish\r\n2018/06/07 20:50:13 INFO  : Google drive root 'temp': Waiting for renames to finish\r\n2018/06/07 20:50:13 DEBUG : junction-rel-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\junction-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:13 DEBUG : symlink-rel-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:13 DEBUG : symlink-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-test1: The handle is invalid.\r\n2018/06/07 20:50:13 DEBUG : junction-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\junction-test1: The handle is invalid.\r\n2018/06/07 20:50:13 INFO  : Google drive root 'temp': Waiting for transfers to finish\r\n2018/06/07 20:50:13 ERROR : junction-rel-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\junction-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:13 ERROR : symlink-rel-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:13 ERROR : symlink-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-test1: The handle is invalid.\r\n2018/06/07 20:50:13 ERROR : junction-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\junction-test1: The handle is invalid.\r\n2018/06/07 20:50:14 ERROR : junction-rel-test2.txt: corrupted on transfer: sizes differ 0 vs 5\r\n2018/06/07 20:50:14 INFO  : junction-rel-test2.txt: Removing failed copy\r\n2018/06/07 20:50:14 ERROR : symlink-test2.txt: corrupted on transfer: sizes differ 0 vs 5\r\n2018/06/07 20:50:14 INFO  : symlink-test2.txt: Removing failed copy\r\n2018/06/07 20:50:17 INFO  : Thumbs.db: Copied (new)\r\n2018/06/07 20:50:17 ERROR : Google drive root 'temp': not deleting files as there were IO errors\r\n2018/06/07 20:50:17 ERROR : Google drive root 'temp': not deleting directories as there were IO errors\r\n2018/06/07 20:50:17 ERROR : Attempt 1/3 failed with 6 errors and: corrupted on transfer: sizes differ 0 vs 5\r\n2018/06/07 20:50:17 DEBUG : junction-rel-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:17 DEBUG : junction-rel-test2.txt: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:17 DEBUG : junction-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:17 DEBUG : symlink-rel-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:17 DEBUG : symlink-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:17 DEBUG : symlink-test2.txt: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:17 DEBUG : test2.txt: Size and modification time the same (differ by -687.8µs, within tolerance 1ms)\r\n2018/06/07 20:50:17 DEBUG : test2.txt: Unchanged skipping\r\n2018/06/07 20:50:17 DEBUG : Thumbs.db: Size and modification time the same (differ by 0s, within tolerance 1ms)\r\n2018/06/07 20:50:17 DEBUG : Thumbs.db: Unchanged skipping\r\n2018/06/07 20:50:17 DEBUG : test1/test1.txt: Size and modification time the same (differ by -19.2µs, within tolerance 1ms)\r\n2018/06/07 20:50:17 DEBUG : test1/test1.txt: Unchanged skipping\r\n2018/06/07 20:50:17 INFO  : Google drive root 'temp': Making map for --track-renames\r\n2018/06/07 20:50:17 INFO  : Google drive root 'temp': Finished making map for --track-renames\r\n2018/06/07 20:50:17 INFO  : Google drive root 'temp': Waiting for checks to finish\r\n2018/06/07 20:50:17 INFO  : Google drive root 'temp': Waiting for renames to finish\r\n2018/06/07 20:50:17 DEBUG : symlink-rel-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:17 DEBUG : junction-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\junction-test1: The handle is invalid.\r\n2018/06/07 20:50:17 DEBUG : junction-rel-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\junction-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:17 DEBUG : symlink-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-test1: The handle is invalid.\r\n2018/06/07 20:50:17 INFO  : Google drive root 'temp': Waiting for transfers to finish\r\n2018/06/07 20:50:18 ERROR : symlink-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-test1: The handle is invalid.\r\n2018/06/07 20:50:18 ERROR : symlink-rel-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:18 ERROR : junction-rel-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\junction-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:18 ERROR : junction-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\junction-test1: The handle is invalid.\r\n2018/06/07 20:50:19 ERROR : symlink-test2.txt: corrupted on transfer: sizes differ 0 vs 5\r\n2018/06/07 20:50:19 INFO  : symlink-test2.txt: Removing failed copy\r\n2018/06/07 20:50:19 ERROR : junction-rel-test2.txt: corrupted on transfer: sizes differ 0 vs 5\r\n2018/06/07 20:50:19 INFO  : junction-rel-test2.txt: Removing failed copy\r\n2018/06/07 20:50:20 ERROR : Google drive root 'temp': not deleting files as there were IO errors\r\n2018/06/07 20:50:20 ERROR : Google drive root 'temp': not deleting directories as there were IO errors\r\n2018/06/07 20:50:20 ERROR : Attempt 2/3 failed with 6 errors and: corrupted on transfer: sizes differ 0 vs 5\r\n2018/06/07 20:50:20 DEBUG : junction-rel-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:20 DEBUG : junction-rel-test2.txt: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:20 DEBUG : junction-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:20 DEBUG : symlink-rel-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:20 DEBUG : symlink-test1: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:20 DEBUG : symlink-test2.txt: Clearing symlink bit to allow a file with reparse points to be copied\r\n2018/06/07 20:50:20 DEBUG : test2.txt: Size and modification time the same (differ by -687.8µs, within tolerance 1ms)\r\n2018/06/07 20:50:20 DEBUG : test2.txt: Unchanged skipping\r\n2018/06/07 20:50:20 DEBUG : Thumbs.db: Size and modification time the same (differ by 0s, within tolerance 1ms)\r\n2018/06/07 20:50:20 DEBUG : Thumbs.db: Unchanged skipping\r\n2018/06/07 20:50:20 DEBUG : test1/test1.txt: Size and modification time the same (differ by -19.2µs, within tolerance 1ms)\r\n2018/06/07 20:50:20 DEBUG : test1/test1.txt: Unchanged skipping\r\n2018/06/07 20:50:20 INFO  : Google drive root 'temp': Making map for --track-renames\r\n2018/06/07 20:50:20 INFO  : Google drive root 'temp': Finished making map for --track-renames\r\n2018/06/07 20:50:20 INFO  : Google drive root 'temp': Waiting for checks to finish\r\n2018/06/07 20:50:20 INFO  : Google drive root 'temp': Waiting for renames to finish\r\n2018/06/07 20:50:20 DEBUG : symlink-rel-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:20 DEBUG : symlink-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-test1: The handle is invalid.\r\n2018/06/07 20:50:20 DEBUG : junction-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\junction-test1: The handle is invalid.\r\n2018/06/07 20:50:20 DEBUG : junction-rel-test1: Hash failed: hash: failed to read: read \\\\?\\C:\\Users\\meow\\Temp\\junction-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:20 INFO  : Google drive root 'temp': Waiting for transfers to finish\r\n2018/06/07 20:50:20 ERROR : symlink-rel-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:20 ERROR : symlink-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\symlink-test1: The handle is invalid.\r\n2018/06/07 20:50:20 ERROR : junction-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\junction-test1: The handle is invalid.\r\n2018/06/07 20:50:21 ERROR : junction-rel-test1: Failed to copy: read \\\\?\\C:\\Users\\meow\\Temp\\junction-rel-test1: The handle is invalid.\r\n2018/06/07 20:50:21 ERROR : symlink-test2.txt: corrupted on transfer: sizes differ 0 vs 5\r\n2018/06/07 20:50:21 INFO  : symlink-test2.txt: Removing failed copy\r\n2018/06/07 20:50:21 ERROR : junction-rel-test2.txt: corrupted on transfer: sizes differ 0 vs 5\r\n2018/06/07 20:50:21 INFO  : junction-rel-test2.txt: Removing failed copy\r\n2018/06/07 20:50:22 ERROR : Google drive root 'temp': not deleting files as there were IO errors\r\n2018/06/07 20:50:22 ERROR : Google drive root 'temp': not deleting directories as there were IO errors\r\n2018/06/07 20:50:22 ERROR : Attempt 3/3 failed with 6 errors and: corrupted on transfer: sizes differ 0 vs 5\r\n2018/06/07 20:50:22 Failed to sync: corrupted on transfer: sizes differ 0 vs 5\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395613897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"arfycat","id":3708619,"node_id":"MDQ6VXNlcjM3MDg2MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3708619?v=4","gravatar_id":"","url":"https://api.github.com/users/arfycat","html_url":"https://github.com/arfycat","followers_url":"https://api.github.com/users/arfycat/followers","following_url":"https://api.github.com/users/arfycat/following{/other_user}","gists_url":"https://api.github.com/users/arfycat/gists{/gist_id}","starred_url":"https://api.github.com/users/arfycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arfycat/subscriptions","organizations_url":"https://api.github.com/users/arfycat/orgs","repos_url":"https://api.github.com/users/arfycat/repos","events_url":"https://api.github.com/users/arfycat/events{/privacy}","received_events_url":"https://api.github.com/users/arfycat/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395764789","html_url":"https://github.com/rclone/rclone/issues/2336#issuecomment-395764789","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2336","id":395764789,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTc2NDc4OQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-08T13:43:36Z","updated_at":"2018-06-08T13:43:36Z","body":"Thanks for doing that test\r\n\r\n> Its not working outside of the shadow copy either.\r\n\r\nThat makes sense\r\n\r\n> I created absolute and relative junctions, directory symlinks, and file symlinks:\r\n\r\nHow did you create them? With `mklink`?  If you could paste the exact commands I can have a go at replicating the problem here.\r\n\r\n> And then sync'ed the directory against Google Drive:. The directory junctions and symlinks cause errors, the file symlinks work OK - they're skipped without error.\r\n\r\nI think rclone is mis-identifying the directory junctions and symlinks as files\r\n\r\nCan you run this program with the test symlinks/junction points as an argument and it will print out what go thinks of them.\r\n\r\nhttps://pub.rclone.org/stat.zip\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395764789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1671041526,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE2NzEwNDE1MjY=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1671041526","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"01938e4ddd47668e32bc267214dfa3826b532fcf","commit_url":"https://api.github.com/repos/rclone/rclone/commits/01938e4ddd47668e32bc267214dfa3826b532fcf","created_at":"2018-06-08T14:31:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395779779","html_url":"https://github.com/rclone/rclone/issues/2336#issuecomment-395779779","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2336","id":395779779,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTc3OTc3OQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-08T14:33:21Z","updated_at":"2018-06-08T14:33:21Z","body":"I managed to make some symlinks and junction points with `mklink`.\r\n\r\nI think what I need to do is revert 3e43ff7414b73f0d567da059ad6b86b793a2a538\r\n\r\nThis will cause all junction points etc to be skipped without the use of the `-L` flag.\r\n\r\nThis will mean that #614 breaks, meaning that files with reparse points won't copy. However there is a work-around now with the `-L` flag which was implemented in 94947f2523a0f137d9b741221c5bf271eed214c9.\r\n\r\nHere is a beta to try with that fix in\r\n\r\nhttps://beta.rclone.org/v1.41-090-g01938e4d-windows-symlinks/ (uploaded in 15-30 mins)\r\n\r\nThis is a potentially backwards incompatible change (which I hate doing) meaning that files which were being copies (files with reparse points) will stop being copied unless you use the `-L` flag.  Rclone will warn about this so it should be reasonably obvious to the user.  Your opinions on that would be appreciated.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395779779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395920087","html_url":"https://github.com/rclone/rclone/issues/2336#issuecomment-395920087","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2336","id":395920087,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTkyMDA4Nw==","user":{"login":"arfycat","id":3708619,"node_id":"MDQ6VXNlcjM3MDg2MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3708619?v=4","gravatar_id":"","url":"https://api.github.com/users/arfycat","html_url":"https://github.com/arfycat","followers_url":"https://api.github.com/users/arfycat/followers","following_url":"https://api.github.com/users/arfycat/following{/other_user}","gists_url":"https://api.github.com/users/arfycat/gists{/gist_id}","starred_url":"https://api.github.com/users/arfycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arfycat/subscriptions","organizations_url":"https://api.github.com/users/arfycat/orgs","repos_url":"https://api.github.com/users/arfycat/repos","events_url":"https://api.github.com/users/arfycat/events{/privacy}","received_events_url":"https://api.github.com/users/arfycat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-08T23:42:13Z","updated_at":"2018-06-08T23:42:13Z","body":"Output of stat against the various links:\r\n\r\n```\r\nC:\\Users\\meow\\Temp>\"..\\Google Drive\\Program Files\\rclone\\stat.exe\" junction-rel-test1\r\nName = \"junction-rel-test1\"\r\nSize = 0\r\nMode = 0x80001B6\r\nModTime = 2018-06-07 20:44:33.1968217 -0400 EDT\r\nIsDir = false\r\nSys = &{1040 {3725948633 30670529} {3725948633 30670529} {3725948633 30670529} 0 0}\r\n\r\nC:\\Users\\meow\\Temp>\"..\\Google Drive\\Program Files\\rclone\\stat.exe\" junction-rel-test2.txt\r\nName = \"junction-rel-test2.txt\"\r\nSize = 0\r\nMode = 0x80001B6\r\nModTime = 2018-06-07 20:48:29.6590088 -0400 EDT\r\nIsDir = false\r\nSys = &{1056 {1795603208 30670530} {1795603208 30670530} {1795603208 30670530} 0 0}\r\n\r\nC:\\Users\\meow\\Temp>\"..\\Google Drive\\Program Files\\rclone\\stat.exe\" junction-test1\r\nName = \"junction-test1\"\r\nSize = 0\r\nMode = 0x80001B6\r\nModTime = 2018-06-07 20:37:08.9082674 -0400 EDT\r\nIsDir = false\r\nSys = &{1040 {3578030386 30670528} {3578030386 30670528} {3578030386 30670528} 0 0}\r\n\r\nC:\\Users\\meow\\Temp>\"..\\Google Drive\\Program Files\\rclone\\stat.exe\" symlink-rel-test1\r\nName = \"symlink-rel-test1\"\r\nSize = 0\r\nMode = 0x80001B6\r\nModTime = 2018-06-07 20:44:22.1283705 -0400 EDT\r\nIsDir = false\r\nSys = &{1040 {3615264121 30670529} {3615264121 30670529} {3615264121 30670529} 0 0}\r\n\r\nC:\\Users\\meow\\Temp>\"..\\Google Drive\\Program Files\\rclone\\stat.exe\" symlink-test1\r\nName = \"symlink-test1\"\r\nSize = 0\r\nMode = 0x80001B6\r\nModTime = 2018-06-07 20:38:48.5403236 -0400 EDT\r\nIsDir = false\r\nSys = &{1040 {279383652 30670529} {279383652 30670529} {279383652 30670529} 0 0}\r\n\r\nC:\\Users\\meow\\Temp>\"..\\Google Drive\\Program Files\\rclone\\stat.exe\" symlink-test2.txt\r\nName = \"symlink-test2.txt\"\r\nSize = 0\r\nMode = 0x80001B6\r\nModTime = 2018-06-07 20:38:25.485715 -0400 EDT\r\nIsDir = false\r\nSys = &{1056 {48837566 30670529} {48837566 30670529} {48837566 30670529} 0 0}\r\n\r\nC:\\Users\\meow\\Temp>dir\r\n Volume in drive C has no label.\r\n Volume Serial Number is B21D-ADDC\r\n\r\n Directory of C:\\Users\\meow\\Temp\r\n\r\n06/07/2018  08:48 PM    <DIR>          .\r\n06/07/2018  08:48 PM    <DIR>          ..\r\n06/07/2018  08:44 PM    <JUNCTION>     junction-rel-test1 [C:\\Users\\meow\\Temp\\test1]\r\n06/07/2018  08:48 PM    <SYMLINK>      junction-rel-test2.txt [test2.txt]\r\n06/07/2018  08:37 PM    <JUNCTION>     junction-test1 [C:\\Users\\meow\\Temp\\test1]\r\n06/07/2018  08:44 PM    <SYMLINKD>     symlink-rel-test1 [test1]\r\n06/07/2018  08:38 PM    <SYMLINKD>     symlink-test1 [C:\\Users\\meow\\Temp\\test1]\r\n06/07/2018  08:38 PM    <SYMLINK>      symlink-test2.txt [test2.txt]\r\n06/07/2018  08:38 PM    <DIR>          test1\r\n06/07/2018  08:39 PM                 5 test2.txt\r\n               3 File(s)              5 bytes\r\n               7 Dir(s)  250,803,855,360 bytes free\r\n```\r\n\r\nAdditionally, running the beta against the files above yields the expected results:\r\n\r\n```\r\n2018/06/08 19:08:55 DEBUG : rclone: Version \"v1.41-090-g01938e4d-windows-symlinks\" starting with parameters [\"C:\\\\Users\\\\meow\\\\Google Drive\\\\Program Files\\\\rclone\\\\rclone.exe\" \"sync\" \"C:\\\\Users\\\\meow\\\\Temp\" \"GoogleDrive-dds11:/temp\" \"--skip-links\" \"--delete-during\" \"--delete-excluded\" \"-vv\" \"--track-renames\" \"--fast-list\" \"--local-no-check-updated\"]\r\n2018/06/08 19:08:55 DEBUG : Using config file from \"C:\\\\Users\\\\meow\\\\.config\\\\rclone\\\\rclone.conf\"\r\n2018/06/08 19:08:55 DEBUG : Keeping previous permissions for config file: -rw-rw-rw-\r\n2018/06/08 19:08:55 DEBUG : GoogleDrive-dds11: Saved new token in config file\r\n2018/06/08 19:08:56 DEBUG : test2.txt: Size and modification time the same (differ by -687.8µs, within tolerance 1ms)\r\n2018/06/08 19:08:56 DEBUG : test2.txt: Unchanged skipping\r\n2018/06/08 19:08:56 DEBUG : test1/test1.txt: Size and modification time the same (differ by -19.2µs, within tolerance 1ms)\r\n2018/06/08 19:08:56 DEBUG : test1/test1.txt: Unchanged skipping\r\n2018/06/08 19:08:56 INFO  : Google drive root 'temp': Making map for --track-renames\r\n2018/06/08 19:08:56 INFO  : Google drive root 'temp': Finished making map for --track-renames\r\n2018/06/08 19:08:56 INFO  : Google drive root 'temp': Waiting for checks to finish\r\n2018/06/08 19:08:56 INFO  : Google drive root 'temp': Waiting for renames to finish\r\n2018/06/08 19:08:56 INFO  : Google drive root 'temp': Waiting for transfers to finish\r\n2018/06/08 19:09:00 INFO  : Thumbs.db: Copied (new)\r\n2018/06/08 19:09:00 INFO  : Waiting for deletions to finish\r\n2018/06/08 19:09:00 INFO  :\r\nTransferred:   3.198 MBytes (589.642 kBytes/s)\r\nErrors:                 0\r\nChecks:                 3\r\nTransferred:            1\r\nElapsed time:        5.5s\r\n\r\n2018/06/08 19:09:00 DEBUG : 6 go routines active\r\n2018/06/08 19:09:00 DEBUG : rclone: Version \"v1.41-090-g01938e4d-windows-symlinks\" finishing with parameters [\"C:\\\\Users\\\\meow\\\\Google Drive\\\\Program Files\\\\rclone\\\\rclone.exe\" \"sync\" \"C:\\\\Users\\\\meow\\\\Temp\" \"GoogleDrive-dds11:/temp\" \"--skip-links\" \"--delete-during\" \"--delete-excluded\" \"-vv\" \"--track-renames\" \"--fast-list\" \"--local-no-check-updated\"]\r\n```\r\n\r\nIt works as expected with -L - the files plus the various links appear in Google Drive:\r\n\r\n```\r\n2018/06/08 19:25:40 DEBUG : rclone: Version \"v1.41-090-g01938e4d-windows-symlinks\" starting with parameters [\"C:\\\\Users\\\\meow\\\\Google Drive\\\\Program Files\\\\rclone\\\\rclone.exe\" \"sync\" \"C:\\\\Users\\\\meow\\\\Temp\" \"GoogleDrive-dds11:/temp\" \"-L\" \"--delete-during\" \"--delete-excluded\" \"-vv\" \"--track-renames\" \"--fast-list\" \"--local-no-check-updated\"]\r\n2018/06/08 19:25:40 DEBUG : Using config file from \"C:\\\\Users\\\\meow\\\\.config\\\\rclone\\\\rclone.conf\"\r\n2018/06/08 19:25:41 DEBUG : Thumbs.db: Size and modification time the same (differ by 0s, within tolerance 1ms)\r\n2018/06/08 19:25:41 DEBUG : Thumbs.db: Unchanged skipping\r\n2018/06/08 19:25:41 DEBUG : test2.txt: Size and modification time the same (differ by -687.8µs, within tolerance 1ms)\r\n2018/06/08 19:25:41 DEBUG : test2.txt: Unchanged skipping\r\n2018/06/08 19:25:41 DEBUG : test1/test1.txt: Size and modification time the same (differ by -19.2µs, within tolerance 1ms)\r\n2018/06/08 19:25:41 DEBUG : test1/test1.txt: Unchanged skipping\r\n2018/06/08 19:25:41 INFO  : Google drive root 'temp': Making map for --track-renames\r\n2018/06/08 19:25:41 INFO  : Google drive root 'temp': Finished making map for --track-renames\r\n2018/06/08 19:25:41 INFO  : Google drive root 'temp': Waiting for checks to finish\r\n2018/06/08 19:25:41 INFO  : Google drive root 'temp': Waiting for renames to finish\r\n2018/06/08 19:25:41 INFO  : Google drive root 'temp': Waiting for transfers to finish\r\n2018/06/08 19:25:43 INFO  : junction-test1/test1.txt: Copied (new)\r\n2018/06/08 19:25:45 INFO  : symlink-rel-test1/test1.txt: Copied (new)\r\n2018/06/08 19:25:45 INFO  : symlink-test2.txt: Copied (new)\r\n2018/06/08 19:25:47 INFO  : junction-rel-test1/test1.txt: Copied (new)\r\n2018/06/08 19:25:47 INFO  : junction-rel-test2.txt: Copied (new)\r\n2018/06/08 19:25:48 INFO  : symlink-test1/test1.txt: Copied (new)\r\n2018/06/08 19:25:48 INFO  : Waiting for deletions to finish\r\n2018/06/08 19:25:48 INFO  :\r\nTransferred:     30 Bytes (3 Bytes/s)\r\nErrors:                 0\r\nChecks:                 9\r\nTransferred:            6\r\nElapsed time:        7.5s\r\n\r\n2018/06/08 19:25:48 DEBUG : 10 go routines active\r\n2018/06/08 19:25:48 DEBUG : rclone: Version \"v1.41-090-g01938e4d-windows-symlinks\" finishing with parameters [\"C:\\\\Users\\\\meow\\\\Google Drive\\\\Program Files\\\\rclone\\\\rclone.exe\" \"sync\" \"C:\\\\Users\\\\meow\\\\Temp\" \"GoogleDrive-dds11:/temp\" \"-L\" \"--delete-during\" \"--delete-excluded\" \"-vv\" \"--track-renames\" \"--fast-list\" \"--local-no-check-updated\"]\r\n```\r\n\r\nI'll give it a try in a bit as well on the original user directory I was trying to sync.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395920087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"arfycat","id":3708619,"node_id":"MDQ6VXNlcjM3MDg2MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3708619?v=4","gravatar_id":"","url":"https://api.github.com/users/arfycat","html_url":"https://github.com/arfycat","followers_url":"https://api.github.com/users/arfycat/followers","following_url":"https://api.github.com/users/arfycat/following{/other_user}","gists_url":"https://api.github.com/users/arfycat/gists{/gist_id}","starred_url":"https://api.github.com/users/arfycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arfycat/subscriptions","organizations_url":"https://api.github.com/users/arfycat/orgs","repos_url":"https://api.github.com/users/arfycat/repos","events_url":"https://api.github.com/users/arfycat/events{/privacy}","received_events_url":"https://api.github.com/users/arfycat/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395952811","html_url":"https://github.com/rclone/rclone/issues/2336#issuecomment-395952811","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2336","id":395952811,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTk1MjgxMQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-09T08:58:47Z","updated_at":"2018-06-09T08:58:47Z","body":"> Output of stat against the various links:\r\n\r\nThanks for that.  You can see that go thinks they are all files which is causing the problem in rclone.\r\n\r\n> Additionally, running the beta against the files above yields the expected results:\r\n\r\nI would have expected to see `Can't follow symlink without -L/--copy-links` warnings in the log... Oh I see you put `--skip-links` in the command line.  Can you try it without just to check the warning appears?\r\n\r\n> I'll give it a try in a bit as well on the original user directory I was trying to sync.\r\n\r\nLet me know if that worked OK!\r\n\r\nThanks\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/395952811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/396012799","html_url":"https://github.com/rclone/rclone/issues/2336#issuecomment-396012799","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2336","id":396012799,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NjAxMjc5OQ==","user":{"login":"arfycat","id":3708619,"node_id":"MDQ6VXNlcjM3MDg2MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3708619?v=4","gravatar_id":"","url":"https://api.github.com/users/arfycat","html_url":"https://github.com/arfycat","followers_url":"https://api.github.com/users/arfycat/followers","following_url":"https://api.github.com/users/arfycat/following{/other_user}","gists_url":"https://api.github.com/users/arfycat/gists{/gist_id}","starred_url":"https://api.github.com/users/arfycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arfycat/subscriptions","organizations_url":"https://api.github.com/users/arfycat/orgs","repos_url":"https://api.github.com/users/arfycat/repos","events_url":"https://api.github.com/users/arfycat/events{/privacy}","received_events_url":"https://api.github.com/users/arfycat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-10T01:43:49Z","updated_at":"2018-06-10T01:43:49Z","body":"The full sync worked fine, it skipped all the junctions.  And here's the output without --skip-links for the junctions I made in the temp directory:\r\n\r\n```\r\n2018/06/09 21:27:00 DEBUG : rclone: Version \"v1.41-090-g01938e4d-windows-symlinks\" starting with parameters [\"C:\\\\Users\\\\meow\\\\Google Drive\\\\Program Files\\\\rclone\\\\rclone.exe\" \"sync\" \"C:\\\\Users\\\\meow\\\\Temp\" \"GoogleDrive-dds11:/temp\" \"--delete-during\" \"--delete-excluded\" \"-vv\" \"--track-renames\" \"--fast-list\" \"--local-no-check-updated\"]\r\n2018/06/09 21:27:00 DEBUG : Using config file from \"C:\\\\Users\\\\meow\\\\.config\\\\rclone\\\\rclone.conf\"\r\n2018/06/09 21:27:00 DEBUG : Keeping previous permissions for config file: -rw-rw-rw-\r\n2018/06/09 21:27:00 DEBUG : GoogleDrive-dds11: Saved new token in config file\r\n2018/06/09 21:27:00 NOTICE: junction-rel-test1: Can't follow symlink without -L/--copy-links\r\n2018/06/09 21:27:00 NOTICE: junction-rel-test2.txt: Can't follow symlink without -L/--copy-links\r\n2018/06/09 21:27:00 NOTICE: junction-test1: Can't follow symlink without -L/--copy-links\r\n2018/06/09 21:27:00 NOTICE: symlink-rel-test1: Can't follow symlink without -L/--copy-links\r\n2018/06/09 21:27:00 NOTICE: symlink-test1: Can't follow symlink without -L/--copy-links\r\n2018/06/09 21:27:00 NOTICE: symlink-test2.txt: Can't follow symlink without -L/--copy-links\r\n2018/06/09 21:27:01 DEBUG : Thumbs.db: Size and modification time the same (differ by 0s, within tolerance 1ms)\r\n2018/06/09 21:27:01 DEBUG : Thumbs.db: Unchanged skipping\r\n2018/06/09 21:27:01 DEBUG : test2.txt: Size and modification time the same (differ by -687.8µs, within tolerance 1ms)\r\n2018/06/09 21:27:01 DEBUG : test2.txt: Unchanged skipping\r\n2018/06/09 21:27:01 DEBUG : test1/test1.txt: Size and modification time the same (differ by -19.2µs, within tolerance 1ms)\r\n2018/06/09 21:27:01 DEBUG : test1/test1.txt: Unchanged skipping\r\n2018/06/09 21:27:01 INFO  : Google drive root 'temp': Making map for --track-renames\r\n2018/06/09 21:27:01 INFO  : Google drive root 'temp': Finished making map for --track-renames\r\n2018/06/09 21:27:01 INFO  : Google drive root 'temp': Waiting for checks to finish\r\n2018/06/09 21:27:01 INFO  : Google drive root 'temp': Waiting for renames to finish\r\n2018/06/09 21:27:01 INFO  : Google drive root 'temp': Waiting for transfers to finish\r\n2018/06/09 21:27:01 INFO  : Waiting for deletions to finish\r\n2018/06/09 21:27:02 INFO  : symlink-test2.txt: Deleted\r\n2018/06/09 21:27:03 INFO  : junction-test1/test1.txt: Deleted\r\n2018/06/09 21:27:03 INFO  : symlink-test1/test1.txt: Deleted\r\n2018/06/09 21:27:03 INFO  : junction-rel-test2.txt: Deleted\r\n2018/06/09 21:27:04 INFO  : symlink-rel-test1/test1.txt: Deleted\r\n2018/06/09 21:27:04 INFO  : junction-rel-test1/test1.txt: Deleted\r\n2018/06/09 21:27:04 DEBUG : symlink-test1: Removing directory\r\n2018/06/09 21:27:04 DEBUG : symlink-test1: Rmdir: contains trashed file: \"test1.txt\"\r\n2018/06/09 21:27:05 DEBUG : symlink-rel-test1: Removing directory\r\n2018/06/09 21:27:05 DEBUG : symlink-rel-test1: Rmdir: contains trashed file: \"test1.txt\"\r\n2018/06/09 21:27:06 DEBUG : junction-test1: Removing directory\r\n2018/06/09 21:27:06 DEBUG : junction-test1: Rmdir: contains trashed file: \"test1.txt\"\r\n2018/06/09 21:27:07 DEBUG : junction-rel-test1: Removing directory\r\n2018/06/09 21:27:07 DEBUG : junction-rel-test1: Rmdir: contains trashed file: \"test1.txt\"\r\n2018/06/09 21:27:08 DEBUG : Google drive root 'temp': deleted 4 directories\r\n2018/06/09 21:27:08 INFO  :\r\nTransferred:      0 Bytes (0 Bytes/s)\r\nErrors:                 0\r\nChecks:                 9\r\nTransferred:            0\r\nElapsed time:        7.9s\r\n\r\n2018/06/09 21:27:08 DEBUG : 14 go routines active\r\n2018/06/09 21:27:08 DEBUG : rclone: Version \"v1.41-090-g01938e4d-windows-symlinks\" finishing with parameters [\"C:\\\\Users\\\\meow\\\\Google Drive\\\\Program Files\\\\rclone\\\\rclone.exe\" \"sync\" \"C:\\\\Users\\\\meow\\\\Temp\" \"GoogleDrive-dds11:/temp\" \"--delete-during\" \"--delete-excluded\" \"-vv\" \"--track-renames\" \"--fast-list\" \"--local-no-check-updated\"]\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/396012799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"arfycat","id":3708619,"node_id":"MDQ6VXNlcjM3MDg2MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3708619?v=4","gravatar_id":"","url":"https://api.github.com/users/arfycat","html_url":"https://github.com/arfycat","followers_url":"https://api.github.com/users/arfycat/followers","following_url":"https://api.github.com/users/arfycat/following{/other_user}","gists_url":"https://api.github.com/users/arfycat/gists{/gist_id}","starred_url":"https://api.github.com/users/arfycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arfycat/subscriptions","organizations_url":"https://api.github.com/users/arfycat/orgs","repos_url":"https://api.github.com/users/arfycat/repos","events_url":"https://api.github.com/users/arfycat/events{/privacy}","received_events_url":"https://api.github.com/users/arfycat/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1672590286,"node_id":"MDExOkNsb3NlZEV2ZW50MTY3MjU5MDI4Ng==","url":"https://api.github.com/repos/rclone/rclone/issues/events/1672590286","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"1053d7e123f74d089178f04c1dac6b8c9dcafd53","commit_url":"https://api.github.com/repos/rclone/rclone/commits/1053d7e123f74d089178f04c1dac6b8c9dcafd53","created_at":"2018-06-10T11:28:13Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/396041824","html_url":"https://github.com/rclone/rclone/issues/2336#issuecomment-396041824","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2336","id":396041824,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NjA0MTgyNA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-10T11:29:10Z","updated_at":"2018-06-10T11:29:10Z","body":"Perfect - thanks! I'll merge that now then.\r\n\r\nPlease find a beta here\r\n\r\nhttps://beta.rclone.org/v1.41-095-g1053d7e1/ (uploaded in 15-30 mins)\r\n\r\nThis will be in [the latest beta](https://beta.rclone.org) from now on and in 1.42.\r\n\r\nThanks for your help with fixing the problem.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/396041824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/396091068","html_url":"https://github.com/rclone/rclone/issues/2336#issuecomment-396091068","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2336","id":396091068,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NjA5MTA2OA==","user":{"login":"arfycat","id":3708619,"node_id":"MDQ6VXNlcjM3MDg2MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3708619?v=4","gravatar_id":"","url":"https://api.github.com/users/arfycat","html_url":"https://github.com/arfycat","followers_url":"https://api.github.com/users/arfycat/followers","following_url":"https://api.github.com/users/arfycat/following{/other_user}","gists_url":"https://api.github.com/users/arfycat/gists{/gist_id}","starred_url":"https://api.github.com/users/arfycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arfycat/subscriptions","organizations_url":"https://api.github.com/users/arfycat/orgs","repos_url":"https://api.github.com/users/arfycat/repos","events_url":"https://api.github.com/users/arfycat/events{/privacy}","received_events_url":"https://api.github.com/users/arfycat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-10T23:38:06Z","updated_at":"2018-06-10T23:38:06Z","body":"Thanks!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/396091068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"arfycat","id":3708619,"node_id":"MDQ6VXNlcjM3MDg2MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3708619?v=4","gravatar_id":"","url":"https://api.github.com/users/arfycat","html_url":"https://github.com/arfycat","followers_url":"https://api.github.com/users/arfycat/followers","following_url":"https://api.github.com/users/arfycat/following{/other_user}","gists_url":"https://api.github.com/users/arfycat/gists{/gist_id}","starred_url":"https://api.github.com/users/arfycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arfycat/subscriptions","organizations_url":"https://api.github.com/users/arfycat/orgs","repos_url":"https://api.github.com/users/arfycat/repos","events_url":"https://api.github.com/users/arfycat/events{/privacy}","received_events_url":"https://api.github.com/users/arfycat/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-16T17:19:50Z","updated_at":"2018-06-16T17:19:50Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/614","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/614/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/614/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/614/events","html_url":"https://github.com/rclone/rclone/issues/614","id":170918244,"node_id":"MDU6SXNzdWUxNzA5MTgyNDQ=","number":614,"title":"OneDrive sync: Can't transfer non file/directory","user":{"login":"andrewhollomon","id":20995329,"node_id":"MDQ6VXNlcjIwOTk1MzI5","avatar_url":"https://avatars.githubusercontent.com/u/20995329?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewhollomon","html_url":"https://github.com/andrewhollomon","followers_url":"https://api.github.com/users/andrewhollomon/followers","following_url":"https://api.github.com/users/andrewhollomon/following{/other_user}","gists_url":"https://api.github.com/users/andrewhollomon/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewhollomon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewhollomon/subscriptions","organizations_url":"https://api.github.com/users/andrewhollomon/orgs","repos_url":"https://api.github.com/users/andrewhollomon/repos","events_url":"https://api.github.com/users/andrewhollomon/events{/privacy}","received_events_url":"https://api.github.com/users/andrewhollomon/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2016-08-12T17:18:29Z","updated_at":"2018-06-16T17:19:50Z","closed_at":"2016-09-19T16:31:15Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi, when trying to sync a folder to OneDrive, running into 'Can't transfer non file/directory', only on some of the files and folders in the source folder. Other files and folders successfully sync. I can't see an obvious pattern relating to the files that do not sync.\n\n-Rclone 1.32\n-Windows Server 2012 r2 (64bit)\n-OneDrive Personal\n\n2016/08/12 10:10:08 rclone: Version \"v1.32\" starting with parameters [\"C:\\ProgramData\\RClone\\rclone.exe\" \"--config\" \"c:\\programdata\\rclone\\.rclone.conf\" \"sync\" \"\\\\abc\\data\\ABCtechnology\\Security\" \"abc-OneDrive:\\Disaster Recovery\\Security\" \"-v\" \"--exclude-from\" \"c:\\programdata\\rclone\\ZGF_FileExclusions.txt\" \"-q\" \"--log-file=C:\\ProgramData\\Rclone\\ABC_RcloneErrorLog.txt\"]\n...\n2016/08/12 10:10:09 ABC-OneDrive: Saving new token in config file\n2016/08/12 10:10:10 One drive root 'Disaster Recovery/Security': Modify window is 1s\n2016/08/12 10:10:10 One drive root 'Disaster Recovery/Security': Reading \"\"\n2016/08/12 10:10:10 KeePass-2.34-Portable.zip: Can't transfer non file/directory\n2016/08/12 10:10:10 KeePass-2.34-Setup.zip: Can't transfer non file/directory\n...\n2016/08/12 10:10:13 Go routines at exit 2\n","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/614/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"ltguillaume","id":4777345,"node_id":"MDQ6VXNlcjQ3NzczNDU=","avatar_url":"https://avatars.githubusercontent.com/u/4777345?v=4","gravatar_id":"","url":"https://api.github.com/users/ltguillaume","html_url":"https://github.com/ltguillaume","followers_url":"https://api.github.com/users/ltguillaume/followers","following_url":"https://api.github.com/users/ltguillaume/following{/other_user}","gists_url":"https://api.github.com/users/ltguillaume/gists{/gist_id}","starred_url":"https://api.github.com/users/ltguillaume/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ltguillaume/subscriptions","organizations_url":"https://api.github.com/users/ltguillaume/orgs","repos_url":"https://api.github.com/users/ltguillaume/repos","events_url":"https://api.github.com/users/ltguillaume/events{/privacy}","received_events_url":"https://api.github.com/users/ltguillaume/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-09T23:47:19Z","updated_at":"2020-02-09T23:47:19Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/3948","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/3948/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/3948/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/3948/events","html_url":"https://github.com/rclone/rclone/issues/3948","id":562260751,"node_id":"MDU6SXNzdWU1NjIyNjA3NTE=","number":3948,"title":"Directory Junctions with -L: Access denied","user":{"login":"ltguillaume","id":4777345,"node_id":"MDQ6VXNlcjQ3NzczNDU=","avatar_url":"https://avatars.githubusercontent.com/u/4777345?v=4","gravatar_id":"","url":"https://api.github.com/users/ltguillaume","html_url":"https://github.com/ltguillaume","followers_url":"https://api.github.com/users/ltguillaume/followers","following_url":"https://api.github.com/users/ltguillaume/following{/other_user}","gists_url":"https://api.github.com/users/ltguillaume/gists{/gist_id}","starred_url":"https://api.github.com/users/ltguillaume/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ltguillaume/subscriptions","organizations_url":"https://api.github.com/users/ltguillaume/orgs","repos_url":"https://api.github.com/users/ltguillaume/repos","events_url":"https://api.github.com/users/ltguillaume/events{/privacy}","received_events_url":"https://api.github.com/users/ltguillaume/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399009,"node_id":"MDU6TGFiZWw4NjM5OTAwOQ==","url":"https://api.github.com/repos/rclone/rclone/labels/question","name":"question","color":"a07898","default":true,"description":""},{"id":2464788588,"node_id":"MDU6TGFiZWwyNDY0Nzg4NTg4","url":"https://api.github.com/repos/rclone/rclone/labels/OS:%20Windows","name":"OS: Windows","color":"1999d1","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-02-09T23:47:19Z","updated_at":"2022-01-21T09:12:21Z","closed_at":"2021-02-10T20:41:01Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--\r\n\r\nWelcome :-) We understand you are having a problem with rclone; we want to help you with that!\r\n\r\nIf you've just got a question or aren't sure if you've found a bug then please use the rclone forum:\r\n\r\n    https://forum.rclone.org/\r\n\r\ninstead of filing an issue for a quick response.\r\n\r\nIf you think you might have found a bug, please can you try to replicate it with the latest beta?\r\n\r\n    https://beta.rclone.org/\r\n    \r\nIf you can still replicate it with the latest beta, then please fill in the info below which makes our lives much easier.  A log with -vv will make our day :-)\r\n\r\nThank you\r\n\r\nThe Rclone Developers\r\n\r\n-->\r\n\r\n#### What is the problem you are having with rclone?\r\nAs I understand it from #867 RClone _should_ handle directory junctions as regular folders and traverse them normally _if `-L` is set_. When testing this on normal directory junctions, created by Windows itself, e.g.\r\n```\r\n18-02-2018  00:04    <JUNCTION>     My Music [C:\\Users\\User\\Music]\r\n18-02-2018  00:04    <JUNCTION>     My Pictures [C:\\Users\\User\\Pictures]\r\n18-02-2018  00:04    <JUNCTION>     My Videos [C:\\Users\\User\\Videos]\r\n```\r\nI get the following error message in RClone's log: `My Music: failed to open directory \"My Music\": open \\\\?\\C:\\Users\\User\\Documents\\My Music: Access is denied.`\r\n\r\nI found #2336, but here the user want to skip junctions. Ironically, this is what I want as well, _but I do want to follow symlinks_ (both files and folders). The reason for this is that Windows places directory junctions all over the place, and following them would often duplicate data in the backups. Symlinks, however, I use on a regular basis in order to _include_ files and folders into a backup.\r\n\r\nSo, I'm addressing this _in fear of future changes_ to this behavior, because currently junctions + `-L` give an Access denied error.\r\n\r\nWhat imho would be best is if there were a separate feature for symlinks (the current `-L`/`-copy-links`) and one for following junctions (which would then also fix the Access denied issue). Since Windows puts junctions all over your drive, but symlinks can be a great tool for structuring your drives, and your backups, I think it would make sense to handle them separately.\r\n\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n1.51.0\r\n\r\n\r\n#### Which OS you are using and how many bits (eg Windows 7, 64 bit)\r\nWindows 10 x64 1809LTSC\r\n\r\n\r\n####  Which cloud storage system are you using? (eg Google Drive)\r\nNone (local file system)\r\n\r\n\r\n#### The command you were trying to run (eg `rclone copy /tmp remote:tmp`)\r\n`rclone sync -L -vv C:\\Users\\User\\Documents D:\\Backup`\r\n\r\n\r\n#### A log from the command with the `-vv` flag (eg output from `rclone -vv copy /tmp remote:tmp`)\r\n```\r\nDEBUG : rclone: Version \"v1.51.0\" starting with parameters [\"rclone\" \"sync\" \"-L\" \"-vv\" \"C:\\\\Users\\\\User\\\\Documents\" \"D:\\\\Backup\"]\r\nERROR : My Music: failed to open directory \"My Music\": open \\\\?\\C:\\Users\\User\\Documents\\My Music: Access is denied.\r\nERROR : My Pictures: failed to open directory \"My Pictures\": open \\\\?\\C:\\Users\\User\\Documents\\My Pictures: Access is denied.\r\nERROR : My Videos: failed to open directory \"My Videos\": open \\\\?\\C:\\Users\\User\\Documents\\My Videos: Access is denied.\r\nERROR : Local file system at //?/D:/Backup: not deleting files as there were IO errors\r\nERROR : Local file system at //?/D:/Backup: not deleting directories as there were IO errors\r\nERROR : Attempt 1/3 failed with 4 errors and: not deleting files as there were IO errors\r\nERROR : My Music: failed to open directory \"My Music\": open \\\\?\\C:\\Users\\User\\Documents\\My Music: Access is denied.\r\nERROR : My Pictures: failed to open directory \"My Pictures\": open \\\\?\\C:\\Users\\User\\Documents\\My Pictures: Access is denied.\r\nERROR : My Videos: failed to open directory \"My Videos\": open \\\\?\\C:\\Users\\User\\Documents\\My Videos: Access is denied.\r\nINFO  : Local file system at //?/D:/Backup: Making map for --track-renames\r\nINFO  : Local file system at //?/D:/Backup: Finished making map for --track-renames\r\nINFO  : Local file system at //?/D:/Backup: Waiting for checks to finish\r\nDEBUG : desktop.ini: Size and modification time the same (differ by 0s, within tolerance 100ns)\r\nDEBUG : desktop.ini: Unchanged skipping\r\nDEBUG : Pictures/desktop.ini: Size and modification time the same (differ by 0s, within tolerance 100ns)\r\nDEBUG : Pictures/desktop.ini: Unchanged skipping\r\nDEBUG : Videos/desktop.ini: Size and modification time the same (differ by 0s, within tolerance 100ns)\r\nDEBUG : Videos/desktop.ini: Unchanged skipping\r\nINFO  : Local file system at //?/D:/Backup: Waiting for renames to finish\r\nINFO  : Local file system at //?/D:/Backup: Waiting for transfers to finish\r\nERROR : Local file system at //?/D:/Backup: not deleting files as there were IO errors\r\nERROR : Local file system at //?/D:/Backup: not deleting directories as there were IO errors\r\nERROR : Attempt 2/3 failed with 4 errors and: not deleting files as there were IO errors\r\nDEBUG : desktop.ini: Size and modification time the same (differ by 0s, within tolerance 100ns)\r\nDEBUG : desktop.ini: Unchanged skipping\r\nERROR : My Music: failed to open directory \"My Music\": open \\\\?\\C:\\Users\\User\\Documents\\My Music: Access is denied.\r\nERROR : My Pictures: failed to open directory \"My Pictures\": open \\\\?\\C:\\Users\\User\\Documents\\My Pictures: Access is denied.\r\nERROR : My Videos: failed to open directory \"My Videos\": open \\\\?\\C:\\Users\\User\\Documents\\My Videos: Access is denied.\r\nDEBUG : Pictures/desktop.ini: Size and modification time the same (differ by 0s, within tolerance 100ns)\r\nDEBUG : Pictures/desktop.ini: Unchanged skipping\r\nINFO  : Local file system at //?/D:/Backup: Making map for --track-renames\r\nDEBUG : Videos/desktop.ini: Size and modification time the same (differ by 0s, within tolerance 100ns)\r\nINFO  : Local file system at //?/D:/Backup: Finished making map for --track-renames\r\nDEBUG : Videos/desktop.ini: Unchanged skipping\r\nINFO  : Local file system at //?/D:/Backup: Waiting for checks to finish\r\nINFO  : Local file system at //?/D:/Backup: Waiting for renames to finish\r\nINFO  : Local file system at //?/D:/Backup: Waiting for transfers to finish\r\nERROR : Local file system at //?/D:/Backup: not deleting files as there were IO errors\r\nERROR : Local file system at //?/D:/Backup: not deleting directories as there were IO errors\r\nERROR : Attempt 3/3 failed with 4 errors and: not deleting files as there were IO errors\r\nFailed to sync with 4 errors: last error was: not deleting files as there were IO errors\r\n```","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/3948/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/3948/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]