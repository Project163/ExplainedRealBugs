[{"id":3649890872,"node_id":"MDEyOkxhYmVsZWRFdmVudDM2NDk4OTA4NzI=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3649890872","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-08-13T00:17:57Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/673172537","html_url":"https://github.com/rclone/rclone/issues/4504#issuecomment-673172537","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4504","id":673172537,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MzE3MjUzNw==","user":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-13T00:19:09Z","updated_at":"2020-08-13T00:19:09Z","body":"Thanks. To slim out the log a bit:\r\n\r\nThis is when it starts:\r\n\r\n```\r\n2020/08/12 15:03:46 DEBUG : rclone: Version \"v1.52.3-298-g770a6f2c-beta\" starting with parameters [\"rclone\" \"copy\" \"-vv\" \"--max-duration\" \"1h\" \"--log-file\" \"log.txt\" \"H:\\\\isos\\\\psp\" \"OneDrive-luizamericop:emuisos/psp\"]\r\n```\r\n\r\nSo I'd expect at 16:03, no new transfers would go, but:\r\n\r\n```\r\n2020/08/12 15:44:12 DEBUG : GOD OF WAR BR.iso: Starting multipart upload\r\n2020/08/12 15:45:57 DEBUG : Hero of Sparta.cso: Starting multipart upload\r\n2020/08/12 15:45:58 DEBUG : Jeanne d'Arc (USA) (PSP) (PSN).zip: Starting multipart upload\r\n2020/08/12 15:47:20 DEBUG : Jeanne Darc USA.iso: Starting multipart upload\r\n2020/08/12 15:50:24 DEBUG : Killzone - Liberation.ISO: Starting multipart upload\r\n2020/08/12 16:06:06 DEBUG : GOD OF WAR BR.iso: Starting multipart upload\r\n2020/08/12 16:06:08 DEBUG : Jeanne d'Arc (USA) (PSP) (PSN).zip: Starting multipart upload\r\n2020/08/12 16:06:10 DEBUG : Killzone - Liberation.ISO: Starting multipart upload\r\n2020/08/12 16:06:12 DEBUG : Jeanne Darc USA.iso: Starting multipart upload\r\n2020/08/12 16:07:26 DEBUG : GOD OF WAR BR.iso: Starting multipart upload\r\n2020/08/12 16:07:28 DEBUG : Jeanne d'Arc (USA) (PSP) (PSN).zip: Starting multipart upload\r\n2020/08/12 16:07:30 DEBUG : Killzone - Liberation.ISO: Starting multipart upload\r\n2020/08/12 16:07:32 DEBUG : Jeanne Darc USA.iso: Starting multipart upload\r\n2020/08/12 16:08:46 DEBUG : GOD OF WAR BR.iso: Starting multipart upload\r\n2020/08/12 16:08:48 DEBUG : Jeanne d'Arc (USA) (PSP) (PSN).zip: Starting multipart upload\r\n2020/08/12 16:08:50 DEBUG : Killzone - Liberation.ISO: Starting multipart upload\r\n2020/08/12 16:08:52 DEBUG : Jeanne Darc USA.iso: Starting multipart upload\r\n2020/08/12 16:10:06 DEBUG : GOD OF WAR BR.iso: Starting multipart upload\r\n2020/08/12 16:10:08 DEBUG : Jeanne d'Arc (USA) (PSP) (PSN).zip: Starting multipart upload\r\n2020/08/12 16:10:10 DEBUG : Killzone - Liberation.ISO: Starting multipart upload\r\n2020/08/12 16:10:12 DEBUG : Jeanne Darc USA.iso: Starting multipart upload\r\n2020/08/12 16:11:26 DEBUG : GOD OF WAR BR.iso: Starting multipart upload\r\n2020/08/12 16:11:28 DEBUG : Jeanne d'Arc (USA) (PSP) (PSN).zip: Starting multipart upload\r\n2020/08/12 16:11:30 DEBUG : Killzone - Liberation.ISO: Starting multipart upload\r\n2020/08/12 16:11:32 DEBUG : Jeanne Darc USA.iso: Starting multipart upload\r\n2020/08/12 16:12:46 DEBUG : GOD OF WAR BR.iso: Starting multipart upload\r\n```\r\n\r\nI just grepped out the starting uploads to make it a bit easier for @ncw to see.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/673172537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3649893153,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY0OTg5MzE1Mw==","url":"https://api.github.com/repos/rclone/rclone/issues/events/3649893153","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-13T00:19:09Z","performed_via_github_app":null},{"id":3649893155,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2NDk4OTMxNTU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/3649893155","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-13T00:19:09Z","performed_via_github_app":null},{"id":4001195405,"node_id":"MDEyOkxhYmVsZWRFdmVudDQwMDExOTU0MDU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4001195405","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-11-16T16:28:35Z","label":{"name":"bandwidth","color":"9b8ad8"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/732719972","html_url":"https://github.com/rclone/rclone/issues/4504#issuecomment-732719972","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4504","id":732719972,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjcxOTk3Mg==","user":{"login":"Rycochet","id":290714,"node_id":"MDQ6VXNlcjI5MDcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/290714?v=4","gravatar_id":"","url":"https://api.github.com/users/Rycochet","html_url":"https://github.com/Rycochet","followers_url":"https://api.github.com/users/Rycochet/followers","following_url":"https://api.github.com/users/Rycochet/following{/other_user}","gists_url":"https://api.github.com/users/Rycochet/gists{/gist_id}","starred_url":"https://api.github.com/users/Rycochet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rycochet/subscriptions","organizations_url":"https://api.github.com/users/Rycochet/orgs","repos_url":"https://api.github.com/users/Rycochet/repos","events_url":"https://api.github.com/users/Rycochet/events{/privacy}","received_events_url":"https://api.github.com/users/Rycochet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T07:49:48Z","updated_at":"2020-11-24T07:49:48Z","body":"Just adding that I'm getting this in the official Docker image too (`:latest` tag, so 1.53.2?) -\r\n\r\n```\r\n2020/11/23 09:00:00 INFO  : Starting bandwidth limiter at 1MBytes/s\r\n2020/11/23 09:00:00 INFO  : Google drive root '': Transfer session deadline: 2020/11/24 02:00:00\r\n...\r\n2020/11/24 08:47:02 NOTICE:    62.602G / 642.638 GBytes, 10%, 954.972 kBytes/s, ETA 1w8h54m50s (xfr#38958/48970)\r\n```\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/732719972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Rycochet","id":290714,"node_id":"MDQ6VXNlcjI5MDcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/290714?v=4","gravatar_id":"","url":"https://api.github.com/users/Rycochet","html_url":"https://github.com/Rycochet","followers_url":"https://api.github.com/users/Rycochet/followers","following_url":"https://api.github.com/users/Rycochet/following{/other_user}","gists_url":"https://api.github.com/users/Rycochet/gists{/gist_id}","starred_url":"https://api.github.com/users/Rycochet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rycochet/subscriptions","organizations_url":"https://api.github.com/users/Rycochet/orgs","repos_url":"https://api.github.com/users/Rycochet/repos","events_url":"https://api.github.com/users/Rycochet/events{/privacy}","received_events_url":"https://api.github.com/users/Rycochet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/733155913","html_url":"https://github.com/rclone/rclone/issues/4504#issuecomment-733155913","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4504","id":733155913,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzE1NTkxMw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T18:26:05Z","updated_at":"2020-11-24T18:26:05Z","body":"I can replicate this quite easily\r\n\r\n    rclone copy --bwlimit 1k -vv --max-duration 10s src src-copy\r\n\r\nI can see two things wrong here\r\n\r\n- The `context deadline exceeded` errors are being low level retried\r\n    - this isn't too serious and might be difficult to fix as we do want to retry those errors in most cases\r\n    - the retries happen very quickly\r\n- The sync then stops correctly, however rclone then does a high level retry with a new deadline!\r\n\r\n```\r\n2020/08/12 15:03:47 INFO  : One drive root 'emuisos/psp': Transfer session deadline: 2020/08/12 16:03:47\r\n2020/08/12 16:18:12 INFO  : One drive root 'emuisos/psp': Transfer session deadline: 2020/08/12 17:18:12\r\n2020/08/12 17:32:36 INFO  : One drive root 'emuisos/psp': Transfer session deadline: 2020/08/12 18:32:36\r\n```\r\n\r\nSo I think fixing the second problem would be the place to attack this bug.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/733155913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4034248938,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDQwMzQyNDg5Mzg=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4034248938","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2020-11-24T18:26:14Z","milestone":{"title":"v1.54"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/733156371","html_url":"https://github.com/rclone/rclone/issues/4504#issuecomment-733156371","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4504","id":733156371,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzE1NjM3MQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T18:26:57Z","updated_at":"2020-11-24T18:26:57Z","body":"PS as a work-around you can use `--retries 1`.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/733156371/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4286132897,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50NDI4NjEzMjg5Nw==","url":"https://api.github.com/repos/rclone/rclone/issues/events/4286132897","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2021-02-03T16:04:48Z","milestone":{"title":"v1.54"},"performed_via_github_app":null},{"id":4286132902,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDQyODYxMzI5MDI=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4286132902","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2021-02-03T16:04:48Z","milestone":{"title":"v1.55"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/795526121","html_url":"https://github.com/rclone/rclone/issues/4504#issuecomment-795526121","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4504","id":795526121,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTUyNjEyMQ==","user":{"login":"timevortex","id":9387602,"node_id":"MDQ6VXNlcjkzODc2MDI=","avatar_url":"https://avatars.githubusercontent.com/u/9387602?v=4","gravatar_id":"","url":"https://api.github.com/users/timevortex","html_url":"https://github.com/timevortex","followers_url":"https://api.github.com/users/timevortex/followers","following_url":"https://api.github.com/users/timevortex/following{/other_user}","gists_url":"https://api.github.com/users/timevortex/gists{/gist_id}","starred_url":"https://api.github.com/users/timevortex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timevortex/subscriptions","organizations_url":"https://api.github.com/users/timevortex/orgs","repos_url":"https://api.github.com/users/timevortex/repos","events_url":"https://api.github.com/users/timevortex/events{/privacy}","received_events_url":"https://api.github.com/users/timevortex/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T14:44:39Z","updated_at":"2021-03-10T14:44:39Z","body":"I had a quick look around at the code and from my naive reading of things, I'm wondering if this fix is as simple as adding WithDeadline to inCtx in sync.go:\r\n\r\n```diff --git a/fs/sync/sync.go b/fs/sync/sync.go\r\nindex e8ce10ad1..6ac880994 100644\r\n--- a/fs/sync/sync.go\r\n+++ b/fs/sync/sync.go\r\n@@ -149,11 +149,11 @@ func newSyncCopyMove(ctx context.Context, fdst, fsrc fs.Fs, deleteMode fs.Delete\r\n                endTime := time.Now().Add(ci.MaxDuration)\r\n                fs.Infof(s.fdst, \"Transfer session deadline: %s\", endTime.Format(\"2006/01/02 15:04:05\"))\r\n                s.ctx, s.cancel = context.WithDeadline(ctx, endTime)\r\n+               s.inCtx, s.inCancel = context.WithDeadline(ctx, endTime)\r\n        } else {\r\n                s.ctx, s.cancel = context.WithCancel(ctx)\r\n+               s.inCtx, s.inCancel = context.WithCancel(s.ctx)\r\n        }\r\n-       // Input context - cancel this for graceful stop\r\n-       s.inCtx, s.inCancel = context.WithCancel(s.ctx)\r\n        if s.noTraverse && s.deleteMode != fs.DeleteModeOff {\r\n                fs.Errorf(nil, \"Ignoring --no-traverse with sync\")\r\n                s.noTraverse = false\r\n```\r\n\r\nI don't have experience building go code and testing but if this seems to be on the right track I'll spend time building and testing.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/795526121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"timevortex","id":9387602,"node_id":"MDQ6VXNlcjkzODc2MDI=","avatar_url":"https://avatars.githubusercontent.com/u/9387602?v=4","gravatar_id":"","url":"https://api.github.com/users/timevortex","html_url":"https://github.com/timevortex","followers_url":"https://api.github.com/users/timevortex/followers","following_url":"https://api.github.com/users/timevortex/following{/other_user}","gists_url":"https://api.github.com/users/timevortex/gists{/gist_id}","starred_url":"https://api.github.com/users/timevortex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timevortex/subscriptions","organizations_url":"https://api.github.com/users/timevortex/orgs","repos_url":"https://api.github.com/users/timevortex/repos","events_url":"https://api.github.com/users/timevortex/events{/privacy}","received_events_url":"https://api.github.com/users/timevortex/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/795628777","html_url":"https://github.com/rclone/rclone/issues/4504#issuecomment-795628777","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4504","id":795628777,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTYyODc3Nw==","user":{"login":"timevortex","id":9387602,"node_id":"MDQ6VXNlcjkzODc2MDI=","avatar_url":"https://avatars.githubusercontent.com/u/9387602?v=4","gravatar_id":"","url":"https://api.github.com/users/timevortex","html_url":"https://github.com/timevortex","followers_url":"https://api.github.com/users/timevortex/followers","following_url":"https://api.github.com/users/timevortex/following{/other_user}","gists_url":"https://api.github.com/users/timevortex/gists{/gist_id}","starred_url":"https://api.github.com/users/timevortex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timevortex/subscriptions","organizations_url":"https://api.github.com/users/timevortex/orgs","repos_url":"https://api.github.com/users/timevortex/repos","events_url":"https://api.github.com/users/timevortex/events{/privacy}","received_events_url":"https://api.github.com/users/timevortex/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T15:44:39Z","updated_at":"2021-03-10T15:44:39Z","body":"Ok building go code was trivial ;) I'll be testing this soon and will report back my findings here or in https://forum.rclone.org/t/add-flag-to-exit-immediately-when-max-duration-reached/22723","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/795628777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"timevortex","id":9387602,"node_id":"MDQ6VXNlcjkzODc2MDI=","avatar_url":"https://avatars.githubusercontent.com/u/9387602?v=4","gravatar_id":"","url":"https://api.github.com/users/timevortex","html_url":"https://github.com/timevortex","followers_url":"https://api.github.com/users/timevortex/followers","following_url":"https://api.github.com/users/timevortex/following{/other_user}","gists_url":"https://api.github.com/users/timevortex/gists{/gist_id}","starred_url":"https://api.github.com/users/timevortex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timevortex/subscriptions","organizations_url":"https://api.github.com/users/timevortex/orgs","repos_url":"https://api.github.com/users/timevortex/repos","events_url":"https://api.github.com/users/timevortex/events{/privacy}","received_events_url":"https://api.github.com/users/timevortex/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/795955389","html_url":"https://github.com/rclone/rclone/issues/4504#issuecomment-795955389","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4504","id":795955389,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTk1NTM4OQ==","user":{"login":"timevortex","id":9387602,"node_id":"MDQ6VXNlcjkzODc2MDI=","avatar_url":"https://avatars.githubusercontent.com/u/9387602?v=4","gravatar_id":"","url":"https://api.github.com/users/timevortex","html_url":"https://github.com/timevortex","followers_url":"https://api.github.com/users/timevortex/followers","following_url":"https://api.github.com/users/timevortex/following{/other_user}","gists_url":"https://api.github.com/users/timevortex/gists{/gist_id}","starred_url":"https://api.github.com/users/timevortex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timevortex/subscriptions","organizations_url":"https://api.github.com/users/timevortex/orgs","repos_url":"https://api.github.com/users/timevortex/repos","events_url":"https://api.github.com/users/timevortex/events{/privacy}","received_events_url":"https://api.github.com/users/timevortex/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T19:27:28Z","updated_at":"2021-03-10T19:27:28Z","body":"Unfortunately my experiment wasn't successful as making those changes didn't prevent rclone from hanging around over 1h after `--max-timeout` was reached.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/795955389/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"timevortex","id":9387602,"node_id":"MDQ6VXNlcjkzODc2MDI=","avatar_url":"https://avatars.githubusercontent.com/u/9387602?v=4","gravatar_id":"","url":"https://api.github.com/users/timevortex","html_url":"https://github.com/timevortex","followers_url":"https://api.github.com/users/timevortex/followers","following_url":"https://api.github.com/users/timevortex/following{/other_user}","gists_url":"https://api.github.com/users/timevortex/gists{/gist_id}","starred_url":"https://api.github.com/users/timevortex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timevortex/subscriptions","organizations_url":"https://api.github.com/users/timevortex/orgs","repos_url":"https://api.github.com/users/timevortex/repos","events_url":"https://api.github.com/users/timevortex/events{/privacy}","received_events_url":"https://api.github.com/users/timevortex/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4445417036,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NDU0MTcwMzY=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4445417036","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"85cc93c20375a3934c799af5fc2dbcb78c384c8c","commit_url":"https://api.github.com/repos/rclone/rclone/commits/85cc93c20375a3934c799af5fc2dbcb78c384c8c","created_at":"2021-03-11T14:49:13Z","performed_via_github_app":null},{"id":4445429717,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQ0NDQ1NDI5NzE3","url":"https://api.github.com/repos/rclone/rclone/issues/events/4445429717","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2021-03-11T14:50:53Z","assignee":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":4450247197,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NTAyNDcxOTc=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4450247197","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"004fa1c5f5015a9ac186c6c1378146a58156e2dd","commit_url":"https://api.github.com/repos/rclone/rclone/commits/004fa1c5f5015a9ac186c6c1378146a58156e2dd","created_at":"2021-03-12T11:38:34Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/797437175","html_url":"https://github.com/rclone/rclone/issues/4504#issuecomment-797437175","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4504","id":797437175,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzQzNzE3NQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T11:40:32Z","updated_at":"2021-03-12T11:40:32Z","body":"I've had a go at fixing this if anyone would like to give it a try\r\n\r\n[v1.55.0-beta.5261.004fa1c5f.fix-context-deadline](https://beta.rclone.org/branch/fix-context-deadline/v1.55.0-beta.5261.004fa1c5f.fix-context-deadline/) on branch [fix-context-deadline](https://github.com/rclone/rclone/tree/fix-context-deadline) (uploaded in 15-30 mins)\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/797437175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4453645323,"node_id":"MDExOkNsb3NlZEV2ZW50NDQ1MzY0NTMyMw==","url":"https://api.github.com/repos/rclone/rclone/issues/events/4453645323","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"4013bc4a4cd768e219d5a1e281daf8126d549474","commit_url":"https://api.github.com/repos/rclone/rclone/commits/4013bc4a4cd768e219d5a1e281daf8126d549474","created_at":"2021-03-13T09:26:00Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/798017329","html_url":"https://github.com/rclone/rclone/issues/4504#issuecomment-798017329","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4504","id":798017329,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODAxNzMyOQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T09:26:08Z","updated_at":"2021-03-13T09:26:08Z","body":"I've merged this to master now which means it will be in [the latest beta](https://beta.rclone.org) in 15-30 mins and released in v1.55","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/798017329/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4465439697,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NjU0Mzk2OTc=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4465439697","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9433382442d13a683a52503cfafcb7fb71dbcc6c","commit_url":"https://api.github.com/repos/rclone/rclone/commits/9433382442d13a683a52503cfafcb7fb71dbcc6c","created_at":"2021-03-16T15:54:42Z","performed_via_github_app":null},{"id":4465576141,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NjU1NzYxNDE=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4465576141","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f2c0f82fc6f5390cc30db612ce457ece45286f15","commit_url":"https://api.github.com/repos/rclone/rclone/commits/f2c0f82fc6f5390cc30db612ce457ece45286f15","created_at":"2021-03-16T16:18:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/816574931","html_url":"https://github.com/rclone/rclone/issues/4504#issuecomment-816574931","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4504","id":816574931,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjU3NDkzMQ==","user":{"login":"blikblum","id":3047126,"node_id":"MDQ6VXNlcjMwNDcxMjY=","avatar_url":"https://avatars.githubusercontent.com/u/3047126?v=4","gravatar_id":"","url":"https://api.github.com/users/blikblum","html_url":"https://github.com/blikblum","followers_url":"https://api.github.com/users/blikblum/followers","following_url":"https://api.github.com/users/blikblum/following{/other_user}","gists_url":"https://api.github.com/users/blikblum/gists{/gist_id}","starred_url":"https://api.github.com/users/blikblum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blikblum/subscriptions","organizations_url":"https://api.github.com/users/blikblum/orgs","repos_url":"https://api.github.com/users/blikblum/repos","events_url":"https://api.github.com/users/blikblum/events{/privacy}","received_events_url":"https://api.github.com/users/blikblum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-09T10:05:51Z","updated_at":"2021-04-09T10:05:51Z","body":"Hi thanks to looking into this.\r\n\r\nI still getting the same behavior with rclone 1.55 (on windows),\r\n\r\nThe difference this time i'm using sync and not copy\r\n\r\nRan rclone with max-duration 9h\r\n\r\nAt start 31/03 22h, the session deadline was set to 2021/04/01 07:30\r\n\r\nWhen deadline is reached at 7:30,  some uploads are cancelled with \"context deadline exceeded\" message\r\n\r\nThere are some errors and everything is started with a new deadline set to 16:30:38\r\n\r\nBelow relevant parts of the log:\r\n\r\n```\r\n2021/03/31 22:30:36 DEBUG : rclone: Version \"v1.55.0\" starting with parameters [\"rclone\" \"sync\" \"-vv\" \"--log-file\" \"log-arcade.txt\" \"--max-duration\" \"9h\" \"--check-first\" \"--checkers\" \"4\" \"--transfers\" \"2\" \"F:\\\\roms\\\\arcade\" \"OneDrive-luizamericop:emuroms/arcade\"]\r\n\r\n2021/03/31 22:30:38 INFO  : One drive root 'emuroms/arcade': Transfer session deadline: 2021/04/01 07:30:38\r\n\r\n2021/04/01 07:30:38 DEBUG : mame/fotns.zip: Cancelling multipart upload: Put \"https://df.api.onedrive.com/\": context deadline exceeded\r\n2021/04/01 07:30:38 DEBUG : mame/funcube4.zip: Cancelling multipart upload: Put \"https://df.api.onedrive.com/xxxxx context deadline exceeded\r\n2021/04/01 07:30:38 DEBUG : pacer: Reducing sleep to 80.180765ms\r\n2021/04/01 07:30:38 NOTICE: mame/fotns.zip: Failed to cancel multipart upload: Delete \"https://df.api.onedrive.com/xxxxx context deadline exceeded\r\n2021/04/01 07:30:38 ERROR : mame/fotns.zip: Failed to copy: Put \"https://df.api.onedrive.com/xxxxx context deadline exceeded\r\n2021/04/01 07:30:38 DEBUG : pacer: Reducing sleep to 60.135573ms\r\n2021/04/01 07:30:38 NOTICE: mame/funcube4.zip: Failed to cancel multipart upload: Delete \"https://df.api.onedrive.com/xxxxx context deadline exceeded\r\n2021/04/01 07:30:38 ERROR : mame/funcube4.zip: Failed to copy: Put \"https://df.api.onedrive.com/xxxxx context deadline exceeded\r\n2021/04/01 07:30:38 ERROR : One drive root 'emuroms/arcade': not deleting files as there were IO errors\r\n2021/04/01 07:30:38 ERROR : One drive root 'emuroms/arcade': not deleting directories as there were IO errors\r\n2021/04/01 07:30:38 ERROR : Attempt 1/3 failed with 17 errors and: Put \"https://df.api.onedrive.com/xxxxx context deadline exceeded\r\n2021/04/01 07:30:38 INFO  : One drive root 'emuroms/arcade': Running all checks before starting transfers\r\n2021/04/01 07:30:38 INFO  : One drive root 'emuroms/arcade': Transfer session deadline: 2021/04/01 16:30:38\r\n2021/04/01 07:31:17 DEBUG : pacer: low level retry 1/10 (error Get \"https://graph.microsoft.com/v1.0/drives/7cb47be895e02668/items/7CB47BE895E02668!18256/children?$top=1000\": EOF)\r\n2021/04/01 07:31:17 DEBUG : pacer: Rate limited, increasing sleep to 120.271146ms\r\n2021/04/01 07:31:38 INFO  : \r\nTransferred:   \t    1.470G / 5.696 GBytes, 26%, 47.766 kBytes/s, ETA 1d1h46m25s\r\nChecks:             17720 / 17720, 100%\r\nTransferred:          315 / 965, 33%\r\nElapsed time:     9h1m1.4s\r\n\r\n2021/04/01 07:32:31 DEBUG : pacer: low level retry 2/10 (error Get \"https://graph.microsoft.com/v1.0/drives/7cb47be895e02668/items/7CB47BE895E02668!18256/children?$top=1000\": net/http: TLS handshake timeout)\r\n2021/04/01 07:32:31 DEBUG : pacer: Rate limited, increasing sleep to 240.542292ms\r\n2021/04/01 07:32:31 DEBUG : pacer: Reducing sleep to 180.406719ms\r\n2021/04/01 07:32:32 DEBUG : pacer: Reducing sleep to 135.305039ms\r\n2021/04/01 07:32:32 DEBUG : bioses/cpzn1.zip: Size and modification time the same (differ by -321.4722ms, within tolerance 1s)\r\n2021/04/01 07:32:32 DEBUG : bioses/cpzn2.zip: Size and modification time the same (differ by -356.4742ms, within tolerance 1s)\r\n2021/04/01 07:32:32 DEBUG : bioses/cpzn2.zip: Unchanged skipping\r\n2021/04/01 07:32:32 DEBUG : bioses/cpzn1.zip: Unchanged skipping\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/816574931/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"blikblum","id":3047126,"node_id":"MDQ6VXNlcjMwNDcxMjY=","avatar_url":"https://avatars.githubusercontent.com/u/3047126?v=4","gravatar_id":"","url":"https://api.github.com/users/blikblum","html_url":"https://github.com/blikblum","followers_url":"https://api.github.com/users/blikblum/followers","following_url":"https://api.github.com/users/blikblum/following{/other_user}","gists_url":"https://api.github.com/users/blikblum/gists{/gist_id}","starred_url":"https://api.github.com/users/blikblum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blikblum/subscriptions","organizations_url":"https://api.github.com/users/blikblum/orgs","repos_url":"https://api.github.com/users/blikblum/repos","events_url":"https://api.github.com/users/blikblum/events{/privacy}","received_events_url":"https://api.github.com/users/blikblum/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/817104231","html_url":"https://github.com/rclone/rclone/issues/4504#issuecomment-817104231","issue_url":"https://api.github.com/repos/rclone/rclone/issues/4504","id":817104231,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNzEwNDIzMQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-10T09:02:04Z","updated_at":"2021-04-10T09:02:04Z","body":"I think this may have been fixed by 54771e440218443cae44611660359ee3c5db16d5 which you'll find in [the latest beta](https://beta.rclone.org)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/817104231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5153937258,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDUxNTM5MzcyNTg=","url":"https://api.github.com/repos/rclone/rclone/issues/events/5153937258","actor":{"login":"negative0","id":12236512,"node_id":"MDQ6VXNlcjEyMjM2NTEy","avatar_url":"https://avatars.githubusercontent.com/u/12236512?v=4","gravatar_id":"","url":"https://api.github.com/users/negative0","html_url":"https://github.com/negative0","followers_url":"https://api.github.com/users/negative0/followers","following_url":"https://api.github.com/users/negative0/following{/other_user}","gists_url":"https://api.github.com/users/negative0/gists{/gist_id}","starred_url":"https://api.github.com/users/negative0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/negative0/subscriptions","organizations_url":"https://api.github.com/users/negative0/orgs","repos_url":"https://api.github.com/users/negative0/repos","events_url":"https://api.github.com/users/negative0/events{/privacy}","received_events_url":"https://api.github.com/users/negative0/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6a113e6290eaaced2819fd55c09f237406cd047b","commit_url":"https://api.github.com/repos/negative0/rclone/commits/6a113e6290eaaced2819fd55c09f237406cd047b","created_at":"2021-08-13T06:10:40Z","performed_via_github_app":null},{"id":5153937396,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDUxNTM5MzczOTY=","url":"https://api.github.com/repos/rclone/rclone/issues/events/5153937396","actor":{"login":"negative0","id":12236512,"node_id":"MDQ6VXNlcjEyMjM2NTEy","avatar_url":"https://avatars.githubusercontent.com/u/12236512?v=4","gravatar_id":"","url":"https://api.github.com/users/negative0","html_url":"https://github.com/negative0","followers_url":"https://api.github.com/users/negative0/followers","following_url":"https://api.github.com/users/negative0/following{/other_user}","gists_url":"https://api.github.com/users/negative0/gists{/gist_id}","starred_url":"https://api.github.com/users/negative0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/negative0/subscriptions","organizations_url":"https://api.github.com/users/negative0/orgs","repos_url":"https://api.github.com/users/negative0/repos","events_url":"https://api.github.com/users/negative0/events{/privacy}","received_events_url":"https://api.github.com/users/negative0/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f41e799735d4648d46cd7178045374a0ed9f7057","commit_url":"https://api.github.com/repos/negative0/rclone/commits/f41e799735d4648d46cd7178045374a0ed9f7057","created_at":"2021-08-13T06:10:41Z","performed_via_github_app":null},{"actor":{"login":"DiscreteObject","id":4923498,"node_id":"MDQ6VXNlcjQ5MjM0OTg=","avatar_url":"https://avatars.githubusercontent.com/u/4923498?v=4","gravatar_id":"","url":"https://api.github.com/users/DiscreteObject","html_url":"https://github.com/DiscreteObject","followers_url":"https://api.github.com/users/DiscreteObject/followers","following_url":"https://api.github.com/users/DiscreteObject/following{/other_user}","gists_url":"https://api.github.com/users/DiscreteObject/gists{/gist_id}","starred_url":"https://api.github.com/users/DiscreteObject/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DiscreteObject/subscriptions","organizations_url":"https://api.github.com/users/DiscreteObject/orgs","repos_url":"https://api.github.com/users/DiscreteObject/repos","events_url":"https://api.github.com/users/DiscreteObject/events{/privacy}","received_events_url":"https://api.github.com/users/DiscreteObject/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-19T19:44:03Z","updated_at":"2022-02-19T19:44:03Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/6002","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/6002/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/6002/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/6002/events","html_url":"https://github.com/rclone/rclone/issues/6002","id":1144829886,"node_id":"I_kwDOAQ-n5M5EPLe-","number":6002,"title":"max-duration does not stop transfers if retries > 1 are specified","user":{"login":"DiscreteObject","id":4923498,"node_id":"MDQ6VXNlcjQ5MjM0OTg=","avatar_url":"https://avatars.githubusercontent.com/u/4923498?v=4","gravatar_id":"","url":"https://api.github.com/users/DiscreteObject","html_url":"https://github.com/DiscreteObject","followers_url":"https://api.github.com/users/DiscreteObject/followers","following_url":"https://api.github.com/users/DiscreteObject/following{/other_user}","gists_url":"https://api.github.com/users/DiscreteObject/gists{/gist_id}","starred_url":"https://api.github.com/users/DiscreteObject/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DiscreteObject/subscriptions","organizations_url":"https://api.github.com/users/DiscreteObject/orgs","repos_url":"https://api.github.com/users/DiscreteObject/repos","events_url":"https://api.github.com/users/DiscreteObject/events{/privacy}","received_events_url":"https://api.github.com/users/DiscreteObject/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":86399005,"node_id":"MDU6TGFiZWw4NjM5OTAwNQ==","url":"https://api.github.com/repos/rclone/rclone/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rclone/rclone/milestones/46","html_url":"https://github.com/rclone/rclone/milestone/46","labels_url":"https://api.github.com/repos/rclone/rclone/milestones/46/labels","id":6965450,"node_id":"MI_kwDOAQ-n5M4AakjK","number":46,"title":"v1.58","description":"Due date shifted 16.01.2022 -> 28.02.2022 by @ivandeex on 13.01.2022\r\ncc @ncw","creator":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":33,"state":"closed","created_at":"2021-07-20T20:07:20Z","updated_at":"2022-03-19T12:38:32Z","due_on":"2022-02-28T08:00:00Z","closed_at":"2022-03-19T12:38:32Z"},"comments":4,"created_at":"2022-02-19T19:44:03Z","updated_at":"2022-03-03T17:21:04Z","closed_at":"2022-03-03T17:20:36Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"#### The associated forum post URL from `https://forum.rclone.org`\r\nhttps://forum.rclone.org/t/max-duration-and-retries-not-working-correctly/27738/14\r\n\r\n#### What is the problem you are having with rclone?\r\n`--max-duration` does not stop jobs as expected but instead triggers retries up to the `--retries` specified. This seems unexpected from the docs description of retries:\r\n```\r\n--retries int\r\nRetry the entire sync if it fails this many times it fails (default 3).\r\n```\r\nas I would not consider hitting the specified `max-duration` a failure. The docs for `max-duration` also don't indicate this:\r\n```\r\n--max-duration=TIME\r\nRclone will stop scheduling new transfers when it has run for the duration specified.\r\nDefaults to off.\r\nWhen the limit is reached any existing transfers will complete.\r\n```\r\n\r\nThis seems related to the forum post above (not posted by me), and to these previously filed issues:  https://github.com/rclone/rclone/issues/4504 and https://github.com/rclone/rclone/issues/4002. However the forum post indicates it should be fixed with the latest 1.58.0 beta, and even with that I still see the issue.\r\n\r\nI've included a debug log demonstrating this, but to summarize what I think are the relevant parts: a copy job to an encrypted Backblaze B2 remote with `\"--max-duration=5m\"` and `\"--retries\" \"3\"`.  The job begins by setting a deadline 5 minutes out:\r\n```\r\n2022/02/19 11:01:17 INFO  : Encrypted drive 'b2cryptsse:max_duration_test/Photos/archives': Transfer session deadline: 2022/02/19 11:06:17\r\n```\r\nAt the 5-minute mark, the logs indicate it has hit the deadline but then begins a repeat of the same job with a new deadline another 5 minutes later, also doing file comparisons of the files that had already been uploaded:\r\n```\r\n2022/02/19 11:06:17 ERROR : photos_2021.zip.004: Failed to copy: Post \"https://pod-040-2006-14.backblaze.com/b2api/v1/b2_upload_file/f433ac23c06708ee77f1021b/c004_v0402006_t0014\": context deadline exceeded\r\n2022/02/19 11:06:17 ERROR : photos_2021.zip.002: Failed to copy: Post \"https://pod-040-2005-03.backblaze.com/b2api/v1/b2_upload_file/f433ac23c06708ee77f1021b/c004_v0402005_t0004\": context deadline exceeded\r\n2022/02/19 11:06:17 ERROR : photos_2021.zip.001: Failed to copy: Post \"https://pod-040-2002-15.backblaze.com/b2api/v1/b2_upload_file/f433ac23c06708ee77f1021b/c004_v0402002_t0057\": context deadline exceeded\r\n2022/02/19 11:06:17 ERROR : photos_2021.zip.003: Failed to copy: Post \"https://pod-040-2001-07.backblaze.com/b2api/v1/b2_upload_file/f433ac23c06708ee77f1021b/c004_v0402001_t0015\": context deadline exceeded\r\n2022/02/19 11:06:17 ERROR : photos_2021.vol063+64.par2: Failed to copy: Post \"https://pod-040-2000-16.backblaze.com/b2api/v1/b2_upload_file/f433ac23c06708ee77f1021b/c004_v0402000_t0011\": context deadline exceeded\r\n2022/02/19 11:06:17 ERROR : Attempt 1/3 failed with 5 errors and: Post \"https://pod-040-2002-15.backblaze.com/b2api/v1/b2_upload_file/f433ac23c06708ee77f1021b/c004_v0402002_t0057\": context deadline exceeded\r\n2022/02/19 11:06:17 INFO  : Encrypted drive 'b2cryptsse:max_duration_test/Photos/archives': Transfer session deadline: 2022/02/19 11:11:17\r\n2022/02/19 11:06:18 DEBUG : photos_2021.par2: Size and modification time the same (differ by -66.5s, within tolerance 1ms)\r\n```\r\nThe same thing 5 minutes later:\r\n```\r\n2022/02/19 11:11:17 ERROR : Attempt 2/3 failed with 5 errors and: Post \"https://pod-040-2006-14.backblaze.com/b2api/v1/b2_upload_file/f433ac23c06708ee77f1021b/c004_v0402006_t0014\": context deadline exceeded\r\n2022/02/19 11:11:17 INFO  : Encrypted drive 'b2cryptsse:max_duration_test/Photos/archives': Transfer session deadline: 2022/02/19 11:16:17\r\n```\r\nAnd then having hit 3 retries, it finally fails 5 minutes after that\r\n```\r\n2022/02/19 11:16:17 ERROR : Attempt 3/3 failed with 5 errors and: Post \"https://pod-040-2005-03.backblaze.com/b2api/v1/b2_upload_file/f433ac23c06708ee77f1021b/c004_v0402005_t0004\": context deadline exceeded\r\n2022/02/19 11:16:17 NOTICE: \r\nTransferred:   \t    3.842 GiB / 12.761 GiB, 30%, 4.386 MiB/s, ETA 34m42s\r\nErrors:                 5 (retrying may help)\r\nChecks:                16 / 16, 100%\r\nTransferred:            8 / 18, 44%\r\nElapsed time:      15m0.4s\r\n```\r\n\r\nIt seems like I could avoid this by setting `retries=1` but I'd like to be able to specify retries in the case of something like network disruption, but also set a max duration if I want the job to run a set amount of time.\r\n\r\n#### What is your rclone version (output from `rclone version`)\r\n```\r\nrclone v1.58.0-beta.6000.dc7e3ea1e\r\n- os/version: Microsoft Windows 7 Professional Service Pack 1 (64 bit)\r\n- os/kernel: 6.1.7601.24544 (x86_64)\r\n- os/type: windows\r\n- os/arch: amd64\r\n- go/version: go1.17.6\r\n- go/linking: dynamic\r\n- go/tags: cmount\r\n```\r\n\r\n\r\n#### Which OS you are using and how many bits (e.g. Windows 7, 64 bit)\r\nWindows 7 x64 SP1\r\n\r\n#### Which cloud storage system are you using? (e.g. Google Drive)\r\nBackblaze B2\r\n\r\n#### The command you were trying to run (e.g. `rclone copy /tmp remote:tmp`)\r\n```\r\n>rclone.exe copy --transfers 5 --checkers 8 --contimeout 60s --timeout 300s --retries 3 --low-level-retries 10 --b2-chunk-size=100M  --b2-upload-cutoff=1025M --log-file=rclone_photos_archives_158_beta.log --log-level=DEBUG --progress --stats 1s --stats-file-name-length 0 --stats-log-level=NOTICE --max-duration=5m --fast-list \"D:\\Photos\\archives\" \"b2cryptsse:max_duration_test/Photos/archives\"\r\n```\r\n\r\n\r\n#### A log from the command with the `-vv` flag (e.g. output from `rclone -vv copy /tmp remote:tmp`)\r\nhttps://pastebin.com/SgnEbQjj\r\n\r\n\r\n#### How to use GitHub\r\n\r\n* Please use the  [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to show that you are affected by the same issue.\r\n* Please don't comment if you have no relevant information to add. It's just extra noise for everyone subscribed to this issue.\r\n* Subscribe to receive notifications on status change and new comments.\r\n","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/6002/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/6002/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]