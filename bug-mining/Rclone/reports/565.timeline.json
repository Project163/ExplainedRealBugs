[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/443284997","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-443284997","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":443284997,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzI4NDk5Nw==","user":{"login":"bmc","id":23894,"node_id":"MDQ6VXNlcjIzODk0","avatar_url":"https://avatars.githubusercontent.com/u/23894?v=4","gravatar_id":"","url":"https://api.github.com/users/bmc","html_url":"https://github.com/bmc","followers_url":"https://api.github.com/users/bmc/followers","following_url":"https://api.github.com/users/bmc/following{/other_user}","gists_url":"https://api.github.com/users/bmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmc/subscriptions","organizations_url":"https://api.github.com/users/bmc/orgs","repos_url":"https://api.github.com/users/bmc/repos","events_url":"https://api.github.com/users/bmc/events{/privacy}","received_events_url":"https://api.github.com/users/bmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-30T17:53:17Z","updated_at":"2018-11-30T17:53:17Z","body":"Note that there's no difference if I use a SAS URL vs. an access key.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/443284997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bmc","id":23894,"node_id":"MDQ6VXNlcjIzODk0","avatar_url":"https://avatars.githubusercontent.com/u/23894?v=4","gravatar_id":"","url":"https://api.github.com/users/bmc","html_url":"https://github.com/bmc","followers_url":"https://api.github.com/users/bmc/followers","following_url":"https://api.github.com/users/bmc/following{/other_user}","gists_url":"https://api.github.com/users/bmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmc/subscriptions","organizations_url":"https://api.github.com/users/bmc/orgs","repos_url":"https://api.github.com/users/bmc/repos","events_url":"https://api.github.com/users/bmc/events{/privacy}","received_events_url":"https://api.github.com/users/bmc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1999973159,"node_id":"MDEyOkxhYmVsZWRFdmVudDE5OTk5NzMxNTk=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1999973159","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-12-02T14:16:19Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":1999973161,"node_id":"MDEyOkxhYmVsZWRFdmVudDE5OTk5NzMxNjE=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1999973161","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-12-02T14:16:19Z","label":{"name":"Remote: Azure Blob","color":"fbca04"},"performed_via_github_app":null},{"id":1999973198,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE5OTk5NzMxOTg=","url":"https://api.github.com/repos/rclone/rclone/issues/events/1999973198","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-12-02T14:16:24Z","milestone":{"title":"v1.46"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/443511356","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-443511356","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":443511356,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzUxMTM1Ng==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-02T14:23:36Z","updated_at":"2018-12-02T14:23:36Z","body":"This is probably quite easy to fix.\r\n\r\nHow can rclone identify these folder blobs?  Are they 0 size and ending in / ?\r\n\r\nIs there a standard for making them - I couldn't see one in the azure docs.\r\n\r\nDo you know which program made them?\r\n\r\nCan you do `rclone -vv --dump bodies lsf \"airlift453:class-453\"` and post the log?  That will show me exactly what is going on - thanks :-)\r\n\r\nIf you don't want to share it publically then email it to nick@craig-wood.com - put a link to this issue in the email please (I get a lot of email!).","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/443511356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444606308","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-444606308","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":444606308,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDYwNjMwOA==","user":{"login":"bmc","id":23894,"node_id":"MDQ6VXNlcjIzODk0","avatar_url":"https://avatars.githubusercontent.com/u/23894?v=4","gravatar_id":"","url":"https://api.github.com/users/bmc","html_url":"https://github.com/bmc","followers_url":"https://api.github.com/users/bmc/followers","following_url":"https://api.github.com/users/bmc/following{/other_user}","gists_url":"https://api.github.com/users/bmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmc/subscriptions","organizations_url":"https://api.github.com/users/bmc/orgs","repos_url":"https://api.github.com/users/bmc/repos","events_url":"https://api.github.com/users/bmc/events{/privacy}","received_events_url":"https://api.github.com/users/bmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-05T19:12:29Z","updated_at":"2018-12-05T19:12:29Z","body":"We've done some digging. It turns out these file things are created by a Hadoop library, as a means to make an empty \"directory\" actually look like it's there (because, like S3, empty directories in Azure Blob Store don't really exist—and don't even *appear* to exist until you put something in them).\r\n\r\nThese things have a piece of metadata in them that says `hdi_isfolder` = `true`.\r\n\r\nHowever, there might even be an easier solution for you: Since Azure Blob Store _allows_ there to be a file that has the same name as a directory, just handle that on a copy _to_ Azure.\r\n\r\nHere's the output of the `rdump`. Feel free to me here or privately, if you wish (bmc@databricks.com or bmc@clapper.org). We're using `rclone` at Databricks, for data replication. We'd be willing to remunerate you for helping us get past this issue. :-)\r\n\r\n```\r\n$ rclone -vv --dump bodies lsf \"airlift453:class-453\"\r\n2018/12/05 14:11:17 DEBUG : rclone: Version \"v1.44\" starting with parameters [\"rclone\" \"-vv\" \"--dump\" \"bodies\" \"lsf\" \"airlift453:class-453\"]\r\n2018/12/05 14:11:17 DEBUG : Using config file from \"/Users/bmc/.config/rclone/rclone.conf\"\r\nPartnerOrderClean.json\r\n_$azuretmpfolder$/\r\nadventure-works\r\nadventure-works/\r\nairbnb/\r\n2018/12/05 14:11:17 DEBUG : 5 go routines active\r\n2018/12/05 14:11:17 DEBUG : rclone: Version \"v1.44\" finishing with parameters [\"rclone\" \"-vv\" \"--dump\" \"bodies\" \"lsf\" \"airlift453:class-453\"]\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444606308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bmc","id":23894,"node_id":"MDQ6VXNlcjIzODk0","avatar_url":"https://avatars.githubusercontent.com/u/23894?v=4","gravatar_id":"","url":"https://api.github.com/users/bmc","html_url":"https://github.com/bmc","followers_url":"https://api.github.com/users/bmc/followers","following_url":"https://api.github.com/users/bmc/following{/other_user}","gists_url":"https://api.github.com/users/bmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmc/subscriptions","organizations_url":"https://api.github.com/users/bmc/orgs","repos_url":"https://api.github.com/users/bmc/repos","events_url":"https://api.github.com/users/bmc/events{/privacy}","received_events_url":"https://api.github.com/users/bmc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2008341109,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIwMDgzNDExMDk=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2008341109","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1e60279074cb24931958babdf91a190573e865e3","commit_url":"https://api.github.com/repos/rclone/rclone/commits/1e60279074cb24931958babdf91a190573e865e3","created_at":"2018-12-05T21:36:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444659481","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-444659481","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":444659481,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDY1OTQ4MQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-05T21:38:53Z","updated_at":"2018-12-05T21:38:53Z","body":"> Here's the output of the `rdump`\r\n\r\nThank you..\r\n\r\nI added the same fix as I did for s3 when it had a similar problem which is to ignore objects ending in / of zero length - can you have a go with it?\r\n\r\nhttps://beta.rclone.org/branch/v1.45-023-g1e602790-fix-2806-azureblob-directory-beta/ (uploaded in 15-30 mins)\r\n\r\nIf that doesn't work can you do the `lsf` command above with that beta - it will print a lot more stuff. If you are worried about it containing confidential stuff then feel free to edit it or you could email it to me at nick@craig-wood.com (put a link to this issue in too - I get a lot of email!).\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444659481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444682483","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-444682483","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":444682483,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDY4MjQ4Mw==","user":{"login":"bmc","id":23894,"node_id":"MDQ6VXNlcjIzODk0","avatar_url":"https://avatars.githubusercontent.com/u/23894?v=4","gravatar_id":"","url":"https://api.github.com/users/bmc","html_url":"https://github.com/bmc","followers_url":"https://api.github.com/users/bmc/followers","following_url":"https://api.github.com/users/bmc/following{/other_user}","gists_url":"https://api.github.com/users/bmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmc/subscriptions","organizations_url":"https://api.github.com/users/bmc/orgs","repos_url":"https://api.github.com/users/bmc/repos","events_url":"https://api.github.com/users/bmc/events{/privacy}","received_events_url":"https://api.github.com/users/bmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-05T22:52:29Z","updated_at":"2018-12-05T22:52:29Z","body":"There's nothing confidential in the blob store. (We use it for Apache Spark training; it's just test data.)\r\n\r\nThe attempt to do a `sync` from the Azure blob store to the local disk still gagged on the duplication. Here's the current state of the blob store, at the top level. There's one case (at that level) where a folder and a (placeholder) file have the same name.\r\n\r\n<img src=\"https://s3.amazonaws.com/clapper-stuff/blob-store-2.png\"/>\r\n\r\nHere's what Azure thinks the `adventure-works` file looks like:\r\n\r\n<img src=\"https://s3.amazonaws.com/clapper-stuff/blob-store-3.png\"/>\r\n\r\nHere's the `rclone ls` and `lsd` output for that blob store:\r\n\r\n```\r\n$ ../rclone ls --max-depth 1 airlift:class-453\r\n   201870 PartnerOrderClean.json\r\n        0 adventure-works\r\n$ ../rclone lsd --max-depth 1 airlift:class-453\r\n          -1 2018-12-05 17:45:36        -1 _$azuretmpfolder$\r\n          -1 2018-12-05 17:45:36        -1 adventure-works\r\n          -1 2018-12-05 17:45:36        -1 airbnb\r\n```\r\n\r\nHere's what `sync` does, to an empty local directory. (It skips the `adventure-works` folder, favoring only the `adventure-works` placeholder file.\r\n\r\n```\r\n$ ../rclone sync -vv --exclude '*azuretmpfolder*' airlift:class-453 .\r\n2018/12/05 17:48:27 DEBUG : rclone: Version \"v1.45-023-g1e602790-fix-2806-azureblob-directory-beta\" starting with parameters [\"../rclone\" \"sync\" \"-vv\" \"--exclude\" \"*azuretmpfolder*\" \"airlift:class-453\" \".\"]\r\n2018/12/05 17:48:27 DEBUG : Using config file from \"/Users/bmc/.config/rclone/rclone.conf\"\r\n2018/12/05 17:48:27 DEBUG : pacer: Reducing sleep to 0s\r\n2018/12/05 17:48:27 NOTICE: adventure-works: Duplicate directory found in source - ignoring\r\n2018/12/05 17:48:27 NOTICE: airbnb/listings: Duplicate directory found in source - ignoring\r\n2018/12/05 17:48:27 INFO  : adventure-works: Copied (new)\r\n2018/12/05 17:48:27 INFO  : airbnb/listings: Copied (new)\r\n2018/12/05 17:48:27 INFO  : PartnerOrderClean.json: Copied (new)\r\n2018/12/05 17:48:28 INFO  : Local file system at /Users/bmc/Downloads/rclone-v1.45-023-g1e602790-fix-2806-azureblob-directory-beta-osx-amd64/tmp: Waiting for checks to finish\r\n2018/12/05 17:48:28 INFO  : Local file system at /Users/bmc/Downloads/rclone-v1.45-023-g1e602790-fix-2806-azureblob-directory-beta-osx-amd64/tmp: Waiting for transfers to finish\r\n2018/12/05 17:49:27 INFO  :\r\nTransferred:   \t  179.189M / 273.261 MBytes, 66%, 2.986 MBytes/s, ETA 31s\r\nErrors:                 0\r\nChecks:                 0 / 0, -\r\nTransferred:            3 / 4, 75%\r\nElapsed time:        1m0s\r\nTransferring:\r\n *     _$azuretmpfolder$/cd…-oct-06-detailed.csv: 65% /273.068M, 3.075M/s, 30s\r\n\r\n2018/12/05 17:49:58 INFO  : _$azuretmpfolder$/cd8e991f-21fd-489c-8205-b3c8fe717e64london-2018-oct-06-detailed.csv: Copied (new)\r\n2018/12/05 17:49:58 INFO  : Waiting for deletions to finish\r\n2018/12/05 17:49:58 INFO  :\r\nTransferred:   \t  273.261M / 273.261 MBytes, 100%, 2.997 MBytes/s, ETA 0s\r\nErrors:                 0\r\nChecks:                 0 / 0, -\r\nTransferred:            4 / 4, 100%\r\nElapsed time:     1m31.1s\r\n\r\n2018/12/05 17:49:58 DEBUG : 5 go routines active\r\n2018/12/05 17:49:58 DEBUG : rclone: Version \"v1.45-023-g1e602790-fix-2806-azureblob-directory-beta\" finishing with parameters [\"../rclone\" \"sync\" \"-vv\" \"--exclude\" \"*azuretmpfolder*\" \"airlift:class-453\" \".\"]\r\n```\r\n\r\n(Clearly, I don't have the `--exclude` pattern quite right, but that's not relevant to this issue.)\r\n\r\nThe two **NOTICE** lines correspond to cases where the folder has a corresponding placeholder file.\r\n\r\nHere's the same log info as before, with the new beta version of `rclone`:\r\n```\r\n$ ../rclone -vv --dump bodies lsf airlift:class-453\r\n2018/12/05 17:47:26 DEBUG : rclone: Version \"v1.45-023-g1e602790-fix-2806-azureblob-directory-beta\" starting with parameters [\"../rclone\" \"-vv\" \"--dump\" \"bodies\" \"lsf\" \"airlift:class-453\"]\r\n2018/12/05 17:47:26 DEBUG : Using config file from \"/Users/bmc/.config/rclone/rclone.conf\"\r\n2018/12/05 17:47:26 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2018/12/05 17:47:26 DEBUG : HTTP REQUEST (req 0xc000439600)\r\n2018/12/05 17:47:26 DEBUG : GET /class-453?comp=list&delimiter=%2F&include=metadata&maxresults=5000&restype=container&se=2019-12-01T01%3A50%3A25Z&sig=wHEU3uOYLkHjb1pjok8TpfrkcfPxZbgcKAmlidXxTAc%3D&sp=rl&spr=https&srt=sco&ss=bfqt&st=2018-11-30T17%3A50%3A25Z&sv=2017-11-09&timeout=31536001 HTTP/1.1\r\nHost: airlift453.blob.core.windows.net\r\nUser-Agent: rclone/v1.45-023-g1e602790-fix-2806-azureblob-directory-beta\r\nX-Ms-Client-Request-Id: 0f513545-9714-40e9-4e7c-0d760f46237e\r\nX-Ms-Version: 2018-03-28\r\nAccept-Encoding: gzip\r\n\r\n2018/12/05 17:47:26 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2018/12/05 17:47:26 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2018/12/05 17:47:26 DEBUG : HTTP RESPONSE (req 0xc000439600)\r\n2018/12/05 17:47:26 DEBUG : HTTP/1.1 200 OK\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Wed, 05 Dec 2018 22:47:26 GMT\r\nServer: Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0\r\nX-Ms-Request-Id: 0ea1c08f-001e-0021-2bec-8c51fb000000\r\nX-Ms-Version: 2018-03-28\r\n\r\n76e\r\n﻿<?xml version=\"1.0\" encoding=\"utf-8\"?><EnumerationResults ServiceEndpoint=\"https://airlift453.blob.core.windows.net/\" ContainerName=\"class-453\"><MaxResults>5000</MaxResults><Delimiter>/</Delimiter><Blobs><Blob><Name>PartnerOrderClean.json</Name><Properties><Creation-Time>Thu, 25 Oct 2018 04:10:54 GMT</Creation-Time><Last-Modified>Thu, 25 Oct 2018 09:54:25 GMT</Last-Modified><Etag>0x8D63A5FD8F4C980</Etag><Content-Length>201870</Content-Length><Content-Type>application/octet-stream</Content-Type><Content-Encoding /><Content-Language /><Content-MD5 /><Cache-Control /><Content-Disposition /><BlobType>BlockBlob</BlobType><AccessTier>Hot</AccessTier><AccessTierInferred>true</AccessTierInferred><LeaseStatus>unlocked</LeaseStatus><LeaseState>available</LeaseState><ServerEncrypted>true</ServerEncrypted></Properties><Metadata><hdi_permission>{\"owner\":\"root\",\"group\":\"supergroup\",\"permissions\":\"rw-r--r--\"}</hdi_permission></Metadata></Blob><BlobPrefix><Name>_$azuretmpfolder$/</Name></BlobPrefix><Blob><Name>adventure-works</Name><Properties><Creation-Time>Thu, 25 Oct 2018 04:16:12 GMT</Creation-Time><Last-Modified>Thu, 25 Oct 2018 04:16:12 GMT</Last-Modified><Etag>0x8D63A30991AC26F</Etag><Content-Length>0</Content-Length><Content-Type>application/octet-stream</Content-Type><Content-Encoding /><Content-Language /><Content-MD5 /><Cache-Control /><Content-Disposition /><BlobType>BlockBlob</BlobType><AccessTier>Hot</AccessTier><AccessTierInferred>true</AccessTierInferred><LeaseStatus>unlocked</LeaseStatus><LeaseState>available</LeaseState><ServerEncrypted>true</ServerEncrypted></Properties><Metadata><hdi_isfolder>true</hdi_isfolder><hdi_permission>{\"owner\":\"root\",\"group\":\"supergroup\",\"permissions\":\"rwxr-xr-x\"}</hdi_permission></Metadata></Blob><BlobPrefix><Name>adventure-works/</Name></BlobPrefix><BlobPrefix><Name>airbnb/</Name></BlobPrefix></Blobs><NextMarker /></EnumerationResults>\r\n0\r\n\r\n2018/12/05 17:47:26 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2018/12/05 17:47:26 DEBUG : pacer: Reducing sleep to 0s\r\nPartnerOrderClean.json\r\n_$azuretmpfolder$/\r\nadventure-works\r\nadventure-works/\r\nairbnb/\r\n2018/12/05 17:47:26 DEBUG : 5 go routines active\r\n2018/12/05 17:47:26 DEBUG : rclone: Version \"v1.45-023-g1e602790-fix-2806-azureblob-directory-beta\" finishing with parameters [\"../rclone\" \"-vv\" \"--dump\" \"bodies\" \"lsf\" \"airlift:class-453\"]\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444682483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bmc","id":23894,"node_id":"MDQ6VXNlcjIzODk0","avatar_url":"https://avatars.githubusercontent.com/u/23894?v=4","gravatar_id":"","url":"https://api.github.com/users/bmc","html_url":"https://github.com/bmc","followers_url":"https://api.github.com/users/bmc/followers","following_url":"https://api.github.com/users/bmc/following{/other_user}","gists_url":"https://api.github.com/users/bmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmc/subscriptions","organizations_url":"https://api.github.com/users/bmc/orgs","repos_url":"https://api.github.com/users/bmc/repos","events_url":"https://api.github.com/users/bmc/events{/privacy}","received_events_url":"https://api.github.com/users/bmc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444685882","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-444685882","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":444685882,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDY4NTg4Mg==","user":{"login":"bmc","id":23894,"node_id":"MDQ6VXNlcjIzODk0","avatar_url":"https://avatars.githubusercontent.com/u/23894?v=4","gravatar_id":"","url":"https://api.github.com/users/bmc","html_url":"https://github.com/bmc","followers_url":"https://api.github.com/users/bmc/followers","following_url":"https://api.github.com/users/bmc/following{/other_user}","gists_url":"https://api.github.com/users/bmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmc/subscriptions","organizations_url":"https://api.github.com/users/bmc/orgs","repos_url":"https://api.github.com/users/bmc/repos","events_url":"https://api.github.com/users/bmc/events{/privacy}","received_events_url":"https://api.github.com/users/bmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-05T23:06:18Z","updated_at":"2018-12-05T23:06:18Z","body":"I've set up an Azure blob store that has this exact kind of situation. I've created a full-access SAS URL for it. I'm emailing the info to nick@craig-wood.com, in case it helps you debug. Feel free to use that blob store. I can easily create this scenario (in our Spark-based product) in seconds, if you need additional test samples.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444685882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bmc","id":23894,"node_id":"MDQ6VXNlcjIzODk0","avatar_url":"https://avatars.githubusercontent.com/u/23894?v=4","gravatar_id":"","url":"https://api.github.com/users/bmc","html_url":"https://github.com/bmc","followers_url":"https://api.github.com/users/bmc/followers","following_url":"https://api.github.com/users/bmc/following{/other_user}","gists_url":"https://api.github.com/users/bmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmc/subscriptions","organizations_url":"https://api.github.com/users/bmc/orgs","repos_url":"https://api.github.com/users/bmc/repos","events_url":"https://api.github.com/users/bmc/events{/privacy}","received_events_url":"https://api.github.com/users/bmc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2009496165,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIwMDk0OTYxNjU=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2009496165","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b86ebbe0b5693ab23186799af178e091a668fdc9","commit_url":"https://api.github.com/repos/rclone/rclone/commits/b86ebbe0b5693ab23186799af178e091a668fdc9","created_at":"2018-12-06T10:39:43Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444830837","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-444830837","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":444830837,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDgzMDgzNw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-06T10:50:29Z","updated_at":"2018-12-06T10:50:29Z","body":"> I've set up an Azure blob store that has this exact kind of situation. I've created a full-access SAS URL for it. I'm emailing the info to [nick@craig-wood.com](mailto:nick@craig-wood.com), in case it helps you debug. Feel free to use that blob store. I can easily create this scenario (in our Spark-based product) in seconds, if you need additional test samples.\r\n\r\nThank you that was really helpful.\r\n\r\nI can see the problem quite clearly now.   On s3 the convention is directory markers have  `/` on the end so you have a 0 length blob called `path/to/dir/`.  These directory markers don't have the trailing slash (hence the fix above didn't work) but they do have that extra `hdi_isfolder` metadata which a bit of reading confirms is a defacto standard in azure.\r\n\r\nI've adjusted rclone to take account of that - can you have a go with this please?\r\n\r\nhttps://beta.rclone.org/branch/v1.45-023-gb86ebbe0-fix-2806-azureblob-directory-beta/ (uploaded in 15-30 mins)\r\n\r\nHopefully that will work - it does on the test bucket anyway!\r\n\r\nPS nice use of SAS URL.  Did you know that with a SAS URL you can use rclone without a config file...\r\n\r\nrclone lsf -R --azureblob-sas-url \"https://...\" :azureblob:bmc","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444830837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444949649","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-444949649","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":444949649,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDk0OTY0OQ==","user":{"login":"bmc","id":23894,"node_id":"MDQ6VXNlcjIzODk0","avatar_url":"https://avatars.githubusercontent.com/u/23894?v=4","gravatar_id":"","url":"https://api.github.com/users/bmc","html_url":"https://github.com/bmc","followers_url":"https://api.github.com/users/bmc/followers","following_url":"https://api.github.com/users/bmc/following{/other_user}","gists_url":"https://api.github.com/users/bmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmc/subscriptions","organizations_url":"https://api.github.com/users/bmc/orgs","repos_url":"https://api.github.com/users/bmc/repos","events_url":"https://api.github.com/users/bmc/events{/privacy}","received_events_url":"https://api.github.com/users/bmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-06T17:06:27Z","updated_at":"2018-12-06T17:06:27Z","body":"Works perfectly! Thanks!\r\n\r\nI'll use this downloaded beta for now, until the fix is released officially.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/444949649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bmc","id":23894,"node_id":"MDQ6VXNlcjIzODk0","avatar_url":"https://avatars.githubusercontent.com/u/23894?v=4","gravatar_id":"","url":"https://api.github.com/users/bmc","html_url":"https://github.com/bmc","followers_url":"https://api.github.com/users/bmc/followers","following_url":"https://api.github.com/users/bmc/following{/other_user}","gists_url":"https://api.github.com/users/bmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmc/subscriptions","organizations_url":"https://api.github.com/users/bmc/orgs","repos_url":"https://api.github.com/users/bmc/repos","events_url":"https://api.github.com/users/bmc/events{/privacy}","received_events_url":"https://api.github.com/users/bmc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2011050075,"node_id":"MDExOkNsb3NlZEV2ZW50MjAxMTA1MDA3NQ==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2011050075","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"feea0532cd6c105e32e72450fa91e0d744f17ff0","commit_url":"https://api.github.com/repos/rclone/rclone/commits/feea0532cd6c105e32e72450fa91e0d744f17ff0","created_at":"2018-12-06T21:50:09Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/445042657","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-445042657","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":445042657,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTA0MjY1Nw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-06T21:50:41Z","updated_at":"2018-12-06T21:50:41Z","body":"Thanks for testing :-)\r\n\r\nI've merged this to master and it will be in [the latest beta](https://beta.rclone.org) in 15-30 mins.  It will be released in v1.46","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/445042657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/450128400","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-450128400","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":450128400,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDEyODQwMA==","user":{"login":"robertoayusob","id":20969752,"node_id":"MDQ6VXNlcjIwOTY5NzUy","avatar_url":"https://avatars.githubusercontent.com/u/20969752?v=4","gravatar_id":"","url":"https://api.github.com/users/robertoayusob","html_url":"https://github.com/robertoayusob","followers_url":"https://api.github.com/users/robertoayusob/followers","following_url":"https://api.github.com/users/robertoayusob/following{/other_user}","gists_url":"https://api.github.com/users/robertoayusob/gists{/gist_id}","starred_url":"https://api.github.com/users/robertoayusob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertoayusob/subscriptions","organizations_url":"https://api.github.com/users/robertoayusob/orgs","repos_url":"https://api.github.com/users/robertoayusob/repos","events_url":"https://api.github.com/users/robertoayusob/events{/privacy}","received_events_url":"https://api.github.com/users/robertoayusob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-27T10:52:45Z","updated_at":"2018-12-27T10:53:31Z","body":"Hi @ncw I have the same problem, downloaded the patched version but still the same problem:\r\n\r\nroot@ubuntu0:~# rclone -vv sync azure:common/tmp ./probando/\r\n2018/12/27 11:43:06 DEBUG : rclone: Version \"v1.45-023-gb86ebbe0-fix-2806-azureblob-directory-beta\" starting with parameters [\"rclone\" \"-vv\" \"sync\" \"azure:common/tmp\" \"./probando/\"]\r\n2018/12/27 11:43:06 NOTICE: Config file \"/root/.config/rclone/rclone.conf\" not found - using defaults\r\n2018/12/27 11:43:07 DEBUG : pacer: Reducing sleep to 0s\r\n2018/12/27 11:43:07 INFO  : Local file system at /root/probando: Waiting for checks to finish\r\n2018/12/27 11:43:07 INFO  : Local file system at /root/probando: Waiting for transfers to finish\r\n2018/12/27 11:43:07 INFO  : tmp: Copied (new)\r\n2018/12/27 11:43:07 INFO  : Waiting for deletions to finish\r\n2018/12/27 11:43:07 INFO  : \r\nTransferred:             0 / 0 Bytes, -, 0 Bytes/s, ETA -\r\nErrors:                 0\r\nChecks:                 0 / 0, -\r\nTransferred:            1 / 1, 100%\r\nElapsed time:       600ms\r\n\r\n\r\nWhile /tmp is a folder on azure with several subfolders and files, I am not using a SAS URL, it just copied an empty file named tmp","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/450128400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"robertoayusob","id":20969752,"node_id":"MDQ6VXNlcjIwOTY5NzUy","avatar_url":"https://avatars.githubusercontent.com/u/20969752?v=4","gravatar_id":"","url":"https://api.github.com/users/robertoayusob","html_url":"https://github.com/robertoayusob","followers_url":"https://api.github.com/users/robertoayusob/followers","following_url":"https://api.github.com/users/robertoayusob/following{/other_user}","gists_url":"https://api.github.com/users/robertoayusob/gists{/gist_id}","starred_url":"https://api.github.com/users/robertoayusob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertoayusob/subscriptions","organizations_url":"https://api.github.com/users/robertoayusob/orgs","repos_url":"https://api.github.com/users/robertoayusob/repos","events_url":"https://api.github.com/users/robertoayusob/events{/privacy}","received_events_url":"https://api.github.com/users/robertoayusob/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2045729230,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA0NTcyOTIzMA==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2045729230","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-12-27T10:52:45Z","performed_via_github_app":null},{"id":2045729231,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwNDU3MjkyMzE=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2045729231","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-12-27T10:52:45Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/450517849","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-450517849","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":450517849,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDUxNzg0OQ==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-29T20:28:05Z","updated_at":"2018-12-29T20:28:05Z","body":"> Hi @ncw I have the same problem, downloaded the patched version but still the same problem:\r\n\r\nI think this is a slightly different problem as you've got the folder blob at the first point in the rclone path.\r\n\r\nCan you post the results of these please?\r\n\r\n    rclone -vv --dump bodies lsf azure:common\r\n    rclone -vv --dump bodies lsf azure:common/tmp\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/450517849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2048206565,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA0ODIwNjU2NQ==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2048206565","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-12-29T20:28:05Z","performed_via_github_app":null},{"id":2048206566,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwNDgyMDY1NjY=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2048206566","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-12-29T20:28:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/451063645","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-451063645","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":451063645,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTA2MzY0NQ==","user":{"login":"robertoayusob","id":20969752,"node_id":"MDQ6VXNlcjIwOTY5NzUy","avatar_url":"https://avatars.githubusercontent.com/u/20969752?v=4","gravatar_id":"","url":"https://api.github.com/users/robertoayusob","html_url":"https://github.com/robertoayusob","followers_url":"https://api.github.com/users/robertoayusob/followers","following_url":"https://api.github.com/users/robertoayusob/following{/other_user}","gists_url":"https://api.github.com/users/robertoayusob/gists{/gist_id}","starred_url":"https://api.github.com/users/robertoayusob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertoayusob/subscriptions","organizations_url":"https://api.github.com/users/robertoayusob/orgs","repos_url":"https://api.github.com/users/robertoayusob/repos","events_url":"https://api.github.com/users/robertoayusob/events{/privacy}","received_events_url":"https://api.github.com/users/robertoayusob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-03T06:22:00Z","updated_at":"2019-01-03T06:22:00Z","body":"Yes, the problem comes when the blob folder is at the first point, it detects as a file and do not go into it, I am not a developer but, after adding some debug traces, it looks that rclone does not go into the part of code you patched when this blob folder is wrongly detected as a file at the first point. A workarround has been using always the root source and some include filters.\r\n\r\nAnyway this is the dump you request, may be you can solve the problem (little things removed):\r\n```\r\nroot@ubuntu0:~/rclone# ./rclone -vv --dump bodies lsf azure:common\r\n2019/01/03 07:15:05 DEBUG : rclone: Version \"v1.45-DEV\" starting with parameters [\"./rclone\" \"-vv\" \"--dump\" \"bodies\" \"lsf\" \"azure:common\"]\r\n2019/01/03 07:15:05 DEBUG : Using config file from \"/root/.config/rclone/rclone.conf\"\r\n2019/01/03 07:15:05 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2019/01/03 07:15:05 DEBUG : HTTP REQUEST (req 0xc0002fd700)\r\n2019/01/03 07:15:05 DEBUG : GET /common?comp=list&delimiter=%2F&include=metadata&maxresults=5000&restype=container&timeout=31536001 HTTP/1.1\r\nHost: vecibigdatastorage.blob.core.windows.net\r\nUser-Agent: rclone/v1.45-DEV\r\nAuthorization: XXXX\r\nX-Ms-Client-Request-Id: 101f54d8-7f1c-4126-7db9-f3cc48209dd3\r\nX-Ms-Version: 2018-03-28\r\nx-ms-date: Thu, 03 Jan 2019 06:15:05 GMT\r\nAccept-Encoding: gzip\r\n\r\n2019/01/03 07:15:05 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2019/01/03 07:15:05 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2019/01/03 07:15:05 DEBUG : HTTP RESPONSE (req 0xc0002fd700)\r\n2019/01/03 07:15:05 DEBUG : HTTP/1.1 200 OK\r\nTransfer-Encoding: chunked\r\nContent-Type: application/xml\r\nDate: Thu, 03 Jan 2019 06:15:05 GMT\r\nServer: Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0\r\nX-Ms-Request-Id: 58759ab9-b01e-0087-3d2b-a34c12000000\r\nX-Ms-Version: 2018-03-28\r\n\r\n3a9c\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?><EnumerationResults........></EnumerationResults>\r\n0\r\n\r\n2019/01/03 07:15:05 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2019/01/03 07:15:05 DEBUG : pacer: Reducing sleep to 0s\r\nHdiSamples/\r\n_$azuretmpfolder$/\r\nams/\r\namshbase/\r\napp-logs/\r\napps/\r\natshistory/\r\ncustom-scriptaction-logs/\r\ndata/\r\ndata_azure_orig/\r\ndataimport/\r\nexample/\r\nhbase/\r\nhdp/\r\nhive/\r\nmapred/\r\nmapreducestaging/\r\nmr-history/\r\ntestrclone1/\r\ntmp/\r\nuser/\r\n2019/01/03 07:15:05 DEBUG : 4 go routines active\r\n2019/01/03 07:15:05 DEBUG : rclone: Version \"v1.45-DEV\" finishing with parameters [\"./rclone\" \"-vv\" \"--dump\" \"bodies\" \"lsf\" \"azure:common\"]\r\n```\r\nand\r\n```\r\nroot@ubuntu0:~/rclone# ./rclone -vv --dump bodies lsf azure:common/tmp\r\n2019/01/03 07:18:32 DEBUG : rclone: Version \"v1.45-DEV\" starting with parameters [\"./rclone\" \"-vv\" \"--dump\" \"bodies\" \"lsf\" \"azure:common/tmp\"]\r\n2019/01/03 07:18:32 DEBUG : Using config file from \"/root/.config/rclone/rclone.conf\"\r\n2019/01/03 07:18:32 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2019/01/03 07:18:32 DEBUG : HTTP REQUEST (req 0xc0002ef700)\r\n2019/01/03 07:18:32 DEBUG : HEAD /common/tmp?timeout=31536001 HTTP/1.1\r\nHost: vecibigdatastorage.blob.core.windows.net\r\nUser-Agent: rclone/v1.45-DEV\r\nAuthorization: XXXX\r\nX-Ms-Client-Request-Id: 35593f26-7c73-4d8c-4947-67892c0b6d82\r\nX-Ms-Version: 2018-03-28\r\nx-ms-date: Thu, 03 Jan 2019 06:18:32 GMT\r\n\r\n2019/01/03 07:18:32 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2019/01/03 07:18:33 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2019/01/03 07:18:33 DEBUG : HTTP RESPONSE (req 0xc0002ef700)\r\n2019/01/03 07:18:33 DEBUG : HTTP/1.1 200 OK\r\nAccept-Ranges: bytes\r\nDate: Thu, 03 Jan 2019 06:18:32 GMT\r\nEtag: \"0x8D65B887F16C166\"\r\nLast-Modified: Thu, 06 Dec 2018 14:38:32 GMT\r\nServer: Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0\r\nX-Ms-Blob-Type: BlockBlob\r\nX-Ms-Creation-Time: Fri, 23 Nov 2018 06:49:03 GMT\r\nX-Ms-Lease-State: available\r\nX-Ms-Lease-Status: unlocked\r\nX-Ms-Meta-Hdi_isfolder: true\r\nX-Ms-Meta-Hdi_permission: {\"owner\":\"hdfs\",\"group\":\"supergroup\",\"permissions\":\"rwxrwxrwx\"}\r\nX-Ms-Request-Id: 056adef3-401e-0135-6c2c-a34d6e000000\r\nX-Ms-Server-Encrypted: true\r\nX-Ms-Version: 2018-03-28\r\nContent-Length: 0\r\n\r\n2019/01/03 07:18:33 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2019/01/03 07:18:33 DEBUG : pacer: Reducing sleep to 0s\r\n2019/01/03 07:18:33 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2019/01/03 07:18:33 DEBUG : HTTP REQUEST (req 0xc000112800)\r\n2019/01/03 07:18:33 DEBUG : HEAD /common/tmp?timeout=31536001 HTTP/1.1\r\nHost: vecibigdatastorage.blob.core.windows.net\r\nUser-Agent: rclone/v1.45-DEV\r\nAuthorization: XXXX\r\nX-Ms-Client-Request-Id: 809c3522-bc1d-420d-5104-1a7a64769763\r\nX-Ms-Version: 2018-03-28\r\nx-ms-date: Thu, 03 Jan 2019 06:18:33 GMT\r\n\r\n2019/01/03 07:18:33 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2019/01/03 07:18:33 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2019/01/03 07:18:33 DEBUG : HTTP RESPONSE (req 0xc000112800)\r\n2019/01/03 07:18:33 DEBUG : HTTP/1.1 200 OK\r\nAccept-Ranges: bytes\r\nDate: Thu, 03 Jan 2019 06:18:32 GMT\r\nEtag: \"0x8D65B887F16C166\"\r\nLast-Modified: Thu, 06 Dec 2018 14:38:32 GMT\r\nServer: Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0\r\nX-Ms-Blob-Type: BlockBlob\r\nX-Ms-Creation-Time: Fri, 23 Nov 2018 06:49:03 GMT\r\nX-Ms-Lease-State: available\r\nX-Ms-Lease-Status: unlocked\r\nX-Ms-Meta-Hdi_isfolder: true\r\nX-Ms-Meta-Hdi_permission: {\"owner\":\"hdfs\",\"group\":\"supergroup\",\"permissions\":\"rwxrwxrwx\"}\r\nX-Ms-Request-Id: 056adf12-401e-0135-032c-a34d6e000000\r\nX-Ms-Server-Encrypted: true\r\nX-Ms-Version: 2018-03-28\r\nContent-Length: 0\r\n\r\n2019/01/03 07:18:33 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\ntmp\r\n2019/01/03 07:18:33 DEBUG : 4 go routines active\r\n2019/01/03 07:18:33 DEBUG : rclone: Version \"v1.45-DEV\" finishing with parameters [\"./rclone\" \"-vv\" \"--dump\" \"bodies\" \"lsf\" \"azure:common/tmp\"]\r\n```\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/451063645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"robertoayusob","id":20969752,"node_id":"MDQ6VXNlcjIwOTY5NzUy","avatar_url":"https://avatars.githubusercontent.com/u/20969752?v=4","gravatar_id":"","url":"https://api.github.com/users/robertoayusob","html_url":"https://github.com/robertoayusob","followers_url":"https://api.github.com/users/robertoayusob/followers","following_url":"https://api.github.com/users/robertoayusob/following{/other_user}","gists_url":"https://api.github.com/users/robertoayusob/gists{/gist_id}","starred_url":"https://api.github.com/users/robertoayusob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertoayusob/subscriptions","organizations_url":"https://api.github.com/users/robertoayusob/orgs","repos_url":"https://api.github.com/users/robertoayusob/repos","events_url":"https://api.github.com/users/robertoayusob/events{/privacy}","received_events_url":"https://api.github.com/users/robertoayusob/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2054398566,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIwNTQzOTg1NjY=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2054398566","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"75613e96beee061d68a447706eee0653d42c46e0","commit_url":"https://api.github.com/repos/rclone/rclone/commits/75613e96beee061d68a447706eee0653d42c46e0","created_at":"2019-01-04T12:41:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/451433893","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-451433893","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":451433893,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTQzMzg5Mw==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-04T12:42:14Z","updated_at":"2019-01-04T12:42:14Z","body":"@robertoayusob thanks for the dumps.  I can see from those that a similar fix should work for this case too.\r\n\r\nhttps://beta.rclone.org/branch/v1.45-057-g75613e96-fix-2806-azureblob-dir-marker-beta/ (uploaded in 15-30 mins)\r\n\r\nCan you give it a go?\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/451433893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2054399641,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQyMDU0Mzk5NjQx","url":"https://api.github.com/repos/rclone/rclone/issues/events/2054399641","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2019-01-04T12:42:15Z","state_reason":null,"performed_via_github_app":null},{"id":2054399645,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA1NDM5OTY0NQ==","url":"https://api.github.com/repos/rclone/rclone/issues/events/2054399645","actor":{"login":"robertoayusob","id":20969752,"node_id":"MDQ6VXNlcjIwOTY5NzUy","avatar_url":"https://avatars.githubusercontent.com/u/20969752?v=4","gravatar_id":"","url":"https://api.github.com/users/robertoayusob","html_url":"https://github.com/robertoayusob","followers_url":"https://api.github.com/users/robertoayusob/followers","following_url":"https://api.github.com/users/robertoayusob/following{/other_user}","gists_url":"https://api.github.com/users/robertoayusob/gists{/gist_id}","starred_url":"https://api.github.com/users/robertoayusob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertoayusob/subscriptions","organizations_url":"https://api.github.com/users/robertoayusob/orgs","repos_url":"https://api.github.com/users/robertoayusob/repos","events_url":"https://api.github.com/users/robertoayusob/events{/privacy}","received_events_url":"https://api.github.com/users/robertoayusob/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-01-04T12:42:15Z","performed_via_github_app":null},{"id":2054399647,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwNTQzOTk2NDc=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2054399647","actor":{"login":"robertoayusob","id":20969752,"node_id":"MDQ6VXNlcjIwOTY5NzUy","avatar_url":"https://avatars.githubusercontent.com/u/20969752?v=4","gravatar_id":"","url":"https://api.github.com/users/robertoayusob","html_url":"https://github.com/robertoayusob","followers_url":"https://api.github.com/users/robertoayusob/followers","following_url":"https://api.github.com/users/robertoayusob/following{/other_user}","gists_url":"https://api.github.com/users/robertoayusob/gists{/gist_id}","starred_url":"https://api.github.com/users/robertoayusob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertoayusob/subscriptions","organizations_url":"https://api.github.com/users/robertoayusob/orgs","repos_url":"https://api.github.com/users/robertoayusob/repos","events_url":"https://api.github.com/users/robertoayusob/events{/privacy}","received_events_url":"https://api.github.com/users/robertoayusob/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-01-04T12:42:15Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/451435873","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-451435873","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":451435873,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTQzNTg3Mw==","user":{"login":"robertoayusob","id":20969752,"node_id":"MDQ6VXNlcjIwOTY5NzUy","avatar_url":"https://avatars.githubusercontent.com/u/20969752?v=4","gravatar_id":"","url":"https://api.github.com/users/robertoayusob","html_url":"https://github.com/robertoayusob","followers_url":"https://api.github.com/users/robertoayusob/followers","following_url":"https://api.github.com/users/robertoayusob/following{/other_user}","gists_url":"https://api.github.com/users/robertoayusob/gists{/gist_id}","starred_url":"https://api.github.com/users/robertoayusob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertoayusob/subscriptions","organizations_url":"https://api.github.com/users/robertoayusob/orgs","repos_url":"https://api.github.com/users/robertoayusob/repos","events_url":"https://api.github.com/users/robertoayusob/events{/privacy}","received_events_url":"https://api.github.com/users/robertoayusob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-04T12:52:29Z","updated_at":"2019-01-04T12:55:34Z","body":"Of Course but the link returns a 404- Can you give me the github src version link? I can checkout and compile miself.\r\n..\r\n\r\nFound, I will download, compile and test, will tell you result soon\r\n\r\nThkns","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/451435873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"robertoayusob","id":20969752,"node_id":"MDQ6VXNlcjIwOTY5NzUy","avatar_url":"https://avatars.githubusercontent.com/u/20969752?v=4","gravatar_id":"","url":"https://api.github.com/users/robertoayusob","html_url":"https://github.com/robertoayusob","followers_url":"https://api.github.com/users/robertoayusob/followers","following_url":"https://api.github.com/users/robertoayusob/following{/other_user}","gists_url":"https://api.github.com/users/robertoayusob/gists{/gist_id}","starred_url":"https://api.github.com/users/robertoayusob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertoayusob/subscriptions","organizations_url":"https://api.github.com/users/robertoayusob/orgs","repos_url":"https://api.github.com/users/robertoayusob/repos","events_url":"https://api.github.com/users/robertoayusob/events{/privacy}","received_events_url":"https://api.github.com/users/robertoayusob/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/451437725","html_url":"https://github.com/rclone/rclone/issues/2806#issuecomment-451437725","issue_url":"https://api.github.com/repos/rclone/rclone/issues/2806","id":451437725,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTQzNzcyNQ==","user":{"login":"robertoayusob","id":20969752,"node_id":"MDQ6VXNlcjIwOTY5NzUy","avatar_url":"https://avatars.githubusercontent.com/u/20969752?v=4","gravatar_id":"","url":"https://api.github.com/users/robertoayusob","html_url":"https://github.com/robertoayusob","followers_url":"https://api.github.com/users/robertoayusob/followers","following_url":"https://api.github.com/users/robertoayusob/following{/other_user}","gists_url":"https://api.github.com/users/robertoayusob/gists{/gist_id}","starred_url":"https://api.github.com/users/robertoayusob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertoayusob/subscriptions","organizations_url":"https://api.github.com/users/robertoayusob/orgs","repos_url":"https://api.github.com/users/robertoayusob/repos","events_url":"https://api.github.com/users/robertoayusob/events{/privacy}","received_events_url":"https://api.github.com/users/robertoayusob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-04T13:01:55Z","updated_at":"2019-01-04T13:02:48Z","body":"got the same problem:\r\nsync:\r\n```\r\nroot@ubuntu0:~/rclone# ./rclone sync -vv azure:common/tmp/ ./probando_sinfiltro/\r\n2019/01/04 14:00:20 DEBUG : rclone: Version \"v1.45-DEV\" starting with parameters [\"./rclone\" \"sync\" \"-vv\" \"azure:common/tmp/\" \"./probando_sinfiltro/\"]\r\n2019/01/04 14:00:20 DEBUG : Using config file from \"/root/.config/rclone/rclone.conf\"\r\n2019/01/04 14:00:20 DEBUG : pacer: Reducing sleep to 0s\r\n2019/01/04 14:00:20 Failed to create file system for \"azure:common/tmp/\": is a not a regular file\r\n```\r\nthe lsf test\r\n```\r\nroot@ubuntu0:~/rclone# ./rclone -vv --dump bodies lsf azure:common/tmp\r\n2019/01/04 14:01:26 DEBUG : rclone: Version \"v1.45-DEV\" starting with parameters [\"./rclone\" \"-vv\" \"--dump\" \"bodies\" \"lsf\" \"azure:common/tmp\"]\r\n2019/01/04 14:01:26 DEBUG : Using config file from \"/root/.config/rclone/rclone.conf\"\r\n2019/01/04 14:01:26 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2019/01/04 14:01:26 DEBUG : HTTP REQUEST (req 0xc0002f1700)\r\n2019/01/04 14:01:26 DEBUG : HEAD /common/tmp?timeout=31536001 HTTP/1.1\r\nHost: vecibigdatastorage.blob.core.windows.net\r\nUser-Agent: rclone/v1.45-DEV\r\nAuthorization: XXXX\r\nX-Ms-Client-Request-Id: d0aebfcd-ee5c-4d5c-6b5e-81de7734afd9\r\nX-Ms-Version: 2018-03-28\r\nx-ms-date: Fri, 04 Jan 2019 13:01:26 GMT\r\n\r\n2019/01/04 14:01:26 DEBUG : >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\n2019/01/04 14:01:27 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2019/01/04 14:01:27 DEBUG : HTTP RESPONSE (req 0xc0002f1700)\r\n2019/01/04 14:01:27 DEBUG : HTTP/1.1 200 OK\r\nAccept-Ranges: bytes\r\nDate: Fri, 04 Jan 2019 13:01:26 GMT\r\nEtag: \"0x8D65B887F16C166\"\r\nLast-Modified: Thu, 06 Dec 2018 14:38:32 GMT\r\nServer: Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0\r\nX-Ms-Blob-Type: BlockBlob\r\nX-Ms-Creation-Time: Fri, 23 Nov 2018 06:49:03 GMT\r\nX-Ms-Lease-State: available\r\nX-Ms-Lease-Status: unlocked\r\nX-Ms-Meta-Hdi_isfolder: true\r\nX-Ms-Meta-Hdi_permission: {\"owner\":\"hdfs\",\"group\":\"supergroup\",\"permissions\":\"rwxrwxrwx\"}\r\nX-Ms-Request-Id: bd1237c0-d01e-0075-432d-a4b45b000000\r\nX-Ms-Server-Encrypted: true\r\nX-Ms-Version: 2018-03-28\r\nContent-Length: 0\r\n\r\n2019/01/04 14:01:27 DEBUG : <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n2019/01/04 14:01:27 DEBUG : pacer: Reducing sleep to 0s\r\n2019/01/04 14:01:27 Failed to create file system for \"azure:common/tmp\": is a not a regular file\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/451437725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"robertoayusob","id":20969752,"node_id":"MDQ6VXNlcjIwOTY5NzUy","avatar_url":"https://avatars.githubusercontent.com/u/20969752?v=4","gravatar_id":"","url":"https://api.github.com/users/robertoayusob","html_url":"https://github.com/robertoayusob","followers_url":"https://api.github.com/users/robertoayusob/followers","following_url":"https://api.github.com/users/robertoayusob/following{/other_user}","gists_url":"https://api.github.com/users/robertoayusob/gists{/gist_id}","starred_url":"https://api.github.com/users/robertoayusob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertoayusob/subscriptions","organizations_url":"https://api.github.com/users/robertoayusob/orgs","repos_url":"https://api.github.com/users/robertoayusob/repos","events_url":"https://api.github.com/users/robertoayusob/events{/privacy}","received_events_url":"https://api.github.com/users/robertoayusob/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2054859636,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIwNTQ4NTk2MzY=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2054859636","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"92e0ba81d3403bb5778eb2508a9eeb02d939eb96","commit_url":"https://api.github.com/repos/rclone/rclone/commits/92e0ba81d3403bb5778eb2508a9eeb02d939eb96","created_at":"2019-01-04T16:32:17Z","performed_via_github_app":null}]