{"url":"https://api.github.com/repos/rclone/rclone/issues/6469","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/6469/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/6469/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/6469/events","html_url":"https://github.com/rclone/rclone/issues/6469","id":1389067054,"node_id":"I_kwDOAQ-n5M5Sy3su","number":6469,"title":"wrong implementation of RCD Mount with daemon parameter","user":{"login":"segator","id":2348131,"node_id":"MDQ6VXNlcjIzNDgxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/2348131?v=4","gravatar_id":"","url":"https://api.github.com/users/segator","html_url":"https://github.com/segator","followers_url":"https://api.github.com/users/segator/followers","following_url":"https://api.github.com/users/segator/following{/other_user}","gists_url":"https://api.github.com/users/segator/gists{/gist_id}","starred_url":"https://api.github.com/users/segator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/segator/subscriptions","organizations_url":"https://api.github.com/users/segator/orgs","repos_url":"https://api.github.com/users/segator/repos","events_url":"https://api.github.com/users/segator/events{/privacy}","received_events_url":"https://api.github.com/users/segator/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-09-28T09:51:09Z","updated_at":"2022-10-12T11:07:49Z","closed_at":"2022-10-12T11:07:49Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"if you mount a volume using rclone rc or web gui passing as  mount command parameter **daemon**. RCD is not running rclone mount command properly, seems is pasing RCD arguments instead of building the proper mount args, you can find it clear here https://github.com/rclone/rclone/blob/master/cmd/mountlib/mount.go#L249, making the mount is never mounted, also will make crash when trying to unmount as unmountFn() is nil\r\n```\r\nerror: invalid memory address or nil pointer dereference\r\ngoroutine 83 [running]:\r\nruntime/debug.Stack()\r\n        /root/sdk/go1.19.1/src/runtime/debug/stack.go:24 +0x7a\r\ngithub.com/rclone/rclone/fs/rc/jobs.(*Job).run.func1()\r\n        /root/rclone/fs/rc/jobs/job.go:90 +0x55\r\npanic({0x3060b00, 0x44cfc10})\r\n        /root/sdk/go1.19.1/src/runtime/panic.go:890 +0x267\r\ngithub.com/rclone/rclone/cmd/mountlib.(*MountPoint).Unmount(0xc0006f4480)\r\n        /root/rclone/cmd/mountlib/mount.go:324 +0x2c\r\ngithub.com/rclone/rclone/cmd/mountlib.unMountRc({0x7fd804a10fff, 0xc00053ed90},\r\n0xc0005f17a0)\r\n        /root/rclone/cmd/mountlib/rc.go:167 +0x1f1\r\ngithub.com/rclone/rclone/fs/rc/jobs.(*Job).run(0xc0008c0840, {0x38517f0, 0xc0003\r\n48c00}, 0x34cfd18, 0xc0005f17a0)\r\n        /root/rclone/fs/rc/jobs/job.go:93 +0xd9\r\ngithub.com/rclone/rclone/fs/rc/jobs.(*Jobs).NewJob(0xc0006f0090, {0x38517f0, 0xc\r\n000348c00}, 0x34cfd18, 0xc0005f17a0)\r\n        /root/rclone/fs/rc/jobs/job.go:286 +0x930\r\ngithub.com/rclone/rclone/fs/rc/jobs.NewJob({0x38517f0, 0xc000348bc0}, 0x34cfd18,\r\n 0xc0005f1740)\r\n        /root/rclone/fs/rc/jobs/job.go:296 +0xa5\r\ngithub.com/rclone/rclone/fs/rc/rcserver.(*Server).handlePost(0xc00014b600, {0x38\r\n4e1b0, 0xc0008b4700}, 0xc000c18300, {0xc0005f20a6, 0xd})\r\n        /root/rclone/fs/rc/rcserver/rcserver.go:280 +0xd86\r\ngithub.com/rclone/rclone/fs/rc/rcserver.(*Server).handler(0xc00014b600, {0x384e1\r\nb0, 0xc0008b4700}, 0xc000c18300)\r\n        /root/rclone/fs/rc/rcserver/rcserver.go:213 +0x431\r\nnet/http.HandlerFunc.ServeHTTP(0xc000580840, {0x384e1b0, 0xc0008b4700}, 0xc000c1\r\n8300)\r\n        /root/sdk/go1.19.1/src/net/http/server.go:2109 +0x43\r\nnet/http.(*ServeMux).ServeHTTP(0x45abd80, {0x384e1b0, 0xc0008b4700}, 0xc000c1830\r\n0)\r\n        /root/sdk/go1.19.1/src/net/http/server.go:2487 +0x135\r\nnet/http.serverHandler.ServeHTTP({0xc000430870}, {0x384e1b0, 0xc0008b4700}, 0xc0\r\n00c18300)\r\n        /root/sdk/go1.19.1/src/net/http/server.go:2947 +0x474\r\nnet/http.(*conn).serve(0xc000d14500, {0x38517f0, 0xc000ccc000})\r\n        /root/sdk/go1.19.1/src/net/http/server.go:1991 +0x195c\r\ncreated by net/http.(*Server).Serve\r\n        /root/sdk/go1.19.1/src/net/http/server.go:3102 +0x9e5\r\n```\r\n\r\n**Version 1.59.2** Tried aswell with development version master https://github.com/rclone/rclone/commit/7fbc928a19431f566b87c8c33d98fbb5099dad5f\r\n","closed_by":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/6469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/6469/timeline","performed_via_github_app":null,"state_reason":"completed"}