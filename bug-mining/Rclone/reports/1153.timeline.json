[{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/557903184","html_url":"https://github.com/rclone/rclone/issues/3759#issuecomment-557903184","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3759","id":557903184,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NzkwMzE4NA==","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-24T16:14:11Z","updated_at":"2019-11-24T16:14:11Z","body":"Rclone usually keeps a a backup of the previous config as `rclone.conf.old` which explains what you saw.\r\n\r\nI'm sorry about that...\r\n\r\nWhat do you think rclone should do? We should probably document the `rclone.conf.old` name somewhere at minimum.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/557903184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/557914629","html_url":"https://github.com/rclone/rclone/issues/3759#issuecomment-557914629","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3759","id":557914629,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NzkxNDYyOQ==","user":{"login":"jeff-geoff","id":56777875,"node_id":"MDQ6VXNlcjU2Nzc3ODc1","avatar_url":"https://avatars.githubusercontent.com/u/56777875?v=4","gravatar_id":"","url":"https://api.github.com/users/jeff-geoff","html_url":"https://github.com/jeff-geoff","followers_url":"https://api.github.com/users/jeff-geoff/followers","following_url":"https://api.github.com/users/jeff-geoff/following{/other_user}","gists_url":"https://api.github.com/users/jeff-geoff/gists{/gist_id}","starred_url":"https://api.github.com/users/jeff-geoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeff-geoff/subscriptions","organizations_url":"https://api.github.com/users/jeff-geoff/orgs","repos_url":"https://api.github.com/users/jeff-geoff/repos","events_url":"https://api.github.com/users/jeff-geoff/events{/privacy}","received_events_url":"https://api.github.com/users/jeff-geoff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-24T18:28:00Z","updated_at":"2019-11-24T18:34:56Z","body":"No worries.  Luckily rclone conf is really slick, and it took me all of 2 minutes to put everything back in place.  So, no apologies necessary.\r\n\r\nHowever, the behavior I experienced may have been slightly different than what you describe above.\r\n\r\nTo explain in more detail--\r\nI copied my rclone.conf to a .old (manually), deleted the original rclone.conf (also manually).\r\nAt this point the directory *only* contained a .old.\r\n\r\nThen, I ran rclone config again.  Assuming I would end up with a directory that contained:\r\na) new .conf, and\r\nb) the .old I had created manually\r\n\r\nHowever, I did not end up with a backup of the previous config at all.  Either my own moved copy, nor a .old created by rclone config as you describe.\r\n\r\nI ended up with a directory that contained only one file.\r\nThe .old I had manually created was wiped; the directory contained only one file and it was the new rclone.conf.\r\n\r\nMy assumption is that rclone config is overwriting the entire directory, rather than operating on the files contained therein.  I have not checked the repo to confirm this.\r\n\r\nBecause that is not expected behavior generally speaking (I would not expect anything to nuke another file without at least a warning), I can't imagine many people would even check the docs to see if rclone wanted to do this.\r\n\r\nSo documenting would be good, but assuming what I experienced is not a bug, I think people will still run up against it from time to time.\r\n\r\nMy assumption was that rclone config simply operated by modifying/updating rclone.conf in place, not that rclone config replaced the .conf with a freshly written .conf\r\nIn other words, with the behavior I anticipated, when I moved the contents of rclone.conf to another file in the same directory, I would preserve my old configuration.\r\n\r\nI would suggest either having rclone config enumerate the .old files (rclone.conf.old.2, rclone.conf.old.3, rclone.conf.old.4, etc.)\r\nor\r\nsimply prompt the user before changes are made, which is probably easier to add.\r\n\r\ne.g. What would you like rclone to do with its current config file?\r\n1. provide a path to which we should move the current .conf\r\n2. Nuke the current .conf file and completely replace it, leaving no backup of the previous version","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/557914629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jeff-geoff","id":56777875,"node_id":"MDQ6VXNlcjU2Nzc3ODc1","avatar_url":"https://avatars.githubusercontent.com/u/56777875?v=4","gravatar_id":"","url":"https://api.github.com/users/jeff-geoff","html_url":"https://github.com/jeff-geoff","followers_url":"https://api.github.com/users/jeff-geoff/followers","following_url":"https://api.github.com/users/jeff-geoff/following{/other_user}","gists_url":"https://api.github.com/users/jeff-geoff/gists{/gist_id}","starred_url":"https://api.github.com/users/jeff-geoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeff-geoff/subscriptions","organizations_url":"https://api.github.com/users/jeff-geoff/orgs","repos_url":"https://api.github.com/users/jeff-geoff/repos","events_url":"https://api.github.com/users/jeff-geoff/events{/privacy}","received_events_url":"https://api.github.com/users/jeff-geoff/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/559274417","html_url":"https://github.com/rclone/rclone/issues/3759#issuecomment-559274417","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3759","id":559274417,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTI3NDQxNw==","user":{"login":"eharris","id":19860244,"node_id":"MDQ6VXNlcjE5ODYwMjQ0","avatar_url":"https://avatars.githubusercontent.com/u/19860244?v=4","gravatar_id":"","url":"https://api.github.com/users/eharris","html_url":"https://github.com/eharris","followers_url":"https://api.github.com/users/eharris/followers","following_url":"https://api.github.com/users/eharris/following{/other_user}","gists_url":"https://api.github.com/users/eharris/gists{/gist_id}","starred_url":"https://api.github.com/users/eharris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eharris/subscriptions","organizations_url":"https://api.github.com/users/eharris/orgs","repos_url":"https://api.github.com/users/eharris/repos","events_url":"https://api.github.com/users/eharris/events{/privacy}","received_events_url":"https://api.github.com/users/eharris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-27T22:38:44Z","updated_at":"2019-11-27T22:38:44Z","body":"It seems to me that rclone shouldn't step on a backup file if it didn't create or put it there itself.  So when it renames the current conf to .old, it should do so without clobbering an already existing file.\r\n\r\nIf rclone wants to keep a temporary backup of the config file while it's in the process of modifying it, it seems like using the facilities provided by io/ioutil would be more appropriate and safer: https://golang.org/pkg/io/ioutil/#TempFile","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/559274417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eharris","id":19860244,"node_id":"MDQ6VXNlcjE5ODYwMjQ0","avatar_url":"https://avatars.githubusercontent.com/u/19860244?v=4","gravatar_id":"","url":"https://api.github.com/users/eharris","html_url":"https://github.com/eharris","followers_url":"https://api.github.com/users/eharris/followers","following_url":"https://api.github.com/users/eharris/following{/other_user}","gists_url":"https://api.github.com/users/eharris/gists{/gist_id}","starred_url":"https://api.github.com/users/eharris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eharris/subscriptions","organizations_url":"https://api.github.com/users/eharris/orgs","repos_url":"https://api.github.com/users/eharris/repos","events_url":"https://api.github.com/users/eharris/events{/privacy}","received_events_url":"https://api.github.com/users/eharris/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2941386410,"node_id":"MDEyOkxhYmVsZWRFdmVudDI5NDEzODY0MTA=","url":"https://api.github.com/repos/rclone/rclone/issues/events/2941386410","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-01-12T17:34:43Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":4001533079,"node_id":"MDEyOkxhYmVsZWRFdmVudDQwMDE1MzMwNzk=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4001533079","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-11-16T17:39:37Z","label":{"name":"configuration","color":"8ccedb"},"performed_via_github_app":null},{"id":4001533081,"node_id":"MDEyOkxhYmVsZWRFdmVudDQwMDE1MzMwODE=","url":"https://api.github.com/repos/rclone/rclone/issues/events/4001533081","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-11-16T17:39:37Z","label":{"name":"doc fix","color":"eb6420"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/728216676","html_url":"https://github.com/rclone/rclone/issues/3759#issuecomment-728216676","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3759","id":728216676,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODIxNjY3Ng==","user":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-16T17:40:05Z","updated_at":"2020-11-16T17:40:05Z","body":"I suggest describing this behaviour in the docs.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/728216676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ivandeex","id":9028053,"node_id":"MDQ6VXNlcjkwMjgwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/9028053?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandeex","html_url":"https://github.com/ivandeex","followers_url":"https://api.github.com/users/ivandeex/followers","following_url":"https://api.github.com/users/ivandeex/following{/other_user}","gists_url":"https://api.github.com/users/ivandeex/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandeex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandeex/subscriptions","organizations_url":"https://api.github.com/users/ivandeex/orgs","repos_url":"https://api.github.com/users/ivandeex/repos","events_url":"https://api.github.com/users/ivandeex/events{/privacy}","received_events_url":"https://api.github.com/users/ivandeex/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-28T16:00:21Z","updated_at":"2022-08-28T16:00:21Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/6402","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/6402/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/6402/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/6402/events","html_url":"https://github.com/rclone/rclone/pull/6402","id":1353395846,"node_id":"PR_kwDOAQ-n5M497ILh","number":6402,"title":"Document how the configuration file is written, and that an .old file will be deleted","user":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":173668299,"node_id":"MDU6TGFiZWwxNzM2NjgyOTk=","url":"https://api.github.com/repos/rclone/rclone/labels/doc%20fix","name":"doc fix","color":"f0b040","default":false,"description":""},{"id":2504903272,"node_id":"MDU6TGFiZWwyNTA0OTAzMjcy","url":"https://api.github.com/repos/rclone/rclone/labels/configuration","name":"configuration","color":"8ccedb","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-08-28T16:00:21Z","updated_at":"2023-03-24T12:46:12Z","closed_at":"2023-03-24T11:40:34Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rclone/rclone/pulls/6402","html_url":"https://github.com/rclone/rclone/pull/6402","diff_url":"https://github.com/rclone/rclone/pull/6402.diff","patch_url":"https://github.com/rclone/rclone/pull/6402.patch","merged_at":"2023-03-24T11:40:34Z"},"body":"#### What is the purpose of this change?\r\n\r\n<!--\r\nDescribe the changes here\r\n-->\r\n\r\n#### Was the change discussed in an issue or in the forum before?\r\n\r\nThis was discussed in #3759, but not sure if this added documentation qualifies for closing the issue?\r\n\r\n#### Checklist\r\n\r\n- [X] I have read the [contribution guidelines](https://github.com/rclone/rclone/blob/master/CONTRIBUTING.md#submitting-a-new-feature-or-bug-fix).\r\n- [ ] I have added tests for all changes in this PR if appropriate.\r\n- [X] I have added documentation for the changes if appropriate.\r\n- [X] All commit messages are in [house style](https://github.com/rclone/rclone/blob/master/CONTRIBUTING.md#commit-messages).\r\n- [ ] I'm done, this Pull Request is ready for review :-)\r\n","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/6402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/6402/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-08T10:24:07Z","updated_at":"2023-02-08T10:24:07Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rclone/rclone/issues/6754","repository_url":"https://api.github.com/repos/rclone/rclone","labels_url":"https://api.github.com/repos/rclone/rclone/issues/6754/labels{/name}","comments_url":"https://api.github.com/repos/rclone/rclone/issues/6754/comments","events_url":"https://api.github.com/repos/rclone/rclone/issues/6754/events","html_url":"https://github.com/rclone/rclone/issues/6754","id":1575603972,"node_id":"I_kwDOAQ-n5M5d6c8E","number":6754,"title":"Hard to justify behaviour of config file: delete and create new one instead of modifying.","user":{"login":"thisismygitrepo","id":46288868,"node_id":"MDQ6VXNlcjQ2Mjg4ODY4","avatar_url":"https://avatars.githubusercontent.com/u/46288868?v=4","gravatar_id":"","url":"https://api.github.com/users/thisismygitrepo","html_url":"https://github.com/thisismygitrepo","followers_url":"https://api.github.com/users/thisismygitrepo/followers","following_url":"https://api.github.com/users/thisismygitrepo/following{/other_user}","gists_url":"https://api.github.com/users/thisismygitrepo/gists{/gist_id}","starred_url":"https://api.github.com/users/thisismygitrepo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thisismygitrepo/subscriptions","organizations_url":"https://api.github.com/users/thisismygitrepo/orgs","repos_url":"https://api.github.com/users/thisismygitrepo/repos","events_url":"https://api.github.com/users/thisismygitrepo/events{/privacy}","received_events_url":"https://api.github.com/users/thisismygitrepo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2504903272,"node_id":"MDU6TGFiZWwyNTA0OTAzMjcy","url":"https://api.github.com/repos/rclone/rclone/labels/configuration","name":"configuration","color":"8ccedb","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2023-02-08T07:09:14Z","updated_at":"2023-04-08T19:48:28Z","closed_at":"2023-04-08T19:48:28Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":17803236,"node_id":"MDEwOlJlcG9zaXRvcnkxNzgwMzIzNg==","name":"rclone","full_name":"rclone/rclone","private":false,"owner":{"login":"rclone","id":24937341,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM3MzQx","avatar_url":"https://avatars.githubusercontent.com/u/24937341?v=4","gravatar_id":"","url":"https://api.github.com/users/rclone","html_url":"https://github.com/rclone","followers_url":"https://api.github.com/users/rclone/followers","following_url":"https://api.github.com/users/rclone/following{/other_user}","gists_url":"https://api.github.com/users/rclone/gists{/gist_id}","starred_url":"https://api.github.com/users/rclone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclone/subscriptions","organizations_url":"https://api.github.com/users/rclone/orgs","repos_url":"https://api.github.com/users/rclone/repos","events_url":"https://api.github.com/users/rclone/events{/privacy}","received_events_url":"https://api.github.com/users/rclone/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rclone/rclone","description":"\"rsync for cloud storage\" - Google Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Wasabi, Google Cloud Storage, Azure Blob, Azure Files, Yandex Files","fork":false,"url":"https://api.github.com/repos/rclone/rclone","forks_url":"https://api.github.com/repos/rclone/rclone/forks","keys_url":"https://api.github.com/repos/rclone/rclone/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rclone/rclone/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rclone/rclone/teams","hooks_url":"https://api.github.com/repos/rclone/rclone/hooks","issue_events_url":"https://api.github.com/repos/rclone/rclone/issues/events{/number}","events_url":"https://api.github.com/repos/rclone/rclone/events","assignees_url":"https://api.github.com/repos/rclone/rclone/assignees{/user}","branches_url":"https://api.github.com/repos/rclone/rclone/branches{/branch}","tags_url":"https://api.github.com/repos/rclone/rclone/tags","blobs_url":"https://api.github.com/repos/rclone/rclone/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rclone/rclone/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rclone/rclone/git/refs{/sha}","trees_url":"https://api.github.com/repos/rclone/rclone/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rclone/rclone/statuses/{sha}","languages_url":"https://api.github.com/repos/rclone/rclone/languages","stargazers_url":"https://api.github.com/repos/rclone/rclone/stargazers","contributors_url":"https://api.github.com/repos/rclone/rclone/contributors","subscribers_url":"https://api.github.com/repos/rclone/rclone/subscribers","subscription_url":"https://api.github.com/repos/rclone/rclone/subscription","commits_url":"https://api.github.com/repos/rclone/rclone/commits{/sha}","git_commits_url":"https://api.github.com/repos/rclone/rclone/git/commits{/sha}","comments_url":"https://api.github.com/repos/rclone/rclone/comments{/number}","issue_comment_url":"https://api.github.com/repos/rclone/rclone/issues/comments{/number}","contents_url":"https://api.github.com/repos/rclone/rclone/contents/{+path}","compare_url":"https://api.github.com/repos/rclone/rclone/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rclone/rclone/merges","archive_url":"https://api.github.com/repos/rclone/rclone/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rclone/rclone/downloads","issues_url":"https://api.github.com/repos/rclone/rclone/issues{/number}","pulls_url":"https://api.github.com/repos/rclone/rclone/pulls{/number}","milestones_url":"https://api.github.com/repos/rclone/rclone/milestones{/number}","notifications_url":"https://api.github.com/repos/rclone/rclone/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rclone/rclone/labels{/name}","releases_url":"https://api.github.com/repos/rclone/rclone/releases{/id}","deployments_url":"https://api.github.com/repos/rclone/rclone/deployments","created_at":"2014-03-16T16:19:57Z","updated_at":"2025-11-09T20:38:02Z","pushed_at":"2025-11-08T21:33:38Z","git_url":"git://github.com/rclone/rclone.git","ssh_url":"git@github.com:rclone/rclone.git","clone_url":"https://github.com/rclone/rclone.git","svn_url":"https://github.com/rclone/rclone","homepage":"https://rclone.org","size":217990,"stargazers_count":53422,"watchers_count":53422,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4767,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1169,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["azure-blob","azure-blob-storage","azure-files","backblaze-b2","cloud-storage","dropbox","encryption","ftp","fuse-filesystem","go","golang","google-cloud-storage","google-drive","onedrive","openstack-swift","rclone","s3","sftp","sync","webdav"],"visibility":"public","forks":4767,"open_issues":1169,"watchers":53422,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I have moved `rclone` config file to a different location and made a symbolic link pointing to it from original location. However, I see that `rclone` deletes this symbolic link and create a `new` config file whenever I do any modifications like editing, adding or removing sources.\r\n\r\nIf possible, can we please have a more benign and expected behaviour like the file gets *modified* instead of deleted altogether and recreated?\r\n\r\nThank you.","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/6754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rclone/rclone/issues/6754/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1490785434","html_url":"https://github.com/rclone/rclone/issues/3759#issuecomment-1490785434","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3759","id":1490785434,"node_id":"IC_kwDOAQ-n5M5Y25Sa","user":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-30T19:01:11Z","updated_at":"2023-03-30T19:01:11Z","body":"> I suggest describing this behaviour in the docs.\r\n\r\nAn attempt at doing so has been merged in https://github.com/rclone/rclone/pull/6402, where does that leave this issue do you think @animosity22 @ncw?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1490785434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8890907781,"node_id":"MEE_lADOAQ-n5M4fc3b_zwAAAAIR8HyF","url":"https://api.github.com/repos/rclone/rclone/issues/events/8890907781","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-03-30T19:01:11Z","performed_via_github_app":null},{"id":8890907791,"node_id":"SE_lADOAQ-n5M4fc3b_zwAAAAIR8HyP","url":"https://api.github.com/repos/rclone/rclone/issues/events/8890907791","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-03-30T19:01:11Z","performed_via_github_app":null},{"id":8890907807,"node_id":"MEE_lADOAQ-n5M4fc3b_zwAAAAIR8Hyf","url":"https://api.github.com/repos/rclone/rclone/issues/events/8890907807","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-03-30T19:01:11Z","performed_via_github_app":null},{"id":8890907815,"node_id":"SE_lADOAQ-n5M4fc3b_zwAAAAIR8Hyn","url":"https://api.github.com/repos/rclone/rclone/issues/events/8890907815","actor":{"login":"animosity022","id":5088712,"node_id":"MDQ6VXNlcjUwODg3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5088712?v=4","gravatar_id":"","url":"https://api.github.com/users/animosity022","html_url":"https://github.com/animosity022","followers_url":"https://api.github.com/users/animosity022/followers","following_url":"https://api.github.com/users/animosity022/following{/other_user}","gists_url":"https://api.github.com/users/animosity022/gists{/gist_id}","starred_url":"https://api.github.com/users/animosity022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/animosity022/subscriptions","organizations_url":"https://api.github.com/users/animosity022/orgs","repos_url":"https://api.github.com/users/animosity022/repos","events_url":"https://api.github.com/users/animosity022/events{/privacy}","received_events_url":"https://api.github.com/users/animosity022/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-03-30T19:01:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1491414214","html_url":"https://github.com/rclone/rclone/issues/3759#issuecomment-1491414214","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3759","id":1491414214,"node_id":"IC_kwDOAQ-n5M5Y5SzG","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-31T07:04:54Z","updated_at":"2023-03-31T07:04:54Z","body":"I think we have documented the way it works now which is good.\r\n\r\nCan we improve that is what this issue is about I guess?\r\n\r\nThe code in question is here\r\n\r\nhttps://github.com/rclone/rclone/blob/f4c787ab74c1efe0eb242b3e867cc20b9ddb61c9/fs/config/configfile/configfile.go#L157-L165\r\n\r\ninstead of using `rclone.conf.old` we could use the temporary name we've already generated so `rclone.conf.XXXXXX` (`f.Name()`) and add a suffix `.old` - this would mean there was never a collision between what we are doing and user stored files. Or we could generate a new temporary name which is guaranteed not to exist.\r\n\r\nWhat do you think?\r\n\r\nPS saving files reliably is hard :-)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1491414214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1495763149","html_url":"https://github.com/rclone/rclone/issues/3759#issuecomment-1495763149","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3759","id":1495763149,"node_id":"IC_kwDOAQ-n5M5ZJ4jN","user":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-04T10:56:26Z","updated_at":"2023-04-04T14:40:06Z","body":"> PS saving files reliably is hard :-)\r\n\r\nAgreed! :) But I think doing something along the lines you suggest would be a nice improvement.\r\n\r\n> instead of using rclone.conf.old we could use the temporary name we've already generated so rclone.conf.XXXXXX (f.Name()) and add a suffix .old - this would mean there was never a collision between what we are doing and user stored files.\r\n\r\nThat would be a good fix, for sure. However in theory there could be a collision, as I understand it: The temporary name created with os.CreateTemp, i.e. `rclone.conf.XXXXXX` from your example, is guaranteed to be unique, but when appending .old to that then there are no guarantees that `rclone.conf.XXXXXX.old` does not already exist. I would say the probability is very low, close to zero, though.\r\n\r\n> Or we could generate a new temporary name which is guaranteed not to exist.\r\n\r\nThat would be the ideal solution. Slightly slower (new random number + extra stat/exsits-check, possible loop), but I guess negligible in this case? Maybe we should just go for this, to fix it once and for all (yeah right, I wish...).\r\n\r\nThe only downside I can think of (with either of the two approaches), is that if for whatever reason rclone fails to delete the `.old` files then it would keep filling the directory with new files on each update instead of removing/overwriting the single file as it does today. Unlikely, and minimal problem.\r\n\r\nThen we should also do your suggestion regarding symlinks at the same time, probably:\r\n\r\n> However, what rclone could do is detect if the config file is a symlink and then read the link and use that path as the path to the config file. That would work with rclone and have the nice properties we need and work around this issue too.\r\n\r\nYou mean rclone should consider the directory of the path pointed to by the symlink, write updated config file directly in that directory, and also create temp files in that directory while doing so? Is this safe to do, or could it lead to permission issues do you think? I mean, can user have (write) access to symlink and symlinked file but not permissions to create additional files in that path?\r\n\r\nEdit: Created PR #6912 for implementing these two changes.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1495763149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8925359446,"node_id":"REFE_lADOAQ-n5M4fc3b_zwAAAAIT_i1W","url":"https://api.github.com/repos/rclone/rclone/issues/events/8925359446","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6bfee625d50a0a9703b73eb41a1af9a1551c9869","commit_url":"https://api.github.com/repos/albertony/rclone/commits/6bfee625d50a0a9703b73eb41a1af9a1551c9869","created_at":"2023-04-04T14:37:38Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1496146476","html_url":"https://github.com/rclone/rclone/issues/3759#issuecomment-1496146476","issue_url":"https://api.github.com/repos/rclone/rclone/issues/3759","id":1496146476,"node_id":"IC_kwDOAQ-n5M5ZLWIs","user":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-04T15:10:58Z","updated_at":"2023-04-04T15:10:58Z","body":"@albertony wrote:\r\n> > instead of using rclone.conf.old we could use the temporary name we've already generated so rclone.conf.XXXXXX (f.Name()) and add a suffix .old - this would mean there was never a collision between what we are doing and user stored files.\r\n> \r\n> That would be a good fix, for sure. However in theory there could be a collision, as I understand it: The temporary name created with os.CreateTemp, i.e. `rclone.conf.XXXXXX` from your example, is guaranteed to be unique, but when appending .old to that then there are no guarantees that `rclone.conf.XXXXXX.old` does not already exist. I would say the probability is very low, close to zero, though.\r\n\r\nYes there could be a collision.\r\n\r\n> > Or we could generate a new temporary name which is guaranteed not to exist.\r\n> \r\n> That would be the ideal solution. Slightly slower (new random number + extra stat/exsits-check, possible loop), but I guess negligible in this case? Maybe we should just go for this, to fix it once and for all (yeah right, I wish...).\r\n\r\nIf you aren't actually creating the file then there is a race condition where someone could create it in between you creating the file name and creating the file.\r\n\r\n> The only downside I can think of (with either of the two approaches), is that if for whatever reason rclone fails to delete the `.old` files then it would keep filling the directory with new files on each update instead of removing/overwriting the single file as it does today. Unlikely, and minimal problem.\r\n\r\nAgree. It could happen but unlikely. Probably some rclone user will complain of it in about 6 months time :laughing: \r\n\r\n> Then we should also do your suggestion regarding symlinks at the same time, probably:\r\n\r\nOK\r\n \r\n> > However, what rclone could do is detect if the config file is a symlink and then read the link and use that path as the path to the config file. That would work with rclone and have the nice properties we need and work around this issue too.\r\n> \r\n> You mean rclone should consider the directory of the path pointed to by the symlink, write updated config file directly in that directory, and also create temp files in that directory while doing so? Is this safe to do, or could it lead to permission issues do you think? I mean, can user have (write) access to symlink and symlinked file but not permissions to create additional files in that path?\r\n> \r\n> Edit: Created PR #6912 for implementing these two changes.\r\n\r\nI read your message before lunch and replied to it after lunch and in the mean time you made the PR! Nice work :-)\r\n\r\nWill take a look now.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rclone/rclone/issues/comments/1496146476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ncw","id":536803,"node_id":"MDQ6VXNlcjUzNjgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/536803?v=4","gravatar_id":"","url":"https://api.github.com/users/ncw","html_url":"https://github.com/ncw","followers_url":"https://api.github.com/users/ncw/followers","following_url":"https://api.github.com/users/ncw/following{/other_user}","gists_url":"https://api.github.com/users/ncw/gists{/gist_id}","starred_url":"https://api.github.com/users/ncw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ncw/subscriptions","organizations_url":"https://api.github.com/users/ncw/orgs","repos_url":"https://api.github.com/users/ncw/repos","events_url":"https://api.github.com/users/ncw/events{/privacy}","received_events_url":"https://api.github.com/users/ncw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8925753846,"node_id":"MEE_lADOAQ-n5M4fc3b_zwAAAAIUBDH2","url":"https://api.github.com/repos/rclone/rclone/issues/events/8925753846","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-04-04T15:10:58Z","performed_via_github_app":null},{"id":8925753864,"node_id":"SE_lADOAQ-n5M4fc3b_zwAAAAIUBDII","url":"https://api.github.com/repos/rclone/rclone/issues/events/8925753864","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-04-04T15:10:58Z","performed_via_github_app":null},{"id":8928627052,"node_id":"REFE_lADOAQ-n5M4fc3b_zwAAAAIUMAls","url":"https://api.github.com/repos/rclone/rclone/issues/events/8928627052","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"79772d45b8e10246e9fc4b74c00535f890e64733","commit_url":"https://api.github.com/repos/albertony/rclone/commits/79772d45b8e10246e9fc4b74c00535f890e64733","created_at":"2023-04-04T20:39:04Z","performed_via_github_app":null},{"id":8957443607,"node_id":"REFE_lADOAQ-n5M4fc3b_zwAAAAIV574X","url":"https://api.github.com/repos/rclone/rclone/issues/events/8957443607","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1f738dddc12820cabbaf02772fb5fee587cf36e0","commit_url":"https://api.github.com/repos/albertony/rclone/commits/1f738dddc12820cabbaf02772fb5fee587cf36e0","created_at":"2023-04-08T09:58:56Z","performed_via_github_app":null},{"id":8958083783,"node_id":"CE_lADOAQ-n5M4fc3b_zwAAAAIV8YLH","url":"https://api.github.com/repos/rclone/rclone/issues/events/8958083783","actor":{"login":"albertony","id":12441419,"node_id":"MDQ6VXNlcjEyNDQxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/12441419?v=4","gravatar_id":"","url":"https://api.github.com/users/albertony","html_url":"https://github.com/albertony","followers_url":"https://api.github.com/users/albertony/followers","following_url":"https://api.github.com/users/albertony/following{/other_user}","gists_url":"https://api.github.com/users/albertony/gists{/gist_id}","starred_url":"https://api.github.com/users/albertony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertony/subscriptions","organizations_url":"https://api.github.com/users/albertony/orgs","repos_url":"https://api.github.com/users/albertony/repos","events_url":"https://api.github.com/users/albertony/events{/privacy}","received_events_url":"https://api.github.com/users/albertony/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"ec8bbb8d3007511bcf59df747fba77b7231c54d1","commit_url":"https://api.github.com/repos/rclone/rclone/commits/ec8bbb8d3007511bcf59df747fba77b7231c54d1","created_at":"2023-04-08T19:48:28Z","state_reason":null,"performed_via_github_app":null},{"id":11635038955,"node_id":"REFE_lADOAQ-n5M4fc3b_zwAAAAK1gJrr","url":"https://api.github.com/repos/rclone/rclone/issues/events/11635038955","actor":{"login":"deyarchit","id":4198802,"node_id":"MDQ6VXNlcjQxOTg4MDI=","avatar_url":"https://avatars.githubusercontent.com/u/4198802?v=4","gravatar_id":"","url":"https://api.github.com/users/deyarchit","html_url":"https://github.com/deyarchit","followers_url":"https://api.github.com/users/deyarchit/followers","following_url":"https://api.github.com/users/deyarchit/following{/other_user}","gists_url":"https://api.github.com/users/deyarchit/gists{/gist_id}","starred_url":"https://api.github.com/users/deyarchit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deyarchit/subscriptions","organizations_url":"https://api.github.com/users/deyarchit/orgs","repos_url":"https://api.github.com/users/deyarchit/repos","events_url":"https://api.github.com/users/deyarchit/events{/privacy}","received_events_url":"https://api.github.com/users/deyarchit/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ec8bbb8d3007511bcf59df747fba77b7231c54d1","commit_url":"https://api.github.com/repos/deyarchit/rclone/commits/ec8bbb8d3007511bcf59df747fba77b7231c54d1","created_at":"2024-01-30T00:42:32Z","performed_via_github_app":null}]