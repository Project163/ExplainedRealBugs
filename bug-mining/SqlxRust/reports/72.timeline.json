[{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925233274","html_url":"https://github.com/launchbadge/sqlx/issues/1449#issuecomment-925233274","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1449","id":925233274,"node_id":"IC_kwDODb6dM843JfB6","user":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-22T19:11:15Z","updated_at":"2021-09-22T19:12:51Z","body":"Do you mind giving the output of `EXPLAIN (VERBOSE, FORMAT JSON) CALL my_procedure(NULL);`? That's what the macro's trying to parse here.\r\n\r\nA minimal reproduction would be fine (preferable, actually) if you don't want to give the real query plan.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925233274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925252484","html_url":"https://github.com/launchbadge/sqlx/issues/1449#issuecomment-925252484","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1449","id":925252484,"node_id":"IC_kwDODb6dM843JjuE","user":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-22T19:27:16Z","updated_at":"2021-09-22T19:27:16Z","body":"Hmm, trying to reproduce it myself, you apparently can't do an `EXPLAIN` on a `CALL` command as you get a syntax error.\r\n\r\nAlthough what the macro is doing it's more like:\r\n\r\n```sql\r\nPREPARE call_foo AS CALL foo();\r\nEXPLAIN (VERBOSE, FORMAT JSON) EXECUTE call_foo;\r\n```\r\n\r\nBut even then you can't use `CALL` with the textual `PREPARE`, it only works with the extended query flow in the binary protocol which is difficult to invoke manually. \r\n\r\nI suspect, however, that the output of `EXPLAIN` is more or less completely useless here as it's probably returning the literal string `\"Utility Statement\"`.\r\n\r\nDoes `my_procedure` use any `OUT` parameters?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925252484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5345485972,"node_id":"LE_lADODb6dM8473cltzwAAAAE-naSU","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/5345485972","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-09-22T19:27:47Z","label":{"name":"bug","color":"e11d21"},"performed_via_github_app":null},{"id":5345485975,"node_id":"LE_lADODb6dM8473cltzwAAAAE-naSX","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/5345485975","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-09-22T19:27:47Z","label":{"name":"db:postgres","color":"336791"},"performed_via_github_app":null},{"id":5345485977,"node_id":"LE_lADODb6dM8473cltzwAAAAE-naSZ","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/5345485977","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-09-22T19:27:47Z","label":{"name":"macros","color":"c42f6d"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925401832","html_url":"https://github.com/launchbadge/sqlx/issues/1449#issuecomment-925401832","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1449","id":925401832,"node_id":"IC_kwDODb6dM843KILo","user":{"login":"cortopy","id":8725825,"node_id":"MDQ6VXNlcjg3MjU4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8725825?v=4","gravatar_id":"","url":"https://api.github.com/users/cortopy","html_url":"https://github.com/cortopy","followers_url":"https://api.github.com/users/cortopy/followers","following_url":"https://api.github.com/users/cortopy/following{/other_user}","gists_url":"https://api.github.com/users/cortopy/gists{/gist_id}","starred_url":"https://api.github.com/users/cortopy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cortopy/subscriptions","organizations_url":"https://api.github.com/users/cortopy/orgs","repos_url":"https://api.github.com/users/cortopy/repos","events_url":"https://api.github.com/users/cortopy/events{/privacy}","received_events_url":"https://api.github.com/users/cortopy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-22T23:33:02Z","updated_at":"2021-09-22T23:33:02Z","body":"thanks @abonander for answering so quickly!\r\n\r\nThis is what I got from the terminal for the query plan\r\n```\r\nERROR:  syntax error at or near \"CALL\"\r\nLINE 1: EXPLAIN (VERBOSE, FORMAT JSON) CALL append_to_store(NULL);\r\n```\r\n\r\nThe procedure has more arguments but pg seems to complain about the syntax anyway\r\n\r\nThe procedure is this one:\r\n\r\n```sql\r\nCREATE OR REPLACE PROCEDURE append_to_store(\r\n    notify_aggregate_type_id    TEXT,\r\n    aggregate_id                UUID,\r\n    current_version             INTEGER,\r\n    perform_version_check       BOOLEAN,\r\n    names                       TEXT[],\r\n    timestamps                  TIMESTAMPTZ[],\r\n    events                      JSONB[],\r\n    INOUT aggregate_version     INTEGER DEFAULT NULL,\r\n    INOUT sequence_number       BIGINT DEFAULT NULL\r\n) \r\nLANGUAGE PLPGSQL\r\nAS $$\r\nDECLARE\r\n    \"event\"                     JSONB;\r\n    event_name                  TEXT;\r\n    timestamp                   TIMESTAMPTZ;\r\nBEGIN\r\n\r\n    -- Retrieve the global offset value from the aggregate_type_id.\r\n    PERFORM FROM aggregate_types WHERE id = notify_aggregate_type_id;\r\n    IF NOT FOUND THEN\r\n        RAISE EXCEPTION 'invalid aggregate type provided: %', notify_aggregate_type_id;\r\n    END IF;\r\n\r\n    -- Retrieve the latest aggregate version for the specified aggregate id.\r\n    SELECT a.\"version\" INTO aggregate_version FROM aggregates a WHERE id = aggregate_id AND a.aggregate_type_id = notify_aggregate_type_id;\r\n    IF NOT FOUND THEN\r\n        -- Add the initial aggregate representation inside the `aggregates` table.\r\n        INSERT INTO aggregates (id, aggregate_type_id)\r\n        VALUES (aggregate_id, notify_aggregate_type_id);\r\n\r\n        -- Make sure to initialize the aggregate version in case\r\n        aggregate_version = 0;\r\n    END IF;\r\n\r\n    -- Perform optimistic concurrency check.\r\n    IF perform_version_check AND aggregate_version <> current_version THEN\r\n        RAISE EXCEPTION 'invalid aggregate version provided: %, expected: %', current_version, aggregate_version;\r\n    END IF;\r\n\r\n    SELECT events.sequence_number INTO sequence_number from events ORDER BY time DESC LIMIT 1;\r\n\r\n    FOR i IN 1 .. array_upper(events, 1)\r\n    LOOP\r\n        event_name = names[i];\r\n        \"event\" = events[i];\r\n        timestamp = timestamps[i];\r\n        -- Increment the aggregate version prior to inserting the new event.\r\n        aggregate_version = aggregate_version + 1;\r\n\r\n        -- Insert the event into the events table.\r\n        -- Version numbers should start from 1; sequence numbers should start from 0.\r\n        INSERT INTO events\r\n            (time, aggregate_id, aggregate_type_id, \"version\", name, \"event\")\r\n        VALUES\r\n            (coalesce(timestamp, now()), aggregate_id, notify_aggregate_type_id, aggregate_version, event_name, \"event\")\r\n        RETURNING\r\n            events.sequence_number INTO sequence_number;\r\n\r\n        -- Send a notification to all listeners of the newly added events.\r\n        PERFORM pg_notify(notify_aggregate_type_id, ''\r\n            || '{'\r\n            || '\"source_id\": \"'      || aggregate_id      || '\" ,'\r\n            || '\"version\": '         || aggregate_version || ', '\r\n            || '\"sequence_number\": ' || sequence_number   || ', '\r\n            || '\"event\": '           || \"event\"::TEXT\r\n            || '}');\r\n        COMMIT;\r\n    END LOOP;\r\n\r\n    -- Update the aggregate with the latest version computed.\r\n    UPDATE aggregates a SET \"version\" = aggregate_version WHERE id = aggregate_id AND a.aggregate_type_id = notify_aggregate_type_id;\r\n\r\n    -- Update the global offset with the latest sequence number.\r\n    UPDATE aggregate_types SET \"offset\" = sequence_number WHERE id = notify_aggregate_type_id;\r\n\r\nEND;\r\n$$;\r\n```\r\n\r\nIt's a custom version of [this procedure](https://github.com/get-eventually/eventually-rs/blob/master/eventually-postgres/src/migrations/V3__append_to_store.sql)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925401832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cortopy","id":8725825,"node_id":"MDQ6VXNlcjg3MjU4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8725825?v=4","gravatar_id":"","url":"https://api.github.com/users/cortopy","html_url":"https://github.com/cortopy","followers_url":"https://api.github.com/users/cortopy/followers","following_url":"https://api.github.com/users/cortopy/following{/other_user}","gists_url":"https://api.github.com/users/cortopy/gists{/gist_id}","starred_url":"https://api.github.com/users/cortopy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cortopy/subscriptions","organizations_url":"https://api.github.com/users/cortopy/orgs","repos_url":"https://api.github.com/users/cortopy/repos","events_url":"https://api.github.com/users/cortopy/events{/privacy}","received_events_url":"https://api.github.com/users/cortopy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5346509081,"node_id":"MEE_lADODb6dM8473cltzwAAAAE-rUEZ","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/5346509081","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-09-22T23:33:03Z","performed_via_github_app":null},{"id":5346509083,"node_id":"SE_lADODb6dM8473cltzwAAAAE-rUEb","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/5346509083","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-09-22T23:33:03Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925408908","html_url":"https://github.com/launchbadge/sqlx/issues/1449#issuecomment-925408908","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1449","id":925408908,"node_id":"IC_kwDODb6dM843KJ6M","user":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-22T23:51:10Z","updated_at":"2021-09-22T23:51:10Z","body":"Hmm, okay. So there's a couple of orthogonal issues here:\r\n\r\n1. since there's no output parameters, we really shouldn't even be running an `EXPLAIN` because we only use that for nullability inference for a query's output columns. That might actually speed up the compilation of a number of `sqlx::query!()` invocations since right now it appears that we're doing this for every query regardless of whether it outputs anything or not.\r\n2. even if it had output parameters, we shouldn't be dying on `EXPLAIN` returning `\"Utility Statement\"`, though I suspect it's actually returning something like this:\r\n\r\n```json\r\n[\r\n    \"Utility Statement\",\r\n    // corresponding to the first `SELECT` statement\r\n    {\r\n        \"plan\": { ... }\r\n    },\r\n    ...\r\n]\r\n```\r\n\r\nI'd need to experiment with this, preferably with a minimal reproduction, to see what it actually returns.\r\n\r\nIf I might make a suggestion though, I would recommend not baking lots of business logic into stored procedures in the database like this. It might seem more efficient but it's going to be much more difficult to maintain and reason about.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925408908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925430525","html_url":"https://github.com/launchbadge/sqlx/issues/1449#issuecomment-925430525","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1449","id":925430525,"node_id":"IC_kwDODb6dM843KPL9","user":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-23T00:42:17Z","updated_at":"2021-09-23T00:49:06Z","body":"Okay, we already aren't doing `EXPLAIN` for queries without output columns. I failed to notice the `INOUT` parameters in the linked procedure.\r\n\r\nAnd I can now confirm that it does just return `[\"Utility Statement\"]` for any procedure call so the fix here is to handle this in the `EXPLAIN` parsing. This does unfortunately mean that we can't do any kind of nullability inference here since the procedure call is effectively a black box, so we're forced to assume all the output columns are nullable.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925430525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925913568","html_url":"https://github.com/launchbadge/sqlx/issues/1449#issuecomment-925913568","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1449","id":925913568,"node_id":"IC_kwDODb6dM843MFHg","user":{"login":"cortopy","id":8725825,"node_id":"MDQ6VXNlcjg3MjU4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8725825?v=4","gravatar_id":"","url":"https://api.github.com/users/cortopy","html_url":"https://github.com/cortopy","followers_url":"https://api.github.com/users/cortopy/followers","following_url":"https://api.github.com/users/cortopy/following{/other_user}","gists_url":"https://api.github.com/users/cortopy/gists{/gist_id}","starred_url":"https://api.github.com/users/cortopy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cortopy/subscriptions","organizations_url":"https://api.github.com/users/cortopy/orgs","repos_url":"https://api.github.com/users/cortopy/repos","events_url":"https://api.github.com/users/cortopy/events{/privacy}","received_events_url":"https://api.github.com/users/cortopy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-23T15:18:41Z","updated_at":"2021-09-23T15:18:41Z","body":"Totally agree with not putting too much \"hidden\" logic in procedures. It does feel like it's too much magic in a black box. However, in this case this is part of an event sourcing implementation, and so it relies a lot on integrity checks and the right sequences. I'm actually working right now in simplifying this a bit\r\n\r\nPostgres 14 will support OUT parameters for procedures, but until then or if older versions support is required, it would have to be INOUT.\r\n\r\nI'm not sure if I can do anything to help. I'm more than happy to try anything out\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/925913568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cortopy","id":8725825,"node_id":"MDQ6VXNlcjg3MjU4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8725825?v=4","gravatar_id":"","url":"https://api.github.com/users/cortopy","html_url":"https://github.com/cortopy","followers_url":"https://api.github.com/users/cortopy/followers","following_url":"https://api.github.com/users/cortopy/following{/other_user}","gists_url":"https://api.github.com/users/cortopy/gists{/gist_id}","starred_url":"https://api.github.com/users/cortopy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cortopy/subscriptions","organizations_url":"https://api.github.com/users/cortopy/orgs","repos_url":"https://api.github.com/users/cortopy/repos","events_url":"https://api.github.com/users/cortopy/events{/privacy}","received_events_url":"https://api.github.com/users/cortopy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/926162839","html_url":"https://github.com/launchbadge/sqlx/issues/1449#issuecomment-926162839","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1449","id":926162839,"node_id":"IC_kwDODb6dM843NB-X","user":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-23T21:10:18Z","updated_at":"2021-09-23T21:10:18Z","body":"The fix is relatively simple, it just sadly means that the macros are rather limited in their ability to handle procedure calls.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/926162839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8138327258,"node_id":"REFE_lADODb6dM8473cltzwAAAAHlFQTa","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/8138327258","actor":{"login":"bgeron","id":950328,"node_id":"MDQ6VXNlcjk1MDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/950328?v=4","gravatar_id":"","url":"https://api.github.com/users/bgeron","html_url":"https://github.com/bgeron","followers_url":"https://api.github.com/users/bgeron/followers","following_url":"https://api.github.com/users/bgeron/following{/other_user}","gists_url":"https://api.github.com/users/bgeron/gists{/gist_id}","starred_url":"https://api.github.com/users/bgeron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgeron/subscriptions","organizations_url":"https://api.github.com/users/bgeron/orgs","repos_url":"https://api.github.com/users/bgeron/repos","events_url":"https://api.github.com/users/bgeron/events{/privacy}","received_events_url":"https://api.github.com/users/bgeron/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"014523982f86cdf10bad55b8f2764af89ab8ef01","commit_url":"https://api.github.com/repos/bgeron/sqlx/commits/014523982f86cdf10bad55b8f2764af89ab8ef01","created_at":"2023-01-02T16:33:23Z","performed_via_github_app":null},{"id":8138331388,"node_id":"REFE_lADODb6dM8473cltzwAAAAHlFRT8","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/8138331388","actor":{"login":"bgeron","id":950328,"node_id":"MDQ6VXNlcjk1MDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/950328?v=4","gravatar_id":"","url":"https://api.github.com/users/bgeron","html_url":"https://github.com/bgeron","followers_url":"https://api.github.com/users/bgeron/followers","following_url":"https://api.github.com/users/bgeron/following{/other_user}","gists_url":"https://api.github.com/users/bgeron/gists{/gist_id}","starred_url":"https://api.github.com/users/bgeron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgeron/subscriptions","organizations_url":"https://api.github.com/users/bgeron/orgs","repos_url":"https://api.github.com/users/bgeron/repos","events_url":"https://api.github.com/users/bgeron/events{/privacy}","received_events_url":"https://api.github.com/users/bgeron/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1ec7ad36a8798eff560bf73e52b1fd3fee666d4f","commit_url":"https://api.github.com/repos/bgeron/sqlx/commits/1ec7ad36a8798eff560bf73e52b1fd3fee666d4f","created_at":"2023-01-02T16:34:35Z","performed_via_github_app":null},{"id":8138335451,"node_id":"REFE_lADODb6dM8473cltzwAAAAHlFSTb","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/8138335451","actor":{"login":"bgeron","id":950328,"node_id":"MDQ6VXNlcjk1MDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/950328?v=4","gravatar_id":"","url":"https://api.github.com/users/bgeron","html_url":"https://github.com/bgeron","followers_url":"https://api.github.com/users/bgeron/followers","following_url":"https://api.github.com/users/bgeron/following{/other_user}","gists_url":"https://api.github.com/users/bgeron/gists{/gist_id}","starred_url":"https://api.github.com/users/bgeron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgeron/subscriptions","organizations_url":"https://api.github.com/users/bgeron/orgs","repos_url":"https://api.github.com/users/bgeron/repos","events_url":"https://api.github.com/users/bgeron/events{/privacy}","received_events_url":"https://api.github.com/users/bgeron/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e7cf8629f595b89da8c216988446b8dc81ff7bea","commit_url":"https://api.github.com/repos/bgeron/sqlx/commits/e7cf8629f595b89da8c216988446b8dc81ff7bea","created_at":"2023-01-02T16:35:42Z","performed_via_github_app":null},{"actor":{"login":"bgeron","id":950328,"node_id":"MDQ6VXNlcjk1MDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/950328?v=4","gravatar_id":"","url":"https://api.github.com/users/bgeron","html_url":"https://github.com/bgeron","followers_url":"https://api.github.com/users/bgeron/followers","following_url":"https://api.github.com/users/bgeron/following{/other_user}","gists_url":"https://api.github.com/users/bgeron/gists{/gist_id}","starred_url":"https://api.github.com/users/bgeron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgeron/subscriptions","organizations_url":"https://api.github.com/users/bgeron/orgs","repos_url":"https://api.github.com/users/bgeron/repos","events_url":"https://api.github.com/users/bgeron/events{/privacy}","received_events_url":"https://api.github.com/users/bgeron/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-02T16:36:29Z","updated_at":"2023-01-02T16:36:29Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/2271","repository_url":"https://api.github.com/repos/launchbadge/sqlx","labels_url":"https://api.github.com/repos/launchbadge/sqlx/issues/2271/labels{/name}","comments_url":"https://api.github.com/repos/launchbadge/sqlx/issues/2271/comments","events_url":"https://api.github.com/repos/launchbadge/sqlx/issues/2271/events","html_url":"https://github.com/launchbadge/sqlx/pull/2271","id":1516558718,"node_id":"PR_kwDODb6dM85Gf2Wz","number":2271,"title":"feat: support calling Postgres procedures with the macros","user":{"login":"bgeron","id":950328,"node_id":"MDQ6VXNlcjk1MDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/950328?v=4","gravatar_id":"","url":"https://api.github.com/users/bgeron","html_url":"https://github.com/bgeron","followers_url":"https://api.github.com/users/bgeron/followers","following_url":"https://api.github.com/users/bgeron/following{/other_user}","gists_url":"https://api.github.com/users/bgeron/gists{/gist_id}","starred_url":"https://api.github.com/users/bgeron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgeron/subscriptions","organizations_url":"https://api.github.com/users/bgeron/orgs","repos_url":"https://api.github.com/users/bgeron/repos","events_url":"https://api.github.com/users/bgeron/events{/privacy}","received_events_url":"https://api.github.com/users/bgeron/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-01-02T16:36:29Z","updated_at":"2023-03-17T16:50:26Z","closed_at":"2023-03-04T03:36:39Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":230595891,"node_id":"MDEwOlJlcG9zaXRvcnkyMzA1OTU4OTE=","name":"sqlx","full_name":"launchbadge/sqlx","private":false,"owner":{"login":"launchbadge","id":10077001,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEwMDc3MDAx","avatar_url":"https://avatars.githubusercontent.com/u/10077001?v=4","gravatar_id":"","url":"https://api.github.com/users/launchbadge","html_url":"https://github.com/launchbadge","followers_url":"https://api.github.com/users/launchbadge/followers","following_url":"https://api.github.com/users/launchbadge/following{/other_user}","gists_url":"https://api.github.com/users/launchbadge/gists{/gist_id}","starred_url":"https://api.github.com/users/launchbadge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/launchbadge/subscriptions","organizations_url":"https://api.github.com/users/launchbadge/orgs","repos_url":"https://api.github.com/users/launchbadge/repos","events_url":"https://api.github.com/users/launchbadge/events{/privacy}","received_events_url":"https://api.github.com/users/launchbadge/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/launchbadge/sqlx","description":"ðŸ§° The Rust SQL Toolkit. An async, pure Rust SQL crate featuring compile-time checked queries without a DSL. Supports PostgreSQL, MySQL, and SQLite.","fork":false,"url":"https://api.github.com/repos/launchbadge/sqlx","forks_url":"https://api.github.com/repos/launchbadge/sqlx/forks","keys_url":"https://api.github.com/repos/launchbadge/sqlx/keys{/key_id}","collaborators_url":"https://api.github.com/repos/launchbadge/sqlx/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/launchbadge/sqlx/teams","hooks_url":"https://api.github.com/repos/launchbadge/sqlx/hooks","issue_events_url":"https://api.github.com/repos/launchbadge/sqlx/issues/events{/number}","events_url":"https://api.github.com/repos/launchbadge/sqlx/events","assignees_url":"https://api.github.com/repos/launchbadge/sqlx/assignees{/user}","branches_url":"https://api.github.com/repos/launchbadge/sqlx/branches{/branch}","tags_url":"https://api.github.com/repos/launchbadge/sqlx/tags","blobs_url":"https://api.github.com/repos/launchbadge/sqlx/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/launchbadge/sqlx/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/launchbadge/sqlx/git/refs{/sha}","trees_url":"https://api.github.com/repos/launchbadge/sqlx/git/trees{/sha}","statuses_url":"https://api.github.com/repos/launchbadge/sqlx/statuses/{sha}","languages_url":"https://api.github.com/repos/launchbadge/sqlx/languages","stargazers_url":"https://api.github.com/repos/launchbadge/sqlx/stargazers","contributors_url":"https://api.github.com/repos/launchbadge/sqlx/contributors","subscribers_url":"https://api.github.com/repos/launchbadge/sqlx/subscribers","subscription_url":"https://api.github.com/repos/launchbadge/sqlx/subscription","commits_url":"https://api.github.com/repos/launchbadge/sqlx/commits{/sha}","git_commits_url":"https://api.github.com/repos/launchbadge/sqlx/git/commits{/sha}","comments_url":"https://api.github.com/repos/launchbadge/sqlx/comments{/number}","issue_comment_url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments{/number}","contents_url":"https://api.github.com/repos/launchbadge/sqlx/contents/{+path}","compare_url":"https://api.github.com/repos/launchbadge/sqlx/compare/{base}...{head}","merges_url":"https://api.github.com/repos/launchbadge/sqlx/merges","archive_url":"https://api.github.com/repos/launchbadge/sqlx/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/launchbadge/sqlx/downloads","issues_url":"https://api.github.com/repos/launchbadge/sqlx/issues{/number}","pulls_url":"https://api.github.com/repos/launchbadge/sqlx/pulls{/number}","milestones_url":"https://api.github.com/repos/launchbadge/sqlx/milestones{/number}","notifications_url":"https://api.github.com/repos/launchbadge/sqlx/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/launchbadge/sqlx/labels{/name}","releases_url":"https://api.github.com/repos/launchbadge/sqlx/releases{/id}","deployments_url":"https://api.github.com/repos/launchbadge/sqlx/deployments","created_at":"2019-12-28T10:40:57Z","updated_at":"2025-11-10T07:15:41Z","pushed_at":"2025-10-29T18:37:49Z","git_url":"git://github.com/launchbadge/sqlx.git","ssh_url":"git@github.com:launchbadge/sqlx.git","clone_url":"https://github.com/launchbadge/sqlx.git","svn_url":"https://github.com/launchbadge/sqlx","homepage":"","size":9641,"stargazers_count":15938,"watchers_count":15938,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1502,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":701,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["async","await","mariadb","mysql","postgres","postgresql","rust","sql","sqlite"],"visibility":"public","forks":1502,"open_issues":701,"watchers":15938,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/launchbadge/sqlx/pulls/2271","html_url":"https://github.com/launchbadge/sqlx/pull/2271","diff_url":"https://github.com/launchbadge/sqlx/pull/2271.diff","patch_url":"https://github.com/launchbadge/sqlx/pull/2271.patch","merged_at":"2023-03-04T03:36:39Z"},"body":"Fixes #1449 (I think). I verified that without the fix, an appropriate invocation to `cargo test` fails, and with the fix included the same invocation to `cargo test` passes.\r\n\r\nI used INOUT in setup.sql because older versions of Postgres don't support OUT parameters.","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/2271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/launchbadge/sqlx/issues/2271/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/1369082110","html_url":"https://github.com/launchbadge/sqlx/issues/1449#issuecomment-1369082110","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1449","id":1369082110,"node_id":"IC_kwDODb6dM85Rmoj-","user":{"login":"bgeron","id":950328,"node_id":"MDQ6VXNlcjk1MDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/950328?v=4","gravatar_id":"","url":"https://api.github.com/users/bgeron","html_url":"https://github.com/bgeron","followers_url":"https://api.github.com/users/bgeron/followers","following_url":"https://api.github.com/users/bgeron/following{/other_user}","gists_url":"https://api.github.com/users/bgeron/gists{/gist_id}","starred_url":"https://api.github.com/users/bgeron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgeron/subscriptions","organizations_url":"https://api.github.com/users/bgeron/orgs","repos_url":"https://api.github.com/users/bgeron/repos","events_url":"https://api.github.com/users/bgeron/events{/privacy}","received_events_url":"https://api.github.com/users/bgeron/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-02T16:39:05Z","updated_at":"2023-01-02T16:39:05Z","body":"I think my PR #2271 will fix this issue.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/1369082110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bgeron","id":950328,"node_id":"MDQ6VXNlcjk1MDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/950328?v=4","gravatar_id":"","url":"https://api.github.com/users/bgeron","html_url":"https://github.com/bgeron","followers_url":"https://api.github.com/users/bgeron/followers","following_url":"https://api.github.com/users/bgeron/following{/other_user}","gists_url":"https://api.github.com/users/bgeron/gists{/gist_id}","starred_url":"https://api.github.com/users/bgeron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgeron/subscriptions","organizations_url":"https://api.github.com/users/bgeron/orgs","repos_url":"https://api.github.com/users/bgeron/repos","events_url":"https://api.github.com/users/bgeron/events{/privacy}","received_events_url":"https://api.github.com/users/bgeron/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8656639743,"node_id":"REFE_lADODb6dM8473cltzwAAAAID-db_","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/8656639743","actor":{"login":"bgeron","id":950328,"node_id":"MDQ6VXNlcjk1MDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/950328?v=4","gravatar_id":"","url":"https://api.github.com/users/bgeron","html_url":"https://github.com/bgeron","followers_url":"https://api.github.com/users/bgeron/followers","following_url":"https://api.github.com/users/bgeron/following{/other_user}","gists_url":"https://api.github.com/users/bgeron/gists{/gist_id}","starred_url":"https://api.github.com/users/bgeron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgeron/subscriptions","organizations_url":"https://api.github.com/users/bgeron/orgs","repos_url":"https://api.github.com/users/bgeron/repos","events_url":"https://api.github.com/users/bgeron/events{/privacy}","received_events_url":"https://api.github.com/users/bgeron/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6ee25d6c68a416fd57ca1ca6d960ba5ae1fb3946","commit_url":"https://api.github.com/repos/bgeron/sqlx/commits/6ee25d6c68a416fd57ca1ca6d960ba5ae1fb3946","created_at":"2023-03-03T06:34:39Z","performed_via_github_app":null},{"id":8665058608,"node_id":"CE_lADODb6dM8473cltzwAAAAIEek0w","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/8665058608","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-03-04T03:36:41Z","state_reason":null,"performed_via_github_app":null},{"id":8665058617,"node_id":"REFE_lADODb6dM8473cltzwAAAAIEek05","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/8665058617","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1ff6a2ac94b4716f323e9fa3c5f7fdde4d059d96","commit_url":"https://api.github.com/repos/launchbadge/sqlx/commits/1ff6a2ac94b4716f323e9fa3c5f7fdde4d059d96","created_at":"2023-03-04T03:36:41Z","performed_via_github_app":null},{"id":8894787213,"node_id":"REFE_lADODb6dM8473cltzwAAAAISK66N","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/8894787213","actor":{"login":"Aandreba","id":4247991,"node_id":"MDQ6VXNlcjQyNDc5OTE=","avatar_url":"https://avatars.githubusercontent.com/u/4247991?v=4","gravatar_id":"","url":"https://api.github.com/users/Aandreba","html_url":"https://github.com/Aandreba","followers_url":"https://api.github.com/users/Aandreba/followers","following_url":"https://api.github.com/users/Aandreba/following{/other_user}","gists_url":"https://api.github.com/users/Aandreba/gists{/gist_id}","starred_url":"https://api.github.com/users/Aandreba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aandreba/subscriptions","organizations_url":"https://api.github.com/users/Aandreba/orgs","repos_url":"https://api.github.com/users/Aandreba/repos","events_url":"https://api.github.com/users/Aandreba/events{/privacy}","received_events_url":"https://api.github.com/users/Aandreba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"970efb96395d9be9f7971eb5e8add70da3239631","commit_url":"https://api.github.com/repos/Aandreba/sqlx/commits/970efb96395d9be9f7971eb5e8add70da3239631","created_at":"2023-03-31T07:14:20Z","performed_via_github_app":null},{"actor":{"login":"mrl5","id":31549762,"node_id":"MDQ6VXNlcjMxNTQ5NzYy","avatar_url":"https://avatars.githubusercontent.com/u/31549762?v=4","gravatar_id":"","url":"https://api.github.com/users/mrl5","html_url":"https://github.com/mrl5","followers_url":"https://api.github.com/users/mrl5/followers","following_url":"https://api.github.com/users/mrl5/following{/other_user}","gists_url":"https://api.github.com/users/mrl5/gists{/gist_id}","starred_url":"https://api.github.com/users/mrl5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrl5/subscriptions","organizations_url":"https://api.github.com/users/mrl5/orgs","repos_url":"https://api.github.com/users/mrl5/repos","events_url":"https://api.github.com/users/mrl5/events{/privacy}","received_events_url":"https://api.github.com/users/mrl5/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-17T19:46:22Z","updated_at":"2023-07-17T19:46:22Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/2626","repository_url":"https://api.github.com/repos/launchbadge/sqlx","labels_url":"https://api.github.com/repos/launchbadge/sqlx/issues/2626/labels{/name}","comments_url":"https://api.github.com/repos/launchbadge/sqlx/issues/2626/comments","events_url":"https://api.github.com/repos/launchbadge/sqlx/issues/2626/events","html_url":"https://github.com/launchbadge/sqlx/pull/2626","id":1808405425,"node_id":"PR_kwDODb6dM85VtISk","number":2626,"title":"fix(postgres): sqlx prepare fails if shared_preload_libraries=pg_stat_statements","user":{"login":"mrl5","id":31549762,"node_id":"MDQ6VXNlcjMxNTQ5NzYy","avatar_url":"https://avatars.githubusercontent.com/u/31549762?v=4","gravatar_id":"","url":"https://api.github.com/users/mrl5","html_url":"https://github.com/mrl5","followers_url":"https://api.github.com/users/mrl5/followers","following_url":"https://api.github.com/users/mrl5/following{/other_user}","gists_url":"https://api.github.com/users/mrl5/gists{/gist_id}","starred_url":"https://api.github.com/users/mrl5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrl5/subscriptions","organizations_url":"https://api.github.com/users/mrl5/orgs","repos_url":"https://api.github.com/users/mrl5/repos","events_url":"https://api.github.com/users/mrl5/events{/privacy}","received_events_url":"https://api.github.com/users/mrl5/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-07-17T19:01:33Z","updated_at":"2023-07-31T21:52:57Z","closed_at":"2023-07-31T21:52:57Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":230595891,"node_id":"MDEwOlJlcG9zaXRvcnkyMzA1OTU4OTE=","name":"sqlx","full_name":"launchbadge/sqlx","private":false,"owner":{"login":"launchbadge","id":10077001,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEwMDc3MDAx","avatar_url":"https://avatars.githubusercontent.com/u/10077001?v=4","gravatar_id":"","url":"https://api.github.com/users/launchbadge","html_url":"https://github.com/launchbadge","followers_url":"https://api.github.com/users/launchbadge/followers","following_url":"https://api.github.com/users/launchbadge/following{/other_user}","gists_url":"https://api.github.com/users/launchbadge/gists{/gist_id}","starred_url":"https://api.github.com/users/launchbadge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/launchbadge/subscriptions","organizations_url":"https://api.github.com/users/launchbadge/orgs","repos_url":"https://api.github.com/users/launchbadge/repos","events_url":"https://api.github.com/users/launchbadge/events{/privacy}","received_events_url":"https://api.github.com/users/launchbadge/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/launchbadge/sqlx","description":"ðŸ§° The Rust SQL Toolkit. An async, pure Rust SQL crate featuring compile-time checked queries without a DSL. Supports PostgreSQL, MySQL, and SQLite.","fork":false,"url":"https://api.github.com/repos/launchbadge/sqlx","forks_url":"https://api.github.com/repos/launchbadge/sqlx/forks","keys_url":"https://api.github.com/repos/launchbadge/sqlx/keys{/key_id}","collaborators_url":"https://api.github.com/repos/launchbadge/sqlx/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/launchbadge/sqlx/teams","hooks_url":"https://api.github.com/repos/launchbadge/sqlx/hooks","issue_events_url":"https://api.github.com/repos/launchbadge/sqlx/issues/events{/number}","events_url":"https://api.github.com/repos/launchbadge/sqlx/events","assignees_url":"https://api.github.com/repos/launchbadge/sqlx/assignees{/user}","branches_url":"https://api.github.com/repos/launchbadge/sqlx/branches{/branch}","tags_url":"https://api.github.com/repos/launchbadge/sqlx/tags","blobs_url":"https://api.github.com/repos/launchbadge/sqlx/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/launchbadge/sqlx/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/launchbadge/sqlx/git/refs{/sha}","trees_url":"https://api.github.com/repos/launchbadge/sqlx/git/trees{/sha}","statuses_url":"https://api.github.com/repos/launchbadge/sqlx/statuses/{sha}","languages_url":"https://api.github.com/repos/launchbadge/sqlx/languages","stargazers_url":"https://api.github.com/repos/launchbadge/sqlx/stargazers","contributors_url":"https://api.github.com/repos/launchbadge/sqlx/contributors","subscribers_url":"https://api.github.com/repos/launchbadge/sqlx/subscribers","subscription_url":"https://api.github.com/repos/launchbadge/sqlx/subscription","commits_url":"https://api.github.com/repos/launchbadge/sqlx/commits{/sha}","git_commits_url":"https://api.github.com/repos/launchbadge/sqlx/git/commits{/sha}","comments_url":"https://api.github.com/repos/launchbadge/sqlx/comments{/number}","issue_comment_url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments{/number}","contents_url":"https://api.github.com/repos/launchbadge/sqlx/contents/{+path}","compare_url":"https://api.github.com/repos/launchbadge/sqlx/compare/{base}...{head}","merges_url":"https://api.github.com/repos/launchbadge/sqlx/merges","archive_url":"https://api.github.com/repos/launchbadge/sqlx/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/launchbadge/sqlx/downloads","issues_url":"https://api.github.com/repos/launchbadge/sqlx/issues{/number}","pulls_url":"https://api.github.com/repos/launchbadge/sqlx/pulls{/number}","milestones_url":"https://api.github.com/repos/launchbadge/sqlx/milestones{/number}","notifications_url":"https://api.github.com/repos/launchbadge/sqlx/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/launchbadge/sqlx/labels{/name}","releases_url":"https://api.github.com/repos/launchbadge/sqlx/releases{/id}","deployments_url":"https://api.github.com/repos/launchbadge/sqlx/deployments","created_at":"2019-12-28T10:40:57Z","updated_at":"2025-11-10T07:15:41Z","pushed_at":"2025-10-29T18:37:49Z","git_url":"git://github.com/launchbadge/sqlx.git","ssh_url":"git@github.com:launchbadge/sqlx.git","clone_url":"https://github.com/launchbadge/sqlx.git","svn_url":"https://github.com/launchbadge/sqlx","homepage":"","size":9641,"stargazers_count":15938,"watchers_count":15938,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1502,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":701,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["async","await","mariadb","mysql","postgres","postgresql","rust","sql","sqlite"],"visibility":"public","forks":1502,"open_issues":701,"watchers":15938,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/launchbadge/sqlx/pulls/2626","html_url":"https://github.com/launchbadge/sqlx/pull/2626","diff_url":"https://github.com/launchbadge/sqlx/pull/2626.diff","patch_url":"https://github.com/launchbadge/sqlx/pull/2626.patch","merged_at":null},"body":"closes #2622 #2587\r\nrelated #1449\r\n\r\nrefs:\r\n* https://serde.rs/enum-representations.html#untagged\r\n* https://serde.rs/field-attrs.html#skip\r\n* https://www.postgresql.org/docs/current/pgstatstatements.html\r\n  * https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-COMPUTE-QUERY-ID","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/2626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/launchbadge/sqlx/issues/2626/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9842084981,"node_id":"REFE_lADODb6dM8473cltzwAAAAJKokx1","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/9842084981","actor":{"login":"mrl5","id":31549762,"node_id":"MDQ6VXNlcjMxNTQ5NzYy","avatar_url":"https://avatars.githubusercontent.com/u/31549762?v=4","gravatar_id":"","url":"https://api.github.com/users/mrl5","html_url":"https://github.com/mrl5","followers_url":"https://api.github.com/users/mrl5/followers","following_url":"https://api.github.com/users/mrl5/following{/other_user}","gists_url":"https://api.github.com/users/mrl5/gists{/gist_id}","starred_url":"https://api.github.com/users/mrl5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrl5/subscriptions","organizations_url":"https://api.github.com/users/mrl5/orgs","repos_url":"https://api.github.com/users/mrl5/repos","events_url":"https://api.github.com/users/mrl5/events{/privacy}","received_events_url":"https://api.github.com/users/mrl5/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"175ba3fc0098b243233948607ad7cb500834f1ed","commit_url":"https://api.github.com/repos/mrl5/sqlx/commits/175ba3fc0098b243233948607ad7cb500834f1ed","created_at":"2023-07-17T19:51:46Z","performed_via_github_app":null},{"id":9842393859,"node_id":"REFE_lADODb6dM8473cltzwAAAAJKpwMD","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/9842393859","actor":{"login":"mrl5","id":31549762,"node_id":"MDQ6VXNlcjMxNTQ5NzYy","avatar_url":"https://avatars.githubusercontent.com/u/31549762?v=4","gravatar_id":"","url":"https://api.github.com/users/mrl5","html_url":"https://github.com/mrl5","followers_url":"https://api.github.com/users/mrl5/followers","following_url":"https://api.github.com/users/mrl5/following{/other_user}","gists_url":"https://api.github.com/users/mrl5/gists{/gist_id}","starred_url":"https://api.github.com/users/mrl5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrl5/subscriptions","organizations_url":"https://api.github.com/users/mrl5/orgs","repos_url":"https://api.github.com/users/mrl5/repos","events_url":"https://api.github.com/users/mrl5/events{/privacy}","received_events_url":"https://api.github.com/users/mrl5/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9ae5f4bdf532a0d5723a07fb9e0cef2cd511255e","commit_url":"https://api.github.com/repos/mrl5/sqlx/commits/9ae5f4bdf532a0d5723a07fb9e0cef2cd511255e","created_at":"2023-07-17T20:26:25Z","performed_via_github_app":null},{"id":9851954933,"node_id":"REFE_lADODb6dM8473cltzwAAAAJLOOb1","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/9851954933","actor":{"login":"mrl5","id":31549762,"node_id":"MDQ6VXNlcjMxNTQ5NzYy","avatar_url":"https://avatars.githubusercontent.com/u/31549762?v=4","gravatar_id":"","url":"https://api.github.com/users/mrl5","html_url":"https://github.com/mrl5","followers_url":"https://api.github.com/users/mrl5/followers","following_url":"https://api.github.com/users/mrl5/following{/other_user}","gists_url":"https://api.github.com/users/mrl5/gists{/gist_id}","starred_url":"https://api.github.com/users/mrl5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrl5/subscriptions","organizations_url":"https://api.github.com/users/mrl5/orgs","repos_url":"https://api.github.com/users/mrl5/repos","events_url":"https://api.github.com/users/mrl5/events{/privacy}","received_events_url":"https://api.github.com/users/mrl5/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f0696ea2a2b5eee723da7e39ff3ee3dcfd5cc091","commit_url":"https://api.github.com/repos/mrl5/sqlx/commits/f0696ea2a2b5eee723da7e39ff3ee3dcfd5cc091","created_at":"2023-07-18T15:28:21Z","performed_via_github_app":null},{"id":9969510985,"node_id":"REFE_lADODb6dM8473cltzwAAAAJSOqpJ","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/9969510985","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"487b89a4b6c67aacd7c15b0814a450801333153c","commit_url":"https://api.github.com/repos/launchbadge/sqlx/commits/487b89a4b6c67aacd7c15b0814a450801333153c","created_at":"2023-07-31T21:52:59Z","performed_via_github_app":null}]