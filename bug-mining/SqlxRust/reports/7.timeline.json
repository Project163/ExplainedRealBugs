[{"id":2977849416,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjk3Nzg0OTQxNg==","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/2977849416","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-01-24T16:33:54Z","performed_via_github_app":null},{"id":2977849420,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI5Nzc4NDk0MjA=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/2977849420","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-01-24T16:33:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/578306097","html_url":"https://github.com/launchbadge/sqlx/issues/87#issuecomment-578306097","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/87","id":578306097,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODMwNjA5Nw==","user":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-24T21:18:53Z","updated_at":"2020-01-24T21:22:51Z","body":"@mehcode and I had previously discussed using a background task so we can multiplex `LISTEN`s and have some facility to restart the connection if it dies. However, IIRC that happened before Monday so he may have changed his mind.\r\n\r\n> return type can just be a stream of notifications which hands out a mutable reference to the connection for use in handling the notifications.\r\n\r\nThis won't work with the `Stream` trait; an implementing struct can't hand out mutable references to things it owns. (Iterators have the same limitation.)\r\n\r\nWe _could_ have an inherent method that returns a `Future` directly that might be used like this (but we can also mutably borrow `conn` inside the loop here if `msg` doesn't borrow it):\r\n\r\n```rust\r\nwhile let Some(msg) = conn.next_message().await? {\r\n  // ...\r\n}\r\n```","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/578306097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2978627430,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjk3ODYyNzQzMA==","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/2978627430","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-01-24T21:18:54Z","performed_via_github_app":null},{"id":2978627434,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI5Nzg2Mjc0MzQ=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/2978627434","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-01-24T21:18:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/578353417","html_url":"https://github.com/launchbadge/sqlx/issues/87#issuecomment-578353417","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/87","id":578353417,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODM1MzQxNw==","user":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-25T00:28:27Z","updated_at":"2020-01-25T00:38:03Z","body":"All right, cleared things up with @mehcode and I agree a simple API to start would be best. Here's what I'm thinking:\r\n\r\n```rust\r\nimpl PgConnection { // also an identical impl for `PoolConnection<PgConnection>` and maybe `Pool<PgConnection>`\r\n    pub async fn listen(self, channel: &impl AsRef<str>) -> crate::Result<PgListener<Self>>; // how do we return `self` if it fails? or I guess we'd want to close the connection anyway\r\n\r\n    pub async fn listen_all(self, channels: impl IntoIterator<Item = impl AsRef<str>>) -> crate::Result<PgListener<Self>>;\r\n}\r\n\r\npub struct PgListener<C> {\r\n    // ...\r\n}\r\n\r\nimpl<C> PgListener<C> where C: AsMut<PgConnection> {\r\n    // this could instead be in a `Stream` impl actually\r\n    pub async fn next(&mut self) -> crate::Result<NotifyMessage>;\r\n\r\n    pub async fn close(self) -> crate::Result<()>;\r\n}\r\n\r\nimpl<C> Deref[Mut] for PgListener<C> {\r\n    type Target = C;\r\n    // ...\r\n}\r\n\r\n// so we don't need a deref to use this with methods on `Query`\r\nimpl<C: Connection<Database = Postgres>> Executor for PgListener<C> {\r\n    type Database = Postgres;\r\n\r\n    // ...\r\n}\r\n\r\n#[non_exhaustive]\r\npub struct NotifyMessage {\r\n    pub topic: Box<str>,\r\n    pub message: Box<str>,\r\n}\r\n```","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/578353417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2978970497,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjk3ODk3MDQ5Nw==","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/2978970497","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-01-25T00:28:27Z","performed_via_github_app":null},{"id":2978970498,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI5Nzg5NzA0OTg=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/2978970498","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-01-25T00:28:27Z","performed_via_github_app":null},{"id":2991073196,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI5OTEwNzMxOTY=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/2991073196","actor":{"login":"thedodd","id":2380740,"node_id":"MDQ6VXNlcjIzODA3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/2380740?v=4","gravatar_id":"","url":"https://api.github.com/users/thedodd","html_url":"https://github.com/thedodd","followers_url":"https://api.github.com/users/thedodd/followers","following_url":"https://api.github.com/users/thedodd/following{/other_user}","gists_url":"https://api.github.com/users/thedodd/gists{/gist_id}","starred_url":"https://api.github.com/users/thedodd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thedodd/subscriptions","organizations_url":"https://api.github.com/users/thedodd/orgs","repos_url":"https://api.github.com/users/thedodd/repos","events_url":"https://api.github.com/users/thedodd/events{/privacy}","received_events_url":"https://api.github.com/users/thedodd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"efe0541df31b3f649fbb1f43c0107b31d7b3c610","commit_url":"https://api.github.com/repos/thedodd/sqlx/commits/efe0541df31b3f649fbb1f43c0107b31d7b3c610","created_at":"2020-01-29T21:03:09Z","performed_via_github_app":null},{"actor":{"login":"thedodd","id":2380740,"node_id":"MDQ6VXNlcjIzODA3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/2380740?v=4","gravatar_id":"","url":"https://api.github.com/users/thedodd","html_url":"https://github.com/thedodd","followers_url":"https://api.github.com/users/thedodd/followers","following_url":"https://api.github.com/users/thedodd/following{/other_user}","gists_url":"https://api.github.com/users/thedodd/gists{/gist_id}","starred_url":"https://api.github.com/users/thedodd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thedodd/subscriptions","organizations_url":"https://api.github.com/users/thedodd/orgs","repos_url":"https://api.github.com/users/thedodd/repos","events_url":"https://api.github.com/users/thedodd/events{/privacy}","received_events_url":"https://api.github.com/users/thedodd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-29T21:04:16Z","updated_at":"2020-01-29T21:04:16Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/98","repository_url":"https://api.github.com/repos/launchbadge/sqlx","labels_url":"https://api.github.com/repos/launchbadge/sqlx/issues/98/labels{/name}","comments_url":"https://api.github.com/repos/launchbadge/sqlx/issues/98/comments","events_url":"https://api.github.com/repos/launchbadge/sqlx/issues/98/events","html_url":"https://github.com/launchbadge/sqlx/pull/98","id":557114340,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY4NzY0MzA5","number":98,"title":"Implement Postgres LISTEN interface.","user":{"login":"thedodd","id":2380740,"node_id":"MDQ6VXNlcjIzODA3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/2380740?v=4","gravatar_id":"","url":"https://api.github.com/users/thedodd","html_url":"https://github.com/thedodd","followers_url":"https://api.github.com/users/thedodd/followers","following_url":"https://api.github.com/users/thedodd/following{/other_user}","gists_url":"https://api.github.com/users/thedodd/gists{/gist_id}","starred_url":"https://api.github.com/users/thedodd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thedodd/subscriptions","organizations_url":"https://api.github.com/users/thedodd/orgs","repos_url":"https://api.github.com/users/thedodd/repos","events_url":"https://api.github.com/users/thedodd/events{/privacy}","received_events_url":"https://api.github.com/users/thedodd/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/launchbadge/sqlx/milestones/2","html_url":"https://github.com/launchbadge/sqlx/milestone/2","labels_url":"https://api.github.com/repos/launchbadge/sqlx/milestones/2/labels","id":5008296,"node_id":"MDk6TWlsZXN0b25lNTAwODI5Ng==","number":2,"title":"0.3","description":"","creator":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":8,"state":"closed","created_at":"2020-01-15T20:53:32Z","updated_at":"2020-03-29T08:34:35Z","due_on":null,"closed_at":"2020-03-29T08:34:35Z"},"comments":12,"created_at":"2020-01-29T21:04:16Z","updated_at":"2020-03-17T02:55:43Z","closed_at":"2020-03-17T02:55:43Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":230595891,"node_id":"MDEwOlJlcG9zaXRvcnkyMzA1OTU4OTE=","name":"sqlx","full_name":"launchbadge/sqlx","private":false,"owner":{"login":"launchbadge","id":10077001,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEwMDc3MDAx","avatar_url":"https://avatars.githubusercontent.com/u/10077001?v=4","gravatar_id":"","url":"https://api.github.com/users/launchbadge","html_url":"https://github.com/launchbadge","followers_url":"https://api.github.com/users/launchbadge/followers","following_url":"https://api.github.com/users/launchbadge/following{/other_user}","gists_url":"https://api.github.com/users/launchbadge/gists{/gist_id}","starred_url":"https://api.github.com/users/launchbadge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/launchbadge/subscriptions","organizations_url":"https://api.github.com/users/launchbadge/orgs","repos_url":"https://api.github.com/users/launchbadge/repos","events_url":"https://api.github.com/users/launchbadge/events{/privacy}","received_events_url":"https://api.github.com/users/launchbadge/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/launchbadge/sqlx","description":"ðŸ§° The Rust SQL Toolkit. An async, pure Rust SQL crate featuring compile-time checked queries without a DSL. Supports PostgreSQL, MySQL, and SQLite.","fork":false,"url":"https://api.github.com/repos/launchbadge/sqlx","forks_url":"https://api.github.com/repos/launchbadge/sqlx/forks","keys_url":"https://api.github.com/repos/launchbadge/sqlx/keys{/key_id}","collaborators_url":"https://api.github.com/repos/launchbadge/sqlx/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/launchbadge/sqlx/teams","hooks_url":"https://api.github.com/repos/launchbadge/sqlx/hooks","issue_events_url":"https://api.github.com/repos/launchbadge/sqlx/issues/events{/number}","events_url":"https://api.github.com/repos/launchbadge/sqlx/events","assignees_url":"https://api.github.com/repos/launchbadge/sqlx/assignees{/user}","branches_url":"https://api.github.com/repos/launchbadge/sqlx/branches{/branch}","tags_url":"https://api.github.com/repos/launchbadge/sqlx/tags","blobs_url":"https://api.github.com/repos/launchbadge/sqlx/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/launchbadge/sqlx/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/launchbadge/sqlx/git/refs{/sha}","trees_url":"https://api.github.com/repos/launchbadge/sqlx/git/trees{/sha}","statuses_url":"https://api.github.com/repos/launchbadge/sqlx/statuses/{sha}","languages_url":"https://api.github.com/repos/launchbadge/sqlx/languages","stargazers_url":"https://api.github.com/repos/launchbadge/sqlx/stargazers","contributors_url":"https://api.github.com/repos/launchbadge/sqlx/contributors","subscribers_url":"https://api.github.com/repos/launchbadge/sqlx/subscribers","subscription_url":"https://api.github.com/repos/launchbadge/sqlx/subscription","commits_url":"https://api.github.com/repos/launchbadge/sqlx/commits{/sha}","git_commits_url":"https://api.github.com/repos/launchbadge/sqlx/git/commits{/sha}","comments_url":"https://api.github.com/repos/launchbadge/sqlx/comments{/number}","issue_comment_url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments{/number}","contents_url":"https://api.github.com/repos/launchbadge/sqlx/contents/{+path}","compare_url":"https://api.github.com/repos/launchbadge/sqlx/compare/{base}...{head}","merges_url":"https://api.github.com/repos/launchbadge/sqlx/merges","archive_url":"https://api.github.com/repos/launchbadge/sqlx/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/launchbadge/sqlx/downloads","issues_url":"https://api.github.com/repos/launchbadge/sqlx/issues{/number}","pulls_url":"https://api.github.com/repos/launchbadge/sqlx/pulls{/number}","milestones_url":"https://api.github.com/repos/launchbadge/sqlx/milestones{/number}","notifications_url":"https://api.github.com/repos/launchbadge/sqlx/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/launchbadge/sqlx/labels{/name}","releases_url":"https://api.github.com/repos/launchbadge/sqlx/releases{/id}","deployments_url":"https://api.github.com/repos/launchbadge/sqlx/deployments","created_at":"2019-12-28T10:40:57Z","updated_at":"2025-11-10T07:15:41Z","pushed_at":"2025-10-29T18:37:49Z","git_url":"git://github.com/launchbadge/sqlx.git","ssh_url":"git@github.com:launchbadge/sqlx.git","clone_url":"https://github.com/launchbadge/sqlx.git","svn_url":"https://github.com/launchbadge/sqlx","homepage":"","size":9641,"stargazers_count":15938,"watchers_count":15938,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1502,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":701,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["async","await","mariadb","mysql","postgres","postgresql","rust","sql","sqlite"],"visibility":"public","forks":1502,"open_issues":701,"watchers":15938,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/launchbadge/sqlx/pulls/98","html_url":"https://github.com/launchbadge/sqlx/pull/98","diff_url":"https://github.com/launchbadge/sqlx/pull/98.diff","patch_url":"https://github.com/launchbadge/sqlx/pull/98.patch","merged_at":null},"body":"This changeset introduces an interface for using PostgreSQL's LISTEN\r\nfunctionality from within sqlx.\r\n\r\nThe listen interface is implemented over the PgConnection, PgPool & the\r\nPgPoolConnection types for ease of use. In the case of PgPool, a new\r\nconnection is acquired, and is then used for LISTEN functionality.\r\n\r\nCloses #87\r\n\r\n#### todo\r\n- [x] `PgListener` conn is dedicated to receiving notifications only, so ensure it is properly encapsulated.\r\n- [x] No notification buffering, though users could implement buffering on their own if needed.\r\n- [x] Use `Ext` traits for everything.\r\n- [x] Expose only a `.listen(&[&str])` interface on `PgConnection`, `PgPoolConnection` & `PgPool` (covers single & multi channel).\r\n- [x] Isolate all of the business logic of the `PgListener` in a single `receive` method.\r\n- [x] Impl reconnect behavior when created from a `PgPool`.\r\n- [x] Impl `Stream` in terms of `receive`. \r\n- [x] docs. Added an example app.","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/98/reactions","total_count":5,"+1":1,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":2,"rocket":1,"eyes":0},"timeline_url":"https://api.github.com/repos/launchbadge/sqlx/issues/98/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":2991085542,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI5OTEwODU1NDI=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/2991085542","actor":{"login":"thedodd","id":2380740,"node_id":"MDQ6VXNlcjIzODA3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/2380740?v=4","gravatar_id":"","url":"https://api.github.com/users/thedodd","html_url":"https://github.com/thedodd","followers_url":"https://api.github.com/users/thedodd/followers","following_url":"https://api.github.com/users/thedodd/following{/other_user}","gists_url":"https://api.github.com/users/thedodd/gists{/gist_id}","starred_url":"https://api.github.com/users/thedodd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thedodd/subscriptions","organizations_url":"https://api.github.com/users/thedodd/orgs","repos_url":"https://api.github.com/users/thedodd/repos","events_url":"https://api.github.com/users/thedodd/events{/privacy}","received_events_url":"https://api.github.com/users/thedodd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"985265ed54e2b108d76e1d463ef610581ff7460e","commit_url":"https://api.github.com/repos/thedodd/sqlx/commits/985265ed54e2b108d76e1d463ef610581ff7460e","created_at":"2020-01-29T21:07:25Z","performed_via_github_app":null},{"id":2991978615,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI5OTE5Nzg2MTU=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/2991978615","actor":{"login":"thedodd","id":2380740,"node_id":"MDQ6VXNlcjIzODA3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/2380740?v=4","gravatar_id":"","url":"https://api.github.com/users/thedodd","html_url":"https://github.com/thedodd","followers_url":"https://api.github.com/users/thedodd/followers","following_url":"https://api.github.com/users/thedodd/following{/other_user}","gists_url":"https://api.github.com/users/thedodd/gists{/gist_id}","starred_url":"https://api.github.com/users/thedodd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thedodd/subscriptions","organizations_url":"https://api.github.com/users/thedodd/orgs","repos_url":"https://api.github.com/users/thedodd/repos","events_url":"https://api.github.com/users/thedodd/events{/privacy}","received_events_url":"https://api.github.com/users/thedodd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2955d84ada4f93aef8eba3786e3be615a2fbf62d","commit_url":"https://api.github.com/repos/thedodd/sqlx/commits/2955d84ada4f93aef8eba3786e3be615a2fbf62d","created_at":"2020-01-30T04:55:20Z","performed_via_github_app":null},{"id":2999495635,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI5OTk0OTU2MzU=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/2999495635","actor":{"login":"thedodd","id":2380740,"node_id":"MDQ6VXNlcjIzODA3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/2380740?v=4","gravatar_id":"","url":"https://api.github.com/users/thedodd","html_url":"https://github.com/thedodd","followers_url":"https://api.github.com/users/thedodd/followers","following_url":"https://api.github.com/users/thedodd/following{/other_user}","gists_url":"https://api.github.com/users/thedodd/gists{/gist_id}","starred_url":"https://api.github.com/users/thedodd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thedodd/subscriptions","organizations_url":"https://api.github.com/users/thedodd/orgs","repos_url":"https://api.github.com/users/thedodd/repos","events_url":"https://api.github.com/users/thedodd/events{/privacy}","received_events_url":"https://api.github.com/users/thedodd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"67fcd28563b0993f35959451f469b24f0418e9b2","commit_url":"https://api.github.com/repos/thedodd/sqlx/commits/67fcd28563b0993f35959451f469b24f0418e9b2","created_at":"2020-02-01T17:56:39Z","performed_via_github_app":null},{"id":3086317041,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMwODYzMTcwNDE=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/3086317041","actor":{"login":"thedodd","id":2380740,"node_id":"MDQ6VXNlcjIzODA3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/2380740?v=4","gravatar_id":"","url":"https://api.github.com/users/thedodd","html_url":"https://github.com/thedodd","followers_url":"https://api.github.com/users/thedodd/followers","following_url":"https://api.github.com/users/thedodd/following{/other_user}","gists_url":"https://api.github.com/users/thedodd/gists{/gist_id}","starred_url":"https://api.github.com/users/thedodd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thedodd/subscriptions","organizations_url":"https://api.github.com/users/thedodd/orgs","repos_url":"https://api.github.com/users/thedodd/repos","events_url":"https://api.github.com/users/thedodd/events{/privacy}","received_events_url":"https://api.github.com/users/thedodd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d616fe65c4617eb6e5ef91422beda97a4edccd15","commit_url":"https://api.github.com/repos/thedodd/sqlx/commits/d616fe65c4617eb6e5ef91422beda97a4edccd15","created_at":"2020-03-02T03:51:54Z","performed_via_github_app":null},{"id":3130063113,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMxMzAwNjMxMTM=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/3130063113","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0b1d681fae3066ab13627d2722daa41155188976","commit_url":"https://api.github.com/repos/launchbadge/sqlx/commits/0b1d681fae3066ab13627d2722daa41155188976","created_at":"2020-03-15T03:13:22Z","performed_via_github_app":null},{"id":3130333383,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMxMzAzMzMzODM=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/3130333383","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a52f36468b542c6aa94c8520fb2f15d087ee17db","commit_url":"https://api.github.com/repos/launchbadge/sqlx/commits/a52f36468b542c6aa94c8520fb2f15d087ee17db","created_at":"2020-03-15T10:00:15Z","performed_via_github_app":null},{"id":3135629238,"node_id":"MDExOkNsb3NlZEV2ZW50MzEzNTYyOTIzOA==","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/3135629238","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"a52f36468b542c6aa94c8520fb2f15d087ee17db","commit_url":"https://api.github.com/repos/launchbadge/sqlx/commits/a52f36468b542c6aa94c8520fb2f15d087ee17db","created_at":"2020-03-17T02:55:17Z","state_reason":null,"performed_via_github_app":null},{"id":3151256287,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMxNTEyNTYyODc=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/3151256287","actor":{"login":"janaakhterov","id":36461294,"node_id":"MDQ6VXNlcjM2NDYxMjk0","avatar_url":"https://avatars.githubusercontent.com/u/36461294?v=4","gravatar_id":"","url":"https://api.github.com/users/janaakhterov","html_url":"https://github.com/janaakhterov","followers_url":"https://api.github.com/users/janaakhterov/followers","following_url":"https://api.github.com/users/janaakhterov/following{/other_user}","gists_url":"https://api.github.com/users/janaakhterov/gists{/gist_id}","starred_url":"https://api.github.com/users/janaakhterov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janaakhterov/subscriptions","organizations_url":"https://api.github.com/users/janaakhterov/orgs","repos_url":"https://api.github.com/users/janaakhterov/repos","events_url":"https://api.github.com/users/janaakhterov/events{/privacy}","received_events_url":"https://api.github.com/users/janaakhterov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0d9e0ec362c67ab4e7b98a316365784c2b30a638","commit_url":"https://api.github.com/repos/launchbadge/sqlx/commits/0d9e0ec362c67ab4e7b98a316365784c2b30a638","created_at":"2020-03-21T00:14:49Z","performed_via_github_app":null}]