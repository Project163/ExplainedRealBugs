[{"id":4065232132,"node_id":"MDEyOkxhYmVsZWRFdmVudDQwNjUyMzIxMzI=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/4065232132","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-12-03T02:19:47Z","label":{"name":"cli","color":"71e20d"},"performed_via_github_app":null},{"id":4065232134,"node_id":"MDEyOkxhYmVsZWRFdmVudDQwNjUyMzIxMzQ=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/4065232134","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-12-03T02:19:47Z","label":{"name":"E-easy","color":"d8c0f9"},"performed_via_github_app":null},{"id":4065232135,"node_id":"MDEyOkxhYmVsZWRFdmVudDQwNjUyMzIxMzU=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/4065232135","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-12-03T02:19:47Z","label":{"name":"enhancement","color":"a2eeef"},"performed_via_github_app":null},{"id":4065232136,"node_id":"MDEyOkxhYmVsZWRFdmVudDQwNjUyMzIxMzY=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/4065232136","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-12-03T02:19:47Z","label":{"name":"migrations","color":"f9d0c4"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/737618611","html_url":"https://github.com/launchbadge/sqlx/issues/870#issuecomment-737618611","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/870","id":737618611,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzYxODYxMQ==","user":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T02:22:03Z","updated_at":"2020-12-03T02:31:44Z","body":"This is an excellent idea. \r\n\r\nHere is how Flyway does `info` for an example of more info we could provide too. \r\n\r\n```\r\n+------------+---------+---------------------+------+---------------------+---------+----------+\r\n| Category   | Version | Description         | Type | Installed On        | State   | Undoable |\r\n+------------+---------+---------------------+------+---------------------+---------+----------+\r\n| Versioned  | 1       | Create person table | SQL  | 2017-12-21 18:05:10 | Success | No       |\r\n| Versioned  | 2       | Add people          | SQL  | 2017-12-21 18:05:10 | Success | No       |\r\n| Repeatable |         | People view         | SQL  | 2017-12-21 18:08:29 | Success |          |\r\n+------------+---------+---------------------+------+---------------------+---------+----------+\r\n```\r\n\r\nI think I would suggest changing the state of the migration and indicating its a failure state with a red color:\r\n\r\n```\r\n    $ sqlx migrate info\r\n    20201202222356/dirty name-of-migration\r\n```\r\n\r\n---\r\n\r\nIn the same vein, I'd also suggest adding the name-of-migration to that particular error message:\r\n\r\n```\r\nerror: migration 20201202222356 \"name-of-migration\" was previously applied but has been modified\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/737618611/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mehcode","id":753919,"node_id":"MDQ6VXNlcjc1MzkxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/753919?v=4","gravatar_id":"","url":"https://api.github.com/users/mehcode","html_url":"https://github.com/mehcode","followers_url":"https://api.github.com/users/mehcode/followers","following_url":"https://api.github.com/users/mehcode/following{/other_user}","gists_url":"https://api.github.com/users/mehcode/gists{/gist_id}","starred_url":"https://api.github.com/users/mehcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehcode/subscriptions","organizations_url":"https://api.github.com/users/mehcode/orgs","repos_url":"https://api.github.com/users/mehcode/repos","events_url":"https://api.github.com/users/mehcode/events{/privacy}","received_events_url":"https://api.github.com/users/mehcode/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/737623916","html_url":"https://github.com/launchbadge/sqlx/issues/870#issuecomment-737623916","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/870","id":737623916,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzYyMzkxNg==","user":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T02:36:49Z","updated_at":"2020-12-03T02:41:09Z","body":"This could also be useful as `sqlx migrate check` which returns a nonzero exit code if any migrations failed or have not been applied. Maybe a positive number if there are just unapplied migrations, or a negative number if there are some failed migrations.\r\n\r\nEdit: that may be an antipattern though as exit codes on Unix are unsigned mod 256 and some are already reserved for some common uses: https://tldp.org/LDP/abs/html/exitcodes.html","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/737623916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/737666803","html_url":"https://github.com/launchbadge/sqlx/issues/870#issuecomment-737666803","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/870","id":737666803,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzY2NjgwMw==","user":{"login":"salewski","id":997214,"node_id":"MDQ6VXNlcjk5NzIxNA==","avatar_url":"https://avatars.githubusercontent.com/u/997214?v=4","gravatar_id":"","url":"https://api.github.com/users/salewski","html_url":"https://github.com/salewski","followers_url":"https://api.github.com/users/salewski/followers","following_url":"https://api.github.com/users/salewski/following{/other_user}","gists_url":"https://api.github.com/users/salewski/gists{/gist_id}","starred_url":"https://api.github.com/users/salewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salewski/subscriptions","organizations_url":"https://api.github.com/users/salewski/orgs","repos_url":"https://api.github.com/users/salewski/repos","events_url":"https://api.github.com/users/salewski/events{/privacy}","received_events_url":"https://api.github.com/users/salewski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T05:01:08Z","updated_at":"2020-12-03T05:11:05Z","body":"> This could also be useful as `sqlx migrate check` which returns a nonzero exit code if any migrations failed or have not been applied.\r\n\r\nI do like the idea of conveying specific statuses (more than just success/non-success) through the exit status where it makes sense to do so, but it is probably a good idea to keep the total universe of such codes small -- probably less than five, and almost certainly less than 10, but who knows...\r\n\r\nFor a general purpose \"check\" command, it would probably be desirable at some point to convey richer information than can be conveyed through exit status numbers. For those use cases, it is likely to be better to have a small number of exit status codes to indicate coarse status (\"ran successfully\", \"couldn't connect\", \"no local migrations present\", etc.), and emit the richer detail (perhaps in a machine readable format) on stdout (or something).\r\n\r\nFor comparison with some widely used tools:\r\n\r\n   * Debian's `lintian` uses three exit status codes: 0, 1, and 2. From `lintian(1)`:\r\n     ```\r\n     EXIT STATUS\r\n            0   Normal operation.\r\n\r\n            1   Lintian run-time error. An error message is sent to stderr.\r\n\r\n            2   Detected a condition specified via the --fail-on option. This can\r\n                be used to trigger a non-zero exit value in case of policy\r\n                violations.\r\n     ```\r\n     By default the tool exits with status 2 for checks with a default level of `error`, but that `--fail-on` option allows the user to request that it exit with status 2 for `warning`, `info`, etc. As a general check tool, I think this is a pretty good example to emulate.\r\n\r\n   * GNU `grep` also uses the three status codes: 0, 1, and 2. From `grep(1)`:\r\n     ```text\r\n     EXIT STATUS\r\n            Normally the exit status is 0 if a line is selected, 1 if no lines were\r\n            selected, and 2 if an error occurred.  However, if the -q or --quiet or\r\n            --silent is used and a line is selected, the exit status is 0  even  if\r\n            an error occurred\r\n     ```\r\n\r\n   * GNU `tar(1)` uses a similar scheme:\r\n     ```\r\n     RETURN VALUE\r\n            Tar exit code indicates whether it was able to successfully perform the\r\n            requested operation, and if not, what kind of error occurred.\r\n\r\n            0      Successful termination.\r\n\r\n            1      Some  files  differ.   If  tar  was  invoked  with the --compare\r\n                   (--diff, -d) command line option, this means that some files  in\r\n                   the  archive  differ  from  their disk counterparts.  If tar was\r\n                   given one of the --create, --append or  --update  options,  this\r\n                   exit  code  means  that  some  files  were  changed  while being\r\n                   archived and so the resulting archive does not contain the exact\r\n                   copy of the file set.\r\n\r\n            2      Fatal  error.   This  means that some fatal, unrecoverable error\r\n                   occurred.\r\n     ```\r\n\r\n   * PostgreSQL's `psql` command uses four exit status code: 0-4. From `psql(1)`:\r\n     ```\r\n     EXIT STATUS\r\n            psql returns 0 to the shell if it finished normally, 1 if a fatal error\r\n            of its own occurs (e.g. out of memory, file not found), 2 if the\r\n            connection to the server went bad and the session was not interactive,\r\n            and 3 if an error occurred in a script and the variable ON_ERROR_STOP\r\n            was set.\r\n     ```\r\n\r\n   * With `gzip` we're back to the three codes: 0, 1, and 2. From `gzip(1)`:\r\n     ```\r\n     DIAGNOSTICS\r\n            Exit status is normally 0; if an error occurs, exit status is 1.  If  a\r\n            warning occurs, exit status is 2.\r\n     ```\r\n\r\n   * GNU `wget(1)` uses more codes than most, but still fewer than 10:\r\n     ```\r\n     EXIT STATUS\r\n            Wget may return one of several error codes if it encounters problems.\r\n\r\n            0   No problems occurred.\r\n\r\n            1   Generic error code.\r\n\r\n            2   Parse error---for instance, when parsing command-line options, the\r\n                .wgetrc or .netrc...\r\n\r\n            3   File I/O error.\r\n\r\n            4   Network failure.\r\n\r\n            5   SSL verification failure.\r\n\r\n            6   Username/password authentication failure.\r\n\r\n            7   Protocol errors.\r\n\r\n            8   Server issued an error response.\r\n\r\n            With the exceptions of 0 and 1, the lower-numbered exit codes take\r\n            precedence over higher-numbered ones, when multiple types of errors are\r\n            encountered.\r\n     ```\r\n\r\n   * `fetchmail(1)` is somewhere in the middle. It documents the use of 29 non-zero status codes. That's quite a few, but a lot of those are things somebody scripting the tool might want to deal with specifcially in different circumstances.\r\n\r\n   * `curl(1)` takes an entirely different approach: it goes the hole hog conveying detailed information via its exit codes -- too many to list here, but `curl(1)` from version 7.72.0 enumerates 96 specific errors, and promises more to come. Considering 125 as the highest value that should be explicitly used by a user program, it feels a bit like curl is on its way to running out of slots for new exit statuses!\r\n\r\n   * Entry for `sqsh(1)` elided because, while it is well-intended, I do not think it is a good example to emulate :-)\r\n\r\n~~Maybe we should open a separate issue for a new \"check\" type of tool, and move this part of the discussion to it?~~ See issue #872 \r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/737666803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"salewski","id":997214,"node_id":"MDQ6VXNlcjk5NzIxNA==","avatar_url":"https://avatars.githubusercontent.com/u/997214?v=4","gravatar_id":"","url":"https://api.github.com/users/salewski","html_url":"https://github.com/salewski","followers_url":"https://api.github.com/users/salewski/followers","following_url":"https://api.github.com/users/salewski/following{/other_user}","gists_url":"https://api.github.com/users/salewski/gists{/gist_id}","starred_url":"https://api.github.com/users/salewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salewski/subscriptions","organizations_url":"https://api.github.com/users/salewski/orgs","repos_url":"https://api.github.com/users/salewski/repos","events_url":"https://api.github.com/users/salewski/events{/privacy}","received_events_url":"https://api.github.com/users/salewski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"salewski","id":997214,"node_id":"MDQ6VXNlcjk5NzIxNA==","avatar_url":"https://avatars.githubusercontent.com/u/997214?v=4","gravatar_id":"","url":"https://api.github.com/users/salewski","html_url":"https://github.com/salewski","followers_url":"https://api.github.com/users/salewski/followers","following_url":"https://api.github.com/users/salewski/following{/other_user}","gists_url":"https://api.github.com/users/salewski/gists{/gist_id}","starred_url":"https://api.github.com/users/salewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salewski/subscriptions","organizations_url":"https://api.github.com/users/salewski/orgs","repos_url":"https://api.github.com/users/salewski/repos","events_url":"https://api.github.com/users/salewski/events{/privacy}","received_events_url":"https://api.github.com/users/salewski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T05:10:03Z","updated_at":"2020-12-03T05:10:03Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/872","repository_url":"https://api.github.com/repos/launchbadge/sqlx","labels_url":"https://api.github.com/repos/launchbadge/sqlx/issues/872/labels{/name}","comments_url":"https://api.github.com/repos/launchbadge/sqlx/issues/872/comments","events_url":"https://api.github.com/repos/launchbadge/sqlx/issues/872/events","html_url":"https://github.com/launchbadge/sqlx/issues/872","id":755849154,"node_id":"MDU6SXNzdWU3NTU4NDkxNTQ=","number":872,"title":"[cli] ideas for a 'migrate check' type of tool (different from 'migrate info')","user":{"login":"salewski","id":997214,"node_id":"MDQ6VXNlcjk5NzIxNA==","avatar_url":"https://avatars.githubusercontent.com/u/997214?v=4","gravatar_id":"","url":"https://api.github.com/users/salewski","html_url":"https://github.com/salewski","followers_url":"https://api.github.com/users/salewski/followers","following_url":"https://api.github.com/users/salewski/following{/other_user}","gists_url":"https://api.github.com/users/salewski/gists{/gist_id}","starred_url":"https://api.github.com/users/salewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salewski/subscriptions","organizations_url":"https://api.github.com/users/salewski/orgs","repos_url":"https://api.github.com/users/salewski/repos","events_url":"https://api.github.com/users/salewski/events{/privacy}","received_events_url":"https://api.github.com/users/salewski/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-12-03T05:10:03Z","updated_at":"2020-12-03T05:35:59Z","closed_at":"2020-12-03T05:35:59Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":230595891,"node_id":"MDEwOlJlcG9zaXRvcnkyMzA1OTU4OTE=","name":"sqlx","full_name":"launchbadge/sqlx","private":false,"owner":{"login":"launchbadge","id":10077001,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEwMDc3MDAx","avatar_url":"https://avatars.githubusercontent.com/u/10077001?v=4","gravatar_id":"","url":"https://api.github.com/users/launchbadge","html_url":"https://github.com/launchbadge","followers_url":"https://api.github.com/users/launchbadge/followers","following_url":"https://api.github.com/users/launchbadge/following{/other_user}","gists_url":"https://api.github.com/users/launchbadge/gists{/gist_id}","starred_url":"https://api.github.com/users/launchbadge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/launchbadge/subscriptions","organizations_url":"https://api.github.com/users/launchbadge/orgs","repos_url":"https://api.github.com/users/launchbadge/repos","events_url":"https://api.github.com/users/launchbadge/events{/privacy}","received_events_url":"https://api.github.com/users/launchbadge/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/launchbadge/sqlx","description":"ðŸ§° The Rust SQL Toolkit. An async, pure Rust SQL crate featuring compile-time checked queries without a DSL. Supports PostgreSQL, MySQL, and SQLite.","fork":false,"url":"https://api.github.com/repos/launchbadge/sqlx","forks_url":"https://api.github.com/repos/launchbadge/sqlx/forks","keys_url":"https://api.github.com/repos/launchbadge/sqlx/keys{/key_id}","collaborators_url":"https://api.github.com/repos/launchbadge/sqlx/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/launchbadge/sqlx/teams","hooks_url":"https://api.github.com/repos/launchbadge/sqlx/hooks","issue_events_url":"https://api.github.com/repos/launchbadge/sqlx/issues/events{/number}","events_url":"https://api.github.com/repos/launchbadge/sqlx/events","assignees_url":"https://api.github.com/repos/launchbadge/sqlx/assignees{/user}","branches_url":"https://api.github.com/repos/launchbadge/sqlx/branches{/branch}","tags_url":"https://api.github.com/repos/launchbadge/sqlx/tags","blobs_url":"https://api.github.com/repos/launchbadge/sqlx/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/launchbadge/sqlx/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/launchbadge/sqlx/git/refs{/sha}","trees_url":"https://api.github.com/repos/launchbadge/sqlx/git/trees{/sha}","statuses_url":"https://api.github.com/repos/launchbadge/sqlx/statuses/{sha}","languages_url":"https://api.github.com/repos/launchbadge/sqlx/languages","stargazers_url":"https://api.github.com/repos/launchbadge/sqlx/stargazers","contributors_url":"https://api.github.com/repos/launchbadge/sqlx/contributors","subscribers_url":"https://api.github.com/repos/launchbadge/sqlx/subscribers","subscription_url":"https://api.github.com/repos/launchbadge/sqlx/subscription","commits_url":"https://api.github.com/repos/launchbadge/sqlx/commits{/sha}","git_commits_url":"https://api.github.com/repos/launchbadge/sqlx/git/commits{/sha}","comments_url":"https://api.github.com/repos/launchbadge/sqlx/comments{/number}","issue_comment_url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments{/number}","contents_url":"https://api.github.com/repos/launchbadge/sqlx/contents/{+path}","compare_url":"https://api.github.com/repos/launchbadge/sqlx/compare/{base}...{head}","merges_url":"https://api.github.com/repos/launchbadge/sqlx/merges","archive_url":"https://api.github.com/repos/launchbadge/sqlx/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/launchbadge/sqlx/downloads","issues_url":"https://api.github.com/repos/launchbadge/sqlx/issues{/number}","pulls_url":"https://api.github.com/repos/launchbadge/sqlx/pulls{/number}","milestones_url":"https://api.github.com/repos/launchbadge/sqlx/milestones{/number}","notifications_url":"https://api.github.com/repos/launchbadge/sqlx/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/launchbadge/sqlx/labels{/name}","releases_url":"https://api.github.com/repos/launchbadge/sqlx/releases{/id}","deployments_url":"https://api.github.com/repos/launchbadge/sqlx/deployments","created_at":"2019-12-28T10:40:57Z","updated_at":"2025-11-10T07:15:41Z","pushed_at":"2025-10-29T18:37:49Z","git_url":"git://github.com/launchbadge/sqlx.git","ssh_url":"git@github.com:launchbadge/sqlx.git","clone_url":"https://github.com/launchbadge/sqlx.git","svn_url":"https://github.com/launchbadge/sqlx","homepage":"","size":9641,"stargazers_count":15938,"watchers_count":15938,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1502,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":701,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["async","await","mariadb","mysql","postgres","postgresql","rust","sql","sqlite"],"visibility":"public","forks":1502,"open_issues":701,"watchers":15938,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Related to:\r\n   * issue #870 \r\n----\r\n\r\nThis issue is just to create  a home for kicking around ideas for what an `sqlx migrate check` type of tool might look like, as suggested by @abonander in [this comment](https://github.com/launchbadge/sqlx/issues/870#issuecomment-737623916) on issue #870.","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/launchbadge/sqlx/issues/872/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/737670102","html_url":"https://github.com/launchbadge/sqlx/issues/870#issuecomment-737670102","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/870","id":737670102,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzY3MDEwMg==","user":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T05:12:28Z","updated_at":"2020-12-03T05:12:28Z","body":"It seems superfluous to have basically the same subcommand just under different names and one changes its exit code based on migration status.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/737670102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/737677155","html_url":"https://github.com/launchbadge/sqlx/issues/870#issuecomment-737677155","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/870","id":737677155,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzY3NzE1NQ==","user":{"login":"salewski","id":997214,"node_id":"MDQ6VXNlcjk5NzIxNA==","avatar_url":"https://avatars.githubusercontent.com/u/997214?v=4","gravatar_id":"","url":"https://api.github.com/users/salewski","html_url":"https://github.com/salewski","followers_url":"https://api.github.com/users/salewski/followers","following_url":"https://api.github.com/users/salewski/following{/other_user}","gists_url":"https://api.github.com/users/salewski/gists{/gist_id}","starred_url":"https://api.github.com/users/salewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salewski/subscriptions","organizations_url":"https://api.github.com/users/salewski/orgs","repos_url":"https://api.github.com/users/salewski/repos","events_url":"https://api.github.com/users/salewski/events{/privacy}","received_events_url":"https://api.github.com/users/salewski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T05:34:29Z","updated_at":"2020-12-03T05:34:29Z","body":"> It seems superfluous to have basically the same subcommand just under different names and one changes its exit code based on migration status.\r\n\r\n@abonander Yeah, I agree, if that would be the only difference. But if that's the case, then I misunderstood your intent. I guess I was reading too much into the word \"check\" in `sqlx migrate check`, b/c  I got the impression that you were proposing a new tool that would do something deeper than detect/report on the high-level \"pending\"/\"installed\"/\"installed-but-changed\" states.\r\n\r\nApologies for the noise.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/737677155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"salewski","id":997214,"node_id":"MDQ6VXNlcjk5NzIxNA==","avatar_url":"https://avatars.githubusercontent.com/u/997214?v=4","gravatar_id":"","url":"https://api.github.com/users/salewski","html_url":"https://github.com/salewski","followers_url":"https://api.github.com/users/salewski/followers","following_url":"https://api.github.com/users/salewski/following{/other_user}","gists_url":"https://api.github.com/users/salewski/gists{/gist_id}","starred_url":"https://api.github.com/users/salewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salewski/subscriptions","organizations_url":"https://api.github.com/users/salewski/orgs","repos_url":"https://api.github.com/users/salewski/repos","events_url":"https://api.github.com/users/salewski/events{/privacy}","received_events_url":"https://api.github.com/users/salewski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4065635064,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDA2NTYzNTA2NA==","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/4065635064","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-12-03T05:34:29Z","performed_via_github_app":null},{"id":4065635065,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQwNjU2MzUwNjU=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/4065635065","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-03T05:34:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/784576233","html_url":"https://github.com/launchbadge/sqlx/issues/870#issuecomment-784576233","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/870","id":784576233,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NDU3NjIzMw==","user":{"login":"nixpulvis","id":715947,"node_id":"MDQ6VXNlcjcxNTk0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/715947?v=4","gravatar_id":"","url":"https://api.github.com/users/nixpulvis","html_url":"https://github.com/nixpulvis","followers_url":"https://api.github.com/users/nixpulvis/followers","following_url":"https://api.github.com/users/nixpulvis/following{/other_user}","gists_url":"https://api.github.com/users/nixpulvis/gists{/gist_id}","starred_url":"https://api.github.com/users/nixpulvis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nixpulvis/subscriptions","organizations_url":"https://api.github.com/users/nixpulvis/orgs","repos_url":"https://api.github.com/users/nixpulvis/repos","events_url":"https://api.github.com/users/nixpulvis/events{/privacy}","received_events_url":"https://api.github.com/users/nixpulvis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-23T23:04:19Z","updated_at":"2021-02-23T23:27:18Z","body":"So let me just ask. Is there a plan to support some kind of command to help fix this issue? As a new user of this library, I just got stuck on this. I think one thing that would help me personally is a way to re-validate a migration. Here's my current situation:\r\n\r\n1. I created a migration with `sqlx migrate add ...`\r\n2. I ran the migration with `sqlx run`\r\n3. I then imported a bunch of test data\r\n4. Then I ended up \"playing around\" with things, since I'm developing the migration itself and I needed to add an index and enable an extension, etc\r\n5. Finally, I'm creating a new migration now...\r\n\r\nI don't really want to drop my database (or rollback) to re-run the migration, since I already went through the effort of adding the test data.\r\n\r\nWhat I'd like to be able to do is update the `checksum` (and maybe `installed_on` / `execution_time`), to confirm the state I'm in matches the migration. Or if that's too hard, maybe just an easy way to generate the checksum myself so I can update the column.\r\n\r\nBasically, I think this use case should be considered. I'm capable of working around it, but it's going to happen again and again.\r\n\r\nEDIT:\r\n\r\nJust in case anyone else finds themselves in this situation, here's the workaround:\r\n\r\n```sh\r\ncat migrations/<name>.sql | openssl dgst -sha384 | cut -d ' ' -f 2\r\n```\r\n\r\n```sql\r\nUPDATE _sqlx_migrations SET checksum = '\\x<hash>' WHERE version = <version>;\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/784576233/reactions","total_count":15,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":7,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nixpulvis","id":715947,"node_id":"MDQ6VXNlcjcxNTk0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/715947?v=4","gravatar_id":"","url":"https://api.github.com/users/nixpulvis","html_url":"https://github.com/nixpulvis","followers_url":"https://api.github.com/users/nixpulvis/followers","following_url":"https://api.github.com/users/nixpulvis/following{/other_user}","gists_url":"https://api.github.com/users/nixpulvis/gists{/gist_id}","starred_url":"https://api.github.com/users/nixpulvis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nixpulvis/subscriptions","organizations_url":"https://api.github.com/users/nixpulvis/orgs","repos_url":"https://api.github.com/users/nixpulvis/repos","events_url":"https://api.github.com/users/nixpulvis/events{/privacy}","received_events_url":"https://api.github.com/users/nixpulvis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/833301155","html_url":"https://github.com/launchbadge/sqlx/issues/870#issuecomment-833301155","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/870","id":833301155,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMzMwMTE1NQ==","user":{"login":"brianbruggeman","id":1350114,"node_id":"MDQ6VXNlcjEzNTAxMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1350114?v=4","gravatar_id":"","url":"https://api.github.com/users/brianbruggeman","html_url":"https://github.com/brianbruggeman","followers_url":"https://api.github.com/users/brianbruggeman/followers","following_url":"https://api.github.com/users/brianbruggeman/following{/other_user}","gists_url":"https://api.github.com/users/brianbruggeman/gists{/gist_id}","starred_url":"https://api.github.com/users/brianbruggeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brianbruggeman/subscriptions","organizations_url":"https://api.github.com/users/brianbruggeman/orgs","repos_url":"https://api.github.com/users/brianbruggeman/repos","events_url":"https://api.github.com/users/brianbruggeman/events{/privacy}","received_events_url":"https://api.github.com/users/brianbruggeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-06T07:34:45Z","updated_at":"2021-05-06T07:34:45Z","body":"I think this is kind of broken for development, especially where the developer is unfamiliar with the cli interface and the expected workflow and making mistakes (or at least poking around and breaking things).\r\n\r\nSomewhere, as a developer, we would need a full CRUD interface where we can apply, re-apply, update, rollback and remove.   \r\n\r\nIt's also completely unclear (and a little surprising/irritating) that there was an addition made to the database.  While I think the database is a nice way to control migrations, I may not want those in my database.\r\n\r\nWhile developing, I'm definitely going to end up running this quite a bit:\r\n\r\n```sql\r\nDROP TABLE IF EXISTS _sqlx_migrations\r\n```\r\n\r\nIdeally, for the issue @nixpulvis mentioned, we'd have a CLI for updating the checksum.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/833301155/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brianbruggeman","id":1350114,"node_id":"MDQ6VXNlcjEzNTAxMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1350114?v=4","gravatar_id":"","url":"https://api.github.com/users/brianbruggeman","html_url":"https://github.com/brianbruggeman","followers_url":"https://api.github.com/users/brianbruggeman/followers","following_url":"https://api.github.com/users/brianbruggeman/following{/other_user}","gists_url":"https://api.github.com/users/brianbruggeman/gists{/gist_id}","starred_url":"https://api.github.com/users/brianbruggeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brianbruggeman/subscriptions","organizations_url":"https://api.github.com/users/brianbruggeman/orgs","repos_url":"https://api.github.com/users/brianbruggeman/repos","events_url":"https://api.github.com/users/brianbruggeman/events{/privacy}","received_events_url":"https://api.github.com/users/brianbruggeman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4693361341,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDY5MzM2MTM0MQ==","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/4693361341","actor":{"login":"nixpulvis","id":715947,"node_id":"MDQ6VXNlcjcxNTk0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/715947?v=4","gravatar_id":"","url":"https://api.github.com/users/nixpulvis","html_url":"https://github.com/nixpulvis","followers_url":"https://api.github.com/users/nixpulvis/followers","following_url":"https://api.github.com/users/nixpulvis/following{/other_user}","gists_url":"https://api.github.com/users/nixpulvis/gists{/gist_id}","starred_url":"https://api.github.com/users/nixpulvis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nixpulvis/subscriptions","organizations_url":"https://api.github.com/users/nixpulvis/orgs","repos_url":"https://api.github.com/users/nixpulvis/repos","events_url":"https://api.github.com/users/nixpulvis/events{/privacy}","received_events_url":"https://api.github.com/users/nixpulvis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-06T07:34:46Z","performed_via_github_app":null},{"id":4693361343,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ2OTMzNjEzNDM=","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/4693361343","actor":{"login":"nixpulvis","id":715947,"node_id":"MDQ6VXNlcjcxNTk0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/715947?v=4","gravatar_id":"","url":"https://api.github.com/users/nixpulvis","html_url":"https://github.com/nixpulvis","followers_url":"https://api.github.com/users/nixpulvis/followers","following_url":"https://api.github.com/users/nixpulvis/following{/other_user}","gists_url":"https://api.github.com/users/nixpulvis/gists{/gist_id}","starred_url":"https://api.github.com/users/nixpulvis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nixpulvis/subscriptions","organizations_url":"https://api.github.com/users/nixpulvis/orgs","repos_url":"https://api.github.com/users/nixpulvis/repos","events_url":"https://api.github.com/users/nixpulvis/events{/privacy}","received_events_url":"https://api.github.com/users/nixpulvis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-06T07:34:46Z","performed_via_github_app":null},{"id":6013934271,"node_id":"REFE_lADODb6dM84tC9zUzwAAAAFmdVq_","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/6013934271","actor":{"login":"lfn3","id":3586137,"node_id":"MDQ6VXNlcjM1ODYxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/3586137?v=4","gravatar_id":"","url":"https://api.github.com/users/lfn3","html_url":"https://github.com/lfn3","followers_url":"https://api.github.com/users/lfn3/followers","following_url":"https://api.github.com/users/lfn3/following{/other_user}","gists_url":"https://api.github.com/users/lfn3/gists{/gist_id}","starred_url":"https://api.github.com/users/lfn3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lfn3/subscriptions","organizations_url":"https://api.github.com/users/lfn3/orgs","repos_url":"https://api.github.com/users/lfn3/repos","events_url":"https://api.github.com/users/lfn3/events{/privacy}","received_events_url":"https://api.github.com/users/lfn3/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"44e22e75a1f9c821806520a0a908849b99a79dba","commit_url":"https://api.github.com/repos/lfn3/sqlx/commits/44e22e75a1f9c821806520a0a908849b99a79dba","created_at":"2022-02-05T15:24:07Z","performed_via_github_app":null},{"actor":{"login":"lfn3","id":3586137,"node_id":"MDQ6VXNlcjM1ODYxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/3586137?v=4","gravatar_id":"","url":"https://api.github.com/users/lfn3","html_url":"https://github.com/lfn3","followers_url":"https://api.github.com/users/lfn3/followers","following_url":"https://api.github.com/users/lfn3/following{/other_user}","gists_url":"https://api.github.com/users/lfn3/gists{/gist_id}","starred_url":"https://api.github.com/users/lfn3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lfn3/subscriptions","organizations_url":"https://api.github.com/users/lfn3/orgs","repos_url":"https://api.github.com/users/lfn3/repos","events_url":"https://api.github.com/users/lfn3/events{/privacy}","received_events_url":"https://api.github.com/users/lfn3/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-05T15:26:26Z","updated_at":"2022-02-05T15:26:26Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/1680","repository_url":"https://api.github.com/repos/launchbadge/sqlx","labels_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1680/labels{/name}","comments_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1680/comments","events_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1680/events","html_url":"https://github.com/launchbadge/sqlx/pull/1680","id":1124956594,"node_id":"PR_kwDODb6dM84yHt89","number":1680,"title":"Add checksum mismtaches to sqlx-cli migrate info","user":{"login":"lfn3","id":3586137,"node_id":"MDQ6VXNlcjM1ODYxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/3586137?v=4","gravatar_id":"","url":"https://api.github.com/users/lfn3","html_url":"https://github.com/lfn3","followers_url":"https://api.github.com/users/lfn3/followers","following_url":"https://api.github.com/users/lfn3/following{/other_user}","gists_url":"https://api.github.com/users/lfn3/gists{/gist_id}","starred_url":"https://api.github.com/users/lfn3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lfn3/subscriptions","organizations_url":"https://api.github.com/users/lfn3/orgs","repos_url":"https://api.github.com/users/lfn3/repos","events_url":"https://api.github.com/users/lfn3/events{/privacy}","received_events_url":"https://api.github.com/users/lfn3/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-02-05T15:26:26Z","updated_at":"2022-02-18T08:54:51Z","closed_at":"2022-02-16T04:11:07Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":230595891,"node_id":"MDEwOlJlcG9zaXRvcnkyMzA1OTU4OTE=","name":"sqlx","full_name":"launchbadge/sqlx","private":false,"owner":{"login":"launchbadge","id":10077001,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEwMDc3MDAx","avatar_url":"https://avatars.githubusercontent.com/u/10077001?v=4","gravatar_id":"","url":"https://api.github.com/users/launchbadge","html_url":"https://github.com/launchbadge","followers_url":"https://api.github.com/users/launchbadge/followers","following_url":"https://api.github.com/users/launchbadge/following{/other_user}","gists_url":"https://api.github.com/users/launchbadge/gists{/gist_id}","starred_url":"https://api.github.com/users/launchbadge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/launchbadge/subscriptions","organizations_url":"https://api.github.com/users/launchbadge/orgs","repos_url":"https://api.github.com/users/launchbadge/repos","events_url":"https://api.github.com/users/launchbadge/events{/privacy}","received_events_url":"https://api.github.com/users/launchbadge/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/launchbadge/sqlx","description":"ðŸ§° The Rust SQL Toolkit. An async, pure Rust SQL crate featuring compile-time checked queries without a DSL. Supports PostgreSQL, MySQL, and SQLite.","fork":false,"url":"https://api.github.com/repos/launchbadge/sqlx","forks_url":"https://api.github.com/repos/launchbadge/sqlx/forks","keys_url":"https://api.github.com/repos/launchbadge/sqlx/keys{/key_id}","collaborators_url":"https://api.github.com/repos/launchbadge/sqlx/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/launchbadge/sqlx/teams","hooks_url":"https://api.github.com/repos/launchbadge/sqlx/hooks","issue_events_url":"https://api.github.com/repos/launchbadge/sqlx/issues/events{/number}","events_url":"https://api.github.com/repos/launchbadge/sqlx/events","assignees_url":"https://api.github.com/repos/launchbadge/sqlx/assignees{/user}","branches_url":"https://api.github.com/repos/launchbadge/sqlx/branches{/branch}","tags_url":"https://api.github.com/repos/launchbadge/sqlx/tags","blobs_url":"https://api.github.com/repos/launchbadge/sqlx/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/launchbadge/sqlx/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/launchbadge/sqlx/git/refs{/sha}","trees_url":"https://api.github.com/repos/launchbadge/sqlx/git/trees{/sha}","statuses_url":"https://api.github.com/repos/launchbadge/sqlx/statuses/{sha}","languages_url":"https://api.github.com/repos/launchbadge/sqlx/languages","stargazers_url":"https://api.github.com/repos/launchbadge/sqlx/stargazers","contributors_url":"https://api.github.com/repos/launchbadge/sqlx/contributors","subscribers_url":"https://api.github.com/repos/launchbadge/sqlx/subscribers","subscription_url":"https://api.github.com/repos/launchbadge/sqlx/subscription","commits_url":"https://api.github.com/repos/launchbadge/sqlx/commits{/sha}","git_commits_url":"https://api.github.com/repos/launchbadge/sqlx/git/commits{/sha}","comments_url":"https://api.github.com/repos/launchbadge/sqlx/comments{/number}","issue_comment_url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments{/number}","contents_url":"https://api.github.com/repos/launchbadge/sqlx/contents/{+path}","compare_url":"https://api.github.com/repos/launchbadge/sqlx/compare/{base}...{head}","merges_url":"https://api.github.com/repos/launchbadge/sqlx/merges","archive_url":"https://api.github.com/repos/launchbadge/sqlx/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/launchbadge/sqlx/downloads","issues_url":"https://api.github.com/repos/launchbadge/sqlx/issues{/number}","pulls_url":"https://api.github.com/repos/launchbadge/sqlx/pulls{/number}","milestones_url":"https://api.github.com/repos/launchbadge/sqlx/milestones{/number}","notifications_url":"https://api.github.com/repos/launchbadge/sqlx/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/launchbadge/sqlx/labels{/name}","releases_url":"https://api.github.com/repos/launchbadge/sqlx/releases{/id}","deployments_url":"https://api.github.com/repos/launchbadge/sqlx/deployments","created_at":"2019-12-28T10:40:57Z","updated_at":"2025-11-10T07:15:41Z","pushed_at":"2025-10-29T18:37:49Z","git_url":"git://github.com/launchbadge/sqlx.git","ssh_url":"git@github.com:launchbadge/sqlx.git","clone_url":"https://github.com/launchbadge/sqlx.git","svn_url":"https://github.com/launchbadge/sqlx","homepage":"","size":9641,"stargazers_count":15938,"watchers_count":15938,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1502,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":701,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["async","await","mariadb","mysql","postgres","postgresql","rust","sql","sqlite"],"visibility":"public","forks":1502,"open_issues":701,"watchers":15938,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/launchbadge/sqlx/pulls/1680","html_url":"https://github.com/launchbadge/sqlx/pull/1680","diff_url":"https://github.com/launchbadge/sqlx/pull/1680.diff","patch_url":"https://github.com/launchbadge/sqlx/pull/1680.patch","merged_at":"2022-02-16T04:11:06Z"},"body":"This fixes #870\r\n\r\nTested this manually locally:\r\n![image](https://user-images.githubusercontent.com/3586137/152647905-fa393eed-6f52-43b4-986c-121e908741b1.png)\r\n","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/1680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/launchbadge/sqlx/issues/1680/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":6079876541,"node_id":"CE_lADODb6dM84tC9zUzwAAAAFqY429","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/6079876541","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-02-16T04:11:06Z","state_reason":null,"performed_via_github_app":null},{"id":6079876612,"node_id":"REFE_lADODb6dM84tC9zUzwAAAAFqY44E","url":"https://api.github.com/repos/launchbadge/sqlx/issues/events/6079876612","actor":{"login":"abonander","id":3198595,"node_id":"MDQ6VXNlcjMxOTg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3198595?v=4","gravatar_id":"","url":"https://api.github.com/users/abonander","html_url":"https://github.com/abonander","followers_url":"https://api.github.com/users/abonander/followers","following_url":"https://api.github.com/users/abonander/following{/other_user}","gists_url":"https://api.github.com/users/abonander/gists{/gist_id}","starred_url":"https://api.github.com/users/abonander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abonander/subscriptions","organizations_url":"https://api.github.com/users/abonander/orgs","repos_url":"https://api.github.com/users/abonander/repos","events_url":"https://api.github.com/users/abonander/events{/privacy}","received_events_url":"https://api.github.com/users/abonander/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7fb54d3d7b73fb9e808bcfdd405e3f7fa2b01c32","commit_url":"https://api.github.com/repos/launchbadge/sqlx/commits/7fb54d3d7b73fb9e808bcfdd405e3f7fa2b01c32","created_at":"2022-02-16T04:11:08Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/1214393573","html_url":"https://github.com/launchbadge/sqlx/issues/870#issuecomment-1214393573","issue_url":"https://api.github.com/repos/launchbadge/sqlx/issues/870","id":1214393573,"node_id":"IC_kwDODb6dM85IYizl","user":{"login":"rubenfiszel","id":275584,"node_id":"MDQ6VXNlcjI3NTU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/275584?v=4","gravatar_id":"","url":"https://api.github.com/users/rubenfiszel","html_url":"https://github.com/rubenfiszel","followers_url":"https://api.github.com/users/rubenfiszel/followers","following_url":"https://api.github.com/users/rubenfiszel/following{/other_user}","gists_url":"https://api.github.com/users/rubenfiszel/gists{/gist_id}","starred_url":"https://api.github.com/users/rubenfiszel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubenfiszel/subscriptions","organizations_url":"https://api.github.com/users/rubenfiszel/orgs","repos_url":"https://api.github.com/users/rubenfiszel/repos","events_url":"https://api.github.com/users/rubenfiszel/events{/privacy}","received_events_url":"https://api.github.com/users/rubenfiszel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-14T14:47:04Z","updated_at":"2022-08-14T14:47:04Z","body":"I wrote a little migration script to overwrite all migrations for the need of: https://github.com/windmill-labs/windmill\r\n\r\nI thought it could be useful to anyone reading this thread:\r\n\r\n```python\r\nimport sys\r\nimport os\r\nimport subprocess\r\n\r\ndatabase_url = sys.argv[1]\r\n\r\nprint(f\"database_url: {database_url}\")\r\n\r\nif database_url is None:\r\n    print(\"Please provide a database url\")\r\n    sys.exit(1)\r\n\r\nfor f in os.listdir(\"migrations\"):\r\n    if f.endswith(\".up.sql\"):\r\n        version = f.split(\"_\")[0]\r\n        cmd = f\"cat migrations/{f} | openssl dgst -sha384 | cut -d ' ' -f 2\"\r\n        ps = subprocess.Popen(cmd,shell=True,stdout=subprocess.PIPE,stderr=subprocess.STDOUT)\r\n        digest = ps.communicate()[0].decode(\"utf-8\").strip()\r\n\r\n        cmd = f\"psql '{database_url}' -c \\\"UPDATE _sqlx_migrations SET checksum = '\\\\x{digest}' WHERE version = {version};\\\"\"\r\n        ps = subprocess.Popen(cmd,shell=True,stdout=subprocess.PIPE,stderr=subprocess.STDOUT)\r\n        out = ps.communicate()[0].decode(\"utf-8\").strip()\r\n        print(version, digest, out)\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/launchbadge/sqlx/issues/comments/1214393573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rubenfiszel","id":275584,"node_id":"MDQ6VXNlcjI3NTU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/275584?v=4","gravatar_id":"","url":"https://api.github.com/users/rubenfiszel","html_url":"https://github.com/rubenfiszel","followers_url":"https://api.github.com/users/rubenfiszel/followers","following_url":"https://api.github.com/users/rubenfiszel/following{/other_user}","gists_url":"https://api.github.com/users/rubenfiszel/gists{/gist_id}","starred_url":"https://api.github.com/users/rubenfiszel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubenfiszel/subscriptions","organizations_url":"https://api.github.com/users/rubenfiszel/orgs","repos_url":"https://api.github.com/users/rubenfiszel/repos","events_url":"https://api.github.com/users/rubenfiszel/events{/privacy}","received_events_url":"https://api.github.com/users/rubenfiszel/received_events","type":"User","user_view_type":"public","site_admin":false}}]