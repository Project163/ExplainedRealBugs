[{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070963444","html_url":"https://github.com/mvdan/gofumpt/issues/208#issuecomment-1070963444","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/208","id":1070963444,"node_id":"IC_kwDOCqWoQc4_1Zr0","user":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T14:21:09Z","updated_at":"2022-03-17T14:21:09Z","body":"What system are you on? If it is unix-like, can you show the output of `ulimit -S -n` and `ulimit -H -n`?","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070963444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070964981","html_url":"https://github.com/mvdan/gofumpt/issues/208#issuecomment-1070964981","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/208","id":1070964981,"node_id":"IC_kwDOCqWoQc4_1aD1","user":{"login":"screwyprof","id":1536274,"node_id":"MDQ6VXNlcjE1MzYyNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1536274?v=4","gravatar_id":"","url":"https://api.github.com/users/screwyprof","html_url":"https://github.com/screwyprof","followers_url":"https://api.github.com/users/screwyprof/followers","following_url":"https://api.github.com/users/screwyprof/following{/other_user}","gists_url":"https://api.github.com/users/screwyprof/gists{/gist_id}","starred_url":"https://api.github.com/users/screwyprof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/screwyprof/subscriptions","organizations_url":"https://api.github.com/users/screwyprof/orgs","repos_url":"https://api.github.com/users/screwyprof/repos","events_url":"https://api.github.com/users/screwyprof/events{/privacy}","received_events_url":"https://api.github.com/users/screwyprof/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T14:24:32Z","updated_at":"2022-03-17T14:26:26Z","body":"I'm on mac Big Sur. Don't know the previous limit as I temporary fixed it by setting the ` ulimit -n 10240`.  \r\n\r\nI've tried to use find + xargs, but it doesn't help:\r\n```\r\n❯ find . -path ./vendor -prune -o -name \\*.go -print0 | xargs -0 gofumpt -w -l\r\n```\r\n\r\n```\r\n ulimit -S -n\r\n256\r\n```\r\n\r\n```\r\n❯ ulimit -H -n\r\nunlimited\r\n```\r\n\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070964981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"screwyprof","id":1536274,"node_id":"MDQ6VXNlcjE1MzYyNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1536274?v=4","gravatar_id":"","url":"https://api.github.com/users/screwyprof","html_url":"https://github.com/screwyprof","followers_url":"https://api.github.com/users/screwyprof/followers","following_url":"https://api.github.com/users/screwyprof/following{/other_user}","gists_url":"https://api.github.com/users/screwyprof/gists{/gist_id}","starred_url":"https://api.github.com/users/screwyprof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/screwyprof/subscriptions","organizations_url":"https://api.github.com/users/screwyprof/orgs","repos_url":"https://api.github.com/users/screwyprof/repos","events_url":"https://api.github.com/users/screwyprof/events{/privacy}","received_events_url":"https://api.github.com/users/screwyprof/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070966881","html_url":"https://github.com/mvdan/gofumpt/issues/208#issuecomment-1070966881","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/208","id":1070966881,"node_id":"IC_kwDOCqWoQc4_1ahh","user":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T14:28:46Z","updated_at":"2022-03-17T14:32:57Z","body":"What if instead you use a directory, like `gofumpt -l -w .`? It could be that the problem is supplying all the files at once rather than letting gofumpt walk the directories to find Go files itself.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070966881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070967079","html_url":"https://github.com/mvdan/gofumpt/issues/208#issuecomment-1070967079","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/208","id":1070967079,"node_id":"IC_kwDOCqWoQc4_1akn","user":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T14:29:11Z","updated_at":"2022-03-17T14:29:11Z","body":"Also, can you reproduce if you use `gofmt` from Go 1.18 instead of `gofumpt`?","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070967079/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070969202","html_url":"https://github.com/mvdan/gofumpt/issues/208#issuecomment-1070969202","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/208","id":1070969202,"node_id":"IC_kwDOCqWoQc4_1bFy","user":{"login":"screwyprof","id":1536274,"node_id":"MDQ6VXNlcjE1MzYyNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1536274?v=4","gravatar_id":"","url":"https://api.github.com/users/screwyprof","html_url":"https://github.com/screwyprof","followers_url":"https://api.github.com/users/screwyprof/followers","following_url":"https://api.github.com/users/screwyprof/following{/other_user}","gists_url":"https://api.github.com/users/screwyprof/gists{/gist_id}","starred_url":"https://api.github.com/users/screwyprof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/screwyprof/subscriptions","organizations_url":"https://api.github.com/users/screwyprof/orgs","repos_url":"https://api.github.com/users/screwyprof/repos","events_url":"https://api.github.com/users/screwyprof/events{/privacy}","received_events_url":"https://api.github.com/users/screwyprof/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T14:34:14Z","updated_at":"2022-03-17T14:35:23Z","body":"`gofmt` doesn't have this issue. I'm using 'go 1.17'.\r\n\r\n```\r\n❯ gofumpt -l -w .\r\nopen handler/uuid.go: too many open files\r\nopen <file-name>: too many open files\r\n...\r\nfcntl <file-name>: too many open files\r\n```\r\n\r\n```\r\n❯ sysctl -a | grep maxfiles\r\nkern.maxfiles: 122880\r\nkern.maxfilesperproc: 6144\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070969202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"screwyprof","id":1536274,"node_id":"MDQ6VXNlcjE1MzYyNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1536274?v=4","gravatar_id":"","url":"https://api.github.com/users/screwyprof","html_url":"https://github.com/screwyprof","followers_url":"https://api.github.com/users/screwyprof/followers","following_url":"https://api.github.com/users/screwyprof/following{/other_user}","gists_url":"https://api.github.com/users/screwyprof/gists{/gist_id}","starred_url":"https://api.github.com/users/screwyprof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/screwyprof/subscriptions","organizations_url":"https://api.github.com/users/screwyprof/orgs","repos_url":"https://api.github.com/users/screwyprof/repos","events_url":"https://api.github.com/users/screwyprof/events{/privacy}","received_events_url":"https://api.github.com/users/screwyprof/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070971383","html_url":"https://github.com/mvdan/gofumpt/issues/208#issuecomment-1070971383","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/208","id":1070971383,"node_id":"IC_kwDOCqWoQc4_1bn3","user":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T14:45:02Z","updated_at":"2022-03-17T14:45:02Z","body":"Please upgrade to Go 1.18 and compare gofumpt to gofmt from that version, as they should be opening the same amount of files with the same amount of parallelism. gofumpt is a modified version of gofmt from Go 1.18, and 1.18 is the version that made gofmt parallel. So if gofumpt is opening too many files, gofmt from 1.18 should be doing the same, and we should further investigate the issue with upstream.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070971383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070971772","html_url":"https://github.com/mvdan/gofumpt/issues/208#issuecomment-1070971772","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/208","id":1070971772,"node_id":"IC_kwDOCqWoQc4_1bt8","user":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T14:45:53Z","updated_at":"2022-03-17T14:45:53Z","body":"I should also note I tried to reproduce with `ulimit -n 256; gofumpt **/*.go` in `$(go env GOROOT)/src` and I couldn't get a failure.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070971772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070975122","html_url":"https://github.com/mvdan/gofumpt/issues/208#issuecomment-1070975122","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/208","id":1070975122,"node_id":"IC_kwDOCqWoQc4_1ciS","user":{"login":"screwyprof","id":1536274,"node_id":"MDQ6VXNlcjE1MzYyNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1536274?v=4","gravatar_id":"","url":"https://api.github.com/users/screwyprof","html_url":"https://github.com/screwyprof","followers_url":"https://api.github.com/users/screwyprof/followers","following_url":"https://api.github.com/users/screwyprof/following{/other_user}","gists_url":"https://api.github.com/users/screwyprof/gists{/gist_id}","starred_url":"https://api.github.com/users/screwyprof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/screwyprof/subscriptions","organizations_url":"https://api.github.com/users/screwyprof/orgs","repos_url":"https://api.github.com/users/screwyprof/repos","events_url":"https://api.github.com/users/screwyprof/events{/privacy}","received_events_url":"https://api.github.com/users/screwyprof/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T14:54:20Z","updated_at":"2022-03-17T17:21:48Z","body":"I cannot simply update to `go1.18` in my environment  it maybe break some stuff related to deps management as they've deprecated some features. Not to mention that some colleagues of mine already complained about new version screwing up some old packages for some reason. Do you by any chance have a ready-to use `Dockerfile`?\r\n\r\nI am not sure, but you may not have that much files in your root path which breaks it. But really it could be anything else. I've also noticed that macOS doesn't simply allow to set the ulimit to a higher value. The last [comment on superuser.com](https://superuser.com/questions/1634286/how-do-i-increase-the-max-open-files-in-macos-big-sur) suggest turning on a performance mode. \r\n\r\n**Update**: `mvdan.cc/gofumpt@v0.2.1` works great for me atm.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1070975122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"screwyprof","id":1536274,"node_id":"MDQ6VXNlcjE1MzYyNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1536274?v=4","gravatar_id":"","url":"https://api.github.com/users/screwyprof","html_url":"https://github.com/screwyprof","followers_url":"https://api.github.com/users/screwyprof/followers","following_url":"https://api.github.com/users/screwyprof/following{/other_user}","gists_url":"https://api.github.com/users/screwyprof/gists{/gist_id}","starred_url":"https://api.github.com/users/screwyprof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/screwyprof/subscriptions","organizations_url":"https://api.github.com/users/screwyprof/orgs","repos_url":"https://api.github.com/users/screwyprof/repos","events_url":"https://api.github.com/users/screwyprof/events{/privacy}","received_events_url":"https://api.github.com/users/screwyprof/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1071103733","html_url":"https://github.com/mvdan/gofumpt/issues/208#issuecomment-1071103733","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/208","id":1071103733,"node_id":"IC_kwDOCqWoQc4_1771","user":{"login":"screwyprof","id":1536274,"node_id":"MDQ6VXNlcjE1MzYyNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1536274?v=4","gravatar_id":"","url":"https://api.github.com/users/screwyprof","html_url":"https://github.com/screwyprof","followers_url":"https://api.github.com/users/screwyprof/followers","following_url":"https://api.github.com/users/screwyprof/following{/other_user}","gists_url":"https://api.github.com/users/screwyprof/gists{/gist_id}","starred_url":"https://api.github.com/users/screwyprof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/screwyprof/subscriptions","organizations_url":"https://api.github.com/users/screwyprof/orgs","repos_url":"https://api.github.com/users/screwyprof/repos","events_url":"https://api.github.com/users/screwyprof/events{/privacy}","received_events_url":"https://api.github.com/users/screwyprof/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T17:10:59Z","updated_at":"2022-03-17T17:15:26Z","body":"I've created a simple Dockerfile to test it with go1.18\r\n\r\n```\r\n❯ cat Dockerfile\r\nFROM golang:1.18 AS build\r\nRUN go install mvdan.cc/gofumpt@latest\r\n\r\nFROM scratch\r\nWORKDIR /root/\r\nCOPY --from=build /go/bin/gofumpt /gofumpt\r\n\r\n# Set runner as a non existent user\r\nUSER 65534:65534\r\nENTRYPOINT [ \"/gofumpt\" ]\r\nCMD [\"--help\"]\r\n```\r\n\r\nThen built the image:\r\n```\r\ndocker build -t gofumpt .\r\n```\r\n\r\nRunning it like in the example bellow works:\r\n```\r\ndocker run -it --rm -v $(pwd):/root gofumpt -w -l .\r\n```\r\n\r\nThanks for the trouble!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1071103733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"screwyprof","id":1536274,"node_id":"MDQ6VXNlcjE1MzYyNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1536274?v=4","gravatar_id":"","url":"https://api.github.com/users/screwyprof","html_url":"https://github.com/screwyprof","followers_url":"https://api.github.com/users/screwyprof/followers","following_url":"https://api.github.com/users/screwyprof/following{/other_user}","gists_url":"https://api.github.com/users/screwyprof/gists{/gist_id}","starred_url":"https://api.github.com/users/screwyprof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/screwyprof/subscriptions","organizations_url":"https://api.github.com/users/screwyprof/orgs","repos_url":"https://api.github.com/users/screwyprof/repos","events_url":"https://api.github.com/users/screwyprof/events{/privacy}","received_events_url":"https://api.github.com/users/screwyprof/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1072305970","html_url":"https://github.com/mvdan/gofumpt/issues/208#issuecomment-1072305970","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/208","id":1072305970,"node_id":"IC_kwDOCqWoQc4_6hcy","user":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T11:07:32Z","updated_at":"2022-03-18T11:07:32Z","body":"I was finally able to reproduce by formatting 10k tiny Go files. The problem does not appear to be there with gofmt, so this is definitely something we're doing wrong.\r\n\r\nThanks for bearing with me, as this one was a bit tricky to repro.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/1072305970/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6267569548,"node_id":"REFE_lADOCqWoQc5F4ZQyzwAAAAF1k4WM","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/6267569548","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"87e887140159b70c8425f48c3320858f03ddcd5c","commit_url":"https://api.github.com/repos/mvdan/gofumpt/commits/87e887140159b70c8425f48c3320858f03ddcd5c","created_at":"2022-03-18T16:59:25Z","performed_via_github_app":null},{"actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T16:59:26Z","updated_at":"2022-03-18T16:59:26Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/211","repository_url":"https://api.github.com/repos/mvdan/gofumpt","labels_url":"https://api.github.com/repos/mvdan/gofumpt/issues/211/labels{/name}","comments_url":"https://api.github.com/repos/mvdan/gofumpt/issues/211/comments","events_url":"https://api.github.com/repos/mvdan/gofumpt/issues/211/events","html_url":"https://github.com/mvdan/gofumpt/pull/211","id":1173812557,"node_id":"PR_kwDOCqWoQc40qyNQ","number":211,"title":"overhaul how we load module info to format Go files","user":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-03-18T16:59:26Z","updated_at":"2022-03-21T10:37:03Z","closed_at":"2022-03-18T21:16:50Z","author_association":"OWNER","active_lock_reason":null,"draft":false,"repository":{"id":178628673,"node_id":"MDEwOlJlcG9zaXRvcnkxNzg2Mjg2NzM=","name":"gofumpt","full_name":"mvdan/gofumpt","private":false,"owner":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mvdan/gofumpt","description":"A stricter gofmt","fork":false,"url":"https://api.github.com/repos/mvdan/gofumpt","forks_url":"https://api.github.com/repos/mvdan/gofumpt/forks","keys_url":"https://api.github.com/repos/mvdan/gofumpt/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mvdan/gofumpt/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mvdan/gofumpt/teams","hooks_url":"https://api.github.com/repos/mvdan/gofumpt/hooks","issue_events_url":"https://api.github.com/repos/mvdan/gofumpt/issues/events{/number}","events_url":"https://api.github.com/repos/mvdan/gofumpt/events","assignees_url":"https://api.github.com/repos/mvdan/gofumpt/assignees{/user}","branches_url":"https://api.github.com/repos/mvdan/gofumpt/branches{/branch}","tags_url":"https://api.github.com/repos/mvdan/gofumpt/tags","blobs_url":"https://api.github.com/repos/mvdan/gofumpt/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mvdan/gofumpt/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mvdan/gofumpt/git/refs{/sha}","trees_url":"https://api.github.com/repos/mvdan/gofumpt/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mvdan/gofumpt/statuses/{sha}","languages_url":"https://api.github.com/repos/mvdan/gofumpt/languages","stargazers_url":"https://api.github.com/repos/mvdan/gofumpt/stargazers","contributors_url":"https://api.github.com/repos/mvdan/gofumpt/contributors","subscribers_url":"https://api.github.com/repos/mvdan/gofumpt/subscribers","subscription_url":"https://api.github.com/repos/mvdan/gofumpt/subscription","commits_url":"https://api.github.com/repos/mvdan/gofumpt/commits{/sha}","git_commits_url":"https://api.github.com/repos/mvdan/gofumpt/git/commits{/sha}","comments_url":"https://api.github.com/repos/mvdan/gofumpt/comments{/number}","issue_comment_url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments{/number}","contents_url":"https://api.github.com/repos/mvdan/gofumpt/contents/{+path}","compare_url":"https://api.github.com/repos/mvdan/gofumpt/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mvdan/gofumpt/merges","archive_url":"https://api.github.com/repos/mvdan/gofumpt/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mvdan/gofumpt/downloads","issues_url":"https://api.github.com/repos/mvdan/gofumpt/issues{/number}","pulls_url":"https://api.github.com/repos/mvdan/gofumpt/pulls{/number}","milestones_url":"https://api.github.com/repos/mvdan/gofumpt/milestones{/number}","notifications_url":"https://api.github.com/repos/mvdan/gofumpt/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mvdan/gofumpt/labels{/name}","releases_url":"https://api.github.com/repos/mvdan/gofumpt/releases{/id}","deployments_url":"https://api.github.com/repos/mvdan/gofumpt/deployments","created_at":"2019-03-31T01:17:51Z","updated_at":"2025-11-10T08:38:29Z","pushed_at":"2025-10-21T22:27:49Z","git_url":"git://github.com/mvdan/gofumpt.git","ssh_url":"git@github.com:mvdan/gofumpt.git","clone_url":"https://github.com/mvdan/gofumpt.git","svn_url":"https://github.com/mvdan/gofumpt","homepage":"https://pkg.go.dev/mvdan.cc/gofumpt","size":580,"stargazers_count":3776,"watchers_count":3776,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":121,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":28,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["format","go","gofmt","goimports","idiomatic","style"],"visibility":"public","forks":121,"open_issues":28,"watchers":3776,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/mvdan/gofumpt/pulls/211","html_url":"https://github.com/mvdan/gofumpt/pull/211","diff_url":"https://github.com/mvdan/gofumpt/pull/211.diff","patch_url":"https://github.com/mvdan/gofumpt/pull/211.patch","merged_at":"2022-03-18T21:16:49Z"},"body":"(see commit message)\n\nFixes #208.","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mvdan/gofumpt/issues/211/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":6268519746,"node_id":"REFE_lADOCqWoQc5F4ZQyzwAAAAF1ogVC","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/6268519746","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9d4d28a112ac510554c7c0ddc37fe22e08656f56","commit_url":"https://api.github.com/repos/mvdan/gofumpt/commits/9d4d28a112ac510554c7c0ddc37fe22e08656f56","created_at":"2022-03-18T20:15:47Z","performed_via_github_app":null},{"id":6268651108,"node_id":"REFE_lADOCqWoQc5F4ZQyzwAAAAF1pAZk","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/6268651108","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"62e7ea075558b105c424aa06a7acf483cbaa2728","commit_url":"https://api.github.com/repos/mvdan/gofumpt/commits/62e7ea075558b105c424aa06a7acf483cbaa2728","created_at":"2022-03-18T20:47:59Z","performed_via_github_app":null},{"id":6268764669,"node_id":"CE_lADOCqWoQc5F4ZQyzwAAAAF1pcH9","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/6268764669","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-03-18T21:16:50Z","state_reason":null,"performed_via_github_app":null},{"id":6268764718,"node_id":"REFE_lADOCqWoQc5F4ZQyzwAAAAF1pcIu","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/6268764718","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1dfe9cab509c58b38fdbc3d905c6c19a41b240f9","commit_url":"https://api.github.com/repos/mvdan/gofumpt/commits/1dfe9cab509c58b38fdbc3d905c6c19a41b240f9","created_at":"2022-03-18T21:16:50Z","performed_via_github_app":null}]