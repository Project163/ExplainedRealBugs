[{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/921288002","html_url":"https://github.com/mvdan/gofumpt/issues/149#issuecomment-921288002","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/149","id":921288002,"node_id":"IC_kwDOCqWoQc426b1C","user":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-16T22:08:08Z","updated_at":"2021-09-16T22:08:08Z","body":"Thanks for filing this! I've been closely following @findleyr's work on https://github.com/golang/go/issues/47781. It landed recently, and just got accepted. So I'll get on updating gofumpt as soon as I can, as I think the APIs are pretty final at this point.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/921288002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5315336196,"node_id":"MEE_lADOCqWoQc47hlX6zwAAAAE80ZgE","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/5315336196","actor":{"login":"findleyr","id":57144380,"node_id":"MDQ6VXNlcjU3MTQ0Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/57144380?v=4","gravatar_id":"","url":"https://api.github.com/users/findleyr","html_url":"https://github.com/findleyr","followers_url":"https://api.github.com/users/findleyr/followers","following_url":"https://api.github.com/users/findleyr/following{/other_user}","gists_url":"https://api.github.com/users/findleyr/gists{/gist_id}","starred_url":"https://api.github.com/users/findleyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findleyr/subscriptions","organizations_url":"https://api.github.com/users/findleyr/orgs","repos_url":"https://api.github.com/users/findleyr/repos","events_url":"https://api.github.com/users/findleyr/events{/privacy}","received_events_url":"https://api.github.com/users/findleyr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-09-16T22:08:08Z","performed_via_github_app":null},{"id":5315336201,"node_id":"SE_lADOCqWoQc47hlX6zwAAAAE80ZgJ","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/5315336201","actor":{"login":"findleyr","id":57144380,"node_id":"MDQ6VXNlcjU3MTQ0Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/57144380?v=4","gravatar_id":"","url":"https://api.github.com/users/findleyr","html_url":"https://github.com/findleyr","followers_url":"https://api.github.com/users/findleyr/followers","following_url":"https://api.github.com/users/findleyr/following{/other_user}","gists_url":"https://api.github.com/users/findleyr/gists{/gist_id}","starred_url":"https://api.github.com/users/findleyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findleyr/subscriptions","organizations_url":"https://api.github.com/users/findleyr/orgs","repos_url":"https://api.github.com/users/findleyr/repos","events_url":"https://api.github.com/users/findleyr/events{/privacy}","received_events_url":"https://api.github.com/users/findleyr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-09-16T22:08:08Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/924536147","html_url":"https://github.com/mvdan/gofumpt/issues/149#issuecomment-924536147","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/149","id":924536147,"node_id":"IC_kwDOCqWoQc43G01T","user":{"login":"findleyr","id":57144380,"node_id":"MDQ6VXNlcjU3MTQ0Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/57144380?v=4","gravatar_id":"","url":"https://api.github.com/users/findleyr","html_url":"https://github.com/findleyr","followers_url":"https://api.github.com/users/findleyr/followers","following_url":"https://api.github.com/users/findleyr/following{/other_user}","gists_url":"https://api.github.com/users/findleyr/gists{/gist_id}","starred_url":"https://api.github.com/users/findleyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findleyr/subscriptions","organizations_url":"https://api.github.com/users/findleyr/orgs","repos_url":"https://api.github.com/users/findleyr/repos","events_url":"https://api.github.com/users/findleyr/events{/privacy}","received_events_url":"https://api.github.com/users/findleyr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-22T02:44:36Z","updated_at":"2021-09-22T02:44:36Z","body":"Thanks @mvdan and @leitzler.\r\n\r\nThis is definitely an x/tools issue. I believe it is a trivial fix, and will look tomorrow. I'll open an issue in the Go repo if it's anything but trivial.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/924536147/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"findleyr","id":57144380,"node_id":"MDQ6VXNlcjU3MTQ0Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/57144380?v=4","gravatar_id":"","url":"https://api.github.com/users/findleyr","html_url":"https://github.com/findleyr","followers_url":"https://api.github.com/users/findleyr/followers","following_url":"https://api.github.com/users/findleyr/following{/other_user}","gists_url":"https://api.github.com/users/findleyr/gists{/gist_id}","starred_url":"https://api.github.com/users/findleyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findleyr/subscriptions","organizations_url":"https://api.github.com/users/findleyr/orgs","repos_url":"https://api.github.com/users/findleyr/repos","events_url":"https://api.github.com/users/findleyr/events{/privacy}","received_events_url":"https://api.github.com/users/findleyr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5340033016,"node_id":"MEE_lADOCqWoQc47hlX6zwAAAAE-Sm_4","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/5340033016","actor":{"login":"leitzler","id":3111805,"node_id":"MDQ6VXNlcjMxMTE4MDU=","avatar_url":"https://avatars.githubusercontent.com/u/3111805?v=4","gravatar_id":"","url":"https://api.github.com/users/leitzler","html_url":"https://github.com/leitzler","followers_url":"https://api.github.com/users/leitzler/followers","following_url":"https://api.github.com/users/leitzler/following{/other_user}","gists_url":"https://api.github.com/users/leitzler/gists{/gist_id}","starred_url":"https://api.github.com/users/leitzler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leitzler/subscriptions","organizations_url":"https://api.github.com/users/leitzler/orgs","repos_url":"https://api.github.com/users/leitzler/repos","events_url":"https://api.github.com/users/leitzler/events{/privacy}","received_events_url":"https://api.github.com/users/leitzler/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-09-22T02:44:36Z","performed_via_github_app":null},{"id":5340033021,"node_id":"SE_lADOCqWoQc47hlX6zwAAAAE-Sm_9","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/5340033021","actor":{"login":"leitzler","id":3111805,"node_id":"MDQ6VXNlcjMxMTE4MDU=","avatar_url":"https://avatars.githubusercontent.com/u/3111805?v=4","gravatar_id":"","url":"https://api.github.com/users/leitzler","html_url":"https://github.com/leitzler","followers_url":"https://api.github.com/users/leitzler/followers","following_url":"https://api.github.com/users/leitzler/following{/other_user}","gists_url":"https://api.github.com/users/leitzler/gists{/gist_id}","starred_url":"https://api.github.com/users/leitzler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leitzler/subscriptions","organizations_url":"https://api.github.com/users/leitzler/orgs","repos_url":"https://api.github.com/users/leitzler/repos","events_url":"https://api.github.com/users/leitzler/events{/privacy}","received_events_url":"https://api.github.com/users/leitzler/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-09-22T02:44:36Z","performed_via_github_app":null},{"id":5340033025,"node_id":"MEE_lADOCqWoQc47hlX6zwAAAAE-SnAB","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/5340033025","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-09-22T02:44:36Z","performed_via_github_app":null},{"id":5340033029,"node_id":"SE_lADOCqWoQc47hlX6zwAAAAE-SnAF","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/5340033029","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-09-22T02:44:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/925455759","html_url":"https://github.com/mvdan/gofumpt/issues/149#issuecomment-925455759","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/149","id":925455759,"node_id":"IC_kwDOCqWoQc43KVWP","user":{"login":"findleyr","id":57144380,"node_id":"MDQ6VXNlcjU3MTQ0Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/57144380?v=4","gravatar_id":"","url":"https://api.github.com/users/findleyr","html_url":"https://github.com/findleyr","followers_url":"https://api.github.com/users/findleyr/followers","following_url":"https://api.github.com/users/findleyr/following{/other_user}","gists_url":"https://api.github.com/users/findleyr/gists{/gist_id}","starred_url":"https://api.github.com/users/findleyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findleyr/subscriptions","organizations_url":"https://api.github.com/users/findleyr/orgs","repos_url":"https://api.github.com/users/findleyr/repos","events_url":"https://api.github.com/users/findleyr/events{/privacy}","received_events_url":"https://api.github.com/users/findleyr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-23T02:06:08Z","updated_at":"2021-09-23T02:06:08Z","body":"Huh, there _is_ handling for this (and has been for a while):\r\nhttps://cs.opensource.google/go/x/tools/+/master:go/ast/astutil/rewrite_test.go;l=198;drc=322816044c6cd7638d0b0802326ccab576518342\r\n\r\nI'm also not reproducing with the repro given here. I think this panic could be possible if we're somehow getting a node of type *ast.IndexListExpr with nil pointer, but I'm not seeing anything in gofumpt that would cause this.\r\n\r\nWill need to look more later.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/925455759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"findleyr","id":57144380,"node_id":"MDQ6VXNlcjU3MTQ0Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/57144380?v=4","gravatar_id":"","url":"https://api.github.com/users/findleyr","html_url":"https://github.com/findleyr","followers_url":"https://api.github.com/users/findleyr/followers","following_url":"https://api.github.com/users/findleyr/following{/other_user}","gists_url":"https://api.github.com/users/findleyr/gists{/gist_id}","starred_url":"https://api.github.com/users/findleyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findleyr/subscriptions","organizations_url":"https://api.github.com/users/findleyr/orgs","repos_url":"https://api.github.com/users/findleyr/repos","events_url":"https://api.github.com/users/findleyr/events{/privacy}","received_events_url":"https://api.github.com/users/findleyr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/932771256","html_url":"https://github.com/mvdan/gofumpt/issues/149#issuecomment-932771256","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/149","id":932771256,"node_id":"IC_kwDOCqWoQc43mPW4","user":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-02T15:33:28Z","updated_at":"2021-10-02T15:33:28Z","body":"I could reproduce with x/tools v0.1.7 and `go version devel go1.18-7bf7bbc241 Sat Oct 2 13:15:42 2021 +0000 linux/amd64`, and the following test:\r\n\r\n```\r\ngofumpt -w foo.go\r\nexec cat foo.go\r\n\r\n-- go.mod --\r\nmodule test\r\n\r\ngo 1.18\r\n-- foo.go --\r\npackage main\r\n\r\nfunc Foo[A, B any](x A, y B) {}\r\n\r\nfunc main() {\r\n    Foo[int,int](1,2)\r\n}\r\n```\r\n\r\nAfter updating to the latest master as of today, I can no longer reproduce the crash. I think https://go-review.googlesource.com/c/tools/+/352898 might have been the fix. It's that default case in the type switch that we were panicking on, and the IndexListExpr type in question is now handled explicitly.\r\n\r\nIt's unclear to me why only gofumpt was running into a panic with the older code. I guess I'm not too worried on my end, as long as master works :) I'll lock it in via a test, too.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/932771256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5398383874,"node_id":"CE_lADOCqWoQc47hlX6zwAAAAFBxM0C","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/5398383874","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"a752c17ade3c23f8d70ab91a11cef0917908724d","commit_url":"https://api.github.com/repos/mvdan/gofumpt/commits/a752c17ade3c23f8d70ab91a11cef0917908724d","created_at":"2021-10-02T15:39:03Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/932772139","html_url":"https://github.com/mvdan/gofumpt/issues/149#issuecomment-932772139","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/149","id":932772139,"node_id":"IC_kwDOCqWoQc43mPkr","user":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-02T15:39:23Z","updated_at":"2021-10-02T15:39:23Z","body":"I've included the test and the fix in master now. Undoing the update reproduces the panic, too.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/932772139/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/933623883","html_url":"https://github.com/mvdan/gofumpt/issues/149#issuecomment-933623883","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/149","id":933623883,"node_id":"IC_kwDOCqWoQc43pfhL","user":{"login":"findleyr","id":57144380,"node_id":"MDQ6VXNlcjU3MTQ0Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/57144380?v=4","gravatar_id":"","url":"https://api.github.com/users/findleyr","html_url":"https://github.com/findleyr","followers_url":"https://api.github.com/users/findleyr/followers","following_url":"https://api.github.com/users/findleyr/following{/other_user}","gists_url":"https://api.github.com/users/findleyr/gists{/gist_id}","starred_url":"https://api.github.com/users/findleyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findleyr/subscriptions","organizations_url":"https://api.github.com/users/findleyr/orgs","repos_url":"https://api.github.com/users/findleyr/repos","events_url":"https://api.github.com/users/findleyr/events{/privacy}","received_events_url":"https://api.github.com/users/findleyr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T15:57:17Z","updated_at":"2021-10-04T15:57:17Z","body":"@mvdan this is expected to fail at x/tools@v0.1.7: that version temporarily guarded use of the new APIs behind a type parameter, so that we don't break the build with API changes.  We'll tag an x/tools using the APIs once the 1.18 APIs are stable (which might not be for some time, as there are a few late amendments to generics being proposed).\r\n\r\nI would actually have expected this to be fixed before https://go-review.googlesource.com/c/tools/+/352898, which was (mostly) an API cleanup (it differs in the case of a typed nil).\r\n\r\nAnyway, I currently consider the astutil package to be fully updated with generics support; please let me know if you encounter any further problems.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/933623883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"findleyr","id":57144380,"node_id":"MDQ6VXNlcjU3MTQ0Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/57144380?v=4","gravatar_id":"","url":"https://api.github.com/users/findleyr","html_url":"https://github.com/findleyr","followers_url":"https://api.github.com/users/findleyr/followers","following_url":"https://api.github.com/users/findleyr/following{/other_user}","gists_url":"https://api.github.com/users/findleyr/gists{/gist_id}","starred_url":"https://api.github.com/users/findleyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findleyr/subscriptions","organizations_url":"https://api.github.com/users/findleyr/orgs","repos_url":"https://api.github.com/users/findleyr/repos","events_url":"https://api.github.com/users/findleyr/events{/privacy}","received_events_url":"https://api.github.com/users/findleyr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5405044743,"node_id":"MEE_lADOCqWoQc47hlX6zwAAAAFCKnAH","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/5405044743","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-10-04T15:57:18Z","performed_via_github_app":null},{"id":5405044750,"node_id":"SE_lADOCqWoQc47hlX6zwAAAAFCKnAO","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/5405044750","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-10-04T15:57:18Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/933631975","html_url":"https://github.com/mvdan/gofumpt/issues/149#issuecomment-933631975","issue_url":"https://api.github.com/repos/mvdan/gofumpt/issues/149","id":933631975,"node_id":"IC_kwDOCqWoQc43phfn","user":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T16:06:24Z","updated_at":"2021-10-04T16:06:24Z","body":"Sounds good. I think my needs are met at this point, as gofumpt does not use go/types :)","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/mvdan/gofumpt/issues/comments/933631975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mvdan","id":3576549,"node_id":"MDQ6VXNlcjM1NzY1NDk=","avatar_url":"https://avatars.githubusercontent.com/u/3576549?v=4","gravatar_id":"","url":"https://api.github.com/users/mvdan","html_url":"https://github.com/mvdan","followers_url":"https://api.github.com/users/mvdan/followers","following_url":"https://api.github.com/users/mvdan/following{/other_user}","gists_url":"https://api.github.com/users/mvdan/gists{/gist_id}","starred_url":"https://api.github.com/users/mvdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvdan/subscriptions","organizations_url":"https://api.github.com/users/mvdan/orgs","repos_url":"https://api.github.com/users/mvdan/repos","events_url":"https://api.github.com/users/mvdan/events{/privacy}","received_events_url":"https://api.github.com/users/mvdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"UTsweetyfish","id":124018391,"node_id":"U_kgDOB2Re1w","avatar_url":"https://avatars.githubusercontent.com/u/124018391?v=4","gravatar_id":"","url":"https://api.github.com/users/UTsweetyfish","html_url":"https://github.com/UTsweetyfish","followers_url":"https://api.github.com/users/UTsweetyfish/followers","following_url":"https://api.github.com/users/UTsweetyfish/following{/other_user}","gists_url":"https://api.github.com/users/UTsweetyfish/gists{/gist_id}","starred_url":"https://api.github.com/users/UTsweetyfish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/UTsweetyfish/subscriptions","organizations_url":"https://api.github.com/users/UTsweetyfish/orgs","repos_url":"https://api.github.com/users/UTsweetyfish/repos","events_url":"https://api.github.com/users/UTsweetyfish/events{/privacy}","received_events_url":"https://api.github.com/users/UTsweetyfish/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-30T07:31:33Z","updated_at":"2023-03-30T07:31:33Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/issues/1","repository_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt","labels_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/issues/1/labels{/name}","comments_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/issues/1/comments","events_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/issues/1/events","html_url":"https://github.com/deepin-community/golang-mvdan-gofumpt/pull/1","id":1638914429,"node_id":"PR_kwDOIF28C85Mzu1c","number":1,"title":"Import debian version 0.4.0-1","user":{"login":"UTsweetyfish","id":124018391,"node_id":"U_kgDOB2Re1w","avatar_url":"https://avatars.githubusercontent.com/u/124018391?v=4","gravatar_id":"","url":"https://api.github.com/users/UTsweetyfish","html_url":"https://github.com/UTsweetyfish","followers_url":"https://api.github.com/users/UTsweetyfish/followers","following_url":"https://api.github.com/users/UTsweetyfish/following{/other_user}","gists_url":"https://api.github.com/users/UTsweetyfish/gists{/gist_id}","starred_url":"https://api.github.com/users/UTsweetyfish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/UTsweetyfish/subscriptions","organizations_url":"https://api.github.com/users/UTsweetyfish/orgs","repos_url":"https://api.github.com/users/UTsweetyfish/repos","events_url":"https://api.github.com/users/UTsweetyfish/events{/privacy}","received_events_url":"https://api.github.com/users/UTsweetyfish/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":5867809969,"node_id":"LA_kwDOIF28C88AAAABXb-ssQ","url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/labels/approved","name":"approved","color":"ededed","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-03-24T08:04:30Z","updated_at":"2023-08-21T06:32:12Z","closed_at":"2023-08-21T06:32:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":543013899,"node_id":"R_kgDOIF28Cw","name":"golang-mvdan-gofumpt","full_name":"deepin-community/golang-mvdan-gofumpt","private":false,"owner":{"login":"deepin-community","id":102278842,"node_id":"O_kgDOBhimug","avatar_url":"https://avatars.githubusercontent.com/u/102278842?v=4","gravatar_id":"","url":"https://api.github.com/users/deepin-community","html_url":"https://github.com/deepin-community","followers_url":"https://api.github.com/users/deepin-community/followers","following_url":"https://api.github.com/users/deepin-community/following{/other_user}","gists_url":"https://api.github.com/users/deepin-community/gists{/gist_id}","starred_url":"https://api.github.com/users/deepin-community/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepin-community/subscriptions","organizations_url":"https://api.github.com/users/deepin-community/orgs","repos_url":"https://api.github.com/users/deepin-community/repos","events_url":"https://api.github.com/users/deepin-community/events{/privacy}","received_events_url":"https://api.github.com/users/deepin-community/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/deepin-community/golang-mvdan-gofumpt","description":null,"fork":false,"url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt","forks_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/forks","keys_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/keys{/key_id}","collaborators_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/teams","hooks_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/hooks","issue_events_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/issues/events{/number}","events_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/events","assignees_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/assignees{/user}","branches_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/branches{/branch}","tags_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/tags","blobs_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/git/refs{/sha}","trees_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/git/trees{/sha}","statuses_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/statuses/{sha}","languages_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/languages","stargazers_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/stargazers","contributors_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/contributors","subscribers_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/subscribers","subscription_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/subscription","commits_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/commits{/sha}","git_commits_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/git/commits{/sha}","comments_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/comments{/number}","issue_comment_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/issues/comments{/number}","contents_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/contents/{+path}","compare_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/compare/{base}...{head}","merges_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/merges","archive_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/downloads","issues_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/issues{/number}","pulls_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/pulls{/number}","milestones_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/milestones{/number}","notifications_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/labels{/name}","releases_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/releases{/id}","deployments_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/deployments","created_at":"2022-09-29T08:47:22Z","updated_at":"2022-09-29T08:47:32Z","pushed_at":"2023-08-21T06:32:39Z","git_url":"git://github.com/deepin-community/golang-mvdan-gofumpt.git","ssh_url":"git@github.com:deepin-community/golang-mvdan-gofumpt.git","clone_url":"https://github.com/deepin-community/golang-mvdan-gofumpt.git","svn_url":"https://github.com/deepin-community/golang-mvdan-gofumpt","homepage":null,"size":86,"stargazers_count":0,"watchers_count":0,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":1,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1,"open_issues":0,"watchers":0,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/pulls/1","html_url":"https://github.com/deepin-community/golang-mvdan-gofumpt/pull/1","diff_url":"https://github.com/deepin-community/golang-mvdan-gofumpt/pull/1.diff","patch_url":"https://github.com/deepin-community/golang-mvdan-gofumpt/pull/1.patch","merged_at":"2023-08-21T06:32:12Z"},"body":"```\r\nsrc/mvdan.cc/gofumpt/internal/version/version.go:65:29: error: reference to undefined identifier ‘debug.BuildSetting’\r\n   65 |                 var extra []debug.BuildSetting\r\n      |                             ^\r\nsrc/mvdan.cc/gofumpt/internal/version/version.go:87:31: error: reference to undefined identifier ‘module.PseudoVersion’\r\n   87 |                 return module.PseudoVersion(\"\", \"\", vcsTime, vcsRevision)\r\n      |                               ^\r\nsrc/mvdan.cc/gofumpt/internal/version/version.go:69:21: error: reference to undefined field or method ‘Settings’\r\n   69 |                 info.Settings = append(info.Settings, extra...)\r\n      |                     ^\r\nsrc/mvdan.cc/gofumpt/internal/version/version.go:69:44: error: reference to undefined field or method ‘Settings’\r\n   69 |                 info.Settings = append(info.Settings, extra...)\r\n      |                                            ^\r\nsrc/mvdan.cc/gofumpt/internal/version/version.go:74:37: error: reference to undefined field or method ‘Settings’\r\n   74 |         for _, setting := range info.Settings {\r\n      |                                     ^\r\nsrc/mvdan.cc/gofumpt/internal/version/version.go:74:37: error: reference to undefined field or method ‘Settings’\r\nsrc/mvdan.cc/gofumpt/internal/version/version.go:74:9: error: range clause must have array, slice, string, map, or channel type\r\n   74 |         for _, setting := range info.Settings {\r\n      |         ^\r\nsrc/mvdan.cc/gofumpt/internal/version/version.go:74:13: error: invalid type for range clause\r\n   74 |         for _, setting := range info.Settings {\r\n      |             ^\r\ndh_auto_build: error: cd _build && go install -trimpath -v -p 8 mvdan.cc/gofumpt/format mvdan.cc/gofumpt/internal/version returned exit code 2\r\n\r\n```\r\n\r\n大概是 golang 版本的问题，rebuild 一下看看。","reactions":{"url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/issues/1/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/deepin-community/golang-mvdan-gofumpt/issues/1/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":11661904392,"node_id":"REFE_lADOCqWoQc47hlX6zwAAAAK3GooI","url":"https://api.github.com/repos/mvdan/gofumpt/issues/events/11661904392","actor":{"login":"gavinelder","id":1226100,"node_id":"MDQ6VXNlcjEyMjYxMDA=","avatar_url":"https://avatars.githubusercontent.com/u/1226100?v=4","gravatar_id":"","url":"https://api.github.com/users/gavinelder","html_url":"https://github.com/gavinelder","followers_url":"https://api.github.com/users/gavinelder/followers","following_url":"https://api.github.com/users/gavinelder/following{/other_user}","gists_url":"https://api.github.com/users/gavinelder/gists{/gist_id}","starred_url":"https://api.github.com/users/gavinelder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gavinelder/subscriptions","organizations_url":"https://api.github.com/users/gavinelder/orgs","repos_url":"https://api.github.com/users/gavinelder/repos","events_url":"https://api.github.com/users/gavinelder/events{/privacy}","received_events_url":"https://api.github.com/users/gavinelder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a752c17ade3c23f8d70ab91a11cef0917908724d","commit_url":"https://api.github.com/repos/gavinelder/gofumpt/commits/a752c17ade3c23f8d70ab91a11cef0917908724d","created_at":"2024-01-31T22:12:03Z","performed_via_github_app":null}]