diff --git a/README.md b/README.md
index f258bc5..a826481 100644
--- a/README.md
+++ b/README.md
@@ -44,6 +44,17 @@ var good = []int{
 }
 ```
 
+Multiline top-level declarations must be separated by empty lines:
+
+```
+func foo() {
+	println("multiline foo")
+}
+func bar() {
+	println("multiline bar")
+}
+```
+
 ### License
 
 Note that much of the code is copied from Go's `cmd/gofmt` command. You can tell
diff --git a/gofumpt.go b/gofumpt.go
index 7faa048..e0c2b92 100644
--- a/gofumpt.go
+++ b/gofumpt.go
@@ -90,6 +90,25 @@ func (f *fumpter) removeLines(from, to token.Pos) {
 
 func (f *fumpter) visit(node ast.Node) {
 	switch node := node.(type) {
+	case *ast.File:
+		var lastMulti bool
+		var lastEnd token.Pos
+		for _, decl := range node.Decls {
+			pos := decl.Pos()
+			comments := f.commentsBetween(lastEnd, pos)
+			if len(comments) > 0 {
+				pos = comments[0].Pos()
+			}
+
+			multi := f.posLine(decl.Pos()) < f.posLine(decl.End())
+			if (multi && lastMulti) &&
+				f.posLine(lastEnd)+1 == f.posLine(pos) {
+				f.addNewline(lastEnd, 0)
+			}
+
+			lastMulti = multi
+			lastEnd = decl.End()
+		}
 	case *ast.BlockStmt:
 		comments := f.commentsBetween(node.Lbrace, node.Rbrace)
 		if len(node.List) == 0 && len(comments) == 0 {
diff --git a/testdata/scripts/decls-separated.txt b/testdata/scripts/decls-separated.txt
new file mode 100644
index 0000000..926023c
--- /dev/null
+++ b/testdata/scripts/decls-separated.txt
@@ -0,0 +1,67 @@
+gofumpt -w foo.go .
+cmp foo.go foo.go.golden
+
+-- foo.go --
+package p
+
+func f1() { println("single line") }
+func f2() { println("single line") }
+
+func f3() {
+	println("multiline")
+}
+func f4() {
+	println("multiline")
+}
+
+// l1 is a var.
+var l1 = []int{
+	1, 2,
+}
+// l2 is a var.
+var l2 = []int{
+	3, 4,
+}
+
+var (
+	s3 = `
+		ok if grouped together
+	`
+	s4 = `
+		ok if grouped together
+	`
+)
+var _ = "ok if either isn't multiline"
+-- foo.go.golden --
+package p
+
+func f1() { println("single line") }
+func f2() { println("single line") }
+
+func f3() {
+	println("multiline")
+}
+
+func f4() {
+	println("multiline")
+}
+
+// l1 is a var.
+var l1 = []int{
+	1, 2,
+}
+
+// l2 is a var.
+var l2 = []int{
+	3, 4,
+}
+
+var (
+	s3 = `
+		ok if grouped together
+	`
+	s4 = `
+		ok if grouped together
+	`
+)
+var _ = "ok if either isn't multiline"
