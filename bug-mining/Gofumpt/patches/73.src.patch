diff --git a/format/format.go b/format/format.go
index c527227..3132268 100644
--- a/format/format.go
+++ b/format/format.go
@@ -23,7 +23,7 @@ import (
 	"unicode"
 	"unicode/utf8"
 
-	// "github.com/google/go-cmp/cmp"
+	"github.com/google/go-cmp/cmp"
 	"golang.org/x/tools/go/ast/astutil"
 
 	"mvdan.cc/gofumpt/internal/govendor/go/format"
@@ -1036,16 +1036,22 @@ func (f *fumpter) shouldMergeAdjacentFields(f1, f2 *ast.Field) bool {
 		return false
 	}
 
-	// Only merge if the types are equal.
-	// opt := cmp.Comparer(func(x, y token.Pos) bool { return true })
-	return true
+	// Only merge if the types that the syntax nodes represent are equal,
+	// e.g. two *ast.Ident nodes "int" are equal, but the two *ast.Ident nodes
+	// "string" and "bool" are not. Hence we use go-cmp to do deep comparisons
+	// while ignoring position information, as it is irrelevant.
+	//
+	// Note that we could in theory use go/types here, but in practice gofumpt
+	// needs to be fast, hence it shouldn't rely on expensive typechecking.
+	opt := cmp.Comparer(func(x, y token.Pos) bool { return true })
+	return cmp.Equal(f1.Type, f2.Type, opt)
 }
 
 var posType = reflect.TypeOf(token.NoPos)
 
 // setPos recursively sets all position fields in the node v to pos.
 func setPos(v reflect.Value, pos token.Pos) {
-	if v.Kind() == reflect.Ptr {
+	if v.Kind() == reflect.Pointer {
 		v = v.Elem()
 	}
 	if !v.IsValid() {
diff --git a/go.mod b/go.mod
index db67bc0..81b6030 100644
--- a/go.mod
+++ b/go.mod
@@ -4,6 +4,7 @@ go 1.23.0
 
 require (
 	github.com/go-quicktest/qt v1.101.0
+	github.com/google/go-cmp v0.6.0
 	github.com/rogpeppe/go-internal v1.14.1
 	golang.org/x/mod v0.24.0
 	golang.org/x/sync v0.13.0
@@ -12,7 +13,6 @@ require (
 )
 
 require (
-	github.com/google/go-cmp v0.6.0 // indirect
 	github.com/kr/pretty v0.3.1 // indirect
 	github.com/kr/text v0.2.0 // indirect
 )
diff --git a/testdata/script/func-merge-parameters.txtar b/testdata/script/func-merge-parameters.txtar
index f4c00a5..35f8a7e 100644
--- a/testdata/script/func-merge-parameters.txtar
+++ b/testdata/script/func-merge-parameters.txtar
@@ -51,6 +51,10 @@ func dontMergeMultipleLines2(
 	z int,
 ) {
 }
+
+func dontMergeDifferentKinds(format string, args ...string) {}
+
+func dontMergeDifferentTypesReturn() (n int, err error) {}
 -- foo.go.golden --
 package p
 
@@ -93,3 +97,7 @@ func dontMergeMultipleLines2(
 	z int,
 ) {
 }
+
+func dontMergeDifferentKinds(format string, args ...string) {}
+
+func dontMergeDifferentTypesReturn() (n int, err error) {}
