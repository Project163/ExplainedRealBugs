diff --git a/README.md b/README.md
index 7fe3d7d..d04bebb 100644
--- a/README.md
+++ b/README.md
@@ -23,6 +23,9 @@ The [added formatting rules](#Added-rules) are implemented in the `format` packa
 Similarly, the added rules do not apply to generated Go files unless they are
 given as explicit arguments.
 
+[`ignore` directives](https://go.dev/ref/mod#go-mod-file-ignore) in `go.mod` files are obeyed as well,
+unless directories or files within them are given as explicit arguments.
+
 Finally, note that the `-r` rewrite flag is removed in favor of `gofmt -r`,
 and the `-s` flag is hidden as it is always enabled.
 
diff --git a/gofmt.go b/gofmt.go
index 40717e9..5c922ff 100644
--- a/gofmt.go
+++ b/gofmt.go
@@ -521,11 +521,8 @@ func gofmtMain(s *sequencer) {
 			case err != nil:
 				return err
 			case d.IsDir():
-				if !explicit {
-					switch filepath.Base(path) {
-					case "vendor", "testdata":
-						return filepath.SkipDir
-					}
+				if !explicit && shouldIgnore(path) {
+					return filepath.SkipDir
 				}
 				return nil // simply recurse into directories
 			case explicit:
@@ -547,6 +544,56 @@ func gofmtMain(s *sequencer) {
 	}
 }
 
+func shouldIgnore(path string) bool {
+	switch filepath.Base(path) {
+	case "vendor", "testdata":
+		return true
+	}
+	path, err := filepath.Abs(path)
+	if err != nil {
+		return false // unclear how this could happen; don't ignore in any case
+	}
+	mod := loadModule(path)
+	if mod == nil {
+		return false // no module file to declare ignore paths
+	}
+	relPath, err := filepath.Rel(mod.absDir, path)
+	if err != nil {
+		return false // unclear how this could happen; don't ignore in any case
+	}
+	relPath = normalizePath(relPath)
+	for _, ignore := range mod.file.Ignore {
+		if matchIgnore(ignore.Path, relPath) {
+			return true
+		}
+	}
+	return false
+}
+
+// normalizePath adds slashes to the front and end of the given path.
+func normalizePath(path string) string {
+	path = filepath.ToSlash(path) // ensure Windows support
+	if !strings.HasPrefix(path, "/") {
+		path = "/" + path
+	}
+	if !strings.HasSuffix(path, "/") {
+		path += "/"
+	}
+	return path
+}
+
+func matchIgnore(ignore, relPath string) bool {
+	ignore, rooted := strings.CutPrefix(ignore, "./")
+	ignore = normalizePath(ignore)
+	// Note that we only match the directory to be ignored itself,
+	// and not any directories underneath it.
+	// This way, using `gofumpt -w ignored` allows `ignored/subdir` to be formatted.
+	if rooted {
+		return relPath == ignore
+	}
+	return strings.HasSuffix(relPath, ignore)
+}
+
 // A nil entry means the directory is not part of a Go module,
 // or a go.mod file was found but it's invalid.
 // A non-nil entry means this directory, or a parent, is in a valid Go module.
diff --git a/testdata/script/ignore.txtar b/testdata/script/ignore.txtar
index 2ec804c..a459947 100644
--- a/testdata/script/ignore.txtar
+++ b/testdata/script/ignore.txtar
@@ -31,15 +31,10 @@ testdata${/}foo${/}foo.go
 module${/}ignore${/}dir${/}ignore.go
 -- implicit-dot.stdout --
 ignore${/}dir${/}outsidemodule.go
-module${/}ignore${/}dir${/}ignore.go
-module${/}ignore${/}dir${/}subdir${/}ignore.go
 module${/}ignore${/}dirsuffix${/}nomatch.go
 module${/}ignore${/}nomatch.go
-module${/}ignoreroot${/}dir${/}ignore.go
-module${/}ignoreroot${/}dir${/}subdir${/}ignore.go
 module${/}ignoreroot${/}nomatch.go
 module${/}prefixignore${/}dir${/}nomatch.go
-module${/}subdir${/}ignore${/}dir${/}ignore.go
 module${/}subdir${/}ignoreroot${/}dir${/}notatroot.go
 -- explicit-dirs-unclean.stdout --
 ${WORK}${/}vendor${/}bar${/}bar.go
