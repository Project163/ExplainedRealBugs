diff --git a/format/format.go b/format/format.go
index 012b602..9ab1db8 100644
--- a/format/format.go
+++ b/format/format.go
@@ -50,6 +50,11 @@ type Options struct {
 // source file.
 func Source(src []byte, opts Options) ([]byte, error) {
 	fset := token.NewFileSet()
+
+	// Ensure our parsed files never start with base 1,
+	// to ensure that using token.NoPos+1 will panic.
+	fset.AddFile("gofumpt_base.go", 1, 10)
+
 	file, err := parser.ParseFile(fset, "", src, parser.ParseComments)
 	if err != nil {
 		return nil, err
@@ -553,10 +558,14 @@ func (f *fumpter) applyPre(c *astutil.Cursor) {
 				// The body is preceded by a multi-line function
 				// signature, we move the `) {` to avoid the empty line.
 				switch {
-				case isThereAnEmptyLine && sign.Results != nil && !resultClosingIsFirstCharOnEndLine:
+				case isThereAnEmptyLine && sign.Results != nil &&
+					!resultClosingIsFirstCharOnEndLine &&
+					sign.Results.Closing.IsValid(): // there may be no ")"
 					sign.Results.Closing += 1
 					f.addNewline(sign.Results.Closing)
-				case isThereAnEmptyLine && sign.Params != nil && !paramClosingIsFirstCharOnEndLine:
+
+				case isThereAnEmptyLine && sign.Params != nil &&
+					!paramClosingIsFirstCharOnEndLine:
 					sign.Params.Closing += 1
 					f.addNewline(sign.Params.Closing)
 				}
diff --git a/gofmt.go b/gofmt.go
index eedb60a..58a63e6 100644
--- a/gofmt.go
+++ b/gofmt.go
@@ -197,6 +197,10 @@ func main() {
 }
 
 func gofumptMain() {
+	// Ensure our parsed files never start with base 1,
+	// to ensure that using token.NoPos+1 will panic.
+	fileSet.AddFile("gofumpt_base.go", 1, 10)
+
 	flag.Usage = usage
 	flag.Parse()
 
diff --git a/testdata/scripts/func-newlines.txt b/testdata/scripts/func-newlines.txt
index 1b15615..caa0ce1 100644
--- a/testdata/scripts/func-newlines.txt
+++ b/testdata/scripts/func-newlines.txt
@@ -249,6 +249,15 @@ func multilineParamsWithoutEmptyLineWithComment(p1 string,
 	// comment
 	println("body")
 }
+
+// Same as the others above, but with a single result parameter without
+// parentheses. This used to cause token.File.Offset crashes.
+func f(p1 string,
+	p2 string) int {
+
+	println("body")
+	return 0
+}
 -- foo.go.golden --
 package p
 
@@ -449,3 +458,12 @@ func multilineParamsWithoutEmptyLineWithComment(p1 string,
 	// comment
 	println("body")
 }
+
+// Same as the others above, but with a single result parameter without
+// parentheses. This used to cause token.File.Offset crashes.
+func f(p1 string,
+	p2 string,
+) int {
+	println("body")
+	return 0
+}
