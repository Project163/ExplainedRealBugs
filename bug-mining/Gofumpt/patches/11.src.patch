diff --git a/internal/gofumpt.go b/internal/gofumpt.go
index 3c89d72..18d5714 100644
--- a/internal/gofumpt.go
+++ b/internal/gofumpt.go
@@ -109,12 +109,17 @@ func (f *fumpter) addNewline(at token.Pos) {
 	n := field.Len()
 	lines := make([]int, 0, n+1)
 	for i := 0; i < n; i++ {
-		prev := int(field.Index(i).Int())
-		if offset >= 0 && offset < prev {
+		cur := int(field.Index(i).Int())
+		if offset == cur {
+			// This newline already exists; do nothing. Duplicate
+			// newlines can't exist.
+			return
+		}
+		if offset >= 0 && offset < cur {
 			lines = append(lines, offset)
 			offset = -1
 		}
-		lines = append(lines, prev)
+		lines = append(lines, cur)
 	}
 	if offset >= 0 {
 		lines = append(lines, offset)
diff --git a/testdata/scripts/std-imports.txt b/testdata/scripts/std-imports.txt
index c7f58ed..61a1c82 100644
--- a/testdata/scripts/std-imports.txt
+++ b/testdata/scripts/std-imports.txt
@@ -27,6 +27,12 @@ import (
 
 	"fmt"
 )
+
+// This used to crash gofumpt, as there's no space to insert an extra newline.
+import (
+"std"
+"non.std/pkg"
+)
 -- foo.go.golden --
 package p
 
@@ -49,3 +55,10 @@ import (
 
 	"foo.local/two"
 )
+
+// This used to crash gofumpt, as there's no space to insert an extra newline.
+import (
+	"std"
+
+	"non.std/pkg"
+)
