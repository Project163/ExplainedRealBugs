diff --git a/internal/gofumpt.go b/internal/gofumpt.go
index 3d17b1e..c34bc05 100644
--- a/internal/gofumpt.go
+++ b/internal/gofumpt.go
@@ -487,15 +487,18 @@ func identEqual(expr ast.Expr, name string) bool {
 func (f *fumpter) joinStdImports(d *ast.GenDecl) {
 	var std, other []ast.Spec
 	firstGroup := true
-	lastLine := 0
+	lastEnd := d.Pos()
 	needsSort := false
 	for i, spec := range d.Specs {
 		spec := spec.(*ast.ImportSpec)
-		if i > 0 && firstGroup && f.Line(spec.Pos()) > lastLine+1 {
+		if coms := f.commentsBetween(lastEnd, spec.Pos()); len(coms) > 0 {
+			lastEnd = coms[len(coms)-1].End()
+		}
+		if i > 0 && firstGroup && f.Line(spec.Pos()) > f.Line(lastEnd)+1 {
 			firstGroup = false
 		} else {
-			// We're still in the first group. Update the last line.
-			lastLine = f.Line(spec.Pos())
+			// We're still in the first group, update lastEnd.
+			lastEnd = spec.End()
 		}
 
 		// First, separate the non-std imports.
diff --git a/testdata/scripts/std-imports.txt b/testdata/scripts/std-imports.txt
index 4648ef0..8b5b977 100644
--- a/testdata/scripts/std-imports.txt
+++ b/testdata/scripts/std-imports.txt
@@ -45,6 +45,15 @@ import (
 	math "math"
 )
 
+import (
+	"x"
+	// don't mess up this comment
+	"y"
+	// or many
+	// of them
+	"z"
+)
+
 // This used to crash gofumpt, as there's no space to insert an extra newline.
 import (
 "std"
@@ -91,6 +100,15 @@ import (
 	"foo.local/three"
 )
 
+import (
+	"x"
+	// don't mess up this comment
+	"y"
+	// or many
+	// of them
+	"z"
+)
+
 // This used to crash gofumpt, as there's no space to insert an extra newline.
 import (
 	"std"
