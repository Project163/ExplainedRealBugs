diff --git a/README.md b/README.md
index c1970f7..8e22138 100644
--- a/README.md
+++ b/README.md
@@ -115,6 +115,26 @@ var foo = "bar"
 
 </details>
 
+Comments which aren't Go directives should start with a whitespace
+
+<details><summary>example</summary>
+
+```
+//go:noinline
+
+//Foo is awesome.
+func Foo() {}
+```
+
+```
+//go:noinline
+
+// Foo is awesome.
+func Foo() {}
+```
+
+</details>
+
 ### License
 
 Note that much of the code is copied from Go's `cmd/gofmt` command. You can tell
diff --git a/gofumpt.go b/gofumpt.go
index 7a0d27b..e64ffcf 100644
--- a/gofumpt.go
+++ b/gofumpt.go
@@ -9,6 +9,9 @@ import (
 	"go/token"
 	"reflect"
 	"sort"
+	"strings"
+	"unicode"
+	"unicode/utf8"
 )
 
 func gofumpt(fset *token.FileSet, file *ast.File) {
@@ -110,6 +113,33 @@ func (f *fumpter) visit(node ast.Node) {
 			lastEnd = decl.End()
 		}
 
+		// The unattached comments are ignored by ast.Walk.
+		// Don't bother with the stack.
+		for _, group := range node.Comments {
+			f.visit(group)
+			for _, comment := range group.List {
+				f.visit(comment)
+			}
+		}
+
+	case *ast.Comment:
+		body := strings.TrimPrefix(node.Text, "//")
+		if body == node.Text {
+			// /*-style comment
+			break
+		}
+		switch {
+		case strings.HasPrefix(body, "go:"):
+			// standard go:foobar directive
+		case strings.HasPrefix(body, "line "):
+			// cmd/compile line directive
+		default:
+			r, _ := utf8.DecodeRuneInString(body)
+			if r != utf8.RuneError && !unicode.IsSpace(r) {
+				node.Text = "// " + body
+			}
+		}
+
 	case *ast.GenDecl:
 		if len(node.Specs) == 1 && node.Lparen.IsValid() {
 			// If the single spec has any comment, it must go before
diff --git a/testdata/scripts/comment-spaced.txt b/testdata/scripts/comment-spaced.txt
new file mode 100644
index 0000000..43f9fc1
--- /dev/null
+++ b/testdata/scripts/comment-spaced.txt
@@ -0,0 +1,49 @@
+gofumpt -w foo.go .
+cmp foo.go foo.go.golden
+
+-- foo.go --
+package p
+
+// +build tag
+//+build tag missing space
+
+//go:generate some command
+
+//go:unknowndirective
+
+//line 123
+
+//foo is foo.
+type foo int
+
+//	comment with a tab.
+
+//  comment with many spaces
+
+//multiple comments
+//missing spaces
+
+//
+-- foo.go.golden --
+package p
+
+// +build tag
+// +build tag missing space
+
+//go:generate some command
+
+//go:unknowndirective
+
+//line 123
+
+// foo is foo.
+type foo int
+
+//	comment with a tab.
+
+//  comment with many spaces
+
+// multiple comments
+// missing spaces
+
+//
