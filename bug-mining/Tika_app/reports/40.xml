<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:05:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TIKA-2564] Tika client cannot extract files from embedded archive formats</title>
                <link>https://issues.apache.org/jira/browse/TIKA-2564</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This may be related to&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2395&quot; title=&quot;The parser does not support AutoCloseInputStream anymore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2395&quot;&gt;&lt;del&gt;TIKA-2395&lt;/del&gt;&lt;/a&gt;. When trying to extract the files from&#160;&lt;/p&gt;

&lt;p&gt;tika/tika-parsers/src/test/resources/test-documents/test-documents.tgz&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;% coursier launch org.apache.tika:tika-app:1.17 --main org.apache.tika.cli.TikaCLI &amp;#8211; --extract test-documents.tgz&lt;/p&gt;

&lt;p&gt;I see the exception:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.tika.exception.TikaException: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-198&quot; title=&quot;Better distinction between IOException and TikaException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-198&quot;&gt;&lt;del&gt;TIKA-198&lt;/del&gt;&lt;/a&gt;: Illegal IOException from org.apache.tika.parser.pkg.CompressorParser@62628e78&lt;/p&gt;

&lt;p&gt;at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:286)&lt;/p&gt;

&lt;p&gt;at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)&lt;/p&gt;

&lt;p&gt;at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:143)&lt;/p&gt;

&lt;p&gt;at org.apache.tika.cli.TikaCLI$OutputType.process(TikaCLI.java:205)&lt;/p&gt;

&lt;p&gt;at org.apache.tika.cli.TikaCLI.process(TikaCLI.java:486)&lt;/p&gt;

&lt;p&gt;at org.apache.tika.cli.TikaCLI.main(TikaCLI.java:145)&lt;/p&gt;

&lt;p&gt;at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/p&gt;

&lt;p&gt;at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;/p&gt;

&lt;p&gt;at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;/p&gt;

&lt;p&gt;at java.base/java.lang.reflect.Method.invoke(Method.java:564)&lt;/p&gt;

&lt;p&gt;at coursier.cli.qR.a(Unknown Source)&lt;/p&gt;

&lt;p&gt;at coursier.cli.qQ.j(Unknown Source)&lt;/p&gt;

&lt;p&gt;at coursier.cli.qW.a(Unknown Source)&lt;/p&gt;

&lt;p&gt;at d.h.a.c(Unknown Source)&lt;/p&gt;

&lt;p&gt;at b.b.c_(Unknown Source)&lt;/p&gt;

&lt;p&gt;at d.b.d.E.g(Unknown Source)&lt;/p&gt;

&lt;p&gt;at d.b.e.aW.g(Unknown Source)&lt;/p&gt;

&lt;p&gt;at d.b.f.b.aa.a(Unknown Source)&lt;/p&gt;

&lt;p&gt;at coursier.cli.qQ.b(Unknown Source)&lt;/p&gt;

&lt;p&gt;at coursier.cli.Q.b(Unknown Source)&lt;/p&gt;

&lt;p&gt;at b.J.c_(Unknown Source)&lt;/p&gt;

&lt;p&gt;at d.F.h(Unknown Source)&lt;/p&gt;

&lt;p&gt;at b.F.a(Unknown Source)&lt;/p&gt;

&lt;p&gt;at coursier.cli.Coursier.main(Unknown Source)&lt;/p&gt;

&lt;p&gt;at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/p&gt;

&lt;p&gt;at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;/p&gt;

&lt;p&gt;at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;/p&gt;

&lt;p&gt;at java.base/java.lang.reflect.Method.invoke(Method.java:564)&lt;/p&gt;

&lt;p&gt;at coursier.Bootstrap.main(Bootstrap.java:428)&lt;/p&gt;

&lt;p&gt;Caused by: java.io.IOException: mark/reset not supported&lt;/p&gt;

&lt;p&gt;at java.base/java.io.InputStream.reset(InputStream.java:474)&lt;/p&gt;

&lt;p&gt;at org.apache.tika.parser.microsoft.POIFSContainerDetector.detect(POIFSContainerDetector.java:444)&lt;/p&gt;

&lt;p&gt;at org.apache.tika.detect.CompositeDetector.detect(CompositeDetector.java:84)&lt;/p&gt;

&lt;p&gt;at org.apache.tika.cli.TikaCLI$FileEmbeddedDocumentExtractor.parseEmbedded(TikaCLI.java:1045)&lt;/p&gt;

&lt;p&gt;at org.apache.tika.parser.pkg.CompressorParser.parse(CompressorParser.java:222)&lt;/p&gt;

&lt;p&gt;at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)&lt;/p&gt;

&lt;p&gt;... 28 more&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;However, I can browse the document fine using:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;% coursier launch org.apache.tika:tika-app:1.17 --main org.apache.tika.cli.TikaCLI &amp;#8211; test-documents.tgz&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This issue affects:&#160;test-documents.rar,&#160;test-documents.tar.Z,&#160;test-documents.tbz2, and&#160;test-documents.tgz&lt;/p&gt;

&lt;p&gt;But it&#160;does not affect test-documents.7z,&#160;test-documents.cab,&#160;test-documents.ddf,&#160;test-documents.dmg,&#160;test-documents.tar, or&#160;test-documents.zip&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;This makes me suspect that it has something to do with extracting files from packages that are embedded in other archive parsers.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS 10.13.3 (17D47)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;17:42 ext$ java -version&lt;/p&gt;

&lt;p&gt;java version &quot;9.0.1&quot;&lt;/p&gt;

&lt;p&gt;Java(TM) SE Runtime Environment (build 9.0.1+11)&lt;/p&gt;

&lt;p&gt;Java HotSpot(TM) 64-Bit Server VM (build 9.0.1+11, mixed mode)&lt;/p&gt;

&lt;p&gt;17:42 ext$ uname -a&lt;/p&gt;

&lt;p&gt;Darwin bix.local 17.4.0 Darwin Kernel Version 17.4.0: Sun Dec 17 09:19:54 PST 2017; root:xnu-4570.41.2~1/RELEASE_X86_64 x86_64&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13135904">TIKA-2564</key>
            <summary>Tika client cannot extract files from embedded archive formats</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison">Tim Allison</assignee>
                                    <reporter username="mprudhom">Marc Prud&apos;hommeaux</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Feb 2018 22:48:40 +0000</created>
                <updated>Mon, 5 Feb 2018 16:13:05 +0000</updated>
                            <resolved>Mon, 5 Feb 2018 14:55:47 +0000</resolved>
                                                    <fixVersion>1.18</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16352493" author="tallison@mitre.org" created="Mon, 5 Feb 2018 14:55:47 +0000"  >&lt;p&gt;Thank you for opening this!&lt;/p&gt;</comment>
                            <comment id="16352596" author="hudson" created="Mon, 5 Feb 2018 16:13:05 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Tika-trunk #1431 (See &lt;a href=&quot;https://builds.apache.org/job/Tika-trunk/1431/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Tika-trunk/1431/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2564&quot; title=&quot;Tika client cannot extract files from embedded archive formats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2564&quot;&gt;&lt;del&gt;TIKA-2564&lt;/del&gt;&lt;/a&gt; &amp;#8211; wrap embedded stream in a stream that supports mark/reset (tallison: &lt;a href=&quot;https://github.com/apache/tika/commit/7d22ba20ae6a628a1d51b9df7b6e3dae478a119a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tika/commit/7d22ba20ae6a628a1d51b9df7b6e3dae478a119a&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java&lt;/li&gt;
	&lt;li&gt;(edit) tika-app/src/test/java/org/apache/tika/cli/TikaCLITest.java&lt;/li&gt;
	&lt;li&gt;(add) tika-app/src/test/resources/test-data/test-documents.tgz&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pqif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>