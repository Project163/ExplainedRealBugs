<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:57:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLUME-2939] Upgrade recursive SpoolDir to use Java7 features</title>
                <link>https://issues.apache.org/jira/browse/FLUME-2939</link>
                <project id="12311321" key="FLUME">Flume</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-1899&quot; title=&quot;Make SpoolDir work with Sub-Directories&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-1899&quot;&gt;&lt;del&gt;FLUME-1899&lt;/del&gt;&lt;/a&gt; was committed without the DirectoryStream API&lt;/p&gt;

&lt;p&gt;This ticket is for &quot;upgrading&quot; the patch provided to use Java 7 features as the Java version for Flume has been recently bumped.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12985033">FLUME-2939</key>
            <summary>Upgrade recursive SpoolDir to use Java7 features</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bessbd">Bal&#225;zs Don&#225;t Bessenyei</assignee>
                                    <reporter username="bessbd">Bal&#225;zs Don&#225;t Bessenyei</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jun 2016 14:13:59 +0000</created>
                <updated>Sun, 10 Jul 2016 22:38:35 +0000</updated>
                            <resolved>Sat, 9 Jul 2016 00:36:46 +0000</resolved>
                                                    <fixVersion>1.7.0</fixVersion>
                                    <component>Sinks+Sources</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15358901" author="bessbd" created="Fri, 1 Jul 2016 12:47:13 +0000"  >&lt;p&gt;Patch submitted for review, please see &lt;a href=&quot;https://reviews.apache.org/r/49506/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/49506/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15368816" author="mpercy" created="Sat, 9 Jul 2016 00:34:32 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bessbd&quot; class=&quot;user-hover&quot; rel=&quot;bessbd&quot;&gt;bessbd&lt;/a&gt; for the patch and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sati&quot; class=&quot;user-hover&quot; rel=&quot;sati&quot;&gt;sati&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=denes&quot; class=&quot;user-hover&quot; rel=&quot;denes&quot;&gt;denes&lt;/a&gt; for reviewing it. I am about to commit this.&lt;/p&gt;</comment>
                            <comment id="15368818" author="jira-bot" created="Sat, 9 Jul 2016 00:36:06 +0000"  >&lt;p&gt;Commit 7013708baddc8ed7d861797d1fd8280a94b6025c in flume&apos;s branch refs/heads/trunk from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpercy&quot; class=&quot;user-hover&quot; rel=&quot;mpercy&quot;&gt;mpercy&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=7013708&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=7013708&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2939&quot; title=&quot;Upgrade recursive SpoolDir to use Java7 features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2939&quot;&gt;&lt;del&gt;FLUME-2939&lt;/del&gt;&lt;/a&gt;. Update recursive SpoolDir source to use Java 7 APIs&lt;/p&gt;

&lt;p&gt;(Bessenyei Bal&#225;zs Don&#225;t via Mike Percy)&lt;/p&gt;</comment>
                            <comment id="15368820" author="mpercy" created="Sat, 9 Jul 2016 00:36:46 +0000"  >&lt;p&gt;This has been pushed to trunk.&lt;/p&gt;</comment>
                            <comment id="15368880" author="hudson" created="Sat, 9 Jul 2016 02:04:03 +0000"  >&lt;p&gt;FAILURE: Integrated in Flume-trunk-hbase-1 #173 (See &lt;a href=&quot;https://builds.apache.org/job/Flume-trunk-hbase-1/173/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Flume-trunk-hbase-1/173/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2939&quot; title=&quot;Upgrade recursive SpoolDir to use Java7 features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2939&quot;&gt;&lt;del&gt;FLUME-2939&lt;/del&gt;&lt;/a&gt;. Update recursive SpoolDir source to use Java 7 APIs (mpercy: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=7013708baddc8ed7d861797d1fd8280a94b6025c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=7013708baddc8ed7d861797d1fd8280a94b6025c&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;flume-ng-core/src/main/java/org/apache/flume/client/avro/ReliableSpoolingFileEventReader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15369985" author="jira-bot" created="Sun, 10 Jul 2016 22:38:33 +0000"  >&lt;p&gt;Commit ba64b12670f7b2c9ce079f8898f4601689a51def in flume&apos;s branch refs/heads/trunk from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liorze&quot; class=&quot;user-hover&quot; rel=&quot;liorze&quot;&gt;liorze&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=ba64b12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=ba64b12&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2950&quot; title=&quot;ReliableSpoolingFileEventReader.rollCurrentFile is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2950&quot;&gt;&lt;del&gt;FLUME-2950&lt;/del&gt;&lt;/a&gt;. ReliableSpoolingFileEventReader.rollCurrentFile is broken&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2939&quot; title=&quot;Upgrade recursive SpoolDir to use Java7 features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2939&quot;&gt;&lt;del&gt;FLUME-2939&lt;/del&gt;&lt;/a&gt; introduced a Java 7 API (nio.file) to&lt;br/&gt;
ReliableSpoolingFileEventReader. However, the committed patch breaks&lt;br/&gt;
rollCurrentFile() on Windows machines. File rename might be not atomic,&lt;br/&gt;
in such cases, and under the assumption that the rolled file and the&lt;br/&gt;
current file store the same data, Flume only logs a warning and does not&lt;br/&gt;
assume that the user broke the contract that the spooling directory&lt;br/&gt;
source demands.&lt;/p&gt;

&lt;p&gt;In order to determine whether the files store the same data, we used the&lt;br/&gt;
com.google.common.io.Files.equal() method. However, &lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2939&quot; title=&quot;Upgrade recursive SpoolDir to use Java7 features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2939&quot;&gt;&lt;del&gt;FLUME-2939&lt;/del&gt;&lt;/a&gt; uses&lt;br/&gt;
java.nio.file.Files.isSameFile() which has different semantics.&lt;br/&gt;
Consequently, this relaxation does not hold anymore. In addition,&lt;br/&gt;
TestSpoolingFileLineReader.testDestinationExistsAndSameFileWindows&lt;br/&gt;
fails. This patch brings back the old check using Files.equal().&lt;/p&gt;

&lt;p&gt;(Lior Zeno via Mike Percy)&lt;/p&gt;</comment>
                            <comment id="15369986" author="jira-bot" created="Sun, 10 Jul 2016 22:38:35 +0000"  >&lt;p&gt;Commit ba64b12670f7b2c9ce079f8898f4601689a51def in flume&apos;s branch refs/heads/trunk from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liorze&quot; class=&quot;user-hover&quot; rel=&quot;liorze&quot;&gt;liorze&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=ba64b12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=ba64b12&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2950&quot; title=&quot;ReliableSpoolingFileEventReader.rollCurrentFile is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2950&quot;&gt;&lt;del&gt;FLUME-2950&lt;/del&gt;&lt;/a&gt;. ReliableSpoolingFileEventReader.rollCurrentFile is broken&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2939&quot; title=&quot;Upgrade recursive SpoolDir to use Java7 features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2939&quot;&gt;&lt;del&gt;FLUME-2939&lt;/del&gt;&lt;/a&gt; introduced a Java 7 API (nio.file) to&lt;br/&gt;
ReliableSpoolingFileEventReader. However, the committed patch breaks&lt;br/&gt;
rollCurrentFile() on Windows machines. File rename might be not atomic,&lt;br/&gt;
in such cases, and under the assumption that the rolled file and the&lt;br/&gt;
current file store the same data, Flume only logs a warning and does not&lt;br/&gt;
assume that the user broke the contract that the spooling directory&lt;br/&gt;
source demands.&lt;/p&gt;

&lt;p&gt;In order to determine whether the files store the same data, we used the&lt;br/&gt;
com.google.common.io.Files.equal() method. However, &lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2939&quot; title=&quot;Upgrade recursive SpoolDir to use Java7 features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2939&quot;&gt;&lt;del&gt;FLUME-2939&lt;/del&gt;&lt;/a&gt; uses&lt;br/&gt;
java.nio.file.Files.isSameFile() which has different semantics.&lt;br/&gt;
Consequently, this relaxation does not hold anymore. In addition,&lt;br/&gt;
TestSpoolingFileLineReader.testDestinationExistsAndSameFileWindows&lt;br/&gt;
fails. This patch brings back the old check using Files.equal().&lt;/p&gt;

&lt;p&gt;(Lior Zeno via Mike Percy)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30bhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>