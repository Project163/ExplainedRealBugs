<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:57:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLUME-1666] Syslog source strips timestamp and hostname from log message body</title>
                <link>https://issues.apache.org/jira/browse/FLUME-1666</link>
                <project id="12311321" key="FLUME">Flume</project>
                    <description>&lt;p&gt;The syslog source parses incoming syslog messages.  In the process, it strips the timestamp and hostname from each log message, and places them as Event headers.&lt;/p&gt;

&lt;p&gt;Thus, a syslog message that would normally look like so (when written via rsyslog or syslogd):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Wed Oct 24 09:18:01 UTC 2012 someserver /USR/SBIN/CRON[26981]: (root) CMD (/usr/local/sbin/somescript)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Appears in flume output as:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/USR/SBIN/CRON[26981]: (root) CMD (/usr/local/sbin/somescript)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;This occurs with Flume all the way up through 1.3.0.&lt;/p&gt;</environment>
        <key id="12613257">FLUME-1666</key>
            <summary>Syslog source strips timestamp and hostname from log message body</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jlord">Jeff Lord</assignee>
                                    <reporter username="jsw">Josh West</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Oct 2012 09:21:27 +0000</created>
                <updated>Mon, 21 Oct 2013 21:51:38 +0000</updated>
                            <resolved>Thu, 10 Oct 2013 01:51:58 +0000</resolved>
                                    <version>1.2.0</version>
                    <version>1.3.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>Sinks+Sources</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13483104" author="jsw" created="Wed, 24 Oct 2012 09:35:48 +0000"  >&lt;p&gt;There is more than one way to solve this issue.  One way is to patch the Syslog source to no longer strip log message timestamp and hostname from each log message.  The other way is to write a serializer which adds this data back into the log message.&lt;/p&gt;

&lt;p&gt;As I&apos;m new to Java and didn&apos;t want to muck with how the Syslog source currently works for existing users, I chose the path of a serializer.  I&apos;m attaching a patch which provides a SyslogTextSerializer, based on the BodyTextSerializer.  It simply adds the timestamp and hostname headers into the log message body, if they exist.&lt;/p&gt;</comment>
                            <comment id="13484179" author="brocknoland" created="Thu, 25 Oct 2012 15:10:02 +0000"  >&lt;p&gt;Looks pretty good. Should we be using Charsets._UTF8 in the getBytes() calls?&lt;/p&gt;

&lt;p&gt;I am not sure, but I wonder if we could name is something like HostTimestampTextSerializer since it&apos;s not syslog specific? Not 100% sure I like that name but something generic could be good.&lt;/p&gt;

&lt;p&gt;Brock&lt;/p&gt;</comment>
                            <comment id="13486595" author="mpercy" created="Tue, 30 Oct 2012 01:41:05 +0000"  >&lt;p&gt;Why don&apos;t we make stripping hostname and timestamp optional in the syslog sources? I think that&apos;s a better solution.&lt;/p&gt;

&lt;p&gt;The problem with the solution here is that syslog source supports several different timestamp input formats, so in order to be comprehensive we would have to support them all. Better to just add a flag to the syslog sources to use the whole line as the Event body instead of just the parsed &quot;content&quot; portion.&lt;/p&gt;</comment>
                            <comment id="13534522" author="jlord" created="Tue, 18 Dec 2012 01:43:39 +0000"  >&lt;p&gt;+1 for an optional setting to strip hostname and timestamp or not.&lt;/p&gt;</comment>
                            <comment id="13783544" author="jlord" created="Wed, 2 Oct 2013 00:57:43 +0000"  >&lt;p&gt;Attaching a patch which introduces a boolean keepFields which defaults to false. When set to true this will preserve the timestamp and hostname in the body of the event. Additionally I have added a test for SyslogTcpSource&lt;/p&gt;</comment>
                            <comment id="13783549" author="jlord" created="Wed, 2 Oct 2013 01:05:21 +0000"  >&lt;p&gt;Syslog source strips timestamp and hostname from log message body&lt;/p&gt;</comment>
                            <comment id="13787743" author="jlord" created="Sun, 6 Oct 2013 19:09:20 +0000"  >&lt;p&gt;Review Feedback Incorporated.&lt;br/&gt;
New Patch Attached.&lt;br/&gt;
Thanks for the review Mike!&lt;/p&gt;</comment>
                            <comment id="13791094" author="mpercy" created="Thu, 10 Oct 2013 01:49:53 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13791095" author="mpercy" created="Thu, 10 Oct 2013 01:51:58 +0000"  >&lt;p&gt;Committed to trunk and flume-1.5 branches. Thanks for the patch Jeff!&lt;/p&gt;</comment>
                            <comment id="13791148" author="hudson" created="Thu, 10 Oct 2013 03:28:15 +0000"  >&lt;p&gt;SUCCESS: Integrated in flume-trunk #511 (See &lt;a href=&quot;https://builds.apache.org/job/flume-trunk/511/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/flume-trunk/511/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-1666&quot; title=&quot;Syslog source strips timestamp and hostname from log message body&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-1666&quot;&gt;&lt;del&gt;FLUME-1666&lt;/del&gt;&lt;/a&gt;. Syslog source strips timestamp and hostname from log message body (mpercy: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=1f95219ea6f87173018bde126a3485575a8ee252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=1f95219ea6f87173018bde126a3485575a8ee252&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;flume-ng-core/src/main/java/org/apache/flume/source/SyslogTcpSource.java&lt;/li&gt;
	&lt;li&gt;flume-ng-core/src/test/java/org/apache/flume/source/TestSyslogUtils.java&lt;/li&gt;
	&lt;li&gt;flume-ng-core/src/main/java/org/apache/flume/source/SyslogUtils.java&lt;/li&gt;
	&lt;li&gt;flume-ng-doc/sphinx/FlumeDeveloperGuide.rst&lt;/li&gt;
	&lt;li&gt;flume-ng-core/src/main/java/org/apache/flume/source/SyslogSourceConfigurationConstants.java&lt;/li&gt;
	&lt;li&gt;flume-ng-doc/sphinx/FlumeUserGuide.rst&lt;/li&gt;
	&lt;li&gt;flume-ng-core/src/test/java/org/apache/flume/source/TestSyslogUdpSource.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13791469" author="mpeterson" created="Thu, 10 Oct 2013 13:21:26 +0000"  >&lt;p&gt;I&apos;m not very familiar with Java, but it looks like the old patch (from 24/Oct/12 05:36) drops some of the information from the date header when it parses the header with the java Date() function. Most notably I believe it drops milliseconds.&lt;/p&gt;

&lt;p&gt;Is this really the issue or am I looking at something wrong? If so, has this been fixed with the new patch? i.e. does all the information that goes into the header get added back to the message body and nothing is dropped?&lt;/p&gt;

&lt;p&gt;Edit: It also looks like it gives the wrong Time Zone information. Here&apos;s an example of a syslog source coming in that I listened to via netcat....&lt;br/&gt;
&amp;lt;166&amp;gt;2013-10-10T13:27:11.935Z &lt;br/&gt;
Here&apos;s a timestamp from flume syslog source that came in a little earlier&lt;br/&gt;
Wed Oct 09 13:33:22 EDT 2013&lt;br/&gt;
Note the millisecond (935) has been dropped and it&apos;s been read as EDT instead of UTC (Z) time.&lt;/p&gt;</comment>
                            <comment id="13791702" author="mpercy" created="Thu, 10 Oct 2013 17:23:45 +0000"  >&lt;p&gt;The latest patch doesn&apos;t modify the original message at all.&lt;/p&gt;</comment>
                            <comment id="13800969" author="mpercy" created="Mon, 21 Oct 2013 19:13:15 +0000"  >&lt;p&gt;Oops, I just noticed I missed a file when committing this - the new syslog tcp source test. Committing that now.&lt;/p&gt;</comment>
                            <comment id="13801207" author="hudson" created="Mon, 21 Oct 2013 21:51:38 +0000"  >&lt;p&gt;SUCCESS: Integrated in flume-trunk #515 (See &lt;a href=&quot;https://builds.apache.org/job/flume-trunk/515/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/flume-trunk/515/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-1666&quot; title=&quot;Syslog source strips timestamp and hostname from log message body&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-1666&quot;&gt;&lt;del&gt;FLUME-1666&lt;/del&gt;&lt;/a&gt;. Oops, forgot new test in previous commit (mpercy: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=730c822c8fd3c393558ee63b48c82bb5a0763266&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=730c822c8fd3c393558ee63b48c82bb5a0763266&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;flume-ng-core/src/test/java/org/apache/flume/source/TestSyslogTcpSource.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12606234" name="FLUME-1666-1.patch" size="13093" author="jlord" created="Wed, 2 Oct 2013 00:57:43 +0000"/>
                            <attachment id="12607098" name="FLUME-1666-2.patch" size="14294" author="jlord" created="Sun, 6 Oct 2013 19:09:20 +0000"/>
                            <attachment id="12607714" name="FLUME-1666-3.patch" size="14258" author="jlord" created="Thu, 10 Oct 2013 01:14:50 +0000"/>
                            <attachment id="12607715" name="FLUME-1666-4.patch" size="14246" author="jlord" created="Thu, 10 Oct 2013 01:31:27 +0000"/>
                            <attachment id="12550616" name="FLUME-1666-SyslogTextSerializer.patch" size="3965" author="jsw" created="Wed, 24 Oct 2012 09:36:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250715</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b0d3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62169</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>