<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:56:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLUME-1136] Remove from executor service does not always remove the runnables from the queue</title>
                <link>https://issues.apache.org/jira/browse/FLUME-1136</link>
                <project id="12311321" key="FLUME">Flume</project>
                    <description>&lt;p&gt;It seems like ScheduledThreadPoolExecutor&apos;s remove() function sometimes does not remove the runnable specified. This does not cause any functionality problems, just spills lot of stuff into logs during reconfiguration, and can cause runnables to be executed unnecessarily, even though they return immediately.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12551574">FLUME-1136</key>
            <summary>Remove from executor service does not always remove the runnables from the queue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hshreedharan">Hari Shreedharan</assignee>
                                    <reporter username="hshreedharan">Hari Shreedharan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Apr 2012 04:37:48 +0000</created>
                <updated>Thu, 19 Apr 2012 19:14:04 +0000</updated>
                            <resolved>Thu, 19 Apr 2012 18:20:34 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Node</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13257254" author="jiraposter@reviews.apache.org" created="Thu, 19 Apr 2012 05:43:53 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4800/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/4800/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Flume.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Using futures to cancel the monitor threads, instead of remove.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-1136&quot; title=&quot;Remove from executor service does not always remove the runnables from the queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-1136&quot;&gt;&lt;del&gt;FLUME-1136&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-1136&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLUME-1136&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  flume-ng-core/src/main/java/org/apache/flume/lifecycle/LifecycleSupervisor.java 8978087 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4800/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/4800/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Unit tests pass. Functional testing done.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Hari&lt;/p&gt;
</comment>
                            <comment id="13257295" author="hshreedharan" created="Thu, 19 Apr 2012 06:24:00 +0000"  >&lt;p&gt;Before patch, logs on reconfiguration:&lt;br/&gt;
2012-04-18 23:12:38,515 INFO lifecycle.LifecycleSupervisor: Component has already been stopped SinkRunner: { policy:org.apache.flume.sink.DefaultSinkProcessor@311671b2 counterGroup:{ name:null counters:&lt;/p&gt;
{runner.backoffs.consecutive=6, runner.backoffs=10, runner.interruptions=1} } }&lt;br/&gt;
2012-04-18 23:12:38,860 INFO lifecycle.LifecycleSupervisor: Component has already been stopped EventDrivenSourceRunner: { source:AvroSource: { bindAddress:localhost port:25001 } }&lt;br/&gt;
2012-04-18 23:12:41,516 INFO lifecycle.LifecycleSupervisor: Component has already been stopped SinkRunner: { policy:org.apache.flume.sink.DefaultSinkProcessor@311671b2 counterGroup:{ name:null counters:{runner.backoffs.consecutive=6, runner.backoffs=10, runner.interruptions=1}
&lt;p&gt; } }&lt;br/&gt;
2012-04-18 23:12:41,861 INFO lifecycle.LifecycleSupervisor: Component has already been stopped EventDrivenSourceRunner: { source:AvroSource: &lt;/p&gt;
{ bindAddress:localhost port:25001 }
&lt;p&gt; }&lt;br/&gt;
2012-04-18 23:12:44,517 INFO lifecycle.LifecycleSupervisor: Component has already been stopped SinkRunner: { policy:org.apache.flume.sink.DefaultSinkProcessor@311671b2 counterGroup:{ name:null counters:&lt;/p&gt;
{runner.backoffs.consecutive=6, runner.backoffs=10, runner.interruptions=1} } }&lt;br/&gt;
2012-04-18 23:12:44,863 INFO lifecycle.LifecycleSupervisor: Component has already been stopped EventDrivenSourceRunner: { source:AvroSource: { bindAddress:localhost port:25001 } }&lt;br/&gt;
2012-04-18 23:12:47,519 INFO lifecycle.LifecycleSupervisor: Component has already been stopped SinkRunner: { policy:org.apache.flume.sink.DefaultSinkProcessor@311671b2 counterGroup:{ name:null counters:{runner.backoffs.consecutive=6, runner.backoffs=10, runner.interruptions=1}
&lt;p&gt; } }&lt;/p&gt;


&lt;p&gt;After patch:&lt;/p&gt;

&lt;p&gt;2012-04-18 23:19:36,711 INFO sink.NullSink: Null sink stopping&lt;br/&gt;
2012-04-18 23:19:36,711 INFO sink.NullSink: Null sink stopped. Event metrics:{ name:null counters:&lt;/p&gt;
{events.successful=25}
&lt;p&gt; }&lt;br/&gt;
2012-04-18 23:19:36,711 INFO lifecycle.LifecycleSupervisor: Stopping component: EventDrivenSourceRunner: { source:AvroSource: &lt;/p&gt;
{ bindAddress:localhost port:25001 }
&lt;p&gt; }&lt;br/&gt;
2012-04-18 23:19:36,711 INFO source.AvroSource: Avro source stopping:AvroSource: &lt;/p&gt;
{ bindAddress:localhost port:25001 }
&lt;p&gt;2012-04-18 23:19:36,716 INFO source.AvroSource: Avro source starting:AvroSource: &lt;/p&gt;
{ bindAddress:localhost port:25001 }
&lt;p&gt;2012-04-18 23:20:14,907 INFO ipc.NettyServer: &lt;span class=&quot;error&quot;&gt;&amp;#91;id: 0x30d1e7c2, /127.0.0.1:50120 =&amp;gt; /127.0.0.1:25001&amp;#93;&lt;/span&gt; OPEN&lt;br/&gt;
2012-04-18 23:20:14,908 INFO ipc.NettyServer: &lt;span class=&quot;error&quot;&gt;&amp;#91;id: 0x30d1e7c2, /127.0.0.1:50120 =&amp;gt; /127.0.0.1:25001&amp;#93;&lt;/span&gt; BOUND: /127.0.0.1:25001&lt;br/&gt;
2012-04-18 23:20:14,908 INFO ipc.NettyServer: &lt;span class=&quot;error&quot;&gt;&amp;#91;id: 0x30d1e7c2, /127.0.0.1:50120 =&amp;gt; /127.0.0.1:25001&amp;#93;&lt;/span&gt; CONNECTED: /127.0.0.1:50120&lt;br/&gt;
2012-04-18 23:20:15,192 INFO sink.LoggerSink: Event: { headers:{} body: }&lt;/p&gt;


&lt;p&gt;&amp;#8211;&lt;br/&gt;
As you can see, after applying the above patch, there are no &quot;Component has already been stopped&quot; log messages, which were appearing every 3 seconds or so, for each component - for almost 40 seconds.&lt;/p&gt;</comment>
                            <comment id="13257617" author="jiraposter@reviews.apache.org" created="Thu, 19 Apr 2012 17:28:38 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4800/#review7038&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/4800/#review7038&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;lgtm&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Prasad&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2012-04-19 05:42:55, Hari Shreedharan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4800/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/4800/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-04-19 05:42:55)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for Flume.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Using futures to cancel the monitor threads, instead of remove.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-1136&quot; title=&quot;Remove from executor service does not always remove the runnables from the queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-1136&quot;&gt;&lt;del&gt;FLUME-1136&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-1136&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLUME-1136&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;flume-ng-core/src/main/java/org/apache/flume/lifecycle/LifecycleSupervisor.java 8978087 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4800/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/4800/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Unit tests pass. Functional testing done.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Hari&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13257665" author="prasadm" created="Thu, 19 Apr 2012 18:20:34 +0000"  >&lt;p&gt;Patch committed to trunk&lt;br/&gt;
Thanks Hari!&lt;/p&gt;</comment>
                            <comment id="13257699" author="hudson" created="Thu, 19 Apr 2012 19:14:04 +0000"  >&lt;p&gt;Integrated in flume-trunk #177 (See &lt;a href=&quot;https://builds.apache.org/job/flume-trunk/177/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/flume-trunk/177/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-1136&quot; title=&quot;Remove from executor service does not always remove the runnables from the queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-1136&quot;&gt;&lt;del&gt;FLUME-1136&lt;/del&gt;&lt;/a&gt;:Remove from executor service does not always remove the runnables from the queue&lt;/p&gt;

&lt;p&gt;(Hari Sridharan via Prasad Mujumdar) (Revision 1328067)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
prasadm : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1328067&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1328067&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/incubator/flume/trunk/flume-ng-core/src/main/java/org/apache/flume/lifecycle/LifecycleSupervisor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12523306" name="FLUME-1136.patch" size="3992" author="hshreedharan" created="Thu, 19 Apr 2012 06:24:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236382</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 31 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09t7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>55164</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>