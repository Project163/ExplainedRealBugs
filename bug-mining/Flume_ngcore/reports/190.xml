<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:58:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLUME-3316] Syslog Rfc3164Date test fails when the test date falls on a leap day</title>
                <link>https://issues.apache.org/jira/browse/FLUME-3316</link>
                <project id="12311321" key="FLUME">Flume</project>
                    <description></description>
                <environment></environment>
        <key id="13213025">FLUME-3316</key>
            <summary>Syslog Rfc3164Date test fails when the test date falls on a leap day</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="turcsanyip">Peter Turcsanyi</assignee>
                                    <reporter username="turcsanyip">Peter Turcsanyi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Jan 2019 09:27:47 +0000</created>
                <updated>Mon, 4 Apr 2022 08:16:41 +0000</updated>
                            <resolved>Thu, 31 Jan 2019 13:34:16 +0000</resolved>
                                                    <fixVersion>1.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16757198" author="jira-bot" created="Thu, 31 Jan 2019 12:52:27 +0000"  >&lt;p&gt;Commit 41902ebc998ca31de4ddc0fb89136a2e70b236f9 in flume&apos;s branch refs/heads/trunk from turcsanyip&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=flume.git;h=41902eb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=flume.git;h=41902eb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-3316&quot; title=&quot;Syslog Rfc3164Date test fails when the test date falls on a leap day&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-3316&quot;&gt;&lt;del&gt;FLUME-3316&lt;/del&gt;&lt;/a&gt; Fixed Syslog Rfc3164Date test failure when the test date falls on a leap day (#275)&lt;/p&gt;

&lt;p&gt;Syslog Rfc3164Date test changes the time via a mock Clock instance so that it can test&lt;br/&gt;
dates in the past/future (it goes 13 months forward).&lt;br/&gt;
The test failed due to a bug in SyslogSource when the test date fell on a leap day (2020-02-29).&lt;/p&gt;

&lt;p&gt;Background:&lt;br/&gt;
RFC 3164 Syslog messages do not contain the year and SyslogSource tries to find it out (in order to&lt;br/&gt;
set the timestamp Flume event header).&lt;br/&gt;
First it adds the current year, and then adjusts it with +/- 1 year if needed (it can happen&lt;br/&gt;
around 31 Dec / 1 Jan).&lt;br/&gt;
In the previous implementation SyslogSource added the current year based on the system time,&lt;br/&gt;
not the (mocked) Clock instance.&lt;br/&gt;
When the test date was 2020-02-29 (so the syslog message contained Feb 29), SyslogSource added&lt;br/&gt;
2019 to Feb 29 which is not a real date and was parsed to 2019-03-01, then adjusted with +1 year&lt;br/&gt;
to 2020-03-01. This caused the test error.&lt;/p&gt;

&lt;p&gt;Solution:&lt;br/&gt;
SyslogSource has been modified to use the Clock instance when adding the current year to the&lt;br/&gt;
date coming in the syslog message.&lt;br/&gt;
The year was also set in another place in the code which was redundant (and used deprecated&lt;br/&gt;
Date API), so it has been deleted too.&lt;/p&gt;</comment>
                            <comment id="16757309" author="hudson" created="Thu, 31 Jan 2019 14:49:08 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build flume-trunk #756 (See &lt;a href=&quot;https://builds.apache.org/job/flume-trunk/756/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/flume-trunk/756/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-3316&quot; title=&quot;Syslog Rfc3164Date test fails when the test date falls on a leap day&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-3316&quot;&gt;&lt;del&gt;FLUME-3316&lt;/del&gt;&lt;/a&gt; Fixed Syslog Rfc3164Date test failure when the test date (szaboferee: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=41902ebc998ca31de4ddc0fb89136a2e70b236f9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=41902ebc998ca31de4ddc0fb89136a2e70b236f9&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) flume-ng-core/src/main/java/org/apache/flume/source/SyslogUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0iog:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>