<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:56:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLUME-1683] Fix Time Granularity Bug in SpoolingFileLineReader</title>
                <link>https://issues.apache.org/jira/browse/FLUME-1683</link>
                <project id="12311321" key="FLUME">Flume</project>
                    <description>&lt;p&gt;This patch fixes a test in the SpoolingFileLineReader, and a bug associated with that test:&lt;/p&gt;

&lt;p&gt;The issue is related to the way that the source sorts files which are candidates for ingestion. It sorts the files by timestamp, and the unit test assumes that if it creates two files:&lt;/p&gt;

&lt;p&gt;x = new File()&lt;br/&gt;
Files.write(&quot;something&quot;, x)&lt;/p&gt;

&lt;p&gt;y = new File() &lt;br/&gt;
Files.write(&quot;something&quot;, y)&lt;/p&gt;

&lt;p&gt;// Read from files&lt;/p&gt;

&lt;p&gt;that x will be processed before y. In my filesystem, the time granularity is only 1 second, so these files were actually processed in a non-deterministic order. On your filesystem, they were processed in the correct order, and the test (correctly) failed.&lt;/p&gt;

&lt;p&gt;I didn&apos;t notice that the test was mixed up because it was passing for me due to this issue.&lt;/p&gt;

&lt;p&gt;I updated the sorting order to take into account filename when there is a tie in the timestamp, so at least we have a consistent ordering we can test.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12614991">FLUME-1683</key>
            <summary>Fix Time Granularity Bug in SpoolingFileLineReader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pwendell@gmail.com">NO NAME</assignee>
                                    <reporter username="pwendell@gmail.com">NO NAME</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Nov 2012 16:44:52 +0000</created>
                <updated>Wed, 7 Nov 2012 08:44:39 +0000</updated>
                            <resolved>Tue, 6 Nov 2012 17:22:12 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13491609" author="pwendell@gmail.com" created="Tue, 6 Nov 2012 16:54:01 +0000"  >&lt;p&gt;Small one line change removing extra exception.&lt;/p&gt;</comment>
                            <comment id="13491616" author="brocknoland" created="Tue, 6 Nov 2012 17:01:31 +0000"  >&lt;p&gt;OK thanks! I am running unit tests now.&lt;/p&gt;</comment>
                            <comment id="13491629" author="brocknoland" created="Tue, 6 Nov 2012 17:22:12 +0000"  >&lt;p&gt;Thank you Patrick! Committed to trunk, 1.3, and 1.4!&lt;/p&gt;</comment>
                            <comment id="13492199" author="hudson" created="Wed, 7 Nov 2012 08:44:39 +0000"  >&lt;p&gt;Integrated in flume-trunk #322 (See &lt;a href=&quot;https://builds.apache.org/job/flume-trunk/322/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/flume-trunk/322/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-1683&quot; title=&quot;Fix Time Granularity Bug in SpoolingFileLineReader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-1683&quot;&gt;&lt;del&gt;FLUME-1683&lt;/del&gt;&lt;/a&gt;: Fix Time Granularity Bug in SpoolingFileLineReader (Revision c145b2b8c1ed7bc04e1b018085c519555cf61a21)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
brock : &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=c145b2b8c1ed7bc04e1b018085c519555cf61a21&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=c145b2b8c1ed7bc04e1b018085c519555cf61a21&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;flume-ng-core/src/main/java/org/apache/flume/client/avro/SpoolingFileLineReader.java&lt;/li&gt;
	&lt;li&gt;flume-ng-core/src/test/java/org/apache/flume/client/avro/TestSpoolingFileLineReader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12552306" name="FLUME-1683.v1.txt" size="2759" author="pwendell@gmail.com" created="Tue, 6 Nov 2012 16:50:56 +0000"/>
                            <attachment id="12552307" name="FLUME-1683.v2.txt" size="2374" author="pwendell@gmail.com" created="Tue, 6 Nov 2012 16:54:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255510</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0esfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>