<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:57:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLUME-2556] TestBucketPath.testDateFormatHours fails intermittently</title>
                <link>https://issues.apache.org/jira/browse/FLUME-2556</link>
                <project id="12311321" key="FLUME">Flume</project>
                    <description>&lt;p&gt;TestBucketPath.testDateFormatHours sometimes results in the following error:&lt;/p&gt;

&lt;p&gt;org.junit.ComparisonFailure: expected:&amp;lt;Sat Jun 23 1&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;:00:00 2012&amp;gt; but was:&amp;lt;Sat Jun 23 1&lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt;:00:00 2012&amp;gt;&lt;br/&gt;
	at org.junit.Assert.assertEquals(Assert.java:125)&lt;br/&gt;
	at org.junit.Assert.assertEquals(Assert.java:147)&lt;br/&gt;
	at org.apache.flume.formatter.output.TestBucketPath.testDateFormatHours(TestBucketPath.java:63)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12756281">FLUME-2556</key>
            <summary>TestBucketPath.testDateFormatHours fails intermittently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jrufus">Johny Rufus</assignee>
                                    <reporter username="jrufus">Johny Rufus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Nov 2014 01:48:43 +0000</created>
                <updated>Thu, 18 Dec 2014 22:42:52 +0000</updated>
                            <resolved>Thu, 18 Dec 2014 21:29:56 +0000</resolved>
                                    <version>1.5.1</version>
                                    <fixVersion>1.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14244954" author="lofbele1" created="Fri, 12 Dec 2014 23:11:36 +0000"  >&lt;p&gt;Problem could be that SimpleDateFormat instances are cached in BucketPath.java and timezone is not always reset when a cached instance is retrieved.&lt;/p&gt;

&lt;p&gt;For example if JUnit runs testDateFormatTimeZone() before testDateFormatHours() (both use &quot;%c&quot; format) then timezone is set in the cached SimpleDateFormat instance for &quot;%c&quot; (&quot;EEE MMM d HH:mm:ss yyyy&quot;) when testDateFormatHours() gets it from the cache.&lt;/p&gt;

&lt;p&gt;Maybe timezone should be reset in getSimpleDateFormat() or in BucketPath.java around line 320 if the provided value is null.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    SimpleDateFormat format = getSimpleDateFormat(formatString);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (timeZone != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      format.setTimeZone(timeZone);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14249279" author="jrufus" created="Wed, 17 Dec 2014 01:37:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lofbele1&quot; class=&quot;user-hover&quot; rel=&quot;lofbele1&quot;&gt;lofbele1&lt;/a&gt;, nice catch, can you attach a patch, incorporating your suggested fix.&lt;/p&gt;</comment>
                            <comment id="14251897" author="jrufus" created="Thu, 18 Dec 2014 17:03:21 +0000"  >&lt;p&gt;Attaching a patch with the suggested fix by resetting the timezone to the system default when its not provided and an additional test case that would test the caching scenario&lt;/p&gt;</comment>
                            <comment id="14252182" author="hshreedharan" created="Thu, 18 Dec 2014 20:20:17 +0000"  >&lt;p&gt;+1. Running tests and committing.&lt;/p&gt;</comment>
                            <comment id="14252291" author="jira-bot" created="Thu, 18 Dec 2014 21:29:20 +0000"  >&lt;p&gt;Commit 84465664c21ed0a1261f015a010b94a98153c8d7 in flume&apos;s branch refs/heads/trunk from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hshreedharan&quot; class=&quot;user-hover&quot; rel=&quot;hshreedharan&quot;&gt;hshreedharan&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=8446566&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=8446566&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2556&quot; title=&quot;TestBucketPath.testDateFormatHours fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2556&quot;&gt;&lt;del&gt;FLUME-2556&lt;/del&gt;&lt;/a&gt;. BucketWriter DateFormat test fails intermittently.&lt;/p&gt;

&lt;p&gt;(Johny Rufus via Hari)&lt;/p&gt;</comment>
                            <comment id="14252292" author="jira-bot" created="Thu, 18 Dec 2014 21:29:28 +0000"  >&lt;p&gt;Commit 159178aa6a38ecc116a504b9f09b8de667a25ba4 in flume&apos;s branch refs/heads/flume-1.6 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hshreedharan&quot; class=&quot;user-hover&quot; rel=&quot;hshreedharan&quot;&gt;hshreedharan&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=159178a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=159178a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2556&quot; title=&quot;TestBucketPath.testDateFormatHours fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2556&quot;&gt;&lt;del&gt;FLUME-2556&lt;/del&gt;&lt;/a&gt;. BucketWriter DateFormat test fails intermittently.&lt;/p&gt;

&lt;p&gt;(Johny Rufus via Hari)&lt;/p&gt;</comment>
                            <comment id="14252293" author="hshreedharan" created="Thu, 18 Dec 2014 21:29:56 +0000"  >&lt;p&gt;Committed! Thanks Johny and Lenny!&lt;/p&gt;</comment>
                            <comment id="14252435" author="hudson" created="Thu, 18 Dec 2014 22:35:04 +0000"  >&lt;p&gt;UNSTABLE: Integrated in flume-trunk #705 (See &lt;a href=&quot;https://builds.apache.org/job/flume-trunk/705/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/flume-trunk/705/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2556&quot; title=&quot;TestBucketPath.testDateFormatHours fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2556&quot;&gt;&lt;del&gt;FLUME-2556&lt;/del&gt;&lt;/a&gt;. BucketWriter DateFormat test fails intermittently. (hshreedharan: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=84465664c21ed0a1261f015a010b94a98153c8d7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=84465664c21ed0a1261f015a010b94a98153c8d7&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;flume-ng-core/src/test/java/org/apache/flume/formatter/output/TestBucketPath.java&lt;/li&gt;
	&lt;li&gt;flume-ng-core/src/main/java/org/apache/flume/formatter/output/BucketPath.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14252448" author="hudson" created="Thu, 18 Dec 2014 22:42:52 +0000"  >&lt;p&gt;SUCCESS: Integrated in Flume-trunk-hbase-98 #62 (See &lt;a href=&quot;https://builds.apache.org/job/Flume-trunk-hbase-98/62/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Flume-trunk-hbase-98/62/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2556&quot; title=&quot;TestBucketPath.testDateFormatHours fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2556&quot;&gt;&lt;del&gt;FLUME-2556&lt;/del&gt;&lt;/a&gt;. BucketWriter DateFormat test fails intermittently. (hshreedharan: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=84465664c21ed0a1261f015a010b94a98153c8d7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=84465664c21ed0a1261f015a010b94a98153c8d7&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;flume-ng-core/src/test/java/org/apache/flume/formatter/output/TestBucketPath.java&lt;/li&gt;
	&lt;li&gt;flume-ng-core/src/main/java/org/apache/flume/formatter/output/BucketPath.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12688066" name="FLUME-2556.patch" size="1998" author="jrufus" created="Thu, 18 Dec 2014 17:03:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22jbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>