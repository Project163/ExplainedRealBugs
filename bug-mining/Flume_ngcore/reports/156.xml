<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:57:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLUME-2487] SyslogParser has rounding errors in timestamp parsing</title>
                <link>https://issues.apache.org/jira/browse/FLUME-2487</link>
                <project id="12311321" key="FLUME">Flume</project>
                    <description>
&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/Stratio/flume/jobs/36847695#L6180&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/Stratio/flume/jobs/36847695#L6180&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;testMultiplePorts(org.apache.flume.source.TestMultiportSyslogTCPSource) Time elapsed: 2465 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!

org.junit.ComparisonFailure: Timestamps must match expected:&amp;lt;141223934050[2]&amp;gt; but was:&amp;lt;141223934050[1]&amp;gt;

at org.junit.Assert.assertEquals(Assert.java:125)

at org.apache.flume.source.TestMultiportSyslogTCPSource.testMultiplePorts(TestMultiportSyslogTCPSource.java:156)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:606)

at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)

at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)

at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)

at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)

at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)

at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)

at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)

at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)

at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)

at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)

at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)

at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)

at org.junit.runners.ParentRunner.run(ParentRunner.java:300)

at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)

at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)

at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:606)

at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)

at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)

at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)

at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)

at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12745445">FLUME-2487</key>
            <summary>SyslogParser has rounding errors in timestamp parsing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="smolav">Santiago M. Mola</assignee>
                                    <reporter username="smolav">Santiago M. Mola</reporter>
                        <labels>
                            <label>test-fail</label>
                    </labels>
                <created>Thu, 2 Oct 2014 09:02:59 +0000</created>
                <updated>Thu, 20 Nov 2014 05:43:34 +0000</updated>
                            <resolved>Thu, 20 Nov 2014 04:08:05 +0000</resolved>
                                    <version>1.5.0.1</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>Sinks+Sources</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14181374" author="smolav" created="Thu, 23 Oct 2014 14:12:47 +0000"  >&lt;p&gt;This was a precision error produced by the use of floating point arithmetic during parsing.&lt;/p&gt;</comment>
                            <comment id="14188260" author="paliwalashish" created="Wed, 29 Oct 2014 11:36:36 +0000"  >&lt;p&gt;testMultiplePorts() test passes at my end. How can I reproduce the error mentioned?&lt;/p&gt;</comment>
                            <comment id="14206507" author="smolav" created="Tue, 11 Nov 2014 15:02:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashishpaliwal&quot; class=&quot;user-hover&quot; rel=&quot;ashishpaliwal&quot;&gt;ashishpaliwal&lt;/a&gt; Given the non-deterministic nature of the test (dependent of the time its run), chances are that you never get this error running the test. But the bug is clearly visible in the code: floating point numbers are not exact and they lead to rounding errors. This is a well-known fact. Just run this yourself:&lt;/p&gt;

&lt;p&gt;  @Test&lt;br/&gt;
  public void testXXX() {&lt;br/&gt;
    for (long i = 100; i &amp;lt; 999; i++) {&lt;br/&gt;
      float frac = Float.parseFloat(String.format(&quot;.%d&quot;, i));&lt;br/&gt;
      float multiplied = (frac * 1000f);&lt;br/&gt;
      long milliseconds = (long) multiplied;&lt;br/&gt;
      if (i != milliseconds) &lt;/p&gt;
{
        System.out.println(&quot;PRECISION ERROR: &quot; + i + &quot; | &quot; + milliseconds + &quot; | &quot; + frac + &quot; | &quot; + multiplied);
      }
&lt;p&gt;    }&lt;br/&gt;
  }&lt;/p&gt;

&lt;p&gt;Output:&lt;br/&gt;
PRECISION ERROR: 251 | 250 | 0.251 | 250.99998&lt;br/&gt;
PRECISION ERROR: 253 | 252 | 0.253 | 252.99998&lt;br/&gt;
PRECISION ERROR: 502 | 501 | 0.502 | 501.99997&lt;br/&gt;
PRECISION ERROR: 506 | 505 | 0.506 | 505.99997&lt;br/&gt;
PRECISION ERROR: 511 | 510 | 0.511 | 510.99997&lt;/p&gt;


&lt;p&gt;This code needs to use integer arithmetic or BigDecimal. My patch uses just integer arithmetic, but I can write one to use BigDecimal if that&apos;s preferred.&lt;/p&gt;</comment>
                            <comment id="14206521" author="smolav" created="Tue, 11 Nov 2014 15:07:53 +0000"  >&lt;p&gt;Patch updated with test case that may prove the bug.&lt;/p&gt;</comment>
                            <comment id="14218966" author="roshan_naik" created="Thu, 20 Nov 2014 03:57:16 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14218975" author="jira-bot" created="Thu, 20 Nov 2014 04:07:12 +0000"  >&lt;p&gt;Commit fdb51b2af879f9fb98ffe209068a95424f700e69 in flume&apos;s branch refs/heads/flume-1.6 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roshan_naik&quot; class=&quot;user-hover&quot; rel=&quot;roshan_naik&quot;&gt;roshan_naik&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=fdb51b2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=fdb51b2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2487&quot; title=&quot;SyslogParser has rounding errors in timestamp parsing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2487&quot;&gt;&lt;del&gt;FLUME-2487&lt;/del&gt;&lt;/a&gt;. SyslogParser has rounding errors in timestamp parsing&lt;/p&gt;

&lt;p&gt;(Santiago M. Mola via Roshan Naik)&lt;/p&gt;</comment>
                            <comment id="14218976" author="jira-bot" created="Thu, 20 Nov 2014 04:07:19 +0000"  >&lt;p&gt;Commit 55a4666434d892f838208b315cd9ba06ea07659b in flume&apos;s branch refs/heads/trunk from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roshan_naik&quot; class=&quot;user-hover&quot; rel=&quot;roshan_naik&quot;&gt;roshan_naik&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=55a4666&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=flume.git;h=55a4666&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2487&quot; title=&quot;SyslogParser has rounding errors in timestamp parsing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2487&quot;&gt;&lt;del&gt;FLUME-2487&lt;/del&gt;&lt;/a&gt;. SyslogParser has rounding errors in timestamp parsing&lt;/p&gt;

&lt;p&gt;(Santiago M. Mola via Roshan Naik)&lt;/p&gt;</comment>
                            <comment id="14218978" author="roshan_naik" created="Thu, 20 Nov 2014 04:08:05 +0000"  >&lt;p&gt;Committed. Thanks Santiago.&lt;/p&gt;</comment>
                            <comment id="14219033" author="hudson" created="Thu, 20 Nov 2014 05:42:55 +0000"  >&lt;p&gt;SUCCESS: Integrated in flume-trunk #699 (See &lt;a href=&quot;https://builds.apache.org/job/flume-trunk/699/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/flume-trunk/699/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2487&quot; title=&quot;SyslogParser has rounding errors in timestamp parsing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2487&quot;&gt;&lt;del&gt;FLUME-2487&lt;/del&gt;&lt;/a&gt;. SyslogParser has rounding errors in timestamp parsing (roshan: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=55a4666434d892f838208b315cd9ba06ea07659b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=55a4666434d892f838208b315cd9ba06ea07659b&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;flume-ng-core/src/test/java/org/apache/flume/source/TestSyslogParser.java&lt;/li&gt;
	&lt;li&gt;flume-ng-core/src/main/java/org/apache/flume/source/SyslogParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14219036" author="hudson" created="Thu, 20 Nov 2014 05:43:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in Flume-trunk-hbase-98 #56 (See &lt;a href=&quot;https://builds.apache.org/job/Flume-trunk-hbase-98/56/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Flume-trunk-hbase-98/56/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-2487&quot; title=&quot;SyslogParser has rounding errors in timestamp parsing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-2487&quot;&gt;&lt;del&gt;FLUME-2487&lt;/del&gt;&lt;/a&gt;. SyslogParser has rounding errors in timestamp parsing (roshan: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=55a4666434d892f838208b315cd9ba06ea07659b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=55a4666434d892f838208b315cd9ba06ea07659b&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;flume-ng-core/src/main/java/org/apache/flume/source/SyslogParser.java&lt;/li&gt;
	&lt;li&gt;flume-ng-core/src/test/java/org/apache/flume/source/TestSyslogParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12680792" name="FLUME-2487-0.patch" size="2413" author="smolav" created="Tue, 11 Nov 2014 15:07:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20pwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>