<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:56:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLUME-1766] AvroSource throws confusing exception when configured without a port</title>
                <link>https://issues.apache.org/jira/browse/FLUME-1766</link>
                <project id="12311321" key="FLUME">Flume</project>
                    <description>&lt;p&gt;2012-12-03 18:25:08,210 (conf-file-poller-0) &lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG - org.apache.flume.source.DefaultSourceFactory.create(DefaultSourceFactory.java:74)&amp;#93;&lt;/span&gt; Creating instance of source src-1, type AVRO&lt;br/&gt;
2012-12-03 18:25:08,235 (conf-file-poller-0) &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR - org.apache.flume.conf.file.AbstractFileConfigurationProvider$FileWatcherRunnable.run(AbstractFileConfigurationProvider.java:204)&amp;#93;&lt;/span&gt; Failed to load configuration data. Exception follows.&lt;br/&gt;
java.lang.NumberFormatException: null&lt;br/&gt;
	at java.lang.Integer.parseInt(Integer.java:417)&lt;br/&gt;
	at java.lang.Integer.parseInt(Integer.java:499)&lt;br/&gt;
	at org.apache.flume.source.AvroSource.configure(AvroSource.java:126)&lt;br/&gt;
	at org.apache.flume.conf.Configurables.configure(Configurables.java:41)&lt;br/&gt;
	at org.apache.flume.conf.properties.PropertiesFileConfigurationProvider.loadSources(PropertiesFileConfigurationProvider.java:323)&lt;br/&gt;
	at org.apache.flume.conf.properties.PropertiesFileConfigurationProvider.load(PropertiesFileConfigurationProvider.java:222)&lt;br/&gt;
	at org.apache.flume.conf.file.AbstractFileConfigurationProvider.doLoad(AbstractFileConfigurationProvider.java:123)&lt;br/&gt;
	at org.apache.flume.conf.file.AbstractFileConfigurationProvider.access$300(AbstractFileConfigurationProvider.java:38)&lt;br/&gt;
	at org.apache.flume.conf.file.AbstractFileConfigurationProvider$FileWatcherRunnable.run(AbstractFileConfigurationProvider.java:202)&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)&lt;br/&gt;
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
^C2012-12-03 18:25:17,989 (node-shutdownHook) &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO - org.apache.flume.node.FlumeNode.stop(FlumeNode.java:67)&amp;#93;&lt;/span&gt; Flume node stopping - agent&lt;/p&gt;</description>
                <environment></environment>
        <key id="12618677">FLUME-1766</key>
            <summary>AvroSource throws confusing exception when configured without a port</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jlord">Jeff Lord</assignee>
                                    <reporter username="mpercy">Mike Percy</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Tue, 4 Dec 2012 02:29:49 +0000</created>
                <updated>Sat, 8 Dec 2012 01:32:44 +0000</updated>
                            <resolved>Fri, 7 Dec 2012 19:33:53 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Sinks+Sources</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13510239" author="jlord" created="Wed, 5 Dec 2012 03:20:28 +0000"  >&lt;p&gt;Local Test Successful Output - &lt;/p&gt;

&lt;p&gt;2012-12-04 19:13:56,553 (conf-file-poller-0) &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR - org.apache.flume.node.PollingPropertiesFileConfigurationProvider$FileWatcherRunnable.run(PollingPropertiesFileConfigurationProvider.java:142)&amp;#93;&lt;/span&gt; Failed to load configuration data. Exception follows.&lt;br/&gt;
java.lang.IllegalArgumentException: Required parameter port must exist and may not be null&lt;/p&gt;</comment>
                            <comment id="13510267" author="mpercy" created="Wed, 5 Dec 2012 04:29:35 +0000"  >&lt;p&gt;Hi Jeff, thanks for this patch!&lt;/p&gt;

&lt;p&gt;Since you are essentially defining constants (portKey, bindKey), please declare them in all-caps, like the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;private final static String PORT_KEY = &quot;port&quot;;
private final static String BIND_KEY = &quot;bind&quot;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and then use those constants in the rest of the configure() method. For example, instead of&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;port = context.getInteger(&quot;port&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;prefer:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;port = context.getInteger(PORT_KEY);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Finally, please make sure your indentation is consistent with the rest of the file. Flume uses 2 spaces everywhere.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13510276" author="hshreedharan" created="Wed, 5 Dec 2012 04:49:25 +0000"  >&lt;p&gt;Also, currently bind is not a required value (as of v1.3.0). This patch makes it a required value - which we cannot do in a point release. And frankly, I don&apos;t think it should be required, it should be optional as it is now.&lt;/p&gt;</comment>
                            <comment id="13510310" author="jlord" created="Wed, 5 Dec 2012 06:43:09 +0000"  >&lt;p&gt;Ok. Feedback has been incorporated. &lt;br/&gt;
Regarding optional bind, it looks like this value is also assigned to hostname and there is a check in LifecycleSupervisor which looks for that.&lt;/p&gt;

&lt;p&gt;2012-12-04 22:33:04,356 (lifecycleSupervisor-1-3) &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR - org.apache.flume.lifecycle.LifecycleSupervisor$MonitorRunnable.run(LifecycleSupervisor.java:238)&amp;#93;&lt;/span&gt; Unable to start EventDrivenSourceRunner: { source:Avro source avrosource-1: &lt;/p&gt;
{ bindAddress: null, port: 4141 }
&lt;p&gt; } - Exception follows.&lt;br/&gt;
java.lang.IllegalArgumentException: hostname can&apos;t be null&lt;/p&gt;</comment>
                            <comment id="13510317" author="mpercy" created="Wed, 5 Dec 2012 06:47:32 +0000"  >&lt;p&gt;Hari, are you sure?&lt;/p&gt;</comment>
                            <comment id="13510329" author="hshreedharan" created="Wed, 5 Dec 2012 07:12:02 +0000"  >&lt;p&gt;It seems like we check for hostname being null in the start method. I checked the configure method where the configuration is validated, so that the source can be removed if the hostname is null (the config system will remove the source if it throws an exception in the configure method). So we should move the check for hostname being non-null to the configure method, so the config system can remove the component when the configure method throws. Jeff - it would be nice to add that to this patch as well. Otherwise the lifecycle supervisor will try to start the component(there is some hack I put in for an error state, so it does not throw every 3 seconds - but I&apos;d rather remove the component than use up resources).&lt;/p&gt;</comment>
                            <comment id="13510330" author="hshreedharan" created="Wed, 5 Dec 2012 07:16:28 +0000"  >&lt;p&gt;Looks like this is the code in the start method that throws:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(maxThreads &amp;lt;= 0) {
      server = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NettyServer(responder,
              &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; InetSocketAddress(bindAddress, port));
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      server = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NettyServer(responder, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; InetSocketAddress(bindAddress, port),
              &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NioServerSocketChannelFactory(
                      Executors.newCachedThreadPool(),
                      Executors.newFixedThreadPool(maxThreads)));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Either we should check hostname is not null or not empty in the configure method, or we can set &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;bindAddress = InetAddress.getLocalHost().getCanonicalHostName();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also the LifecycleSupervisor does not check for the hostname, it simply calls start method, which is throwing in this case, which the LifecycleSupervisor logs. LifecycleSupervisor is not really &quot;aware&quot; of any components.&lt;/p&gt;</comment>
                            <comment id="13510767" author="mpercy" created="Wed, 5 Dec 2012 21:11:22 +0000"  >&lt;p&gt;I can see the usability benefit of auto-generating a default. Forcing the user to be explicit about which interface(s) to bind to is good security practice though, IMHO.&lt;/p&gt;</comment>
                            <comment id="13510771" author="hshreedharan" created="Wed, 5 Dec 2012 21:13:09 +0000"  >&lt;p&gt;I don&apos;t mind either, but this check must be done in the configure() method, not in start().&lt;/p&gt;</comment>
                            <comment id="13526574" author="jlord" created="Fri, 7 Dec 2012 17:49:57 +0000"  >&lt;p&gt;Added back in the check for bindAddress&lt;/p&gt;</comment>
                            <comment id="13526686" author="mpercy" created="Fri, 7 Dec 2012 19:31:45 +0000"  >&lt;p&gt;+1, looks good!&lt;/p&gt;</comment>
                            <comment id="13526688" author="mpercy" created="Fri, 7 Dec 2012 19:33:45 +0000"  >&lt;p&gt;Patch committed. Thank you for your contribution, Jeff!&lt;/p&gt;

&lt;p&gt;Trunk rev: aad551d3f45687193ef3323ba6a4584c15c6ad53&lt;/p&gt;</comment>
                            <comment id="13526693" author="brocknoland" created="Fri, 7 Dec 2012 19:36:15 +0000"  >&lt;p&gt;Nice work Jeff! Looks like this is missing from trunk?&lt;/p&gt;</comment>
                            <comment id="13526699" author="mpercy" created="Fri, 7 Dec 2012 19:39:55 +0000"  >&lt;p&gt;Oops i think i mistyped my password when pushing to trunk. (embarrassed)&lt;/p&gt;

&lt;p&gt;Fixed now. Thanks for the catch Brock!&lt;/p&gt;</comment>
                            <comment id="13526705" author="brocknoland" created="Fri, 7 Dec 2012 19:42:47 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13526962" author="hudson" created="Sat, 8 Dec 2012 01:32:44 +0000"  >&lt;p&gt;Integrated in flume-trunk #337 (See &lt;a href=&quot;https://builds.apache.org/job/flume-trunk/337/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/flume-trunk/337/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLUME-1766&quot; title=&quot;AvroSource throws confusing exception when configured without a port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLUME-1766&quot;&gt;&lt;del&gt;FLUME-1766&lt;/del&gt;&lt;/a&gt;. AvroSource throws confusing exception when configured without a port. (Revision aad551d3f45687193ef3323ba6a4584c15c6ad53)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
mpercy : &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=aad551d3f45687193ef3323ba6a4584c15c6ad53&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/flume/repo?p=flume.git&amp;amp;a=commit&amp;amp;h=aad551d3f45687193ef3323ba6a4584c15c6ad53&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;flume-ng-core/src/main/java/org/apache/flume/source/AvroSource.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12556047" name="FLUME-1766-1.patch" size="1519" author="jlord" created="Wed, 5 Dec 2012 03:21:18 +0000"/>
                            <attachment id="12556062" name="FLUME-1766-2.patch" size="1559" author="jlord" created="Wed, 5 Dec 2012 06:43:09 +0000"/>
                            <attachment id="12559908" name="FLUME-1766-3.patch" size="1569" author="jlord" created="Fri, 7 Dec 2012 17:49:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>295845</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i141kv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231718</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>