{"url":"https://api.github.com/repos/doctrine/orm/issues/9095","repository_url":"https://api.github.com/repos/doctrine/orm","labels_url":"https://api.github.com/repos/doctrine/orm/issues/9095/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/orm/issues/9095/comments","events_url":"https://api.github.com/repos/doctrine/orm/issues/9095/events","html_url":"https://github.com/doctrine/orm/issues/9095","id":1016541138,"node_id":"I_kwDOAAkff848ly_S","number":9095,"title":"Regression: abstract entities in the middle of a hierarchy need to be part of discriminator map","user":{"login":"BenMorel","id":1952838,"node_id":"MDQ6VXNlcjE5NTI4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/1952838?v=4","gravatar_id":"","url":"https://api.github.com/users/BenMorel","html_url":"https://github.com/BenMorel","followers_url":"https://api.github.com/users/BenMorel/followers","following_url":"https://api.github.com/users/BenMorel/following{/other_user}","gists_url":"https://api.github.com/users/BenMorel/gists{/gist_id}","starred_url":"https://api.github.com/users/BenMorel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BenMorel/subscriptions","organizations_url":"https://api.github.com/users/BenMorel/orgs","repos_url":"https://api.github.com/users/BenMorel/repos","events_url":"https://api.github.com/users/BenMorel/events{/privacy}","received_events_url":"https://api.github.com/users/BenMorel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":296201252,"node_id":"MDU6TGFiZWwyOTYyMDEyNTI=","url":"https://api.github.com/repos/doctrine/orm/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-10-05T16:39:13Z","updated_at":"2023-02-06T07:23:16Z","closed_at":"2023-02-06T07:23:16Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### BC Break Report\r\n\r\n<!-- Fill in the relevant information below to help triage your issue. -->\r\n\r\n|    Q        |   A\r\n|------------ | ------\r\n| BC Break    | yes\r\n| Version     | 2.9.x, 2.10.x\r\n\r\n#### Summary\r\n\r\nAs mentioned in https://github.com/doctrine/orm/issues/8771#issuecomment-933454924, there is a regression that affects both `2.9` and `2.10`:\r\n\r\nIf an entity hierarchy has an abstract entity class in the middle of the hierarchy, Doctrine complains that it must be part of the discriminator map. Example:\r\n\r\n- abstract class `A`\r\n    - abstract class `B`\r\n        - class `C`\r\n\r\n`bin/console doctrine:schema:validate` reports:\r\n\r\n>  [FAIL] The entity-class B mapping is invalid:\r\n> * Entity class 'B' is part of inheritance hierarchy, but is not mapped in the root entity 'A' discriminator map. All subclasses must be listed in the discriminator map.\r\n\r\nThis doesn't make sense, as there cannot be an entry in the database for an abstract entity class.\r\n\r\n**This was working fine up to Doctrine `2.8`.**\r\n\r\nThe quick fix for those affected is to add \"fake\" entries to the discriminator map for abstract child entities, that do not have an equivalent in the database `ENUM`; which is rather ugly.\r\n","closed_by":{"login":"greg0ire","id":657779,"node_id":"MDQ6VXNlcjY1Nzc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/657779?v=4","gravatar_id":"","url":"https://api.github.com/users/greg0ire","html_url":"https://github.com/greg0ire","followers_url":"https://api.github.com/users/greg0ire/followers","following_url":"https://api.github.com/users/greg0ire/following{/other_user}","gists_url":"https://api.github.com/users/greg0ire/gists{/gist_id}","starred_url":"https://api.github.com/users/greg0ire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg0ire/subscriptions","organizations_url":"https://api.github.com/users/greg0ire/orgs","repos_url":"https://api.github.com/users/greg0ire/repos","events_url":"https://api.github.com/users/greg0ire/events{/privacy}","received_events_url":"https://api.github.com/users/greg0ire/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doctrine/orm/issues/9095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/orm/issues/9095/timeline","performed_via_github_app":null,"state_reason":"completed"}